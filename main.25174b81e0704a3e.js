(self.webpackChunkangular_plotly=self.webpackChunkangular_plotly||[]).push([[179],{958:(vd,x,oe)=>{"use strict";function ae(v){return"function"==typeof v}function g(v){const T=v(z=>{Error.call(z),z.stack=(new Error).stack});return T.prototype=Object.create(Error.prototype),T.prototype.constructor=T,T}const m=g(v=>function(T){v(this),this.message=T?`${T.length} errors occurred during unsubscription:\n${T.map((z,J)=>`${J+1}) ${z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=T});function w(v,b){if(v){const T=v.indexOf(b);0<=T&&v.splice(T,1)}}class y{constructor(b){this.initialTeardown=b,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let b;if(!this.closed){this.closed=!0;const{_parentage:T}=this;if(T)if(this._parentage=null,Array.isArray(T))for(const le of T)le.remove(this);else T.remove(this);const{initialTeardown:z}=this;if(ae(z))try{z()}catch(le){b=le instanceof m?le.errors:[le]}const{_teardowns:J}=this;if(J){this._teardowns=null;for(const le of J)try{n(le)}catch(be){b=null!=b?b:[],be instanceof m?b=[...b,...be.errors]:b.push(be)}}if(b)throw new m(b)}}add(b){var T;if(b&&b!==this)if(this.closed)n(b);else{if(b instanceof y){if(b.closed||b._hasParent(this))return;b._addParent(this)}(this._teardowns=null!==(T=this._teardowns)&&void 0!==T?T:[]).push(b)}}_hasParent(b){const{_parentage:T}=this;return T===b||Array.isArray(T)&&T.includes(b)}_addParent(b){const{_parentage:T}=this;this._parentage=Array.isArray(T)?(T.push(b),T):T?[T,b]:b}_removeParent(b){const{_parentage:T}=this;T===b?this._parentage=null:Array.isArray(T)&&w(T,b)}remove(b){const{_teardowns:T}=this;T&&w(T,b),b instanceof y&&b._removeParent(this)}}y.EMPTY=(()=>{const v=new y;return v.closed=!0,v})();const e=y.EMPTY;function r(v){return v instanceof y||v&&"closed"in v&&ae(v.remove)&&ae(v.add)&&ae(v.unsubscribe)}function n(v){ae(v)?v():v.unsubscribe()}const a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},t={setTimeout(...v){const{delegate:b}=t;return((null==b?void 0:b.setTimeout)||setTimeout)(...v)},clearTimeout(v){const{delegate:b}=t;return((null==b?void 0:b.clearTimeout)||clearTimeout)(v)},delegate:void 0};function p(v){t.setTimeout(()=>{const{onUnhandledError:b}=a;if(!b)throw v;b(v)})}function u(){}const i=l("C",void 0,void 0);function l(v,b,T){return{kind:v,value:b,error:T}}let h=null;function d(v){if(a.useDeprecatedSynchronousErrorHandling){const b=!h;if(b&&(h={errorThrown:!1,error:null}),v(),b){const{errorThrown:T,error:z}=h;if(h=null,T)throw z}}else v()}class _ extends y{constructor(b){super(),this.isStopped=!1,b?(this.destination=b,r(b)&&b.add(this)):this.destination=E}static create(b,T,z){return new s(b,T,z)}next(b){this.isStopped?A(function f(v){return l("N",v,void 0)}(b),this):this._next(b)}error(b){this.isStopped?A(function c(v){return l("E",void 0,v)}(b),this):(this.isStopped=!0,this._error(b))}complete(){this.isStopped?A(i,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(b){this.destination.next(b)}_error(b){try{this.destination.error(b)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class s extends _{constructor(b,T,z){let J;if(super(),ae(b))J=b;else if(b){let le;({next:J,error:T,complete:z}=b),this&&a.useDeprecatedNextContext?(le=Object.create(b),le.unsubscribe=()=>this.unsubscribe()):le=b,J=null==J?void 0:J.bind(le),T=null==T?void 0:T.bind(le),z=null==z?void 0:z.bind(le)}this.destination={next:J?k(J):u,error:k(null!=T?T:M),complete:z?k(z):u}}}function k(v,b){return(...T)=>{try{v(...T)}catch(z){a.useDeprecatedSynchronousErrorHandling?function o(v){a.useDeprecatedSynchronousErrorHandling&&h&&(h.errorThrown=!0,h.error=v)}(z):p(z)}}}function M(v){throw v}function A(v,b){const{onStoppedNotification:T}=a;T&&t.setTimeout(()=>T(v,b))}const E={closed:!0,next:u,error:M,complete:u},I="function"==typeof Symbol&&Symbol.observable||"@@observable";function C(v){return v}let D=(()=>{class v{constructor(T){T&&(this._subscribe=T)}lift(T){const z=new v;return z.source=this,z.operator=T,z}subscribe(T,z,J){const le=function j(v){return v&&v instanceof _||function B(v){return v&&ae(v.next)&&ae(v.error)&&ae(v.complete)}(v)&&r(v)}(T)?T:new s(T,z,J);return d(()=>{const{operator:be,source:Oe}=this;le.add(be?be.call(le,Oe):Oe?this._subscribe(le):this._trySubscribe(le))}),le}_trySubscribe(T){try{return this._subscribe(T)}catch(z){T.error(z)}}forEach(T,z){return new(z=L(z))((J,le)=>{let be;be=this.subscribe(Oe=>{try{T(Oe)}catch(Ye){le(Ye),null==be||be.unsubscribe()}},le,J)})}_subscribe(T){var z;return null===(z=this.source)||void 0===z?void 0:z.subscribe(T)}[I](){return this}pipe(...T){return function O(v){return 0===v.length?C:1===v.length?v[0]:function(T){return v.reduce((z,J)=>J(z),T)}}(T)(this)}toPromise(T){return new(T=L(T))((z,J)=>{let le;this.subscribe(be=>le=be,be=>J(be),()=>z(le))})}}return v.create=b=>new v(b),v})();function L(v){var b;return null!==(b=null!=v?v:a.Promise)&&void 0!==b?b:Promise}const W=g(v=>function(){v(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Y=(()=>{class v extends D{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(T){const z=new Q(this,this);return z.operator=T,z}_throwIfClosed(){if(this.closed)throw new W}next(T){d(()=>{if(this._throwIfClosed(),!this.isStopped){const z=this.observers.slice();for(const J of z)J.next(T)}})}error(T){d(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=T;const{observers:z}=this;for(;z.length;)z.shift().error(T)}})}complete(){d(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:T}=this;for(;T.length;)T.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var T;return(null===(T=this.observers)||void 0===T?void 0:T.length)>0}_trySubscribe(T){return this._throwIfClosed(),super._trySubscribe(T)}_subscribe(T){return this._throwIfClosed(),this._checkFinalizedStatuses(T),this._innerSubscribe(T)}_innerSubscribe(T){const{hasError:z,isStopped:J,observers:le}=this;return z||J?e:(le.push(T),new y(()=>w(le,T)))}_checkFinalizedStatuses(T){const{hasError:z,thrownError:J,isStopped:le}=this;z?T.error(J):le&&T.complete()}asObservable(){const T=new D;return T.source=this,T}}return v.create=(b,T)=>new Q(b,T),v})();class Q extends Y{constructor(b,T){super(),this.destination=b,this.source=T}next(b){var T,z;null===(z=null===(T=this.destination)||void 0===T?void 0:T.next)||void 0===z||z.call(T,b)}error(b){var T,z;null===(z=null===(T=this.destination)||void 0===T?void 0:T.error)||void 0===z||z.call(T,b)}complete(){var b,T;null===(T=null===(b=this.destination)||void 0===b?void 0:b.complete)||void 0===T||T.call(b)}_subscribe(b){var T,z;return null!==(z=null===(T=this.source)||void 0===T?void 0:T.subscribe(b))&&void 0!==z?z:e}}function ne(v){return ae(null==v?void 0:v.lift)}function X(v){return b=>{if(ne(b))return b.lift(function(T){try{return v(T,this)}catch(z){this.error(z)}});throw new TypeError("Unable to lift unknown Observable type")}}class $ extends _{constructor(b,T,z,J,le){super(b),this.onFinalize=le,this._next=T?function(be){try{T(be)}catch(Oe){b.error(Oe)}}:super._next,this._error=J?function(be){try{J(be)}catch(Oe){b.error(Oe)}finally{this.unsubscribe()}}:super._error,this._complete=z?function(){try{z()}catch(be){b.error(be)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var b;const{closed:T}=this;super.unsubscribe(),!T&&(null===(b=this.onFinalize)||void 0===b||b.call(this))}}function re(v,b){return X((T,z)=>{let J=0;T.subscribe(new $(z,le=>{z.next(v.call(b,le,J++))}))})}function Ie(v){return this instanceof Ie?(this.v=v,this):new Ie(v)}function Be(v,b,T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J,z=T.apply(v,b||[]),le=[];return J={},be("next"),be("throw"),be("return"),J[Symbol.asyncIterator]=function(){return this},J;function be(An){z[An]&&(J[An]=function(zn){return new Promise(function(gr,Xr){le.push([An,zn,gr,Xr])>1||Oe(An,zn)})})}function Oe(An,zn){try{!function Ye(An){An.value instanceof Ie?Promise.resolve(An.value.v).then(ct,Nt):en(le[0][2],An)}(z[An](zn))}catch(gr){en(le[0][3],gr)}}function ct(An){Oe("next",An)}function Nt(An){Oe("throw",An)}function en(An,zn){An(zn),le.shift(),le.length&&Oe(le[0][0],le[0][1])}}function Te(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T,b=v[Symbol.asyncIterator];return b?b.call(v):(v=function xe(v){var b="function"==typeof Symbol&&Symbol.iterator,T=b&&v[b],z=0;if(T)return T.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&z>=v.length&&(v=void 0),{value:v&&v[z++],done:!v}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}(v),T={},z("next"),z("throw"),z("return"),T[Symbol.asyncIterator]=function(){return this},T);function z(le){T[le]=v[le]&&function(be){return new Promise(function(Oe,Ye){!function J(le,be,Oe,Ye){Promise.resolve(Ye).then(function(ct){le({value:ct,done:Oe})},be)}(Oe,Ye,(be=v[le](be)).done,be.value)})}}}const st=v=>v&&"number"==typeof v.length&&"function"!=typeof v;function Ve(v){return ae(null==v?void 0:v.then)}function $e(v){return ae(v[I])}function Qe(v){return Symbol.asyncIterator&&ae(null==v?void 0:v[Symbol.asyncIterator])}function tt(v){return new TypeError(`You provided ${null!==v&&"object"==typeof v?"an invalid object":`'${v}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const xt=function ut(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function kt(v){return ae(null==v?void 0:v[xt])}function Bt(v){return Be(this,arguments,function*(){const T=v.getReader();try{for(;;){const{value:z,done:J}=yield Ie(T.read());if(J)return yield Ie(void 0);yield yield Ie(z)}}finally{T.releaseLock()}})}function Rt(v){return ae(null==v?void 0:v.getReader)}function ft(v){if(v instanceof D)return v;if(null!=v){if($e(v))return function lt(v){return new D(b=>{const T=v[I]();if(ae(T.subscribe))return T.subscribe(b);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(v);if(st(v))return function Ft(v){return new D(b=>{for(let T=0;T<v.length&&!b.closed;T++)b.next(v[T]);b.complete()})}(v);if(Ve(v))return function Jt(v){return new D(b=>{v.then(T=>{b.closed||(b.next(T),b.complete())},T=>b.error(T)).then(null,p)})}(v);if(Qe(v))return dn(v);if(kt(v))return function ln(v){return new D(b=>{for(const T of v)if(b.next(T),b.closed)return;b.complete()})}(v);if(Rt(v))return function cn(v){return dn(Bt(v))}(v)}throw tt(v)}function dn(v){return new D(b=>{(function Tn(v,b){var T,z,J,le;return function se(v,b,T,z){return new(T||(T=Promise))(function(le,be){function Oe(Nt){try{ct(z.next(Nt))}catch(en){be(en)}}function Ye(Nt){try{ct(z.throw(Nt))}catch(en){be(en)}}function ct(Nt){Nt.done?le(Nt.value):function J(le){return le instanceof T?le:new T(function(be){be(le)})}(Nt.value).then(Oe,Ye)}ct((z=z.apply(v,b||[])).next())})}(this,void 0,void 0,function*(){try{for(T=Te(v);!(z=yield T.next()).done;)if(b.next(z.value),b.closed)return}catch(be){J={error:be}}finally{try{z&&!z.done&&(le=T.return)&&(yield le.call(T))}finally{if(J)throw J.error}}b.complete()})})(v,b).catch(T=>b.error(T))})}function nn(v,b,T,z=0,J=!1){const le=b.schedule(function(){T(),J?v.add(this.schedule(null,z)):this.unsubscribe()},z);if(v.add(le),!J)return le}function Ee(v,b,T=1/0){return ae(b)?Ee((z,J)=>re((le,be)=>b(z,le,J,be))(ft(v(z,J))),T):("number"==typeof b&&(T=b),X((z,J)=>function Me(v,b,T,z,J,le,be,Oe){const Ye=[];let ct=0,Nt=0,en=!1;const An=()=>{en&&!Ye.length&&!ct&&b.complete()},zn=Xr=>ct<z?gr(Xr):Ye.push(Xr),gr=Xr=>{le&&b.next(Xr),ct++;let ui=!1;ft(T(Xr,Nt++)).subscribe(new $(b,gi=>{null==J||J(gi),le?zn(gi):b.next(gi)},()=>{ui=!0},void 0,()=>{if(ui)try{for(ct--;Ye.length&&ct<z;){const gi=Ye.shift();be?nn(b,be,()=>gr(gi)):gr(gi)}An()}catch(gi){b.error(gi)}}))};return v.subscribe(new $(b,zn,()=>{en=!0,An()})),()=>{null==Oe||Oe()}}(z,J,v,T)))}function Se(v=1/0){return Ee(C,v)}const je=new D(v=>v.complete());function it(v){return v[v.length-1]}function vt(v){return function at(v){return v&&ae(v.schedule)}(it(v))?v.pop():void 0}function Wt(v,b=0){return X((T,z)=>{T.subscribe(new $(z,J=>nn(z,v,()=>z.next(J),b),()=>nn(z,v,()=>z.complete(),b),J=>nn(z,v,()=>z.error(J),b)))})}function gt(v,b=0){return X((T,z)=>{z.add(v.schedule(()=>T.subscribe(z),b))})}function Ne(v,b){if(!v)throw new Error("Iterable cannot be null");return new D(T=>{nn(T,b,()=>{const z=v[Symbol.asyncIterator]();nn(T,b,()=>{z.next().then(J=>{J.done?T.complete():T.next(J.value)})},0,!0)})})}function Mt(v,b){return b?function dt(v,b){if(null!=v){if($e(v))return function At(v,b){return ft(v).pipe(gt(b),Wt(b))}(v,b);if(st(v))return function Et(v,b){return new D(T=>{let z=0;return b.schedule(function(){z===v.length?T.complete():(T.next(v[z++]),T.closed||this.schedule())})})}(v,b);if(Ve(v))return function Zt(v,b){return ft(v).pipe(gt(b),Wt(b))}(v,b);if(Qe(v))return Ne(v,b);if(kt(v))return function Ct(v,b){return new D(T=>{let z;return nn(T,b,()=>{z=v[xt](),nn(T,b,()=>{let J,le;try{({value:J,done:le}=z.next())}catch(be){return void T.error(be)}le?T.complete():T.next(J)},0,!0)}),()=>ae(null==z?void 0:z.return)&&z.return()})}(v,b);if(Rt(v))return function et(v,b){return Ne(Bt(v),b)}(v,b)}throw tt(v)}(v,b):ft(v)}function Xt(v){return v<=0?()=>je:X((b,T)=>{let z=0;b.subscribe(new $(T,J=>{++z<=v&&(T.next(J),v<=z&&T.complete())}))})}function Qt(v,b,...T){return!0===b?(v(),null):!1===b?null:b(...T).pipe(Xt(1)).subscribe(()=>v())}function kn(v){for(let b in v)if(v[b]===kn)return b;throw Error("Could not find renamed property on target object.")}function gn(v){if("string"==typeof v)return v;if(Array.isArray(v))return"["+v.map(gn).join(", ")+"]";if(null==v)return""+v;if(v.overriddenName)return`${v.overriddenName}`;if(v.name)return`${v.name}`;const b=v.toString();if(null==b)return""+b;const T=b.indexOf("\n");return-1===T?b:b.substring(0,T)}function sn(v,b){return null==v||""===v?null===b?"":b:null==b||""===b?v:v+" "+b}const vn=kn({__forward_ref__:kn});function pn(v){return v.__forward_ref__=pn,v.toString=function(){return gn(this())},v}function Mn(v){return function Rn(v){return"function"==typeof v&&v.hasOwnProperty(vn)&&v.__forward_ref__===pn}(v)?v():v}class Hn extends Error{constructor(b,T){super(function rr(v,b){return`NG0${Math.abs(v)}${b?": "+b:""}`}(b,T)),this.code=b}}function er(v){return"string"==typeof v?v:null==v?"":String(v)}function Ir(v){return"function"==typeof v?v.name||v.toString():"object"==typeof v&&null!=v&&"function"==typeof v.type?v.type.name||v.type.toString():er(v)}function Dr(v,b){const T=b?` in ${b}`:"";throw new Hn(-201,`No provider for ${Ir(v)} found${T}`)}function jt(v,b){null==v&&function fn(v,b,T,z){throw new Error(`ASSERTION ERROR: ${v}`+(null==z?"":` [Expected=> ${T} ${z} ${b} <=Actual]`))}(b,v,null,"!=")}function Pn(v){return{token:v.token,providedIn:v.providedIn||null,factory:v.factory,value:void 0}}function Cn(v){return{providers:v.providers||[],imports:v.imports||[]}}function On(v){return Fn(v,pr)||Fn(v,Lr)}function Fn(v,b){return v.hasOwnProperty(b)?v[b]:null}function sr(v){return v&&(v.hasOwnProperty(yr)||v.hasOwnProperty(zr))?v[yr]:null}const pr=kn({\u0275prov:kn}),yr=kn({\u0275inj:kn}),Lr=kn({ngInjectableDef:kn}),zr=kn({ngInjectorDef:kn});var cr=(()=>((cr=cr||{})[cr.Default=0]="Default",cr[cr.Host=1]="Host",cr[cr.Self=2]="Self",cr[cr.SkipSelf=4]="SkipSelf",cr[cr.Optional=8]="Optional",cr))();let Yr;function ci(v){const b=Yr;return Yr=v,b}function Wi(v,b,T){const z=On(v);return z&&"root"==z.providedIn?void 0===z.value?z.value=z.factory():z.value:T&cr.Optional?null:void 0!==b?b:void Dr(gn(v),"Injector")}function Nr(v){return{toString:v}.toString()}var hi=(()=>((hi=hi||{})[hi.OnPush=0]="OnPush",hi[hi.Default=1]="Default",hi))(),Ia=(()=>{return(v=Ia||(Ia={}))[v.Emulated=0]="Emulated",v[v.None=2]="None",v[v.ShadowDom=3]="ShadowDom",Ia;var v})();const Po="undefined"!=typeof globalThis&&globalThis,os="undefined"!=typeof window&&window,Pa="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,oa=Po||"undefined"!=typeof global&&global||os||Pa,jo={},Ki=[],Uo=kn({\u0275cmp:kn}),ns=kn({\u0275dir:kn}),ss=kn({\u0275pipe:kn}),Oo=kn({\u0275mod:kn}),za=kn({\u0275fac:kn}),Co=kn({__NG_ELEMENT_ID__:kn});let Cl=0;function $s(v){return Nr(()=>{const T={},z={type:v.type,providersResolver:null,decls:v.decls,vars:v.vars,factory:null,template:v.template||null,consts:v.consts||null,ngContentSelectors:v.ngContentSelectors,hostBindings:v.hostBindings||null,hostVars:v.hostVars||0,hostAttrs:v.hostAttrs||null,contentQueries:v.contentQueries||null,declaredInputs:T,inputs:null,outputs:null,exportAs:v.exportAs||null,onPush:v.changeDetection===hi.OnPush,directiveDefs:null,pipeDefs:null,selectors:v.selectors||Ki,viewQuery:v.viewQuery||null,features:v.features||null,data:v.data||{},encapsulation:v.encapsulation||Ia.Emulated,id:"c",styles:v.styles||Ki,_:null,setInput:null,schemas:v.schemas||null,tView:null},J=v.directives,le=v.features,be=v.pipes;return z.id+=Cl++,z.inputs=Il(v.inputs,T),z.outputs=Il(v.outputs),le&&le.forEach(Oe=>Oe(z)),z.directiveDefs=J?()=>("function"==typeof J?J():J).map(ml):null,z.pipeDefs=be?()=>("function"==typeof be?be():be).map(Ks):null,z})}function ml(v){return co(v)||function $o(v){return v[ns]||null}(v)}function Ks(v){return function rs(v){return v[ss]||null}(v)}const Dl={};function ys(v){return Nr(()=>{const b={type:v.type,bootstrap:v.bootstrap||Ki,declarations:v.declarations||Ki,imports:v.imports||Ki,exports:v.exports||Ki,transitiveCompileScopes:null,schemas:v.schemas||null,id:v.id||null};return null!=v.id&&(Dl[v.id]=v.type),b})}function Il(v,b){if(null==v)return jo;const T={};for(const z in v)if(v.hasOwnProperty(z)){let J=v[z],le=J;Array.isArray(J)&&(le=J[1],J=J[0]),T[J]=z,b&&(b[J]=le)}return T}const Ja=$s;function co(v){return v[Uo]||null}function Vo(v,b){const T=v[Oo]||null;if(!T&&!0===b)throw new Error(`Type ${gn(v)} does not have '\u0275mod' property.`);return T}function na(v){return Array.isArray(v)&&"object"==typeof v[1]}function Ji(v){return Array.isArray(v)&&!0===v[1]}function Ta(v){return 0!=(8&v.flags)}function fo(v){return 2==(2&v.flags)}function xa(v){return null!==v.template}function Ga(v){return 0!=(512&v[2])}function oi(v,b){return v.hasOwnProperty(za)?v[za]:null}class Ai{constructor(b,T,z){this.previousValue=b,this.currentValue=T,this.firstChange=z}isFirstChange(){return this.firstChange}}function lr(){return Ti}function Ti(v){return v.type.prototype.ngOnChanges&&(v.setInput=li),$r}function $r(){const v=Yi(this),b=null==v?void 0:v.current;if(b){const T=v.previous;if(T===jo)v.previous=b;else for(let z in b)T[z]=b[z];v.current=null,this.ngOnChanges(b)}}function li(v,b,T,z){const J=Yi(v)||function sa(v,b){return v[_i]=b}(v,{previous:jo,current:null}),le=J.current||(J.current={}),be=J.previous,Oe=this.declaredInputs[T],Ye=be[Oe];le[Oe]=new Ai(Ye&&Ye.currentValue,b,be===jo),v[z]=b}lr.ngInherit=!0;const _i="__ngSimpleChanges__";function Yi(v){return v[_i]||null}let $i;function ga(v){return!!v.listen}const Vs={createRenderer:(v,b)=>function wi(){return void 0!==$i?$i:"undefined"!=typeof document?document:void 0}()};function Ra(v){for(;Array.isArray(v);)v=v[0];return v}function ia(v,b){return Ra(b[v.index])}function Ro(v,b){return v.data[b]}function eo(v,b){const T=b[v];return na(T)?T:T[0]}function Ha(v){return 4==(4&v[2])}function Wo(v){return 128==(128&v[2])}function fs(v,b){return null==b?null:v[b]}function jl(v){v[18]=0}function ko(v,b){v[5]+=b;let T=v,z=v[3];for(;null!==z&&(1===b&&1===T[5]||-1===b&&0===T[5]);)z[5]+=b,T=z,z=z[3]}const Qi={lFrame:Ae(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ul(){return Qi.bindingsEnabled}function Zr(){return Qi.lFrame.lView}function la(){return Qi.lFrame.tView}function Ao(){let v=Ca();for(;null!==v&&64===v.type;)v=v.parent;return v}function Ca(){return Qi.lFrame.currentTNode}function hs(v,b){const T=Qi.lFrame;T.currentTNode=v,T.isParent=b}function Js(){return Qi.lFrame.isParent}function xo(){Qi.lFrame.isParent=!1}function hl(){return Qi.isInCheckNoChangesMode}function yl(v){Qi.isInCheckNoChangesMode=v}function zs(){return Qi.lFrame.bindingIndex++}function Ju(v,b){const T=Qi.lFrame;T.bindingIndex=T.bindingRootIndex=v,pe(b)}function pe(v){Qi.lFrame.currentDirectiveIndex=v}function N(){return Qi.lFrame.currentQueryIndex}function V(v){Qi.lFrame.currentQueryIndex=v}function Z(v){const b=v[1];return 2===b.type?b.declTNode:1===b.type?v[6]:null}function fe(v,b,T){if(T&cr.SkipSelf){let J=b,le=v;for(;!(J=J.parent,null!==J||T&cr.Host||(J=Z(le),null===J||(le=le[15],10&J.type))););if(null===J)return!1;b=J,v=le}const z=Qi.lFrame=we();return z.currentTNode=b,z.lView=v,!0}function me(v){const b=we(),T=v[1];Qi.lFrame=b,b.currentTNode=T.firstChild,b.lView=v,b.tView=T,b.contextLView=v,b.bindingIndex=T.bindingStartIndex,b.inI18n=!1}function we(){const v=Qi.lFrame,b=null===v?null:v.child;return null===b?Ae(v):b}function Ae(v){const b={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:v,child:null,inI18n:!1};return null!==v&&(v.child=b),b}function Re(){const v=Qi.lFrame;return Qi.lFrame=v.parent,v.currentTNode=null,v.lView=null,v}const Xe=Re;function nt(){const v=Re();v.isParent=!0,v.tView=null,v.selectedIndex=-1,v.contextLView=null,v.elementDepthCount=0,v.currentDirectiveIndex=-1,v.currentNamespace=null,v.bindingRootIndex=-1,v.bindingIndex=-1,v.currentQueryIndex=0}function It(v){Qi.lFrame.selectedIndex=v}function Lt(){const v=Qi.lFrame;return Ro(v.tView,v.selectedIndex)}function jn(v,b){for(let T=b.directiveStart,z=b.directiveEnd;T<z;T++){const le=v.data[T].type.prototype,{ngAfterContentInit:be,ngAfterContentChecked:Oe,ngAfterViewInit:Ye,ngAfterViewChecked:ct,ngOnDestroy:Nt}=le;be&&(v.contentHooks||(v.contentHooks=[])).push(-T,be),Oe&&((v.contentHooks||(v.contentHooks=[])).push(T,Oe),(v.contentCheckHooks||(v.contentCheckHooks=[])).push(T,Oe)),Ye&&(v.viewHooks||(v.viewHooks=[])).push(-T,Ye),ct&&((v.viewHooks||(v.viewHooks=[])).push(T,ct),(v.viewCheckHooks||(v.viewCheckHooks=[])).push(T,ct)),null!=Nt&&(v.destroyHooks||(v.destroyHooks=[])).push(T,Nt)}}function Nn(v,b,T){Er(v,b,3,T)}function hr(v,b,T,z){(3&v[2])===T&&Er(v,b,T,z)}function dr(v,b){let T=v[2];(3&T)===b&&(T&=2047,T+=1,v[2]=T)}function Er(v,b,T,z){const le=null!=z?z:-1,be=b.length-1;let Oe=0;for(let Ye=void 0!==z?65535&v[18]:0;Ye<be;Ye++)if("number"==typeof b[Ye+1]){if(Oe=b[Ye],null!=z&&Oe>=z)break}else b[Ye]<0&&(v[18]+=65536),(Oe<le||-1==le)&&(wr(v,T,b,Ye),v[18]=(4294901760&v[18])+Ye+2),Ye++}function wr(v,b,T,z){const J=T[z]<0,le=T[z+1],Oe=v[J?-T[z]:T[z]];if(J){if(v[2]>>11<v[18]>>16&&(3&v[2])===b){v[2]+=2048;try{le.call(Oe)}finally{}}}else try{le.call(Oe)}finally{}}class pi{constructor(b,T,z){this.factory=b,this.resolving=!1,this.canSeeViewProviders=T,this.injectImpl=z}}function xi(v,b,T){const z=ga(v);let J=0;for(;J<T.length;){const le=T[J];if("number"==typeof le){if(0!==le)break;J++;const be=T[J++],Oe=T[J++],Ye=T[J++];z?v.setAttribute(b,Oe,Ye,be):b.setAttributeNS(be,Oe,Ye)}else{const be=le,Oe=T[++J];Bi(be)?z&&v.setProperty(b,be,Oe):z?v.setAttribute(b,be,Oe):b.setAttribute(be,Oe),J++}}return J}function Hi(v){return 3===v||4===v||6===v}function Bi(v){return 64===v.charCodeAt(0)}function ra(v,b){if(null!==b&&0!==b.length)if(null===v||0===v.length)v=b.slice();else{let T=-1;for(let z=0;z<b.length;z++){const J=b[z];"number"==typeof J?T=J:0===T||qi(v,T,J,null,-1===T||2===T?b[++z]:null)}}return v}function qi(v,b,T,z,J){let le=0,be=v.length;if(-1===b)be=-1;else for(;le<v.length;){const Oe=v[le++];if("number"==typeof Oe){if(Oe===b){be=-1;break}if(Oe>b){be=le-1;break}}}for(;le<v.length;){const Oe=v[le];if("number"==typeof Oe)break;if(Oe===T){if(null===z)return void(null!==J&&(v[le+1]=J));if(z===v[le+1])return void(v[le+2]=J)}le++,null!==z&&le++,null!==J&&le++}-1!==be&&(v.splice(be,0,b),le=be+1),v.splice(le++,0,T),null!==z&&v.splice(le++,0,z),null!==J&&v.splice(le++,0,J)}function aa(v){return-1!==v}function ha(v){return 32767&v}function oo(v,b){let T=function ho(v){return v>>16}(v),z=b;for(;T>0;)z=z[15],T--;return z}let bo=!0;function Ya(v){const b=bo;return bo=v,b}let Zo=0;function tl(v,b){const T=vu(v,b);if(-1!==T)return T;const z=b[1];z.firstCreatePass&&(v.injectorIndex=b.length,Ol(z.data,v),Ol(b,null),Ol(z.blueprint,null));const J=ql(v,b),le=v.injectorIndex;if(aa(J)){const be=ha(J),Oe=oo(J,b),Ye=Oe[1].data;for(let ct=0;ct<8;ct++)b[le+ct]=Oe[be+ct]|Ye[be+ct]}return b[le+8]=J,le}function Ol(v,b){v.push(0,0,0,0,0,0,0,0,b)}function vu(v,b){return-1===v.injectorIndex||v.parent&&v.parent.injectorIndex===v.injectorIndex||null===b[v.injectorIndex+8]?-1:v.injectorIndex}function ql(v,b){if(v.parent&&-1!==v.parent.injectorIndex)return v.parent.injectorIndex;let T=0,z=null,J=b;for(;null!==J;){const le=J[1],be=le.type;if(z=2===be?le.declTNode:1===be?J[6]:null,null===z)return-1;if(T++,J=J[15],-1!==z.injectorIndex)return z.injectorIndex|T<<16}return-1}function Gl(v,b,T){!function Ns(v,b,T){let z;"string"==typeof T?z=T.charCodeAt(0)||0:T.hasOwnProperty(Co)&&(z=T[Co]),null==z&&(z=T[Co]=Zo++);const J=255&z;b.data[v+(J>>5)]|=1<<J}(v,b,T)}function nu(v,b,T){if(T&cr.Optional)return v;Dr(b,"NodeInjector")}function Lu(v,b,T,z){if(T&cr.Optional&&void 0===z&&(z=null),0==(T&(cr.Self|cr.Host))){const J=v[9],le=ci(void 0);try{return J?J.get(b,z,T&cr.Optional):Wi(b,z,T&cr.Optional)}finally{ci(le)}}return nu(z,b,T)}function nl(v,b,T,z=cr.Default,J){if(null!==v){const le=function yd(v){if("string"==typeof v)return v.charCodeAt(0)||0;const b=v.hasOwnProperty(Co)?v[Co]:void 0;return"number"==typeof b?b>=0?255&b:Eo:b}(T);if("function"==typeof le){if(!fe(b,v,z))return z&cr.Host?nu(J,T,z):Lu(b,T,z,J);try{const be=le(z);if(null!=be||z&cr.Optional)return be;Dr(T)}finally{Xe()}}else if("number"==typeof le){let be=null,Oe=vu(v,b),Ye=-1,ct=z&cr.Host?b[16][6]:null;for((-1===Oe||z&cr.SkipSelf)&&(Ye=-1===Oe?ql(v,b):b[Oe+8],-1!==Ye&&Sc(z,!1)?(be=b[1],Oe=ha(Ye),b=oo(Ye,b)):Oe=-1);-1!==Oe;){const Nt=b[1];if(Hs(le,Oe,Nt.data)){const en=Ds(Oe,b,T,be,z,ct);if(en!==Iu)return en}Ye=b[Oe+8],-1!==Ye&&Sc(z,b[1].data[Oe+8]===ct)&&Hs(le,Oe,b)?(be=Nt,Oe=ha(Ye),b=oo(Ye,b)):Oe=-1}}}return Lu(b,T,z,J)}const Iu={};function Eo(){return new Rl(Ao(),Zr())}function Ds(v,b,T,z,J,le){const be=b[1],Oe=be.data[v+8],Nt=ps(Oe,be,T,null==z?fo(Oe)&&bo:z!=be&&0!=(3&Oe.type),J&cr.Host&&le===Oe);return null!==Nt?ru(b,be,Nt,Oe):Iu}function ps(v,b,T,z,J){const le=v.providerIndexes,be=b.data,Oe=1048575&le,Ye=v.directiveStart,Nt=le>>20,An=J?Oe+Nt:v.directiveEnd;for(let zn=z?Oe:Oe+Nt;zn<An;zn++){const gr=be[zn];if(zn<Ye&&T===gr||zn>=Ye&&gr.type===T)return zn}if(J){const zn=be[Ye];if(zn&&xa(zn)&&zn.type===T)return Ye}return null}function ru(v,b,T,z){let J=v[T];const le=b.data;if(function Li(v){return v instanceof pi}(J)){const be=J;be.resolving&&function Or(v,b){const T=b?`. Dependency path: ${b.join(" > ")} > ${v}`:"";throw new Hn(-200,`Circular dependency in DI detected for ${v}${T}`)}(Ir(le[T]));const Oe=Ya(be.canSeeViewProviders);be.resolving=!0;const Ye=be.injectImpl?ci(be.injectImpl):null;fe(v,z,cr.Default);try{J=v[T]=be.factory(void 0,le,v,z),b.firstCreatePass&&T>=z.directiveStart&&function En(v,b,T){const{ngOnChanges:z,ngOnInit:J,ngDoCheck:le}=b.type.prototype;if(z){const be=Ti(b);(T.preOrderHooks||(T.preOrderHooks=[])).push(v,be),(T.preOrderCheckHooks||(T.preOrderCheckHooks=[])).push(v,be)}J&&(T.preOrderHooks||(T.preOrderHooks=[])).push(0-v,J),le&&((T.preOrderHooks||(T.preOrderHooks=[])).push(v,le),(T.preOrderCheckHooks||(T.preOrderCheckHooks=[])).push(v,le))}(T,le[T],b)}finally{null!==Ye&&ci(Ye),Ya(Oe),be.resolving=!1,Xe()}}return J}function Hs(v,b,T){return!!(T[b+(v>>5)]&1<<v)}function Sc(v,b){return!(v&cr.Self||v&cr.Host&&b)}class Rl{constructor(b,T){this._tNode=b,this._lView=T}get(b,T,z){return nl(this._tNode,this._lView,b,z,T)}}const Tl="__parameters__";function tc(v,b,T){return Nr(()=>{const z=function ch(v){return function(...T){if(v){const z=v(...T);for(const J in z)this[J]=z[J]}}}(b);function J(...le){if(this instanceof J)return z.apply(this,le),this;const be=new J(...le);return Oe.annotation=be,Oe;function Oe(Ye,ct,Nt){const en=Ye.hasOwnProperty(Tl)?Ye[Tl]:Object.defineProperty(Ye,Tl,{value:[]})[Tl];for(;en.length<=Nt;)en.push(null);return(en[Nt]=en[Nt]||[]).push(be),Ye}}return T&&(J.prototype=Object.create(T.prototype)),J.prototype.ngMetadataName=v,J.annotationCls=J,J})}class Za{constructor(b,T){this._desc=b,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof T?this.__NG_ELEMENT_ID__=T:void 0!==T&&(this.\u0275prov=Pn({token:this,providedIn:T.providedIn||"root",factory:T.factory}))}toString(){return`InjectionToken ${this._desc}`}}const nc=new Za("AnalyzeForEntryComponents");function zl(v,b){void 0===b&&(b=v);for(let T=0;T<v.length;T++){let z=v[T];Array.isArray(z)?(b===v&&(b=v.slice(0,T)),zl(z,b)):b!==v&&b.push(z)}return b}function iu(v,b){v.forEach(T=>Array.isArray(T)?iu(T,b):b(T))}function Bp(v,b,T){b>=v.length?v.push(T):v.splice(b,0,T)}function fh(v,b){return b>=v.length-1?v.pop():v.splice(b,1)[0]}function hf(v,b){const T=[];for(let z=0;z<v;z++)T.push(b);return T}const ac={},Md="__NG_DI_FLAG__",Oc="ngTempTokenPath",Yl=/\n/gm,qp="__source",Vg=kn({provide:String,useValue:kn});let Rc;function Ad(v){const b=Rc;return Rc=v,b}function Fc(v,b=cr.Default){if(void 0===Rc)throw new Hn(203,"");return null===Rc?Wi(v,void 0,b):Rc.get(v,b&cr.Optional?null:void 0,b)}function da(v,b=cr.Default){return(function Qr(){return Yr}()||Fc)(Mn(v),b)}function dh(v){const b=[];for(let T=0;T<v.length;T++){const z=Mn(v[T]);if(Array.isArray(z)){if(0===z.length)throw new Hn(900,"");let J,le=cr.Default;for(let be=0;be<z.length;be++){const Oe=z[be],Ye=qg(Oe);"number"==typeof Ye?-1===Ye?J=Oe.token:le|=Ye:J=Oe}b.push(da(J,le))}else b.push(da(z))}return b}function vf(v,b){return v[Md]=b,v.prototype[Md]=b,v}function qg(v){return v[Md]}const oc=vf(tc("Inject",v=>({token:v})),-1),xl=vf(tc("Optional"),8),Nc=vf(tc("SkipSelf"),4),Nd="__ngContext__";function ol(v,b){v[Nd]=b}function Bd(v){const b=function Lf(v){return v[Nd]||null}(v);return b?Array.isArray(b)?b:b.lView:null}function Hd(v){return v.ngOriginalError}function gm(v,...b){v.error(...b)}class Wc{constructor(){this._console=console}handleError(b){const T=this._findOriginalError(b),z=function pm(v){return v&&v.ngErrorLogger||gm}(b);z(this._console,"ERROR",b),T&&z(this._console,"ORIGINAL ERROR",T)}_findOriginalError(b){let T=b&&Hd(b);for(;T&&Hd(T);)T=Hd(T);return T||null}}const _o=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(oa))();function Wl(v){return v instanceof Function?v():v}var $a=(()=>(($a=$a||{})[$a.Important=1]="Important",$a[$a.DashCase=2]="DashCase",$a))();function Zl(v,b){return undefined(v,b)}function hc(v){const b=v[3];return Ji(b)?b[3]:b}function Ah(v){return m0(v[13])}function Eh(v){return m0(v[4])}function m0(v){for(;null!==v&&!Ji(v);)v=v[4];return v}function Ml(v,b,T,z,J){if(null!=z){let le,be=!1;Ji(z)?le=z:na(z)&&(be=!0,z=z[0]);const Oe=Ra(z);0===v&&null!==T?null==J?tr(b,T,Oe):Bn(b,T,Oe,J||null,!0):1===v&&null!==T?Bn(b,T,Oe,J||null,!0):2===v?function La(v,b,T){const z=Tr(v,b);z&&function ur(v,b,T,z){ga(v)?v.removeChild(b,T,z):b.removeChild(T)}(v,z,b,T)}(b,Oe,be):3===v&&b.destroyNode(Oe),null!=le&&function vo(v,b,T,z,J){const le=T[7];le!==Ra(T)&&Ml(b,v,z,le,J);for(let Oe=10;Oe<T.length;Oe++){const Ye=T[Oe];Aa(Ye[1],Ye,v,b,z,le)}}(b,v,le,T,J)}}function K(v,b,T){return ga(v)?v.createElement(b,T):null===T?v.createElement(b):v.createElementNS(T,b)}function mt(v,b){const T=v[9],z=T.indexOf(b),J=b[3];1024&b[2]&&(b[2]&=-1025,ko(J,-1)),T.splice(z,1)}function Tt(v,b){if(v.length<=10)return;const T=10+b,z=v[T];if(z){const J=z[17];null!==J&&J!==v&&mt(J,z),b>0&&(v[T-1][4]=z[4]);const le=fh(v,10+b);!function ce(v,b){Aa(v,b,b[11],2,null,null),b[0]=null,b[6]=null}(z[1],z);const be=le[19];null!==be&&be.detachView(le[1]),z[3]=null,z[4]=null,z[2]&=-129}return z}function qt(v,b){if(!(256&b[2])){const T=b[11];ga(T)&&T.destroyNode&&Aa(v,b,T,3,null,null),function ze(v){let b=v[13];if(!b)return an(v[1],v);for(;b;){let T=null;if(na(b))T=b[13];else{const z=b[10];z&&(T=z)}if(!T){for(;b&&!b[4]&&b!==v;)na(b)&&an(b[1],b),b=b[3];null===b&&(b=v),na(b)&&an(b[1],b),T=b&&b[4]}b=T}}(b)}}function an(v,b){if(!(256&b[2])){b[2]&=-129,b[2]|=256,function bn(v,b){let T;if(null!=v&&null!=(T=v.destroyHooks))for(let z=0;z<T.length;z+=2){const J=b[T[z]];if(!(J instanceof pi)){const le=T[z+1];if(Array.isArray(le))for(let be=0;be<le.length;be+=2){const Oe=J[le[be]],Ye=le[be+1];try{Ye.call(Oe)}finally{}}else try{le.call(J)}finally{}}}}(v,b),function $t(v,b){const T=v.cleanup,z=b[7];let J=-1;if(null!==T)for(let le=0;le<T.length-1;le+=2)if("string"==typeof T[le]){const be=T[le+1],Oe="function"==typeof be?be(b):Ra(b[be]),Ye=z[J=T[le+2]],ct=T[le+3];"boolean"==typeof ct?Oe.removeEventListener(T[le],Ye,ct):ct>=0?z[J=ct]():z[J=-ct].unsubscribe(),le+=2}else{const be=z[J=T[le+1]];T[le].call(be)}if(null!==z){for(let le=J+1;le<z.length;le++)z[le]();b[7]=null}}(v,b),1===b[1].type&&ga(b[11])&&b[11].destroy();const T=b[17];if(null!==T&&Ji(b[3])){T!==b[3]&&mt(T,b);const z=b[19];null!==z&&z.detachView(v)}}}function Dn(v,b,T){return function Vn(v,b,T){let z=b;for(;null!==z&&40&z.type;)z=(b=z).parent;if(null===z)return T[0];if(2&z.flags){const J=v.data[z.directiveStart].encapsulation;if(J===Ia.None||J===Ia.Emulated)return null}return ia(z,T)}(v,b.parent,T)}function Bn(v,b,T,z,J){ga(v)?v.insertBefore(b,T,z,J):b.insertBefore(T,z,J)}function tr(v,b,T){ga(v)?v.appendChild(b,T):b.appendChild(T)}function nr(v,b,T,z,J){null!==z?Bn(v,b,T,z,J):tr(v,b,T)}function Tr(v,b){return ga(v)?v.parentNode(b):b.parentNode}function ai(v,b,T){return di(v,b,T)}let di=function ti(v,b,T){return 40&v.type?ia(v,T):null};function Ii(v,b){if(null!==b){const T=b.type;if(3&T)return ia(b,v);if(4&T)return Ei(-1,v[b.index]);if(8&T){const z=b.child;if(null!==z)return Ii(v,z);{const J=v[b.index];return Ji(J)?Ei(-1,J):Ra(J)}}if(32&T)return Zl(b,v)()||Ra(v[b.index]);{const z=Di(v,b);return null!==z?Array.isArray(z)?z[0]:Ii(hc(v[16]),z):Ii(v,b.next)}}return null}function Di(v,b){return null!==b?v[16][6].projection[b.projection]:null}function Ei(v,b){const T=10+v+1;if(T<b.length){const z=b[T],J=z[1].firstChild;if(null!==J)return Ii(z,J)}return b[7]}function Ma(v,b,T,z,J,le,be){for(;null!=T;){const Oe=z[T.index],Ye=T.type;if(be&&0===b&&(Oe&&ol(Ra(Oe),z),T.flags|=4),64!=(64&T.flags))if(8&Ye)Ma(v,b,T.child,z,J,le,!1),Ml(b,v,J,Oe,le);else if(32&Ye){const ct=Zl(T,z);let Nt;for(;Nt=ct();)Ml(b,v,J,Nt,le);Ml(b,v,J,Oe,le)}else 16&Ye?Ea(v,b,z,T,J,le):Ml(b,v,J,Oe,le);T=be?T.projectionNext:T.next}}function Aa(v,b,T,z,J,le){Ma(T,z,v.firstChild,b,J,le,!1)}function Ea(v,b,T,z,J,le){const be=T[16],Ye=be[6].projection[z.projection];if(Array.isArray(Ye))for(let ct=0;ct<Ye.length;ct++)Ml(b,v,J,Ye[ct],le);else Ma(v,b,Ye,be[3],J,le,!0)}function wo(v,b,T){ga(v)?v.setAttribute(b,"style",T):b.style.cssText=T}function no(v,b,T){ga(v)?""===T?v.removeAttribute(b,"class"):v.setAttribute(b,"class",T):b.className=T}function es(v,b,T){let z=v.length;for(;;){const J=v.indexOf(b,T);if(-1===J)return J;if(0===J||v.charCodeAt(J-1)<=32){const le=b.length;if(J+le===z||v.charCodeAt(J+le)<=32)return J}T=J+1}}const As="ng-template";function _s(v,b,T){let z=0;for(;z<v.length;){let J=v[z++];if(T&&"class"===J){if(J=v[z],-1!==es(J.toLowerCase(),b,0))return!0}else if(1===J){for(;z<v.length&&"string"==typeof(J=v[z++]);)if(J.toLowerCase()===b)return!0;return!1}}return!1}function ws(v){return 4===v.type&&v.value!==As}function Gs(v,b,T){return b===(4!==v.type||T?v.value:As)}function Bs(v,b,T){let z=4;const J=v.attrs||[],le=function ma(v){for(let b=0;b<v.length;b++)if(Hi(v[b]))return b;return v.length}(J);let be=!1;for(let Oe=0;Oe<b.length;Oe++){const Ye=b[Oe];if("number"!=typeof Ye){if(!be)if(4&z){if(z=2|1&z,""!==Ye&&!Gs(v,Ye,T)||""===Ye&&1===b.length){if(so(z))return!1;be=!0}}else{const ct=8&z?Ye:b[++Oe];if(8&z&&null!==v.attrs){if(!_s(v.attrs,ct,T)){if(so(z))return!1;be=!0}continue}const en=Es(8&z?"class":Ye,J,ws(v),T);if(-1===en){if(so(z))return!1;be=!0;continue}if(""!==ct){let An;An=en>le?"":J[en+1].toLowerCase();const zn=8&z?An:null;if(zn&&-1!==es(zn,ct,0)||2&z&&ct!==An){if(so(z))return!1;be=!0}}}}else{if(!be&&!so(z)&&!so(Ye))return!1;if(be&&so(Ye))continue;be=!1,z=Ye|1&z}}return so(z)||be}function so(v){return 0==(1&v)}function Es(v,b,T,z){if(null===b)return-1;let J=0;if(z||!T){let le=!1;for(;J<b.length;){const be=b[J];if(be===v)return J;if(3===be||6===be)le=!0;else{if(1===be||2===be){let Oe=b[++J];for(;"string"==typeof Oe;)Oe=b[++J];continue}if(4===be)break;if(0===be){J+=4;continue}}J+=le?1:2}return-1}return function Ba(v,b){let T=v.indexOf(4);if(T>-1)for(T++;T<v.length;){const z=v[T];if("number"==typeof z)return-1;if(z===b)return T;T++}return-1}(b,v)}function Xo(v,b,T=!1){for(let z=0;z<b.length;z++)if(Bs(v,b[z],T))return!0;return!1}function Yo(v,b){e:for(let T=0;T<b.length;T++){const z=b[T];if(v.length===z.length){for(let J=0;J<v.length;J++)if(v[J]!==z[J])continue e;return!0}}return!1}function zo(v,b){return v?":not("+b.trim()+")":b}function No(v){let b=v[0],T=1,z=2,J="",le=!1;for(;T<v.length;){let be=v[T];if("string"==typeof be)if(2&z){const Oe=v[++T];J+="["+be+(Oe.length>0?'="'+Oe+'"':"")+"]"}else 8&z?J+="."+be:4&z&&(J+=" "+be);else""!==J&&!so(be)&&(b+=zo(le,J),J=""),z=be,le=le||!so(z);T++}return""!==J&&(b+=zo(le,J)),b}const Fi={};function Kl(v,b){const T=v.contentQueries;if(null!==T)for(let z=0;z<T.length;z+=2){const J=T[z],le=T[z+1];if(-1!==le){const be=v.data[le];V(J),be.contentQueries(2,b[le],le)}}}function Gu(v,b,T,z,J,le,be,Oe,Ye,ct){const Nt=b.blueprint.slice();return Nt[0]=J,Nt[2]=140|z,jl(Nt),Nt[3]=Nt[15]=v,Nt[8]=T,Nt[10]=be||v&&v[10],Nt[11]=Oe||v&&v[11],Nt[12]=Ye||v&&v[12]||null,Nt[9]=ct||v&&v[9]||null,Nt[6]=le,Nt[16]=2==b.type?v[16]:Nt,Nt}function xu(v,b,T,z,J){let le=v.data[b];if(null===le)le=function Gf(v,b,T,z,J){const le=Ca(),be=Js(),Ye=v.data[b]=function tf(v,b,T,z,J,le){return{type:T,index:z,insertBeforeIndex:null,injectorIndex:b?b.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:J,attrs:le,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:b,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,be?le:le&&le.parent,T,b,z,J);return null===v.firstChild&&(v.firstChild=Ye),null!==le&&(be?null==le.child&&null!==Ye.parent&&(le.child=Ye):null===le.next&&(le.next=Ye)),Ye}(v,b,T,z,J),function Hl(){return Qi.lFrame.inI18n}()&&(le.flags|=64);else if(64&le.type){le.type=T,le.value=z,le.attrs=J;const be=function Da(){const v=Qi.lFrame,b=v.currentTNode;return v.isParent?b:b.parent}();le.injectorIndex=null===be?-1:be.injectorIndex}return hs(le,!0),le}function vc(v,b,T,z){if(0===T)return-1;const J=b.length;for(let le=0;le<T;le++)b.push(z),v.blueprint.push(z),v.data.push(null);return J}function bu(v,b,T){me(b);try{const z=v.viewQuery;null!==z&&Sm(1,z,T);const J=v.template;null!==J&&Xd(v,b,J,1,T),v.firstCreatePass&&(v.firstCreatePass=!1),v.staticContentQueries&&Kl(v,b),v.staticViewQueries&&Sm(2,v.viewQuery,T);const le=v.components;null!==le&&function qf(v,b){for(let T=0;T<b.length;T++)P0(v,b[T])}(b,le)}catch(z){throw v.firstCreatePass&&(v.incompleteFirstPass=!0,v.firstCreatePass=!1),z}finally{b[2]&=-5,nt()}}function yc(v,b,T,z){const J=b[2];if(256==(256&J))return;me(b);const le=hl();try{jl(b),function Du(v){return Qi.lFrame.bindingIndex=v}(v.bindingStartIndex),null!==T&&Xd(v,b,T,2,z);const be=3==(3&J);if(!le)if(be){const ct=v.preOrderCheckHooks;null!==ct&&Nn(b,ct,null)}else{const ct=v.preOrderHooks;null!==ct&&hr(b,ct,0,null),dr(b,0)}if(function Mm(v){for(let b=Ah(v);null!==b;b=Eh(b)){if(!b[2])continue;const T=b[9];for(let z=0;z<T.length;z++){const J=T[z],le=J[3];0==(1024&J[2])&&ko(le,1),J[2]|=1024}}}(b),function Tm(v){for(let b=Ah(v);null!==b;b=Eh(b))for(let T=10;T<b.length;T++){const z=b[T],J=z[1];Wo(z)&&yc(J,z,J.template,z[8])}}(b),null!==v.contentQueries&&Kl(v,b),!le)if(be){const ct=v.contentCheckHooks;null!==ct&&Nn(b,ct)}else{const ct=v.contentHooks;null!==ct&&hr(b,ct,1),dr(b,1)}!function Nh(v,b){const T=v.hostBindingOpCodes;if(null!==T)try{for(let z=0;z<T.length;z++){const J=T[z];if(J<0)It(~J);else{const le=J,be=T[++z],Oe=T[++z];Ju(be,le),Oe(2,b[le])}}}finally{It(-1)}}(v,b);const Oe=v.components;null!==Oe&&function Bh(v,b){for(let T=0;T<b.length;T++)fu(v,b[T])}(b,Oe);const Ye=v.viewQuery;if(null!==Ye&&Sm(2,Ye,z),!le)if(be){const ct=v.viewCheckHooks;null!==ct&&Nn(b,ct)}else{const ct=v.viewHooks;null!==ct&&hr(b,ct,2),dr(b,2)}!0===v.firstUpdatePass&&(v.firstUpdatePass=!1),le||(b[2]&=-73),1024&b[2]&&(b[2]&=-1025,ko(b[3],-1))}finally{nt()}}function b0(v,b,T,z){const J=b[10],le=!hl(),be=Ha(b);try{le&&!be&&J.begin&&J.begin(),be&&bu(v,b,z),yc(v,b,T,z)}finally{le&&!be&&J.end&&J.end()}}function Xd(v,b,T,z,J){const le=function Ot(){return Qi.lFrame.selectedIndex}(),be=2&z;try{It(-1),be&&b.length>20&&function sl(v,b,T,z){if(!z)if(3==(3&b[2])){const le=v.preOrderCheckHooks;null!==le&&Nn(b,le,T)}else{const le=v.preOrderHooks;null!==le&&hr(b,le,0,T)}It(T)}(v,b,20,hl()),T(z,J)}finally{It(le)}}function Yf(v){const b=v.tView;return null===b||b.incompleteFirstPass?v.tView=Wf(1,null,v.template,v.decls,v.vars,v.directiveDefs,v.pipeDefs,v.viewQuery,v.schemas,v.consts):b}function Wf(v,b,T,z,J,le,be,Oe,Ye,ct){const Nt=20+z,en=Nt+J,An=function lu(v,b){const T=[];for(let z=0;z<b;z++)T.push(z<v?null:Fi);return T}(Nt,en),zn="function"==typeof ct?ct():ct;return An[1]={type:v,blueprint:An,template:T,queries:null,viewQuery:Oe,declTNode:b,data:An.slice().fill(null,Nt),bindingStartIndex:Nt,expandoStartIndex:en,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof le?le():le,pipeRegistry:"function"==typeof be?be():be,firstChild:null,schemas:Ye,consts:zn,incompleteFirstPass:!1}}function xc(v,b,T,z){const J=function Gy(v){return v[7]||(v[7]=[])}(b);null===T?J.push(z):(J.push(T),v.firstCreatePass&&function Yy(v){return v.cleanup||(v.cleanup=[])}(v).push(z,J.length-1))}function bc(v,b,T){for(let z in v)if(v.hasOwnProperty(z)){const J=v[z];(T=null===T?{}:T).hasOwnProperty(z)?T[z].push(b,J):T[z]=[b,J]}return T}function Jd(v,b,T,z,J,le){const be=le.hostBindings;if(be){let Oe=v.hostBindingOpCodes;null===Oe&&(Oe=v.hostBindingOpCodes=[]);const Ye=~b.index;(function bm(v){let b=v.length;for(;b>0;){const T=v[--b];if("number"==typeof T&&T<0)return T}return 0})(Oe)!=Ye&&Oe.push(Ye),Oe.push(z,J,be)}}function ep(v,b){null!==v.hostBindings&&v.hostBindings(1,b)}function np(v,b){b.flags|=2,(v.components||(v.components=[])).push(b.index)}function C0(v,b,T){if(T){if(b.exportAs)for(let z=0;z<b.exportAs.length;z++)T[b.exportAs[z]]=v;xa(b)&&(T[""]=v)}}function $f(v,b,T){v.flags|=1,v.directiveStart=b,v.directiveEnd=b+T,v.providerIndexes=b}function D0(v,b,T,z,J){v.data[z]=J;const le=J.factory||(J.factory=oi(J.type)),be=new pi(le,xa(J),null);v.blueprint[z]=be,T[z]=be,Jd(v,b,0,z,vc(v,T,J.hostVars,Fi),J)}function L0(v,b,T){const z=ia(b,v),J=Yf(T),le=v[10],be=Jf(v,Gu(v,J,null,T.onPush?64:16,z,b,le,le.createRenderer(z,T),null,null));v[b.index]=be}function cu(v,b,T,z,J,le){const be=ia(v,b);!function rp(v,b,T,z,J,le,be){if(null==le)ga(v)?v.removeAttribute(b,J,T):b.removeAttribute(J);else{const Oe=null==be?er(le):be(le,z||"",J);ga(v)?v.setAttribute(b,J,Oe,T):T?b.setAttributeNS(T,J,Oe):b.setAttribute(J,Oe)}}(b[11],be,le,v.value,T,z,J)}function _m(v,b,T,z,J,le){const be=le[b];if(null!==be){const Oe=z.setInput;for(let Ye=0;Ye<be.length;){const ct=be[Ye++],Nt=be[Ye++],en=be[Ye++];null!==Oe?z.setInput(T,en,ct,Nt):T[Nt]=en}}}function wm(v,b){let T=null,z=0;for(;z<b.length;){const J=b[z];if(0!==J)if(5!==J){if("number"==typeof J)break;v.hasOwnProperty(J)&&(null===T&&(T=[]),T.push(J,v[J],b[z+1])),z+=2}else z+=2;else z+=4}return T}function fu(v,b){const T=eo(b,v);if(Wo(T)){const z=T[1];80&T[2]?yc(z,T,z.template,T[8]):T[5]>0&&rf(T)}}function rf(v){for(let z=Ah(v);null!==z;z=Eh(z))for(let J=10;J<z.length;J++){const le=z[J];if(1024&le[2]){const be=le[1];yc(be,le,be.template,le[8])}else le[5]>0&&rf(le)}const T=v[1].components;if(null!==T)for(let z=0;z<T.length;z++){const J=eo(T[z],v);Wo(J)&&J[5]>0&&rf(J)}}function P0(v,b){const T=eo(b,v),z=T[1];(function Kf(v,b){for(let T=b.length;T<v.blueprint.length;T++)b.push(v.blueprint[T])})(z,T),bu(z,T,T[8])}function Jf(v,b){return v[13]?v[14][4]=b:v[13]=b,v[14]=b,b}function Em(v,b,T){const z=b[10];z.begin&&z.begin();try{yc(v,b,v.template,T)}catch(J){throw function Zy(v,b){const T=v[9],z=T?T.get(Wc,null):null;z&&z.handleError(b)}(b,J),J}finally{z.end&&z.end()}}function qy(v){!function Am(v){for(let b=0;b<v.components.length;b++){const T=v.components[b],z=Bd(T),J=z[1];b0(J,z,J.template,T)}}(v[8])}function Sm(v,b,T){V(0),b(v,T)}const hw=(()=>Promise.resolve(null))();function Xy(v,b,T,z,J){for(let le=0;le<T.length;){const be=T[le++],Oe=T[le++],Ye=b[be],ct=v.data[be];null!==ct.setInput?ct.setInput(Ye,J,z,Oe):Ye[Oe]=J}}function O0(v,b,T){let z=T?v.styles:null,J=T?v.classes:null,le=0;if(null!==b)for(let be=0;be<b.length;be++){const Oe=b[be];"number"==typeof Oe?le=Oe:1==le?J=sn(J,Oe):2==le&&(z=sn(z,Oe+": "+b[++be]+";"))}T?v.styles=z:v.stylesWithoutHost=z,T?v.classes=J:v.classesWithoutHost=J}const Cm=new Za("INJECTOR",-1);class $y{get(b,T=ac){if(T===ac){const z=new Error(`NullInjectorError: No provider for ${gn(b)}!`);throw z.name="NullInjectorError",z}return T}}const Dm=new Za("Set Injector scope."),ip={},gw={};let Lm;function Ky(){return void 0===Lm&&(Lm=new $y),Lm}function Jy(v,b=null,T=null,z){const J=Qy(v,b,T,z);return J._resolveInjectorDefTypes(),J}function Qy(v,b=null,T=null,z){return new mw(v,T,b||Ky(),z)}class mw{constructor(b,T,z,J=null){this.parent=z,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const le=[];T&&iu(T,Oe=>this.processProvider(Oe,b,T)),iu([b],Oe=>this.processInjectorType(Oe,[],le)),this.records.set(Cm,Uh(void 0,this));const be=this.records.get(Dm);this.scope=null!=be?be.value:null,this.source=J||("object"==typeof b?null:gn(b))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(b=>b.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(b,T=ac,z=cr.Default){this.assertNotDestroyed();const J=Ad(this),le=ci(void 0);try{if(!(z&cr.SkipSelf)){let Oe=this.records.get(b);if(void 0===Oe){const Ye=function Mw(v){return"function"==typeof v||"object"==typeof v&&v instanceof Za}(b)&&On(b);Oe=Ye&&this.injectableDefInScope(Ye)?Uh(Im(b),ip):null,this.records.set(b,Oe)}if(null!=Oe)return this.hydrate(b,Oe)}return(z&cr.Self?Ky():this.parent).get(b,T=z&cr.Optional&&T===ac?null:T)}catch(be){if("NullInjectorError"===be.name){if((be[Oc]=be[Oc]||[]).unshift(gn(b)),J)throw be;return function zc(v,b,T,z){const J=v[Oc];throw b[qp]&&J.unshift(b[qp]),v.message=function Gg(v,b,T,z=null){v=v&&"\n"===v.charAt(0)&&"\u0275"==v.charAt(1)?v.substr(2):v;let J=gn(b);if(Array.isArray(b))J=b.map(gn).join(" -> ");else if("object"==typeof b){let le=[];for(let be in b)if(b.hasOwnProperty(be)){let Oe=b[be];le.push(be+":"+("string"==typeof Oe?JSON.stringify(Oe):gn(Oe)))}J=`{${le.join(", ")}}`}return`${T}${z?"("+z+")":""}[${J}]: ${v.replace(Yl,"\n  ")}`}("\n"+v.message,J,T,z),v.ngTokenPath=J,v[Oc]=null,v}(be,b,"R3InjectorError",this.source)}throw be}finally{ci(le),Ad(J)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(b=>this.get(b))}toString(){const b=[];return this.records.forEach((z,J)=>b.push(gn(J))),`R3Injector[${b.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Hn(205,"")}processInjectorType(b,T,z){if(!(b=Mn(b)))return!1;let J=sr(b);const le=null==J&&b.ngModule||void 0,be=void 0===le?b:le,Oe=-1!==z.indexOf(be);if(void 0!==le&&(J=sr(le)),null==J)return!1;if(null!=J.imports&&!Oe){let Nt;z.push(be);try{iu(J.imports,en=>{this.processInjectorType(en,T,z)&&(void 0===Nt&&(Nt=[]),Nt.push(en))})}finally{}if(void 0!==Nt)for(let en=0;en<Nt.length;en++){const{ngModule:An,providers:zn}=Nt[en];iu(zn,gr=>this.processProvider(gr,An,zn||Ki))}}this.injectorDefTypes.add(be);const Ye=oi(be)||(()=>new be);this.records.set(be,Uh(Ye,ip));const ct=J.providers;if(null!=ct&&!Oe){const Nt=b;iu(ct,en=>this.processProvider(en,Nt,ct))}return void 0!==le&&void 0!==b.providers}processProvider(b,T,z){let J=Vh(b=Mn(b))?b:Mn(b&&b.provide);const le=function yw(v,b,T){return t1(v)?Uh(void 0,v.useValue):Uh(e1(v),ip)}(b);if(Vh(b)||!0!==b.multi)this.records.get(J);else{let be=this.records.get(J);be||(be=Uh(void 0,ip,!0),be.factory=()=>dh(be.multi),this.records.set(J,be)),J=b,be.multi.push(b)}this.records.set(J,le)}hydrate(b,T){return T.value===ip&&(T.value=gw,T.value=T.factory()),"object"==typeof T.value&&T.value&&function Tw(v){return null!==v&&"object"==typeof v&&"function"==typeof v.ngOnDestroy}(T.value)&&this.onDestroy.add(T.value),T.value}injectableDefInScope(b){if(!b.providedIn)return!1;const T=Mn(b.providedIn);return"string"==typeof T?"any"===T||T===this.scope:this.injectorDefTypes.has(T)}}function Im(v){const b=On(v),T=null!==b?b.factory:oi(v);if(null!==T)return T;if(v instanceof Za)throw new Hn(204,"");if(v instanceof Function)return function vw(v){const b=v.length;if(b>0)throw hf(b,"?"),new Hn(204,"");const T=function Gn(v){const b=v&&(v[pr]||v[Lr]);if(b){const T=function or(v){if(v.hasOwnProperty("name"))return v.name;const b=(""+v).match(/^function\s*([^\s(]+)/);return null===b?"":b[1]}(v);return console.warn(`DEPRECATED: DI is instantiating a token "${T}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${T}" class.`),b}return null}(v);return null!==T?()=>T.factory(v):()=>new v}(v);throw new Hn(204,"")}function e1(v,b,T){let z;if(Vh(v)){const J=Mn(v);return oi(J)||Im(J)}if(t1(v))z=()=>Mn(v.useValue);else if(function bw(v){return!(!v||!v.useFactory)}(v))z=()=>v.useFactory(...dh(v.deps||[]));else if(function xw(v){return!(!v||!v.useExisting)}(v))z=()=>da(Mn(v.useExisting));else{const J=Mn(v&&(v.useClass||v.provide));if(!function ww(v){return!!v.deps}(v))return oi(J)||Im(J);z=()=>new J(...dh(v.deps))}return z}function Uh(v,b,T=!1){return{factory:v,value:b,multi:T?[]:void 0}}function t1(v){return null!==v&&"object"==typeof v&&Vg in v}function Vh(v){return"function"==typeof v}let Al=(()=>{class v{static create(T,z){var J;if(Array.isArray(T))return Jy({name:""},z,T,"");{const le=null!==(J=T.name)&&void 0!==J?J:"";return Jy({name:le},T.parent,T.providers,le)}}}return v.THROW_IF_NOT_FOUND=ac,v.NULL=new $y,v.\u0275prov=Pn({token:v,providedIn:"any",factory:()=>da(Cm)}),v.__NG_ELEMENT_ID__=-1,v})();function Iw(v,b){jn(Bd(v)[1],Ao())}let R0=null;function Hh(){if(!R0){const v=oa.Symbol;if(v&&v.iterator)R0=v.iterator;else{const b=Object.getOwnPropertyNames(Map.prototype);for(let T=0;T<b.length;++T){const z=b[T];"entries"!==z&&"size"!==z&&Map.prototype[z]===Map.prototype.entries&&(R0=z)}}}return R0}function ap(v){return!!Fm(v)&&(Array.isArray(v)||!(v instanceof Map)&&Hh()in v)}function Fm(v){return null!==v&&("function"==typeof v||"object"==typeof v)}function wl(v,b,T){return!Object.is(v[b],T)&&(v[b]=T,!0)}function z0(v,b,T,z){const J=Zr();return wl(J,zs(),b)&&(la(),cu(Lt(),J,v,b,T,z)),z0}function ea(v,b=cr.Default){const T=Zr();return null===T?da(v,b):nl(Ao(),T,Mn(v),b)}function Um(){throw new Error("invalid")}function B0(v,b,T){const z=Zr();return wl(z,zs(),b)&&function _l(v,b,T,z,J,le,be,Oe){const Ye=ia(b,T);let Nt,ct=b.inputs;!Oe&&null!=ct&&(Nt=ct[z])?(Xy(v,T,Nt,z,J),fo(b)&&function M0(v,b){const T=eo(b,v);16&T[2]||(T[2]|=64)}(T,b.index)):3&b.type&&(z=function T0(v){return"class"===v?"className":"for"===v?"htmlFor":"formaction"===v?"formAction":"innerHtml"===v?"innerHTML":"readonly"===v?"readOnly":"tabindex"===v?"tabIndex":v}(z),J=null!=be?be(J,b.value||"",z):J,ga(le)?le.setProperty(Ye,z,J):Bi(z)||(Ye.setProperty?Ye.setProperty(z,J):Ye[z]=J))}(la(),Lt(),z,v,b,z[11],T,!1),B0}function Vm(v,b,T,z,J){const be=J?"class":"style";Xy(v,T,b.inputs[be],be,z)}function Hm(v,b,T,z){const J=Zr(),le=la(),be=20+v,Oe=J[11],Ye=J[be]=K(Oe,b,function xn(){return Qi.lFrame.currentNamespace}()),ct=le.firstCreatePass?function h3(v,b,T,z,J,le,be){const Oe=b.consts,ct=xu(b,v,2,J,fs(Oe,le));return function Zf(v,b,T,z){let J=!1;if(Ul()){const le=function tp(v,b,T){const z=v.directiveRegistry;let J=null;if(z)for(let le=0;le<z.length;le++){const be=z[le];Xo(T,be.selectors,!1)&&(J||(J=[]),Gl(tl(T,b),v,be.type),xa(be)?(np(v,T),J.unshift(be)):J.push(be))}return J}(v,b,T),be=null===z?null:{"":-1};if(null!==le){J=!0,$f(T,v.data.length,le.length);for(let Nt=0;Nt<le.length;Nt++){const en=le[Nt];en.providersResolver&&en.providersResolver(en)}let Oe=!1,Ye=!1,ct=vc(v,b,le.length,null);for(let Nt=0;Nt<le.length;Nt++){const en=le[Nt];T.mergedAttrs=ra(T.mergedAttrs,en.hostAttrs),D0(v,T,b,ct,en),C0(ct,en,be),null!==en.contentQueries&&(T.flags|=8),(null!==en.hostBindings||null!==en.hostAttrs||0!==en.hostVars)&&(T.flags|=128);const An=en.type.prototype;!Oe&&(An.ngOnChanges||An.ngOnInit||An.ngDoCheck)&&((v.preOrderHooks||(v.preOrderHooks=[])).push(T.index),Oe=!0),!Ye&&(An.ngOnChanges||An.ngDoCheck)&&((v.preOrderCheckHooks||(v.preOrderCheckHooks=[])).push(T.index),Ye=!0),ct++}!function nf(v,b){const z=b.directiveEnd,J=v.data,le=b.attrs,be=[];let Oe=null,Ye=null;for(let ct=b.directiveStart;ct<z;ct++){const Nt=J[ct],en=Nt.inputs,An=null===le||ws(b)?null:wm(en,le);be.push(An),Oe=bc(en,ct,Oe),Ye=bc(Nt.outputs,ct,Ye)}null!==Oe&&(Oe.hasOwnProperty("class")&&(b.flags|=16),Oe.hasOwnProperty("style")&&(b.flags|=32)),b.initialInputs=be,b.inputs=Oe,b.outputs=Ye}(v,T)}be&&function Xf(v,b,T){if(b){const z=v.localNames=[];for(let J=0;J<b.length;J+=2){const le=T[b[J+1]];if(null==le)throw new Hn(-301,`Export of name '${b[J+1]}' not found!`);z.push(b[J],le)}}}(T,z,be)}return T.mergedAttrs=ra(T.mergedAttrs,T.attrs),J}(b,T,ct,fs(Oe,be)),null!==ct.attrs&&O0(ct,ct.attrs,!1),null!==ct.mergedAttrs&&O0(ct,ct.mergedAttrs,!0),null!==b.queries&&b.queries.elementStart(b,ct),ct}(be,le,J,0,b,T,z):le.data[be];hs(ct,!0);const Nt=ct.mergedAttrs;null!==Nt&&xi(Oe,Ye,Nt);const en=ct.classes;null!==en&&no(Oe,Ye,en);const An=ct.styles;null!==An&&wo(Oe,Ye,An),64!=(64&ct.flags)&&function vi(v,b,T,z){const J=Dn(v,z,b),le=b[11],Oe=ai(z.parent||b[6],z,b);if(null!=J)if(Array.isArray(T))for(let Ye=0;Ye<T.length;Ye++)nr(le,J,T[Ye],Oe,!1);else nr(le,J,T,Oe,!1)}(le,J,Ye,ct),0===function cl(){return Qi.lFrame.elementDepthCount}()&&ol(Ye,J),function Ci(){Qi.lFrame.elementDepthCount++}(),function ao(v){return 1==(1&v.flags)}(ct)&&(function jh(v,b,T){!Ul()||(function Qd(v,b,T,z){const J=T.directiveStart,le=T.directiveEnd;v.firstCreatePass||tl(T,b),ol(z,b);const be=T.initialInputs;for(let Oe=J;Oe<le;Oe++){const Ye=v.data[Oe],ct=xa(Ye);ct&&L0(b,T,Ye);const Nt=ru(b,v,Oe,T);ol(Nt,b),null!==be&&_m(0,Oe-J,Nt,Ye,0,be),ct&&(eo(T.index,b)[8]=Nt)}}(v,b,T,ia(T,b)),128==(128&T.flags)&&function S0(v,b,T){const z=T.directiveStart,J=T.directiveEnd,be=T.index,Oe=function Qu(){return Qi.lFrame.currentDirectiveIndex}();try{It(be);for(let Ye=z;Ye<J;Ye++){const ct=v.data[Ye],Nt=b[Ye];pe(Ye),(null!==ct.hostBindings||0!==ct.hostVars||null!==ct.hostAttrs)&&ep(ct,Nt)}}finally{It(-1),pe(Oe)}}(v,b,T))}(le,J,ct),function $d(v,b,T){if(Ta(b)){const J=b.directiveEnd;for(let le=b.directiveStart;le<J;le++){const be=v.data[le];be.contentQueries&&be.contentQueries(1,T[le],le)}}}(le,ct,J)),null!==z&&function ll(v,b,T=ia){const z=b.localNames;if(null!==z){let J=b.index+1;for(let le=0;le<z.length;le+=2){const be=z[le+1],Oe=-1===be?T(b,v):v[be];v[J++]=Oe}}}(J,ct)}function qm(){let v=Ao();Js()?xo():(v=v.parent,hs(v,!1));const b=v;!function Vi(){Qi.lFrame.elementDepthCount--}();const T=la();T.firstCreatePass&&(jn(T,v),Ta(v)&&T.queries.elementEnd(v)),null!=b.classesWithoutHost&&function fi(v){return 0!=(16&v.flags)}(b)&&Vm(T,b,Zr(),b.classesWithoutHost,!0),null!=b.stylesWithoutHost&&function Mi(v){return 0!=(32&v.flags)}(b)&&Vm(T,b,Zr(),b.stylesWithoutHost,!1)}function j0(v,b,T,z){Hm(v,b,T,z),qm()}function U0(v){return!!v&&"function"==typeof v.then}const z1=function F1(v){return!!v&&"function"==typeof v.subscribe};function y3(v,b){let T=null;const z=function gs(v){const b=v.attrs;if(null!=b){const T=b.indexOf(5);if(0==(1&T))return b[T+1]}return null}(v);for(let J=0;J<b.length;J++){const le=b[J];if("*"!==le){if(null===z?Xo(v,le,!0):Yo(z,le))return J}else T=J}return T}const eh=void 0;var r5=["en",[["a","p"],["AM","PM"],eh],[["AM","PM"],eh,eh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],eh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],eh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",eh,"{1} 'at' {0}",eh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function n5(v){const T=Math.floor(Math.abs(v)),z=v.toString().replace(/^[^.]*\.?/,"").length;return 1===T&&0===z?1:5}];let td={};function Ox(v){return v in td||(td[v]=oa.ng&&oa.ng.common&&oa.ng.common.locales&&oa.ng.common.locales[v]),td[v]}var Oi=(()=>((Oi=Oi||{})[Oi.LocaleId=0]="LocaleId",Oi[Oi.DayPeriodsFormat=1]="DayPeriodsFormat",Oi[Oi.DayPeriodsStandalone=2]="DayPeriodsStandalone",Oi[Oi.DaysFormat=3]="DaysFormat",Oi[Oi.DaysStandalone=4]="DaysStandalone",Oi[Oi.MonthsFormat=5]="MonthsFormat",Oi[Oi.MonthsStandalone=6]="MonthsStandalone",Oi[Oi.Eras=7]="Eras",Oi[Oi.FirstDayOfWeek=8]="FirstDayOfWeek",Oi[Oi.WeekendRange=9]="WeekendRange",Oi[Oi.DateFormat=10]="DateFormat",Oi[Oi.TimeFormat=11]="TimeFormat",Oi[Oi.DateTimeFormat=12]="DateTimeFormat",Oi[Oi.NumberSymbols=13]="NumberSymbols",Oi[Oi.NumberFormats=14]="NumberFormats",Oi[Oi.CurrencyCode=15]="CurrencyCode",Oi[Oi.CurrencySymbol=16]="CurrencySymbol",Oi[Oi.CurrencyName=17]="CurrencyName",Oi[Oi.Currencies=18]="Currencies",Oi[Oi.Directionality=19]="Directionality",Oi[Oi.PluralCase=20]="PluralCase",Oi[Oi.ExtraData=21]="ExtraData",Oi))();const q0="en-US";let Rx=q0;function Km(v,b,T,z,J){if(v=Mn(v),Array.isArray(v))for(let le=0;le<v.length;le++)Km(v[le],b,T,z,J);else{const le=la(),be=Zr();let Oe=Vh(v)?v:Mn(v.provide),Ye=e1(v);const ct=Ao(),Nt=1048575&ct.providerIndexes,en=ct.directiveStart,An=ct.providerIndexes>>20;if(Vh(v)||!v.multi){const zn=new pi(Ye,J,ea),gr=Qm(Oe,b,J?Nt:Nt+An,en);-1===gr?(Gl(tl(ct,be),le,Oe),Jm(le,v,b.length),b.push(Oe),ct.directiveStart++,ct.directiveEnd++,J&&(ct.providerIndexes+=1048576),T.push(zn),be.push(zn)):(T[gr]=zn,be[gr]=zn)}else{const zn=Qm(Oe,b,Nt+An,en),gr=Qm(Oe,b,Nt,Nt+An),Xr=zn>=0&&T[zn],ui=gr>=0&&T[gr];if(J&&!ui||!J&&!Xr){Gl(tl(ct,be),le,Oe);const gi=function nT(v,b,T,z,J){const le=new pi(v,T,ea);return le.multi=[],le.index=b,le.componentProviders=0,ab(le,J,z&&!T),le}(J?tT:eT,T.length,J,z,Ye);!J&&ui&&(T[gr].providerFactory=gi),Jm(le,v,b.length,0),b.push(Oe),ct.directiveStart++,ct.directiveEnd++,J&&(ct.providerIndexes+=1048576),T.push(gi),be.push(gi)}else Jm(le,v,zn>-1?zn:gr,ab(T[J?gr:zn],Ye,!J&&z));!J&&z&&ui&&T[gr].componentProviders++}}}function Jm(v,b,T,z){const J=Vh(b),le=function _w(v){return!!v.useClass}(b);if(J||le){const Ye=(le?Mn(b.useClass):b).prototype.ngOnDestroy;if(Ye){const ct=v.destroyHooks||(v.destroyHooks=[]);if(!J&&b.multi){const Nt=ct.indexOf(T);-1===Nt?ct.push(T,[z,Ye]):ct[Nt+1].push(z,Ye)}else ct.push(T,Ye)}}}function ab(v,b,T){return T&&v.componentProviders++,v.multi.push(b)-1}function Qm(v,b,T,z){for(let J=T;J<z;J++)if(b[J]===v)return J;return-1}function eT(v,b,T,z){return ev(this.multi,[])}function tT(v,b,T,z){const J=this.multi;let le;if(this.providerFactory){const be=this.providerFactory.componentProviders,Oe=ru(T,T[1],this.providerFactory.index,z);le=Oe.slice(0,be),ev(J,le);for(let Ye=be;Ye<Oe.length;Ye++)le.push(Oe[Ye])}else le=[],ev(J,le);return le}function ev(v,b){for(let T=0;T<v.length;T++)b.push((0,v[T])());return b}function ob(v,b=[]){return T=>{T.providersResolver=(z,J)=>function Q5(v,b,T){const z=la();if(z.firstCreatePass){const J=xa(v);Km(T,z.data,z.blueprint,J,!0),Km(b,z.data,z.blueprint,J,!1)}}(z,J?J(v):v,b)}}class sb{}class aT{resolveComponentFactory(b){throw function iT(v){const b=Error(`No component factory found for ${gn(v)}. Did you add it to @NgModule.entryComponents?`);return b.ngComponent=v,b}(b)}}let rd=(()=>{class v{}return v.NULL=new aT,v})();function oT(){return id(Ao(),Zr())}function id(v,b){return new af(ia(v,b))}let af=(()=>{class v{constructor(T){this.nativeElement=T}}return v.__NG_ELEMENT_ID__=oT,v})();function sT(v){return v instanceof af?v.nativeElement:v}class ub{}let X0=(()=>{class v{}return v.__NG_ELEMENT_ID__=()=>function uT(){const v=Zr(),T=eo(Ao().index,v);return function lT(v){return v[11]}(na(T)?T:v)}(),v})(),cT=(()=>{class v{}return v.\u0275prov=Pn({token:v,providedIn:"root",factory:()=>null}),v})();class $0{constructor(b){this.full=b,this.major=b.split(".")[0],this.minor=b.split(".")[1],this.patch=b.split(".").slice(2).join(".")}}const fT=new $0("13.1.3"),tv={};function K0(v,b,T,z,J=!1){for(;null!==T;){const le=b[T.index];if(null!==le&&z.push(Ra(le)),Ji(le))for(let Oe=10;Oe<le.length;Oe++){const Ye=le[Oe],ct=Ye[1].firstChild;null!==ct&&K0(Ye[1],Ye,ct,z)}const be=T.type;if(8&be)K0(v,b,T.child,z);else if(32&be){const Oe=Zl(T,b);let Ye;for(;Ye=Oe();)z.push(Ye)}else if(16&be){const Oe=Di(b,T);if(Array.isArray(Oe))z.push(...Oe);else{const Ye=hc(b[16]);K0(Ye[1],Ye,Oe,z,!0)}}T=J?T.projectionNext:T.next}return z}class hp{constructor(b,T){this._lView=b,this._cdRefInjectingView=T,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const b=this._lView,T=b[1];return K0(T,b,T.firstChild,[])}get context(){return this._lView[8]}set context(b){this._lView[8]=b}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const b=this._lView[3];if(Ji(b)){const T=b[8],z=T?T.indexOf(this):-1;z>-1&&(Tt(b,z),fh(T,z))}this._attachedToViewContainer=!1}qt(this._lView[1],this._lView)}onDestroy(b){xc(this._lView[1],this._lView,null,b)}markForCheck(){!function km(v){for(;v;){v[2]|=64;const b=hc(v);if(Ga(v)&&!b)return v;v=b}return null}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Em(this._lView[1],this._lView,this.context)}checkNoChanges(){!function cw(v,b,T){yl(!0);try{Em(v,b,T)}finally{yl(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Hn(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ke(v,b){Aa(v,b,b[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(b){if(this._attachedToViewContainer)throw new Hn(902,"");this._appRef=b}}class hT extends hp{constructor(b){super(b),this._view=b}detectChanges(){qy(this._view)}checkNoChanges(){!function fw(v){yl(!0);try{qy(v)}finally{yl(!1)}}(this._view)}get context(){return null}}class cb extends rd{constructor(b){super(),this.ngModule=b}resolveComponentFactory(b){const T=co(b);return new nv(T,this.ngModule)}}function fb(v){const b=[];for(let T in v)v.hasOwnProperty(T)&&b.push({propName:v[T],templateName:T});return b}const pT=new Za("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>_o});class nv extends sb{constructor(b,T){super(),this.componentDef=b,this.ngModule=T,this.componentType=b.type,this.selector=function So(v){return v.map(No).join(",")}(b.selectors),this.ngContentSelectors=b.ngContentSelectors?b.ngContentSelectors:[],this.isBoundToModule=!!T}get inputs(){return fb(this.componentDef.inputs)}get outputs(){return fb(this.componentDef.outputs)}create(b,T,z,J){const le=(J=J||this.ngModule)?function gT(v,b){return{get:(T,z,J)=>{const le=v.get(T,tv,J);return le!==tv||z===tv?le:b.get(T,z,J)}}}(b,J.injector):b,be=le.get(ub,Vs),Oe=le.get(cT,null),Ye=be.createRenderer(null,this.componentDef),ct=this.componentDef.selectors[0][0]||"div",Nt=z?function Yu(v,b,T){if(ga(v))return v.selectRootElement(b,T===Ia.ShadowDom);let z="string"==typeof b?v.querySelector(b):b;return z.textContent="",z}(Ye,z,this.componentDef.encapsulation):K(be.createRenderer(null,this.componentDef),ct,function dT(v){const b=v.toLowerCase();return"svg"===b?"http://www.w3.org/2000/svg":"math"===b?"http://www.w3.org/1998/MathML/":null}(ct)),en=this.componentDef.onPush?576:528,An=function h1(v,b){return{components:[],scheduler:v||_o,clean:hw,playerHandler:b||null,flags:0}}(),zn=Wf(0,null,null,1,0,null,null,null,null,null),gr=Gu(null,zn,An,en,null,null,be,Ye,Oe,le);let Xr,ui;me(gr);try{const gi=function c1(v,b,T,z,J,le){const be=T[1];T[20]=v;const Ye=xu(be,20,2,"#host",null),ct=Ye.mergedAttrs=b.hostAttrs;null!==ct&&(O0(Ye,ct,!0),null!==v&&(xi(J,v,ct),null!==Ye.classes&&no(J,v,Ye.classes),null!==Ye.styles&&wo(J,v,Ye.styles)));const Nt=z.createRenderer(v,b),en=Gu(T,Yf(b),null,b.onPush?64:16,T[20],Ye,z,Nt,le||null,null);return be.firstCreatePass&&(Gl(tl(Ye,T),be,b.type),np(be,Ye),$f(Ye,T.length,1)),Jf(T,en),T[20]=en}(Nt,this.componentDef,gr,be,Ye);if(Nt)if(z)xi(Ye,Nt,["ng-version",fT.full]);else{const{attrs:Gr,classes:Ni}=function qa(v){const b=[],T=[];let z=1,J=2;for(;z<v.length;){let le=v[z];if("string"==typeof le)2===J?""!==le&&b.push(le,v[++z]):8===J&&T.push(le);else{if(!so(J))break;J=le}z++}return{attrs:b,classes:T}}(this.componentDef.selectors[0]);Gr&&xi(Ye,Nt,Gr),Ni&&Ni.length>0&&no(Ye,Nt,Ni.join(" "))}if(ui=Ro(zn,20),void 0!==T){const Gr=ui.projection=[];for(let Ni=0;Ni<this.ngContentSelectors.length;Ni++){const _a=T[Ni];Gr.push(null!=_a?Array.from(_a):null)}}Xr=function f1(v,b,T,z,J){const le=T[1],be=function Kd(v,b,T){const z=Ao();v.firstCreatePass&&(T.providersResolver&&T.providersResolver(T),D0(v,z,b,vc(v,b,1,null),T));const J=ru(b,v,z.directiveStart,z);ol(J,b);const le=ia(z,b);return le&&ol(le,b),J}(le,T,b);if(z.components.push(be),v[8]=be,J&&J.forEach(Ye=>Ye(be,b)),b.contentQueries){const Ye=Ao();b.contentQueries(1,be,Ye.directiveStart)}const Oe=Ao();return!le.firstCreatePass||null===b.hostBindings&&null===b.hostAttrs||(It(Oe.index),Jd(T[1],Oe,0,Oe.directiveStart,Oe.directiveEnd,b),ep(b,be)),be}(gi,this.componentDef,gr,An,[Iw]),bu(zn,gr,null)}finally{nt()}return new vT(this.componentType,Xr,id(ui,gr),gr,ui)}}class vT extends class rT{}{constructor(b,T,z,J,le){super(),this.location=z,this._rootLView=J,this._tNode=le,this.instance=T,this.hostView=this.changeDetectorRef=new hT(J),this.componentType=b}get injector(){return new Rl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(b){this.hostView.onDestroy(b)}}class wc{}class hb{}const ad=new Map;class gb extends wc{constructor(b,T){super(),this._parent=T,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new cb(this);const z=Vo(b);this._bootstrapComponents=Wl(z.bootstrap),this._r3Injector=Qy(b,T,[{provide:wc,useValue:this},{provide:rd,useValue:this.componentFactoryResolver}],gn(b)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(b)}get(b,T=Al.THROW_IF_NOT_FOUND,z=cr.Default){return b===Al||b===wc||b===Cm?this:this._r3Injector.get(b,T,z)}destroy(){const b=this._r3Injector;!b.destroyed&&b.destroy(),this.destroyCbs.forEach(T=>T()),this.destroyCbs=null}onDestroy(b){this.destroyCbs.push(b)}}class rv extends hb{constructor(b){super(),this.moduleType=b,null!==Vo(b)&&function xT(v){const b=new Set;!function T(z){const J=Vo(z,!0),le=J.id;null!==le&&(function db(v,b,T){if(b&&b!==T)throw new Error(`Duplicate module registered for ${v} - ${gn(b)} vs ${gn(b.name)}`)}(le,ad.get(le),z),ad.set(le,z));const be=Wl(J.imports);for(const Oe of be)b.has(Oe)||(b.add(Oe),T(Oe))}(v)}(b)}create(b){return new gb(this.moduleType,b)}}function iv(v){return b=>{setTimeout(v,void 0,b)}}const ua=class zT extends Y{constructor(b=!1){super(),this.__isAsync=b}emit(b){super.next(b)}subscribe(b,T,z){var J,le,be;let Oe=b,Ye=T||(()=>null),ct=z;if(b&&"object"==typeof b){const en=b;Oe=null===(J=en.next)||void 0===J?void 0:J.bind(en),Ye=null===(le=en.error)||void 0===le?void 0:le.bind(en),ct=null===(be=en.complete)||void 0===be?void 0:be.bind(en)}this.__isAsync&&(Ye=iv(Ye),Oe&&(Oe=iv(Oe)),ct&&(ct=iv(ct)));const Nt=super.subscribe({next:Oe,error:Ye,complete:ct});return b instanceof y&&b.add(Nt),Nt}};function NT(){return this._results[Hh()]()}class av{constructor(b=!1){this._emitDistinctChangesOnly=b,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const T=Hh(),z=av.prototype;z[T]||(z[T]=NT)}get changes(){return this._changes||(this._changes=new ua)}get(b){return this._results[b]}map(b){return this._results.map(b)}filter(b){return this._results.filter(b)}find(b){return this._results.find(b)}reduce(b,T){return this._results.reduce(b,T)}forEach(b){this._results.forEach(b)}some(b){return this._results.some(b)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(b,T){const z=this;z.dirty=!1;const J=zl(b);(this._changesDetected=!function ff(v,b,T){if(v.length!==b.length)return!1;for(let z=0;z<v.length;z++){let J=v[z],le=b[z];if(T&&(J=T(J),le=T(le)),le!==J)return!1}return!0}(z._results,J,T))&&(z._results=J,z.length=J.length,z.last=J[this.length-1],z.first=J[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Tc=(()=>{class v{}return v.__NG_ELEMENT_ID__=UT,v})();const BT=Tc,jT=class extends BT{constructor(b,T,z){super(),this._declarationLView=b,this._declarationTContainer=T,this.elementRef=z}createEmbeddedView(b){const T=this._declarationTContainer.tViews,z=Gu(this._declarationLView,T,b,16,null,T.declTNode,null,null,null,null);z[17]=this._declarationLView[this._declarationTContainer.index];const le=this._declarationLView[19];return null!==le&&(z[19]=le.createEmbeddedView(T)),bu(T,z,b),new hp(z)}};function UT(){return J0(Ao(),Zr())}function J0(v,b){return 4&v.type?new jT(b,v,id(v,b)):null}let Mu=(()=>{class v{}return v.__NG_ELEMENT_ID__=VT,v})();function VT(){return Tb(Ao(),Zr())}const HT=Mu,_b=class extends HT{constructor(b,T,z){super(),this._lContainer=b,this._hostTNode=T,this._hostLView=z}get element(){return id(this._hostTNode,this._hostLView)}get injector(){return new Rl(this._hostTNode,this._hostLView)}get parentInjector(){const b=ql(this._hostTNode,this._hostLView);if(aa(b)){const T=oo(b,this._hostLView),z=ha(b);return new Rl(T[1].data[z+8],T)}return new Rl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(b){const T=wb(this._lContainer);return null!==T&&T[b]||null}get length(){return this._lContainer.length-10}createEmbeddedView(b,T,z){const J=b.createEmbeddedView(T||{});return this.insert(J,z),J}createComponent(b,T,z,J,le){const be=b&&!function Ic(v){return"function"==typeof v}(b);let Oe;if(be)Oe=T;else{const en=T||{};Oe=en.index,z=en.injector,J=en.projectableNodes,le=en.ngModuleRef}const Ye=be?b:new nv(co(b)),ct=z||this.parentInjector;if(!le&&null==Ye.ngModule&&ct){const en=ct.get(wc,null);en&&(le=en)}const Nt=Ye.create(ct,J,void 0,le);return this.insert(Nt.hostView,Oe),Nt}insert(b,T){const z=b._lView,J=z[1];if(function vl(v){return Ji(v[3])}(z)){const Nt=this.indexOf(b);if(-1!==Nt)this.detach(Nt);else{const en=z[3],An=new _b(en,en[6],en[3]);An.detach(An.indexOf(b))}}const le=this._adjustIndex(T),be=this._lContainer;!function Ze(v,b,T,z){const J=10+z,le=T.length;z>0&&(T[J-1][4]=b),z<le-10?(b[4]=T[J],Bp(T,10+z,b)):(T.push(b),b[4]=null),b[3]=T;const be=b[17];null!==be&&T!==be&&function ot(v,b){const T=v[9];b[16]!==b[3][3][16]&&(v[2]=!0),null===T?v[9]=[b]:T.push(b)}(be,b);const Oe=b[19];null!==Oe&&Oe.insertView(v),b[2]|=128}(J,z,be,le);const Oe=Ei(le,be),Ye=z[11],ct=Tr(Ye,be[7]);return null!==ct&&function ye(v,b,T,z,J,le){z[0]=J,z[6]=b,Aa(v,z,T,1,J,le)}(J,be[6],Ye,z,ct,Oe),b.attachToViewContainerRef(),Bp(ov(be),le,b),b}move(b,T){return this.insert(b,T)}indexOf(b){const T=wb(this._lContainer);return null!==T?T.indexOf(b):-1}remove(b){const T=this._adjustIndex(b,-1),z=Tt(this._lContainer,T);z&&(fh(ov(this._lContainer),T),qt(z[1],z))}detach(b){const T=this._adjustIndex(b,-1),z=Tt(this._lContainer,T);return z&&null!=fh(ov(this._lContainer),T)?new hp(z):null}_adjustIndex(b,T=0){return null==b?this.length+T:b}};function wb(v){return v[8]}function ov(v){return v[8]||(v[8]=[])}function Tb(v,b){let T;const z=b[v.index];if(Ji(z))T=z;else{let J;if(8&v.type)J=Ra(z);else{const le=b[11];J=le.createComment("");const be=ia(v,b);Bn(le,Tr(le,be),J,function Fr(v,b){return ga(v)?v.nextSibling(b):b.nextSibling}(le,be),!1)}b[v.index]=T=function I0(v,b,T,z){return new Array(v,!0,!1,b,null,0,z,T,null,null)}(z,b,J,v),Jf(b,T)}return new _b(T,v,b)}class sv{constructor(b){this.queryList=b,this.matches=null}clone(){return new sv(this.queryList)}setDirty(){this.queryList.setDirty()}}class lv{constructor(b=[]){this.queries=b}createEmbeddedView(b){const T=b.queries;if(null!==T){const z=null!==b.contentQueries?b.contentQueries[0]:T.length,J=[];for(let le=0;le<z;le++){const be=T.getByIndex(le);J.push(this.queries[be.indexInDeclarationView].clone())}return new lv(J)}return null}insertView(b){this.dirtyQueriesWithMatches(b)}detachView(b){this.dirtyQueriesWithMatches(b)}dirtyQueriesWithMatches(b){for(let T=0;T<this.queries.length;T++)null!==Cb(b,T).matches&&this.queries[T].setDirty()}}class Mb{constructor(b,T,z=null){this.predicate=b,this.flags=T,this.read=z}}class uv{constructor(b=[]){this.queries=b}elementStart(b,T){for(let z=0;z<this.queries.length;z++)this.queries[z].elementStart(b,T)}elementEnd(b){for(let T=0;T<this.queries.length;T++)this.queries[T].elementEnd(b)}embeddedTView(b){let T=null;for(let z=0;z<this.length;z++){const J=null!==T?T.length:0,le=this.getByIndex(z).embeddedTView(b,J);le&&(le.indexInDeclarationView=z,null!==T?T.push(le):T=[le])}return null!==T?new uv(T):null}template(b,T){for(let z=0;z<this.queries.length;z++)this.queries[z].template(b,T)}getByIndex(b){return this.queries[b]}get length(){return this.queries.length}track(b){this.queries.push(b)}}class cv{constructor(b,T=-1){this.metadata=b,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=T}elementStart(b,T){this.isApplyingToNode(T)&&this.matchTNode(b,T)}elementEnd(b){this._declarationNodeIndex===b.index&&(this._appliesToNextNode=!1)}template(b,T){this.elementStart(b,T)}embeddedTView(b,T){return this.isApplyingToNode(b)?(this.crossesNgTemplate=!0,this.addMatch(-b.index,T),new cv(this.metadata)):null}isApplyingToNode(b){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const T=this._declarationNodeIndex;let z=b.parent;for(;null!==z&&8&z.type&&z.index!==T;)z=z.parent;return T===(null!==z?z.index:-1)}return this._appliesToNextNode}matchTNode(b,T){const z=this.metadata.predicate;if(Array.isArray(z))for(let J=0;J<z.length;J++){const le=z[J];this.matchTNodeWithReadOption(b,T,YT(T,le)),this.matchTNodeWithReadOption(b,T,ps(T,b,le,!1,!1))}else z===Tc?4&T.type&&this.matchTNodeWithReadOption(b,T,-1):this.matchTNodeWithReadOption(b,T,ps(T,b,z,!1,!1))}matchTNodeWithReadOption(b,T,z){if(null!==z){const J=this.metadata.read;if(null!==J)if(J===af||J===Mu||J===Tc&&4&T.type)this.addMatch(T.index,-2);else{const le=ps(T,b,J,!1,!1);null!==le&&this.addMatch(T.index,le)}else this.addMatch(T.index,z)}}addMatch(b,T){null===this.matches?this.matches=[b,T]:this.matches.push(b,T)}}function YT(v,b){const T=v.localNames;if(null!==T)for(let z=0;z<T.length;z+=2)if(T[z]===b)return T[z+1];return null}function ZT(v,b,T,z){return-1===T?function WT(v,b){return 11&v.type?id(v,b):4&v.type?J0(v,b):null}(b,v):-2===T?function XT(v,b,T){return T===af?id(b,v):T===Tc?J0(b,v):T===Mu?Tb(b,v):void 0}(v,b,z):ru(v,v[1],T,b)}function kb(v,b,T,z){const J=b[19].queries[z];if(null===J.matches){const le=v.data,be=T.matches,Oe=[];for(let Ye=0;Ye<be.length;Ye+=2){const ct=be[Ye];Oe.push(ct<0?null:ZT(b,le[ct],be[Ye+1],T.metadata.read))}J.matches=Oe}return J.matches}function fv(v,b,T,z){const J=v.queries.getByIndex(T),le=J.matches;if(null!==le){const be=kb(v,b,J,T);for(let Oe=0;Oe<le.length;Oe+=2){const Ye=le[Oe];if(Ye>0)z.push(be[Oe/2]);else{const ct=le[Oe+1],Nt=b[-Ye];for(let en=10;en<Nt.length;en++){const An=Nt[en];An[17]===An[3]&&fv(An[1],An,ct,z)}if(null!==Nt[9]){const en=Nt[9];for(let An=0;An<en.length;An++){const zn=en[An];fv(zn[1],zn,ct,z)}}}}}return z}function Q0(v){const b=Zr(),T=la(),z=N();V(z+1);const J=Cb(T,z);if(v.dirty&&Ha(b)===(2==(2&J.metadata.flags))){if(null===J.matches)v.reset([]);else{const le=J.crossesNgTemplate?fv(T,b,z,[]):kb(T,b,J,z);v.reset(le,sT),v.notifyOnChanges()}return!0}return!1}function Ab(v,b,T){const z=la();z.firstCreatePass&&(function Sb(v,b,T){null===v.queries&&(v.queries=new uv),v.queries.track(new cv(b,T))}(z,new Mb(v,b,T),-1),2==(2&b)&&(z.staticViewQueries=!0)),function Eb(v,b,T){const z=new av(4==(4&T));xc(v,b,z,z.destroy),null===b[19]&&(b[19]=new lv),b[19].queries.push(new sv(z))}(z,Zr(),b)}function Cb(v,b){return v.queries.getByIndex(b)}function rg(...v){}const ig=new Za("Application Initializer");let sd=(()=>{class v{constructor(T){this.appInits=T,this.resolve=rg,this.reject=rg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((z,J)=>{this.resolve=z,this.reject=J})}runInitializers(){if(this.initialized)return;const T=[],z=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let J=0;J<this.appInits.length;J++){const le=this.appInits[J]();if(U0(le))T.push(le);else if(z1(le)){const be=new Promise((Oe,Ye)=>{le.subscribe({complete:Oe,error:Ye})});T.push(be)}}Promise.all(T).then(()=>{z()}).catch(J=>{this.reject(J)}),0===T.length&&z(),this.initialized=!0}}return v.\u0275fac=function(T){return new(T||v)(da(ig,8))},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})();const mp=new Za("AppId"),mM={provide:mp,useFactory:function gM(){return`${yv()}${yv()}${yv()}`},deps:[]};function yv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Yb=new Za("Platform Initializer"),xv=new Za("Platform ID"),Wb=new Za("appBootstrapListener");let Zb=(()=>{class v{log(T){console.log(T)}warn(T){console.warn(T)}}return v.\u0275fac=function(T){return new(T||v)},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})();const of=new Za("LocaleId"),Xb=new Za("DefaultCurrencyCode");class vM{constructor(b,T){this.ngModuleFactory=b,this.componentFactories=T}}let ag=(()=>{class v{compileModuleSync(T){return new rv(T)}compileModuleAsync(T){return Promise.resolve(this.compileModuleSync(T))}compileModuleAndAllComponentsSync(T){const z=this.compileModuleSync(T),le=Wl(Vo(T).declarations).reduce((be,Oe)=>{const Ye=co(Oe);return Ye&&be.push(new nv(Ye)),be},[]);return new vM(z,le)}compileModuleAndAllComponentsAsync(T){return Promise.resolve(this.compileModuleAndAllComponentsSync(T))}clearCache(){}clearCacheFor(T){}getModuleId(T){}}return v.\u0275fac=function(T){return new(T||v)},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})();const xM=(()=>Promise.resolve(0))();function bv(v){"undefined"==typeof Zone?xM.then(()=>{v&&v.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",v)}class Zs{constructor({enableLongStackTrace:b=!1,shouldCoalesceEventChangeDetection:T=!1,shouldCoalesceRunChangeDetection:z=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ua(!1),this.onMicrotaskEmpty=new ua(!1),this.onStable=new ua(!1),this.onError=new ua(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const J=this;J._nesting=0,J._outer=J._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(J._inner=J._inner.fork(new Zone.TaskTrackingZoneSpec)),b&&Zone.longStackTraceZoneSpec&&(J._inner=J._inner.fork(Zone.longStackTraceZoneSpec)),J.shouldCoalesceEventChangeDetection=!z&&T,J.shouldCoalesceRunChangeDetection=z,J.lastRequestAnimationFrameId=-1,J.nativeRequestAnimationFrame=function bM(){let v=oa.requestAnimationFrame,b=oa.cancelAnimationFrame;if("undefined"!=typeof Zone&&v&&b){const T=v[Zone.__symbol__("OriginalDelegate")];T&&(v=T);const z=b[Zone.__symbol__("OriginalDelegate")];z&&(b=z)}return{nativeRequestAnimationFrame:v,nativeCancelAnimationFrame:b}}().nativeRequestAnimationFrame,function TM(v){const b=()=>{!function wM(v){v.isCheckStableRunning||-1!==v.lastRequestAnimationFrameId||(v.lastRequestAnimationFrameId=v.nativeRequestAnimationFrame.call(oa,()=>{v.fakeTopEventTask||(v.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{v.lastRequestAnimationFrameId=-1,wv(v),v.isCheckStableRunning=!0,_v(v),v.isCheckStableRunning=!1},void 0,()=>{},()=>{})),v.fakeTopEventTask.invoke()}),wv(v))}(v)};v._inner=v._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(T,z,J,le,be,Oe)=>{try{return $b(v),T.invokeTask(J,le,be,Oe)}finally{(v.shouldCoalesceEventChangeDetection&&"eventTask"===le.type||v.shouldCoalesceRunChangeDetection)&&b(),Kb(v)}},onInvoke:(T,z,J,le,be,Oe,Ye)=>{try{return $b(v),T.invoke(J,le,be,Oe,Ye)}finally{v.shouldCoalesceRunChangeDetection&&b(),Kb(v)}},onHasTask:(T,z,J,le)=>{T.hasTask(J,le),z===J&&("microTask"==le.change?(v._hasPendingMicrotasks=le.microTask,wv(v),_v(v)):"macroTask"==le.change&&(v.hasPendingMacrotasks=le.macroTask))},onHandleError:(T,z,J,le)=>(T.handleError(J,le),v.runOutsideAngular(()=>v.onError.emit(le)),!1)})}(J)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Zs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(b,T,z){return this._inner.run(b,T,z)}runTask(b,T,z,J){const le=this._inner,be=le.scheduleEventTask("NgZoneEvent: "+J,b,_M,rg,rg);try{return le.runTask(be,T,z)}finally{le.cancelTask(be)}}runGuarded(b,T,z){return this._inner.runGuarded(b,T,z)}runOutsideAngular(b){return this._outer.run(b)}}const _M={};function _v(v){if(0==v._nesting&&!v.hasPendingMicrotasks&&!v.isStable)try{v._nesting++,v.onMicrotaskEmpty.emit(null)}finally{if(v._nesting--,!v.hasPendingMicrotasks)try{v.runOutsideAngular(()=>v.onStable.emit(null))}finally{v.isStable=!0}}}function wv(v){v.hasPendingMicrotasks=!!(v._hasPendingMicrotasks||(v.shouldCoalesceEventChangeDetection||v.shouldCoalesceRunChangeDetection)&&-1!==v.lastRequestAnimationFrameId)}function $b(v){v._nesting++,v.isStable&&(v.isStable=!1,v.onUnstable.emit(null))}function Kb(v){v._nesting--,_v(v)}class MM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ua,this.onMicrotaskEmpty=new ua,this.onStable=new ua,this.onError=new ua}run(b,T,z){return b.apply(T,z)}runGuarded(b,T,z){return b.apply(T,z)}runOutsideAngular(b){return b()}runTask(b,T,z,J){return b.apply(T,z)}}let Tv=(()=>{class v{constructor(T){this._ngZone=T,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),T.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zs.assertNotInAngularZone(),bv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bv(()=>{for(;0!==this._callbacks.length;){let T=this._callbacks.pop();clearTimeout(T.timeoutId),T.doneCb(this._didWork)}this._didWork=!1});else{let T=this.getPendingTasks();this._callbacks=this._callbacks.filter(z=>!z.updateCb||!z.updateCb(T)||(clearTimeout(z.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(T=>({source:T.source,creationLocation:T.creationLocation,data:T.data})):[]}addCallback(T,z,J){let le=-1;z&&z>0&&(le=setTimeout(()=>{this._callbacks=this._callbacks.filter(be=>be.timeoutId!==le),T(this._didWork,this.getPendingTasks())},z)),this._callbacks.push({doneCb:T,timeoutId:le,updateCb:J})}whenStable(T,z,J){if(J&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(T,z,J),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(T,z,J){return[]}}return v.\u0275fac=function(T){return new(T||v)(da(Zs))},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})(),Jb=(()=>{class v{constructor(){this._applications=new Map,Mv.addToWindow(this)}registerApplication(T,z){this._applications.set(T,z)}unregisterApplication(T){this._applications.delete(T)}unregisterAllApplications(){this._applications.clear()}getTestability(T){return this._applications.get(T)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(T,z=!0){return Mv.findTestabilityInTree(this,T,z)}}return v.\u0275fac=function(T){return new(T||v)},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})();class kM{addToWindow(b){}findTestabilityInTree(b,T,z){return null}}let ku,Mv=new kM;const Qb=new Za("AllowMultipleToken");class e_{constructor(b,T){this.name=b,this.token=T}}function t_(v,b,T=[]){const z=`Platform: ${b}`,J=new Za(z);return(le=[])=>{let be=n_();if(!be||be.injector.get(Qb,!1))if(v)v(T.concat(le).concat({provide:J,useValue:!0}));else{const Oe=T.concat(le).concat({provide:J,useValue:!0},{provide:Dm,useValue:"platform"});!function CM(v){if(ku&&!ku.destroyed&&!ku.injector.get(Qb,!1))throw new Hn(400,"");ku=v.get(r_);const b=v.get(Yb,null);b&&b.forEach(T=>T())}(Al.create({providers:Oe,name:z}))}return function DM(v){const b=n_();if(!b)throw new Hn(401,"");return b}()}}function n_(){return ku&&!ku.destroyed?ku:null}let r_=(()=>{class v{constructor(T){this._injector=T,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(T,z){const Oe=function LM(v,b){let T;return T="noop"===v?new MM:("zone.js"===v?void 0:v)||new Zs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==b?void 0:b.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==b?void 0:b.ngZoneRunCoalescing)}),T}(z?z.ngZone:void 0,{ngZoneEventCoalescing:z&&z.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:z&&z.ngZoneRunCoalescing||!1}),Ye=[{provide:Zs,useValue:Oe}];return Oe.run(()=>{const ct=Al.create({providers:Ye,parent:this.injector,name:T.moduleType.name}),Nt=T.create(ct),en=Nt.injector.get(Wc,null);if(!en)throw new Hn(402,"");return Oe.runOutsideAngular(()=>{const An=Oe.onError.subscribe({next:zn=>{en.handleError(zn)}});Nt.onDestroy(()=>{kv(this._modules,Nt),An.unsubscribe()})}),function IM(v,b,T){try{const z=T();return U0(z)?z.catch(J=>{throw b.runOutsideAngular(()=>v.handleError(J)),J}):z}catch(z){throw b.runOutsideAngular(()=>v.handleError(z)),z}}(en,Oe,()=>{const An=Nt.injector.get(sd);return An.runInitializers(),An.donePromise.then(()=>(function l5(v){jt(v,"Expected localeId to be defined"),"string"==typeof v&&(Rx=v.toLowerCase().replace(/_/g,"-"))}(Nt.injector.get(of,q0)||q0),this._moduleDoBootstrap(Nt),Nt))})})}bootstrapModule(T,z=[]){const J=i_({},z);return function EM(v,b,T){const z=new rv(T);return Promise.resolve(z)}(0,0,T).then(le=>this.bootstrapModuleFactory(le,J))}_moduleDoBootstrap(T){const z=T.injector.get(vp);if(T._bootstrapComponents.length>0)T._bootstrapComponents.forEach(J=>z.bootstrap(J));else{if(!T.instance.ngDoBootstrap)throw new Hn(403,"");T.instance.ngDoBootstrap(z)}this._modules.push(T)}onDestroy(T){this._destroyListeners.push(T)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Hn(404,"");this._modules.slice().forEach(T=>T.destroy()),this._destroyListeners.forEach(T=>T()),this._destroyed=!0}get destroyed(){return this._destroyed}}return v.\u0275fac=function(T){return new(T||v)(da(Al))},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})();function i_(v,b){return Array.isArray(b)?b.reduce(i_,v):Object.assign(Object.assign({},v),b)}let vp=(()=>{class v{constructor(T,z,J,le,be){this._zone=T,this._injector=z,this._exceptionHandler=J,this._componentFactoryResolver=le,this._initStatus=be,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const Oe=new D(ct=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{ct.next(this._stable),ct.complete()})}),Ye=new D(ct=>{let Nt;this._zone.runOutsideAngular(()=>{Nt=this._zone.onStable.subscribe(()=>{Zs.assertNotInAngularZone(),bv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,ct.next(!0))})})});const en=this._zone.onUnstable.subscribe(()=>{Zs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{ct.next(!1)}))});return()=>{Nt.unsubscribe(),en.unsubscribe()}});this.isStable=function zt(...v){const b=vt(v),T=function Ut(v,b){return"number"==typeof it(v)?v.pop():b}(v,1/0),z=v;return z.length?1===z.length?ft(z[0]):Se(T)(Mt(z,b)):je}(Oe,Ye.pipe(function un(v={}){const{connector:b=(()=>new Y),resetOnError:T=!0,resetOnComplete:z=!0,resetOnRefCountZero:J=!0}=v;return le=>{let be=null,Oe=null,Ye=null,ct=0,Nt=!1,en=!1;const An=()=>{null==Oe||Oe.unsubscribe(),Oe=null},zn=()=>{An(),be=Ye=null,Nt=en=!1},gr=()=>{const Xr=be;zn(),null==Xr||Xr.unsubscribe()};return X((Xr,ui)=>{ct++,!en&&!Nt&&An();const gi=Ye=null!=Ye?Ye:b();ui.add(()=>{ct--,0===ct&&!en&&!Nt&&(Oe=Qt(gr,J))}),gi.subscribe(ui),be||(be=new s({next:Gr=>gi.next(Gr),error:Gr=>{en=!0,An(),Oe=Qt(zn,T,Gr),gi.error(Gr)},complete:()=>{Nt=!0,An(),Oe=Qt(zn,z),gi.complete()}}),Mt(Xr).subscribe(be))})(le)}}()))}bootstrap(T,z){if(!this._initStatus.done)throw new Hn(405,"");let J;J=T instanceof sb?T:this._componentFactoryResolver.resolveComponentFactory(T),this.componentTypes.push(J.componentType);const le=function SM(v){return v.isBoundToModule}(J)?void 0:this._injector.get(wc),Oe=J.create(Al.NULL,[],z||J.selector,le),Ye=Oe.location.nativeElement,ct=Oe.injector.get(Tv,null),Nt=ct&&Oe.injector.get(Jb);return ct&&Nt&&Nt.registerApplication(Ye,ct),Oe.onDestroy(()=>{this.detachView(Oe.hostView),kv(this.components,Oe),Nt&&Nt.unregisterApplication(Ye)}),this._loadComponent(Oe),Oe}tick(){if(this._runningTick)throw new Hn(101,"");try{this._runningTick=!0;for(let T of this._views)T.detectChanges()}catch(T){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(T))}finally{this._runningTick=!1}}attachView(T){const z=T;this._views.push(z),z.attachToAppRef(this)}detachView(T){const z=T;kv(this._views,z),z.detachFromAppRef()}_loadComponent(T){this.attachView(T.hostView),this.tick(),this.components.push(T),this._injector.get(Wb,[]).concat(this._bootstrapListeners).forEach(J=>J(T))}ngOnDestroy(){this._views.slice().forEach(T=>T.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return v.\u0275fac=function(T){return new(T||v)(da(Zs),da(Al),da(Wc),da(rd),da(sd))},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})();function kv(v,b){const T=v.indexOf(b);T>-1&&v.splice(T,1)}let o_=!0,Av=(()=>{class v{}return v.__NG_ELEMENT_ID__=RM,v})();function RM(v){return function FM(v,b,T){if(fo(v)&&!T){const z=eo(v.index,b);return new hp(z,z)}return 47&v.type?new hp(b[16],b):null}(Ao(),Zr(),16==(16&v))}class d_{constructor(){}supports(b){return ap(b)}create(b){return new VM(b)}}const UM=(v,b)=>b;class VM{constructor(b){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=b||UM}forEachItem(b){let T;for(T=this._itHead;null!==T;T=T._next)b(T)}forEachOperation(b){let T=this._itHead,z=this._removalsHead,J=0,le=null;for(;T||z;){const be=!z||T&&T.currentIndex<g_(z,J,le)?T:z,Oe=g_(be,J,le),Ye=be.currentIndex;if(be===z)J--,z=z._nextRemoved;else if(T=T._next,null==be.previousIndex)J++;else{le||(le=[]);const ct=Oe-J,Nt=Ye-J;if(ct!=Nt){for(let An=0;An<ct;An++){const zn=An<le.length?le[An]:le[An]=0,gr=zn+An;Nt<=gr&&gr<ct&&(le[An]=zn+1)}le[be.previousIndex]=Nt-ct}}Oe!==Ye&&b(be,Oe,Ye)}}forEachPreviousItem(b){let T;for(T=this._previousItHead;null!==T;T=T._nextPrevious)b(T)}forEachAddedItem(b){let T;for(T=this._additionsHead;null!==T;T=T._nextAdded)b(T)}forEachMovedItem(b){let T;for(T=this._movesHead;null!==T;T=T._nextMoved)b(T)}forEachRemovedItem(b){let T;for(T=this._removalsHead;null!==T;T=T._nextRemoved)b(T)}forEachIdentityChange(b){let T;for(T=this._identityChangesHead;null!==T;T=T._nextIdentityChange)b(T)}diff(b){if(null==b&&(b=[]),!ap(b))throw new Hn(900,"");return this.check(b)?this:null}onDestroy(){}check(b){this._reset();let J,le,be,T=this._itHead,z=!1;if(Array.isArray(b)){this.length=b.length;for(let Oe=0;Oe<this.length;Oe++)le=b[Oe],be=this._trackByFn(Oe,le),null!==T&&Object.is(T.trackById,be)?(z&&(T=this._verifyReinsertion(T,le,be,Oe)),Object.is(T.item,le)||this._addIdentityChange(T,le)):(T=this._mismatch(T,le,be,Oe),z=!0),T=T._next}else J=0,function Vw(v,b){if(Array.isArray(v))for(let T=0;T<v.length;T++)b(v[T]);else{const T=v[Hh()]();let z;for(;!(z=T.next()).done;)b(z.value)}}(b,Oe=>{be=this._trackByFn(J,Oe),null!==T&&Object.is(T.trackById,be)?(z&&(T=this._verifyReinsertion(T,Oe,be,J)),Object.is(T.item,Oe)||this._addIdentityChange(T,Oe)):(T=this._mismatch(T,Oe,be,J),z=!0),T=T._next,J++}),this.length=J;return this._truncate(T),this.collection=b,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let b;for(b=this._previousItHead=this._itHead;null!==b;b=b._next)b._nextPrevious=b._next;for(b=this._additionsHead;null!==b;b=b._nextAdded)b.previousIndex=b.currentIndex;for(this._additionsHead=this._additionsTail=null,b=this._movesHead;null!==b;b=b._nextMoved)b.previousIndex=b.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(b,T,z,J){let le;return null===b?le=this._itTail:(le=b._prev,this._remove(b)),null!==(b=null===this._unlinkedRecords?null:this._unlinkedRecords.get(z,null))?(Object.is(b.item,T)||this._addIdentityChange(b,T),this._reinsertAfter(b,le,J)):null!==(b=null===this._linkedRecords?null:this._linkedRecords.get(z,J))?(Object.is(b.item,T)||this._addIdentityChange(b,T),this._moveAfter(b,le,J)):b=this._addAfter(new HM(T,z),le,J),b}_verifyReinsertion(b,T,z,J){let le=null===this._unlinkedRecords?null:this._unlinkedRecords.get(z,null);return null!==le?b=this._reinsertAfter(le,b._prev,J):b.currentIndex!=J&&(b.currentIndex=J,this._addToMoves(b,J)),b}_truncate(b){for(;null!==b;){const T=b._next;this._addToRemovals(this._unlink(b)),b=T}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(b,T,z){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(b);const J=b._prevRemoved,le=b._nextRemoved;return null===J?this._removalsHead=le:J._nextRemoved=le,null===le?this._removalsTail=J:le._prevRemoved=J,this._insertAfter(b,T,z),this._addToMoves(b,z),b}_moveAfter(b,T,z){return this._unlink(b),this._insertAfter(b,T,z),this._addToMoves(b,z),b}_addAfter(b,T,z){return this._insertAfter(b,T,z),this._additionsTail=null===this._additionsTail?this._additionsHead=b:this._additionsTail._nextAdded=b,b}_insertAfter(b,T,z){const J=null===T?this._itHead:T._next;return b._next=J,b._prev=T,null===J?this._itTail=b:J._prev=b,null===T?this._itHead=b:T._next=b,null===this._linkedRecords&&(this._linkedRecords=new p_),this._linkedRecords.put(b),b.currentIndex=z,b}_remove(b){return this._addToRemovals(this._unlink(b))}_unlink(b){null!==this._linkedRecords&&this._linkedRecords.remove(b);const T=b._prev,z=b._next;return null===T?this._itHead=z:T._next=z,null===z?this._itTail=T:z._prev=T,b}_addToMoves(b,T){return b.previousIndex===T||(this._movesTail=null===this._movesTail?this._movesHead=b:this._movesTail._nextMoved=b),b}_addToRemovals(b){return null===this._unlinkedRecords&&(this._unlinkedRecords=new p_),this._unlinkedRecords.put(b),b.currentIndex=null,b._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=b,b._prevRemoved=null):(b._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=b),b}_addIdentityChange(b,T){return b.item=T,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=b:this._identityChangesTail._nextIdentityChange=b,b}}class HM{constructor(b,T){this.item=b,this.trackById=T,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qM{constructor(){this._head=null,this._tail=null}add(b){null===this._head?(this._head=this._tail=b,b._nextDup=null,b._prevDup=null):(this._tail._nextDup=b,b._prevDup=this._tail,b._nextDup=null,this._tail=b)}get(b,T){let z;for(z=this._head;null!==z;z=z._nextDup)if((null===T||T<=z.currentIndex)&&Object.is(z.trackById,b))return z;return null}remove(b){const T=b._prevDup,z=b._nextDup;return null===T?this._head=z:T._nextDup=z,null===z?this._tail=T:z._prevDup=T,null===this._head}}class p_{constructor(){this.map=new Map}put(b){const T=b.trackById;let z=this.map.get(T);z||(z=new qM,this.map.set(T,z)),z.add(b)}get(b,T){const J=this.map.get(b);return J?J.get(b,T):null}remove(b){const T=b.trackById;return this.map.get(T).remove(b)&&this.map.delete(T),b}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function g_(v,b,T){const z=v.previousIndex;if(null===z)return z;let J=0;return T&&z<T.length&&(J=T[z]),z+b+J}class m_{constructor(){}supports(b){return b instanceof Map||Fm(b)}create(){return new GM}}class GM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(b){let T;for(T=this._mapHead;null!==T;T=T._next)b(T)}forEachPreviousItem(b){let T;for(T=this._previousMapHead;null!==T;T=T._nextPrevious)b(T)}forEachChangedItem(b){let T;for(T=this._changesHead;null!==T;T=T._nextChanged)b(T)}forEachAddedItem(b){let T;for(T=this._additionsHead;null!==T;T=T._nextAdded)b(T)}forEachRemovedItem(b){let T;for(T=this._removalsHead;null!==T;T=T._nextRemoved)b(T)}diff(b){if(b){if(!(b instanceof Map||Fm(b)))throw new Hn(900,"")}else b=new Map;return this.check(b)?this:null}onDestroy(){}check(b){this._reset();let T=this._mapHead;if(this._appendAfter=null,this._forEach(b,(z,J)=>{if(T&&T.key===J)this._maybeAddToChanges(T,z),this._appendAfter=T,T=T._next;else{const le=this._getOrCreateRecordForKey(J,z);T=this._insertBeforeOrAppend(T,le)}}),T){T._prev&&(T._prev._next=null),this._removalsHead=T;for(let z=T;null!==z;z=z._nextRemoved)z===this._mapHead&&(this._mapHead=null),this._records.delete(z.key),z._nextRemoved=z._next,z.previousValue=z.currentValue,z.currentValue=null,z._prev=null,z._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(b,T){if(b){const z=b._prev;return T._next=b,T._prev=z,b._prev=T,z&&(z._next=T),b===this._mapHead&&(this._mapHead=T),this._appendAfter=b,b}return this._appendAfter?(this._appendAfter._next=T,T._prev=this._appendAfter):this._mapHead=T,this._appendAfter=T,null}_getOrCreateRecordForKey(b,T){if(this._records.has(b)){const J=this._records.get(b);this._maybeAddToChanges(J,T);const le=J._prev,be=J._next;return le&&(le._next=be),be&&(be._prev=le),J._next=null,J._prev=null,J}const z=new YM(b);return this._records.set(b,z),z.currentValue=T,this._addToAdditions(z),z}_reset(){if(this.isDirty){let b;for(this._previousMapHead=this._mapHead,b=this._previousMapHead;null!==b;b=b._next)b._nextPrevious=b._next;for(b=this._changesHead;null!==b;b=b._nextChanged)b.previousValue=b.currentValue;for(b=this._additionsHead;null!=b;b=b._nextAdded)b.previousValue=b.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(b,T){Object.is(T,b.currentValue)||(b.previousValue=b.currentValue,b.currentValue=T,this._addToChanges(b))}_addToAdditions(b){null===this._additionsHead?this._additionsHead=this._additionsTail=b:(this._additionsTail._nextAdded=b,this._additionsTail=b)}_addToChanges(b){null===this._changesHead?this._changesHead=this._changesTail=b:(this._changesTail._nextChanged=b,this._changesTail=b)}_forEach(b,T){b instanceof Map?b.forEach(T):Object.keys(b).forEach(z=>T(b[z],z))}}class YM{constructor(b){this.key=b,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function v_(){return new ld([new d_])}let ld=(()=>{class v{constructor(T){this.factories=T}static create(T,z){if(null!=z){const J=z.factories.slice();T=T.concat(J)}return new v(T)}static extend(T){return{provide:v,useFactory:z=>v.create(T,z||v_()),deps:[[v,new Nc,new xl]]}}find(T){const z=this.factories.find(J=>J.supports(T));if(null!=z)return z;throw new Hn(901,"")}}return v.\u0275prov=Pn({token:v,providedIn:"root",factory:v_}),v})();function y_(){return new nh([new m_])}let nh=(()=>{class v{constructor(T){this.factories=T}static create(T,z){if(z){const J=z.factories.slice();T=T.concat(J)}return new v(T)}static extend(T){return{provide:v,useFactory:z=>v.create(T,z||y_()),deps:[[v,new Nc,new xl]]}}find(T){const z=this.factories.find(le=>le.supports(T));if(z)return z;throw new Hn(901,"")}}return v.\u0275prov=Pn({token:v,providedIn:"root",factory:y_}),v})();const WM=[new m_],XM=new ld([new d_]),$M=new nh(WM),KM=t_(null,"core",[{provide:xv,useValue:"unknown"},{provide:r_,deps:[Al]},{provide:Jb,deps:[]},{provide:Zb,deps:[]}]),n4=[{provide:vp,useClass:vp,deps:[Zs,Al,Wc,rd,sd]},{provide:pT,deps:[Zs],useFactory:function r4(v){let b=[];return v.onStable.subscribe(()=>{for(;b.length;)b.pop()()}),function(T){b.push(T)}}},{provide:sd,useClass:sd,deps:[[new xl,ig]]},{provide:ag,useClass:ag,deps:[]},mM,{provide:ld,useFactory:function JM(){return XM},deps:[]},{provide:nh,useFactory:function QM(){return $M},deps:[]},{provide:of,useFactory:function e4(v){return v||function t4(){return"undefined"!=typeof $localize&&$localize.locale||q0}()},deps:[[new oc(of),new xl,new Nc]]},{provide:Xb,useValue:"USD"}];let i4=(()=>{class v{constructor(T){}}return v.\u0275fac=function(T){return new(T||v)(da(vp))},v.\u0275mod=ys({type:v}),v.\u0275inj=Cn({providers:n4}),v})(),sg=null;function sf(){return sg}const du=new Za("DocumentToken");let rh=(()=>{class v{historyGo(T){throw new Error("Not implemented")}}return v.\u0275fac=function(T){return new(T||v)},v.\u0275prov=Pn({token:v,factory:function(){return function l4(){return da(x_)}()},providedIn:"platform"}),v})();const u4=new Za("Location Initialized");let x_=(()=>{class v extends rh{constructor(T){super(),this._doc=T,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sf().getBaseHref(this._doc)}onPopState(T){const z=sf().getGlobalEventTarget(this._doc,"window");return z.addEventListener("popstate",T,!1),()=>z.removeEventListener("popstate",T)}onHashChange(T){const z=sf().getGlobalEventTarget(this._doc,"window");return z.addEventListener("hashchange",T,!1),()=>z.removeEventListener("hashchange",T)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(T){this.location.pathname=T}pushState(T,z,J){b_()?this._history.pushState(T,z,J):this.location.hash=J}replaceState(T,z,J){b_()?this._history.replaceState(T,z,J):this.location.hash=J}forward(){this._history.forward()}back(){this._history.back()}historyGo(T=0){this._history.go(T)}getState(){return this._history.state}}return v.\u0275fac=function(T){return new(T||v)(da(du))},v.\u0275prov=Pn({token:v,factory:function(){return function c4(){return new x_(da(du))}()},providedIn:"platform"}),v})();function b_(){return!!window.history.pushState}function Lv(v,b){if(0==v.length)return b;if(0==b.length)return v;let T=0;return v.endsWith("/")&&T++,b.startsWith("/")&&T++,2==T?v+b.substring(1):1==T?v+b:v+"/"+b}function __(v){const b=v.match(/#|\?|$/),T=b&&b.index||v.length;return v.slice(0,T-("/"===v[T-1]?1:0))+v.slice(T)}function Mc(v){return v&&"?"!==v[0]?"?"+v:v}let ud=(()=>{class v{historyGo(T){throw new Error("Not implemented")}}return v.\u0275fac=function(T){return new(T||v)},v.\u0275prov=Pn({token:v,factory:function(){return function f4(v){const b=da(du).location;return new w_(da(rh),b&&b.origin||"")}()},providedIn:"root"}),v})();const Iv=new Za("appBaseHref");let w_=(()=>{class v extends ud{constructor(T,z){if(super(),this._platformLocation=T,this._removeListenerFns=[],null==z&&(z=this._platformLocation.getBaseHrefFromDOM()),null==z)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=z}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(T){this._removeListenerFns.push(this._platformLocation.onPopState(T),this._platformLocation.onHashChange(T))}getBaseHref(){return this._baseHref}prepareExternalUrl(T){return Lv(this._baseHref,T)}path(T=!1){const z=this._platformLocation.pathname+Mc(this._platformLocation.search),J=this._platformLocation.hash;return J&&T?`${z}${J}`:z}pushState(T,z,J,le){const be=this.prepareExternalUrl(J+Mc(le));this._platformLocation.pushState(T,z,be)}replaceState(T,z,J,le){const be=this.prepareExternalUrl(J+Mc(le));this._platformLocation.replaceState(T,z,be)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(T=0){var z,J;null===(J=(z=this._platformLocation).historyGo)||void 0===J||J.call(z,T)}}return v.\u0275fac=function(T){return new(T||v)(da(rh),da(Iv,8))},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})(),h4=(()=>{class v extends ud{constructor(T,z){super(),this._platformLocation=T,this._baseHref="",this._removeListenerFns=[],null!=z&&(this._baseHref=z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(T){this._removeListenerFns.push(this._platformLocation.onPopState(T),this._platformLocation.onHashChange(T))}getBaseHref(){return this._baseHref}path(T=!1){let z=this._platformLocation.hash;return null==z&&(z="#"),z.length>0?z.substring(1):z}prepareExternalUrl(T){const z=Lv(this._baseHref,T);return z.length>0?"#"+z:z}pushState(T,z,J,le){let be=this.prepareExternalUrl(J+Mc(le));0==be.length&&(be=this._platformLocation.pathname),this._platformLocation.pushState(T,z,be)}replaceState(T,z,J,le){let be=this.prepareExternalUrl(J+Mc(le));0==be.length&&(be=this._platformLocation.pathname),this._platformLocation.replaceState(T,z,be)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(T=0){var z,J;null===(J=(z=this._platformLocation).historyGo)||void 0===J||J.call(z,T)}}return v.\u0275fac=function(T){return new(T||v)(da(rh),da(Iv,8))},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})(),Pv=(()=>{class v{constructor(T,z){this._subject=new ua,this._urlChangeListeners=[],this._platformStrategy=T;const J=this._platformStrategy.getBaseHref();this._platformLocation=z,this._baseHref=__(T_(J)),this._platformStrategy.onPopState(le=>{this._subject.emit({url:this.path(!0),pop:!0,state:le.state,type:le.type})})}path(T=!1){return this.normalize(this._platformStrategy.path(T))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(T,z=""){return this.path()==this.normalize(T+Mc(z))}normalize(T){return v.stripTrailingSlash(function p4(v,b){return v&&b.startsWith(v)?b.substring(v.length):b}(this._baseHref,T_(T)))}prepareExternalUrl(T){return T&&"/"!==T[0]&&(T="/"+T),this._platformStrategy.prepareExternalUrl(T)}go(T,z="",J=null){this._platformStrategy.pushState(J,"",T,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(T+Mc(z)),J)}replaceState(T,z="",J=null){this._platformStrategy.replaceState(J,"",T,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(T+Mc(z)),J)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(T=0){var z,J;null===(J=(z=this._platformStrategy).historyGo)||void 0===J||J.call(z,T)}onUrlChange(T){this._urlChangeListeners.push(T),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(z=>{this._notifyUrlChangeListeners(z.url,z.state)}))}_notifyUrlChangeListeners(T="",z){this._urlChangeListeners.forEach(J=>J(T,z))}subscribe(T,z,J){return this._subject.subscribe({next:T,error:z,complete:J})}}return v.normalizeQueryParams=Mc,v.joinWithSlash=Lv,v.stripTrailingSlash=__,v.\u0275fac=function(T){return new(T||v)(da(ud),da(rh))},v.\u0275prov=Pn({token:v,factory:function(){return function d4(){return new Pv(da(ud),da(rh))}()},providedIn:"root"}),v})();function T_(v){return v.replace(/\/index.html$/,"")}var js=(()=>((js=js||{})[js.Zero=0]="Zero",js[js.One=1]="One",js[js.Two=2]="Two",js[js.Few=3]="Few",js[js.Many=4]="Many",js[js.Other=5]="Other",js))();const _4=function Px(v){return function El(v){const b=function i5(v){return v.toLowerCase().replace(/_/g,"-")}(v);let T=Ox(b);if(T)return T;const z=b.split("-")[0];if(T=Ox(z),T)return T;if("en"===z)return r5;throw new Error(`Missing locale data for the locale "${v}".`)}(v)[Oi.PluralCase]};class vg{}let $4=(()=>{class v extends vg{constructor(T){super(),this.locale=T}getPluralCategory(T,z){switch(_4(z||this.locale)(T)){case js.Zero:return"zero";case js.One:return"one";case js.Two:return"two";case js.Few:return"few";case js.Many:return"many";default:return"other"}}}return v.\u0275fac=function(T){return new(T||v)(da(of))},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})(),I_=(()=>{class v{constructor(T,z,J,le){this._iterableDiffers=T,this._keyValueDiffers=z,this._ngEl=J,this._renderer=le,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(T){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof T?T.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(T){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof T?T.split(/\s+/):T,this._rawClass&&(ap(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const T=this._iterableDiffer.diff(this._rawClass);T&&this._applyIterableChanges(T)}else if(this._keyValueDiffer){const T=this._keyValueDiffer.diff(this._rawClass);T&&this._applyKeyValueChanges(T)}}_applyKeyValueChanges(T){T.forEachAddedItem(z=>this._toggleClass(z.key,z.currentValue)),T.forEachChangedItem(z=>this._toggleClass(z.key,z.currentValue)),T.forEachRemovedItem(z=>{z.previousValue&&this._toggleClass(z.key,!1)})}_applyIterableChanges(T){T.forEachAddedItem(z=>{if("string"!=typeof z.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${gn(z.item)}`);this._toggleClass(z.item,!0)}),T.forEachRemovedItem(z=>this._toggleClass(z.item,!1))}_applyClasses(T){T&&(Array.isArray(T)||T instanceof Set?T.forEach(z=>this._toggleClass(z,!0)):Object.keys(T).forEach(z=>this._toggleClass(z,!!T[z])))}_removeClasses(T){T&&(Array.isArray(T)||T instanceof Set?T.forEach(z=>this._toggleClass(z,!1)):Object.keys(T).forEach(z=>this._toggleClass(z,!1)))}_toggleClass(T,z){(T=T.trim())&&T.split(/\s+/g).forEach(J=>{z?this._renderer.addClass(this._ngEl.nativeElement,J):this._renderer.removeClass(this._ngEl.nativeElement,J)})}}return v.\u0275fac=function(T){return new(T||v)(ea(ld),ea(nh),ea(af),ea(X0))},v.\u0275dir=Ja({type:v,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),v})(),F_=(()=>{class v{constructor(T,z,J){this._ngEl=T,this._differs=z,this._renderer=J,this._ngStyle=null,this._differ=null}set ngStyle(T){this._ngStyle=T,!this._differ&&T&&(this._differ=this._differs.find(T).create())}ngDoCheck(){if(this._differ){const T=this._differ.diff(this._ngStyle);T&&this._applyChanges(T)}}_setStyle(T,z){const[J,le]=T.split(".");null!=(z=null!=z&&le?`${z}${le}`:z)?this._renderer.setStyle(this._ngEl.nativeElement,J,z):this._renderer.removeStyle(this._ngEl.nativeElement,J)}_applyChanges(T){T.forEachRemovedItem(z=>this._setStyle(z.key,null)),T.forEachAddedItem(z=>this._setStyle(z.key,z.currentValue)),T.forEachChangedItem(z=>this._setStyle(z.key,z.currentValue))}}return v.\u0275fac=function(T){return new(T||v)(ea(af),ea(nh),ea(X0))},v.\u0275dir=Ja({type:v,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),v})(),bp=(()=>{class v{}return v.\u0275fac=function(T){return new(T||v)},v.\u0275mod=ys({type:v}),v.\u0275inj=Cn({providers:[{provide:vg,useClass:$4}]}),v})();let Lk=(()=>{class v{}return v.\u0275prov=Pn({token:v,providedIn:"root",factory:()=>new Ik(da(du),window)}),v})();class Ik{constructor(b,T){this.document=b,this.window=T,this.offset=()=>[0,0]}setOffset(b){this.offset=Array.isArray(b)?()=>b:b}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(b){this.supportsScrolling()&&this.window.scrollTo(b[0],b[1])}scrollToAnchor(b){if(!this.supportsScrolling())return;const T=function Pk(v,b){const T=v.getElementById(b)||v.getElementsByName(b)[0];if(T)return T;if("function"==typeof v.createTreeWalker&&v.body&&(v.body.createShadowRoot||v.body.attachShadow)){const z=v.createTreeWalker(v.body,NodeFilter.SHOW_ELEMENT);let J=z.currentNode;for(;J;){const le=J.shadowRoot;if(le){const be=le.getElementById(b)||le.querySelector(`[name="${b}"]`);if(be)return be}J=z.nextNode()}}return null}(this.document,b);T&&(this.scrollToElement(T),this.attemptFocus(T))}setHistoryScrollRestoration(b){if(this.supportScrollRestoration()){const T=this.window.history;T&&T.scrollRestoration&&(T.scrollRestoration=b)}}scrollToElement(b){const T=b.getBoundingClientRect(),z=T.left+this.window.pageXOffset,J=T.top+this.window.pageYOffset,le=this.offset();this.window.scrollTo(z-le[0],J-le[1])}attemptFocus(b){return b.focus(),this.document.activeElement===b}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const b=B_(this.window.history)||B_(Object.getPrototypeOf(this.window.history));return!(!b||!b.writable&&!b.set)}catch(b){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(b){return!1}}}function B_(v){return Object.getOwnPropertyDescriptor(v,"scrollRestoration")}class Yv extends class Rk extends class s4{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function o4(v){sg||(sg=v)}(new Yv)}onAndCancel(b,T,z){return b.addEventListener(T,z,!1),()=>{b.removeEventListener(T,z,!1)}}dispatchEvent(b,T){b.dispatchEvent(T)}remove(b){b.parentNode&&b.parentNode.removeChild(b)}createElement(b,T){return(T=T||this.getDefaultDocument()).createElement(b)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(b){return b.nodeType===Node.ELEMENT_NODE}isShadowRoot(b){return b instanceof DocumentFragment}getGlobalEventTarget(b,T){return"window"===T?window:"document"===T?b:"body"===T?b.body:null}getBaseHref(b){const T=function Fk(){return _p=_p||document.querySelector("base"),_p?_p.getAttribute("href"):null}();return null==T?null:function zk(v){yg=yg||document.createElement("a"),yg.setAttribute("href",v);const b=yg.pathname;return"/"===b.charAt(0)?b:`/${b}`}(T)}resetBaseElement(){_p=null}getUserAgent(){return window.navigator.userAgent}getCookie(b){return function K4(v,b){b=encodeURIComponent(b);for(const T of v.split(";")){const z=T.indexOf("="),[J,le]=-1==z?[T,""]:[T.slice(0,z),T.slice(z+1)];if(J.trim()===b)return decodeURIComponent(le)}return null}(document.cookie,b)}}let yg,_p=null;const j_=new Za("TRANSITION_ID"),Bk=[{provide:ig,useFactory:function Nk(v,b,T){return()=>{T.get(sd).donePromise.then(()=>{const z=sf(),J=b.querySelectorAll(`style[ng-transition="${v}"]`);for(let le=0;le<J.length;le++)z.remove(J[le])})}},deps:[j_,du,Al],multi:!0}];class Wv{static init(){!function AM(v){Mv=v}(new Wv)}addToWindow(b){oa.getAngularTestability=(z,J=!0)=>{const le=b.findTestabilityInTree(z,J);if(null==le)throw new Error("Could not find testability for element.");return le},oa.getAllAngularTestabilities=()=>b.getAllTestabilities(),oa.getAllAngularRootElements=()=>b.getAllRootElements(),oa.frameworkStabilizers||(oa.frameworkStabilizers=[]),oa.frameworkStabilizers.push(z=>{const J=oa.getAllAngularTestabilities();let le=J.length,be=!1;const Oe=function(Ye){be=be||Ye,le--,0==le&&z(be)};J.forEach(function(Ye){Ye.whenStable(Oe)})})}findTestabilityInTree(b,T,z){if(null==T)return null;const J=b.getTestability(T);return null!=J?J:z?sf().isShadowRoot(T)?this.findTestabilityInTree(b,T.host,!0):this.findTestabilityInTree(b,T.parentElement,!0):null}}let jk=(()=>{class v{build(){return new XMLHttpRequest}}return v.\u0275fac=function(T){return new(T||v)},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})();const xg=new Za("EventManagerPlugins");let bg=(()=>{class v{constructor(T,z){this._zone=z,this._eventNameToPlugin=new Map,T.forEach(J=>J.manager=this),this._plugins=T.slice().reverse()}addEventListener(T,z,J){return this._findPluginFor(z).addEventListener(T,z,J)}addGlobalEventListener(T,z,J){return this._findPluginFor(z).addGlobalEventListener(T,z,J)}getZone(){return this._zone}_findPluginFor(T){const z=this._eventNameToPlugin.get(T);if(z)return z;const J=this._plugins;for(let le=0;le<J.length;le++){const be=J[le];if(be.supports(T))return this._eventNameToPlugin.set(T,be),be}throw new Error(`No event manager plugin found for event ${T}`)}}return v.\u0275fac=function(T){return new(T||v)(da(xg),da(Zs))},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})();class U_{constructor(b){this._doc=b}addGlobalEventListener(b,T,z){const J=sf().getGlobalEventTarget(this._doc,b);if(!J)throw new Error(`Unsupported event target ${J} for event ${T}`);return this.addEventListener(J,T,z)}}let V_=(()=>{class v{constructor(){this._stylesSet=new Set}addStyles(T){const z=new Set;T.forEach(J=>{this._stylesSet.has(J)||(this._stylesSet.add(J),z.add(J))}),this.onStylesAdded(z)}onStylesAdded(T){}getAllStyles(){return Array.from(this._stylesSet)}}return v.\u0275fac=function(T){return new(T||v)},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})(),wp=(()=>{class v extends V_{constructor(T){super(),this._doc=T,this._hostNodes=new Map,this._hostNodes.set(T.head,[])}_addStylesToHost(T,z,J){T.forEach(le=>{const be=this._doc.createElement("style");be.textContent=le,J.push(z.appendChild(be))})}addHost(T){const z=[];this._addStylesToHost(this._stylesSet,T,z),this._hostNodes.set(T,z)}removeHost(T){const z=this._hostNodes.get(T);z&&z.forEach(H_),this._hostNodes.delete(T)}onStylesAdded(T){this._hostNodes.forEach((z,J)=>{this._addStylesToHost(T,J,z)})}ngOnDestroy(){this._hostNodes.forEach(T=>T.forEach(H_))}}return v.\u0275fac=function(T){return new(T||v)(da(du))},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})();function H_(v){sf().remove(v)}const Zv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Xv=/%COMP%/g;function _g(v,b,T){for(let z=0;z<b.length;z++){let J=b[z];Array.isArray(J)?_g(v,J,T):(J=J.replace(Xv,v),T.push(J))}return T}function Y_(v){return b=>{if("__ngUnwrap__"===b)return v;!1===v(b)&&(b.preventDefault(),b.returnValue=!1)}}let $v=(()=>{class v{constructor(T,z,J){this.eventManager=T,this.sharedStylesHost=z,this.appId=J,this.rendererByCompId=new Map,this.defaultRenderer=new Kv(T)}createRenderer(T,z){if(!T||!z)return this.defaultRenderer;switch(z.encapsulation){case Ia.Emulated:{let J=this.rendererByCompId.get(z.id);return J||(J=new Yk(this.eventManager,this.sharedStylesHost,z,this.appId),this.rendererByCompId.set(z.id,J)),J.applyToHost(T),J}case 1:case Ia.ShadowDom:return new Wk(this.eventManager,this.sharedStylesHost,T,z);default:if(!this.rendererByCompId.has(z.id)){const J=_g(z.id,z.styles,[]);this.sharedStylesHost.addStyles(J),this.rendererByCompId.set(z.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return v.\u0275fac=function(T){return new(T||v)(da(bg),da(wp),da(mp))},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})();class Kv{constructor(b){this.eventManager=b,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(b,T){return T?document.createElementNS(Zv[T]||T,b):document.createElement(b)}createComment(b){return document.createComment(b)}createText(b){return document.createTextNode(b)}appendChild(b,T){b.appendChild(T)}insertBefore(b,T,z){b&&b.insertBefore(T,z)}removeChild(b,T){b&&b.removeChild(T)}selectRootElement(b,T){let z="string"==typeof b?document.querySelector(b):b;if(!z)throw new Error(`The selector "${b}" did not match any elements`);return T||(z.textContent=""),z}parentNode(b){return b.parentNode}nextSibling(b){return b.nextSibling}setAttribute(b,T,z,J){if(J){T=J+":"+T;const le=Zv[J];le?b.setAttributeNS(le,T,z):b.setAttribute(T,z)}else b.setAttribute(T,z)}removeAttribute(b,T,z){if(z){const J=Zv[z];J?b.removeAttributeNS(J,T):b.removeAttribute(`${z}:${T}`)}else b.removeAttribute(T)}addClass(b,T){b.classList.add(T)}removeClass(b,T){b.classList.remove(T)}setStyle(b,T,z,J){J&($a.DashCase|$a.Important)?b.style.setProperty(T,z,J&$a.Important?"important":""):b.style[T]=z}removeStyle(b,T,z){z&$a.DashCase?b.style.removeProperty(T):b.style[T]=""}setProperty(b,T,z){b[T]=z}setValue(b,T){b.nodeValue=T}listen(b,T,z){return"string"==typeof b?this.eventManager.addGlobalEventListener(b,T,Y_(z)):this.eventManager.addEventListener(b,T,Y_(z))}}class Yk extends Kv{constructor(b,T,z,J){super(b),this.component=z;const le=_g(J+"-"+z.id,z.styles,[]);T.addStyles(le),this.contentAttr=function Hk(v){return"_ngcontent-%COMP%".replace(Xv,v)}(J+"-"+z.id),this.hostAttr=function qk(v){return"_nghost-%COMP%".replace(Xv,v)}(J+"-"+z.id)}applyToHost(b){super.setAttribute(b,this.hostAttr,"")}createElement(b,T){const z=super.createElement(b,T);return super.setAttribute(z,this.contentAttr,""),z}}class Wk extends Kv{constructor(b,T,z,J){super(b),this.sharedStylesHost=T,this.hostEl=z,this.shadowRoot=z.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const le=_g(J.id,J.styles,[]);for(let be=0;be<le.length;be++){const Oe=document.createElement("style");Oe.textContent=le[be],this.shadowRoot.appendChild(Oe)}}nodeOrShadowRoot(b){return b===this.hostEl?this.shadowRoot:b}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(b,T){return super.appendChild(this.nodeOrShadowRoot(b),T)}insertBefore(b,T,z){return super.insertBefore(this.nodeOrShadowRoot(b),T,z)}removeChild(b,T){return super.removeChild(this.nodeOrShadowRoot(b),T)}parentNode(b){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(b)))}}let Zk=(()=>{class v extends U_{constructor(T){super(T)}supports(T){return!0}addEventListener(T,z,J){return T.addEventListener(z,J,!1),()=>this.removeEventListener(T,z,J)}removeEventListener(T,z,J){return T.removeEventListener(z,J)}}return v.\u0275fac=function(T){return new(T||v)(da(du))},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})();const Z_=["alt","control","meta","shift"],$k={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},X_={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Kk={alt:v=>v.altKey,control:v=>v.ctrlKey,meta:v=>v.metaKey,shift:v=>v.shiftKey};let Jk=(()=>{class v extends U_{constructor(T){super(T)}supports(T){return null!=v.parseEventName(T)}addEventListener(T,z,J){const le=v.parseEventName(z),be=v.eventCallback(le.fullKey,J,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sf().onAndCancel(T,le.domEventName,be))}static parseEventName(T){const z=T.toLowerCase().split("."),J=z.shift();if(0===z.length||"keydown"!==J&&"keyup"!==J)return null;const le=v._normalizeKey(z.pop());let be="";if(Z_.forEach(Ye=>{const ct=z.indexOf(Ye);ct>-1&&(z.splice(ct,1),be+=Ye+".")}),be+=le,0!=z.length||0===le.length)return null;const Oe={};return Oe.domEventName=J,Oe.fullKey=be,Oe}static getEventFullKey(T){let z="",J=function Qk(v){let b=v.key;if(null==b){if(b=v.keyIdentifier,null==b)return"Unidentified";b.startsWith("U+")&&(b=String.fromCharCode(parseInt(b.substring(2),16)),3===v.location&&X_.hasOwnProperty(b)&&(b=X_[b]))}return $k[b]||b}(T);return J=J.toLowerCase()," "===J?J="space":"."===J&&(J="dot"),Z_.forEach(le=>{le!=J&&Kk[le](T)&&(z+=le+".")}),z+=J,z}static eventCallback(T,z,J){return le=>{v.getEventFullKey(le)===T&&J.runGuarded(()=>z(le))}}static _normalizeKey(T){return"esc"===T?"escape":T}}return v.\u0275fac=function(T){return new(T||v)(da(du))},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})();const rA=t_(KM,"browser",[{provide:xv,useValue:"browser"},{provide:Yb,useValue:function eA(){Yv.makeCurrent(),Wv.init()},multi:!0},{provide:du,useFactory:function nA(){return function Va(v){$i=v}(document),document},deps:[]}]),iA=[{provide:Dm,useValue:"root"},{provide:Wc,useFactory:function tA(){return new Wc},deps:[]},{provide:xg,useClass:Zk,multi:!0,deps:[du,Zs,xv]},{provide:xg,useClass:Jk,multi:!0,deps:[du]},{provide:$v,useClass:$v,deps:[bg,wp,mp]},{provide:ub,useExisting:$v},{provide:V_,useExisting:wp},{provide:wp,useClass:wp,deps:[du]},{provide:Tv,useClass:Tv,deps:[Zs]},{provide:bg,useClass:bg,deps:[xg,Zs]},{provide:class Ok{},useClass:jk,deps:[]}];let aA=(()=>{class v{constructor(T){if(T)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(T){return{ngModule:v,providers:[{provide:mp,useValue:T.appId},{provide:j_,useExisting:mp},Bk]}}}return v.\u0275fac=function(T){return new(T||v)(da(v,12))},v.\u0275mod=ys({type:v}),v.\u0275inj=Cn({providers:iA,imports:[bp,i4]}),v})();function Ua(...v){return Mt(v,vt(v))}"undefined"!=typeof window&&window;class Su extends Y{constructor(b){super(),this._value=b}get value(){return this.getValue()}_subscribe(b){const T=super._subscribe(b);return!T.closed&&b.next(this._value),T}getValue(){const{hasError:b,thrownError:T,_value:z}=this;if(b)throw T;return this._throwIfClosed(),z}next(b){super.next(this._value=b)}}const{isArray:mA}=Array,{getPrototypeOf:vA,prototype:yA,keys:xA}=Object;const{isArray:wA}=Array;function AA(...v){const b=vt(v),T=function yt(v){return ae(it(v))?v.pop():void 0}(v),{args:z,keys:J}=function bA(v){if(1===v.length){const b=v[0];if(mA(b))return{args:b,keys:null};if(function _A(v){return v&&"object"==typeof v&&vA(v)===yA}(b)){const T=xA(b);return{args:T.map(z=>b[z]),keys:T}}}return{args:v,keys:null}}(v);if(0===z.length)return Mt([],b);const le=new D(function EA(v,b,T=C){return z=>{J_(b,()=>{const{length:J}=v,le=new Array(J);let be=J,Oe=J;for(let Ye=0;Ye<J;Ye++)J_(b,()=>{const ct=Mt(v[Ye],b);let Nt=!1;ct.subscribe(new $(z,en=>{le[Ye]=en,Nt||(Nt=!0,Oe--),Oe||z.next(T(le.slice()))},()=>{--be||z.complete()}))},z)},z)}}(z,b,J?be=>function kA(v,b){return v.reduce((T,z,J)=>(T[z]=b[J],T),{})}(J,be):C));return T?le.pipe(function MA(v){return re(b=>function TA(v,b){return wA(b)?v(...b):v(b)}(v,b))}(T)):le}function J_(v,b,T){v?nn(T,v,b):b()}const wg=g(v=>function(){v(this),this.name="EmptyError",this.message="no elements in sequence"});function Qv(...v){return function SA(){return Se(1)}()(Mt(v,vt(v)))}function Q_(v){return new D(b=>{ft(v()).subscribe(b)})}function e2(){return X((v,b)=>{let T=null;v._refCount++;const z=new $(b,void 0,void 0,void 0,()=>{if(!v||v._refCount<=0||0<--v._refCount)return void(T=null);const J=v._connection,le=T;T=null,J&&(!le||J===le)&&J.unsubscribe(),b.unsubscribe()});v.subscribe(z),z.closed||(T=v.connect())})}class CA extends D{constructor(b,T){super(),this.source=b,this.subjectFactory=T,this._subject=null,this._refCount=0,this._connection=null,ne(b)&&(this.lift=b.lift)}_subscribe(b){return this.getSubject().subscribe(b)}getSubject(){const b=this._subject;return(!b||b.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:b}=this;this._subject=this._connection=null,null==b||b.unsubscribe()}connect(){let b=this._connection;if(!b){b=this._connection=new y;const T=this.getSubject();b.add(this.source.subscribe(new $(T,void 0,()=>{this._teardown(),T.complete()},z=>{this._teardown(),T.error(z)},()=>this._teardown()))),b.closed&&(this._connection=null,b=y.EMPTY)}return b}refCount(){return e2()(this)}}function ih(v,b){return X((T,z)=>{let J=null,le=0,be=!1;const Oe=()=>be&&!J&&z.complete();T.subscribe(new $(z,Ye=>{null==J||J.unsubscribe();let ct=0;const Nt=le++;ft(v(Ye,Nt)).subscribe(J=new $(z,en=>z.next(b?b(Ye,en,Nt,ct++):en),()=>{J=null,Oe()}))},()=>{be=!0,Oe()}))})}function LA(v,b,T,z,J){return(le,be)=>{let Oe=T,Ye=b,ct=0;le.subscribe(new $(be,Nt=>{const en=ct++;Ye=Oe?v(Ye,Nt,en):(Oe=!0,Nt),z&&be.next(Ye)},J&&(()=>{Oe&&be.next(Ye),be.complete()})))}}function t2(v,b){return X(LA(v,b,arguments.length>=2,!0))}function cd(v,b){return X((T,z)=>{let J=0;T.subscribe(new $(z,le=>v.call(b,le,J++)&&z.next(le)))})}function uf(v){return X((b,T)=>{let le,z=null,J=!1;z=b.subscribe(new $(T,void 0,void 0,be=>{le=ft(v(be,uf(v)(b))),z?(z.unsubscribe(),z=null,le.subscribe(T)):J=!0})),J&&(z.unsubscribe(),z=null,le.subscribe(T))})}function Tp(v,b){return ae(b)?Ee(v,b,1):Ee(v,1)}function ey(v){return v<=0?()=>je:X((b,T)=>{let z=[];b.subscribe(new $(T,J=>{z.push(J),v<z.length&&z.shift()},()=>{for(const J of z)T.next(J);T.complete()},void 0,()=>{z=null}))})}function n2(v=IA){return X((b,T)=>{let z=!1;b.subscribe(new $(T,J=>{z=!0,T.next(J)},()=>z?T.complete():T.error(v())))})}function IA(){return new wg}function r2(v){return X((b,T)=>{let z=!1;b.subscribe(new $(T,J=>{z=!0,T.next(J)},()=>{z||T.next(v),T.complete()}))})}function fd(v,b){const T=arguments.length>=2;return z=>z.pipe(v?cd((J,le)=>v(J,le,z)):C,Xt(1),T?r2(b):n2(()=>new wg))}function Jl(v,b,T){const z=ae(v)||b||T?{next:v,error:b,complete:T}:v;return z?X((J,le)=>{var be;null===(be=z.subscribe)||void 0===be||be.call(z);let Oe=!0;J.subscribe(new $(le,Ye=>{var ct;null===(ct=z.next)||void 0===ct||ct.call(z,Ye),le.next(Ye)},()=>{var Ye;Oe=!1,null===(Ye=z.complete)||void 0===Ye||Ye.call(z),le.complete()},Ye=>{var ct;Oe=!1,null===(ct=z.error)||void 0===ct||ct.call(z,Ye),le.error(Ye)},()=>{var Ye,ct;Oe&&(null===(Ye=z.unsubscribe)||void 0===Ye||Ye.call(z)),null===(ct=z.finalize)||void 0===ct||ct.call(z)}))}):C}class Ac{constructor(b,T){this.id=b,this.url=T}}class ty extends Ac{constructor(b,T,z="imperative",J=null){super(b,T),this.navigationTrigger=z,this.restoredState=J}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mp extends Ac{constructor(b,T,z){super(b,T),this.urlAfterRedirects=z}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class i2 extends Ac{constructor(b,T,z){super(b,T),this.reason=z}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class RA extends Ac{constructor(b,T,z){super(b,T),this.error=z}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class FA extends Ac{constructor(b,T,z,J){super(b,T),this.urlAfterRedirects=z,this.state=J}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zA extends Ac{constructor(b,T,z,J){super(b,T),this.urlAfterRedirects=z,this.state=J}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NA extends Ac{constructor(b,T,z,J,le){super(b,T),this.urlAfterRedirects=z,this.state=J,this.shouldActivate=le}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class BA extends Ac{constructor(b,T,z,J){super(b,T),this.urlAfterRedirects=z,this.state=J}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jA extends Ac{constructor(b,T,z,J){super(b,T),this.urlAfterRedirects=z,this.state=J}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class a2{constructor(b){this.route=b}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class o2{constructor(b){this.route=b}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class UA{constructor(b){this.snapshot=b}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VA{constructor(b){this.snapshot=b}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class HA{constructor(b){this.snapshot=b}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qA{constructor(b){this.snapshot=b}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class s2{constructor(b,T,z){this.routerEvent=b,this.position=T,this.anchor=z}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Wa="primary";class GA{constructor(b){this.params=b||{}}has(b){return Object.prototype.hasOwnProperty.call(this.params,b)}get(b){if(this.has(b)){const T=this.params[b];return Array.isArray(T)?T[0]:T}return null}getAll(b){if(this.has(b)){const T=this.params[b];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function hd(v){return new GA(v)}const l2="ngNavigationCancelingError";function ny(v){const b=Error("NavigationCancelingError: "+v);return b[l2]=!0,b}function WA(v,b,T){const z=T.path.split("/");if(z.length>v.length||"full"===T.pathMatch&&(b.hasChildren()||z.length<v.length))return null;const J={};for(let le=0;le<z.length;le++){const be=z[le],Oe=v[le];if(be.startsWith(":"))J[be.substring(1)]=Oe;else if(be!==Oe.path)return null}return{consumed:v.slice(0,z.length),posParams:J}}function $u(v,b){const T=v?Object.keys(v):void 0,z=b?Object.keys(b):void 0;if(!T||!z||T.length!=z.length)return!1;let J;for(let le=0;le<T.length;le++)if(J=T[le],!u2(v[J],b[J]))return!1;return!0}function u2(v,b){if(Array.isArray(v)&&Array.isArray(b)){if(v.length!==b.length)return!1;const T=[...v].sort(),z=[...b].sort();return T.every((J,le)=>z[le]===J)}return v===b}function c2(v){return Array.prototype.concat.apply([],v)}function f2(v){return v.length>0?v[v.length-1]:null}function pl(v,b){for(const T in v)v.hasOwnProperty(T)&&b(v[T],T)}function Ku(v){return z1(v)?v:U0(v)?Mt(Promise.resolve(v)):Ua(v)}const $A={exact:function p2(v,b,T){if(!oh(v.segments,b.segments)||!Tg(v.segments,b.segments,T)||v.numberOfChildren!==b.numberOfChildren)return!1;for(const z in b.children)if(!v.children[z]||!p2(v.children[z],b.children[z],T))return!1;return!0},subset:g2},h2={exact:function KA(v,b){return $u(v,b)},subset:function JA(v,b){return Object.keys(b).length<=Object.keys(v).length&&Object.keys(b).every(T=>u2(v[T],b[T]))},ignored:()=>!0};function d2(v,b,T){return $A[T.paths](v.root,b.root,T.matrixParams)&&h2[T.queryParams](v.queryParams,b.queryParams)&&!("exact"===T.fragment&&v.fragment!==b.fragment)}function g2(v,b,T){return m2(v,b,b.segments,T)}function m2(v,b,T,z){if(v.segments.length>T.length){const J=v.segments.slice(0,T.length);return!(!oh(J,T)||b.hasChildren()||!Tg(J,T,z))}if(v.segments.length===T.length){if(!oh(v.segments,T)||!Tg(v.segments,T,z))return!1;for(const J in b.children)if(!v.children[J]||!g2(v.children[J],b.children[J],z))return!1;return!0}{const J=T.slice(0,v.segments.length),le=T.slice(v.segments.length);return!!(oh(v.segments,J)&&Tg(v.segments,J,z)&&v.children[Wa])&&m2(v.children[Wa],b,le,z)}}function Tg(v,b,T){return b.every((z,J)=>h2[T](v[J].parameters,z.parameters))}class ah{constructor(b,T,z){this.root=b,this.queryParams=T,this.fragment=z}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hd(this.queryParams)),this._queryParamMap}toString(){return t6.serialize(this)}}class ro{constructor(b,T){this.segments=b,this.children=T,this.parent=null,pl(T,(z,J)=>z.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mg(this)}}class kp{constructor(b,T){this.path=b,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=hd(this.parameters)),this._parameterMap}toString(){return _2(this)}}function oh(v,b){return v.length===b.length&&v.every((T,z)=>T.path===b[z].path)}class v2{}class y2{parse(b){const T=new c6(b);return new ah(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(b){const T=`/${Ap(b.root,!0)}`,z=function i6(v){const b=Object.keys(v).map(T=>{const z=v[T];return Array.isArray(z)?z.map(J=>`${kg(T)}=${kg(J)}`).join("&"):`${kg(T)}=${kg(z)}`}).filter(T=>!!T);return b.length?`?${b.join("&")}`:""}(b.queryParams);return`${T}${z}${"string"==typeof b.fragment?`#${function n6(v){return encodeURI(v)}(b.fragment)}`:""}`}}const t6=new y2;function Mg(v){return v.segments.map(b=>_2(b)).join("/")}function Ap(v,b){if(!v.hasChildren())return Mg(v);if(b){const T=v.children[Wa]?Ap(v.children[Wa],!1):"",z=[];return pl(v.children,(J,le)=>{le!==Wa&&z.push(`${le}:${Ap(J,!1)}`)}),z.length>0?`${T}(${z.join("//")})`:T}{const T=function e6(v,b){let T=[];return pl(v.children,(z,J)=>{J===Wa&&(T=T.concat(b(z,J)))}),pl(v.children,(z,J)=>{J!==Wa&&(T=T.concat(b(z,J)))}),T}(v,(z,J)=>J===Wa?[Ap(v.children[Wa],!1)]:[`${J}:${Ap(z,!1)}`]);return 1===Object.keys(v.children).length&&null!=v.children[Wa]?`${Mg(v)}/${T[0]}`:`${Mg(v)}/(${T.join("//")})`}}function x2(v){return encodeURIComponent(v).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kg(v){return x2(v).replace(/%3B/gi,";")}function ry(v){return x2(v).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ag(v){return decodeURIComponent(v)}function b2(v){return Ag(v.replace(/\+/g,"%20"))}function _2(v){return`${ry(v.path)}${function r6(v){return Object.keys(v).map(b=>`;${ry(b)}=${ry(v[b])}`).join("")}(v.parameters)}`}const a6=/^[^\/()?;=#]+/;function Eg(v){const b=v.match(a6);return b?b[0]:""}const o6=/^[^=?&#]+/,l6=/^[^&#]+/;class c6{constructor(b){this.url=b,this.remaining=b}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ro([],{}):new ro([],this.parseChildren())}parseQueryParams(){const b={};if(this.consumeOptional("?"))do{this.parseQueryParam(b)}while(this.consumeOptional("&"));return b}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const b=[];for(this.peekStartsWith("(")||b.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),b.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let z={};return this.peekStartsWith("(")&&(z=this.parseParens(!1)),(b.length>0||Object.keys(T).length>0)&&(z[Wa]=new ro(b,T)),z}parseSegment(){const b=Eg(this.remaining);if(""===b&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(b),new kp(Ag(b),this.parseMatrixParams())}parseMatrixParams(){const b={};for(;this.consumeOptional(";");)this.parseParam(b);return b}parseParam(b){const T=Eg(this.remaining);if(!T)return;this.capture(T);let z="";if(this.consumeOptional("=")){const J=Eg(this.remaining);J&&(z=J,this.capture(z))}b[Ag(T)]=Ag(z)}parseQueryParam(b){const T=function s6(v){const b=v.match(o6);return b?b[0]:""}(this.remaining);if(!T)return;this.capture(T);let z="";if(this.consumeOptional("=")){const be=function u6(v){const b=v.match(l6);return b?b[0]:""}(this.remaining);be&&(z=be,this.capture(z))}const J=b2(T),le=b2(z);if(b.hasOwnProperty(J)){let be=b[J];Array.isArray(be)||(be=[be],b[J]=be),be.push(le)}else b[J]=le}parseParens(b){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const z=Eg(this.remaining),J=this.remaining[z.length];if("/"!==J&&")"!==J&&";"!==J)throw new Error(`Cannot parse url '${this.url}'`);let le;z.indexOf(":")>-1?(le=z.substr(0,z.indexOf(":")),this.capture(le),this.capture(":")):b&&(le=Wa);const be=this.parseChildren();T[le]=1===Object.keys(be).length?be[Wa]:new ro([],be),this.consumeOptional("//")}return T}peekStartsWith(b){return this.remaining.startsWith(b)}consumeOptional(b){return!!this.peekStartsWith(b)&&(this.remaining=this.remaining.substring(b.length),!0)}capture(b){if(!this.consumeOptional(b))throw new Error(`Expected "${b}".`)}}class w2{constructor(b){this._root=b}get root(){return this._root.value}parent(b){const T=this.pathFromRoot(b);return T.length>1?T[T.length-2]:null}children(b){const T=iy(b,this._root);return T?T.children.map(z=>z.value):[]}firstChild(b){const T=iy(b,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(b){const T=ay(b,this._root);return T.length<2?[]:T[T.length-2].children.map(J=>J.value).filter(J=>J!==b)}pathFromRoot(b){return ay(b,this._root).map(T=>T.value)}}function iy(v,b){if(v===b.value)return b;for(const T of b.children){const z=iy(v,T);if(z)return z}return null}function ay(v,b){if(v===b.value)return[b];for(const T of b.children){const z=ay(v,T);if(z.length)return z.unshift(b),z}return[]}class Ec{constructor(b,T){this.value=b,this.children=T}toString(){return`TreeNode(${this.value})`}}function dd(v){const b={};return v&&v.children.forEach(T=>b[T.value.outlet]=T),b}class T2 extends w2{constructor(b,T){super(b),this.snapshot=T,oy(this,b)}toString(){return this.snapshot.toString()}}function M2(v,b){const T=function f6(v,b){const be=new Sg([],{},{},"",{},Wa,b,null,v.root,-1,{});return new A2("",new Ec(be,[]))}(v,b),z=new Su([new kp("",{})]),J=new Su({}),le=new Su({}),be=new Su({}),Oe=new Su(""),Ye=new pd(z,J,be,Oe,le,Wa,b,T.root);return Ye.snapshot=T.root,new T2(new Ec(Ye,[]),T)}class pd{constructor(b,T,z,J,le,be,Oe,Ye){this.url=b,this.params=T,this.queryParams=z,this.fragment=J,this.data=le,this.outlet=be,this.component=Oe,this._futureSnapshot=Ye}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(re(b=>hd(b)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(re(b=>hd(b)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function k2(v,b="emptyOnly"){const T=v.pathFromRoot;let z=0;if("always"!==b)for(z=T.length-1;z>=1;){const J=T[z],le=T[z-1];if(J.routeConfig&&""===J.routeConfig.path)z--;else{if(le.component)break;z--}}return function h6(v){return v.reduce((b,T)=>({params:Object.assign(Object.assign({},b.params),T.params),data:Object.assign(Object.assign({},b.data),T.data),resolve:Object.assign(Object.assign({},b.resolve),T._resolvedData)}),{params:{},data:{},resolve:{}})}(T.slice(z))}class Sg{constructor(b,T,z,J,le,be,Oe,Ye,ct,Nt,en){this.url=b,this.params=T,this.queryParams=z,this.fragment=J,this.data=le,this.outlet=be,this.component=Oe,this.routeConfig=Ye,this._urlSegment=ct,this._lastPathIndex=Nt,this._resolve=en}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=hd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(z=>z.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class A2 extends w2{constructor(b,T){super(T),this.url=b,oy(this,T)}toString(){return E2(this._root)}}function oy(v,b){b.value._routerState=v,b.children.forEach(T=>oy(v,T))}function E2(v){const b=v.children.length>0?` { ${v.children.map(E2).join(", ")} } `:"";return`${v.value}${b}`}function sy(v){if(v.snapshot){const b=v.snapshot,T=v._futureSnapshot;v.snapshot=T,$u(b.queryParams,T.queryParams)||v.queryParams.next(T.queryParams),b.fragment!==T.fragment&&v.fragment.next(T.fragment),$u(b.params,T.params)||v.params.next(T.params),function ZA(v,b){if(v.length!==b.length)return!1;for(let T=0;T<v.length;++T)if(!$u(v[T],b[T]))return!1;return!0}(b.url,T.url)||v.url.next(T.url),$u(b.data,T.data)||v.data.next(T.data)}else v.snapshot=v._futureSnapshot,v.data.next(v._futureSnapshot.data)}function ly(v,b){const T=$u(v.params,b.params)&&function QA(v,b){return oh(v,b)&&v.every((T,z)=>$u(T.parameters,b[z].parameters))}(v.url,b.url);return T&&!(!v.parent!=!b.parent)&&(!v.parent||ly(v.parent,b.parent))}function Ep(v,b,T){if(T&&v.shouldReuseRoute(b.value,T.value.snapshot)){const z=T.value;z._futureSnapshot=b.value;const J=function p6(v,b,T){return b.children.map(z=>{for(const J of T.children)if(v.shouldReuseRoute(z.value,J.value.snapshot))return Ep(v,z,J);return Ep(v,z)})}(v,b,T);return new Ec(z,J)}{if(v.shouldAttach(b.value)){const le=v.retrieve(b.value);if(null!==le){const be=le.route;return be.value._futureSnapshot=b.value,be.children=b.children.map(Oe=>Ep(v,Oe)),be}}const z=function g6(v){return new pd(new Su(v.url),new Su(v.params),new Su(v.queryParams),new Su(v.fragment),new Su(v.data),v.outlet,v.component,v)}(b.value),J=b.children.map(le=>Ep(v,le));return new Ec(z,J)}}function Cg(v){return"object"==typeof v&&null!=v&&!v.outlets&&!v.segmentPath}function Sp(v){return"object"==typeof v&&null!=v&&v.outlets}function uy(v,b,T,z,J){let le={};return z&&pl(z,(be,Oe)=>{le[Oe]=Array.isArray(be)?be.map(Ye=>`${Ye}`):`${be}`}),new ah(T.root===v?b:S2(T.root,v,b),le,J)}function S2(v,b,T){const z={};return pl(v.children,(J,le)=>{z[le]=J===b?T:S2(J,b,T)}),new ro(v.segments,z)}class C2{constructor(b,T,z){if(this.isAbsolute=b,this.numberOfDoubleDots=T,this.commands=z,b&&z.length>0&&Cg(z[0]))throw new Error("Root segment cannot have matrix parameters");const J=z.find(Sp);if(J&&J!==f2(z))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cy{constructor(b,T,z){this.segmentGroup=b,this.processChildren=T,this.index=z}}function D2(v,b,T){if(v||(v=new ro([],{})),0===v.segments.length&&v.hasChildren())return Dg(v,b,T);const z=function _6(v,b,T){let z=0,J=b;const le={match:!1,pathIndex:0,commandIndex:0};for(;J<v.segments.length;){if(z>=T.length)return le;const be=v.segments[J],Oe=T[z];if(Sp(Oe))break;const Ye=`${Oe}`,ct=z<T.length-1?T[z+1]:null;if(J>0&&void 0===Ye)break;if(Ye&&ct&&"object"==typeof ct&&void 0===ct.outlets){if(!I2(Ye,ct,be))return le;z+=2}else{if(!I2(Ye,{},be))return le;z++}J++}return{match:!0,pathIndex:J,commandIndex:z}}(v,b,T),J=T.slice(z.commandIndex);if(z.match&&z.pathIndex<v.segments.length){const le=new ro(v.segments.slice(0,z.pathIndex),{});return le.children[Wa]=new ro(v.segments.slice(z.pathIndex),v.children),Dg(le,0,J)}return z.match&&0===J.length?new ro(v.segments,{}):z.match&&!v.hasChildren()?fy(v,b,T):z.match?Dg(v,0,J):fy(v,b,T)}function Dg(v,b,T){if(0===T.length)return new ro(v.segments,{});{const z=function b6(v){return Sp(v[0])?v[0].outlets:{[Wa]:v}}(T),J={};return pl(z,(le,be)=>{"string"==typeof le&&(le=[le]),null!==le&&(J[be]=D2(v.children[be],b,le))}),pl(v.children,(le,be)=>{void 0===z[be]&&(J[be]=le)}),new ro(v.segments,J)}}function fy(v,b,T){const z=v.segments.slice(0,b);let J=0;for(;J<T.length;){const le=T[J];if(Sp(le)){const Ye=w6(le.outlets);return new ro(z,Ye)}if(0===J&&Cg(T[0])){z.push(new kp(v.segments[b].path,L2(T[0]))),J++;continue}const be=Sp(le)?le.outlets[Wa]:`${le}`,Oe=J<T.length-1?T[J+1]:null;be&&Oe&&Cg(Oe)?(z.push(new kp(be,L2(Oe))),J+=2):(z.push(new kp(be,{})),J++)}return new ro(z,{})}function w6(v){const b={};return pl(v,(T,z)=>{"string"==typeof T&&(T=[T]),null!==T&&(b[z]=fy(new ro([],{}),0,T))}),b}function L2(v){const b={};return pl(v,(T,z)=>b[z]=`${T}`),b}function I2(v,b,T){return v==T.path&&$u(b,T.parameters)}class M6{constructor(b,T,z,J){this.routeReuseStrategy=b,this.futureState=T,this.currState=z,this.forwardEvent=J}activate(b){const T=this.futureState._root,z=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,z,b),sy(this.futureState.root),this.activateChildRoutes(T,z,b)}deactivateChildRoutes(b,T,z){const J=dd(T);b.children.forEach(le=>{const be=le.value.outlet;this.deactivateRoutes(le,J[be],z),delete J[be]}),pl(J,(le,be)=>{this.deactivateRouteAndItsChildren(le,z)})}deactivateRoutes(b,T,z){const J=b.value,le=T?T.value:null;if(J===le)if(J.component){const be=z.getContext(J.outlet);be&&this.deactivateChildRoutes(b,T,be.children)}else this.deactivateChildRoutes(b,T,z);else le&&this.deactivateRouteAndItsChildren(T,z)}deactivateRouteAndItsChildren(b,T){b.value.component&&this.routeReuseStrategy.shouldDetach(b.value.snapshot)?this.detachAndStoreRouteSubtree(b,T):this.deactivateRouteAndOutlet(b,T)}detachAndStoreRouteSubtree(b,T){const z=T.getContext(b.value.outlet),J=z&&b.value.component?z.children:T,le=dd(b);for(const be of Object.keys(le))this.deactivateRouteAndItsChildren(le[be],J);if(z&&z.outlet){const be=z.outlet.detach(),Oe=z.children.onOutletDeactivated();this.routeReuseStrategy.store(b.value.snapshot,{componentRef:be,route:b,contexts:Oe})}}deactivateRouteAndOutlet(b,T){const z=T.getContext(b.value.outlet),J=z&&b.value.component?z.children:T,le=dd(b);for(const be of Object.keys(le))this.deactivateRouteAndItsChildren(le[be],J);z&&z.outlet&&(z.outlet.deactivate(),z.children.onOutletDeactivated(),z.attachRef=null,z.resolver=null,z.route=null)}activateChildRoutes(b,T,z){const J=dd(T);b.children.forEach(le=>{this.activateRoutes(le,J[le.value.outlet],z),this.forwardEvent(new qA(le.value.snapshot))}),b.children.length&&this.forwardEvent(new VA(b.value.snapshot))}activateRoutes(b,T,z){const J=b.value,le=T?T.value:null;if(sy(J),J===le)if(J.component){const be=z.getOrCreateContext(J.outlet);this.activateChildRoutes(b,T,be.children)}else this.activateChildRoutes(b,T,z);else if(J.component){const be=z.getOrCreateContext(J.outlet);if(this.routeReuseStrategy.shouldAttach(J.snapshot)){const Oe=this.routeReuseStrategy.retrieve(J.snapshot);this.routeReuseStrategy.store(J.snapshot,null),be.children.onOutletReAttached(Oe.contexts),be.attachRef=Oe.componentRef,be.route=Oe.route.value,be.outlet&&be.outlet.attach(Oe.componentRef,Oe.route.value),sy(Oe.route.value),this.activateChildRoutes(b,null,be.children)}else{const Oe=function k6(v){for(let b=v.parent;b;b=b.parent){const T=b.routeConfig;if(T&&T._loadedConfig)return T._loadedConfig;if(T&&T.component)return null}return null}(J.snapshot),Ye=Oe?Oe.module.componentFactoryResolver:null;be.attachRef=null,be.route=J,be.resolver=Ye,be.outlet&&be.outlet.activateWith(J,Ye),this.activateChildRoutes(b,null,be.children)}}else this.activateChildRoutes(b,null,z)}}class hy{constructor(b,T){this.routes=b,this.module=T}}function cf(v){return"function"==typeof v}function sh(v){return v instanceof ah}const Cp=Symbol("INITIAL_VALUE");function Dp(){return ih(v=>AA(v.map(b=>b.pipe(Xt(1),function DA(...v){const b=vt(v);return X((T,z)=>{(b?Qv(v,T,b):Qv(v,T)).subscribe(z)})}(Cp)))).pipe(t2((b,T)=>{let z=!1;return T.reduce((J,le,be)=>J!==Cp?J:(le===Cp&&(z=!0),z||!1!==le&&be!==T.length-1&&!sh(le)?J:le),b)},Cp),cd(b=>b!==Cp),re(b=>sh(b)?b:!0===b),Xt(1)))}class L6{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Lp,this.attachRef=null}}class Lp{constructor(){this.contexts=new Map}onChildOutletCreated(b,T){const z=this.getOrCreateContext(b);z.outlet=T,this.contexts.set(b,z)}onChildOutletDestroyed(b){const T=this.getContext(b);T&&(T.outlet=null,T.attachRef=null)}onOutletDeactivated(){const b=this.contexts;return this.contexts=new Map,b}onOutletReAttached(b){this.contexts=b}getOrCreateContext(b){let T=this.getContext(b);return T||(T=new L6,this.contexts.set(b,T)),T}getContext(b){return this.contexts.get(b)||null}}let P2=(()=>{class v{constructor(T,z,J,le,be){this.parentContexts=T,this.location=z,this.resolver=J,this.changeDetector=be,this.activated=null,this._activatedRoute=null,this.activateEvents=new ua,this.deactivateEvents=new ua,this.attachEvents=new ua,this.detachEvents=new ua,this.name=le||Wa,T.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const T=this.parentContexts.getContext(this.name);T&&T.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,z){this.activated=T,this._activatedRoute=z,this.location.insert(T.hostView),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,z){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=T;const be=(z=z||this.resolver).resolveComponentFactory(T._futureSnapshot.routeConfig.component),Oe=this.parentContexts.getOrCreateContext(this.name).children,Ye=new I6(T,Oe,this.location.injector);this.activated=this.location.createComponent(be,this.location.length,Ye),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return v.\u0275fac=function(T){return new(T||v)(ea(Lp),ea(Mu),ea(rd),function ec(v){return function xs(v,b){if("class"===b)return v.classes;if("style"===b)return v.styles;const T=v.attrs;if(T){const z=T.length;let J=0;for(;J<z;){const le=T[J];if(Hi(le))break;if(0===le)J+=2;else if("number"==typeof le)for(J++;J<z&&"string"==typeof T[J];)J++;else{if(le===b)return T[J+1];J+=2}}}return null}(Ao(),v)}("name"),ea(Av))},v.\u0275dir=Ja({type:v,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),v})();class I6{constructor(b,T,z){this.route=b,this.childContexts=T,this.parent=z}get(b,T){return b===pd?this.route:b===Lp?this.childContexts:this.parent.get(b,T)}}let O2=(()=>{class v{}return v.\u0275fac=function(T){return new(T||v)},v.\u0275cmp=$s({type:v,selectors:[["ng-component"]],decls:1,vars:0,template:function(T,z){1&T&&j0(0,"router-outlet")},directives:[P2],encapsulation:2}),v})();function R2(v,b=""){for(let T=0;T<v.length;T++){const z=v[T];P6(z,O6(b,z))}}function P6(v,b){v.children&&R2(v.children,b)}function O6(v,b){return b?v||b.path?v&&!b.path?`${v}/`:!v&&b.path?b.path:`${v}/${b.path}`:"":v}function dy(v){const b=v.children&&v.children.map(dy),T=b?Object.assign(Object.assign({},v),{children:b}):Object.assign({},v);return!T.component&&(b||T.loadChildren)&&T.outlet&&T.outlet!==Wa&&(T.component=O2),T}function mu(v){return v.outlet||Wa}function F2(v,b){const T=v.filter(z=>mu(z)===b);return T.push(...v.filter(z=>mu(z)!==b)),T}const z2={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Lg(v,b,T){var z;if(""===b.path)return"full"===b.pathMatch&&(v.hasChildren()||T.length>0)?Object.assign({},z2):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const le=(b.matcher||WA)(T,v,b);if(!le)return Object.assign({},z2);const be={};pl(le.posParams,(Ye,ct)=>{be[ct]=Ye.path});const Oe=le.consumed.length>0?Object.assign(Object.assign({},be),le.consumed[le.consumed.length-1].parameters):be;return{matched:!0,consumedSegments:le.consumed,lastChild:le.consumed.length,parameters:Oe,positionalParamSegments:null!==(z=le.posParams)&&void 0!==z?z:{}}}function Ig(v,b,T,z,J="corrected"){if(T.length>0&&function z6(v,b,T){return T.some(z=>Pg(v,b,z)&&mu(z)!==Wa)}(v,T,z)){const be=new ro(b,function F6(v,b,T,z){const J={};J[Wa]=z,z._sourceSegment=v,z._segmentIndexShift=b.length;for(const le of T)if(""===le.path&&mu(le)!==Wa){const be=new ro([],{});be._sourceSegment=v,be._segmentIndexShift=b.length,J[mu(le)]=be}return J}(v,b,z,new ro(T,v.children)));return be._sourceSegment=v,be._segmentIndexShift=b.length,{segmentGroup:be,slicedSegments:[]}}if(0===T.length&&function N6(v,b,T){return T.some(z=>Pg(v,b,z))}(v,T,z)){const be=new ro(v.segments,function R6(v,b,T,z,J,le){const be={};for(const Oe of z)if(Pg(v,T,Oe)&&!J[mu(Oe)]){const Ye=new ro([],{});Ye._sourceSegment=v,Ye._segmentIndexShift="legacy"===le?v.segments.length:b.length,be[mu(Oe)]=Ye}return Object.assign(Object.assign({},J),be)}(v,b,T,z,v.children,J));return be._sourceSegment=v,be._segmentIndexShift=b.length,{segmentGroup:be,slicedSegments:T}}const le=new ro(v.segments,v.children);return le._sourceSegment=v,le._segmentIndexShift=b.length,{segmentGroup:le,slicedSegments:T}}function Pg(v,b,T){return(!(v.hasChildren()||b.length>0)||"full"!==T.pathMatch)&&""===T.path}function N2(v,b,T,z){return!!(mu(v)===z||z!==Wa&&Pg(b,T,v))&&("**"===v.path||Lg(b,v,T).matched)}function B2(v,b,T){return 0===b.length&&!v.children[T]}class Ip{constructor(b){this.segmentGroup=b||null}}class j2{constructor(b){this.urlTree=b}}function Og(v){return new D(b=>b.error(new Ip(v)))}function U2(v){return new D(b=>b.error(new j2(v)))}function B6(v){return new D(b=>b.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${v}'`)))}class V6{constructor(b,T,z,J,le){this.configLoader=T,this.urlSerializer=z,this.urlTree=J,this.config=le,this.allowRedirects=!0,this.ngModule=b.get(wc)}apply(){const b=Ig(this.urlTree.root,[],[],this.config).segmentGroup,T=new ro(b.segments,b.children);return this.expandSegmentGroup(this.ngModule,this.config,T,Wa).pipe(re(le=>this.createUrlTree(py(le),this.urlTree.queryParams,this.urlTree.fragment))).pipe(uf(le=>{if(le instanceof j2)return this.allowRedirects=!1,this.match(le.urlTree);throw le instanceof Ip?this.noMatchError(le):le}))}match(b){return this.expandSegmentGroup(this.ngModule,this.config,b.root,Wa).pipe(re(J=>this.createUrlTree(py(J),b.queryParams,b.fragment))).pipe(uf(J=>{throw J instanceof Ip?this.noMatchError(J):J}))}noMatchError(b){return new Error(`Cannot match any routes. URL Segment: '${b.segmentGroup}'`)}createUrlTree(b,T,z){const J=b.segments.length>0?new ro([],{[Wa]:b}):b;return new ah(J,T,z)}expandSegmentGroup(b,T,z,J){return 0===z.segments.length&&z.hasChildren()?this.expandChildren(b,T,z).pipe(re(le=>new ro([],le))):this.expandSegment(b,z,T,z.segments,J,!0)}expandChildren(b,T,z){const J=[];for(const le of Object.keys(z.children))"primary"===le?J.unshift(le):J.push(le);return Mt(J).pipe(Tp(le=>{const be=z.children[le],Oe=F2(T,le);return this.expandSegmentGroup(b,Oe,be,le).pipe(re(Ye=>({segment:Ye,outlet:le})))}),t2((le,be)=>(le[be.outlet]=be.segment,le),{}),function PA(v,b){const T=arguments.length>=2;return z=>z.pipe(v?cd((J,le)=>v(J,le,z)):C,ey(1),T?r2(b):n2(()=>new wg))}())}expandSegment(b,T,z,J,le,be){return Mt(z).pipe(Tp(Oe=>this.expandSegmentAgainstRoute(b,T,z,Oe,J,le,be).pipe(uf(ct=>{if(ct instanceof Ip)return Ua(null);throw ct}))),fd(Oe=>!!Oe),uf((Oe,Ye)=>{if(Oe instanceof wg||"EmptyError"===Oe.name){if(B2(T,J,le))return Ua(new ro([],{}));throw new Ip(T)}throw Oe}))}expandSegmentAgainstRoute(b,T,z,J,le,be,Oe){return N2(J,T,le,be)?void 0===J.redirectTo?this.matchSegmentAgainstRoute(b,T,J,le,be):Oe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(b,T,z,J,le,be):Og(T):Og(T)}expandSegmentAgainstRouteUsingRedirect(b,T,z,J,le,be){return"**"===J.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(b,z,J,be):this.expandRegularSegmentAgainstRouteUsingRedirect(b,T,z,J,le,be)}expandWildCardWithParamsAgainstRouteUsingRedirect(b,T,z,J){const le=this.applyRedirectCommands([],z.redirectTo,{});return z.redirectTo.startsWith("/")?U2(le):this.lineralizeSegments(z,le).pipe(Ee(be=>{const Oe=new ro(be,{});return this.expandSegment(b,Oe,T,be,J,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(b,T,z,J,le,be){const{matched:Oe,consumedSegments:Ye,lastChild:ct,positionalParamSegments:Nt}=Lg(T,J,le);if(!Oe)return Og(T);const en=this.applyRedirectCommands(Ye,J.redirectTo,Nt);return J.redirectTo.startsWith("/")?U2(en):this.lineralizeSegments(J,en).pipe(Ee(An=>this.expandSegment(b,T,z,An.concat(le.slice(ct)),be,!1)))}matchSegmentAgainstRoute(b,T,z,J,le){if("**"===z.path)return z.loadChildren?(z._loadedConfig?Ua(z._loadedConfig):this.configLoader.load(b.injector,z)).pipe(re(An=>(z._loadedConfig=An,new ro(J,{})))):Ua(new ro(J,{}));const{matched:be,consumedSegments:Oe,lastChild:Ye}=Lg(T,z,J);if(!be)return Og(T);const ct=J.slice(Ye);return this.getChildConfig(b,z,J).pipe(Ee(en=>{const An=en.module,zn=en.routes,{segmentGroup:gr,slicedSegments:Xr}=Ig(T,Oe,ct,zn),ui=new ro(gr.segments,gr.children);if(0===Xr.length&&ui.hasChildren())return this.expandChildren(An,zn,ui).pipe(re(_a=>new ro(Oe,_a)));if(0===zn.length&&0===Xr.length)return Ua(new ro(Oe,{}));const gi=mu(z)===le;return this.expandSegment(An,ui,zn,Xr,gi?Wa:le,!0).pipe(re(Ni=>new ro(Oe.concat(Ni.segments),Ni.children)))}))}getChildConfig(b,T,z){return T.children?Ua(new hy(T.children,b)):T.loadChildren?void 0!==T._loadedConfig?Ua(T._loadedConfig):this.runCanLoadGuards(b.injector,T,z).pipe(Ee(J=>J?this.configLoader.load(b.injector,T).pipe(re(le=>(T._loadedConfig=le,le))):function j6(v){return new D(b=>b.error(ny(`Cannot load children because the guard of the route "path: '${v.path}'" returned false`)))}(T))):Ua(new hy([],b))}runCanLoadGuards(b,T,z){const J=T.canLoad;return J&&0!==J.length?Ua(J.map(be=>{const Oe=b.get(be);let Ye;if(function E6(v){return v&&cf(v.canLoad)}(Oe))Ye=Oe.canLoad(T,z);else{if(!cf(Oe))throw new Error("Invalid CanLoad guard");Ye=Oe(T,z)}return Ku(Ye)})).pipe(Dp(),Jl(be=>{if(!sh(be))return;const Oe=ny(`Redirecting to "${this.urlSerializer.serialize(be)}"`);throw Oe.url=be,Oe}),re(be=>!0===be)):Ua(!0)}lineralizeSegments(b,T){let z=[],J=T.root;for(;;){if(z=z.concat(J.segments),0===J.numberOfChildren)return Ua(z);if(J.numberOfChildren>1||!J.children[Wa])return B6(b.redirectTo);J=J.children[Wa]}}applyRedirectCommands(b,T,z){return this.applyRedirectCreatreUrlTree(T,this.urlSerializer.parse(T),b,z)}applyRedirectCreatreUrlTree(b,T,z,J){const le=this.createSegmentGroup(b,T.root,z,J);return new ah(le,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(b,T){const z={};return pl(b,(J,le)=>{if("string"==typeof J&&J.startsWith(":")){const Oe=J.substring(1);z[le]=T[Oe]}else z[le]=J}),z}createSegmentGroup(b,T,z,J){const le=this.createSegments(b,T.segments,z,J);let be={};return pl(T.children,(Oe,Ye)=>{be[Ye]=this.createSegmentGroup(b,Oe,z,J)}),new ro(le,be)}createSegments(b,T,z,J){return T.map(le=>le.path.startsWith(":")?this.findPosParam(b,le,J):this.findOrReturn(le,z))}findPosParam(b,T,z){const J=z[T.path.substring(1)];if(!J)throw new Error(`Cannot redirect to '${b}'. Cannot find '${T.path}'.`);return J}findOrReturn(b,T){let z=0;for(const J of T){if(J.path===b.path)return T.splice(z),J;z++}return b}}function py(v){const b={};for(const z of Object.keys(v.children)){const le=py(v.children[z]);(le.segments.length>0||le.hasChildren())&&(b[z]=le)}return function H6(v){if(1===v.numberOfChildren&&v.children[Wa]){const b=v.children[Wa];return new ro(v.segments.concat(b.segments),b.children)}return v}(new ro(v.segments,b))}class V2{constructor(b){this.path=b,this.route=this.path[this.path.length-1]}}class Rg{constructor(b,T){this.component=b,this.route=T}}function G6(v,b,T){const z=v._root;return Pp(z,b?b._root:null,T,[z.value])}function Fg(v,b,T){const z=function W6(v){if(!v)return null;for(let b=v.parent;b;b=b.parent){const T=b.routeConfig;if(T&&T._loadedConfig)return T._loadedConfig}return null}(b);return(z?z.module.injector:T).get(v)}function Pp(v,b,T,z,J={canDeactivateChecks:[],canActivateChecks:[]}){const le=dd(b);return v.children.forEach(be=>{(function Z6(v,b,T,z,J={canDeactivateChecks:[],canActivateChecks:[]}){const le=v.value,be=b?b.value:null,Oe=T?T.getContext(v.value.outlet):null;if(be&&le.routeConfig===be.routeConfig){const Ye=function X6(v,b,T){if("function"==typeof T)return T(v,b);switch(T){case"pathParamsChange":return!oh(v.url,b.url);case"pathParamsOrQueryParamsChange":return!oh(v.url,b.url)||!$u(v.queryParams,b.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ly(v,b)||!$u(v.queryParams,b.queryParams);default:return!ly(v,b)}}(be,le,le.routeConfig.runGuardsAndResolvers);Ye?J.canActivateChecks.push(new V2(z)):(le.data=be.data,le._resolvedData=be._resolvedData),Pp(v,b,le.component?Oe?Oe.children:null:T,z,J),Ye&&Oe&&Oe.outlet&&Oe.outlet.isActivated&&J.canDeactivateChecks.push(new Rg(Oe.outlet.component,be))}else be&&Op(b,Oe,J),J.canActivateChecks.push(new V2(z)),Pp(v,null,le.component?Oe?Oe.children:null:T,z,J)})(be,le[be.value.outlet],T,z.concat([be.value]),J),delete le[be.value.outlet]}),pl(le,(be,Oe)=>Op(be,T.getContext(Oe),J)),J}function Op(v,b,T){const z=dd(v),J=v.value;pl(z,(le,be)=>{Op(le,J.component?b?b.children.getContext(be):null:b,T)}),T.canDeactivateChecks.push(new Rg(J.component&&b&&b.outlet&&b.outlet.isActivated?b.outlet.component:null,J))}class iE{}function H2(v){return new D(b=>b.error(v))}class oE{constructor(b,T,z,J,le,be){this.rootComponentType=b,this.config=T,this.urlTree=z,this.url=J,this.paramsInheritanceStrategy=le,this.relativeLinkResolution=be}recognize(){const b=Ig(this.urlTree.root,[],[],this.config.filter(be=>void 0===be.redirectTo),this.relativeLinkResolution).segmentGroup,T=this.processSegmentGroup(this.config,b,Wa);if(null===T)return null;const z=new Sg([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Wa,this.rootComponentType,null,this.urlTree.root,-1,{}),J=new Ec(z,T),le=new A2(this.url,J);return this.inheritParamsAndData(le._root),le}inheritParamsAndData(b){const T=b.value,z=k2(T,this.paramsInheritanceStrategy);T.params=Object.freeze(z.params),T.data=Object.freeze(z.data),b.children.forEach(J=>this.inheritParamsAndData(J))}processSegmentGroup(b,T,z){return 0===T.segments.length&&T.hasChildren()?this.processChildren(b,T):this.processSegment(b,T,T.segments,z)}processChildren(b,T){const z=[];for(const le of Object.keys(T.children)){const be=T.children[le],Oe=F2(b,le),Ye=this.processSegmentGroup(Oe,be,le);if(null===Ye)return null;z.push(...Ye)}const J=q2(z);return function sE(v){v.sort((b,T)=>b.value.outlet===Wa?-1:T.value.outlet===Wa?1:b.value.outlet.localeCompare(T.value.outlet))}(J),J}processSegment(b,T,z,J){for(const le of b){const be=this.processSegmentAgainstRoute(le,T,z,J);if(null!==be)return be}return B2(T,z,J)?[]:null}processSegmentAgainstRoute(b,T,z,J){if(b.redirectTo||!N2(b,T,z,J))return null;let le,be=[],Oe=[];if("**"===b.path){const zn=z.length>0?f2(z).parameters:{};le=new Sg(z,zn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,W2(b),mu(b),b.component,b,G2(T),Y2(T)+z.length,Z2(b))}else{const zn=Lg(T,b,z);if(!zn.matched)return null;be=zn.consumedSegments,Oe=z.slice(zn.lastChild),le=new Sg(be,zn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,W2(b),mu(b),b.component,b,G2(T),Y2(T)+be.length,Z2(b))}const Ye=function lE(v){return v.children?v.children:v.loadChildren?v._loadedConfig.routes:[]}(b),{segmentGroup:ct,slicedSegments:Nt}=Ig(T,be,Oe,Ye.filter(zn=>void 0===zn.redirectTo),this.relativeLinkResolution);if(0===Nt.length&&ct.hasChildren()){const zn=this.processChildren(Ye,ct);return null===zn?null:[new Ec(le,zn)]}if(0===Ye.length&&0===Nt.length)return[new Ec(le,[])];const en=mu(b)===J,An=this.processSegment(Ye,ct,Nt,en?Wa:J);return null===An?null:[new Ec(le,An)]}}function uE(v){const b=v.value.routeConfig;return b&&""===b.path&&void 0===b.redirectTo}function q2(v){const b=[],T=new Set;for(const z of v){if(!uE(z)){b.push(z);continue}const J=b.find(le=>z.value.routeConfig===le.value.routeConfig);void 0!==J?(J.children.push(...z.children),T.add(J)):b.push(z)}for(const z of T){const J=q2(z.children);b.push(new Ec(z.value,J))}return b.filter(z=>!T.has(z))}function G2(v){let b=v;for(;b._sourceSegment;)b=b._sourceSegment;return b}function Y2(v){let b=v,T=b._segmentIndexShift?b._segmentIndexShift:0;for(;b._sourceSegment;)b=b._sourceSegment,T+=b._segmentIndexShift?b._segmentIndexShift:0;return T-1}function W2(v){return v.data||{}}function Z2(v){return v.resolve||{}}function gy(v){return ih(b=>{const T=v(b);return T?Mt(T).pipe(re(()=>b)):Ua(b)})}class vE extends class mE{shouldDetach(b){return!1}store(b,T){}shouldAttach(b){return!1}retrieve(b){return null}shouldReuseRoute(b,T){return b.routeConfig===T.routeConfig}}{}const my=new Za("ROUTES");class X2{constructor(b,T,z,J){this.injector=b,this.compiler=T,this.onLoadStartListener=z,this.onLoadEndListener=J}load(b,T){if(T._loader$)return T._loader$;this.onLoadStartListener&&this.onLoadStartListener(T);const J=this.loadModuleFactory(T.loadChildren).pipe(re(le=>{this.onLoadEndListener&&this.onLoadEndListener(T);const be=le.create(b);return new hy(c2(be.injector.get(my,void 0,cr.Self|cr.Optional)).map(dy),be)}),uf(le=>{throw T._loader$=void 0,le}));return T._loader$=new CA(J,()=>new Y).pipe(e2()),T._loader$}loadModuleFactory(b){return Ku(b()).pipe(Ee(T=>T instanceof hb?Ua(T):Mt(this.compiler.compileModuleAsync(T))))}}class xE{shouldProcessUrl(b){return!0}extract(b){return b}merge(b,T){return b}}function bE(v){throw v}function _E(v,b,T){return b.parse("/")}function $2(v,b){return Ua(null)}const wE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ql=(()=>{class v{constructor(T,z,J,le,be,Oe,Ye){this.rootComponentType=T,this.urlSerializer=z,this.rootContexts=J,this.location=le,this.config=Ye,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Y,this.errorHandler=bE,this.malformedUriErrorHandler=_E,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:$2,afterPreactivation:$2},this.urlHandlingStrategy=new xE,this.routeReuseStrategy=new vE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=be.get(wc),this.console=be.get(Zb);const en=be.get(Zs);this.isNgZoneEnabled=en instanceof Zs&&Zs.isInAngularZone(),this.resetConfig(Ye),this.currentUrlTree=function XA(){return new ah(new ro([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new X2(be,Oe,An=>this.triggerEvent(new a2(An)),An=>this.triggerEvent(new o2(An))),this.routerState=M2(this.currentUrlTree,this.rootComponentType),this.transitions=new Su({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var T;return null===(T=this.location.getState())||void 0===T?void 0:T.\u0275routerPageId}setupNavigations(T){const z=this.events;return T.pipe(cd(J=>0!==J.id),re(J=>Object.assign(Object.assign({},J),{extractedUrl:this.urlHandlingStrategy.extract(J.rawUrl)})),ih(J=>{let le=!1,be=!1;return Ua(J).pipe(Jl(Oe=>{this.currentNavigation={id:Oe.id,initialUrl:Oe.currentRawUrl,extractedUrl:Oe.extractedUrl,trigger:Oe.source,extras:Oe.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ih(Oe=>{const Ye=this.browserUrlTree.toString(),ct=!this.navigated||Oe.extractedUrl.toString()!==Ye||Ye!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ct)&&this.urlHandlingStrategy.shouldProcessUrl(Oe.rawUrl))return zg(Oe.source)&&(this.browserUrlTree=Oe.extractedUrl),Ua(Oe).pipe(ih(en=>{const An=this.transitions.getValue();return z.next(new ty(en.id,this.serializeUrl(en.extractedUrl),en.source,en.restoredState)),An!==this.transitions.getValue()?je:Promise.resolve(en)}),function q6(v,b,T,z){return ih(J=>function U6(v,b,T,z,J){return new V6(v,b,T,z,J).apply()}(v,b,T,J.extractedUrl,z).pipe(re(le=>Object.assign(Object.assign({},J),{urlAfterRedirects:le}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Jl(en=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:en.urlAfterRedirects})}),function cE(v,b,T,z,J){return Ee(le=>function aE(v,b,T,z,J="emptyOnly",le="legacy"){try{const be=new oE(v,b,T,z,J,le).recognize();return null===be?H2(new iE):Ua(be)}catch(be){return H2(be)}}(v,b,le.urlAfterRedirects,T(le.urlAfterRedirects),z,J).pipe(re(be=>Object.assign(Object.assign({},le),{targetSnapshot:be}))))}(this.rootComponentType,this.config,en=>this.serializeUrl(en),this.paramsInheritanceStrategy,this.relativeLinkResolution),Jl(en=>{if("eager"===this.urlUpdateStrategy){if(!en.extras.skipLocationChange){const zn=this.urlHandlingStrategy.merge(en.urlAfterRedirects,en.rawUrl);this.setBrowserUrl(zn,en)}this.browserUrlTree=en.urlAfterRedirects}const An=new FA(en.id,this.serializeUrl(en.extractedUrl),this.serializeUrl(en.urlAfterRedirects),en.targetSnapshot);z.next(An)}));if(ct&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:An,extractedUrl:zn,source:gr,restoredState:Xr,extras:ui}=Oe,gi=new ty(An,this.serializeUrl(zn),gr,Xr);z.next(gi);const Gr=M2(zn,this.rootComponentType).snapshot;return Ua(Object.assign(Object.assign({},Oe),{targetSnapshot:Gr,urlAfterRedirects:zn,extras:Object.assign(Object.assign({},ui),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Oe.rawUrl,Oe.resolve(null),je}),gy(Oe=>{const{targetSnapshot:Ye,id:ct,extractedUrl:Nt,rawUrl:en,extras:{skipLocationChange:An,replaceUrl:zn}}=Oe;return this.hooks.beforePreactivation(Ye,{navigationId:ct,appliedUrlTree:Nt,rawUrlTree:en,skipLocationChange:!!An,replaceUrl:!!zn})}),Jl(Oe=>{const Ye=new zA(Oe.id,this.serializeUrl(Oe.extractedUrl),this.serializeUrl(Oe.urlAfterRedirects),Oe.targetSnapshot);this.triggerEvent(Ye)}),re(Oe=>Object.assign(Object.assign({},Oe),{guards:G6(Oe.targetSnapshot,Oe.currentSnapshot,this.rootContexts)})),function $6(v,b){return Ee(T=>{const{targetSnapshot:z,currentSnapshot:J,guards:{canActivateChecks:le,canDeactivateChecks:be}}=T;return 0===be.length&&0===le.length?Ua(Object.assign(Object.assign({},T),{guardsResult:!0})):function K6(v,b,T,z){return Mt(v).pipe(Ee(J=>function rE(v,b,T,z,J){const le=b&&b.routeConfig?b.routeConfig.canDeactivate:null;return le&&0!==le.length?Ua(le.map(Oe=>{const Ye=Fg(Oe,b,J);let ct;if(function D6(v){return v&&cf(v.canDeactivate)}(Ye))ct=Ku(Ye.canDeactivate(v,b,T,z));else{if(!cf(Ye))throw new Error("Invalid CanDeactivate guard");ct=Ku(Ye(v,b,T,z))}return ct.pipe(fd())})).pipe(Dp()):Ua(!0)}(J.component,J.route,T,b,z)),fd(J=>!0!==J,!0))}(be,z,J,v).pipe(Ee(Oe=>Oe&&function A6(v){return"boolean"==typeof v}(Oe)?function J6(v,b,T,z){return Mt(b).pipe(Tp(J=>Qv(function eE(v,b){return null!==v&&b&&b(new UA(v)),Ua(!0)}(J.route.parent,z),function Q6(v,b){return null!==v&&b&&b(new HA(v)),Ua(!0)}(J.route,z),function nE(v,b,T){const z=b[b.length-1],le=b.slice(0,b.length-1).reverse().map(be=>function Y6(v){const b=v.routeConfig?v.routeConfig.canActivateChild:null;return b&&0!==b.length?{node:v,guards:b}:null}(be)).filter(be=>null!==be).map(be=>Q_(()=>Ua(be.guards.map(Ye=>{const ct=Fg(Ye,be.node,T);let Nt;if(function C6(v){return v&&cf(v.canActivateChild)}(ct))Nt=Ku(ct.canActivateChild(z,v));else{if(!cf(ct))throw new Error("Invalid CanActivateChild guard");Nt=Ku(ct(z,v))}return Nt.pipe(fd())})).pipe(Dp())));return Ua(le).pipe(Dp())}(v,J.path,T),function tE(v,b,T){const z=b.routeConfig?b.routeConfig.canActivate:null;if(!z||0===z.length)return Ua(!0);const J=z.map(le=>Q_(()=>{const be=Fg(le,b,T);let Oe;if(function S6(v){return v&&cf(v.canActivate)}(be))Oe=Ku(be.canActivate(b,v));else{if(!cf(be))throw new Error("Invalid CanActivate guard");Oe=Ku(be(b,v))}return Oe.pipe(fd())}));return Ua(J).pipe(Dp())}(v,J.route,T))),fd(J=>!0!==J,!0))}(z,le,v,b):Ua(Oe)),re(Oe=>Object.assign(Object.assign({},T),{guardsResult:Oe})))})}(this.ngModule.injector,Oe=>this.triggerEvent(Oe)),Jl(Oe=>{if(sh(Oe.guardsResult)){const ct=ny(`Redirecting to "${this.serializeUrl(Oe.guardsResult)}"`);throw ct.url=Oe.guardsResult,ct}const Ye=new NA(Oe.id,this.serializeUrl(Oe.extractedUrl),this.serializeUrl(Oe.urlAfterRedirects),Oe.targetSnapshot,!!Oe.guardsResult);this.triggerEvent(Ye)}),cd(Oe=>!!Oe.guardsResult||(this.restoreHistory(Oe),this.cancelNavigationTransition(Oe,""),!1)),gy(Oe=>{if(Oe.guards.canActivateChecks.length)return Ua(Oe).pipe(Jl(Ye=>{const ct=new BA(Ye.id,this.serializeUrl(Ye.extractedUrl),this.serializeUrl(Ye.urlAfterRedirects),Ye.targetSnapshot);this.triggerEvent(ct)}),ih(Ye=>{let ct=!1;return Ua(Ye).pipe(function fE(v,b){return Ee(T=>{const{targetSnapshot:z,guards:{canActivateChecks:J}}=T;if(!J.length)return Ua(T);let le=0;return Mt(J).pipe(Tp(be=>function hE(v,b,T,z){return function dE(v,b,T,z){const J=Object.keys(v);if(0===J.length)return Ua({});const le={};return Mt(J).pipe(Ee(be=>function pE(v,b,T,z){const J=Fg(v,b,z);return Ku(J.resolve?J.resolve(b,T):J(b,T))}(v[be],b,T,z).pipe(Jl(Oe=>{le[be]=Oe}))),ey(1),Ee(()=>Object.keys(le).length===J.length?Ua(le):je))}(v._resolve,v,b,z).pipe(re(le=>(v._resolvedData=le,v.data=Object.assign(Object.assign({},v.data),k2(v,T).resolve),null)))}(be.route,z,v,b)),Jl(()=>le++),ey(1),Ee(be=>le===J.length?Ua(T):je))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Jl({next:()=>ct=!0,complete:()=>{ct||(this.restoreHistory(Ye),this.cancelNavigationTransition(Ye,"At least one route resolver didn't emit any value."))}}))}),Jl(Ye=>{const ct=new jA(Ye.id,this.serializeUrl(Ye.extractedUrl),this.serializeUrl(Ye.urlAfterRedirects),Ye.targetSnapshot);this.triggerEvent(ct)}))}),gy(Oe=>{const{targetSnapshot:Ye,id:ct,extractedUrl:Nt,rawUrl:en,extras:{skipLocationChange:An,replaceUrl:zn}}=Oe;return this.hooks.afterPreactivation(Ye,{navigationId:ct,appliedUrlTree:Nt,rawUrlTree:en,skipLocationChange:!!An,replaceUrl:!!zn})}),re(Oe=>{const Ye=function d6(v,b,T){const z=Ep(v,b._root,T?T._root:void 0);return new T2(z,b)}(this.routeReuseStrategy,Oe.targetSnapshot,Oe.currentRouterState);return Object.assign(Object.assign({},Oe),{targetRouterState:Ye})}),Jl(Oe=>{this.currentUrlTree=Oe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Oe.urlAfterRedirects,Oe.rawUrl),this.routerState=Oe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Oe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Oe),this.browserUrlTree=Oe.urlAfterRedirects)}),((v,b,T)=>re(z=>(new M6(b,z.targetRouterState,z.currentRouterState,T).activate(v),z)))(this.rootContexts,this.routeReuseStrategy,Oe=>this.triggerEvent(Oe)),Jl({next(){le=!0},complete(){le=!0}}),function OA(v){return X((b,T)=>{try{b.subscribe(T)}finally{T.add(v)}})}(()=>{var Oe;le||be||this.cancelNavigationTransition(J,`Navigation ID ${J.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Oe=this.currentNavigation)||void 0===Oe?void 0:Oe.id)===J.id&&(this.currentNavigation=null)}),uf(Oe=>{if(be=!0,function YA(v){return v&&v[l2]}(Oe)){const Ye=sh(Oe.url);Ye||(this.navigated=!0,this.restoreHistory(J,!0));const ct=new i2(J.id,this.serializeUrl(J.extractedUrl),Oe.message);z.next(ct),Ye?setTimeout(()=>{const Nt=this.urlHandlingStrategy.merge(Oe.url,this.rawUrlTree),en={skipLocationChange:J.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||zg(J.source)};this.scheduleNavigation(Nt,"imperative",null,en,{resolve:J.resolve,reject:J.reject,promise:J.promise})},0):J.resolve(!1)}else{this.restoreHistory(J,!0);const Ye=new RA(J.id,this.serializeUrl(J.extractedUrl),Oe);z.next(Ye);try{J.resolve(this.errorHandler(Oe))}catch(ct){J.reject(ct)}}return je}))}))}resetRootComponentType(T){this.rootComponentType=T,this.routerState.root.component=this.rootComponentType}setTransition(T){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),T))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const z="popstate"===T.type?"popstate":"hashchange";"popstate"===z&&setTimeout(()=>{var J;const le={replaceUrl:!0},be=(null===(J=T.state)||void 0===J?void 0:J.navigationId)?T.state:null;if(be){const Ye=Object.assign({},be);delete Ye.navigationId,delete Ye.\u0275routerPageId,0!==Object.keys(Ye).length&&(le.state=Ye)}const Oe=this.parseUrl(T.url);this.scheduleNavigation(Oe,z,be,le)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(T){this.events.next(T)}resetConfig(T){R2(T),this.config=T.map(dy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,z={}){const{relativeTo:J,queryParams:le,fragment:be,queryParamsHandling:Oe,preserveFragment:Ye}=z,ct=J||this.routerState.root,Nt=Ye?this.currentUrlTree.fragment:be;let en=null;switch(Oe){case"merge":en=Object.assign(Object.assign({},this.currentUrlTree.queryParams),le);break;case"preserve":en=this.currentUrlTree.queryParams;break;default:en=le||null}return null!==en&&(en=this.removeEmptyProps(en)),function m6(v,b,T,z,J){if(0===T.length)return uy(b.root,b.root,b,z,J);const le=function v6(v){if("string"==typeof v[0]&&1===v.length&&"/"===v[0])return new C2(!0,0,v);let b=0,T=!1;const z=v.reduce((J,le,be)=>{if("object"==typeof le&&null!=le){if(le.outlets){const Oe={};return pl(le.outlets,(Ye,ct)=>{Oe[ct]="string"==typeof Ye?Ye.split("/"):Ye}),[...J,{outlets:Oe}]}if(le.segmentPath)return[...J,le.segmentPath]}return"string"!=typeof le?[...J,le]:0===be?(le.split("/").forEach((Oe,Ye)=>{0==Ye&&"."===Oe||(0==Ye&&""===Oe?T=!0:".."===Oe?b++:""!=Oe&&J.push(Oe))}),J):[...J,le]},[]);return new C2(T,b,z)}(T);if(le.toRoot())return uy(b.root,new ro([],{}),b,z,J);const be=function y6(v,b,T){if(v.isAbsolute)return new cy(b.root,!0,0);if(-1===T.snapshot._lastPathIndex){const le=T.snapshot._urlSegment;return new cy(le,le===b.root,0)}const z=Cg(v.commands[0])?0:1;return function x6(v,b,T){let z=v,J=b,le=T;for(;le>J;){if(le-=J,z=z.parent,!z)throw new Error("Invalid number of '../'");J=z.segments.length}return new cy(z,!1,J-le)}(T.snapshot._urlSegment,T.snapshot._lastPathIndex+z,v.numberOfDoubleDots)}(le,b,v),Oe=be.processChildren?Dg(be.segmentGroup,be.index,le.commands):D2(be.segmentGroup,be.index,le.commands);return uy(be.segmentGroup,Oe,b,z,J)}(ct,this.currentUrlTree,T,en,null!=Nt?Nt:null)}navigateByUrl(T,z={skipLocationChange:!1}){const J=sh(T)?T:this.parseUrl(T),le=this.urlHandlingStrategy.merge(J,this.rawUrlTree);return this.scheduleNavigation(le,"imperative",null,z)}navigate(T,z={skipLocationChange:!1}){return function ME(v){for(let b=0;b<v.length;b++){const T=v[b];if(null==T)throw new Error(`The requested path contains ${T} segment at index ${b}`)}}(T),this.navigateByUrl(this.createUrlTree(T,z),z)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let z;try{z=this.urlSerializer.parse(T)}catch(J){z=this.malformedUriErrorHandler(J,this.urlSerializer,T)}return z}isActive(T,z){let J;if(J=!0===z?Object.assign({},wE):!1===z?Object.assign({},TE):z,sh(T))return d2(this.currentUrlTree,T,J);const le=this.parseUrl(T);return d2(this.currentUrlTree,le,J)}removeEmptyProps(T){return Object.keys(T).reduce((z,J)=>{const le=T[J];return null!=le&&(z[J]=le),z},{})}processNavigations(){this.navigations.subscribe(T=>{this.navigated=!0,this.lastSuccessfulId=T.id,this.currentPageId=T.targetPageId,this.events.next(new Mp(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,T.resolve(!0)},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)})}scheduleNavigation(T,z,J,le,be){var Oe,Ye,ct;if(this.disposed)return Promise.resolve(!1);const Nt=this.transitions.value,en=zg(z)&&Nt&&!zg(Nt.source),An=Nt.rawUrl.toString()===T.toString(),zn=Nt.id===(null===(Oe=this.currentNavigation)||void 0===Oe?void 0:Oe.id);if(en&&An&&zn)return Promise.resolve(!0);let Xr,ui,gi;be?(Xr=be.resolve,ui=be.reject,gi=be.promise):gi=new Promise((_a,lo)=>{Xr=_a,ui=lo});const Gr=++this.navigationId;let Ni;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(J=this.location.getState()),Ni=J&&J.\u0275routerPageId?J.\u0275routerPageId:le.replaceUrl||le.skipLocationChange?null!==(Ye=this.browserPageId)&&void 0!==Ye?Ye:0:(null!==(ct=this.browserPageId)&&void 0!==ct?ct:0)+1):Ni=0,this.setTransition({id:Gr,targetPageId:Ni,source:z,restoredState:J,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:T,extras:le,resolve:Xr,reject:ui,promise:gi,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),gi.catch(_a=>Promise.reject(_a))}setBrowserUrl(T,z){const J=this.urlSerializer.serialize(T),le=Object.assign(Object.assign({},z.extras.state),this.generateNgRouterState(z.id,z.targetPageId));this.location.isCurrentPathEqualTo(J)||z.extras.replaceUrl?this.location.replaceState(J,"",le):this.location.go(J,"",le)}restoreHistory(T,z=!1){var J,le;if("computed"===this.canceledNavigationResolution){const be=this.currentPageId-T.targetPageId;"popstate"!==T.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(J=this.currentNavigation)||void 0===J?void 0:J.finalUrl)||0===be?this.currentUrlTree===(null===(le=this.currentNavigation)||void 0===le?void 0:le.finalUrl)&&0===be&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(be)}else"replace"===this.canceledNavigationResolution&&(z&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(T,z){const J=new i2(T.id,this.serializeUrl(T.extractedUrl),z);this.triggerEvent(J),T.resolve(!1)}generateNgRouterState(T,z){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:z}:{navigationId:T}}}return v.\u0275fac=function(T){Um()},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})();function zg(v){return"imperative"!==v}class K2{}class J2{preload(b,T){return Ua(null)}}let Q2=(()=>{class v{constructor(T,z,J,le){this.router=T,this.injector=J,this.preloadingStrategy=le,this.loader=new X2(J,z,Ye=>T.triggerEvent(new a2(Ye)),Ye=>T.triggerEvent(new o2(Ye)))}setUpPreloading(){this.subscription=this.router.events.pipe(cd(T=>T instanceof Mp),Tp(()=>this.preload())).subscribe(()=>{})}preload(){const T=this.injector.get(wc);return this.processRoutes(T,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,z){const J=[];for(const le of z)if(le.loadChildren&&!le.canLoad&&le._loadedConfig){const be=le._loadedConfig;J.push(this.processRoutes(be.module,be.routes))}else le.loadChildren&&!le.canLoad?J.push(this.preloadConfig(T,le)):le.children&&J.push(this.processRoutes(T,le.children));return Mt(J).pipe(Se(),re(le=>{}))}preloadConfig(T,z){return this.preloadingStrategy.preload(z,()=>(z._loadedConfig?Ua(z._loadedConfig):this.loader.load(T.injector,z)).pipe(Ee(le=>(z._loadedConfig=le,this.processRoutes(le.module,le.routes)))))}}return v.\u0275fac=function(T){return new(T||v)(da(Ql),da(ag),da(Al),da(K2))},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})(),xy=(()=>{class v{constructor(T,z,J={}){this.router=T,this.viewportScroller=z,this.options=J,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},J.scrollPositionRestoration=J.scrollPositionRestoration||"disabled",J.anchorScrolling=J.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(T=>{T instanceof ty?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof Mp&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.router.parseUrl(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(T=>{T instanceof s2&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,z){this.router.triggerEvent(new s2(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,z))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return v.\u0275fac=function(T){Um()},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})();const lh=new Za("ROUTER_CONFIGURATION"),ew=new Za("ROUTER_FORROOT_GUARD"),SE=[Pv,{provide:v2,useClass:y2},{provide:Ql,useFactory:function PE(v,b,T,z,J,le,be={},Oe,Ye){const ct=new Ql(null,v,b,T,z,J,c2(le));return Oe&&(ct.urlHandlingStrategy=Oe),Ye&&(ct.routeReuseStrategy=Ye),function OE(v,b){v.errorHandler&&(b.errorHandler=v.errorHandler),v.malformedUriErrorHandler&&(b.malformedUriErrorHandler=v.malformedUriErrorHandler),v.onSameUrlNavigation&&(b.onSameUrlNavigation=v.onSameUrlNavigation),v.paramsInheritanceStrategy&&(b.paramsInheritanceStrategy=v.paramsInheritanceStrategy),v.relativeLinkResolution&&(b.relativeLinkResolution=v.relativeLinkResolution),v.urlUpdateStrategy&&(b.urlUpdateStrategy=v.urlUpdateStrategy),v.canceledNavigationResolution&&(b.canceledNavigationResolution=v.canceledNavigationResolution)}(be,ct),be.enableTracing&&ct.events.subscribe(Nt=>{var en,An;null===(en=console.group)||void 0===en||en.call(console,`Router Event: ${Nt.constructor.name}`),console.log(Nt.toString()),console.log(Nt),null===(An=console.groupEnd)||void 0===An||An.call(console)}),ct},deps:[v2,Lp,Pv,Al,ag,my,lh,[class yE{},new xl],[class gE{},new xl]]},Lp,{provide:pd,useFactory:function RE(v){return v.routerState.root},deps:[Ql]},Q2,J2,class EE{preload(b,T){return T().pipe(uf(()=>Ua(null)))}},{provide:lh,useValue:{enableTracing:!1}}];function CE(){return new e_("Router",Ql)}let tw=(()=>{class v{constructor(T,z){}static forRoot(T,z){return{ngModule:v,providers:[SE,nw(T),{provide:ew,useFactory:IE,deps:[[Ql,new xl,new Nc]]},{provide:lh,useValue:z||{}},{provide:ud,useFactory:LE,deps:[rh,[new oc(Iv),new xl],lh]},{provide:xy,useFactory:DE,deps:[Ql,Lk,lh]},{provide:K2,useExisting:z&&z.preloadingStrategy?z.preloadingStrategy:J2},{provide:e_,multi:!0,useFactory:CE},[by,{provide:ig,multi:!0,useFactory:FE,deps:[by]},{provide:rw,useFactory:zE,deps:[by]},{provide:Wb,multi:!0,useExisting:rw}]]}}static forChild(T){return{ngModule:v,providers:[nw(T)]}}}return v.\u0275fac=function(T){return new(T||v)(da(ew,8),da(Ql,8))},v.\u0275mod=ys({type:v}),v.\u0275inj=Cn({}),v})();function DE(v,b,T){return T.scrollOffset&&b.setOffset(T.scrollOffset),new xy(v,b,T)}function LE(v,b,T={}){return T.useHash?new h4(v,b):new w_(v,b)}function IE(v){return"guarded"}function nw(v){return[{provide:nc,multi:!0,useValue:v},{provide:my,multi:!0,useValue:v}]}let by=(()=>{class v{constructor(T){this.injector=T,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Y}appInitializer(){return this.injector.get(u4,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let z=null;const J=new Promise(Oe=>z=Oe),le=this.injector.get(Ql),be=this.injector.get(lh);return"disabled"===be.initialNavigation?(le.setUpLocationChangeListener(),z(!0)):"enabled"===be.initialNavigation||"enabledBlocking"===be.initialNavigation?(le.hooks.afterPreactivation=()=>this.initNavigation?Ua(null):(this.initNavigation=!0,z(!0),this.resultOfPreactivationDone),le.initialNavigation()):z(!0),J})}bootstrapListener(T){const z=this.injector.get(lh),J=this.injector.get(Q2),le=this.injector.get(xy),be=this.injector.get(Ql),Oe=this.injector.get(vp);T===Oe.components[0]&&(("enabledNonBlocking"===z.initialNavigation||void 0===z.initialNavigation)&&be.initialNavigation(),J.setUpPreloading(),le.init(),be.resetRootComponentType(Oe.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return v.\u0275fac=function(T){return new(T||v)(da(Al))},v.\u0275prov=Pn({token:v,factory:v.\u0275fac}),v})();function FE(v){return v.appInitializer.bind(v)}function zE(v){return v.bootstrapListener.bind(v)}const rw=new Za("Router Initializer"),BE=[];let jE=(()=>{class v{}return v.\u0275fac=function(T){return new(T||v)},v.\u0275mod=ys({type:v}),v.\u0275inj=Cn({imports:[[tw.forRoot(BE)],tw]}),v})();function aw(v,b,T,z){return new(T||(T=Promise))(function(le,be){function Oe(Nt){try{ct(z.next(Nt))}catch(en){be(en)}}function Ye(Nt){try{ct(z.throw(Nt))}catch(en){be(en)}}function ct(Nt){Nt.done?le(Nt.value):function J(le){return le instanceof T?le:new T(function(be){be(le)})}(Nt.value).then(Oe,Ye)}ct((z=z.apply(v,b||[])).next())})}const HE=["plot"],qE=["*"];class io{static setModuleName(b){io.moduleName=b}static getModuleName(){return io.moduleName}static setPlotly(b){if("object"==typeof b&&"function"!=typeof b.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");io.plotly=b}static insert(b){return-1===io.instances.indexOf(b)&&io.instances.push(b),b}static remove(b){const T=io.instances.indexOf(b);T>=0&&(io.instances.splice(T,1),io.plotly.purge(b))}getInstanceByDivId(b){for(const T of io.instances)if(T&&T.id===b)return T}getPlotly(){return aw(this,void 0,void 0,function*(){return yield this.waitFor(()=>"waiting"!==this._getPlotly()),this._getPlotly()})}_getPlotly(){if(void 0===io.plotly)throw new Error("ViaCDN"===io.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return io.plotly}waitFor(b){return new Promise(T=>{const z=()=>{b()?T():setTimeout(z,10)};z()})}newPlot(b,T,z,J,le){return aw(this,void 0,void 0,function*(){if(yield this.waitFor(()=>"waiting"!==this._getPlotly()),le){const be={data:T,layout:z,config:J,frames:le};return this._getPlotly().newPlot(b,be).then(()=>io.insert(b))}return this._getPlotly().newPlot(b,T,z,J).then(()=>io.insert(b))})}plot(b,T,z,J,le){if(le){const be={data:T,layout:z,config:J,frames:le};return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(b,be):this._getPlotly().newPlot(b,be)}return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(b,T,z,J):this._getPlotly().newPlot(b,T,z,J)}update(b,T,z,J,le){if(le){const be={data:T,layout:z,config:J,frames:le};return this._getPlotly().react(b,be)}return this._getPlotly().react(b,T,z,J)}resize(b){return this._getPlotly().Plots.resize(b)}}io.\u0275fac=function(b){return new(b||io)},io.instances=[],io.plotly=void 0,io.moduleName=void 0,io.\u0275prov=Pn({factory:function(){return new io},token:io,providedIn:"root"});let GE=(()=>{class v{constructor(T,z,J){this.plotly=T,this.iterableDiffers=z,this.keyValueDiffers=J,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new ua,this.update=new ua,this.purge=new ua,this.error=new ua,this.afterExport=new ua,this.afterPlot=new ua,this.animated=new ua,this.animatingFrame=new ua,this.animationInterrupted=new ua,this.autoSize=new ua,this.beforeExport=new ua,this.buttonClicked=new ua,this.click=new ua,this.plotlyClick=new ua,this.clickAnnotation=new ua,this.deselect=new ua,this.doubleClick=new ua,this.framework=new ua,this.hover=new ua,this.legendClick=new ua,this.legendDoubleClick=new ua,this.react=new ua,this.relayout=new ua,this.restyle=new ua,this.redraw=new ua,this.selected=new ua,this.selecting=new ua,this.sliderChange=new ua,this.sliderEnd=new ua,this.sliderStart=new ua,this.transitioning=new ua,this.transitionInterrupted=new ua,this.unhover=new ua,this.relayouting=new ua,this.treemapclick=new ua,this.sunburstclick=new ua,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover","relayouting","treemapclick","sunburstclick"]}ngOnInit(){this.createPlot().then(()=>{const T=this.createFigure();this.initialized.emit(T)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);const T=this.createFigure();this.purge.emit(T),io.remove(this.plotlyInstance)}ngOnChanges(T){let z=!1;const J=T.revision;J&&!J.isFirstChange()&&(z=!0);const le=T.debug;le&&!le.isFirstChange()&&(z=!0),z&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let T=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(T=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(T=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),T&&this.plotlyInstance&&this.updatePlot()}getWindow(){return window}getClassName(){let T=[this.defaultClassName];return Array.isArray(this.className)?T=T.concat(this.className):this.className&&T.push(this.className),T.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then(T=>{this.plotlyInstance=T,this.getWindow().gd=this.debug?T:void 0,this.eventNames.forEach(z=>{const J=`plotly_${z.toLowerCase()}`;T.on(J,le=>this[z].emit(le))}),T.on("plotly_click",z=>{this.click.emit(z),this.plotlyClick.emit(z)}),this.updateWindowResizeHandler()},T=>{console.error("Error while plotting:",T),this.error.emit(T)})}createFigure(){const T=this.plotlyInstance;return{data:T.data,layout:T.layout,frames:T._transitionData?T._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const z=new Error("Plotly component wasn't initialized");throw this.error.emit(z),z}const T=Object.assign({},this.layout);return this.plotly.update(this.plotlyInstance,this.data,T,this.config,this.frames).then(()=>{const z=this.createFigure();this.update.emit(z)},z=>{console.error("Error while updating plot:",z),this.error.emit(z)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(T,z){const J=Object.assign({},z,{uid:""});return JSON.stringify(J)}}return v.\u0275fac=function(T){return new(T||v)(ea(io),ea(ld),ea(nh))},v.\u0275cmp=$s({type:v,selectors:[["plotly-plot"]],viewQuery:function(T,z){if(1&T&&Ab(HE,7),2&T){let J;Q0(J=function eg(){return function $T(v,b){return v[19].queries[b].queryList}(Zr(),N())}())&&(z.plotEl=J.first)}},inputs:{revision:"revision",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision",data:"data",layout:"layout",config:"config",frames:"frames",style:"style",divId:"divId",className:"className"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",relayouting:"relayouting",treemapclick:"treemapclick",sunburstclick:"sunburstclick"},features:[ob([io]),lr],ngContentSelectors:qE,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(T,z){1&T&&(function U1(v){const b=Zr()[16][6];if(!b.projection){const z=b.projection=hf(v?v.length:1,null),J=z.slice();let le=b.child;for(;null!==le;){const be=v?y3(le,v):0;null!==be&&(J[be]?J[be].projectionNext=le:z[be]=le,J[be]=le),le=le.next}}}(),Hm(0,"div",0,1),function V1(v,b=0,T){const z=Zr(),J=la(),le=xu(J,20+v,16,null,T||null);null===le.projection&&(le.projection=b),xo(),64!=(64&le.flags)&&function Gi(v,b,T){Ea(b[11],0,b,T,Dn(v,T,b),ai(T.parent||b[6],T,b))}(J,z,le)}(2),qm()),2&T&&(B0("ngClass",z.getClassName())("ngStyle",z.style),z0("id",z.divId))},directives:[I_,F_],encapsulation:2}),v})(),md=(()=>{class v{constructor(){}}return v.\u0275fac=function(T){return new(T||v)},v.\u0275mod=ys({type:v}),v.\u0275inj=Cn({providers:[io],imports:[[bp]]}),v})(),lw=(()=>{class v{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");io.setPlotly(v.plotlyjs)}isValid(){return void 0!==v.plotlyjs&&("function"==typeof v.plotlyjs.plot||"function"==typeof v.plotlyjs.newPlot)}}return v.\u0275fac=function(T){return new(T||v)},v.\u0275mod=ys({type:v}),v.\u0275inj=Cn({providers:[io],imports:[[bp,md],md]}),v.plotlyjs={},v})(),YE=(()=>{class v{constructor(){this.graph={data:[{x:[1,2,3],y:[2,6,3],type:"scatter",mode:"lines+points",marker:{color:"red"}},{x:[1,2,3],y:[2,5,3],type:"bar"}],layout:{width:320,height:240,title:"A Fancy Plot"}}}ngOnInit(){}}return v.\u0275fac=function(T){return new(T||v)},v.\u0275cmp=$s({type:v,selectors:[["app-plotly-example"]],decls:1,vars:2,consts:[[3,"data","layout"]],template:function(T,z){1&T&&j0(0,"plotly-plot",0),2&T&&B0("data",z.graph.data)("layout",z.graph.layout)},directives:[GE],styles:[""]}),v})(),WE=(()=>{class v{constructor(){this.title="angular-plotly"}}return v.\u0275fac=function(T){return new(T||v)},v.\u0275cmp=$s({type:v,selectors:[["app-root"]],decls:1,vars:0,template:function(T,z){1&T&&j0(0,"app-plotly-example")},directives:[YE],styles:[""]}),v})();var ZE=oe(102);lw.plotlyjs=ZE;let XE=(()=>{class v{}return v.\u0275fac=function(T){return new(T||v)},v.\u0275mod=ys({type:v,bootstrap:[WE]}),v.\u0275inj=Cn({providers:[],imports:[[aA,jE,lw]]}),v})();(function OM(){o_=!1})(),rA().bootstrapModule(XE).catch(v=>console.error(v))},102:vd=>{vd.exports=function x(oe,ae,g){function m(e,r){if(!ae[e]){if(!oe[e]){if(w)return w(e,!0);var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}var t=ae[e]={exports:{}};oe[e][0].call(t.exports,function(p){return m(oe[e][1][p]||p)},t,t.exports,x,oe,ae,g)}return ae[e].exports}for(var w=void 0,y=0;y<g.length;y++)m(g[y]);return m}({1:[function(x,oe,ae){"use strict";var g=x("../src/lib"),m={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var w in m){var y=w.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");g.addStyleRule(y,m[w])}},{"../src/lib":503}],2:[function(x,oe,ae){"use strict";oe.exports=x("../src/transforms/aggregate")},{"../src/transforms/aggregate":1118}],3:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/box")},{"../src/traces/box":679}],6:[function(x,oe,ae){"use strict";oe.exports=x("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(x,oe,ae){"use strict";oe.exports=x("../src/core")},{"../src/core":481}],15:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(x,oe,ae){"use strict";oe.exports=x("../src/transforms/filter")},{"../src/transforms/filter":1119}],17:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(x,oe,ae){"use strict";oe.exports=x("../src/transforms/groupby")},{"../src/transforms/groupby":1120}],20:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/image")},{"../src/traces/image":852}],27:[function(x,oe,ae){"use strict";var g=x("./core");g.register([x("./bar"),x("./box"),x("./heatmap"),x("./histogram"),x("./histogram2d"),x("./histogram2dcontour"),x("./contour"),x("./scatterternary"),x("./violin"),x("./funnel"),x("./waterfall"),x("./image"),x("./pie"),x("./sunburst"),x("./treemap"),x("./icicle"),x("./funnelarea"),x("./scatter3d"),x("./surface"),x("./isosurface"),x("./volume"),x("./mesh3d"),x("./cone"),x("./streamtube"),x("./scattergeo"),x("./choropleth"),x("./scattergl"),x("./splom"),x("./pointcloud"),x("./heatmapgl"),x("./parcoords"),x("./parcats"),x("./scattermapbox"),x("./choroplethmapbox"),x("./densitymapbox"),x("./sankey"),x("./indicator"),x("./table"),x("./carpet"),x("./scattercarpet"),x("./contourcarpet"),x("./ohlc"),x("./candlestick"),x("./scatterpolar"),x("./scatterpolargl"),x("./barpolar"),x("./scattersmith"),x("./aggregate"),x("./filter"),x("./groupby"),x("./sort"),x("./calendars")]),oe.exports=g},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/parcoords")},{"../src/traces/parcoords":896}],34:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/pie")},{"../src/traces/pie":907}],35:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/pointcloud")},{"../src/traces/pointcloud":916}],36:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/sankey")},{"../src/traces/sankey":922}],37:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/scatter3d")},{"../src/traces/scatter3d":960}],38:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":967}],39:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/scattergeo")},{"../src/traces/scattergeo":975}],40:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/scattergl")},{"../src/traces/scattergl":989}],41:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":999}],42:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1007}],43:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1015}],44:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/scattersmith")},{"../src/traces/scattersmith":1022}],45:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/scatterternary")},{"../src/traces/scatterternary":1030}],46:[function(x,oe,ae){"use strict";oe.exports=x("../src/transforms/sort")},{"../src/transforms/sort":1122}],47:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/splom")},{"../src/traces/splom":1040}],48:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/streamtube")},{"../src/traces/streamtube":1048}],49:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/sunburst")},{"../src/traces/sunburst":1056}],50:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/surface")},{"../src/traces/surface":1065}],51:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/table")},{"../src/traces/table":1073}],52:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/treemap")},{"../src/traces/treemap":1084}],53:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/violin")},{"../src/traces/violin":1097}],54:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/volume")},{"../src/traces/volume":1105}],55:[function(x,oe,ae){"use strict";oe.exports=x("../src/traces/waterfall")},{"../src/traces/waterfall":1113}],56:[function(x,oe,ae){var g,m;g=this,m=function(g,m,w,y,e){"use strict";function r(se){return se.target.depth}function n(se,ue){return se.sourceLinks.length?se.depth:ue-1}function a(se){return function(){return se}}e=e&&e.hasOwnProperty("default")?e.default:e;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(se){return typeof se}:function(se){return se&&"function"==typeof Symbol&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se};function p(se,ue){return i(se.source,ue.source)||se.index-ue.index}function u(se,ue){return i(se.target,ue.target)||se.index-ue.index}function i(se,ue){return se.partOfCycle===ue.partOfCycle?se.y0-ue.y0:"top"===se.circularLinkType||"bottom"===ue.circularLinkType?-1:1}function c(se){return se.value}function f(se){return(se.y0+se.y1)/2}function l(se){return f(se.source)}function h(se){return f(se.target)}function d(se){return se.index}function o(se){return se.nodes}function _(se){return se.links}function s(se,ue){var de=se.get(ue);if(!de)throw new Error("missing: "+ue);return de}function k(se,ue){return ue(se)}function M(se,ue,de){var he=0;if(null===de){for(var xe=[],ge=0;ge<se.links.length;ge++){var _e=se.links[ge],Ce=_e.source.index,Le=_e.target.index;xe[Ce]||(xe[Ce]=[]),xe[Le]||(xe[Le]=[]),-1===xe[Ce].indexOf(Le)&&xe[Ce].push(Le)}var Ie=e(xe);Ie.sort(function(Te,Pe){return Te.length-Pe.length});var Be={};for(ge=0;ge<Ie.length;ge++){var ve=Ie[ge].slice(-2);Be[ve[0]]||(Be[ve[0]]={}),Be[ve[0]][ve[1]]=!0}se.links.forEach(function(Te){var Pe=Te.target.index,De=Te.source.index;Pe===De||Be[De]&&Be[De][Pe]?(Te.circular=!0,Te.circularLinkID=he,he+=1):Te.circular=!1})}else se.links.forEach(function(Te){Te.source[de]<Te.target[de]?Te.circular=!1:(Te.circular=!0,Te.circularLinkID=he,he+=1)})}function A(se,ue){var de=0,he=0;se.links.forEach(function(xe){xe.circular&&(xe.circularLinkType=xe.source.circularLinkType||xe.target.circularLinkType?xe.source.circularLinkType?xe.source.circularLinkType:xe.target.circularLinkType:de<he?"top":"bottom","top"==xe.circularLinkType?de+=1:he+=1,se.nodes.forEach(function(ge){k(ge,ue)!=k(xe.source,ue)&&k(ge,ue)!=k(xe.target,ue)||(ge.circularLinkType=xe.circularLinkType)}))}),se.links.forEach(function(xe){xe.circular&&(xe.source.circularLinkType==xe.target.circularLinkType&&(xe.circularLinkType=xe.source.circularLinkType),ee(xe,ue)&&(xe.circularLinkType=xe.source.circularLinkType))})}function E(se){var ue=Math.abs(se.y1-se.y0),de=Math.abs(se.target.x0-se.source.x1);return Math.atan(de/ue)}function I(se,ue){var de=0;se.sourceLinks.forEach(function(xe){de=xe.circular&&!ee(xe,ue)?de+1:de});var he=0;return se.targetLinks.forEach(function(xe){he=xe.circular&&!ee(xe,ue)?he+1:he}),de+he}function C(se){var de=0;se.source.sourceLinks.forEach(function(ge){de=ge.circular?de+1:de});var xe=0;return se.target.targetLinks.forEach(function(ge){xe=ge.circular?xe+1:xe}),!(de>1||xe>1)}function R(se,ue,de){return se.sort(D),se.forEach(function(he,xe){var ge,_e,Ce=0;if(ee(he,de)&&C(he))he.circularPathData.verticalBuffer=Ce+he.width/2;else{for(var Le=0;Le<xe;Le++)if(!((ge=se[xe]).source.column<(_e=se[Le]).target.column||ge.target.column>_e.source.column)){var Ie=se[Le].circularPathData.verticalBuffer+se[Le].width/2+ue;Ce=Ie>Ce?Ie:Ce}he.circularPathData.verticalBuffer=Ce+he.width/2}}),se}function O(se,ue,de,he){var xe=m.min(se.links,function(ge){return ge.source.y0});se.links.forEach(function(ge){ge.circular&&(ge.circularPathData={})}),R(se.links.filter(function(ge){return"top"==ge.circularLinkType}),ue,he),R(se.links.filter(function(ge){return"bottom"==ge.circularLinkType}),ue,he),se.links.forEach(function(ge){if(ge.circular){if(ge.circularPathData.arcRadius=ge.width+10,ge.circularPathData.leftNodeBuffer=5,ge.circularPathData.rightNodeBuffer=5,ge.circularPathData.sourceWidth=ge.source.x1-ge.source.x0,ge.circularPathData.sourceX=ge.source.x0+ge.circularPathData.sourceWidth,ge.circularPathData.targetX=ge.target.x0,ge.circularPathData.sourceY=ge.y0,ge.circularPathData.targetY=ge.y1,ee(ge,he)&&C(ge))ge.circularPathData.leftSmallArcRadius=10+ge.width/2,ge.circularPathData.leftLargeArcRadius=10+ge.width/2,ge.circularPathData.rightSmallArcRadius=10+ge.width/2,ge.circularPathData.rightLargeArcRadius=10+ge.width/2,"bottom"==ge.circularLinkType?(ge.circularPathData.verticalFullExtent=ge.source.y1+25+ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.rightLargeArcRadius):(ge.circularPathData.verticalFullExtent=ge.source.y0-25-ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.rightLargeArcRadius);else{var _e=ge.source.column,Ce=ge.circularLinkType,Le=se.links.filter(function(ve){return ve.source.column==_e&&ve.circularLinkType==Ce});Le.sort("bottom"==ge.circularLinkType?B:L);var Ie=0;Le.forEach(function(ve,Te){ve.circularLinkID==ge.circularLinkID&&(ge.circularPathData.leftSmallArcRadius=10+ge.width/2+Ie,ge.circularPathData.leftLargeArcRadius=10+ge.width/2+Te*ue+Ie),Ie+=ve.width}),_e=ge.target.column,(Le=se.links.filter(function(ve){return ve.target.column==_e&&ve.circularLinkType==Ce})).sort("bottom"==ge.circularLinkType?W:j),Ie=0,Le.forEach(function(ve,Te){ve.circularLinkID==ge.circularLinkID&&(ge.circularPathData.rightSmallArcRadius=10+ge.width/2+Ie,ge.circularPathData.rightLargeArcRadius=10+ge.width/2+Te*ue+Ie),Ie+=ve.width}),"bottom"==ge.circularLinkType?(ge.circularPathData.verticalFullExtent=Math.max(de,ge.source.y1,ge.target.y1)+25+ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.rightLargeArcRadius):(ge.circularPathData.verticalFullExtent=xe-25-ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.rightLargeArcRadius)}ge.circularPathData.leftInnerExtent=ge.circularPathData.sourceX+ge.circularPathData.leftNodeBuffer,ge.circularPathData.rightInnerExtent=ge.circularPathData.targetX-ge.circularPathData.rightNodeBuffer,ge.circularPathData.leftFullExtent=ge.circularPathData.sourceX+ge.circularPathData.leftLargeArcRadius+ge.circularPathData.leftNodeBuffer,ge.circularPathData.rightFullExtent=ge.circularPathData.targetX-ge.circularPathData.rightLargeArcRadius-ge.circularPathData.rightNodeBuffer}if(ge.circular)ge.path="top"==(ve=ge).circularLinkType?"M"+ve.circularPathData.sourceX+" "+ve.circularPathData.sourceY+" L"+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.sourceY+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftSmallArcRadius+" 0 0 0 "+ve.circularPathData.leftFullExtent+" "+(ve.circularPathData.sourceY-ve.circularPathData.leftSmallArcRadius)+" L"+ve.circularPathData.leftFullExtent+" "+ve.circularPathData.verticalLeftInnerExtent+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftLargeArcRadius+" 0 0 0 "+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.verticalFullExtent+" L"+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.verticalFullExtent+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightLargeArcRadius+" 0 0 0 "+ve.circularPathData.rightFullExtent+" "+ve.circularPathData.verticalRightInnerExtent+" L"+ve.circularPathData.rightFullExtent+" "+(ve.circularPathData.targetY-ve.circularPathData.rightSmallArcRadius)+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightSmallArcRadius+" 0 0 0 "+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.targetY+" L"+ve.circularPathData.targetX+" "+ve.circularPathData.targetY:"M"+ve.circularPathData.sourceX+" "+ve.circularPathData.sourceY+" L"+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.sourceY+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftSmallArcRadius+" 0 0 1 "+ve.circularPathData.leftFullExtent+" "+(ve.circularPathData.sourceY+ve.circularPathData.leftSmallArcRadius)+" L"+ve.circularPathData.leftFullExtent+" "+ve.circularPathData.verticalLeftInnerExtent+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftLargeArcRadius+" 0 0 1 "+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.verticalFullExtent+" L"+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.verticalFullExtent+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightLargeArcRadius+" 0 0 1 "+ve.circularPathData.rightFullExtent+" "+ve.circularPathData.verticalRightInnerExtent+" L"+ve.circularPathData.rightFullExtent+" "+(ve.circularPathData.targetY+ve.circularPathData.rightSmallArcRadius)+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightSmallArcRadius+" 0 0 1 "+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.targetY+" L"+ve.circularPathData.targetX+" "+ve.circularPathData.targetY;else{var Be=y.linkHorizontal().source(function(ve){return[ve.source.x0+(ve.source.x1-ve.source.x0),ve.y0]}).target(function(ve){return[ve.target.x0,ve.y1]});ge.path=Be(ge)}var ve})}function D(se,ue){return Y(se)==Y(ue)?"bottom"==se.circularLinkType?B(se,ue):L(se,ue):Y(ue)-Y(se)}function L(se,ue){return se.y0-ue.y0}function B(se,ue){return ue.y0-se.y0}function j(se,ue){return se.y1-ue.y1}function W(se,ue){return ue.y1-se.y1}function Y(se){return se.target.column-se.source.column}function Q(se){return se.target.x0-se.source.x1}function ne(se,ue){var de=E(se),he=Q(ue)/Math.tan(de);return"up"==q(se)?se.y1+he:se.y1-he}function X(se,ue){var de=E(se),he=Q(ue)/Math.tan(de);return"up"==q(se)?se.y1-he:se.y1+he}function $(se,ue,de,he){se.links.forEach(function(xe){if(!xe.circular&&xe.target.column-xe.source.column>1){var ge=xe.source.column+1,_e=xe.target.column-1,Ce=1,Le=_e-ge+1;for(Ce=1;ge<=_e;ge++,Ce++)se.nodes.forEach(function(Ie){if(Ie.column==ge){var Be,ve=Ce/(Le+1),Te=Math.pow(1-ve,3),Pe=3*ve*Math.pow(1-ve,2),De=3*Math.pow(ve,2)*(1-ve),Fe=Math.pow(ve,3),Ue=Te*xe.y0+Pe*xe.y0+De*xe.y1+Fe*xe.y1,He=Ue-xe.width/2,Ke=Ue+xe.width/2;He>Ie.y0&&He<Ie.y1?(Be=Ie.y1-He+10,Ie=H(Ie,Be="bottom"==Ie.circularLinkType?Be:-Be,ue,de),se.nodes.forEach(function(st){k(st,he)!=k(Ie,he)&&st.column==Ie.column&&re(Ie,st)&&H(st,Be,ue,de)})):(Ke>Ie.y0&&Ke<Ie.y1||He<Ie.y0&&Ke>Ie.y1)&&(Ie=H(Ie,Be=Ke-Ie.y0+10,ue,de),se.nodes.forEach(function(st){k(st,he)!=k(Ie,he)&&st.column==Ie.column&&st.y0<Ie.y1&&st.y1>Ie.y1&&H(st,Be,ue,de)}))}})}})}function re(se,ue){return se.y0>ue.y0&&se.y0<ue.y1||se.y1>ue.y0&&se.y1<ue.y1||se.y0<ue.y0&&se.y1>ue.y1}function H(se,ue,de,he){return se.y0+ue>=de&&se.y1+ue<=he&&(se.y0=se.y0+ue,se.y1=se.y1+ue,se.targetLinks.forEach(function(xe){xe.y1=xe.y1+ue}),se.sourceLinks.forEach(function(xe){xe.y0=xe.y0+ue})),se}function U(se,ue,de,he){se.nodes.forEach(function(xe){he&&xe.y+(xe.y1-xe.y0)>ue&&(xe.y=xe.y-(xe.y+(xe.y1-xe.y0)-ue));var ge=se.links.filter(function(Le){return k(Le.source,de)==k(xe,de)}),_e=ge.length;_e>1&&ge.sort(function(Le,Ie){if(!Le.circular&&!Ie.circular){if(Le.target.column==Ie.target.column||!ie(Le,Ie))return Le.y1-Ie.y1;if(Le.target.column>Ie.target.column){var Be=X(Ie,Le);return Le.y1-Be}if(Ie.target.column>Le.target.column)return X(Le,Ie)-Ie.y1}return Le.circular&&!Ie.circular?"top"==Le.circularLinkType?-1:1:Ie.circular&&!Le.circular?"top"==Ie.circularLinkType?1:-1:Le.circular&&Ie.circular?Le.circularLinkType===Ie.circularLinkType&&"top"==Le.circularLinkType?Le.target.column===Ie.target.column?Le.target.y1-Ie.target.y1:Ie.target.column-Le.target.column:Le.circularLinkType===Ie.circularLinkType&&"bottom"==Le.circularLinkType?Le.target.column===Ie.target.column?Ie.target.y1-Le.target.y1:Le.target.column-Ie.target.column:"top"==Le.circularLinkType?-1:1:void 0});var Ce=xe.y0;ge.forEach(function(Le){Le.y0=Ce+Le.width/2,Ce+=Le.width}),ge.forEach(function(Le,Ie){if("bottom"==Le.circularLinkType){for(var Be=Ie+1,ve=0;Be<_e;Be++)ve+=ge[Be].width;Le.y0=xe.y1-ve-Le.width/2}})})}function G(se,ue,de){se.nodes.forEach(function(he){var xe=se.links.filter(function(Ce){return k(Ce.target,de)==k(he,de)}),ge=xe.length;ge>1&&xe.sort(function(Ce,Le){if(!Ce.circular&&!Le.circular){if(Ce.source.column==Le.source.column||!ie(Ce,Le))return Ce.y0-Le.y0;if(Le.source.column<Ce.source.column){var Ie=ne(Le,Ce);return Ce.y0-Ie}if(Ce.source.column<Le.source.column)return ne(Ce,Le)-Le.y0}return Ce.circular&&!Le.circular?"top"==Ce.circularLinkType?-1:1:Le.circular&&!Ce.circular?"top"==Le.circularLinkType?1:-1:Ce.circular&&Le.circular?Ce.circularLinkType===Le.circularLinkType&&"top"==Ce.circularLinkType?Ce.source.column===Le.source.column?Ce.source.y1-Le.source.y1:Ce.source.column-Le.source.column:Ce.circularLinkType===Le.circularLinkType&&"bottom"==Ce.circularLinkType?Ce.source.column===Le.source.column?Ce.source.y1-Le.source.y1:Le.source.column-Ce.source.column:"top"==Ce.circularLinkType?-1:1:void 0});var _e=he.y0;xe.forEach(function(Ce){Ce.y1=_e+Ce.width/2,_e+=Ce.width}),xe.forEach(function(Ce,Le){if("bottom"==Ce.circularLinkType){for(var Ie=Le+1,Be=0;Ie<ge;Ie++)Be+=xe[Ie].width;Ce.y1=he.y1-Be-Ce.width/2}})})}function ie(se,ue){return q(se)==q(ue)}function q(se){return se.y0-se.y1>0?"up":"down"}function ee(se,ue){return k(se.source,ue)==k(se.target,ue)}function te(se,ue,de){var he=se.nodes,xe=se.links,ge=!1,_e=!1;if(xe.forEach(function(Ie){"top"==Ie.circularLinkType?ge=!0:"bottom"==Ie.circularLinkType&&(_e=!0)}),0==ge||0==_e){var Ce=m.min(he,function(Ie){return Ie.y0}),Le=(de-ue)/(m.max(he,function(Ie){return Ie.y1})-Ce);he.forEach(function(Ie){var Be=(Ie.y1-Ie.y0)*Le;Ie.y0=(Ie.y0-Ce)*Le,Ie.y1=Ie.y0+Be}),xe.forEach(function(Ie){Ie.y0=(Ie.y0-Ce)*Le,Ie.y1=(Ie.y1-Ce)*Le,Ie.width=Ie.width*Le})}}g.sankeyCircular=function(){var se,ue,de=0,he=0,xe=1,ge=1,_e=24,Ce=d,Le=n,Ie=o,Be=_,ve=32,Te=2,Pe=null;function De(){var Ve={nodes:Ie.apply(null,arguments),links:Be.apply(null,arguments)};Fe(Ve),M(Ve,0,Pe),Ue(Ve),He(Ve),A(Ve,Ce),Ke(Ve,ve,Ce),st(Ve);for(var $e=4,Qe=0;Qe<$e;Qe++)U(Ve,ge,Ce),G(Ve,0,Ce),$(Ve,he,ge,Ce),U(Ve,ge,Ce),G(Ve,0,Ce);return te(Ve,he,ge),O(Ve,Te,ge,Ce),Ve}function Fe(Ve){Ve.nodes.forEach(function(Qe,tt){Qe.index=tt,Qe.sourceLinks=[],Qe.targetLinks=[]});var $e=w.map(Ve.nodes,Ce);return Ve.links.forEach(function(Qe,tt){Qe.index=tt;var ut=Qe.source,xt=Qe.target;"object"!==(void 0===ut?"undefined":t(ut))&&(ut=Qe.source=s($e,ut)),"object"!==(void 0===xt?"undefined":t(xt))&&(xt=Qe.target=s($e,xt)),ut.sourceLinks.push(Qe),xt.targetLinks.push(Qe)}),Ve}function Ue(Ve){Ve.nodes.forEach(function($e){$e.partOfCycle=!1,$e.value=Math.max(m.sum($e.sourceLinks,c),m.sum($e.targetLinks,c)),$e.sourceLinks.forEach(function(Qe){Qe.circular&&($e.partOfCycle=!0,$e.circularLinkType=Qe.circularLinkType)}),$e.targetLinks.forEach(function(Qe){Qe.circular&&($e.partOfCycle=!0,$e.circularLinkType=Qe.circularLinkType)})})}function He(Ve){var $e,Qe,tt;for($e=Ve.nodes,Qe=[],tt=0;$e.length;++tt,$e=Qe,Qe=[])$e.forEach(function(ut){ut.depth=tt,ut.sourceLinks.forEach(function(xt){Qe.indexOf(xt.target)<0&&!xt.circular&&Qe.push(xt.target)})});for($e=Ve.nodes,Qe=[],tt=0;$e.length;++tt,$e=Qe,Qe=[])$e.forEach(function(ut){ut.height=tt,ut.targetLinks.forEach(function(xt){Qe.indexOf(xt.source)<0&&!xt.circular&&Qe.push(xt.source)})});Ve.nodes.forEach(function(ut){ut.column=Math.floor(Le.call(null,ut,tt))})}function Ke(Ve,$e,Qe){var tt=w.nest().key(function(Rt){return Rt.column}).sortKeys(m.ascending).entries(Ve.nodes).map(function(Rt){return Rt.values});(function(Rt){if(ue){var ft=1/0;tt.forEach(function(ln){var dn=ge*ue/(ln.length+1);ft=dn<ft?dn:ft}),se=ft}var lt=m.min(tt,function(ln){return(ge-he-(ln.length-1)*se)/m.sum(ln,c)});lt*=.3,Ve.links.forEach(function(ln){ln.width=ln.value*lt});var ln,dn,cn,Tn,nn,Me,Ft=(dn=0,cn=0,Tn=0,nn=0,Me=m.max((ln=Ve).nodes,function(Ee){return Ee.column}),ln.links.forEach(function(Ee){Ee.circular&&("top"==Ee.circularLinkType?dn+=Ee.width:cn+=Ee.width,0==Ee.target.column&&(nn+=Ee.width),Ee.source.column==Me&&(Tn+=Ee.width))}),{top:dn=dn>0?dn+25+10:dn,bottom:cn=cn>0?cn+25+10:cn,left:nn=nn>0?nn+25+10:nn,right:Tn=Tn>0?Tn+25+10:Tn}),Jt=function(ln,dn){var cn=m.max(ln.nodes,function(Se){return Se.column}),Tn=xe-de,nn=ge-he,Me=Tn/(Tn+dn.right+dn.left),Ee=nn/(nn+dn.top+dn.bottom);return de=de*Me+dn.left,xe=0==dn.right?xe:xe*Me,he=he*Ee+dn.top,ge*=Ee,ln.nodes.forEach(function(Se){Se.x0=de+Se.column*((xe-de-_e)/cn),Se.x1=Se.x0+_e}),Ee}(Ve,Ft);lt*=Jt,Ve.links.forEach(function(ln){ln.width=ln.value*lt}),tt.forEach(function(ln){var dn=ln.length;ln.forEach(function(cn,Tn){cn.depth==tt.length-1&&1==dn||0==cn.depth&&1==dn?(cn.y0=ge/2-cn.value*lt,cn.y1=cn.y0+cn.value*lt):cn.partOfCycle?0==I(cn,Rt)?(cn.y0=ge/2+Tn,cn.y1=cn.y0+cn.value*lt):"top"==cn.circularLinkType?(cn.y0=he+Tn,cn.y1=cn.y0+cn.value*lt):(cn.y0=ge-cn.value*lt-Tn,cn.y1=cn.y0+cn.value*lt):0==Ft.top||0==Ft.bottom?(cn.y0=(ge-he)/dn*Tn,cn.y1=cn.y0+cn.value*lt):(cn.y0=(ge-he)/2-dn/2+Tn,cn.y1=cn.y0+cn.value*lt)})})})(Qe),Bt();for(var ut=1,xt=$e;xt>0;--xt)kt(ut*=.99,Qe),Bt();function kt(Rt,ft){var lt=tt.length;tt.forEach(function(Ft){var Jt=Ft.length,ln=Ft[0].depth;Ft.forEach(function(dn){var cn;if((dn.sourceLinks.length||dn.targetLinks.length)&&!(dn.partOfCycle&&I(dn,ft)>0))if(0==ln&&1==Jt)dn.y0=ge/2-(cn=dn.y1-dn.y0)/2,dn.y1=ge/2+cn/2;else if(ln==lt-1&&1==Jt)dn.y0=ge/2-(cn=dn.y1-dn.y0)/2,dn.y1=ge/2+cn/2;else{var Tn=m.mean(dn.sourceLinks,h),nn=m.mean(dn.targetLinks,l),Me=((Tn&&nn?(Tn+nn)/2:Tn||nn)-f(dn))*Rt;dn.y0+=Me,dn.y1+=Me}})})}function Bt(){tt.forEach(function(Rt){var ft,lt,Ft,Jt=he,ln=Rt.length;for(Rt.sort(i),Ft=0;Ft<ln;++Ft)(lt=Jt-(ft=Rt[Ft]).y0)>0&&(ft.y0+=lt,ft.y1+=lt),Jt=ft.y1+se;if((lt=Jt-se-ge)>0)for(Jt=ft.y0-=lt,ft.y1-=lt,Ft=ln-2;Ft>=0;--Ft)(lt=(ft=Rt[Ft]).y1+se-Jt)>0&&(ft.y0-=lt,ft.y1-=lt),Jt=ft.y0})}}function st(Ve){Ve.nodes.forEach(function($e){$e.sourceLinks.sort(u),$e.targetLinks.sort(p)}),Ve.nodes.forEach(function($e){var Qe=$e.y0,tt=Qe,ut=$e.y1,xt=ut;$e.sourceLinks.forEach(function(kt){kt.circular?(kt.y0=ut-kt.width/2,ut-=kt.width):(kt.y0=Qe+kt.width/2,Qe+=kt.width)}),$e.targetLinks.forEach(function(kt){kt.circular?(kt.y1=xt-kt.width/2,xt-=kt.width):(kt.y1=tt+kt.width/2,tt+=kt.width)})})}return De.nodeId=function(Ve){return arguments.length?(Ce="function"==typeof Ve?Ve:a(Ve),De):Ce},De.nodeAlign=function(Ve){return arguments.length?(Le="function"==typeof Ve?Ve:a(Ve),De):Le},De.nodeWidth=function(Ve){return arguments.length?(_e=+Ve,De):_e},De.nodePadding=function(Ve){return arguments.length?(se=+Ve,De):se},De.nodes=function(Ve){return arguments.length?(Ie="function"==typeof Ve?Ve:a(Ve),De):Ie},De.links=function(Ve){return arguments.length?(Be="function"==typeof Ve?Ve:a(Ve),De):Be},De.size=function(Ve){return arguments.length?(de=he=0,xe=+Ve[0],ge=+Ve[1],De):[xe-de,ge-he]},De.extent=function(Ve){return arguments.length?(de=+Ve[0][0],xe=+Ve[1][0],he=+Ve[0][1],ge=+Ve[1][1],De):[[de,he],[xe,ge]]},De.iterations=function(Ve){return arguments.length?(ve=+Ve,De):ve},De.circularLinkGap=function(Ve){return arguments.length?(Te=+Ve,De):Te},De.nodePaddingRatio=function(Ve){return arguments.length?(ue=+Ve,De):ue},De.sortNodes=function(Ve){return arguments.length?(Pe=Ve,De):Pe},De.update=function(Ve){return A(Ve,Ce),st(Ve),Ve.links.forEach(function($e){$e.circular&&($e.circularLinkType=$e.y0+$e.y1<ge?"top":"bottom",$e.source.circularLinkType=$e.circularLinkType,$e.target.circularLinkType=$e.circularLinkType)}),U(Ve,ge,Ce,!1),G(Ve,0,Ce),O(Ve,Te,ge,Ce),Ve},De},g.sankeyCenter=function(se){return se.targetLinks.length?se.depth:se.sourceLinks.length?m.min(se.sourceLinks,r)-1:0},g.sankeyLeft=function(se){return se.depth},g.sankeyRight=function(se,ue){return ue-1-se.height},g.sankeyJustify=n,Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==oe?m(ae,x("d3-array"),x("d3-collection"),x("d3-shape"),x("elementary-circuits-directed-graph")):m(g.d3=g.d3||{},g.d3,g.d3,g.d3,null)},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(x,oe,ae){var g,m;g=this,m=function(g,m,w,y){"use strict";function e(k){return k.target.depth}function r(k,M){return k.sourceLinks.length?k.depth:M-1}function n(k){return function(){return k}}function a(k,M){return p(k.source,M.source)||k.index-M.index}function t(k,M){return p(k.target,M.target)||k.index-M.index}function p(k,M){return k.y0-M.y0}function u(k){return k.value}function i(k){return(k.y0+k.y1)/2}function c(k){return i(k.source)*k.value}function f(k){return i(k.target)*k.value}function l(k){return k.index}function h(k){return k.nodes}function d(k){return k.links}function o(k,M){var A=k.get(M);if(!A)throw new Error("missing: "+M);return A}function _(k){return[k.source.x1,k.y0]}function s(k){return[k.target.x0,k.y1]}g.sankey=function(){var k=0,M=0,A=1,E=1,I=24,C=8,R=l,O=r,D=h,L=d,B=32;function j(){var $={nodes:D.apply(null,arguments),links:L.apply(null,arguments)};return W($),Y($),Q($),ne($),X($),$}function W($){$.nodes.forEach(function(H,U){H.index=U,H.sourceLinks=[],H.targetLinks=[]});var re=w.map($.nodes,R);$.links.forEach(function(H,U){H.index=U;var G=H.source,ie=H.target;"object"!=typeof G&&(G=H.source=o(re,G)),"object"!=typeof ie&&(ie=H.target=o(re,ie)),G.sourceLinks.push(H),ie.targetLinks.push(H)})}function Y($){$.nodes.forEach(function(re){re.value=Math.max(m.sum(re.sourceLinks,u),m.sum(re.targetLinks,u))})}function Q($){var re,H,U;for(re=$.nodes,H=[],U=0;re.length;++U,re=H,H=[])re.forEach(function(ie){ie.depth=U,ie.sourceLinks.forEach(function(q){H.indexOf(q.target)<0&&H.push(q.target)})});for(re=$.nodes,H=[],U=0;re.length;++U,re=H,H=[])re.forEach(function(ie){ie.height=U,ie.targetLinks.forEach(function(q){H.indexOf(q.source)<0&&H.push(q.source)})});var G=(A-k-I)/(U-1);$.nodes.forEach(function(ie){ie.x1=(ie.x0=k+Math.max(0,Math.min(U-1,Math.floor(O.call(null,ie,U))))*G)+I})}function ne($){var re=w.nest().key(function(ee){return ee.x0}).sortKeys(m.ascending).entries($.nodes).map(function(ee){return ee.values});(function(){var ee=m.max(re,function(ue){return ue.length}),te=2/3*(E-M)/(ee-1);C>te&&(C=te);var se=m.min(re,function(ue){return(E-M-(ue.length-1)*C)/m.sum(ue,u)});re.forEach(function(ue){ue.forEach(function(de,he){de.y1=(de.y0=he)+de.value*se})}),$.links.forEach(function(ue){ue.width=ue.value*se})})(),q();for(var H=1,U=B;U>0;--U)ie(H*=.99),q(),G(H),q();function G(ee){re.forEach(function(te){te.forEach(function(se){if(se.targetLinks.length){var ue=(m.sum(se.targetLinks,c)/m.sum(se.targetLinks,u)-i(se))*ee;se.y0+=ue,se.y1+=ue}})})}function ie(ee){re.slice().reverse().forEach(function(te){te.forEach(function(se){if(se.sourceLinks.length){var ue=(m.sum(se.sourceLinks,f)/m.sum(se.sourceLinks,u)-i(se))*ee;se.y0+=ue,se.y1+=ue}})})}function q(){re.forEach(function(ee){var te,se,ue,de=M,he=ee.length;for(ee.sort(p),ue=0;ue<he;++ue)(se=de-(te=ee[ue]).y0)>0&&(te.y0+=se,te.y1+=se),de=te.y1+C;if((se=de-C-E)>0)for(de=te.y0-=se,te.y1-=se,ue=he-2;ue>=0;--ue)(se=(te=ee[ue]).y1+C-de)>0&&(te.y0-=se,te.y1-=se),de=te.y0})}}function X($){$.nodes.forEach(function(re){re.sourceLinks.sort(t),re.targetLinks.sort(a)}),$.nodes.forEach(function(re){var H=re.y0,U=H;re.sourceLinks.forEach(function(G){G.y0=H+G.width/2,H+=G.width}),re.targetLinks.forEach(function(G){G.y1=U+G.width/2,U+=G.width})})}return j.update=function($){return X($),$},j.nodeId=function($){return arguments.length?(R="function"==typeof $?$:n($),j):R},j.nodeAlign=function($){return arguments.length?(O="function"==typeof $?$:n($),j):O},j.nodeWidth=function($){return arguments.length?(I=+$,j):I},j.nodePadding=function($){return arguments.length?(C=+$,j):C},j.nodes=function($){return arguments.length?(D="function"==typeof $?$:n($),j):D},j.links=function($){return arguments.length?(L="function"==typeof $?$:n($),j):L},j.size=function($){return arguments.length?(k=M=0,A=+$[0],E=+$[1],j):[A-k,E-M]},j.extent=function($){return arguments.length?(k=+$[0][0],A=+$[1][0],M=+$[0][1],E=+$[1][1],j):[[k,M],[A,E]]},j.iterations=function($){return arguments.length?(B=+$,j):B},j},g.sankeyCenter=function(k){return k.targetLinks.length?k.depth:k.sourceLinks.length?m.min(k.sourceLinks,e)-1:0},g.sankeyLeft=function(k){return k.depth},g.sankeyRight=function(k,M){return M-1-k.height},g.sankeyJustify=r,g.sankeyLinkHorizontal=function(){return y.linkHorizontal().source(_).target(s)},Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==oe?m(ae,x("d3-array"),x("d3-collection"),x("d3-shape")):m(g.d3=g.d3||{},g.d3,g.d3,g.d3)},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(x,oe,ae){(function(){var g={version:"3.8.0"},m=[].slice,w=function(pe){return m.call(pe)},y=self.document;function e(pe){return pe&&(pe.ownerDocument||pe.document||pe).documentElement}function r(pe){return pe&&(pe.ownerDocument&&pe.ownerDocument.defaultView||pe.document&&pe||pe.defaultView)}if(y)try{w(y.documentElement.childNodes)}catch(pe){w=function(P){for(var N=P.length,V=new Array(N);N--;)V[N]=P[N];return V}}if(Date.now||(Date.now=function(){return+new Date}),y)try{y.createElement("DIV").style.setProperty("opacity",0,"")}catch(pe){var n=this.Element.prototype,a=n.setAttribute,t=n.setAttributeNS,p=this.CSSStyleDeclaration.prototype,u=p.setProperty;n.setAttribute=function(P,N){a.call(this,P,N+"")},n.setAttributeNS=function(P,N,V){t.call(this,P,N,V+"")},p.setProperty=function(P,N,V){u.call(this,P,N+"",V)}}function i(pe,P){return pe<P?-1:pe>P?1:pe>=P?0:NaN}function c(pe){return null===pe?NaN:+pe}function f(pe){return!isNaN(pe)}function l(pe){return{left:function(P,N,V,Z){for(arguments.length<3&&(V=0),arguments.length<4&&(Z=P.length);V<Z;){var fe=V+Z>>>1;pe(P[fe],N)<0?V=fe+1:Z=fe}return V},right:function(P,N,V,Z){for(arguments.length<3&&(V=0),arguments.length<4&&(Z=P.length);V<Z;){var fe=V+Z>>>1;pe(P[fe],N)>0?Z=fe:V=fe+1}return V}}}g.ascending=i,g.descending=function(pe,P){return P<pe?-1:P>pe?1:P>=pe?0:NaN},g.min=function(pe,P){var N,V,Z=-1,fe=pe.length;if(1===arguments.length){for(;++Z<fe;)if(null!=(V=pe[Z])&&V>=V){N=V;break}for(;++Z<fe;)null!=(V=pe[Z])&&N>V&&(N=V)}else{for(;++Z<fe;)if(null!=(V=P.call(pe,pe[Z],Z))&&V>=V){N=V;break}for(;++Z<fe;)null!=(V=P.call(pe,pe[Z],Z))&&N>V&&(N=V)}return N},g.max=function(pe,P){var N,V,Z=-1,fe=pe.length;if(1===arguments.length){for(;++Z<fe;)if(null!=(V=pe[Z])&&V>=V){N=V;break}for(;++Z<fe;)null!=(V=pe[Z])&&V>N&&(N=V)}else{for(;++Z<fe;)if(null!=(V=P.call(pe,pe[Z],Z))&&V>=V){N=V;break}for(;++Z<fe;)null!=(V=P.call(pe,pe[Z],Z))&&V>N&&(N=V)}return N},g.extent=function(pe,P){var N,V,Z,fe=-1,me=pe.length;if(1===arguments.length){for(;++fe<me;)if(null!=(V=pe[fe])&&V>=V){N=Z=V;break}for(;++fe<me;)null!=(V=pe[fe])&&(N>V&&(N=V),Z<V&&(Z=V))}else{for(;++fe<me;)if(null!=(V=P.call(pe,pe[fe],fe))&&V>=V){N=Z=V;break}for(;++fe<me;)null!=(V=P.call(pe,pe[fe],fe))&&(N>V&&(N=V),Z<V&&(Z=V))}return[N,Z]},g.sum=function(pe,P){var N,V=0,Z=pe.length,fe=-1;if(1===arguments.length)for(;++fe<Z;)f(N=+pe[fe])&&(V+=N);else for(;++fe<Z;)f(N=+P.call(pe,pe[fe],fe))&&(V+=N);return V},g.mean=function(pe,P){var N,V=0,Z=pe.length,fe=-1,me=Z;if(1===arguments.length)for(;++fe<Z;)f(N=c(pe[fe]))?V+=N:--me;else for(;++fe<Z;)f(N=c(P.call(pe,pe[fe],fe)))?V+=N:--me;if(me)return V/me},g.quantile=function(pe,P){var N=(pe.length-1)*P+1,V=Math.floor(N),Z=+pe[V-1],fe=N-V;return fe?Z+fe*(pe[V]-Z):Z},g.median=function(pe,P){var N,V=[],Z=pe.length,fe=-1;if(1===arguments.length)for(;++fe<Z;)f(N=c(pe[fe]))&&V.push(N);else for(;++fe<Z;)f(N=c(P.call(pe,pe[fe],fe)))&&V.push(N);if(V.length)return g.quantile(V.sort(i),.5)},g.variance=function(pe,P){var N,V,Z=pe.length,fe=0,me=0,we=-1,Ae=0;if(1===arguments.length)for(;++we<Z;)f(N=c(pe[we]))&&(me+=(V=N-fe)*(N-(fe+=V/++Ae)));else for(;++we<Z;)f(N=c(P.call(pe,pe[we],we)))&&(me+=(V=N-fe)*(N-(fe+=V/++Ae)));if(Ae>1)return me/(Ae-1)},g.deviation=function(){var pe=g.variance.apply(this,arguments);return pe&&Math.sqrt(pe)};var h=l(i);function d(pe){return pe.length}g.bisectLeft=h.left,g.bisect=g.bisectRight=h.right,g.bisector=function(pe){return l(1===pe.length?function(P,N){return i(pe(P),N)}:pe)},g.shuffle=function(pe,P,N){(fe=arguments.length)<3&&(N=pe.length,fe<2&&(P=0));for(var V,Z,fe=N-P;fe;)Z=Math.random()*fe--|0,V=pe[fe+P],pe[fe+P]=pe[Z+P],pe[Z+P]=V;return pe},g.permute=function(pe,P){for(var N=P.length,V=new Array(N);N--;)V[N]=pe[P[N]];return V},g.pairs=function(pe){for(var P=0,N=pe.length-1,V=pe[0],Z=new Array(N<0?0:N);P<N;)Z[P]=[V,V=pe[++P]];return Z},g.transpose=function(pe){if(!(Z=pe.length))return[];for(var P=-1,N=g.min(pe,d),V=new Array(N);++P<N;)for(var Z,fe=-1,me=V[P]=new Array(Z);++fe<Z;)me[fe]=pe[fe][P];return V},g.zip=function(){return g.transpose(arguments)},g.keys=function(pe){var P=[];for(var N in pe)P.push(N);return P},g.values=function(pe){var P=[];for(var N in pe)P.push(pe[N]);return P},g.entries=function(pe){var P=[];for(var N in pe)P.push({key:N,value:pe[N]});return P},g.merge=function(pe){for(var P,N,V,Z=pe.length,fe=-1,me=0;++fe<Z;)me+=pe[fe].length;for(N=new Array(me);--Z>=0;)for(P=(V=pe[Z]).length;--P>=0;)N[--me]=V[P];return N};var o=Math.abs;function _(pe){for(var P=1;pe*P%1;)P*=10;return P}function s(pe,P){for(var N in P)Object.defineProperty(pe.prototype,N,{value:P[N],enumerable:!1})}function k(){this._=Object.create(null)}function M(pe){return"__proto__"==(pe+="")||"\0"===pe[0]?"\0"+pe:pe}function A(pe){return"\0"===(pe+="")[0]?pe.slice(1):pe}function E(pe){return M(pe)in this._}function I(pe){return(pe=M(pe))in this._&&delete this._[pe]}function C(){var pe=[];for(var P in this._)pe.push(A(P));return pe}function R(){var pe=0;for(var P in this._)++pe;return pe}function O(){for(var pe in this._)return!1;return!0}function D(){this._=Object.create(null)}function L(pe){return pe}function B(pe,P,N){return function(){var V=N.apply(P,arguments);return V===P?pe:V}}function j(pe,P){if(P in pe)return P;P=P.charAt(0).toUpperCase()+P.slice(1);for(var N=0,V=W.length;N<V;++N){var Z=W[N]+P;if(Z in pe)return Z}}g.range=function(pe,P,N){if(arguments.length<3&&(N=1,arguments.length<2&&(P=pe,pe=0)),(P-pe)/N==1/0)throw new Error("infinite range");var V,Z=[],fe=_(o(N)),me=-1;if(pe*=fe,P*=fe,(N*=fe)<0)for(;(V=pe+N*++me)>P;)Z.push(V/fe);else for(;(V=pe+N*++me)<P;)Z.push(V/fe);return Z},g.map=function(pe,P){var N=new k;if(pe instanceof k)pe.forEach(function(we,Ae){N.set(we,Ae)});else if(Array.isArray(pe)){var V,Z=-1,fe=pe.length;if(1===arguments.length)for(;++Z<fe;)N.set(Z,pe[Z]);else for(;++Z<fe;)N.set(P.call(pe,V=pe[Z],Z),V)}else for(var me in pe)N.set(me,pe[me]);return N},s(k,{has:E,get:function(pe){return this._[M(pe)]},set:function(pe,P){return this._[M(pe)]=P},remove:I,keys:C,values:function(){var pe=[];for(var P in this._)pe.push(this._[P]);return pe},entries:function(){var pe=[];for(var P in this._)pe.push({key:A(P),value:this._[P]});return pe},size:R,empty:O,forEach:function(pe){for(var P in this._)pe.call(this,A(P),this._[P])}}),g.nest=function(){var pe,P,N={},V=[],Z=[];function fe(me,we,Ae){if(Ae>=V.length)return P?P.call(N,we):pe?we.sort(pe):we;for(var Re,Xe,nt,ht,Dt=-1,Ot=we.length,It=V[Ae++],Lt=new k;++Dt<Ot;)(ht=Lt.get(Re=It(Xe=we[Dt])))?ht.push(Xe):Lt.set(Re,[Xe]);return me?(Xe=me(),nt=function(St,Gt){Xe.set(St,fe(me,Gt,Ae))}):(Xe={},nt=function(St,Gt){Xe[St]=fe(me,Gt,Ae)}),Lt.forEach(nt),Xe}return N.map=function(me,we){return fe(we,me,0)},N.entries=function(me){return function we(Ae,Re){if(Re>=V.length)return Ae;var Xe=[],nt=Z[Re++];return Ae.forEach(function(ht,Dt){Xe.push({key:ht,values:we(Dt,Re)})}),nt?Xe.sort(function(ht,Dt){return nt(ht.key,Dt.key)}):Xe}(fe(g.map,me,0),0)},N.key=function(me){return V.push(me),N},N.sortKeys=function(me){return Z[V.length-1]=me,N},N.sortValues=function(me){return pe=me,N},N.rollup=function(me){return P=me,N},N},g.set=function(pe){var P=new D;if(pe)for(var N=0,V=pe.length;N<V;++N)P.add(pe[N]);return P},s(D,{has:E,add:function(pe){return this._[M(pe+="")]=!0,pe},remove:I,values:C,size:R,empty:O,forEach:function(pe){for(var P in this._)pe.call(this,A(P))}}),g.behavior={},g.rebind=function(pe,P){for(var N,V=1,Z=arguments.length;++V<Z;)pe[N=arguments[V]]=B(pe,P,P[N]);return pe};var W=["webkit","ms","moz","Moz","o","O"];function Y(){}function Q(){}function ne(pe){var P=[],N=new k;function V(){for(var Z,fe=P,me=-1,we=fe.length;++me<we;)(Z=fe[me].on)&&Z.apply(this,arguments);return pe}return V.on=function(Z,fe){var me,we=N.get(Z);return arguments.length<2?we&&we.on:(we&&(we.on=null,P=P.slice(0,me=P.indexOf(we)).concat(P.slice(me+1)),N.remove(Z)),fe&&P.push(N.set(Z,{on:fe})),pe)},V}function X(){g.event.preventDefault()}function $(){for(var pe,P=g.event;pe=P.sourceEvent;)P=pe;return P}function re(pe){for(var P=new Q,N=0,V=arguments.length;++N<V;)P[arguments[N]]=ne(P);return P.of=function(Z,fe){return function(me){try{var we=me.sourceEvent=g.event;me.target=pe,g.event=me,P[me.type].apply(Z,fe)}finally{g.event=we}}},P}g.dispatch=function(){for(var pe=new Q,P=-1,N=arguments.length;++P<N;)pe[arguments[P]]=ne(pe);return pe},Q.prototype.on=function(pe,P){var N=pe.indexOf("."),V="";if(N>=0&&(V=pe.slice(N+1),pe=pe.slice(0,N)),pe)return arguments.length<2?this[pe].on(V):this[pe].on(V,P);if(2===arguments.length){if(null==P)for(pe in this)this.hasOwnProperty(pe)&&this[pe].on(V,null);return this}},g.event=null,g.requote=function(pe){return pe.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,U={}.__proto__?function(pe,P){pe.__proto__=P}:function(pe,P){for(var N in P)pe[N]=P[N]};function G(pe){return U(pe,te),pe}var ie=function(pe,P){return P.querySelector(pe)},q=function(pe,P){return P.querySelectorAll(pe)},ee=function(pe,P){var N=pe.matches||pe[j(pe,"matchesSelector")];return(ee=function(V,Z){return N.call(V,Z)})(pe,P)};"function"==typeof Sizzle&&(ie=function(pe,P){return Sizzle(pe,P)[0]||null},q=Sizzle,ee=Sizzle.matchesSelector),g.selection=function(){return g.select(y.documentElement)};var te=g.selection.prototype=[];function se(pe){return"function"==typeof pe?pe:function(){return ie(pe,this)}}function ue(pe){return"function"==typeof pe?pe:function(){return q(pe,this)}}te.select=function(pe){var P,N,V,Z,fe=[];pe=se(pe);for(var me=-1,we=this.length;++me<we;){fe.push(P=[]),P.parentNode=(V=this[me]).parentNode;for(var Ae=-1,Re=V.length;++Ae<Re;)(Z=V[Ae])?(P.push(N=pe.call(Z,Z.__data__,Ae,me)),N&&"__data__"in Z&&(N.__data__=Z.__data__)):P.push(null)}return G(fe)},te.selectAll=function(pe){var P,N,V=[];pe=ue(pe);for(var Z=-1,fe=this.length;++Z<fe;)for(var me=this[Z],we=-1,Ae=me.length;++we<Ae;)(N=me[we])&&(V.push(P=w(pe.call(N,N.__data__,we,Z))),P.parentNode=N);return G(V)};var de="http://www.w3.org/1999/xhtml",he={svg:"http://www.w3.org/2000/svg",xhtml:de,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xe(pe,P){return pe=g.ns.qualify(pe),null==P?pe.local?function(){this.removeAttributeNS(pe.space,pe.local)}:function(){this.removeAttribute(pe)}:"function"==typeof P?pe.local?function(){var N=P.apply(this,arguments);null==N?this.removeAttributeNS(pe.space,pe.local):this.setAttributeNS(pe.space,pe.local,N)}:function(){var N=P.apply(this,arguments);null==N?this.removeAttribute(pe):this.setAttribute(pe,N)}:pe.local?function(){this.setAttributeNS(pe.space,pe.local,P)}:function(){this.setAttribute(pe,P)}}function ge(pe){return pe.trim().replace(/\s+/g," ")}function _e(pe){return new RegExp("(?:^|\\s+)"+g.requote(pe)+"(?:\\s+|$)","g")}function Ce(pe){return(pe+"").trim().split(/^|\s+/)}function Le(pe,P){var N=(pe=Ce(pe).map(Ie)).length;return"function"==typeof P?function(){for(var V=-1,Z=P.apply(this,arguments);++V<N;)pe[V](this,Z)}:function(){for(var V=-1;++V<N;)pe[V](this,P)}}function Ie(pe){var P=_e(pe);return function(N,V){if(Z=N.classList)return V?Z.add(pe):Z.remove(pe);var Z=N.getAttribute("class")||"";V?(P.lastIndex=0,P.test(Z)||N.setAttribute("class",ge(Z+" "+pe))):N.setAttribute("class",ge(Z.replace(P," ")))}}function Be(pe,P,N){return null==P?function(){this.style.removeProperty(pe)}:"function"==typeof P?function(){var V=P.apply(this,arguments);null==V?this.style.removeProperty(pe):this.style.setProperty(pe,V,N)}:function(){this.style.setProperty(pe,P,N)}}function ve(pe,P){return null==P?function(){delete this[pe]}:"function"==typeof P?function(){var N=P.apply(this,arguments);null==N?delete this[pe]:this[pe]=N}:function(){this[pe]=P}}function Te(pe){return"function"==typeof pe?pe:(pe=g.ns.qualify(pe)).local?function(){return this.ownerDocument.createElementNS(pe.space,pe.local)}:function(){var P=this.ownerDocument,N=this.namespaceURI;return N===de&&P.documentElement.namespaceURI===de?P.createElement(pe):P.createElementNS(N,pe)}}function Pe(){var pe=this.parentNode;pe&&pe.removeChild(this)}function De(pe){return{__data__:pe}}function Fe(pe){return function(){return ee(this,pe)}}function Ue(pe){return arguments.length||(pe=i),function(P,N){return P&&N?pe(P.__data__,N.__data__):!P-!N}}function He(pe,P){for(var N=0,V=pe.length;N<V;N++)for(var Z,fe=pe[N],me=0,we=fe.length;me<we;me++)(Z=fe[me])&&P(Z,me,N);return pe}function Ke(pe){return U(pe,st),pe}g.ns={prefix:he,qualify:function(pe){var P=pe.indexOf(":"),N=pe;return P>=0&&"xmlns"!==(N=pe.slice(0,P))&&(pe=pe.slice(P+1)),he.hasOwnProperty(N)?{space:he[N],local:pe}:pe}},te.attr=function(pe,P){if(arguments.length<2){if("string"==typeof pe){var N=this.node();return(pe=g.ns.qualify(pe)).local?N.getAttributeNS(pe.space,pe.local):N.getAttribute(pe)}for(P in pe)this.each(xe(P,pe[P]));return this}return this.each(xe(pe,P))},te.classed=function(pe,P){if(arguments.length<2){if("string"==typeof pe){var N=this.node(),V=(pe=Ce(pe)).length,Z=-1;if(P=N.classList){for(;++Z<V;)if(!P.contains(pe[Z]))return!1}else for(P=N.getAttribute("class");++Z<V;)if(!_e(pe[Z]).test(P))return!1;return!0}for(P in pe)this.each(Le(P,pe[P]));return this}return this.each(Le(pe,P))},te.style=function(pe,P,N){var V=arguments.length;if(V<3){if("string"!=typeof pe){for(N in V<2&&(P=""),pe)this.each(Be(N,pe[N],P));return this}if(V<2){var Z=this.node();return r(Z).getComputedStyle(Z,null).getPropertyValue(pe)}N=""}return this.each(Be(pe,P,N))},te.property=function(pe,P){if(arguments.length<2){if("string"==typeof pe)return this.node()[pe];for(P in pe)this.each(ve(P,pe[P]));return this}return this.each(ve(pe,P))},te.text=function(pe){return arguments.length?this.each("function"==typeof pe?function(){var P=pe.apply(this,arguments);this.textContent=null==P?"":P}:null==pe?function(){this.textContent=""}:function(){this.textContent=pe}):this.node().textContent},te.html=function(pe){return arguments.length?this.each("function"==typeof pe?function(){var P=pe.apply(this,arguments);this.innerHTML=null==P?"":P}:null==pe?function(){this.innerHTML=""}:function(){this.innerHTML=pe}):this.node().innerHTML},te.append=function(pe){return pe=Te(pe),this.select(function(){return this.appendChild(pe.apply(this,arguments))})},te.insert=function(pe,P){return pe=Te(pe),P=se(P),this.select(function(){return this.insertBefore(pe.apply(this,arguments),P.apply(this,arguments)||null)})},te.remove=function(){return this.each(Pe)},te.data=function(pe,P){var N,V,Z=-1,fe=this.length;if(!arguments.length){for(pe=new Array(fe=(N=this[0]).length);++Z<fe;)(V=N[Z])&&(pe[Z]=V.__data__);return pe}function me(Xe,nt){var ht,Dt,Ot,It=Xe.length,Lt=nt.length,St=Math.min(It,Lt),Gt=new Array(Lt),Vt=new Array(Lt),Yt=new Array(It);if(P){var xn,En=new k,jn=new Array(It);for(ht=-1;++ht<It;)(Dt=Xe[ht])&&(En.has(xn=P.call(Dt,Dt.__data__,ht))?Yt[ht]=Dt:En.set(xn,Dt),jn[ht]=xn);for(ht=-1;++ht<Lt;)(Dt=En.get(xn=P.call(nt,Ot=nt[ht],ht)))?!0!==Dt&&(Gt[ht]=Dt,Dt.__data__=Ot):Vt[ht]=De(Ot),En.set(xn,!0);for(ht=-1;++ht<It;)ht in jn&&!0!==En.get(jn[ht])&&(Yt[ht]=Xe[ht])}else{for(ht=-1;++ht<St;)Ot=nt[ht],(Dt=Xe[ht])?(Dt.__data__=Ot,Gt[ht]=Dt):Vt[ht]=De(Ot);for(;ht<Lt;++ht)Vt[ht]=De(nt[ht]);for(;ht<It;++ht)Yt[ht]=Xe[ht]}Vt.update=Gt,Vt.parentNode=Gt.parentNode=Yt.parentNode=Xe.parentNode,we.push(Vt),Ae.push(Gt),Re.push(Yt)}var we=Ke([]),Ae=G([]),Re=G([]);if("function"==typeof pe)for(;++Z<fe;)me(N=this[Z],pe.call(N,N.parentNode.__data__,Z));else for(;++Z<fe;)me(N=this[Z],pe);return Ae.enter=function(){return we},Ae.exit=function(){return Re},Ae},te.datum=function(pe){return arguments.length?this.property("__data__",pe):this.property("__data__")},te.filter=function(pe){var P,N,V,Z=[];"function"!=typeof pe&&(pe=Fe(pe));for(var fe=0,me=this.length;fe<me;fe++){Z.push(P=[]),P.parentNode=(N=this[fe]).parentNode;for(var we=0,Ae=N.length;we<Ae;we++)(V=N[we])&&pe.call(V,V.__data__,we,fe)&&P.push(V)}return G(Z)},te.order=function(){for(var pe=-1,P=this.length;++pe<P;)for(var N,V=this[pe],Z=V.length-1,fe=V[Z];--Z>=0;)(N=V[Z])&&(fe&&fe!==N.nextSibling&&fe.parentNode.insertBefore(N,fe),fe=N);return this},te.sort=function(pe){pe=Ue.apply(this,arguments);for(var P=-1,N=this.length;++P<N;)this[P].sort(pe);return this.order()},te.each=function(pe){return He(this,function(P,N,V){pe.call(P,P.__data__,N,V)})},te.call=function(pe){var P=w(arguments);return pe.apply(P[0]=this,P),this},te.empty=function(){return!this.node()},te.node=function(){for(var pe=0,P=this.length;pe<P;pe++)for(var N=this[pe],V=0,Z=N.length;V<Z;V++){var fe=N[V];if(fe)return fe}return null},te.size=function(){var pe=0;return He(this,function(){++pe}),pe};var st=[];function Ve(pe){var P,N;return function(V,Z,fe){var me,we=pe[fe].update,Ae=we.length;for(fe!=N&&(N=fe,P=0),Z>=P&&(P=Z+1);!(me=we[P])&&++P<Ae;);return me}}function $e(pe,P,N){var V="__on"+pe,Z=pe.indexOf("."),fe=tt;Z>0&&(pe=pe.slice(0,Z));var me=Qe.get(pe);function we(){var Ae=this[V];Ae&&(this.removeEventListener(pe,Ae,Ae.$),delete this[V])}return me&&(pe=me,fe=ut),Z?P?function(){var Ae=fe(P,w(arguments));we.call(this),this.addEventListener(pe,this[V]=Ae,Ae.$=N),Ae._=P}:we:P?Y:function(){var Ae,Re=new RegExp("^__on([^.]+)"+g.requote(pe)+"$");for(var Xe in this)if(Ae=Xe.match(Re)){var nt=this[Xe];this.removeEventListener(Ae[1],nt,nt.$),delete this[Xe]}}}g.selection.enter=Ke,g.selection.enter.prototype=st,st.append=te.append,st.empty=te.empty,st.node=te.node,st.call=te.call,st.size=te.size,st.select=function(pe){for(var P,N,V,Z,fe,me=[],we=-1,Ae=this.length;++we<Ae;){V=(Z=this[we]).update,me.push(P=[]),P.parentNode=Z.parentNode;for(var Re=-1,Xe=Z.length;++Re<Xe;)(fe=Z[Re])?(P.push(V[Re]=N=pe.call(Z.parentNode,fe.__data__,Re,we)),N.__data__=fe.__data__):P.push(null)}return G(me)},st.insert=function(pe,P){return arguments.length<2&&(P=Ve(this)),te.insert.call(this,pe,P)},g.select=function(pe){var P;return"string"==typeof pe?(P=[ie(pe,y)]).parentNode=y.documentElement:(P=[pe]).parentNode=e(pe),G([P])},g.selectAll=function(pe){var P;return"string"==typeof pe?(P=w(q(pe,y))).parentNode=y.documentElement:(P=w(pe)).parentNode=null,G([P])},te.on=function(pe,P,N){var V=arguments.length;if(V<3){if("string"!=typeof pe){for(N in V<2&&(P=!1),pe)this.each($e(N,pe[N],P));return this}if(V<2)return(V=this.node()["__on"+pe])&&V._;N=!1}return this.each($e(pe,P,N))};var Qe=g.map({mouseenter:"mouseover",mouseleave:"mouseout"});function tt(pe,P){return function(N){var V=g.event;g.event=N,P[0]=this.__data__;try{pe.apply(this,P)}finally{g.event=V}}}function ut(pe,P){var N=tt(pe,P);return function(V){var Z=V.relatedTarget;Z&&(Z===this||8&Z.compareDocumentPosition(this))||N.call(this,V)}}y&&Qe.forEach(function(pe){"on"+pe in y&&Qe.remove(pe)});var xt,kt=0;function Bt(pe){var P=".dragsuppress-"+ ++kt,N="click"+P,V=g.select(r(pe)).on("touchmove"+P,X).on("dragstart"+P,X).on("selectstart"+P,X);if(null==xt&&(xt=!("onselectstart"in pe)&&j(pe.style,"userSelect")),xt){var Z=e(pe).style,fe=Z[xt];Z[xt]="none"}return function(me){if(V.on(P,null),xt&&(Z[xt]=fe),me){var we=function(){V.on(N,null)};V.on(N,function(){X(),we()},!0),setTimeout(we,0)}}}g.mouse=function(pe){return ft(pe,$())};var Rt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ft(pe,P){P.changedTouches&&(P=P.changedTouches[0]);var N=pe.ownerSVGElement||pe;if(N.createSVGPoint){var V=N.createSVGPoint();if(Rt<0){var Z=r(pe);if(Z.scrollX||Z.scrollY){var fe=(N=g.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Rt=!(fe.f||fe.e),N.remove()}}return Rt?(V.x=P.pageX,V.y=P.pageY):(V.x=P.clientX,V.y=P.clientY),[(V=V.matrixTransform(pe.getScreenCTM().inverse())).x,V.y]}var me=pe.getBoundingClientRect();return[P.clientX-me.left-pe.clientLeft,P.clientY-me.top-pe.clientTop]}function lt(){return g.event.changedTouches[0].identifier}g.touch=function(pe,P,N){if(arguments.length<3&&(N=P,P=$().changedTouches),P)for(var V,Z=0,fe=P.length;Z<fe;++Z)if((V=P[Z]).identifier===N)return ft(pe,V)},g.behavior.drag=function(){var pe=re(Z,"drag","dragstart","dragend"),P=null,N=fe(Y,g.mouse,r,"mousemove","mouseup"),V=fe(lt,g.touch,L,"touchmove","touchend");function Z(){this.on("mousedown.drag",N).on("touchstart.drag",V)}function fe(me,we,Ae,Re,Xe){return function(){var nt,ht=this,Dt=g.event.target.correspondingElement||g.event.target,Ot=ht.parentNode,It=pe.of(ht,arguments),Lt=0,St=me(),Gt=".drag"+(null==St?"":"-"+St),Vt=g.select(Ae(Dt)).on(Re+Gt,En).on(Xe+Gt,jn),Yt=Bt(Dt),xn=we(Ot,St);function En(){var Nn,hr,dr=we(Ot,St);dr&&(Lt|=(Nn=dr[0]-xn[0])|(hr=dr[1]-xn[1]),xn=dr,It({type:"drag",x:dr[0]+nt[0],y:dr[1]+nt[1],dx:Nn,dy:hr}))}function jn(){we(Ot,St)&&(Vt.on(Re+Gt,null).on(Xe+Gt,null),Yt(Lt),It({type:"dragend"}))}nt=P?[(nt=P.apply(ht,arguments)).x-xn[0],nt.y-xn[1]]:[0,0],It({type:"dragstart"})}}return Z.origin=function(me){return arguments.length?(P=me,Z):P},g.rebind(Z,pe,"on")},g.touches=function(pe,P){return arguments.length<2&&(P=$().touches),P?w(P).map(function(N){var V=ft(pe,N);return V.identifier=N.identifier,V}):[]};var Ft=1e-6,Jt=Math.PI,ln=2*Jt,dn=ln-Ft,cn=Jt/2,Tn=Jt/180,nn=180/Jt;function Me(pe){return pe>1?cn:pe<-1?-cn:Math.asin(pe)}function Ee(pe){return((pe=Math.exp(pe))+1/pe)/2}var Se=Math.SQRT2;g.interpolateZoom=function(pe,P){var N,V,Z=pe[0],fe=pe[1],me=pe[2],Re=P[2],Xe=P[0]-Z,nt=P[1]-fe,ht=Xe*Xe+nt*nt;if(ht<1e-12)V=Math.log(Re/me)/Se,N=function(Gt){return[Z+Gt*Xe,fe+Gt*nt,me*Math.exp(Se*Gt*V)]};else{var Dt=Math.sqrt(ht),Ot=(Re*Re-me*me+4*ht)/(2*me*2*Dt),It=(Re*Re-me*me-4*ht)/(2*Re*2*Dt),Lt=Math.log(Math.sqrt(Ot*Ot+1)-Ot),St=Math.log(Math.sqrt(It*It+1)-It);V=(St-Lt)/Se,N=function(Gt){var Vt,jn,Yt=Gt*V,xn=Ee(Lt),En=me/(2*Dt)*(xn*(Vt=Se*Yt+Lt,((Vt=Math.exp(2*Vt))-1)/(Vt+1))-(jn=Lt,((jn=Math.exp(jn))-1/jn)/2));return[Z+En*Xe,fe+En*nt,me*xn/Ee(Se*Yt+Lt)]}}return N.duration=1e3*V,N},g.behavior.zoom=function(){var pe,P,N,V,Z,fe,me,we,Ae,Re={x:0,y:0,k:1},Xe=[960,500],nt=Je,ht=250,Dt=0,Ot="mousedown.zoom",It="mousemove.zoom",Lt="mouseup.zoom",St="touchstart.zoom",Gt=re(Vt,"zoomstart","zoom","zoomend");function Vt(ir){ir.on(Ot,wr).on(qe+".zoom",pi).on("dblclick.zoom",Li).on(St,Jr)}function Yt(ir){return[(ir[0]-Re.x)/Re.k,(ir[1]-Re.y)/Re.k]}function xn(ir){Re.k=Math.max(nt[0],Math.min(nt[1],ir))}function En(ir,jr){var mi;Re.x+=ir[0]-(jr=[(mi=jr)[0]*Re.k+Re.x,mi[1]*Re.k+Re.y])[0],Re.y+=ir[1]-jr[1]}function jn(ir,jr,mi,fi){ir.__chart__={x:Re.x,y:Re.y,k:Re.k},xn(Math.pow(2,fi)),En(P=jr,mi),ir=g.select(ir),ht>0&&(ir=ir.transition().duration(ht)),ir.call(Vt.event)}function Nn(){me&&me.domain(fe.range().map(function(ir){return(ir-Re.x)/Re.k}).map(fe.invert)),Ae&&Ae.domain(we.range().map(function(ir){return(ir-Re.y)/Re.k}).map(we.invert))}function hr(ir){Dt++||ir({type:"zoomstart"})}function dr(ir){Nn(),ir({type:"zoom",scale:Re.k,translate:[Re.x,Re.y]})}function Er(ir){--Dt||(ir({type:"zoomend"}),P=null)}function wr(){var ir=this,jr=Gt.of(ir,arguments),mi=0,fi=g.select(r(ir)).on(It,ta).on(Lt,xi),Mi=Yt(g.mouse(ir)),Ri=Bt(ir);function ta(){mi=1,En(g.mouse(ir),Mi),dr(jr)}function xi(){fi.on(It,null).on(Lt,null),Ri(mi),Er(jr)}Ao.call(ir),hr(jr)}function Jr(){var ir,jr=this,mi=Gt.of(jr,arguments),fi={},Mi=0,Ri=".zoom-"+g.event.changedTouches[0].identifier,ta="touchmove"+Ri,xi="touchend"+Ri,Hi=[],Bi=g.select(jr),ra=Bt(jr);function qi(){var oo=g.touches(jr);return ir=Re.k,oo.forEach(function(bo){bo.identifier in fi&&(fi[bo.identifier]=Yt(bo))}),oo}function aa(){var oo=g.event.target;g.select(oo).on(ta,ha).on(xi,ho),Hi.push(oo);for(var bo=g.event.changedTouches,Ya=0,Lo=bo.length;Ya<Lo;++Ya)fi[bo[Ya].identifier]=null;var po=qi(),ds=Date.now();if(1===po.length){if(ds-Z<500){var Zo=po[0];jn(jr,Zo,fi[Zo.identifier],Math.floor(Math.log(Re.k)/Math.LN2)+1),X()}Z=ds}else if(po.length>1){var Ns=po[1],tl=(Zo=po[0])[0]-Ns[0],Ol=Zo[1]-Ns[1];Mi=tl*tl+Ol*Ol}}function ha(){var oo,bo,Ya,Lo,po=g.touches(jr);Ao.call(jr);for(var ds=0,Zo=po.length;ds<Zo;++ds,Lo=null)if(Lo=fi[(Ya=po[ds]).identifier]){if(bo)break;oo=Ya,bo=Lo}if(Lo){var Ns=(Ns=Ya[0]-oo[0])*Ns+(Ns=Ya[1]-oo[1])*Ns,tl=Mi&&Math.sqrt(Ns/Mi);oo=[(oo[0]+Ya[0])/2,(oo[1]+Ya[1])/2],bo=[(bo[0]+Lo[0])/2,(bo[1]+Lo[1])/2],xn(tl*ir)}Z=null,En(oo,bo),dr(mi)}function ho(){if(g.event.touches.length){for(var oo=g.event.changedTouches,bo=0,Ya=oo.length;bo<Ya;++bo)delete fi[oo[bo].identifier];for(var Lo in fi)return void qi()}g.selectAll(Hi).on(Ri,null),Bi.on(Ot,wr).on(St,Jr),ra(),Er(mi)}aa(),hr(mi),Bi.on(Ot,null).on(St,aa)}function pi(){var ir=Gt.of(this,arguments);V?clearTimeout(V):(Ao.call(this),pe=Yt(P=N||g.mouse(this)),hr(ir)),V=setTimeout(function(){V=null,Er(ir)},50),X(),xn(Math.pow(2,.002*je())*Re.k),En(P,pe),dr(ir)}function Li(){var ir=g.mouse(this),jr=Math.log(Re.k)/Math.LN2;jn(this,ir,Yt(ir),g.event.shiftKey?Math.ceil(jr)-1:Math.floor(jr)+1)}return qe||(qe="onwheel"in y?(je=function(){return-g.event.deltaY*(g.event.deltaMode?120:1)},"wheel"):"onmousewheel"in y?(je=function(){return g.event.wheelDelta},"mousewheel"):(je=function(){return-g.event.detail},"MozMousePixelScroll")),Vt.event=function(ir){ir.each(function(){var jr=Gt.of(this,arguments),mi=Re;hs?g.select(this).transition().each("start.zoom",function(){Re=this.__chart__||{x:0,y:0,k:1},hr(jr)}).tween("zoom:zoom",function(){var fi=Xe[0],Ri=P?P[0]:fi/2,ta=P?P[1]:Xe[1]/2,xi=g.interpolateZoom([(Ri-Re.x)/Re.k,(ta-Re.y)/Re.k,fi/Re.k],[(Ri-mi.x)/mi.k,(ta-mi.y)/mi.k,fi/mi.k]);return function(Hi){var Bi=xi(Hi),ra=fi/Bi[2];this.__chart__=Re={x:Ri-Bi[0]*ra,y:ta-Bi[1]*ra,k:ra},dr(jr)}}).each("interrupt.zoom",function(){Er(jr)}).each("end.zoom",function(){Er(jr)}):(this.__chart__=Re,hr(jr),dr(jr),Er(jr))})},Vt.translate=function(ir){return arguments.length?(Re={x:+ir[0],y:+ir[1],k:Re.k},Nn(),Vt):[Re.x,Re.y]},Vt.scale=function(ir){return arguments.length?(Re={x:Re.x,y:Re.y,k:null},xn(+ir),Nn(),Vt):Re.k},Vt.scaleExtent=function(ir){return arguments.length?(nt=null==ir?Je:[+ir[0],+ir[1]],Vt):nt},Vt.center=function(ir){return arguments.length?(N=ir&&[+ir[0],+ir[1]],Vt):N},Vt.size=function(ir){return arguments.length?(Xe=ir&&[+ir[0],+ir[1]],Vt):Xe},Vt.duration=function(ir){return arguments.length?(ht=+ir,Vt):ht},Vt.x=function(ir){return arguments.length?(me=ir,fe=ir.copy(),Re={x:0,y:0,k:1},Vt):me},Vt.y=function(ir){return arguments.length?(Ae=ir,we=ir.copy(),Re={x:0,y:0,k:1},Vt):Ae},g.rebind(Vt,Gt,"on")};var je,qe,Je=[0,1/0];function at(){}function it(pe,P,N){return this instanceof it?(this.h=+pe,this.s=+P,void(this.l=+N)):arguments.length<2?pe instanceof it?new it(pe.h,pe.s,pe.l):qn(""+pe,gn,it):new it(pe,P,N)}g.color=at,at.prototype.toString=function(){return this.rgb()+""},g.hsl=it;var yt=it.prototype=new at;function vt(pe,P,N){var V,Z;function fe(me){return Math.round(255*((we=me)>360?we-=360:we<0&&(we+=360),we<60?V+(Z-V)*we/60:we<180?Z:we<240?V+(Z-V)*(240-we)/60:V));var we}return pe=isNaN(pe)?0:(pe%=360)<0?pe+360:pe,P=isNaN(P)||P<0?0:P>1?1:P,V=2*(N=N<0?0:N>1?1:N)-(Z=N<=.5?N*(1+P):N+P-N*P),new zt(fe(pe+120),fe(pe),fe(pe-120))}function Ut(pe,P,N){return this instanceof Ut?(this.h=+pe,this.c=+P,void(this.l=+N)):arguments.length<2?pe instanceof Ut?new Ut(pe.h,pe.c,pe.l):Ne(pe instanceof At?pe.l:(pe=sn((pe=g.rgb(pe)).r,pe.g,pe.b)).l,pe.a,pe.b):new Ut(pe,P,N)}yt.brighter=function(pe){return pe=Math.pow(.7,arguments.length?pe:1),new it(this.h,this.s,this.l/pe)},yt.darker=function(pe){return pe=Math.pow(.7,arguments.length?pe:1),new it(this.h,this.s,pe*this.l)},yt.rgb=function(){return vt(this.h,this.s,this.l)},g.hcl=Ut;var Wt=Ut.prototype=new at;function gt(pe,P,N){return isNaN(pe)&&(pe=0),isNaN(P)&&(P=0),new At(N,Math.cos(pe*=Tn)*P,Math.sin(pe)*P)}function At(pe,P,N){return this instanceof At?(this.l=+pe,this.a=+P,void(this.b=+N)):arguments.length<2?pe instanceof At?new At(pe.l,pe.a,pe.b):pe instanceof Ut?gt(pe.h,pe.c,pe.l):sn((pe=zt(pe)).r,pe.g,pe.b):new At(pe,P,N)}Wt.brighter=function(pe){return new Ut(this.h,this.c,Math.min(100,this.l+Zt*(arguments.length?pe:1)))},Wt.darker=function(pe){return new Ut(this.h,this.c,Math.max(0,this.l-Zt*(arguments.length?pe:1)))},Wt.rgb=function(){return gt(this.h,this.c,this.l).rgb()},g.lab=At;var Zt=18,Et=At.prototype=new at;function Ct(pe,P,N){var V=(pe+16)/116,Z=V+P/500,fe=V-N/200;return new zt(Mt(3.2404542*(Z=.95047*et(Z))-1.5371385*(V=1*et(V))-.4985314*(fe=1.08883*et(fe))),Mt(-.969266*Z+1.8760108*V+.041556*fe),Mt(.0556434*Z-.2040259*V+1.0572252*fe))}function Ne(pe,P,N){return pe>0?new Ut(Math.atan2(N,P)*nn,Math.sqrt(P*P+N*N),pe):new Ut(NaN,NaN,pe)}function et(pe){return pe>.206893034?pe*pe*pe:(pe-4/29)/7.787037}function dt(pe){return pe>.008856?Math.pow(pe,1/3):7.787037*pe+4/29}function Mt(pe){return Math.round(255*(pe<=.00304?12.92*pe:1.055*Math.pow(pe,1/2.4)-.055))}function zt(pe,P,N){return this instanceof zt?(this.r=~~pe,this.g=~~P,void(this.b=~~N)):arguments.length<2?pe instanceof zt?new zt(pe.r,pe.g,pe.b):qn(""+pe,zt,vt):new zt(pe,P,N)}function Xt(pe){return new zt(pe>>16,pe>>8&255,255&pe)}function un(pe){return Xt(pe)+""}Et.brighter=function(pe){return new At(Math.min(100,this.l+Zt*(arguments.length?pe:1)),this.a,this.b)},Et.darker=function(pe){return new At(Math.max(0,this.l-Zt*(arguments.length?pe:1)),this.a,this.b)},Et.rgb=function(){return Ct(this.l,this.a,this.b)},g.rgb=zt;var Qt=zt.prototype=new at;function kn(pe){return pe<16?"0"+Math.max(0,pe).toString(16):Math.min(255,pe).toString(16)}function qn(pe,P,N){var V,Z,fe,me=0,we=0,Ae=0;if(V=/([a-z]+)\((.*)\)/.exec(pe=pe.toLowerCase()))switch(Z=V[2].split(","),V[1]){case"hsl":return N(parseFloat(Z[0]),parseFloat(Z[1])/100,parseFloat(Z[2])/100);case"rgb":return P(pn(Z[0]),pn(Z[1]),pn(Z[2]))}return(fe=Mn.get(pe))?P(fe.r,fe.g,fe.b):(null==pe||"#"!==pe.charAt(0)||isNaN(fe=parseInt(pe.slice(1),16))||(4===pe.length?(me=(3840&fe)>>4,me|=me>>4,we=240&fe,we|=we>>4,Ae=15&fe,Ae|=Ae<<4):7===pe.length&&(me=(16711680&fe)>>16,we=(65280&fe)>>8,Ae=255&fe)),P(me,we,Ae))}function gn(pe,P,N){var V,Z,fe=Math.min(pe/=255,P/=255,N/=255),me=Math.max(pe,P,N),we=me-fe,Ae=(me+fe)/2;return we?(Z=Ae<.5?we/(me+fe):we/(2-me-fe),V=pe==me?(P-N)/we+(P<N?6:0):P==me?(N-pe)/we+2:(pe-P)/we+4,V*=60):(V=NaN,Z=Ae>0&&Ae<1?0:V),new it(V,Z,Ae)}function sn(pe,P,N){var V=dt((.4124564*(pe=vn(pe))+.3575761*(P=vn(P))+.1804375*(N=vn(N)))/.95047),Z=dt((.2126729*pe+.7151522*P+.072175*N)/1);return At(116*Z-16,500*(V-Z),200*(Z-dt((.0193339*pe+.119192*P+.9503041*N)/1.08883)))}function vn(pe){return(pe/=255)<=.04045?pe/12.92:Math.pow((pe+.055)/1.055,2.4)}function pn(pe){var P=parseFloat(pe);return"%"===pe.charAt(pe.length-1)?Math.round(2.55*P):P}Qt.brighter=function(pe){pe=Math.pow(.7,arguments.length?pe:1);var P=this.r,N=this.g,V=this.b,Z=30;return P||N||V?(P&&P<Z&&(P=Z),N&&N<Z&&(N=Z),V&&V<Z&&(V=Z),new zt(Math.min(255,P/pe),Math.min(255,N/pe),Math.min(255,V/pe))):new zt(Z,Z,Z)},Qt.darker=function(pe){return new zt((pe=Math.pow(.7,arguments.length?pe:1))*this.r,pe*this.g,pe*this.b)},Qt.hsl=function(){return gn(this.r,this.g,this.b)},Qt.toString=function(){return"#"+kn(this.r)+kn(this.g)+kn(this.b)};var Mn=g.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Rn(pe){return"function"==typeof pe?pe:function(){return pe}}function Xn(pe){return function(P,N,V){return 2===arguments.length&&"function"==typeof N&&(V=N,N=null),Hn(P,N,pe,V)}}function Hn(pe,P,N,V){var Xe,Z={},fe=g.dispatch("beforesend","progress","load","error"),me={},we=new XMLHttpRequest,Ae=null;function Re(){var Xe,ht,Dt,nt=we.status;if(!nt&&((Dt=(ht=we).responseType)&&"text"!==Dt?ht.response:ht.responseText)||nt>=200&&nt<300||304===nt){try{Xe=N.call(Z,we)}catch(ht){return void fe.error.call(Z,ht)}fe.load.call(Z,Xe)}else fe.error.call(Z,we)}return self.XDomainRequest&&!("withCredentials"in we)&&/^(http(s)?:)?\/\//.test(pe)&&(we=new XDomainRequest),"onload"in we?we.onload=we.onerror=Re:we.onreadystatechange=function(){we.readyState>3&&Re()},we.onprogress=function(Xe){var nt=g.event;g.event=Xe;try{fe.progress.call(Z,we)}finally{g.event=nt}},Z.header=function(Xe,nt){return Xe=(Xe+"").toLowerCase(),arguments.length<2?me[Xe]:(null==nt?delete me[Xe]:me[Xe]=nt+"",Z)},Z.mimeType=function(Xe){return arguments.length?(P=null==Xe?null:Xe+"",Z):P},Z.responseType=function(Xe){return arguments.length?(Ae=Xe,Z):Ae},Z.response=function(Xe){return N=Xe,Z},["get","post"].forEach(function(Xe){Z[Xe]=function(){return Z.send.apply(Z,[Xe].concat(w(arguments)))}}),Z.send=function(Xe,nt,ht){if(2===arguments.length&&"function"==typeof nt&&(ht=nt,nt=null),we.open(Xe,pe,!0),null==P||"accept"in me||(me.accept=P+",*/*"),we.setRequestHeader)for(var Dt in me)we.setRequestHeader(Dt,me[Dt]);return null!=P&&we.overrideMimeType&&we.overrideMimeType(P),null!=Ae&&(we.responseType=Ae),null!=ht&&Z.on("error",ht).on("load",function(Ot){ht(null,Ot)}),fe.beforesend.call(Z,we),we.send(null==nt?null:nt),Z},Z.abort=function(){return we.abort(),Z},g.rebind(Z,fe,"on"),null==V?Z:Z.get(1===(Xe=V).length?function(nt,ht){Xe(null==nt?ht:null)}:Xe)}Mn.forEach(function(pe,P){Mn.set(pe,Xt(P))}),g.functor=Rn,g.xhr=Xn(L),g.dsv=function(pe,P){var N=new RegExp('["'+pe+"\n]"),V=pe.charCodeAt(0);function Z(Re,Xe,nt){arguments.length<3&&(nt=Xe,Xe=null);var ht=Hn(Re,P,null==Xe?fe:me(Xe),nt);return ht.row=function(Dt){return arguments.length?ht.response(null==(Xe=Dt)?fe:me(Dt)):Xe},ht}function fe(Re){return Z.parse(Re.responseText)}function me(Re){return function(Xe){return Z.parse(Xe.responseText,Re)}}function we(Re){return Re.map(Ae).join(pe)}function Ae(Re){return N.test(Re)?'"'+Re.replace(/\"/g,'""')+'"':Re}return Z.parse=function(Re,Xe){var nt;return Z.parseRows(Re,function(ht,Dt){if(nt)return nt(ht,Dt-1);var Ot=function(It){for(var Lt={},St=ht.length,Gt=0;Gt<St;++Gt)Lt[ht[Gt]]=It[Gt];return Lt};nt=Xe?function(It,Lt){return Xe(Ot(It),Lt)}:Ot})},Z.parseRows=function(Re,Xe){var nt,ht,Dt={},Ot={},It=[],Lt=Re.length,St=0,Gt=0;function Vt(){if(St>=Lt)return Ot;if(ht)return ht=!1,Dt;var xn=St;if(34===Re.charCodeAt(xn)){for(var En=xn;En++<Lt;)if(34===Re.charCodeAt(En)){if(34!==Re.charCodeAt(En+1))break;++En}return St=En+2,13===(jn=Re.charCodeAt(En+1))?(ht=!0,10===Re.charCodeAt(En+2)&&++St):10===jn&&(ht=!0),Re.slice(xn+1,En).replace(/""/g,'"')}for(;St<Lt;){var jn,Nn=1;if(10===(jn=Re.charCodeAt(St++)))ht=!0;else if(13===jn)ht=!0,10===Re.charCodeAt(St)&&(++St,++Nn);else if(jn!==V)continue;return Re.slice(xn,St-Nn)}return Re.slice(xn)}for(;(nt=Vt())!==Ot;){for(var Yt=[];nt!==Dt&&nt!==Ot;)Yt.push(nt),nt=Vt();Xe&&null==(Yt=Xe(Yt,Gt++))||It.push(Yt)}return It},Z.format=function(Re){if(Array.isArray(Re[0]))return Z.formatRows(Re);var Xe=new D,nt=[];return Re.forEach(function(ht){for(var Dt in ht)Xe.has(Dt)||nt.push(Xe.add(Dt))}),[nt.map(Ae).join(pe)].concat(Re.map(function(ht){return nt.map(function(Dt){return Ae(ht[Dt])}).join(pe)})).join("\n")},Z.formatRows=function(Re){return Re.map(we).join("\n")},Z},g.csv=g.dsv(",","text/csv"),g.tsv=g.dsv("\t","text/tab-separated-values");var rr,er,Ir,Or,ni=this[j(this,"requestAnimationFrame")]||function(pe){setTimeout(pe,17)};function Br(pe,P,N){var V=arguments.length;V<2&&(P=0),V<3&&(N=Date.now());var fe={c:pe,t:N+P,n:null};return er?er.n=fe:rr=fe,er=fe,Ir||(Or=clearTimeout(Or),Ir=1,ni(Dr)),fe}function Dr(){var pe=Rr(),P=yi()-pe;P>24?(isFinite(P)&&(clearTimeout(Or),Or=setTimeout(Dr,P)),Ir=0):(Ir=1,ni(Dr))}function Rr(){for(var pe=Date.now(),P=rr;P;)pe>=P.t&&P.c(pe-P.t)&&(P.c=null),P=P.n;return pe}function yi(){for(var pe,P=rr,N=1/0;P;)P.c?(P.t<N&&(N=P.t),P=(pe=P).n):P=pe?pe.n=P.n:rr=P.n;return er=pe,N}function $n(pe){return pe[0]}function Mr(pe){return pe[1]}function br(pe){for(var P,N,V,Z=pe.length,fe=[0,1],me=2,we=2;we<Z;we++){for(;me>1&&((N=pe[fe[me-1]])[0]-(P=pe[fe[me-2]])[0])*((V=pe[we])[1]-P[1])-(N[1]-P[1])*(V[0]-P[0])<=0;)--me;fe[me++]=we}return fe.slice(0,me)}function ar(pe,P){return pe[0]-P[0]||pe[1]-P[1]}g.timer=function(){Br.apply(this,arguments)},g.timer.flush=function(){Rr(),yi()},g.round=function(pe,P){return P?Math.round(pe*(P=Math.pow(10,P)))/P:Math.round(pe)},g.geom={},g.geom.hull=function(pe){var P=$n,N=Mr;if(arguments.length)return V(pe);function V(Z){if(Z.length<3)return[];var fe,me=Rn(P),we=Rn(N),Ae=Z.length,Re=[],Xe=[];for(fe=0;fe<Ae;fe++)Re.push([+me.call(this,Z[fe],fe),+we.call(this,Z[fe],fe),fe]);for(Re.sort(ar),fe=0;fe<Ae;fe++)Xe.push([Re[fe][0],-Re[fe][1]]);var nt=br(Re),ht=br(Xe),Dt=ht[0]===nt[0],Ot=ht[ht.length-1]===nt[nt.length-1],It=[];for(fe=nt.length-1;fe>=0;--fe)It.push(Z[Re[nt[fe]][2]]);for(fe=+Dt;fe<ht.length-Ot;++fe)It.push(Z[Re[ht[fe]][2]]);return It}return V.x=function(Z){return arguments.length?(P=Z,V):P},V.y=function(Z){return arguments.length?(N=Z,V):N},V},g.geom.polygon=function(pe){return U(pe,si),pe};var si=g.geom.polygon.prototype=[];function ri(pe,P,N){return(N[0]-P[0])*(pe[1]-P[1])<(N[1]-P[1])*(pe[0]-P[0])}function Cr(pe,P,N,V){var Z=pe[0],fe=N[0],me=P[0]-Z,we=V[0]-fe,Ae=pe[1],Re=N[1],Xe=P[1]-Ae,nt=V[1]-Re,ht=(we*(Ae-Re)-nt*(Z-fe))/(nt*me-we*Xe);return[Z+ht*me,Ae+ht*Xe]}function Pr(pe){var P=pe[0],N=pe[pe.length-1];return!(P[0]-N[0]||P[1]-N[1])}si.area=function(){for(var pe,P=-1,N=this.length,V=this[N-1],Z=0;++P<N;)Z+=(pe=V)[1]*(V=this[P])[0]-pe[0]*V[1];return.5*Z},si.centroid=function(pe){var P,N,V=-1,Z=this.length,fe=0,me=0,we=this[Z-1];for(arguments.length||(pe=-1/(6*this.area()));++V<Z;)fe+=((P=we)[0]+(we=this[V])[0])*(N=P[0]*we[1]-we[0]*P[1]),me+=(P[1]+we[1])*N;return[fe*pe,me*pe]},si.clip=function(pe){for(var P,N,V,Z,fe,me,we=Pr(pe),Ae=-1,Re=this.length-Pr(this),Xe=this[Re-1];++Ae<Re;){for(P=pe.slice(),pe.length=0,Z=this[Ae],fe=P[(V=P.length-we)-1],N=-1;++N<V;)ri(me=P[N],Xe,Z)?(ri(fe,Xe,Z)||pe.push(Cr(fe,me,Xe,Z)),pe.push(me)):ri(fe,Xe,Z)&&pe.push(Cr(fe,me,Xe,Z)),fe=me;we&&pe.push(pe[0]),Xe=Z}return pe};var vr,hn,Jn,jt,fn,Sn=[],Kn=[];function Wn(){Nr(this),this.edge=this.site=this.circle=null}function Pn(pe){var P=Sn.pop()||new Wn;return P.site=pe,P}function Un(pe){Lr(pe),Jn.remove(pe),Sn.push(pe),Nr(pe)}function Cn(pe){var P=pe.circle,N=P.x,V=P.cy,Z={x:N,y:V},fe=pe.P,me=pe.N,we=[pe];Un(pe);for(var Ae=fe;Ae.circle&&o(N-Ae.circle.x)<Ft&&o(V-Ae.circle.cy)<Ft;)fe=Ae.P,we.unshift(Ae),Un(Ae),Ae=fe;we.unshift(Ae),Lr(Ae);for(var Re=me;Re.circle&&o(N-Re.circle.x)<Ft&&o(V-Re.circle.cy)<Ft;)me=Re.N,we.push(Re),Un(Re),Re=me;we.push(Re),Lr(Re);var Xe,nt=we.length;for(Xe=1;Xe<nt;++Xe)ci((Re=we[Xe]).edge,(Ae=we[Xe-1]).site,Re.site,Z);(Re=we[nt-1]).edge=Yr((Ae=we[0]).site,Re.site,null,Z),yr(Ae),yr(Re)}function On(pe){for(var P,N,V,Z,fe=pe.x,me=pe.y,we=Jn._;we;)if((V=Fn(we,me)-fe)>Ft)we=we.L;else{if(!((Z=fe-Gn(we,me))>Ft)){V>-Ft?(P=we.P,N=we):Z>-Ft?(P=we,N=we.N):P=N=we;break}if(!we.R){P=we;break}we=we.R}var Ae=Pn(pe);if(Jn.insert(P,Ae),P||N){if(P===N)return Lr(P),N=Pn(P.site),Jn.insert(Ae,N),Ae.edge=N.edge=Yr(P.site,Ae.site),yr(P),void yr(N);if(N){Lr(P),Lr(N);var Re=P.site,Xe=Re.x,nt=Re.y,ht=pe.x-Xe,Dt=pe.y-nt,Ot=N.site,It=Ot.x-Xe,Lt=Ot.y-nt,St=2*(ht*Lt-Dt*It),Gt=ht*ht+Dt*Dt,Vt=It*It+Lt*Lt,Yt={x:(Lt*Gt-Dt*Vt)/St+Xe,y:(ht*Vt-It*Gt)/St+nt};ci(N.edge,Re,Ot,Yt),Ae.edge=Yr(Re,pe,null,Yt),N.edge=Yr(pe,Ot,null,Yt),yr(P),yr(N)}else Ae.edge=Yr(P.site,Ae.site)}}function Fn(pe,P){var N=pe.site,V=N.x,Z=N.y,fe=Z-P;if(!fe)return V;var me=pe.P;if(!me)return-1/0;var we=(N=me.site).x,Ae=N.y,Re=Ae-P;if(!Re)return we;var Xe=we-V,nt=1/fe-1/Re,ht=Xe/Re;return nt?(-ht+Math.sqrt(ht*ht-2*nt*(Xe*Xe/(-2*Re)-Ae+Re/2+Z-fe/2)))/nt+V:(V+we)/2}function Gn(pe,P){var N=pe.N;if(N)return Fn(N,P);var V=pe.site;return V.y===P?V.x:1/0}function or(pe){this.site=pe,this.edges=[]}function sr(pe,P){return P.angle-pe.angle}function pr(){Nr(this),this.x=this.y=this.arc=this.site=this.cy=null}function yr(pe){var P=pe.P,N=pe.N;if(P&&N){var V=P.site,Z=pe.site,fe=N.site;if(V!==fe){var me=Z.x,we=Z.y,Ae=V.x-me,Re=V.y-we,Xe=fe.x-me,nt=2*(Ae*(Lt=fe.y-we)-Re*Xe);if(!(nt>=-1e-12)){var ht=Ae*Ae+Re*Re,Dt=Xe*Xe+Lt*Lt,Ot=(Lt*ht-Re*Dt)/nt,It=(Ae*Dt-Xe*ht)/nt,Lt=It+we,St=Kn.pop()||new pr;St.arc=pe,St.site=Z,St.x=Ot+me,St.y=Lt+Math.sqrt(Ot*Ot+It*It),St.cy=Lt,pe.circle=St;for(var Gt=null,Vt=fn._;Vt;)if(St.y<Vt.y||St.y===Vt.y&&St.x<=Vt.x){if(!Vt.L){Gt=Vt.P;break}Vt=Vt.L}else{if(!Vt.R){Gt=Vt;break}Vt=Vt.R}fn.insert(Gt,St),Gt||(jt=St)}}}}function Lr(pe){var P=pe.circle;P&&(P.P||(jt=P.N),fn.remove(P),Kn.push(P),Nr(P),pe.circle=null)}function zr(pe,P){var N=pe.b;if(N)return!0;var V,Z,fe=pe.a,me=P[0][0],we=P[1][0],Ae=P[0][1],Re=P[1][1],Xe=pe.l,nt=pe.r,ht=Xe.x,Dt=Xe.y,Ot=nt.x,It=nt.y,Lt=(ht+Ot)/2;if(It===Dt){if(Lt<me||Lt>=we)return;if(ht>Ot){if(fe){if(fe.y>=Re)return}else fe={x:Lt,y:Ae};N={x:Lt,y:Re}}else{if(fe){if(fe.y<Ae)return}else fe={x:Lt,y:Re};N={x:Lt,y:Ae}}}else if(Z=(Dt+It)/2-(V=(ht-Ot)/(It-Dt))*Lt,V<-1||V>1)if(ht>Ot){if(fe){if(fe.y>=Re)return}else fe={x:(Ae-Z)/V,y:Ae};N={x:(Re-Z)/V,y:Re}}else{if(fe){if(fe.y<Ae)return}else fe={x:(Re-Z)/V,y:Re};N={x:(Ae-Z)/V,y:Ae}}else if(Dt<It){if(fe){if(fe.x>=we)return}else fe={x:me,y:V*me+Z};N={x:we,y:V*we+Z}}else{if(fe){if(fe.x<me)return}else fe={x:we,y:V*we+Z};N={x:me,y:V*me+Z}}return pe.a=fe,pe.b=N,!0}function cr(pe,P){this.l=pe,this.r=P,this.a=this.b=null}function Yr(pe,P,N,V){var Z=new cr(pe,P);return vr.push(Z),N&&ci(Z,pe,P,N),V&&ci(Z,P,pe,V),hn[pe.i].edges.push(new Wi(Z,pe,P)),hn[P.i].edges.push(new Wi(Z,P,pe)),Z}function Qr(pe,P,N){var V=new cr(pe,null);return V.a=P,V.b=N,vr.push(V),V}function ci(pe,P,N,V){pe.a||pe.b?pe.l===N?pe.b=V:pe.a=V:(pe.a=V,pe.l=P,pe.r=N)}function Wi(pe,P,N){var V=pe.a,Z=pe.b;this.edge=pe,this.site=P,this.angle=N?Math.atan2(N.y-P.y,N.x-P.x):pe.l===P?Math.atan2(Z.x-V.x,V.y-Z.y):Math.atan2(V.x-Z.x,Z.y-V.y)}function Zi(){this._=null}function Nr(pe){pe.U=pe.C=pe.L=pe.R=pe.P=pe.N=null}function hi(pe,P){var N=P,V=P.R,Z=N.U;Z?Z.L===N?Z.L=V:Z.R=V:pe._=V,V.U=Z,N.U=V,N.R=V.L,N.R&&(N.R.U=N),V.L=N}function bi(pe,P){var N=P,V=P.L,Z=N.U;Z?Z.L===N?Z.L=V:Z.R=V:pe._=V,V.U=Z,N.U=V,N.L=V.R,N.L&&(N.L.U=N),V.R=N}function ya(pe){for(;pe.L;)pe=pe.L;return pe}function Ia(pe,P){var N,V,Z,fe=pe.sort(Po).pop();for(vr=[],hn=new Array(pe.length),Jn=new Zi,fn=new Zi;;)if(Z=jt,fe&&(!Z||fe.y<Z.y||fe.y===Z.y&&fe.x<Z.x))fe.x===N&&fe.y===V||(hn[fe.i]=new or(fe),On(fe),N=fe.x,V=fe.y),fe=pe.pop();else{if(!Z)break;Cn(Z.arc)}P&&(function(we){for(var Ae,Re,Xe,nt,ht,Dt=vr,Ot=(Re=we[0][0],Xe=we[0][1],nt=we[1][0],ht=we[1][1],function(Lt){var St,Gt=Lt.a,Vt=Lt.b,Yt=Gt.x,xn=Gt.y,En=0,jn=1,Nn=Vt.x-Yt,hr=Vt.y-xn;if(St=Re-Yt,Nn||!(St>0)){if(St/=Nn,Nn<0){if(St<En)return;St<jn&&(jn=St)}else if(Nn>0){if(St>jn)return;St>En&&(En=St)}if(St=nt-Yt,Nn||!(St<0)){if(St/=Nn,Nn<0){if(St>jn)return;St>En&&(En=St)}else if(Nn>0){if(St<En)return;St<jn&&(jn=St)}if(St=Xe-xn,hr||!(St>0)){if(St/=hr,hr<0){if(St<En)return;St<jn&&(jn=St)}else if(hr>0){if(St>jn)return;St>En&&(En=St)}if(St=ht-xn,hr||!(St<0)){if(St/=hr,hr<0){if(St>jn)return;St>En&&(En=St)}else if(hr>0){if(St<En)return;St<jn&&(jn=St)}return En>0&&(Lt.a={x:Yt+En*Nn,y:xn+En*hr}),jn<1&&(Lt.b={x:Yt+jn*Nn,y:xn+jn*hr}),Lt}}}}}),It=Dt.length;It--;)(!zr(Ae=Dt[It],we)||!Ot(Ae)||o(Ae.a.x-Ae.b.x)<Ft&&o(Ae.a.y-Ae.b.y)<Ft)&&(Ae.a=Ae.b=null,Dt.splice(It,1))}(P),function(we){for(var Ae,Re,Xe,nt,ht,Dt,Ot,It,Lt,St,Gt=we[0][0],Vt=we[1][0],Yt=we[0][1],xn=we[1][1],En=hn,jn=En.length;jn--;)if((ht=En[jn])&&ht.prepare())for(It=(Ot=ht.edges).length,Dt=0;Dt<It;)Xe=(St=Ot[Dt].end()).x,nt=St.y,Ae=(Lt=Ot[++Dt%It].start()).x,Re=Lt.y,(o(Xe-Ae)>Ft||o(nt-Re)>Ft)&&(Ot.splice(Dt,0,new Wi(Qr(ht.site,St,o(Xe-Gt)<Ft&&xn-nt>Ft?{x:Gt,y:o(Ae-Gt)<Ft?Re:xn}:o(nt-xn)<Ft&&Vt-Xe>Ft?{x:o(Re-xn)<Ft?Ae:Vt,y:xn}:o(Xe-Vt)<Ft&&nt-Yt>Ft?{x:Vt,y:o(Ae-Vt)<Ft?Re:Yt}:o(nt-Yt)<Ft&&Xe-Gt>Ft?{x:o(Re-Yt)<Ft?Ae:Gt,y:Yt}:null),ht.site,null)),++It)}(P));var me={cells:hn,edges:vr};return Jn=fn=vr=hn=null,me}function Po(pe,P){return P.y-pe.y||P.x-pe.x}or.prototype.prepare=function(){for(var pe,P=this.edges,N=P.length;N--;)(pe=P[N].edge).b&&pe.a||P.splice(N,1);return P.sort(sr),P.length},Wi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Zi.prototype={insert:function(pe,P){var N,V,Z;if(pe){if(P.P=pe,P.N=pe.N,pe.N&&(pe.N.P=P),pe.N=P,pe.R){for(pe=pe.R;pe.L;)pe=pe.L;pe.L=P}else pe.R=P;N=pe}else this._?(pe=ya(this._),P.P=null,P.N=pe,pe.P=pe.L=P,N=pe):(P.P=P.N=null,this._=P,N=null);for(P.L=P.R=null,P.U=N,P.C=!0,pe=P;N&&N.C;)N===(V=N.U).L?(Z=V.R)&&Z.C?(N.C=Z.C=!1,V.C=!0,pe=V):(pe===N.R&&(hi(this,N),N=(pe=N).U),N.C=!1,V.C=!0,bi(this,V)):(Z=V.L)&&Z.C?(N.C=Z.C=!1,V.C=!0,pe=V):(pe===N.L&&(bi(this,N),N=(pe=N).U),N.C=!1,V.C=!0,hi(this,V)),N=pe.U;this._.C=!1},remove:function(pe){pe.N&&(pe.N.P=pe.P),pe.P&&(pe.P.N=pe.N),pe.N=pe.P=null;var P,N,V,Z=pe.U,fe=pe.L,me=pe.R;if(N=fe?me?ya(me):fe:me,Z?Z.L===pe?Z.L=N:Z.R=N:this._=N,fe&&me?(V=N.C,N.C=pe.C,N.L=fe,fe.U=N,N!==me?(Z=N.U,N.U=pe.U,Z.L=pe=N.R,N.R=me,me.U=N):(N.U=Z,Z=N,pe=N.R)):(V=pe.C,pe=N),pe&&(pe.U=Z),!V)if(pe&&pe.C)pe.C=!1;else{do{if(pe===this._)break;if(pe===Z.L){if((P=Z.R).C&&(P.C=!1,Z.C=!0,hi(this,Z),P=Z.R),P.L&&P.L.C||P.R&&P.R.C){P.R&&P.R.C||(P.L.C=!1,P.C=!0,bi(this,P),P=Z.R),P.C=Z.C,Z.C=P.R.C=!1,hi(this,Z),pe=this._;break}}else if((P=Z.L).C&&(P.C=!1,Z.C=!0,bi(this,Z),P=Z.L),P.L&&P.L.C||P.R&&P.R.C){P.L&&P.L.C||(P.R.C=!1,P.C=!0,hi(this,P),P=Z.L),P.C=Z.C,Z.C=P.L.C=!1,bi(this,Z),pe=this._;break}P.C=!0,pe=Z,Z=Z.U}while(!pe.C);pe&&(pe.C=!1)}}},g.geom.voronoi=function(pe){var P=$n,N=Mr,V=P,Z=N,fe=os;if(pe)return me(pe);function me(Ae){var Re=new Array(Ae.length),Xe=fe[0][0],nt=fe[0][1],ht=fe[1][0],Dt=fe[1][1];return Ia(we(Ae),fe).cells.forEach(function(Ot,It){var Lt=Ot.edges,St=Ot.site;(Re[It]=Lt.length?Lt.map(function(Gt){var Vt=Gt.start();return[Vt.x,Vt.y]}):St.x>=Xe&&St.x<=ht&&St.y>=nt&&St.y<=Dt?[[Xe,Dt],[ht,Dt],[ht,nt],[Xe,nt]]:[]).point=Ae[It]}),Re}function we(Ae){return Ae.map(function(Re,Xe){return{x:Math.round(V(Re,Xe)/Ft)*Ft,y:Math.round(Z(Re,Xe)/Ft)*Ft,i:Xe}})}return me.links=function(Ae){return Ia(we(Ae)).edges.filter(function(Re){return Re.l&&Re.r}).map(function(Re){return{source:Ae[Re.l.i],target:Ae[Re.r.i]}})},me.triangles=function(Ae){var Re=[];return Ia(we(Ae)).cells.forEach(function(Xe,nt){for(var ht,Dt,Ot,It,Lt=Xe.site,St=Xe.edges.sort(sr),Gt=-1,Vt=St.length,Yt=St[Vt-1].edge,xn=Yt.l===Lt?Yt.r:Yt.l;++Gt<Vt;)ht=xn,xn=(Yt=St[Gt].edge).l===Lt?Yt.r:Yt.l,nt<ht.i&&nt<xn.i&&((Dt=Lt).x-(It=xn).x)*((Ot=ht).y-Dt.y)-(Dt.x-Ot.x)*(It.y-Dt.y)<0&&Re.push([Ae[nt],Ae[ht.i],Ae[xn.i]])}),Re},me.x=function(Ae){return arguments.length?(V=Rn(P=Ae),me):P},me.y=function(Ae){return arguments.length?(Z=Rn(N=Ae),me):N},me.clipExtent=function(Ae){return arguments.length?(fe=null==Ae?os:Ae,me):fe===os?null:fe},me.size=function(Ae){return arguments.length?me.clipExtent(Ae&&[[0,0],Ae]):fe===os?null:fe&&fe[1]},me};var os=[[-1e6,-1e6],[1e6,1e6]];function Pa(pe){return pe.x}function Fa(pe){return pe.y}function oa(pe,P,N,V,Z,fe){if(!pe(P,N,V,Z,fe)){var me=.5*(N+Z),we=.5*(V+fe),Ae=P.nodes;Ae[0]&&oa(pe,Ae[0],N,V,me,we),Ae[1]&&oa(pe,Ae[1],me,V,Z,we),Ae[2]&&oa(pe,Ae[2],N,we,me,fe),Ae[3]&&oa(pe,Ae[3],me,we,Z,fe)}}function wa(pe,P,N,V,Z,fe,me){var we,Ae=1/0;return function Re(Xe,nt,ht,Dt,Ot){if(!(nt>fe||ht>me||Dt<V||Ot<Z)){if(It=Xe.point){var It,Lt=P-Xe.x,St=N-Xe.y,Gt=Lt*Lt+St*St;if(Gt<Ae){var Vt=Math.sqrt(Ae=Gt);V=P-Vt,Z=N-Vt,fe=P+Vt,me=N+Vt,we=It}}for(var Yt=Xe.nodes,xn=.5*(nt+Dt),En=.5*(ht+Ot),jn=(N>=En)<<1|P>=xn,Nn=jn+4;jn<Nn;++jn)if(Xe=Yt[3&jn])switch(3&jn){case 0:Re(Xe,nt,ht,xn,En);break;case 1:Re(Xe,xn,ht,Dt,En);break;case 2:Re(Xe,nt,En,xn,Ot);break;case 3:Re(Xe,xn,En,Dt,Ot)}}}(pe,V,Z,fe,me),we}function vs(pe,P){pe=g.rgb(pe),P=g.rgb(P);var N=pe.r,V=pe.g,Z=pe.b,fe=P.r-N,me=P.g-V,we=P.b-Z;return function(Ae){return"#"+kn(Math.round(N+fe*Ae))+kn(Math.round(V+me*Ae))+kn(Math.round(Z+we*Ae))}}function jo(pe,P){var N,V={},Z={};for(N in pe)N in P?V[N]=Oo(pe[N],P[N]):Z[N]=pe[N];for(N in P)N in pe||(Z[N]=P[N]);return function(fe){for(N in V)Z[N]=V[N](fe);return Z}}function Ki(pe,P){return pe=+pe,P=+P,function(N){return pe*(1-N)+P*N}}function Uo(pe,P){var N,V,Z,fe=ns.lastIndex=ss.lastIndex=0,me=-1,we=[],Ae=[];for(pe+="",P+="";(N=ns.exec(pe))&&(V=ss.exec(P));)(Z=V.index)>fe&&(Z=P.slice(fe,Z),we[me]?we[me]+=Z:we[++me]=Z),(N=N[0])===(V=V[0])?we[me]?we[me]+=V:we[++me]=V:(we[++me]=null,Ae.push({i:me,x:Ki(N,V)})),fe=ss.lastIndex;return fe<P.length&&(Z=P.slice(fe),we[me]?we[me]+=Z:we[++me]=Z),we.length<2?Ae[0]?(P=Ae[0].x,function(Re){return P(Re)+""}):function(){return P}:(P=Ae.length,function(Re){for(var Xe,nt=0;nt<P;++nt)we[(Xe=Ae[nt]).i]=Xe.x(Re);return we.join("")})}g.geom.delaunay=function(pe){return g.geom.voronoi().triangles(pe)},g.geom.quadtree=function(pe,P,N,V,Z){var fe,me=$n,we=Mr;if(fe=arguments.length)return me=Pa,we=Fa,3===fe&&(Z=N,V=P,N=P=0),Ae(pe);function Ae(Re){var Xe,nt,ht,Dt,Ot,It,Lt,St,Gt,Vt=Rn(me),Yt=Rn(we);if(null!=P)It=P,Lt=N,St=V,Gt=Z;else if(St=Gt=-(It=Lt=1/0),nt=[],ht=[],Ot=Re.length,fe)for(Dt=0;Dt<Ot;++Dt)(Xe=Re[Dt]).x<It&&(It=Xe.x),Xe.y<Lt&&(Lt=Xe.y),Xe.x>St&&(St=Xe.x),Xe.y>Gt&&(Gt=Xe.y),nt.push(Xe.x),ht.push(Xe.y);else for(Dt=0;Dt<Ot;++Dt){var xn=+Vt(Xe=Re[Dt],Dt),En=+Yt(Xe,Dt);xn<It&&(It=xn),En<Lt&&(Lt=En),xn>St&&(St=xn),En>Gt&&(Gt=En),nt.push(xn),ht.push(En)}var jn=St-It,Nn=Gt-Lt;function hr(wr,Jr,pi,Li,ir,jr,mi,fi){if(!isNaN(pi)&&!isNaN(Li))if(wr.leaf){var Mi=wr.x,Ri=wr.y;if(null!=Mi)if(o(Mi-pi)+o(Ri-Li)<.01)dr(wr,Jr,pi,Li,ir,jr,mi,fi);else{var ta=wr.point;wr.x=wr.y=wr.point=null,dr(wr,ta,Mi,Ri,ir,jr,mi,fi),dr(wr,Jr,pi,Li,ir,jr,mi,fi)}else wr.x=pi,wr.y=Li,wr.point=Jr}else dr(wr,Jr,pi,Li,ir,jr,mi,fi)}function dr(wr,Jr,pi,Li,ir,jr,mi,fi){var Mi=.5*(ir+mi),Ri=.5*(jr+fi),ta=pi>=Mi,xi=Li>=Ri,Hi=xi<<1|ta;wr.leaf=!1,ta?ir=Mi:mi=Mi,xi?jr=Ri:fi=Ri,hr(wr=wr.nodes[Hi]||(wr.nodes[Hi]={leaf:!0,nodes:[],point:null,x:null,y:null}),Jr,pi,Li,ir,jr,mi,fi)}jn>Nn?Gt=Lt+jn:St=It+Nn;var Er={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(wr){hr(Er,wr,+Vt(wr,++Dt),+Yt(wr,Dt),It,Lt,St,Gt)},visit:function(wr){oa(wr,Er,It,Lt,St,Gt)},find:function(wr){return wa(Er,wr[0],wr[1],It,Lt,St,Gt)}};if(Dt=-1,null==P){for(;++Dt<Ot;)hr(Er,Re[Dt],nt[Dt],ht[Dt],It,Lt,St,Gt);--Dt}else Re.forEach(Er.add);return nt=ht=Re=Xe=null,Er}return Ae.x=function(Re){return arguments.length?(me=Re,Ae):me},Ae.y=function(Re){return arguments.length?(we=Re,Ae):we},Ae.extent=function(Re){return arguments.length?(null==Re?P=N=V=Z=null:(P=+Re[0][0],N=+Re[0][1],V=+Re[1][0],Z=+Re[1][1]),Ae):null==P?null:[[P,N],[V,Z]]},Ae.size=function(Re){return arguments.length?(null==Re?P=N=V=Z=null:(P=N=0,V=+Re[0],Z=+Re[1]),Ae):null==P?null:[V-P,Z-N]},Ae},g.interpolateRgb=vs,g.interpolateObject=jo,g.interpolateNumber=Ki,g.interpolateString=Uo;var ns=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ss=new RegExp(ns.source,"g");function Oo(pe,P){for(var N,V=g.interpolators.length;--V>=0&&!(N=g.interpolators[V](pe,P)););return N}function za(pe,P){var N,V=[],Z=[],fe=pe.length,me=P.length,we=Math.min(pe.length,P.length);for(N=0;N<we;++N)V.push(Oo(pe[N],P[N]));for(;N<fe;++N)Z[N]=pe[N];for(;N<me;++N)Z[N]=P[N];return function(Ae){for(N=0;N<we;++N)Z[N]=V[N](Ae);return Z}}g.interpolate=Oo,g.interpolators=[function(pe,P){var N=typeof P;return("string"===N?Mn.has(P.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(P)?vs:Uo:P instanceof at?vs:Array.isArray(P)?za:"object"===N&&isNaN(P)?jo:Ki)(pe,P)}],g.interpolateArray=za;var Co=function(){return L},Cl=g.map({linear:Co,poly:function(pe){return function(P){return Math.pow(P,pe)}},quad:function(){return Dl},cubic:function(){return ys},sin:function(){return Il},exp:function(){return Ja},circle:function(){return uo},elastic:function(pe,P){var N;return arguments.length<2&&(P=.45),arguments.length?N=P/ln*Math.asin(1/pe):(pe=1,N=P/4),function(V){return 1+pe*Math.pow(2,-10*V)*Math.sin((V-N)*ln/P)}},back:function(pe){return pe||(pe=1.70158),function(P){return P*P*((pe+1)*P-pe)}},bounce:function(){return co}}),$s=g.map({in:L,out:ml,"in-out":Ks,"out-in":function(pe){return Ks(ml(pe))}});function Oa(pe){return function(P){return P<=0?0:P>=1?1:pe(P)}}function ml(pe){return function(P){return 1-pe(1-P)}}function Ks(pe){return function(P){return.5*(P<.5?pe(2*P):2-pe(2-2*P))}}function Dl(pe){return pe*pe}function ys(pe){return pe*pe*pe}function Ll(pe){if(pe<=0)return 0;if(pe>=1)return 1;var P=pe*pe,N=P*pe;return 4*(pe<.5?N:3*(pe-P)+N-.75)}function Il(pe){return 1-Math.cos(pe*cn)}function Ja(pe){return Math.pow(2,10*(pe-1))}function uo(pe){return 1-Math.sqrt(1-pe*pe)}function co(pe){return pe<1/2.75?7.5625*pe*pe:pe<2/2.75?7.5625*(pe-=1.5/2.75)*pe+.75:pe<2.5/2.75?7.5625*(pe-=2.25/2.75)*pe+.9375:7.5625*(pe-=2.625/2.75)*pe+.984375}function $o(pe,P){return P-=pe,function(N){return Math.round(pe+P*N)}}function rs(pe){var P,N,V,Z=[pe.a,pe.b],fe=[pe.c,pe.d],me=Ko(Z),we=Vo(Z,fe),Ae=Ko(((P=fe)[0]+=(V=-we)*(N=Z)[0],P[1]+=V*N[1],P))||0;Z[0]*fe[1]<fe[0]*Z[1]&&(Z[0]*=-1,Z[1]*=-1,me*=-1,we*=-1),this.rotate=(me?Math.atan2(Z[1],Z[0]):Math.atan2(-fe[0],fe[1]))*nn,this.translate=[pe.e,pe.f],this.scale=[me,Ae],this.skew=Ae?Math.atan2(we,Ae)*nn:0}function Vo(pe,P){return pe[0]*P[0]+pe[1]*P[1]}function Ko(pe){var P=Math.sqrt(Vo(pe,pe));return P&&(pe[0]/=P,pe[1]/=P),P}g.ease=function(pe){var P=pe.indexOf("-"),N=P>=0?pe.slice(0,P):pe,V=P>=0?pe.slice(P+1):"in";return N=Cl.get(N)||Co,Oa((V=$s.get(V)||L)(N.apply(null,m.call(arguments,1))))},g.interpolateHcl=function(pe,P){pe=g.hcl(pe),P=g.hcl(P);var N=pe.h,V=pe.c,Z=pe.l,fe=P.h-N,me=P.c-V,we=P.l-Z;return isNaN(me)&&(me=0,V=isNaN(V)?P.c:V),isNaN(fe)?(fe=0,N=isNaN(N)?P.h:N):fe>180?fe-=360:fe<-180&&(fe+=360),function(Ae){return gt(N+fe*Ae,V+me*Ae,Z+we*Ae)+""}},g.interpolateHsl=function(pe,P){pe=g.hsl(pe),P=g.hsl(P);var N=pe.h,V=pe.s,Z=pe.l,fe=P.h-N,me=P.s-V,we=P.l-Z;return isNaN(me)&&(me=0,V=isNaN(V)?P.s:V),isNaN(fe)?(fe=0,N=isNaN(N)?P.h:N):fe>180?fe-=360:fe<-180&&(fe+=360),function(Ae){return vt(N+fe*Ae,V+me*Ae,Z+we*Ae)+""}},g.interpolateLab=function(pe,P){pe=g.lab(pe),P=g.lab(P);var N=pe.l,V=pe.a,Z=pe.b,fe=P.l-N,me=P.a-V,we=P.b-Z;return function(Ae){return Ct(N+fe*Ae,V+me*Ae,Z+we*Ae)+""}},g.interpolateRound=$o,g.transform=function(pe){var P=y.createElementNS(g.ns.prefix.svg,"g");return(g.transform=function(N){if(null!=N){P.setAttribute("transform",N);var V=P.transform.baseVal.consolidate()}return new rs(V?V.matrix:ul)})(pe)},rs.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ul={a:1,b:0,c:0,d:1,e:0,f:0};function Ho(pe){return pe.length?pe.pop()+",":""}function Ms(pe,P){var Z,fe,me,N=[],V=[];return pe=g.transform(pe),P=g.transform(P),function(Z,fe,me,we){if(Z[0]!==fe[0]||Z[1]!==fe[1]){var Ae=me.push("translate(",null,",",null,")");we.push({i:Ae-4,x:Ki(Z[0],fe[0])},{i:Ae-2,x:Ki(Z[1],fe[1])})}else(fe[0]||fe[1])&&me.push("translate("+fe+")")}(pe.translate,P.translate,N,V),me=N,(Z=pe.rotate)!==(fe=P.rotate)?(Z-fe>180?fe+=360:fe-Z>180&&(Z+=360),V.push({i:me.push(Ho(me)+"rotate(",null,")")-2,x:Ki(Z,fe)})):fe&&me.push(Ho(me)+"rotate("+fe+")"),function(Z,fe,me,we){Z!==fe?we.push({i:me.push(Ho(me)+"skewX(",null,")")-2,x:Ki(Z,fe)}):fe&&me.push(Ho(me)+"skewX("+fe+")")}(pe.skew,P.skew,N,V),function(Z,fe,me,we){if(Z[0]!==fe[0]||Z[1]!==fe[1]){var Ae=me.push(Ho(me)+"scale(",null,",",null,")");we.push({i:Ae-4,x:Ki(Z[0],fe[0])},{i:Ae-2,x:Ki(Z[1],fe[1])})}else 1===fe[0]&&1===fe[1]||me.push(Ho(me)+"scale("+fe+")")}(pe.scale,P.scale,N,V),pe=P=null,function(Z){for(var fe,me=-1,we=V.length;++me<we;)N[(fe=V[me]).i]=fe.x(Z);return N.join("")}}function Cs(pe,P){return P=(P-=pe=+pe)||1/P,function(N){return(N-pe)/P}}function Qa(pe,P){return P=(P-=pe=+pe)||1/P,function(N){return Math.max(0,Math.min(1,(N-pe)/P))}}function Sa(pe){for(var P=pe.source,N=pe.target,V=function(me,we){if(me===we)return me;for(var Ae=We(me),Re=We(we),Xe=Ae.pop(),nt=Re.pop(),ht=null;Xe===nt;)ht=Xe,Xe=Ae.pop(),nt=Re.pop();return ht}(P,N),Z=[P];P!==V;)Z.push(P=P.parent);for(var fe=Z.length;N!==V;)Z.splice(fe,0,N),N=N.parent;return Z}function We(pe){for(var P=[],N=pe.parent;null!=N;)P.push(pe),pe=N,N=N.parent;return P.push(pe),P}function Ge(pe){pe.fixed|=2}function rt(pe){pe.fixed&=-7}function pt(pe){pe.fixed|=4,pe.px=pe.x,pe.py=pe.y}function wt(pe){pe.fixed&=-5}g.interpolateTransform=Ms,g.layout={},g.layout.bundle=function(){return function(pe){for(var P=[],N=-1,V=pe.length;++N<V;)P.push(Sa(pe[N]));return P}},g.layout.chord=function(){var pe,P,N,V,Z,fe,me,we={},Ae=0;function Re(){var nt,ht,Dt,Ot,It,Lt={},St=[],Gt=g.range(V),Vt=[];for(pe=[],P=[],nt=0,Ot=-1;++Ot<V;){for(ht=0,It=-1;++It<V;)ht+=N[Ot][It];St.push(ht),Vt.push(g.range(V)),nt+=ht}for(Z&&Gt.sort(function(Er,wr){return Z(St[Er],St[wr])}),fe&&Vt.forEach(function(Er,wr){Er.sort(function(Jr,pi){return fe(N[wr][Jr],N[wr][pi])})}),nt=(ln-Ae*V)/nt,ht=0,Ot=-1;++Ot<V;){for(Dt=ht,It=-1;++It<V;){var Yt=Gt[Ot],xn=Vt[Yt][It],En=N[Yt][xn],jn=ht,Nn=ht+=En*nt;Lt[Yt+"-"+xn]={index:Yt,subindex:xn,startAngle:jn,endAngle:Nn,value:En}}P[Yt]={index:Yt,startAngle:Dt,endAngle:ht,value:St[Yt]},ht+=Ae}for(Ot=-1;++Ot<V;)for(It=Ot-1;++It<V;){var hr=Lt[Ot+"-"+It],dr=Lt[It+"-"+Ot];(hr.value||dr.value)&&pe.push(hr.value<dr.value?{source:dr,target:hr}:{source:hr,target:dr})}me&&Xe()}function Xe(){pe.sort(function(nt,ht){return me((nt.source.value+nt.target.value)/2,(ht.source.value+ht.target.value)/2)})}return we.matrix=function(nt){return arguments.length?(V=(N=nt)&&N.length,pe=P=null,we):N},we.padding=function(nt){return arguments.length?(Ae=nt,pe=P=null,we):Ae},we.sortGroups=function(nt){return arguments.length?(Z=nt,pe=P=null,we):Z},we.sortSubgroups=function(nt){return arguments.length?(fe=nt,pe=null,we):fe},we.sortChords=function(nt){return arguments.length?(me=nt,pe&&Xe(),we):me},we.chords=function(){return pe||Re(),pe},we.groups=function(){return P||Re(),P},we},g.layout.force=function(){var pe,P,N,V,Z,fe,me={},we=g.dispatch("start","tick","end"),Ae=[1,1],Re=.9,Xe=_t,nt=Pt,ht=-30,Dt=on,Ot=.1,It=.64,Lt=[],St=[];function Gt(Yt){return function(xn,En,jn,Nn){if(xn.point!==Yt){var hr=xn.cx-Yt.x,dr=xn.cy-Yt.y,Er=Nn-En,wr=hr*hr+dr*dr;if(Er*Er/It<wr){if(wr<Dt){var Jr=xn.charge/wr;Yt.px-=hr*Jr,Yt.py-=dr*Jr}return!0}xn.point&&wr&&wr<Dt&&(Yt.px-=hr*(Jr=xn.pointCharge/wr),Yt.py-=dr*Jr)}return!xn.charge}}function Vt(Yt){Yt.px=g.event.x,Yt.py=g.event.y,me.resume()}return me.tick=function(){if((N*=.99)<.005)return pe=null,we.end({type:"end",alpha:N=0}),!0;var Yt,xn,En,jn,Nn,hr,dr,Er,wr,Jr=Lt.length,pi=St.length;for(xn=0;xn<pi;++xn)jn=(En=St[xn]).source,(hr=(Er=(Nn=En.target).x-jn.x)*Er+(wr=Nn.y-jn.y)*wr)&&(Er*=hr=N*Z[xn]*((hr=Math.sqrt(hr))-V[xn])/hr,wr*=hr,Nn.x-=Er*(dr=jn.weight+Nn.weight?jn.weight/(jn.weight+Nn.weight):.5),Nn.y-=wr*dr,jn.x+=Er*(dr=1-dr),jn.y+=wr*dr);if((dr=N*Ot)&&(Er=Ae[0]/2,wr=Ae[1]/2,xn=-1,dr))for(;++xn<Jr;)(En=Lt[xn]).x+=(Er-En.x)*dr,En.y+=(wr-En.y)*dr;if(ht)for(function Li(ir,jr,mi){var fi=0,Mi=0;if(ir.charge=0,!ir.leaf)for(var Ri,ta=ir.nodes,xi=ta.length,Hi=-1;++Hi<xi;)null!=(Ri=ta[Hi])&&(Li(Ri,jr,mi),ir.charge+=Ri.charge,fi+=Ri.charge*Ri.cx,Mi+=Ri.charge*Ri.cy);if(ir.point){ir.leaf||(ir.point.x+=Math.random()-.5,ir.point.y+=Math.random()-.5);var Bi=jr*mi[ir.point.index];ir.charge+=ir.pointCharge=Bi,fi+=Bi*ir.point.x,Mi+=Bi*ir.point.y}ir.cx=fi/ir.charge,ir.cy=Mi/ir.charge}(Yt=g.geom.quadtree(Lt),N,fe),xn=-1;++xn<Jr;)(En=Lt[xn]).fixed||Yt.visit(Gt(En));for(xn=-1;++xn<Jr;)(En=Lt[xn]).fixed?(En.x=En.px,En.y=En.py):(En.x-=(En.px-(En.px=En.x))*Re,En.y-=(En.py-(En.py=En.y))*Re);we.tick({type:"tick",alpha:N})},me.nodes=function(Yt){return arguments.length?(Lt=Yt,me):Lt},me.links=function(Yt){return arguments.length?(St=Yt,me):St},me.size=function(Yt){return arguments.length?(Ae=Yt,me):Ae},me.linkDistance=function(Yt){return arguments.length?(Xe="function"==typeof Yt?Yt:+Yt,me):Xe},me.distance=me.linkDistance,me.linkStrength=function(Yt){return arguments.length?(nt="function"==typeof Yt?Yt:+Yt,me):nt},me.friction=function(Yt){return arguments.length?(Re=+Yt,me):Re},me.charge=function(Yt){return arguments.length?(ht="function"==typeof Yt?Yt:+Yt,me):ht},me.chargeDistance=function(Yt){return arguments.length?(Dt=Yt*Yt,me):Math.sqrt(Dt)},me.gravity=function(Yt){return arguments.length?(Ot=+Yt,me):Ot},me.theta=function(Yt){return arguments.length?(It=Yt*Yt,me):Math.sqrt(It)},me.alpha=function(Yt){return arguments.length?(Yt=+Yt,N?Yt>0?N=Yt:(pe.c=null,pe.t=NaN,pe=null,we.end({type:"end",alpha:N=0})):Yt>0&&(we.start({type:"start",alpha:N=Yt}),pe=Br(me.tick)),me):N},me.start=function(){var Yt,xn,En,jn=Lt.length,Nn=St.length,hr=Ae[0],dr=Ae[1];for(Yt=0;Yt<jn;++Yt)(En=Lt[Yt]).index=Yt,En.weight=0;for(Yt=0;Yt<Nn;++Yt)"number"==typeof(En=St[Yt]).source&&(En.source=Lt[En.source]),"number"==typeof En.target&&(En.target=Lt[En.target]),++En.source.weight,++En.target.weight;for(Yt=0;Yt<jn;++Yt)En=Lt[Yt],isNaN(En.x)&&(En.x=Er("x",hr)),isNaN(En.y)&&(En.y=Er("y",dr)),isNaN(En.px)&&(En.px=En.x),isNaN(En.py)&&(En.py=En.y);if(V=[],"function"==typeof Xe)for(Yt=0;Yt<Nn;++Yt)V[Yt]=+Xe.call(this,St[Yt],Yt);else for(Yt=0;Yt<Nn;++Yt)V[Yt]=Xe;if(Z=[],"function"==typeof nt)for(Yt=0;Yt<Nn;++Yt)Z[Yt]=+nt.call(this,St[Yt],Yt);else for(Yt=0;Yt<Nn;++Yt)Z[Yt]=nt;if(fe=[],"function"==typeof ht)for(Yt=0;Yt<jn;++Yt)fe[Yt]=+ht.call(this,Lt[Yt],Yt);else for(Yt=0;Yt<jn;++Yt)fe[Yt]=ht;function Er(wr,Jr){if(!xn){for(xn=new Array(jn),jr=0;jr<jn;++jr)xn[jr]=[];for(jr=0;jr<Nn;++jr){var pi=St[jr];xn[pi.source.index].push(pi.target),xn[pi.target.index].push(pi.source)}}for(var Li,ir=xn[Yt],jr=-1,mi=ir.length;++jr<mi;)if(!isNaN(Li=ir[jr][wr]))return Li;return Math.random()*Jr}return me.resume()},me.resume=function(){return me.alpha(.1)},me.stop=function(){return me.alpha(0)},me.drag=function(){if(P||(P=g.behavior.drag().origin(L).on("dragstart.force",Ge).on("drag.force",Vt).on("dragend.force",rt)),!arguments.length)return P;this.on("mouseover.force",pt).on("mouseout.force",wt).call(P)},g.rebind(me,we,"on")};var _t=20,Pt=1,on=1/0;function rn(pe,P){return g.rebind(pe,P,"sort","children","value"),pe.nodes=pe,pe.links=Zn,pe}function tn(pe,P){for(var N=[pe];null!=(pe=N.pop());)if(P(pe),(Z=pe.children)&&(V=Z.length))for(var V,Z;--V>=0;)N.push(Z[V])}function yn(pe,P){for(var N=[pe],V=[];null!=(pe=N.pop());)if(V.push(pe),(fe=pe.children)&&(Z=fe.length))for(var Z,fe,me=-1;++me<Z;)N.push(fe[me]);for(;null!=(pe=V.pop());)P(pe)}function mn(pe){return pe.children}function Ln(pe){return pe.value}function In(pe,P){return P.value-pe.value}function Zn(pe){return g.merge(pe.map(function(P){return(P.children||[]).map(function(N){return{source:P,target:N}})}))}g.layout.hierarchy=function(){var pe=In,P=mn,N=Ln;function V(Z){var fe,me=[Z],we=[];for(Z.depth=0;null!=(fe=me.pop());)if(we.push(fe),(Re=P.call(V,fe,fe.depth))&&(Ae=Re.length)){for(var Ae,Re,Xe;--Ae>=0;)me.push(Xe=Re[Ae]),Xe.parent=fe,Xe.depth=fe.depth+1;N&&(fe.value=0),fe.children=Re}else N&&(fe.value=+N.call(V,fe,fe.depth)||0),delete fe.children;return yn(Z,function(nt){var ht,Dt;pe&&(ht=nt.children)&&ht.sort(pe),N&&(Dt=nt.parent)&&(Dt.value+=nt.value)}),we}return V.sort=function(Z){return arguments.length?(pe=Z,V):pe},V.children=function(Z){return arguments.length?(P=Z,V):P},V.value=function(Z){return arguments.length?(N=Z,V):N},V.revalue=function(Z){return N&&(tn(Z,function(fe){fe.children&&(fe.value=0)}),yn(Z,function(fe){var me;fe.children||(fe.value=+N.call(V,fe,fe.depth)||0),(me=fe.parent)&&(me.value+=fe.value)})),Z},V},g.layout.partition=function(){var pe=g.layout.hierarchy(),P=[1,1];function N(V,Z){var fe=pe.call(this,V,Z);return function me(we,Ae,Re,Xe){var nt=we.children;if(we.x=Ae,we.y=we.depth*Xe,we.dx=Re,we.dy=Xe,nt&&(ht=nt.length)){var ht,Dt,Ot,It=-1;for(Re=we.value?Re/we.value:0;++It<ht;)me(Dt=nt[It],Ae,Ot=Dt.value*Re,Xe),Ae+=Ot}}(fe[0],0,P[0],P[1]/function me(we){var Ae=we.children,Re=0;if(Ae&&(Xe=Ae.length))for(var Xe,nt=-1;++nt<Xe;)Re=Math.max(Re,me(Ae[nt]));return 1+Re}(fe[0])),fe}return N.size=function(V){return arguments.length?(P=V,N):P},rn(N,pe)},g.layout.pie=function(){var pe=Number,P=mr,N=0,V=ln,Z=0;function fe(me){var we,Ae=me.length,Re=me.map(function(Gt,Vt){return+pe.call(fe,Gt,Vt)}),Xe=+("function"==typeof N?N.apply(this,arguments):N),nt=("function"==typeof V?V.apply(this,arguments):V)-Xe,ht=Math.min(Math.abs(nt)/Ae,+("function"==typeof Z?Z.apply(this,arguments):Z)),Dt=ht*(nt<0?-1:1),Ot=g.sum(Re),It=Ot?(nt-Ae*Dt)/Ot:0,Lt=g.range(Ae),St=[];return null!=P&&Lt.sort(P===mr?function(Gt,Vt){return Re[Vt]-Re[Gt]}:function(Gt,Vt){return P(me[Gt],me[Vt])}),Lt.forEach(function(Gt){St[Gt]={data:me[Gt],value:we=Re[Gt],startAngle:Xe,endAngle:Xe+=we*It+Dt,padAngle:ht}}),St}return fe.value=function(me){return arguments.length?(pe=me,fe):pe},fe.sort=function(me){return arguments.length?(P=me,fe):P},fe.startAngle=function(me){return arguments.length?(N=me,fe):N},fe.endAngle=function(me){return arguments.length?(V=me,fe):V},fe.padAngle=function(me){return arguments.length?(Z=me,fe):Z},fe};var mr={};function xr(pe){return pe.x}function Wr(pe){return pe.y}function Kr(pe,P,N){pe.y0=P,pe.y=N}g.layout.stack=function(){var pe=L,P=zi,N=Xi,V=Kr,Z=xr,fe=Wr;function me(we,Ae){if(!(ht=we.length))return we;var Re=we.map(function(Gt,Vt){return pe.call(me,Gt,Vt)}),Xe=Re.map(function(Gt){return Gt.map(function(Vt,Yt){return[Z.call(me,Vt,Yt),fe.call(me,Vt,Yt)]})}),nt=P.call(me,Xe,Ae);Re=g.permute(Re,nt),Xe=g.permute(Xe,nt);var ht,Dt,Ot,It,Lt=N.call(me,Xe,Ae),St=Re[0].length;for(Ot=0;Ot<St;++Ot)for(V.call(me,Re[0][Ot],It=Lt[Ot],Xe[0][Ot][1]),Dt=1;Dt<ht;++Dt)V.call(me,Re[Dt][Ot],It+=Xe[Dt-1][Ot][1],Xe[Dt][Ot][1]);return we}return me.values=function(we){return arguments.length?(pe=we,me):pe},me.order=function(we){return arguments.length?(P="function"==typeof we?we:ei.get(we)||zi,me):P},me.offset=function(we){return arguments.length?(N="function"==typeof we?we:Ur.get(we)||Xi,me):N},me.x=function(we){return arguments.length?(Z=we,me):Z},me.y=function(we){return arguments.length?(fe=we,me):fe},me.out=function(we){return arguments.length?(V=we,me):V},me};var ei=g.map({"inside-out":function(pe){var P,N,V=pe.length,Z=pe.map(na),fe=pe.map(Ji),me=g.range(V).sort(function(nt,ht){return Z[nt]-Z[ht]}),we=0,Ae=0,Re=[],Xe=[];for(P=0;P<V;++P)N=me[P],we<Ae?(we+=fe[N],Re.push(N)):(Ae+=fe[N],Xe.push(N));return Xe.reverse().concat(Re)},reverse:function(pe){return g.range(pe.length).reverse()},default:zi}),Ur=g.map({silhouette:function(pe){var P,N,V,Z=pe.length,fe=pe[0].length,me=[],we=0,Ae=[];for(N=0;N<fe;++N){for(P=0,V=0;P<Z;P++)V+=pe[P][N][1];V>we&&(we=V),me.push(V)}for(N=0;N<fe;++N)Ae[N]=(we-me[N])/2;return Ae},wiggle:function(pe){var P,N,V,Z,fe,me,we,Ae,Re,Xe=pe.length,nt=pe[0],ht=nt.length,Dt=[];for(Dt[0]=Ae=Re=0,N=1;N<ht;++N){for(P=0,Z=0;P<Xe;++P)Z+=pe[P][N][1];for(P=0,fe=0,we=nt[N][0]-nt[N-1][0];P<Xe;++P){for(V=0,me=(pe[P][N][1]-pe[P][N-1][1])/(2*we);V<P;++V)me+=(pe[V][N][1]-pe[V][N-1][1])/we;fe+=me*pe[P][N][1]}Dt[N]=Ae-=Z?fe/Z*we:0,Ae<Re&&(Re=Ae)}for(N=0;N<ht;++N)Dt[N]-=Re;return Dt},expand:function(pe){var P,N,V,Z=pe.length,fe=pe[0].length,me=1/Z,we=[];for(N=0;N<fe;++N){for(P=0,V=0;P<Z;P++)V+=pe[P][N][1];if(V)for(P=0;P<Z;P++)pe[P][N][1]/=V;else for(P=0;P<Z;P++)pe[P][N][1]=me}for(N=0;N<fe;++N)we[N]=0;return we},zero:Xi});function zi(pe){return g.range(pe.length)}function Xi(pe){for(var P=-1,N=pe[0].length,V=[];++P<N;)V[P]=0;return V}function na(pe){for(var P,N=1,V=0,Z=pe[0][1],fe=pe.length;N<fe;++N)(P=pe[N][1])>Z&&(V=N,Z=P);return V}function Ji(pe){return pe.reduce(Ta,0)}function Ta(pe,P){return pe+P[1]}function fo(pe,P){return ao(pe,Math.ceil(Math.log(P.length)/Math.LN2+1))}function ao(pe,P){for(var N=-1,V=+pe[0],Z=(pe[1]-V)/P,fe=[];++N<=P;)fe[N]=Z*N+V;return fe}function xa(pe){return[g.min(pe),g.max(pe)]}function Ga(pe,P){return pe.value-P.value}function To(pe,P){var N=pe._pack_next;pe._pack_next=P,P._pack_prev=pe,P._pack_next=N,N._pack_prev=P}function qo(pe,P){pe._pack_next=P,P._pack_prev=pe}function is(pe,P){var N=P.x-pe.x,V=P.y-pe.y,Z=pe.r+P.r;return.999*Z*Z>N*N+V*V}function ls(pe){if((P=pe.children)&&(Ae=P.length)){var P,N,V,Z,fe,me,we,Ae,Re=1/0,Xe=-1/0,nt=1/0,ht=-1/0;if(P.forEach(us),(N=P[0]).x=-N.r,N.y=0,Vt(N),Ae>1&&((V=P[1]).x=V.r,V.y=0,Vt(V),Ae>2))for(ba(N,V,Z=P[2]),Vt(Z),To(N,Z),N._pack_prev=Z,To(Z,V),V=N._pack_next,fe=3;fe<Ae;fe++){ba(N,V,Z=P[fe]);var Dt=0,Ot=1,It=1;for(me=V._pack_next;me!==V;me=me._pack_next,Ot++)if(is(me,Z)){Dt=1;break}if(1==Dt)for(we=N._pack_prev;we!==me._pack_prev&&!is(we,Z);we=we._pack_prev,It++);Dt?(Ot<It||Ot==It&&V.r<N.r?qo(N,V=me):qo(N=we,V),fe--):(To(N,Z),V=Z,Vt(Z))}var Lt=(Re+Xe)/2,St=(nt+ht)/2,Gt=0;for(fe=0;fe<Ae;fe++)(Z=P[fe]).x-=Lt,Z.y-=St,Gt=Math.max(Gt,Z.r+Math.sqrt(Z.x*Z.x+Z.y*Z.y));pe.r=Gt,P.forEach(cs)}function Vt(Yt){Re=Math.min(Yt.x-Yt.r,Re),Xe=Math.max(Yt.x+Yt.r,Xe),nt=Math.min(Yt.y-Yt.r,nt),ht=Math.max(Yt.y+Yt.r,ht)}}function us(pe){pe._pack_next=pe._pack_prev=pe}function cs(pe){delete pe._pack_next,delete pe._pack_prev}function ba(pe,P,N){var V=pe.r+N.r,Z=P.x-pe.x,fe=P.y-pe.y;if(V&&(Z||fe)){var me=P.r+N.r,we=Z*Z+fe*fe,Ae=.5+((V*=V)-(me*=me))/(2*we),Re=Math.sqrt(Math.max(0,2*me*(V+we)-(V-=we)*V-me*me))/(2*we);N.x=pe.x+Ae*Z+Re*fe,N.y=pe.y+Ae*fe-Re*Z}else N.x=pe.x+V,N.y=pe.y}function bt(pe,P){return pe.parent==P.parent?1:2}function Ht(pe){var P=pe.children;return P.length?P[0]:pe.t}function _n(pe){var P,N=pe.children;return(P=N.length)?N[P-1]:pe.t}function Kt(pe,P,N){var V=N/(P.i-pe.i);P.c-=V,P.s+=N,pe.c+=V,P.z+=N,P.m+=N}function wn(pe,P,N){return pe.a.parent===P.parent?pe.a:N}function Yn(pe){return{x:pe.x,y:pe.y,dx:pe.dx,dy:pe.dy}}function Qn(pe,P){var N=pe.x+P[3],V=pe.y+P[0],Z=pe.dx-P[1]-P[3],fe=pe.dy-P[0]-P[2];return Z<0&&(N+=Z/2,Z=0),fe<0&&(V+=fe/2,fe=0),{x:N,y:V,dx:Z,dy:fe}}function fr(pe){var P=pe[0],N=pe[pe.length-1];return P<N?[P,N]:[N,P]}function kr(pe){return pe.rangeExtent?pe.rangeExtent():fr(pe.range())}function _r(pe,P,N,V){var Z=N(pe[0],pe[1]),fe=V(P[0],P[1]);return function(me){return fe(Z(me))}}function Sr(pe,P){var N,V=0,Z=pe.length-1,fe=pe[V],me=pe[Z];return me<fe&&(N=V,V=Z,Z=N,N=fe,fe=me,me=N),pe[V]=P.floor(fe),pe[Z]=P.ceil(me),pe}function Vr(pe){return pe?{floor:function(P){return Math.floor(P/pe)*pe},ceil:function(P){return Math.ceil(P/pe)*pe}}:Ar}g.layout.histogram=function(){var pe=!0,P=Number,N=xa,V=fo;function Z(fe,me){for(var we,Ae,Re=[],Xe=fe.map(P,this),nt=N.call(this,Xe,me),ht=V.call(this,nt,Xe,me),Dt=(me=-1,Xe.length),Ot=ht.length-1,It=pe?1:1/Dt;++me<Ot;)(we=Re[me]=[]).dx=ht[me+1]-(we.x=ht[me]),we.y=0;if(Ot>0)for(me=-1;++me<Dt;)(Ae=Xe[me])>=nt[0]&&Ae<=nt[1]&&((we=Re[g.bisect(ht,Ae,1,Ot)-1]).y+=It,we.push(fe[me]));return Re}return Z.value=function(fe){return arguments.length?(P=fe,Z):P},Z.range=function(fe){return arguments.length?(N=Rn(fe),Z):N},Z.bins=function(fe){return arguments.length?(V="number"==typeof fe?function(me){return ao(me,fe)}:Rn(fe),Z):V},Z.frequency=function(fe){return arguments.length?(pe=!!fe,Z):pe},Z},g.layout.pack=function(){var pe,P=g.layout.hierarchy().sort(Ga),N=0,V=[1,1];function Z(fe,me){var we=P.call(this,fe,me),Ae=we[0],Re=V[0],Xe=V[1],nt=null==pe?Math.sqrt:"function"==typeof pe?pe:function(){return pe};if(Ae.x=Ae.y=0,yn(Ae,function(Dt){Dt.r=+nt(Dt.value)}),yn(Ae,ls),N){var ht=N*(pe?1:Math.max(2*Ae.r/Re,2*Ae.r/Xe))/2;yn(Ae,function(Dt){Dt.r+=ht}),yn(Ae,ls),yn(Ae,function(Dt){Dt.r-=ht})}return function Dt(Ot,It,Lt,St){var Gt=Ot.children;if(Ot.x=It+=St*Ot.x,Ot.y=Lt+=St*Ot.y,Ot.r*=St,Gt)for(var Vt=-1,Yt=Gt.length;++Vt<Yt;)Dt(Gt[Vt],It,Lt,St)}(Ae,Re/2,Xe/2,pe?1:1/Math.max(2*Ae.r/Re,2*Ae.r/Xe)),we}return Z.size=function(fe){return arguments.length?(V=fe,Z):V},Z.radius=function(fe){return arguments.length?(pe=null==fe||"function"==typeof fe?fe:+fe,Z):pe},Z.padding=function(fe){return arguments.length?(N=+fe,Z):N},rn(Z,P)},g.layout.tree=function(){var pe=g.layout.hierarchy().sort(null).value(null),P=bt,N=[1,1],V=null;function Z(Ae,Re){var Xe=pe.call(this,Ae,Re),nt=Xe[0],ht=function(Vt){for(var Yt,xn={A:null,children:[Vt]},En=[xn];null!=(Yt=En.pop());)for(var jn,Nn=Yt.children,hr=0,dr=Nn.length;hr<dr;++hr)En.push((Nn[hr]=jn={_:Nn[hr],parent:Yt,children:(jn=Nn[hr].children)&&jn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:hr}).a=jn);return xn.children[0]}(nt);if(yn(ht,fe),ht.parent.m=-ht.z,tn(ht,me),V)tn(nt,we);else{var Dt=nt,Ot=nt,It=nt;tn(nt,function(Vt){Vt.x<Dt.x&&(Dt=Vt),Vt.x>Ot.x&&(Ot=Vt),Vt.depth>It.depth&&(It=Vt)});var Lt=P(Dt,Ot)/2-Dt.x,St=N[0]/(Ot.x+P(Ot,Dt)/2+Lt),Gt=N[1]/(It.depth||1);tn(nt,function(Vt){Vt.x=(Vt.x+Lt)*St,Vt.y=Vt.depth*Gt})}return Xe}function fe(Ae){var Re=Ae.children,Xe=Ae.parent.children,nt=Ae.i?Xe[Ae.i-1]:null;if(Re.length){!function(Dt){for(var Ot,It=0,Lt=0,St=Dt.children,Gt=St.length;--Gt>=0;)(Ot=St[Gt]).z+=It,Ot.m+=It,It+=Ot.s+(Lt+=Ot.c)}(Ae);var ht=(Re[0].z+Re[Re.length-1].z)/2;nt?(Ae.z=nt.z+P(Ae._,nt._),Ae.m=Ae.z-ht):Ae.z=ht}else nt&&(Ae.z=nt.z+P(Ae._,nt._));Ae.parent.A=function(Dt,Ot,It){if(Ot){for(var Lt,St=Dt,Gt=Dt,Vt=Ot,Yt=St.parent.children[0],xn=St.m,En=Gt.m,jn=Vt.m,Nn=Yt.m;Vt=_n(Vt),St=Ht(St),Vt&&St;)Yt=Ht(Yt),(Gt=_n(Gt)).a=Dt,(Lt=Vt.z+jn-St.z-xn+P(Vt._,St._))>0&&(Kt(wn(Vt,Dt,It),Dt,Lt),xn+=Lt,En+=Lt),jn+=Vt.m,xn+=St.m,Nn+=Yt.m,En+=Gt.m;Vt&&!_n(Gt)&&(Gt.t=Vt,Gt.m+=jn-En),St&&!Ht(Yt)&&(Yt.t=St,Yt.m+=xn-Nn,It=Dt)}return It}(Ae,nt,Ae.parent.A||Xe[0])}function me(Ae){Ae._.x=Ae.z+Ae.parent.m,Ae.m+=Ae.parent.m}function we(Ae){Ae.x*=N[0],Ae.y=Ae.depth*N[1]}return Z.separation=function(Ae){return arguments.length?(P=Ae,Z):P},Z.size=function(Ae){return arguments.length?(V=null==(N=Ae)?we:null,Z):V?null:N},Z.nodeSize=function(Ae){return arguments.length?(V=null==(N=Ae)?null:we,Z):V?N:null},rn(Z,pe)},g.layout.cluster=function(){var pe=g.layout.hierarchy().sort(null).value(null),P=bt,N=[1,1],V=!1;function Z(fe,me){var we,Ae=pe.call(this,fe,me),Re=Ae[0],Xe=0;yn(Re,function(It){var St,Lt=It.children;Lt&&Lt.length?(It.x=(St=Lt).reduce(function(Gt,Vt){return Gt+Vt.x},0)/St.length,It.y=function(St){return 1+g.max(St,function(Gt){return Gt.y})}(Lt)):(It.x=we?Xe+=P(It,we):0,It.y=0,we=It)});var nt=function It(Lt){var St=Lt.children;return St&&St.length?It(St[0]):Lt}(Re),ht=function It(Lt){var St,Gt=Lt.children;return Gt&&(St=Gt.length)?It(Gt[St-1]):Lt}(Re),Dt=nt.x-P(nt,ht)/2,Ot=ht.x+P(ht,nt)/2;return yn(Re,V?function(It){It.x=(It.x-Re.x)*N[0],It.y=(Re.y-It.y)*N[1]}:function(It){It.x=(It.x-Dt)/(Ot-Dt)*N[0],It.y=(1-(Re.y?It.y/Re.y:1))*N[1]}),Ae}return Z.separation=function(fe){return arguments.length?(P=fe,Z):P},Z.size=function(fe){return arguments.length?(V=null==(N=fe),Z):V?null:N},Z.nodeSize=function(fe){return arguments.length?(V=null!=(N=fe),Z):V?N:null},rn(Z,pe)},g.layout.treemap=function(){var pe,P=g.layout.hierarchy(),N=Math.round,V=[1,1],Z=null,fe=Yn,me=!1,we="squarify",Ae=.5*(1+Math.sqrt(5));function Re(It,Lt){for(var St,Gt,Vt=-1,Yt=It.length;++Vt<Yt;)Gt=(St=It[Vt]).value*(Lt<0?0:Lt),St.area=isNaN(Gt)||Gt<=0?0:Gt}function Xe(It){var Lt=It.children;if(Lt&&Lt.length){var St,Gt,Vt,Yt=fe(It),xn=[],En=Lt.slice(),jn=1/0,Nn="slice"===we?Yt.dx:"dice"===we?Yt.dy:"slice-dice"===we?1&It.depth?Yt.dy:Yt.dx:Math.min(Yt.dx,Yt.dy);for(Re(En,Yt.dx*Yt.dy/It.value),xn.area=0;(Vt=En.length)>0;)xn.push(St=En[Vt-1]),xn.area+=St.area,"squarify"!==we||(Gt=ht(xn,Nn))<=jn?(En.pop(),jn=Gt):(xn.area-=xn.pop().area,Dt(xn,Nn,Yt,!1),Nn=Math.min(Yt.dx,Yt.dy),xn.length=xn.area=0,jn=1/0);xn.length&&(Dt(xn,Nn,Yt,!0),xn.length=xn.area=0),Lt.forEach(Xe)}}function nt(It){var Lt=It.children;if(Lt&&Lt.length){var St,Gt=fe(It),Vt=Lt.slice(),Yt=[];for(Re(Vt,Gt.dx*Gt.dy/It.value),Yt.area=0;St=Vt.pop();)Yt.push(St),Yt.area+=St.area,null!=St.z&&(Dt(Yt,St.z?Gt.dx:Gt.dy,Gt,!Vt.length),Yt.length=Yt.area=0);Lt.forEach(nt)}}function ht(It,Lt){for(var St,Gt=It.area,Vt=0,Yt=1/0,xn=-1,En=It.length;++xn<En;)(St=It[xn].area)&&(St<Yt&&(Yt=St),St>Vt&&(Vt=St));return Lt*=Lt,(Gt*=Gt)?Math.max(Lt*Vt*Ae/Gt,Gt/(Lt*Yt*Ae)):1/0}function Dt(It,Lt,St,Gt){var Vt,Yt=-1,xn=It.length,En=St.x,jn=St.y,Nn=Lt?N(It.area/Lt):0;if(Lt==St.dx){for((Gt||Nn>St.dy)&&(Nn=St.dy);++Yt<xn;)(Vt=It[Yt]).x=En,Vt.y=jn,Vt.dy=Nn,En+=Vt.dx=Math.min(St.x+St.dx-En,Nn?N(Vt.area/Nn):0);Vt.z=!0,Vt.dx+=St.x+St.dx-En,St.y+=Nn,St.dy-=Nn}else{for((Gt||Nn>St.dx)&&(Nn=St.dx);++Yt<xn;)(Vt=It[Yt]).x=En,Vt.y=jn,Vt.dx=Nn,jn+=Vt.dy=Math.min(St.y+St.dy-jn,Nn?N(Vt.area/Nn):0);Vt.z=!1,Vt.dy+=St.y+St.dy-jn,St.x+=Nn,St.dx-=Nn}}function Ot(It){var Lt=pe||P(It),St=Lt[0];return St.x=St.y=0,St.value?(St.dx=V[0],St.dy=V[1]):St.dx=St.dy=0,pe&&P.revalue(St),Re([St],St.dx*St.dy/St.value),(pe?nt:Xe)(St),me&&(pe=Lt),Lt}return Ot.size=function(It){return arguments.length?(V=It,Ot):V},Ot.padding=function(It){if(!arguments.length)return Z;function Lt(Vt){var Yt=It.call(Ot,Vt,Vt.depth);return null==Yt?Yn(Vt):Qn(Vt,"number"==typeof Yt?[Yt,Yt,Yt,Yt]:Yt)}function St(Vt){return Qn(Vt,It)}var Gt;return fe=null==(Z=It)?Yn:"function"==(Gt=typeof It)?Lt:("number"===Gt&&(It=[It,It,It,It]),St),Ot},Ot.round=function(It){return arguments.length?(N=It?Math.round:Number,Ot):N!=Number},Ot.sticky=function(It){return arguments.length?(me=It,pe=null,Ot):me},Ot.ratio=function(It){return arguments.length?(Ae=It,Ot):Ae},Ot.mode=function(It){return arguments.length?(we=It+"",Ot):we},rn(Ot,P)},g.random={normal:function(pe,P){var N=arguments.length;return N<2&&(P=1),N<1&&(pe=0),function(){var V,Z,fe;do{fe=(V=2*Math.random()-1)*V+(Z=2*Math.random()-1)*Z}while(!fe||fe>1);return pe+P*V*Math.sqrt(-2*Math.log(fe)/fe)}},logNormal:function(){var pe=g.random.normal.apply(g,arguments);return function(){return Math.exp(pe())}},bates:function(pe){var P=g.random.irwinHall(pe);return function(){return P()/pe}},irwinHall:function(pe){return function(){for(var P=0,N=0;N<pe;N++)P+=Math.random();return P}}},g.scale={};var Ar={floor:L,ceil:L};function Hr(pe,P,N,V){var Z=[],fe=[],me=0,we=Math.min(pe.length,P.length)-1;for(pe[we]<pe[0]&&(pe=pe.slice().reverse(),P=P.slice().reverse());++me<=we;)Z.push(N(pe[me-1],pe[me])),fe.push(V(P[me-1],P[me]));return function(Ae){var Re=g.bisect(pe,Ae,1,we)-1;return fe[Re](Z[Re](Ae))}}function ii(pe,P){return g.rebind(pe,P,"range","rangeRound","interpolate","clamp")}function oi(pe,P){return Sr(pe,Vr(Ai(pe,P)[2])),Sr(pe,Vr(Ai(pe,P)[2])),pe}function Ai(pe,P){null==P&&(P=10);var N=fr(pe),V=N[1]-N[0],Z=Math.pow(10,Math.floor(Math.log(V/P)/Math.LN10)),fe=P/V*Z;return fe<=.15?Z*=10:fe<=.35?Z*=5:fe<=.75&&(Z*=2),N[0]=Math.ceil(N[0]/Z)*Z,N[1]=Math.floor(N[1]/Z)*Z+.5*Z,N[2]=Z,N}function lr(pe,P){return g.range.apply(g,Ai(pe,P))}g.scale.linear=function(){return function pe(P,N,V,Z){var fe,me;function we(){var Re=Math.min(P.length,N.length)>2?Hr:_r,Xe=Z?Qa:Cs;return fe=Re(P,N,Xe,V),me=Re(N,P,Xe,Oo),Ae}function Ae(Re){return fe(Re)}return Ae.invert=function(Re){return me(Re)},Ae.domain=function(Re){return arguments.length?(P=Re.map(Number),we()):P},Ae.range=function(Re){return arguments.length?(N=Re,we()):N},Ae.rangeRound=function(Re){return Ae.range(Re).interpolate($o)},Ae.clamp=function(Re){return arguments.length?(Z=Re,we()):Z},Ae.interpolate=function(Re){return arguments.length?(V=Re,we()):V},Ae.ticks=function(Re){return lr(P,Re)},Ae.tickFormat=function(Re,Xe){return d3_scale_linearTickFormat(P,Re,Xe)},Ae.nice=function(Re){return oi(P,Re),we()},Ae.copy=function(){return pe(P,N,V,Z)},we()}([0,1],[0,1],Oo,!1)},g.scale.log=function(){return function pe(P,N,V,Z){function fe(Ae){return(V?Math.log(Ae<0?0:Ae):-Math.log(Ae>0?0:-Ae))/Math.log(N)}function me(Ae){return V?Math.pow(N,Ae):-Math.pow(N,-Ae)}function we(Ae){return P(fe(Ae))}return we.invert=function(Ae){return me(P.invert(Ae))},we.domain=function(Ae){return arguments.length?(V=Ae[0]>=0,P.domain((Z=Ae.map(Number)).map(fe)),we):Z},we.base=function(Ae){return arguments.length?(N=+Ae,P.domain(Z.map(fe)),we):N},we.nice=function(){var Ae=Sr(Z.map(fe),V?Math:Ti);return P.domain(Ae),Z=Ae.map(me),we},we.ticks=function(){var Ae=fr(Z),Re=[],Xe=Ae[0],nt=Ae[1],ht=Math.floor(fe(Xe)),Dt=Math.ceil(fe(nt)),Ot=N%1?2:N;if(isFinite(Dt-ht)){if(V){for(;ht<Dt;ht++)for(var It=1;It<Ot;It++)Re.push(me(ht)*It);Re.push(me(ht))}else for(Re.push(me(ht));ht++<Dt;)for(It=Ot-1;It>0;It--)Re.push(me(ht)*It);for(ht=0;Re[ht]<Xe;ht++);for(Dt=Re.length;Re[Dt-1]>nt;Dt--);Re=Re.slice(ht,Dt)}return Re},we.copy=function(){return pe(P.copy(),N,V,Z)},ii(we,P)}(g.scale.linear().domain([0,1]),10,!0,[1,10])};var Ti={floor:function(pe){return-Math.ceil(-pe)},ceil:function(pe){return-Math.floor(-pe)}};function $r(pe){return function(P){return P<0?-Math.pow(-P,pe):Math.pow(P,pe)}}g.scale.pow=function(){return function pe(P,N,V){var Z=$r(N),fe=$r(1/N);function me(we){return P(Z(we))}return me.invert=function(we){return fe(P.invert(we))},me.domain=function(we){return arguments.length?(P.domain((V=we.map(Number)).map(Z)),me):V},me.ticks=function(we){return lr(V,we)},me.tickFormat=function(we,Ae){return d3_scale_linearTickFormat(V,we,Ae)},me.nice=function(we){return me.domain(oi(V,we))},me.exponent=function(we){return arguments.length?(Z=$r(N=we),fe=$r(1/N),P.domain(V.map(Z)),me):N},me.copy=function(){return pe(P.copy(),N,V)},ii(me,P)}(g.scale.linear(),1,[0,1])},g.scale.sqrt=function(){return g.scale.pow().exponent(.5)},g.scale.ordinal=function(){return function pe(P,N){var V,Z,fe;function me(Ae){return Z[((V.get(Ae)||("range"===N.t?V.set(Ae,P.push(Ae)):NaN))-1)%Z.length]}function we(Ae,Re){return g.range(P.length).map(function(Xe){return Ae+Re*Xe})}return me.domain=function(Ae){if(!arguments.length)return P;P=[],V=new k;for(var Re,Xe=-1,nt=Ae.length;++Xe<nt;)V.has(Re=Ae[Xe])||V.set(Re,P.push(Re));return me[N.t].apply(me,N.a)},me.range=function(Ae){return arguments.length?(Z=Ae,fe=0,N={t:"range",a:arguments},me):Z},me.rangePoints=function(Ae,Re){arguments.length<2&&(Re=0);var Xe=Ae[0],nt=Ae[1],ht=P.length<2?(Xe=(Xe+nt)/2,0):(nt-Xe)/(P.length-1+Re);return Z=we(Xe+ht*Re/2,ht),fe=0,N={t:"rangePoints",a:arguments},me},me.rangeRoundPoints=function(Ae,Re){arguments.length<2&&(Re=0);var Xe=Ae[0],nt=Ae[1],ht=P.length<2?(Xe=nt=Math.round((Xe+nt)/2),0):(nt-Xe)/(P.length-1+Re)|0;return Z=we(Xe+Math.round(ht*Re/2+(nt-Xe-(P.length-1+Re)*ht)/2),ht),fe=0,N={t:"rangeRoundPoints",a:arguments},me},me.rangeBands=function(Ae,Re,Xe){arguments.length<2&&(Re=0),arguments.length<3&&(Xe=Re);var nt=Ae[1]<Ae[0],ht=Ae[nt-0],Ot=(Ae[1-nt]-ht)/(P.length-Re+2*Xe);return Z=we(ht+Ot*Xe,Ot),nt&&Z.reverse(),fe=Ot*(1-Re),N={t:"rangeBands",a:arguments},me},me.rangeRoundBands=function(Ae,Re,Xe){arguments.length<2&&(Re=0),arguments.length<3&&(Xe=Re);var nt=Ae[1]<Ae[0],ht=Ae[nt-0],Dt=Ae[1-nt],Ot=Math.floor((Dt-ht)/(P.length-Re+2*Xe));return Z=we(ht+Math.round((Dt-ht-(P.length-Re)*Ot)/2),Ot),nt&&Z.reverse(),fe=Math.round(Ot*(1-Re)),N={t:"rangeRoundBands",a:arguments},me},me.rangeBand=function(){return fe},me.rangeExtent=function(){return fr(N.a[0])},me.copy=function(){return pe(P,N)},me.domain(P)}([],{t:"range",a:[[]]})},g.scale.category10=function(){return g.scale.ordinal().range(li)},g.scale.category20=function(){return g.scale.ordinal().range(_i)},g.scale.category20b=function(){return g.scale.ordinal().range(Yi)},g.scale.category20c=function(){return g.scale.ordinal().range(sa)};var li=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(un),_i=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(un),Yi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(un),sa=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(un);function qr(){return 0}g.scale.quantile=function(){return function pe(P,N){var V;function Z(){var me=0,we=N.length;for(V=[];++me<we;)V[me-1]=g.quantile(P,me/we);return fe}function fe(me){if(!isNaN(me=+me))return N[g.bisect(V,me)]}return fe.domain=function(me){return arguments.length?(P=me.map(c).filter(f).sort(i),Z()):P},fe.range=function(me){return arguments.length?(N=me,Z()):N},fe.quantiles=function(){return V},fe.invertExtent=function(me){return(me=N.indexOf(me))<0?[NaN,NaN]:[me>0?V[me-1]:P[0],me<V.length?V[me]:P[P.length-1]]},fe.copy=function(){return pe(P,N)},Z()}([],[])},g.scale.quantize=function(){return function pe(P,N,V){var Z,fe;function me(Ae){return V[Math.max(0,Math.min(fe,Math.floor(Z*(Ae-P))))]}function we(){return Z=V.length/(N-P),fe=V.length-1,me}return me.domain=function(Ae){return arguments.length?(P=+Ae[0],N=+Ae[Ae.length-1],we()):[P,N]},me.range=function(Ae){return arguments.length?(V=Ae,we()):V},me.invertExtent=function(Ae){return[Ae=(Ae=V.indexOf(Ae))<0?NaN:Ae/Z+P,Ae+1/Z]},me.copy=function(){return pe(P,N,V)},we()}(0,1,[0,1])},g.scale.threshold=function(){return function pe(P,N){function V(Z){if(Z<=Z)return N[g.bisect(P,Z)]}return V.domain=function(Z){return arguments.length?(P=Z,V):P},V.range=function(Z){return arguments.length?(N=Z,V):N},V.invertExtent=function(Z){return Z=N.indexOf(Z),[P[Z-1],P[Z]]},V.copy=function(){return pe(P,N)},V}([.5],[0,1])},g.scale.identity=function(){return function pe(P){function N(V){return+V}return N.invert=N,N.domain=N.range=function(V){return arguments.length?(P=V.map(N),N):P},N.ticks=function(V){return lr(P,V)},N.tickFormat=function(V,Z){return d3_scale_linearTickFormat(P,V,Z)},N.copy=function(){return pe(P)},N}([0,1])},g.svg={},g.svg.arc=function(){var pe=ji,P=Pi,N=qr,V=pa,Z=fa,fe=$i,me=Va;function we(){var Re=Math.max(0,+pe.apply(this,arguments)),Xe=Math.max(0,+P.apply(this,arguments)),nt=Z.apply(this,arguments)-cn,ht=fe.apply(this,arguments)-cn,Dt=Math.abs(ht-nt),Ot=nt>ht?0:1;if(Xe<Re&&(It=Xe,Xe=Re,Re=It),Dt>=dn)return Ae(Xe,Ot)+(Re?Ae(Re,1-Ot):"")+"Z";var It,Lt,St,Gt,Vt,Yt,xn,En,jn,Nn,hr,dr,Er=0,wr=0,Jr=[];if((Gt=(+me.apply(this,arguments)||0)/2)&&(St=V===pa?Math.sqrt(Re*Re+Xe*Xe):+V.apply(this,arguments),Ot||(wr*=-1),Xe&&(wr=Me(St/Xe*Math.sin(Gt))),Re&&(Er=Me(St/Re*Math.sin(Gt)))),Xe){Vt=Xe*Math.cos(nt+wr),Yt=Xe*Math.sin(nt+wr),xn=Xe*Math.cos(ht-wr),En=Xe*Math.sin(ht-wr);var pi=Math.abs(ht-nt-2*wr)<=Jt?0:1;if(wr&&wi(Vt,Yt,xn,En)===Ot^pi){var Li=(nt+ht)/2;Vt=Xe*Math.cos(Li),Yt=Xe*Math.sin(Li),xn=En=null}}else Vt=Yt=0;if(Re){jn=Re*Math.cos(ht-Er),Nn=Re*Math.sin(ht-Er),hr=Re*Math.cos(nt+Er),dr=Re*Math.sin(nt+Er);var ir=Math.abs(nt-ht+2*Er)<=Jt?0:1;if(Er&&wi(jn,Nn,hr,dr)===1-Ot^ir){var jr=(nt+ht)/2;jn=Re*Math.cos(jr),Nn=Re*Math.sin(jr),hr=dr=null}}else jn=Nn=0;if(Dt>Ft&&(It=Math.min(Math.abs(Xe-Re)/2,+N.apply(this,arguments)))>.001){Lt=Re<Xe^Ot?0:1;var mi=It,fi=It;if(Dt<Jt){var Mi=null==hr?[jn,Nn]:null==xn?[Vt,Yt]:Cr([Vt,Yt],[hr,dr],[xn,En],[jn,Nn]),Ri=Vt-Mi[0],ta=Yt-Mi[1],xi=xn-Mi[0],Hi=En-Mi[1],Bi=1/Math.sin(Math.acos((Ri*xi+ta*Hi)/(Math.sqrt(Ri*Ri+ta*ta)*Math.sqrt(xi*xi+Hi*Hi)))/2),ra=Math.sqrt(Mi[0]*Mi[0]+Mi[1]*Mi[1]);fi=Math.min(It,(Re-ra)/(Bi-1)),mi=Math.min(It,(Xe-ra)/(Bi+1))}if(null!=xn){var qi=Na(null==hr?[jn,Nn]:[hr,dr],[Vt,Yt],Xe,mi,Ot),aa=Na([xn,En],[jn,Nn],Xe,mi,Ot);It===mi?Jr.push("M",qi[0],"A",mi,",",mi," 0 0,",Lt," ",qi[1],"A",Xe,",",Xe," 0 ",1-Ot^wi(qi[1][0],qi[1][1],aa[1][0],aa[1][1]),",",Ot," ",aa[1],"A",mi,",",mi," 0 0,",Lt," ",aa[0]):Jr.push("M",qi[0],"A",mi,",",mi," 0 1,",Lt," ",aa[0])}else Jr.push("M",Vt,",",Yt);if(null!=hr){var ha=Na([Vt,Yt],[hr,dr],Re,-fi,Ot),ho=Na([jn,Nn],null==xn?[Vt,Yt]:[xn,En],Re,-fi,Ot);It===fi?Jr.push("L",ho[0],"A",fi,",",fi," 0 0,",Lt," ",ho[1],"A",Re,",",Re," 0 ",Ot^wi(ho[1][0],ho[1][1],ha[1][0],ha[1][1]),",",1-Ot," ",ha[1],"A",fi,",",fi," 0 0,",Lt," ",ha[0]):Jr.push("L",ho[0],"A",fi,",",fi," 0 0,",Lt," ",ha[0])}else Jr.push("L",jn,",",Nn)}else Jr.push("M",Vt,",",Yt),null!=xn&&Jr.push("A",Xe,",",Xe," 0 ",pi,",",Ot," ",xn,",",En),Jr.push("L",jn,",",Nn),null!=hr&&Jr.push("A",Re,",",Re," 0 ",ir,",",1-Ot," ",hr,",",dr);return Jr.push("Z"),Jr.join("")}function Ae(Re,Xe){return"M0,"+Re+"A"+Re+","+Re+" 0 1,"+Xe+" 0,"+-Re+"A"+Re+","+Re+" 0 1,"+Xe+" 0,"+Re}return we.innerRadius=function(Re){return arguments.length?(pe=Rn(Re),we):pe},we.outerRadius=function(Re){return arguments.length?(P=Rn(Re),we):P},we.cornerRadius=function(Re){return arguments.length?(N=Rn(Re),we):N},we.padRadius=function(Re){return arguments.length?(V=Re==pa?pa:Rn(Re),we):V},we.startAngle=function(Re){return arguments.length?(Z=Rn(Re),we):Z},we.endAngle=function(Re){return arguments.length?(fe=Rn(Re),we):fe},we.padAngle=function(Re){return arguments.length?(me=Rn(Re),we):me},we.centroid=function(){var Re=(+pe.apply(this,arguments)+ +P.apply(this,arguments))/2,Xe=(+Z.apply(this,arguments)+ +fe.apply(this,arguments))/2-cn;return[Math.cos(Xe)*Re,Math.sin(Xe)*Re]},we};var pa="auto";function ji(pe){return pe.innerRadius}function Pi(pe){return pe.outerRadius}function fa(pe){return pe.startAngle}function $i(pe){return pe.endAngle}function Va(pe){return pe&&pe.padAngle}function wi(pe,P,N,V){return(pe-N)*P-(P-V)*pe>0?0:1}function Na(pe,P,N,V,Z){var fe=pe[0]-P[0],me=pe[1]-P[1],we=(Z?V:-V)/Math.sqrt(fe*fe+me*me),Ae=we*me,Re=-we*fe,Xe=pe[0]+Ae,nt=pe[1]+Re,ht=P[0]+Ae,Dt=P[1]+Re,Ot=(Xe+ht)/2,It=(nt+Dt)/2,Lt=ht-Xe,St=Dt-nt,Gt=Lt*Lt+St*St,Vt=N-V,Yt=Xe*Dt-ht*nt,xn=(St<0?-1:1)*Math.sqrt(Math.max(0,Vt*Vt*Gt-Yt*Yt)),En=(Yt*St-Lt*xn)/Gt,jn=(-Yt*Lt-St*xn)/Gt,Nn=(Yt*St+Lt*xn)/Gt,hr=(-Yt*Lt+St*xn)/Gt,dr=En-Ot,Er=jn-It,wr=Nn-Ot,Jr=hr-It;return dr*dr+Er*Er>wr*wr+Jr*Jr&&(En=Nn,jn=hr),[[En-Ae,jn-Re],[En*N/Vt,jn*N/Vt]]}function ga(){return!0}function Vs(pe){var P=$n,N=Mr,V=ga,Z=Ra,fe=Z.key,me=.7;function we(Ae){var Re,Xe=[],nt=[],ht=-1,Dt=Ae.length,Ot=Rn(P),It=Rn(N);function Lt(){Xe.push("M",Z(pe(nt),me))}for(;++ht<Dt;)V.call(this,Re=Ae[ht],ht)?nt.push([+Ot.call(this,Re,ht),+It.call(this,Re,ht)]):nt.length&&(Lt(),nt=[]);return nt.length&&Lt(),Xe.length?Xe.join(""):null}return we.x=function(Ae){return arguments.length?(P=Ae,we):P},we.y=function(Ae){return arguments.length?(N=Ae,we):N},we.defined=function(Ae){return arguments.length?(V=Ae,we):V},we.interpolate=function(Ae){return arguments.length?(fe="function"==typeof Ae?Z=Ae:(Z=Fs.get(Ae)||Ra).key,we):fe},we.tension=function(Ae){return arguments.length?(me=Ae,we):me},we}g.svg.line=function(){return Vs(L)};var Fs=g.map({linear:Ra,"linear-closed":Ui,step:function(pe){for(var P=0,N=pe.length,V=pe[0],Z=[V[0],",",V[1]];++P<N;)Z.push("H",(V[0]+(V=pe[P])[0])/2,"V",V[1]);return N>1&&Z.push("H",V[0]),Z.join("")},"step-before":yo,"step-after":Jo,basis:Ro,"basis-open":function(pe){if(pe.length<4)return Ra(pe);for(var P,N=[],V=-1,Z=pe.length,fe=[0],me=[0];++V<3;)fe.push((P=pe[V])[0]),me.push(P[1]);for(N.push(ka(Wo,fe)+","+ka(Wo,me)),--V;++V<Z;)P=pe[V],fe.shift(),fe.push(P[0]),me.shift(),me.push(P[1]),vl(N,fe,me);return N.join("")},"basis-closed":function(pe){for(var P,N,V=-1,Z=pe.length,fe=Z+4,me=[],we=[];++V<4;)me.push((N=pe[V%Z])[0]),we.push(N[1]);for(P=[ka(Wo,me),",",ka(Wo,we)],--V;++V<fe;)N=pe[V%Z],me.shift(),me.push(N[0]),we.shift(),we.push(N[1]),vl(P,me,we);return P.join("")},bundle:function(pe,P){var N=pe.length-1;if(N)for(var V,Z,fe=pe[0][0],me=pe[0][1],we=pe[N][0]-fe,Ae=pe[N][1]-me,Re=-1;++Re<=N;)(V=pe[Re])[0]=P*V[0]+(1-P)*(fe+(Z=Re/N)*we),V[1]=P*V[1]+(1-P)*(me+Z*Ae);return Ro(pe)},cardinal:function(pe,P){return pe.length<3?Ra(pe):pe[0]+ia(pe,Mo(pe,P))},"cardinal-open":function(pe,P){return pe.length<4?Ra(pe):pe[1]+ia(pe.slice(1,-1),Mo(pe,P))},"cardinal-closed":function(pe,P){return pe.length<3?Ui(pe):pe[0]+ia((pe.push(pe[0]),pe),Mo([pe[pe.length-2]].concat(pe,[pe[1]]),P))},monotone:function(pe){return pe.length<3?Ra(pe):pe[0]+ia(pe,function(P){for(var N,V,Z,fe,me=[],we=function(Xe){for(var nt=0,ht=Xe.length-1,Dt=[],Ot=Xe[0],It=Xe[1],Lt=Dt[0]=fs(Ot,It);++nt<ht;)Dt[nt]=(Lt+(Lt=fs(Ot=It,It=Xe[nt+1])))/2;return Dt[nt]=Lt,Dt}(P),Ae=-1,Re=P.length-1;++Ae<Re;)N=fs(P[Ae],P[Ae+1]),o(N)<Ft?we[Ae]=we[Ae+1]=0:(fe=(V=we[Ae]/N)*V+(Z=we[Ae+1]/N)*Z)>9&&(fe=3*N/Math.sqrt(fe),we[Ae]=fe*V,we[Ae+1]=fe*Z);for(Ae=-1;++Ae<=Re;)fe=(P[Math.min(Re,Ae+1)][0]-P[Math.max(0,Ae-1)][0])/(6*(1+we[Ae]*we[Ae])),me.push([fe||0,we[Ae]*fe||0]);return me}(pe))}});function Ra(pe){return pe.length>1?pe.join("L"):pe+"Z"}function Ui(pe){return pe.join("L")+"Z"}function yo(pe){for(var P=0,N=pe.length,V=pe[0],Z=[V[0],",",V[1]];++P<N;)Z.push("V",(V=pe[P])[1],"H",V[0]);return Z.join("")}function Jo(pe){for(var P=0,N=pe.length,V=pe[0],Z=[V[0],",",V[1]];++P<N;)Z.push("H",(V=pe[P])[0],"V",V[1]);return Z.join("")}function ia(pe,P){if(P.length<1||pe.length!=P.length&&pe.length!=P.length+2)return Ra(pe);var N=pe.length!=P.length,V="",Z=pe[0],fe=pe[1],me=P[0],we=me,Ae=1;if(N&&(V+="Q"+(fe[0]-2*me[0]/3)+","+(fe[1]-2*me[1]/3)+","+fe[0]+","+fe[1],Z=pe[1],Ae=2),P.length>1){fe=pe[Ae],Ae++,V+="C"+(Z[0]+me[0])+","+(Z[1]+me[1])+","+(fe[0]-(we=P[1])[0])+","+(fe[1]-we[1])+","+fe[0]+","+fe[1];for(var Re=2;Re<P.length;Re++,Ae++)V+="S"+((fe=pe[Ae])[0]-(we=P[Re])[0])+","+(fe[1]-we[1])+","+fe[0]+","+fe[1]}if(N){var Xe=pe[Ae];V+="Q"+(fe[0]+2*we[0]/3)+","+(fe[1]+2*we[1]/3)+","+Xe[0]+","+Xe[1]}return V}function Mo(pe,P){for(var N,V=[],Z=(1-P)/2,fe=pe[0],me=pe[1],we=1,Ae=pe.length;++we<Ae;)N=fe,fe=me,V.push([Z*((me=pe[we])[0]-N[0]),Z*(me[1]-N[1])]);return V}function Ro(pe){if(pe.length<3)return Ra(pe);var P=1,N=pe.length,V=pe[0],Z=V[0],fe=V[1],me=[Z,Z,Z,(V=pe[1])[0]],we=[fe,fe,fe,V[1]],Ae=[Z,",",fe,"L",ka(Wo,me),",",ka(Wo,we)];for(pe.push(pe[N-1]);++P<=N;)V=pe[P],me.shift(),me.push(V[0]),we.shift(),we.push(V[1]),vl(Ae,me,we);return pe.pop(),Ae.push("L",V),Ae.join("")}function ka(pe,P){return pe[0]*P[0]+pe[1]*P[1]+pe[2]*P[2]+pe[3]*P[3]}Fs.forEach(function(pe,P){P.key=pe,P.closed=/-closed$/.test(pe)});var eo=[0,2/3,1/3,0],Ha=[0,1/3,2/3,0],Wo=[0,1/6,2/3,1/6];function vl(pe,P,N){pe.push("C",ka(eo,P),",",ka(eo,N),",",ka(Ha,P),",",ka(Ha,N),",",ka(Wo,P),",",ka(Wo,N))}function fs(pe,P){return(P[1]-pe[1])/(P[0]-pe[0])}function jl(pe){for(var P,N,V,Z=-1,fe=pe.length;++Z<fe;)N=(P=pe[Z])[0],V=P[1]-cn,P[0]=N*Math.cos(V),P[1]=N*Math.sin(V);return pe}function ko(pe){var P=$n,N=$n,V=0,Z=Mr,fe=ga,me=Ra,we=me.key,Ae=me,Re="L",Xe=.7;function nt(ht){var Dt,Ot,It,Lt=[],St=[],Gt=[],Vt=-1,Yt=ht.length,xn=Rn(P),En=Rn(V),jn=P===N?function(){return Ot}:Rn(N),Nn=V===Z?function(){return It}:Rn(Z);function hr(){Lt.push("M",me(pe(Gt),Xe),Re,Ae(pe(St.reverse()),Xe),"Z")}for(;++Vt<Yt;)fe.call(this,Dt=ht[Vt],Vt)?(St.push([Ot=+xn.call(this,Dt,Vt),It=+En.call(this,Dt,Vt)]),Gt.push([+jn.call(this,Dt,Vt),+Nn.call(this,Dt,Vt)])):St.length&&(hr(),St=[],Gt=[]);return St.length&&hr(),Lt.length?Lt.join(""):null}return nt.x=function(ht){return arguments.length?(P=N=ht,nt):N},nt.x0=function(ht){return arguments.length?(P=ht,nt):P},nt.x1=function(ht){return arguments.length?(N=ht,nt):N},nt.y=function(ht){return arguments.length?(V=Z=ht,nt):Z},nt.y0=function(ht){return arguments.length?(V=ht,nt):V},nt.y1=function(ht){return arguments.length?(Z=ht,nt):Z},nt.defined=function(ht){return arguments.length?(fe=ht,nt):fe},nt.interpolate=function(ht){return arguments.length?(we="function"==typeof ht?me=ht:(me=Fs.get(ht)||Ra).key,Ae=me.reverse||me,Re=me.closed?"M":"L",nt):we},nt.tension=function(ht){return arguments.length?(Xe=ht,nt):Xe},nt}function Qi(pe){return pe.source}function Go(pe){return pe.target}function cl(pe){return pe.radius}function Ci(pe){return[pe.x,pe.y]}function Vi(pe){return function(){var P=pe.apply(this,arguments),N=P[0],V=P[1]-cn;return[N*Math.cos(V),N*Math.sin(V)]}}function Ul(){return 64}function tu(){return"circle"}function fl(pe){var P=Math.sqrt(pe/Jt);return"M0,"+P+"A"+P+","+P+" 0 1,1 0,"+-P+"A"+P+","+P+" 0 1,1 0,"+P+"Z"}g.svg.line.radial=function(){var pe=Vs(jl);return pe.radius=pe.x,delete pe.x,pe.angle=pe.y,delete pe.y,pe},yo.reverse=Jo,Jo.reverse=yo,g.svg.area=function(){return ko(L)},g.svg.area.radial=function(){var pe=ko(jl);return pe.radius=pe.x,delete pe.x,pe.innerRadius=pe.x0,delete pe.x0,pe.outerRadius=pe.x1,delete pe.x1,pe.angle=pe.y,delete pe.y,pe.startAngle=pe.y0,delete pe.y0,pe.endAngle=pe.y1,delete pe.y1,pe},g.svg.chord=function(){var pe=Qi,P=Go,N=cl,V=fa,Z=$i;function fe(Re,Xe){var nt,ht,Dt=me(this,pe,Re,Xe),Ot=me(this,P,Re,Xe);return"M"+Dt.p0+we(Dt.r,Dt.p1,Dt.a1-Dt.a0)+((nt=Dt).a0==(ht=Ot).a0&&nt.a1==ht.a1?Ae(0,0,0,Dt.p0):Ae(0,0,0,Ot.p0)+we(Ot.r,Ot.p1,Ot.a1-Ot.a0)+Ae(0,0,0,Dt.p0))+"Z"}function me(Re,Xe,nt,ht){var Dt=Xe.call(Re,nt,ht),Ot=N.call(Re,Dt,ht),It=V.call(Re,Dt,ht)-cn,Lt=Z.call(Re,Dt,ht)-cn;return{r:Ot,a0:It,a1:Lt,p0:[Ot*Math.cos(It),Ot*Math.sin(It)],p1:[Ot*Math.cos(Lt),Ot*Math.sin(Lt)]}}function we(Re,Xe,nt){return"A"+Re+","+Re+" 0 "+ +(nt>Jt)+",1 "+Xe}function Ae(Re,Xe,nt,ht){return"Q 0,0 "+ht}return fe.radius=function(Re){return arguments.length?(N=Rn(Re),fe):N},fe.source=function(Re){return arguments.length?(pe=Rn(Re),fe):pe},fe.target=function(Re){return arguments.length?(P=Rn(Re),fe):P},fe.startAngle=function(Re){return arguments.length?(V=Rn(Re),fe):V},fe.endAngle=function(Re){return arguments.length?(Z=Rn(Re),fe):Z},fe},g.svg.diagonal=function(){var pe=Qi,P=Go,N=Ci;function V(Z,fe){var me=pe.call(this,Z,fe),we=P.call(this,Z,fe),Ae=(me.y+we.y)/2,Re=[me,{x:me.x,y:Ae},{x:we.x,y:Ae},we];return"M"+(Re=Re.map(N))[0]+"C"+Re[1]+" "+Re[2]+" "+Re[3]}return V.source=function(Z){return arguments.length?(pe=Rn(Z),V):pe},V.target=function(Z){return arguments.length?(P=Rn(Z),V):P},V.projection=function(Z){return arguments.length?(N=Z,V):N},V},g.svg.diagonal.radial=function(){var pe=g.svg.diagonal(),P=Ci,N=pe.projection;return pe.projection=function(V){return arguments.length?N(Vi(P=V)):P},pe},g.svg.symbol=function(){var pe=tu,P=Ul;function N(V,Z){return(Zr.get(pe.call(this,V,Z))||fl)(P.call(this,V,Z))}return N.type=function(V){return arguments.length?(pe=Rn(V),N):pe},N.size=function(V){return arguments.length?(P=Rn(V),N):P},N};var Zr=g.map({circle:fl,cross:function(pe){var P=Math.sqrt(pe/5)/2;return"M"+-3*P+","+-P+"H"+-P+"V"+-3*P+"H"+P+"V"+-P+"H"+3*P+"V"+P+"H"+P+"V"+3*P+"H"+-P+"V"+P+"H"+-3*P+"Z"},diamond:function(pe){var P=Math.sqrt(pe/(2*Cu)),N=P*Cu;return"M0,"+-P+"L"+N+",0 0,"+P+" "+-N+",0Z"},square:function(pe){var P=Math.sqrt(pe)/2;return"M"+-P+","+-P+"L"+P+","+-P+" "+P+","+P+" "+-P+","+P+"Z"},"triangle-down":function(pe){var P=Math.sqrt(pe/la),N=P*la/2;return"M0,"+N+"L"+P+","+-N+" "+-P+","+-N+"Z"},"triangle-up":function(pe){var P=Math.sqrt(pe/la),N=P*la/2;return"M0,"+-N+"L"+P+","+N+" "+-P+","+N+"Z"}});g.svg.symbolTypes=Zr.keys();var la=Math.sqrt(3),Cu=Math.tan(30*Tn);te.transition=function(pe){for(var P,N,V=hs||++Pl,Z=yl(pe),fe=[],me=Js||{time:Date.now(),ease:Ll,delay:0,duration:250},we=-1,Ae=this.length;++we<Ae;){fe.push(P=[]);for(var Re=this[we],Xe=-1,nt=Re.length;++Xe<nt;)(N=Re[Xe])&&Do(N,Xe,Z,V,me),P.push(N)}return Da(fe,Z,V)},te.interrupt=function(pe){return this.each(null==pe?Ao:Ca(yl(pe)))};var Ao=Ca(yl());function Ca(pe){return function(){var P,N,V;(P=this[pe])&&(V=P[N=P.active])&&(V.timer.c=null,V.timer.t=NaN,--P.count?delete P[N]:delete this[pe],P.active+=.5,V.event&&V.event.interrupt.call(this,this.__data__,V.index))}}function Da(pe,P,N){return U(pe,xo),pe.namespace=P,pe.id=N,pe}var hs,Js,xo=[],Pl=0;function Vl(pe,P,N,V){var Z=pe.id,fe=pe.namespace;return He(pe,"function"==typeof N?function(me,we,Ae){me[fe][Z].tween.set(P,V(N.call(me,me.__data__,we,Ae)))}:(N=V(N),function(me){me[fe][Z].tween.set(P,N)}))}function hl(pe){return null==pe&&(pe=""),function(){this.textContent=pe}}function yl(pe){return null==pe?"__transition__":"__transition_"+pe+"__"}function Do(pe,P,N,V,Z){var fe,me,we,Ae,Re,Xe=pe[N]||(pe[N]={active:0,count:0}),nt=Xe[V];function ht(Ot){var It=Xe.active,Lt=Xe[It];for(var St in Lt&&(Lt.timer.c=null,Lt.timer.t=NaN,--Xe.count,delete Xe[It],Lt.event&&Lt.event.interrupt.call(pe,pe.__data__,Lt.index)),Xe)if(+St<V){var Gt=Xe[St];Gt.timer.c=null,Gt.timer.t=NaN,--Xe.count,delete Xe[St]}me.c=Dt,Br(function(){return me.c&&Dt(Ot||1)&&(me.c=null,me.t=NaN),1},0,fe),Xe.active=V,nt.event&&nt.event.start.call(pe,pe.__data__,P),Re=[],nt.tween.forEach(function(Vt,Yt){(Yt=Yt.call(pe,pe.__data__,P))&&Re.push(Yt)}),Ae=nt.ease,we=nt.duration}function Dt(Ot){for(var It=Ot/we,Lt=Ae(It),St=Re.length;St>0;)Re[--St].call(pe,Lt);if(It>=1)return nt.event&&nt.event.end.call(pe,pe.__data__,P),--Xe.count?delete Xe[V]:delete pe[N],1}nt||(me=Br(function(Ot){var It=nt.delay;if(me.t=It+fe,It<=Ot)return ht(Ot-It);me.c=ht},0,fe=Z.time),nt=Xe[V]={tween:new k,time:fe,timer:me,delay:Z.delay,duration:Z.duration,ease:Z.ease,index:P},Z=null,++Xe.count)}xo.call=te.call,xo.empty=te.empty,xo.node=te.node,xo.size=te.size,g.transition=function(pe,P){return pe&&pe.transition?hs?pe.transition(P):pe:g.selection().transition(pe)},g.transition.prototype=xo,xo.select=function(pe){var P,N,V,Z=this.id,fe=this.namespace,me=[];pe=se(pe);for(var we=-1,Ae=this.length;++we<Ae;){me.push(P=[]);for(var Re=this[we],Xe=-1,nt=Re.length;++Xe<nt;)(V=Re[Xe])&&(N=pe.call(V,V.__data__,Xe,we))?("__data__"in V&&(N.__data__=V.__data__),Do(N,Xe,fe,Z,V[fe][Z]),P.push(N)):P.push(null)}return Da(me,fe,Z)},xo.selectAll=function(pe){var P,N,V,Z,fe,me=this.id,we=this.namespace,Ae=[];pe=ue(pe);for(var Re=-1,Xe=this.length;++Re<Xe;)for(var nt=this[Re],ht=-1,Dt=nt.length;++ht<Dt;)if(V=nt[ht]){fe=V[we][me],N=pe.call(V,V.__data__,ht,Re),Ae.push(P=[]);for(var Ot=-1,It=N.length;++Ot<It;)(Z=N[Ot])&&Do(Z,Ot,we,me,fe),P.push(Z)}return Da(Ae,we,me)},xo.filter=function(pe){var P,N,V=[];"function"!=typeof pe&&(pe=Fe(pe));for(var Z=0,fe=this.length;Z<fe;Z++){V.push(P=[]);for(var me,we=0,Ae=(me=this[Z]).length;we<Ae;we++)(N=me[we])&&pe.call(N,N.__data__,we,Z)&&P.push(N)}return Da(V,this.namespace,this.id)},xo.tween=function(pe,P){var N=this.id,V=this.namespace;return arguments.length<2?this.node()[V][N].tween.get(pe):He(this,null==P?function(Z){Z[V][N].tween.remove(pe)}:function(Z){Z[V][N].tween.set(pe,P)})},xo.attr=function(pe,P){if(arguments.length<2){for(P in pe)this.attr(P,pe[P]);return this}var N="transform"==pe?Ms:Oo,V=g.ns.qualify(pe);function Z(){this.removeAttribute(V)}function fe(){this.removeAttributeNS(V.space,V.local)}function me(Ae){return null==Ae?Z:(Ae+="",function(){var Re,Xe=this.getAttribute(V);return Xe!==Ae&&(Re=N(Xe,Ae),function(nt){this.setAttribute(V,Re(nt))})})}function we(Ae){return null==Ae?fe:(Ae+="",function(){var Re,Xe=this.getAttributeNS(V.space,V.local);return Xe!==Ae&&(Re=N(Xe,Ae),function(nt){this.setAttributeNS(V.space,V.local,Re(nt))})})}return Vl(this,"attr."+pe,P,V.local?we:me)},xo.attrTween=function(pe,P){var N=g.ns.qualify(pe);return this.tween("attr."+pe,N.local?function(V,Z){var fe=P.call(this,V,Z,this.getAttributeNS(N.space,N.local));return fe&&function(me){this.setAttributeNS(N.space,N.local,fe(me))}}:function(V,Z){var fe=P.call(this,V,Z,this.getAttribute(N));return fe&&function(me){this.setAttribute(N,fe(me))}})},xo.style=function(pe,P,N){var V=arguments.length;if(V<3){if("string"!=typeof pe){for(N in V<2&&(P=""),pe)this.style(N,pe[N],P);return this}N=""}function Z(){this.style.removeProperty(pe)}function fe(me){return null==me?Z:(me+="",function(){var we,Ae=r(this).getComputedStyle(this,null).getPropertyValue(pe);return Ae!==me&&(we=Oo(Ae,me),function(Re){this.style.setProperty(pe,we(Re),N)})})}return Vl(this,"style."+pe,P,fe)},xo.styleTween=function(pe,P,N){function V(Z,fe){var me=P.call(this,Z,fe,r(this).getComputedStyle(this,null).getPropertyValue(pe));return me&&function(we){this.style.setProperty(pe,me(we),N)}}return arguments.length<3&&(N=""),this.tween("style."+pe,V)},xo.text=function(pe){return Vl(this,"text",pe,hl)},xo.remove=function(){var pe=this.namespace;return this.each("end.transition",function(){var P;this[pe].count<2&&(P=this.parentNode)&&P.removeChild(this)})},xo.ease=function(pe){var P=this.id,N=this.namespace;return arguments.length<1?this.node()[N][P].ease:("function"!=typeof pe&&(pe=g.ease.apply(g,arguments)),He(this,function(V){V[N][P].ease=pe}))},xo.delay=function(pe){var P=this.id,N=this.namespace;return arguments.length<1?this.node()[N][P].delay:He(this,"function"==typeof pe?function(V,Z,fe){V[N][P].delay=+pe.call(V,V.__data__,Z,fe)}:(pe=+pe,function(V){V[N][P].delay=pe}))},xo.duration=function(pe){var P=this.id,N=this.namespace;return arguments.length<1?this.node()[N][P].duration:He(this,"function"==typeof pe?function(V,Z,fe){V[N][P].duration=Math.max(1,pe.call(V,V.__data__,Z,fe))}:(pe=Math.max(1,pe),function(V){V[N][P].duration=pe}))},xo.each=function(pe,P){var N=this.id,V=this.namespace;if(arguments.length<2){var Z=Js,fe=hs;try{hs=N,He(this,function(me,we,Ae){Js=me[V][N],pe.call(me,me.__data__,we,Ae)})}finally{Js=Z,hs=fe}}else He(this,function(me){var we=me[V][N];(we.event||(we.event=g.dispatch("start","end","interrupt"))).on(pe,P)});return this},xo.transition=function(){for(var pe,P,N,V=this.id,Z=++Pl,fe=this.namespace,me=[],we=0,Ae=this.length;we<Ae;we++){me.push(pe=[]);for(var Re,Xe=0,nt=(Re=this[we]).length;Xe<nt;Xe++)(P=Re[Xe])&&Do(P,Xe,fe,Z,{time:(N=P[fe][V]).time,ease:N.ease,delay:N.delay+N.duration,duration:N.duration}),pe.push(P)}return Da(me,fe,Z)},g.svg.axis=function(){var pe,P=g.scale.linear(),N=Qs,V=6,Z=6,fe=3,me=[10],we=null;function Ae(Re){Re.each(function(){var Xe,nt=g.select(this),ht=this.__chart__||P,Dt=this.__chart__=P.copy(),Ot=null==we?Dt.ticks?Dt.ticks.apply(Dt,me):Dt.domain():we,It=null==pe?Dt.tickFormat?Dt.tickFormat.apply(Dt,me):L:pe,Lt=nt.selectAll(".tick").data(Ot,Dt),St=Lt.enter().insert("g",".domain").attr("class","tick").style("opacity",Ft),Gt=g.transition(Lt.exit()).style("opacity",Ft).remove(),Vt=g.transition(Lt.order()).style("opacity",1),Yt=Math.max(V,0)+fe,xn=kr(Dt),En=nt.selectAll(".domain").data([0]),jn=(En.enter().append("path").attr("class","domain"),g.transition(En));St.append("line"),St.append("text");var Nn,hr,dr,Er,wr=St.select("line"),Jr=Vt.select("line"),pi=Lt.select("text").text(It),Li=St.select("text"),ir=Vt.select("text"),jr="top"===N||"left"===N?-1:1;if("bottom"===N||"top"===N?(Xe=zs,Nn="x",dr="y",hr="x2",Er="y2",pi.attr("dy",jr<0?"0em":".71em").style("text-anchor","middle"),jn.attr("d","M"+xn[0]+","+jr*Z+"V0H"+xn[1]+"V"+jr*Z)):(Xe=el,Nn="y",dr="x",hr="y2",Er="x2",pi.attr("dy",".32em").style("text-anchor",jr<0?"end":"start"),jn.attr("d","M"+jr*Z+","+xn[0]+"H0V"+xn[1]+"H"+jr*Z)),wr.attr(Er,jr*V),Li.attr(dr,jr*Yt),Jr.attr(hr,0).attr(Er,jr*V),ir.attr(Nn,0).attr(dr,jr*Yt),Dt.rangeBand){var mi=Dt,fi=mi.rangeBand()/2;ht=Dt=function(Mi){return mi(Mi)+fi}}else ht.rangeBand?ht=Dt:Gt.call(Xe,Dt,ht);St.call(Xe,ht,Dt),Vt.call(Xe,Dt,Dt)})}return Ae.scale=function(Re){return arguments.length?(P=Re,Ae):P},Ae.orient=function(Re){return arguments.length?(N=Re in Du?Re+"":Qs,Ae):N},Ae.ticks=function(){return arguments.length?(me=w(arguments),Ae):me},Ae.tickValues=function(Re){return arguments.length?(we=Re,Ae):we},Ae.tickFormat=function(Re){return arguments.length?(pe=Re,Ae):pe},Ae.tickSize=function(Re){var Xe=arguments.length;return Xe?(V=+Re,Z=+arguments[Xe-1],Ae):V},Ae.innerTickSize=function(Re){return arguments.length?(V=+Re,Ae):V},Ae.outerTickSize=function(Re){return arguments.length?(Z=+Re,Ae):Z},Ae.tickPadding=function(Re){return arguments.length?(fe=+Re,Ae):fe},Ae.tickSubdivide=function(){return arguments.length&&Ae},Ae};var Qs="bottom",Du={top:1,right:1,bottom:1,left:1};function zs(pe,P,N){pe.attr("transform",function(V){var Z=P(V);return"translate("+(isFinite(Z)?Z:N(V))+",0)"})}function el(pe,P,N){pe.attr("transform",function(V){var Z=P(V);return"translate(0,"+(isFinite(Z)?Z:N(V))+")"})}g.svg.brush=function(){var pe,P,N=re(Xe,"brushstart","brush","brushend"),V=null,Z=null,fe=[0,0],me=[0,0],we=!0,Ae=!0,Re=Qo[0];function Xe(It){It.each(function(){var Lt=g.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Ot).on("touchstart.brush",Ot),St=Lt.selectAll(".background").data([0]);St.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Lt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Gt=Lt.selectAll(".resize").data(Re,L);Gt.exit().remove(),Gt.enter().append("g").attr("class",function(En){return"resize "+En}).style("cursor",function(En){return Hl[En]}).append("rect").attr("x",function(En){return/[ew]$/.test(En)?-3:null}).attr("y",function(En){return/^[ns]/.test(En)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Gt.style("display",Xe.empty()?"none":null);var Vt,Yt=g.transition(Lt),xn=g.transition(St);V&&(Vt=kr(V),xn.attr("x",Vt[0]).attr("width",Vt[1]-Vt[0]),ht(Yt)),Z&&(Vt=kr(Z),xn.attr("y",Vt[0]).attr("height",Vt[1]-Vt[0]),Dt(Yt)),nt(Yt)})}function nt(It){It.selectAll(".resize").attr("transform",function(Lt){return"translate("+fe[+/e$/.test(Lt)]+","+me[+/^s/.test(Lt)]+")"})}function ht(It){It.select(".extent").attr("x",fe[0]),It.selectAll(".extent,.n>rect,.s>rect").attr("width",fe[1]-fe[0])}function Dt(It){It.select(".extent").attr("y",me[0]),It.selectAll(".extent,.e>rect,.w>rect").attr("height",me[1]-me[0])}function Ot(){var It,Lt,St=this,Gt=g.select(g.event.target),Vt=N.of(St,arguments),Yt=g.select(St),xn=Gt.datum(),En=!/^(n|s)$/.test(xn)&&V,jn=!/^(e|w)$/.test(xn)&&Z,Nn=Gt.classed("extent"),hr=Bt(St),dr=g.mouse(St),Er=g.select(r(St)).on("keydown.brush",pi).on("keyup.brush",Li);if(g.event.changedTouches?Er.on("touchmove.brush",ir).on("touchend.brush",mi):Er.on("mousemove.brush",ir).on("mouseup.brush",mi),Yt.interrupt().selectAll("*").interrupt(),Nn)dr[0]=fe[0]-dr[0],dr[1]=me[0]-dr[1];else if(xn){var wr=+/w$/.test(xn),Jr=+/^n/.test(xn);Lt=[fe[1-wr]-dr[0],me[1-Jr]-dr[1]],dr[0]=fe[wr],dr[1]=me[Jr]}else g.event.altKey&&(It=dr.slice());function pi(){32==g.event.keyCode&&(Nn||(It=null,dr[0]-=fe[1],dr[1]-=me[1],Nn=2),X())}function Li(){32==g.event.keyCode&&2==Nn&&(dr[0]+=fe[1],dr[1]+=me[1],Nn=0,X())}function ir(){var fi=g.mouse(St),Mi=!1;Lt&&(fi[0]+=Lt[0],fi[1]+=Lt[1]),Nn||(g.event.altKey?(It||(It=[(fe[0]+fe[1])/2,(me[0]+me[1])/2]),dr[0]=fe[+(fi[0]<It[0])],dr[1]=me[+(fi[1]<It[1])]):It=null),En&&jr(fi,V,0)&&(ht(Yt),Mi=!0),jn&&jr(fi,Z,1)&&(Dt(Yt),Mi=!0),Mi&&(nt(Yt),Vt({type:"brush",mode:Nn?"move":"resize"}))}function jr(fi,Mi,Ri){var ta,xi,Hi=kr(Mi),Bi=Hi[0],ra=Hi[1],qi=dr[Ri],aa=Ri?me:fe,ha=aa[1]-aa[0];if(Nn&&(Bi-=qi,ra-=ha+qi),ta=(Ri?Ae:we)?Math.max(Bi,Math.min(ra,fi[Ri])):fi[Ri],Nn?xi=(ta+=qi)+ha:(It&&(qi=Math.max(Bi,Math.min(ra,2*It[Ri]-ta))),qi<ta?(xi=ta,ta=qi):xi=qi),aa[0]!=ta||aa[1]!=xi)return Ri?P=null:pe=null,aa[0]=ta,aa[1]=xi,!0}function mi(){ir(),Yt.style("pointer-events","all").selectAll(".resize").style("display",Xe.empty()?"none":null),g.select("body").style("cursor",null),Er.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),hr(),Vt({type:"brushend"})}Yt.style("pointer-events","none").selectAll(".resize").style("display",null),g.select("body").style("cursor",Gt.style("cursor")),Vt({type:"brushstart"}),ir()}return Xe.event=function(It){It.each(function(){var Lt=N.of(this,arguments),St={x:fe,y:me,i:pe,j:P},Gt=this.__chart__||St;this.__chart__=St,hs?g.select(this).transition().each("start.brush",function(){pe=Gt.i,P=Gt.j,fe=Gt.x,me=Gt.y,Lt({type:"brushstart"})}).tween("brush:brush",function(){var Vt=za(fe,St.x),Yt=za(me,St.y);return pe=P=null,function(xn){fe=St.x=Vt(xn),me=St.y=Yt(xn),Lt({type:"brush",mode:"resize"})}}).each("end.brush",function(){pe=St.i,P=St.j,Lt({type:"brush",mode:"resize"}),Lt({type:"brushend"})}):(Lt({type:"brushstart"}),Lt({type:"brush",mode:"resize"}),Lt({type:"brushend"}))})},Xe.x=function(It){return arguments.length?(Re=Qo[!(V=It)<<1|!Z],Xe):V},Xe.y=function(It){return arguments.length?(Re=Qo[!V<<1|!(Z=It)],Xe):Z},Xe.clamp=function(It){return arguments.length?(V&&Z?(we=!!It[0],Ae=!!It[1]):V?we=!!It:Z&&(Ae=!!It),Xe):V&&Z?[we,Ae]:V?we:Z?Ae:null},Xe.extent=function(It){var Lt,St,Gt,Vt,Yt;return arguments.length?(V&&(Lt=It[0],St=It[1],Z&&(Lt=Lt[0],St=St[0]),pe=[Lt,St],V.invert&&(Lt=V(Lt),St=V(St)),St<Lt&&(Yt=Lt,Lt=St,St=Yt),Lt==fe[0]&&St==fe[1]||(fe=[Lt,St])),Z&&(Gt=It[0],Vt=It[1],V&&(Gt=Gt[1],Vt=Vt[1]),P=[Gt,Vt],Z.invert&&(Gt=Z(Gt),Vt=Z(Vt)),Vt<Gt&&(Yt=Gt,Gt=Vt,Vt=Yt),Gt==me[0]&&Vt==me[1]||(me=[Gt,Vt])),Xe):(V&&(pe?(Lt=pe[0],St=pe[1]):(Lt=fe[0],St=fe[1],V.invert&&(Lt=V.invert(Lt),St=V.invert(St)),St<Lt&&(Yt=Lt,Lt=St,St=Yt))),Z&&(P?(Gt=P[0],Vt=P[1]):(Gt=me[0],Vt=me[1],Z.invert&&(Gt=Z.invert(Gt),Vt=Z.invert(Vt)),Vt<Gt&&(Yt=Gt,Gt=Vt,Vt=Yt))),V&&Z?[[Lt,Gt],[St,Vt]]:V?[Lt,St]:Z&&[Gt,Vt])},Xe.clear=function(){return Xe.empty()||(fe=[0,0],me=[0,0],pe=P=null),Xe},Xe.empty=function(){return!!V&&fe[0]==fe[1]||!!Z&&me[0]==me[1]},g.rebind(Xe,N,"on")};var Hl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Qo=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function Ju(pe){return JSON.parse(pe.responseText)}function Qu(pe){var P=y.createRange();return P.selectNode(y.body),P.createContextualFragment(pe.responseText)}g.text=Xn(function(pe){return pe.responseText}),g.json=function(pe,P){return Hn(pe,"application/json",Ju,P)},g.html=function(pe,P){return Hn(pe,"text/html",Qu,P)},g.xml=Xn(function(pe){return pe.responseXML}),"object"==typeof oe&&oe.exports?oe.exports=g:this.d3=g}).apply(self)},{}],59:[function(x,oe,ae){"use strict";oe.exports=x("./quad")},{"./quad":60}],60:[function(x,oe,ae){"use strict";var g=x("binary-search-bounds"),m=x("clamp"),w=x("parse-rect"),y=x("array-bounds"),e=x("pick-by-alias"),r=x("defined"),n=x("flatten-vertex-data"),a=x("is-obj"),t=x("dtype"),p=x("math-log2");function u(i,c){for(var f=c[0],l=c[1],h=1/(c[2]-f),d=1/(c[3]-l),o=new Array(i.length),_=0,s=i.length/2;_<s;_++)o[2*_]=m((i[2*_]-f)*h,0,1),o[2*_+1]=m((i[2*_+1]-l)*d,0,1);return o}oe.exports=function(i,c){c||(c={}),i=n(i,"float64"),c=e(c,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var f=r(c.maxDepth,255),l=r(c.bounds,y(i,2));l[0]===l[2]&&l[2]++,l[1]===l[3]&&l[3]++;var h,d=u(i,l),o=i.length>>>1;c.dtype||(c.dtype="array"),"string"==typeof c.dtype?h=new(t(c.dtype))(o):c.dtype&&(h=c.dtype,Array.isArray(h)&&(h.length=o));for(var _=0;_<o;++_)h[_]=_;var s=[],k=[],M=[],A=[];!function j(W,Y,Q,ne,X,$){if(!ne.length)return null;var re=s[X]||(s[X]=[]),H=M[X]||(M[X]=[]),U=k[X]||(k[X]=[]),G=re.length;if(++X>f||$>1073741824){for(var ie=0;ie<ne.length;ie++)re.push(ne[ie]),H.push($),U.push(null,null,null,null);return G}if(re.push(ne[0]),H.push($),ne.length<=1)return U.push(null,null,null,null),G;for(var q=.5*Q,ee=W+q,te=Y+q,se=[],ue=[],de=[],he=[],xe=1,ge=ne.length;xe<ge;xe++){var _e=ne[xe],Le=d[2*_e+1];d[2*_e]<ee?Le<te?se.push(_e):ue.push(_e):Le<te?de.push(_e):he.push(_e)}return U.push(j(W,Y,q,se,X,$<<=2),j(W,te,q,ue,X,$+1),j(ee,Y,q,de,X,$+2),j(ee,te,q,he,X,$+3)),G}(0,0,1,h,0,1);for(var E=0,I=0;I<s.length;I++){var C=s[I];if(h.set)h.set(C,E);else for(var R=0,O=C.length;R<O;R++)h[R+E]=C[R];var D=E+s[I].length;A[I]=[E,D],E=D}return h.range=function(){for(var j,W=[],Y=arguments.length;Y--;)W[Y]=arguments[Y];if(a(W[W.length-1])){var Q=W.pop();W.length||null==Q.x&&null==Q.l&&null==Q.left||(W=[Q],j={}),j=e(Q,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else j={};W.length||(W=l);var ue,ne=w.apply(void 0,W),X=[Math.min(ne.x,ne.x+ne.width),Math.min(ne.y,ne.y+ne.height),Math.max(ne.x,ne.x+ne.width),Math.max(ne.y,ne.y+ne.height)],$=X[0],re=X[1],H=X[2],U=X[3],G=u([$,re,H,U],l),ie=G[0],q=G[1],ee=G[2],te=G[3],se=r(j.level,s.length);if(null!=j.d&&("number"==typeof j.d?ue=[j.d,j.d]:j.d.length&&(ue=j.d),se=Math.min(Math.max(Math.ceil(-p(Math.abs(ue[0])/(l[2]-l[0]))),Math.ceil(-p(Math.abs(ue[1])/(l[3]-l[1])))),se)),se=Math.min(se,s.length),j.lod)return L(ie,q,ee,te,se);var de=[];function he(ge,_e,Ce,Le,Ie,Be){if(null!==Ie&&null!==Be&&!(ie>ge+Ce||q>_e+Ce||ee<ge||te<_e||Le>=se||Ie===Be)){var ve=s[Le];void 0===Be&&(Be=ve.length);for(var Te=Ie;Te<Be;Te++){var Pe=ve[Te],De=i[2*Pe],Fe=i[2*Pe+1];De>=$&&De<=H&&Fe>=re&&Fe<=U&&de.push(Pe)}var Ue=k[Le],He=Ue[4*Ie+0],Ke=Ue[4*Ie+1],st=Ue[4*Ie+2],Ve=Ue[4*Ie+3],$e=xe(Ue,Ie+1),Qe=.5*Ce,tt=Le+1;he(ge,_e,Qe,tt,He,Ke||st||Ve||$e),he(ge,_e+Qe,Qe,tt,Ke,st||Ve||$e),he(ge+Qe,_e,Qe,tt,st,Ve||$e),he(ge+Qe,_e+Qe,Qe,tt,Ve,$e)}}function xe(ge,_e){for(var Ce=null,Le=0;null===Ce;)if(Ce=ge[4*_e+Le],++Le>ge.length)return null;return Ce}return he(0,0,1,0,0,1),de},h;function L(j,W,Y,Q,ne){for(var X=[],$=0;$<ne;$++){var re=M[$],H=A[$][0],U=B(j,W,$),G=B(Y,Q,$),ie=g.ge(re,U),q=g.gt(re,G,ie,re.length-1);X[$]=[ie+H,q+H]}return X}function B(j,W,Y){for(var Q=1,ne=.5,X=.5,$=.5,re=0;re<Y;re++)Q<<=2,Q+=j<ne?W<X?0:1:W<X?2:3,$*=.5,ne+=j<ne?-$:$,X+=W<X?-$:$;return Q}}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(x,oe,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var g=x("@turf/meta");function m(e){var r=0;if(e&&e.length>0){r+=Math.abs(w(e[0]));for(var n=1;n<e.length;n++)r-=Math.abs(w(e[n]))}return r}function w(e){var r,n,a,t,p,u,i=0,c=e.length;if(c>2){for(u=0;u<c;u++)u===c-2?(a=c-2,t=c-1,p=0):u===c-1?(a=c-1,t=0,p=1):(a=u,t=u+1,p=u+2),r=e[a],n=e[t],i+=(y(e[p][0])-y(r[0]))*Math.sin(y(n[1]));i=6378137*i*6378137/2}return i}function y(e){return e*Math.PI/180}ae.default=function(e){return g.geomReduce(e,function(r,n){return r+function(a){var t,p=0;switch(a.type){case"Polygon":return m(a.coordinates);case"MultiPolygon":for(t=0;t<a.coordinates.length;t++)p+=m(a.coordinates[t]);return p;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(n)},0)}},{"@turf/meta":63}],62:[function(x,oe,ae){"use strict";function g(c,f,l){void 0===l&&(l={});var h={type:"Feature"};return(0===l.id||l.id)&&(h.id=l.id),l.bbox&&(h.bbox=l.bbox),h.properties=f||{},h.geometry=c,h}function m(c,f,l){if(void 0===l&&(l={}),!c)throw new Error("coordinates is required");if(!Array.isArray(c))throw new Error("coordinates must be an Array");if(c.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!i(c[0])||!i(c[1]))throw new Error("coordinates must contain numbers");return g({type:"Point",coordinates:c},f,l)}function w(c,f,l){void 0===l&&(l={});for(var h=0,d=c;h<d.length;h++){var o=d[h];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var _=0;_<o[o.length-1].length;_++)if(o[o.length-1][_]!==o[0][_])throw new Error("First and last Position are not equivalent.")}return g({type:"Polygon",coordinates:c},f,l)}function y(c,f,l){if(void 0===l&&(l={}),c.length<2)throw new Error("coordinates must be an array of two or more positions");return g({type:"LineString",coordinates:c},f,l)}function e(c,f){void 0===f&&(f={});var l={type:"FeatureCollection"};return f.id&&(l.id=f.id),f.bbox&&(l.bbox=f.bbox),l.features=c,l}function r(c,f,l){return void 0===l&&(l={}),g({type:"MultiLineString",coordinates:c},f,l)}function n(c,f,l){return void 0===l&&(l={}),g({type:"MultiPoint",coordinates:c},f,l)}function a(c,f,l){return void 0===l&&(l={}),g({type:"MultiPolygon",coordinates:c},f,l)}function t(c,f){void 0===f&&(f="kilometers");var l=ae.factors[f];if(!l)throw new Error(f+" units is invalid");return c*l}function p(c,f){void 0===f&&(f="kilometers");var l=ae.factors[f];if(!l)throw new Error(f+" units is invalid");return c/l}function u(c){return c%(2*Math.PI)*180/Math.PI}function i(c){return!isNaN(c)&&null!==c&&!Array.isArray(c)}Object.defineProperty(ae,"__esModule",{value:!0}),ae.earthRadius=6371008.8,ae.factors={centimeters:100*ae.earthRadius,centimetres:100*ae.earthRadius,degrees:ae.earthRadius/111325,feet:3.28084*ae.earthRadius,inches:39.37*ae.earthRadius,kilometers:ae.earthRadius/1e3,kilometres:ae.earthRadius/1e3,meters:ae.earthRadius,metres:ae.earthRadius,miles:ae.earthRadius/1609.344,millimeters:1e3*ae.earthRadius,millimetres:1e3*ae.earthRadius,nauticalmiles:ae.earthRadius/1852,radians:1,yards:1.0936*ae.earthRadius},ae.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ae.earthRadius,yards:1.0936133},ae.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},ae.feature=g,ae.geometry=function(c,f,l){switch(void 0===l&&(l={}),c){case"Point":return m(f).geometry;case"LineString":return y(f).geometry;case"Polygon":return w(f).geometry;case"MultiPoint":return n(f).geometry;case"MultiLineString":return r(f).geometry;case"MultiPolygon":return a(f).geometry;default:throw new Error(c+" is invalid")}},ae.point=m,ae.points=function(c,f,l){return void 0===l&&(l={}),e(c.map(function(h){return m(h,f)}),l)},ae.polygon=w,ae.polygons=function(c,f,l){return void 0===l&&(l={}),e(c.map(function(h){return w(h,f)}),l)},ae.lineString=y,ae.lineStrings=function(c,f,l){return void 0===l&&(l={}),e(c.map(function(h){return y(h,f)}),l)},ae.featureCollection=e,ae.multiLineString=r,ae.multiPoint=n,ae.multiPolygon=a,ae.geometryCollection=function(c,f,l){return void 0===l&&(l={}),g({type:"GeometryCollection",geometries:c},f,l)},ae.round=function(c,f){if(void 0===f&&(f=0),f&&!(f>=0))throw new Error("precision must be a positive number");var l=Math.pow(10,f||0);return Math.round(c*l)/l},ae.radiansToLength=t,ae.lengthToRadians=p,ae.lengthToDegrees=function(c,f){return u(p(c,f))},ae.bearingToAzimuth=function(c){var f=c%360;return f<0&&(f+=360),f},ae.radiansToDegrees=u,ae.degreesToRadians=function(c){return c%360*Math.PI/180},ae.convertLength=function(c,f,l){if(void 0===f&&(f="kilometers"),void 0===l&&(l="kilometers"),!(c>=0))throw new Error("length must be a positive number");return t(p(c,f),l)},ae.convertArea=function(c,f,l){if(void 0===f&&(f="meters"),void 0===l&&(l="kilometers"),!(c>=0))throw new Error("area must be a positive number");var h=ae.areaFactors[f];if(!h)throw new Error("invalid original units");var d=ae.areaFactors[l];if(!d)throw new Error("invalid final units");return c/h*d},ae.isNumber=i,ae.isObject=function(c){return!!c&&c.constructor===Object},ae.validateBBox=function(c){if(!c)throw new Error("bbox is required");if(!Array.isArray(c))throw new Error("bbox must be an Array");if(4!==c.length&&6!==c.length)throw new Error("bbox must be an Array of 4 or 6 numbers");c.forEach(function(f){if(!i(f))throw new Error("bbox must only contain numbers")})},ae.validateId=function(c){if(!c)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof c))throw new Error("id must be a number or a string")}},{}],63:[function(x,oe,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var g=x("@turf/helpers");function m(t,p,u){if(null!==t)for(var i,c,f,l,h,d,o,_,s=0,k=0,M=t.type,A="FeatureCollection"===M,E="Feature"===M,I=A?t.features.length:1,C=0;C<I;C++){h=(_=!!(o=A?t.features[C].geometry:E?t.geometry:t)&&"GeometryCollection"===o.type)?o.geometries.length:1;for(var R=0;R<h;R++){var O=0,D=0;if(null!==(l=_?o.geometries[R]:o)){d=l.coordinates;var L=l.type;switch(s=!u||"Polygon"!==L&&"MultiPolygon"!==L?0:1,L){case null:break;case"Point":if(!1===p(d,k,C,O,D))return!1;k++,O++;break;case"LineString":case"MultiPoint":for(i=0;i<d.length;i++){if(!1===p(d[i],k,C,O,D))return!1;k++,"MultiPoint"===L&&O++}"LineString"===L&&O++;break;case"Polygon":case"MultiLineString":for(i=0;i<d.length;i++){for(c=0;c<d[i].length-s;c++){if(!1===p(d[i][c],k,C,O,D))return!1;k++}"MultiLineString"===L&&O++,"Polygon"===L&&D++}"Polygon"===L&&O++;break;case"MultiPolygon":for(i=0;i<d.length;i++){for(D=0,c=0;c<d[i].length;c++){for(f=0;f<d[i][c].length-s;f++){if(!1===p(d[i][c][f],k,C,O,D))return!1;k++}D++}O++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(!1===m(l.geometries[i],p,u))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function w(t,p){var u;switch(t.type){case"FeatureCollection":for(u=0;u<t.features.length&&!1!==p(t.features[u].properties,u);u++);break;case"Feature":p(t.properties,0)}}function y(t,p){if("Feature"===t.type)p(t,0);else if("FeatureCollection"===t.type)for(var u=0;u<t.features.length&&!1!==p(t.features[u],u);u++);}function e(t,p){var u,i,c,f,l,h,d,o,_,s,k=0,M="FeatureCollection"===t.type,A="Feature"===t.type,E=M?t.features.length:1;for(u=0;u<E;u++){for(o=M?t.features[u].properties:A?t.properties:{},_=M?t.features[u].bbox:A?t.bbox:void 0,s=M?t.features[u].id:A?t.id:void 0,l=(d=!!(h=M?t.features[u].geometry:A?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1,c=0;c<l;c++)if(null!==(f=d?h.geometries[c]:h))switch(f.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===p(f,k,o,_,s))return!1;break;case"GeometryCollection":for(i=0;i<f.geometries.length;i++)if(!1===p(f.geometries[i],k,o,_,s))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===p(null,k,o,_,s))return!1;k++}}function r(t,p){e(t,function(u,i,c,f,l){var h,d=null===u?null:u.type;switch(d){case null:case"Point":case"LineString":case"Polygon":return!1!==p(g.feature(u,c,{bbox:f,id:l}),i,0)&&void 0}switch(d){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon"}for(var o=0;o<u.coordinates.length;o++)if(!1===p(g.feature({type:h,coordinates:u.coordinates[o]},c),i,o))return!1})}function n(t,p){r(t,function(u,i,c){var f=0;if(u.geometry){var l=u.geometry.type;if("Point"!==l&&"MultiPoint"!==l){var h,d=0,o=0,_=0;return!1!==m(u,function(s,k,M,A,E){if(void 0===h||i>d||A>o||E>_)return h=s,d=i,o=A,_=E,void(f=0);var I=g.lineString([h,s],u.properties);if(!1===p(I,i,c,E,f))return!1;f++,h=s})&&void 0}}})}function a(t,p){if(!t)throw new Error("geojson is required");r(t,function(u,i,c){if(null!==u.geometry){var l=u.geometry.coordinates;switch(u.geometry.type){case"LineString":if(!1===p(u,i,c,0,0))return!1;break;case"Polygon":for(var h=0;h<l.length;h++)if(!1===p(g.lineString(l[h],u.properties),i,c,h))return!1}}})}ae.coordEach=m,ae.coordReduce=function(t,p,u,i){var c=u;return m(t,function(f,l,h,d,o){c=0===l&&void 0===u?f:p(c,f,l,h,d,o)},i),c},ae.propEach=w,ae.propReduce=function(t,p,u){var i=u;return w(t,function(c,f){i=0===f&&void 0===u?c:p(i,c,f)}),i},ae.featureEach=y,ae.featureReduce=function(t,p,u){var i=u;return y(t,function(c,f){i=0===f&&void 0===u?c:p(i,c,f)}),i},ae.coordAll=function(t){var p=[];return m(t,function(u){p.push(u)}),p},ae.geomEach=e,ae.geomReduce=function(t,p,u){var i=u;return e(t,function(c,f,l,h,d){i=0===f&&void 0===u?c:p(i,c,f,l,h,d)}),i},ae.flattenEach=r,ae.flattenReduce=function(t,p,u){var i=u;return r(t,function(c,f,l){i=0===f&&0===l&&void 0===u?c:p(i,c,f,l)}),i},ae.segmentEach=n,ae.segmentReduce=function(t,p,u){var i=u,c=!1;return n(t,function(f,l,h,d,o){i=!1===c&&void 0===u?f:p(i,f,l,h,d,o),c=!0}),i},ae.lineEach=a,ae.lineReduce=function(t,p,u){var i=u;return a(t,function(c,f,l,h){i=0===f&&void 0===u?c:p(i,c,f,l,h)}),i},ae.findSegment=function(t,p){if(!g.isObject(p=p||{}))throw new Error("options is invalid");var u,i=p.featureIndex||0,c=p.multiFeatureIndex||0,f=p.geometryIndex||0,l=p.segmentIndex||0,h=p.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),h=h||t.features[i].properties,u=t.features[i].geometry;break;case"Feature":h=h||t.properties,u=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=t;break;default:throw new Error("geojson is invalid")}if(null===u)return null;var d=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":return l<0&&(l=d.length+l-1),g.lineString([d[l],d[l+1]],h,p);case"Polygon":return f<0&&(f=d.length+f),l<0&&(l=d[f].length+l-1),g.lineString([d[f][l],d[f][l+1]],h,p);case"MultiLineString":return c<0&&(c=d.length+c),l<0&&(l=d[c].length+l-1),g.lineString([d[c][l],d[c][l+1]],h,p);case"MultiPolygon":return c<0&&(c=d.length+c),f<0&&(f=d[c].length+f),l<0&&(l=d[c][f].length-l-1),g.lineString([d[c][f][l],d[c][f][l+1]],h,p)}throw new Error("geojson is invalid")},ae.findPoint=function(t,p){if(!g.isObject(p=p||{}))throw new Error("options is invalid");var u,i=p.featureIndex||0,c=p.multiFeatureIndex||0,f=p.geometryIndex||0,l=p.coordIndex||0,h=p.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),h=h||t.features[i].properties,u=t.features[i].geometry;break;case"Feature":h=h||t.properties,u=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=t;break;default:throw new Error("geojson is invalid")}if(null===u)return null;var d=u.coordinates;switch(u.type){case"Point":return g.point(d,h,p);case"MultiPoint":return c<0&&(c=d.length+c),g.point(d[c],h,p);case"LineString":return l<0&&(l=d.length+l),g.point(d[l],h,p);case"Polygon":return f<0&&(f=d.length+f),l<0&&(l=d[f].length+l),g.point(d[f][l],h,p);case"MultiLineString":return c<0&&(c=d.length+c),l<0&&(l=d[c].length+l),g.point(d[c][l],h,p);case"MultiPolygon":return c<0&&(c=d.length+c),f<0&&(f=d[c].length+f),l<0&&(l=d[c][f].length-l),g.point(d[c][f][l],h,p)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(x,oe,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var g=x("@turf/meta");function m(w){var y=[1/0,1/0,-1/0,-1/0];return g.coordEach(w,function(e){y[0]>e[0]&&(y[0]=e[0]),y[1]>e[1]&&(y[1]=e[1]),y[2]<e[0]&&(y[2]=e[0]),y[3]<e[1]&&(y[3]=e[1])}),y}m.default=m,ae.default=m},{"@turf/meta":66}],65:[function(x,oe,ae){arguments[4][62][0].apply(ae,arguments)},{dup:62}],66:[function(x,oe,ae){arguments[4][63][0].apply(ae,arguments)},{"@turf/helpers":65,dup:63}],67:[function(x,oe,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var g=x("@turf/meta"),m=x("@turf/helpers");ae.default=function(w,y){void 0===y&&(y={});var e=0,r=0,n=0;return g.coordEach(w,function(a){e+=a[0],r+=a[1],n++}),m.point([e/n,r/n],y.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(x,oe,ae){"use strict";function g(c,f,l){void 0===l&&(l={});var h={type:"Feature"};return(0===l.id||l.id)&&(h.id=l.id),l.bbox&&(h.bbox=l.bbox),h.properties=f||{},h.geometry=c,h}function m(c,f,l){return void 0===l&&(l={}),g({type:"Point",coordinates:c},f,l)}function w(c,f,l){void 0===l&&(l={});for(var h=0,d=c;h<d.length;h++){var o=d[h];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var _=0;_<o[o.length-1].length;_++)if(o[o.length-1][_]!==o[0][_])throw new Error("First and last Position are not equivalent.")}return g({type:"Polygon",coordinates:c},f,l)}function y(c,f,l){if(void 0===l&&(l={}),c.length<2)throw new Error("coordinates must be an array of two or more positions");return g({type:"LineString",coordinates:c},f,l)}function e(c,f){void 0===f&&(f={});var l={type:"FeatureCollection"};return f.id&&(l.id=f.id),f.bbox&&(l.bbox=f.bbox),l.features=c,l}function r(c,f,l){return void 0===l&&(l={}),g({type:"MultiLineString",coordinates:c},f,l)}function n(c,f,l){return void 0===l&&(l={}),g({type:"MultiPoint",coordinates:c},f,l)}function a(c,f,l){return void 0===l&&(l={}),g({type:"MultiPolygon",coordinates:c},f,l)}function t(c,f){void 0===f&&(f="kilometers");var l=ae.factors[f];if(!l)throw new Error(f+" units is invalid");return c*l}function p(c,f){void 0===f&&(f="kilometers");var l=ae.factors[f];if(!l)throw new Error(f+" units is invalid");return c/l}function u(c){return c%(2*Math.PI)*180/Math.PI}function i(c){return!isNaN(c)&&null!==c&&!Array.isArray(c)&&!/^\s*$/.test(c)}Object.defineProperty(ae,"__esModule",{value:!0}),ae.earthRadius=6371008.8,ae.factors={centimeters:100*ae.earthRadius,centimetres:100*ae.earthRadius,degrees:ae.earthRadius/111325,feet:3.28084*ae.earthRadius,inches:39.37*ae.earthRadius,kilometers:ae.earthRadius/1e3,kilometres:ae.earthRadius/1e3,meters:ae.earthRadius,metres:ae.earthRadius,miles:ae.earthRadius/1609.344,millimeters:1e3*ae.earthRadius,millimetres:1e3*ae.earthRadius,nauticalmiles:ae.earthRadius/1852,radians:1,yards:ae.earthRadius/1.0936},ae.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ae.earthRadius,yards:1/1.0936},ae.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},ae.feature=g,ae.geometry=function(c,f,l){switch(void 0===l&&(l={}),c){case"Point":return m(f).geometry;case"LineString":return y(f).geometry;case"Polygon":return w(f).geometry;case"MultiPoint":return n(f).geometry;case"MultiLineString":return r(f).geometry;case"MultiPolygon":return a(f).geometry;default:throw new Error(c+" is invalid")}},ae.point=m,ae.points=function(c,f,l){return void 0===l&&(l={}),e(c.map(function(h){return m(h,f)}),l)},ae.polygon=w,ae.polygons=function(c,f,l){return void 0===l&&(l={}),e(c.map(function(h){return w(h,f)}),l)},ae.lineString=y,ae.lineStrings=function(c,f,l){return void 0===l&&(l={}),e(c.map(function(h){return y(h,f)}),l)},ae.featureCollection=e,ae.multiLineString=r,ae.multiPoint=n,ae.multiPolygon=a,ae.geometryCollection=function(c,f,l){return void 0===l&&(l={}),g({type:"GeometryCollection",geometries:c},f,l)},ae.round=function(c,f){if(void 0===f&&(f=0),f&&!(f>=0))throw new Error("precision must be a positive number");var l=Math.pow(10,f||0);return Math.round(c*l)/l},ae.radiansToLength=t,ae.lengthToRadians=p,ae.lengthToDegrees=function(c,f){return u(p(c,f))},ae.bearingToAzimuth=function(c){var f=c%360;return f<0&&(f+=360),f},ae.radiansToDegrees=u,ae.degreesToRadians=function(c){return c%360*Math.PI/180},ae.convertLength=function(c,f,l){if(void 0===f&&(f="kilometers"),void 0===l&&(l="kilometers"),!(c>=0))throw new Error("length must be a positive number");return t(p(c,f),l)},ae.convertArea=function(c,f,l){if(void 0===f&&(f="meters"),void 0===l&&(l="kilometers"),!(c>=0))throw new Error("area must be a positive number");var h=ae.areaFactors[f];if(!h)throw new Error("invalid original units");var d=ae.areaFactors[l];if(!d)throw new Error("invalid final units");return c/h*d},ae.isNumber=i,ae.isObject=function(c){return!!c&&c.constructor===Object},ae.validateBBox=function(c){if(!c)throw new Error("bbox is required");if(!Array.isArray(c))throw new Error("bbox must be an Array");if(4!==c.length&&6!==c.length)throw new Error("bbox must be an Array of 4 or 6 numbers");c.forEach(function(f){if(!i(f))throw new Error("bbox must only contain numbers")})},ae.validateId=function(c){if(!c)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof c))throw new Error("id must be a number or a string")},ae.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},ae.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},ae.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},ae.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},ae.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},ae.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},ae.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(x,oe,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var g=x("@turf/helpers");function m(t,p,u){if(null!==t)for(var i,c,f,l,h,d,o,_,s=0,k=0,M=t.type,A="FeatureCollection"===M,E="Feature"===M,I=A?t.features.length:1,C=0;C<I;C++){h=(_=!!(o=A?t.features[C].geometry:E?t.geometry:t)&&"GeometryCollection"===o.type)?o.geometries.length:1;for(var R=0;R<h;R++){var O=0,D=0;if(null!==(l=_?o.geometries[R]:o)){d=l.coordinates;var L=l.type;switch(s=!u||"Polygon"!==L&&"MultiPolygon"!==L?0:1,L){case null:break;case"Point":if(!1===p(d,k,C,O,D))return!1;k++,O++;break;case"LineString":case"MultiPoint":for(i=0;i<d.length;i++){if(!1===p(d[i],k,C,O,D))return!1;k++,"MultiPoint"===L&&O++}"LineString"===L&&O++;break;case"Polygon":case"MultiLineString":for(i=0;i<d.length;i++){for(c=0;c<d[i].length-s;c++){if(!1===p(d[i][c],k,C,O,D))return!1;k++}"MultiLineString"===L&&O++,"Polygon"===L&&D++}"Polygon"===L&&O++;break;case"MultiPolygon":for(i=0;i<d.length;i++){for(D=0,c=0;c<d[i].length;c++){for(f=0;f<d[i][c].length-s;f++){if(!1===p(d[i][c][f],k,C,O,D))return!1;k++}D++}O++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(!1===m(l.geometries[i],p,u))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function w(t,p){var u;switch(t.type){case"FeatureCollection":for(u=0;u<t.features.length&&!1!==p(t.features[u].properties,u);u++);break;case"Feature":p(t.properties,0)}}function y(t,p){if("Feature"===t.type)p(t,0);else if("FeatureCollection"===t.type)for(var u=0;u<t.features.length&&!1!==p(t.features[u],u);u++);}function e(t,p){var u,i,c,f,l,h,d,o,_,s,k=0,M="FeatureCollection"===t.type,A="Feature"===t.type,E=M?t.features.length:1;for(u=0;u<E;u++){for(o=M?t.features[u].properties:A?t.properties:{},_=M?t.features[u].bbox:A?t.bbox:void 0,s=M?t.features[u].id:A?t.id:void 0,l=(d=!!(h=M?t.features[u].geometry:A?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1,c=0;c<l;c++)if(null!==(f=d?h.geometries[c]:h))switch(f.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===p(f,k,o,_,s))return!1;break;case"GeometryCollection":for(i=0;i<f.geometries.length;i++)if(!1===p(f.geometries[i],k,o,_,s))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===p(null,k,o,_,s))return!1;k++}}function r(t,p){e(t,function(u,i,c,f,l){var h,d=null===u?null:u.type;switch(d){case null:case"Point":case"LineString":case"Polygon":return!1!==p(g.feature(u,c,{bbox:f,id:l}),i,0)&&void 0}switch(d){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon"}for(var o=0;o<u.coordinates.length;o++)if(!1===p(g.feature({type:h,coordinates:u.coordinates[o]},c),i,o))return!1})}function n(t,p){r(t,function(u,i,c){var f=0;if(u.geometry){var l=u.geometry.type;if("Point"!==l&&"MultiPoint"!==l){var h,d=0,o=0,_=0;return!1!==m(u,function(s,k,M,A,E){if(void 0===h||i>d||A>o||E>_)return h=s,d=i,o=A,_=E,void(f=0);var I=g.lineString([h,s],u.properties);if(!1===p(I,i,c,E,f))return!1;f++,h=s})&&void 0}}})}function a(t,p){if(!t)throw new Error("geojson is required");r(t,function(u,i,c){if(null!==u.geometry){var l=u.geometry.coordinates;switch(u.geometry.type){case"LineString":if(!1===p(u,i,c,0,0))return!1;break;case"Polygon":for(var h=0;h<l.length;h++)if(!1===p(g.lineString(l[h],u.properties),i,c,h))return!1}}})}ae.coordEach=m,ae.coordReduce=function(t,p,u,i){var c=u;return m(t,function(f,l,h,d,o){c=0===l&&void 0===u?f:p(c,f,l,h,d,o)},i),c},ae.propEach=w,ae.propReduce=function(t,p,u){var i=u;return w(t,function(c,f){i=0===f&&void 0===u?c:p(i,c,f)}),i},ae.featureEach=y,ae.featureReduce=function(t,p,u){var i=u;return y(t,function(c,f){i=0===f&&void 0===u?c:p(i,c,f)}),i},ae.coordAll=function(t){var p=[];return m(t,function(u){p.push(u)}),p},ae.geomEach=e,ae.geomReduce=function(t,p,u){var i=u;return e(t,function(c,f,l,h,d){i=0===f&&void 0===u?c:p(i,c,f,l,h,d)}),i},ae.flattenEach=r,ae.flattenReduce=function(t,p,u){var i=u;return r(t,function(c,f,l){i=0===f&&0===l&&void 0===u?c:p(i,c,f,l)}),i},ae.segmentEach=n,ae.segmentReduce=function(t,p,u){var i=u,c=!1;return n(t,function(f,l,h,d,o){i=!1===c&&void 0===u?f:p(i,f,l,h,d,o),c=!0}),i},ae.lineEach=a,ae.lineReduce=function(t,p,u){var i=u;return a(t,function(c,f,l,h){i=0===f&&void 0===u?c:p(i,c,f,l,h)}),i},ae.findSegment=function(t,p){if(!g.isObject(p=p||{}))throw new Error("options is invalid");var u,i=p.featureIndex||0,c=p.multiFeatureIndex||0,f=p.geometryIndex||0,l=p.segmentIndex||0,h=p.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),h=h||t.features[i].properties,u=t.features[i].geometry;break;case"Feature":h=h||t.properties,u=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=t;break;default:throw new Error("geojson is invalid")}if(null===u)return null;var d=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":return l<0&&(l=d.length+l-1),g.lineString([d[l],d[l+1]],h,p);case"Polygon":return f<0&&(f=d.length+f),l<0&&(l=d[f].length+l-1),g.lineString([d[f][l],d[f][l+1]],h,p);case"MultiLineString":return c<0&&(c=d.length+c),l<0&&(l=d[c].length+l-1),g.lineString([d[c][l],d[c][l+1]],h,p);case"MultiPolygon":return c<0&&(c=d.length+c),f<0&&(f=d[c].length+f),l<0&&(l=d[c][f].length-l-1),g.lineString([d[c][f][l],d[c][f][l+1]],h,p)}throw new Error("geojson is invalid")},ae.findPoint=function(t,p){if(!g.isObject(p=p||{}))throw new Error("options is invalid");var u,i=p.featureIndex||0,c=p.multiFeatureIndex||0,f=p.geometryIndex||0,l=p.coordIndex||0,h=p.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),h=h||t.features[i].properties,u=t.features[i].geometry;break;case"Feature":h=h||t.properties,u=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=t;break;default:throw new Error("geojson is invalid")}if(null===u)return null;var d=u.coordinates;switch(u.type){case"Point":return g.point(d,h,p);case"MultiPoint":return c<0&&(c=d.length+c),g.point(d[c],h,p);case"LineString":return l<0&&(l=d.length+l),g.point(d[l],h,p);case"Polygon":return f<0&&(f=d.length+f),l<0&&(l=d[f].length+l),g.point(d[f][l],h,p);case"MultiLineString":return c<0&&(c=d.length+c),l<0&&(l=d[c].length+l),g.point(d[c][l],h,p);case"MultiPolygon":return c<0&&(c=d.length+c),f<0&&(f=d[c].length+f),l<0&&(l=d[c][f].length-l),g.point(d[c][f][l],h,p)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(x,oe,ae){oe.exports=function(g){var m=0,w=0,y=0,e=0;return g.map(function(r){var n=(r=r.slice())[0],a=n.toUpperCase();if(n!=a)switch(r[0]=a,n){case"a":r[6]+=y,r[7]+=e;break;case"v":r[1]+=e;break;case"h":r[1]+=y;break;default:for(var t=1;t<r.length;)r[t++]+=y,r[t++]+=e}switch(a){case"Z":y=m,e=w;break;case"H":y=r[1];break;case"V":e=r[1];break;case"M":y=m=r[1],e=w=r[2];break;default:y=r[r.length-2],e=r[r.length-1]}return r})}},{}],71:[function(x,oe,ae){"use strict";oe.exports=function(g,m){if(!g||null==g.length)throw Error("Argument should be an array");m=null==m?1:Math.floor(m);for(var w=Array(2*m),y=0;y<m;y++){for(var e=-1/0,r=1/0,n=y,a=g.length;n<a;n+=m)g[n]>e&&(e=g[n]),g[n]<r&&(r=g[n]);w[y]=r,w[m+y]=e}return w}},{}],72:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w){if("function"==typeof Array.prototype.findIndex)return g.findIndex(m,w);if("function"!=typeof m)throw new TypeError("predicate must be a function");var y=Object(g),e=y.length;if(0===e)return-1;for(var r=0;r<e;r++)if(m.call(w,y[r],r,y))return r;return-1}},{}],73:[function(x,oe,ae){"use strict";var g=x("array-bounds");oe.exports=function(m,w,y){if(!m||null==m.length)throw Error("Argument should be an array");null==w&&(w=1),null==y&&(y=g(m,w));for(var e=0;e<w;e++){var r=y[w+e],n=y[e],a=e,t=m.length;if(r===1/0&&n===-1/0)for(a=e;a<t;a+=w)m[a]=m[a]===r?1:m[a]===n?0:.5;else if(r===1/0)for(a=e;a<t;a+=w)m[a]=m[a]===r?1:0;else if(n===-1/0)for(a=e;a<t;a+=w)m[a]=m[a]===n?0:1;else{var p=r-n;for(a=e;a<t;a+=w)isNaN(m[a])||(m[a]=0===p?.5:(m[a]-n)/p)}}return m}},{"array-bounds":71}],74:[function(x,oe,ae){oe.exports=function(g,m){var w="number"==typeof g,y="number"==typeof m;w&&!y?(m=g,g=0):w||y||(g=0,m=0);var e=(m|=0)-(g|=0);if(e<0)throw new Error("array length must be positive");for(var r=new Array(e),n=0,a=g;n<e;n++,a++)r[n]=a;return r}},{}],75:[function(x,oe,ae){(function(g){(function(){"use strict";var m=x("object-assign");function w(A,E){if(A===E)return 0;for(var I=A.length,C=E.length,R=0,O=Math.min(I,C);R<O;++R)if(A[R]!==E[R]){I=A[R],C=E[R];break}return I<C?-1:C<I?1:0}function y(A){return g.Buffer&&"function"==typeof g.Buffer.isBuffer?g.Buffer.isBuffer(A):!(null==A||!A._isBuffer)}var e=x("util/"),r=Object.prototype.hasOwnProperty,n=Array.prototype.slice,a="foo"===function(){}.name;function t(A){return Object.prototype.toString.call(A)}function p(A){return!y(A)&&"function"==typeof g.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(A):!!A&&(A instanceof DataView||!!(A.buffer&&A.buffer instanceof ArrayBuffer)))}var u=oe.exports=d,i=/\s*function\s+([^\(\s]*)\s*/;function c(A){if(e.isFunction(A)){if(a)return A.name;var E=A.toString().match(i);return E&&E[1]}}function f(A,E){return"string"==typeof A?A.length<E?A:A.slice(0,E):A}function l(A){if(a||!e.isFunction(A))return e.inspect(A);var E=c(A);return"[Function"+(E?": "+E:"")+"]"}function h(A,E,I,C,R){throw new u.AssertionError({message:I,actual:A,expected:E,operator:C,stackStartFunction:R})}function d(A,E){A||h(A,!0,E,"==",u.ok)}function o(A,E,I,C){if(A===E)return!0;if(y(A)&&y(E))return 0===w(A,E);if(e.isDate(A)&&e.isDate(E))return A.getTime()===E.getTime();if(e.isRegExp(A)&&e.isRegExp(E))return A.source===E.source&&A.global===E.global&&A.multiline===E.multiline&&A.lastIndex===E.lastIndex&&A.ignoreCase===E.ignoreCase;if(null!==A&&"object"==typeof A||null!==E&&"object"==typeof E){if(p(A)&&p(E)&&t(A)===t(E)&&!(A instanceof Float32Array||A instanceof Float64Array))return 0===w(new Uint8Array(A.buffer),new Uint8Array(E.buffer));if(y(A)!==y(E))return!1;var R=(C=C||{actual:[],expected:[]}).actual.indexOf(A);return-1!==R&&R===C.expected.indexOf(E)||(C.actual.push(A),C.expected.push(E),function(O,D,L,B){if(null==O||null==D)return!1;if(e.isPrimitive(O)||e.isPrimitive(D))return O===D;if(L&&Object.getPrototypeOf(O)!==Object.getPrototypeOf(D))return!1;var j=_(O),W=_(D);if(j&&!W||!j&&W)return!1;if(j)return o(O=n.call(O),D=n.call(D),L);var Y,Q,ne=M(O),X=M(D);if(ne.length!==X.length)return!1;for(ne.sort(),X.sort(),Q=ne.length-1;Q>=0;Q--)if(ne[Q]!==X[Q])return!1;for(Q=ne.length-1;Q>=0;Q--)if(!o(O[Y=ne[Q]],D[Y],L,B))return!1;return!0}(A,E,I,C))}return I?A===E:A==E}function _(A){return"[object Arguments]"==Object.prototype.toString.call(A)}function s(A,E){if(!A||!E)return!1;if("[object RegExp]"==Object.prototype.toString.call(E))return E.test(A);try{if(A instanceof E)return!0}catch(I){}return!Error.isPrototypeOf(E)&&!0===E.call({},A)}function k(A,E,I,C){var R;if("function"!=typeof E)throw new TypeError('"block" argument must be a function');"string"==typeof I&&(C=I,I=null),R=function(L){var B;try{L()}catch(j){B=j}return B}(E),C=(I&&I.name?" ("+I.name+").":".")+(C?" "+C:"."),A&&!R&&h(R,I,"Missing expected exception"+C);var O="string"==typeof C,D=!A&&R&&!I;if((!A&&e.isError(R)&&O&&s(R,I)||D)&&h(R,I,"Got unwanted exception"+C),A&&R&&I&&!s(R,I)||!A&&R)throw R}u.AssertionError=function(A){this.name="AssertionError",this.actual=A.actual,this.expected=A.expected,this.operator=A.operator,A.message?(this.message=A.message,this.generatedMessage=!1):(this.message=f(l(this.actual),128)+" "+this.operator+" "+f(l(this.expected),128),this.generatedMessage=!0);var E=A.stackStartFunction||h;if(Error.captureStackTrace)Error.captureStackTrace(this,E);else{var I=new Error;if(I.stack){var C=I.stack,R=c(E),O=C.indexOf("\n"+R);if(O>=0){var D=C.indexOf("\n",O+1);C=C.substring(D+1)}this.stack=C}}},e.inherits(u.AssertionError,Error),u.fail=h,u.ok=d,u.equal=function(A,E,I){A!=E&&h(A,E,I,"==",u.equal)},u.notEqual=function(A,E,I){A==E&&h(A,E,I,"!=",u.notEqual)},u.deepEqual=function(A,E,I){o(A,E,!1)||h(A,E,I,"deepEqual",u.deepEqual)},u.deepStrictEqual=function(A,E,I){o(A,E,!0)||h(A,E,I,"deepStrictEqual",u.deepStrictEqual)},u.notDeepEqual=function(A,E,I){o(A,E,!1)&&h(A,E,I,"notDeepEqual",u.notDeepEqual)},u.notDeepStrictEqual=function A(E,I,C){o(E,I,!0)&&h(E,I,C,"notDeepStrictEqual",A)},u.strictEqual=function(A,E,I){A!==E&&h(A,E,I,"===",u.strictEqual)},u.notStrictEqual=function(A,E,I){A===E&&h(A,E,I,"!==",u.notStrictEqual)},u.throws=function(A,E,I){k(!0,A,E,I)},u.doesNotThrow=function(A,E,I){k(!1,A,E,I)},u.ifError=function(A){if(A)throw A},u.strict=m(function A(E,I){E||h(E,!0,I,"==",A)},u,{equal:u.strictEqual,deepEqual:u.deepStrictEqual,notEqual:u.notStrictEqual,notDeepEqual:u.notDeepStrictEqual}),u.strict.strict=u.strict;var M=Object.keys||function(A){var E=[];for(var I in A)r.call(A,I)&&E.push(I);return E}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":247,"util/":78}],76:[function(x,oe,ae){oe.exports="function"==typeof Object.create?function(g,m){g.super_=m,g.prototype=Object.create(m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}})}:function(g,m){g.super_=m;var w=function(){};w.prototype=m.prototype,g.prototype=new w,g.prototype.constructor=g}},{}],77:[function(x,oe,ae){oe.exports=function(g){return g&&"object"==typeof g&&"function"==typeof g.copy&&"function"==typeof g.fill&&"function"==typeof g.readUInt8}},{}],78:[function(x,oe,ae){(function(g,m){(function(){var w=/%[sdj%]/g;ae.format=function(O){if(!h(O)){for(var D=[],L=0;L<arguments.length;L++)D.push(r(arguments[L]));return D.join(" ")}L=1;for(var B=arguments,j=B.length,W=String(O).replace(w,function(Q){if("%%"===Q)return"%";if(L>=j)return Q;switch(Q){case"%s":return String(B[L++]);case"%d":return Number(B[L++]);case"%j":try{return JSON.stringify(B[L++])}catch(ne){return"[Circular]"}default:return Q}}),Y=B[L];L<j;Y=B[++L])f(Y)||!_(Y)?W+=" "+Y:W+=" "+r(Y);return W},ae.deprecate=function(O,D){if(d(m.process))return function(){return ae.deprecate(O,D).apply(this,arguments)};if(!0===g.noDeprecation)return O;var L=!1;return function(){if(!L){if(g.throwDeprecation)throw new Error(D);g.traceDeprecation?console.trace(D):console.error(D),L=!0}return O.apply(this,arguments)}};var y,e={};function r(O,D){var L={seen:[],stylize:a};return arguments.length>=3&&(L.depth=arguments[2]),arguments.length>=4&&(L.colors=arguments[3]),c(D)?L.showHidden=D:D&&ae._extend(L,D),d(L.showHidden)&&(L.showHidden=!1),d(L.depth)&&(L.depth=2),d(L.colors)&&(L.colors=!1),d(L.customInspect)&&(L.customInspect=!0),L.colors&&(L.stylize=n),t(L,O,L.depth)}function n(O,D){var L=r.styles[D];return L?"\x1b["+r.colors[L][0]+"m"+O+"\x1b["+r.colors[L][1]+"m":O}function a(O,D){return O}function t(O,D,L){if(O.customInspect&&D&&M(D.inspect)&&D.inspect!==ae.inspect&&(!D.constructor||D.constructor.prototype!==D)){var B=D.inspect(L,O);return h(B)||(B=t(O,B,L)),B}var j=function(H,U){if(d(U))return H.stylize("undefined","undefined");if(h(U)){var G="'"+JSON.stringify(U).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return H.stylize(G,"string")}return l(U)?H.stylize(""+U,"number"):c(U)?H.stylize(""+U,"boolean"):f(U)?H.stylize("null","null"):void 0}(O,D);if(j)return j;var U,W=Object.keys(D),Y=(U={},W.forEach(function(G,ie){U[G]=!0}),U);if(O.showHidden&&(W=Object.getOwnPropertyNames(D)),k(D)&&(W.indexOf("message")>=0||W.indexOf("description")>=0))return p(D);if(0===W.length){if(M(D))return O.stylize("[Function"+(D.name?": "+D.name:"")+"]","special");if(o(D))return O.stylize(RegExp.prototype.toString.call(D),"regexp");if(s(D))return O.stylize(Date.prototype.toString.call(D),"date");if(k(D))return p(D)}var ne,X="",$=!1,re=["{","}"];return i(D)&&($=!0,re=["[","]"]),M(D)&&(X=" [Function"+(D.name?": "+D.name:"")+"]"),o(D)&&(X=" "+RegExp.prototype.toString.call(D)),s(D)&&(X=" "+Date.prototype.toUTCString.call(D)),k(D)&&(X=" "+p(D)),0!==W.length||$&&0!=D.length?L<0?o(D)?O.stylize(RegExp.prototype.toString.call(D),"regexp"):O.stylize("[Object]","special"):(O.seen.push(D),ne=$?function(H,U,G,ie,q){for(var ee=[],te=0,se=U.length;te<se;++te)R(U,String(te))?ee.push(u(H,U,G,ie,String(te),!0)):ee.push("");return q.forEach(function(ue){ue.match(/^\d+$/)||ee.push(u(H,U,G,ie,ue,!0))}),ee}(O,D,L,Y,W):W.map(function(H){return u(O,D,L,Y,H,$)}),O.seen.pop(),function(H,U,G){return H.reduce(function(ie,q){return q.indexOf("\n"),ie+q.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?G[0]+(""===U?"":U+"\n ")+" "+H.join(",\n  ")+" "+G[1]:G[0]+U+" "+H.join(", ")+" "+G[1]}(ne,X,re)):re[0]+X+re[1]}function p(O){return"["+Error.prototype.toString.call(O)+"]"}function u(O,D,L,B,j,W){var Y,Q,ne;if((ne=Object.getOwnPropertyDescriptor(D,j)||{value:D[j]}).get?Q=O.stylize(ne.set?"[Getter/Setter]":"[Getter]","special"):ne.set&&(Q=O.stylize("[Setter]","special")),R(B,j)||(Y="["+j+"]"),Q||(O.seen.indexOf(ne.value)<0?(Q=f(L)?t(O,ne.value,null):t(O,ne.value,L-1)).indexOf("\n")>-1&&(Q=W?Q.split("\n").map(function(X){return"  "+X}).join("\n").substr(2):"\n"+Q.split("\n").map(function(X){return"   "+X}).join("\n")):Q=O.stylize("[Circular]","special")),d(Y)){if(W&&j.match(/^\d+$/))return Q;(Y=JSON.stringify(""+j)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Y=Y.substr(1,Y.length-2),Y=O.stylize(Y,"name")):(Y=Y.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Y=O.stylize(Y,"string"))}return Y+": "+Q}function i(O){return Array.isArray(O)}function c(O){return"boolean"==typeof O}function f(O){return null===O}function l(O){return"number"==typeof O}function h(O){return"string"==typeof O}function d(O){return void 0===O}function o(O){return _(O)&&"[object RegExp]"===A(O)}function _(O){return"object"==typeof O&&null!==O}function s(O){return _(O)&&"[object Date]"===A(O)}function k(O){return _(O)&&("[object Error]"===A(O)||O instanceof Error)}function M(O){return"function"==typeof O}function A(O){return Object.prototype.toString.call(O)}function E(O){return O<10?"0"+O.toString(10):O.toString(10)}ae.debuglog=function(O){if(d(y)&&(y=g.env.NODE_DEBUG||""),O=O.toUpperCase(),!e[O])if(new RegExp("\\b"+O+"\\b","i").test(y)){var D=g.pid;e[O]=function(){var L=ae.format.apply(ae,arguments);console.error("%s %d: %s",O,D,L)}}else e[O]=function(){};return e[O]},ae.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ae.isArray=i,ae.isBoolean=c,ae.isNull=f,ae.isNullOrUndefined=function(O){return null==O},ae.isNumber=l,ae.isString=h,ae.isSymbol=function(O){return"symbol"==typeof O},ae.isUndefined=d,ae.isRegExp=o,ae.isObject=_,ae.isDate=s,ae.isError=k,ae.isFunction=M,ae.isPrimitive=function(O){return null===O||"boolean"==typeof O||"number"==typeof O||"string"==typeof O||"symbol"==typeof O||void 0===O},ae.isBuffer=x("./support/isBuffer");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var O=new Date,D=[E(O.getHours()),E(O.getMinutes()),E(O.getSeconds())].join(":");return[O.getDate(),I[O.getMonth()],D].join(" ")}function R(O,D){return Object.prototype.hasOwnProperty.call(O,D)}ae.log=function(){console.log("%s - %s",C(),ae.format.apply(ae,arguments))},ae.inherits=x("inherits"),ae._extend=function(O,D){if(!D||!_(D))return O;for(var L=Object.keys(D),B=L.length;B--;)O[L[B]]=D[L[B]];return O}}).call(this)}).call(this,x("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(x,oe,ae){"use strict";ae.byteLength=function(t){var p=n(t),i=p[1];return 3*(p[0]+i)/4-i},ae.toByteArray=function(t){var p,u,s,i=n(t),c=i[0],f=i[1],l=new w(3*(c+(s=f))/4-s),h=0,d=f>0?c-4:c;for(u=0;u<d;u+=4)p=m[t.charCodeAt(u)]<<18|m[t.charCodeAt(u+1)]<<12|m[t.charCodeAt(u+2)]<<6|m[t.charCodeAt(u+3)],l[h++]=p>>16&255,l[h++]=p>>8&255,l[h++]=255&p;return 2===f&&(p=m[t.charCodeAt(u)]<<2|m[t.charCodeAt(u+1)]>>4,l[h++]=255&p),1===f&&(p=m[t.charCodeAt(u)]<<10|m[t.charCodeAt(u+1)]<<4|m[t.charCodeAt(u+2)]>>2,l[h++]=p>>8&255,l[h++]=255&p),l},ae.fromByteArray=function(t){for(var p,u=t.length,i=u%3,c=[],f=0,l=u-i;f<l;f+=16383)c.push(a(t,f,f+16383>l?l:f+16383));return 1===i?c.push(g[(p=t[u-1])>>2]+g[p<<4&63]+"=="):2===i&&c.push(g[(p=(t[u-2]<<8)+t[u-1])>>10]+g[p>>4&63]+g[p<<2&63]+"="),c.join("")};for(var g=[],m=[],w="undefined"!=typeof Uint8Array?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=y.length;e<r;++e)g[e]=y[e],m[y.charCodeAt(e)]=e;function n(t){var p=t.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.indexOf("=");return-1===u&&(u=p),[u,u===p?0:4-u%4]}function a(t,p,u){for(var c,f=[],l=p;l<u;l+=3)f.push(g[(c=(t[l]<<16&16711680)+(t[l+1]<<8&65280)+(255&t[l+2]))>>18&63]+g[c>>12&63]+g[c>>6&63]+g[63&c]);return f.join("")}m["-".charCodeAt(0)]=62,m["_".charCodeAt(0)]=63},{}],80:[function(x,oe,ae){"use strict";function g(n,a,t,p,u){for(var i=u+1;p<=u;){var c=p+u>>>1,f=n[c];(void 0!==t?t(f,a):f-a)>=0?(i=c,u=c-1):p=c+1}return i}function m(n,a,t,p,u){for(var i=u+1;p<=u;){var c=p+u>>>1,f=n[c];(void 0!==t?t(f,a):f-a)>0?(i=c,u=c-1):p=c+1}return i}function w(n,a,t,p,u){for(var i=p-1;p<=u;){var c=p+u>>>1,f=n[c];(void 0!==t?t(f,a):f-a)<0?(i=c,p=c+1):u=c-1}return i}function y(n,a,t,p,u){for(var i=p-1;p<=u;){var c=p+u>>>1,f=n[c];(void 0!==t?t(f,a):f-a)<=0?(i=c,p=c+1):u=c-1}return i}function e(n,a,t,p,u){for(;p<=u;){var i=p+u>>>1,c=n[i],f=void 0!==t?t(c,a):c-a;if(0===f)return i;f<=0?p=i+1:u=i-1}return-1}function r(n,a,t,p,u,i){return"function"==typeof t?i(n,a,t,void 0===p?0:0|p,void 0===u?n.length-1:0|u):i(n,a,void 0,void 0===t?0:0|t,void 0===p?n.length-1:0|p)}oe.exports={ge:function(n,a,t,p,u){return r(n,a,t,p,u,g)},gt:function(n,a,t,p,u){return r(n,a,t,p,u,m)},lt:function(n,a,t,p,u){return r(n,a,t,p,u,w)},le:function(n,a,t,p,u){return r(n,a,t,p,u,y)},eq:function(n,a,t,p,u){return r(n,a,t,p,u,e)}}},{}],81:[function(x,oe,ae){"use strict";function g(w){var y=32;return(w&=-w)&&y--,65535&w&&(y-=16),16711935&w&&(y-=8),252645135&w&&(y-=4),858993459&w&&(y-=2),1431655765&w&&(y-=1),y}ae.INT_BITS=32,ae.INT_MAX=2147483647,ae.INT_MIN=-1<<31,ae.sign=function(w){return(w>0)-(w<0)},ae.abs=function(w){var y=w>>31;return(w^y)-y},ae.min=function(w,y){return y^(w^y)&-(w<y)},ae.max=function(w,y){return w^(w^y)&-(w<y)},ae.isPow2=function(w){return!(w&w-1||!w)},ae.log2=function(w){var y,e;return y=(w>65535)<<4,y|=e=((w>>>=y)>255)<<3,y|=e=((w>>>=e)>15)<<2,(y|=e=((w>>>=e)>3)<<1)|(w>>>=e)>>1},ae.log10=function(w){return w>=1e9?9:w>=1e8?8:w>=1e7?7:w>=1e6?6:w>=1e5?5:w>=1e4?4:w>=1e3?3:w>=100?2:w>=10?1:0},ae.popCount=function(w){return 16843009*((w=(858993459&(w-=w>>>1&1431655765))+(w>>>2&858993459))+(w>>>4)&252645135)>>>24},ae.countTrailingZeros=g,ae.nextPow2=function(w){return w+=0===w,--w,w|=w>>>1,w|=w>>>2,w|=w>>>4,1+((w|=w>>>8)|w>>>16)},ae.prevPow2=function(w){return w|=w>>>1,w|=w>>>2,w|=w>>>4,w|=w>>>8,(w|=w>>>16)-(w>>>1)},ae.parity=function(w){return w^=w>>>16,w^=w>>>8,w^=w>>>4,27030>>>(w&=15)&1};var m=new Array(256);(function(w){for(var y=0;y<256;++y){var e=y,r=y,n=7;for(e>>>=1;e;e>>>=1)r<<=1,r|=1&e,--n;w[y]=r<<n&255}})(m),ae.reverse=function(w){return m[255&w]<<24|m[w>>>8&255]<<16|m[w>>>16&255]<<8|m[w>>>24&255]},ae.interleave2=function(w,y){return(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w&=65535)|w<<8))|w<<4))|w<<2))|w<<1))|(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y&=65535)|y<<8))|y<<4))|y<<2))|y<<1))<<1},ae.deinterleave2=function(w,y){return(w=65535&((w=16711935&((w=252645135&((w=858993459&((w=w>>>y&1431655765)|w>>>1))|w>>>2))|w>>>4))|w>>>16))<<16>>16},ae.interleave3=function(w,y,e){return w=1227133513&((w=3272356035&((w=251719695&((w=4278190335&((w&=1023)|w<<16))|w<<8))|w<<4))|w<<2),(w|=(y=1227133513&((y=3272356035&((y=251719695&((y=4278190335&((y&=1023)|y<<16))|y<<8))|y<<4))|y<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},ae.deinterleave3=function(w,y){return(w=1023&((w=4278190335&((w=251719695&((w=3272356035&((w=w>>>y&1227133513)|w>>>2))|w>>>4))|w>>>8))|w>>>16))<<22>>22},ae.nextCombination=function(w){var y=w|w-1;return y+1|(~y&-~y)-1>>>g(w)+1}},{}],82:[function(x,oe,ae){"use strict";var g=x("clamp");oe.exports=function(e,r){r||(r={});var n,a,t,p,u,i,f,h,d,o=null==r.cutoff?.25:r.cutoff,_=null==r.radius?8:r.radius,s=r.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!r.width||!r.height)throw Error("For raw data width and height should be provided by options");n=r.width,a=r.height,p=e,i=r.stride?r.stride:Math.floor(e.length/n/a)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(p=(f=e).getContext("2d").getImageData(0,0,n=f.width,a=f.height).data,i=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(p=e.getImageData(0,0,n=(f=e.canvas).width,a=f.height).data,i=4):window.ImageData&&e instanceof window.ImageData&&(n=e.width,a=e.height,p=e.data,i=4);if(t=Math.max(n,a),window.Uint8ClampedArray&&p instanceof window.Uint8ClampedArray||window.Uint8Array&&p instanceof window.Uint8Array)for(u=p,p=Array(n*a),h=0,d=u.length;h<d;h++)p[h]=u[h*i+s]/255;else if(1!==i)throw Error("Raw data can have only 1 value per pixel");var k=Array(n*a),M=Array(n*a),A=Array(t),E=Array(t),I=Array(t+1),C=Array(t);for(h=0,d=n*a;h<d;h++){var R=p[h];k[h]=1===R?0:0===R?m:Math.pow(Math.max(0,.5-R),2),M[h]=1===R?m:0===R?0:Math.pow(Math.max(0,R-.5),2)}w(k,n,a,A,E,C,I),w(M,n,a,A,E,C,I);var O=window.Float32Array?new Float32Array(n*a):new Array(n*a);for(h=0,d=n*a;h<d;h++)O[h]=g(1-((k[h]-M[h])/_+o),0,1);return O};var m=1e20;function w(e,r,n,a,t,p,u){for(var i=0;i<r;i++){for(var c=0;c<n;c++)a[c]=e[c*r+i];for(y(a,t,p,u,n),c=0;c<n;c++)e[c*r+i]=t[c]}for(c=0;c<n;c++){for(i=0;i<r;i++)a[i]=e[c*r+i];for(y(a,t,p,u,r),i=0;i<r;i++)e[c*r+i]=Math.sqrt(t[i])}}function y(e,r,n,a,t){n[0]=0,a[0]=-m,a[1]=+m;for(var p=1,u=0;p<t;p++){for(var i=(e[p]+p*p-(e[n[u]]+n[u]*n[u]))/(2*p-2*n[u]);i<=a[u];)u--,i=(e[p]+p*p-(e[n[u]]+n[u]*n[u]))/(2*p-2*n[u]);n[++u]=p,a[u]=i,a[u+1]=+m}for(p=0,u=0;p<t;p++){for(;a[u+1]<p;)u++;r[p]=(p-n[u])*(p-n[u])+e[n[u]]}}},{clamp:86}],83:[function(x,oe,ae){},{}],84:[function(x,oe,ae){"use strict";var g,m="object"==typeof Reflect?Reflect:null,w=m&&"function"==typeof m.apply?m.apply:function(l,h,d){return Function.prototype.apply.call(l,h,d)};g=m&&"function"==typeof m.ownKeys?m.ownKeys:Object.getOwnPropertySymbols?function(l){return Object.getOwnPropertyNames(l).concat(Object.getOwnPropertySymbols(l))}:function(l){return Object.getOwnPropertyNames(l)};var y=Number.isNaN||function(l){return l!=l};function e(){e.init.call(this)}oe.exports=e,oe.exports.once=function(l,h){return new Promise(function(d,o){function _(){void 0!==s&&l.removeListener("error",s),d([].slice.call(arguments))}var s;"error"!==h&&(s=function(k){l.removeListener(h,_),o(k)},l.once("error",s)),l.once(h,_)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var r=10;function n(l){if("function"!=typeof l)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof l)}function a(l){return void 0===l._maxListeners?e.defaultMaxListeners:l._maxListeners}function t(l,h,d,o){var _,s,k;if(n(d),void 0===(s=l._events)?(s=l._events=Object.create(null),l._eventsCount=0):(void 0!==s.newListener&&(l.emit("newListener",h,d.listener?d.listener:d),s=l._events),k=s[h]),void 0===k)k=s[h]=d,++l._eventsCount;else if("function"==typeof k?k=s[h]=o?[d,k]:[k,d]:o?k.unshift(d):k.push(d),(_=a(l))>0&&k.length>_&&!k.warned){k.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+k.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");A.name="MaxListenersExceededWarning",A.emitter=l,A.type=h,A.count=k.length,console&&console.warn&&console.warn(A)}return l}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(l,h,d){var o={fired:!1,wrapFn:void 0,target:l,type:h,listener:d},_=p.bind(o);return _.listener=d,o.wrapFn=_,_}function i(l,h,d){var o=l._events;if(void 0===o)return[];var _=o[h];return void 0===_?[]:"function"==typeof _?d?[_.listener||_]:[_]:d?function(s){for(var k=new Array(s.length),M=0;M<k.length;++M)k[M]=s[M].listener||s[M];return k}(_):f(_,_.length)}function c(l){var h=this._events;if(void 0!==h){var d=h[l];if("function"==typeof d)return 1;if(void 0!==d)return d.length}return 0}function f(l,h){for(var d=new Array(h),o=0;o<h;++o)d[o]=l[o];return d}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(l){if("number"!=typeof l||l<0||y(l))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+l+".");r=l}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(l){if("number"!=typeof l||l<0||y(l))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+l+".");return this._maxListeners=l,this},e.prototype.getMaxListeners=function(){return a(this)},e.prototype.emit=function(l){for(var h=[],d=1;d<arguments.length;d++)h.push(arguments[d]);var o="error"===l,_=this._events;if(void 0!==_)o=o&&void 0===_.error;else if(!o)return!1;if(o){var s;if(h.length>0&&(s=h[0]),s instanceof Error)throw s;var k=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw k.context=s,k}var M=_[l];if(void 0===M)return!1;if("function"==typeof M)w(M,this,h);else{var A=M.length,E=f(M,A);for(d=0;d<A;++d)w(E[d],this,h)}return!0},e.prototype.on=e.prototype.addListener=function(l,h){return t(this,l,h,!1)},e.prototype.prependListener=function(l,h){return t(this,l,h,!0)},e.prototype.once=function(l,h){return n(h),this.on(l,u(this,l,h)),this},e.prototype.prependOnceListener=function(l,h){return n(h),this.prependListener(l,u(this,l,h)),this},e.prototype.off=e.prototype.removeListener=function(l,h){var d,o,_,s,k;if(n(h),void 0===(o=this._events))return this;if(void 0===(d=o[l]))return this;if(d===h||d.listener===h)0==--this._eventsCount?this._events=Object.create(null):(delete o[l],o.removeListener&&this.emit("removeListener",l,d.listener||h));else if("function"!=typeof d){for(_=-1,s=d.length-1;s>=0;s--)if(d[s]===h||d[s].listener===h){k=d[s].listener,_=s;break}if(_<0)return this;0===_?d.shift():function(M,A){for(;A+1<M.length;A++)M[A]=M[A+1];M.pop()}(d,_),1===d.length&&(o[l]=d[0]),void 0!==o.removeListener&&this.emit("removeListener",l,k||h)}return this},e.prototype.removeAllListeners=function(l){var h,d,o;if(void 0===(d=this._events))return this;if(void 0===d.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==d[l]&&(0==--this._eventsCount?this._events=Object.create(null):delete d[l]),this;if(0===arguments.length){var _,s=Object.keys(d);for(o=0;o<s.length;++o)"removeListener"!==(_=s[o])&&this.removeAllListeners(_);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(h=d[l]))this.removeListener(l,h);else if(void 0!==h)for(o=h.length-1;o>=0;o--)this.removeListener(l,h[o]);return this},e.prototype.listeners=function(l){return i(this,l,!0)},e.prototype.rawListeners=function(l){return i(this,l,!1)},e.listenerCount=function(l,h){return"function"==typeof l.listenerCount?l.listenerCount(h):c.call(l,h)},e.prototype.listenerCount=c,e.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},{}],85:[function(x,oe,ae){(function(g){(function(){"use strict";var m=x("base64-js"),w=x("ieee754");function y(H){if(H>2147483647)throw new RangeError('The value "'+H+'" is invalid for option "size"');var U=new Uint8Array(H);return U.__proto__=e.prototype,U}function e(H,U,G){if("number"==typeof H){if("string"==typeof U)throw new TypeError('The "string" argument must be of type string. Received type number');return a(H)}return r(H,U,G)}function r(H,U,G){if("string"==typeof H)return function(ee,te){if("string"==typeof te&&""!==te||(te="utf8"),!e.isEncoding(te))throw new TypeError("Unknown encoding: "+te);var se=0|u(ee,te),ue=y(se),de=ue.write(ee,te);return de!==se&&(ue=ue.slice(0,de)),ue}(H,U);if(ArrayBuffer.isView(H))return t(H);if(null==H)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if($(H,ArrayBuffer)||H&&$(H.buffer,ArrayBuffer))return function(ee,te,se){if(te<0||ee.byteLength<te)throw new RangeError('"offset" is outside of buffer bounds');if(ee.byteLength<te+(se||0))throw new RangeError('"length" is outside of buffer bounds');var ue;return(ue=void 0===te&&void 0===se?new Uint8Array(ee):void 0===se?new Uint8Array(ee,te):new Uint8Array(ee,te,se)).__proto__=e.prototype,ue}(H,U,G);if("number"==typeof H)throw new TypeError('The "value" argument must not be of type number. Received type number');var ie=H.valueOf&&H.valueOf();if(null!=ie&&ie!==H)return e.from(ie,U,G);var q=function(ee){if(e.isBuffer(ee)){var te=0|p(ee.length),se=y(te);return 0===se.length||ee.copy(se,0,0,te),se}return void 0!==ee.length?"number"!=typeof ee.length||re(ee.length)?y(0):t(ee):"Buffer"===ee.type&&Array.isArray(ee.data)?t(ee.data):void 0}(H);if(q)return q;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof H[Symbol.toPrimitive])return e.from(H[Symbol.toPrimitive]("string"),U,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H)}function n(H){if("number"!=typeof H)throw new TypeError('"size" argument must be of type number');if(H<0)throw new RangeError('The value "'+H+'" is invalid for option "size"')}function a(H){return n(H),y(H<0?0:0|p(H))}function t(H){for(var U=H.length<0?0:0|p(H.length),G=y(U),ie=0;ie<U;ie+=1)G[ie]=255&H[ie];return G}function p(H){if(H>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|H}function u(H,U){if(e.isBuffer(H))return H.length;if(ArrayBuffer.isView(H)||$(H,ArrayBuffer))return H.byteLength;if("string"!=typeof H)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);var G=H.length,ie=arguments.length>2&&!0===arguments[2];if(!ie&&0===G)return 0;for(var q=!1;;)switch(U){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return Q(H).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*G;case"hex":return G>>>1;case"base64":return ne(H).length;default:if(q)return ie?-1:Q(H).length;U=(""+U).toLowerCase(),q=!0}}function i(H,U,G){var ie=!1;if((void 0===U||U<0)&&(U=0),U>this.length||((void 0===G||G>this.length)&&(G=this.length),G<=0)||(G>>>=0)<=(U>>>=0))return"";for(H||(H="utf8");;)switch(H){case"hex":return C(this,U,G);case"utf8":case"utf-8":return A(this,U,G);case"ascii":return E(this,U,G);case"latin1":case"binary":return I(this,U,G);case"base64":return M(this,U,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,U,G);default:if(ie)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),ie=!0}}function c(H,U,G){var ie=H[U];H[U]=H[G],H[G]=ie}function f(H,U,G,ie,q){if(0===H.length)return-1;if("string"==typeof G?(ie=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),re(G=+G)&&(G=q?0:H.length-1),G<0&&(G=H.length+G),G>=H.length){if(q)return-1;G=H.length-1}else if(G<0){if(!q)return-1;G=0}if("string"==typeof U&&(U=e.from(U,ie)),e.isBuffer(U))return 0===U.length?-1:l(H,U,G,ie,q);if("number"==typeof U)return U&=255,"function"==typeof Uint8Array.prototype.indexOf?q?Uint8Array.prototype.indexOf.call(H,U,G):Uint8Array.prototype.lastIndexOf.call(H,U,G):l(H,[U],G,ie,q);throw new TypeError("val must be string, number or Buffer")}function l(H,U,G,ie,q){var ee,te=1,se=H.length,ue=U.length;if(void 0!==ie&&("ucs2"===(ie=String(ie).toLowerCase())||"ucs-2"===ie||"utf16le"===ie||"utf-16le"===ie)){if(H.length<2||U.length<2)return-1;te=2,se/=2,ue/=2,G/=2}function de(_e,Ce){return 1===te?_e[Ce]:_e.readUInt16BE(Ce*te)}if(q){var he=-1;for(ee=G;ee<se;ee++)if(de(H,ee)===de(U,-1===he?0:ee-he)){if(-1===he&&(he=ee),ee-he+1===ue)return he*te}else-1!==he&&(ee-=ee-he),he=-1}else for(G+ue>se&&(G=se-ue),ee=G;ee>=0;ee--){for(var xe=!0,ge=0;ge<ue;ge++)if(de(H,ee+ge)!==de(U,ge)){xe=!1;break}if(xe)return ee}return-1}function h(H,U,G,ie){G=Number(G)||0;var q=H.length-G;ie?(ie=Number(ie))>q&&(ie=q):ie=q;var ee=U.length;ie>ee/2&&(ie=ee/2);for(var te=0;te<ie;++te){var se=parseInt(U.substr(2*te,2),16);if(re(se))return te;H[G+te]=se}return te}function d(H,U,G,ie){return X(Q(U,H.length-G),H,G,ie)}function o(H,U,G,ie){return X(function(q){for(var ee=[],te=0;te<q.length;++te)ee.push(255&q.charCodeAt(te));return ee}(U),H,G,ie)}function _(H,U,G,ie){return o(H,U,G,ie)}function s(H,U,G,ie){return X(ne(U),H,G,ie)}function k(H,U,G,ie){return X(function(q,ee){for(var te,se,de=[],he=0;he<q.length&&!((ee-=2)<0);++he)se=(te=q.charCodeAt(he))>>8,de.push(te%256),de.push(se);return de}(U,H.length-G),H,G,ie)}function M(H,U,G){return m.fromByteArray(0===U&&G===H.length?H:H.slice(U,G))}function A(H,U,G){G=Math.min(H.length,G);for(var ie=[],q=U;q<G;){var ee,te,se,ue,de=H[q],he=null,xe=de>239?4:de>223?3:de>191?2:1;if(q+xe<=G)switch(xe){case 1:de<128&&(he=de);break;case 2:128==(192&(ee=H[q+1]))&&(ue=(31&de)<<6|63&ee)>127&&(he=ue);break;case 3:te=H[q+2],128==(192&(ee=H[q+1]))&&128==(192&te)&&(ue=(15&de)<<12|(63&ee)<<6|63&te)>2047&&(ue<55296||ue>57343)&&(he=ue);break;case 4:te=H[q+2],se=H[q+3],128==(192&(ee=H[q+1]))&&128==(192&te)&&128==(192&se)&&(ue=(15&de)<<18|(63&ee)<<12|(63&te)<<6|63&se)>65535&&ue<1114112&&(he=ue)}null===he?(he=65533,xe=1):he>65535&&(ie.push((he-=65536)>>>10&1023|55296),he=56320|1023&he),ie.push(he),q+=xe}return function(ge){var _e=ge.length;if(_e<=4096)return String.fromCharCode.apply(String,ge);for(var Ce="",Le=0;Le<_e;)Ce+=String.fromCharCode.apply(String,ge.slice(Le,Le+=4096));return Ce}(ie)}function E(H,U,G){var ie="";G=Math.min(H.length,G);for(var q=U;q<G;++q)ie+=String.fromCharCode(127&H[q]);return ie}function I(H,U,G){var ie="";G=Math.min(H.length,G);for(var q=U;q<G;++q)ie+=String.fromCharCode(H[q]);return ie}function C(H,U,G){var ie=H.length;(!U||U<0)&&(U=0),(!G||G<0||G>ie)&&(G=ie);for(var q="",ee=U;ee<G;++ee)q+=Y(H[ee]);return q}function R(H,U,G){for(var ie=H.slice(U,G),q="",ee=0;ee<ie.length;ee+=2)q+=String.fromCharCode(ie[ee]+256*ie[ee+1]);return q}function O(H,U,G){if(H%1!=0||H<0)throw new RangeError("offset is not uint");if(H+U>G)throw new RangeError("Trying to access beyond buffer length")}function D(H,U,G,ie,q,ee){if(!e.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(U>q||U<ee)throw new RangeError('"value" argument is out of bounds');if(G+ie>H.length)throw new RangeError("Index out of range")}function L(H,U,G,ie,q,ee){if(G+ie>H.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function B(H,U,G,ie,q){return U=+U,G>>>=0,q||L(H,0,G,4),w.write(H,U,G,ie,23,4),G+4}function j(H,U,G,ie,q){return U=+U,G>>>=0,q||L(H,0,G,8),w.write(H,U,G,ie,52,8),G+8}ae.Buffer=e,ae.SlowBuffer=function(H){return+H!=H&&(H=0),e.alloc(+H)},ae.INSPECT_MAX_BYTES=50,ae.kMaxLength=2147483647,(e.TYPED_ARRAY_SUPPORT=function(){try{var H=new Uint8Array(1);return H.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===H.foo()}catch(U){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(H,U,G){return r(H,U,G)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(H,U,G){return q=U,ee=G,n(ie=H),ie<=0?y(ie):void 0!==q?"string"==typeof ee?y(ie).fill(q,ee):y(ie).fill(q):y(ie);var ie,q,ee},e.allocUnsafe=function(H){return a(H)},e.allocUnsafeSlow=function(H){return a(H)},e.isBuffer=function(H){return null!=H&&!0===H._isBuffer&&H!==e.prototype},e.compare=function(H,U){if($(H,Uint8Array)&&(H=e.from(H,H.offset,H.byteLength)),$(U,Uint8Array)&&(U=e.from(U,U.offset,U.byteLength)),!e.isBuffer(H)||!e.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===U)return 0;for(var G=H.length,ie=U.length,q=0,ee=Math.min(G,ie);q<ee;++q)if(H[q]!==U[q]){G=H[q],ie=U[q];break}return G<ie?-1:ie<G?1:0},e.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(H,U){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(0===H.length)return e.alloc(0);var G;if(void 0===U)for(U=0,G=0;G<H.length;++G)U+=H[G].length;var ie=e.allocUnsafe(U),q=0;for(G=0;G<H.length;++G){var ee=H[G];if($(ee,Uint8Array)&&(ee=e.from(ee)),!e.isBuffer(ee))throw new TypeError('"list" argument must be an Array of Buffers');ee.copy(ie,q),q+=ee.length}return ie},e.byteLength=u,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var H=this.length;if(H%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var U=0;U<H;U+=2)c(this,U,U+1);return this},e.prototype.swap32=function(){var H=this.length;if(H%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var U=0;U<H;U+=4)c(this,U,U+3),c(this,U+1,U+2);return this},e.prototype.swap64=function(){var H=this.length;if(H%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var U=0;U<H;U+=8)c(this,U,U+7),c(this,U+1,U+6),c(this,U+2,U+5),c(this,U+3,U+4);return this},e.prototype.toLocaleString=e.prototype.toString=function(){var H=this.length;return 0===H?"":0===arguments.length?A(this,0,H):i.apply(this,arguments)},e.prototype.equals=function(H){if(!e.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H||0===e.compare(this,H)},e.prototype.inspect=function(){var H="",U=ae.INSPECT_MAX_BYTES;return H=this.toString("hex",0,U).replace(/(.{2})/g,"$1 ").trim(),this.length>U&&(H+=" ... "),"<Buffer "+H+">"},e.prototype.compare=function(H,U,G,ie,q){if($(H,Uint8Array)&&(H=e.from(H,H.offset,H.byteLength)),!e.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(void 0===U&&(U=0),void 0===G&&(G=H?H.length:0),void 0===ie&&(ie=0),void 0===q&&(q=this.length),U<0||G>H.length||ie<0||q>this.length)throw new RangeError("out of range index");if(ie>=q&&U>=G)return 0;if(ie>=q)return-1;if(U>=G)return 1;if(this===H)return 0;for(var ee=(q>>>=0)-(ie>>>=0),te=(G>>>=0)-(U>>>=0),se=Math.min(ee,te),ue=this.slice(ie,q),de=H.slice(U,G),he=0;he<se;++he)if(ue[he]!==de[he]){ee=ue[he],te=de[he];break}return ee<te?-1:te<ee?1:0},e.prototype.includes=function(H,U,G){return-1!==this.indexOf(H,U,G)},e.prototype.indexOf=function(H,U,G){return f(this,H,U,G,!0)},e.prototype.lastIndexOf=function(H,U,G){return f(this,H,U,G,!1)},e.prototype.write=function(H,U,G,ie){if(void 0===U)ie="utf8",G=this.length,U=0;else if(void 0===G&&"string"==typeof U)ie=U,G=this.length,U=0;else{if(!isFinite(U))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");U>>>=0,isFinite(G)?(G>>>=0,void 0===ie&&(ie="utf8")):(ie=G,G=void 0)}var q=this.length-U;if((void 0===G||G>q)&&(G=q),H.length>0&&(G<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");for(var ee=!1;;)switch(ie){case"hex":return h(this,H,U,G);case"utf8":case"utf-8":return d(this,H,U,G);case"ascii":return o(this,H,U,G);case"latin1":case"binary":return _(this,H,U,G);case"base64":return s(this,H,U,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,H,U,G);default:if(ee)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),ee=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(H,U){var G=this.length;(H=~~H)<0?(H+=G)<0&&(H=0):H>G&&(H=G),(U=void 0===U?G:~~U)<0?(U+=G)<0&&(U=0):U>G&&(U=G),U<H&&(U=H);var ie=this.subarray(H,U);return ie.__proto__=e.prototype,ie},e.prototype.readUIntLE=function(H,U,G){H>>>=0,U>>>=0,G||O(H,U,this.length);for(var ie=this[H],q=1,ee=0;++ee<U&&(q*=256);)ie+=this[H+ee]*q;return ie},e.prototype.readUIntBE=function(H,U,G){H>>>=0,U>>>=0,G||O(H,U,this.length);for(var ie=this[H+--U],q=1;U>0&&(q*=256);)ie+=this[H+--U]*q;return ie},e.prototype.readUInt8=function(H,U){return H>>>=0,U||O(H,1,this.length),this[H]},e.prototype.readUInt16LE=function(H,U){return H>>>=0,U||O(H,2,this.length),this[H]|this[H+1]<<8},e.prototype.readUInt16BE=function(H,U){return H>>>=0,U||O(H,2,this.length),this[H]<<8|this[H+1]},e.prototype.readUInt32LE=function(H,U){return H>>>=0,U||O(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+16777216*this[H+3]},e.prototype.readUInt32BE=function(H,U){return H>>>=0,U||O(H,4,this.length),16777216*this[H]+(this[H+1]<<16|this[H+2]<<8|this[H+3])},e.prototype.readIntLE=function(H,U,G){H>>>=0,U>>>=0,G||O(H,U,this.length);for(var ie=this[H],q=1,ee=0;++ee<U&&(q*=256);)ie+=this[H+ee]*q;return ie>=(q*=128)&&(ie-=Math.pow(2,8*U)),ie},e.prototype.readIntBE=function(H,U,G){H>>>=0,U>>>=0,G||O(H,U,this.length);for(var ie=U,q=1,ee=this[H+--ie];ie>0&&(q*=256);)ee+=this[H+--ie]*q;return ee>=(q*=128)&&(ee-=Math.pow(2,8*U)),ee},e.prototype.readInt8=function(H,U){return H>>>=0,U||O(H,1,this.length),128&this[H]?-1*(255-this[H]+1):this[H]},e.prototype.readInt16LE=function(H,U){H>>>=0,U||O(H,2,this.length);var G=this[H]|this[H+1]<<8;return 32768&G?4294901760|G:G},e.prototype.readInt16BE=function(H,U){H>>>=0,U||O(H,2,this.length);var G=this[H+1]|this[H]<<8;return 32768&G?4294901760|G:G},e.prototype.readInt32LE=function(H,U){return H>>>=0,U||O(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},e.prototype.readInt32BE=function(H,U){return H>>>=0,U||O(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},e.prototype.readFloatLE=function(H,U){return H>>>=0,U||O(H,4,this.length),w.read(this,H,!0,23,4)},e.prototype.readFloatBE=function(H,U){return H>>>=0,U||O(H,4,this.length),w.read(this,H,!1,23,4)},e.prototype.readDoubleLE=function(H,U){return H>>>=0,U||O(H,8,this.length),w.read(this,H,!0,52,8)},e.prototype.readDoubleBE=function(H,U){return H>>>=0,U||O(H,8,this.length),w.read(this,H,!1,52,8)},e.prototype.writeUIntLE=function(H,U,G,ie){H=+H,U>>>=0,G>>>=0,ie||D(this,H,U,G,Math.pow(2,8*G)-1,0);var q=1,ee=0;for(this[U]=255&H;++ee<G&&(q*=256);)this[U+ee]=H/q&255;return U+G},e.prototype.writeUIntBE=function(H,U,G,ie){H=+H,U>>>=0,G>>>=0,ie||D(this,H,U,G,Math.pow(2,8*G)-1,0);var q=G-1,ee=1;for(this[U+q]=255&H;--q>=0&&(ee*=256);)this[U+q]=H/ee&255;return U+G},e.prototype.writeUInt8=function(H,U,G){return H=+H,U>>>=0,G||D(this,H,U,1,255,0),this[U]=255&H,U+1},e.prototype.writeUInt16LE=function(H,U,G){return H=+H,U>>>=0,G||D(this,H,U,2,65535,0),this[U]=255&H,this[U+1]=H>>>8,U+2},e.prototype.writeUInt16BE=function(H,U,G){return H=+H,U>>>=0,G||D(this,H,U,2,65535,0),this[U]=H>>>8,this[U+1]=255&H,U+2},e.prototype.writeUInt32LE=function(H,U,G){return H=+H,U>>>=0,G||D(this,H,U,4,4294967295,0),this[U+3]=H>>>24,this[U+2]=H>>>16,this[U+1]=H>>>8,this[U]=255&H,U+4},e.prototype.writeUInt32BE=function(H,U,G){return H=+H,U>>>=0,G||D(this,H,U,4,4294967295,0),this[U]=H>>>24,this[U+1]=H>>>16,this[U+2]=H>>>8,this[U+3]=255&H,U+4},e.prototype.writeIntLE=function(H,U,G,ie){if(H=+H,U>>>=0,!ie){var q=Math.pow(2,8*G-1);D(this,H,U,G,q-1,-q)}var ee=0,te=1,se=0;for(this[U]=255&H;++ee<G&&(te*=256);)H<0&&0===se&&0!==this[U+ee-1]&&(se=1),this[U+ee]=(H/te>>0)-se&255;return U+G},e.prototype.writeIntBE=function(H,U,G,ie){if(H=+H,U>>>=0,!ie){var q=Math.pow(2,8*G-1);D(this,H,U,G,q-1,-q)}var ee=G-1,te=1,se=0;for(this[U+ee]=255&H;--ee>=0&&(te*=256);)H<0&&0===se&&0!==this[U+ee+1]&&(se=1),this[U+ee]=(H/te>>0)-se&255;return U+G},e.prototype.writeInt8=function(H,U,G){return H=+H,U>>>=0,G||D(this,H,U,1,127,-128),H<0&&(H=255+H+1),this[U]=255&H,U+1},e.prototype.writeInt16LE=function(H,U,G){return H=+H,U>>>=0,G||D(this,H,U,2,32767,-32768),this[U]=255&H,this[U+1]=H>>>8,U+2},e.prototype.writeInt16BE=function(H,U,G){return H=+H,U>>>=0,G||D(this,H,U,2,32767,-32768),this[U]=H>>>8,this[U+1]=255&H,U+2},e.prototype.writeInt32LE=function(H,U,G){return H=+H,U>>>=0,G||D(this,H,U,4,2147483647,-2147483648),this[U]=255&H,this[U+1]=H>>>8,this[U+2]=H>>>16,this[U+3]=H>>>24,U+4},e.prototype.writeInt32BE=function(H,U,G){return H=+H,U>>>=0,G||D(this,H,U,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[U]=H>>>24,this[U+1]=H>>>16,this[U+2]=H>>>8,this[U+3]=255&H,U+4},e.prototype.writeFloatLE=function(H,U,G){return B(this,H,U,!0,G)},e.prototype.writeFloatBE=function(H,U,G){return B(this,H,U,!1,G)},e.prototype.writeDoubleLE=function(H,U,G){return j(this,H,U,!0,G)},e.prototype.writeDoubleBE=function(H,U,G){return j(this,H,U,!1,G)},e.prototype.copy=function(H,U,G,ie){if(!e.isBuffer(H))throw new TypeError("argument should be a Buffer");if(G||(G=0),ie||0===ie||(ie=this.length),U>=H.length&&(U=H.length),U||(U=0),ie>0&&ie<G&&(ie=G),ie===G||0===H.length||0===this.length)return 0;if(U<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),H.length-U<ie-G&&(ie=H.length-U+G);var q=ie-G;if(this===H&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(U,G,ie);else if(this===H&&G<U&&U<ie)for(var ee=q-1;ee>=0;--ee)H[ee+U]=this[ee+G];else Uint8Array.prototype.set.call(H,this.subarray(G,ie),U);return q},e.prototype.fill=function(H,U,G,ie){if("string"==typeof H){if("string"==typeof U?(ie=U,U=0,G=this.length):"string"==typeof G&&(ie=G,G=this.length),void 0!==ie&&"string"!=typeof ie)throw new TypeError("encoding must be a string");if("string"==typeof ie&&!e.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(1===H.length){var q=H.charCodeAt(0);("utf8"===ie&&q<128||"latin1"===ie)&&(H=q)}}else"number"==typeof H&&(H&=255);if(U<0||this.length<U||this.length<G)throw new RangeError("Out of range index");if(G<=U)return this;var ee;if(U>>>=0,G=void 0===G?this.length:G>>>0,H||(H=0),"number"==typeof H)for(ee=U;ee<G;++ee)this[ee]=H;else{var te=e.isBuffer(H)?H:e.from(H,ie),se=te.length;if(0===se)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(ee=0;ee<G-U;++ee)this[ee+U]=te[ee%se]}return this};var W=/[^+/0-9A-Za-z-_]/g;function Y(H){return H<16?"0"+H.toString(16):H.toString(16)}function Q(H,U){var G;U=U||1/0;for(var ie=H.length,q=null,ee=[],te=0;te<ie;++te){if((G=H.charCodeAt(te))>55295&&G<57344){if(!q){if(G>56319){(U-=3)>-1&&ee.push(239,191,189);continue}if(te+1===ie){(U-=3)>-1&&ee.push(239,191,189);continue}q=G;continue}if(G<56320){(U-=3)>-1&&ee.push(239,191,189),q=G;continue}G=65536+(q-55296<<10|G-56320)}else q&&(U-=3)>-1&&ee.push(239,191,189);if(q=null,G<128){if((U-=1)<0)break;ee.push(G)}else if(G<2048){if((U-=2)<0)break;ee.push(G>>6|192,63&G|128)}else if(G<65536){if((U-=3)<0)break;ee.push(G>>12|224,G>>6&63|128,63&G|128)}else{if(!(G<1114112))throw new Error("Invalid code point");if((U-=4)<0)break;ee.push(G>>18|240,G>>12&63|128,G>>6&63|128,63&G|128)}}return ee}function ne(H){return m.toByteArray(function(U){if((U=(U=U.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;U.length%4!=0;)U+="=";return U}(H))}function X(H,U,G,ie){for(var q=0;q<ie&&!(q+G>=U.length||q>=H.length);++q)U[q+G]=H[q];return q}function $(H,U){return H instanceof U||null!=H&&null!=H.constructor&&null!=H.constructor.name&&H.constructor.name===U.name}function re(H){return H!=H}}).call(this)}).call(this,x("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(x,oe,ae){oe.exports=function(g,m,w){return m<w?g<m?m:g>w?w:g:g<w?w:g>m?m:g}},{}],87:[function(x,oe,ae){"use strict";var g=x("clamp");function m(w,y){null==y&&(y=!0);var e=w[0],r=w[1],n=w[2],a=w[3];return null==a&&(a=y?1:255),y&&(e*=255,r*=255,n*=255,a*=255),16777216*(e=255&g(e,0,255))+((r=255&g(r,0,255))<<16)+((n=255&g(n,0,255))<<8)+(255&g(a,0,255))}oe.exports=m,oe.exports.to=m,oe.exports.from=function(w,y){var e=(w=+w)>>>24,r=(16711680&w)>>>16,n=(65280&w)>>>8,a=255&w;return!1===y?[e,r,n,a]:[e/255,r/255,n/255,a/255]}},{clamp:86}],88:[function(x,oe,ae){"use strict";oe.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(x,oe,ae){"use strict";var g=x("color-rgba"),m=x("clamp"),w=x("dtype");oe.exports=function(y,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var a,r=new(w(e))(4),n="uint8"!==e&&"uint8_clamped"!==e;return y.length&&"string"!=typeof y||((y=g(y))[0]/=255,y[1]/=255,y[2]/=255),(a=y)instanceof Uint8Array||a instanceof Uint8ClampedArray||Array.isArray(a)&&(a[0]>1||0===a[0])&&(a[1]>1||0===a[1])&&(a[2]>1||0===a[2])&&(!a[3]||a[3]>1)?(r[0]=y[0],r[1]=y[1],r[2]=y[2],r[3]=null!=y[3]?y[3]:255,n&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(n?(r[0]=y[0],r[1]=y[1],r[2]=y[2],r[3]=null!=y[3]?y[3]:1):(r[0]=m(Math.floor(255*y[0]),0,255),r[1]=m(Math.floor(255*y[1]),0,255),r[2]=m(Math.floor(255*y[2]),0,255),r[3]=null==y[3]?255:m(Math.floor(255*y[3]),0,255)),r)}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(x,oe,ae){(function(g){(function(){"use strict";var m=x("color-name"),w=x("is-plain-obj"),y=x("defined");oe.exports=function(r){var n,a,t=[],p=1;if("string"==typeof r)if(m[r])t=m[r].slice(),a="rgb";else if("transparent"===r)p=0,a="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(r)){var u=(f=r.slice(1)).length;p=1,u<=4?(t=[parseInt(f[0]+f[0],16),parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16)],4===u&&(p=parseInt(f[3]+f[3],16)/255)):(t=[parseInt(f[0]+f[1],16),parseInt(f[2]+f[3],16),parseInt(f[4]+f[5],16)],8===u&&(p=parseInt(f[6]+f[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),a="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(r)){var i=n[1],c="rgb"===i,f=i.replace(/a$/,"");a=f,u="cmyk"===f?4:"gray"===f?1:3,t=n[2].trim().split(/\s*,\s*/).map(function(h,d){if(/%$/.test(h))return d===u?parseFloat(h)/100:"rgb"===f?255*parseFloat(h)/100:parseFloat(h);if("h"===f[d]){if(/deg$/.test(h))return parseFloat(h);if(void 0!==e[h])return e[h]}return parseFloat(h)}),i===f&&t.push(1),p=c||void 0===t[u]?1:t[u],t=t.slice(0,u)}else r.length>10&&/[0-9](?:\s|\/)/.test(r)&&(t=r.match(/([0-9]+)/g).map(function(h){return parseFloat(h)}),a=r.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(r))if(w(r)){var l=y(r.r,r.red,r.R,null);null!==l?(a="rgb",t=[l,y(r.g,r.green,r.G),y(r.b,r.blue,r.B)]):(a="hsl",t=[y(r.h,r.hue,r.H),y(r.s,r.saturation,r.S),y(r.l,r.lightness,r.L,r.b,r.brightness)]),p=y(r.a,r.alpha,r.opacity,1),null!=r.opacity&&(p/=100)}else(Array.isArray(r)||g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(r))&&(t=[r[0],r[1],r[2]],a="rgb",p=4===r.length?r[3]:1);else a="rgb",t=[r>>>16,(65280&r)>>>8,255&r];return{space:a,values:t,alpha:p}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(x,oe,ae){"use strict";var g=x("color-parse"),m=x("color-space/hsl"),w=x("clamp");oe.exports=function(y){var e,r=g(y);return r.space?((e=Array(3))[0]=w(r.values[0],0,255),e[1]=w(r.values[1],0,255),e[2]=w(r.values[2],0,255),"h"===r.space[0]&&(e=m.rgb(e)),e.push(w(r.alpha,0,1)),e):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(x,oe,ae){"use strict";var g=x("./rgb");oe.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(m){var w,y,e,r,n,a=m[0]/360,t=m[1]/100,p=m[2]/100;if(0===t)return[n=255*p,n,n];w=2*p-(y=p<.5?p*(1+t):p+t-p*t),r=[0,0,0];for(var u=0;u<3;u++)(e=a+1/3*-(u-1))<0?e++:e>1&&e--,r[u]=255*(n=6*e<1?w+6*(y-w)*e:2*e<1?y:3*e<2?w+(y-w)*(2/3-e)*6:w);return r}},g.hsl=function(m){var w,y,e=m[0]/255,r=m[1]/255,n=m[2]/255,a=Math.min(e,r,n),t=Math.max(e,r,n),p=t-a;return t===a?w=0:e===t?w=(r-n)/p:r===t?w=2+(n-e)/p:n===t&&(w=4+(e-r)/p),(w=Math.min(60*w,360))<0&&(w+=360),y=(a+t)/2,[w,100*(t===a?0:y<=.5?p/(t+a):p/(2-t-a)),100*y]}},{"./rgb":93}],93:[function(x,oe,ae){"use strict";oe.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(x,oe,ae){oe.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(x,oe,ae){oe.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(x,oe,ae){oe.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(x,oe,ae){oe.exports=["normal","italic","oblique"]},{}],98:[function(x,oe,ae){oe.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(x,oe,ae){"use strict";oe.exports={parse:x("./parse"),stringify:x("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(x,oe,ae){"use strict";var g=x("css-font-size-keywords");oe.exports={isSize:function(m){return/^[\d\.]/.test(m)||-1!==m.indexOf("/")||-1!==g.indexOf(m)}}},{"css-font-size-keywords":95}],101:[function(x,oe,ae){"use strict";var g=x("unquote"),m=x("css-global-keywords"),w=x("css-system-font-keywords"),y=x("css-font-weight-keywords"),e=x("css-font-style-keywords"),r=x("css-font-stretch-keywords"),n=x("string-split-by"),a=x("./lib/util").isSize;oe.exports=p;var t=p.cache={};function p(i){if("string"!=typeof i)throw new Error("Font argument must be a string.");if(t[i])return t[i];if(""===i)throw new Error("Cannot parse an empty string.");if(-1!==w.indexOf(i))return t[i]={system:i};for(var c,f={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},l=n(i,/\s+/);c=l.shift();){if(-1!==m.indexOf(c))return["style","variant","weight","stretch"].forEach(function(d){f[d]=c}),t[i]=f;if(-1===e.indexOf(c))if("normal"!==c&&"small-caps"!==c)if(-1===r.indexOf(c)){if(-1===y.indexOf(c)){if(a(c)){var h=n(c,"/");if(f.size=h[0],null!=h[1]?f.lineHeight=u(h[1]):"/"===l[0]&&(l.shift(),f.lineHeight=u(l.shift())),!l.length)throw new Error("Missing required font-family.");return f.family=n(l.join(" "),/\s*,\s*/).map(g),t[i]=f}throw new Error("Unknown or unsupported font token: "+c)}f.weight=c}else f.stretch=c;else f.variant=c;else f.style=c}throw new Error("Missing required font-size.")}function u(i){var c=parseFloat(i);return c.toString()===i?c:i}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(x,oe,ae){"use strict";var g=x("pick-by-alias"),m=x("./lib/util").isSize,w=c(x("css-global-keywords")),y=c(x("css-system-font-keywords")),e=c(x("css-font-weight-keywords")),r=c(x("css-font-style-keywords")),n=c(x("css-font-stretch-keywords")),a={normal:1,"small-caps":1},t={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},u="serif";function i(f,l){if(f&&!l[f]&&!w[f])throw Error("Unknown keyword `"+f+"`");return f}function c(f){for(var l={},h=0;h<f.length;h++)l[f[h]]=1;return l}oe.exports=function(f){if((f=g(f,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return f.system&&i(f.system,y),f.system;if(i(f.style,r),i(f.variant,a),i(f.weight,e),i(f.stretch,n),null==f.size&&(f.size="1rem"),"number"==typeof f.size&&(f.size+="px"),!m)throw Error("Bad size value `"+f.size+"`");f.family||(f.family=u),Array.isArray(f.family)&&(f.family.length||(f.family=[u]),f.family=f.family.map(function(h){return t[h]?h:'"'+h+'"'}).join(", "));var l=[];return l.push(f.style),f.variant!==f.style&&l.push(f.variant),f.weight!==f.variant&&f.weight!==f.style&&l.push(f.weight),f.stretch!==f.weight&&f.stretch!==f.variant&&f.stretch!==f.style&&l.push(f.stretch),l.push(f.size+(null==f.lineHeight||"normal"===f.lineHeight||f.lineHeight+""=="1"?"":"/"+f.lineHeight)),l.push(f.family),l.filter(Boolean).join(" ")}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(x,oe,ae){oe.exports=["inherit","initial","unset"]},{}],104:[function(x,oe,ae){oe.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(x,oe,ae){"use strict";var g,m=x("type/value/is"),w=x("type/value/ensure"),y=x("type/plain-function/ensure"),e=x("es5-ext/object/copy"),r=x("es5-ext/object/normalize-options"),n=x("es5-ext/object/map"),a=Function.prototype.bind,t=Object.defineProperty,p=Object.prototype.hasOwnProperty;g=function(u,i,c){var f,l=w(i)&&y(i.value);return delete(f=e(i)).writable,delete f.value,f.get=function(){return!c.overwriteDefinition&&p.call(this,u)?l:(i.value=a.call(l,c.resolveContext?c.resolveContext(this):this),t(this,u,i),this[u])},f},oe.exports=function(u){var i=r(arguments[1]);return m(i.resolveContext)&&y(i.resolveContext),n(u,function(c,f){return g(f,c,i)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(x,oe,ae){"use strict";var g=x("type/value/is"),m=x("type/plain-function/is"),w=x("es5-ext/object/assign"),y=x("es5-ext/object/normalize-options"),e=x("es5-ext/string/#/contains");(oe.exports=function(r,n){var a,t,p,u,i;return arguments.length<2||"string"!=typeof r?(u=n,n=r,r=null):u=arguments[2],g(r)?(a=e.call(r,"c"),t=e.call(r,"e"),p=e.call(r,"w")):(a=p=!0,t=!1),i={value:n,configurable:a,enumerable:t,writable:p},u?w(y(u),i):i}).gs=function(r,n,a){var t,p,u,i;return"string"!=typeof r?(u=a,a=n,n=r,r=null):u=arguments[3],g(n)?m(n)?g(a)?m(a)||(u=a,a=void 0):a=void 0:(u=n,n=a=void 0):n=void 0,g(r)?(t=e.call(r,"c"),p=e.call(r,"e")):(t=!0,p=!1),i={get:n,set:a,configurable:t,enumerable:p},u?w(y(u),i):i}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(x,oe,ae){var m;m=function(g){"use strict";function m(O,D){return O<D?-1:O>D?1:O>=D?0:NaN}function w(O){var D;return 1===O.length&&(D=O,O=function(L,B){return m(D(L),B)}),{left:function(L,B,j,W){for(null==j&&(j=0),null==W&&(W=L.length);j<W;){var Y=j+W>>>1;O(L[Y],B)<0?j=Y+1:W=Y}return j},right:function(L,B,j,W){for(null==j&&(j=0),null==W&&(W=L.length);j<W;){var Y=j+W>>>1;O(L[Y],B)>0?W=Y:j=Y+1}return j}}}var y=w(m),e=y.right,r=y.left;function n(O,D){return[O,D]}function a(O){return null===O?NaN:+O}function t(O,D){var L,B,j=O.length,W=0,Y=-1,Q=0,ne=0;if(null==D)for(;++Y<j;)isNaN(L=a(O[Y]))||(ne+=(B=L-Q)*(L-(Q+=B/++W)));else for(;++Y<j;)isNaN(L=a(D(O[Y],Y,O)))||(ne+=(B=L-Q)*(L-(Q+=B/++W)));if(W>1)return ne/(W-1)}function p(O,D){var L=t(O,D);return L&&Math.sqrt(L)}function u(O,D){var L,B,j,W=O.length,Y=-1;if(null==D){for(;++Y<W;)if(null!=(L=O[Y])&&L>=L)for(B=j=L;++Y<W;)null!=(L=O[Y])&&(B>L&&(B=L),j<L&&(j=L))}else for(;++Y<W;)if(null!=(L=D(O[Y],Y,O))&&L>=L)for(B=j=L;++Y<W;)null!=(L=D(O[Y],Y,O))&&(B>L&&(B=L),j<L&&(j=L));return[B,j]}var i=Array.prototype,c=i.slice,f=i.map;function l(O){return function(){return O}}function h(O){return O}function d(O,D,L){O=+O,D=+D,L=(j=arguments.length)<2?(D=O,O=0,1):j<3?1:+L;for(var B=-1,j=0|Math.max(0,Math.ceil((D-O)/L)),W=new Array(j);++B<j;)W[B]=O+B*L;return W}var o=Math.sqrt(50),_=Math.sqrt(10),s=Math.sqrt(2);function k(O,D,L){var B=(D-O)/Math.max(0,L),j=Math.floor(Math.log(B)/Math.LN10),W=B/Math.pow(10,j);return j>=0?(W>=o?10:W>=_?5:W>=s?2:1)*Math.pow(10,j):-Math.pow(10,-j)/(W>=o?10:W>=_?5:W>=s?2:1)}function M(O,D,L){var B=Math.abs(D-O)/Math.max(0,L),j=Math.pow(10,Math.floor(Math.log(B)/Math.LN10)),W=B/j;return W>=o?j*=10:W>=_?j*=5:W>=s&&(j*=2),D<O?-j:j}function A(O){return Math.ceil(Math.log(O.length)/Math.LN2)+1}function E(O,D,L){if(null==L&&(L=a),B=O.length){if((D=+D)<=0||B<2)return+L(O[0],0,O);if(D>=1)return+L(O[B-1],B-1,O);var B,j=(B-1)*D,W=Math.floor(j),Y=+L(O[W],W,O);return Y+(+L(O[W+1],W+1,O)-Y)*(j-W)}}function I(O,D){var L,B,j=O.length,W=-1;if(null==D){for(;++W<j;)if(null!=(L=O[W])&&L>=L)for(B=L;++W<j;)null!=(L=O[W])&&B>L&&(B=L)}else for(;++W<j;)if(null!=(L=D(O[W],W,O))&&L>=L)for(B=L;++W<j;)null!=(L=D(O[W],W,O))&&B>L&&(B=L);return B}function C(O){if(!(j=O.length))return[];for(var D=-1,L=I(O,R),B=new Array(L);++D<L;)for(var j,W=-1,Y=B[D]=new Array(j);++W<j;)Y[W]=O[W][D];return B}function R(O){return O.length}g.bisect=e,g.bisectRight=e,g.bisectLeft=r,g.ascending=m,g.bisector=w,g.cross=function(O,D,L){var B,j,W,Y,Q=O.length,ne=D.length,X=new Array(Q*ne);for(null==L&&(L=n),B=W=0;B<Q;++B)for(Y=O[B],j=0;j<ne;++j,++W)X[W]=L(Y,D[j]);return X},g.descending=function(O,D){return D<O?-1:D>O?1:D>=O?0:NaN},g.deviation=p,g.extent=u,g.histogram=function(){var O=h,D=u,L=A;function B(j){var W,Y,Q=j.length,ne=new Array(Q);for(W=0;W<Q;++W)ne[W]=O(j[W],W,j);var X=D(ne),$=X[0],re=X[1],H=L(ne,$,re);Array.isArray(H)||(H=M($,re,H),H=d(Math.ceil($/H)*H,re,H));for(var U=H.length;H[0]<=$;)H.shift(),--U;for(;H[U-1]>re;)H.pop(),--U;var G,ie=new Array(U+1);for(W=0;W<=U;++W)(G=ie[W]=[]).x0=W>0?H[W-1]:$,G.x1=W<U?H[W]:re;for(W=0;W<Q;++W)$<=(Y=ne[W])&&Y<=re&&ie[e(H,Y,0,U)].push(j[W]);return ie}return B.value=function(j){return arguments.length?(O="function"==typeof j?j:l(j),B):O},B.domain=function(j){return arguments.length?(D="function"==typeof j?j:l([j[0],j[1]]),B):D},B.thresholds=function(j){return arguments.length?(L="function"==typeof j?j:Array.isArray(j)?l(c.call(j)):l(j),B):L},B},g.thresholdFreedmanDiaconis=function(O,D,L){return O=f.call(O,a).sort(m),Math.ceil((L-D)/(2*(E(O,.75)-E(O,.25))*Math.pow(O.length,-1/3)))},g.thresholdScott=function(O,D,L){return Math.ceil((L-D)/(3.5*p(O)*Math.pow(O.length,-1/3)))},g.thresholdSturges=A,g.max=function(O,D){var L,B,j=O.length,W=-1;if(null==D){for(;++W<j;)if(null!=(L=O[W])&&L>=L)for(B=L;++W<j;)null!=(L=O[W])&&L>B&&(B=L)}else for(;++W<j;)if(null!=(L=D(O[W],W,O))&&L>=L)for(B=L;++W<j;)null!=(L=D(O[W],W,O))&&L>B&&(B=L);return B},g.mean=function(O,D){var L,B=O.length,j=B,W=-1,Y=0;if(null==D)for(;++W<B;)isNaN(L=a(O[W]))?--j:Y+=L;else for(;++W<B;)isNaN(L=a(D(O[W],W,O)))?--j:Y+=L;if(j)return Y/j},g.median=function(O,D){var L,B=O.length,j=-1,W=[];if(null==D)for(;++j<B;)isNaN(L=a(O[j]))||W.push(L);else for(;++j<B;)isNaN(L=a(D(O[j],j,O)))||W.push(L);return E(W.sort(m),.5)},g.merge=function(O){for(var D,L,B,j=O.length,W=-1,Y=0;++W<j;)Y+=O[W].length;for(L=new Array(Y);--j>=0;)for(D=(B=O[j]).length;--D>=0;)L[--Y]=B[D];return L},g.min=I,g.pairs=function(O,D){null==D&&(D=n);for(var L=0,B=O.length-1,j=O[0],W=new Array(B<0?0:B);L<B;)W[L]=D(j,j=O[++L]);return W},g.permute=function(O,D){for(var L=D.length,B=new Array(L);L--;)B[L]=O[D[L]];return B},g.quantile=E,g.range=d,g.scan=function(O,D){if(L=O.length){var L,B,j=0,W=0,Y=O[W];for(null==D&&(D=m);++j<L;)(D(B=O[j],Y)<0||0!==D(Y,Y))&&(Y=B,W=j);return 0===D(Y,Y)?W:void 0}},g.shuffle=function(O,D,L){for(var B,j,W=(null==L?O.length:L)-(D=null==D?0:+D);W;)j=Math.random()*W--|0,B=O[W+D],O[W+D]=O[j+D],O[j+D]=B;return O},g.sum=function(O,D){var L,B=O.length,j=-1,W=0;if(null==D)for(;++j<B;)(L=+O[j])&&(W+=L);else for(;++j<B;)(L=+D(O[j],j,O))&&(W+=L);return W},g.ticks=function(O,D,L){var B,j,W,Y,Q=-1;if(L=+L,(O=+O)==(D=+D)&&L>0)return[O];if((B=D<O)&&(j=O,O=D,D=j),0===(Y=k(O,D,L))||!isFinite(Y))return[];if(Y>0)for(O=Math.ceil(O/Y),D=Math.floor(D/Y),W=new Array(j=Math.ceil(D-O+1));++Q<j;)W[Q]=(O+Q)*Y;else for(O=Math.floor(O*Y),D=Math.ceil(D*Y),W=new Array(j=Math.ceil(O-D+1));++Q<j;)W[Q]=(O-Q)/Y;return B&&W.reverse(),W},g.tickIncrement=k,g.tickStep=M,g.transpose=C,g.variance=t,g.zip=function(){return C(arguments)},Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ae&&void 0!==oe?ae:this.d3=this.d3||{})},{}],108:[function(x,oe,ae){var m;m=function(g){"use strict";function m(){}function w(u,i){var c=new m;if(u instanceof m)u.each(function(o,_){c.set(_,o)});else if(Array.isArray(u)){var f,l=-1,h=u.length;if(null==i)for(;++l<h;)c.set(l,u[l]);else for(;++l<h;)c.set(i(f=u[l],l,u),f)}else if(u)for(var d in u)c.set(d,u[d]);return c}function y(){return{}}function e(u,i,c){u[i]=c}function r(){return w()}function n(u,i,c){u.set(i,c)}function a(){}m.prototype=w.prototype={constructor:m,has:function(u){return"$"+u in this},get:function(u){return this["$"+u]},set:function(u,i){return this["$"+u]=i,this},remove:function(u){var i="$"+u;return i in this&&delete this[i]},clear:function(){for(var u in this)"$"===u[0]&&delete this[u]},keys:function(){var u=[];for(var i in this)"$"===i[0]&&u.push(i.slice(1));return u},values:function(){var u=[];for(var i in this)"$"===i[0]&&u.push(this[i]);return u},entries:function(){var u=[];for(var i in this)"$"===i[0]&&u.push({key:i.slice(1),value:this[i]});return u},size:function(){var u=0;for(var i in this)"$"===i[0]&&++u;return u},empty:function(){for(var u in this)if("$"===u[0])return!1;return!0},each:function(u){for(var i in this)"$"===i[0]&&u(this[i],i.slice(1),this)}};var t=w.prototype;function p(u,i){var c=new a;if(u instanceof a)u.each(function(h){c.add(h)});else if(u){var f=-1,l=u.length;if(null==i)for(;++f<l;)c.add(u[f]);else for(;++f<l;)c.add(i(u[f],f,u))}return c}a.prototype=p.prototype={constructor:a,has:t.has,add:function(u){return this["$"+(u+="")]=u,this},remove:t.remove,clear:t.clear,values:t.keys,size:t.size,empty:t.empty,each:t.each},g.nest=function(){var u,i,c,f=[],l=[];function h(d,o,_,s){if(o>=f.length)return null!=u&&d.sort(u),null!=i?i(d):d;for(var k,M,A,E=-1,I=d.length,C=f[o++],R=w(),O=_();++E<I;)(A=R.get(k=C(M=d[E])+""))?A.push(M):R.set(k,[M]);return R.each(function(D,L){s(O,L,h(D,o,_,s))}),O}return c={object:function(d){return h(d,0,y,e)},map:function(d){return h(d,0,r,n)},entries:function(d){return function o(_,s){if(++s>f.length)return _;var k,M=l[s-1];return null!=i&&s>=f.length?k=_.entries():(k=[],_.each(function(A,E){k.push({key:E,values:o(A,s)})})),null!=M?k.sort(function(A,E){return M(A.key,E.key)}):k}(h(d,0,r,n),0)},key:function(d){return f.push(d),c},sortKeys:function(d){return l[f.length-1]=d,c},sortValues:function(d){return u=d,c},rollup:function(d){return i=d,c}}},g.set=p,g.map=w,g.keys=function(u){var i=[];for(var c in u)i.push(c);return i},g.values=function(u){var i=[];for(var c in u)i.push(u[c]);return i},g.entries=function(u){var i=[];for(var c in u)i.push({key:c,value:u[c]});return i},Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ae&&void 0!==oe?ae:this.d3=this.d3||{})},{}],109:[function(x,oe,ae){var g,m;g=this,m=function(g){"use strict";function m(ve,Te,Pe){ve.prototype=Te.prototype=Pe,Pe.constructor=ve}function w(ve,Te){var Pe=Object.create(ve.prototype);for(var De in Te)Pe[De]=Te[De];return Pe}function y(){}var e="\\s*([+-]?\\d+)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",a=/^#([0-9a-f]{3,8})$/,t=new RegExp("^rgb\\("+[e,e,e]+"\\)$"),p=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),u=new RegExp("^rgba\\("+[e,e,e,r]+"\\)$"),i=new RegExp("^rgba\\("+[n,n,n,r]+"\\)$"),c=new RegExp("^hsl\\("+[r,n,n]+"\\)$"),f=new RegExp("^hsla\\("+[r,n,n,r]+"\\)$"),l={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function h(){return this.rgb().formatHex()}function d(){return this.rgb().formatRgb()}function o(ve){var Te,Pe;return ve=(ve+"").trim().toLowerCase(),(Te=a.exec(ve))?(Pe=Te[1].length,Te=parseInt(Te[1],16),6===Pe?_(Te):3===Pe?new A(Te>>8&15|Te>>4&240,Te>>4&15|240&Te,(15&Te)<<4|15&Te,1):8===Pe?s(Te>>24&255,Te>>16&255,Te>>8&255,(255&Te)/255):4===Pe?s(Te>>12&15|Te>>8&240,Te>>8&15|Te>>4&240,Te>>4&15|240&Te,((15&Te)<<4|15&Te)/255):null):(Te=t.exec(ve))?new A(Te[1],Te[2],Te[3],1):(Te=p.exec(ve))?new A(255*Te[1]/100,255*Te[2]/100,255*Te[3]/100,1):(Te=u.exec(ve))?s(Te[1],Te[2],Te[3],Te[4]):(Te=i.exec(ve))?s(255*Te[1]/100,255*Te[2]/100,255*Te[3]/100,Te[4]):(Te=c.exec(ve))?R(Te[1],Te[2]/100,Te[3]/100,1):(Te=f.exec(ve))?R(Te[1],Te[2]/100,Te[3]/100,Te[4]):l.hasOwnProperty(ve)?_(l[ve]):"transparent"===ve?new A(NaN,NaN,NaN,0):null}function _(ve){return new A(ve>>16&255,ve>>8&255,255&ve,1)}function s(ve,Te,Pe,De){return De<=0&&(ve=Te=Pe=NaN),new A(ve,Te,Pe,De)}function k(ve){return ve instanceof y||(ve=o(ve)),ve?new A((ve=ve.rgb()).r,ve.g,ve.b,ve.opacity):new A}function M(ve,Te,Pe,De){return 1===arguments.length?k(ve):new A(ve,Te,Pe,null==De?1:De)}function A(ve,Te,Pe,De){this.r=+ve,this.g=+Te,this.b=+Pe,this.opacity=+De}function E(){return"#"+C(this.r)+C(this.g)+C(this.b)}function I(){var ve=this.opacity;return(1===(ve=isNaN(ve)?1:Math.max(0,Math.min(1,ve)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===ve?")":", "+ve+")")}function C(ve){return((ve=Math.max(0,Math.min(255,Math.round(ve)||0)))<16?"0":"")+ve.toString(16)}function R(ve,Te,Pe,De){return De<=0?ve=Te=Pe=NaN:Pe<=0||Pe>=1?ve=Te=NaN:Te<=0&&(ve=NaN),new L(ve,Te,Pe,De)}function O(ve){if(ve instanceof L)return new L(ve.h,ve.s,ve.l,ve.opacity);if(ve instanceof y||(ve=o(ve)),!ve)return new L;if(ve instanceof L)return ve;var Te=(ve=ve.rgb()).r/255,Pe=ve.g/255,De=ve.b/255,Fe=Math.min(Te,Pe,De),Ue=Math.max(Te,Pe,De),He=NaN,Ke=Ue-Fe,st=(Ue+Fe)/2;return Ke?(He=Te===Ue?(Pe-De)/Ke+6*(Pe<De):Pe===Ue?(De-Te)/Ke+2:(Te-Pe)/Ke+4,Ke/=st<.5?Ue+Fe:2-Ue-Fe,He*=60):Ke=st>0&&st<1?0:He,new L(He,Ke,st,ve.opacity)}function D(ve,Te,Pe,De){return 1===arguments.length?O(ve):new L(ve,Te,Pe,null==De?1:De)}function L(ve,Te,Pe,De){this.h=+ve,this.s=+Te,this.l=+Pe,this.opacity=+De}function B(ve,Te,Pe){return 255*(ve<60?Te+(Pe-Te)*ve/60:ve<180?Pe:ve<240?Te+(Pe-Te)*(240-ve)/60:Te)}m(y,o,{copy:function(ve){return Object.assign(new this.constructor,this,ve)},displayable:function(){return this.rgb().displayable()},hex:h,formatHex:h,formatHsl:function(){return O(this).formatHsl()},formatRgb:d,toString:d}),m(A,M,w(y,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new A(this.r*ve,this.g*ve,this.b*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new A(this.r*ve,this.g*ve,this.b*ve,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:E,formatHex:E,formatRgb:I,toString:I})),m(L,D,w(y,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new L(this.h,this.s,this.l*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new L(this.h,this.s,this.l*ve,this.opacity)},rgb:function(){var ve=this.h%360+360*(this.h<0),Te=isNaN(ve)||isNaN(this.s)?0:this.s,Pe=this.l,De=Pe+(Pe<.5?Pe:1-Pe)*Te,Fe=2*Pe-De;return new A(B(ve>=240?ve-240:ve+120,Fe,De),B(ve,Fe,De),B(ve<120?ve+240:ve-120,Fe,De),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var ve=this.opacity;return(1===(ve=isNaN(ve)?1:Math.max(0,Math.min(1,ve)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===ve?")":", "+ve+")")}}));var j=Math.PI/180,W=180/Math.PI,Y=6/29,Q=3*Y*Y;function ne(ve){if(ve instanceof $)return new $(ve.l,ve.a,ve.b,ve.opacity);if(ve instanceof ee)return te(ve);ve instanceof A||(ve=k(ve));var Te,Pe,De=G(ve.r),Fe=G(ve.g),Ue=G(ve.b),He=re((.2225045*De+.7168786*Fe+.0606169*Ue)/1);return De===Fe&&Fe===Ue?Te=Pe=He:(Te=re((.4360747*De+.3850649*Fe+.1430804*Ue)/.96422),Pe=re((.0139322*De+.0971045*Fe+.7141733*Ue)/.82521)),new $(116*He-16,500*(Te-He),200*(He-Pe),ve.opacity)}function X(ve,Te,Pe,De){return 1===arguments.length?ne(ve):new $(ve,Te,Pe,null==De?1:De)}function $(ve,Te,Pe,De){this.l=+ve,this.a=+Te,this.b=+Pe,this.opacity=+De}function re(ve){return ve>.008856451679035631?Math.pow(ve,1/3):ve/Q+4/29}function H(ve){return ve>Y?ve*ve*ve:Q*(ve-4/29)}function U(ve){return 255*(ve<=.0031308?12.92*ve:1.055*Math.pow(ve,1/2.4)-.055)}function G(ve){return(ve/=255)<=.04045?ve/12.92:Math.pow((ve+.055)/1.055,2.4)}function ie(ve){if(ve instanceof ee)return new ee(ve.h,ve.c,ve.l,ve.opacity);if(ve instanceof $||(ve=ne(ve)),0===ve.a&&0===ve.b)return new ee(NaN,0<ve.l&&ve.l<100?0:NaN,ve.l,ve.opacity);var Te=Math.atan2(ve.b,ve.a)*W;return new ee(Te<0?Te+360:Te,Math.sqrt(ve.a*ve.a+ve.b*ve.b),ve.l,ve.opacity)}function q(ve,Te,Pe,De){return 1===arguments.length?ie(ve):new ee(ve,Te,Pe,null==De?1:De)}function ee(ve,Te,Pe,De){this.h=+ve,this.c=+Te,this.l=+Pe,this.opacity=+De}function te(ve){if(isNaN(ve.h))return new $(ve.l,0,0,ve.opacity);var Te=ve.h*j;return new $(ve.l,Math.cos(Te)*ve.c,Math.sin(Te)*ve.c,ve.opacity)}m($,X,w(y,{brighter:function(ve){return new $(this.l+18*(null==ve?1:ve),this.a,this.b,this.opacity)},darker:function(ve){return new $(this.l-18*(null==ve?1:ve),this.a,this.b,this.opacity)},rgb:function(){var ve=(this.l+16)/116,Te=isNaN(this.a)?ve:ve+this.a/500,Pe=isNaN(this.b)?ve:ve-this.b/200;return new A(U(3.1338561*(Te=.96422*H(Te))-1.6168667*(ve=1*H(ve))-.4906146*(Pe=.82521*H(Pe))),U(-.9787684*Te+1.9161415*ve+.033454*Pe),U(.0719453*Te-.2289914*ve+1.4052427*Pe),this.opacity)}})),m(ee,q,w(y,{brighter:function(ve){return new ee(this.h,this.c,this.l+18*(null==ve?1:ve),this.opacity)},darker:function(ve){return new ee(this.h,this.c,this.l-18*(null==ve?1:ve),this.opacity)},rgb:function(){return te(this).rgb()}}));var ue=1.78277,de=-.29227,he=-.90649,xe=1.97294,ge=xe*he,_e=xe*ue,Ce=ue*de- -.14861*he;function Le(ve){if(ve instanceof Be)return new Be(ve.h,ve.s,ve.l,ve.opacity);ve instanceof A||(ve=k(ve));var Pe=ve.g/255,De=ve.b/255,Fe=(Ce*De+ge*(ve.r/255)-_e*Pe)/(Ce+ge-_e),Ue=De-Fe,He=(xe*(Pe-Fe)-de*Ue)/he,Ke=Math.sqrt(He*He+Ue*Ue)/(xe*Fe*(1-Fe)),st=Ke?Math.atan2(He,Ue)*W-120:NaN;return new Be(st<0?st+360:st,Ke,Fe,ve.opacity)}function Ie(ve,Te,Pe,De){return 1===arguments.length?Le(ve):new Be(ve,Te,Pe,null==De?1:De)}function Be(ve,Te,Pe,De){this.h=+ve,this.s=+Te,this.l=+Pe,this.opacity=+De}m(Be,Ie,w(y,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new Be(this.h,this.s,this.l*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new Be(this.h,this.s,this.l*ve,this.opacity)},rgb:function(){var ve=isNaN(this.h)?0:(this.h+120)*j,Te=+this.l,Pe=isNaN(this.s)?0:this.s*Te*(1-Te),De=Math.cos(ve),Fe=Math.sin(ve);return new A(255*(Te+Pe*(-.14861*De+ue*Fe)),255*(Te+Pe*(de*De+he*Fe)),255*(Te+Pe*(xe*De)),this.opacity)}})),g.color=o,g.cubehelix=Ie,g.gray=function(ve,Te){return new $(ve,0,0,null==Te?1:Te)},g.hcl=q,g.hsl=D,g.lab=X,g.lch=function(ve,Te,Pe,De){return 1===arguments.length?ie(ve):new ee(Pe,Te,ve,null==De?1:De)},g.rgb=M,Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ae&&void 0!==oe?ae:(g=g||self).d3=g.d3||{})},{}],110:[function(x,oe,ae){var g,m;g=this,m=function(g){"use strict";var m={value:function(){}};function w(){for(var a,t=0,p=arguments.length,u={};t<p;++t){if(!(a=arguments[t]+"")||a in u||/[\s.]/.test(a))throw new Error("illegal type: "+a);u[a]=[]}return new y(u)}function y(a){this._=a}function e(a,t){return a.trim().split(/^|\s+/).map(function(p){var u="",i=p.indexOf(".");if(i>=0&&(u=p.slice(i+1),p=p.slice(0,i)),p&&!t.hasOwnProperty(p))throw new Error("unknown type: "+p);return{type:p,name:u}})}function r(a,t){for(var p,u=0,i=a.length;u<i;++u)if((p=a[u]).name===t)return p.value}function n(a,t,p){for(var u=0,i=a.length;u<i;++u)if(a[u].name===t){a[u]=m,a=a.slice(0,u).concat(a.slice(u+1));break}return null!=p&&a.push({name:t,value:p}),a}y.prototype=w.prototype={constructor:y,on:function(a,t){var p,u=this._,i=e(a+"",u),c=-1,f=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++c<f;)if(p=(a=i[c]).type)u[p]=n(u[p],a.name,t);else if(null==t)for(p in u)u[p]=n(u[p],a.name,null);return this}for(;++c<f;)if((p=(a=i[c]).type)&&(p=r(u[p],a.name)))return p},copy:function(){var a={},t=this._;for(var p in t)a[p]=t[p].slice();return new y(a)},call:function(a,t){if((p=arguments.length-2)>0)for(var p,u,i=new Array(p),c=0;c<p;++c)i[c]=arguments[c+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(c=0,p=(u=this._[a]).length;c<p;++c)u[c].value.apply(t,i)},apply:function(a,t,p){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var u=this._[a],i=0,c=u.length;i<c;++i)u[i].value.apply(t,p)}},g.dispatch=w,Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ae&&void 0!==oe?ae:(g=g||self).d3=g.d3||{})},{}],111:[function(x,oe,ae){var g,m;g=this,m=function(g,m,w,y,e){"use strict";function r(l){return function(){return l}}function n(){return 1e-6*(Math.random()-.5)}function a(l){return l.x+l.vx}function t(l){return l.y+l.vy}function p(l){return l.index}function u(l,h){var d=l.get(h);if(!d)throw new Error("missing: "+h);return d}function i(l){return l.x}function c(l){return l.y}var f=Math.PI*(3-Math.sqrt(5));g.forceCenter=function(l,h){var d;function o(){var _,s,k=d.length,M=0,A=0;for(_=0;_<k;++_)M+=(s=d[_]).x,A+=s.y;for(M=M/k-l,A=A/k-h,_=0;_<k;++_)(s=d[_]).x-=M,s.y-=A}return null==l&&(l=0),null==h&&(h=0),o.initialize=function(_){d=_},o.x=function(_){return arguments.length?(l=+_,o):l},o.y=function(_){return arguments.length?(h=+_,o):h},o},g.forceCollide=function(l){var h,d,o=1,_=1;function s(){for(var A,E,I,C,R,O,D,L=h.length,B=0;B<_;++B)for(E=m.quadtree(h,a,t).visitAfter(k),A=0;A<L;++A)D=(O=d[(I=h[A]).index])*O,C=I.x+I.vx,R=I.y+I.vy,E.visit(j);function j(W,Y,Q,ne,X){var $=W.data,re=W.r,H=O+re;if(!$)return Y>C+H||ne<C-H||Q>R+H||X<R-H;if($.index>I.index){var U=C-$.x-$.vx,G=R-$.y-$.vy,ie=U*U+G*G;ie<H*H&&(0===U&&(ie+=(U=n())*U),0===G&&(ie+=(G=n())*G),ie=(H-(ie=Math.sqrt(ie)))/ie*o,I.vx+=(U*=ie)*(H=(re*=re)/(D+re)),I.vy+=(G*=ie)*H,$.vx-=U*(H=1-H),$.vy-=G*H)}}}function k(A){if(A.data)return A.r=d[A.data.index];for(var E=A.r=0;E<4;++E)A[E]&&A[E].r>A.r&&(A.r=A[E].r)}function M(){if(h){var A,E,I=h.length;for(d=new Array(I),A=0;A<I;++A)d[(E=h[A]).index]=+l(E,A,h)}}return"function"!=typeof l&&(l=r(null==l?1:+l)),s.initialize=function(A){h=A,M()},s.iterations=function(A){return arguments.length?(_=+A,s):_},s.strength=function(A){return arguments.length?(o=+A,s):o},s.radius=function(A){return arguments.length?(l="function"==typeof A?A:r(+A),M(),s):l},s},g.forceLink=function(l){var h,d,o,_,s,k=p,M=function(D){return 1/Math.min(_[D.source.index],_[D.target.index])},A=r(30),E=1;function I(D){for(var L=0,B=l.length;L<E;++L)for(var j,W,Y,Q,ne,X,$,re=0;re<B;++re)W=(j=l[re]).source,Q=(Y=j.target).x+Y.vx-W.x-W.vx||n(),ne=Y.y+Y.vy-W.y-W.vy||n(),Q*=X=((X=Math.sqrt(Q*Q+ne*ne))-d[re])/X*D*h[re],ne*=X,Y.vx-=Q*($=s[re]),Y.vy-=ne*$,W.vx+=Q*($=1-$),W.vy+=ne*$}function C(){if(o){var D,L,B=o.length,j=l.length,W=w.map(o,k);for(D=0,_=new Array(B);D<j;++D)(L=l[D]).index=D,"object"!=typeof L.source&&(L.source=u(W,L.source)),"object"!=typeof L.target&&(L.target=u(W,L.target)),_[L.source.index]=(_[L.source.index]||0)+1,_[L.target.index]=(_[L.target.index]||0)+1;for(D=0,s=new Array(j);D<j;++D)s[D]=_[(L=l[D]).source.index]/(_[L.source.index]+_[L.target.index]);h=new Array(j),R(),d=new Array(j),O()}}function R(){if(o)for(var D=0,L=l.length;D<L;++D)h[D]=+M(l[D],D,l)}function O(){if(o)for(var D=0,L=l.length;D<L;++D)d[D]=+A(l[D],D,l)}return null==l&&(l=[]),I.initialize=function(D){o=D,C()},I.links=function(D){return arguments.length?(l=D,C(),I):l},I.id=function(D){return arguments.length?(k=D,I):k},I.iterations=function(D){return arguments.length?(E=+D,I):E},I.strength=function(D){return arguments.length?(M="function"==typeof D?D:r(+D),R(),I):M},I.distance=function(D){return arguments.length?(A="function"==typeof D?D:r(+D),O(),I):A},I},g.forceManyBody=function(){var l,h,d,o,_=r(-30),s=1,k=1/0,M=.81;function A(R){var O,D=l.length,L=m.quadtree(l,i,c).visitAfter(I);for(d=R,O=0;O<D;++O)h=l[O],L.visit(C)}function E(){if(l){var R,O,D=l.length;for(o=new Array(D),R=0;R<D;++R)o[(O=l[R]).index]=+_(O,R,l)}}function I(R){var O,D,L,B,j,W=0,Y=0;if(R.length){for(L=B=j=0;j<4;++j)(O=R[j])&&(D=Math.abs(O.value))&&(W+=O.value,Y+=D,L+=D*O.x,B+=D*O.y);R.x=L/Y,R.y=B/Y}else{(O=R).x=O.data.x,O.y=O.data.y;do{W+=o[O.data.index]}while(O=O.next)}R.value=W}function C(R,O,D,L){if(!R.value)return!0;var B=R.x-h.x,j=R.y-h.y,W=L-O,Y=B*B+j*j;if(W*W/M<Y)return Y<k&&(0===B&&(Y+=(B=n())*B),0===j&&(Y+=(j=n())*j),Y<s&&(Y=Math.sqrt(s*Y)),h.vx+=B*R.value*d/Y,h.vy+=j*R.value*d/Y),!0;if(!(R.length||Y>=k)){(R.data!==h||R.next)&&(0===B&&(Y+=(B=n())*B),0===j&&(Y+=(j=n())*j),Y<s&&(Y=Math.sqrt(s*Y)));do{R.data!==h&&(h.vx+=B*(W=o[R.data.index]*d/Y),h.vy+=j*W)}while(R=R.next)}}return A.initialize=function(R){l=R,E()},A.strength=function(R){return arguments.length?(_="function"==typeof R?R:r(+R),E(),A):_},A.distanceMin=function(R){return arguments.length?(s=R*R,A):Math.sqrt(s)},A.distanceMax=function(R){return arguments.length?(k=R*R,A):Math.sqrt(k)},A.theta=function(R){return arguments.length?(M=R*R,A):Math.sqrt(M)},A},g.forceRadial=function(l,h,d){var o,_,s,k=r(.1);function M(E){for(var I=0,C=o.length;I<C;++I){var R=o[I],O=R.x-h||1e-6,D=R.y-d||1e-6,L=Math.sqrt(O*O+D*D),B=(s[I]-L)*_[I]*E/L;R.vx+=O*B,R.vy+=D*B}}function A(){if(o){var E,I=o.length;for(_=new Array(I),s=new Array(I),E=0;E<I;++E)s[E]=+l(o[E],E,o),_[E]=isNaN(s[E])?0:+k(o[E],E,o)}}return"function"!=typeof l&&(l=r(+l)),null==h&&(h=0),null==d&&(d=0),M.initialize=function(E){o=E,A()},M.strength=function(E){return arguments.length?(k="function"==typeof E?E:r(+E),A(),M):k},M.radius=function(E){return arguments.length?(l="function"==typeof E?E:r(+E),A(),M):l},M.x=function(E){return arguments.length?(h=+E,M):h},M.y=function(E){return arguments.length?(d=+E,M):d},M},g.forceSimulation=function(l){var h,d=1,o=.001,_=1-Math.pow(o,1/300),s=0,k=.6,M=w.map(),A=e.timer(I),E=y.dispatch("tick","end");function I(){C(),E.call("tick",h),d<o&&(A.stop(),E.call("end",h))}function C(D){var L,B,j=l.length;void 0===D&&(D=1);for(var W=0;W<D;++W)for(d+=(s-d)*_,M.each(function(Y){Y(d)}),L=0;L<j;++L)null==(B=l[L]).fx?B.x+=B.vx*=k:(B.x=B.fx,B.vx=0),null==B.fy?B.y+=B.vy*=k:(B.y=B.fy,B.vy=0);return h}function R(){for(var D,L=0,B=l.length;L<B;++L){if((D=l[L]).index=L,null!=D.fx&&(D.x=D.fx),null!=D.fy&&(D.y=D.fy),isNaN(D.x)||isNaN(D.y)){var j=10*Math.sqrt(L),W=L*f;D.x=j*Math.cos(W),D.y=j*Math.sin(W)}(isNaN(D.vx)||isNaN(D.vy))&&(D.vx=D.vy=0)}}function O(D){return D.initialize&&D.initialize(l),D}return null==l&&(l=[]),R(),h={tick:C,restart:function(){return A.restart(I),h},stop:function(){return A.stop(),h},nodes:function(D){return arguments.length?(l=D,R(),M.each(O),h):l},alpha:function(D){return arguments.length?(d=+D,h):d},alphaMin:function(D){return arguments.length?(o=+D,h):o},alphaDecay:function(D){return arguments.length?(_=+D,h):+_},alphaTarget:function(D){return arguments.length?(s=+D,h):s},velocityDecay:function(D){return arguments.length?(k=1-D,h):1-k},force:function(D,L){return arguments.length>1?(null==L?M.remove(D):M.set(D,O(L)),h):M.get(D)},find:function(D,L,B){var j,W,Y,Q,ne,X=0,$=l.length;for(null==B?B=1/0:B*=B,X=0;X<$;++X)(Y=(j=D-(Q=l[X]).x)*j+(W=L-Q.y)*W)<B&&(ne=Q,B=Y);return ne},on:function(D,L){return arguments.length>1?(E.on(D,L),h):E.on(D)}}},g.forceX=function(l){var h,d,o,_=r(.1);function s(M){for(var A,E=0,I=h.length;E<I;++E)(A=h[E]).vx+=(o[E]-A.x)*d[E]*M}function k(){if(h){var M,A=h.length;for(d=new Array(A),o=new Array(A),M=0;M<A;++M)d[M]=isNaN(o[M]=+l(h[M],M,h))?0:+_(h[M],M,h)}}return"function"!=typeof l&&(l=r(null==l?0:+l)),s.initialize=function(M){h=M,k()},s.strength=function(M){return arguments.length?(_="function"==typeof M?M:r(+M),k(),s):_},s.x=function(M){return arguments.length?(l="function"==typeof M?M:r(+M),k(),s):l},s},g.forceY=function(l){var h,d,o,_=r(.1);function s(M){for(var A,E=0,I=h.length;E<I;++E)(A=h[E]).vy+=(o[E]-A.y)*d[E]*M}function k(){if(h){var M,A=h.length;for(d=new Array(A),o=new Array(A),M=0;M<A;++M)d[M]=isNaN(o[M]=+l(h[M],M,h))?0:+_(h[M],M,h)}}return"function"!=typeof l&&(l=r(null==l?0:+l)),s.initialize=function(M){h=M,k()},s.strength=function(M){return arguments.length?(_="function"==typeof M?M:r(+M),k(),s):_},s.y=function(M){return arguments.length?(l="function"==typeof M?M:r(+M),k(),s):l},s},Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==oe?m(ae,x("d3-quadtree"),x("d3-collection"),x("d3-dispatch"),x("d3-timer")):m(g.d3=g.d3||{},g.d3,g.d3,g.d3,g.d3)},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(x,oe,ae){var g,m;g=this,m=function(g){"use strict";function m(h,d){if((o=(h=d?h.toExponential(d-1):h.toExponential()).indexOf("e"))<0)return null;var o,_=h.slice(0,o);return[_.length>1?_[0]+_.slice(2):_,+h.slice(o+1)]}function w(h){return(h=m(Math.abs(h)))?h[1]:NaN}var y,e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(h){if(!(d=e.exec(h)))throw new Error("invalid format: "+h);var d;return new n({fill:d[1],align:d[2],sign:d[3],symbol:d[4],zero:d[5],width:d[6],comma:d[7],precision:d[8]&&d[8].slice(1),trim:d[9],type:d[10]})}function n(h){this.fill=void 0===h.fill?" ":h.fill+"",this.align=void 0===h.align?">":h.align+"",this.sign=void 0===h.sign?"-":h.sign+"",this.symbol=void 0===h.symbol?"":h.symbol+"",this.zero=!!h.zero,this.width=void 0===h.width?void 0:+h.width,this.comma=!!h.comma,this.precision=void 0===h.precision?void 0:+h.precision,this.trim=!!h.trim,this.type=void 0===h.type?"":h.type+""}function a(h,d){var o=m(h,d);if(!o)return h+"";var _=o[0],s=o[1];return s<0?"0."+new Array(-s).join("0")+_:_.length>s+1?_.slice(0,s+1)+"."+_.slice(s+1):_+new Array(s-_.length+2).join("0")}r.prototype=n.prototype,n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var t={"%":function(h,d){return(100*h).toFixed(d)},b:function(h){return Math.round(h).toString(2)},c:function(h){return h+""},d:function(h){return Math.abs(h=Math.round(h))>=1e21?h.toLocaleString("en").replace(/,/g,""):h.toString(10)},e:function(h,d){return h.toExponential(d)},f:function(h,d){return h.toFixed(d)},g:function(h,d){return h.toPrecision(d)},o:function(h){return Math.round(h).toString(8)},p:function(h,d){return a(100*h,d)},r:a,s:function(h,d){var o=m(h,d);if(!o)return h+"";var _=o[0],s=o[1],k=s-(y=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,M=_.length;return k===M?_:k>M?_+new Array(k-M+1).join("0"):k>0?_.slice(0,k)+"."+_.slice(k):"0."+new Array(1-k).join("0")+m(h,Math.max(0,d+k-1))[0]},X:function(h){return Math.round(h).toString(16).toUpperCase()},x:function(h){return Math.round(h).toString(16)}};function p(h){return h}var u,i=Array.prototype.map,c=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function f(h){var d,o,O,_=void 0===h.grouping||void 0===h.thousands?p:(d=i.call(h.grouping,Number),o=h.thousands+"",function(O,D){for(var L=O.length,B=[],j=0,W=d[0],Y=0;L>0&&W>0&&(Y+W+1>D&&(W=Math.max(1,D-Y)),B.push(O.substring(L-=W,L+W)),!((Y+=W+1)>D));)W=d[j=(j+1)%d.length];return B.reverse().join(o)}),s=void 0===h.currency?"":h.currency[0]+"",k=void 0===h.currency?"":h.currency[1]+"",M=void 0===h.decimal?".":h.decimal+"",A=void 0===h.numerals?p:(O=i.call(h.numerals,String),function(D){return D.replace(/[0-9]/g,function(L){return O[+L]})}),E=void 0===h.percent?"%":h.percent+"",I=void 0===h.minus?"-":h.minus+"",C=void 0===h.nan?"NaN":h.nan+"";function R(O){var D=(O=r(O)).fill,L=O.align,B=O.sign,j=O.symbol,W=O.zero,Y=O.width,Q=O.comma,ne=O.precision,X=O.trim,$=O.type;"n"===$?(Q=!0,$="g"):t[$]||(void 0===ne&&(ne=12),X=!0,$="g"),(W||"0"===D&&"="===L)&&(W=!0,D="0",L="=");var re="$"===j?s:"#"===j&&/[boxX]/.test($)?"0"+$.toLowerCase():"",H="$"===j?k:/[%p]/.test($)?E:"",U=t[$],G=/[defgprs%]/.test($);function ie(q){var ee,te,se,ue=re,de=H;if("c"===$)de=U(q)+de,q="";else{var he=(q=+q)<0||1/q<0;if(q=isNaN(q)?C:U(Math.abs(q),ne),X&&(q=function(_e){e:for(var Ce,Le=_e.length,Ie=1,Be=-1;Ie<Le;++Ie)switch(_e[Ie]){case".":Be=Ce=Ie;break;case"0":0===Be&&(Be=Ie),Ce=Ie;break;default:if(!+_e[Ie])break e;Be>0&&(Be=0)}return Be>0?_e.slice(0,Be)+_e.slice(Ce+1):_e}(q)),he&&0==+q&&"+"!==B&&(he=!1),ue=(he?"("===B?B:I:"-"===B||"("===B?"":B)+ue,de=("s"===$?c[8+y/3]:"")+de+(he&&"("===B?")":""),G)for(ee=-1,te=q.length;++ee<te;)if(48>(se=q.charCodeAt(ee))||se>57){de=(46===se?M+q.slice(ee+1):q.slice(ee))+de,q=q.slice(0,ee);break}}Q&&!W&&(q=_(q,1/0));var xe=ue.length+q.length+de.length,ge=xe<Y?new Array(Y-xe+1).join(D):"";switch(Q&&W&&(q=_(ge+q,ge.length?Y-de.length:1/0),ge=""),L){case"<":q=ue+q+de+ge;break;case"=":q=ue+ge+q+de;break;case"^":q=ge.slice(0,xe=ge.length>>1)+ue+q+de+ge.slice(xe);break;default:q=ge+ue+q+de}return A(q)}return ne=void 0===ne?6:/[gprs]/.test($)?Math.max(1,Math.min(21,ne)):Math.max(0,Math.min(20,ne)),ie.toString=function(){return O+""},ie}return{format:R,formatPrefix:function(O,D){var L=R(((O=r(O)).type="f",O)),B=3*Math.max(-8,Math.min(8,Math.floor(w(D)/3))),j=Math.pow(10,-B),W=c[8+B/3];return function(Y){return L(j*Y)+W}}}}function l(h){return u=f(h),g.format=u.format,g.formatPrefix=u.formatPrefix,u}l({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),g.FormatSpecifier=n,g.formatDefaultLocale=l,g.formatLocale=f,g.formatSpecifier=r,g.precisionFixed=function(h){return Math.max(0,-w(Math.abs(h)))},g.precisionPrefix=function(h,d){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(w(d)/3)))-w(Math.abs(h)))},g.precisionRound=function(h,d){return h=Math.abs(h),d=Math.abs(d)-h,Math.max(0,w(d)-w(h))+1},Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ae&&void 0!==oe?ae:(g="undefined"!=typeof globalThis?globalThis:g||self).d3=g.d3||{})},{}],113:[function(x,oe,ae){var g,m;g=this,m=function(g,m,w){"use strict";var y=Math.abs,e=Math.atan,r=Math.atan2,n=Math.cos,a=Math.exp,t=Math.floor,p=Math.log,u=Math.max,i=Math.min,c=Math.pow,f=Math.round,l=Math.sign||function(We){return We>0?1:We<0?-1:0},h=Math.sin,d=Math.tan,o=1e-6,_=Math.PI,s=_/2,k=_/4,M=Math.SQRT1_2,A=L(2),E=L(_),I=2*_,C=180/_,R=_/180;function O(We){return We>1?s:We<-1?-s:Math.asin(We)}function D(We){return We>1?0:We<-1?_:Math.acos(We)}function L(We){return We>0?Math.sqrt(We):0}function B(We){return(a(We)-a(-We))/2}function j(We){return(a(We)+a(-We))/2}function W(We){var Ge=d(We/2),rt=2*p(n(We/2))/(Ge*Ge);function pt(wt,_t){var Pt=n(wt),on=n(_t),rn=h(_t),tn=on*Pt,yn=-((1-tn?p((1+tn)/2)/(1-tn):-.5)+rt/(1+tn));return[yn*on*h(wt),yn*rn]}return pt.invert=function(wt,_t){var Pt,on=L(wt*wt+_t*_t),rn=-We/2,tn=50;if(!on)return[0,0];do{var yn=rn/2,mn=n(yn),Ln=h(yn),In=Ln/mn,Zn=-p(y(mn));rn-=Pt=(2/In*Zn-rt*In-on)/(-Zn/(Ln*Ln)+1-rt/(2*mn*mn))*(mn<0?.7:1)}while(y(Pt)>o&&--tn>0);var mr=h(rn);return[r(wt*mr,on*n(rn)),O(_t*mr/on)]},pt}function Y(We,Ge){var wt,rt=n(Ge),pt=(wt=D(rt*n(We/=2)))?wt/Math.sin(wt):1;return[2*rt*h(We)*pt,h(Ge)*pt]}function Q(We){var Ge=h(We),rt=n(We),pt=We>=0?1:-1,wt=d(pt*We),_t=(1+Ge-rt)/2;function Pt(on,rn){var tn=n(rn),yn=n(on/=2);return[(1+tn)*h(on),(pt*rn>-r(yn,wt)-.001?0:10*-pt)+_t+h(rn)*rt-(1+tn)*Ge*yn]}return Pt.invert=function(on,rn){var tn=0,yn=0,mn=50;do{var Ln=n(tn),In=h(tn),Zn=n(yn),mr=h(yn),xr=1+Zn,Wr=xr*In-on,Kr=_t+mr*rt-xr*Ge*Ln-rn,ei=xr*Ln/2,Ur=-In*mr,zi=Ge*xr*In/2,Xi=rt*Zn+Ge*Ln*mr,na=Ur*zi-Xi*ei,Ji=(Kr*Ur-Wr*Xi)/na/2,Ta=(Wr*zi-Kr*ei)/na;y(Ta)>2&&(Ta/=2),tn-=Ji,yn-=Ta}while((y(Ji)>o||y(Ta)>o)&&--mn>0);return pt*yn>-r(n(tn),wt)-.001?[2*tn,yn]:null},Pt}function ne(We,Ge){var rt=d(Ge/2),pt=L(1-rt*rt),wt=1+pt*n(We/=2),_t=h(We)*pt/wt,Pt=rt/wt,on=_t*_t,rn=Pt*Pt;return[4/3*_t*(3+on-3*rn),4/3*Pt*(3+3*on-rn)]}Y.invert=function(We,Ge){if(!(We*We+4*Ge*Ge>_*_+o)){var rt=We,pt=Ge,wt=25;do{var _t,Pt=h(rt),on=h(rt/2),rn=n(rt/2),tn=h(pt),yn=n(pt),mn=h(2*pt),Ln=tn*tn,In=yn*yn,Zn=on*on,mr=1-In*rn*rn,xr=mr?D(yn*rn)*L(_t=1/mr):_t=0,Wr=2*xr*yn*on-We,Kr=xr*tn-Ge,ei=_t*(In*Zn+xr*yn*rn*Ln),Ur=_t*(.5*Pt*mn-2*xr*tn*on),zi=.25*_t*(mn*on-xr*tn*In*Pt),Xi=_t*(Ln*rn+xr*Zn*yn),na=Ur*zi-Xi*ei;if(!na)break;var Ji=(Kr*Ur-Wr*Xi)/na,Ta=(Wr*zi-Kr*ei)/na;rt-=Ji,pt-=Ta}while((y(Ji)>o||y(Ta)>o)&&--wt>0);return[rt,pt]}},ne.invert=function(We,Ge){if(Ge*=3/8,!(We*=3/8)&&y(Ge)>1)return null;var tn,rt=1+We*We+Ge*Ge,pt=L((rt-L(rt*rt-4*Ge*Ge))/2),wt=O(pt)/3,_t=pt?(tn=y(Ge/pt),p(tn+L(tn*tn-1))/3):function(tn){return p(tn+L(tn*tn+1))}(y(We))/3,Pt=n(wt),on=j(_t),rn=on*on-Pt*Pt;return[2*l(We)*r(B(_t)*Pt,.25-rn),2*l(Ge)*r(on*h(wt),.25+rn)]};var X=L(8),$=p(1+A);function re(We,Ge){var rt=y(Ge);return rt<k?[We,p(d(k+Ge/2))]:[We*n(rt)*(2*A-1/h(rt)),l(Ge)*(2*A*(rt-k)-p(d(rt/2)))]}function H(We){var Ge=2*_/We;function rt(pt,wt){var _t=m.geoAzimuthalEquidistantRaw(pt,wt);if(y(pt)>s){var Pt=r(_t[1],_t[0]),on=L(_t[0]*_t[0]+_t[1]*_t[1]),rn=Ge*f((Pt-s)/Ge)+s,tn=r(h(Pt-=rn),2-n(Pt));Pt=rn+O(_/on*h(tn))-tn,_t[0]=on*n(Pt),_t[1]=on*h(Pt)}return _t}return rt.invert=function(pt,wt){var _t=L(pt*pt+wt*wt);if(_t>s){var Pt=r(wt,pt),on=Ge*f((Pt-s)/Ge)+s,rn=Pt>on?-1:1,tn=_t*n(on-Pt),yn=1/d(rn*D((tn-_)/L(_*(_-2*tn)+_t*_t)));Pt=on+2*e((yn+rn*L(yn*yn-3))/3),pt=_t*n(Pt),wt=_t*h(Pt)}return m.geoAzimuthalEquidistantRaw.invert(pt,wt)},rt}function U(We,Ge){if(arguments.length<2&&(Ge=We),1===Ge)return m.geoAzimuthalEqualAreaRaw;if(Ge===1/0)return G;function rt(pt,wt){var _t=m.geoAzimuthalEqualAreaRaw(pt/Ge,wt);return _t[0]*=We,_t}return rt.invert=function(pt,wt){var _t=m.geoAzimuthalEqualAreaRaw.invert(pt/We,wt);return _t[0]*=Ge,_t},rt}function G(We,Ge){return[We*n(Ge)/n(Ge/=2),2*h(Ge)]}function ie(We,Ge,rt){var pt,wt,_t,Pt=100;rt=void 0===rt?0:+rt,Ge=+Ge;do{(wt=We(rt))===(_t=We(rt+o))&&(_t=wt+o),rt-=pt=-1*o*(wt-Ge)/(wt-_t)}while(Pt-- >0&&y(pt)>o);return Pt<0?NaN:rt}function q(We,Ge,rt){return void 0===Ge&&(Ge=40),void 0===rt&&(rt=1e-12),function(pt,wt,_t,Pt){var on,rn,tn;_t=void 0===_t?0:+_t,Pt=void 0===Pt?0:+Pt;for(var yn=0;yn<Ge;yn++){var mn=We(_t,Pt),Ln=mn[0]-pt,In=mn[1]-wt;if(y(Ln)<rt&&y(In)<rt)break;var Zn=Ln*Ln+In*In;if(Zn>on)_t-=rn/=2,Pt-=tn/=2;else{on=Zn;var mr=(_t>0?-1:1)*rt,xr=(Pt>0?-1:1)*rt,Wr=We(_t+mr,Pt),Kr=We(_t,Pt+xr),ei=(Wr[0]-mn[0])/mr,Ur=(Wr[1]-mn[1])/mr,zi=(Kr[0]-mn[0])/xr,Xi=(Kr[1]-mn[1])/xr,na=Xi*ei-Ur*zi,Ji=(y(na)<.5?.5:1)/na;if(_t+=rn=(In*zi-Ln*Xi)*Ji,Pt+=tn=(Ln*Ur-In*ei)*Ji,y(rn)<rt&&y(tn)<rt)break}}return[_t,Pt]}}function ee(){var We=U(1.68,2);function Ge(rt,pt){if(rt+pt<-1.4){var wt=(rt-pt+1.6)*(rt+pt+1.4)/8;rt+=wt,pt-=.8*wt*h(pt+_/2)}var _t=We(rt,pt),Pt=(1-n(rt*pt))/12;return _t[1]<0&&(_t[0]*=1+Pt),_t[1]>0&&(_t[1]*=1+Pt/1.5*_t[0]*_t[0]),_t}return Ge.invert=q(Ge),Ge}function te(We,Ge){var rt,pt=We*h(Ge),wt=30;do{Ge-=rt=(Ge+h(Ge)-pt)/(1+n(Ge))}while(y(rt)>o&&--wt>0);return Ge/2}function se(We,Ge,rt){function pt(wt,_t){return[We*wt*n(_t=te(rt,_t)),Ge*h(_t)]}return pt.invert=function(wt,_t){return _t=O(_t/Ge),[wt/(We*n(_t)),O((2*_t+h(2*_t))/rt)]},pt}re.invert=function(We,Ge){if((pt=y(Ge))<$)return[We,2*e(a(Ge))-s];var rt,pt,wt=k,_t=25;do{var Pt=n(wt/2),on=d(wt/2);wt-=rt=(X*(wt-k)-p(on)-pt)/(X-Pt*Pt/(2*on))}while(y(rt)>1e-12&&--_t>0);return[We/(n(wt)*(X-1/h(wt))),l(Ge)*wt]},G.invert=function(We,Ge){var rt=2*O(Ge/2);return[We*n(rt/2)/n(rt),rt]};var ue=se(A/s,A,_),de=2.00276;function xe(We,Ge){var rt=te(_,Ge);return[de*We/(1/n(Ge)+1.11072/n(rt)),(Ge+A*h(rt))/de]}function ge(We){var Ge=0,rt=m.geoProjectionMutator(We),pt=rt(Ge);return pt.parallel=function(wt){return arguments.length?rt(Ge=wt*R):Ge*C},pt}function _e(We,Ge){return[We*n(Ge),Ge]}function Ce(We){if(!We)return _e;var Ge=1/d(We);function rt(pt,wt){var _t=Ge+We-wt,Pt=_t&&pt*n(wt)/_t;return[_t*h(Pt),Ge-_t*n(Pt)]}return rt.invert=function(pt,wt){var _t=L(pt*pt+(wt=Ge-wt)*wt),Pt=Ge+We-_t;return[_t/n(Pt)*r(pt,wt),Pt]},rt}function Le(We){function Ge(rt,pt){var wt=s-pt,_t=wt&&rt*We*h(wt)/wt;return[wt*h(_t)/We,s-wt*n(_t)]}return Ge.invert=function(rt,pt){var wt=rt*We,_t=s-pt,Pt=L(wt*wt+_t*_t),on=r(wt,_t);return[(Pt?Pt/h(Pt):1)*on/We,s-Pt]},Ge}xe.invert=function(We,Ge){var rt,pt,wt=de*Ge,_t=Ge<0?-k:k,Pt=25;do{pt=wt-A*h(_t),_t-=rt=(h(2*_t)+2*_t-_*h(pt))/(2*n(2*_t)+2+_*n(pt)*A*n(_t))}while(y(rt)>o&&--Pt>0);return pt=wt-A*h(_t),[We*(1/n(pt)+1.11072/n(_t))/de,pt]},_e.invert=function(We,Ge){return[We/n(Ge),Ge]};var Ie=se(1,4/_,_);function Be(We,Ge,rt,pt,wt,_t){var Pt,on=n(_t);if(y(We)>1||y(_t)>1)Pt=D(rt*wt+Ge*pt*on);else{var rn=h(We/2),tn=h(_t/2);Pt=2*O(L(rn*rn+Ge*pt*tn*tn))}return y(Pt)>o?[Pt,r(pt*h(_t),Ge*wt-rt*pt*on)]:[0,0]}function ve(We,Ge,rt){return D((We*We+Ge*Ge-rt*rt)/(2*We*Ge))}function Te(We){return We-2*_*t((We+_)/(2*_))}function Pe(We,Ge,rt){for(var pt,wt=[[We[0],We[1],h(We[1]),n(We[1])],[Ge[0],Ge[1],h(Ge[1]),n(Ge[1])],[rt[0],rt[1],h(rt[1]),n(rt[1])]],_t=wt[2],Pt=0;Pt<3;++Pt,_t=pt)_t.v=Be((pt=wt[Pt])[1]-_t[1],_t[3],_t[2],pt[3],pt[2],pt[0]-_t[0]),_t.point=[0,0];var on=ve(wt[0].v[0],wt[2].v[0],wt[1].v[0]),rn=ve(wt[0].v[0],wt[1].v[0],wt[2].v[0]),tn=_-on;wt[2].point[1]=0,wt[0].point[0]=-(wt[1].point[0]=wt[0].v[0]/2);var yn=[wt[2].point[0]=wt[0].point[0]+wt[2].v[0]*n(on),2*(wt[0].point[1]=wt[1].point[1]=wt[2].v[0]*h(on))];return function(mn,Ln){var In,Zn=h(Ln),mr=n(Ln),xr=new Array(3);for(In=0;In<3;++In){var Wr=wt[In];if(xr[In]=Be(Ln-Wr[1],Wr[3],Wr[2],mr,Zn,mn-Wr[0]),!xr[In][0])return Wr.point;xr[In][1]=Te(xr[In][1]-Wr.v[1])}var Kr=yn.slice();for(In=0;In<3;++In){var Ur=ve(wt[In].v[0],xr[In][0],xr[2==In?0:In+1][0]);xr[In][1]<0&&(Ur=-Ur),In?1==In?(Kr[0]-=xr[In][0]*n(Ur=rn-Ur),Kr[1]-=xr[In][0]*h(Ur)):(Kr[0]+=xr[In][0]*n(Ur=tn-Ur),Kr[1]+=xr[In][0]*h(Ur)):(Kr[0]+=xr[In][0]*n(Ur),Kr[1]-=xr[In][0]*h(Ur))}return Kr[0]/=3,Kr[1]/=3,Kr}}function De(We){return We[0]*=R,We[1]*=R,We}function Fe(We,Ge,rt){var pt=m.geoCentroid({type:"MultiPoint",coordinates:[We,Ge,rt]}),wt=[-pt[0],-pt[1]],_t=m.geoRotation(wt),Pt=Pe(De(_t(We)),De(_t(Ge)),De(_t(rt)));Pt.invert=q(Pt);var on=m.geoProjection(Pt).rotate(wt),rn=on.center;return delete on.rotate,on.center=function(tn){return arguments.length?rn(_t(tn)):_t.invert(rn())},on.clipAngle(90)}function Ue(We,Ge){var rt=L(1-h(Ge));return[2/E*We*rt,E*(1-rt)]}function He(We){var Ge=d(We);function rt(pt,wt){return[pt,(pt?pt/h(pt):1)*(h(wt)*n(pt)-Ge*n(wt))]}return rt.invert=Ge?function(pt,wt){pt&&(wt*=h(pt)/pt);var _t=n(pt);return[pt,2*r(L(_t*_t+Ge*Ge-wt*wt)-_t,Ge-wt)]}:function(pt,wt){return[pt,O(pt?wt*d(pt)/pt:wt)]},rt}Ue.invert=function(We,Ge){var rt=(rt=Ge/E-1)*rt;return[rt>0?We*L(_/rt)/2:0,O(1-rt)]};var Ke=L(3);function st(We,Ge){return[Ke*We*(2*n(2*Ge/3)-1)/E,Ke*E*h(Ge/3)]}function Ve(We){var Ge=n(We);function rt(pt,wt){return[pt*Ge,h(wt)/Ge]}return rt.invert=function(pt,wt){return[pt/Ge,O(wt*Ge)]},rt}function $e(We){var Ge=n(We);function rt(pt,wt){return[pt*Ge,(1+Ge)*d(wt/2)]}return rt.invert=function(pt,wt){return[pt/Ge,2*e(wt/(1+Ge))]},rt}function Qe(We,Ge){var rt=L(8/(3*_));return[rt*We*(1-y(Ge)/_),rt*Ge]}function tt(We,Ge){var rt=L(4-3*h(y(Ge)));return[2/L(6*_)*We*rt,l(Ge)*L(2*_/3)*(2-rt)]}function ut(We,Ge){var rt=L(_*(4+_));return[2/rt*We*(1+L(1-4*Ge*Ge/(_*_))),4/rt*Ge]}function xt(We,Ge){var rt=(2+s)*h(Ge);Ge/=2;for(var pt=0,wt=1/0;pt<10&&y(wt)>o;pt++){var _t=n(Ge);Ge-=wt=(Ge+h(Ge)*(_t+2)-rt)/(2*_t*(1+_t))}return[2/L(_*(4+_))*We*(1+n(Ge)),2*L(_/(4+_))*h(Ge)]}function kt(We,Ge){return[We*(1+n(Ge))/L(2+_),2*Ge/L(2+_)]}function Bt(We,Ge){for(var rt=(1+s)*h(Ge),pt=0,wt=1/0;pt<10&&y(wt)>o;pt++)Ge-=wt=(Ge+h(Ge)-rt)/(1+n(Ge));return rt=L(2+_),[We*(1+n(Ge))/rt,2*Ge/rt]}st.invert=function(We,Ge){var rt=3*O(Ge/(Ke*E));return[E*We/(Ke*(2*n(2*rt/3)-1)),rt]},Qe.invert=function(We,Ge){var rt=L(8/(3*_)),pt=Ge/rt;return[We/(rt*(1-y(pt)/_)),pt]},tt.invert=function(We,Ge){var rt=2-y(Ge)/L(2*_/3);return[We*L(6*_)/(2*rt),l(Ge)*O((4-rt*rt)/3)]},ut.invert=function(We,Ge){var rt=L(_*(4+_))/2;return[We*rt/(1+L(1-Ge*Ge*(4+_)/(4*_))),Ge*rt/2]},xt.invert=function(We,Ge){var rt=Ge*L((4+_)/_)/2,pt=O(rt),wt=n(pt);return[We/(2/L(_*(4+_))*(1+wt)),O((pt+rt*(wt+2))/(2+s))]},kt.invert=function(We,Ge){var rt=L(2+_),pt=Ge*rt/2;return[rt*We/(1+n(pt)),pt]},Bt.invert=function(We,Ge){var rt=1+s,pt=L(rt/2);return[2*We*pt/(1+n(Ge*=pt)),O((Ge+h(Ge))/rt)]};var Rt=3+2*A;function ft(We,Ge){var rt=h(We/=2),pt=n(We),wt=L(n(Ge)),_t=n(Ge/=2),Pt=h(Ge)/(_t+A*pt*wt),on=L(2/(1+Pt*Pt)),rn=L((A*_t+(pt+rt)*wt)/(A*_t+(pt-rt)*wt));return[Rt*(on*(rn-1/rn)-2*p(rn)),Rt*(on*Pt*(rn+1/rn)-2*e(Pt))]}ft.invert=function(We,Ge){if(!(rt=ne.invert(We/1.2,1.065*Ge)))return null;var rt,pt=rt[0],wt=rt[1],_t=20;We/=Rt,Ge/=Rt;do{var Pt=pt/2,on=wt/2,rn=h(Pt),tn=n(Pt),yn=h(on),mn=n(on),Ln=n(wt),In=L(Ln),Zn=yn/(mn+A*tn*In),mr=Zn*Zn,xr=L(2/(1+mr)),Wr=(A*mn+(tn+rn)*In)/(A*mn+(tn-rn)*In),Kr=L(Wr),ei=Kr-1/Kr,Ur=Kr+1/Kr,zi=xr*ei-2*p(Kr)-We,Xi=xr*Zn*Ur-2*e(Zn)-Ge,na=yn&&M*In*rn*mr/yn,Ji=(A*tn*mn+In)/(2*(mn+A*tn*In)*(mn+A*tn*In)*In),Ta=-.5*Zn*xr*xr*xr,fo=Ta*na,ao=Ta*Ji,xa=(xa=2*mn+A*In*(tn-rn))*xa*Kr,Ga=(A*tn*mn*In+Ln)/xa,To=-A*rn*yn/(In*xa),qo=ei*fo-2*Ga/Kr+xr*(Ga+Ga/Wr),is=ei*ao-2*To/Kr+xr*(To+To/Wr),ls=Zn*Ur*fo-2*na/(1+mr)+xr*Ur*na+xr*Zn*(Ga-Ga/Wr),us=Zn*Ur*ao-2*Ji/(1+mr)+xr*Ur*Ji+xr*Zn*(To-To/Wr),cs=is*ls-us*qo;if(!cs)break;var ba=(Xi*is-zi*us)/cs,bt=(zi*ls-Xi*qo)/cs;pt-=ba,wt=u(-s,i(s,wt-bt))}while((y(ba)>o||y(bt)>o)&&--_t>0);return y(y(wt)-s)<o?[0,wt]:_t&&[pt,wt]};var lt=n(35*R);function Ft(We,Ge){var rt=d(Ge/2);return[We*lt*L(1-rt*rt),(1+lt)*rt]}function Jt(We,Ge){var rt=Ge/2,pt=n(rt);return[2*We/E*n(Ge)*pt*pt,E*d(rt)]}function ln(We){var Ge=1-We,rt=wt(_,0)[0]-wt(-_,0)[0],pt=L(2*(wt(0,s)[1]-wt(0,-s)[1])/rt);function wt(on,rn){var tn=n(rn),yn=h(rn);return[tn/(Ge+We*tn)*on,Ge*rn+We*yn]}function _t(on,rn){var tn=wt(on,rn);return[tn[0]*pt,tn[1]/pt]}function Pt(on){return _t(0,on)[1]}return _t.invert=function(on,rn){var tn=ie(Pt,rn);return[on/pt*(We+Ge/n(tn)),tn]},_t}function dn(We){return[We[0]/2,O(d(We[1]/2*R))*C]}function cn(We){return[2*We[0],2*e(h(We[1]*R))*C]}function Tn(We,Ge){var rt=2*_/Ge,pt=We*We;function wt(_t,Pt){var on=m.geoAzimuthalEquidistantRaw(_t,Pt),rn=on[0],tn=on[1],yn=rn*rn+tn*tn;if(yn>pt){var mn=L(yn),Ln=r(tn,rn),In=rt*f(Ln/rt),Zn=Ln-In,mr=We*n(Zn),xr=(We*h(Zn)-Zn*h(mr))/(s-mr),Wr=nn(Zn,xr),Kr=(_-We)/Me(Wr,mr,_);rn=mn;var ei,Ur=50;do{rn-=ei=(We+Me(Wr,mr,rn)*Kr-mn)/(Wr(rn)*Kr)}while(y(ei)>o&&--Ur>0);tn=Zn*h(rn),rn<s&&(tn-=xr*(rn-s));var zi=h(In),Xi=n(In);on[0]=rn*Xi-tn*zi,on[1]=rn*zi+tn*Xi}return on}return wt.invert=function(_t,Pt){var on=_t*_t+Pt*Pt;if(on>pt){var rn=L(on),tn=r(Pt,_t),yn=rt*f(tn/rt),mn=tn-yn;_t=rn*n(mn),Pt=rn*h(mn);for(var Ln=_t-s,In=h(_t),Zn=Pt/In,mr=_t<s?1/0:0,xr=10;;){var Wr=We*h(Zn),Kr=We*n(Zn),ei=h(Kr),Ur=s-Kr,zi=(Wr-Zn*ei)/Ur,Xi=nn(Zn,zi);if(y(mr)<1e-12||!--xr)break;Zn-=mr=(Zn*In-zi*Ln-Pt)/(In-2*Ln*(Ur*(Kr+Zn*Wr*n(Kr)-ei)-Wr*(Wr-Zn*ei))/(Ur*Ur))}_t=(rn=We+Me(Xi,Kr,_t)*(_-We)/Me(Xi,Kr,_))*n(tn=yn+Zn),Pt=rn*h(tn)}return m.geoAzimuthalEquidistantRaw.invert(_t,Pt)},wt}function nn(We,Ge){return function(rt){var pt=We*n(rt);return rt<s&&(pt-=Ge),L(1+pt*pt)}}function Me(We,Ge,rt){for(var pt=(rt-Ge)/50,wt=We(Ge)+We(rt),_t=1,Pt=Ge;_t<50;++_t)wt+=2*We(Pt+=pt);return.5*wt*pt}function Ee(We,Ge,rt,pt,wt,_t,Pt,on){function rn(tn,yn){if(!yn)return[We*tn/_,0];var mn=yn*yn,Ln=We+mn*(Ge+mn*(rt+mn*pt)),In=yn*(wt-1+mn*(_t-on+mn*Pt)),Zn=(Ln*Ln+In*In)/(2*In),mr=tn*O(Ln/Zn)/_;return[Zn*h(mr),yn*(1+mn*on)+Zn*(1-n(mr))]}return arguments.length<8&&(on=0),rn.invert=function(tn,yn){var mn,Ln,In=_*tn/We,Zn=yn,mr=50;do{var xr=Zn*Zn,Wr=We+xr*(Ge+xr*(rt+xr*pt)),Kr=Zn*(wt-1+xr*(_t-on+xr*Pt)),ei=Wr*Wr+Kr*Kr,Ur=2*Kr,zi=ei/Ur,Xi=zi*zi,na=O(Wr/zi)/_,Ji=In*na,Ta=Wr*Wr,fo=(2*Ge+xr*(4*rt+6*xr*pt))*Zn,ao=wt+xr*(3*_t+5*xr*Pt),xa=(2*(Wr*fo+Kr*(ao-1))*Ur-ei*(2*(ao-1)))/(Ur*Ur),Ga=n(Ji),To=h(Ji),qo=zi*Ga,is=zi*To,ls=In/_*(1/L(1-Ta/Xi))*(fo*zi-Wr*xa)/Xi,us=is-tn,cs=Zn*(1+xr*on)+zi-qo-yn,ba=xa*To+qo*ls,bt=qo*na,Ht=1+xa-(xa*Ga-is*ls),_n=is*na,Kt=ba*_n-Ht*bt;if(!Kt)break;In-=mn=(cs*ba-us*Ht)/Kt,Zn-=Ln=(us*_n-cs*bt)/Kt}while((y(mn)>o||y(Ln)>o)&&--mr>0);return[In,Zn]},rn}Ft.invert=function(We,Ge){var rt=Ge/(1+lt);return[We&&We/(lt*L(1-rt*rt)),2*e(rt)]},Jt.invert=function(We,Ge){var rt=e(Ge/E),pt=n(rt),wt=2*rt;return[We*E/2/(n(wt)*pt*pt),wt]};var Se=Ee(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),je=Ee(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),qe=Ee(5/6*_,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Je(We,Ge){var rt=We*We,pt=Ge*Ge;return[We*(1-.162388*pt)*(.87-952426e-9*rt*rt),Ge*(1+pt/12)]}Je.invert=function(We,Ge){var rt,pt=We,wt=Ge,_t=50;do{var Pt=wt*wt;wt-=rt=(wt*(1+Pt/12)-Ge)/(1+Pt/4)}while(y(rt)>o&&--_t>0);_t=50,We/=1-.162388*Pt;do{var on=(on=pt*pt)*on;pt-=rt=(pt*(.87-952426e-9*on)-We)/(.87-.00476213*on)}while(y(rt)>o&&--_t>0);return[pt,wt]};var at=Ee(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function it(We){var Ge=We(s,0)[0]-We(-s,0)[0];function rt(pt,wt){var _t=pt>0?-.5:.5,Pt=We(pt+_t*_,wt);return Pt[0]-=_t*Ge,Pt}return We.invert&&(rt.invert=function(pt,wt){var _t=pt>0?-.5:.5,Pt=We.invert(pt+_t*Ge,wt),on=Pt[0]-_t*_;return on<-_?on+=2*_:on>_&&(on-=2*_),Pt[0]=on,Pt}),rt}function yt(We,Ge){var rt=l(We),pt=l(Ge),wt=n(Ge),_t=n(We)*wt,Pt=h(We)*wt,on=h(pt*Ge);We=y(r(Pt,on)),Ge=O(_t),y(We-s)>o&&(We%=s);var rn=function(tn,yn){if(yn===s)return[0,0];var mn,Ln,In=h(yn),Zn=In*In,mr=Zn*Zn,xr=1+mr,Wr=1+3*mr,Kr=1-mr,ei=O(1/L(xr)),Ur=Kr+Zn*xr*ei,zi=(1-In)/Ur,Xi=L(zi),na=zi*xr,Ji=L(na),Ta=Xi*Kr;if(0===tn)return[0,-(Ta+Zn*Ji)];var fo,ao=n(yn),xa=1/ao,Ga=2*In*ao,To=(-Ur*ao-(-3*Zn+ei*Wr)*Ga*(1-In))/(Ur*Ur),qo=-xa*Ga,is=-xa*(Zn*xr*To+zi*Wr*Ga),ls=-2*xa*(Kr*(.5*To/Xi)-2*Zn*Xi*Ga),us=4*tn/_;if(tn>.222*_||yn<_/4&&tn>.175*_){if(mn=(Ta+Zn*L(na*(1+mr)-Ta*Ta))/(1+mr),tn>_/4)return[mn,mn];var cs=mn,ba=.5*mn;mn=.5*(ba+cs),Ln=50;do{var Ht=mn*(ls+qo*L(na-mn*mn))+is*O(mn/Ji)-us;if(!Ht)break;Ht<0?ba=mn:cs=mn,mn=.5*(ba+cs)}while(y(cs-ba)>o&&--Ln>0)}else{mn=o,Ln=25;do{var _n=mn*mn,Kt=L(na-_n),wn=ls+qo*Kt,Yn=mn*wn+is*O(mn/Ji)-us;mn-=fo=Kt?Yn/(wn+(is-qo*_n)/Kt):0}while(y(fo)>o&&--Ln>0)}return[mn,-Ta-Zn*L(na-mn*mn)]}(We>_/4?s-We:We,Ge);return We>_/4&&(on=rn[0],rn[0]=-rn[1],rn[1]=-on),rn[0]*=rt,rn[1]*=-pt,rn}function vt(We,Ge){var rt,pt,wt,_t,Pt,on;if(Ge<o)return[(_t=h(We))-(rt=Ge*(We-_t*(pt=n(We)))/4)*pt,pt+rt*_t,1-Ge*_t*_t/2,We-rt];if(Ge>=1-o)return rt=(1-Ge)/4,wt=1/(pt=j(We)),[(_t=((on=a(2*(on=We)))-1)/(on+1))+rt*((Pt=pt*B(We))-We)/(pt*pt),wt-rt*_t*wt*(Pt-We),wt+rt*_t*wt*(Pt+We),2*e(a(We))-s+rt*(Pt-We)/pt];var rn=[1,0,0,0,0,0,0,0,0],tn=[L(Ge),0,0,0,0,0,0,0,0],yn=0;for(pt=L(1-Ge),Pt=1;y(tn[yn]/rn[yn])>o&&yn<8;)rt=rn[yn++],tn[yn]=(rt-pt)/2,rn[yn]=(rt+pt)/2,pt=L(rt*pt),Pt*=2;wt=Pt*rn[yn]*We;do{wt=(O(_t=tn[yn]*h(pt=wt)/rn[yn])+wt)/2}while(--yn);return[h(wt),_t=n(wt),_t/n(wt-pt),wt]}function Ut(We,Ge){if(!Ge)return We;if(1===Ge)return p(d(We/2+k));for(var rt=1,pt=L(1-Ge),wt=L(Ge),_t=0;y(wt)>o;_t++){if(We%_){var Pt=e(pt*d(We)/rt);Pt<0&&(Pt+=_),We+=Pt+~~(We/_)*_}else We+=We;wt=(rt+pt)/2,pt=L(rt*pt),wt=((rt=wt)-pt)/2}return We/(c(2,_t)*rt)}function Wt(We,Ge){var tn,yn,mn,Ln,In,rt=(A-1)/(A+1),pt=L(1-rt*rt),wt=Ut(s,pt*pt),_t=p(d(_/4+y(Ge)/2)),Pt=a(-1*_t)/L(rt),on=(tn=Pt*n(-1*We),Ln=(yn=Pt*h(-1*We))+1,[.5*((tn>=0?s:-s)-r(In=1-(mn=tn*tn)-yn*yn,2*tn)),-.25*p(In*In+4*mn)+.5*p(Ln*Ln+mn)]),rn=function(tn,yn,mn){var Ln=y(tn),In=B(y(yn));if(Ln){var Zn=1/h(Ln),mr=1/(d(Ln)*d(Ln)),xr=-(mr+mn*(In*In*Zn*Zn)-1+mn),Wr=(-xr+L(xr*xr-(mn-1)*mr*4))/2;return[Ut(e(1/L(Wr)),mn)*l(tn),Ut(e(L((Wr/mr-1)/mn)),1-mn)*l(yn)]}return[0,Ut(e(In),1-mn)*l(yn)]}(on[0],on[1],pt*pt);return[-rn[1],(Ge>=0?1:-1)*(.5*wt-rn[0])]}function gt(We){var Ge=h(We),rt=n(We),pt=At(We);function wt(_t,Pt){var on=pt(_t,Pt);_t=on[0];var rn=h(Pt=on[1]),tn=n(Pt),yn=n(_t),mn=D(Ge*rn+rt*tn*yn),Ln=h(mn),In=y(Ln)>o?mn/Ln:1;return[In*rt*h(_t),(y(_t)>s?In:-In)*(Ge*tn-rt*rn*yn)]}return pt.invert=At(-We),wt.invert=function(_t,Pt){var on=L(_t*_t+Pt*Pt),rn=-h(on),tn=n(on),yn=on*tn,mn=-Pt*rn,Ln=on*Ge,In=L(yn*yn+mn*mn-Ln*Ln),Zn=r(yn*Ln+mn*In,mn*Ln-yn*In),mr=(on>s?-1:1)*r(_t*rn,on*n(Zn)*tn+Pt*h(Zn)*rn);return pt.invert(mr,Zn)},wt}function At(We){var Ge=h(We),rt=n(We);return function(pt,wt){var _t=n(wt),Pt=n(pt)*_t,on=h(pt)*_t,rn=h(wt);return[r(on,Pt*rt-rn*Ge),O(rn*rt+Pt*Ge)]}}yt.invert=function(We,Ge){y(We)>1&&(We=2*l(We)-We),y(Ge)>1&&(Ge=2*l(Ge)-Ge);var rt=l(We),pt=l(Ge),wt=-rt*We,_t=-pt*Ge,Pt=_t/wt<1,on=function(mn,Ln){for(var In=0,Zn=1,mr=.5,xr=50;;){var Wr=mr*mr,Kr=L(mr),ei=O(1/L(1+Wr)),Ur=1-Wr+mr*(1+Wr)*ei,zi=(1-Kr)/Ur,Xi=L(zi),na=zi*(1+Wr),Ji=Xi*(1-Wr),Ta=L(na-mn*mn),fo=Ln+Ji+mr*Ta;if(y(Zn-In)<1e-12||0==--xr||0===fo)break;fo>0?In=mr:Zn=mr,mr=.5*(In+Zn)}if(!xr)return null;var ao=O(Kr),xa=n(ao),Ga=1/xa,To=2*Kr*xa,qo=(-Ur*xa-(-3*mr+ei*(1+3*Wr))*To*(1-Kr))/(Ur*Ur);return[_/4*(mn*(-2*Ga*(.5*qo/Xi*(1-Wr)-2*mr*Xi*To)+-Ga*To*Ta)+-Ga*(mr*(1+Wr)*qo+zi*(1+3*Wr)*To)*O(mn/L(na))),ao]}(Pt?_t:wt,Pt?wt:_t),rn=on[0],tn=on[1],yn=n(tn);return Pt&&(rn=-s-rn),[rt*(r(h(rn)*yn,-h(tn))+_),pt*O(n(rn)*yn)]},Wt.invert=function(We,Ge){var rt,pt,wt,_t,Pt,on,In,Zn,mr,rn=(A-1)/(A+1),tn=L(1-rn*rn),mn=(pt=-We,wt=tn*tn,(rt=.5*Ut(s,tn*tn)-Ge)?(_t=vt(rt,wt),pt?(on=(Pt=vt(pt,1-wt))[1]*Pt[1]+wt*_t[0]*_t[0]*Pt[0]*Pt[0],[[_t[0]*Pt[2]/on,_t[1]*_t[2]*Pt[0]*Pt[1]/on],[_t[1]*Pt[1]/on,-_t[0]*_t[2]*Pt[0]*Pt[2]/on],[_t[2]*Pt[1]*Pt[2]/on,-wt*_t[0]*_t[1]*Pt[0]/on]]):[[_t[0],0],[_t[1],0],[_t[2],0]]):[[0,(Pt=vt(pt,1-wt))[0]/Pt[1]],[1/Pt[1],0],[Pt[2]/Pt[1],0]]),Ln=[((In=mn[0])[0]*(Zn=mn[1])[0]+In[1]*Zn[1])/(mr=Zn[0]*Zn[0]+Zn[1]*Zn[1]),(In[1]*Zn[0]-In[0]*Zn[1])/mr];return[r(Ln[1],Ln[0])/-1,2*e(a(-.5*p(rn*Ln[0]*Ln[0]+rn*Ln[1]*Ln[1])))-s]};var Zt=O(1-1/3)*C,Et=Ve(0);function Ct(We){var Ge=Zt*R,rt=Ue(_,Ge)[0]-Ue(-_,Ge)[0],pt=Et(0,Ge)[1],wt=Ue(0,Ge)[1],_t=E-wt,Pt=I/We,on=4/I,rn=pt+_t*_t*4/I;function tn(yn,mn){var Ln,In=y(mn);if(In>Ge){var Zn=i(We-1,u(0,t((yn+_)/Pt)));(Ln=Ue(yn+=_*(We-1)/We-Zn*Pt,In))[0]=Ln[0]*I/rt-I*(We-1)/(2*We)+Zn*I/We,Ln[1]=pt+4*(Ln[1]-wt)*_t/I,mn<0&&(Ln[1]=-Ln[1])}else Ln=Et(yn,mn);return Ln[0]*=on,Ln[1]/=rn,Ln}return tn.invert=function(yn,mn){yn/=on;var Ln=y(mn*=rn);if(Ln>pt){var In=i(We-1,u(0,t((yn+_)/Pt))),Zn=Ue.invert(yn=(yn+_*(We-1)/We-In*Pt)*rt/I,.25*(Ln-pt)*I/_t+wt);return Zn[0]-=_*(We-1)/We-In*Pt,mn<0&&(Zn[1]=-Zn[1]),Zn}return Et.invert(yn,mn)},tn}function Ne(We,Ge){return[We,1&Ge?90-o:Zt]}function et(We,Ge){return[We,1&Ge?-90+o:-Zt]}function dt(We){return[We[0]*(1-o),We[1]]}function Mt(We){var Ge,rt=1+We,pt=O(h(1/rt)),wt=2*L(_/(Ge=_+4*pt*rt)),_t=.5*wt*(rt+L(We*(2+We))),Pt=We*We,on=rt*rt;function rn(tn,yn){var mn,Ln,In=1-h(yn);if(In&&In<2){var Zn,mr=s-yn,xr=25;do{var Wr=h(mr),Kr=n(mr),ei=pt+r(Wr,rt-Kr),Ur=1+on-2*rt*Kr;mr-=Zn=(mr-Pt*pt-rt*Wr+Ur*ei-.5*In*Ge)/(2*rt*Wr*ei)}while(y(Zn)>1e-12&&--xr>0);mn=wt*L(Ur),Ln=tn*ei/_}else mn=wt*(We+In),Ln=tn*pt/_;return[mn*h(Ln),_t-mn*n(Ln)]}return rn.invert=function(tn,yn){var mn=tn*tn+(yn-=_t)*yn,Ln=(1+on-mn/(wt*wt))/(2*rt),In=D(Ln),Zn=h(In),mr=pt+r(Zn,rt-Ln);return[O(tn/L(mn))*_/mr,O(1-2*(In-Pt*pt-rt*Zn+(1+on-2*rt*Ln)*mr)/Ge)]},rn}function zt(We,Ge){return Ge>-.7109889596207567?((We=ue(We,Ge))[1]+=.0528035274542,We):_e(We,Ge)}function Xt(We,Ge){return y(Ge)>.7109889596207567?((We=ue(We,Ge))[1]-=Ge>0?.0528035274542:-.0528035274542,We):_e(We,Ge)}function un(We,Ge,rt,pt){var wt=L(4*_/(2*rt+(1+We-Ge/2)*h(2*rt)+(We+Ge)/2*h(4*rt)+Ge/2*h(6*rt))),_t=L(pt*h(rt)*L((1+We*n(2*rt)+Ge*n(4*rt))/(1+We+Ge))),Pt=rt*rn(1);function on(mn){return L(1+We*n(2*mn)+Ge*n(4*mn))}function rn(mn){var Ln=mn*rt;return(2*Ln+(1+We-Ge/2)*h(2*Ln)+(We+Ge)/2*h(4*Ln)+Ge/2*h(6*Ln))/rt}function tn(mn){return on(mn)*h(mn)}var yn=function(mn,Ln){var In=rt*ie(rn,Pt*h(Ln)/rt,Ln/_);isNaN(In)&&(In=rt*l(Ln));var Zn=wt*on(In);return[Zn*_t*mn/_*n(In),Zn/_t*h(In)]};return yn.invert=function(mn,Ln){var In=ie(tn,Ln*_t/wt);return[mn*_/(n(In)*wt*_t*on(In)),O(rt*rn(In/rt)/Pt)]},0===rt&&(wt=L(pt/_),(yn=function(mn,Ln){return[mn*wt,h(Ln)/wt]}).invert=function(mn,Ln){return[mn/wt,O(Ln*wt)]}),yn}function kn(We,Ge,rt){function pt(In){return We+(1-We)*c(1-c(In,Ge),1/Ge)}function wt(In){return function Qt(We,Ge,rt,pt,wt){void 0===pt&&(pt=1e-8),void 0===wt&&(wt=20);var _t=We(Ge),Pt=We(.5*(Ge+rt)),on=We(rt);return function rn(tn,yn,mn,Ln,In,Zn,mr,xr,Wr,Kr,ei){if(ei.nanEncountered)return NaN;var Ur,zi,Xi,na,Ji,Ta,fo,ao,xa,Ga;if(zi=tn(yn+.25*(Ur=mn-yn)),Xi=tn(mn-.25*Ur),isNaN(zi))ei.nanEncountered=!0;else{if(!isNaN(Xi))return Ga=((Ta=(na=Ur*(Ln+4*zi+In)/12)+(Ji=Ur*(In+4*Xi+Zn)/12))-mr)/15,Kr>Wr?(ei.maxDepthCount++,Ta+Ga):Math.abs(Ga)<xr?Ta+Ga:(ao=rn(tn,yn,fo=yn+.5*Ur,Ln,zi,In,na,.5*xr,Wr,Kr+1,ei),isNaN(ao)?(ei.nanEncountered=!0,NaN):(xa=rn(tn,fo,mn,In,Xi,Zn,Ji,.5*xr,Wr,Kr+1,ei),isNaN(xa)?(ei.nanEncountered=!0,NaN):ao+xa));ei.nanEncountered=!0}}(We,Ge,rt,_t,Pt,on,(_t+4*Pt+on)*(rt-Ge)/6,pt,wt,1,{maxDepthCount:0,nanEncountered:!1})}(pt,0,In,1e-4)}for(var _t=1/wt(1),on=(1+1e-8)*_t,rn=[],tn=0;tn<=1e3;tn++)rn.push(wt(tn/1e3)*on);function yn(In){var Zn=0,mr=1e3,xr=500;do{rn[xr]>In?mr=xr:Zn=xr,xr=Zn+mr>>1}while(xr>Zn);var Wr=rn[xr+1]-rn[xr];return Wr&&(Wr=(In-rn[xr+1])/Wr),(xr+1+Wr)/1e3}var mn=2*yn(1)/_*_t/rt,Ln=function(In,Zn){var mr=yn(y(h(Zn))),xr=pt(mr)*In;return mr/=mn,[xr,Zn>=0?mr:-mr]};return Ln.invert=function(In,Zn){var mr;return y(Zn*=mn)<1&&(mr=l(Zn)*O(wt(y(Zn))*_t)),[In/pt(y(Zn)),mr]},Ln}function qn(We,Ge){return y(We[0]-Ge[0])<o&&y(We[1]-Ge[1])<o}function gn(We,Ge){for(var rt,pt,wt,_t=-1,Pt=We.length,on=We[0],rn=[];++_t<Pt;){pt=((rt=We[_t])[0]-on[0])/Ge,wt=(rt[1]-on[1])/Ge;for(var tn=0;tn<Ge;++tn)rn.push([on[0]+tn*pt,on[1]+tn*wt]);on=rt}return rn.push(rt),rn}function sn(We){var Ge,rt,wt,_t,on,rn=[],tn=We[0].length;for(on=0;on<tn;++on)rt=(Ge=We[0][on])[0][0],rn.push(gn([[rt+o,Ge[0][1]+o],[rt+o,(wt=Ge[1][1])-o],[(_t=Ge[2][0])-o,wt-o],[_t-o,Ge[2][1]+o]],30));for(on=We[1].length-1;on>=0;--on)rt=(Ge=We[1][on])[0][0],rn.push(gn([[(_t=Ge[2][0])-o,Ge[2][1]-o],[_t-o,(wt=Ge[1][1])+o],[rt+o,wt+o],[rt+o,Ge[0][1]-o]],30));return{type:"Polygon",coordinates:[w.merge(rn)]}}function vn(We,Ge,rt){var pt,wt;function _t(rn,tn){for(var yn=tn<0?-1:1,mn=Ge[+(tn<0)],Ln=0,In=mn.length-1;Ln<In&&rn>mn[Ln][2][0];++Ln);var Zn=We(rn-mn[Ln][1][0],tn);return Zn[0]+=We(mn[Ln][1][0],yn*tn>yn*mn[Ln][0][1]?mn[Ln][0][1]:tn)[0],Zn}rt?_t.invert=rt(_t):We.invert&&(_t.invert=function(rn,tn){for(var yn=wt[+(tn<0)],mn=Ge[+(tn<0)],Ln=0,In=yn.length;Ln<In;++Ln){var Zn=yn[Ln];if(Zn[0][0]<=rn&&rn<Zn[1][0]&&Zn[0][1]<=tn&&tn<Zn[1][1]){var mr=We.invert(rn-We(mn[Ln][1][0],0)[0],tn);return mr[0]+=mn[Ln][1][0],qn(_t(mr[0],mr[1]),[rn,tn])?mr:null}}});var Pt=m.geoProjection(_t),on=Pt.stream;return Pt.stream=function(rn){var tn=Pt.rotate(),yn=on(rn),mn=(Pt.rotate([0,0]),on(rn));return Pt.rotate(tn),yn.sphere=function(){m.geoStream(pt,mn)},yn},Pt.lobes=function(rn){return arguments.length?(pt=sn(rn),Ge=rn.map(function(tn){return tn.map(function(yn){return[[yn[0][0]*R,yn[0][1]*R],[yn[1][0]*R,yn[1][1]*R],[yn[2][0]*R,yn[2][1]*R]]})}),wt=Ge.map(function(tn){return tn.map(function(yn){var mn,Ln=We(yn[0][0],yn[0][1])[0],In=We(yn[2][0],yn[2][1])[0],Zn=We(yn[1][0],yn[0][1])[1],mr=We(yn[1][0],yn[1][1])[1];return Zn>mr&&(mn=Zn,Zn=mr,mr=mn),[[Ln,Zn],[In,mr]]})}),Pt):Ge.map(function(tn){return tn.map(function(yn){return[[yn[0][0]*C,yn[0][1]*C],[yn[1][0]*C,yn[1][1]*C],[yn[2][0]*C,yn[2][1]*C]]})})},null!=Ge&&Pt.lobes(Ge),Pt}zt.invert=function(We,Ge){return Ge>-.7109889596207567?ue.invert(We,Ge-.0528035274542):_e.invert(We,Ge)},Xt.invert=function(We,Ge){return y(Ge)>.7109889596207567?ue.invert(We,Ge+(Ge>0?.0528035274542:-.0528035274542)):_e.invert(We,Ge)};var pn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Mn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Rn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Xn=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],Hn=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],rr=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function er(We,Ge){return[3/I*We*L(_*_/3-Ge*Ge),Ge]}function Ir(We){function Ge(rt,pt){if(y(y(pt)-s)<o)return[0,pt<0?-2:2];var wt=h(pt),_t=c((1+wt)/(1-wt),We/2),Pt=.5*(_t+1/_t)+n(rt*=We);return[2*h(rt)/Pt,(_t-1/_t)/Pt]}return Ge.invert=function(rt,pt){var wt=y(pt);if(y(wt-2)<o)return rt?null:[0,l(pt)*s];if(wt>2)return null;var _t=(rt/=2)*rt,Pt=(pt/=2)*pt,on=2*pt/(1+_t+Pt);return on=c((1+on)/(1-on),1/We),[r(2*rt,1-_t-Pt)/We,O((on-1)/(on+1))]},Ge}er.invert=function(We,Ge){return[I/3*We/L(_*_/3-Ge*Ge),Ge]};var Or=_/A;function ni(We,Ge){return[We*(1+L(n(Ge)))/2,Ge/(n(Ge/2)*n(We/6))]}function Br(We,Ge){var rt=We*We,pt=Ge*Ge;return[We*(.975534+pt*(-.0143059*rt-.119161+-.0547009*pt)),Ge*(1.00384+rt*(.0802894+-.02855*pt+199025e-9*rt)+pt*(.0998909+-.0491032*pt))]}function Dr(We,Ge){return[h(We)/n(Ge),d(Ge)*n(We)]}function Rr(We){var Ge=n(We),rt=d(k+We/2);function pt(wt,_t){var Pt=_t-We,on=y(Pt)<o?wt*Ge:y(on=k+_t/2)<o||y(y(on)-s)<o?0:wt*Pt/p(d(on)/rt);return[on,Pt]}return pt.invert=function(wt,_t){var Pt,on=_t+We;return[y(_t)<o?wt/Ge:y(Pt=k+on/2)<o||y(y(Pt)-s)<o?0:wt*p(d(Pt)/rt)/_t,on]},pt}function yi(We,Ge){return[We,1.25*p(d(k+.4*Ge))]}function $n(We){var Ge=We.length-1;function rt(pt,wt){for(var _t,Pt=n(wt),on=2/(1+Pt*n(pt)),rn=on*Pt*h(pt),tn=on*h(wt),yn=Ge,mn=We[yn],Ln=mn[0],In=mn[1];--yn>=0;)Ln=(mn=We[yn])[0]+rn*(_t=Ln)-tn*In,In=mn[1]+rn*In+tn*_t;return[Ln=rn*(_t=Ln)-tn*In,In=rn*In+tn*_t]}return rt.invert=function(pt,wt){var _t=20,Pt=pt,on=wt;do{for(var rn,tn=Ge,yn=We[tn],mn=yn[0],Ln=yn[1],In=0,Zn=0;--tn>=0;)In=mn+Pt*(rn=In)-on*Zn,Zn=Ln+Pt*Zn+on*rn,mn=(yn=We[tn])[0]+Pt*(rn=mn)-on*Ln,Ln=yn[1]+Pt*Ln+on*rn;var mr,xr,Wr=(In=mn+Pt*(rn=In)-on*Zn)*In+(Zn=Ln+Pt*Zn+on*rn)*Zn;Pt-=mr=((mn=Pt*(rn=mn)-on*Ln-pt)*In+(Ln=Pt*Ln+on*rn-wt)*Zn)/Wr,on-=xr=(Ln*In-mn*Zn)/Wr}while(y(mr)+y(xr)>1e-12&&--_t>0);if(_t){var Kr=L(Pt*Pt+on*on),ei=2*e(.5*Kr),Ur=h(ei);return[r(Pt*Ur,Kr*n(ei)),Kr?O(on*Ur/Kr):0]}},rt}ni.invert=function(We,Ge){var rt=y(We),pt=y(Ge),wt=o,_t=s;pt<Or?_t*=pt/Or:wt+=6*D(Or/pt);for(var Pt=0;Pt<25;Pt++){var on=h(_t),rn=L(n(_t)),tn=h(_t/2),yn=n(_t/2),mn=h(wt/6),Ln=n(wt/6),In=.5*wt*(1+rn)-rt,Zn=_t/(yn*Ln)-pt,mr=rn?-.25*wt*on/rn:0,xr=.5*(1+rn),Wr=(1+.5*_t*tn/yn)/(yn*Ln),Kr=_t/yn*(mn/6)/(Ln*Ln),ei=mr*Kr-Wr*xr,Ur=(In*Kr-Zn*xr)/ei,zi=(Zn*mr-In*Wr)/ei;if(_t-=Ur,wt-=zi,y(Ur)<o&&y(zi)<o)break}return[We<0?-wt:wt,Ge<0?-_t:_t]},Br.invert=function(We,Ge){var rt=l(We)*_,pt=Ge/2,wt=50;do{var _t=rt*rt,Pt=pt*pt,on=rt*pt,rn=rt*(.975534+Pt*(-.0143059*_t-.119161+-.0547009*Pt))-We,tn=pt*(1.00384+_t*(.0802894+-.02855*Pt+199025e-9*_t)+Pt*(.0998909+-.0491032*Pt))-Ge,yn=.975534-Pt*(.119161+3*_t*.0143059+.0547009*Pt),mn=-on*(.238322+.2188036*Pt+.0286118*_t),Ln=on*(.1605788+7961e-7*_t+-.0571*Pt),In=1.00384+_t*(.0802894+199025e-9*_t)+Pt*(3*(.0998909-.02855*_t)-.245516*Pt),Zn=mn*Ln-In*yn,mr=(tn*mn-rn*In)/Zn,xr=(rn*Ln-tn*yn)/Zn;rt-=mr,pt-=xr}while((y(mr)>o||y(xr)>o)&&--wt>0);return wt&&[rt,pt]},Dr.invert=function(We,Ge){var rt=We*We,pt=Ge*Ge+1,wt=rt+pt,_t=We?M*L((wt-L(wt*wt-4*rt))/rt):1/L(pt);return[O(We*_t),l(Ge)*D(_t)]},yi.invert=function(We,Ge){return[We,2.5*e(a(.8*Ge))-.625*_]};var Mr=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],br=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],ar=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],si=[[.9245,0],[0,0],[.01943,0]],ri=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Cr(We,Ge){var rt=m.geoProjection($n(We)).rotate(Ge).clipAngle(90),pt=m.geoRotation(Ge),wt=rt.center;return delete rt.rotate,rt.center=function(_t){return arguments.length?wt(pt(_t)):pt.invert(wt())},rt}var Pr=L(6),vr=L(7);function hn(We,Ge){var rt=O(7*h(Ge)/(3*Pr));return[Pr*We*(2*n(2*rt/3)-1)/vr,9*h(rt/3)/vr]}function Jn(We,Ge){for(var rt,pt=(1+M)*h(Ge),wt=Ge,_t=0;_t<25&&(wt-=rt=(h(wt/2)+h(wt)-pt)/(.5*n(wt/2)+n(wt)),!(y(rt)<o));_t++);return[We*(1+2*n(wt)/n(wt/2))/(3*A),2*L(3)*h(wt/2)/L(2+A)]}function jt(We,Ge){for(var rt,pt=L(6/(4+_)),wt=(1+_/4)*h(Ge),_t=Ge/2,Pt=0;Pt<25&&(_t-=rt=(_t/2+h(_t)-wt)/(.5+n(_t)),!(y(rt)<o));Pt++);return[pt*(.5+n(_t))*We/1.5,pt*_t]}function fn(We,Ge){var rt=Ge*Ge,pt=rt*rt,wt=rt*pt;return[We*(.84719-.13063*rt+wt*wt*(.05494*rt-.04515-.02326*pt+.00331*wt)),Ge*(1.01183+pt*pt*(.01926*rt-.02625-.00396*pt))]}function Sn(We,Ge){return[We*(1+n(Ge))/2,2*(Ge-d(Ge/2))]}hn.invert=function(We,Ge){var rt=3*O(Ge*vr/9);return[We*vr/(Pr*(2*n(2*rt/3)-1)),O(3*h(rt)*Pr/7)]},Jn.invert=function(We,Ge){var rt=Ge*L(2+A)/(2*L(3)),pt=2*O(rt);return[3*A*We/(1+2*n(pt)/n(pt/2)),O((rt+h(pt))/(1+M))]},jt.invert=function(We,Ge){var rt=L(6/(4+_)),pt=Ge/rt;return y(y(pt)-s)<o&&(pt=pt<0?-s:s),[1.5*We/(rt*(.5+n(pt))),O((pt/2+h(pt))/(1+_/4))]},fn.invert=function(We,Ge){var rt,pt,wt,_t,Pt=Ge,on=25;do{Pt-=rt=(Pt*(1.01183+(wt=(pt=Pt*Pt)*pt)*wt*(.01926*pt-.02625-.00396*wt))-Ge)/(1.01183+wt*wt*(.21186*pt-.23625+-.05148*wt))}while(y(rt)>1e-12&&--on>0);return[We/(.84719-.13063*(pt=Pt*Pt)+(_t=pt*(wt=pt*pt))*_t*(.05494*pt-.04515-.02326*wt+.00331*_t)),Pt]},Sn.invert=function(We,Ge){for(var rt=Ge/2,pt=0,wt=1/0;pt<10&&y(wt)>o;++pt){var _t=n(Ge/2);Ge-=wt=(Ge-d(Ge/2)-rt)/(1-.5/(_t*_t))}return[2*We/(1+n(Ge)),Ge]};var Kn=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Wn(We,Ge){var rt=h(Ge),pt=n(Ge),wt=l(We);if(0===We||y(Ge)===s)return[0,Ge];if(0===Ge)return[We,0];if(y(We)===s)return[We*pt,s*rt];var _t=_/(2*We)-2*We/_,Pt=2*Ge/_,on=(1-Pt*Pt)/(rt-Pt),rn=_t*_t,tn=on*on,yn=1+rn/tn,mn=1+tn/rn,Ln=(_t*rt/on-_t/2)/yn,In=(tn*rt/rn+on/2)/mn,Zn=In*In-(tn*rt*rt/rn+on*rt-1)/mn;return[s*(Ln+L(Ln*Ln+pt*pt/yn)*wt),s*(In+L(Zn<0?0:Zn)*l(-Ge*_t)*wt)]}function Pn(We,Ge){var rt=Ge*Ge;return[We,Ge*(1.0148+rt*rt*(.23185+rt*(.02406*rt-.14499)))]}function Un(We,Ge){if(y(Ge)<o)return[We,0];var rt=d(Ge),pt=We*h(Ge);return[h(pt)/rt,Ge+(1-n(pt))/rt]}function On(We,Ge){return[We[0]*Ge[0]+We[1]*Ge[3],We[0]*Ge[1]+We[1]*Ge[4],We[0]*Ge[2]+We[1]*Ge[5]+We[2],We[3]*Ge[0]+We[4]*Ge[3],We[3]*Ge[1]+We[4]*Ge[4],We[3]*Ge[2]+We[4]*Ge[5]+We[5]]}function Fn(We,Ge){return[We[0]-Ge[0],We[1]-Ge[1]]}function Gn(We){return L(We[0]*We[0]+We[1]*We[1])}function or(We,Ge,rt){function pt(Pt,on){var rn,tn=Ge(Pt,on),yn=tn.project([Pt*C,on*C]);return(rn=tn.transform)?[rn[0]*yn[0]+rn[1]*yn[1]+rn[2],-(rn[3]*yn[0]+rn[4]*yn[1]+rn[5])]:(yn[1]=-yn[1],yn)}(function Pt(on,rn){if(on.edges=function(Zn){for(var mr=Zn.length,xr=[],Wr=Zn[mr-1],Kr=0;Kr<mr;++Kr)xr.push([Wr,Wr=Zn[Kr]]);return xr}(on.face),rn.face){var tn=on.shared=function(Zn,mr){for(var xr,Wr,Kr=Zn.length,ei=null,Ur=0;Ur<Kr;++Ur){xr=Zn[Ur];for(var zi=mr.length;--zi>=0;)if(xr[0]===(Wr=mr[zi])[0]&&xr[1]===Wr[1]){if(ei)return[ei,xr];ei=xr}}}(on.face,rn.face),yn=function Cn(We,Ge){var Pt,on,rt=Fn(We[1],We[0]),pt=Fn(Ge[1],Ge[0]),wt=r((Pt=rt)[0]*(on=pt)[1]-Pt[1]*on[0],Pt[0]*on[0]+Pt[1]*on[1]),_t=Gn(rt)/Gn(pt);return On([1,0,We[0][0],0,1,We[0][1]],On([_t,0,0,0,_t,0],On([n(wt),h(wt),0,-h(wt),n(wt),0],[1,0,-Ge[0][0],0,1,-Ge[0][1]])))}(tn.map(rn.project),tn.map(on.project));on.transform=rn.transform?On(rn.transform,yn):yn;for(var mn=rn.edges,Ln=0,In=mn.length;Ln<In;++Ln)sr(tn[0],mn[Ln][1])&&sr(tn[1],mn[Ln][0])&&(mn[Ln]=on),sr(tn[0],mn[Ln][0])&&sr(tn[1],mn[Ln][1])&&(mn[Ln]=on);for(Ln=0,In=(mn=on.edges).length;Ln<In;++Ln)sr(tn[0],mn[Ln][0])&&sr(tn[1],mn[Ln][1])&&(mn[Ln]=rn),sr(tn[0],mn[Ln][1])&&sr(tn[1],mn[Ln][0])&&(mn[Ln]=rn)}else on.transform=rn.transform;return on.children&&on.children.forEach(function(Zn){Pt(Zn,on)}),on})(We,{transform:null}),pr(We)&&(pt.invert=function(Pt,on){var rn=function tn(yn,mn){var ei,Ur,Ln=yn.project.invert,In=yn.transform,Zn=mn;if(In&&(Zn=[(In=[(Ur=1/((ei=In)[0]*ei[4]-ei[1]*ei[3]))*ei[4],-Ur*ei[1],Ur*(ei[1]*ei[5]-ei[2]*ei[4]),-Ur*ei[3],Ur*ei[0],Ur*(ei[2]*ei[3]-ei[0]*ei[5])])[0]*Zn[0]+In[1]*Zn[1]+In[2],In[3]*Zn[0]+In[4]*Zn[1]+In[5]]),Ln&&yn===function(ei){return Ge(ei[0]*R,ei[1]*R)}(mr=Ln(Zn)))return mr;for(var mr,xr=yn.children,Wr=0,Kr=xr&&xr.length;Wr<Kr;++Wr)if(mr=tn(xr[Wr],mn))return mr}(We,[Pt,-on]);return rn&&(rn[0]*=R,rn[1]*=R,rn)});var wt=m.geoProjection(pt),_t=wt.stream;return wt.stream=function(Pt){var on=wt.rotate(),rn=_t(Pt),tn=(wt.rotate([0,0]),_t(Pt));return wt.rotate(on),rn.sphere=function(){tn.polygonStart(),tn.lineStart(),function yn(mn,Ln,In){var Zn,mr,xr=Ln.edges,Wr=xr.length,Kr={type:"MultiPoint",coordinates:Ln.face},ei=Ln.face.filter(function(fo){return 90!==y(fo[1])}),Ur=m.geoBounds({type:"MultiPoint",coordinates:ei}),zi=!1,Xi=-1,na=Ur[1][0]-Ur[0][0],Ji=180===na||360===na?[(Ur[0][0]+Ur[1][0])/2,(Ur[0][1]+Ur[1][1])/2]:m.geoCentroid(Kr);if(In)for(;++Xi<Wr&&xr[Xi]!==In;);++Xi;for(var Ta=0;Ta<Wr;++Ta)mr=xr[(Ta+Xi)%Wr],Array.isArray(mr)?(zi||(mn.point((Zn=m.geoInterpolate(mr[0],Ji)(o))[0],Zn[1]),zi=!0),mn.point((Zn=m.geoInterpolate(mr[1],Ji)(o))[0],Zn[1])):(zi=!1,mr!==In&&yn(mn,mr,Ln))}(tn,We),tn.lineEnd(),tn.polygonEnd()},rn},wt.angle(null==rt?-30:rt*C)}function sr(We,Ge){return We&&Ge&&We[0]===Ge[0]&&We[1]===Ge[1]}function pr(We){return We.project.invert||We.children&&We.children.some(pr)}Wn.invert=function(We,Ge){var rt=(We/=s)*We,pt=rt+(Ge/=s)*Ge,wt=_*_;return[We?(pt-1+L((1-pt)*(1-pt)+4*rt))/(2*We)*s:0,ie(function(_t){return pt*(_*h(_t)-2*_t)*_+4*_t*_t*(Ge-h(_t))+2*_*_t-wt*Ge},0)]},Pn.invert=function(We,Ge){Ge>1.790857183?Ge=1.790857183:Ge<-1.790857183&&(Ge=-1.790857183);var rt,pt=Ge;do{var wt=pt*pt;pt-=rt=(pt*(1.0148+wt*wt*(.23185+wt*(.02406*wt-.14499)))-Ge)/(1.0148+wt*wt*(5*.23185+wt*(.21654*wt-1.01493)))}while(y(rt)>o);return[We,pt]},Un.invert=function(We,Ge){if(y(Ge)<o)return[We,0];var rt,pt=We*We+Ge*Ge,wt=.5*Ge,_t=10;do{var Pt=d(wt),on=1/n(wt),rn=pt-2*Ge*wt+wt*wt;wt-=rt=(Pt*rn+2*(wt-Ge))/(2+rn*on*on+2*(wt-Ge)*Pt)}while(y(rt)>o&&--_t>0);return Pt=d(wt),[(y(Ge)<y(wt+1/Pt)?O(We*Pt):l(Ge)*l(We)*(D(y(We*Pt))+s))/h(wt),wt]};var yr=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Lr=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(We){return We.map(function(Ge){return yr[Ge]})}),zr=2/L(3);function cr(We,Ge){var rt=Ue(We,Ge);return[rt[0]*zr,rt[1]]}function Yr(We,Ge){for(var rt=0,pt=We.length,wt=0;rt<pt;++rt)wt+=We[rt]*Ge[rt];return wt}function Qr(We){return[r(We[1],We[0])*C,O(u(-1,i(1,We[2])))*C]}function ci(We){var Ge=We[0]*R,rt=We[1]*R,pt=n(rt);return[pt*n(Ge),pt*h(Ge),h(rt)]}function Wi(){}function Zi(We,Ge){return{type:"FeatureCollection",features:We.features.map(function(rt){return Nr(rt,Ge)})}}function Nr(We,Ge){return{type:"Feature",id:We.id,properties:We.properties,geometry:hi(We.geometry,Ge)}}function hi(We,Ge){if(!We)return null;if("GeometryCollection"===We.type)return wt=Ge,{type:"GeometryCollection",geometries:We.geometries.map(function(_t){return hi(_t,wt)})};var wt,rt;switch(We.type){case"Point":case"MultiPoint":rt=Ia;break;case"LineString":case"MultiLineString":rt=Po;break;case"Polygon":case"MultiPolygon":case"Sphere":rt=os;break;default:return null}return m.geoStream(We,Ge(rt)),rt.result()}cr.invert=function(We,Ge){return Ue.invert(We/zr,Ge)};var bi=[],ya=[],Ia={point:function(We,Ge){bi.push([We,Ge])},result:function(){var We=bi.length?bi.length<2?{type:"Point",coordinates:bi[0]}:{type:"MultiPoint",coordinates:bi}:null;return bi=[],We}},Po={lineStart:Wi,point:function(We,Ge){bi.push([We,Ge])},lineEnd:function(){bi.length&&(ya.push(bi),bi=[])},result:function(){var We=ya.length?ya.length<2?{type:"LineString",coordinates:ya[0]}:{type:"MultiLineString",coordinates:ya}:null;return ya=[],We}},os={polygonStart:Wi,lineStart:Wi,point:function(We,Ge){bi.push([We,Ge])},lineEnd:function(){var We=bi.length;if(We){do{bi.push(bi[0].slice())}while(++We<4);ya.push(bi),bi=[]}},polygonEnd:Wi,result:function(){if(!ya.length)return null;var We=[],Ge=[];return ya.forEach(function(rt){!function(pt){if((wt=pt.length)<4)return!1;for(var wt,_t=0,Pt=pt[wt-1][1]*pt[0][0]-pt[wt-1][0]*pt[0][1];++_t<wt;)Pt+=pt[_t-1][1]*pt[_t][0]-pt[_t-1][0]*pt[_t][1];return Pt<=0}(rt)?Ge.push(rt):We.push([rt])}),Ge.forEach(function(rt){var pt=rt[0];We.some(function(wt){if(function(_t,Pt){for(var on=Pt[0],rn=Pt[1],tn=!1,yn=0,mn=_t.length,Ln=mn-1;yn<mn;Ln=yn++){var In=_t[yn],Zn=In[0],mr=In[1],xr=_t[Ln],Kr=xr[1];mr>rn^Kr>rn&&on<(xr[0]-Zn)*(rn-mr)/(Kr-mr)+Zn&&(tn=!tn)}return tn}(wt[0],pt))return wt.push(rt),!0})||We.push([rt])}),ya=[],We.length?We.length>1?{type:"MultiPolygon",coordinates:We}:{type:"Polygon",coordinates:We[0]}:null}};function Pa(We){var Ge=We(s,0)[0]-We(-s,0)[0];function rt(pt,wt){var _t=y(pt)<s,Pt=We(_t?pt:pt>0?pt-_:pt+_,wt),on=(Pt[0]-Pt[1])*M,rn=(Pt[0]+Pt[1])*M;if(_t)return[on,rn];var tn=Ge*M,yn=on>0^rn>0?-1:1;return[yn*on-l(rn)*tn,yn*rn-l(on)*tn]}return We.invert&&(rt.invert=function(pt,wt){var _t=(pt+wt)*M,Pt=(wt-pt)*M,on=y(_t)<.5*Ge&&y(Pt)<.5*Ge;if(!on){var rn=Ge*M,tn=_t>0^Pt>0?-1:1,yn=-tn*pt+(Pt>0?1:-1)*rn,mn=-tn*wt+(_t>0?1:-1)*rn;_t=(-yn-mn)*M,Pt=(yn-mn)*M}var Ln=We.invert(_t,Pt);return on||(Ln[0]+=_t>0?_:-_),Ln}),m.geoProjection(rt).rotate([-90,-90,45]).clipAngle(179.999)}function Fa(){return Pa(Wt).scale(111.48)}function oa(We){var Ge=h(We);function rt(pt,wt){var _t=Ge?d(pt*Ge/2)/Ge:pt/2;if(!wt)return[2*_t,-We];var Pt=2*e(_t*h(wt)),on=1/d(wt);return[h(Pt)*on,wt+(1-n(Pt))*on-We]}return rt.invert=function(pt,wt){if(y(wt+=We)<o)return[Ge?2*e(Ge*pt/2)/Ge:pt,0];var _t,Pt=pt*pt+wt*wt,on=0,rn=10;do{var tn=d(on),yn=1/n(on),mn=Pt-2*wt*on+on*on;on-=_t=(tn*mn+2*(on-wt))/(2+mn*yn*yn+2*(on-wt)*tn)}while(y(_t)>o&&--rn>0);var Ln=pt*(tn=d(on)),In=d(y(wt)<y(on+1/tn)?.5*O(Ln):.5*D(Ln)+_/4)/h(on);return[Ge?2*e(Ge*In)/Ge:2*In,on]},rt}var wa=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function vs(We,Ge){var rt,pt=i(18,36*y(Ge)/_),wt=t(pt),_t=pt-wt,Pt=(rt=wa[wt])[0],on=rt[1],rn=(rt=wa[++wt])[0],tn=rt[1],yn=(rt=wa[i(19,++wt)])[0],mn=rt[1];return[We*(rn+_t*(yn-Pt)/2+_t*_t*(yn-2*rn+Pt)/2),(Ge>0?s:-s)*(tn+_t*(mn-on)/2+_t*_t*(mn-2*tn+on)/2)]}function jo(We,Ge){var rt=function(Pt){function on(rn,tn){var yn=n(tn),mn=(Pt-1)/(Pt-yn*n(rn));return[mn*yn*h(rn),mn*h(tn)]}return on.invert=function(rn,tn){var yn=rn*rn+tn*tn,mn=L(yn),Ln=(Pt-L(1-yn*(Pt+1)/(Pt-1)))/((Pt-1)/mn+mn/(Pt-1));return[r(rn*Ln,mn*L(1-Ln*Ln)),mn?O(tn*Ln/mn):0]},on}(We);if(!Ge)return rt;var pt=n(Ge),wt=h(Ge);function _t(Pt,on){var rn=rt(Pt,on),tn=rn[1],yn=tn*wt/(We-1)+pt;return[rn[0]*pt/yn,tn/yn]}return _t.invert=function(Pt,on){var rn=(We-1)/(We-1-on*wt);return rt.invert(rn*Pt,rn*on*pt)},_t}wa.forEach(function(We){We[1]*=1.0144}),vs.invert=function(We,Ge){var rt=Ge/s,pt=90*rt,wt=i(18,y(pt/5)),_t=u(0,t(wt));do{var Pt=wa[_t][1],on=wa[_t+1][1],rn=wa[i(19,_t+2)][1],tn=rn-Pt,yn=rn-2*on+Pt,mn=2*(y(rt)-on)/tn,Ln=yn/tn,In=mn*(1-Ln*mn*(1-2*Ln*mn));if(In>=0||1===_t){pt=(Ge>=0?5:-5)*(In+wt);var Zn,mr=50;do{In=(wt=i(18,y(pt)/5))-(_t=t(wt)),Pt=wa[_t][1],on=wa[_t+1][1],rn=wa[i(19,_t+2)][1],pt-=(Zn=(Ge>=0?s:-s)*(on+In*(rn-Pt)/2+In*In*(rn-2*on+Pt)/2)-Ge)*C}while(y(Zn)>1e-12&&--mr>0);break}}while(--_t>=0);var xr=wa[_t][0],Wr=wa[_t+1][0],Kr=wa[i(19,_t+2)][0];return[We/(Wr+In*(Kr-xr)/2+In*In*(Kr-2*Wr+xr)/2),pt*R]};var Ki=-179.9999,Uo=179.9999,ns=-89.9999;function ss(We){return We.length>0}function Oo(We){return-90===We||90===We?[0,We]:[-180,(Ge=We,Math.floor(1e4*Ge)/1e4)];var Ge}function za(We){var Ge=We[0],rt=We[1],pt=!1;return Ge<=Ki?(Ge=-180,pt=!0):Ge>=Uo&&(Ge=180,pt=!0),rt<=ns?(rt=-90,pt=!0):rt>=89.9999&&(rt=90,pt=!0),pt?[Ge,rt]:We}function Co(We){return We.map(za)}function Cl(We,Ge,rt){for(var pt=0,wt=We.length;pt<wt;++pt){var _t=We[pt].slice();rt.push({index:-1,polygon:Ge,ring:_t});for(var Pt=0,on=_t.length;Pt<on;++Pt){var rn=_t[Pt],tn=rn[0],yn=rn[1];if(tn<=Ki||tn>=Uo||yn<=ns||yn>=89.9999){_t[Pt]=za(rn);for(var mn=Pt+1;mn<on;++mn){var Ln=_t[mn],In=Ln[0],Zn=Ln[1];if(In>Ki&&In<Uo&&Zn>ns&&Zn<89.9999)break}if(mn===Pt+1)continue;if(Pt){var mr={index:-1,polygon:Ge,ring:_t.slice(0,Pt+1)};mr.ring[mr.ring.length-1]=Oo(yn),rt[rt.length-1]=mr}else rt.pop();if(mn>=on)break;rt.push({index:-1,polygon:Ge,ring:_t=_t.slice(mn-1)}),_t[0]=Oo(_t[0][1]),Pt=-1,on=_t.length}}}}function $s(We){var Ge,rt,pt,wt,_t,Pt,on=We.length,rn={},tn={};for(Ge=0;Ge<on;++Ge)(pt=(rt=We[Ge]).ring[0])[0]!==(_t=rt.ring[rt.ring.length-1])[0]||pt[1]!==_t[1]?(rt.index=Ge,rn[pt]=tn[_t]=rt):(rt.polygon.push(rt.ring),We[Ge]=null);for(Ge=0;Ge<on;++Ge)if(rt=We[Ge]){if(wt=tn[pt=rt.ring[0]],Pt=rn[_t=rt.ring[rt.ring.length-1]],delete rn[pt],delete tn[_t],pt[0]===_t[0]&&pt[1]===_t[1]){rt.polygon.push(rt.ring);continue}wt?(delete tn[pt],delete rn[wt.ring[0]],wt.ring.pop(),We[wt.index]=null,rt={index:-1,polygon:wt.polygon,ring:wt.ring.concat(rt.ring)},wt===Pt?rt.polygon.push(rt.ring):(rt.index=on++,We.push(rn[rt.ring[0]]=tn[rt.ring[rt.ring.length-1]]=rt))):Pt?(delete rn[_t],delete tn[Pt.ring[Pt.ring.length-1]],rt.ring.pop(),rt={index:on++,polygon:Pt.polygon,ring:rt.ring.concat(Pt.ring)},We[Pt.index]=null,We.push(rn[rt.ring[0]]=tn[rt.ring[rt.ring.length-1]]=rt)):(rt.ring.push(rt.ring[0]),rt.polygon.push(rt.ring))}}function Oa(We){var Ge={type:"Feature",geometry:ml(We.geometry)};return null!=We.id&&(Ge.id=We.id),null!=We.bbox&&(Ge.bbox=We.bbox),null!=We.properties&&(Ge.properties=We.properties),Ge}function ml(We){if(null==We)return We;var Ge,rt,pt,wt;switch(We.type){case"GeometryCollection":Ge={type:"GeometryCollection",geometries:We.geometries.map(ml)};break;case"Point":Ge={type:"Point",coordinates:za(We.coordinates)};break;case"MultiPoint":case"LineString":Ge={type:We.type,coordinates:Co(We.coordinates)};break;case"MultiLineString":Ge={type:"MultiLineString",coordinates:We.coordinates.map(Co)};break;case"Polygon":var _t=[];Cl(We.coordinates,_t,rt=[]),$s(rt),Ge={type:"Polygon",coordinates:_t};break;case"MultiPolygon":rt=[],pt=-1,wt=We.coordinates.length;for(var Pt=new Array(wt);++pt<wt;)Cl(We.coordinates[pt],Pt[pt]=[],rt);$s(rt),Ge={type:"MultiPolygon",coordinates:Pt.filter(ss)};break;default:return We}return null!=We.bbox&&(Ge.bbox=We.bbox),Ge}function Ks(We,Ge){var rt=d(Ge/2),pt=h(k*rt);return[We*(.74482-.34588*pt*pt),1.70711*rt]}function Dl(We,Ge,rt){var pt=m.geoInterpolate(Ge,rt),wt=pt(.5),_t=m.geoRotation([-wt[0],-wt[1]])(Ge),Pt=pt.distance/2,on=-O(h(_t[1]*R)/h(Pt)),rn=[-wt[0],-wt[1],-(_t[0]>0?_-on:on)*C],tn=m.geoProjection(We(Pt)).rotate(rn),yn=m.geoRotation(rn),mn=tn.center;return delete tn.rotate,tn.center=function(Ln){return arguments.length?mn(yn(Ln)):yn.invert(mn())},tn.clipAngle(90)}function ys(We){var Ge=n(We);function rt(pt,wt){var _t=m.geoGnomonicRaw(pt,wt);return _t[0]*=Ge,_t}return rt.invert=function(pt,wt){return m.geoGnomonicRaw.invert(pt/Ge,wt)},rt}function Ll(We,Ge){return Dl(ys,We,Ge)}function Il(We){if(!(We*=2))return m.geoAzimuthalEquidistantRaw;var Ge=-We/2,rt=-Ge,pt=We*We,wt=d(rt),_t=.5/h(rt);function Pt(on,rn){var tn=D(n(rn)*n(on-Ge)),yn=D(n(rn)*n(on-rt));return[((tn*=tn)-(yn*=yn))/(2*We),(rn<0?-1:1)*L(4*pt*yn-(pt-tn+yn)*(pt-tn+yn))/(2*We)]}return Pt.invert=function(on,rn){var tn,yn,mn=rn*rn,Ln=n(L(mn+(tn=on+Ge)*tn)),In=n(L(mn+(tn=on+rt)*tn));return[r(yn=Ln-In,tn=(Ln+In)*wt),(rn<0?-1:1)*D(L(tn*tn+yn*yn)*_t)]},Pt}function Ja(We,Ge){return Dl(Il,We,Ge)}function uo(We,Ge){if(y(Ge)<o)return[We,0];var rt=y(Ge/s),pt=O(rt);if(y(We)<o||y(y(Ge)-s)<o)return[0,l(Ge)*_*d(pt/2)];var wt=n(pt),_t=y(_/We-We/_)/2,Pt=_t*_t,on=wt/(rt+wt-1),rn=on*(2/rt-1),tn=rn*rn,yn=tn+Pt,mn=on-tn,Ln=Pt+on;return[l(We)*_*(_t*mn+L(Pt*mn*mn-yn*(on*on-tn)))/yn,l(Ge)*_*(rn*Ln-_t*L((Pt+1)*yn-Ln*Ln))/yn]}function co(We,Ge){if(y(Ge)<o)return[We,0];var rt=y(Ge/s),pt=O(rt);if(y(We)<o||y(y(Ge)-s)<o)return[0,l(Ge)*_*d(pt/2)];var wt=n(pt),_t=y(_/We-We/_)/2,Pt=_t*_t,on=wt*(L(1+Pt)-_t*wt)/(1+Pt*rt*rt);return[l(We)*_*on,l(Ge)*_*L(1-on*(2*_t+on))]}function $o(We,Ge){if(y(Ge)<o)return[We,0];var rt=Ge/s,pt=O(rt);if(y(We)<o||y(y(Ge)-s)<o)return[0,_*d(pt/2)];var wt=(_/We-We/_)/2,_t=rt/(1+n(pt));return[_*(l(We)*L(wt*wt+1-_t*_t)-wt),_*_t]}function rs(We,Ge){if(!Ge)return[We,0];var rt=y(Ge);if(!We||rt===s)return[0,Ge];var pt=rt/s,wt=pt*pt,_t=(8*pt-wt*(wt+2)-5)/(2*wt*(pt-1)),Pt=_t*_t,on=pt*_t,rn=wt+Pt+2*on,tn=pt+3*_t,yn=We/s,mn=yn+1/yn,Ln=l(y(We)-s)*L(mn*mn-4),In=Ln*Ln,Zn=(Ln*(rn+Pt-1)+2*L(rn*(wt+Pt*In-1)+(1-wt)*(wt*(tn*tn+4*Pt)+12*on*Pt+4*Pt*Pt)))/(4*rn+In);return[l(We)*s*Zn,l(Ge)*s*L(1+Ln*y(Zn)-Zn*Zn)]}function Vo(We,Ge,rt,pt){var wt=_/3;We=u(We,o),Ge=u(Ge,o),We=i(We,s),Ge=i(Ge,_-o),rt=u(rt,0),rt=i(rt,100-o);var _t=(pt=u(pt,o))/100,Pt=D((rt/100+1)*n(wt))/wt,on=h(We)/h(Pt*s),rn=Ge/_,tn=L(_t*h(We/2)/h(Ge/2));return function(yn,mn,Ln,In,Zn){function mr(xr,Wr){var Kr=Ln*h(In*Wr),ei=L(1-Kr*Kr),Ur=L(2/(1+ei*n(xr*=Zn)));return[yn*ei*Ur*h(xr),mn*Kr*Ur]}return mr.invert=function(xr,Wr){var Kr=xr/yn,ei=Wr/mn,Ur=L(Kr*Kr+ei*ei),zi=2*O(Ur/2);return[r(xr*d(zi),yn*Ur)/Zn,Ur&&O(Wr*h(zi)/(mn*Ln*Ur))/In]},mr}(tn/L(rn*on*Pt),1/(tn*L(rn*on*Pt)),on,Pt,rn)}function Ko(){var We=65*R,Ge=60*R,rt=20,pt=200,wt=m.geoProjectionMutator(Vo),_t=wt(We,Ge,rt,pt);return _t.poleline=function(Pt){return arguments.length?wt(We=+Pt*R,Ge,rt,pt):We*C},_t.parallels=function(Pt){return arguments.length?wt(We,Ge=+Pt*R,rt,pt):Ge*C},_t.inflation=function(Pt){return arguments.length?wt(We,Ge,rt=+Pt,pt):rt},_t.ratio=function(Pt){return arguments.length?wt(We,Ge,rt,pt=+Pt):pt},_t.scale(163.775)}Ks.invert=function(We,Ge){var rt=Ge/1.70711,pt=h(k*rt);return[We/(.74482-.34588*pt*pt),2*e(rt)]},uo.invert=function(We,Ge){if(y(Ge)<o)return[We,0];if(y(We)<o)return[0,s*h(2*e(Ge/_))];var rt=(We/=_)*We,pt=(Ge/=_)*Ge,wt=rt+pt,_t=wt*wt,Pt=-y(Ge)*(1+wt),on=Pt-2*pt+rt,rn=-2*Pt+1+2*pt+_t,tn=pt/rn+(2*on*on*on/(rn*rn*rn)-9*Pt*on/(rn*rn))/27,yn=(Pt-on*on/(3*rn))/rn,mn=2*L(-yn/3),Ln=D(3*tn/(yn*mn))/3;return[_*(wt-1+L(1+2*(rt-pt)+_t))/(2*We),l(Ge)*_*(-mn*n(Ln+_/3)-on/(3*rn))]},co.invert=function(We,Ge){if(!We)return[0,s*h(2*e(Ge/_))];var rt=y(We/_),pt=(1-rt*rt-(Ge/=_)*Ge)/(2*rt),wt=L(pt*pt+1);return[l(We)*_*(wt-pt),l(Ge)*s*h(2*r(L((1-2*pt*rt)*(pt+wt)-rt),L(wt+pt+rt)))]},$o.invert=function(We,Ge){if(!Ge)return[We,0];var rt=Ge/_,pt=(_*_*(1-rt*rt)-We*We)/(2*_*We);return[We?_*(l(We)*L(pt*pt+1)-pt):0,s*h(2*e(rt))]},rs.invert=function(We,Ge){var rt;if(!We||!Ge)return[We,Ge];Ge/=_;var pt=l(We)*We/s,wt=(pt*pt-1+4*Ge*Ge)/y(pt),_t=wt*wt,Pt=2*Ge,on=50;do{var rn=Pt*Pt,tn=(8*Pt-rn*(rn+2)-5)/(2*rn*(Pt-1)),yn=(3*Pt-rn*Pt-10)/(2*rn*Pt),mn=tn*tn,Ln=Pt*tn,In=Pt+tn,Zn=In*In,mr=Pt+3*tn,xr=-2*In*(4*Ln*mn+(1-4*rn+3*rn*rn)*(1+yn)+mn*(14*rn-6-_t+(8*rn-8-2*_t)*yn)+Ln*(12*rn-8+(10*rn-10-_t)*yn)),Wr=L(Zn*(rn+mn*_t-1)+(1-rn)*(rn*(mr*mr+4*mn)+mn*(12*Ln+4*mn)));Pt-=rt=(wt*(Zn+mn-1)+2*Wr-pt*(4*Zn+_t))/(wt*(2*tn*yn+2*In*(1+yn))+xr/Wr-8*In*(wt*(-1+mn+Zn)+2*Wr)*(1+yn)/(_t+4*Zn))}while(rt>o&&--on>0);return[l(We)*(L(wt*wt+4)+wt)*_/4,s*Pt]};var ul=4*_+3*L(3),Ho=2*L(2*_*L(3)/ul),Ms=se(Ho*L(3)/_,Ho,ul/6);function Cs(We,Ge){return[We*L(1-3*Ge*Ge/(_*_)),Ge]}function Qa(We,Ge){var rt=n(Ge),pt=n(We)*rt,wt=1-pt,_t=n(We=r(h(We)*rt,-h(Ge))),Pt=h(We);return[Pt*(rt=L(1-pt*pt))-_t*wt,-_t*rt-Pt*wt]}function Sa(We,Ge){var rt=Y(We,Ge);return[(rt[0]+We/s)/2,(rt[1]+Ge)/2]}Cs.invert=function(We,Ge){return[We/L(1-3*Ge*Ge/(_*_)),Ge]},Qa.invert=function(We,Ge){var rt=(We*We+Ge*Ge)/-2,pt=L(-rt*(2+rt)),wt=Ge*rt+We*pt,_t=We*rt-Ge*pt,Pt=L(_t*_t+wt*wt);return[r(pt*wt,Pt*(1+rt)),Pt?-O(pt*_t/Pt):0]},Sa.invert=function(We,Ge){var rt=We,pt=Ge,wt=25;do{var _t,Pt=n(pt),on=h(pt),rn=h(2*pt),tn=on*on,yn=Pt*Pt,mn=h(rt),Ln=n(rt/2),In=h(rt/2),Zn=In*In,mr=1-yn*Ln*Ln,xr=mr?D(Pt*Ln)*L(_t=1/mr):_t=0,Wr=.5*(2*xr*Pt*In+rt/s)-We,Kr=.5*(xr*on+pt)-Ge,ei=.5*_t*(yn*Zn+xr*Pt*Ln*tn)+.5/s,Ur=_t*(mn*rn/4-xr*on*In),zi=.125*_t*(rn*In-xr*on*yn*mn),Xi=.5*_t*(tn*Ln+xr*Zn*Pt)+.5,na=Ur*zi-Xi*ei,Ji=(Kr*Ur-Wr*Xi)/na,Ta=(Wr*zi-Kr*ei)/na;rt-=Ji,pt-=Ta}while((y(Ji)>o||y(Ta)>o)&&--wt>0);return[rt,pt]},g.geoNaturalEarth=m.geoNaturalEarth1,g.geoNaturalEarthRaw=m.geoNaturalEarth1Raw,g.geoAiry=function(){var We=s,Ge=m.geoProjectionMutator(W),rt=Ge(We);return rt.radius=function(pt){return arguments.length?Ge(We=pt*R):We*C},rt.scale(179.976).clipAngle(147)},g.geoAiryRaw=W,g.geoAitoff=function(){return m.geoProjection(Y).scale(152.63)},g.geoAitoffRaw=Y,g.geoArmadillo=function(){var We=20*R,Ge=We>=0?1:-1,rt=d(Ge*We),pt=m.geoProjectionMutator(Q),wt=pt(We),_t=wt.stream;return wt.parallel=function(Pt){return arguments.length?(rt=d((Ge=(We=Pt*R)>=0?1:-1)*We),pt(We)):We*C},wt.stream=function(Pt){var on=wt.rotate(),rn=_t(Pt),tn=(wt.rotate([0,0]),_t(Pt)),yn=wt.precision();return wt.rotate(on),rn.sphere=function(){tn.polygonStart(),tn.lineStart();for(var mn=-180*Ge;Ge*mn<180;mn+=90*Ge)tn.point(mn,90*Ge);if(We)for(;Ge*(mn-=3*Ge*yn)>=-180;)tn.point(mn,Ge*-r(n(mn*R/2),rt)*C);tn.lineEnd(),tn.polygonEnd()},rn},wt.scale(218.695).center([0,28.0974])},g.geoArmadilloRaw=Q,g.geoAugust=function(){return m.geoProjection(ne).scale(66.1603)},g.geoAugustRaw=ne,g.geoBaker=function(){return m.geoProjection(re).scale(112.314)},g.geoBakerRaw=re,g.geoBerghaus=function(){var We=5,Ge=m.geoProjectionMutator(H),rt=Ge(We),pt=rt.stream,wt=-n(.01*R),_t=h(.01*R);return rt.lobes=function(Pt){return arguments.length?Ge(We=+Pt):We},rt.stream=function(Pt){var on=rt.rotate(),rn=pt(Pt),tn=(rt.rotate([0,0]),pt(Pt));return rt.rotate(on),rn.sphere=function(){tn.polygonStart(),tn.lineStart();for(var yn=0,mn=360/We,Ln=2*_/We,In=90-180/We,Zn=s;yn<We;++yn,In-=mn,Zn-=Ln)tn.point(r(_t*n(Zn),wt)*C,O(_t*h(Zn))*C),In<-90?(tn.point(-90,-180-In-.01),tn.point(-90,-180-In+.01)):(tn.point(90,In+.01),tn.point(90,In-.01));tn.lineEnd(),tn.polygonEnd()},rn},rt.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},g.geoBerghausRaw=H,g.geoBertin1953=function(){return m.geoProjection(ee()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},g.geoBertin1953Raw=ee,g.geoBoggs=function(){return m.geoProjection(xe).scale(160.857)},g.geoBoggsRaw=xe,g.geoBonne=function(){return ge(Ce).scale(123.082).center([0,26.1441]).parallel(45)},g.geoBonneRaw=Ce,g.geoBottomley=function(){var We=.5,Ge=m.geoProjectionMutator(Le),rt=Ge(We);return rt.fraction=function(pt){return arguments.length?Ge(We=+pt):We},rt.scale(158.837)},g.geoBottomleyRaw=Le,g.geoBromley=function(){return m.geoProjection(Ie).scale(152.63)},g.geoBromleyRaw=Ie,g.geoChamberlin=Fe,g.geoChamberlinRaw=Pe,g.geoChamberlinAfrica=function(){return Fe([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},g.geoCollignon=function(){return m.geoProjection(Ue).scale(95.6464).center([0,30])},g.geoCollignonRaw=Ue,g.geoCraig=function(){return ge(He).scale(249.828).clipAngle(90)},g.geoCraigRaw=He,g.geoCraster=function(){return m.geoProjection(st).scale(156.19)},g.geoCrasterRaw=st,g.geoCylindricalEqualArea=function(){return ge(Ve).parallel(38.58).scale(195.044)},g.geoCylindricalEqualAreaRaw=Ve,g.geoCylindricalStereographic=function(){return ge($e).scale(124.75)},g.geoCylindricalStereographicRaw=$e,g.geoEckert1=function(){return m.geoProjection(Qe).scale(165.664)},g.geoEckert1Raw=Qe,g.geoEckert2=function(){return m.geoProjection(tt).scale(165.664)},g.geoEckert2Raw=tt,g.geoEckert3=function(){return m.geoProjection(ut).scale(180.739)},g.geoEckert3Raw=ut,g.geoEckert4=function(){return m.geoProjection(xt).scale(180.739)},g.geoEckert4Raw=xt,g.geoEckert5=function(){return m.geoProjection(kt).scale(173.044)},g.geoEckert5Raw=kt,g.geoEckert6=function(){return m.geoProjection(Bt).scale(173.044)},g.geoEckert6Raw=Bt,g.geoEisenlohr=function(){return m.geoProjection(ft).scale(62.5271)},g.geoEisenlohrRaw=ft,g.geoFahey=function(){return m.geoProjection(Ft).scale(137.152)},g.geoFaheyRaw=Ft,g.geoFoucaut=function(){return m.geoProjection(Jt).scale(135.264)},g.geoFoucautRaw=Jt,g.geoFoucautSinusoidal=function(){var We=.5,Ge=m.geoProjectionMutator(ln),rt=Ge(We);return rt.alpha=function(pt){return arguments.length?Ge(We=+pt):We},rt.scale(168.725)},g.geoFoucautSinusoidalRaw=ln,g.geoGilbert=function(We){null==We&&(We=m.geoOrthographic);var Ge=We(),rt=m.geoEquirectangular().scale(C).precision(0).clipAngle(null).translate([0,0]);function pt(_t){return Ge(dn(_t))}function wt(_t){pt[_t]=function(){return arguments.length?(Ge[_t].apply(Ge,arguments),pt):Ge[_t]()}}return Ge.invert&&(pt.invert=function(_t){return cn(Ge.invert(_t))}),pt.stream=function(_t){var Pt=Ge.stream(_t),on=rt.stream({point:function(rn,tn){Pt.point(rn/2,O(d(-tn/2*R))*C)},lineStart:function(){Pt.lineStart()},lineEnd:function(){Pt.lineEnd()},polygonStart:function(){Pt.polygonStart()},polygonEnd:function(){Pt.polygonEnd()}});return on.sphere=Pt.sphere,on},pt.rotate=function(_t){return arguments.length?(rt.rotate(_t),pt):rt.rotate()},pt.center=function(_t){return arguments.length?(Ge.center(dn(_t)),pt):cn(Ge.center())},wt("angle"),wt("clipAngle"),wt("clipExtent"),wt("fitExtent"),wt("fitHeight"),wt("fitSize"),wt("fitWidth"),wt("scale"),wt("translate"),wt("precision"),pt.scale(249.5)},g.geoGingery=function(){var We=6,Ge=30*R,rt=n(Ge),pt=h(Ge),wt=m.geoProjectionMutator(Tn),_t=wt(Ge,We),Pt=_t.stream,on=-n(.01*R),rn=h(.01*R);return _t.radius=function(tn){return arguments.length?(rt=n(Ge=tn*R),pt=h(Ge),wt(Ge,We)):Ge*C},_t.lobes=function(tn){return arguments.length?wt(Ge,We=+tn):We},_t.stream=function(tn){var yn=_t.rotate(),mn=Pt(tn),Ln=(_t.rotate([0,0]),Pt(tn));return _t.rotate(yn),mn.sphere=function(){Ln.polygonStart(),Ln.lineStart();for(var In=0,Zn=2*_/We,mr=0;In<We;++In,mr-=Zn)Ln.point(r(rn*n(mr),on)*C,O(rn*h(mr))*C),Ln.point(r(pt*n(mr-Zn/2),rt)*C,O(pt*h(mr-Zn/2))*C);Ln.lineEnd(),Ln.polygonEnd()},mn},_t.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},g.geoGingeryRaw=Tn,g.geoGinzburg4=function(){return m.geoProjection(Se).scale(149.995)},g.geoGinzburg4Raw=Se,g.geoGinzburg5=function(){return m.geoProjection(je).scale(153.93)},g.geoGinzburg5Raw=je,g.geoGinzburg6=function(){return m.geoProjection(qe).scale(130.945)},g.geoGinzburg6Raw=qe,g.geoGinzburg8=function(){return m.geoProjection(Je).scale(131.747)},g.geoGinzburg8Raw=Je,g.geoGinzburg9=function(){return m.geoProjection(at).scale(131.087)},g.geoGinzburg9Raw=at,g.geoGringorten=function(){return m.geoProjection(it(yt)).scale(239.75)},g.geoGringortenRaw=yt,g.geoGuyou=function(){return m.geoProjection(it(Wt)).scale(151.496)},g.geoGuyouRaw=Wt,g.geoHammer=function(){var We=2,Ge=m.geoProjectionMutator(U),rt=Ge(We);return rt.coefficient=function(pt){return arguments.length?Ge(We=+pt):We},rt.scale(169.529)},g.geoHammerRaw=U,g.geoHammerRetroazimuthal=function(){var We=0,Ge=m.geoProjectionMutator(gt),rt=Ge(We),pt=rt.rotate,wt=rt.stream,_t=m.geoCircle();return rt.parallel=function(Pt){if(!arguments.length)return We*C;var on=rt.rotate();return Ge(We=Pt*R).rotate(on)},rt.rotate=function(Pt){return arguments.length?(pt.call(rt,[Pt[0],Pt[1]-We*C]),_t.center([-Pt[0],-Pt[1]]),rt):((Pt=pt.call(rt))[1]+=We*C,Pt)},rt.stream=function(Pt){return(Pt=wt(Pt)).sphere=function(){Pt.polygonStart();var on,rn=_t.radius(89.99)().coordinates[0],tn=rn.length-1,yn=-1;for(Pt.lineStart();++yn<tn;)Pt.point((on=rn[yn])[0],on[1]);for(Pt.lineEnd(),tn=(rn=_t.radius(90.01)().coordinates[0]).length-1,Pt.lineStart();--yn>=0;)Pt.point((on=rn[yn])[0],on[1]);Pt.lineEnd(),Pt.polygonEnd()},Pt},rt.scale(79.4187).parallel(45).clipAngle(179.999)},g.geoHammerRetroazimuthalRaw=gt,g.geoHealpix=function(){var We=4,Ge=m.geoProjectionMutator(Ct),rt=Ge(We),pt=rt.stream;return rt.lobes=function(wt){return arguments.length?Ge(We=+wt):We},rt.stream=function(wt){var _t=rt.rotate(),Pt=pt(wt),on=(rt.rotate([0,0]),pt(wt));return rt.rotate(_t),Pt.sphere=function(){var rn,tn;m.geoStream((tn=[].concat(w.range(-180,180+(rn=180/We)/2,rn).map(Ne),w.range(180,-180-rn/2,-rn).map(et)),{type:"Polygon",coordinates:[180===rn?tn.map(dt):tn]}),on)},Pt},rt.scale(239.75)},g.geoHealpixRaw=Ct,g.geoHill=function(){var We=1,Ge=m.geoProjectionMutator(Mt),rt=Ge(We);return rt.ratio=function(pt){return arguments.length?Ge(We=+pt):We},rt.scale(167.774).center([0,18.67])},g.geoHillRaw=Mt,g.geoHomolosine=function(){return m.geoProjection(Xt).scale(152.63)},g.geoHomolosineRaw=Xt,g.geoHufnagel=function(){var We=1,Ge=0,rt=45*R,pt=2,wt=m.geoProjectionMutator(un),_t=wt(We,Ge,rt,pt);return _t.a=function(Pt){return arguments.length?wt(We=+Pt,Ge,rt,pt):We},_t.b=function(Pt){return arguments.length?wt(We,Ge=+Pt,rt,pt):Ge},_t.psiMax=function(Pt){return arguments.length?wt(We,Ge,rt=+Pt*R,pt):rt*C},_t.ratio=function(Pt){return arguments.length?wt(We,Ge,rt,pt=+Pt):pt},_t.scale(180.739)},g.geoHufnagelRaw=un,g.geoHyperelliptical=function(){var We=0,Ge=2.5,rt=1.183136,pt=m.geoProjectionMutator(kn),wt=pt(We,Ge,rt);return wt.alpha=function(_t){return arguments.length?pt(We=+_t,Ge,rt):We},wt.k=function(_t){return arguments.length?pt(We,Ge=+_t,rt):Ge},wt.gamma=function(_t){return arguments.length?pt(We,Ge,rt=+_t):rt},wt.scale(152.63)},g.geoHyperellipticalRaw=kn,g.geoInterrupt=vn,g.geoInterruptedBoggs=function(){return vn(xe,pn).scale(160.857)},g.geoInterruptedHomolosine=function(){return vn(Xt,Mn).scale(152.63)},g.geoInterruptedMollweide=function(){return vn(ue,Rn).scale(169.529)},g.geoInterruptedMollweideHemispheres=function(){return vn(ue,Xn).scale(169.529).rotate([20,0])},g.geoInterruptedSinuMollweide=function(){return vn(zt,Hn,q).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},g.geoInterruptedSinusoidal=function(){return vn(_e,rr).scale(152.63).rotate([-20,0])},g.geoKavrayskiy7=function(){return m.geoProjection(er).scale(158.837)},g.geoKavrayskiy7Raw=er,g.geoLagrange=function(){var We=.5,Ge=m.geoProjectionMutator(Ir),rt=Ge(We);return rt.spacing=function(pt){return arguments.length?Ge(We=+pt):We},rt.scale(124.75)},g.geoLagrangeRaw=Ir,g.geoLarrivee=function(){return m.geoProjection(ni).scale(97.2672)},g.geoLarriveeRaw=ni,g.geoLaskowski=function(){return m.geoProjection(Br).scale(139.98)},g.geoLaskowskiRaw=Br,g.geoLittrow=function(){return m.geoProjection(Dr).scale(144.049).clipAngle(89.999)},g.geoLittrowRaw=Dr,g.geoLoximuthal=function(){return ge(Rr).parallel(40).scale(158.837)},g.geoLoximuthalRaw=Rr,g.geoMiller=function(){return m.geoProjection(yi).scale(108.318)},g.geoMillerRaw=yi,g.geoModifiedStereographic=Cr,g.geoModifiedStereographicRaw=$n,g.geoModifiedStereographicAlaska=function(){return Cr(Mr,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},g.geoModifiedStereographicGs48=function(){return Cr(br,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},g.geoModifiedStereographicGs50=function(){return Cr(ar,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},g.geoModifiedStereographicMiller=function(){return Cr(si,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},g.geoModifiedStereographicLee=function(){return Cr(ri,[165,10]).scale(250).clipAngle(130).center([-165,-10])},g.geoMollweide=function(){return m.geoProjection(ue).scale(169.529)},g.geoMollweideRaw=ue,g.geoMtFlatPolarParabolic=function(){return m.geoProjection(hn).scale(164.859)},g.geoMtFlatPolarParabolicRaw=hn,g.geoMtFlatPolarQuartic=function(){return m.geoProjection(Jn).scale(188.209)},g.geoMtFlatPolarQuarticRaw=Jn,g.geoMtFlatPolarSinusoidal=function(){return m.geoProjection(jt).scale(166.518)},g.geoMtFlatPolarSinusoidalRaw=jt,g.geoNaturalEarth2=function(){return m.geoProjection(fn).scale(175.295)},g.geoNaturalEarth2Raw=fn,g.geoNellHammer=function(){return m.geoProjection(Sn).scale(152.63)},g.geoNellHammerRaw=Sn,g.geoInterruptedQuarticAuthalic=function(){return vn(U(1/0),Kn).rotate([20,0]).scale(152.63)},g.geoNicolosi=function(){return m.geoProjection(Wn).scale(127.267)},g.geoNicolosiRaw=Wn,g.geoPatterson=function(){return m.geoProjection(Pn).scale(139.319)},g.geoPattersonRaw=Pn,g.geoPolyconic=function(){return m.geoProjection(Un).scale(103.74)},g.geoPolyconicRaw=Un,g.geoPolyhedral=or,g.geoPolyhedralButterfly=function(We){We=We||function(rt){var pt=m.geoCentroid({type:"MultiPoint",coordinates:rt});return m.geoGnomonic().scale(1).translate([0,0]).rotate([-pt[0],-pt[1]])};var Ge=Lr.map(function(rt){return{face:rt,project:We(rt)}});return[-1,0,0,1,0,1,4,5].forEach(function(rt,pt){var wt=Ge[rt];wt&&(wt.children||(wt.children=[])).push(Ge[pt])}),or(Ge[0],function(rt,pt){return Ge[rt<-_/2?pt<0?6:4:rt<0?pt<0?2:0:rt<_/2?pt<0?3:1:pt<0?7:5]}).angle(-30).scale(101.858).center([0,45])},g.geoPolyhedralCollignon=function(We){We=We||function(rt){var pt=m.geoCentroid({type:"MultiPoint",coordinates:rt});return m.geoProjection(cr).translate([0,0]).scale(1).rotate(pt[1]>0?[-pt[0],0]:[180-pt[0],180])};var Ge=Lr.map(function(rt){return{face:rt,project:We(rt)}});return[-1,0,0,1,0,1,4,5].forEach(function(rt,pt){var wt=Ge[rt];wt&&(wt.children||(wt.children=[])).push(Ge[pt])}),or(Ge[0],function(rt,pt){return Ge[rt<-_/2?pt<0?6:4:rt<0?pt<0?2:0:rt<_/2?pt<0?3:1:pt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},g.geoPolyhedralWaterman=function(We){We=We||function(_t){var Pt=6===_t.length?m.geoCentroid({type:"MultiPoint",coordinates:_t}):_t[0];return m.geoGnomonic().scale(1).translate([0,0]).rotate([-Pt[0],-Pt[1]])};var Ge=Lr.map(function(_t){for(var Pt,on=_t.map(ci),rn=on.length,tn=on[rn-1],yn=[],mn=0;mn<rn;++mn)yn.push(Qr([.9486832980505138*tn[0]+.31622776601683794*(Pt=on[mn])[0],.9486832980505138*tn[1]+.31622776601683794*Pt[1],.9486832980505138*tn[2]+.31622776601683794*Pt[2]]),Qr([.9486832980505138*Pt[0]+.31622776601683794*tn[0],.9486832980505138*Pt[1]+.31622776601683794*tn[1],.9486832980505138*Pt[2]+.31622776601683794*tn[2]])),tn=Pt;return yn}),rt=[],pt=[-1,0,0,1,0,1,4,5];Ge.forEach(function(_t,Pt){for(var on,rn,tn=Lr[Pt],yn=tn.length,mn=rt[Pt]=[],Ln=0;Ln<yn;++Ln)Ge.push([tn[Ln],_t[(2*Ln+2)%(2*yn)],_t[(2*Ln+1)%(2*yn)]]),pt.push(Pt),mn.push((on=ci(_t[(2*Ln+2)%(2*yn)]),rn=ci(_t[(2*Ln+1)%(2*yn)]),[on[1]*rn[2]-on[2]*rn[1],on[2]*rn[0]-on[0]*rn[2],on[0]*rn[1]-on[1]*rn[0]]))});var wt=Ge.map(function(_t){return{project:We(_t),face:_t}});return pt.forEach(function(_t,Pt){var on=wt[_t];on&&(on.children||(on.children=[])).push(wt[Pt])}),or(wt[0],function(_t,Pt){var on=n(Pt),rn=[on*n(_t),on*h(_t),h(Pt)],tn=_t<-_/2?Pt<0?6:4:_t<0?Pt<0?2:0:_t<_/2?Pt<0?3:1:Pt<0?7:5,yn=rt[tn];return wt[Yr(yn[0],rn)<0?8+3*tn:Yr(yn[1],rn)<0?8+3*tn+1:Yr(yn[2],rn)<0?8+3*tn+2:tn]}).angle(-30).scale(110.625).center([0,45])},g.geoProject=function(We,Ge){var rt,pt=Ge.stream;if(!pt)throw new Error("invalid projection");switch(We&&We.type){case"Feature":rt=Nr;break;case"FeatureCollection":rt=Zi;break;default:rt=hi}return rt(We,pt)},g.geoGringortenQuincuncial=function(){return Pa(yt).scale(176.423)},g.geoPeirceQuincuncial=Fa,g.geoPierceQuincuncial=Fa,g.geoQuantize=function(We,Ge){if(!(0<=(Ge=+Ge)&&Ge<=20))throw new Error("invalid digits");function rt(tn){var yn=tn.length,mn=2,Ln=new Array(yn);for(Ln[0]=+tn[0].toFixed(Ge),Ln[1]=+tn[1].toFixed(Ge);mn<yn;)Ln[mn]=tn[mn],++mn;return Ln}function pt(tn){return tn.map(rt)}function wt(tn){for(var yn=rt(tn[0]),mn=[yn],Ln=1;Ln<tn.length;Ln++){var In=rt(tn[Ln]);(In.length>2||In[0]!=yn[0]||In[1]!=yn[1])&&(mn.push(In),yn=In)}return 1===mn.length&&tn.length>1&&mn.push(rt(tn[tn.length-1])),mn}function _t(tn){return tn.map(wt)}function Pt(tn){if(null==tn)return tn;var yn;switch(tn.type){case"GeometryCollection":yn={type:"GeometryCollection",geometries:tn.geometries.map(Pt)};break;case"Point":yn={type:"Point",coordinates:rt(tn.coordinates)};break;case"MultiPoint":yn={type:tn.type,coordinates:pt(tn.coordinates)};break;case"LineString":yn={type:tn.type,coordinates:wt(tn.coordinates)};break;case"MultiLineString":case"Polygon":yn={type:tn.type,coordinates:_t(tn.coordinates)};break;case"MultiPolygon":yn={type:"MultiPolygon",coordinates:tn.coordinates.map(_t)};break;default:return tn}return null!=tn.bbox&&(yn.bbox=tn.bbox),yn}function on(tn){var yn={type:"Feature",properties:tn.properties,geometry:Pt(tn.geometry)};return null!=tn.id&&(yn.id=tn.id),null!=tn.bbox&&(yn.bbox=tn.bbox),yn}if(null!=We)switch(We.type){case"Feature":return on(We);case"FeatureCollection":var rn={type:"FeatureCollection",features:We.features.map(on)};return null!=We.bbox&&(rn.bbox=We.bbox),rn;default:return Pt(We)}return We},g.geoQuincuncial=Pa,g.geoRectangularPolyconic=function(){return ge(oa).scale(131.215)},g.geoRectangularPolyconicRaw=oa,g.geoRobinson=function(){return m.geoProjection(vs).scale(152.63)},g.geoRobinsonRaw=vs,g.geoSatellite=function(){var We=2,Ge=0,rt=m.geoProjectionMutator(jo),pt=rt(We,Ge);return pt.distance=function(wt){return arguments.length?rt(We=+wt,Ge):We},pt.tilt=function(wt){return arguments.length?rt(We,Ge=wt*R):Ge*C},pt.scale(432.147).clipAngle(D(1/We)*C-1e-6)},g.geoSatelliteRaw=jo,g.geoSinuMollweide=function(){return m.geoProjection(zt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},g.geoSinuMollweideRaw=zt,g.geoSinusoidal=function(){return m.geoProjection(_e).scale(152.63)},g.geoSinusoidalRaw=_e,g.geoStitch=function(We){if(null==We)return We;switch(We.type){case"Feature":return Oa(We);case"FeatureCollection":var Ge={type:"FeatureCollection",features:We.features.map(Oa)};return null!=We.bbox&&(Ge.bbox=We.bbox),Ge;default:return ml(We)}},g.geoTimes=function(){return m.geoProjection(Ks).scale(146.153)},g.geoTimesRaw=Ks,g.geoTwoPointAzimuthal=Ll,g.geoTwoPointAzimuthalRaw=ys,g.geoTwoPointAzimuthalUsa=function(){return Ll([-158,21.5],[-77,39]).clipAngle(60).scale(400)},g.geoTwoPointEquidistant=Ja,g.geoTwoPointEquidistantRaw=Il,g.geoTwoPointEquidistantUsa=function(){return Ja([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},g.geoVanDerGrinten=function(){return m.geoProjection(uo).scale(79.4183)},g.geoVanDerGrintenRaw=uo,g.geoVanDerGrinten2=function(){return m.geoProjection(co).scale(79.4183)},g.geoVanDerGrinten2Raw=co,g.geoVanDerGrinten3=function(){return m.geoProjection($o).scale(79.4183)},g.geoVanDerGrinten3Raw=$o,g.geoVanDerGrinten4=function(){return m.geoProjection(rs).scale(127.16)},g.geoVanDerGrinten4Raw=rs,g.geoWagner=Ko,g.geoWagner7=function(){return Ko().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},g.geoWagnerRaw=Vo,g.geoWagner4=function(){return m.geoProjection(Ms).scale(176.84)},g.geoWagner4Raw=Ms,g.geoWagner6=function(){return m.geoProjection(Cs).scale(152.63)},g.geoWagner6Raw=Cs,g.geoWiechel=function(){return m.geoProjection(Qa).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},g.geoWiechelRaw=Qa,g.geoWinkel3=function(){return m.geoProjection(Sa).scale(158.837)},g.geoWinkel3Raw=Sa,Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==oe?m(ae,x("d3-geo"),x("d3-array")):m(g.d3=g.d3||{},g.d3,g.d3)},{"d3-array":107,"d3-geo":114}],114:[function(x,oe,ae){var g,m;g=this,m=function(g,m){"use strict";function w(){return new y}function y(){this.reset()}y.prototype={constructor:y,reset:function(){this.s=this.t=0},add:function(bt){r(e,bt,this.t),r(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new y;function r(bt,Ht,_n){var Kt=bt.s=Ht+_n,wn=Kt-Ht;bt.t=Ht-(Kt-wn)+(_n-wn)}var n=1e-6,a=Math.PI,t=a/2,p=a/4,u=2*a,i=180/a,c=a/180,f=Math.abs,l=Math.atan,h=Math.atan2,d=Math.cos,o=Math.ceil,_=Math.exp,s=Math.log,k=Math.pow,M=Math.sin,A=Math.sign||function(bt){return bt>0?1:bt<0?-1:0},E=Math.sqrt,I=Math.tan;function C(bt){return bt>1?0:bt<-1?a:Math.acos(bt)}function R(bt){return bt>1?t:bt<-1?-t:Math.asin(bt)}function O(bt){return(bt=M(bt/2))*bt}function D(){}function L(bt,Ht){bt&&j.hasOwnProperty(bt.type)&&j[bt.type](bt,Ht)}var B={Feature:function(bt,Ht){L(bt.geometry,Ht)},FeatureCollection:function(bt,Ht){for(var _n=bt.features,Kt=-1,wn=_n.length;++Kt<wn;)L(_n[Kt].geometry,Ht)}},j={Sphere:function(bt,Ht){Ht.sphere()},Point:function(bt,Ht){Ht.point((bt=bt.coordinates)[0],bt[1],bt[2])},MultiPoint:function(bt,Ht){for(var _n=bt.coordinates,Kt=-1,wn=_n.length;++Kt<wn;)Ht.point((bt=_n[Kt])[0],bt[1],bt[2])},LineString:function(bt,Ht){W(bt.coordinates,Ht,0)},MultiLineString:function(bt,Ht){for(var _n=bt.coordinates,Kt=-1,wn=_n.length;++Kt<wn;)W(_n[Kt],Ht,0)},Polygon:function(bt,Ht){Y(bt.coordinates,Ht)},MultiPolygon:function(bt,Ht){for(var _n=bt.coordinates,Kt=-1,wn=_n.length;++Kt<wn;)Y(_n[Kt],Ht)},GeometryCollection:function(bt,Ht){for(var _n=bt.geometries,Kt=-1,wn=_n.length;++Kt<wn;)L(_n[Kt],Ht)}};function W(bt,Ht,_n){var Kt,wn=-1,Yn=bt.length-_n;for(Ht.lineStart();++wn<Yn;)Ht.point((Kt=bt[wn])[0],Kt[1],Kt[2]);Ht.lineEnd()}function Y(bt,Ht){var _n=-1,Kt=bt.length;for(Ht.polygonStart();++_n<Kt;)W(bt[_n],Ht,1);Ht.polygonEnd()}function Q(bt,Ht){bt&&B.hasOwnProperty(bt.type)?B[bt.type](bt,Ht):L(bt,Ht)}var ne,X,$,re,H,U=w(),G=w(),ie={point:D,lineStart:D,lineEnd:D,polygonStart:function(){U.reset(),ie.lineStart=q,ie.lineEnd=ee},polygonEnd:function(){var bt=+U;G.add(bt<0?u+bt:bt),this.lineStart=this.lineEnd=this.point=D},sphere:function(){G.add(u)}};function q(){ie.point=te}function ee(){se(ne,X)}function te(bt,Ht){ie.point=se,ne=bt,X=Ht,$=bt*=c,re=d(Ht=(Ht*=c)/2+p),H=M(Ht)}function se(bt,Ht){var _n=(bt*=c)-$,Kt=_n>=0?1:-1,wn=Kt*_n,Yn=d(Ht=(Ht*=c)/2+p),Qn=M(Ht),fr=H*Qn,kr=re*Yn+fr*d(wn),_r=fr*Kt*M(wn);U.add(h(_r,kr)),$=bt,re=Yn,H=Qn}function ue(bt){return[h(bt[1],bt[0]),R(bt[2])]}function de(bt){var Ht=bt[0],_n=bt[1],Kt=d(_n);return[Kt*d(Ht),Kt*M(Ht),M(_n)]}function he(bt,Ht){return bt[0]*Ht[0]+bt[1]*Ht[1]+bt[2]*Ht[2]}function xe(bt,Ht){return[bt[1]*Ht[2]-bt[2]*Ht[1],bt[2]*Ht[0]-bt[0]*Ht[2],bt[0]*Ht[1]-bt[1]*Ht[0]]}function ge(bt,Ht){bt[0]+=Ht[0],bt[1]+=Ht[1],bt[2]+=Ht[2]}function _e(bt,Ht){return[bt[0]*Ht,bt[1]*Ht,bt[2]*Ht]}function Ce(bt){var Ht=E(bt[0]*bt[0]+bt[1]*bt[1]+bt[2]*bt[2]);bt[0]/=Ht,bt[1]/=Ht,bt[2]/=Ht}var Le,Ie,Be,ve,Te,Pe,De,Fe,Ue,He,Ke,st,Ve,$e,Qe,tt,ut,xt,kt,Bt,Rt,ft,lt,Ft,Jt,ln,dn=w(),cn={point:Tn,lineStart:Me,lineEnd:Ee,polygonStart:function(){cn.point=Se,cn.lineStart=je,cn.lineEnd=qe,dn.reset(),ie.polygonStart()},polygonEnd:function(){ie.polygonEnd(),cn.point=Tn,cn.lineStart=Me,cn.lineEnd=Ee,U<0?(Le=-(Be=180),Ie=-(ve=90)):dn>n?ve=90:dn<-n&&(Ie=-90),He[0]=Le,He[1]=Be},sphere:function(){Le=-(Be=180),Ie=-(ve=90)}};function Tn(bt,Ht){Ue.push(He=[Le=bt,Be=bt]),Ht<Ie&&(Ie=Ht),Ht>ve&&(ve=Ht)}function nn(bt,Ht){var _n=de([bt*c,Ht*c]);if(Fe){var Kt=xe(Fe,_n),wn=xe([Kt[1],-Kt[0],0],Kt);Ce(wn),wn=ue(wn);var Yn,Qn=bt-Te,fr=Qn>0?1:-1,kr=wn[0]*i*fr,_r=f(Qn)>180;_r^(fr*Te<kr&&kr<fr*bt)?(Yn=wn[1]*i)>ve&&(ve=Yn):_r^(fr*Te<(kr=(kr+360)%360-180)&&kr<fr*bt)?(Yn=-wn[1]*i)<Ie&&(Ie=Yn):(Ht<Ie&&(Ie=Ht),Ht>ve&&(ve=Ht)),_r?bt<Te?Je(Le,bt)>Je(Le,Be)&&(Be=bt):Je(bt,Be)>Je(Le,Be)&&(Le=bt):Be>=Le?(bt<Le&&(Le=bt),bt>Be&&(Be=bt)):bt>Te?Je(Le,bt)>Je(Le,Be)&&(Be=bt):Je(bt,Be)>Je(Le,Be)&&(Le=bt)}else Ue.push(He=[Le=bt,Be=bt]);Ht<Ie&&(Ie=Ht),Ht>ve&&(ve=Ht),Fe=_n,Te=bt}function Me(){cn.point=nn}function Ee(){He[0]=Le,He[1]=Be,cn.point=Tn,Fe=null}function Se(bt,Ht){if(Fe){var _n=bt-Te;dn.add(f(_n)>180?_n+(_n>0?360:-360):_n)}else Pe=bt,De=Ht;ie.point(bt,Ht),nn(bt,Ht)}function je(){ie.lineStart()}function qe(){Se(Pe,De),ie.lineEnd(),f(dn)>n&&(Le=-(Be=180)),He[0]=Le,He[1]=Be,Fe=null}function Je(bt,Ht){return(Ht-=bt)<0?Ht+360:Ht}function at(bt,Ht){return bt[0]-Ht[0]}function it(bt,Ht){return bt[0]<=bt[1]?bt[0]<=Ht&&Ht<=bt[1]:Ht<bt[0]||bt[1]<Ht}var yt={sphere:D,point:vt,lineStart:Wt,lineEnd:Zt,polygonStart:function(){yt.lineStart=Et,yt.lineEnd=Ct},polygonEnd:function(){yt.lineStart=Wt,yt.lineEnd=Zt}};function vt(bt,Ht){bt*=c;var _n=d(Ht*=c);Ut(_n*d(bt),_n*M(bt),M(Ht))}function Ut(bt,Ht,_n){++Ke,Ve+=(bt-Ve)/Ke,$e+=(Ht-$e)/Ke,Qe+=(_n-Qe)/Ke}function Wt(){yt.point=gt}function gt(bt,Ht){bt*=c;var _n=d(Ht*=c);Ft=_n*d(bt),Jt=_n*M(bt),ln=M(Ht),yt.point=At,Ut(Ft,Jt,ln)}function At(bt,Ht){bt*=c;var _n=d(Ht*=c),Kt=_n*d(bt),wn=_n*M(bt),Yn=M(Ht),Qn=h(E((Qn=Jt*Yn-ln*wn)*Qn+(Qn=ln*Kt-Ft*Yn)*Qn+(Qn=Ft*wn-Jt*Kt)*Qn),Ft*Kt+Jt*wn+ln*Yn);st+=Qn,tt+=Qn*(Ft+(Ft=Kt)),ut+=Qn*(Jt+(Jt=wn)),xt+=Qn*(ln+(ln=Yn)),Ut(Ft,Jt,ln)}function Zt(){yt.point=vt}function Et(){yt.point=Ne}function Ct(){et(ft,lt),yt.point=vt}function Ne(bt,Ht){ft=bt,lt=Ht,bt*=c,Ht*=c,yt.point=et;var _n=d(Ht);Ft=_n*d(bt),Jt=_n*M(bt),ln=M(Ht),Ut(Ft,Jt,ln)}function et(bt,Ht){bt*=c;var _n=d(Ht*=c),Kt=_n*d(bt),wn=_n*M(bt),Yn=M(Ht),Qn=Jt*Yn-ln*wn,fr=ln*Kt-Ft*Yn,kr=Ft*wn-Jt*Kt,_r=E(Qn*Qn+fr*fr+kr*kr),Sr=R(_r),Vr=_r&&-Sr/_r;kt+=Vr*Qn,Bt+=Vr*fr,Rt+=Vr*kr,st+=Sr,tt+=Sr*(Ft+(Ft=Kt)),ut+=Sr*(Jt+(Jt=wn)),xt+=Sr*(ln+(ln=Yn)),Ut(Ft,Jt,ln)}function dt(bt){return function(){return bt}}function Mt(bt,Ht){function _n(Kt,wn){return Kt=bt(Kt,wn),Ht(Kt[0],Kt[1])}return bt.invert&&Ht.invert&&(_n.invert=function(Kt,wn){return(Kt=Ht.invert(Kt,wn))&&bt.invert(Kt[0],Kt[1])}),_n}function zt(bt,Ht){return[f(bt)>a?bt+Math.round(-bt/u)*u:bt,Ht]}function Xt(bt,Ht,_n){return(bt%=u)?Ht||_n?Mt(Qt(bt),kn(Ht,_n)):Qt(bt):Ht||_n?kn(Ht,_n):zt}function un(bt){return function(Ht,_n){return[(Ht+=bt)>a?Ht-u:Ht<-a?Ht+u:Ht,_n]}}function Qt(bt){var Ht=un(bt);return Ht.invert=un(-bt),Ht}function kn(bt,Ht){var _n=d(bt),Kt=M(bt),wn=d(Ht),Yn=M(Ht);function Qn(fr,kr){var _r=d(kr),Sr=d(fr)*_r,Vr=M(fr)*_r,Ar=M(kr),Hr=Ar*_n+Sr*Kt;return[h(Vr*wn-Hr*Yn,Sr*_n-Ar*Kt),R(Hr*wn+Vr*Yn)]}return Qn.invert=function(fr,kr){var _r=d(kr),Sr=d(fr)*_r,Vr=M(fr)*_r,Ar=M(kr),Hr=Ar*wn-Vr*Yn;return[h(Vr*wn+Ar*Yn,Sr*_n+Hr*Kt),R(Hr*_n-Sr*Kt)]},Qn}function qn(bt){function Ht(_n){return(_n=bt(_n[0]*c,_n[1]*c))[0]*=i,_n[1]*=i,_n}return bt=Xt(bt[0]*c,bt[1]*c,bt.length>2?bt[2]*c:0),Ht.invert=function(_n){return(_n=bt.invert(_n[0]*c,_n[1]*c))[0]*=i,_n[1]*=i,_n},Ht}function gn(bt,Ht,_n,Kt,wn,Yn){if(_n){var Qn=d(Ht),fr=M(Ht),kr=Kt*_n;null==wn?(wn=Ht+Kt*u,Yn=Ht-kr/2):(wn=sn(Qn,wn),Yn=sn(Qn,Yn),(Kt>0?wn<Yn:wn>Yn)&&(wn+=Kt*u));for(var _r,Sr=wn;Kt>0?Sr>Yn:Sr<Yn;Sr-=kr)_r=ue([Qn,-fr*d(Sr),-fr*M(Sr)]),bt.point(_r[0],_r[1])}}function sn(bt,Ht){(Ht=de(Ht))[0]-=bt,Ce(Ht);var _n=C(-Ht[1]);return((-Ht[2]<0?-_n:_n)+u-n)%u}function vn(){var bt,Ht=[];return{point:function(_n,Kt,wn){bt.push([_n,Kt,wn])},lineStart:function(){Ht.push(bt=[])},lineEnd:D,rejoin:function(){Ht.length>1&&Ht.push(Ht.pop().concat(Ht.shift()))},result:function(){var _n=Ht;return Ht=[],bt=null,_n}}}function pn(bt,Ht){return f(bt[0]-Ht[0])<n&&f(bt[1]-Ht[1])<n}function Mn(bt,Ht,_n,Kt){this.x=bt,this.z=Ht,this.o=_n,this.e=Kt,this.v=!1,this.n=this.p=null}function Rn(bt,Ht,_n,Kt,wn){var Yn,Qn,fr=[],kr=[];if(bt.forEach(function(ii){if(!((oi=ii.length-1)<=0)){var oi,Ai,lr=ii[0],Ti=ii[oi];if(pn(lr,Ti)){if(!lr[2]&&!Ti[2]){for(wn.lineStart(),Yn=0;Yn<oi;++Yn)wn.point((lr=ii[Yn])[0],lr[1]);return void wn.lineEnd()}Ti[0]+=2*n}fr.push(Ai=new Mn(lr,ii,null,!0)),kr.push(Ai.o=new Mn(lr,null,Ai,!1)),fr.push(Ai=new Mn(Ti,ii,null,!1)),kr.push(Ai.o=new Mn(Ti,null,Ai,!0))}}),fr.length){for(kr.sort(Ht),Xn(fr),Xn(kr),Yn=0,Qn=kr.length;Yn<Qn;++Yn)kr[Yn].e=_n=!_n;for(var _r,Sr,Vr=fr[0];;){for(var Ar=Vr,Hr=!0;Ar.v;)if((Ar=Ar.n)===Vr)return;_r=Ar.z,wn.lineStart();do{if(Ar.v=Ar.o.v=!0,Ar.e){if(Hr)for(Yn=0,Qn=_r.length;Yn<Qn;++Yn)wn.point((Sr=_r[Yn])[0],Sr[1]);else Kt(Ar.x,Ar.n.x,1,wn);Ar=Ar.n}else{if(Hr)for(Yn=(_r=Ar.p.z).length-1;Yn>=0;--Yn)wn.point((Sr=_r[Yn])[0],Sr[1]);else Kt(Ar.x,Ar.p.x,-1,wn);Ar=Ar.p}_r=(Ar=Ar.o).z,Hr=!Hr}while(!Ar.v);wn.lineEnd()}}}function Xn(bt){if(Ht=bt.length){for(var Ht,_n,Kt=0,wn=bt[0];++Kt<Ht;)wn.n=_n=bt[Kt],_n.p=wn,wn=_n;wn.n=_n=bt[0],_n.p=wn}}zt.invert=zt;var Hn=w();function rr(bt){return f(bt[0])<=a?bt[0]:A(bt[0])*((f(bt[0])+a)%u-a)}function er(bt,Ht){var _n=rr(Ht),Kt=Ht[1],wn=M(Kt),Yn=[M(_n),-d(_n),0],Qn=0,fr=0;Hn.reset(),1===wn?Kt=t+n:-1===wn&&(Kt=-t-n);for(var kr=0,_r=bt.length;kr<_r;++kr)if(Vr=(Sr=bt[kr]).length)for(var Sr,Vr,Ar=Sr[Vr-1],Hr=rr(Ar),ii=Ar[1]/2+p,oi=M(ii),Ai=d(ii),lr=0;lr<Vr;++lr,Hr=$r,oi=_i,Ai=Yi,Ar=Ti){var Ti=Sr[lr],$r=rr(Ti),li=Ti[1]/2+p,_i=M(li),Yi=d(li),sa=$r-Hr,qr=sa>=0?1:-1,pa=qr*sa,ji=pa>a,Pi=oi*_i;if(Hn.add(h(Pi*qr*M(pa),Ai*Yi+Pi*d(pa))),Qn+=ji?sa+qr*u:sa,ji^Hr>=_n^$r>=_n){var fa=xe(de(Ar),de(Ti));Ce(fa);var $i=xe(Yn,fa);Ce($i);var Va=(ji^sa>=0?-1:1)*R($i[2]);(Kt>Va||Kt===Va&&(fa[0]||fa[1]))&&(fr+=ji^sa>=0?1:-1)}}return(Qn<-n||Qn<n&&Hn<-n)^1&fr}function Ir(bt,Ht,_n,Kt){return function(wn){var Yn,Qn,fr,kr=Ht(wn),_r=vn(),Sr=Ht(_r),Vr=!1,Ar={point:Hr,lineStart:oi,lineEnd:Ai,polygonStart:function(){Ar.point=lr,Ar.lineStart=Ti,Ar.lineEnd=$r,Qn=[],Yn=[]},polygonEnd:function(){Ar.point=Hr,Ar.lineStart=oi,Ar.lineEnd=Ai,Qn=m.merge(Qn);var li=er(Yn,Kt);Qn.length?(Vr||(wn.polygonStart(),Vr=!0),Rn(Qn,ni,li,_n,wn)):li&&(Vr||(wn.polygonStart(),Vr=!0),wn.lineStart(),_n(null,null,1,wn),wn.lineEnd()),Vr&&(wn.polygonEnd(),Vr=!1),Qn=Yn=null},sphere:function(){wn.polygonStart(),wn.lineStart(),_n(null,null,1,wn),wn.lineEnd(),wn.polygonEnd()}};function Hr(li,_i){bt(li,_i)&&wn.point(li,_i)}function ii(li,_i){kr.point(li,_i)}function oi(){Ar.point=ii,kr.lineStart()}function Ai(){Ar.point=Hr,kr.lineEnd()}function lr(li,_i){fr.push([li,_i]),Sr.point(li,_i)}function Ti(){Sr.lineStart(),fr=[]}function $r(){lr(fr[0][0],fr[0][1]),Sr.lineEnd();var li,_i,Yi,sa,qr=Sr.clean(),pa=_r.result(),ji=pa.length;if(fr.pop(),Yn.push(fr),fr=null,ji)if(1&qr){if((_i=(Yi=pa[0]).length-1)>0){for(Vr||(wn.polygonStart(),Vr=!0),wn.lineStart(),li=0;li<_i;++li)wn.point((sa=Yi[li])[0],sa[1]);wn.lineEnd()}}else ji>1&&2&qr&&pa.push(pa.pop().concat(pa.shift())),Qn.push(pa.filter(Or))}return Ar}}function Or(bt){return bt.length>1}function ni(bt,Ht){return((bt=bt.x)[0]<0?bt[1]-t-n:t-bt[1])-((Ht=Ht.x)[0]<0?Ht[1]-t-n:t-Ht[1])}var Br=Ir(function(){return!0},function(bt){var Ht,_n=NaN,Kt=NaN,wn=NaN;return{lineStart:function(){bt.lineStart(),Ht=1},point:function(Yn,Qn){var _r,Sr,Vr,Ar,Hr,ii,oi,fr=Yn>0?a:-a,kr=f(Yn-_n);f(kr-a)<n?(bt.point(_n,Kt=(Kt+Qn)/2>0?t:-t),bt.point(wn,Kt),bt.lineEnd(),bt.lineStart(),bt.point(fr,Kt),bt.point(Yn,Kt),Ht=0):wn!==fr&&kr>=a&&(f(_n-wn)<n&&(_n-=wn*n),f(Yn-fr)<n&&(Yn-=fr*n),Sr=Kt,Ar=Qn,oi=M((_r=_n)-(Vr=Yn)),Kt=f(oi)>n?l((M(Sr)*(ii=d(Ar))*M(Vr)-M(Ar)*(Hr=d(Sr))*M(_r))/(Hr*ii*oi)):(Sr+Ar)/2,bt.point(wn,Kt),bt.lineEnd(),bt.lineStart(),bt.point(fr,Kt),Ht=0),bt.point(_n=Yn,Kt=Qn),wn=fr},lineEnd:function(){bt.lineEnd(),_n=Kt=NaN},clean:function(){return 2-Ht}}},function(bt,Ht,_n,Kt){var wn;if(null==bt)Kt.point(-a,wn=_n*t),Kt.point(0,wn),Kt.point(a,wn),Kt.point(a,0),Kt.point(a,-wn),Kt.point(0,-wn),Kt.point(-a,-wn),Kt.point(-a,0),Kt.point(-a,wn);else if(f(bt[0]-Ht[0])>n){var Yn=bt[0]<Ht[0]?a:-a;Kt.point(-Yn,wn=_n*Yn/2),Kt.point(0,wn),Kt.point(Yn,wn)}else Kt.point(Ht[0],Ht[1])},[-a,-t]);function Dr(bt){var Ht=d(bt),_n=6*c,Kt=Ht>0,wn=f(Ht)>n;function Yn(kr,_r){return d(kr)*d(_r)>Ht}function Qn(kr,_r,Sr){var Vr=[1,0,0],Ar=xe(de(kr),de(_r)),Hr=he(Ar,Ar),ii=Ar[0],oi=Hr-ii*ii;if(!oi)return!Sr&&kr;var Ai=Ht*Hr/oi,lr=-Ht*ii/oi,Ti=xe(Vr,Ar),$r=_e(Vr,Ai);ge($r,_e(Ar,lr));var li=Ti,_i=he($r,li),Yi=he(li,li),sa=_i*_i-Yi*(he($r,$r)-1);if(!(sa<0)){var qr=E(sa),pa=_e(li,(-_i-qr)/Yi);if(ge(pa,$r),pa=ue(pa),!Sr)return pa;var ji,Pi=kr[0],fa=_r[0],$i=kr[1],Va=_r[1];fa<Pi&&(ji=Pi,Pi=fa,fa=ji);var wi=fa-Pi,Na=f(wi-a)<n;if(!Na&&Va<$i&&(ji=$i,$i=Va,Va=ji),Na||wi<n?Na?$i+Va>0^pa[1]<(f(pa[0]-Pi)<n?$i:Va):$i<=pa[1]&&pa[1]<=Va:wi>a^(Pi<=pa[0]&&pa[0]<=fa)){var ga=_e(li,(-_i+qr)/Yi);return ge(ga,$r),[pa,ue(ga)]}}}function fr(kr,_r){var Sr=Kt?bt:a-bt,Vr=0;return kr<-Sr?Vr|=1:kr>Sr&&(Vr|=2),_r<-Sr?Vr|=4:_r>Sr&&(Vr|=8),Vr}return Ir(Yn,function(kr){var _r,Sr,Vr,Ar,Hr;return{lineStart:function(){Ar=Vr=!1,Hr=1},point:function(ii,oi){var Ai,lr=[ii,oi],Ti=Yn(ii,oi),$r=Kt?Ti?0:fr(ii,oi):Ti?fr(ii+(ii<0?a:-a),oi):0;if(!_r&&(Ar=Vr=Ti)&&kr.lineStart(),Ti!==Vr&&(!(Ai=Qn(_r,lr))||pn(_r,Ai)||pn(lr,Ai))&&(lr[2]=1),Ti!==Vr)Hr=0,Ti?(kr.lineStart(),Ai=Qn(lr,_r),kr.point(Ai[0],Ai[1])):(Ai=Qn(_r,lr),kr.point(Ai[0],Ai[1],2),kr.lineEnd()),_r=Ai;else if(wn&&_r&&Kt^Ti){var li;$r&Sr||!(li=Qn(lr,_r,!0))||(Hr=0,Kt?(kr.lineStart(),kr.point(li[0][0],li[0][1]),kr.point(li[1][0],li[1][1]),kr.lineEnd()):(kr.point(li[1][0],li[1][1]),kr.lineEnd(),kr.lineStart(),kr.point(li[0][0],li[0][1],3)))}!Ti||_r&&pn(_r,lr)||kr.point(lr[0],lr[1]),_r=lr,Vr=Ti,Sr=$r},lineEnd:function(){Vr&&kr.lineEnd(),_r=null},clean:function(){return Hr|(Ar&&Vr)<<1}}},function(kr,_r,Sr,Vr){gn(Vr,bt,_n,Sr,kr,_r)},Kt?[0,-bt]:[-a,bt-a])}function Rr(bt,Ht,_n,Kt){function wn(_r,Sr){return bt<=_r&&_r<=_n&&Ht<=Sr&&Sr<=Kt}function Yn(_r,Sr,Vr,Ar){var Hr=0,ii=0;if(null==_r||(Hr=Qn(_r,Vr))!==(ii=Qn(Sr,Vr))||kr(_r,Sr)<0^Vr>0)do{Ar.point(0===Hr||3===Hr?bt:_n,Hr>1?Kt:Ht)}while((Hr=(Hr+Vr+4)%4)!==ii);else Ar.point(Sr[0],Sr[1])}function Qn(_r,Sr){return f(_r[0]-bt)<n?Sr>0?0:3:f(_r[0]-_n)<n?Sr>0?2:1:f(_r[1]-Ht)<n?Sr>0?1:0:Sr>0?3:2}function fr(_r,Sr){return kr(_r.x,Sr.x)}function kr(_r,Sr){var Vr=Qn(_r,1),Ar=Qn(Sr,1);return Vr!==Ar?Vr-Ar:0===Vr?Sr[1]-_r[1]:1===Vr?_r[0]-Sr[0]:2===Vr?_r[1]-Sr[1]:Sr[0]-_r[0]}return function(_r){var Sr,Vr,Ar,Hr,ii,oi,Ai,lr,Ti,$r,li,_i=_r,Yi=vn(),sa={point:qr,lineStart:function(){sa.point=pa,Vr&&Vr.push(Ar=[]),$r=!0,Ti=!1,Ai=lr=NaN},lineEnd:function(){Sr&&(pa(Hr,ii),oi&&Ti&&Yi.rejoin(),Sr.push(Yi.result())),sa.point=qr,Ti&&_i.lineEnd()},polygonStart:function(){_i=Yi,Sr=[],Vr=[],li=!0},polygonEnd:function(){var ji=function(){for(var $i=0,Va=0,wi=Vr.length;Va<wi;++Va)for(var Na,ga,Vs=Vr[Va],Fs=1,Ra=Vs.length,Ui=Vs[0],yo=Ui[0],Jo=Ui[1];Fs<Ra;++Fs)Na=yo,ga=Jo,yo=(Ui=Vs[Fs])[0],Jo=Ui[1],ga<=Kt?Jo>Kt&&(yo-Na)*(Kt-ga)>(Jo-ga)*(bt-Na)&&++$i:Jo<=Kt&&(yo-Na)*(Kt-ga)<(Jo-ga)*(bt-Na)&&--$i;return $i}(),Pi=li&&ji,fa=(Sr=m.merge(Sr)).length;(Pi||fa)&&(_r.polygonStart(),Pi&&(_r.lineStart(),Yn(null,null,1,_r),_r.lineEnd()),fa&&Rn(Sr,fr,ji,Yn,_r),_r.polygonEnd()),_i=_r,Sr=Vr=Ar=null}};function qr(ji,Pi){wn(ji,Pi)&&_i.point(ji,Pi)}function pa(ji,Pi){var fa=wn(ji,Pi);if(Vr&&Ar.push([ji,Pi]),$r)Hr=ji,ii=Pi,oi=fa,$r=!1,fa&&(_i.lineStart(),_i.point(ji,Pi));else if(fa&&Ti)_i.point(ji,Pi);else{var $i=[Ai=Math.max(-1e9,Math.min(1e9,Ai)),lr=Math.max(-1e9,Math.min(1e9,lr))],Va=[ji=Math.max(-1e9,Math.min(1e9,ji)),Pi=Math.max(-1e9,Math.min(1e9,Pi))];!function(wi,Na,ga,Vs,Fs,Ra){var Ui,yo=wi[0],Jo=wi[1],ia=0,Mo=1,Ro=Na[0]-yo,ka=Na[1]-Jo;if(Ui=ga-yo,Ro||!(Ui>0)){if(Ui/=Ro,Ro<0){if(Ui<ia)return;Ui<Mo&&(Mo=Ui)}else if(Ro>0){if(Ui>Mo)return;Ui>ia&&(ia=Ui)}if(Ui=Fs-yo,Ro||!(Ui<0)){if(Ui/=Ro,Ro<0){if(Ui>Mo)return;Ui>ia&&(ia=Ui)}else if(Ro>0){if(Ui<ia)return;Ui<Mo&&(Mo=Ui)}if(Ui=Vs-Jo,ka||!(Ui>0)){if(Ui/=ka,ka<0){if(Ui<ia)return;Ui<Mo&&(Mo=Ui)}else if(ka>0){if(Ui>Mo)return;Ui>ia&&(ia=Ui)}if(Ui=Ra-Jo,ka||!(Ui<0)){if(Ui/=ka,ka<0){if(Ui>Mo)return;Ui>ia&&(ia=Ui)}else if(ka>0){if(Ui<ia)return;Ui<Mo&&(Mo=Ui)}return ia>0&&(wi[0]=yo+ia*Ro,wi[1]=Jo+ia*ka),Mo<1&&(Na[0]=yo+Mo*Ro,Na[1]=Jo+Mo*ka),!0}}}}}($i,Va,bt,Ht,_n,Kt)?fa&&(_i.lineStart(),_i.point(ji,Pi),li=!1):(Ti||(_i.lineStart(),_i.point($i[0],$i[1])),_i.point(Va[0],Va[1]),fa||_i.lineEnd(),li=!1)}Ai=ji,lr=Pi,Ti=fa}return sa}}var yi,$n,Mr,br=w(),ar={sphere:D,point:D,lineStart:function(){ar.point=ri,ar.lineEnd=si},lineEnd:D,polygonStart:D,polygonEnd:D};function si(){ar.point=ar.lineEnd=D}function ri(bt,Ht){yi=bt*=c,$n=M(Ht*=c),Mr=d(Ht),ar.point=Cr}function Cr(bt,Ht){bt*=c;var _n=M(Ht*=c),Kt=d(Ht),wn=f(bt-yi),Yn=d(wn),Qn=Kt*M(wn),fr=Mr*_n-$n*Kt*Yn,kr=$n*_n+Mr*Kt*Yn;br.add(h(E(Qn*Qn+fr*fr),kr)),yi=bt,$n=_n,Mr=Kt}function Pr(bt){return br.reset(),Q(bt,ar),+br}var vr=[null,null],hn={type:"LineString",coordinates:vr};function Jn(bt,Ht){return vr[0]=bt,vr[1]=Ht,Pr(hn)}var jt={Feature:function(bt,Ht){return Sn(bt.geometry,Ht)},FeatureCollection:function(bt,Ht){for(var _n=bt.features,Kt=-1,wn=_n.length;++Kt<wn;)if(Sn(_n[Kt].geometry,Ht))return!0;return!1}},fn={Sphere:function(){return!0},Point:function(bt,Ht){return Kn(bt.coordinates,Ht)},MultiPoint:function(bt,Ht){for(var _n=bt.coordinates,Kt=-1,wn=_n.length;++Kt<wn;)if(Kn(_n[Kt],Ht))return!0;return!1},LineString:function(bt,Ht){return Wn(bt.coordinates,Ht)},MultiLineString:function(bt,Ht){for(var _n=bt.coordinates,Kt=-1,wn=_n.length;++Kt<wn;)if(Wn(_n[Kt],Ht))return!0;return!1},Polygon:function(bt,Ht){return Pn(bt.coordinates,Ht)},MultiPolygon:function(bt,Ht){for(var _n=bt.coordinates,Kt=-1,wn=_n.length;++Kt<wn;)if(Pn(_n[Kt],Ht))return!0;return!1},GeometryCollection:function(bt,Ht){for(var _n=bt.geometries,Kt=-1,wn=_n.length;++Kt<wn;)if(Sn(_n[Kt],Ht))return!0;return!1}};function Sn(bt,Ht){return!(!bt||!fn.hasOwnProperty(bt.type))&&fn[bt.type](bt,Ht)}function Kn(bt,Ht){return 0===Jn(bt,Ht)}function Wn(bt,Ht){for(var _n,Kt,wn,Yn=0,Qn=bt.length;Yn<Qn;Yn++){if(0===(Kt=Jn(bt[Yn],Ht))||Yn>0&&(wn=Jn(bt[Yn],bt[Yn-1]))>0&&_n<=wn&&Kt<=wn&&(_n+Kt-wn)*(1-Math.pow((_n-Kt)/wn,2))<1e-12*wn)return!0;_n=Kt}return!1}function Pn(bt,Ht){return!!er(bt.map(Un),Cn(Ht))}function Un(bt){return(bt=bt.map(Cn)).pop(),bt}function Cn(bt){return[bt[0]*c,bt[1]*c]}function On(bt,Ht,_n){var Kt=m.range(bt,Ht-n,_n).concat(Ht);return function(wn){return Kt.map(function(Yn){return[wn,Yn]})}}function Fn(bt,Ht,_n){var Kt=m.range(bt,Ht-n,_n).concat(Ht);return function(wn){return Kt.map(function(Yn){return[Yn,wn]})}}function Gn(){var bt,Ht,_n,Kt,wn,Yn,Qn,fr,kr,_r,Sr,Vr,Ar=10,Hr=Ar,ii=90,oi=360,Ai=2.5;function lr(){return{type:"MultiLineString",coordinates:Ti()}}function Ti(){return m.range(o(Kt/ii)*ii,_n,ii).map(Sr).concat(m.range(o(fr/oi)*oi,Qn,oi).map(Vr)).concat(m.range(o(Ht/Ar)*Ar,bt,Ar).filter(function($r){return f($r%ii)>n}).map(kr)).concat(m.range(o(Yn/Hr)*Hr,wn,Hr).filter(function($r){return f($r%oi)>n}).map(_r))}return lr.lines=function(){return Ti().map(function($r){return{type:"LineString",coordinates:$r}})},lr.outline=function(){return{type:"Polygon",coordinates:[Sr(Kt).concat(Vr(Qn).slice(1),Sr(_n).reverse().slice(1),Vr(fr).reverse().slice(1))]}},lr.extent=function($r){return arguments.length?lr.extentMajor($r).extentMinor($r):lr.extentMinor()},lr.extentMajor=function($r){return arguments.length?(fr=+$r[0][1],Qn=+$r[1][1],(Kt=+$r[0][0])>(_n=+$r[1][0])&&($r=Kt,Kt=_n,_n=$r),fr>Qn&&($r=fr,fr=Qn,Qn=$r),lr.precision(Ai)):[[Kt,fr],[_n,Qn]]},lr.extentMinor=function($r){return arguments.length?(Yn=+$r[0][1],wn=+$r[1][1],(Ht=+$r[0][0])>(bt=+$r[1][0])&&($r=Ht,Ht=bt,bt=$r),Yn>wn&&($r=Yn,Yn=wn,wn=$r),lr.precision(Ai)):[[Ht,Yn],[bt,wn]]},lr.step=function($r){return arguments.length?lr.stepMajor($r).stepMinor($r):lr.stepMinor()},lr.stepMajor=function($r){return arguments.length?(ii=+$r[0],oi=+$r[1],lr):[ii,oi]},lr.stepMinor=function($r){return arguments.length?(Ar=+$r[0],Hr=+$r[1],lr):[Ar,Hr]},lr.precision=function($r){return arguments.length?(Ai=+$r,kr=On(Yn,wn,90),_r=Fn(Ht,bt,Ai),Sr=On(fr,Qn,90),Vr=Fn(Kt,_n,Ai),lr):Ai},lr.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function or(bt){return bt}var sr,pr,yr,Lr,zr=w(),cr=w(),Yr={point:D,lineStart:D,lineEnd:D,polygonStart:function(){Yr.lineStart=Qr,Yr.lineEnd=Zi},polygonEnd:function(){Yr.lineStart=Yr.lineEnd=Yr.point=D,zr.add(f(cr)),cr.reset()},result:function(){var bt=zr/2;return zr.reset(),bt}};function Qr(){Yr.point=ci}function ci(bt,Ht){Yr.point=Wi,sr=yr=bt,pr=Lr=Ht}function Wi(bt,Ht){cr.add(Lr*bt-yr*Ht),yr=bt,Lr=Ht}function Zi(){Wi(sr,pr)}var Po,os,Pa,Fa,Nr=1/0,hi=Nr,bi=-Nr,ya=bi,Ia={point:function(bt,Ht){bt<Nr&&(Nr=bt),bt>bi&&(bi=bt),Ht<hi&&(hi=Ht),Ht>ya&&(ya=Ht)},lineStart:D,lineEnd:D,polygonStart:D,polygonEnd:D,result:function(){var bt=[[Nr,hi],[bi,ya]];return bi=ya=-(hi=Nr=1/0),bt}},oa=0,wa=0,vs=0,jo=0,Ki=0,Uo=0,ns=0,ss=0,Oo=0,za={point:Co,lineStart:Cl,lineEnd:ml,polygonStart:function(){za.lineStart=Ks,za.lineEnd=Dl},polygonEnd:function(){za.point=Co,za.lineStart=Cl,za.lineEnd=ml},result:function(){var bt=Oo?[ns/Oo,ss/Oo]:Uo?[jo/Uo,Ki/Uo]:vs?[oa/vs,wa/vs]:[NaN,NaN];return oa=wa=vs=jo=Ki=Uo=ns=ss=Oo=0,bt}};function Co(bt,Ht){oa+=bt,wa+=Ht,++vs}function Cl(){za.point=$s}function $s(bt,Ht){za.point=Oa,Co(Pa=bt,Fa=Ht)}function Oa(bt,Ht){var _n=bt-Pa,Kt=Ht-Fa,wn=E(_n*_n+Kt*Kt);jo+=wn*(Pa+bt)/2,Ki+=wn*(Fa+Ht)/2,Uo+=wn,Co(Pa=bt,Fa=Ht)}function ml(){za.point=Co}function Ks(){za.point=ys}function Dl(){Ll(Po,os)}function ys(bt,Ht){za.point=Ll,Co(Po=Pa=bt,os=Fa=Ht)}function Ll(bt,Ht){var _n=bt-Pa,Kt=Ht-Fa,wn=E(_n*_n+Kt*Kt);jo+=wn*(Pa+bt)/2,Ki+=wn*(Fa+Ht)/2,Uo+=wn,ns+=(wn=Fa*bt-Pa*Ht)*(Pa+bt),ss+=wn*(Fa+Ht),Oo+=3*wn,Co(Pa=bt,Fa=Ht)}function Il(bt){this._context=bt}Il.prototype={_radius:4.5,pointRadius:function(bt){return this._radius=bt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(bt,Ht){switch(this._point){case 0:this._context.moveTo(bt,Ht),this._point=1;break;case 1:this._context.lineTo(bt,Ht);break;default:this._context.moveTo(bt+this._radius,Ht),this._context.arc(bt,Ht,this._radius,0,u)}},result:D};var Ja,uo,co,$o,rs,Vo=w(),Ko={point:D,lineStart:function(){Ko.point=ul},lineEnd:function(){Ja&&Ho(uo,co),Ko.point=D},polygonStart:function(){Ja=!0},polygonEnd:function(){Ja=null},result:function(){var bt=+Vo;return Vo.reset(),bt}};function ul(bt,Ht){Ko.point=Ho,uo=$o=bt,co=rs=Ht}function Ho(bt,Ht){Vo.add(E(($o-=bt)*$o+(rs-=Ht)*rs)),$o=bt,rs=Ht}function Ms(){this._string=[]}function Cs(bt){return"m0,"+bt+"a"+bt+","+bt+" 0 1,1 0,"+-2*bt+"a"+bt+","+bt+" 0 1,1 0,"+2*bt+"z"}function Qa(bt){return function(Ht){var _n=new Sa;for(var Kt in bt)_n[Kt]=bt[Kt];return _n.stream=Ht,_n}}function Sa(){}function We(bt,Ht,_n){var Kt=bt.clipExtent&&bt.clipExtent();return bt.scale(150).translate([0,0]),null!=Kt&&bt.clipExtent(null),Q(_n,bt.stream(Ia)),Ht(Ia.result()),null!=Kt&&bt.clipExtent(Kt),bt}function Ge(bt,Ht,_n){return We(bt,function(Kt){var wn=Ht[1][0]-Ht[0][0],Yn=Ht[1][1]-Ht[0][1],Qn=Math.min(wn/(Kt[1][0]-Kt[0][0]),Yn/(Kt[1][1]-Kt[0][1])),fr=+Ht[0][0]+(wn-Qn*(Kt[1][0]+Kt[0][0]))/2,kr=+Ht[0][1]+(Yn-Qn*(Kt[1][1]+Kt[0][1]))/2;bt.scale(150*Qn).translate([fr,kr])},_n)}function rt(bt,Ht,_n){return Ge(bt,[[0,0],Ht],_n)}function pt(bt,Ht,_n){return We(bt,function(Kt){var wn=+Ht,Yn=wn/(Kt[1][0]-Kt[0][0]),Qn=(wn-Yn*(Kt[1][0]+Kt[0][0]))/2,fr=-Yn*Kt[0][1];bt.scale(150*Yn).translate([Qn,fr])},_n)}function wt(bt,Ht,_n){return We(bt,function(Kt){var wn=+Ht,Yn=wn/(Kt[1][1]-Kt[0][1]),Qn=-Yn*Kt[0][0],fr=(wn-Yn*(Kt[1][1]+Kt[0][1]))/2;bt.scale(150*Yn).translate([Qn,fr])},_n)}Ms.prototype={_radius:4.5,_circle:Cs(4.5),pointRadius:function(bt){return(bt=+bt)!==this._radius&&(this._radius=bt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(bt,Ht){switch(this._point){case 0:this._string.push("M",bt,",",Ht),this._point=1;break;case 1:this._string.push("L",bt,",",Ht);break;default:null==this._circle&&(this._circle=Cs(this._radius)),this._string.push("M",bt,",",Ht,this._circle)}},result:function(){if(this._string.length){var bt=this._string.join("");return this._string=[],bt}return null}},Sa.prototype={constructor:Sa,point:function(bt,Ht){this.stream.point(bt,Ht)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var _t=d(30*c);function Pt(bt,Ht){return+Ht?function(_n,Kt){function wn(Yn,Qn,fr,kr,_r,Sr,Vr,Ar,Hr,ii,oi,Ai,lr,Ti){var $r=Vr-Yn,li=Ar-Qn,_i=$r*$r+li*li;if(_i>4*Kt&&lr--){var Yi=kr+ii,sa=_r+oi,qr=Sr+Ai,pa=E(Yi*Yi+sa*sa+qr*qr),ji=R(qr/=pa),Pi=f(f(qr)-1)<n||f(fr-Hr)<n?(fr+Hr)/2:h(sa,Yi),fa=_n(Pi,ji),$i=fa[0],Va=fa[1],wi=$i-Yn,Na=Va-Qn,ga=li*wi-$r*Na;(ga*ga/_i>Kt||f(($r*wi+li*Na)/_i-.5)>.3||kr*ii+_r*oi+Sr*Ai<_t)&&(wn(Yn,Qn,fr,kr,_r,Sr,$i,Va,Pi,Yi/=pa,sa/=pa,qr,lr,Ti),Ti.point($i,Va),wn($i,Va,Pi,Yi,sa,qr,Vr,Ar,Hr,ii,oi,Ai,lr,Ti))}}return function(Yn){var Qn,fr,kr,_r,Sr,Vr,Ar,Hr,ii,oi,Ai,lr,Ti={point:$r,lineStart:li,lineEnd:Yi,polygonStart:function(){Yn.polygonStart(),Ti.lineStart=sa},polygonEnd:function(){Yn.polygonEnd(),Ti.lineStart=li}};function $r(ji,Pi){ji=_n(ji,Pi),Yn.point(ji[0],ji[1])}function li(){Hr=NaN,Ti.point=_i,Yn.lineStart()}function _i(ji,Pi){var fa=de([ji,Pi]),$i=_n(ji,Pi);wn(Hr,ii,Ar,oi,Ai,lr,Hr=$i[0],ii=$i[1],Ar=ji,oi=fa[0],Ai=fa[1],lr=fa[2],16,Yn),Yn.point(Hr,ii)}function Yi(){Ti.point=$r,Yn.lineEnd()}function sa(){li(),Ti.point=qr,Ti.lineEnd=pa}function qr(ji,Pi){_i(Qn=ji,Pi),fr=Hr,kr=ii,_r=oi,Sr=Ai,Vr=lr,Ti.point=_i}function pa(){wn(Hr,ii,Ar,oi,Ai,lr,fr,kr,Qn,_r,Sr,Vr,16,Yn),Ti.lineEnd=Yi,Yi()}return Ti}}(bt,Ht):(_n=bt,Qa({point:function(Kt,wn){Kt=_n(Kt,wn),this.stream.point(Kt[0],Kt[1])}}));var _n}var on=Qa({point:function(bt,Ht){this.stream.point(bt*c,Ht*c)}});function rn(bt,Ht,_n,Kt,wn){function Yn(Qn,fr){return[Ht+bt*(Qn*=Kt),_n-bt*(fr*=wn)]}return Yn.invert=function(Qn,fr){return[(Qn-Ht)/bt*Kt,(_n-fr)/bt*wn]},Yn}function tn(bt,Ht,_n,Kt,wn,Yn){var Qn=d(Yn),fr=M(Yn),kr=Qn*bt,_r=fr*bt,Sr=Qn/bt,Vr=fr/bt,Ar=(fr*_n-Qn*Ht)/bt,Hr=(fr*Ht+Qn*_n)/bt;function ii(oi,Ai){return[kr*(oi*=Kt)-_r*(Ai*=wn)+Ht,_n-_r*oi-kr*Ai]}return ii.invert=function(oi,Ai){return[Kt*(Sr*oi-Vr*Ai+Ar),wn*(Hr-Vr*oi-Sr*Ai)]},ii}function yn(bt){return mn(function(){return bt})()}function mn(bt){var Ht,_n,Kt,wn,Yn,Qn,fr,kr,_r,Sr,Vr=150,Ar=480,Hr=250,ii=0,oi=0,Ai=0,lr=0,Ti=0,$r=0,li=1,_i=1,Yi=null,sa=Br,qr=null,pa=or,ji=.5;function Pi(wi){return kr(wi[0]*c,wi[1]*c)}function fa(wi){return(wi=kr.invert(wi[0],wi[1]))&&[wi[0]*i,wi[1]*i]}function $i(){var wi=tn(Vr,0,0,li,_i,$r).apply(null,Ht(ii,oi)),Na=($r?tn:rn)(Vr,Ar-wi[0],Hr-wi[1],li,_i,$r);return _n=Xt(Ai,lr,Ti),fr=Mt(Ht,Na),kr=Mt(_n,fr),Qn=Pt(fr,ji),Va()}function Va(){return _r=Sr=null,Pi}return Pi.stream=function(wi){return _r&&Sr===wi?_r:_r=on((Na=_n,Qa({point:function(ga,Vs){var Fs=Na(ga,Vs);return this.stream.point(Fs[0],Fs[1])}}))(sa(Qn(pa(Sr=wi)))));var Na},Pi.preclip=function(wi){return arguments.length?(sa=wi,Yi=void 0,Va()):sa},Pi.postclip=function(wi){return arguments.length?(pa=wi,qr=Kt=wn=Yn=null,Va()):pa},Pi.clipAngle=function(wi){return arguments.length?(sa=+wi?Dr(Yi=wi*c):(Yi=null,Br),Va()):Yi*i},Pi.clipExtent=function(wi){return arguments.length?(pa=null==wi?(qr=Kt=wn=Yn=null,or):Rr(qr=+wi[0][0],Kt=+wi[0][1],wn=+wi[1][0],Yn=+wi[1][1]),Va()):null==qr?null:[[qr,Kt],[wn,Yn]]},Pi.scale=function(wi){return arguments.length?(Vr=+wi,$i()):Vr},Pi.translate=function(wi){return arguments.length?(Ar=+wi[0],Hr=+wi[1],$i()):[Ar,Hr]},Pi.center=function(wi){return arguments.length?(ii=wi[0]%360*c,oi=wi[1]%360*c,$i()):[ii*i,oi*i]},Pi.rotate=function(wi){return arguments.length?(Ai=wi[0]%360*c,lr=wi[1]%360*c,Ti=wi.length>2?wi[2]%360*c:0,$i()):[Ai*i,lr*i,Ti*i]},Pi.angle=function(wi){return arguments.length?($r=wi%360*c,$i()):$r*i},Pi.reflectX=function(wi){return arguments.length?(li=wi?-1:1,$i()):li<0},Pi.reflectY=function(wi){return arguments.length?(_i=wi?-1:1,$i()):_i<0},Pi.precision=function(wi){return arguments.length?(Qn=Pt(fr,ji=wi*wi),Va()):E(ji)},Pi.fitExtent=function(wi,Na){return Ge(Pi,wi,Na)},Pi.fitSize=function(wi,Na){return rt(Pi,wi,Na)},Pi.fitWidth=function(wi,Na){return pt(Pi,wi,Na)},Pi.fitHeight=function(wi,Na){return wt(Pi,wi,Na)},function(){return Ht=bt.apply(this,arguments),Pi.invert=Ht.invert&&fa,$i()}}function Ln(bt){var Ht=0,_n=a/3,Kt=mn(bt),wn=Kt(Ht,_n);return wn.parallels=function(Yn){return arguments.length?Kt(Ht=Yn[0]*c,_n=Yn[1]*c):[Ht*i,_n*i]},wn}function In(bt,Ht){var _n=M(bt),Kt=(_n+M(Ht))/2;if(f(Kt)<n)return function(fr){var kr=d(fr);function _r(Sr,Vr){return[Sr*kr,M(Vr)/kr]}return _r.invert=function(Sr,Vr){return[Sr/kr,R(Vr*kr)]},_r}(bt);var wn=1+_n*(2*Kt-_n),Yn=E(wn)/Kt;function Qn(fr,kr){var _r=E(wn-2*Kt*M(kr))/Kt;return[_r*M(fr*=Kt),Yn-_r*d(fr)]}return Qn.invert=function(fr,kr){var _r=Yn-kr,Sr=h(fr,f(_r))*A(_r);return _r*Kt<0&&(Sr-=a*A(fr)*A(_r)),[Sr/Kt,R((wn-(fr*fr+_r*_r)*Kt*Kt)/(2*Kt))]},Qn}function Zn(){return Ln(In).scale(155.424).center([0,33.6442])}function mr(){return Zn().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function xr(bt){return function(Ht,_n){var Kt=d(Ht),wn=d(_n),Yn=bt(Kt*wn);return[Yn*wn*M(Ht),Yn*M(_n)]}}function Wr(bt){return function(Ht,_n){var Kt=E(Ht*Ht+_n*_n),wn=bt(Kt),Yn=M(wn),Qn=d(wn);return[h(Ht*Yn,Kt*Qn),R(Kt&&_n*Yn/Kt)]}}var Kr=xr(function(bt){return E(2/(1+bt))});Kr.invert=Wr(function(bt){return 2*R(bt/2)});var ei=xr(function(bt){return(bt=C(bt))&&bt/M(bt)});function Ur(bt,Ht){return[bt,s(I((t+Ht)/2))]}function zi(bt){var Ht,_n,Kt,wn=yn(bt),Yn=wn.center,Qn=wn.scale,fr=wn.translate,kr=wn.clipExtent,_r=null;function Sr(){var Vr=a*Qn(),Ar=wn(qn(wn.rotate()).invert([0,0]));return kr(null==_r?[[Ar[0]-Vr,Ar[1]-Vr],[Ar[0]+Vr,Ar[1]+Vr]]:bt===Ur?[[Math.max(Ar[0]-Vr,_r),Ht],[Math.min(Ar[0]+Vr,_n),Kt]]:[[_r,Math.max(Ar[1]-Vr,Ht)],[_n,Math.min(Ar[1]+Vr,Kt)]])}return wn.scale=function(Vr){return arguments.length?(Qn(Vr),Sr()):Qn()},wn.translate=function(Vr){return arguments.length?(fr(Vr),Sr()):fr()},wn.center=function(Vr){return arguments.length?(Yn(Vr),Sr()):Yn()},wn.clipExtent=function(Vr){return arguments.length?(null==Vr?_r=Ht=_n=Kt=null:(_r=+Vr[0][0],Ht=+Vr[0][1],_n=+Vr[1][0],Kt=+Vr[1][1]),Sr()):null==_r?null:[[_r,Ht],[_n,Kt]]},Sr()}function Xi(bt){return I((t+bt)/2)}function na(bt,Ht){var _n=d(bt),Kt=bt===Ht?M(bt):s(_n/d(Ht))/s(Xi(Ht)/Xi(bt)),wn=_n*k(Xi(bt),Kt)/Kt;if(!Kt)return Ur;function Yn(Qn,fr){wn>0?fr<-t+n&&(fr=-t+n):fr>t-n&&(fr=t-n);var kr=wn/k(Xi(fr),Kt);return[kr*M(Kt*Qn),wn-kr*d(Kt*Qn)]}return Yn.invert=function(Qn,fr){var kr=wn-fr,_r=A(Kt)*E(Qn*Qn+kr*kr),Sr=h(Qn,f(kr))*A(kr);return kr*Kt<0&&(Sr-=a*A(Qn)*A(kr)),[Sr/Kt,2*l(k(wn/_r,1/Kt))-t]},Yn}function Ji(bt,Ht){return[bt,Ht]}function Ta(bt,Ht){var _n=d(bt),Kt=bt===Ht?M(bt):(_n-d(Ht))/(Ht-bt),wn=_n/Kt+bt;if(f(Kt)<n)return Ji;function Yn(Qn,fr){var kr=wn-fr,_r=Kt*Qn;return[kr*M(_r),wn-kr*d(_r)]}return Yn.invert=function(Qn,fr){var kr=wn-fr,_r=h(Qn,f(kr))*A(kr);return kr*Kt<0&&(_r-=a*A(Qn)*A(kr)),[_r/Kt,wn-A(Kt)*E(Qn*Qn+kr*kr)]},Yn}ei.invert=Wr(function(bt){return bt}),Ur.invert=function(bt,Ht){return[bt,2*l(_(Ht))-t]},Ji.invert=Ji;var fo=1.340264,ao=-.081106,xa=893e-6,Ga=.003796,To=E(3)/2;function qo(bt,Ht){var _n=R(To*M(Ht)),Kt=_n*_n,wn=Kt*Kt*Kt;return[bt*d(_n)/(To*(fo+3*ao*Kt+wn*(7*xa+9*Ga*Kt))),_n*(fo+ao*Kt+wn*(xa+Ga*Kt))]}function is(bt,Ht){var _n=d(Ht),Kt=d(bt)*_n;return[_n*M(bt)/Kt,M(Ht)/Kt]}function ls(bt,Ht){var _n=Ht*Ht,Kt=_n*_n;return[bt*(.8707-.131979*_n+Kt*(Kt*(.003971*_n-.001529*Kt)-.013791)),Ht*(1.007226+_n*(.015085+Kt*(.028874*_n-.044475-.005916*Kt)))]}function us(bt,Ht){return[d(Ht)*M(bt),M(Ht)]}function cs(bt,Ht){var _n=d(Ht),Kt=1+d(bt)*_n;return[_n*M(bt)/Kt,M(Ht)/Kt]}function ba(bt,Ht){return[s(I((t+Ht)/2)),-bt]}qo.invert=function(bt,Ht){for(var _n,Kt=Ht,wn=Kt*Kt,Yn=wn*wn*wn,Qn=0;Qn<12&&(Yn=(wn=(Kt-=_n=(Kt*(fo+ao*wn+Yn*(xa+Ga*wn))-Ht)/(fo+3*ao*wn+Yn*(7*xa+9*Ga*wn)))*Kt)*wn*wn,!(f(_n)<1e-12));++Qn);return[To*bt*(fo+3*ao*wn+Yn*(7*xa+9*Ga*wn))/d(Kt),R(M(Kt)/To)]},is.invert=Wr(l),ls.invert=function(bt,Ht){var _n,Kt=Ht,wn=25;do{var Yn=Kt*Kt,Qn=Yn*Yn;Kt-=_n=(Kt*(1.007226+Yn*(.015085+Qn*(.028874*Yn-.044475-.005916*Qn)))-Ht)/(1.007226+Yn*(.045255+Qn*(.259866*Yn-.311325-.005916*11*Qn)))}while(f(_n)>n&&--wn>0);return[bt/(.8707+(Yn=Kt*Kt)*(Yn*(Yn*Yn*Yn*(.003971-.001529*Yn)-.013791)-.131979)),Kt]},us.invert=Wr(R),cs.invert=Wr(function(bt){return 2*l(bt)}),ba.invert=function(bt,Ht){return[-Ht,2*l(_(bt))-t]},g.geoAlbers=mr,g.geoAlbersUsa=function(){var bt,Ht,_n,Kt,wn,Yn,Qn=mr(),fr=Zn().rotate([154,0]).center([-2,58.5]).parallels([55,65]),kr=Zn().rotate([157,0]).center([-3,19.9]).parallels([8,18]),_r={point:function(Ar,Hr){Yn=[Ar,Hr]}};function Sr(Ar){var Hr=Ar[0],ii=Ar[1];return Yn=null,_n.point(Hr,ii),Yn||(Kt.point(Hr,ii),Yn)||(wn.point(Hr,ii),Yn)}function Vr(){return bt=Ht=null,Sr}return Sr.invert=function(Ar){var Hr=Qn.scale(),ii=Qn.translate(),oi=(Ar[0]-ii[0])/Hr,Ai=(Ar[1]-ii[1])/Hr;return(Ai>=.12&&Ai<.234&&oi>=-.425&&oi<-.214?fr:Ai>=.166&&Ai<.234&&oi>=-.214&&oi<-.115?kr:Qn).invert(Ar)},Sr.stream=function(Ar){return bt&&Ht===Ar?bt:(Hr=[Qn.stream(Ht=Ar),fr.stream(Ar),kr.stream(Ar)],ii=Hr.length,bt={point:function(oi,Ai){for(var lr=-1;++lr<ii;)Hr[lr].point(oi,Ai)},sphere:function(){for(var oi=-1;++oi<ii;)Hr[oi].sphere()},lineStart:function(){for(var oi=-1;++oi<ii;)Hr[oi].lineStart()},lineEnd:function(){for(var oi=-1;++oi<ii;)Hr[oi].lineEnd()},polygonStart:function(){for(var oi=-1;++oi<ii;)Hr[oi].polygonStart()},polygonEnd:function(){for(var oi=-1;++oi<ii;)Hr[oi].polygonEnd()}});var Hr,ii},Sr.precision=function(Ar){return arguments.length?(Qn.precision(Ar),fr.precision(Ar),kr.precision(Ar),Vr()):Qn.precision()},Sr.scale=function(Ar){return arguments.length?(Qn.scale(Ar),fr.scale(.35*Ar),kr.scale(Ar),Sr.translate(Qn.translate())):Qn.scale()},Sr.translate=function(Ar){if(!arguments.length)return Qn.translate();var Hr=Qn.scale(),ii=+Ar[0],oi=+Ar[1];return _n=Qn.translate(Ar).clipExtent([[ii-.455*Hr,oi-.238*Hr],[ii+.455*Hr,oi+.238*Hr]]).stream(_r),Kt=fr.translate([ii-.307*Hr,oi+.201*Hr]).clipExtent([[ii-.425*Hr+n,oi+.12*Hr+n],[ii-.214*Hr-n,oi+.234*Hr-n]]).stream(_r),wn=kr.translate([ii-.205*Hr,oi+.212*Hr]).clipExtent([[ii-.214*Hr+n,oi+.166*Hr+n],[ii-.115*Hr-n,oi+.234*Hr-n]]).stream(_r),Vr()},Sr.fitExtent=function(Ar,Hr){return Ge(Sr,Ar,Hr)},Sr.fitSize=function(Ar,Hr){return rt(Sr,Ar,Hr)},Sr.fitWidth=function(Ar,Hr){return pt(Sr,Ar,Hr)},Sr.fitHeight=function(Ar,Hr){return wt(Sr,Ar,Hr)},Sr.scale(1070)},g.geoArea=function(bt){return G.reset(),Q(bt,ie),2*G},g.geoAzimuthalEqualArea=function(){return yn(Kr).scale(124.75).clipAngle(179.999)},g.geoAzimuthalEqualAreaRaw=Kr,g.geoAzimuthalEquidistant=function(){return yn(ei).scale(79.4188).clipAngle(179.999)},g.geoAzimuthalEquidistantRaw=ei,g.geoBounds=function(bt){var Ht,_n,Kt,wn,Yn,Qn,fr;if(ve=Be=-(Le=Ie=1/0),Ue=[],Q(bt,cn),_n=Ue.length){for(Ue.sort(at),Ht=1,Yn=[Kt=Ue[0]];Ht<_n;++Ht)it(Kt,(wn=Ue[Ht])[0])||it(Kt,wn[1])?(Je(Kt[0],wn[1])>Je(Kt[0],Kt[1])&&(Kt[1]=wn[1]),Je(wn[0],Kt[1])>Je(Kt[0],Kt[1])&&(Kt[0]=wn[0])):Yn.push(Kt=wn);for(Qn=-1/0,Ht=0,Kt=Yn[_n=Yn.length-1];Ht<=_n;Kt=wn,++Ht)(fr=Je(Kt[1],(wn=Yn[Ht])[0]))>Qn&&(Qn=fr,Le=wn[0],Be=Kt[1])}return Ue=He=null,Le===1/0||Ie===1/0?[[NaN,NaN],[NaN,NaN]]:[[Le,Ie],[Be,ve]]},g.geoCentroid=function(bt){Ke=st=Ve=$e=Qe=tt=ut=xt=kt=Bt=Rt=0,Q(bt,yt);var Ht=kt,_n=Bt,Kt=Rt,wn=Ht*Ht+_n*_n+Kt*Kt;return wn<1e-12&&(Ht=tt,_n=ut,Kt=xt,st<n&&(Ht=Ve,_n=$e,Kt=Qe),(wn=Ht*Ht+_n*_n+Kt*Kt)<1e-12)?[NaN,NaN]:[h(_n,Ht)*i,R(Kt/E(wn))*i]},g.geoCircle=function(){var bt,Ht,_n=dt([0,0]),Kt=dt(90),wn=dt(6),Yn={point:function(fr,kr){bt.push(fr=Ht(fr,kr)),fr[0]*=i,fr[1]*=i}};function Qn(){var fr=_n.apply(this,arguments),kr=Kt.apply(this,arguments)*c,_r=wn.apply(this,arguments)*c;return bt=[],Ht=Xt(-fr[0]*c,-fr[1]*c,0).invert,gn(Yn,kr,_r,1),fr={type:"Polygon",coordinates:[bt]},bt=Ht=null,fr}return Qn.center=function(fr){return arguments.length?(_n="function"==typeof fr?fr:dt([+fr[0],+fr[1]]),Qn):_n},Qn.radius=function(fr){return arguments.length?(Kt="function"==typeof fr?fr:dt(+fr),Qn):Kt},Qn.precision=function(fr){return arguments.length?(wn="function"==typeof fr?fr:dt(+fr),Qn):wn},Qn},g.geoClipAntimeridian=Br,g.geoClipCircle=Dr,g.geoClipExtent=function(){var bt,Ht,_n,Kt=0,wn=0,Yn=960,Qn=500;return _n={stream:function(fr){return bt&&Ht===fr?bt:bt=Rr(Kt,wn,Yn,Qn)(Ht=fr)},extent:function(fr){return arguments.length?(Kt=+fr[0][0],wn=+fr[0][1],Yn=+fr[1][0],Qn=+fr[1][1],bt=Ht=null,_n):[[Kt,wn],[Yn,Qn]]}}},g.geoClipRectangle=Rr,g.geoConicConformal=function(){return Ln(na).scale(109.5).parallels([30,30])},g.geoConicConformalRaw=na,g.geoConicEqualArea=Zn,g.geoConicEqualAreaRaw=In,g.geoConicEquidistant=function(){return Ln(Ta).scale(131.154).center([0,13.9389])},g.geoConicEquidistantRaw=Ta,g.geoContains=function(bt,Ht){return(bt&&jt.hasOwnProperty(bt.type)?jt[bt.type]:Sn)(bt,Ht)},g.geoDistance=Jn,g.geoEqualEarth=function(){return yn(qo).scale(177.158)},g.geoEqualEarthRaw=qo,g.geoEquirectangular=function(){return yn(Ji).scale(152.63)},g.geoEquirectangularRaw=Ji,g.geoGnomonic=function(){return yn(is).scale(144.049).clipAngle(60)},g.geoGnomonicRaw=is,g.geoGraticule=Gn,g.geoGraticule10=function(){return Gn()()},g.geoIdentity=function(){var bt,Ht,_n,Kt,wn,Yn,Qn,fr=1,kr=0,_r=0,Sr=1,Vr=1,Ar=0,Hr=null,ii=1,oi=1,Ai=Qa({point:function(li,_i){var Yi=$r([li,_i]);this.stream.point(Yi[0],Yi[1])}}),lr=or;function Ti(){return ii=fr*Sr,oi=fr*Vr,Yn=Qn=null,$r}function $r(li){var _i=li[0]*ii,Yi=li[1]*oi;if(Ar){var sa=Yi*bt-_i*Ht;_i=_i*bt+Yi*Ht,Yi=sa}return[_i+kr,Yi+_r]}return $r.invert=function(li){var _i=li[0]-kr,Yi=li[1]-_r;if(Ar){var sa=Yi*bt+_i*Ht;_i=_i*bt-Yi*Ht,Yi=sa}return[_i/ii,Yi/oi]},$r.stream=function(li){return Yn&&Qn===li?Yn:Yn=Ai(lr(Qn=li))},$r.postclip=function(li){return arguments.length?(lr=li,Hr=_n=Kt=wn=null,Ti()):lr},$r.clipExtent=function(li){return arguments.length?(lr=null==li?(Hr=_n=Kt=wn=null,or):Rr(Hr=+li[0][0],_n=+li[0][1],Kt=+li[1][0],wn=+li[1][1]),Ti()):null==Hr?null:[[Hr,_n],[Kt,wn]]},$r.scale=function(li){return arguments.length?(fr=+li,Ti()):fr},$r.translate=function(li){return arguments.length?(kr=+li[0],_r=+li[1],Ti()):[kr,_r]},$r.angle=function(li){return arguments.length?(Ht=M(Ar=li%360*c),bt=d(Ar),Ti()):Ar*i},$r.reflectX=function(li){return arguments.length?(Sr=li?-1:1,Ti()):Sr<0},$r.reflectY=function(li){return arguments.length?(Vr=li?-1:1,Ti()):Vr<0},$r.fitExtent=function(li,_i){return Ge($r,li,_i)},$r.fitSize=function(li,_i){return rt($r,li,_i)},$r.fitWidth=function(li,_i){return pt($r,li,_i)},$r.fitHeight=function(li,_i){return wt($r,li,_i)},$r},g.geoInterpolate=function(bt,Ht){var _n=bt[0]*c,Kt=bt[1]*c,wn=Ht[0]*c,Yn=Ht[1]*c,Qn=d(Kt),fr=M(Kt),kr=d(Yn),_r=M(Yn),Sr=Qn*d(_n),Vr=Qn*M(_n),Ar=kr*d(wn),Hr=kr*M(wn),ii=2*R(E(O(Yn-Kt)+Qn*kr*O(wn-_n))),oi=M(ii),Ai=ii?function(lr){var Ti=M(lr*=ii)/oi,$r=M(ii-lr)/oi,li=$r*Sr+Ti*Ar,_i=$r*Vr+Ti*Hr,Yi=$r*fr+Ti*_r;return[h(_i,li)*i,h(Yi,E(li*li+_i*_i))*i]}:function(){return[_n*i,Kt*i]};return Ai.distance=ii,Ai},g.geoLength=Pr,g.geoMercator=function(){return zi(Ur).scale(961/u)},g.geoMercatorRaw=Ur,g.geoNaturalEarth1=function(){return yn(ls).scale(175.295)},g.geoNaturalEarth1Raw=ls,g.geoOrthographic=function(){return yn(us).scale(249.5).clipAngle(90+n)},g.geoOrthographicRaw=us,g.geoPath=function(bt,Ht){var _n,Kt,wn=4.5;function Yn(Qn){return Qn&&("function"==typeof wn&&Kt.pointRadius(+wn.apply(this,arguments)),Q(Qn,_n(Kt))),Kt.result()}return Yn.area=function(Qn){return Q(Qn,_n(Yr)),Yr.result()},Yn.measure=function(Qn){return Q(Qn,_n(Ko)),Ko.result()},Yn.bounds=function(Qn){return Q(Qn,_n(Ia)),Ia.result()},Yn.centroid=function(Qn){return Q(Qn,_n(za)),za.result()},Yn.projection=function(Qn){return arguments.length?(_n=null==Qn?(bt=null,or):(bt=Qn).stream,Yn):bt},Yn.context=function(Qn){return arguments.length?(Kt=null==Qn?(Ht=null,new Ms):new Il(Ht=Qn),"function"!=typeof wn&&Kt.pointRadius(wn),Yn):Ht},Yn.pointRadius=function(Qn){return arguments.length?(wn="function"==typeof Qn?Qn:(Kt.pointRadius(+Qn),+Qn),Yn):wn},Yn.projection(bt).context(Ht)},g.geoProjection=yn,g.geoProjectionMutator=mn,g.geoRotation=qn,g.geoStereographic=function(){return yn(cs).scale(250).clipAngle(142)},g.geoStereographicRaw=cs,g.geoStream=Q,g.geoTransform=function(bt){return{stream:Qa(bt)}},g.geoTransverseMercator=function(){var bt=zi(ba),Ht=bt.center,_n=bt.rotate;return bt.center=function(Kt){return arguments.length?Ht([-Kt[1],Kt[0]]):[(Kt=Ht())[1],-Kt[0]]},bt.rotate=function(Kt){return arguments.length?_n([Kt[0],Kt[1],Kt.length>2?Kt[2]+90:90]):[(Kt=_n())[0],Kt[1],Kt[2]-90]},_n([0,0,90]).scale(159.155)},g.geoTransverseMercatorRaw=ba,Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==oe?m(ae,x("d3-array")):m((g=g||self).d3=g.d3||{},g.d3)},{"d3-array":107}],115:[function(x,oe,ae){var g,m;g=this,m=function(g){"use strict";function m(he,xe){return he.parent===xe.parent?1:2}function w(he,xe){return he+xe.x}function y(he,xe){return Math.max(he,xe.y)}function e(he){var xe=0,ge=he.children,_e=ge&&ge.length;if(_e)for(;--_e>=0;)xe+=ge[_e].value;else xe=1;he.value=xe}function r(he,xe){var ge,_e,Ce,Le,Ie,Be=new p(he),ve=+he.value&&(Be.value=he.value),Te=[Be];for(null==xe&&(xe=n);ge=Te.pop();)if(ve&&(ge.value=+ge.data.value),(Ce=xe(ge.data))&&(Ie=Ce.length))for(ge.children=new Array(Ie),Le=Ie-1;Le>=0;--Le)Te.push(_e=ge.children[Le]=new p(Ce[Le])),_e.parent=ge,_e.depth=ge.depth+1;return Be.eachBefore(t)}function n(he){return he.children}function a(he){he.data=he.data.data}function t(he){var xe=0;do{he.height=xe}while((he=he.parent)&&he.height<++xe)}function p(he){this.data=he,this.depth=this.height=0,this.parent=null}p.prototype=r.prototype={constructor:p,count:function(){return this.eachAfter(e)},each:function(he){var xe,ge,_e,Ce,Le=this,Ie=[Le];do{for(xe=Ie.reverse(),Ie=[];Le=xe.pop();)if(he(Le),ge=Le.children)for(_e=0,Ce=ge.length;_e<Ce;++_e)Ie.push(ge[_e])}while(Ie.length);return this},eachAfter:function(he){for(var xe,ge,_e,Ce=this,Le=[Ce],Ie=[];Ce=Le.pop();)if(Ie.push(Ce),xe=Ce.children)for(ge=0,_e=xe.length;ge<_e;++ge)Le.push(xe[ge]);for(;Ce=Ie.pop();)he(Ce);return this},eachBefore:function(he){for(var xe,ge,_e=this,Ce=[_e];_e=Ce.pop();)if(he(_e),xe=_e.children)for(ge=xe.length-1;ge>=0;--ge)Ce.push(xe[ge]);return this},sum:function(he){return this.eachAfter(function(xe){for(var ge=+he(xe.data)||0,_e=xe.children,Ce=_e&&_e.length;--Ce>=0;)ge+=_e[Ce].value;xe.value=ge})},sort:function(he){return this.eachBefore(function(xe){xe.children&&xe.children.sort(he)})},path:function(he){for(var xe=this,ge=function(Le,Ie){if(Le===Ie)return Le;var Be=Le.ancestors(),ve=Ie.ancestors(),Te=null;for(Le=Be.pop(),Ie=ve.pop();Le===Ie;)Te=Le,Le=Be.pop(),Ie=ve.pop();return Te}(xe,he),_e=[xe];xe!==ge;)_e.push(xe=xe.parent);for(var Ce=_e.length;he!==ge;)_e.splice(Ce,0,he),he=he.parent;return _e},ancestors:function(){for(var he=this,xe=[he];he=he.parent;)xe.push(he);return xe},descendants:function(){var he=[];return this.each(function(xe){he.push(xe)}),he},leaves:function(){var he=[];return this.eachBefore(function(xe){xe.children||he.push(xe)}),he},links:function(){var he=this,xe=[];return he.each(function(ge){ge!==he&&xe.push({source:ge.parent,target:ge})}),xe},copy:function(){return r(this).eachBefore(a)}};var u=Array.prototype.slice;function i(he){for(var xe,ge,_e=0,Ce=(he=function(Ie){for(var Be,ve,Te=Ie.length;Te;)ve=Math.random()*Te--|0,Be=Ie[Te],Ie[Te]=Ie[ve],Ie[ve]=Be;return Ie}(u.call(he))).length,Le=[];_e<Ce;)xe=he[_e],ge&&l(ge,xe)?++_e:(ge=d(Le=c(Le,xe)),_e=0);return ge}function c(he,xe){var ge,_e;if(h(xe,he))return[xe];for(ge=0;ge<he.length;++ge)if(f(xe,he[ge])&&h(o(he[ge],xe),he))return[he[ge],xe];for(ge=0;ge<he.length-1;++ge)for(_e=ge+1;_e<he.length;++_e)if(f(o(he[ge],he[_e]),xe)&&f(o(he[ge],xe),he[_e])&&f(o(he[_e],xe),he[ge])&&h(_(he[ge],he[_e],xe),he))return[he[ge],he[_e],xe];throw new Error}function f(he,xe){var ge=he.r-xe.r,_e=xe.x-he.x,Ce=xe.y-he.y;return ge<0||ge*ge<_e*_e+Ce*Ce}function l(he,xe){var ge=he.r-xe.r+1e-6,_e=xe.x-he.x,Ce=xe.y-he.y;return ge>0&&ge*ge>_e*_e+Ce*Ce}function h(he,xe){for(var ge=0;ge<xe.length;++ge)if(!l(he,xe[ge]))return!1;return!0}function d(he){switch(he.length){case 1:return{x:(xe=he[0]).x,y:xe.y,r:xe.r};case 2:return o(he[0],he[1]);case 3:return _(he[0],he[1],he[2])}var xe}function o(he,xe){var ge=he.x,_e=he.y,Ce=he.r,Le=xe.x,Ie=xe.y,Be=xe.r,ve=Le-ge,Te=Ie-_e,Pe=Be-Ce,De=Math.sqrt(ve*ve+Te*Te);return{x:(ge+Le+ve/De*Pe)/2,y:(_e+Ie+Te/De*Pe)/2,r:(De+Ce+Be)/2}}function _(he,xe,ge){var _e=he.x,Ce=he.y,Le=he.r,Ie=xe.x,Be=xe.y,ve=xe.r,Te=ge.x,Pe=ge.y,De=ge.r,Fe=_e-Ie,Ue=_e-Te,He=Ce-Be,Ke=Ce-Pe,st=ve-Le,Ve=De-Le,$e=_e*_e+Ce*Ce-Le*Le,Qe=$e-Ie*Ie-Be*Be+ve*ve,tt=$e-Te*Te-Pe*Pe+De*De,ut=Ue*He-Fe*Ke,xt=(He*tt-Ke*Qe)/(2*ut)-_e,kt=(Ke*st-He*Ve)/ut,Bt=(Ue*Qe-Fe*tt)/(2*ut)-Ce,Rt=(Fe*Ve-Ue*st)/ut,ft=kt*kt+Rt*Rt-1,lt=2*(Le+xt*kt+Bt*Rt),Ft=xt*xt+Bt*Bt-Le*Le,Jt=-(ft?(lt+Math.sqrt(lt*lt-4*ft*Ft))/(2*ft):Ft/lt);return{x:_e+xt+kt*Jt,y:Ce+Bt+Rt*Jt,r:Jt}}function s(he,xe,ge){var _e,Ce,Le,Ie,Be=he.x-xe.x,ve=he.y-xe.y,Te=Be*Be+ve*ve;Te?(Ce=xe.r+ge.r,Ie=he.r+ge.r,(Ce*=Ce)>(Ie*=Ie)?(_e=(Te+Ie-Ce)/(2*Te),Le=Math.sqrt(Math.max(0,Ie/Te-_e*_e)),ge.x=he.x-_e*Be-Le*ve,ge.y=he.y-_e*ve+Le*Be):(_e=(Te+Ce-Ie)/(2*Te),Le=Math.sqrt(Math.max(0,Ce/Te-_e*_e)),ge.x=xe.x+_e*Be-Le*ve,ge.y=xe.y+_e*ve+Le*Be)):(ge.x=xe.x+ge.r,ge.y=xe.y)}function k(he,xe){var ge=he.r+xe.r-1e-6,_e=xe.x-he.x,Ce=xe.y-he.y;return ge>0&&ge*ge>_e*_e+Ce*Ce}function M(he){var xe=he._,ge=he.next._,_e=xe.r+ge.r,Ce=(xe.x*ge.r+ge.x*xe.r)/_e,Le=(xe.y*ge.r+ge.y*xe.r)/_e;return Ce*Ce+Le*Le}function A(he){this._=he,this.next=null,this.previous=null}function E(he){if(!(Ce=he.length))return 0;var xe,ge,_e,Ce,Le,Ie,Be,ve,Te,Pe,De;if((xe=he[0]).x=0,xe.y=0,!(Ce>1))return xe.r;if(xe.x=-(ge=he[1]).r,ge.x=xe.r,ge.y=0,!(Ce>2))return xe.r+ge.r;s(ge,xe,_e=he[2]),xe=new A(xe),ge=new A(ge),_e=new A(_e),xe.next=_e.previous=ge,ge.next=xe.previous=_e,_e.next=ge.previous=xe;e:for(Be=3;Be<Ce;++Be){s(xe._,ge._,_e=he[Be]),_e=new A(_e),ve=ge.next,Te=xe.previous,Pe=ge._.r,De=xe._.r;do{if(Pe<=De){if(k(ve._,_e._)){xe.next=ge=ve,ge.previous=xe,--Be;continue e}Pe+=ve._.r,ve=ve.next}else{if(k(Te._,_e._)){(xe=Te).next=ge,ge.previous=xe,--Be;continue e}De+=Te._.r,Te=Te.previous}}while(ve!==Te.next);for(_e.previous=xe,_e.next=ge,xe.next=ge.previous=ge=_e,Le=M(xe);(_e=_e.next)!==ge;)(Ie=M(_e))<Le&&(xe=_e,Le=Ie);ge=xe.next}for(xe=[ge._],_e=ge;(_e=_e.next)!==ge;)xe.push(_e._);for(_e=i(xe),Be=0;Be<Ce;++Be)(xe=he[Be]).x-=_e.x,xe.y-=_e.y;return _e.r}function I(he){return null==he?null:C(he)}function C(he){if("function"!=typeof he)throw new Error;return he}function R(){return 0}function O(he){return function(){return he}}function D(he){return Math.sqrt(he.value)}function L(he){return function(xe){xe.children||(xe.r=Math.max(0,+he(xe)||0))}}function B(he,xe){return function(ge){if(_e=ge.children){var _e,Ce,Le,Ie=_e.length,Be=he(ge)*xe||0;if(Be)for(Ce=0;Ce<Ie;++Ce)_e[Ce].r+=Be;if(Le=E(_e),Be)for(Ce=0;Ce<Ie;++Ce)_e[Ce].r-=Be;ge.r=Le+Be}}}function j(he){return function(xe){var ge=xe.parent;xe.r*=he,ge&&(xe.x=ge.x+he*xe.x,xe.y=ge.y+he*xe.y)}}function W(he){he.x0=Math.round(he.x0),he.y0=Math.round(he.y0),he.x1=Math.round(he.x1),he.y1=Math.round(he.y1)}function Y(he,xe,ge,_e,Ce){for(var Le,Ie=he.children,Be=-1,ve=Ie.length,Te=he.value&&(_e-xe)/he.value;++Be<ve;)(Le=Ie[Be]).y0=ge,Le.y1=Ce,Le.x0=xe,Le.x1=xe+=Le.value*Te}var Q={depth:-1},ne={};function X(he){return he.id}function $(he){return he.parentId}function re(he,xe){return he.parent===xe.parent?1:2}function H(he){var xe=he.children;return xe?xe[0]:he.t}function U(he){var xe=he.children;return xe?xe[xe.length-1]:he.t}function G(he,xe,ge){var _e=ge/(xe.i-he.i);xe.c-=_e,xe.s+=ge,he.c+=_e,xe.z+=ge,xe.m+=ge}function ie(he,xe,ge){return he.a.parent===xe.parent?he.a:ge}function q(he,xe){this._=he,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=xe}function ee(he,xe,ge,_e,Ce){for(var Le,Ie=he.children,Be=-1,ve=Ie.length,Te=he.value&&(Ce-ge)/he.value;++Be<ve;)(Le=Ie[Be]).x0=xe,Le.x1=_e,Le.y0=ge,Le.y1=ge+=Le.value*Te}q.prototype=Object.create(p.prototype);var te=(1+Math.sqrt(5))/2;function se(he,xe,ge,_e,Ce,Le){for(var Ie,Be,ve,Te,Pe,De,Fe,Ue,He,Ke,st,Ve=[],$e=xe.children,Qe=0,tt=0,ut=$e.length,xt=xe.value;Qe<ut;){ve=Ce-ge,Te=Le-_e;do{Pe=$e[tt++].value}while(!Pe&&tt<ut);for(De=Fe=Pe,st=Pe*Pe*(Ke=Math.max(Te/ve,ve/Te)/(xt*he)),He=Math.max(Fe/st,st/De);tt<ut;++tt){if(Pe+=Be=$e[tt].value,Be<De&&(De=Be),Be>Fe&&(Fe=Be),st=Pe*Pe*Ke,(Ue=Math.max(Fe/st,st/De))>He){Pe-=Be;break}He=Ue}Ve.push(Ie={value:Pe,dice:ve<Te,children:$e.slice(Qe,tt)}),Ie.dice?Y(Ie,ge,_e,Ce,xt?_e+=Te*Pe/xt:Le):ee(Ie,ge,_e,xt?ge+=ve*Pe/xt:Ce,Le),xt-=Pe,Qe=tt}return Ve}var ue=function he(xe){function ge(_e,Ce,Le,Ie,Be){se(xe,_e,Ce,Le,Ie,Be)}return ge.ratio=function(_e){return he((_e=+_e)>1?_e:1)},ge}(te),de=function he(xe){function ge(_e,Ce,Le,Ie,Be){if((ve=_e._squarify)&&ve.ratio===xe)for(var ve,Te,Pe,De,Fe,Ue=-1,He=ve.length,Ke=_e.value;++Ue<He;){for(Pe=(Te=ve[Ue]).children,De=Te.value=0,Fe=Pe.length;De<Fe;++De)Te.value+=Pe[De].value;Te.dice?Y(Te,Ce,Le,Ie,Le+=(Be-Le)*Te.value/Ke):ee(Te,Ce,Le,Ce+=(Ie-Ce)*Te.value/Ke,Be),Ke-=Te.value}else _e._squarify=ve=se(xe,_e,Ce,Le,Ie,Be),ve.ratio=xe}return ge.ratio=function(_e){return he((_e=+_e)>1?_e:1)},ge}(te);g.cluster=function(){var he=m,xe=1,ge=1,_e=!1;function Ce(Le){var Ie,Be=0;Le.eachAfter(function(Fe){var He,Ue=Fe.children;Ue?(Fe.x=(He=Ue).reduce(w,0)/He.length,Fe.y=function(He){return 1+He.reduce(y,0)}(Ue)):(Fe.x=Ie?Be+=he(Fe,Ie):0,Fe.y=0,Ie=Fe)});var ve=function(Fe){for(var Ue;Ue=Fe.children;)Fe=Ue[0];return Fe}(Le),Te=function(Fe){for(var Ue;Ue=Fe.children;)Fe=Ue[Ue.length-1];return Fe}(Le),Pe=ve.x-he(ve,Te)/2,De=Te.x+he(Te,ve)/2;return Le.eachAfter(_e?function(Fe){Fe.x=(Fe.x-Le.x)*xe,Fe.y=(Le.y-Fe.y)*ge}:function(Fe){Fe.x=(Fe.x-Pe)/(De-Pe)*xe,Fe.y=(1-(Le.y?Fe.y/Le.y:1))*ge})}return Ce.separation=function(Le){return arguments.length?(he=Le,Ce):he},Ce.size=function(Le){return arguments.length?(_e=!1,xe=+Le[0],ge=+Le[1],Ce):_e?null:[xe,ge]},Ce.nodeSize=function(Le){return arguments.length?(_e=!0,xe=+Le[0],ge=+Le[1],Ce):_e?[xe,ge]:null},Ce},g.hierarchy=r,g.pack=function(){var he=null,xe=1,ge=1,_e=R;function Ce(Le){return Le.x=xe/2,Le.y=ge/2,he?Le.eachBefore(L(he)).eachAfter(B(_e,.5)).eachBefore(j(1)):Le.eachBefore(L(D)).eachAfter(B(R,1)).eachAfter(B(_e,Le.r/Math.min(xe,ge))).eachBefore(j(Math.min(xe,ge)/(2*Le.r))),Le}return Ce.radius=function(Le){return arguments.length?(he=I(Le),Ce):he},Ce.size=function(Le){return arguments.length?(xe=+Le[0],ge=+Le[1],Ce):[xe,ge]},Ce.padding=function(Le){return arguments.length?(_e="function"==typeof Le?Le:O(+Le),Ce):_e},Ce},g.packEnclose=i,g.packSiblings=function(he){return E(he),he},g.partition=function(){var he=1,xe=1,ge=0,_e=!1;function Ce(Le){var Be,ve,Ie=Le.height+1;return Le.x0=Le.y0=ge,Le.x1=he,Le.y1=xe/Ie,Le.eachBefore((Be=xe,ve=Ie,function(Te){Te.children&&Y(Te,Te.x0,Be*(Te.depth+1)/ve,Te.x1,Be*(Te.depth+2)/ve);var Pe=Te.x0,De=Te.y0,Fe=Te.x1-ge,Ue=Te.y1-ge;Fe<Pe&&(Pe=Fe=(Pe+Fe)/2),Ue<De&&(De=Ue=(De+Ue)/2),Te.x0=Pe,Te.y0=De,Te.x1=Fe,Te.y1=Ue})),_e&&Le.eachBefore(W),Le}return Ce.round=function(Le){return arguments.length?(_e=!!Le,Ce):_e},Ce.size=function(Le){return arguments.length?(he=+Le[0],xe=+Le[1],Ce):[he,xe]},Ce.padding=function(Le){return arguments.length?(ge=+Le,Ce):ge},Ce},g.stratify=function(){var he=X,xe=$;function ge(_e){var Ce,Le,Ie,Be,ve,Te,Pe,De=_e.length,Fe=new Array(De),Ue={};for(Le=0;Le<De;++Le)ve=Fe[Le]=new p(Ce=_e[Le]),null!=(Te=he(Ce,Le,_e))&&(Te+="")&&(Ue[Pe="$"+(ve.id=Te)]=Pe in Ue?ne:ve);for(Le=0;Le<De;++Le)if(ve=Fe[Le],null!=(Te=xe(_e[Le],Le,_e))&&(Te+="")){if(!(Be=Ue["$"+Te]))throw new Error("missing: "+Te);if(Be===ne)throw new Error("ambiguous: "+Te);Be.children?Be.children.push(ve):Be.children=[ve],ve.parent=Be}else{if(Ie)throw new Error("multiple roots");Ie=ve}if(!Ie)throw new Error("no root");if(Ie.parent=Q,Ie.eachBefore(function(He){He.depth=He.parent.depth+1,--De}).eachBefore(t),Ie.parent=null,De>0)throw new Error("cycle");return Ie}return ge.id=function(_e){return arguments.length?(he=C(_e),ge):he},ge.parentId=function(_e){return arguments.length?(xe=C(_e),ge):xe},ge},g.tree=function(){var he=re,xe=1,ge=1,_e=null;function Ce(ve){var Te=function(Ve){for(var $e,Qe,tt,ut,xt,kt=new q(Ve,0),Bt=[kt];$e=Bt.pop();)if(tt=$e._.children)for($e.children=new Array(xt=tt.length),ut=xt-1;ut>=0;--ut)Bt.push(Qe=$e.children[ut]=new q(tt[ut],ut)),Qe.parent=$e;return(kt.parent=new q(null,0)).children=[kt],kt}(ve);if(Te.eachAfter(Le),Te.parent.m=-Te.z,Te.eachBefore(Ie),_e)ve.eachBefore(Be);else{var Pe=ve,De=ve,Fe=ve;ve.eachBefore(function(Ve){Ve.x<Pe.x&&(Pe=Ve),Ve.x>De.x&&(De=Ve),Ve.depth>Fe.depth&&(Fe=Ve)});var Ue=Pe===De?1:he(Pe,De)/2,He=Ue-Pe.x,Ke=xe/(De.x+Ue+He),st=ge/(Fe.depth||1);ve.eachBefore(function(Ve){Ve.x=(Ve.x+He)*Ke,Ve.y=Ve.depth*st})}return ve}function Le(ve){var Te=ve.children,Pe=ve.parent.children,De=ve.i?Pe[ve.i-1]:null;if(Te){!function(Ue){for(var He,Ke=0,st=0,Ve=Ue.children,$e=Ve.length;--$e>=0;)(He=Ve[$e]).z+=Ke,He.m+=Ke,Ke+=He.s+(st+=He.c)}(ve);var Fe=(Te[0].z+Te[Te.length-1].z)/2;De?(ve.z=De.z+he(ve._,De._),ve.m=ve.z-Fe):ve.z=Fe}else De&&(ve.z=De.z+he(ve._,De._));ve.parent.A=function(Ue,He,Ke){if(He){for(var st,Ve=Ue,$e=Ue,Qe=He,tt=Ve.parent.children[0],ut=Ve.m,xt=$e.m,kt=Qe.m,Bt=tt.m;Qe=U(Qe),Ve=H(Ve),Qe&&Ve;)tt=H(tt),($e=U($e)).a=Ue,(st=Qe.z+kt-Ve.z-ut+he(Qe._,Ve._))>0&&(G(ie(Qe,Ue,Ke),Ue,st),ut+=st,xt+=st),kt+=Qe.m,ut+=Ve.m,Bt+=tt.m,xt+=$e.m;Qe&&!U($e)&&($e.t=Qe,$e.m+=kt-xt),Ve&&!H(tt)&&(tt.t=Ve,tt.m+=ut-Bt,Ke=Ue)}return Ke}(ve,De,ve.parent.A||Pe[0])}function Ie(ve){ve._.x=ve.z+ve.parent.m,ve.m+=ve.parent.m}function Be(ve){ve.x*=xe,ve.y=ve.depth*ge}return Ce.separation=function(ve){return arguments.length?(he=ve,Ce):he},Ce.size=function(ve){return arguments.length?(_e=!1,xe=+ve[0],ge=+ve[1],Ce):_e?null:[xe,ge]},Ce.nodeSize=function(ve){return arguments.length?(_e=!0,xe=+ve[0],ge=+ve[1],Ce):_e?[xe,ge]:null},Ce},g.treemap=function(){var he=ue,xe=!1,ge=1,_e=1,Ce=[0],Le=R,Ie=R,Be=R,ve=R,Te=R;function Pe(Fe){return Fe.x0=Fe.y0=0,Fe.x1=ge,Fe.y1=_e,Fe.eachBefore(De),Ce=[0],xe&&Fe.eachBefore(W),Fe}function De(Fe){var Ue=Ce[Fe.depth],He=Fe.x0+Ue,Ke=Fe.y0+Ue,st=Fe.x1-Ue,Ve=Fe.y1-Ue;st<He&&(He=st=(He+st)/2),Ve<Ke&&(Ke=Ve=(Ke+Ve)/2),Fe.x0=He,Fe.y0=Ke,Fe.x1=st,Fe.y1=Ve,Fe.children&&(Ue=Ce[Fe.depth+1]=Le(Fe)/2,He+=Te(Fe)-Ue,Ke+=Ie(Fe)-Ue,(st-=Be(Fe)-Ue)<He&&(He=st=(He+st)/2),(Ve-=ve(Fe)-Ue)<Ke&&(Ke=Ve=(Ke+Ve)/2),he(Fe,He,Ke,st,Ve))}return Pe.round=function(Fe){return arguments.length?(xe=!!Fe,Pe):xe},Pe.size=function(Fe){return arguments.length?(ge=+Fe[0],_e=+Fe[1],Pe):[ge,_e]},Pe.tile=function(Fe){return arguments.length?(he=C(Fe),Pe):he},Pe.padding=function(Fe){return arguments.length?Pe.paddingInner(Fe).paddingOuter(Fe):Pe.paddingInner()},Pe.paddingInner=function(Fe){return arguments.length?(Le="function"==typeof Fe?Fe:O(+Fe),Pe):Le},Pe.paddingOuter=function(Fe){return arguments.length?Pe.paddingTop(Fe).paddingRight(Fe).paddingBottom(Fe).paddingLeft(Fe):Pe.paddingTop()},Pe.paddingTop=function(Fe){return arguments.length?(Ie="function"==typeof Fe?Fe:O(+Fe),Pe):Ie},Pe.paddingRight=function(Fe){return arguments.length?(Be="function"==typeof Fe?Fe:O(+Fe),Pe):Be},Pe.paddingBottom=function(Fe){return arguments.length?(ve="function"==typeof Fe?Fe:O(+Fe),Pe):ve},Pe.paddingLeft=function(Fe){return arguments.length?(Te="function"==typeof Fe?Fe:O(+Fe),Pe):Te},Pe},g.treemapBinary=function(he,xe,ge,_e,Ce){var Le,Ie,Be=he.children,ve=Be.length,Te=new Array(ve+1);for(Te[0]=Ie=Le=0;Le<ve;++Le)Te[Le+1]=Ie+=Be[Le].value;!function Pe(De,Fe,Ue,He,Ke,st,Ve){if(De>=Fe-1){var $e=Be[De];return $e.x0=He,$e.y0=Ke,$e.x1=st,void($e.y1=Ve)}for(var Qe=Te[De],tt=Ue/2+Qe,ut=De+1,xt=Fe-1;ut<xt;){var kt=ut+xt>>>1;Te[kt]<tt?ut=kt+1:xt=kt}tt-Te[ut-1]<Te[ut]-tt&&De+1<ut&&--ut;var Bt=Te[ut]-Qe,Rt=Ue-Bt;if(st-He>Ve-Ke){var ft=(He*Rt+st*Bt)/Ue;Pe(De,ut,Bt,He,Ke,ft,Ve),Pe(ut,Fe,Rt,ft,Ke,st,Ve)}else{var lt=(Ke*Rt+Ve*Bt)/Ue;Pe(De,ut,Bt,He,Ke,st,lt),Pe(ut,Fe,Rt,He,lt,st,Ve)}}(0,ve,he.value,xe,ge,_e,Ce)},g.treemapDice=Y,g.treemapResquarify=de,g.treemapSlice=ee,g.treemapSliceDice=function(he,xe,ge,_e,Ce){(1&he.depth?ee:Y)(he,xe,ge,_e,Ce)},g.treemapSquarify=ue,Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ae&&void 0!==oe?ae:(g=g||self).d3=g.d3||{})},{}],116:[function(x,oe,ae){var g,m;g=this,m=function(g,m){"use strict";function w(te,se,ue,de,he){var xe=te*te,ge=xe*te;return((1-3*te+3*xe-ge)*se+(4-6*xe+3*ge)*ue+(1+3*te+3*xe-3*ge)*de+ge*he)/6}function y(te){var se=te.length-1;return function(ue){var de=ue<=0?ue=0:ue>=1?(ue=1,se-1):Math.floor(ue*se),he=te[de],xe=te[de+1];return w((ue-de/se)*se,de>0?te[de-1]:2*he-xe,he,xe,de<se-1?te[de+2]:2*xe-he)}}function e(te){var se=te.length;return function(ue){var de=Math.floor(((ue%=1)<0?++ue:ue)*se);return w((ue-de/se)*se,te[(de+se-1)%se],te[de%se],te[(de+1)%se],te[(de+2)%se])}}function r(te){return function(){return te}}function n(te,se){return function(ue){return te+ue*se}}function a(te,se){var ue=se-te;return ue?n(te,ue>180||ue<-180?ue-360*Math.round(ue/360):ue):r(isNaN(te)?se:te)}function p(te,se){var ue=se-te;return ue?n(te,ue):r(isNaN(te)?se:te)}var u=function te(se){var ue=function t(te){return 1==(te=+te)?p:function(se,ue){return ue-se?(de=se,he=ue,xe=te,de=Math.pow(de,xe),he=Math.pow(he,xe)-de,xe=1/xe,function(ge){return Math.pow(de+ge*he,xe)}):r(isNaN(se)?ue:se);var de,he,xe}}(se);function de(he,xe){var ge=ue((he=m.rgb(he)).r,(xe=m.rgb(xe)).r),_e=ue(he.g,xe.g),Ce=ue(he.b,xe.b),Le=p(he.opacity,xe.opacity);return function(Ie){return he.r=ge(Ie),he.g=_e(Ie),he.b=Ce(Ie),he.opacity=Le(Ie),he+""}}return de.gamma=te,de}(1);function i(te){return function(se){var ue,de,he=se.length,xe=new Array(he),ge=new Array(he),_e=new Array(he);for(ue=0;ue<he;++ue)de=m.rgb(se[ue]),xe[ue]=de.r||0,ge[ue]=de.g||0,_e[ue]=de.b||0;return xe=te(xe),ge=te(ge),_e=te(_e),de.opacity=1,function(Ce){return de.r=xe(Ce),de.g=ge(Ce),de.b=_e(Ce),de+""}}}var c=i(y),f=i(e);function l(te,se){se||(se=[]);var ue,de=te?Math.min(se.length,te.length):0,he=se.slice();return function(xe){for(ue=0;ue<de;++ue)he[ue]=te[ue]*(1-xe)+se[ue]*xe;return he}}function h(te){return ArrayBuffer.isView(te)&&!(te instanceof DataView)}function d(te,se){var ue,de=se?se.length:0,he=te?Math.min(de,te.length):0,xe=new Array(he),ge=new Array(de);for(ue=0;ue<he;++ue)xe[ue]=E(te[ue],se[ue]);for(;ue<de;++ue)ge[ue]=se[ue];return function(_e){for(ue=0;ue<he;++ue)ge[ue]=xe[ue](_e);return ge}}function o(te,se){var ue=new Date;return te=+te,se=+se,function(de){return ue.setTime(te*(1-de)+se*de),ue}}function _(te,se){return te=+te,se=+se,function(ue){return te*(1-ue)+se*ue}}function s(te,se){var ue,de={},he={};for(ue in null!==te&&"object"==typeof te||(te={}),null!==se&&"object"==typeof se||(se={}),se)ue in te?de[ue]=E(te[ue],se[ue]):he[ue]=se[ue];return function(xe){for(ue in de)he[ue]=de[ue](xe);return he}}var k=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,M=new RegExp(k.source,"g");function A(te,se){var ue,de,he,Le,xe=k.lastIndex=M.lastIndex=0,ge=-1,_e=[],Ce=[];for(te+="",se+="";(ue=k.exec(te))&&(de=M.exec(se));)(he=de.index)>xe&&(he=se.slice(xe,he),_e[ge]?_e[ge]+=he:_e[++ge]=he),(ue=ue[0])===(de=de[0])?_e[ge]?_e[ge]+=de:_e[++ge]=de:(_e[++ge]=null,Ce.push({i:ge,x:_(ue,de)})),xe=M.lastIndex;return xe<se.length&&(he=se.slice(xe),_e[ge]?_e[ge]+=he:_e[++ge]=he),_e.length<2?Ce[0]?(Le=Ce[0].x,function(Ie){return Le(Ie)+""}):function(Le){return function(){return Le}}(se):(se=Ce.length,function(Le){for(var Ie,Be=0;Be<se;++Be)_e[(Ie=Ce[Be]).i]=Ie.x(Le);return _e.join("")})}function E(te,se){var ue,de=typeof se;return null==se||"boolean"===de?r(se):("number"===de?_:"string"===de?(ue=m.color(se))?(se=ue,u):A:se instanceof m.color?u:se instanceof Date?o:h(se)?l:Array.isArray(se)?d:"function"!=typeof se.valueOf&&"function"!=typeof se.toString||isNaN(se)?s:_)(te,se)}var I,C,R,O,D=180/Math.PI,L={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function B(te,se,ue,de,he,xe){var ge,_e,Ce;return(ge=Math.sqrt(te*te+se*se))&&(te/=ge,se/=ge),(Ce=te*ue+se*de)&&(ue-=te*Ce,de-=se*Ce),(_e=Math.sqrt(ue*ue+de*de))&&(ue/=_e,de/=_e,Ce/=_e),te*de<se*ue&&(te=-te,se=-se,Ce=-Ce,ge=-ge),{translateX:he,translateY:xe,rotate:Math.atan2(se,te)*D,skewX:Math.atan(Ce)*D,scaleX:ge,scaleY:_e}}function j(te,se,ue,de){function he(xe){return xe.length?xe.pop()+" ":""}return function(xe,ge){var Le,Ie,Be,_e=[],Ce=[];return xe=te(xe),ge=te(ge),function(Le,Ie,Be,ve,Te,Pe){if(Le!==Be||Ie!==ve){var De=Te.push("translate(",null,se,null,ue);Pe.push({i:De-4,x:_(Le,Be)},{i:De-2,x:_(Ie,ve)})}else(Be||ve)&&Te.push("translate("+Be+se+ve+ue)}(xe.translateX,xe.translateY,ge.translateX,ge.translateY,_e,Ce),Be=_e,(Le=xe.rotate)!==(Ie=ge.rotate)?(Le-Ie>180?Ie+=360:Ie-Le>180&&(Le+=360),Ce.push({i:Be.push(he(Be)+"rotate(",null,de)-2,x:_(Le,Ie)})):Ie&&Be.push(he(Be)+"rotate("+Ie+de),function(Le,Ie,Be,ve){Le!==Ie?ve.push({i:Be.push(he(Be)+"skewX(",null,de)-2,x:_(Le,Ie)}):Ie&&Be.push(he(Be)+"skewX("+Ie+de)}(xe.skewX,ge.skewX,_e,Ce),function(Le,Ie,Be,ve,Te,Pe){if(Le!==Be||Ie!==ve){var De=Te.push(he(Te)+"scale(",null,",",null,")");Pe.push({i:De-4,x:_(Le,Be)},{i:De-2,x:_(Ie,ve)})}else 1===Be&&1===ve||Te.push(he(Te)+"scale("+Be+","+ve+")")}(xe.scaleX,xe.scaleY,ge.scaleX,ge.scaleY,_e,Ce),xe=ge=null,function(Le){for(var Ie,Be=-1,ve=Ce.length;++Be<ve;)_e[(Ie=Ce[Be]).i]=Ie.x(Le);return _e.join("")}}}var W=j(function(te){return"none"===te?L:(I||(I=document.createElement("DIV"),C=document.documentElement,R=document.defaultView),I.style.transform=te,te=R.getComputedStyle(C.appendChild(I),null).getPropertyValue("transform"),C.removeChild(I),B(+(te=te.slice(7,-1).split(","))[0],+te[1],+te[2],+te[3],+te[4],+te[5]))},"px, ","px)","deg)"),Y=j(function(te){return null==te?L:(O||(O=document.createElementNS("http://www.w3.org/2000/svg","g")),O.setAttribute("transform",te),(te=O.transform.baseVal.consolidate())?B((te=te.matrix).a,te.b,te.c,te.d,te.e,te.f):L)},", ",")",")"),Q=Math.SQRT2;function ne(te){return((te=Math.exp(te))+1/te)/2}function X(te){return function(se,ue){var de=te((se=m.hsl(se)).h,(ue=m.hsl(ue)).h),he=p(se.s,ue.s),xe=p(se.l,ue.l),ge=p(se.opacity,ue.opacity);return function(_e){return se.h=de(_e),se.s=he(_e),se.l=xe(_e),se.opacity=ge(_e),se+""}}}var $=X(a),re=X(p);function H(te){return function(se,ue){var de=te((se=m.hcl(se)).h,(ue=m.hcl(ue)).h),he=p(se.c,ue.c),xe=p(se.l,ue.l),ge=p(se.opacity,ue.opacity);return function(_e){return se.h=de(_e),se.c=he(_e),se.l=xe(_e),se.opacity=ge(_e),se+""}}}var U=H(a),G=H(p);function ie(te){return function se(ue){function de(he,xe){var ge=te((he=m.cubehelix(he)).h,(xe=m.cubehelix(xe)).h),_e=p(he.s,xe.s),Ce=p(he.l,xe.l),Le=p(he.opacity,xe.opacity);return function(Ie){return he.h=ge(Ie),he.s=_e(Ie),he.l=Ce(Math.pow(Ie,ue)),he.opacity=Le(Ie),he+""}}return ue=+ue,de.gamma=se,de}(1)}var q=ie(a),ee=ie(p);g.interpolate=E,g.interpolateArray=function(te,se){return(h(se)?l:d)(te,se)},g.interpolateBasis=y,g.interpolateBasisClosed=e,g.interpolateCubehelix=q,g.interpolateCubehelixLong=ee,g.interpolateDate=o,g.interpolateDiscrete=function(te){var se=te.length;return function(ue){return te[Math.max(0,Math.min(se-1,Math.floor(ue*se)))]}},g.interpolateHcl=U,g.interpolateHclLong=G,g.interpolateHsl=$,g.interpolateHslLong=re,g.interpolateHue=function(te,se){var ue=a(+te,+se);return function(de){var he=ue(de);return he-360*Math.floor(he/360)}},g.interpolateLab=function(te,se){var ue=p((te=m.lab(te)).l,(se=m.lab(se)).l),de=p(te.a,se.a),he=p(te.b,se.b),xe=p(te.opacity,se.opacity);return function(ge){return te.l=ue(ge),te.a=de(ge),te.b=he(ge),te.opacity=xe(ge),te+""}},g.interpolateNumber=_,g.interpolateNumberArray=l,g.interpolateObject=s,g.interpolateRgb=u,g.interpolateRgbBasis=c,g.interpolateRgbBasisClosed=f,g.interpolateRound=function(te,se){return te=+te,se=+se,function(ue){return Math.round(te*(1-ue)+se*ue)}},g.interpolateString=A,g.interpolateTransformCss=W,g.interpolateTransformSvg=Y,g.interpolateZoom=function(te,se){var ue,de,he=te[0],xe=te[1],ge=te[2],Le=se[2],Ie=se[0]-he,Be=se[1]-xe,ve=Ie*Ie+Be*Be;if(ve<1e-12)de=Math.log(Le/ge)/Q,ue=function(He){return[he+He*Ie,xe+He*Be,ge*Math.exp(Q*He*de)]};else{var Te=Math.sqrt(ve),Pe=(Le*Le-ge*ge+4*ve)/(2*ge*2*Te),De=(Le*Le-ge*ge-4*ve)/(2*Le*2*Te),Fe=Math.log(Math.sqrt(Pe*Pe+1)-Pe),Ue=Math.log(Math.sqrt(De*De+1)-De);de=(Ue-Fe)/Q,ue=function(He){var Ke,Qe,st=He*de,Ve=ne(Fe),$e=ge/(2*Te)*(Ve*(Ke=Q*st+Fe,((Ke=Math.exp(2*Ke))-1)/(Ke+1))-(Qe=Fe,((Qe=Math.exp(Qe))-1/Qe)/2));return[he+$e*Ie,xe+$e*Be,ge*Ve/ne(Q*st+Fe)]}}return ue.duration=1e3*de,ue},g.piecewise=function(te,se){for(var ue=0,de=se.length-1,he=se[0],xe=new Array(de<0?0:de);ue<de;)xe[ue]=te(he,he=se[++ue]);return function(ge){var _e=Math.max(0,Math.min(de-1,Math.floor(ge*=de)));return xe[_e](ge-_e)}},g.quantize=function(te,se){for(var ue=new Array(se),de=0;de<se;++de)ue[de]=te(de/(se-1));return ue},Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==oe?m(ae,x("d3-color")):m((g=g||self).d3=g.d3||{},g.d3)},{"d3-color":109}],117:[function(x,oe,ae){var g,m;g=this,m=function(g){"use strict";var m=Math.PI,w=2*m,y=w-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function r(){return new e}e.prototype=r.prototype={constructor:e,moveTo:function(n,a){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+a)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,a){this._+="L"+(this._x1=+n)+","+(this._y1=+a)},quadraticCurveTo:function(n,a,t,p){this._+="Q"+ +n+","+ +a+","+(this._x1=+t)+","+(this._y1=+p)},bezierCurveTo:function(n,a,t,p,u,i){this._+="C"+ +n+","+ +a+","+ +t+","+ +p+","+(this._x1=+u)+","+(this._y1=+i)},arcTo:function(n,a,t,p,u){var i=this._x1,c=this._y1,f=(t=+t)-(n=+n),l=(p=+p)-(a=+a),h=i-n,d=c-a,o=h*h+d*d;if((u=+u)<0)throw new Error("negative radius: "+u);if(null===this._x1)this._+="M"+(this._x1=n)+","+(this._y1=a);else if(o>1e-6)if(Math.abs(d*f-l*h)>1e-6&&u){var _=t-i,s=p-c,k=f*f+l*l,M=_*_+s*s,A=Math.sqrt(k),E=Math.sqrt(o),I=u*Math.tan((m-Math.acos((k+o-M)/(2*A*E)))/2),C=I/E,R=I/A;Math.abs(C-1)>1e-6&&(this._+="L"+(n+C*h)+","+(a+C*d)),this._+="A"+u+","+u+",0,0,"+ +(d*_>h*s)+","+(this._x1=n+R*f)+","+(this._y1=a+R*l)}else this._+="L"+(this._x1=n)+","+(this._y1=a)},arc:function(n,a,t,p,u,i){n=+n,a=+a,i=!!i;var c=(t=+t)*Math.cos(p),f=t*Math.sin(p),l=n+c,h=a+f,d=1^i,o=i?p-u:u-p;if(t<0)throw new Error("negative radius: "+t);null===this._x1?this._+="M"+l+","+h:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-h)>1e-6)&&(this._+="L"+l+","+h),t&&(o<0&&(o=o%w+w),o>y?this._+="A"+t+","+t+",0,1,"+d+","+(n-c)+","+(a-f)+"A"+t+","+t+",0,1,"+d+","+(this._x1=l)+","+(this._y1=h):o>1e-6&&(this._+="A"+t+","+t+",0,"+ +(o>=m)+","+d+","+(this._x1=n+t*Math.cos(u))+","+(this._y1=a+t*Math.sin(u))))},rect:function(n,a,t,p){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+a)+"h"+ +t+"v"+ +p+"h"+-t+"Z"},toString:function(){return this._}},g.path=r,Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ae&&void 0!==oe?ae:(g=g||self).d3=g.d3||{})},{}],118:[function(x,oe,ae){var g,m;g=this,m=function(g){"use strict";function m(p,u,i,c){if(isNaN(u)||isNaN(i))return p;var f,l,h,d,o,_,s,k,M,A=p._root,E={data:c},I=p._x0,C=p._y0,R=p._x1,O=p._y1;if(!A)return p._root=E,p;for(;A.length;)if((_=u>=(l=(I+R)/2))?I=l:R=l,(s=i>=(h=(C+O)/2))?C=h:O=h,f=A,!(A=A[k=s<<1|_]))return f[k]=E,p;if(d=+p._x.call(null,A.data),o=+p._y.call(null,A.data),u===d&&i===o)return E.next=A,f?f[k]=E:p._root=E,p;do{f=f?f[k]=new Array(4):p._root=new Array(4),(_=u>=(l=(I+R)/2))?I=l:R=l,(s=i>=(h=(C+O)/2))?C=h:O=h}while((k=s<<1|_)==(M=(o>=h)<<1|d>=l));return f[M]=A,f[k]=E,p}function w(p,u,i,c,f){this.node=p,this.x0=u,this.y0=i,this.x1=c,this.y1=f}function y(p){return p[0]}function e(p){return p[1]}function r(p,u,i){var c=new n(null==u?y:u,null==i?e:i,NaN,NaN,NaN,NaN);return null==p?c:c.addAll(p)}function n(p,u,i,c,f,l){this._x=p,this._y=u,this._x0=i,this._y0=c,this._x1=f,this._y1=l,this._root=void 0}function a(p){for(var u={data:p.data},i=u;p=p.next;)i=i.next={data:p.data};return u}var t=r.prototype=n.prototype;t.copy=function(){var p,u,i=new n(this._x,this._y,this._x0,this._y0,this._x1,this._y1),c=this._root;if(!c)return i;if(!c.length)return i._root=a(c),i;for(p=[{source:c,target:i._root=new Array(4)}];c=p.pop();)for(var f=0;f<4;++f)(u=c.source[f])&&(u.length?p.push({source:u,target:c.target[f]=new Array(4)}):c.target[f]=a(u));return i},t.add=function(p){var u=+this._x.call(null,p),i=+this._y.call(null,p);return m(this.cover(u,i),u,i,p)},t.addAll=function(p){var u,i,c,f,l=p.length,h=new Array(l),d=new Array(l),o=1/0,_=1/0,s=-1/0,k=-1/0;for(i=0;i<l;++i)isNaN(c=+this._x.call(null,u=p[i]))||isNaN(f=+this._y.call(null,u))||(h[i]=c,d[i]=f,c<o&&(o=c),c>s&&(s=c),f<_&&(_=f),f>k&&(k=f));if(o>s||_>k)return this;for(this.cover(o,_).cover(s,k),i=0;i<l;++i)m(this,h[i],d[i],p[i]);return this},t.cover=function(p,u){if(isNaN(p=+p)||isNaN(u=+u))return this;var i=this._x0,c=this._y0,f=this._x1,l=this._y1;if(isNaN(i))f=(i=Math.floor(p))+1,l=(c=Math.floor(u))+1;else{for(var h,d,o=f-i,_=this._root;i>p||p>=f||c>u||u>=l;)switch(d=(u<c)<<1|p<i,(h=new Array(4))[d]=_,_=h,o*=2,d){case 0:f=i+o,l=c+o;break;case 1:i=f-o,l=c+o;break;case 2:f=i+o,c=l-o;break;case 3:i=f-o,c=l-o}this._root&&this._root.length&&(this._root=_)}return this._x0=i,this._y0=c,this._x1=f,this._y1=l,this},t.data=function(){var p=[];return this.visit(function(u){if(!u.length)do{p.push(u.data)}while(u=u.next)}),p},t.extent=function(p){return arguments.length?this.cover(+p[0][0],+p[0][1]).cover(+p[1][0],+p[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},t.find=function(p,u,i){var c,f,l,h,d,o,_,s=this._x0,k=this._y0,M=this._x1,A=this._y1,E=[],I=this._root;for(I&&E.push(new w(I,s,k,M,A)),null==i?i=1/0:(s=p-i,k=u-i,M=p+i,A=u+i,i*=i);o=E.pop();)if(!(!(I=o.node)||(f=o.x0)>M||(l=o.y0)>A||(h=o.x1)<s||(d=o.y1)<k))if(I.length){var C=(f+h)/2,R=(l+d)/2;E.push(new w(I[3],C,R,h,d),new w(I[2],f,R,C,d),new w(I[1],C,l,h,R),new w(I[0],f,l,C,R)),(_=(u>=R)<<1|p>=C)&&(o=E[E.length-1],E[E.length-1]=E[E.length-1-_],E[E.length-1-_]=o)}else{var O=p-+this._x.call(null,I.data),D=u-+this._y.call(null,I.data),L=O*O+D*D;if(L<i){var B=Math.sqrt(i=L);s=p-B,k=u-B,M=p+B,A=u+B,c=I.data}}return c},t.remove=function(p){if(isNaN(l=+this._x.call(null,p))||isNaN(h=+this._y.call(null,p)))return this;var u,i,c,f,l,h,d,o,_,s,k,M,A=this._root,E=this._x0,I=this._y0,C=this._x1,R=this._y1;if(!A)return this;if(A.length)for(;;){if((_=l>=(d=(E+C)/2))?E=d:C=d,(s=h>=(o=(I+R)/2))?I=o:R=o,u=A,!(A=A[k=s<<1|_]))return this;if(!A.length)break;(u[k+1&3]||u[k+2&3]||u[k+3&3])&&(i=u,M=k)}for(;A.data!==p;)if(c=A,!(A=A.next))return this;return(f=A.next)&&delete A.next,c?(f?c.next=f:delete c.next,this):u?(f?u[k]=f:delete u[k],(A=u[0]||u[1]||u[2]||u[3])&&A===(u[3]||u[2]||u[1]||u[0])&&!A.length&&(i?i[M]=A:this._root=A),this):(this._root=f,this)},t.removeAll=function(p){for(var u=0,i=p.length;u<i;++u)this.remove(p[u]);return this},t.root=function(){return this._root},t.size=function(){var p=0;return this.visit(function(u){if(!u.length)do{++p}while(u=u.next)}),p},t.visit=function(p){var u,i,c,f,l,h,d=[],o=this._root;for(o&&d.push(new w(o,this._x0,this._y0,this._x1,this._y1));u=d.pop();)if(!p(o=u.node,c=u.x0,f=u.y0,l=u.x1,h=u.y1)&&o.length){var _=(c+l)/2,s=(f+h)/2;(i=o[3])&&d.push(new w(i,_,s,l,h)),(i=o[2])&&d.push(new w(i,c,s,_,h)),(i=o[1])&&d.push(new w(i,_,f,l,s)),(i=o[0])&&d.push(new w(i,c,f,_,s))}return this},t.visitAfter=function(p){var u,i=[],c=[];for(this._root&&i.push(new w(this._root,this._x0,this._y0,this._x1,this._y1));u=i.pop();){var f=u.node;if(f.length){var l,h=u.x0,d=u.y0,o=u.x1,_=u.y1,s=(h+o)/2,k=(d+_)/2;(l=f[0])&&i.push(new w(l,h,d,s,k)),(l=f[1])&&i.push(new w(l,s,d,o,k)),(l=f[2])&&i.push(new w(l,h,k,s,_)),(l=f[3])&&i.push(new w(l,s,k,o,_))}c.push(u)}for(;u=c.pop();)p(u.node,u.x0,u.y0,u.x1,u.y1);return this},t.x=function(p){return arguments.length?(this._x=p,this):this._x},t.y=function(p){return arguments.length?(this._y=p,this):this._y},g.quadtree=r,Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ae&&void 0!==oe?ae:(g=g||self).d3=g.d3||{})},{}],119:[function(x,oe,ae){var g,m;g=this,m=function(g,m){"use strict";function w(Ne){return function(){return Ne}}var y=Math.abs,e=Math.atan2,r=Math.cos,n=Math.max,a=Math.min,t=Math.sin,p=Math.sqrt,u=Math.PI,i=u/2,c=2*u;function f(Ne){return Ne>1?0:Ne<-1?u:Math.acos(Ne)}function l(Ne){return Ne>=1?i:Ne<=-1?-i:Math.asin(Ne)}function h(Ne){return Ne.innerRadius}function d(Ne){return Ne.outerRadius}function o(Ne){return Ne.startAngle}function _(Ne){return Ne.endAngle}function s(Ne){return Ne&&Ne.padAngle}function k(Ne,et,dt,Mt,zt,Xt,un,Qt){var kn=dt-Ne,qn=Mt-et,gn=un-zt,sn=Qt-Xt,vn=sn*kn-gn*qn;if(!(vn*vn<1e-12))return[Ne+(vn=(gn*(et-Xt)-sn*(Ne-zt))/vn)*kn,et+vn*qn]}function M(Ne,et,dt,Mt,zt,Xt,un){var Qt=Ne-dt,kn=et-Mt,qn=(un?Xt:-Xt)/p(Qt*Qt+kn*kn),gn=qn*kn,sn=-qn*Qt,vn=Ne+gn,pn=et+sn,Mn=dt+gn,Rn=Mt+sn,Xn=(vn+Mn)/2,Hn=(pn+Rn)/2,rr=Mn-vn,er=Rn-pn,Ir=rr*rr+er*er,Or=zt-Xt,ni=vn*Rn-Mn*pn,Br=(er<0?-1:1)*p(n(0,Or*Or*Ir-ni*ni)),Dr=(ni*er-rr*Br)/Ir,Rr=(-ni*rr-er*Br)/Ir,yi=(ni*er+rr*Br)/Ir,$n=(-ni*rr+er*Br)/Ir,Mr=Dr-Xn,br=Rr-Hn,ar=yi-Xn,si=$n-Hn;return Mr*Mr+br*br>ar*ar+si*si&&(Dr=yi,Rr=$n),{cx:Dr,cy:Rr,x01:-gn,y01:-sn,x11:Dr*(zt/Or-1),y11:Rr*(zt/Or-1)}}function A(Ne){this._context=Ne}function E(Ne){return new A(Ne)}function I(Ne){return Ne[0]}function C(Ne){return Ne[1]}function R(){var Ne=I,et=C,dt=w(!0),Mt=null,zt=E,Xt=null;function un(Qt){var kn,qn,gn,sn=Qt.length,vn=!1;for(null==Mt&&(Xt=zt(gn=m.path())),kn=0;kn<=sn;++kn)!(kn<sn&&dt(qn=Qt[kn],kn,Qt))===vn&&((vn=!vn)?Xt.lineStart():Xt.lineEnd()),vn&&Xt.point(+Ne(qn,kn,Qt),+et(qn,kn,Qt));if(gn)return Xt=null,gn+""||null}return un.x=function(Qt){return arguments.length?(Ne="function"==typeof Qt?Qt:w(+Qt),un):Ne},un.y=function(Qt){return arguments.length?(et="function"==typeof Qt?Qt:w(+Qt),un):et},un.defined=function(Qt){return arguments.length?(dt="function"==typeof Qt?Qt:w(!!Qt),un):dt},un.curve=function(Qt){return arguments.length?(zt=Qt,null!=Mt&&(Xt=zt(Mt)),un):zt},un.context=function(Qt){return arguments.length?(null==Qt?Mt=Xt=null:Xt=zt(Mt=Qt),un):Mt},un}function O(){var Ne=I,et=null,dt=w(0),Mt=C,zt=w(!0),Xt=null,un=E,Qt=null;function kn(gn){var sn,vn,pn,Mn,Rn,Xn=gn.length,Hn=!1,rr=new Array(Xn),er=new Array(Xn);for(null==Xt&&(Qt=un(Rn=m.path())),sn=0;sn<=Xn;++sn){if(!(sn<Xn&&zt(Mn=gn[sn],sn,gn))===Hn)if(Hn=!Hn)vn=sn,Qt.areaStart(),Qt.lineStart();else{for(Qt.lineEnd(),Qt.lineStart(),pn=sn-1;pn>=vn;--pn)Qt.point(rr[pn],er[pn]);Qt.lineEnd(),Qt.areaEnd()}Hn&&(rr[sn]=+Ne(Mn,sn,gn),er[sn]=+dt(Mn,sn,gn),Qt.point(et?+et(Mn,sn,gn):rr[sn],Mt?+Mt(Mn,sn,gn):er[sn]))}if(Rn)return Qt=null,Rn+""||null}function qn(){return R().defined(zt).curve(un).context(Xt)}return kn.x=function(gn){return arguments.length?(Ne="function"==typeof gn?gn:w(+gn),et=null,kn):Ne},kn.x0=function(gn){return arguments.length?(Ne="function"==typeof gn?gn:w(+gn),kn):Ne},kn.x1=function(gn){return arguments.length?(et=null==gn?null:"function"==typeof gn?gn:w(+gn),kn):et},kn.y=function(gn){return arguments.length?(dt="function"==typeof gn?gn:w(+gn),Mt=null,kn):dt},kn.y0=function(gn){return arguments.length?(dt="function"==typeof gn?gn:w(+gn),kn):dt},kn.y1=function(gn){return arguments.length?(Mt=null==gn?null:"function"==typeof gn?gn:w(+gn),kn):Mt},kn.lineX0=kn.lineY0=function(){return qn().x(Ne).y(dt)},kn.lineY1=function(){return qn().x(Ne).y(Mt)},kn.lineX1=function(){return qn().x(et).y(dt)},kn.defined=function(gn){return arguments.length?(zt="function"==typeof gn?gn:w(!!gn),kn):zt},kn.curve=function(gn){return arguments.length?(un=gn,null!=Xt&&(Qt=un(Xt)),kn):un},kn.context=function(gn){return arguments.length?(null==gn?Xt=Qt=null:Qt=un(Xt=gn),kn):Xt},kn}function D(Ne,et){return et<Ne?-1:et>Ne?1:et>=Ne?0:NaN}function L(Ne){return Ne}A.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ne,et){switch(Ne=+Ne,et=+et,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ne,et):this._context.moveTo(Ne,et);break;case 1:this._point=2;default:this._context.lineTo(Ne,et)}}};var B=W(E);function j(Ne){this._curve=Ne}function W(Ne){function et(dt){return new j(Ne(dt))}return et._curve=Ne,et}function Y(Ne){var et=Ne.curve;return Ne.angle=Ne.x,delete Ne.x,Ne.radius=Ne.y,delete Ne.y,Ne.curve=function(dt){return arguments.length?et(W(dt)):et()._curve},Ne}function Q(){return Y(R().curve(B))}function ne(){var Ne=O().curve(B),et=Ne.curve,dt=Ne.lineX0,Mt=Ne.lineX1,zt=Ne.lineY0,Xt=Ne.lineY1;return Ne.angle=Ne.x,delete Ne.x,Ne.startAngle=Ne.x0,delete Ne.x0,Ne.endAngle=Ne.x1,delete Ne.x1,Ne.radius=Ne.y,delete Ne.y,Ne.innerRadius=Ne.y0,delete Ne.y0,Ne.outerRadius=Ne.y1,delete Ne.y1,Ne.lineStartAngle=function(){return Y(dt())},delete Ne.lineX0,Ne.lineEndAngle=function(){return Y(Mt())},delete Ne.lineX1,Ne.lineInnerRadius=function(){return Y(zt())},delete Ne.lineY0,Ne.lineOuterRadius=function(){return Y(Xt())},delete Ne.lineY1,Ne.curve=function(un){return arguments.length?et(W(un)):et()._curve},Ne}function X(Ne,et){return[(et=+et)*Math.cos(Ne-=Math.PI/2),et*Math.sin(Ne)]}j.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Ne,et){this._curve.point(et*Math.sin(Ne),et*-Math.cos(Ne))}};var $=Array.prototype.slice;function re(Ne){return Ne.source}function H(Ne){return Ne.target}function U(Ne){var et=re,dt=H,Mt=I,zt=C,Xt=null;function un(){var Qt,kn=$.call(arguments),qn=et.apply(this,kn),gn=dt.apply(this,kn);if(Xt||(Xt=Qt=m.path()),Ne(Xt,+Mt.apply(this,(kn[0]=qn,kn)),+zt.apply(this,kn),+Mt.apply(this,(kn[0]=gn,kn)),+zt.apply(this,kn)),Qt)return Xt=null,Qt+""||null}return un.source=function(Qt){return arguments.length?(et=Qt,un):et},un.target=function(Qt){return arguments.length?(dt=Qt,un):dt},un.x=function(Qt){return arguments.length?(Mt="function"==typeof Qt?Qt:w(+Qt),un):Mt},un.y=function(Qt){return arguments.length?(zt="function"==typeof Qt?Qt:w(+Qt),un):zt},un.context=function(Qt){return arguments.length?(Xt=null==Qt?null:Qt,un):Xt},un}function G(Ne,et,dt,Mt,zt){Ne.moveTo(et,dt),Ne.bezierCurveTo(et=(et+Mt)/2,dt,et,zt,Mt,zt)}function ie(Ne,et,dt,Mt,zt){Ne.moveTo(et,dt),Ne.bezierCurveTo(et,dt=(dt+zt)/2,Mt,dt,Mt,zt)}function q(Ne,et,dt,Mt,zt){var Xt=X(et,dt),un=X(et,dt=(dt+zt)/2),Qt=X(Mt,dt),kn=X(Mt,zt);Ne.moveTo(Xt[0],Xt[1]),Ne.bezierCurveTo(un[0],un[1],Qt[0],Qt[1],kn[0],kn[1])}var ee={draw:function(Ne,et){var dt=Math.sqrt(et/u);Ne.moveTo(dt,0),Ne.arc(0,0,dt,0,c)}},te={draw:function(Ne,et){var dt=Math.sqrt(et/5)/2;Ne.moveTo(-3*dt,-dt),Ne.lineTo(-dt,-dt),Ne.lineTo(-dt,-3*dt),Ne.lineTo(dt,-3*dt),Ne.lineTo(dt,-dt),Ne.lineTo(3*dt,-dt),Ne.lineTo(3*dt,dt),Ne.lineTo(dt,dt),Ne.lineTo(dt,3*dt),Ne.lineTo(-dt,3*dt),Ne.lineTo(-dt,dt),Ne.lineTo(-3*dt,dt),Ne.closePath()}},se=Math.sqrt(1/3),ue=2*se,de={draw:function(Ne,et){var dt=Math.sqrt(et/ue),Mt=dt*se;Ne.moveTo(0,-dt),Ne.lineTo(Mt,0),Ne.lineTo(0,dt),Ne.lineTo(-Mt,0),Ne.closePath()}},he=Math.sin(u/10)/Math.sin(7*u/10),xe=Math.sin(c/10)*he,ge=-Math.cos(c/10)*he,_e={draw:function(Ne,et){var dt=Math.sqrt(.8908130915292852*et),Mt=xe*dt,zt=ge*dt;Ne.moveTo(0,-dt),Ne.lineTo(Mt,zt);for(var Xt=1;Xt<5;++Xt){var un=c*Xt/5,Qt=Math.cos(un),kn=Math.sin(un);Ne.lineTo(kn*dt,-Qt*dt),Ne.lineTo(Qt*Mt-kn*zt,kn*Mt+Qt*zt)}Ne.closePath()}},Ce={draw:function(Ne,et){var dt=Math.sqrt(et),Mt=-dt/2;Ne.rect(Mt,Mt,dt,dt)}},Le=Math.sqrt(3),Ie={draw:function(Ne,et){var dt=-Math.sqrt(et/(3*Le));Ne.moveTo(0,2*dt),Ne.lineTo(-Le*dt,-dt),Ne.lineTo(Le*dt,-dt),Ne.closePath()}},Be=-.5,ve=Math.sqrt(3)/2,Te=1/Math.sqrt(12),Pe=3*(Te/2+1),De={draw:function(Ne,et){var dt=Math.sqrt(et/Pe),Mt=dt/2,zt=dt*Te,Xt=Mt,un=dt*Te+dt,Qt=-Xt,kn=un;Ne.moveTo(Mt,zt),Ne.lineTo(Xt,un),Ne.lineTo(Qt,kn),Ne.lineTo(Be*Mt-ve*zt,ve*Mt+Be*zt),Ne.lineTo(Be*Xt-ve*un,ve*Xt+Be*un),Ne.lineTo(Be*Qt-ve*kn,ve*Qt+Be*kn),Ne.lineTo(Be*Mt+ve*zt,Be*zt-ve*Mt),Ne.lineTo(Be*Xt+ve*un,Be*un-ve*Xt),Ne.lineTo(Be*Qt+ve*kn,Be*kn-ve*Qt),Ne.closePath()}},Fe=[ee,te,de,Ce,_e,Ie,De];function Ue(){}function He(Ne,et,dt){Ne._context.bezierCurveTo((2*Ne._x0+Ne._x1)/3,(2*Ne._y0+Ne._y1)/3,(Ne._x0+2*Ne._x1)/3,(Ne._y0+2*Ne._y1)/3,(Ne._x0+4*Ne._x1+et)/6,(Ne._y0+4*Ne._y1+dt)/6)}function Ke(Ne){this._context=Ne}function st(Ne){this._context=Ne}function Ve(Ne){this._context=Ne}function $e(Ne,et){this._basis=new Ke(Ne),this._beta=et}Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:He(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ne,et){switch(Ne=+Ne,et=+et,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ne,et):this._context.moveTo(Ne,et);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:He(this,Ne,et)}this._x0=this._x1,this._x1=Ne,this._y0=this._y1,this._y1=et}},st.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(Ne,et){switch(Ne=+Ne,et=+et,this._point){case 0:this._point=1,this._x2=Ne,this._y2=et;break;case 1:this._point=2,this._x3=Ne,this._y3=et;break;case 2:this._point=3,this._x4=Ne,this._y4=et,this._context.moveTo((this._x0+4*this._x1+Ne)/6,(this._y0+4*this._y1+et)/6);break;default:He(this,Ne,et)}this._x0=this._x1,this._x1=Ne,this._y0=this._y1,this._y1=et}},Ve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ne,et){switch(Ne=+Ne,et=+et,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var dt=(this._x0+4*this._x1+Ne)/6,Mt=(this._y0+4*this._y1+et)/6;this._line?this._context.lineTo(dt,Mt):this._context.moveTo(dt,Mt);break;case 3:this._point=4;default:He(this,Ne,et)}this._x0=this._x1,this._x1=Ne,this._y0=this._y1,this._y1=et}},$e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var Ne=this._x,et=this._y,dt=Ne.length-1;if(dt>0)for(var Mt,zt=Ne[0],Xt=et[0],un=Ne[dt]-zt,Qt=et[dt]-Xt,kn=-1;++kn<=dt;)this._basis.point(this._beta*Ne[kn]+(1-this._beta)*(zt+(Mt=kn/dt)*un),this._beta*et[kn]+(1-this._beta)*(Xt+Mt*Qt));this._x=this._y=null,this._basis.lineEnd()},point:function(Ne,et){this._x.push(+Ne),this._y.push(+et)}};var Qe=function Ne(et){function dt(Mt){return 1===et?new Ke(Mt):new $e(Mt,et)}return dt.beta=function(Mt){return Ne(+Mt)},dt}(.85);function tt(Ne,et,dt){Ne._context.bezierCurveTo(Ne._x1+Ne._k*(Ne._x2-Ne._x0),Ne._y1+Ne._k*(Ne._y2-Ne._y0),Ne._x2+Ne._k*(Ne._x1-et),Ne._y2+Ne._k*(Ne._y1-dt),Ne._x2,Ne._y2)}function ut(Ne,et){this._context=Ne,this._k=(1-et)/6}ut.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:tt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ne,et){switch(Ne=+Ne,et=+et,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ne,et):this._context.moveTo(Ne,et);break;case 1:this._point=2,this._x1=Ne,this._y1=et;break;case 2:this._point=3;default:tt(this,Ne,et)}this._x0=this._x1,this._x1=this._x2,this._x2=Ne,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var xt=function Ne(et){function dt(Mt){return new ut(Mt,et)}return dt.tension=function(Mt){return Ne(+Mt)},dt}(0);function kt(Ne,et){this._context=Ne,this._k=(1-et)/6}kt.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Ne,et){switch(Ne=+Ne,et=+et,this._point){case 0:this._point=1,this._x3=Ne,this._y3=et;break;case 1:this._point=2,this._context.moveTo(this._x4=Ne,this._y4=et);break;case 2:this._point=3,this._x5=Ne,this._y5=et;break;default:tt(this,Ne,et)}this._x0=this._x1,this._x1=this._x2,this._x2=Ne,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var Bt=function Ne(et){function dt(Mt){return new kt(Mt,et)}return dt.tension=function(Mt){return Ne(+Mt)},dt}(0);function Rt(Ne,et){this._context=Ne,this._k=(1-et)/6}Rt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ne,et){switch(Ne=+Ne,et=+et,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tt(this,Ne,et)}this._x0=this._x1,this._x1=this._x2,this._x2=Ne,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var ft=function Ne(et){function dt(Mt){return new Rt(Mt,et)}return dt.tension=function(Mt){return Ne(+Mt)},dt}(0);function lt(Ne,et,dt){var Mt=Ne._x1,zt=Ne._y1,Xt=Ne._x2,un=Ne._y2;if(Ne._l01_a>1e-12){var Qt=2*Ne._l01_2a+3*Ne._l01_a*Ne._l12_a+Ne._l12_2a,kn=3*Ne._l01_a*(Ne._l01_a+Ne._l12_a);Mt=(Mt*Qt-Ne._x0*Ne._l12_2a+Ne._x2*Ne._l01_2a)/kn,zt=(zt*Qt-Ne._y0*Ne._l12_2a+Ne._y2*Ne._l01_2a)/kn}if(Ne._l23_a>1e-12){var qn=2*Ne._l23_2a+3*Ne._l23_a*Ne._l12_a+Ne._l12_2a,gn=3*Ne._l23_a*(Ne._l23_a+Ne._l12_a);Xt=(Xt*qn+Ne._x1*Ne._l23_2a-et*Ne._l12_2a)/gn,un=(un*qn+Ne._y1*Ne._l23_2a-dt*Ne._l12_2a)/gn}Ne._context.bezierCurveTo(Mt,zt,Xt,un,Ne._x2,Ne._y2)}function Ft(Ne,et){this._context=Ne,this._alpha=et}Ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ne,et){if(Ne=+Ne,et=+et,this._point){var dt=this._x2-Ne,Mt=this._y2-et;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(dt*dt+Mt*Mt,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Ne,et):this._context.moveTo(Ne,et);break;case 1:this._point=2;break;case 2:this._point=3;default:lt(this,Ne,et)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ne,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var Jt=function Ne(et){function dt(Mt){return et?new Ft(Mt,et):new ut(Mt,0)}return dt.alpha=function(Mt){return Ne(+Mt)},dt}(.5);function ln(Ne,et){this._context=Ne,this._alpha=et}ln.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Ne,et){if(Ne=+Ne,et=+et,this._point){var dt=this._x2-Ne,Mt=this._y2-et;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(dt*dt+Mt*Mt,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=Ne,this._y3=et;break;case 1:this._point=2,this._context.moveTo(this._x4=Ne,this._y4=et);break;case 2:this._point=3,this._x5=Ne,this._y5=et;break;default:lt(this,Ne,et)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ne,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var dn=function Ne(et){function dt(Mt){return et?new ln(Mt,et):new kt(Mt,0)}return dt.alpha=function(Mt){return Ne(+Mt)},dt}(.5);function cn(Ne,et){this._context=Ne,this._alpha=et}cn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ne,et){if(Ne=+Ne,et=+et,this._point){var dt=this._x2-Ne,Mt=this._y2-et;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(dt*dt+Mt*Mt,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:lt(this,Ne,et)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ne,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var Tn=function Ne(et){function dt(Mt){return et?new cn(Mt,et):new Rt(Mt,0)}return dt.alpha=function(Mt){return Ne(+Mt)},dt}(.5);function nn(Ne){this._context=Ne}function Me(Ne){return Ne<0?-1:1}function Ee(Ne,et,dt){var Mt=Ne._x1-Ne._x0,zt=et-Ne._x1,Xt=(Ne._y1-Ne._y0)/(Mt||zt<0&&-0),un=(dt-Ne._y1)/(zt||Mt<0&&-0),Qt=(Xt*zt+un*Mt)/(Mt+zt);return(Me(Xt)+Me(un))*Math.min(Math.abs(Xt),Math.abs(un),.5*Math.abs(Qt))||0}function Se(Ne,et){var dt=Ne._x1-Ne._x0;return dt?(3*(Ne._y1-Ne._y0)/dt-et)/2:et}function je(Ne,et,dt){var Mt=Ne._x0,Xt=Ne._x1,un=Ne._y1,Qt=(Xt-Mt)/3;Ne._context.bezierCurveTo(Mt+Qt,Ne._y0+Qt*et,Xt-Qt,un-Qt*dt,Xt,un)}function qe(Ne){this._context=Ne}function Je(Ne){this._context=new at(Ne)}function at(Ne){this._context=Ne}function it(Ne){this._context=Ne}function yt(Ne){var et,dt,Mt=Ne.length-1,zt=new Array(Mt),Xt=new Array(Mt),un=new Array(Mt);for(zt[0]=0,Xt[0]=2,un[0]=Ne[0]+2*Ne[1],et=1;et<Mt-1;++et)zt[et]=1,Xt[et]=4,un[et]=4*Ne[et]+2*Ne[et+1];for(zt[Mt-1]=2,Xt[Mt-1]=7,un[Mt-1]=8*Ne[Mt-1]+Ne[Mt],et=1;et<Mt;++et)Xt[et]-=dt=zt[et]/Xt[et-1],un[et]-=dt*un[et-1];for(zt[Mt-1]=un[Mt-1]/Xt[Mt-1],et=Mt-2;et>=0;--et)zt[et]=(un[et]-zt[et+1])/Xt[et];for(Xt[Mt-1]=(Ne[Mt]+zt[Mt-1])/2,et=0;et<Mt-1;++et)Xt[et]=2*Ne[et+1]-zt[et+1];return[zt,Xt]}function vt(Ne,et){this._context=Ne,this._t=et}function Ut(Ne,et){if((zt=Ne.length)>1)for(var dt,Mt,zt,Xt=1,un=Ne[et[0]],Qt=un.length;Xt<zt;++Xt)for(Mt=un,un=Ne[et[Xt]],dt=0;dt<Qt;++dt)un[dt][1]+=un[dt][0]=isNaN(Mt[dt][1])?Mt[dt][0]:Mt[dt][1]}function Wt(Ne){for(var et=Ne.length,dt=new Array(et);--et>=0;)dt[et]=et;return dt}function gt(Ne,et){return Ne[et]}function At(Ne){var et=Ne.map(Zt);return Wt(Ne).sort(function(dt,Mt){return et[dt]-et[Mt]})}function Zt(Ne){for(var et,dt=-1,Mt=0,zt=Ne.length,Xt=-1/0;++dt<zt;)(et=+Ne[dt][1])>Xt&&(Xt=et,Mt=dt);return Mt}function Et(Ne){var et=Ne.map(Ct);return Wt(Ne).sort(function(dt,Mt){return et[dt]-et[Mt]})}function Ct(Ne){for(var et,dt=0,Mt=-1,zt=Ne.length;++Mt<zt;)(et=+Ne[Mt][1])&&(dt+=et);return dt}nn.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Ne,et){Ne=+Ne,et=+et,this._point?this._context.lineTo(Ne,et):(this._point=1,this._context.moveTo(Ne,et))}},qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:je(this,this._t0,Se(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ne,et){var dt=NaN;if(et=+et,(Ne=+Ne)!==this._x1||et!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Ne,et):this._context.moveTo(Ne,et);break;case 1:this._point=2;break;case 2:this._point=3,je(this,Se(this,dt=Ee(this,Ne,et)),dt);break;default:je(this,this._t0,dt=Ee(this,Ne,et))}this._x0=this._x1,this._x1=Ne,this._y0=this._y1,this._y1=et,this._t0=dt}}},(Je.prototype=Object.create(qe.prototype)).point=function(Ne,et){qe.prototype.point.call(this,et,Ne)},at.prototype={moveTo:function(Ne,et){this._context.moveTo(et,Ne)},closePath:function(){this._context.closePath()},lineTo:function(Ne,et){this._context.lineTo(et,Ne)},bezierCurveTo:function(Ne,et,dt,Mt,zt,Xt){this._context.bezierCurveTo(et,Ne,Mt,dt,Xt,zt)}},it.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Ne=this._x,et=this._y,dt=Ne.length;if(dt)if(this._line?this._context.lineTo(Ne[0],et[0]):this._context.moveTo(Ne[0],et[0]),2===dt)this._context.lineTo(Ne[1],et[1]);else for(var Mt=yt(Ne),zt=yt(et),Xt=0,un=1;un<dt;++Xt,++un)this._context.bezierCurveTo(Mt[0][Xt],zt[0][Xt],Mt[1][Xt],zt[1][Xt],Ne[un],et[un]);(this._line||0!==this._line&&1===dt)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Ne,et){this._x.push(+Ne),this._y.push(+et)}},vt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Ne,et){switch(Ne=+Ne,et=+et,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ne,et):this._context.moveTo(Ne,et);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,et),this._context.lineTo(Ne,et);else{var dt=this._x*(1-this._t)+Ne*this._t;this._context.lineTo(dt,this._y),this._context.lineTo(dt,et)}}this._x=Ne,this._y=et}},g.arc=function(){var Ne=h,et=d,dt=w(0),Mt=null,zt=o,Xt=_,un=s,Qt=null;function kn(){var qn,gn,sn=+Ne.apply(this,arguments),vn=+et.apply(this,arguments),pn=zt.apply(this,arguments)-i,Mn=Xt.apply(this,arguments)-i,Rn=y(Mn-pn),Xn=Mn>pn;if(Qt||(Qt=qn=m.path()),vn<sn&&(gn=vn,vn=sn,sn=gn),vn>1e-12)if(Rn>c-1e-12)Qt.moveTo(vn*r(pn),vn*t(pn)),Qt.arc(0,0,vn,pn,Mn,!Xn),sn>1e-12&&(Qt.moveTo(sn*r(Mn),sn*t(Mn)),Qt.arc(0,0,sn,Mn,pn,Xn));else{var Hn,rr,er=pn,Ir=Mn,Or=pn,ni=Mn,Br=Rn,Dr=Rn,Rr=un.apply(this,arguments)/2,yi=Rr>1e-12&&(Mt?+Mt.apply(this,arguments):p(sn*sn+vn*vn)),$n=a(y(vn-sn)/2,+dt.apply(this,arguments)),Mr=$n,br=$n;if(yi>1e-12){var ar=l(yi/sn*t(Rr)),si=l(yi/vn*t(Rr));(Br-=2*ar)>1e-12?(Or+=ar*=Xn?1:-1,ni-=ar):(Br=0,Or=ni=(pn+Mn)/2),(Dr-=2*si)>1e-12?(er+=si*=Xn?1:-1,Ir-=si):(Dr=0,er=Ir=(pn+Mn)/2)}var ri=vn*r(er),Cr=vn*t(er),Pr=sn*r(ni),vr=sn*t(ni);if($n>1e-12){var hn,Jn=vn*r(Ir),jt=vn*t(Ir),fn=sn*r(Or),Sn=sn*t(Or);if(Rn<u&&(hn=k(ri,Cr,fn,Sn,Jn,jt,Pr,vr))){var Kn=ri-hn[0],Wn=Cr-hn[1],Pn=Jn-hn[0],Un=jt-hn[1],Cn=1/t(f((Kn*Pn+Wn*Un)/(p(Kn*Kn+Wn*Wn)*p(Pn*Pn+Un*Un)))/2),On=p(hn[0]*hn[0]+hn[1]*hn[1]);Mr=a($n,(sn-On)/(Cn-1)),br=a($n,(vn-On)/(Cn+1))}}Dr>1e-12?br>1e-12?(Hn=M(fn,Sn,ri,Cr,vn,br,Xn),rr=M(Jn,jt,Pr,vr,vn,br,Xn),Qt.moveTo(Hn.cx+Hn.x01,Hn.cy+Hn.y01),br<$n?Qt.arc(Hn.cx,Hn.cy,br,e(Hn.y01,Hn.x01),e(rr.y01,rr.x01),!Xn):(Qt.arc(Hn.cx,Hn.cy,br,e(Hn.y01,Hn.x01),e(Hn.y11,Hn.x11),!Xn),Qt.arc(0,0,vn,e(Hn.cy+Hn.y11,Hn.cx+Hn.x11),e(rr.cy+rr.y11,rr.cx+rr.x11),!Xn),Qt.arc(rr.cx,rr.cy,br,e(rr.y11,rr.x11),e(rr.y01,rr.x01),!Xn))):(Qt.moveTo(ri,Cr),Qt.arc(0,0,vn,er,Ir,!Xn)):Qt.moveTo(ri,Cr),sn>1e-12&&Br>1e-12?Mr>1e-12?(Hn=M(Pr,vr,Jn,jt,sn,-Mr,Xn),rr=M(ri,Cr,fn,Sn,sn,-Mr,Xn),Qt.lineTo(Hn.cx+Hn.x01,Hn.cy+Hn.y01),Mr<$n?Qt.arc(Hn.cx,Hn.cy,Mr,e(Hn.y01,Hn.x01),e(rr.y01,rr.x01),!Xn):(Qt.arc(Hn.cx,Hn.cy,Mr,e(Hn.y01,Hn.x01),e(Hn.y11,Hn.x11),!Xn),Qt.arc(0,0,sn,e(Hn.cy+Hn.y11,Hn.cx+Hn.x11),e(rr.cy+rr.y11,rr.cx+rr.x11),Xn),Qt.arc(rr.cx,rr.cy,Mr,e(rr.y11,rr.x11),e(rr.y01,rr.x01),!Xn))):Qt.arc(0,0,sn,ni,Or,Xn):Qt.lineTo(Pr,vr)}else Qt.moveTo(0,0);if(Qt.closePath(),qn)return Qt=null,qn+""||null}return kn.centroid=function(){var qn=(+Ne.apply(this,arguments)+ +et.apply(this,arguments))/2,gn=(+zt.apply(this,arguments)+ +Xt.apply(this,arguments))/2-u/2;return[r(gn)*qn,t(gn)*qn]},kn.innerRadius=function(qn){return arguments.length?(Ne="function"==typeof qn?qn:w(+qn),kn):Ne},kn.outerRadius=function(qn){return arguments.length?(et="function"==typeof qn?qn:w(+qn),kn):et},kn.cornerRadius=function(qn){return arguments.length?(dt="function"==typeof qn?qn:w(+qn),kn):dt},kn.padRadius=function(qn){return arguments.length?(Mt=null==qn?null:"function"==typeof qn?qn:w(+qn),kn):Mt},kn.startAngle=function(qn){return arguments.length?(zt="function"==typeof qn?qn:w(+qn),kn):zt},kn.endAngle=function(qn){return arguments.length?(Xt="function"==typeof qn?qn:w(+qn),kn):Xt},kn.padAngle=function(qn){return arguments.length?(un="function"==typeof qn?qn:w(+qn),kn):un},kn.context=function(qn){return arguments.length?(Qt=null==qn?null:qn,kn):Qt},kn},g.area=O,g.areaRadial=ne,g.curveBasis=function(Ne){return new Ke(Ne)},g.curveBasisClosed=function(Ne){return new st(Ne)},g.curveBasisOpen=function(Ne){return new Ve(Ne)},g.curveBundle=Qe,g.curveCardinal=xt,g.curveCardinalClosed=Bt,g.curveCardinalOpen=ft,g.curveCatmullRom=Jt,g.curveCatmullRomClosed=dn,g.curveCatmullRomOpen=Tn,g.curveLinear=E,g.curveLinearClosed=function(Ne){return new nn(Ne)},g.curveMonotoneX=function(Ne){return new qe(Ne)},g.curveMonotoneY=function(Ne){return new Je(Ne)},g.curveNatural=function(Ne){return new it(Ne)},g.curveStep=function(Ne){return new vt(Ne,.5)},g.curveStepAfter=function(Ne){return new vt(Ne,1)},g.curveStepBefore=function(Ne){return new vt(Ne,0)},g.line=R,g.lineRadial=Q,g.linkHorizontal=function(){return U(G)},g.linkRadial=function(){var Ne=U(q);return Ne.angle=Ne.x,delete Ne.x,Ne.radius=Ne.y,delete Ne.y,Ne},g.linkVertical=function(){return U(ie)},g.pie=function(){var Ne=L,et=D,dt=null,Mt=w(0),zt=w(c),Xt=w(0);function un(Qt){var kn,qn,gn,sn,vn,pn=Qt.length,Mn=0,Rn=new Array(pn),Xn=new Array(pn),Hn=+Mt.apply(this,arguments),rr=Math.min(c,Math.max(-c,zt.apply(this,arguments)-Hn)),er=Math.min(Math.abs(rr)/pn,Xt.apply(this,arguments)),Ir=er*(rr<0?-1:1);for(kn=0;kn<pn;++kn)(vn=Xn[Rn[kn]=kn]=+Ne(Qt[kn],kn,Qt))>0&&(Mn+=vn);for(null!=et?Rn.sort(function(Or,ni){return et(Xn[Or],Xn[ni])}):null!=dt&&Rn.sort(function(Or,ni){return dt(Qt[Or],Qt[ni])}),kn=0,gn=Mn?(rr-pn*Ir)/Mn:0;kn<pn;++kn,Hn=sn)sn=Hn+((vn=Xn[qn=Rn[kn]])>0?vn*gn:0)+Ir,Xn[qn]={data:Qt[qn],index:kn,value:vn,startAngle:Hn,endAngle:sn,padAngle:er};return Xn}return un.value=function(Qt){return arguments.length?(Ne="function"==typeof Qt?Qt:w(+Qt),un):Ne},un.sortValues=function(Qt){return arguments.length?(et=Qt,dt=null,un):et},un.sort=function(Qt){return arguments.length?(dt=Qt,et=null,un):dt},un.startAngle=function(Qt){return arguments.length?(Mt="function"==typeof Qt?Qt:w(+Qt),un):Mt},un.endAngle=function(Qt){return arguments.length?(zt="function"==typeof Qt?Qt:w(+Qt),un):zt},un.padAngle=function(Qt){return arguments.length?(Xt="function"==typeof Qt?Qt:w(+Qt),un):Xt},un},g.pointRadial=X,g.radialArea=ne,g.radialLine=Q,g.stack=function(){var Ne=w([]),et=Wt,dt=Ut,Mt=gt;function zt(Xt){var un,Qt,kn=Ne.apply(this,arguments),qn=Xt.length,gn=kn.length,sn=new Array(gn);for(un=0;un<gn;++un){for(var vn,pn=kn[un],Mn=sn[un]=new Array(qn),Rn=0;Rn<qn;++Rn)Mn[Rn]=vn=[0,+Mt(Xt[Rn],pn,Rn,Xt)],vn.data=Xt[Rn];Mn.key=pn}for(un=0,Qt=et(sn);un<gn;++un)sn[Qt[un]].index=un;return dt(sn,Qt),sn}return zt.keys=function(Xt){return arguments.length?(Ne="function"==typeof Xt?Xt:w($.call(Xt)),zt):Ne},zt.value=function(Xt){return arguments.length?(Mt="function"==typeof Xt?Xt:w(+Xt),zt):Mt},zt.order=function(Xt){return arguments.length?(et=null==Xt?Wt:"function"==typeof Xt?Xt:w($.call(Xt)),zt):et},zt.offset=function(Xt){return arguments.length?(dt=null==Xt?Ut:Xt,zt):dt},zt},g.stackOffsetDiverging=function(Ne,et){if((Qt=Ne.length)>0)for(var dt,Mt,zt,Xt,un,Qt,kn=0,qn=Ne[et[0]].length;kn<qn;++kn)for(Xt=un=0,dt=0;dt<Qt;++dt)(zt=(Mt=Ne[et[dt]][kn])[1]-Mt[0])>0?(Mt[0]=Xt,Mt[1]=Xt+=zt):zt<0?(Mt[1]=un,Mt[0]=un+=zt):(Mt[0]=0,Mt[1]=zt)},g.stackOffsetExpand=function(Ne,et){if((Mt=Ne.length)>0){for(var dt,Mt,zt,Xt=0,un=Ne[0].length;Xt<un;++Xt){for(zt=dt=0;dt<Mt;++dt)zt+=Ne[dt][Xt][1]||0;if(zt)for(dt=0;dt<Mt;++dt)Ne[dt][Xt][1]/=zt}Ut(Ne,et)}},g.stackOffsetNone=Ut,g.stackOffsetSilhouette=function(Ne,et){if((dt=Ne.length)>0){for(var dt,Mt=0,zt=Ne[et[0]],Xt=zt.length;Mt<Xt;++Mt){for(var un=0,Qt=0;un<dt;++un)Qt+=Ne[un][Mt][1]||0;zt[Mt][1]+=zt[Mt][0]=-Qt/2}Ut(Ne,et)}},g.stackOffsetWiggle=function(Ne,et){if((zt=Ne.length)>0&&(Mt=(dt=Ne[et[0]]).length)>0){for(var dt,Mt,zt,Xt=0,un=1;un<Mt;++un){for(var Qt=0,kn=0,qn=0;Qt<zt;++Qt){for(var gn=Ne[et[Qt]],sn=gn[un][1]||0,vn=(sn-(gn[un-1][1]||0))/2,pn=0;pn<Qt;++pn){var Mn=Ne[et[pn]];vn+=(Mn[un][1]||0)-(Mn[un-1][1]||0)}kn+=sn,qn+=vn*sn}dt[un-1][1]+=dt[un-1][0]=Xt,kn&&(Xt-=qn/kn)}dt[un-1][1]+=dt[un-1][0]=Xt,Ut(Ne,et)}},g.stackOrderAppearance=At,g.stackOrderAscending=Et,g.stackOrderDescending=function(Ne){return Et(Ne).reverse()},g.stackOrderInsideOut=function(Ne){var et,dt,Mt=Ne.length,zt=Ne.map(Ct),Xt=At(Ne),un=0,Qt=0,kn=[],qn=[];for(et=0;et<Mt;++et)dt=Xt[et],un<Qt?(un+=zt[dt],kn.push(dt)):(Qt+=zt[dt],qn.push(dt));return qn.reverse().concat(kn)},g.stackOrderNone=Wt,g.stackOrderReverse=function(Ne){return Wt(Ne).reverse()},g.symbol=function(){var Ne=w(ee),et=w(64),dt=null;function Mt(){var zt;if(dt||(dt=zt=m.path()),Ne.apply(this,arguments).draw(dt,+et.apply(this,arguments)),zt)return dt=null,zt+""||null}return Mt.type=function(zt){return arguments.length?(Ne="function"==typeof zt?zt:w(zt),Mt):Ne},Mt.size=function(zt){return arguments.length?(et="function"==typeof zt?zt:w(+zt),Mt):et},Mt.context=function(zt){return arguments.length?(dt=null==zt?null:zt,Mt):dt},Mt},g.symbolCircle=ee,g.symbolCross=te,g.symbolDiamond=de,g.symbolSquare=Ce,g.symbolStar=_e,g.symbolTriangle=Ie,g.symbolWye=De,g.symbols=Fe,Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==oe?m(ae,x("d3-path")):m((g=g||self).d3=g.d3||{},g.d3)},{"d3-path":117}],120:[function(x,oe,ae){var g,m;g=this,m=function(g,m){"use strict";function w(ft){if(0<=ft.y&&ft.y<100){var lt=new Date(-1,ft.m,ft.d,ft.H,ft.M,ft.S,ft.L);return lt.setFullYear(ft.y),lt}return new Date(ft.y,ft.m,ft.d,ft.H,ft.M,ft.S,ft.L)}function y(ft){if(0<=ft.y&&ft.y<100){var lt=new Date(Date.UTC(-1,ft.m,ft.d,ft.H,ft.M,ft.S,ft.L));return lt.setUTCFullYear(ft.y),lt}return new Date(Date.UTC(ft.y,ft.m,ft.d,ft.H,ft.M,ft.S,ft.L))}function e(ft,lt,Ft){return{y:ft,m:lt,d:Ft,H:0,M:0,S:0,L:0}}function r(ft){var lt=ft.dateTime,Ft=ft.date,Jt=ft.time,ln=ft.periods,dn=ft.days,cn=ft.shortDays,Tn=ft.months,nn=ft.shortMonths,Me=f(ln),Ee=l(ln),Se=f(dn),je=l(dn),qe=f(cn),Je=l(cn),at=f(Tn),it=l(Tn),yt=f(nn),vt=l(nn),Ut={a:function(Ct){return cn[Ct.getDay()]},A:function(Ct){return dn[Ct.getDay()]},b:function(Ct){return nn[Ct.getMonth()]},B:function(Ct){return Tn[Ct.getMonth()]},c:null,d:ne,e:ne,f:U,H:X,I:$,j:re,L:H,m:G,M:ie,p:function(Ct){return ln[+(Ct.getHours()>=12)]},q:function(Ct){return 1+~~(Ct.getMonth()/3)},Q:ut,s:xt,S:q,u:ee,U:te,V:se,w:ue,W:de,x:null,X:null,y:he,Y:xe,Z:ge,"%":tt},Wt={a:function(Ct){return cn[Ct.getUTCDay()]},A:function(Ct){return dn[Ct.getUTCDay()]},b:function(Ct){return nn[Ct.getUTCMonth()]},B:function(Ct){return Tn[Ct.getUTCMonth()]},c:null,d:_e,e:_e,f:ve,H:Ce,I:Le,j:Ie,L:Be,m:Te,M:Pe,p:function(Ct){return ln[+(Ct.getUTCHours()>=12)]},q:function(Ct){return 1+~~(Ct.getUTCMonth()/3)},Q:ut,s:xt,S:De,u:Fe,U:Ue,V:He,w:Ke,W:st,x:null,X:null,y:Ve,Y:$e,Z:Qe,"%":tt},gt={a:function(Ct,Ne,et){var dt=qe.exec(Ne.slice(et));return dt?(Ct.w=Je[dt[0].toLowerCase()],et+dt[0].length):-1},A:function(Ct,Ne,et){var dt=Se.exec(Ne.slice(et));return dt?(Ct.w=je[dt[0].toLowerCase()],et+dt[0].length):-1},b:function(Ct,Ne,et){var dt=yt.exec(Ne.slice(et));return dt?(Ct.m=vt[dt[0].toLowerCase()],et+dt[0].length):-1},B:function(Ct,Ne,et){var dt=at.exec(Ne.slice(et));return dt?(Ct.m=it[dt[0].toLowerCase()],et+dt[0].length):-1},c:function(Ct,Ne,et){return Et(Ct,lt,Ne,et)},d:C,e:C,f:j,H:O,I:O,j:R,L:B,m:I,M:D,p:function(Ct,Ne,et){var dt=Me.exec(Ne.slice(et));return dt?(Ct.p=Ee[dt[0].toLowerCase()],et+dt[0].length):-1},q:E,Q:Y,s:Q,S:L,u:d,U:o,V:_,w:h,W:s,x:function(Ct,Ne,et){return Et(Ct,Ft,Ne,et)},X:function(Ct,Ne,et){return Et(Ct,Jt,Ne,et)},y:M,Y:k,Z:A,"%":W};function At(Ct,Ne){return function(et){var dt,Mt,zt,Xt=[],un=-1,Qt=0,kn=Ct.length;for(et instanceof Date||(et=new Date(+et));++un<kn;)37===Ct.charCodeAt(un)&&(Xt.push(Ct.slice(Qt,un)),null!=(Mt=a[dt=Ct.charAt(++un)])?dt=Ct.charAt(++un):Mt="e"===dt?" ":"0",(zt=Ne[dt])&&(dt=zt(et,Mt)),Xt.push(dt),Qt=un+1);return Xt.push(Ct.slice(Qt,un)),Xt.join("")}}function Zt(Ct,Ne){return function(et){var dt,Mt,zt=e(1900,void 0,1);if(Et(zt,Ct,et+="",0)!=et.length)return null;if("Q"in zt)return new Date(zt.Q);if("s"in zt)return new Date(1e3*zt.s+("L"in zt?zt.L:0));if(Ne&&!("Z"in zt)&&(zt.Z=0),"p"in zt&&(zt.H=zt.H%12+12*zt.p),void 0===zt.m&&(zt.m="q"in zt?zt.q:0),"V"in zt){if(zt.V<1||zt.V>53)return null;"w"in zt||(zt.w=1),"Z"in zt?(Mt=(dt=y(e(zt.y,0,1))).getUTCDay(),dt=Mt>4||0===Mt?m.utcMonday.ceil(dt):m.utcMonday(dt),dt=m.utcDay.offset(dt,7*(zt.V-1)),zt.y=dt.getUTCFullYear(),zt.m=dt.getUTCMonth(),zt.d=dt.getUTCDate()+(zt.w+6)%7):(Mt=(dt=w(e(zt.y,0,1))).getDay(),dt=Mt>4||0===Mt?m.timeMonday.ceil(dt):m.timeMonday(dt),dt=m.timeDay.offset(dt,7*(zt.V-1)),zt.y=dt.getFullYear(),zt.m=dt.getMonth(),zt.d=dt.getDate()+(zt.w+6)%7)}else("W"in zt||"U"in zt)&&("w"in zt||(zt.w="u"in zt?zt.u%7:"W"in zt?1:0),Mt="Z"in zt?y(e(zt.y,0,1)).getUTCDay():w(e(zt.y,0,1)).getDay(),zt.m=0,zt.d="W"in zt?(zt.w+6)%7+7*zt.W-(Mt+5)%7:zt.w+7*zt.U-(Mt+6)%7);return"Z"in zt?(zt.H+=zt.Z/100|0,zt.M+=zt.Z%100,y(zt)):w(zt)}}function Et(Ct,Ne,et,dt){for(var Mt,zt,Xt=0,un=Ne.length,Qt=et.length;Xt<un;){if(dt>=Qt)return-1;if(37===(Mt=Ne.charCodeAt(Xt++))){if(Mt=Ne.charAt(Xt++),!(zt=gt[Mt in a?Ne.charAt(Xt++):Mt])||(dt=zt(Ct,et,dt))<0)return-1}else if(Mt!=et.charCodeAt(dt++))return-1}return dt}return Ut.x=At(Ft,Ut),Ut.X=At(Jt,Ut),Ut.c=At(lt,Ut),Wt.x=At(Ft,Wt),Wt.X=At(Jt,Wt),Wt.c=At(lt,Wt),{format:function(Ct){var Ne=At(Ct+="",Ut);return Ne.toString=function(){return Ct},Ne},parse:function(Ct){var Ne=Zt(Ct+="",!1);return Ne.toString=function(){return Ct},Ne},utcFormat:function(Ct){var Ne=At(Ct+="",Wt);return Ne.toString=function(){return Ct},Ne},utcParse:function(Ct){var Ne=Zt(Ct+="",!0);return Ne.toString=function(){return Ct},Ne}}}var n,a={"-":"",_:" ",0:"0"},t=/^\s*\d+/,p=/^%/,u=/[\\^$*+?|[\]().{}]/g;function i(ft,lt,Ft){var Jt=ft<0?"-":"",ln=(Jt?-ft:ft)+"",dn=ln.length;return Jt+(dn<Ft?new Array(Ft-dn+1).join(lt)+ln:ln)}function c(ft){return ft.replace(u,"\\$&")}function f(ft){return new RegExp("^(?:"+ft.map(c).join("|")+")","i")}function l(ft){for(var lt={},Ft=-1,Jt=ft.length;++Ft<Jt;)lt[ft[Ft].toLowerCase()]=Ft;return lt}function h(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft,Ft+1));return Jt?(ft.w=+Jt[0],Ft+Jt[0].length):-1}function d(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft,Ft+1));return Jt?(ft.u=+Jt[0],Ft+Jt[0].length):-1}function o(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft,Ft+2));return Jt?(ft.U=+Jt[0],Ft+Jt[0].length):-1}function _(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft,Ft+2));return Jt?(ft.V=+Jt[0],Ft+Jt[0].length):-1}function s(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft,Ft+2));return Jt?(ft.W=+Jt[0],Ft+Jt[0].length):-1}function k(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft,Ft+4));return Jt?(ft.y=+Jt[0],Ft+Jt[0].length):-1}function M(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft,Ft+2));return Jt?(ft.y=+Jt[0]+(+Jt[0]>68?1900:2e3),Ft+Jt[0].length):-1}function A(ft,lt,Ft){var Jt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(lt.slice(Ft,Ft+6));return Jt?(ft.Z=Jt[1]?0:-(Jt[2]+(Jt[3]||"00")),Ft+Jt[0].length):-1}function E(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft,Ft+1));return Jt?(ft.q=3*Jt[0]-3,Ft+Jt[0].length):-1}function I(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft,Ft+2));return Jt?(ft.m=Jt[0]-1,Ft+Jt[0].length):-1}function C(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft,Ft+2));return Jt?(ft.d=+Jt[0],Ft+Jt[0].length):-1}function R(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft,Ft+3));return Jt?(ft.m=0,ft.d=+Jt[0],Ft+Jt[0].length):-1}function O(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft,Ft+2));return Jt?(ft.H=+Jt[0],Ft+Jt[0].length):-1}function D(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft,Ft+2));return Jt?(ft.M=+Jt[0],Ft+Jt[0].length):-1}function L(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft,Ft+2));return Jt?(ft.S=+Jt[0],Ft+Jt[0].length):-1}function B(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft,Ft+3));return Jt?(ft.L=+Jt[0],Ft+Jt[0].length):-1}function j(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft,Ft+6));return Jt?(ft.L=Math.floor(Jt[0]/1e3),Ft+Jt[0].length):-1}function W(ft,lt,Ft){var Jt=p.exec(lt.slice(Ft,Ft+1));return Jt?Ft+Jt[0].length:-1}function Y(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft));return Jt?(ft.Q=+Jt[0],Ft+Jt[0].length):-1}function Q(ft,lt,Ft){var Jt=t.exec(lt.slice(Ft));return Jt?(ft.s=+Jt[0],Ft+Jt[0].length):-1}function ne(ft,lt){return i(ft.getDate(),lt,2)}function X(ft,lt){return i(ft.getHours(),lt,2)}function $(ft,lt){return i(ft.getHours()%12||12,lt,2)}function re(ft,lt){return i(1+m.timeDay.count(m.timeYear(ft),ft),lt,3)}function H(ft,lt){return i(ft.getMilliseconds(),lt,3)}function U(ft,lt){return H(ft,lt)+"000"}function G(ft,lt){return i(ft.getMonth()+1,lt,2)}function ie(ft,lt){return i(ft.getMinutes(),lt,2)}function q(ft,lt){return i(ft.getSeconds(),lt,2)}function ee(ft){var lt=ft.getDay();return 0===lt?7:lt}function te(ft,lt){return i(m.timeSunday.count(m.timeYear(ft)-1,ft),lt,2)}function se(ft,lt){var Ft=ft.getDay();return ft=Ft>=4||0===Ft?m.timeThursday(ft):m.timeThursday.ceil(ft),i(m.timeThursday.count(m.timeYear(ft),ft)+(4===m.timeYear(ft).getDay()),lt,2)}function ue(ft){return ft.getDay()}function de(ft,lt){return i(m.timeMonday.count(m.timeYear(ft)-1,ft),lt,2)}function he(ft,lt){return i(ft.getFullYear()%100,lt,2)}function xe(ft,lt){return i(ft.getFullYear()%1e4,lt,4)}function ge(ft){var lt=ft.getTimezoneOffset();return(lt>0?"-":(lt*=-1,"+"))+i(lt/60|0,"0",2)+i(lt%60,"0",2)}function _e(ft,lt){return i(ft.getUTCDate(),lt,2)}function Ce(ft,lt){return i(ft.getUTCHours(),lt,2)}function Le(ft,lt){return i(ft.getUTCHours()%12||12,lt,2)}function Ie(ft,lt){return i(1+m.utcDay.count(m.utcYear(ft),ft),lt,3)}function Be(ft,lt){return i(ft.getUTCMilliseconds(),lt,3)}function ve(ft,lt){return Be(ft,lt)+"000"}function Te(ft,lt){return i(ft.getUTCMonth()+1,lt,2)}function Pe(ft,lt){return i(ft.getUTCMinutes(),lt,2)}function De(ft,lt){return i(ft.getUTCSeconds(),lt,2)}function Fe(ft){var lt=ft.getUTCDay();return 0===lt?7:lt}function Ue(ft,lt){return i(m.utcSunday.count(m.utcYear(ft)-1,ft),lt,2)}function He(ft,lt){var Ft=ft.getUTCDay();return ft=Ft>=4||0===Ft?m.utcThursday(ft):m.utcThursday.ceil(ft),i(m.utcThursday.count(m.utcYear(ft),ft)+(4===m.utcYear(ft).getUTCDay()),lt,2)}function Ke(ft){return ft.getUTCDay()}function st(ft,lt){return i(m.utcMonday.count(m.utcYear(ft)-1,ft),lt,2)}function Ve(ft,lt){return i(ft.getUTCFullYear()%100,lt,2)}function $e(ft,lt){return i(ft.getUTCFullYear()%1e4,lt,4)}function Qe(){return"+0000"}function tt(){return"%"}function ut(ft){return+ft}function xt(ft){return Math.floor(+ft/1e3)}function kt(ft){return n=r(ft),g.timeFormat=n.format,g.timeParse=n.parse,g.utcFormat=n.utcFormat,g.utcParse=n.utcParse,n}kt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Bt=Date.prototype.toISOString?function(ft){return ft.toISOString()}:g.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Rt=+new Date("2000-01-01T00:00:00.000Z")?function(ft){var lt=new Date(ft);return isNaN(lt)?null:lt}:g.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");g.isoFormat=Bt,g.isoParse=Rt,g.timeFormatDefaultLocale=kt,g.timeFormatLocale=r,Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==oe?m(ae,x("d3-time")):m((g=g||self).d3=g.d3||{},g.d3)},{"d3-time":121}],121:[function(x,oe,ae){var g,m;g=this,m=function(g){"use strict";var m=new Date,w=new Date;function y(Te,Pe,De,Fe){function Ue(He){return Te(He=0===arguments.length?new Date:new Date(+He)),He}return Ue.floor=function(He){return Te(He=new Date(+He)),He},Ue.ceil=function(He){return Te(He=new Date(He-1)),Pe(He,1),Te(He),He},Ue.round=function(He){var Ke=Ue(He),st=Ue.ceil(He);return He-Ke<st-He?Ke:st},Ue.offset=function(He,Ke){return Pe(He=new Date(+He),null==Ke?1:Math.floor(Ke)),He},Ue.range=function(He,Ke,st){var Ve,$e=[];if(He=Ue.ceil(He),st=null==st?1:Math.floor(st),!(He<Ke&&st>0))return $e;do{$e.push(Ve=new Date(+He)),Pe(He,st),Te(He)}while(Ve<He&&He<Ke);return $e},Ue.filter=function(He){return y(function(Ke){if(Ke>=Ke)for(;Te(Ke),!He(Ke);)Ke.setTime(Ke-1)},function(Ke,st){if(Ke>=Ke)if(st<0)for(;++st<=0;)for(;Pe(Ke,-1),!He(Ke););else for(;--st>=0;)for(;Pe(Ke,1),!He(Ke););})},De&&(Ue.count=function(He,Ke){return m.setTime(+He),w.setTime(+Ke),Te(m),Te(w),Math.floor(De(m,w))},Ue.every=function(He){return He=Math.floor(He),isFinite(He)&&He>0?He>1?Ue.filter(Fe?function(Ke){return Fe(Ke)%He==0}:function(Ke){return Ue.count(0,Ke)%He==0}):Ue:null}),Ue}var e=y(function(){},function(Te,Pe){Te.setTime(+Te+Pe)},function(Te,Pe){return Pe-Te});e.every=function(Te){return Te=Math.floor(Te),isFinite(Te)&&Te>0?Te>1?y(function(Pe){Pe.setTime(Math.floor(Pe/Te)*Te)},function(Pe,De){Pe.setTime(+Pe+De*Te)},function(Pe,De){return(De-Pe)/Te}):e:null};var r=e.range,n=y(function(Te){Te.setTime(Te-Te.getMilliseconds())},function(Te,Pe){Te.setTime(+Te+1e3*Pe)},function(Te,Pe){return(Pe-Te)/1e3},function(Te){return Te.getUTCSeconds()}),a=n.range,t=y(function(Te){Te.setTime(Te-Te.getMilliseconds()-1e3*Te.getSeconds())},function(Te,Pe){Te.setTime(+Te+6e4*Pe)},function(Te,Pe){return(Pe-Te)/6e4},function(Te){return Te.getMinutes()}),p=t.range,u=y(function(Te){Te.setTime(Te-Te.getMilliseconds()-1e3*Te.getSeconds()-6e4*Te.getMinutes())},function(Te,Pe){Te.setTime(+Te+36e5*Pe)},function(Te,Pe){return(Pe-Te)/36e5},function(Te){return Te.getHours()}),i=u.range,c=y(function(Te){Te.setHours(0,0,0,0)},function(Te,Pe){Te.setDate(Te.getDate()+Pe)},function(Te,Pe){return(Pe-Te-6e4*(Pe.getTimezoneOffset()-Te.getTimezoneOffset()))/864e5},function(Te){return Te.getDate()-1}),f=c.range;function l(Te){return y(function(Pe){Pe.setDate(Pe.getDate()-(Pe.getDay()+7-Te)%7),Pe.setHours(0,0,0,0)},function(Pe,De){Pe.setDate(Pe.getDate()+7*De)},function(Pe,De){return(De-Pe-6e4*(De.getTimezoneOffset()-Pe.getTimezoneOffset()))/6048e5})}var h=l(0),d=l(1),o=l(2),_=l(3),s=l(4),k=l(5),M=l(6),A=h.range,E=d.range,I=o.range,C=_.range,R=s.range,O=k.range,D=M.range,L=y(function(Te){Te.setDate(1),Te.setHours(0,0,0,0)},function(Te,Pe){Te.setMonth(Te.getMonth()+Pe)},function(Te,Pe){return Pe.getMonth()-Te.getMonth()+12*(Pe.getFullYear()-Te.getFullYear())},function(Te){return Te.getMonth()}),B=L.range,j=y(function(Te){Te.setMonth(0,1),Te.setHours(0,0,0,0)},function(Te,Pe){Te.setFullYear(Te.getFullYear()+Pe)},function(Te,Pe){return Pe.getFullYear()-Te.getFullYear()},function(Te){return Te.getFullYear()});j.every=function(Te){return isFinite(Te=Math.floor(Te))&&Te>0?y(function(Pe){Pe.setFullYear(Math.floor(Pe.getFullYear()/Te)*Te),Pe.setMonth(0,1),Pe.setHours(0,0,0,0)},function(Pe,De){Pe.setFullYear(Pe.getFullYear()+De*Te)}):null};var W=j.range,Y=y(function(Te){Te.setUTCSeconds(0,0)},function(Te,Pe){Te.setTime(+Te+6e4*Pe)},function(Te,Pe){return(Pe-Te)/6e4},function(Te){return Te.getUTCMinutes()}),Q=Y.range,ne=y(function(Te){Te.setUTCMinutes(0,0,0)},function(Te,Pe){Te.setTime(+Te+36e5*Pe)},function(Te,Pe){return(Pe-Te)/36e5},function(Te){return Te.getUTCHours()}),X=ne.range,$=y(function(Te){Te.setUTCHours(0,0,0,0)},function(Te,Pe){Te.setUTCDate(Te.getUTCDate()+Pe)},function(Te,Pe){return(Pe-Te)/864e5},function(Te){return Te.getUTCDate()-1}),re=$.range;function H(Te){return y(function(Pe){Pe.setUTCDate(Pe.getUTCDate()-(Pe.getUTCDay()+7-Te)%7),Pe.setUTCHours(0,0,0,0)},function(Pe,De){Pe.setUTCDate(Pe.getUTCDate()+7*De)},function(Pe,De){return(De-Pe)/6048e5})}var U=H(0),G=H(1),ie=H(2),q=H(3),ee=H(4),te=H(5),se=H(6),ue=U.range,de=G.range,he=ie.range,xe=q.range,ge=ee.range,_e=te.range,Ce=se.range,Le=y(function(Te){Te.setUTCDate(1),Te.setUTCHours(0,0,0,0)},function(Te,Pe){Te.setUTCMonth(Te.getUTCMonth()+Pe)},function(Te,Pe){return Pe.getUTCMonth()-Te.getUTCMonth()+12*(Pe.getUTCFullYear()-Te.getUTCFullYear())},function(Te){return Te.getUTCMonth()}),Ie=Le.range,Be=y(function(Te){Te.setUTCMonth(0,1),Te.setUTCHours(0,0,0,0)},function(Te,Pe){Te.setUTCFullYear(Te.getUTCFullYear()+Pe)},function(Te,Pe){return Pe.getUTCFullYear()-Te.getUTCFullYear()},function(Te){return Te.getUTCFullYear()});Be.every=function(Te){return isFinite(Te=Math.floor(Te))&&Te>0?y(function(Pe){Pe.setUTCFullYear(Math.floor(Pe.getUTCFullYear()/Te)*Te),Pe.setUTCMonth(0,1),Pe.setUTCHours(0,0,0,0)},function(Pe,De){Pe.setUTCFullYear(Pe.getUTCFullYear()+De*Te)}):null};var ve=Be.range;g.timeDay=c,g.timeDays=f,g.timeFriday=k,g.timeFridays=O,g.timeHour=u,g.timeHours=i,g.timeInterval=y,g.timeMillisecond=e,g.timeMilliseconds=r,g.timeMinute=t,g.timeMinutes=p,g.timeMonday=d,g.timeMondays=E,g.timeMonth=L,g.timeMonths=B,g.timeSaturday=M,g.timeSaturdays=D,g.timeSecond=n,g.timeSeconds=a,g.timeSunday=h,g.timeSundays=A,g.timeThursday=s,g.timeThursdays=R,g.timeTuesday=o,g.timeTuesdays=I,g.timeWednesday=_,g.timeWednesdays=C,g.timeWeek=h,g.timeWeeks=A,g.timeYear=j,g.timeYears=W,g.utcDay=$,g.utcDays=re,g.utcFriday=te,g.utcFridays=_e,g.utcHour=ne,g.utcHours=X,g.utcMillisecond=e,g.utcMilliseconds=r,g.utcMinute=Y,g.utcMinutes=Q,g.utcMonday=G,g.utcMondays=de,g.utcMonth=Le,g.utcMonths=Ie,g.utcSaturday=se,g.utcSaturdays=Ce,g.utcSecond=n,g.utcSeconds=a,g.utcSunday=U,g.utcSundays=ue,g.utcThursday=ee,g.utcThursdays=ge,g.utcTuesday=ie,g.utcTuesdays=he,g.utcWednesday=q,g.utcWednesdays=xe,g.utcWeek=U,g.utcWeeks=ue,g.utcYear=Be,g.utcYears=ve,Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ae&&void 0!==oe?ae:(g=g||self).d3=g.d3||{})},{}],122:[function(x,oe,ae){arguments[4][121][0].apply(ae,arguments)},{dup:121}],123:[function(x,oe,ae){var g,m;g=this,m=function(g){"use strict";var m,w,y=0,e=0,r=0,n=0,a=0,t=0,p="object"==typeof performance&&performance.now?performance:Date,u="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(s){setTimeout(s,17)};function i(){return a||(u(c),a=p.now()+t)}function c(){a=0}function f(){this._call=this._time=this._next=null}function l(s,k,M){var A=new f;return A.restart(s,k,M),A}function h(){i(),++y;for(var s,k=m;k;)(s=a-k._time)>=0&&k._call.call(null,s),k=k._next;--y}function d(){a=(n=p.now())+t,y=e=0;try{h()}finally{y=0,function(){for(var s,k,M=m,A=1/0;M;)M._call?(A>M._time&&(A=M._time),s=M,M=M._next):(k=M._next,M._next=null,M=s?s._next=k:m=k);w=s,_(A)}(),a=0}}function o(){var s=p.now(),k=s-n;k>1e3&&(t-=k,n=s)}function _(s){y||(e&&(e=clearTimeout(e)),s-a>24?(s<1/0&&(e=setTimeout(d,s-p.now()-t)),r&&(r=clearInterval(r))):(r||(n=p.now(),r=setInterval(o,1e3)),y=1,u(d)))}f.prototype=l.prototype={constructor:f,restart:function(s,k,M){if("function"!=typeof s)throw new TypeError("callback is not a function");M=(null==M?i():+M)+(null==k?0:+k),this._next||w===this||(w?w._next=this:m=this,w=this),this._call=s,this._time=M,_()},stop:function(){this._call&&(this._call=null,this._time=1/0,_())}},g.interval=function(s,k,M){var A=new f,E=k;return null==k?(A.restart(s,k,M),A):(k=+k,M=null==M?i():+M,A.restart(function I(C){C+=E,A.restart(I,E+=k,M),s(C)},k,M),A)},g.now=i,g.timeout=function(s,k,M){var A=new f;return A.restart(function(E){A.stop(),s(E+k)},k=null==k?0:+k,M),A},g.timer=l,g.timerFlush=h,Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ae&&void 0!==oe?ae:(g=g||self).d3=g.d3||{})},{}],124:[function(x,oe,ae){oe.exports=function(){for(var g=0;g<arguments.length;g++)if(void 0!==arguments[g])return arguments[g]}},{}],125:[function(x,oe,ae){"use strict";oe.exports=w;var g=(w.canvas=document.createElement("canvas")).getContext("2d"),m=y([32,126]);function w(e,r){Array.isArray(e)&&(e=e.join(", "));var n,a={},t=16,p=.05;r&&(2===r.length&&"number"==typeof r[0]?n=y(r):Array.isArray(r)?n=r:(r.o?n=y(r.o):r.pairs&&(n=r.pairs),r.fontSize&&(t=r.fontSize),null!=r.threshold&&(p=r.threshold))),n||(n=m),g.font=t+"px "+e;for(var u=0;u<n.length;u++){var i=n[u],c=g.measureText(i[0]).width+g.measureText(i[1]).width,f=g.measureText(i).width;Math.abs(c-f)>t*p&&(a[i]=(f-c)/t*1e3)}return a}function y(e){for(var r=[],n=e[0];n<=e[1];n++)for(var a=String.fromCharCode(n),t=e[0];t<e[1];t++){var p=a+String.fromCharCode(t);r.push(p)}return r}w.createPairs=y,w.ascii=m},{}],126:[function(x,oe,ae){var g=x("abs-svg-path"),m=x("normalize-svg-path"),w={M:"moveTo",C:"bezierCurveTo"};oe.exports=function(y,e){y.beginPath(),m(g(e)).forEach(function(r){var n=r[0],a=r.slice(1);y[w[n]].apply(y,a)}),y.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(x,oe,ae){oe.exports=function(g){switch(g){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(x,oe,ae){"use strict";oe.exports=function(g,m){switch(void 0===m&&(m=0),typeof g){case"number":if(g>0)return function(w,y){var e,r;for(e=new Array(w),r=0;r<w;++r)e[r]=y;return e}(0|g,m);break;case"object":if("number"==typeof g.length)return function w(y,e,r){var n=0|y[r];if(n<=0)return[];var a,t=new Array(n);if(r===y.length-1)for(a=0;a<n;++a)t[a]=e;else for(a=0;a<n;++a)t[a]=w(y,e,r+1);return t}(g,m,0)}return[]}},{}],129:[function(x,oe,ae){"use strict";function g(R,O,D){D=D||2;var L,B,j,W,Y,Q,ne,X=O&&O.length,$=X?O[0]*D:R.length,re=m(R,0,$,D,!0),H=[];if(!re||re.next===re.prev)return H;if(X&&(re=function(G,ie,q,ee){var te,se,he,xe=[];for(te=0,se=ie.length;te<se;te++)(he=m(G,ie[te]*ee,te<se-1?ie[te+1]*ee:G.length,ee,!1))===he.next&&(he.steiner=!0),xe.push(c(he));for(xe.sort(t),te=0;te<xe.length;te++)p(xe[te],q),q=w(q,q.next);return q}(R,O,re,D)),R.length>80*D){L=j=R[0],B=W=R[1];for(var U=D;U<$;U+=D)(Y=R[U])<L&&(L=Y),(Q=R[U+1])<B&&(B=Q),Y>j&&(j=Y),Q>W&&(W=Q);ne=0!==(ne=Math.max(j-L,W-B))?1/ne:0}return y(re,H,D,L,B,ne),H}function m(R,O,D,L,B){var j,W;if(B===C(R,O,D,L)>0)for(j=O;j<D;j+=L)W=A(j,R[j],R[j+1],W);else for(j=D-L;j>=O;j-=L)W=A(j,R[j],R[j+1],W);return W&&d(W,W.next)&&(E(W),W=W.next),W}function w(R,O){if(!R)return R;O||(O=R);var D,L=R;do{if(D=!1,L.steiner||!d(L,L.next)&&0!==h(L.prev,L,L.next))L=L.next;else{if(E(L),(L=O=L.prev)===L.next)break;D=!0}}while(D||L!==O);return O}function y(R,O,D,L,B,j,W){if(R){!W&&j&&function(X,$,re,H){var U=X;do{null===U.z&&(U.z=i(U.x,U.y,$,re,H)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next}while(U!==X);U.prevZ.nextZ=null,U.prevZ=null,function(G){var ie,q,ee,te,se,ue,de,he,xe=1;do{for(q=G,G=null,se=null,ue=0;q;){for(ue++,ee=q,de=0,ie=0;ie<xe&&(de++,ee=ee.nextZ);ie++);for(he=xe;de>0||he>0&&ee;)0!==de&&(0===he||!ee||q.z<=ee.z)?(te=q,q=q.nextZ,de--):(te=ee,ee=ee.nextZ,he--),se?se.nextZ=te:G=te,te.prevZ=se,se=te;q=ee}se.nextZ=null,xe*=2}while(ue>1)}(U)}(R,L,B,j);for(var Y,Q,ne=R;R.prev!==R.next;)if(Y=R.prev,Q=R.next,j?r(R,L,B,j):e(R))O.push(Y.i/D),O.push(R.i/D),O.push(Q.i/D),E(R),R=Q.next,ne=Q.next;else if((R=Q)===ne){W?1===W?y(R=n(w(R),O,D),O,D,L,B,j,2):2===W&&a(R,O,D,L,B,j):y(w(R),O,D,L,B,j,1);break}}}function e(R){var O=R.prev,D=R,L=R.next;if(h(O,D,L)>=0)return!1;for(var B=R.next.next;B!==R.prev;){if(f(O.x,O.y,D.x,D.y,L.x,L.y,B.x,B.y)&&h(B.prev,B,B.next)>=0)return!1;B=B.next}return!0}function r(R,O,D,L){var B=R.prev,j=R,W=R.next;if(h(B,j,W)>=0)return!1;for(var ne=B.x>j.x?B.x>W.x?B.x:W.x:j.x>W.x?j.x:W.x,X=B.y>j.y?B.y>W.y?B.y:W.y:j.y>W.y?j.y:W.y,$=i(B.x<j.x?B.x<W.x?B.x:W.x:j.x<W.x?j.x:W.x,B.y<j.y?B.y<W.y?B.y:W.y:j.y<W.y?j.y:W.y,O,D,L),re=i(ne,X,O,D,L),H=R.prevZ,U=R.nextZ;H&&H.z>=$&&U&&U.z<=re;){if(H!==R.prev&&H!==R.next&&f(B.x,B.y,j.x,j.y,W.x,W.y,H.x,H.y)&&h(H.prev,H,H.next)>=0||(H=H.prevZ,U!==R.prev&&U!==R.next&&f(B.x,B.y,j.x,j.y,W.x,W.y,U.x,U.y)&&h(U.prev,U,U.next)>=0))return!1;U=U.nextZ}for(;H&&H.z>=$;){if(H!==R.prev&&H!==R.next&&f(B.x,B.y,j.x,j.y,W.x,W.y,H.x,H.y)&&h(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;U&&U.z<=re;){if(U!==R.prev&&U!==R.next&&f(B.x,B.y,j.x,j.y,W.x,W.y,U.x,U.y)&&h(U.prev,U,U.next)>=0)return!1;U=U.nextZ}return!0}function n(R,O,D){var L=R;do{var B=L.prev,j=L.next.next;!d(B,j)&&o(B,L,L.next,j)&&k(B,j)&&k(j,B)&&(O.push(B.i/D),O.push(L.i/D),O.push(j.i/D),E(L),E(L.next),L=R=j),L=L.next}while(L!==R);return w(L)}function a(R,O,D,L,B,j){var W=R;do{for(var Y=W.next.next;Y!==W.prev;){if(W.i!==Y.i&&l(W,Y)){var Q=M(W,Y);return W=w(W,W.next),Q=w(Q,Q.next),y(W,O,D,L,B,j),void y(Q,O,D,L,B,j)}Y=Y.next}W=W.next}while(W!==R)}function t(R,O){return R.x-O.x}function p(R,O){if(O=function(L,B){var j,W=B,Y=L.x,Q=L.y,ne=-1/0;do{if(Q<=W.y&&Q>=W.next.y&&W.next.y!==W.y){var X=W.x+(Q-W.y)*(W.next.x-W.x)/(W.next.y-W.y);if(X<=Y&&X>ne){if(ne=X,X===Y){if(Q===W.y)return W;if(Q===W.next.y)return W.next}j=W.x<W.next.x?W:W.next}}W=W.next}while(W!==B);if(!j)return null;if(Y===ne)return j;var $,re=j,H=j.x,U=j.y,G=1/0;W=j;do{Y>=W.x&&W.x>=H&&Y!==W.x&&f(Q<U?Y:ne,Q,H,U,Q<U?ne:Y,Q,W.x,W.y)&&($=Math.abs(Q-W.y)/(Y-W.x),k(W,L)&&($<G||$===G&&(W.x>j.x||W.x===j.x&&u(j,W)))&&(j=W,G=$)),W=W.next}while(W!==re);return j}(R,O)){var D=M(O,R);w(O,O.next),w(D,D.next)}}function u(R,O){return h(R.prev,R,O.prev)<0&&h(O.next,R,R.next)<0}function i(R,O,D,L,B){return(R=1431655765&((R=858993459&((R=252645135&((R=16711935&((R=32767*(R-D)*B)|R<<8))|R<<4))|R<<2))|R<<1))|(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-L)*B)|O<<8))|O<<4))|O<<2))|O<<1))<<1}function c(R){var O=R,D=R;do{(O.x<D.x||O.x===D.x&&O.y<D.y)&&(D=O),O=O.next}while(O!==R);return D}function f(R,O,D,L,B,j,W,Y){return(B-W)*(O-Y)-(R-W)*(j-Y)>=0&&(R-W)*(L-Y)-(D-W)*(O-Y)>=0&&(D-W)*(j-Y)-(B-W)*(L-Y)>=0}function l(R,O){return R.next.i!==O.i&&R.prev.i!==O.i&&!function(D,L){var B=D;do{if(B.i!==D.i&&B.next.i!==D.i&&B.i!==L.i&&B.next.i!==L.i&&o(B,B.next,D,L))return!0;B=B.next}while(B!==D);return!1}(R,O)&&(k(R,O)&&k(O,R)&&function(D,L){var B=D,j=!1,W=(D.x+L.x)/2,Y=(D.y+L.y)/2;do{B.y>Y!=B.next.y>Y&&B.next.y!==B.y&&W<(B.next.x-B.x)*(Y-B.y)/(B.next.y-B.y)+B.x&&(j=!j),B=B.next}while(B!==D);return j}(R,O)&&(h(R.prev,R,O.prev)||h(R,O.prev,O))||d(R,O)&&h(R.prev,R,R.next)>0&&h(O.prev,O,O.next)>0)}function h(R,O,D){return(O.y-R.y)*(D.x-O.x)-(O.x-R.x)*(D.y-O.y)}function d(R,O){return R.x===O.x&&R.y===O.y}function o(R,O,D,L){var B=s(h(R,O,D)),j=s(h(R,O,L)),W=s(h(D,L,R)),Y=s(h(D,L,O));return B!==j&&W!==Y||!(0!==B||!_(R,D,O))||!(0!==j||!_(R,L,O))||!(0!==W||!_(D,R,L))||!(0!==Y||!_(D,O,L))}function _(R,O,D){return O.x<=Math.max(R.x,D.x)&&O.x>=Math.min(R.x,D.x)&&O.y<=Math.max(R.y,D.y)&&O.y>=Math.min(R.y,D.y)}function s(R){return R>0?1:R<0?-1:0}function k(R,O){return h(R.prev,R,R.next)<0?h(R,O,R.next)>=0&&h(R,R.prev,O)>=0:h(R,O,R.prev)<0||h(R,R.next,O)<0}function M(R,O){var D=new I(R.i,R.x,R.y),L=new I(O.i,O.x,O.y),B=R.next,j=O.prev;return R.next=O,O.prev=R,D.next=B,B.prev=D,L.next=D,D.prev=L,j.next=L,L.prev=j,L}function A(R,O,D,L){var B=new I(R,O,D);return L?(B.next=L.next,B.prev=L,L.next.prev=B,L.next=B):(B.prev=B,B.next=B),B}function E(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function I(R,O,D){this.i=R,this.x=O,this.y=D,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(R,O,D,L){for(var B=0,j=O,W=D-L;j<D;j+=L)B+=(R[W]-R[j])*(R[j+1]+R[W+1]),W=j;return B}oe.exports=g,oe.exports.default=g,g.deviation=function(R,O,D,L){var B=O&&O.length,W=Math.abs(C(R,0,B?O[0]*D:R.length,D));if(B)for(var Y=0,Q=O.length;Y<Q;Y++)W-=Math.abs(C(R,O[Y]*D,Y<Q-1?O[Y+1]*D:R.length,D));var $=0;for(Y=0;Y<L.length;Y+=3){var re=L[Y]*D,H=L[Y+1]*D,U=L[Y+2]*D;$+=Math.abs((R[re]-R[U])*(R[H+1]-R[re+1])-(R[re]-R[H])*(R[U+1]-R[re+1]))}return 0===W&&0===$?0:Math.abs(($-W)/W)},g.flatten=function(R){for(var O=R[0][0].length,D={vertices:[],holes:[],dimensions:O},L=0,B=0;B<R.length;B++){for(var j=0;j<R[B].length;j++)for(var W=0;W<O;W++)D.vertices.push(R[B][j][W]);B>0&&D.holes.push(L+=R[B-1].length)}return D}},{}],130:[function(x,oe,ae){var g=x("strongly-connected-components");oe.exports=function(m,w){var y,e=[],r=[],n=[],a={},t=[];function p(o){var _,s,k=!1;for(r.push(o),n[o]=!0,_=0;_<t[o].length;_++)(s=t[o][_])===y?(u(y,r),k=!0):n[s]||(k=p(s));if(k)!function A(E){n[E]=!1,a.hasOwnProperty(E)&&Object.keys(a[E]).forEach(function(I){delete a[E][I],n[I]&&A(I)})}(o);else for(_=0;_<t[o].length;_++){var M=a[s=t[o][_]];M||(a[s]=M={}),M[s]=!0}return r.pop(),k}function u(o,_){var s=[].concat(_).concat(o);w?w(p):e.push(s)}function i(o){!function(I){for(var C=0;C<m.length;C++)C<I&&(m[C]=[]),m[C]=m[C].filter(function(R){return R>=I})}(o);for(var _,s=g(m).components.filter(function(I){return I.length>1}),k=1/0,M=0;M<s.length;M++)for(var A=0;A<s[M].length;A++)s[M][A]<k&&(k=s[M][A],_=M);var E=s[_];return!!E&&{leastVertex:k,adjList:m.map(function(I,C){return-1===E.indexOf(C)?[]:I.filter(function(R){return-1!==E.indexOf(R)})})}}y=0;for(var c=m.length;y<c;){var f=i(y);if(y=f.leastVertex,t=f.adjList){for(var l=0;l<t.length;l++)for(var h=0;h<t[l].length;h++){var d=t[l][h];n[+d]=!1,a[d]={}}p(y),y+=1}else y=c}return w?void 0:e}},{"strongly-connected-components":306}],131:[function(x,oe,ae){"use strict";var g=x("../../object/valid-value");oe.exports=function(){return g(this).length=0,this}},{"../../object/valid-value":162}],132:[function(x,oe,ae){"use strict";oe.exports=x("./is-implemented")()?Array.from:x("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(x,oe,ae){"use strict";oe.exports=function(){var g,m,w=Array.from;return"function"==typeof w&&(m=w(g=["raz","dwa"]),Boolean(m&&m!==g&&"dwa"===m[1]))}},{}],134:[function(x,oe,ae){"use strict";var g=x("es6-symbol").iterator,m=x("../../function/is-arguments"),w=x("../../function/is-function"),y=x("../../number/to-pos-integer"),e=x("../../object/valid-callable"),r=x("../../object/valid-value"),n=x("../../object/is-value"),a=x("../../string/is-string"),t=Array.isArray,p=Function.prototype.call,u={configurable:!0,enumerable:!0,writable:!0,value:null},i=Object.defineProperty;oe.exports=function(c){var f,l,h,d,o,_,s,k,M,A,E=arguments[1],I=arguments[2];if(c=Object(r(c)),n(E)&&e(E),this&&this!==Array&&w(this))f=this;else{if(!E){if(m(c))return 1!==(o=c.length)?Array.apply(null,c):((d=new Array(1))[0]=c[0],d);if(t(c)){for(d=new Array(o=c.length),l=0;l<o;++l)d[l]=c[l];return d}}d=[]}if(!t(c))if(void 0!==(M=c[g])){for(s=e(M).call(c),f&&(d=new f),k=s.next(),l=0;!k.done;)A=E?p.call(E,I,k.value,l):k.value,f?(u.value=A,i(d,l,u)):d[l]=A,k=s.next(),++l;o=l}else if(a(c)){for(o=c.length,f&&(d=new f),l=0,h=0;l<o;++l)A=c[l],l+1<o&&(_=A.charCodeAt(0))>=55296&&_<=56319&&(A+=c[++l]),A=E?p.call(E,I,A,h):A,f?(u.value=A,i(d,h,u)):d[h]=A,++h;o=h}if(void 0===o)for(o=y(c.length),f&&(d=new f(o)),l=0;l<o;++l)A=E?p.call(E,I,c[l],l):c[l],f?(u.value=A,i(d,l,u)):d[l]=A;return f&&(u.value=null,d.length=o),d}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(x,oe,ae){"use strict";var g=Object.prototype.toString,m=g.call(function(){return arguments}());oe.exports=function(w){return g.call(w)===m}},{}],136:[function(x,oe,ae){"use strict";var g=Object.prototype.toString,m=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);oe.exports=function(w){return"function"==typeof w&&m(g.call(w))}},{}],137:[function(x,oe,ae){"use strict";oe.exports=function(){}},{}],138:[function(x,oe,ae){"use strict";oe.exports=x("./is-implemented")()?Math.sign:x("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(x,oe,ae){"use strict";oe.exports=function(){var g=Math.sign;return"function"==typeof g&&1===g(10)&&-1===g(-20)}},{}],140:[function(x,oe,ae){"use strict";oe.exports=function(g){return g=Number(g),isNaN(g)||0===g?g:g>0?1:-1}},{}],141:[function(x,oe,ae){"use strict";var g=x("../math/sign"),m=Math.abs,w=Math.floor;oe.exports=function(y){return isNaN(y)?0:0!==(y=Number(y))&&isFinite(y)?g(y)*w(m(y)):y}},{"../math/sign":138}],142:[function(x,oe,ae){"use strict";var g=x("./to-integer"),m=Math.max;oe.exports=function(w){return m(0,g(w))}},{"./to-integer":141}],143:[function(x,oe,ae){"use strict";var g=x("./valid-callable"),m=x("./valid-value"),w=Function.prototype.bind,y=Function.prototype.call,e=Object.keys,r=Object.prototype.propertyIsEnumerable;oe.exports=function(n,a){return function(t,p){var u,i=arguments[2],c=arguments[3];return t=Object(m(t)),g(p),u=e(t),c&&u.sort("function"==typeof c?w.call(c,t):void 0),"function"!=typeof n&&(n=u[n]),y.call(n,u,function(f,l){return r.call(t,f)?y.call(p,i,t[f],f,t,l):a})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(x,oe,ae){"use strict";oe.exports=x("./is-implemented")()?Object.assign:x("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(x,oe,ae){"use strict";oe.exports=function(){var g,m=Object.assign;return"function"==typeof m&&(m(g={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),g.foo+g.bar+g.trzy==="razdwatrzy")}},{}],146:[function(x,oe,ae){"use strict";var g=x("../keys"),m=x("../valid-value"),w=Math.max;oe.exports=function(y,e){var r,n,a,t=w(arguments.length,2);for(y=Object(m(y)),a=function(p){try{y[p]=e[p]}catch(u){r||(r=u)}},n=1;n<t;++n)g(e=arguments[n]).forEach(a);if(void 0!==r)throw r;return y}},{"../keys":152,"../valid-value":162}],147:[function(x,oe,ae){"use strict";var g=x("../array/from"),m=x("./assign"),w=x("./valid-value");oe.exports=function(y){var e=Object(w(y)),r=arguments[1],n=Object(arguments[2]);if(e!==y&&!r)return e;var a={};return r?g(r,function(t){(n.ensure||t in y)&&(a[t]=y[t])}):m(a,y),a}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(x,oe,ae){"use strict";var g,m,w,y,e=Object.create;x("./set-prototype-of/is-implemented")()||(g=x("./set-prototype-of/shim")),oe.exports=g?1!==g.level?e:(m={},w={},y={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(r){w[r]="__proto__"!==r?y:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(m,w),Object.defineProperty(g,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:m}),function(r,n){return e(null===r?m:r,n)}):e},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(x,oe,ae){"use strict";oe.exports=x("./_iterate")("forEach")},{"./_iterate":143}],150:[function(x,oe,ae){"use strict";var g=x("./is-value"),m={function:!0,object:!0};oe.exports=function(w){return g(w)&&m[typeof w]||!1}},{"./is-value":151}],151:[function(x,oe,ae){"use strict";var g=x("../function/noop")();oe.exports=function(m){return m!==g&&null!==m}},{"../function/noop":137}],152:[function(x,oe,ae){"use strict";oe.exports=x("./is-implemented")()?Object.keys:x("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(x,oe,ae){"use strict";oe.exports=function(){try{return Object.keys("primitive"),!0}catch(g){return!1}}},{}],154:[function(x,oe,ae){"use strict";var g=x("../is-value"),m=Object.keys;oe.exports=function(w){return m(g(w)?Object(w):w)}},{"../is-value":151}],155:[function(x,oe,ae){"use strict";var g=x("./valid-callable"),m=x("./for-each"),w=Function.prototype.call;oe.exports=function(y,e){var r={},n=arguments[2];return g(e),m(y,function(a,t,p,u){r[t]=w.call(e,n,a,t,p,u)}),r}},{"./for-each":149,"./valid-callable":160}],156:[function(x,oe,ae){"use strict";var g=x("./is-value"),m=Array.prototype.forEach,w=Object.create,y=function(e,r){var n;for(n in e)r[n]=e[n]};oe.exports=function(e){var r=w(null);return m.call(arguments,function(n){g(n)&&y(Object(n),r)}),r}},{"./is-value":151}],157:[function(x,oe,ae){"use strict";oe.exports=x("./is-implemented")()?Object.setPrototypeOf:x("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(x,oe,ae){"use strict";var g=Object.create,m=Object.getPrototypeOf,w={};oe.exports=function(){var y=Object.setPrototypeOf;return"function"==typeof y&&m(y((arguments[0]||g)(null),w))===w}},{}],159:[function(x,oe,ae){"use strict";var g,n,a,t,m=x("../is-object"),w=x("../valid-value"),y=Object.prototype.isPrototypeOf,e=Object.defineProperty,r={configurable:!0,enumerable:!1,writable:!0,value:void 0};g=function(n,a){if(w(n),null===a||m(a))return n;throw new TypeError("Prototype must be null or an object")},oe.exports=(n=function(){var n,a=Object.create(null),t={},p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(p){try{(n=p.set).call(a,t)}catch(u){}if(Object.getPrototypeOf(a)===t)return{set:n,level:2}}return a.__proto__=t,Object.getPrototypeOf(a)===t?{level:2}:((a={}).__proto__=t,Object.getPrototypeOf(a)===t&&{level:1})}(),n?(2===n.level?n.set?(t=n.set,a=function(p,u){return t.call(g(p,u),u),p}):a=function(p,u){return g(p,u).__proto__=u,p}:a=function p(u,i){var c;return g(u,i),(c=y.call(p.nullPolyfill,u))&&delete p.nullPolyfill.__proto__,null===i&&(i=p.nullPolyfill),u.__proto__=i,c&&e(p.nullPolyfill,"__proto__",r),u},Object.defineProperty(a,"level",{configurable:!1,enumerable:!1,writable:!1,value:n.level})):null),x("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(x,oe,ae){"use strict";oe.exports=function(g){if("function"!=typeof g)throw new TypeError(g+" is not a function");return g}},{}],161:[function(x,oe,ae){"use strict";var g=x("./is-object");oe.exports=function(m){if(!g(m))throw new TypeError(m+" is not an Object");return m}},{"./is-object":150}],162:[function(x,oe,ae){"use strict";var g=x("./is-value");oe.exports=function(m){if(!g(m))throw new TypeError("Cannot use null or undefined");return m}},{"./is-value":151}],163:[function(x,oe,ae){"use strict";oe.exports=x("./is-implemented")()?String.prototype.contains:x("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(x,oe,ae){"use strict";var g="razdwatrzy";oe.exports=function(){return"function"==typeof g.contains&&!0===g.contains("dwa")&&!1===g.contains("foo")}},{}],165:[function(x,oe,ae){"use strict";var g=String.prototype.indexOf;oe.exports=function(m){return g.call(this,m,arguments[1])>-1}},{}],166:[function(x,oe,ae){"use strict";var g=Object.prototype.toString,m=g.call("");oe.exports=function(w){return"string"==typeof w||w&&"object"==typeof w&&(w instanceof String||g.call(w)===m)||!1}},{}],167:[function(x,oe,ae){"use strict";var g=Object.create(null),m=Math.random;oe.exports=function(){var w;do{w=m().toString(36).slice(2)}while(g[w]);return w}},{}],168:[function(x,oe,ae){"use strict";var g,m=x("es5-ext/object/set-prototype-of"),w=x("es5-ext/string/#/contains"),y=x("d"),e=x("es6-symbol"),r=x("./"),n=Object.defineProperty;g=oe.exports=function(a,t){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");r.call(this,a),t=t?w.call(t,"key+value")?"key+value":w.call(t,"key")?"key":"value":"value",n(this,"__kind__",y("",t))},m&&m(g,r),delete g.prototype.constructor,g.prototype=Object.create(r.prototype,{_resolve:y(function(a){return"value"===this.__kind__?this.__list__[a]:"key+value"===this.__kind__?[a,this.__list__[a]]:a})}),n(g.prototype,e.toStringTag,y("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(x,oe,ae){"use strict";var g=x("es5-ext/function/is-arguments"),m=x("es5-ext/object/valid-callable"),w=x("es5-ext/string/is-string"),y=x("./get"),e=Array.isArray,r=Function.prototype.call,n=Array.prototype.some;oe.exports=function(a,t){var p,u,i,c,f,l,h,d,o=arguments[2];if(e(a)||g(a)?p="array":w(a)?p="string":a=y(a),m(t),i=function(){c=!0},"array"!==p)if("string"!==p)for(u=a.next();!u.done;){if(r.call(t,o,u.value,i),c)return;u=a.next()}else for(l=a.length,f=0;f<l&&(h=a[f],f+1<l&&(d=h.charCodeAt(0))>=55296&&d<=56319&&(h+=a[++f]),r.call(t,o,h,i),!c);++f);else n.call(a,function(_){return r.call(t,o,_,i),c})}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(x,oe,ae){"use strict";var g=x("es5-ext/function/is-arguments"),m=x("es5-ext/string/is-string"),w=x("./array"),y=x("./string"),e=x("./valid-iterable"),r=x("es6-symbol").iterator;oe.exports=function(n){return"function"==typeof e(n)[r]?n[r]():g(n)?new w(n):m(n)?new y(n):new w(n)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(x,oe,ae){"use strict";var g,m=x("es5-ext/array/#/clear"),w=x("es5-ext/object/assign"),y=x("es5-ext/object/valid-callable"),e=x("es5-ext/object/valid-value"),r=x("d"),n=x("d/auto-bind"),a=x("es6-symbol"),t=Object.defineProperty,p=Object.defineProperties;oe.exports=g=function(u,i){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");p(this,{__list__:r("w",e(u)),__context__:r("w",i),__nextIndex__:r("w",0)}),i&&(y(i.on),i.on("_add",this._onAdd),i.on("_delete",this._onDelete),i.on("_clear",this._onClear))},delete g.prototype.constructor,p(g.prototype,w({_next:r(function(){var u;if(this.__list__)return this.__redo__&&void 0!==(u=this.__redo__.shift())?u:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:r(function(){return this._createResult(this._next())}),_createResult:r(function(u){return void 0===u?{done:!0,value:void 0}:{done:!1,value:this._resolve(u)}}),_resolve:r(function(u){return this.__list__[u]}),_unBind:r(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:r(function(){return"[object "+(this[a.toStringTag]||"Object")+"]"})},n({_onAdd:r(function(u){u>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(i,c){i>=u&&(this.__redo__[c]=++i)},this),this.__redo__.push(u)):t(this,"__redo__",r("c",[u])))}),_onDelete:r(function(u){var i;u>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(i=this.__redo__.indexOf(u))&&this.__redo__.splice(i,1),this.__redo__.forEach(function(c,f){c>u&&(this.__redo__[f]=--c)},this)))}),_onClear:r(function(){this.__redo__&&m.call(this.__redo__),this.__nextIndex__=0})}))),t(g.prototype,a.iterator,r(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(x,oe,ae){"use strict";var g=x("es5-ext/function/is-arguments"),m=x("es5-ext/object/is-value"),w=x("es5-ext/string/is-string"),y=x("es6-symbol").iterator,e=Array.isArray;oe.exports=function(r){return!(!m(r)||!e(r)&&!w(r)&&!g(r)&&"function"!=typeof r[y])}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(x,oe,ae){"use strict";var g,m=x("es5-ext/object/set-prototype-of"),w=x("d"),y=x("es6-symbol"),e=x("./"),r=Object.defineProperty;g=oe.exports=function(n){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");n=String(n),e.call(this,n),r(this,"__length__",w("",n.length))},m&&m(g,e),delete g.prototype.constructor,g.prototype=Object.create(e.prototype,{_next:w(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:w(function(n){var a,t=this.__list__[n];return this.__nextIndex__===this.__length__?t:(a=t.charCodeAt(0))>=55296&&a<=56319?t+this.__list__[this.__nextIndex__++]:t})}),r(g.prototype,y.toStringTag,w("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(x,oe,ae){"use strict";var g=x("./is-iterable");oe.exports=function(m){if(!g(m))throw new TypeError(m+" is not iterable");return m}},{"./is-iterable":172}],175:[function(x,oe,ae){"use strict";oe.exports=x("./is-implemented")()?x("ext/global-this").Symbol:x("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(x,oe,ae){"use strict";var g=x("ext/global-this"),m={object:!0,symbol:!0};oe.exports=function(){var w,y=g.Symbol;if("function"!=typeof y)return!1;w=y("test symbol");try{String(w)}catch(e){return!1}return!!m[typeof y.iterator]&&!!m[typeof y.toPrimitive]&&!!m[typeof y.toStringTag]}},{"ext/global-this":188}],177:[function(x,oe,ae){"use strict";oe.exports=function(g){return!!g&&("symbol"==typeof g||!!g.constructor&&"Symbol"===g.constructor.name&&"Symbol"===g[g.constructor.toStringTag])}},{}],178:[function(x,oe,ae){"use strict";var g=x("d"),w=Object.defineProperty,y=Object.prototype,e=(0,Object.create)(null);oe.exports=function(r){for(var n,a,t=0;e[r+(t||"")];)++t;return e[r+=t||""]=!0,w(y,n="@@"+r,g.gs(null,function(p){a||(a=!0,w(this,n,g(p)),a=!1)})),n}},{d:106}],179:[function(x,oe,ae){"use strict";var g=x("d"),m=x("ext/global-this").Symbol;oe.exports=function(w){return Object.defineProperties(w,{hasInstance:g("",m&&m.hasInstance||w("hasInstance")),isConcatSpreadable:g("",m&&m.isConcatSpreadable||w("isConcatSpreadable")),iterator:g("",m&&m.iterator||w("iterator")),match:g("",m&&m.match||w("match")),replace:g("",m&&m.replace||w("replace")),search:g("",m&&m.search||w("search")),species:g("",m&&m.species||w("species")),split:g("",m&&m.split||w("split")),toPrimitive:g("",m&&m.toPrimitive||w("toPrimitive")),toStringTag:g("",m&&m.toStringTag||w("toStringTag")),unscopables:g("",m&&m.unscopables||w("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(x,oe,ae){"use strict";var g=x("d"),m=x("../../../validate-symbol"),w=Object.create(null);oe.exports=function(y){return Object.defineProperties(y,{for:g(function(e){return w[e]?w[e]:w[e]=y(String(e))}),keyFor:g(function(e){var r;for(r in m(e),w)if(w[r]===e)return r})})}},{"../../../validate-symbol":182,d:106}],181:[function(x,oe,ae){"use strict";var g,m,w,y=x("d"),e=x("./validate-symbol"),r=x("ext/global-this").Symbol,n=x("./lib/private/generate-name"),a=x("./lib/private/setup/standard-symbols"),t=x("./lib/private/setup/symbol-registry"),p=Object.create,u=Object.defineProperties,i=Object.defineProperty;if("function"==typeof r)try{String(r()),w=!0}catch(c){}else r=null;m=function(c){if(this instanceof m)throw new TypeError("Symbol is not a constructor");return g(c)},oe.exports=g=function c(f){var l;if(this instanceof c)throw new TypeError("Symbol is not a constructor");return w?r(f):(l=p(m.prototype),f=void 0===f?"":String(f),u(l,{__description__:y("",f),__name__:y("",n(f))}))},a(g),t(g),u(m.prototype,{constructor:y(g),toString:y("",function(){return this.__name__})}),u(g.prototype,{toString:y(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:y(function(){return e(this)})}),i(g.prototype,g.toPrimitive,y("",function(){var c=e(this);return"symbol"==typeof c?c:c.toString()})),i(g.prototype,g.toStringTag,y("c","Symbol")),i(m.prototype,g.toStringTag,y("c",g.prototype[g.toStringTag])),i(m.prototype,g.toPrimitive,y("c",g.prototype[g.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(x,oe,ae){"use strict";var g=x("./is-symbol");oe.exports=function(m){if(!g(m))throw new TypeError(m+" is not a symbol");return m}},{"./is-symbol":177}],183:[function(x,oe,ae){"use strict";oe.exports=x("./is-implemented")()?WeakMap:x("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(x,oe,ae){"use strict";oe.exports=function(){var g,m;if("function"!=typeof WeakMap)return!1;try{g=new WeakMap([[m={},"one"],[{},"two"],[{},"three"]])}catch(w){return!1}return"[object WeakMap]"===String(g)&&"function"==typeof g.set&&g.set({},1)===g&&"function"==typeof g.delete&&"function"==typeof g.has&&"one"===g.get(m)}},{}],185:[function(x,oe,ae){"use strict";oe.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],186:[function(x,oe,ae){"use strict";var g,m=x("es5-ext/object/is-value"),w=x("es5-ext/object/set-prototype-of"),y=x("es5-ext/object/valid-object"),e=x("es5-ext/object/valid-value"),r=x("es5-ext/string/random-uniq"),n=x("d"),a=x("es6-iterator/get"),t=x("es6-iterator/for-of"),p=x("es6-symbol").toStringTag,u=x("./is-native-implemented"),i=Array.isArray,c=Object.defineProperty,f=Object.prototype.hasOwnProperty,l=Object.getPrototypeOf;oe.exports=g=function(){var h,d=arguments[0];if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");return h=u&&w&&WeakMap!==g?w(new WeakMap,l(this)):this,m(d)&&(i(d)||(d=a(d))),c(h,"__weakMapData__",n("c","$weakMap$"+r())),d&&t(d,function(o){e(o),h.set(o[0],o[1])}),h},u&&(w&&w(g,WeakMap),g.prototype=Object.create(WeakMap.prototype,{constructor:n(g)})),Object.defineProperties(g.prototype,{delete:n(function(h){return!!f.call(y(h),this.__weakMapData__)&&(delete h[this.__weakMapData__],!0)}),get:n(function(h){if(f.call(y(h),this.__weakMapData__))return h[this.__weakMapData__]}),has:n(function(h){return f.call(y(h),this.__weakMapData__)}),set:n(function(h,d){return c(y(h),this.__weakMapData__,n("c",d)),this}),toString:n(function(){return"[object WeakMap]"})}),c(g.prototype,p,n("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(x,oe,ae){var g=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};oe.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(m){return g()}try{return __global__||g()}finally{delete Object.prototype.__global__}}()},{}],188:[function(x,oe,ae){"use strict";oe.exports=x("./is-implemented")()?globalThis:x("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(x,oe,ae){"use strict";oe.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},{}],190:[function(x,oe,ae){"use strict";var g=x("is-string-blank");oe.exports=function(m){var w=typeof m;if("string"===w){var y=m;if(0==(m=+m)&&g(y))return!1}else if("number"!==w)return!1;return m-m<1}},{"is-string-blank":237}],191:[function(x,oe,ae){var g=x("dtype");oe.exports=function(m,w,y){if(!m)throw new TypeError("must specify data as first parameter");if(y=0|+(y||0),Array.isArray(m)&&m[0]&&"number"==typeof m[0][0]){var e,r,n,a,t=m[0].length,p=m.length*t;w&&"string"!=typeof w||(w=new(g(w||"float32"))(p+y));var u=w.length-y;if(p!==u)throw new Error("source length "+p+" ("+t+"x"+m.length+") does not match destination length "+u);for(e=0,n=y;e<m.length;e++)for(r=0;r<t;r++)w[n++]=null===m[e][r]?NaN:m[e][r]}else if(w&&"string"!=typeof w)w.set(m,y);else{var i=g(w||"float32");if(Array.isArray(m)||"array"===w)for(e=0,n=y,a=(w=new i(m.length+y)).length;n<a;n++,e++)w[n]=null===m[e]?NaN:m[e];else 0===y?w=new i(m):(w=new i(m.length+y)).set(m,y)}return w}},{dtype:127}],192:[function(x,oe,ae){"use strict";var g=x("css-font/stringify"),m=[32,126];oe.exports=function(w){var y=(w=w||{}).shape?w.shape:w.canvas?[w.canvas.width,w.canvas.height]:[512,512],e=w.canvas||document.createElement("canvas"),r=w.font,n="number"==typeof w.step?[w.step,w.step]:w.step||[32,32],a=w.chars||m;if(r&&"string"!=typeof r&&(r=g(r)),Array.isArray(a)){if(2===a.length&&"number"==typeof a[0]&&"number"==typeof a[1]){for(var t=[],p=a[0],u=0;p<=a[1];p++)t[u++]=String.fromCharCode(p);a=t}}else a=String(a).split("");y=y.slice(),e.width=y[0],e.height=y[1];var i=e.getContext("2d");i.fillStyle="#000",i.fillRect(0,0,e.width,e.height),i.font=r,i.textAlign="center",i.textBaseline="middle",i.fillStyle="#fff";var c=n[0]/2,f=n[1]/2;for(p=0;p<a.length;p++)i.fillText(a[p],c,f),(c+=n[0])>y[0]-n[0]/2&&(c=n[0]/2,f+=n[1]);return e}},{"css-font/stringify":102}],193:[function(x,oe,ae){"use strict";function g(e,r){r||(r={}),("string"==typeof e||Array.isArray(e))&&(r.family=e);var n=Array.isArray(r.family)?r.family.join(", "):r.family;if(!n)throw Error("`family` must be defined");var a=r.size||r.fontSize||r.em||48,p=(e=[r.style||r.fontStyle||"",r.weight||r.fontWeight||"",a].join(" ")+"px "+n,r.origin||"top");if(g.cache[n]&&a<=g.cache[n].em)return m(g.cache[n],p);var u=r.canvas||g.canvas,i=u.getContext("2d"),c={upper:void 0!==r.upper?r.upper:"H",lower:void 0!==r.lower?r.lower:"x",descent:void 0!==r.descent?r.descent:"p",ascent:void 0!==r.ascent?r.ascent:"h",tittle:void 0!==r.tittle?r.tittle:"i",overshoot:void 0!==r.overshoot?r.overshoot:"O"},f=Math.ceil(1.5*a);u.height=f,u.width=.5*f,i.font=e;var l={top:0};i.clearRect(0,0,f,f),i.textBaseline="top",i.fillStyle="black",i.fillText("H",0,0);var h=w(i.getImageData(0,0,f,f));i.clearRect(0,0,f,f),i.textBaseline="bottom",i.fillText("H",0,f);var d=w(i.getImageData(0,0,f,f));l.lineHeight=l.bottom=f-d+h,i.clearRect(0,0,f,f),i.textBaseline="alphabetic",i.fillText("H",0,f);var o=f-w(i.getImageData(0,0,f,f))-1+h;l.baseline=l.alphabetic=o,i.clearRect(0,0,f,f),i.textBaseline="middle",i.fillText("H",0,.5*f);var _=w(i.getImageData(0,0,f,f));l.median=l.middle=f-_-1+h-.5*f,i.clearRect(0,0,f,f),i.textBaseline="hanging",i.fillText("H",0,.5*f);var s=w(i.getImageData(0,0,f,f));l.hanging=f-s-1+h-.5*f,i.clearRect(0,0,f,f),i.textBaseline="ideographic",i.fillText("H",0,f);var k=w(i.getImageData(0,0,f,f));if(l.ideographic=f-k-1+h,c.upper&&(i.clearRect(0,0,f,f),i.textBaseline="top",i.fillText(c.upper,0,0),l.upper=w(i.getImageData(0,0,f,f)),l.capHeight=l.baseline-l.upper),c.lower&&(i.clearRect(0,0,f,f),i.textBaseline="top",i.fillText(c.lower,0,0),l.lower=w(i.getImageData(0,0,f,f)),l.xHeight=l.baseline-l.lower),c.tittle&&(i.clearRect(0,0,f,f),i.textBaseline="top",i.fillText(c.tittle,0,0),l.tittle=w(i.getImageData(0,0,f,f))),c.ascent&&(i.clearRect(0,0,f,f),i.textBaseline="top",i.fillText(c.ascent,0,0),l.ascent=w(i.getImageData(0,0,f,f))),c.descent&&(i.clearRect(0,0,f,f),i.textBaseline="top",i.fillText(c.descent,0,0),l.descent=y(i.getImageData(0,0,f,f))),c.overshoot){i.clearRect(0,0,f,f),i.textBaseline="top",i.fillText(c.overshoot,0,0);var M=y(i.getImageData(0,0,f,f));l.overshoot=M-o}for(var A in l)l[A]/=a;return l.em=a,g.cache[n]=l,m(l,p)}function m(e,r){var n={};for(var a in"string"==typeof r&&(r=e[r]),e)"em"!==a&&(n[a]=e[a]-r);return n}function w(e){for(var r=e.height,n=e.data,a=3;a<n.length;a+=4)if(0!==n[a])return Math.floor(.25*(a-3)/r)}function y(e){for(var r=e.height,n=e.data,a=n.length-1;a>0;a-=4)if(0!==n[a])return Math.floor(.25*(a-3)/r)}oe.exports=g,g.canvas=document.createElement("canvas"),g.cache={}},{}],194:[function(x,oe,ae){oe.exports=function(g,m){if("string"!=typeof g)throw new TypeError("must specify type string");if(m=m||{},"undefined"==typeof document&&!m.canvas)return null;var w=m.canvas||document.createElement("canvas");"number"==typeof m.width&&(w.width=m.width),"number"==typeof m.height&&(w.height=m.height);var y,e=m;try{var r=[g];0===g.indexOf("webgl")&&r.push("experimental-"+g);for(var n=0;n<r.length;n++)if(y=w.getContext(r[n],e))return y}catch(a){y=null}return y||null}},{}],195:[function(x,oe,ae){oe.exports=function(g,m){var w=m[0],y=m[1],e=m[2],r=m[3],n=m[4],a=m[5],t=m[6],p=m[7],u=m[8],i=m[9],c=m[10],f=m[11],l=m[12],h=m[13],d=m[14],o=m[15];return g[0]=a*(c*o-f*d)-i*(t*o-p*d)+h*(t*f-p*c),g[1]=-(y*(c*o-f*d)-i*(e*o-r*d)+h*(e*f-r*c)),g[2]=y*(t*o-p*d)-a*(e*o-r*d)+h*(e*p-r*t),g[3]=-(y*(t*f-p*c)-a*(e*f-r*c)+i*(e*p-r*t)),g[4]=-(n*(c*o-f*d)-u*(t*o-p*d)+l*(t*f-p*c)),g[5]=w*(c*o-f*d)-u*(e*o-r*d)+l*(e*f-r*c),g[6]=-(w*(t*o-p*d)-n*(e*o-r*d)+l*(e*p-r*t)),g[7]=w*(t*f-p*c)-n*(e*f-r*c)+u*(e*p-r*t),g[8]=n*(i*o-f*h)-u*(a*o-p*h)+l*(a*f-p*i),g[9]=-(w*(i*o-f*h)-u*(y*o-r*h)+l*(y*f-r*i)),g[10]=w*(a*o-p*h)-n*(y*o-r*h)+l*(y*p-r*a),g[11]=-(w*(a*f-p*i)-n*(y*f-r*i)+u*(y*p-r*a)),g[12]=-(n*(i*d-c*h)-u*(a*d-t*h)+l*(a*c-t*i)),g[13]=w*(i*d-c*h)-u*(y*d-e*h)+l*(y*c-e*i),g[14]=-(w*(a*d-t*h)-n*(y*d-e*h)+l*(y*t-e*a)),g[15]=w*(a*c-t*i)-n*(y*c-e*i)+u*(y*t-e*a),g}},{}],196:[function(x,oe,ae){oe.exports=function(g){var m=new Float32Array(16);return m[0]=g[0],m[1]=g[1],m[2]=g[2],m[3]=g[3],m[4]=g[4],m[5]=g[5],m[6]=g[6],m[7]=g[7],m[8]=g[8],m[9]=g[9],m[10]=g[10],m[11]=g[11],m[12]=g[12],m[13]=g[13],m[14]=g[14],m[15]=g[15],m}},{}],197:[function(x,oe,ae){oe.exports=function(g,m){return g[0]=m[0],g[1]=m[1],g[2]=m[2],g[3]=m[3],g[4]=m[4],g[5]=m[5],g[6]=m[6],g[7]=m[7],g[8]=m[8],g[9]=m[9],g[10]=m[10],g[11]=m[11],g[12]=m[12],g[13]=m[13],g[14]=m[14],g[15]=m[15],g}},{}],198:[function(x,oe,ae){oe.exports=function(){var g=new Float32Array(16);return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],199:[function(x,oe,ae){oe.exports=function(g){var m=g[0],w=g[1],y=g[2],e=g[3],r=g[4],n=g[5],a=g[6],t=g[7],p=g[8],u=g[9],i=g[10],c=g[11],f=g[12],l=g[13],h=g[14],d=g[15];return(m*n-w*r)*(i*d-c*h)-(m*a-y*r)*(u*d-c*l)+(m*t-e*r)*(u*h-i*l)+(w*a-y*n)*(p*d-c*f)-(w*t-e*n)*(p*h-i*f)+(y*t-e*a)*(p*l-u*f)}},{}],200:[function(x,oe,ae){oe.exports=function(g,m){var w=m[0],y=m[1],e=m[2],r=m[3],n=w+w,a=y+y,t=e+e,p=w*n,u=y*n,i=y*a,c=e*n,f=e*a,l=e*t,h=r*n,d=r*a,o=r*t;return g[0]=1-i-l,g[1]=u+o,g[2]=c-d,g[3]=0,g[4]=u-o,g[5]=1-p-l,g[6]=f+h,g[7]=0,g[8]=c+d,g[9]=f-h,g[10]=1-p-i,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],201:[function(x,oe,ae){oe.exports=function(g,m,w){var y,e,r,n=w[0],a=w[1],t=w[2],p=Math.sqrt(n*n+a*a+t*t);return Math.abs(p)<1e-6?null:(n*=p=1/p,a*=p,t*=p,y=Math.sin(m),e=Math.cos(m),g[0]=n*n*(r=1-e)+e,g[1]=a*n*r+t*y,g[2]=t*n*r-a*y,g[3]=0,g[4]=n*a*r-t*y,g[5]=a*a*r+e,g[6]=t*a*r+n*y,g[7]=0,g[8]=n*t*r+a*y,g[9]=a*t*r-n*y,g[10]=t*t*r+e,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g)}},{}],202:[function(x,oe,ae){oe.exports=function(g,m,w){var y=m[0],e=m[1],r=m[2],n=m[3],a=y+y,t=e+e,p=r+r,u=y*a,i=y*t,c=y*p,f=e*t,l=e*p,h=r*p,d=n*a,o=n*t,_=n*p;return g[0]=1-(f+h),g[1]=i+_,g[2]=c-o,g[3]=0,g[4]=i-_,g[5]=1-(u+h),g[6]=l+d,g[7]=0,g[8]=c+o,g[9]=l-d,g[10]=1-(u+f),g[11]=0,g[12]=w[0],g[13]=w[1],g[14]=w[2],g[15]=1,g}},{}],203:[function(x,oe,ae){oe.exports=function(g,m){return g[0]=m[0],g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=m[1],g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=m[2],g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],204:[function(x,oe,ae){oe.exports=function(g,m){return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=m[0],g[13]=m[1],g[14]=m[2],g[15]=1,g}},{}],205:[function(x,oe,ae){oe.exports=function(g,m){var w=Math.sin(m),y=Math.cos(m);return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=y,g[6]=w,g[7]=0,g[8]=0,g[9]=-w,g[10]=y,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],206:[function(x,oe,ae){oe.exports=function(g,m){var w=Math.sin(m),y=Math.cos(m);return g[0]=y,g[1]=0,g[2]=-w,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=w,g[9]=0,g[10]=y,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],207:[function(x,oe,ae){oe.exports=function(g,m){var w=Math.sin(m),y=Math.cos(m);return g[0]=y,g[1]=w,g[2]=0,g[3]=0,g[4]=-w,g[5]=y,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],208:[function(x,oe,ae){oe.exports=function(g,m,w,y,e,r,n){var a=1/(w-m),t=1/(e-y),p=1/(r-n);return g[0]=2*r*a,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2*r*t,g[6]=0,g[7]=0,g[8]=(w+m)*a,g[9]=(e+y)*t,g[10]=(n+r)*p,g[11]=-1,g[12]=0,g[13]=0,g[14]=n*r*2*p,g[15]=0,g}},{}],209:[function(x,oe,ae){oe.exports=function(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],210:[function(x,oe,ae){oe.exports={create:x("./create"),clone:x("./clone"),copy:x("./copy"),identity:x("./identity"),transpose:x("./transpose"),invert:x("./invert"),adjoint:x("./adjoint"),determinant:x("./determinant"),multiply:x("./multiply"),translate:x("./translate"),scale:x("./scale"),rotate:x("./rotate"),rotateX:x("./rotateX"),rotateY:x("./rotateY"),rotateZ:x("./rotateZ"),fromRotation:x("./fromRotation"),fromRotationTranslation:x("./fromRotationTranslation"),fromScaling:x("./fromScaling"),fromTranslation:x("./fromTranslation"),fromXRotation:x("./fromXRotation"),fromYRotation:x("./fromYRotation"),fromZRotation:x("./fromZRotation"),fromQuat:x("./fromQuat"),frustum:x("./frustum"),perspective:x("./perspective"),perspectiveFromFieldOfView:x("./perspectiveFromFieldOfView"),ortho:x("./ortho"),lookAt:x("./lookAt"),str:x("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(x,oe,ae){oe.exports=function(g,m){var w=m[0],y=m[1],e=m[2],r=m[3],n=m[4],a=m[5],t=m[6],p=m[7],u=m[8],i=m[9],c=m[10],f=m[11],l=m[12],h=m[13],d=m[14],o=m[15],_=w*a-y*n,s=w*t-e*n,k=w*p-r*n,M=y*t-e*a,A=y*p-r*a,E=e*p-r*t,I=u*h-i*l,C=u*d-c*l,R=u*o-f*l,O=i*d-c*h,D=i*o-f*h,L=c*o-f*d,B=_*L-s*D+k*O+M*R-A*C+E*I;return B?(g[0]=(a*L-t*D+p*O)*(B=1/B),g[1]=(e*D-y*L-r*O)*B,g[2]=(h*E-d*A+o*M)*B,g[3]=(c*A-i*E-f*M)*B,g[4]=(t*R-n*L-p*C)*B,g[5]=(w*L-e*R+r*C)*B,g[6]=(d*k-l*E-o*s)*B,g[7]=(u*E-c*k+f*s)*B,g[8]=(n*D-a*R+p*I)*B,g[9]=(y*R-w*D-r*I)*B,g[10]=(l*A-h*k+o*_)*B,g[11]=(i*k-u*A-f*_)*B,g[12]=(a*C-n*O-t*I)*B,g[13]=(w*O-y*C+e*I)*B,g[14]=(h*s-l*M-d*_)*B,g[15]=(u*M-i*s+c*_)*B,g):null}},{}],212:[function(x,oe,ae){var g=x("./identity");oe.exports=function(m,w,y,e){var r,n,a,t,p,u,i,c,f,l,h=w[0],d=w[1],o=w[2],_=e[0],s=e[1],k=e[2],M=y[0],A=y[1],E=y[2];return Math.abs(h-M)<1e-6&&Math.abs(d-A)<1e-6&&Math.abs(o-E)<1e-6?g(m):(i=h-M,c=d-A,f=o-E,r=s*(f*=l=1/Math.sqrt(i*i+c*c+f*f))-k*(c*=l),n=k*(i*=l)-_*f,a=_*c-s*i,(l=Math.sqrt(r*r+n*n+a*a))?(r*=l=1/l,n*=l,a*=l):(r=0,n=0,a=0),t=c*a-f*n,p=f*r-i*a,u=i*n-c*r,(l=Math.sqrt(t*t+p*p+u*u))?(t*=l=1/l,p*=l,u*=l):(t=0,p=0,u=0),m[0]=r,m[1]=t,m[2]=i,m[3]=0,m[4]=n,m[5]=p,m[6]=c,m[7]=0,m[8]=a,m[9]=u,m[10]=f,m[11]=0,m[12]=-(r*h+n*d+a*o),m[13]=-(t*h+p*d+u*o),m[14]=-(i*h+c*d+f*o),m[15]=1,m)}},{"./identity":209}],213:[function(x,oe,ae){oe.exports=function(g,m,w){var y=m[0],e=m[1],r=m[2],n=m[3],a=m[4],t=m[5],p=m[6],u=m[7],i=m[8],c=m[9],f=m[10],l=m[11],h=m[12],d=m[13],o=m[14],_=m[15],s=w[0],k=w[1],M=w[2],A=w[3];return g[0]=s*y+k*a+M*i+A*h,g[1]=s*e+k*t+M*c+A*d,g[2]=s*r+k*p+M*f+A*o,g[3]=s*n+k*u+M*l+A*_,g[4]=(s=w[4])*y+(k=w[5])*a+(M=w[6])*i+(A=w[7])*h,g[5]=s*e+k*t+M*c+A*d,g[6]=s*r+k*p+M*f+A*o,g[7]=s*n+k*u+M*l+A*_,g[8]=(s=w[8])*y+(k=w[9])*a+(M=w[10])*i+(A=w[11])*h,g[9]=s*e+k*t+M*c+A*d,g[10]=s*r+k*p+M*f+A*o,g[11]=s*n+k*u+M*l+A*_,g[12]=(s=w[12])*y+(k=w[13])*a+(M=w[14])*i+(A=w[15])*h,g[13]=s*e+k*t+M*c+A*d,g[14]=s*r+k*p+M*f+A*o,g[15]=s*n+k*u+M*l+A*_,g}},{}],214:[function(x,oe,ae){oe.exports=function(g,m,w,y,e,r,n){var a=1/(m-w),t=1/(y-e),p=1/(r-n);return g[0]=-2*a,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=-2*t,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=2*p,g[11]=0,g[12]=(m+w)*a,g[13]=(e+y)*t,g[14]=(n+r)*p,g[15]=1,g}},{}],215:[function(x,oe,ae){oe.exports=function(g,m,w,y,e){var r=1/Math.tan(m/2),n=1/(y-e);return g[0]=r/w,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=r,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=(e+y)*n,g[11]=-1,g[12]=0,g[13]=0,g[14]=2*e*y*n,g[15]=0,g}},{}],216:[function(x,oe,ae){oe.exports=function(g,m,w,y){var e=Math.tan(m.upDegrees*Math.PI/180),r=Math.tan(m.downDegrees*Math.PI/180),n=Math.tan(m.leftDegrees*Math.PI/180),a=Math.tan(m.rightDegrees*Math.PI/180),t=2/(n+a),p=2/(e+r);return g[0]=t,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=p,g[6]=0,g[7]=0,g[8]=-(n-a)*t*.5,g[9]=(e-r)*p*.5,g[10]=y/(w-y),g[11]=-1,g[12]=0,g[13]=0,g[14]=y*w/(w-y),g[15]=0,g}},{}],217:[function(x,oe,ae){oe.exports=function(g,m,w,y){var e,r,n,a,t,p,u,i,c,f,l,h,d,o,_,s,k,M,A,E,I,C,R,O,D=y[0],L=y[1],B=y[2],j=Math.sqrt(D*D+L*L+B*B);return Math.abs(j)<1e-6?null:(D*=j=1/j,L*=j,B*=j,e=Math.sin(w),r=Math.cos(w),t=m[1],p=m[2],u=m[3],c=m[5],f=m[6],l=m[7],d=m[9],o=m[10],_=m[11],A=D*L*(n=1-r)-B*e,E=L*L*n+r,I=B*L*n+D*e,C=D*B*n+L*e,R=L*B*n-D*e,O=B*B*n+r,g[0]=(a=m[0])*(s=D*D*n+r)+(i=m[4])*(k=L*D*n+B*e)+(h=m[8])*(M=B*D*n-L*e),g[1]=t*s+c*k+d*M,g[2]=p*s+f*k+o*M,g[3]=u*s+l*k+_*M,g[4]=a*A+i*E+h*I,g[5]=t*A+c*E+d*I,g[6]=p*A+f*E+o*I,g[7]=u*A+l*E+_*I,g[8]=a*C+i*R+h*O,g[9]=t*C+c*R+d*O,g[10]=p*C+f*R+o*O,g[11]=u*C+l*R+_*O,m!==g&&(g[12]=m[12],g[13]=m[13],g[14]=m[14],g[15]=m[15]),g)}},{}],218:[function(x,oe,ae){oe.exports=function(g,m,w){var y=Math.sin(w),e=Math.cos(w),r=m[4],n=m[5],a=m[6],t=m[7],p=m[8],u=m[9],i=m[10],c=m[11];return m!==g&&(g[0]=m[0],g[1]=m[1],g[2]=m[2],g[3]=m[3],g[12]=m[12],g[13]=m[13],g[14]=m[14],g[15]=m[15]),g[4]=r*e+p*y,g[5]=n*e+u*y,g[6]=a*e+i*y,g[7]=t*e+c*y,g[8]=p*e-r*y,g[9]=u*e-n*y,g[10]=i*e-a*y,g[11]=c*e-t*y,g}},{}],219:[function(x,oe,ae){oe.exports=function(g,m,w){var y=Math.sin(w),e=Math.cos(w),r=m[0],n=m[1],a=m[2],t=m[3],p=m[8],u=m[9],i=m[10],c=m[11];return m!==g&&(g[4]=m[4],g[5]=m[5],g[6]=m[6],g[7]=m[7],g[12]=m[12],g[13]=m[13],g[14]=m[14],g[15]=m[15]),g[0]=r*e-p*y,g[1]=n*e-u*y,g[2]=a*e-i*y,g[3]=t*e-c*y,g[8]=r*y+p*e,g[9]=n*y+u*e,g[10]=a*y+i*e,g[11]=t*y+c*e,g}},{}],220:[function(x,oe,ae){oe.exports=function(g,m,w){var y=Math.sin(w),e=Math.cos(w),r=m[0],n=m[1],a=m[2],t=m[3],p=m[4],u=m[5],i=m[6],c=m[7];return m!==g&&(g[8]=m[8],g[9]=m[9],g[10]=m[10],g[11]=m[11],g[12]=m[12],g[13]=m[13],g[14]=m[14],g[15]=m[15]),g[0]=r*e+p*y,g[1]=n*e+u*y,g[2]=a*e+i*y,g[3]=t*e+c*y,g[4]=p*e-r*y,g[5]=u*e-n*y,g[6]=i*e-a*y,g[7]=c*e-t*y,g}},{}],221:[function(x,oe,ae){oe.exports=function(g,m,w){var y=w[0],e=w[1],r=w[2];return g[0]=m[0]*y,g[1]=m[1]*y,g[2]=m[2]*y,g[3]=m[3]*y,g[4]=m[4]*e,g[5]=m[5]*e,g[6]=m[6]*e,g[7]=m[7]*e,g[8]=m[8]*r,g[9]=m[9]*r,g[10]=m[10]*r,g[11]=m[11]*r,g[12]=m[12],g[13]=m[13],g[14]=m[14],g[15]=m[15],g}},{}],222:[function(x,oe,ae){oe.exports=function(g){return"mat4("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+", "+g[4]+", "+g[5]+", "+g[6]+", "+g[7]+", "+g[8]+", "+g[9]+", "+g[10]+", "+g[11]+", "+g[12]+", "+g[13]+", "+g[14]+", "+g[15]+")"}},{}],223:[function(x,oe,ae){oe.exports=function(g,m,w){var y,e,r,n,a,t,p,u,i,c,f,l,h=w[0],d=w[1],o=w[2];return m===g?(g[12]=m[0]*h+m[4]*d+m[8]*o+m[12],g[13]=m[1]*h+m[5]*d+m[9]*o+m[13],g[14]=m[2]*h+m[6]*d+m[10]*o+m[14],g[15]=m[3]*h+m[7]*d+m[11]*o+m[15]):(e=m[1],r=m[2],n=m[3],a=m[4],t=m[5],p=m[6],u=m[7],i=m[8],c=m[9],f=m[10],l=m[11],g[0]=y=m[0],g[1]=e,g[2]=r,g[3]=n,g[4]=a,g[5]=t,g[6]=p,g[7]=u,g[8]=i,g[9]=c,g[10]=f,g[11]=l,g[12]=y*h+a*d+i*o+m[12],g[13]=e*h+t*d+c*o+m[13],g[14]=r*h+p*d+f*o+m[14],g[15]=n*h+u*d+l*o+m[15]),g}},{}],224:[function(x,oe,ae){oe.exports=function(g,m){if(g===m){var w=m[1],y=m[2],e=m[3],r=m[6],n=m[7],a=m[11];g[1]=m[4],g[2]=m[8],g[3]=m[12],g[4]=w,g[6]=m[9],g[7]=m[13],g[8]=y,g[9]=r,g[11]=m[14],g[12]=e,g[13]=n,g[14]=a}else g[0]=m[0],g[1]=m[4],g[2]=m[8],g[3]=m[12],g[4]=m[1],g[5]=m[5],g[6]=m[9],g[7]=m[13],g[8]=m[2],g[9]=m[6],g[10]=m[10],g[11]=m[14],g[12]=m[3],g[13]=m[7],g[14]=m[11],g[15]=m[15];return g}},{}],225:[function(x,oe,ae){"use strict";var g=x("css-font"),m=x("pick-by-alias"),w=x("regl"),y=x("gl-util/context"),e=x("es6-weak-map"),r=x("color-normalize"),n=x("font-atlas"),a=x("typedarray-pool"),t=x("parse-rect"),p=x("is-plain-obj"),u=x("parse-unit"),i=x("to-px"),c=x("detect-kerning"),f=x("object-assign"),l=x("font-measure"),h=x("flatten-vertex-data"),d=x("bit-twiddle").nextPow2,o=new e,_=!1;if(document.body){var s=document.body.appendChild(document.createElement("div"));s.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(s).fontStretch&&(_=!0),document.body.removeChild(s)}var k=function(M){var A;this.gl="function"==typeof(A=M)&&A._gl&&A.prop&&A.texture&&A.buffer?(M={regl:M}).regl._gl:y(M),this.shader=o.get(this.gl),this.regl=this.shader?this.shader.regl:M.regl||w({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),o.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(p(M)?M:{})};k.prototype.createShader=function(){var M=this.regl,A=M({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:M.prop("count"),offset:M.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:M.this("sizeBuffer")},width:{offset:0,stride:8,buffer:M.this("sizeBuffer")},char:M.this("charBuffer"),position:M.this("position")},uniforms:{atlasSize:function(E,I){return[I.atlas.width,I.atlas.height]},atlasDim:function(E,I){return[I.atlas.cols,I.atlas.rows]},atlas:function(E,I){return I.atlas.texture},charStep:function(E,I){return I.atlas.step},em:function(E,I){return I.atlas.em},color:M.prop("color"),opacity:M.prop("opacity"),viewport:M.this("viewportArray"),scale:M.this("scale"),align:M.prop("align"),baseline:M.prop("baseline"),translate:M.this("translate"),positionOffset:M.prop("positionOffset")},primitive:"points",viewport:M.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:M,draw:A,atlas:{}}},k.prototype.update=function(M){var A=this;if("string"==typeof M)M={text:M};else if(!M)return;null!=(M=m(M,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(M.opacity)?M.opacity.map(function(Te){return parseFloat(Te)}):parseFloat(M.opacity)),null!=M.viewport&&(this.viewport=t(M.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=M.kerning&&(this.kerning=M.kerning),null!=M.offset&&("number"==typeof M.offset&&(M.offset=[M.offset,0]),this.positionOffset=h(M.offset)),M.direction&&(this.direction=M.direction),M.range&&(this.range=M.range,this.scale=[1/(M.range[2]-M.range[0]),1/(M.range[3]-M.range[1])],this.translate=[-M.range[0],-M.range[1]]),M.scale&&(this.scale=M.scale),M.translate&&(this.translate=M.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||M.font||(M.font=k.baseFontSize+"px sans-serif");var E,I=!1,C=!1;if(M.font&&(Array.isArray(M.font)?M.font:[M.font]).forEach(function(Te,Pe){if("string"==typeof Te)try{Te=g.parse(Te)}catch(st){Te=g.parse(k.baseFontSize+"px "+Te)}else Te=g.parse(g.stringify(Te));var De=g.stringify({size:k.baseFontSize,family:Te.family,stretch:_?Te.stretch:void 0,variant:Te.variant,weight:Te.weight,style:Te.style}),Fe=u(Te.size),Ue=Math.round(Fe[0]*i(Fe[1]));if(Ue!==A.fontSize[Pe]&&(C=!0,A.fontSize[Pe]=Ue),!(A.font[Pe]&&De==A.font[Pe].baseString||(I=!0,A.font[Pe]=k.fonts[De],A.font[Pe]))){var He=Te.family.join(", "),Ke=[Te.style];Te.style!=Te.variant&&Ke.push(Te.variant),Te.variant!=Te.weight&&Ke.push(Te.weight),_&&Te.weight!=Te.stretch&&Ke.push(Te.stretch),A.font[Pe]={baseString:De,family:He,weight:Te.weight,stretch:Te.stretch,style:Te.style,variant:Te.variant,width:{},kerning:{},metrics:l(He,{origin:"top",fontSize:k.baseFontSize,fontStyle:Ke.join(" ")})},k.fonts[De]=A.font[Pe]}}),(I||C)&&this.font.forEach(function(Te,Pe){var De=g.stringify({size:A.fontSize[Pe],family:Te.family,stretch:_?Te.stretch:void 0,variant:Te.variant,weight:Te.weight,style:Te.style});A.fontAtlas[Pe]=A.shader.atlas[De],A.fontAtlas[Pe]||(A.shader.atlas[De]=A.fontAtlas[Pe]={fontString:De,step:2*Math.ceil(A.fontSize[Pe]*Te.metrics.bottom*.5),em:A.fontSize[Pe],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:A.regl.texture()}),null==M.text&&(M.text=A.text)}),"string"==typeof M.text&&M.position&&M.position.length>2){for(var R=Array(.5*M.position.length),O=0;O<R.length;O++)R[O]=M.text;M.text=R}if(null!=M.text||I){if(this.textOffsets=[0],Array.isArray(M.text)){this.count=M.text[0].length,this.counts=[this.count];for(var D=1;D<M.text.length;D++)this.textOffsets[D]=this.textOffsets[D-1]+M.text[D-1].length,this.count+=M.text[D].length,this.counts.push(M.text[D].length);this.text=M.text.join("")}else this.text=M.text,this.count=this.text.length,this.counts=[this.count];E=[],this.font.forEach(function(Te,Pe){k.atlasContext.font=Te.baseString;for(var De=A.fontAtlas[Pe],Fe=0;Fe<A.text.length;Fe++){var Ue=A.text.charAt(Fe);if(null==De.ids[Ue]&&(De.ids[Ue]=De.chars.length,De.chars.push(Ue),E.push(Ue)),null==Te.width[Ue]&&(Te.width[Ue]=k.atlasContext.measureText(Ue).width/k.baseFontSize,A.kerning)){var He=[];for(var Ke in Te.width)He.push(Ke+Ue,Ue+Ke);f(Te.kerning,c(Te.family,{pairs:He}))}}})}if(M.position)if(M.position.length>2){for(var L=!M.position[0].length,B=a.mallocFloat(2*this.count),j=0,W=0;j<this.counts.length;j++){var Y=this.counts[j];if(L)for(var Q=0;Q<Y;Q++)B[W++]=M.position[2*j],B[W++]=M.position[2*j+1];else for(var ne=0;ne<Y;ne++)B[W++]=M.position[j][0],B[W++]=M.position[j][1]}this.position.call?this.position({type:"float",data:B}):this.position=this.regl.buffer({type:"float",data:B}),a.freeFloat(B)}else this.position.destroy&&this.position.destroy(),this.position={constant:M.position};if(M.text||I){var X=a.mallocUint8(this.count),$=a.mallocFloat(2*this.count);this.textWidth=[];for(var re=0,H=0;re<this.counts.length;re++){for(var U=this.counts[re],G=this.font[re]||this.font[0],ie=this.fontAtlas[re]||this.fontAtlas[0],q=0;q<U;q++){var ee=this.text.charAt(H),te=this.text.charAt(H-1);if(X[H]=ie.ids[ee],$[2*H]=G.width[ee],q){var de=$[2*H-1]+.5*$[2*H-2]+.5*$[2*H];if(this.kerning){var he=G.kerning[te+ee];he&&(de+=.001*he)}$[2*H+1]=de}else $[2*H+1]=.5*$[2*H];H++}this.textWidth.push($.length?.5*$[2*H-2]+$[2*H-1]:0)}M.align||(M.align=this.align),this.charBuffer({data:X,type:"uint8",usage:"stream"}),this.sizeBuffer({data:$,type:"float",usage:"stream"}),a.freeUint8(X),a.freeFloat($),E.length&&this.font.forEach(function(Te,Pe){var De=A.fontAtlas[Pe],Fe=De.step,Ue=Math.floor(k.maxAtlasSize/Fe),He=Math.min(Ue,De.chars.length),Ke=Math.ceil(De.chars.length/He),st=d(He*Fe),Ve=d(Ke*Fe);De.width=st,De.height=Ve,De.rows=Ke,De.cols=He,De.em&&De.texture({data:n({canvas:k.atlasCanvas,font:De.fontString,chars:De.chars,shape:[st,Ve],step:[Fe,Fe]})})})}if(M.align&&(this.align=M.align,this.alignOffset=this.textWidth.map(function(Te,Pe){var De=Array.isArray(A.align)?A.align.length>1?A.align[Pe]:A.align[0]:A.align;if("number"==typeof De)return De;switch(De){case"right":case"end":return-Te;case"center":case"centre":case"middle":return.5*-Te}return 0})),null==this.baseline&&null==M.baseline&&(M.baseline=0),null!=M.baseline&&(this.baseline=M.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Te,Pe){var De=(A.font[Pe]||A.font[0]).metrics,Fe=0;return-1*((Fe+=.5*De.bottom)+("number"==typeof Te?Te-De.baseline:-De[Te]))})),null!=M.color)if(M.color||(M.color="transparent"),"string"!=typeof M.color&&isNaN(M.color)){var xe;if("number"==typeof M.color[0]&&M.color.length>this.counts.length){var ge=M.color.length;xe=a.mallocUint8(ge);for(var _e=(M.color.subarray||M.color.slice).bind(M.color),Ce=0;Ce<ge;Ce+=4)xe.set(r(_e(Ce,Ce+4),"uint8"),Ce)}else{var Le=M.color.length;xe=a.mallocUint8(4*Le);for(var Ie=0;Ie<Le;Ie++)xe.set(r(M.color[Ie]||0,"uint8"),4*Ie)}this.color=xe}else this.color=r(M.color,"uint8");if(M.position||M.text||M.color||M.baseline||M.align||M.font||M.offset||M.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Be=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Be);for(var ve=0;ve<this.batch.length;ve++)this.batch[ve]={count:this.counts.length>1?this.counts[ve]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ve]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*ve,4*ve+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[ve]:this.opacity,baseline:null!=this.baselineOffset[ve]?this.baselineOffset[ve]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[ve]?this.alignOffset[ve]:this.alignOffset[0]:0,atlas:this.fontAtlas[ve]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*ve,2*ve+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},k.prototype.destroy=function(){},k.prototype.kerning=!0,k.prototype.position={constant:new Float32Array(2)},k.prototype.translate=null,k.prototype.scale=null,k.prototype.font=null,k.prototype.text="",k.prototype.positionOffset=[0,0],k.prototype.opacity=1,k.prototype.color=new Uint8Array([0,0,0,255]),k.prototype.alignOffset=[0,0],k.maxAtlasSize=1024,k.atlasCanvas=document.createElement("canvas"),k.atlasContext=k.atlasCanvas.getContext("2d",{alpha:!1}),k.baseFontSize=64,k.fonts={},oe.exports=k},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(x,oe,ae){(function(g){(function(){"use strict";var m=x("pick-by-alias");function w(r){if(r.container)if(r.container==document.body)document.body.style.width||(r.canvas.width=r.width||r.pixelRatio*g.innerWidth),document.body.style.height||(r.canvas.height=r.height||r.pixelRatio*g.innerHeight);else{var n=r.container.getBoundingClientRect();r.canvas.width=r.width||n.right-n.left,r.canvas.height=r.height||n.bottom-n.top}}function y(r){return"function"==typeof r.getContext&&"width"in r&&"height"in r}function e(){var r=document.createElement("canvas");return r.style.position="absolute",r.style.top=0,r.style.left=0,r}oe.exports=function(r){var n,t;if(r?"string"==typeof r&&(r={container:r}):r={},(r=y(r)||"string"==typeof(n=r).nodeName&&"function"==typeof n.appendChild&&"function"==typeof n.getBoundingClientRect?{container:r}:"function"==typeof(t=r).drawArrays||"function"==typeof t.drawElements?{gl:r}:m(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(r.pixelRatio=g.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if("string"==typeof r.container){var a=document.querySelector(r.container);if(!a)throw Error("Element "+r.container+" is not found");r.container=a}y(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=e(),r.container.appendChild(r.canvas),w(r))}else if(!r.canvas){if("undefined"==typeof document)throw Error("Not DOM environment. Use headless-gl.");r.container=document.body||document.documentElement,r.canvas=e(),r.container.appendChild(r.canvas),w(r)}return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{r.gl=r.canvas.getContext(t,r.attrs)}catch(p){}return r.gl}),r.gl}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"pick-by-alias":253}],227:[function(x,oe,ae){oe.exports=function(g){"string"==typeof g&&(g=[g]);for(var m=[].slice.call(arguments,1),w=[],y=0;y<g.length-1;y++)w.push(g[y],m[y]||"");return w.push(g[y]),w.join("")}},{}],228:[function(x,oe,ae){(function(g){(function(){"use strict";var m,w=x("is-browser");m="function"==typeof g.matchMedia?!g.matchMedia("(hover: none)").matches:w,oe.exports=m}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":232}],229:[function(x,oe,ae){"use strict";var g=x("is-browser");oe.exports=g&&function(){var m=!1;try{var w=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("test",null,w),window.removeEventListener("test",null,w)}catch(y){m=!1}return m}()},{"is-browser":232}],230:[function(x,oe,ae){ae.read=function(g,m,w,y,e){var r,n,a=8*e-y-1,t=(1<<a)-1,p=t>>1,u=-7,i=w?e-1:0,c=w?-1:1,f=g[m+i];for(i+=c,r=f&(1<<-u)-1,f>>=-u,u+=a;u>0;r=256*r+g[m+i],i+=c,u-=8);for(n=r&(1<<-u)-1,r>>=-u,u+=y;u>0;n=256*n+g[m+i],i+=c,u-=8);if(0===r)r=1-p;else{if(r===t)return n?NaN:1/0*(f?-1:1);n+=Math.pow(2,y),r-=p}return(f?-1:1)*n*Math.pow(2,r-y)},ae.write=function(g,m,w,y,e,r){var n,a,t,p=8*r-e-1,u=(1<<p)-1,i=u>>1,c=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,f=y?0:r-1,l=y?1:-1,h=m<0||0===m&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(a=isNaN(m)?1:0,n=u):(n=Math.floor(Math.log(m)/Math.LN2),m*(t=Math.pow(2,-n))<1&&(n--,t*=2),(m+=n+i>=1?c/t:c*Math.pow(2,1-i))*t>=2&&(n++,t/=2),n+i>=u?(a=0,n=u):n+i>=1?(a=(m*t-1)*Math.pow(2,e),n+=i):(a=m*Math.pow(2,i-1)*Math.pow(2,e),n=0));e>=8;g[w+f]=255&a,f+=l,a/=256,e-=8);for(n=n<<e|a,p+=e;p>0;g[w+f]=255&n,f+=l,n/=256,p-=8);g[w+f-l]|=128*h}},{}],231:[function(x,oe,ae){oe.exports="function"==typeof Object.create?function(g,m){m&&(g.super_=m,g.prototype=Object.create(m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,m){if(m){g.super_=m;var w=function(){};w.prototype=m.prototype,g.prototype=new w,g.prototype.constructor=g}}},{}],232:[function(x,oe,ae){oe.exports=!0},{}],233:[function(x,oe,ae){"use strict";oe.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(x,oe,ae){"use strict";oe.exports=w,oe.exports.isMobile=w,oe.exports.default=w;var g=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,m=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function w(y){y||(y={});var e=y.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var r=y.tablet?m.test(e):g.test(e);return!r&&y.tablet&&y.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(r=!0),r}},{}],235:[function(x,oe,ae){"use strict";oe.exports=function(g){var m=typeof g;return null!==g&&("object"===m||"function"===m)}},{}],236:[function(x,oe,ae){"use strict";var g=Object.prototype.toString;oe.exports=function(m){var w;return"[object Object]"===g.call(m)&&(null===(w=Object.getPrototypeOf(m))||w===Object.getPrototypeOf({}))}},{}],237:[function(x,oe,ae){"use strict";oe.exports=function(g){for(var m,w=g.length,y=0;y<w;y++)if(((m=g.charCodeAt(y))<9||m>13)&&32!==m&&133!==m&&160!==m&&5760!==m&&6158!==m&&(m<8192||m>8205)&&8232!==m&&8233!==m&&8239!==m&&8287!==m&&8288!==m&&12288!==m&&65279!==m)return!1;return!0}},{}],238:[function(x,oe,ae){"use strict";oe.exports=function(g){return"string"==typeof g&&(g=g.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(g)&&/[\dz]$/i.test(g)&&g.length>4))}},{}],239:[function(x,oe,ae){var g,m;g=this,m=function(){"use strict";var g,m,w;function y(e,r){if(g)if(m){var n="var sharedChunk = {}; ("+g+")(sharedChunk); ("+m+")(sharedChunk);",a={};g(a),(w=r(a)).workerUrl=window.URL.createObjectURL(new Blob([n],{type:"text/javascript"}))}else m=r;else g=r}return y(0,function(e){function r(S,F){return S(F={exports:{}},F.exports),F.exports}var n=a;function a(S,F,K,ce){this.cx=3*S,this.bx=3*(K-S)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*F,this.by=3*(ce-F)-this.cy,this.ay=1-this.cy-this.by,this.p1x=S,this.p1y=ce,this.p2x=K,this.p2y=ce}a.prototype.sampleCurveX=function(S){return((this.ax*S+this.bx)*S+this.cx)*S},a.prototype.sampleCurveY=function(S){return((this.ay*S+this.by)*S+this.cy)*S},a.prototype.sampleCurveDerivativeX=function(S){return(3*this.ax*S+2*this.bx)*S+this.cx},a.prototype.solveCurveX=function(S,F){var K,ce,ye,ke,ze;for(void 0===F&&(F=1e-6),ye=S,ze=0;ze<8;ze++){if(ke=this.sampleCurveX(ye)-S,Math.abs(ke)<F)return ye;var Ze=this.sampleCurveDerivativeX(ye);if(Math.abs(Ze)<1e-6)break;ye-=ke/Ze}if((ye=S)<(K=0))return K;if(ye>(ce=1))return ce;for(;K<ce;){if(ke=this.sampleCurveX(ye),Math.abs(ke-S)<F)return ye;S>ke?K=ye:ce=ye,ye=.5*(ce-K)+K}return ye},a.prototype.solve=function(S,F){return this.sampleCurveY(this.solveCurveX(S,F))};var t=p;function p(S,F){this.x=S,this.y=F}function u(S,F,K,ce){var ye=new n(S,F,K,ce);return function(ke){return ye.solve(ke)}}p.prototype={clone:function(){return new p(this.x,this.y)},add:function(S){return this.clone()._add(S)},sub:function(S){return this.clone()._sub(S)},multByPoint:function(S){return this.clone()._multByPoint(S)},divByPoint:function(S){return this.clone()._divByPoint(S)},mult:function(S){return this.clone()._mult(S)},div:function(S){return this.clone()._div(S)},rotate:function(S){return this.clone()._rotate(S)},rotateAround:function(S,F){return this.clone()._rotateAround(S,F)},matMult:function(S){return this.clone()._matMult(S)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(S){return this.x===S.x&&this.y===S.y},dist:function(S){return Math.sqrt(this.distSqr(S))},distSqr:function(S){var F=S.x-this.x,K=S.y-this.y;return F*F+K*K},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(S){return Math.atan2(this.y-S.y,this.x-S.x)},angleWith:function(S){return this.angleWithSep(S.x,S.y)},angleWithSep:function(S,F){return Math.atan2(this.x*F-this.y*S,this.x*S+this.y*F)},_matMult:function(S){var K=S[2]*this.x+S[3]*this.y;return this.x=S[0]*this.x+S[1]*this.y,this.y=K,this},_add:function(S){return this.x+=S.x,this.y+=S.y,this},_sub:function(S){return this.x-=S.x,this.y-=S.y,this},_mult:function(S){return this.x*=S,this.y*=S,this},_div:function(S){return this.x/=S,this.y/=S,this},_multByPoint:function(S){return this.x*=S.x,this.y*=S.y,this},_divByPoint:function(S){return this.x/=S.x,this.y/=S.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var S=this.y;return this.y=this.x,this.x=-S,this},_rotate:function(S){var F=Math.cos(S),K=Math.sin(S),ye=K*this.x+F*this.y;return this.x=F*this.x-K*this.y,this.y=ye,this},_rotateAround:function(S,F){var K=Math.cos(S),ce=Math.sin(S),ke=F.y+ce*(this.x-F.x)+K*(this.y-F.y);return this.x=F.x+K*(this.x-F.x)-ce*(this.y-F.y),this.y=ke,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},p.convert=function(S){return S instanceof p?S:Array.isArray(S)?new p(S[0],S[1]):S};var i=u(.25,.1,.25,1);function c(S,F,K){return Math.min(K,Math.max(F,S))}function f(S,F,K){var ce=K-F,ye=((S-F)%ce+ce)%ce+F;return ye===F?K:ye}function l(S){for(var F=[],K=arguments.length-1;K-- >0;)F[K]=arguments[K+1];for(var ce=0,ye=F;ce<ye.length;ce+=1){var ke=ye[ce];for(var ze in ke)S[ze]=ke[ze]}return S}var h=1;function d(){return h++}function o(){return function S(F){return F?(F^16*Math.random()>>F/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,S)}()}function _(S){return!!S&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(S)}function s(S,F){S.forEach(function(K){F[K]&&(F[K]=F[K].bind(F))})}function k(S,F){return-1!==S.indexOf(F,S.length-F.length)}function M(S,F,K){var ce={};for(var ye in S)ce[ye]=F.call(K||this,S[ye],ye,S);return ce}function A(S,F,K){var ce={};for(var ye in S)F.call(K||this,S[ye],ye,S)&&(ce[ye]=S[ye]);return ce}function E(S){return Array.isArray(S)?S.map(E):"object"==typeof S&&S?M(S,E):S}var I={};function C(S){I[S]||("undefined"!=typeof console&&console.warn(S),I[S]=!0)}function R(S,F,K){return(K.y-S.y)*(F.x-S.x)>(F.y-S.y)*(K.x-S.x)}function O(S){for(var F=0,K=0,ce=S.length,ye=ce-1,ke=void 0,ze=void 0;K<ce;ye=K++)F+=((ze=S[ye]).x-(ke=S[K]).x)*(ke.y+ze.y);return F}function D(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function L(S){var F={};if(S.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ce,ye,ke,ze){var Ze=ke||ze;return F[ye]=!Ze||Ze.toLowerCase(),""}),F["max-age"]){var K=parseInt(F["max-age"],10);isNaN(K)?delete F["max-age"]:F["max-age"]=K}return F}var B=null;function j(S){if(null==B){var F=S.navigator?S.navigator.userAgent:null;B=!!S.safari||!(!F||!(/\b(iPad|iPhone|iPod)\b/.test(F)||F.match("Safari")&&!F.match("Chrome")))}return B}function W(S){try{var F=self[S];return F.setItem("_mapbox_test_",1),F.removeItem("_mapbox_test_"),!0}catch(K){return!1}}var Y,Q,ne,X,$=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),re=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,H=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,U={now:$,frame:function(S){var F=re(S);return{cancel:function(){return H(F)}}},getImageData:function(S,F){void 0===F&&(F=0);var K=self.document.createElement("canvas"),ce=K.getContext("2d");if(!ce)throw new Error("failed to create canvas 2d context");return K.width=S.width,K.height=S.height,ce.drawImage(S,0,0,S.width,S.height),ce.getImageData(-F,-F,S.width+2*F,S.height+2*F)},resolveURL:function(S){return Y||(Y=self.document.createElement("a")),Y.href=S,Y.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==Q&&(Q=self.matchMedia("(prefers-reduced-motion: reduce)")),Q.matches)}},G={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ie={supported:!1,testSupport:function(S){q||!X||(ee?te(S):ne=S)}},q=!1,ee=!1;function te(S){var F=S.createTexture();S.bindTexture(S.TEXTURE_2D,F);try{if(S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,X),S.isContextLost())return;ie.supported=!0}catch(K){}S.deleteTexture(F),q=!0}self.document&&((X=self.document.createElement("img")).onload=function(){ne&&te(ne),ne=null,ee=!0},X.onerror=function(){q=!0,ne=null},X.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var se="01",ue=function(S,F){this._transformRequestFn=S,this._customAccessToken=F,this._createSkuToken()};function de(S){return 0===S.indexOf("mapbox:")}ue.prototype._createSkuToken=function(){var S=function(){for(var F="",K=0;K<10;K++)F+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",se,F].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=S.token,this._skuTokenExpiresAt=S.tokenExpiresAt},ue.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ue.prototype.transformRequest=function(S,F){return this._transformRequestFn&&this._transformRequestFn(S,F)||{url:S}},ue.prototype.normalizeStyleURL=function(S,F){if(!de(S))return S;var K=_e(S);return K.path="/styles/v1"+K.path,this._makeAPIURL(K,this._customAccessToken||F)},ue.prototype.normalizeGlyphsURL=function(S,F){if(!de(S))return S;var K=_e(S);return K.path="/fonts/v1"+K.path,this._makeAPIURL(K,this._customAccessToken||F)},ue.prototype.normalizeSourceURL=function(S,F){if(!de(S))return S;var K=_e(S);return K.path="/v4/"+K.authority+".json",K.params.push("secure"),this._makeAPIURL(K,this._customAccessToken||F)},ue.prototype.normalizeSpriteURL=function(S,F,K,ce){var ye=_e(S);return de(S)?(ye.path="/styles/v1"+ye.path+"/sprite"+F+K,this._makeAPIURL(ye,this._customAccessToken||ce)):(ye.path+=""+F+K,Ce(ye))},ue.prototype.normalizeTileURL=function(S,F){if(this._isSkuTokenExpired()&&this._createSkuToken(),S&&!de(S))return S;var K=_e(S);K.path=K.path.replace(/(\.(png|jpg)\d*)(?=$)/,(U.devicePixelRatio>=2||512===F?"@2x":"")+(ie.supported?".webp":"$1")),K.path=K.path.replace(/^.+\/v4\//,"/"),K.path="/v4"+K.path;var ke=this._customAccessToken||function(ze){for(var Ze=0,ot=ze;Ze<ot.length;Ze+=1){var mt=ot[Ze].match(/^access_token=(.*)$/);if(mt)return mt[1]}return null}(K.params)||G.ACCESS_TOKEN;return G.REQUIRE_ACCESS_TOKEN&&ke&&this._skuToken&&K.params.push("sku="+this._skuToken),this._makeAPIURL(K,ke)},ue.prototype.canonicalizeTileURL=function(S,F){var K=_e(S);if(!K.path.match(/(^\/v4\/)/)||!K.path.match(/\.[\w]+$/))return S;var ce="mapbox://tiles/";ce+=K.path.replace("/v4/","");var ye=K.params;return F&&(ye=ye.filter(function(ke){return!ke.match(/^access_token=/)})),ye.length&&(ce+="?"+ye.join("&")),ce},ue.prototype.canonicalizeTileset=function(S,F){for(var K=!!F&&de(F),ce=[],ye=0,ke=S.tiles||[];ye<ke.length;ye+=1){var ze=ke[ye];xe(ze)?ce.push(this.canonicalizeTileURL(ze,K)):ce.push(ze)}return ce},ue.prototype._makeAPIURL=function(S,F){var K="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ce=_e(G.API_URL);if(S.protocol=ce.protocol,S.authority=ce.authority,"/"!==ce.path&&(S.path=""+ce.path+S.path),!G.REQUIRE_ACCESS_TOKEN)return Ce(S);if(!(F=F||G.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+K);if("s"===F[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+K);return S.params=S.params.filter(function(ye){return-1===ye.indexOf("access_token")}),S.params.push("access_token="+F),Ce(S)};var he=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function xe(S){return he.test(S)}var ge=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function _e(S){var F=S.match(ge);if(!F)throw new Error("Unable to parse URL object");return{protocol:F[1],authority:F[2],path:F[3]||"/",params:F[4]?F[4].split("&"):[]}}function Ce(S){var F=S.params.length?"?"+S.params.join("&"):"";return S.protocol+"://"+S.authority+S.path+F}function Le(S){if(!S)return null;var K=S.split(".");if(!K||3!==K.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(K[1]).split("").map(function(ce){return"%"+("00"+ce.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(ce){return null}}var Ie=function(S){this.type=S,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ie.prototype.getStorageKey=function(S){var ce,K=Le(G.ACCESS_TOKEN);return ce=K&&K.u?self.btoa(encodeURIComponent(K.u).replace(/%([0-9A-F]{2})/g,function(ye,ke){return String.fromCharCode(Number("0x"+ke))})):G.ACCESS_TOKEN||"",S?"mapbox.eventData."+S+":"+ce:"mapbox.eventData:"+ce},Ie.prototype.fetchEventData=function(){var S=W("localStorage"),F=this.getStorageKey(),K=this.getStorageKey("uuid");if(S)try{var ce=self.localStorage.getItem(F);ce&&(this.eventData=JSON.parse(ce));var ye=self.localStorage.getItem(K);ye&&(this.anonId=ye)}catch(ke){C("Unable to read from LocalStorage")}},Ie.prototype.saveEventData=function(){var S=W("localStorage"),F=this.getStorageKey(),K=this.getStorageKey("uuid");if(S)try{self.localStorage.setItem(K,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(F,JSON.stringify(this.eventData))}catch(ce){C("Unable to write to LocalStorage")}},Ie.prototype.processRequests=function(S){},Ie.prototype.postEvent=function(S,F,K,ce){var ye=this;if(G.EVENTS_URL){var ke=_e(G.EVENTS_URL);ke.params.push("access_token="+(ce||G.ACCESS_TOKEN||""));var ze={event:this.type,created:new Date(S).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:se,userId:this.anonId},Ze=F?l(ze,F):ze,ot={url:Ce(ke),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ze])};this.pendingRequest=Jt(ot,function(mt){ye.pendingRequest=null,K(mt),ye.saveEventData(),ye.processRequests(ce)})}},Ie.prototype.queueRequest=function(S,F){this.queue.push(S),this.processRequests(F)};var Be,ve,Te=function(S){function F(){S.call(this,"map.load"),this.success={},this.skuToken=""}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.postMapLoadEvent=function(K,ce,ye,ke){this.skuToken=ye,(G.EVENTS_URL&&ke||G.ACCESS_TOKEN&&Array.isArray(K)&&K.some(function(ze){return de(ze)||xe(ze)}))&&this.queueRequest({id:ce,timestamp:Date.now()},ke)},F.prototype.processRequests=function(K){var ce=this;if(!this.pendingRequest&&0!==this.queue.length){var ye=this.queue.shift(),ke=ye.id,ze=ye.timestamp;ke&&this.success[ke]||(this.anonId||this.fetchEventData(),_(this.anonId)||(this.anonId=o()),this.postEvent(ze,{skuToken:this.skuToken},function(Ze){Ze||ke&&(ce.success[ke]=!0)},K))}},F}(Ie),Pe=new(function(S){function F(K){S.call(this,"appUserTurnstile"),this._customAccessToken=K}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.postTurnstileEvent=function(K,ce){G.EVENTS_URL&&G.ACCESS_TOKEN&&Array.isArray(K)&&K.some(function(ye){return de(ye)||xe(ye)})&&this.queueRequest(Date.now(),ce)},F.prototype.processRequests=function(K){var ce=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var ye=Le(G.ACCESS_TOKEN),ke=ye?ye.u:G.ACCESS_TOKEN,ze=ke!==this.eventData.tokenU;_(this.anonId)||(this.anonId=o(),ze=!0);var Ze=this.queue.shift();if(this.eventData.lastSuccess){var ot=new Date(this.eventData.lastSuccess),mt=new Date(Ze),Tt=(Ze-this.eventData.lastSuccess)/864e5;ze=ze||Tt>=1||Tt<-1||ot.getDate()!==mt.getDate()}else ze=!0;if(!ze)return this.processRequests();this.postEvent(Ze,{"enabled.telemetry":!1},function(qt){qt||(ce.eventData.lastSuccess=Ze,ce.eventData.tokenU=ke)},K)}},F}(Ie)),De=Pe.postTurnstileEvent.bind(Pe),Fe=new Te,Ue=Fe.postMapLoadEvent.bind(Fe),He=500,Ke=50;function st(){self.caches&&!Be&&(Be=self.caches.open("mapbox-tiles"))}function $e(S){var F=S.indexOf("?");return F<0?S:S.slice(0,F)}var tt,ut=1/0;function xt(){return null==tt&&(tt=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),tt}var kt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(kt);var Bt=function(S){function F(K,ce,ye){401===ce&&xe(ye)&&(K+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),S.call(this,K),this.status=ce,this.url=ye,this.name=this.constructor.name,this.message=K}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},F}(Error),Rt=D()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function ft(S,F){var K,ce=new self.AbortController,ye=new self.Request(S.url,{method:S.method||"GET",body:S.body,credentials:S.credentials,headers:S.headers,referrer:Rt(),signal:ce.signal}),ke=!1,ze=!1,Ze=(K=ye.url).indexOf("sku=")>0&&xe(K);"json"===S.type&&ye.headers.set("Accept","application/json");var ot=function(Tt,qt,an){if(!ze){if(Tt&&"SecurityError"!==Tt.message&&C(Tt),qt&&an)return mt(qt);var $t=Date.now();self.fetch(ye).then(function(bn){if(bn.ok){var Dn=Ze?bn.clone():null;return mt(bn,Dn,$t)}return F(new Bt(bn.statusText,bn.status,S.url))}).catch(function(bn){20!==bn.code&&F(new Error(bn.message))})}},mt=function(Tt,qt,an){("arrayBuffer"===S.type?Tt.arrayBuffer():"json"===S.type?Tt.json():Tt.text()).then(function($t){ze||(qt&&an&&function Ve(S,F,K){if(st(),Be){var ce={status:F.status,statusText:F.statusText,headers:new self.Headers};F.headers.forEach(function(ke,ze){return ce.headers.set(ze,ke)});var ye=L(F.headers.get("Cache-Control")||"");ye["no-store"]||(ye["max-age"]&&ce.headers.set("Expires",new Date(K+1e3*ye["max-age"]).toUTCString()),new Date(ce.headers.get("Expires")).getTime()-K<42e4||function(ke,ze){if(void 0===ve)try{new Response(new ReadableStream),ve=!0}catch(Ze){ve=!1}ve?ze(ke.body):ke.blob().then(ze)}(F,function(ke){var ze=new self.Response(ke,ce);st(),Be&&Be.then(function(Ze){return Ze.put($e(S.url),ze)}).catch(function(Ze){return C(Ze.message)})}))}}(ye,qt,an),ke=!0,F(null,$t,Tt.headers.get("Cache-Control"),Tt.headers.get("Expires")))}).catch(function($t){ze||F(new Error($t.message))})};return Ze?function Qe(S,F){if(st(),!Be)return F(null);var K=$e(S.url);Be.then(function(ce){ce.match(K).then(function(ye){var ke=function(ze){if(!ze)return!1;var Ze=new Date(ze.headers.get("Expires")||0),ot=L(ze.headers.get("Cache-Control")||"");return Ze>Date.now()&&!ot["no-cache"]}(ye);ce.delete(K),ke&&ce.put(K,ye.clone()),F(null,ye,ke)}).catch(F)}).catch(F)}(ye,ot):ot(null,null),{cancel:function(){ze=!0,ke||ce.abort()}}}var ln,dn,lt=function(S,F){if(!(/^file:/.test(K=S.url)||/^file:/.test(Rt())&&!/^\w+:/.test(K))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return ft(S,F);if(D()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",S,F,void 0,!0)}var K;return function(ce,ye){var ke=new self.XMLHttpRequest;for(var ze in ke.open(ce.method||"GET",ce.url,!0),"arrayBuffer"===ce.type&&(ke.responseType="arraybuffer"),ce.headers)ke.setRequestHeader(ze,ce.headers[ze]);return"json"===ce.type&&(ke.responseType="text",ke.setRequestHeader("Accept","application/json")),ke.withCredentials="include"===ce.credentials,ke.onerror=function(){ye(new Error(ke.statusText))},ke.onload=function(){if((ke.status>=200&&ke.status<300||0===ke.status)&&null!==ke.response){var Ze=ke.response;if("json"===ce.type)try{Ze=JSON.parse(ke.response)}catch(ot){return ye(ot)}ye(null,Ze,ke.getResponseHeader("Cache-Control"),ke.getResponseHeader("Expires"))}else ye(new Bt(ke.statusText,ke.status,ce.url))},ke.send(ce.body),{cancel:function(){return ke.abort()}}}(S,F)},Ft=function(S,F){return lt(l(S,{type:"arrayBuffer"}),F)},Jt=function(S,F){return lt(l(S,{method:"POST"}),F)};ln=[],dn=0;var cn=function(S,F){if(ie.supported&&(S.headers||(S.headers={}),S.headers.accept="image/webp,*/*"),dn>=G.MAX_PARALLEL_IMAGE_REQUESTS){var K={requestParameters:S,callback:F,cancelled:!1,cancel:function(){this.cancelled=!0}};return ln.push(K),K}dn++;var ce=!1,ye=function(){if(!ce)for(ce=!0,dn--;ln.length&&dn<G.MAX_PARALLEL_IMAGE_REQUESTS;){var ze=ln.shift();ze.cancelled||(ze.cancel=cn(ze.requestParameters,ze.callback).cancel)}},ke=Ft(S,function(ze,Ze,ot,mt){var qt,an;ye(),ze?F(ze):Ze&&(xt()?(qt=F,an=new self.Blob([new Uint8Array(Ze)],{type:"image/png"}),self.createImageBitmap(an).then(function($t){qt(null,$t)}).catch(function($t){qt(new Error("Could not load image because of "+$t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(Tt,qt,an,$t){var bn=new self.Image,Dn=self.URL;bn.onload=function(){qt(null,bn),Dn.revokeObjectURL(bn.src)},bn.onerror=function(){return qt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Vn=new self.Blob([new Uint8Array(Tt)],{type:"image/png"});bn.cacheControl=an,bn.expires=$t,bn.src=Tt.byteLength?Dn.createObjectURL(Vn):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Ze,F,ot,mt))});return{cancel:function(){ke.cancel(),ye()}}};function Tn(S,F,K){K[S]&&-1!==K[S].indexOf(F)||(K[S]=K[S]||[],K[S].push(F))}function nn(S,F,K){if(K&&K[S]){var ce=K[S].indexOf(F);-1!==ce&&K[S].splice(ce,1)}}var Me=function(S,F){void 0===F&&(F={}),l(this,F),this.type=S},Ee=function(S){function F(K,ce){void 0===ce&&(ce={}),S.call(this,"error",l({error:K},ce))}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F}(Me),Se=function(){};Se.prototype.on=function(S,F){return this._listeners=this._listeners||{},Tn(S,F,this._listeners),this},Se.prototype.off=function(S,F){return nn(S,F,this._listeners),nn(S,F,this._oneTimeListeners),this},Se.prototype.once=function(S,F){return this._oneTimeListeners=this._oneTimeListeners||{},Tn(S,F,this._oneTimeListeners),this},Se.prototype.fire=function(S,F){"string"==typeof S&&(S=new Me(S,F||{}));var K=S.type;if(this.listens(K)){S.target=this;for(var ce=0,ye=this._listeners&&this._listeners[K]?this._listeners[K].slice():[];ce<ye.length;ce+=1)ye[ce].call(this,S);for(var ke=0,ze=this._oneTimeListeners&&this._oneTimeListeners[K]?this._oneTimeListeners[K].slice():[];ke<ze.length;ke+=1){var Ze=ze[ke];nn(K,Ze,this._oneTimeListeners),Ze.call(this,S)}var ot=this._eventedParent;ot&&(l(S,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),ot.fire(S))}else S instanceof Ee&&console.error(S.error);return this},Se.prototype.listens=function(S){return this._listeners&&this._listeners[S]&&this._listeners[S].length>0||this._oneTimeListeners&&this._oneTimeListeners[S]&&this._oneTimeListeners[S].length>0||this._eventedParent&&this._eventedParent.listens(S)},Se.prototype.setEventedParent=function(S,F){return this._eventedParent=S,this._eventedParentData=F,this};var je={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},qe=function(S,F,K,ce){this.message=(S?S+": ":"")+K,ce&&(this.identifier=ce),null!=F&&F.__line__&&(this.line=F.__line__)};function Je(S){var K=S.value;return K?[new qe(S.key,K,"constants have been deprecated as of v8")]:[]}function at(S){for(var F=[],K=arguments.length-1;K-- >0;)F[K]=arguments[K+1];for(var ce=0,ye=F;ce<ye.length;ce+=1){var ke=ye[ce];for(var ze in ke)S[ze]=ke[ze]}return S}function it(S){return S instanceof Number||S instanceof String||S instanceof Boolean?S.valueOf():S}function yt(S){if(Array.isArray(S))return S.map(yt);if(S instanceof Object&&!(S instanceof Number||S instanceof String||S instanceof Boolean)){var F={};for(var K in S)F[K]=yt(S[K]);return F}return it(S)}var vt=function(S){function F(K,ce){S.call(this,ce),this.message=ce,this.key=K}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F}(Error),Ut=function(S,F){void 0===F&&(F=[]),this.parent=S,this.bindings={};for(var K=0,ce=F;K<ce.length;K+=1){var ye=ce[K];this.bindings[ye[0]]=ye[1]}};Ut.prototype.concat=function(S){return new Ut(this,S)},Ut.prototype.get=function(S){if(this.bindings[S])return this.bindings[S];if(this.parent)return this.parent.get(S);throw new Error(S+" not found in scope.")},Ut.prototype.has=function(S){return!!this.bindings[S]||!!this.parent&&this.parent.has(S)};var Wt={kind:"null"},gt={kind:"number"},At={kind:"string"},Zt={kind:"boolean"},Et={kind:"color"},Ct={kind:"object"},Ne={kind:"value"},et={kind:"collator"},dt={kind:"formatted"},Mt={kind:"resolvedImage"};function zt(S,F){return{kind:"array",itemType:S,N:F}}function Xt(S){if("array"===S.kind){var F=Xt(S.itemType);return"number"==typeof S.N?"array<"+F+", "+S.N+">":"value"===S.itemType.kind?"array":"array<"+F+">"}return S.kind}var un=[Wt,gt,At,Zt,Et,dt,Ct,zt(Ne),Mt];function Qt(S,F){if("error"===F.kind)return null;if("array"===S.kind){if("array"===F.kind&&(0===F.N&&"value"===F.itemType.kind||!Qt(S.itemType,F.itemType))&&("number"!=typeof S.N||S.N===F.N))return null}else{if(S.kind===F.kind)return null;if("value"===S.kind)for(var K=0,ce=un;K<ce.length;K+=1)if(!Qt(ce[K],F))return null}return"Expected "+Xt(S)+" but found "+Xt(F)+" instead."}function kn(S,F){return F.some(function(K){return K.kind===S.kind})}function qn(S,F){return F.some(function(K){return"null"===K?null===S:"array"===K?Array.isArray(S):"object"===K?S&&!Array.isArray(S)&&"object"==typeof S:K===typeof S})}var gn=r(function(S,F){var K={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ce(ot){return(ot=Math.round(ot))<0?0:ot>255?255:ot}function ke(ot){return ce("%"===ot[ot.length-1]?parseFloat(ot)/100*255:parseInt(ot))}function ze(ot){return function ye(ot){return ot<0?0:ot>1?1:ot}("%"===ot[ot.length-1]?parseFloat(ot)/100:parseFloat(ot))}function Ze(ot,mt,Tt){return Tt<0?Tt+=1:Tt>1&&(Tt-=1),6*Tt<1?ot+(mt-ot)*Tt*6:2*Tt<1?mt:3*Tt<2?ot+(mt-ot)*(2/3-Tt)*6:ot}try{F.parseCSSColor=function(ot){var mt,Tt=ot.replace(/ /g,"").toLowerCase();if(Tt in K)return K[Tt].slice();if("#"===Tt[0])return 4===Tt.length?(mt=parseInt(Tt.substr(1),16))>=0&&mt<=4095?[(3840&mt)>>4|(3840&mt)>>8,240&mt|(240&mt)>>4,15&mt|(15&mt)<<4,1]:null:7===Tt.length&&(mt=parseInt(Tt.substr(1),16))>=0&&mt<=16777215?[(16711680&mt)>>16,(65280&mt)>>8,255&mt,1]:null;var qt=Tt.indexOf("("),an=Tt.indexOf(")");if(-1!==qt&&an+1===Tt.length){var $t=Tt.substr(0,qt),bn=Tt.substr(qt+1,an-(qt+1)).split(","),Dn=1;switch($t){case"rgba":if(4!==bn.length)return null;Dn=ze(bn.pop());case"rgb":return 3!==bn.length?null:[ke(bn[0]),ke(bn[1]),ke(bn[2]),Dn];case"hsla":if(4!==bn.length)return null;Dn=ze(bn.pop());case"hsl":if(3!==bn.length)return null;var Vn=(parseFloat(bn[0])%360+360)%360/360,Bn=ze(bn[1]),tr=ze(bn[2]),nr=tr<=.5?tr*(Bn+1):tr+Bn-tr*Bn,ur=2*tr-nr;return[ce(255*Ze(ur,nr,Vn+1/3)),ce(255*Ze(ur,nr,Vn)),ce(255*Ze(ur,nr,Vn-1/3)),Dn];default:return null}}return null}}catch(ot){}}).parseCSSColor,sn=function(S,F,K,ce){void 0===ce&&(ce=1),this.r=S,this.g=F,this.b=K,this.a=ce};sn.parse=function(S){if(S){if(S instanceof sn)return S;if("string"==typeof S){var F=gn(S);if(F)return new sn(F[0]/255*F[3],F[1]/255*F[3],F[2]/255*F[3],F[3])}}},sn.prototype.toString=function(){var S=this.toArray(),K=S[1],ce=S[2],ye=S[3];return"rgba("+Math.round(S[0])+","+Math.round(K)+","+Math.round(ce)+","+ye+")"},sn.prototype.toArray=function(){var ce=this.a;return 0===ce?[0,0,0,0]:[255*this.r/ce,255*this.g/ce,255*this.b/ce,ce]},sn.black=new sn(0,0,0,1),sn.white=new sn(1,1,1,1),sn.transparent=new sn(0,0,0,0),sn.red=new sn(1,0,0,1);var vn=function(S,F,K){this.sensitivity=S?F?"variant":"case":F?"accent":"base",this.locale=K,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};vn.prototype.compare=function(S,F){return this.collator.compare(S,F)},vn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var pn=function(S,F,K,ce,ye){this.text=S,this.image=F,this.scale=K,this.fontStack=ce,this.textColor=ye},Mn=function(S){this.sections=S};Mn.fromString=function(S){return new Mn([new pn(S,null,null,null,null)])},Mn.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(S){return 0!==S.text.length||S.image&&0!==S.image.name.length})},Mn.factory=function(S){return S instanceof Mn?S:Mn.fromString(S)},Mn.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(S){return S.text}).join("")},Mn.prototype.serialize=function(){for(var S=["format"],F=0,K=this.sections;F<K.length;F+=1){var ce=K[F];if(ce.image)S.push(["image",ce.image.name]);else{S.push(ce.text);var ye={};ce.fontStack&&(ye["text-font"]=["literal",ce.fontStack.split(",")]),ce.scale&&(ye["font-scale"]=ce.scale),ce.textColor&&(ye["text-color"]=["rgba"].concat(ce.textColor.toArray())),S.push(ye)}}return S};var Rn=function(S){this.name=S.name,this.available=S.available};function Xn(S,F,K,ce){return"number"==typeof S&&S>=0&&S<=255&&"number"==typeof F&&F>=0&&F<=255&&"number"==typeof K&&K>=0&&K<=255?void 0===ce||"number"==typeof ce&&ce>=0&&ce<=1?null:"Invalid rgba value ["+[S,F,K,ce].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof ce?[S,F,K,ce]:[S,F,K]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Hn(S){if(null===S||"string"==typeof S||"boolean"==typeof S||"number"==typeof S||S instanceof sn||S instanceof vn||S instanceof Mn||S instanceof Rn)return!0;if(Array.isArray(S)){for(var F=0,K=S;F<K.length;F+=1)if(!Hn(K[F]))return!1;return!0}if("object"==typeof S){for(var ce in S)if(!Hn(S[ce]))return!1;return!0}return!1}function rr(S){if(null===S)return Wt;if("string"==typeof S)return At;if("boolean"==typeof S)return Zt;if("number"==typeof S)return gt;if(S instanceof sn)return Et;if(S instanceof vn)return et;if(S instanceof Mn)return dt;if(S instanceof Rn)return Mt;if(Array.isArray(S)){for(var F,K=S.length,ce=0,ye=S;ce<ye.length;ce+=1){var ke=rr(ye[ce]);if(F){if(F===ke)continue;F=Ne;break}F=ke}return zt(F||Ne,K)}return Ct}function er(S){var F=typeof S;return null===S?"":"string"===F||"number"===F||"boolean"===F?String(S):S instanceof sn||S instanceof Mn||S instanceof Rn?S.toString():JSON.stringify(S)}Rn.prototype.toString=function(){return this.name},Rn.fromString=function(S){return S?new Rn({name:S,available:!1}):null},Rn.prototype.serialize=function(){return["image",this.name]};var Ir=function(S,F){this.type=S,this.value=F};Ir.parse=function(S,F){if(2!==S.length)return F.error("'literal' expression requires exactly one argument, but found "+(S.length-1)+" instead.");if(!Hn(S[1]))return F.error("invalid value");var K=S[1],ce=rr(K),ye=F.expectedType;return"array"!==ce.kind||0!==ce.N||!ye||"array"!==ye.kind||"number"==typeof ye.N&&0!==ye.N||(ce=ye),new Ir(ce,K)},Ir.prototype.evaluate=function(){return this.value},Ir.prototype.eachChild=function(){},Ir.prototype.outputDefined=function(){return!0},Ir.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof sn?["rgba"].concat(this.value.toArray()):this.value instanceof Mn?this.value.serialize():this.value};var Or=function(S){this.name="ExpressionEvaluationError",this.message=S};Or.prototype.toJSON=function(){return this.message};var ni={string:At,number:gt,boolean:Zt,object:Ct},Br=function(S,F){this.type=S,this.args=F};Br.parse=function(S,F){if(S.length<2)return F.error("Expected at least one argument.");var K,ce=1,ye=S[0];if("array"===ye){var ke,ze;if(S.length>2){var Ze=S[1];if("string"!=typeof Ze||!(Ze in ni)||"object"===Ze)return F.error('The item type argument of "array" must be one of string, number, boolean',1);ke=ni[Ze],ce++}else ke=Ne;if(S.length>3){if(null!==S[2]&&("number"!=typeof S[2]||S[2]<0||S[2]!==Math.floor(S[2])))return F.error('The length argument to "array" must be a positive integer literal',2);ze=S[2],ce++}K=zt(ke,ze)}else K=ni[ye];for(var ot=[];ce<S.length;ce++){var mt=F.parse(S[ce],ce,Ne);if(!mt)return null;ot.push(mt)}return new Br(K,ot)},Br.prototype.evaluate=function(S){for(var F=0;F<this.args.length;F++){var K=this.args[F].evaluate(S);if(!Qt(this.type,rr(K)))return K;if(F===this.args.length-1)throw new Or("Expected value to be of type "+Xt(this.type)+", but found "+Xt(rr(K))+" instead.")}return null},Br.prototype.eachChild=function(S){this.args.forEach(S)},Br.prototype.outputDefined=function(){return this.args.every(function(S){return S.outputDefined()})},Br.prototype.serialize=function(){var S=this.type,F=[S.kind];if("array"===S.kind){var K=S.itemType;if("string"===K.kind||"number"===K.kind||"boolean"===K.kind){F.push(K.kind);var ce=S.N;("number"==typeof ce||this.args.length>1)&&F.push(ce)}}return F.concat(this.args.map(function(ye){return ye.serialize()}))};var Dr=function(S){this.type=dt,this.sections=S};Dr.parse=function(S,F){if(S.length<2)return F.error("Expected at least one argument.");var K=S[1];if(!Array.isArray(K)&&"object"==typeof K)return F.error("First argument must be an image or text section.");for(var ce=[],ye=!1,ke=1;ke<=S.length-1;++ke){var ze=S[ke];if(ye&&"object"==typeof ze&&!Array.isArray(ze)){ye=!1;var Ze=null;if(ze["font-scale"]&&!(Ze=F.parse(ze["font-scale"],1,gt)))return null;var ot=null;if(ze["text-font"]&&!(ot=F.parse(ze["text-font"],1,zt(At))))return null;var mt=null;if(ze["text-color"]&&!(mt=F.parse(ze["text-color"],1,Et)))return null;var Tt=ce[ce.length-1];Tt.scale=Ze,Tt.font=ot,Tt.textColor=mt}else{var qt=F.parse(S[ke],1,Ne);if(!qt)return null;var an=qt.type.kind;if("string"!==an&&"value"!==an&&"null"!==an&&"resolvedImage"!==an)return F.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");ye=!0,ce.push({content:qt,scale:null,font:null,textColor:null})}}return new Dr(ce)},Dr.prototype.evaluate=function(S){return new Mn(this.sections.map(function(F){var K=F.content.evaluate(S);return rr(K)===Mt?new pn("",K,null,null,null):new pn(er(K),null,F.scale?F.scale.evaluate(S):null,F.font?F.font.evaluate(S).join(","):null,F.textColor?F.textColor.evaluate(S):null)}))},Dr.prototype.eachChild=function(S){for(var F=0,K=this.sections;F<K.length;F+=1){var ce=K[F];S(ce.content),ce.scale&&S(ce.scale),ce.font&&S(ce.font),ce.textColor&&S(ce.textColor)}},Dr.prototype.outputDefined=function(){return!1},Dr.prototype.serialize=function(){for(var S=["format"],F=0,K=this.sections;F<K.length;F+=1){var ce=K[F];S.push(ce.content.serialize());var ye={};ce.scale&&(ye["font-scale"]=ce.scale.serialize()),ce.font&&(ye["text-font"]=ce.font.serialize()),ce.textColor&&(ye["text-color"]=ce.textColor.serialize()),S.push(ye)}return S};var Rr=function(S){this.type=Mt,this.input=S};Rr.parse=function(S,F){if(2!==S.length)return F.error("Expected two arguments.");var K=F.parse(S[1],1,At);return K?new Rr(K):F.error("No image name provided.")},Rr.prototype.evaluate=function(S){var F=this.input.evaluate(S),K=Rn.fromString(F);return K&&S.availableImages&&(K.available=S.availableImages.indexOf(F)>-1),K},Rr.prototype.eachChild=function(S){S(this.input)},Rr.prototype.outputDefined=function(){return!1},Rr.prototype.serialize=function(){return["image",this.input.serialize()]};var yi={"to-boolean":Zt,"to-color":Et,"to-number":gt,"to-string":At},$n=function(S,F){this.type=S,this.args=F};$n.parse=function(S,F){if(S.length<2)return F.error("Expected at least one argument.");var K=S[0];if(("to-boolean"===K||"to-string"===K)&&2!==S.length)return F.error("Expected one argument.");for(var ce=yi[K],ye=[],ke=1;ke<S.length;ke++){var ze=F.parse(S[ke],ke,Ne);if(!ze)return null;ye.push(ze)}return new $n(ce,ye)},$n.prototype.evaluate=function(S){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(S));if("color"===this.type.kind){for(var F,K,ce=0,ye=this.args;ce<ye.length;ce+=1){if(K=null,(F=ye[ce].evaluate(S))instanceof sn)return F;if("string"==typeof F){var ke=S.parseColor(F);if(ke)return ke}else if(Array.isArray(F)&&!(K=F.length<3||F.length>4?"Invalid rbga value "+JSON.stringify(F)+": expected an array containing either three or four numeric values.":Xn(F[0],F[1],F[2],F[3])))return new sn(F[0]/255,F[1]/255,F[2]/255,F[3])}throw new Or(K||"Could not parse color from value '"+("string"==typeof F?F:String(JSON.stringify(F)))+"'")}if("number"===this.type.kind){for(var ze=null,Ze=0,ot=this.args;Ze<ot.length;Ze+=1){if(null===(ze=ot[Ze].evaluate(S)))return 0;var mt=Number(ze);if(!isNaN(mt))return mt}throw new Or("Could not convert "+JSON.stringify(ze)+" to number.")}return"formatted"===this.type.kind?Mn.fromString(er(this.args[0].evaluate(S))):"resolvedImage"===this.type.kind?Rn.fromString(er(this.args[0].evaluate(S))):er(this.args[0].evaluate(S))},$n.prototype.eachChild=function(S){this.args.forEach(S)},$n.prototype.outputDefined=function(){return this.args.every(function(S){return S.outputDefined()})},$n.prototype.serialize=function(){if("formatted"===this.type.kind)return new Dr([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Rr(this.args[0]).serialize();var S=["to-"+this.type.kind];return this.eachChild(function(F){S.push(F.serialize())}),S};var Mr=["Unknown","Point","LineString","Polygon"],br=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};br.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},br.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Mr[this.feature.type]:this.feature.type:null},br.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},br.prototype.canonicalID=function(){return this.canonical},br.prototype.properties=function(){return this.feature&&this.feature.properties||{}},br.prototype.parseColor=function(S){var F=this._parseColorCache[S];return F||(F=this._parseColorCache[S]=sn.parse(S)),F};var ar=function(S,F,K,ce){this.name=S,this.type=F,this._evaluate=K,this.args=ce};ar.prototype.evaluate=function(S){return this._evaluate(S,this.args)},ar.prototype.eachChild=function(S){this.args.forEach(S)},ar.prototype.outputDefined=function(){return!1},ar.prototype.serialize=function(){return[this.name].concat(this.args.map(function(S){return S.serialize()}))},ar.parse=function(S,F){var K,ce=S[0],ye=ar.definitions[ce];if(!ye)return F.error('Unknown expression "'+ce+'". If you wanted a literal array, use ["literal", [...]].',0);for(var ke=Array.isArray(ye)?ye[0]:ye.type,ze=Array.isArray(ye)?[[ye[1],ye[2]]]:ye.overloads,Ze=ze.filter(function(Si){var vi=Si[0];return!Array.isArray(vi)||vi.length===S.length-1}),ot=null,mt=0,Tt=Ze;mt<Tt.length;mt+=1){var qt=Tt[mt],an=qt[0],$t=qt[1];ot=new yr(F.registry,F.path,null,F.scope);for(var bn=[],Dn=!1,Vn=1;Vn<S.length;Vn++){var Bn=S[Vn],tr=Array.isArray(an)?an[Vn-1]:an.type,nr=ot.parse(Bn,1+bn.length,tr);if(!nr){Dn=!0;break}bn.push(nr)}if(!Dn)if(Array.isArray(an)&&an.length!==bn.length)ot.error("Expected "+an.length+" arguments, but found "+bn.length+" instead.");else{for(var ur=0;ur<bn.length;ur++){var Tr=Array.isArray(an)?an[ur]:an.type,Fr=bn[ur];ot.concat(ur+1).checkSubtype(Tr,Fr.type)}if(0===ot.errors.length)return new ar(ce,ke,$t,bn)}}if(1===Ze.length)(K=F.errors).push.apply(K,ot.errors);else{for(var ai=(Ze.length?Ze:ze).map(function(Si){var vi;return vi=Si[0],Array.isArray(vi)?"("+vi.map(Xt).join(", ")+")":"("+Xt(vi.type)+"...)"}).join(" | "),ti=[],di=1;di<S.length;di++){var ki=F.parse(S[di],1+ti.length);if(!ki)return null;ti.push(Xt(ki.type))}F.error("Expected arguments of type "+ai+", but found ("+ti.join(", ")+") instead.")}return null},ar.register=function(S,F){for(var K in ar.definitions=F,F)S[K]=ar};var si=function(S,F,K){this.type=et,this.locale=K,this.caseSensitive=S,this.diacriticSensitive=F};function ri(S,F){S[0]=Math.min(S[0],F[0]),S[1]=Math.min(S[1],F[1]),S[2]=Math.max(S[2],F[0]),S[3]=Math.max(S[3],F[1])}function Cr(S,F){return!(S[0]<=F[0]||S[2]>=F[2]||S[1]<=F[1]||S[3]>=F[3])}function Pr(S,F){var ce=(180+S[0])/360,ye=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+S[1]*Math.PI/360)))/360,ke=Math.pow(2,F.z);return[Math.round(ce*ke*8192),Math.round(ye*ke*8192)]}function vr(S,F,K){return F[1]>S[1]!=K[1]>S[1]&&S[0]<(K[0]-F[0])*(S[1]-F[1])/(K[1]-F[1])+F[0]}function hn(S,F){for(var K,ce,ye,ke,ze,Ze,ot,mt=!1,Tt=0,qt=F.length;Tt<qt;Tt++)for(var an=F[Tt],$t=0,bn=an.length;$t<bn-1;$t++){if(void 0,void 0,void 0,void 0,(ke=(K=S)[0]-(ce=an[$t])[0])*(ot=K[1]-(ye=an[$t+1])[1])-(Ze=K[0]-ye[0])*(ze=K[1]-ce[1])==0&&ke*Ze<=0&&ze*ot<=0)return!1;vr(S,an[$t],an[$t+1])&&(mt=!mt)}return mt}function Jn(S,F){for(var K=0;K<F.length;K++)if(hn(S,F[K]))return!0;return!1}function jt(S,F,K,ce){var ot=ce[0]-K[0],mt=ce[1]-K[1],Tt=(S[0]-K[0])*mt-ot*(S[1]-K[1]),qt=(F[0]-K[0])*mt-ot*(F[1]-K[1]);return Tt>0&&qt<0||Tt<0&&qt>0}function fn(S,F,K){for(var ce=0,ye=K;ce<ye.length;ce+=1)for(var ke=ye[ce],ze=0;ze<ke.length-1;++ze)if(void 0,void 0,(qt=[(Tt=ke[ze+1])[0]-(mt=ke[ze])[0],Tt[1]-mt[1]])[0]*(an=[(ot=F)[0]-(Ze=S)[0],ot[1]-Ze[1]])[1]-qt[1]*an[0]!=0&&jt(Ze,ot,mt,Tt)&&jt(mt,Tt,Ze,ot))return!0;var Ze,ot,mt,Tt,qt,an;return!1}function Sn(S,F){for(var K=0;K<S.length;++K)if(!hn(S[K],F))return!1;for(var ce=0;ce<S.length-1;++ce)if(fn(S[ce],S[ce+1],F))return!1;return!0}function Kn(S,F){for(var K=0;K<F.length;K++)if(Sn(S,F[K]))return!0;return!1}function Wn(S,F,K){for(var ce=[],ye=0;ye<S.length;ye++){for(var ke=[],ze=0;ze<S[ye].length;ze++){var Ze=Pr(S[ye][ze],K);ri(F,Ze),ke.push(Ze)}ce.push(ke)}return ce}function Pn(S,F,K){for(var ce=[],ye=0;ye<S.length;ye++){var ke=Wn(S[ye],F,K);ce.push(ke)}return ce}function Un(S,F,K,ce){if(S[0]<K[0]||S[0]>K[2]){var ye=.5*ce,ke=S[0]-K[0]>ye?-ce:K[0]-S[0]>ye?ce:0;0===ke&&(ke=S[0]-K[2]>ye?-ce:K[2]-S[0]>ye?ce:0),S[0]+=ke}ri(F,S)}function Cn(S,F,K,ce){for(var ye=8192*Math.pow(2,ce.z),ke=[8192*ce.x,8192*ce.y],ze=[],Ze=0,ot=S;Ze<ot.length;Ze+=1)for(var mt=0,Tt=ot[Ze];mt<Tt.length;mt+=1){var qt=Tt[mt],an=[qt.x+ke[0],qt.y+ke[1]];Un(an,F,K,ye),ze.push(an)}return ze}function On(S,F,K,ce){for(var ye,ke=8192*Math.pow(2,ce.z),ze=[8192*ce.x,8192*ce.y],Ze=[],ot=0,mt=S;ot<mt.length;ot+=1){for(var Tt=[],qt=0,an=mt[ot];qt<an.length;qt+=1){var $t=an[qt],bn=[$t.x+ze[0],$t.y+ze[1]];ri(F,bn),Tt.push(bn)}Ze.push(Tt)}if(F[2]-F[0]<=ke/2){(ye=F)[0]=ye[1]=1/0,ye[2]=ye[3]=-1/0;for(var Dn=0,Vn=Ze;Dn<Vn.length;Dn+=1)for(var Bn=0,tr=Vn[Dn];Bn<tr.length;Bn+=1)Un(tr[Bn],F,K,ke)}return Ze}si.parse=function(S,F){if(2!==S.length)return F.error("Expected one argument.");var K=S[1];if("object"!=typeof K||Array.isArray(K))return F.error("Collator options argument must be an object.");var ce=F.parse(void 0!==K["case-sensitive"]&&K["case-sensitive"],1,Zt);if(!ce)return null;var ye=F.parse(void 0!==K["diacritic-sensitive"]&&K["diacritic-sensitive"],1,Zt);if(!ye)return null;var ke=null;return K.locale&&!(ke=F.parse(K.locale,1,At))?null:new si(ce,ye,ke)},si.prototype.evaluate=function(S){return new vn(this.caseSensitive.evaluate(S),this.diacriticSensitive.evaluate(S),this.locale?this.locale.evaluate(S):null)},si.prototype.eachChild=function(S){S(this.caseSensitive),S(this.diacriticSensitive),this.locale&&S(this.locale)},si.prototype.outputDefined=function(){return!1},si.prototype.serialize=function(){var S={};return S["case-sensitive"]=this.caseSensitive.serialize(),S["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(S.locale=this.locale.serialize()),["collator",S]};var Fn=function(S,F){this.type=Zt,this.geojson=S,this.geometries=F};function Gn(S){if(S instanceof ar&&("get"===S.name&&1===S.args.length||"feature-state"===S.name||"has"===S.name&&1===S.args.length||"properties"===S.name||"geometry-type"===S.name||"id"===S.name||/^filter-/.test(S.name))||S instanceof Fn)return!1;var F=!0;return S.eachChild(function(K){F&&!Gn(K)&&(F=!1)}),F}function or(S){if(S instanceof ar&&"feature-state"===S.name)return!1;var F=!0;return S.eachChild(function(K){F&&!or(K)&&(F=!1)}),F}function sr(S,F){if(S instanceof ar&&F.indexOf(S.name)>=0)return!1;var K=!0;return S.eachChild(function(ce){K&&!sr(ce,F)&&(K=!1)}),K}Fn.parse=function(S,F){if(2!==S.length)return F.error("'within' expression requires exactly one argument, but found "+(S.length-1)+" instead.");if(Hn(S[1])){var K=S[1];if("FeatureCollection"===K.type)for(var ce=0;ce<K.features.length;++ce){var ye=K.features[ce].geometry.type;if("Polygon"===ye||"MultiPolygon"===ye)return new Fn(K,K.features[ce].geometry)}else if("Feature"===K.type){var ke=K.geometry.type;if("Polygon"===ke||"MultiPolygon"===ke)return new Fn(K,K.geometry)}else if("Polygon"===K.type||"MultiPolygon"===K.type)return new Fn(K,K)}return F.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Fn.prototype.evaluate=function(S){if(null!=S.geometry()&&null!=S.canonicalID()){if("Point"===S.geometryType())return function(F,K){var ce=[1/0,1/0,-1/0,-1/0],ye=[1/0,1/0,-1/0,-1/0],ke=F.canonicalID();if("Polygon"===K.type){var ze=Wn(K.coordinates,ye,ke),Ze=Cn(F.geometry(),ce,ye,ke);if(!Cr(ce,ye))return!1;for(var ot=0,mt=Ze;ot<mt.length;ot+=1)if(!hn(mt[ot],ze))return!1}if("MultiPolygon"===K.type){var Tt=Pn(K.coordinates,ye,ke),qt=Cn(F.geometry(),ce,ye,ke);if(!Cr(ce,ye))return!1;for(var an=0,$t=qt;an<$t.length;an+=1)if(!Jn($t[an],Tt))return!1}return!0}(S,this.geometries);if("LineString"===S.geometryType())return function(F,K){var ce=[1/0,1/0,-1/0,-1/0],ye=[1/0,1/0,-1/0,-1/0],ke=F.canonicalID();if("Polygon"===K.type){var ze=Wn(K.coordinates,ye,ke),Ze=On(F.geometry(),ce,ye,ke);if(!Cr(ce,ye))return!1;for(var ot=0,mt=Ze;ot<mt.length;ot+=1)if(!Sn(mt[ot],ze))return!1}if("MultiPolygon"===K.type){var Tt=Pn(K.coordinates,ye,ke),qt=On(F.geometry(),ce,ye,ke);if(!Cr(ce,ye))return!1;for(var an=0,$t=qt;an<$t.length;an+=1)if(!Kn($t[an],Tt))return!1}return!0}(S,this.geometries)}return!1},Fn.prototype.eachChild=function(){},Fn.prototype.outputDefined=function(){return!0},Fn.prototype.serialize=function(){return["within",this.geojson]};var pr=function(S,F){this.type=F.type,this.name=S,this.boundExpression=F};pr.parse=function(S,F){if(2!==S.length||"string"!=typeof S[1])return F.error("'var' expression requires exactly one string literal argument.");var K=S[1];return F.scope.has(K)?new pr(K,F.scope.get(K)):F.error('Unknown variable "'+K+'". Make sure "'+K+'" has been bound in an enclosing "let" expression before using it.',1)},pr.prototype.evaluate=function(S){return this.boundExpression.evaluate(S)},pr.prototype.eachChild=function(){},pr.prototype.outputDefined=function(){return!1},pr.prototype.serialize=function(){return["var",this.name]};var yr=function(S,F,K,ce,ye){void 0===F&&(F=[]),void 0===ce&&(ce=new Ut),void 0===ye&&(ye=[]),this.registry=S,this.path=F,this.key=F.map(function(ke){return"["+ke+"]"}).join(""),this.scope=ce,this.errors=ye,this.expectedType=K};function Lr(S,F){for(var K,ye=S.length-1,ke=0,ze=ye,Ze=0;ke<=ze;)if((K=S[Ze=Math.floor((ke+ze)/2)])<=F){if(Ze===ye||F<S[Ze+1])return Ze;ke=Ze+1}else{if(!(K>F))throw new Or("Input is not a number.");ze=Ze-1}return 0}yr.prototype.parse=function(S,F,K,ce,ye){return void 0===ye&&(ye={}),F?this.concat(F,K,ce)._parse(S,ye):this._parse(S,ye)},yr.prototype._parse=function(S,F){function K(mt,Tt,qt){return"assert"===qt?new Br(Tt,[mt]):"coerce"===qt?new $n(Tt,[mt]):mt}if(null!==S&&"string"!=typeof S&&"boolean"!=typeof S&&"number"!=typeof S||(S=["literal",S]),Array.isArray(S)){if(0===S.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ce=S[0];if("string"!=typeof ce)return this.error("Expression name must be a string, but found "+typeof ce+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var ye=this.registry[ce];if(ye){var ke=ye.parse(S,this);if(!ke)return null;if(this.expectedType){var ze=this.expectedType,Ze=ke.type;if("string"!==ze.kind&&"number"!==ze.kind&&"boolean"!==ze.kind&&"object"!==ze.kind&&"array"!==ze.kind||"value"!==Ze.kind)if("color"!==ze.kind&&"formatted"!==ze.kind&&"resolvedImage"!==ze.kind||"value"!==Ze.kind&&"string"!==Ze.kind){if(this.checkSubtype(ze,Ze))return null}else ke=K(ke,ze,F.typeAnnotation||"coerce");else ke=K(ke,ze,F.typeAnnotation||"assert")}if(!(ke instanceof Ir)&&"resolvedImage"!==ke.type.kind&&function mt(Tt){if(Tt instanceof pr)return mt(Tt.boundExpression);if(Tt instanceof ar&&"error"===Tt.name||Tt instanceof si||Tt instanceof Fn)return!1;var qt=Tt instanceof $n||Tt instanceof Br,an=!0;return Tt.eachChild(function($t){an=qt?an&&mt($t):an&&$t instanceof Ir}),!!an&&Gn(Tt)&&sr(Tt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(ke)){var ot=new br;try{ke=new Ir(ke.type,ke.evaluate(ot))}catch(mt){return this.error(mt.message),null}}return ke}return this.error('Unknown expression "'+ce+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===S?"'undefined' value invalid. Use null instead.":"object"==typeof S?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof S+" instead.")},yr.prototype.concat=function(S,F,K){var ce="number"==typeof S?this.path.concat(S):this.path,ye=K?this.scope.concat(K):this.scope;return new yr(this.registry,ce,F||null,ye,this.errors)},yr.prototype.error=function(S){for(var F=[],K=arguments.length-1;K-- >0;)F[K]=arguments[K+1];var ce=""+this.key+F.map(function(ye){return"["+ye+"]"}).join("");this.errors.push(new vt(ce,S))},yr.prototype.checkSubtype=function(S,F){var K=Qt(S,F);return K&&this.error(K),K};var zr=function(S,F,K){this.type=S,this.input=F,this.labels=[],this.outputs=[];for(var ce=0,ye=K;ce<ye.length;ce+=1){var ke=ye[ce],Ze=ke[1];this.labels.push(ke[0]),this.outputs.push(Ze)}};function cr(S,F,K){return S*(1-K)+F*K}zr.parse=function(S,F){if(S.length-1<4)return F.error("Expected at least 4 arguments, but found only "+(S.length-1)+".");if((S.length-1)%2!=0)return F.error("Expected an even number of arguments.");var K=F.parse(S[1],1,gt);if(!K)return null;var ce=[],ye=null;F.expectedType&&"value"!==F.expectedType.kind&&(ye=F.expectedType);for(var ke=1;ke<S.length;ke+=2){var ze=1===ke?-1/0:S[ke],Ze=S[ke+1],ot=ke,mt=ke+1;if("number"!=typeof ze)return F.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ot);if(ce.length&&ce[ce.length-1][0]>=ze)return F.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ot);var Tt=F.parse(Ze,mt,ye);if(!Tt)return null;ye=ye||Tt.type,ce.push([ze,Tt])}return new zr(ye,K,ce)},zr.prototype.evaluate=function(S){var F=this.labels,K=this.outputs;if(1===F.length)return K[0].evaluate(S);var ce=this.input.evaluate(S);if(ce<=F[0])return K[0].evaluate(S);var ye=F.length;return ce>=F[ye-1]?K[ye-1].evaluate(S):K[Lr(F,ce)].evaluate(S)},zr.prototype.eachChild=function(S){S(this.input);for(var F=0,K=this.outputs;F<K.length;F+=1)S(K[F])},zr.prototype.outputDefined=function(){return this.outputs.every(function(S){return S.outputDefined()})},zr.prototype.serialize=function(){for(var S=["step",this.input.serialize()],F=0;F<this.labels.length;F++)F>0&&S.push(this.labels[F]),S.push(this.outputs[F].serialize());return S};var Yr=Object.freeze({__proto__:null,number:cr,color:function(S,F,K){return new sn(cr(S.r,F.r,K),cr(S.g,F.g,K),cr(S.b,F.b,K),cr(S.a,F.a,K))},array:function(S,F,K){return S.map(function(ce,ye){return cr(ce,F[ye],K)})}}),Qr=6/29,ci=3*Qr*Qr,Wi=Math.PI/180,Zi=180/Math.PI;function Nr(S){return S>.008856451679035631?Math.pow(S,1/3):S/ci+4/29}function hi(S){return S>Qr?S*S*S:ci*(S-4/29)}function bi(S){return 255*(S<=.0031308?12.92*S:1.055*Math.pow(S,1/2.4)-.055)}function ya(S){return(S/=255)<=.04045?S/12.92:Math.pow((S+.055)/1.055,2.4)}function Ia(S){var F=ya(S.r),K=ya(S.g),ce=ya(S.b),ye=Nr((.4124564*F+.3575761*K+.1804375*ce)/.95047),ke=Nr((.2126729*F+.7151522*K+.072175*ce)/1);return{l:116*ke-16,a:500*(ye-ke),b:200*(ke-Nr((.0193339*F+.119192*K+.9503041*ce)/1.08883)),alpha:S.a}}function Po(S){var F=(S.l+16)/116,K=isNaN(S.a)?F:F+S.a/500,ce=isNaN(S.b)?F:F-S.b/200;return F=1*hi(F),K=.95047*hi(K),ce=1.08883*hi(ce),new sn(bi(3.2404542*K-1.5371385*F-.4985314*ce),bi(-.969266*K+1.8760108*F+.041556*ce),bi(.0556434*K-.2040259*F+1.0572252*ce),S.alpha)}function os(S,F,K){var ce=F-S;return S+K*(ce>180||ce<-180?ce-360*Math.round(ce/360):ce)}var Pa={forward:Ia,reverse:Po,interpolate:function(S,F,K){return{l:cr(S.l,F.l,K),a:cr(S.a,F.a,K),b:cr(S.b,F.b,K),alpha:cr(S.alpha,F.alpha,K)}}},Fa={forward:function(S){var F=Ia(S),K=F.l,ce=F.a,ye=F.b,ke=Math.atan2(ye,ce)*Zi;return{h:ke<0?ke+360:ke,c:Math.sqrt(ce*ce+ye*ye),l:K,alpha:S.a}},reverse:function(S){var F=S.h*Wi,K=S.c;return Po({l:S.l,a:Math.cos(F)*K,b:Math.sin(F)*K,alpha:S.alpha})},interpolate:function(S,F,K){return{h:os(S.h,F.h,K),c:cr(S.c,F.c,K),l:cr(S.l,F.l,K),alpha:cr(S.alpha,F.alpha,K)}}},oa=Object.freeze({__proto__:null,lab:Pa,hcl:Fa}),wa=function(S,F,K,ce,ye){this.type=S,this.operator=F,this.interpolation=K,this.input=ce,this.labels=[],this.outputs=[];for(var ke=0,ze=ye;ke<ze.length;ke+=1){var Ze=ze[ke],mt=Ze[1];this.labels.push(Ze[0]),this.outputs.push(mt)}};function vs(S,F,K,ce){var ye=ce-K,ke=S-K;return 0===ye?0:1===F?ke/ye:(Math.pow(F,ke)-1)/(Math.pow(F,ye)-1)}wa.interpolationFactor=function(S,F,K,ce){var ye=0;if("exponential"===S.name)ye=vs(F,S.base,K,ce);else if("linear"===S.name)ye=vs(F,1,K,ce);else if("cubic-bezier"===S.name){var ke=S.controlPoints;ye=new n(ke[0],ke[1],ke[2],ke[3]).solve(vs(F,1,K,ce))}return ye},wa.parse=function(S,F){var K=S[0],ce=S[1],ye=S[2],ke=S.slice(3);if(!Array.isArray(ce)||0===ce.length)return F.error("Expected an interpolation type expression.",1);if("linear"===ce[0])ce={name:"linear"};else if("exponential"===ce[0]){var ze=ce[1];if("number"!=typeof ze)return F.error("Exponential interpolation requires a numeric base.",1,1);ce={name:"exponential",base:ze}}else{if("cubic-bezier"!==ce[0])return F.error("Unknown interpolation type "+String(ce[0]),1,0);var Ze=ce.slice(1);if(4!==Ze.length||Ze.some(function(Vn){return"number"!=typeof Vn||Vn<0||Vn>1}))return F.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ce={name:"cubic-bezier",controlPoints:Ze}}if(S.length-1<4)return F.error("Expected at least 4 arguments, but found only "+(S.length-1)+".");if((S.length-1)%2!=0)return F.error("Expected an even number of arguments.");if(!(ye=F.parse(ye,2,gt)))return null;var ot=[],mt=null;"interpolate-hcl"===K||"interpolate-lab"===K?mt=Et:F.expectedType&&"value"!==F.expectedType.kind&&(mt=F.expectedType);for(var Tt=0;Tt<ke.length;Tt+=2){var qt=ke[Tt],an=ke[Tt+1],$t=Tt+3,bn=Tt+4;if("number"!=typeof qt)return F.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$t);if(ot.length&&ot[ot.length-1][0]>=qt)return F.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$t);var Dn=F.parse(an,bn,mt);if(!Dn)return null;mt=mt||Dn.type,ot.push([qt,Dn])}return"number"===mt.kind||"color"===mt.kind||"array"===mt.kind&&"number"===mt.itemType.kind&&"number"==typeof mt.N?new wa(mt,K,ce,ye,ot):F.error("Type "+Xt(mt)+" is not interpolatable.")},wa.prototype.evaluate=function(S){var F=this.labels,K=this.outputs;if(1===F.length)return K[0].evaluate(S);var ce=this.input.evaluate(S);if(ce<=F[0])return K[0].evaluate(S);var ye=F.length;if(ce>=F[ye-1])return K[ye-1].evaluate(S);var ke=Lr(F,ce),ot=wa.interpolationFactor(this.interpolation,ce,F[ke],F[ke+1]),mt=K[ke].evaluate(S),Tt=K[ke+1].evaluate(S);return"interpolate"===this.operator?Yr[this.type.kind.toLowerCase()](mt,Tt,ot):"interpolate-hcl"===this.operator?Fa.reverse(Fa.interpolate(Fa.forward(mt),Fa.forward(Tt),ot)):Pa.reverse(Pa.interpolate(Pa.forward(mt),Pa.forward(Tt),ot))},wa.prototype.eachChild=function(S){S(this.input);for(var F=0,K=this.outputs;F<K.length;F+=1)S(K[F])},wa.prototype.outputDefined=function(){return this.outputs.every(function(S){return S.outputDefined()})},wa.prototype.serialize=function(){var S;S="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var F=[this.operator,S,this.input.serialize()],K=0;K<this.labels.length;K++)F.push(this.labels[K],this.outputs[K].serialize());return F};var jo=function(S,F){this.type=S,this.args=F};jo.parse=function(S,F){if(S.length<2)return F.error("Expectected at least one argument.");var K=null,ce=F.expectedType;ce&&"value"!==ce.kind&&(K=ce);for(var ye=[],ke=0,ze=S.slice(1);ke<ze.length;ke+=1){var ot=F.parse(ze[ke],1+ye.length,K,void 0,{typeAnnotation:"omit"});if(!ot)return null;K=K||ot.type,ye.push(ot)}var mt=ce&&ye.some(function(Tt){return Qt(ce,Tt.type)});return new jo(mt?Ne:K,ye)},jo.prototype.evaluate=function(S){for(var F,K=null,ce=0,ye=0,ke=this.args;ye<ke.length&&(ce++,(K=ke[ye].evaluate(S))&&K instanceof Rn&&!K.available&&(F||(F=K.name),K=null,ce===this.args.length&&(K=F)),null===K);ye+=1);return K},jo.prototype.eachChild=function(S){this.args.forEach(S)},jo.prototype.outputDefined=function(){return this.args.every(function(S){return S.outputDefined()})},jo.prototype.serialize=function(){var S=["coalesce"];return this.eachChild(function(F){S.push(F.serialize())}),S};var Ki=function(S,F){this.type=F.type,this.bindings=[].concat(S),this.result=F};Ki.prototype.evaluate=function(S){return this.result.evaluate(S)},Ki.prototype.eachChild=function(S){for(var F=0,K=this.bindings;F<K.length;F+=1)S(K[F][1]);S(this.result)},Ki.parse=function(S,F){if(S.length<4)return F.error("Expected at least 3 arguments, but found "+(S.length-1)+" instead.");for(var K=[],ce=1;ce<S.length-1;ce+=2){var ye=S[ce];if("string"!=typeof ye)return F.error("Expected string, but found "+typeof ye+" instead.",ce);if(/[^a-zA-Z0-9_]/.test(ye))return F.error("Variable names must contain only alphanumeric characters or '_'.",ce);var ke=F.parse(S[ce+1],ce+1);if(!ke)return null;K.push([ye,ke])}var ze=F.parse(S[S.length-1],S.length-1,F.expectedType,K);return ze?new Ki(K,ze):null},Ki.prototype.outputDefined=function(){return this.result.outputDefined()},Ki.prototype.serialize=function(){for(var S=["let"],F=0,K=this.bindings;F<K.length;F+=1){var ce=K[F];S.push(ce[0],ce[1].serialize())}return S.push(this.result.serialize()),S};var Uo=function(S,F,K){this.type=S,this.index=F,this.input=K};Uo.parse=function(S,F){if(3!==S.length)return F.error("Expected 2 arguments, but found "+(S.length-1)+" instead.");var K=F.parse(S[1],1,gt),ce=F.parse(S[2],2,zt(F.expectedType||Ne));return K&&ce?new Uo(ce.type.itemType,K,ce):null},Uo.prototype.evaluate=function(S){var F=this.index.evaluate(S),K=this.input.evaluate(S);if(F<0)throw new Or("Array index out of bounds: "+F+" < 0.");if(F>=K.length)throw new Or("Array index out of bounds: "+F+" > "+(K.length-1)+".");if(F!==Math.floor(F))throw new Or("Array index must be an integer, but found "+F+" instead.");return K[F]},Uo.prototype.eachChild=function(S){S(this.index),S(this.input)},Uo.prototype.outputDefined=function(){return!1},Uo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ns=function(S,F){this.type=Zt,this.needle=S,this.haystack=F};ns.parse=function(S,F){if(3!==S.length)return F.error("Expected 2 arguments, but found "+(S.length-1)+" instead.");var K=F.parse(S[1],1,Ne),ce=F.parse(S[2],2,Ne);return K&&ce?kn(K.type,[Zt,At,gt,Wt,Ne])?new ns(K,ce):F.error("Expected first argument to be of type boolean, string, number or null, but found "+Xt(K.type)+" instead"):null},ns.prototype.evaluate=function(S){var F=this.needle.evaluate(S),K=this.haystack.evaluate(S);if(!K)return!1;if(!qn(F,["boolean","string","number","null"]))throw new Or("Expected first argument to be of type boolean, string, number or null, but found "+Xt(rr(F))+" instead.");if(!qn(K,["string","array"]))throw new Or("Expected second argument to be of type array or string, but found "+Xt(rr(K))+" instead.");return K.indexOf(F)>=0},ns.prototype.eachChild=function(S){S(this.needle),S(this.haystack)},ns.prototype.outputDefined=function(){return!0},ns.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ss=function(S,F,K){this.type=gt,this.needle=S,this.haystack=F,this.fromIndex=K};ss.parse=function(S,F){if(S.length<=2||S.length>=5)return F.error("Expected 3 or 4 arguments, but found "+(S.length-1)+" instead.");var K=F.parse(S[1],1,Ne),ce=F.parse(S[2],2,Ne);if(!K||!ce)return null;if(!kn(K.type,[Zt,At,gt,Wt,Ne]))return F.error("Expected first argument to be of type boolean, string, number or null, but found "+Xt(K.type)+" instead");if(4===S.length){var ye=F.parse(S[3],3,gt);return ye?new ss(K,ce,ye):null}return new ss(K,ce)},ss.prototype.evaluate=function(S){var F=this.needle.evaluate(S),K=this.haystack.evaluate(S);if(!qn(F,["boolean","string","number","null"]))throw new Or("Expected first argument to be of type boolean, string, number or null, but found "+Xt(rr(F))+" instead.");if(!qn(K,["string","array"]))throw new Or("Expected second argument to be of type array or string, but found "+Xt(rr(K))+" instead.");if(this.fromIndex){var ce=this.fromIndex.evaluate(S);return K.indexOf(F,ce)}return K.indexOf(F)},ss.prototype.eachChild=function(S){S(this.needle),S(this.haystack),this.fromIndex&&S(this.fromIndex)},ss.prototype.outputDefined=function(){return!1},ss.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var S=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),S]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Oo=function(S,F,K,ce,ye,ke){this.inputType=S,this.type=F,this.input=K,this.cases=ce,this.outputs=ye,this.otherwise=ke};Oo.parse=function(S,F){if(S.length<5)return F.error("Expected at least 4 arguments, but found only "+(S.length-1)+".");if(S.length%2!=1)return F.error("Expected an even number of arguments.");var K,ce;F.expectedType&&"value"!==F.expectedType.kind&&(ce=F.expectedType);for(var ye={},ke=[],ze=2;ze<S.length-1;ze+=2){var Ze=S[ze],ot=S[ze+1];Array.isArray(Ze)||(Ze=[Ze]);var mt=F.concat(ze);if(0===Ze.length)return mt.error("Expected at least one branch label.");for(var Tt=0,qt=Ze;Tt<qt.length;Tt+=1){var an=qt[Tt];if("number"!=typeof an&&"string"!=typeof an)return mt.error("Branch labels must be numbers or strings.");if("number"==typeof an&&Math.abs(an)>Number.MAX_SAFE_INTEGER)return mt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof an&&Math.floor(an)!==an)return mt.error("Numeric branch labels must be integer values.");if(K){if(mt.checkSubtype(K,rr(an)))return null}else K=rr(an);if(void 0!==ye[String(an)])return mt.error("Branch labels must be unique.");ye[String(an)]=ke.length}var $t=F.parse(ot,ze,ce);if(!$t)return null;ce=ce||$t.type,ke.push($t)}var bn=F.parse(S[1],1,Ne);if(!bn)return null;var Dn=F.parse(S[S.length-1],S.length-1,ce);return Dn?"value"!==bn.type.kind&&F.concat(1).checkSubtype(K,bn.type)?null:new Oo(K,ce,bn,ye,ke,Dn):null},Oo.prototype.evaluate=function(S){var F=this.input.evaluate(S);return(rr(F)===this.inputType&&this.outputs[this.cases[F]]||this.otherwise).evaluate(S)},Oo.prototype.eachChild=function(S){S(this.input),this.outputs.forEach(S),S(this.otherwise)},Oo.prototype.outputDefined=function(){return this.outputs.every(function(S){return S.outputDefined()})&&this.otherwise.outputDefined()},Oo.prototype.serialize=function(){for(var S=this,F=["match",this.input.serialize()],K=[],ce={},ye=0,ke=Object.keys(this.cases).sort();ye<ke.length;ye+=1){var ze=ke[ye];void 0===(qt=ce[this.cases[ze]])?(ce[this.cases[ze]]=K.length,K.push([this.cases[ze],[ze]])):K[qt][1].push(ze)}for(var Ze=function($t){return"number"===S.inputType.kind?Number($t):$t},ot=0,mt=K;ot<mt.length;ot+=1){var Tt=mt[ot],qt=Tt[0],an=Tt[1];F.push(1===an.length?Ze(an[0]):an.map(Ze)),F.push(this.outputs[outputIndex$1].serialize())}return F.push(this.otherwise.serialize()),F};var za=function(S,F,K){this.type=S,this.branches=F,this.otherwise=K};za.parse=function(S,F){if(S.length<4)return F.error("Expected at least 3 arguments, but found only "+(S.length-1)+".");if(S.length%2!=0)return F.error("Expected an odd number of arguments.");var K;F.expectedType&&"value"!==F.expectedType.kind&&(K=F.expectedType);for(var ce=[],ye=1;ye<S.length-1;ye+=2){var ke=F.parse(S[ye],ye,Zt);if(!ke)return null;var ze=F.parse(S[ye+1],ye+1,K);if(!ze)return null;ce.push([ke,ze]),K=K||ze.type}var Ze=F.parse(S[S.length-1],S.length-1,K);return Ze?new za(K,ce,Ze):null},za.prototype.evaluate=function(S){for(var F=0,K=this.branches;F<K.length;F+=1){var ce=K[F],ke=ce[1];if(ce[0].evaluate(S))return ke.evaluate(S)}return this.otherwise.evaluate(S)},za.prototype.eachChild=function(S){for(var F=0,K=this.branches;F<K.length;F+=1){var ce=K[F],ke=ce[1];S(ce[0]),S(ke)}S(this.otherwise)},za.prototype.outputDefined=function(){return this.branches.every(function(S){return S[1].outputDefined()})&&this.otherwise.outputDefined()},za.prototype.serialize=function(){var S=["case"];return this.eachChild(function(F){S.push(F.serialize())}),S};var Co=function(S,F,K,ce){this.type=S,this.input=F,this.beginIndex=K,this.endIndex=ce};function Cl(S,F){return"=="===S||"!="===S?"boolean"===F.kind||"string"===F.kind||"number"===F.kind||"null"===F.kind||"value"===F.kind:"string"===F.kind||"number"===F.kind||"value"===F.kind}function $s(S,F,K,ce){return 0===ce.compare(F,K)}function Oa(S,F,K){var ce="=="!==S&&"!="!==S;return function(){function ye(ke,ze,Ze){this.type=Zt,this.lhs=ke,this.rhs=ze,this.collator=Ze,this.hasUntypedArgument="value"===ke.type.kind||"value"===ze.type.kind}return ye.parse=function(ke,ze){if(3!==ke.length&&4!==ke.length)return ze.error("Expected two or three arguments.");var Ze=ke[0],ot=ze.parse(ke[1],1,Ne);if(!ot)return null;if(!Cl(Ze,ot.type))return ze.concat(1).error('"'+Ze+"\" comparisons are not supported for type '"+Xt(ot.type)+"'.");var mt=ze.parse(ke[2],2,Ne);if(!mt)return null;if(!Cl(Ze,mt.type))return ze.concat(2).error('"'+Ze+"\" comparisons are not supported for type '"+Xt(mt.type)+"'.");if(ot.type.kind!==mt.type.kind&&"value"!==ot.type.kind&&"value"!==mt.type.kind)return ze.error("Cannot compare types '"+Xt(ot.type)+"' and '"+Xt(mt.type)+"'.");ce&&("value"===ot.type.kind&&"value"!==mt.type.kind?ot=new Br(mt.type,[ot]):"value"!==ot.type.kind&&"value"===mt.type.kind&&(mt=new Br(ot.type,[mt])));var Tt=null;if(4===ke.length){if("string"!==ot.type.kind&&"string"!==mt.type.kind&&"value"!==ot.type.kind&&"value"!==mt.type.kind)return ze.error("Cannot use collator to compare non-string types.");if(!(Tt=ze.parse(ke[3],3,et)))return null}return new ye(ot,mt,Tt)},ye.prototype.evaluate=function(ke){var ze=this.lhs.evaluate(ke),Ze=this.rhs.evaluate(ke);if(ce&&this.hasUntypedArgument){var ot=rr(ze),mt=rr(Ze);if(ot.kind!==mt.kind||"string"!==ot.kind&&"number"!==ot.kind)throw new Or('Expected arguments for "'+S+'" to be (string, string) or (number, number), but found ('+ot.kind+", "+mt.kind+") instead.")}if(this.collator&&!ce&&this.hasUntypedArgument){var Tt=rr(ze),qt=rr(Ze);if("string"!==Tt.kind||"string"!==qt.kind)return F(ke,ze,Ze)}return this.collator?K(ke,ze,Ze,this.collator.evaluate(ke)):F(ke,ze,Ze)},ye.prototype.eachChild=function(ke){ke(this.lhs),ke(this.rhs),this.collator&&ke(this.collator)},ye.prototype.outputDefined=function(){return!0},ye.prototype.serialize=function(){var ke=[S];return this.eachChild(function(ze){ke.push(ze.serialize())}),ke},ye}()}Co.parse=function(S,F){if(S.length<=2||S.length>=5)return F.error("Expected 3 or 4 arguments, but found "+(S.length-1)+" instead.");var K=F.parse(S[1],1,Ne),ce=F.parse(S[2],2,gt);if(!K||!ce)return null;if(!kn(K.type,[zt(Ne),At,Ne]))return F.error("Expected first argument to be of type array or string, but found "+Xt(K.type)+" instead");if(4===S.length){var ye=F.parse(S[3],3,gt);return ye?new Co(K.type,K,ce,ye):null}return new Co(K.type,K,ce)},Co.prototype.evaluate=function(S){var F=this.input.evaluate(S),K=this.beginIndex.evaluate(S);if(!qn(F,["string","array"]))throw new Or("Expected first argument to be of type array or string, but found "+Xt(rr(F))+" instead.");if(this.endIndex){var ce=this.endIndex.evaluate(S);return F.slice(K,ce)}return F.slice(K)},Co.prototype.eachChild=function(S){S(this.input),S(this.beginIndex),this.endIndex&&S(this.endIndex)},Co.prototype.outputDefined=function(){return!1},Co.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var S=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),S]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ml=Oa("==",function(S,F,K){return F===K},$s),Ks=Oa("!=",function(S,F,K){return F!==K},function(S,F,K,ce){return!$s(0,F,K,ce)}),Dl=Oa("<",function(S,F,K){return F<K},function(S,F,K,ce){return ce.compare(F,K)<0}),ys=Oa(">",function(S,F,K){return F>K},function(S,F,K,ce){return ce.compare(F,K)>0}),Ll=Oa("<=",function(S,F,K){return F<=K},function(S,F,K,ce){return ce.compare(F,K)<=0}),Il=Oa(">=",function(S,F,K){return F>=K},function(S,F,K,ce){return ce.compare(F,K)>=0}),Ja=function(S,F,K,ce,ye){this.type=At,this.number=S,this.locale=F,this.currency=K,this.minFractionDigits=ce,this.maxFractionDigits=ye};Ja.parse=function(S,F){if(3!==S.length)return F.error("Expected two arguments.");var K=F.parse(S[1],1,gt);if(!K)return null;var ce=S[2];if("object"!=typeof ce||Array.isArray(ce))return F.error("NumberFormat options argument must be an object.");var ye=null;if(ce.locale&&!(ye=F.parse(ce.locale,1,At)))return null;var ke=null;if(ce.currency&&!(ke=F.parse(ce.currency,1,At)))return null;var ze=null;if(ce["min-fraction-digits"]&&!(ze=F.parse(ce["min-fraction-digits"],1,gt)))return null;var Ze=null;return ce["max-fraction-digits"]&&!(Ze=F.parse(ce["max-fraction-digits"],1,gt))?null:new Ja(K,ye,ke,ze,Ze)},Ja.prototype.evaluate=function(S){return new Intl.NumberFormat(this.locale?this.locale.evaluate(S):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(S):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(S):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(S):void 0}).format(this.number.evaluate(S))},Ja.prototype.eachChild=function(S){S(this.number),this.locale&&S(this.locale),this.currency&&S(this.currency),this.minFractionDigits&&S(this.minFractionDigits),this.maxFractionDigits&&S(this.maxFractionDigits)},Ja.prototype.outputDefined=function(){return!1},Ja.prototype.serialize=function(){var S={};return this.locale&&(S.locale=this.locale.serialize()),this.currency&&(S.currency=this.currency.serialize()),this.minFractionDigits&&(S["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(S["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),S]};var uo=function(S){this.type=gt,this.input=S};uo.parse=function(S,F){if(2!==S.length)return F.error("Expected 1 argument, but found "+(S.length-1)+" instead.");var K=F.parse(S[1],1);return K?"array"!==K.type.kind&&"string"!==K.type.kind&&"value"!==K.type.kind?F.error("Expected argument of type string or array, but found "+Xt(K.type)+" instead."):new uo(K):null},uo.prototype.evaluate=function(S){var F=this.input.evaluate(S);if("string"==typeof F||Array.isArray(F))return F.length;throw new Or("Expected value to be of type string or array, but found "+Xt(rr(F))+" instead.")},uo.prototype.eachChild=function(S){S(this.input)},uo.prototype.outputDefined=function(){return!1},uo.prototype.serialize=function(){var S=["length"];return this.eachChild(function(F){S.push(F.serialize())}),S};var co={"==":ml,"!=":Ks,">":ys,"<":Dl,">=":Il,"<=":Ll,array:Br,at:Uo,boolean:Br,case:za,coalesce:jo,collator:si,format:Dr,image:Rr,in:ns,"index-of":ss,interpolate:wa,"interpolate-hcl":wa,"interpolate-lab":wa,length:uo,let:Ki,literal:Ir,match:Oo,number:Br,"number-format":Ja,object:Br,slice:Co,step:zr,string:Br,"to-boolean":$n,"to-color":$n,"to-number":$n,"to-string":$n,var:pr,within:Fn};function $o(S,F){var K=F[0],ce=F[1],ye=F[2],ke=F[3];K=K.evaluate(S),ce=ce.evaluate(S),ye=ye.evaluate(S);var ze=ke?ke.evaluate(S):1,Ze=Xn(K,ce,ye,ze);if(Ze)throw new Or(Ze);return new sn(K/255*ze,ce/255*ze,ye/255*ze,ze)}function rs(S,F){return S in F}function Vo(S,F){var K=F[S];return void 0===K?null:K}function Ko(S){return{type:S}}function ul(S){return{result:"success",value:S}}function Ho(S){return{result:"error",value:S}}function Ms(S){return"data-driven"===S["property-type"]||"cross-faded-data-driven"===S["property-type"]}function Cs(S){return!!S.expression&&S.expression.parameters.indexOf("zoom")>-1}function Qa(S){return!!S.expression&&S.expression.interpolated}function Sa(S){return S instanceof Number?"number":S instanceof String?"string":S instanceof Boolean?"boolean":Array.isArray(S)?"array":null===S?"null":typeof S}function We(S){return"object"==typeof S&&null!==S&&!Array.isArray(S)}function Ge(S){return S}function rt(S,F,K){return void 0!==S?S:void 0!==F?F:void 0!==K?K:void 0}function pt(S,F,K,ce,ye){return rt(typeof K===ye?ce[K]:void 0,S.default,F.default)}function wt(S,F,K){if("number"!==Sa(K))return rt(S.default,F.default);var ce=S.stops.length;if(1===ce||K<=S.stops[0][0])return S.stops[0][1];if(K>=S.stops[ce-1][0])return S.stops[ce-1][1];var ye=Lr(S.stops.map(function(ke){return ke[0]}),K);return S.stops[ye][1]}function _t(S,F,K){var ce=void 0!==S.base?S.base:1;if("number"!==Sa(K))return rt(S.default,F.default);var ye=S.stops.length;if(1===ye||K<=S.stops[0][0])return S.stops[0][1];if(K>=S.stops[ye-1][0])return S.stops[ye-1][1];var an,$t,Dn,Vn,ke=Lr(S.stops.map(function(qt){return qt[0]}),K),ze=(an=ce,Vn=K-($t=S.stops[ke][0]),0==(Dn=S.stops[ke+1][0]-$t)?0:1===an?Vn/Dn:(Math.pow(an,Vn)-1)/(Math.pow(an,Dn)-1)),Ze=S.stops[ke][1],ot=S.stops[ke+1][1],mt=Yr[F.type]||Ge;if(S.colorSpace&&"rgb"!==S.colorSpace){var Tt=oa[S.colorSpace];mt=function(qt,an){return Tt.reverse(Tt.interpolate(Tt.forward(qt),Tt.forward(an),ze))}}return"function"==typeof Ze.evaluate?{evaluate:function(){for(var qt=[],an=arguments.length;an--;)qt[an]=arguments[an];var $t=Ze.evaluate.apply(void 0,qt),bn=ot.evaluate.apply(void 0,qt);if(void 0!==$t&&void 0!==bn)return mt($t,bn,ze)}}:mt(Ze,ot,ze)}function Pt(S,F,K){return"color"===F.type?K=sn.parse(K):"formatted"===F.type?K=Mn.fromString(K.toString()):"resolvedImage"===F.type?K=Rn.fromString(K.toString()):Sa(K)===F.type||"enum"===F.type&&F.values[K]||(K=void 0),rt(K,S.default,F.default)}ar.register(co,{error:[{kind:"error"},[At],function(S,F){throw new Or(F[0].evaluate(S))}],typeof:[At,[Ne],function(S,F){return Xt(rr(F[0].evaluate(S)))}],"to-rgba":[zt(gt,4),[Et],function(S,F){return F[0].evaluate(S).toArray()}],rgb:[Et,[gt,gt,gt],$o],rgba:[Et,[gt,gt,gt,gt],$o],has:{type:Zt,overloads:[[[At],function(S,F){return rs(F[0].evaluate(S),S.properties())}],[[At,Ct],function(S,F){var ce=F[1];return rs(F[0].evaluate(S),ce.evaluate(S))}]]},get:{type:Ne,overloads:[[[At],function(S,F){return Vo(F[0].evaluate(S),S.properties())}],[[At,Ct],function(S,F){var ce=F[1];return Vo(F[0].evaluate(S),ce.evaluate(S))}]]},"feature-state":[Ne,[At],function(S,F){return Vo(F[0].evaluate(S),S.featureState||{})}],properties:[Ct,[],function(S){return S.properties()}],"geometry-type":[At,[],function(S){return S.geometryType()}],id:[Ne,[],function(S){return S.id()}],zoom:[gt,[],function(S){return S.globals.zoom}],"heatmap-density":[gt,[],function(S){return S.globals.heatmapDensity||0}],"line-progress":[gt,[],function(S){return S.globals.lineProgress||0}],accumulated:[Ne,[],function(S){return void 0===S.globals.accumulated?null:S.globals.accumulated}],"+":[gt,Ko(gt),function(S,F){for(var K=0,ce=0,ye=F;ce<ye.length;ce+=1)K+=ye[ce].evaluate(S);return K}],"*":[gt,Ko(gt),function(S,F){for(var K=1,ce=0,ye=F;ce<ye.length;ce+=1)K*=ye[ce].evaluate(S);return K}],"-":{type:gt,overloads:[[[gt,gt],function(S,F){var ce=F[1];return F[0].evaluate(S)-ce.evaluate(S)}],[[gt],function(S,F){return-F[0].evaluate(S)}]]},"/":[gt,[gt,gt],function(S,F){var ce=F[1];return F[0].evaluate(S)/ce.evaluate(S)}],"%":[gt,[gt,gt],function(S,F){var ce=F[1];return F[0].evaluate(S)%ce.evaluate(S)}],ln2:[gt,[],function(){return Math.LN2}],pi:[gt,[],function(){return Math.PI}],e:[gt,[],function(){return Math.E}],"^":[gt,[gt,gt],function(S,F){var ce=F[1];return Math.pow(F[0].evaluate(S),ce.evaluate(S))}],sqrt:[gt,[gt],function(S,F){return Math.sqrt(F[0].evaluate(S))}],log10:[gt,[gt],function(S,F){return Math.log(F[0].evaluate(S))/Math.LN10}],ln:[gt,[gt],function(S,F){return Math.log(F[0].evaluate(S))}],log2:[gt,[gt],function(S,F){return Math.log(F[0].evaluate(S))/Math.LN2}],sin:[gt,[gt],function(S,F){return Math.sin(F[0].evaluate(S))}],cos:[gt,[gt],function(S,F){return Math.cos(F[0].evaluate(S))}],tan:[gt,[gt],function(S,F){return Math.tan(F[0].evaluate(S))}],asin:[gt,[gt],function(S,F){return Math.asin(F[0].evaluate(S))}],acos:[gt,[gt],function(S,F){return Math.acos(F[0].evaluate(S))}],atan:[gt,[gt],function(S,F){return Math.atan(F[0].evaluate(S))}],min:[gt,Ko(gt),function(S,F){return Math.min.apply(Math,F.map(function(K){return K.evaluate(S)}))}],max:[gt,Ko(gt),function(S,F){return Math.max.apply(Math,F.map(function(K){return K.evaluate(S)}))}],abs:[gt,[gt],function(S,F){return Math.abs(F[0].evaluate(S))}],round:[gt,[gt],function(S,F){var K=F[0].evaluate(S);return K<0?-Math.round(-K):Math.round(K)}],floor:[gt,[gt],function(S,F){return Math.floor(F[0].evaluate(S))}],ceil:[gt,[gt],function(S,F){return Math.ceil(F[0].evaluate(S))}],"filter-==":[Zt,[At,Ne],function(S,F){var K=F[0],ce=F[1];return S.properties()[K.value]===ce.value}],"filter-id-==":[Zt,[Ne],function(S,F){var K=F[0];return S.id()===K.value}],"filter-type-==":[Zt,[At],function(S,F){var K=F[0];return S.geometryType()===K.value}],"filter-<":[Zt,[At,Ne],function(S,F){var K=F[0],ce=F[1],ye=S.properties()[K.value],ke=ce.value;return typeof ye==typeof ke&&ye<ke}],"filter-id-<":[Zt,[Ne],function(S,F){var K=F[0],ce=S.id(),ye=K.value;return typeof ce==typeof ye&&ce<ye}],"filter->":[Zt,[At,Ne],function(S,F){var K=F[0],ce=F[1],ye=S.properties()[K.value],ke=ce.value;return typeof ye==typeof ke&&ye>ke}],"filter-id->":[Zt,[Ne],function(S,F){var K=F[0],ce=S.id(),ye=K.value;return typeof ce==typeof ye&&ce>ye}],"filter-<=":[Zt,[At,Ne],function(S,F){var K=F[0],ce=F[1],ye=S.properties()[K.value],ke=ce.value;return typeof ye==typeof ke&&ye<=ke}],"filter-id-<=":[Zt,[Ne],function(S,F){var K=F[0],ce=S.id(),ye=K.value;return typeof ce==typeof ye&&ce<=ye}],"filter->=":[Zt,[At,Ne],function(S,F){var K=F[0],ce=F[1],ye=S.properties()[K.value],ke=ce.value;return typeof ye==typeof ke&&ye>=ke}],"filter-id->=":[Zt,[Ne],function(S,F){var K=F[0],ce=S.id(),ye=K.value;return typeof ce==typeof ye&&ce>=ye}],"filter-has":[Zt,[Ne],function(S,F){return F[0].value in S.properties()}],"filter-has-id":[Zt,[],function(S){return null!==S.id()&&void 0!==S.id()}],"filter-type-in":[Zt,[zt(At)],function(S,F){return F[0].value.indexOf(S.geometryType())>=0}],"filter-id-in":[Zt,[zt(Ne)],function(S,F){return F[0].value.indexOf(S.id())>=0}],"filter-in-small":[Zt,[At,zt(Ne)],function(S,F){var K=F[0];return F[1].value.indexOf(S.properties()[K.value])>=0}],"filter-in-large":[Zt,[At,zt(Ne)],function(S,F){var K=F[0],ce=F[1];return function(ye,ke,ze,Ze){for(;ze<=Ze;){var ot=ze+Ze>>1;if(ke[ot]===ye)return!0;ke[ot]>ye?Ze=ot-1:ze=ot+1}return!1}(S.properties()[K.value],ce.value,0,ce.value.length-1)}],all:{type:Zt,overloads:[[[Zt,Zt],function(S,F){var ce=F[1];return F[0].evaluate(S)&&ce.evaluate(S)}],[Ko(Zt),function(S,F){for(var K=0,ce=F;K<ce.length;K+=1)if(!ce[K].evaluate(S))return!1;return!0}]]},any:{type:Zt,overloads:[[[Zt,Zt],function(S,F){var ce=F[1];return F[0].evaluate(S)||ce.evaluate(S)}],[Ko(Zt),function(S,F){for(var K=0,ce=F;K<ce.length;K+=1)if(ce[K].evaluate(S))return!0;return!1}]]},"!":[Zt,[Zt],function(S,F){return!F[0].evaluate(S)}],"is-supported-script":[Zt,[At],function(S,F){var ce=S.globals&&S.globals.isSupportedScript;return!ce||ce(F[0].evaluate(S))}],upcase:[At,[At],function(S,F){return F[0].evaluate(S).toUpperCase()}],downcase:[At,[At],function(S,F){return F[0].evaluate(S).toLowerCase()}],concat:[At,Ko(Ne),function(S,F){return F.map(function(K){return er(K.evaluate(S))}).join("")}],"resolved-locale":[At,[et],function(S,F){return F[0].evaluate(S).resolvedLocale()}]});var on=function(S,F){var K;this.expression=S,this._warningHistory={},this._evaluator=new br,this._defaultValue=F?"color"===(K=F).type&&We(K.default)?new sn(0,0,0,0):"color"===K.type?sn.parse(K.default)||null:void 0===K.default?null:K.default:null,this._enumValues=F&&"enum"===F.type?F.values:null};function rn(S){return Array.isArray(S)&&S.length>0&&"string"==typeof S[0]&&S[0]in co}function tn(S,F){var ye,ke,K=new yr(co,[],F?(ke={color:Et,string:At,number:gt,enum:At,boolean:Zt,formatted:dt,resolvedImage:Mt},"array"===(ye=F).type?zt(ke[ye.value]||Ne,ye.length):ke[ye.type]):void 0),ce=K.parse(S,void 0,void 0,void 0,F&&"string"===F.type?{typeAnnotation:"coerce"}:void 0);return ce?ul(new on(ce,F)):Ho(K.errors)}on.prototype.evaluateWithoutErrorHandling=function(S,F,K,ce,ye,ke){return this._evaluator.globals=S,this._evaluator.feature=F,this._evaluator.featureState=K,this._evaluator.canonical=ce,this._evaluator.availableImages=ye||null,this._evaluator.formattedSection=ke,this.expression.evaluate(this._evaluator)},on.prototype.evaluate=function(S,F,K,ce,ye,ke){this._evaluator.globals=S,this._evaluator.feature=F||null,this._evaluator.featureState=K||null,this._evaluator.canonical=ce,this._evaluator.availableImages=ye||null,this._evaluator.formattedSection=ke||null;try{var ze=this.expression.evaluate(this._evaluator);if(null==ze||"number"==typeof ze&&ze!=ze)return this._defaultValue;if(this._enumValues&&!(ze in this._enumValues))throw new Or("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ze){return JSON.stringify(Ze)}).join(", ")+", but found "+JSON.stringify(ze)+" instead.");return ze}catch(Ze){return this._warningHistory[Ze.message]||(this._warningHistory[Ze.message]=!0,"undefined"!=typeof console&&console.warn(Ze.message)),this._defaultValue}};var yn=function(S,F){this.kind=S,this._styleExpression=F,this.isStateDependent="constant"!==S&&!or(F.expression)};yn.prototype.evaluateWithoutErrorHandling=function(S,F,K,ce,ye,ke){return this._styleExpression.evaluateWithoutErrorHandling(S,F,K,ce,ye,ke)},yn.prototype.evaluate=function(S,F,K,ce,ye,ke){return this._styleExpression.evaluate(S,F,K,ce,ye,ke)};var mn=function(S,F,K,ce){this.kind=S,this.zoomStops=K,this._styleExpression=F,this.isStateDependent="camera"!==S&&!or(F.expression),this.interpolationType=ce};function Ln(S,F){if("error"===(S=tn(S,F)).result)return S;var K=S.value.expression,ce=Gn(K);if(!ce&&!Ms(F))return Ho([new vt("","data expressions not supported")]);var ye=sr(K,["zoom"]);if(!ye&&!Cs(F))return Ho([new vt("","zoom expressions not supported")]);var ke=function Ze(ot){var mt=null;if(ot instanceof Ki)mt=Ze(ot.result);else if(ot instanceof jo)for(var Tt=0,qt=ot.args;Tt<qt.length&&!(mt=Ze(qt[Tt]));Tt+=1);else(ot instanceof zr||ot instanceof wa)&&ot.input instanceof ar&&"zoom"===ot.input.name&&(mt=ot);return mt instanceof vt||ot.eachChild(function($t){var bn=Ze($t);bn instanceof vt?mt=bn:!mt&&bn?mt=new vt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):mt&&bn&&mt!==bn&&(mt=new vt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),mt}(K);return ke||ye?ke instanceof vt?Ho([ke]):ke instanceof wa&&!Qa(F)?Ho([new vt("",'"interpolate" expressions cannot be used with this property')]):ul(ke?new mn(ce?"camera":"composite",S.value,ke.labels,ke instanceof wa?ke.interpolation:void 0):new yn(ce?"constant":"source",S.value)):Ho([new vt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}mn.prototype.evaluateWithoutErrorHandling=function(S,F,K,ce,ye,ke){return this._styleExpression.evaluateWithoutErrorHandling(S,F,K,ce,ye,ke)},mn.prototype.evaluate=function(S,F,K,ce,ye,ke){return this._styleExpression.evaluate(S,F,K,ce,ye,ke)},mn.prototype.interpolationFactor=function(S,F,K){return this.interpolationType?wa.interpolationFactor(this.interpolationType,S,F,K):0};var In=function(S,F){this._parameters=S,this._specification=F,at(this,function K(ce,ye){var ke,ze,Ze,ot="color"===ye.type,mt=ce.stops&&"object"==typeof ce.stops[0][0],qt=mt||!(mt||void 0!==ce.property),an=ce.type||(Qa(ye)?"exponential":"interval");if(ot&&((ce=at({},ce)).stops&&(ce.stops=ce.stops.map(function(Si){return[Si[0],sn.parse(Si[1])]})),ce.default=sn.parse(ce.default?ce.default:ye.default)),ce.colorSpace&&"rgb"!==ce.colorSpace&&!oa[ce.colorSpace])throw new Error("Unknown color space: "+ce.colorSpace);if("exponential"===an)ke=_t;else if("interval"===an)ke=wt;else if("categorical"===an){ke=pt,ze=Object.create(null);for(var $t=0,bn=ce.stops;$t<bn.length;$t+=1){var Dn=bn[$t];ze[Dn[0]]=Dn[1]}Ze=typeof ce.stops[0][0]}else{if("identity"!==an)throw new Error('Unknown function type "'+an+'"');ke=Pt}if(mt){for(var Vn={},Bn=[],tr=0;tr<ce.stops.length;tr++){var nr=ce.stops[tr],ur=nr[0].zoom;void 0===Vn[ur]&&(Vn[ur]={zoom:ur,type:ce.type,property:ce.property,default:ce.default,stops:[]},Bn.push(ur)),Vn[ur].stops.push([nr[0].value,nr[1]])}for(var Tr=[],Fr=0,ai=Bn;Fr<ai.length;Fr+=1){var ti=ai[Fr];Tr.push([Vn[ti].zoom,K(Vn[ti],ye)])}var di={name:"linear"};return{kind:"composite",interpolationType:di,interpolationFactor:wa.interpolationFactor.bind(void 0,di),zoomStops:Tr.map(function(Si){return Si[0]}),evaluate:function(Si,vi){var Ii=Si.zoom;return _t({stops:Tr,base:ce.base},ye,Ii).evaluate(Ii,vi)}}}if(qt){var ki="exponential"===an?{name:"exponential",base:void 0!==ce.base?ce.base:1}:null;return{kind:"camera",interpolationType:ki,interpolationFactor:wa.interpolationFactor.bind(void 0,ki),zoomStops:ce.stops.map(function(Si){return Si[0]}),evaluate:function(Si){return ke(ce,ye,Si.zoom,ze,Ze)}}}return{kind:"source",evaluate:function(Si,vi){var Ii=vi&&vi.properties?vi.properties[ce.property]:void 0;return void 0===Ii?rt(ce.default,ye.default):ke(ce,ye,Ii,ze,Ze)}}}(this._parameters,this._specification))};function Zn(S){var F=S.key,K=S.value,ce=S.valueSpec||{},ye=S.objectElementValidators||{},ke=S.style,ze=S.styleSpec,Ze=[],ot=Sa(K);if("object"!==ot)return[new qe(F,K,"object expected, "+ot+" found")];for(var mt in K){var Tt=mt.split(".")[0],qt=ce[Tt]||ce["*"],an=void 0;if(ye[Tt])an=ye[Tt];else if(ce[Tt])an=_n;else if(ye["*"])an=ye["*"];else{if(!ce["*"]){Ze.push(new qe(F,K[mt],'unknown property "'+mt+'"'));continue}an=_n}Ze=Ze.concat(an({key:(F&&F+".")+mt,value:K[mt],valueSpec:qt,style:ke,styleSpec:ze,object:K,objectKey:mt},K))}for(var $t in ce)ye[$t]||ce[$t].required&&void 0===ce[$t].default&&void 0===K[$t]&&Ze.push(new qe(F,K,'missing required property "'+$t+'"'));return Ze}function mr(S){var F=S.value,K=S.valueSpec,ce=S.style,ye=S.styleSpec,ke=S.key,ze=S.arrayElementValidator||_n;if("array"!==Sa(F))return[new qe(ke,F,"array expected, "+Sa(F)+" found")];if(K.length&&F.length!==K.length)return[new qe(ke,F,"array length "+K.length+" expected, length "+F.length+" found")];if(K["min-length"]&&F.length<K["min-length"])return[new qe(ke,F,"array length at least "+K["min-length"]+" expected, length "+F.length+" found")];var Ze={type:K.value,values:K.values};ye.$version<7&&(Ze.function=K.function),"object"===Sa(K.value)&&(Ze=K.value);for(var ot=[],mt=0;mt<F.length;mt++)ot=ot.concat(ze({array:F,arrayIndex:mt,value:F[mt],valueSpec:Ze,style:ce,styleSpec:ye,key:ke+"["+mt+"]"}));return ot}function xr(S){var F=S.key,K=S.value,ce=S.valueSpec,ye=Sa(K);return"number"===ye&&K!=K&&(ye="NaN"),"number"!==ye?[new qe(F,K,"number expected, "+ye+" found")]:"minimum"in ce&&K<ce.minimum?[new qe(F,K,K+" is less than the minimum value "+ce.minimum)]:"maximum"in ce&&K>ce.maximum?[new qe(F,K,K+" is greater than the maximum value "+ce.maximum)]:[]}function Wr(S){var F,K,ce,ye=S.valueSpec,ke=it(S.value.type),ze={},Ze="categorical"!==ke&&void 0===S.value.property,ot=!Ze,mt="array"===Sa(S.value.stops)&&"array"===Sa(S.value.stops[0])&&"object"===Sa(S.value.stops[0][0]),Tt=Zn({key:S.key,value:S.value,valueSpec:S.styleSpec.function,style:S.style,styleSpec:S.styleSpec,objectElementValidators:{stops:function($t){if("identity"===ke)return[new qe($t.key,$t.value,'identity function may not have a "stops" property')];var bn=[],Dn=$t.value;return bn=bn.concat(mr({key:$t.key,value:Dn,valueSpec:$t.valueSpec,style:$t.style,styleSpec:$t.styleSpec,arrayElementValidator:qt})),"array"===Sa(Dn)&&0===Dn.length&&bn.push(new qe($t.key,Dn,"array must have at least one stop")),bn},default:function($t){return _n({key:$t.key,value:$t.value,valueSpec:ye,style:$t.style,styleSpec:$t.styleSpec})}}});return"identity"===ke&&Ze&&Tt.push(new qe(S.key,S.value,'missing required property "property"')),"identity"===ke||S.value.stops||Tt.push(new qe(S.key,S.value,'missing required property "stops"')),"exponential"===ke&&S.valueSpec.expression&&!Qa(S.valueSpec)&&Tt.push(new qe(S.key,S.value,"exponential functions not supported")),S.styleSpec.$version>=8&&(ot&&!Ms(S.valueSpec)?Tt.push(new qe(S.key,S.value,"property functions not supported")):Ze&&!Cs(S.valueSpec)&&Tt.push(new qe(S.key,S.value,"zoom functions not supported"))),"categorical"!==ke&&!mt||void 0!==S.value.property||Tt.push(new qe(S.key,S.value,'"property" property is required')),Tt;function qt($t){var bn=[],Dn=$t.value,Vn=$t.key;if("array"!==Sa(Dn))return[new qe(Vn,Dn,"array expected, "+Sa(Dn)+" found")];if(2!==Dn.length)return[new qe(Vn,Dn,"array length 2 expected, length "+Dn.length+" found")];if(mt){if("object"!==Sa(Dn[0]))return[new qe(Vn,Dn,"object expected, "+Sa(Dn[0])+" found")];if(void 0===Dn[0].zoom)return[new qe(Vn,Dn,"object stop key must have zoom")];if(void 0===Dn[0].value)return[new qe(Vn,Dn,"object stop key must have value")];if(ce&&ce>it(Dn[0].zoom))return[new qe(Vn,Dn[0].zoom,"stop zoom values must appear in ascending order")];it(Dn[0].zoom)!==ce&&(ce=it(Dn[0].zoom),K=void 0,ze={}),bn=bn.concat(Zn({key:Vn+"[0]",value:Dn[0],valueSpec:{zoom:{}},style:$t.style,styleSpec:$t.styleSpec,objectElementValidators:{zoom:xr,value:an}}))}else bn=bn.concat(an({key:Vn+"[0]",value:Dn[0],valueSpec:{},style:$t.style,styleSpec:$t.styleSpec},Dn));return rn(yt(Dn[1]))?bn.concat([new qe(Vn+"[1]",Dn[1],"expressions are not allowed in function stops.")]):bn.concat(_n({key:Vn+"[1]",value:Dn[1],valueSpec:ye,style:$t.style,styleSpec:$t.styleSpec}))}function an($t,bn){var Dn=Sa($t.value),Vn=it($t.value),Bn=null!==$t.value?$t.value:bn;if(F){if(Dn!==F)return[new qe($t.key,Bn,Dn+" stop domain type must match previous stop domain type "+F)]}else F=Dn;if("number"!==Dn&&"string"!==Dn&&"boolean"!==Dn)return[new qe($t.key,Bn,"stop domain value must be a number, string, or boolean")];if("number"!==Dn&&"categorical"!==ke){var tr="number expected, "+Dn+" found";return Ms(ye)&&void 0===ke&&(tr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new qe($t.key,Bn,tr)]}return"categorical"!==ke||"number"!==Dn||isFinite(Vn)&&Math.floor(Vn)===Vn?"categorical"!==ke&&"number"===Dn&&void 0!==K&&Vn<K?[new qe($t.key,Bn,"stop domain values must appear in ascending order")]:(K=Vn,"categorical"===ke&&Vn in ze?[new qe($t.key,Bn,"stop domain values must be unique")]:(ze[Vn]=!0,[])):[new qe($t.key,Bn,"integer expected, found "+Vn)]}}function Kr(S){var F=("property"===S.expressionContext?Ln:tn)(yt(S.value),S.valueSpec);if("error"===F.result)return F.value.map(function(ce){return new qe(""+S.key+ce.key,S.value,ce.message)});var K=F.value.expression||F.value._styleExpression.expression;if("property"===S.expressionContext&&"text-font"===S.propertyKey&&!K.outputDefined())return[new qe(S.key,S.value,'Invalid data expression for "'+S.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===S.expressionContext&&"layout"===S.propertyType&&!or(K))return[new qe(S.key,S.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===S.expressionContext&&!or(K))return[new qe(S.key,S.value,'"feature-state" data expressions are not supported with filters.')];if(S.expressionContext&&0===S.expressionContext.indexOf("cluster")){if(!sr(K,["zoom","feature-state"]))return[new qe(S.key,S.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===S.expressionContext&&!Gn(K))return[new qe(S.key,S.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ei(S){var F=S.key,K=S.value,ce=S.valueSpec,ye=[];return Array.isArray(ce.values)?-1===ce.values.indexOf(it(K))&&ye.push(new qe(F,K,"expected one of ["+ce.values.join(", ")+"], "+JSON.stringify(K)+" found")):-1===Object.keys(ce.values).indexOf(it(K))&&ye.push(new qe(F,K,"expected one of ["+Object.keys(ce.values).join(", ")+"], "+JSON.stringify(K)+" found")),ye}function Ur(S){if(!0===S||!1===S)return!0;if(!Array.isArray(S)||0===S.length)return!1;switch(S[0]){case"has":return S.length>=2&&"$id"!==S[1]&&"$type"!==S[1];case"in":return S.length>=3&&("string"!=typeof S[1]||Array.isArray(S[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==S.length||Array.isArray(S[1])||Array.isArray(S[2]);case"any":case"all":for(var F=0,K=S.slice(1);F<K.length;F+=1){var ce=K[F];if(!Ur(ce)&&"boolean"!=typeof ce)return!1}return!0;default:return!0}}In.deserialize=function(S){return new In(S._parameters,S._specification)},In.serialize=function(S){return{_parameters:S._parameters,_specification:S._specification}};var zi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Xi(S){if(null==S)return{filter:function(){return!0},needGeometry:!1};Ur(S)||(S=Ji(S));var F=tn(S,zi);if("error"===F.result)throw new Error(F.value.map(function(K){return K.key+": "+K.message}).join(", "));return{filter:function(K,ce,ye){return F.value.evaluate(K,ce,{},ye)},needGeometry:function K(ce){if(!Array.isArray(ce))return!1;if("within"===ce[0])return!0;for(var ye=1;ye<ce.length;ye++)if(K(ce[ye]))return!0;return!1}(S)}}function na(S,F){return S<F?-1:S>F?1:0}function Ji(S){if(!S)return!0;var F,K=S[0];return S.length<=1?"any"!==K:"=="===K?Ta(S[1],S[2],"=="):"!="===K?xa(Ta(S[1],S[2],"==")):"<"===K||">"===K||"<="===K||">="===K?Ta(S[1],S[2],K):"any"===K?(F=S.slice(1),["any"].concat(F.map(Ji))):"all"===K?["all"].concat(S.slice(1).map(Ji)):"none"===K?["all"].concat(S.slice(1).map(Ji).map(xa)):"in"===K?fo(S[1],S.slice(2)):"!in"===K?xa(fo(S[1],S.slice(2))):"has"===K?ao(S[1]):"!has"===K?xa(ao(S[1])):"within"!==K||S}function Ta(S,F,K){switch(S){case"$type":return["filter-type-"+K,F];case"$id":return["filter-id-"+K,F];default:return["filter-"+K,S,F]}}function fo(S,F){if(0===F.length)return!1;switch(S){case"$type":return["filter-type-in",["literal",F]];case"$id":return["filter-id-in",["literal",F]];default:return F.length>200&&!F.some(function(K){return typeof K!=typeof F[0]})?["filter-in-large",S,["literal",F.sort(na)]]:["filter-in-small",S,["literal",F]]}}function ao(S){switch(S){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",S]}}function xa(S){return["!",S]}function Ga(S){return Ur(yt(S.value))?Kr(at({},S,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function F(K){var ce=K.value,ye=K.key;if("array"!==Sa(ce))return[new qe(ye,ce,"array expected, "+Sa(ce)+" found")];var ke,ze=K.styleSpec,Ze=[];if(ce.length<1)return[new qe(ye,ce,"filter array must have at least 1 element")];switch(Ze=Ze.concat(ei({key:ye+"[0]",value:ce[0],valueSpec:ze.filter_operator,style:K.style,styleSpec:K.styleSpec})),it(ce[0])){case"<":case"<=":case">":case">=":ce.length>=2&&"$type"===it(ce[1])&&Ze.push(new qe(ye,ce,'"$type" cannot be use with operator "'+ce[0]+'"'));case"==":case"!=":3!==ce.length&&Ze.push(new qe(ye,ce,'filter array for operator "'+ce[0]+'" must have 3 elements'));case"in":case"!in":ce.length>=2&&"string"!==(ke=Sa(ce[1]))&&Ze.push(new qe(ye+"[1]",ce[1],"string expected, "+ke+" found"));for(var ot=2;ot<ce.length;ot++)ke=Sa(ce[ot]),"$type"===it(ce[1])?Ze=Ze.concat(ei({key:ye+"["+ot+"]",value:ce[ot],valueSpec:ze.geometry_type,style:K.style,styleSpec:K.styleSpec})):"string"!==ke&&"number"!==ke&&"boolean"!==ke&&Ze.push(new qe(ye+"["+ot+"]",ce[ot],"string, number, or boolean expected, "+ke+" found"));break;case"any":case"all":case"none":for(var mt=1;mt<ce.length;mt++)Ze=Ze.concat(F({key:ye+"["+mt+"]",value:ce[mt],style:K.style,styleSpec:K.styleSpec}));break;case"has":case"!has":ke=Sa(ce[1]),2!==ce.length?Ze.push(new qe(ye,ce,'filter array for "'+ce[0]+'" operator must have 2 elements')):"string"!==ke&&Ze.push(new qe(ye+"[1]",ce[1],"string expected, "+ke+" found"));break;case"within":ke=Sa(ce[1]),2!==ce.length?Ze.push(new qe(ye,ce,'filter array for "'+ce[0]+'" operator must have 2 elements')):"object"!==ke&&Ze.push(new qe(ye+"[1]",ce[1],"object expected, "+ke+" found"))}return Ze}(S)}function To(S,F){var K=S.key,ce=S.style,ye=S.styleSpec,ke=S.value,ze=S.objectKey,Ze=ye[F+"_"+S.layerType];if(!Ze)return[];var ot=ze.match(/^(.*)-transition$/);if("paint"===F&&ot&&Ze[ot[1]]&&Ze[ot[1]].transition)return _n({key:K,value:ke,valueSpec:ye.transition,style:ce,styleSpec:ye});var mt,Tt=S.valueSpec||Ze[ze];if(!Tt)return[new qe(K,ke,'unknown property "'+ze+'"')];if("string"===Sa(ke)&&Ms(Tt)&&!Tt.tokens&&(mt=/^{([^}]+)}$/.exec(ke)))return[new qe(K,ke,'"'+ze+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(mt[1])+" }`.")];var qt=[];return"symbol"===S.layerType&&("text-field"===ze&&ce&&!ce.glyphs&&qt.push(new qe(K,ke,'use of "text-field" requires a style "glyphs" property')),"text-font"===ze&&We(yt(ke))&&"identity"===it(ke.type)&&qt.push(new qe(K,ke,'"text-font" does not support identity functions'))),qt.concat(_n({key:S.key,value:ke,valueSpec:Tt,style:ce,styleSpec:ye,expressionContext:"property",propertyType:F,propertyKey:ze}))}function qo(S){return To(S,"paint")}function is(S){return To(S,"layout")}function ls(S){var F=[],K=S.value,ce=S.key,ye=S.style,ke=S.styleSpec;K.type||K.ref||F.push(new qe(ce,K,'either "type" or "ref" is required'));var ze,Ze=it(K.type),ot=it(K.ref);if(K.id)for(var mt=it(K.id),Tt=0;Tt<S.arrayIndex;Tt++){var qt=ye.layers[Tt];it(qt.id)===mt&&F.push(new qe(ce,K.id,'duplicate layer id "'+K.id+'", previously used at line '+qt.id.__line__))}if("ref"in K)["type","source","source-layer","filter","layout"].forEach(function(bn){bn in K&&F.push(new qe(ce,K[bn],'"'+bn+'" is prohibited for ref layers'))}),ye.layers.forEach(function(bn){it(bn.id)===ot&&(ze=bn)}),ze?ze.ref?F.push(new qe(ce,K.ref,"ref cannot reference another ref layer")):Ze=it(ze.type):F.push(new qe(ce,K.ref,'ref layer "'+ot+'" not found'));else if("background"!==Ze)if(K.source){var an=ye.sources&&ye.sources[K.source],$t=an&&it(an.type);an?"vector"===$t&&"raster"===Ze?F.push(new qe(ce,K.source,'layer "'+K.id+'" requires a raster source')):"raster"===$t&&"raster"!==Ze?F.push(new qe(ce,K.source,'layer "'+K.id+'" requires a vector source')):"vector"!==$t||K["source-layer"]?"raster-dem"===$t&&"hillshade"!==Ze?F.push(new qe(ce,K.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Ze||!K.paint||!K.paint["line-gradient"]||"geojson"===$t&&an.lineMetrics||F.push(new qe(ce,K,'layer "'+K.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):F.push(new qe(ce,K,'layer "'+K.id+'" must specify a "source-layer"')):F.push(new qe(ce,K.source,'source "'+K.source+'" not found'))}else F.push(new qe(ce,K,'missing required property "source"'));return F=F.concat(Zn({key:ce,value:K,valueSpec:ke.layer,style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return _n({key:ce+".type",value:K.type,valueSpec:ke.layer.type,style:S.style,styleSpec:S.styleSpec,object:K,objectKey:"type"})},filter:Ga,layout:function(bn){return Zn({layer:K,key:bn.key,value:bn.value,style:bn.style,styleSpec:bn.styleSpec,objectElementValidators:{"*":function(Dn){return is(at({layerType:Ze},Dn))}}})},paint:function(bn){return Zn({layer:K,key:bn.key,value:bn.value,style:bn.style,styleSpec:bn.styleSpec,objectElementValidators:{"*":function(Dn){return qo(at({layerType:Ze},Dn))}}})}}}))}function us(S){var F=S.value,K=S.key,ce=Sa(F);return"string"!==ce?[new qe(K,F,"string expected, "+ce+" found")]:[]}var cs={promoteId:function(S){var F=S.key,K=S.value;if("string"===Sa(K))return us({key:F,value:K});var ce=[];for(var ye in K)ce.push.apply(ce,us({key:F+"."+ye,value:K[ye]}));return ce}};function ba(S){var F=S.value,K=S.key,ce=S.styleSpec,ye=S.style;if(!F.type)return[new qe(K,F,'"type" is required')];var ke,ze=it(F.type);switch(ze){case"vector":case"raster":case"raster-dem":return Zn({key:K,value:F,valueSpec:ce["source_"+ze.replace("-","_")],style:S.style,styleSpec:ce,objectElementValidators:cs});case"geojson":if(ke=Zn({key:K,value:F,valueSpec:ce.source_geojson,style:ye,styleSpec:ce,objectElementValidators:cs}),F.cluster)for(var Ze in F.clusterProperties){var ot=F.clusterProperties[Ze],mt=ot[0],qt="string"==typeof mt?[mt,["accumulated"],["get",Ze]]:mt;ke.push.apply(ke,Kr({key:K+"."+Ze+".map",value:ot[1],expressionContext:"cluster-map"})),ke.push.apply(ke,Kr({key:K+"."+Ze+".reduce",value:qt,expressionContext:"cluster-reduce"}))}return ke;case"video":return Zn({key:K,value:F,valueSpec:ce.source_video,style:ye,styleSpec:ce});case"image":return Zn({key:K,value:F,valueSpec:ce.source_image,style:ye,styleSpec:ce});case"canvas":return[new qe(K,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ei({key:K+".type",value:F.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:ye,styleSpec:ce})}}function bt(S){var F=S.value,K=S.styleSpec,ce=K.light,ye=S.style,ke=[],ze=Sa(F);if(void 0===F)return ke;if("object"!==ze)return ke.concat([new qe("light",F,"object expected, "+ze+" found")]);for(var Ze in F){var ot=Ze.match(/^(.*)-transition$/);ke=ke.concat(ot&&ce[ot[1]]&&ce[ot[1]].transition?_n({key:Ze,value:F[Ze],valueSpec:K.transition,style:ye,styleSpec:K}):ce[Ze]?_n({key:Ze,value:F[Ze],valueSpec:ce[Ze],style:ye,styleSpec:K}):[new qe(Ze,F[Ze],'unknown property "'+Ze+'"')])}return ke}var Ht={"*":function(){return[]},array:mr,boolean:function(S){var F=S.value,K=S.key,ce=Sa(F);return"boolean"!==ce?[new qe(K,F,"boolean expected, "+ce+" found")]:[]},number:xr,color:function(S){var F=S.key,K=S.value,ce=Sa(K);return"string"!==ce?[new qe(F,K,"color expected, "+ce+" found")]:null===gn(K)?[new qe(F,K,'color expected, "'+K+'" found')]:[]},constants:Je,enum:ei,filter:Ga,function:Wr,layer:ls,object:Zn,source:ba,light:bt,string:us,formatted:function(S){return 0===us(S).length?[]:Kr(S)},resolvedImage:function(S){return 0===us(S).length?[]:Kr(S)}};function _n(S){var F=S.value,K=S.valueSpec,ce=S.styleSpec;return K.expression&&We(it(F))?Wr(S):K.expression&&rn(yt(F))?Kr(S):K.type&&Ht[K.type]?Ht[K.type](S):Zn(at({},S,{valueSpec:K.type?ce[K.type]:K}))}function Kt(S){var F=S.value,K=S.key,ce=us(S);return ce.length||(-1===F.indexOf("{fontstack}")&&ce.push(new qe(K,F,'"glyphs" url must include a "{fontstack}" token')),-1===F.indexOf("{range}")&&ce.push(new qe(K,F,'"glyphs" url must include a "{range}" token'))),ce}function wn(S,F){void 0===F&&(F=je);var K=[];return K=K.concat(_n({key:"",value:S,valueSpec:F.$root,styleSpec:F,style:S,objectElementValidators:{glyphs:Kt,"*":function(){return[]}}})),S.constants&&(K=K.concat(Je({key:"constants",value:S.constants,style:S,styleSpec:F}))),Yn(K)}function Yn(S){return[].concat(S).sort(function(F,K){return F.line-K.line})}function Qn(S){return function(){for(var F=[],K=arguments.length;K--;)F[K]=arguments[K];return Yn(S.apply(this,F))}}wn.source=Qn(ba),wn.light=Qn(bt),wn.layer=Qn(ls),wn.filter=Qn(Ga),wn.paintProperty=Qn(qo),wn.layoutProperty=Qn(is);var fr=wn,kr=fr.light,_r=fr.paintProperty,Sr=fr.layoutProperty;function Vr(S,F){var K=!1;if(F&&F.length)for(var ce=0,ye=F;ce<ye.length;ce+=1)S.fire(new Ee(new Error(ye[ce].message))),K=!0;return K}var Ar=Hr;function Hr(S,F,K){var ce=this.cells=[];if(S instanceof ArrayBuffer){this.arrayBuffer=S;var ye=new Int32Array(this.arrayBuffer);S=ye[0],this.d=(F=ye[1])+2*(K=ye[2]);for(var ke=0;ke<this.d*this.d;ke++){var ze=ye[3+ke],Ze=ye[3+ke+1];ce.push(ze===Ze?null:ye.subarray(ze,Ze))}var mt=ye[3+ce.length+1];this.keys=ye.subarray(ye[3+ce.length],mt),this.bboxes=ye.subarray(mt),this.insert=this._insertReadonly}else{this.d=F+2*K;for(var Tt=0;Tt<this.d*this.d;Tt++)ce.push([]);this.keys=[],this.bboxes=[]}this.n=F,this.extent=S,this.padding=K,this.scale=F/S,this.uid=0;var qt=K/F*S;this.min=-qt,this.max=S+qt}Hr.prototype.insert=function(S,F,K,ce,ye){this._forEachCell(F,K,ce,ye,this._insertCell,this.uid++),this.keys.push(S),this.bboxes.push(F),this.bboxes.push(K),this.bboxes.push(ce),this.bboxes.push(ye)},Hr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Hr.prototype._insertCell=function(S,F,K,ce,ye,ke){this.cells[ye].push(ke)},Hr.prototype.query=function(S,F,K,ce,ye){var ke=this.min,ze=this.max;if(S<=ke&&F<=ke&&ze<=K&&ze<=ce&&!ye)return Array.prototype.slice.call(this.keys);var Ze=[];return this._forEachCell(S,F,K,ce,this._queryCell,Ze,{},ye),Ze},Hr.prototype._queryCell=function(S,F,K,ce,ye,ke,ze,Ze){var ot=this.cells[ye];if(null!==ot)for(var mt=this.keys,Tt=this.bboxes,qt=0;qt<ot.length;qt++){var an=ot[qt];if(void 0===ze[an]){var $t=4*an;(Ze?Ze(Tt[$t+0],Tt[$t+1],Tt[$t+2],Tt[$t+3]):S<=Tt[$t+2]&&F<=Tt[$t+3]&&K>=Tt[$t+0]&&ce>=Tt[$t+1])?(ze[an]=!0,ke.push(mt[an])):ze[an]=!1}}},Hr.prototype._forEachCell=function(S,F,K,ce,ye,ke,ze,Ze){for(var ot=this._convertToCellCoord(S),mt=this._convertToCellCoord(F),Tt=this._convertToCellCoord(K),qt=this._convertToCellCoord(ce),an=ot;an<=Tt;an++)for(var $t=mt;$t<=qt;$t++){var bn=this.d*$t+an;if((!Ze||Ze(this._convertFromCellCoord(an),this._convertFromCellCoord($t),this._convertFromCellCoord(an+1),this._convertFromCellCoord($t+1)))&&ye.call(this,S,F,K,ce,bn,ke,ze,Ze))return}},Hr.prototype._convertFromCellCoord=function(S){return(S-this.padding)/this.scale},Hr.prototype._convertToCellCoord=function(S){return Math.max(0,Math.min(this.d-1,Math.floor(S*this.scale)+this.padding))},Hr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var S=this.cells,F=3+this.cells.length+1+1,K=0,ce=0;ce<this.cells.length;ce++)K+=this.cells[ce].length;var ye=new Int32Array(F+K+this.keys.length+this.bboxes.length);ye[0]=this.extent,ye[1]=this.n,ye[2]=this.padding;for(var ke=F,ze=0;ze<S.length;ze++){var Ze=S[ze];ye[3+ze]=ke,ye.set(Ze,ke),ke+=Ze.length}return ye[3+S.length]=ke,ye.set(this.keys,ke),ye[3+S.length+1]=ke+=this.keys.length,ye.set(this.bboxes,ke),ke+=this.bboxes.length,ye.buffer};var ii=self.ImageData,oi=self.ImageBitmap,Ai={};function lr(S,F,K){void 0===K&&(K={}),Object.defineProperty(F,"_classRegistryKey",{value:S,writeable:!1}),Ai[S]={klass:F,omit:K.omit||[],shallow:K.shallow||[]}}for(var Ti in lr("Object",Object),Ar.serialize=function(S,F){var K=S.toArrayBuffer();return F&&F.push(K),{buffer:K}},Ar.deserialize=function(S){return new Ar(S.buffer)},lr("Grid",Ar),lr("Color",sn),lr("Error",Error),lr("ResolvedImage",Rn),lr("StylePropertyFunction",In),lr("StyleExpression",on,{omit:["_evaluator"]}),lr("ZoomDependentExpression",mn),lr("ZoomConstantExpression",yn),lr("CompoundExpression",ar,{omit:["_evaluate"]}),co)co[Ti]._classRegistryKey||lr("Expression_"+Ti,co[Ti]);function $r(S){return S&&"undefined"!=typeof ArrayBuffer&&(S instanceof ArrayBuffer||S.constructor&&"ArrayBuffer"===S.constructor.name)}function li(S){return oi&&S instanceof oi}function _i(S,F){if(null==S||"boolean"==typeof S||"number"==typeof S||"string"==typeof S||S instanceof Boolean||S instanceof Number||S instanceof String||S instanceof Date||S instanceof RegExp)return S;if($r(S)||li(S))return F&&F.push(S),S;if(ArrayBuffer.isView(S)){var K=S;return F&&F.push(K.buffer),K}if(S instanceof ii)return F&&F.push(S.data.buffer),S;if(Array.isArray(S)){for(var ce=[],ye=0,ke=S;ye<ke.length;ye+=1)ce.push(_i(ke[ye],F));return ce}if("object"==typeof S){var Ze=S.constructor,ot=Ze._classRegistryKey;if(!ot)throw new Error("can't serialize object of unregistered class");var mt=Ze.serialize?Ze.serialize(S,F):{};if(!Ze.serialize){for(var Tt in S)if(S.hasOwnProperty(Tt)&&!(Ai[ot].omit.indexOf(Tt)>=0)){var qt=S[Tt];mt[Tt]=Ai[ot].shallow.indexOf(Tt)>=0?qt:_i(qt,F)}S instanceof Error&&(mt.message=S.message)}if(mt.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==ot&&(mt.$name=ot),mt}throw new Error("can't serialize object of type "+typeof S)}function Yi(S){if(null==S||"boolean"==typeof S||"number"==typeof S||"string"==typeof S||S instanceof Boolean||S instanceof Number||S instanceof String||S instanceof Date||S instanceof RegExp||$r(S)||li(S)||ArrayBuffer.isView(S)||S instanceof ii)return S;if(Array.isArray(S))return S.map(Yi);if("object"==typeof S){var F=S.$name||"Object",K=Ai[F].klass;if(!K)throw new Error("can't deserialize unregistered class "+F);if(K.deserialize)return K.deserialize(S);for(var ce=Object.create(K.prototype),ye=0,ke=Object.keys(S);ye<ke.length;ye+=1){var ze=ke[ye];if("$name"!==ze){var Ze=S[ze];ce[ze]=Ai[F].shallow.indexOf(ze)>=0?Ze:Yi(Ze)}}return ce}throw new Error("can't deserialize object of type "+typeof S)}var sa=function(){this.first=!0};sa.prototype.update=function(S,F){var K=Math.floor(S);return this.first?(this.first=!1,this.lastIntegerZoom=K,this.lastIntegerZoomTime=0,this.lastZoom=S,this.lastFloorZoom=K,!0):(this.lastFloorZoom>K?(this.lastIntegerZoom=K+1,this.lastIntegerZoomTime=F):this.lastFloorZoom<K&&(this.lastIntegerZoom=K,this.lastIntegerZoomTime=F),S!==this.lastZoom&&(this.lastZoom=S,this.lastFloorZoom=K,!0))};var qr={"Latin-1 Supplement":function(S){return S>=128&&S<=255},Arabic:function(S){return S>=1536&&S<=1791},"Arabic Supplement":function(S){return S>=1872&&S<=1919},"Arabic Extended-A":function(S){return S>=2208&&S<=2303},"Hangul Jamo":function(S){return S>=4352&&S<=4607},"Unified Canadian Aboriginal Syllabics":function(S){return S>=5120&&S<=5759},Khmer:function(S){return S>=6016&&S<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(S){return S>=6320&&S<=6399},"General Punctuation":function(S){return S>=8192&&S<=8303},"Letterlike Symbols":function(S){return S>=8448&&S<=8527},"Number Forms":function(S){return S>=8528&&S<=8591},"Miscellaneous Technical":function(S){return S>=8960&&S<=9215},"Control Pictures":function(S){return S>=9216&&S<=9279},"Optical Character Recognition":function(S){return S>=9280&&S<=9311},"Enclosed Alphanumerics":function(S){return S>=9312&&S<=9471},"Geometric Shapes":function(S){return S>=9632&&S<=9727},"Miscellaneous Symbols":function(S){return S>=9728&&S<=9983},"Miscellaneous Symbols and Arrows":function(S){return S>=11008&&S<=11263},"CJK Radicals Supplement":function(S){return S>=11904&&S<=12031},"Kangxi Radicals":function(S){return S>=12032&&S<=12255},"Ideographic Description Characters":function(S){return S>=12272&&S<=12287},"CJK Symbols and Punctuation":function(S){return S>=12288&&S<=12351},Hiragana:function(S){return S>=12352&&S<=12447},Katakana:function(S){return S>=12448&&S<=12543},Bopomofo:function(S){return S>=12544&&S<=12591},"Hangul Compatibility Jamo":function(S){return S>=12592&&S<=12687},Kanbun:function(S){return S>=12688&&S<=12703},"Bopomofo Extended":function(S){return S>=12704&&S<=12735},"CJK Strokes":function(S){return S>=12736&&S<=12783},"Katakana Phonetic Extensions":function(S){return S>=12784&&S<=12799},"Enclosed CJK Letters and Months":function(S){return S>=12800&&S<=13055},"CJK Compatibility":function(S){return S>=13056&&S<=13311},"CJK Unified Ideographs Extension A":function(S){return S>=13312&&S<=19903},"Yijing Hexagram Symbols":function(S){return S>=19904&&S<=19967},"CJK Unified Ideographs":function(S){return S>=19968&&S<=40959},"Yi Syllables":function(S){return S>=40960&&S<=42127},"Yi Radicals":function(S){return S>=42128&&S<=42191},"Hangul Jamo Extended-A":function(S){return S>=43360&&S<=43391},"Hangul Syllables":function(S){return S>=44032&&S<=55215},"Hangul Jamo Extended-B":function(S){return S>=55216&&S<=55295},"Private Use Area":function(S){return S>=57344&&S<=63743},"CJK Compatibility Ideographs":function(S){return S>=63744&&S<=64255},"Arabic Presentation Forms-A":function(S){return S>=64336&&S<=65023},"Vertical Forms":function(S){return S>=65040&&S<=65055},"CJK Compatibility Forms":function(S){return S>=65072&&S<=65103},"Small Form Variants":function(S){return S>=65104&&S<=65135},"Arabic Presentation Forms-B":function(S){return S>=65136&&S<=65279},"Halfwidth and Fullwidth Forms":function(S){return S>=65280&&S<=65519}};function pa(S){for(var F=0,K=S;F<K.length;F+=1)if(Pi(K[F].charCodeAt(0)))return!0;return!1}function ji(S){return!(qr.Arabic(S)||qr["Arabic Supplement"](S)||qr["Arabic Extended-A"](S)||qr["Arabic Presentation Forms-A"](S)||qr["Arabic Presentation Forms-B"](S))}function Pi(S){return!(746!==S&&747!==S&&(S<4352||!(qr["Bopomofo Extended"](S)||qr.Bopomofo(S)||qr["CJK Compatibility Forms"](S)&&!(S>=65097&&S<=65103)||qr["CJK Compatibility Ideographs"](S)||qr["CJK Compatibility"](S)||qr["CJK Radicals Supplement"](S)||qr["CJK Strokes"](S)||!(!qr["CJK Symbols and Punctuation"](S)||S>=12296&&S<=12305||S>=12308&&S<=12319||12336===S)||qr["CJK Unified Ideographs Extension A"](S)||qr["CJK Unified Ideographs"](S)||qr["Enclosed CJK Letters and Months"](S)||qr["Hangul Compatibility Jamo"](S)||qr["Hangul Jamo Extended-A"](S)||qr["Hangul Jamo Extended-B"](S)||qr["Hangul Jamo"](S)||qr["Hangul Syllables"](S)||qr.Hiragana(S)||qr["Ideographic Description Characters"](S)||qr.Kanbun(S)||qr["Kangxi Radicals"](S)||qr["Katakana Phonetic Extensions"](S)||qr.Katakana(S)&&12540!==S||!(!qr["Halfwidth and Fullwidth Forms"](S)||65288===S||65289===S||65293===S||S>=65306&&S<=65310||65339===S||65341===S||65343===S||S>=65371&&S<=65503||65507===S||S>=65512&&S<=65519)||!(!qr["Small Form Variants"](S)||S>=65112&&S<=65118||S>=65123&&S<=65126)||qr["Unified Canadian Aboriginal Syllabics"](S)||qr["Unified Canadian Aboriginal Syllabics Extended"](S)||qr["Vertical Forms"](S)||qr["Yijing Hexagram Symbols"](S)||qr["Yi Syllables"](S)||qr["Yi Radicals"](S))))}function fa(S){return!(Pi(S)||(F=S,qr["Latin-1 Supplement"](F)&&(167===F||169===F||174===F||177===F||188===F||189===F||190===F||215===F||247===F)||qr["General Punctuation"](F)&&(8214===F||8224===F||8225===F||8240===F||8241===F||8251===F||8252===F||8258===F||8263===F||8264===F||8265===F||8273===F)||qr["Letterlike Symbols"](F)||qr["Number Forms"](F)||qr["Miscellaneous Technical"](F)&&(F>=8960&&F<=8967||F>=8972&&F<=8991||F>=8996&&F<=9e3||9003===F||F>=9085&&F<=9114||F>=9150&&F<=9165||9167===F||F>=9169&&F<=9179||F>=9186&&F<=9215)||qr["Control Pictures"](F)&&9251!==F||qr["Optical Character Recognition"](F)||qr["Enclosed Alphanumerics"](F)||qr["Geometric Shapes"](F)||qr["Miscellaneous Symbols"](F)&&!(F>=9754&&F<=9759)||qr["Miscellaneous Symbols and Arrows"](F)&&(F>=11026&&F<=11055||F>=11088&&F<=11097||F>=11192&&F<=11243)||qr["CJK Symbols and Punctuation"](F)||qr.Katakana(F)||qr["Private Use Area"](F)||qr["CJK Compatibility Forms"](F)||qr["Small Form Variants"](F)||qr["Halfwidth and Fullwidth Forms"](F)||8734===F||8756===F||8757===F||F>=9984&&F<=10087||F>=10102&&F<=10131||65532===F||65533===F));var F}function $i(S){return S>=1424&&S<=2303||qr["Arabic Presentation Forms-A"](S)||qr["Arabic Presentation Forms-B"](S)}function Va(S,F){return!(!F&&$i(S)||S>=2304&&S<=3583||S>=3840&&S<=4255||qr.Khmer(S))}function wi(S){for(var F=0,K=S;F<K.length;F+=1)if($i(K[F].charCodeAt(0)))return!0;return!1}var Na="deferred",ga="loading",Vs="loaded",Ra=null,Ui="unavailable",yo=null,Jo=function(S){S&&"string"==typeof S&&S.indexOf("NetworkError")>-1&&(Ui="error"),Ra&&Ra(S)};function ia(){Mo.fire(new Me("pluginStateChange",{pluginStatus:Ui,pluginURL:yo}))}var Mo=new Se,Ro=function(){return Ui},ka=function(){if(Ui!==Na||!yo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ui=ga,ia(),yo&&Ft({url:yo},function(S){S?Jo(S):(Ui=Vs,ia())})},eo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ui===Vs||null!=eo.applyArabicShaping},isLoading:function(){return Ui===ga},setState:function(S){Ui=S.pluginStatus,yo=S.pluginURL},isParsed:function(){return null!=eo.applyArabicShaping&&null!=eo.processBidirectionalText&&null!=eo.processStyledBidirectionalText},getPluginURL:function(){return yo}},Ha=function(S,F){this.zoom=S,F?(this.now=F.now,this.fadeDuration=F.fadeDuration,this.zoomHistory=F.zoomHistory,this.transition=F.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new sa,this.transition={})};Ha.prototype.isSupportedScript=function(S){return function(F,K){for(var ce=0,ye=F;ce<ye.length;ce+=1)if(!Va(ye[ce].charCodeAt(0),K))return!1;return!0}(S,eo.isLoaded())},Ha.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Ha.prototype.getCrossfadeParameters=function(){var S=this.zoom,F=S-Math.floor(S),K=this.crossFadingFactor();return S>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:F+(1-F)*K}:{fromScale:.5,toScale:1,t:1-(1-K)*F}};var Wo=function(S,F){this.property=S,this.value=F,this.expression=function(K,ce){if(We(K))return new In(K,ce);if(rn(K)){var ye=Ln(K,ce);if("error"===ye.result)throw new Error(ye.value.map(function(ze){return ze.key+": "+ze.message}).join(", "));return ye.value}var ke=K;return"string"==typeof K&&"color"===ce.type&&(ke=sn.parse(K)),{kind:"constant",evaluate:function(){return ke}}}(void 0===F?S.specification.default:F,S.specification)};Wo.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Wo.prototype.possiblyEvaluate=function(S,F,K){return this.property.possiblyEvaluate(this,S,F,K)};var vl=function(S){this.property=S,this.value=new Wo(S,void 0)};vl.prototype.transitioned=function(S,F){return new jl(this.property,this.value,F,l({},S.transition,this.transition),S.now)},vl.prototype.untransitioned=function(){return new jl(this.property,this.value,null,{},0)};var fs=function(S){this._properties=S,this._values=Object.create(S.defaultTransitionablePropertyValues)};fs.prototype.getValue=function(S){return E(this._values[S].value.value)},fs.prototype.setValue=function(S,F){this._values.hasOwnProperty(S)||(this._values[S]=new vl(this._values[S].property)),this._values[S].value=new Wo(this._values[S].property,null===F?void 0:E(F))},fs.prototype.getTransition=function(S){return E(this._values[S].transition)},fs.prototype.setTransition=function(S,F){this._values.hasOwnProperty(S)||(this._values[S]=new vl(this._values[S].property)),this._values[S].transition=E(F)||void 0},fs.prototype.serialize=function(){for(var S={},F=0,K=Object.keys(this._values);F<K.length;F+=1){var ce=K[F],ye=this.getValue(ce);void 0!==ye&&(S[ce]=ye);var ke=this.getTransition(ce);void 0!==ke&&(S[ce+"-transition"]=ke)}return S},fs.prototype.transitioned=function(S,F){for(var K=new ko(this._properties),ce=0,ye=Object.keys(this._values);ce<ye.length;ce+=1){var ke=ye[ce];K._values[ke]=this._values[ke].transitioned(S,F._values[ke])}return K},fs.prototype.untransitioned=function(){for(var S=new ko(this._properties),F=0,K=Object.keys(this._values);F<K.length;F+=1){var ce=K[F];S._values[ce]=this._values[ce].untransitioned()}return S};var jl=function(S,F,K,ce,ye){this.property=S,this.value=F,this.begin=ye+ce.delay||0,this.end=this.begin+ce.duration||0,S.specification.transition&&(ce.delay||ce.duration)&&(this.prior=K)};jl.prototype.possiblyEvaluate=function(S,F,K){var ce=S.now||0,ye=this.value.possiblyEvaluate(S,F,K),ke=this.prior;if(ke){if(ce>this.end)return this.prior=null,ye;if(this.value.isDataDriven())return this.prior=null,ye;if(ce<this.begin)return ke.possiblyEvaluate(S,F,K);var ze=(ce-this.begin)/(this.end-this.begin);return this.property.interpolate(ke.possiblyEvaluate(S,F,K),ye,function(Ze){if(Ze<=0)return 0;if(Ze>=1)return 1;var ot=Ze*Ze,mt=ot*Ze;return 4*(Ze<.5?mt:3*(Ze-ot)+mt-.75)}(ze))}return ye};var ko=function(S){this._properties=S,this._values=Object.create(S.defaultTransitioningPropertyValues)};ko.prototype.possiblyEvaluate=function(S,F,K){for(var ce=new cl(this._properties),ye=0,ke=Object.keys(this._values);ye<ke.length;ye+=1){var ze=ke[ye];ce._values[ze]=this._values[ze].possiblyEvaluate(S,F,K)}return ce},ko.prototype.hasTransition=function(){for(var S=0,F=Object.keys(this._values);S<F.length;S+=1)if(this._values[F[S]].prior)return!0;return!1};var Qi=function(S){this._properties=S,this._values=Object.create(S.defaultPropertyValues)};Qi.prototype.getValue=function(S){return E(this._values[S].value)},Qi.prototype.setValue=function(S,F){this._values[S]=new Wo(this._values[S].property,null===F?void 0:E(F))},Qi.prototype.serialize=function(){for(var S={},F=0,K=Object.keys(this._values);F<K.length;F+=1){var ce=K[F],ye=this.getValue(ce);void 0!==ye&&(S[ce]=ye)}return S},Qi.prototype.possiblyEvaluate=function(S,F,K){for(var ce=new cl(this._properties),ye=0,ke=Object.keys(this._values);ye<ke.length;ye+=1){var ze=ke[ye];ce._values[ze]=this._values[ze].possiblyEvaluate(S,F,K)}return ce};var Go=function(S,F,K){this.property=S,this.value=F,this.parameters=K};Go.prototype.isConstant=function(){return"constant"===this.value.kind},Go.prototype.constantOr=function(S){return"constant"===this.value.kind?this.value.value:S},Go.prototype.evaluate=function(S,F,K,ce){return this.property.evaluate(this.value,this.parameters,S,F,K,ce)};var cl=function(S){this._properties=S,this._values=Object.create(S.defaultPossiblyEvaluatedValues)};cl.prototype.get=function(S){return this._values[S]};var Ci=function(S){this.specification=S};Ci.prototype.possiblyEvaluate=function(S,F){return S.expression.evaluate(F)},Ci.prototype.interpolate=function(S,F,K){var ce=Yr[this.specification.type];return ce?ce(S,F,K):S};var Vi=function(S,F){this.specification=S,this.overrides=F};Vi.prototype.possiblyEvaluate=function(S,F,K,ce){return new Go(this,"constant"===S.expression.kind||"camera"===S.expression.kind?{kind:"constant",value:S.expression.evaluate(F,null,{},K,ce)}:S.expression,F)},Vi.prototype.interpolate=function(S,F,K){if("constant"!==S.value.kind||"constant"!==F.value.kind)return S;if(void 0===S.value.value||void 0===F.value.value)return new Go(this,{kind:"constant",value:void 0},S.parameters);var ce=Yr[this.specification.type];return ce?new Go(this,{kind:"constant",value:ce(S.value.value,F.value.value,K)},S.parameters):S},Vi.prototype.evaluate=function(S,F,K,ce,ye,ke){return"constant"===S.kind?S.value:S.evaluate(F,K,ce,ye,ke)};var Ul=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.possiblyEvaluate=function(K,ce,ye,ke){if(void 0===K.value)return new Go(this,{kind:"constant",value:void 0},ce);if("constant"===K.expression.kind){var ze=K.expression.evaluate(ce,null,{},ye,ke),Ze="resolvedImage"===K.property.specification.type&&"string"!=typeof ze?ze.name:ze,ot=this._calculate(Ze,Ze,Ze,ce);return new Go(this,{kind:"constant",value:ot},ce)}if("camera"===K.expression.kind){var mt=this._calculate(K.expression.evaluate({zoom:ce.zoom-1}),K.expression.evaluate({zoom:ce.zoom}),K.expression.evaluate({zoom:ce.zoom+1}),ce);return new Go(this,{kind:"constant",value:mt},ce)}return new Go(this,K.expression,ce)},F.prototype.evaluate=function(K,ce,ye,ke,ze,Ze){if("source"===K.kind){var ot=K.evaluate(ce,ye,ke,ze,Ze);return this._calculate(ot,ot,ot,ce)}return"composite"===K.kind?this._calculate(K.evaluate({zoom:Math.floor(ce.zoom)-1},ye,ke),K.evaluate({zoom:Math.floor(ce.zoom)},ye,ke),K.evaluate({zoom:Math.floor(ce.zoom)+1},ye,ke),ce):K.value},F.prototype._calculate=function(K,ce,ye,ke){return ke.zoom>ke.zoomHistory.lastIntegerZoom?{from:K,to:ce}:{from:ye,to:ce}},F.prototype.interpolate=function(K){return K},F}(Vi),tu=function(S){this.specification=S};tu.prototype.possiblyEvaluate=function(S,F,K,ce){if(void 0!==S.value){if("constant"===S.expression.kind){var ye=S.expression.evaluate(F,null,{},K,ce);return this._calculate(ye,ye,ye,F)}return this._calculate(S.expression.evaluate(new Ha(Math.floor(F.zoom-1),F)),S.expression.evaluate(new Ha(Math.floor(F.zoom),F)),S.expression.evaluate(new Ha(Math.floor(F.zoom+1),F)),F)}},tu.prototype._calculate=function(S,F,K,ce){return ce.zoom>ce.zoomHistory.lastIntegerZoom?{from:S,to:F}:{from:K,to:F}},tu.prototype.interpolate=function(S){return S};var fl=function(S){this.specification=S};fl.prototype.possiblyEvaluate=function(S,F,K,ce){return!!S.expression.evaluate(F,null,{},K,ce)},fl.prototype.interpolate=function(){return!1};var Zr=function(S){for(var F in this.properties=S,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],S){var K=S[F];K.specification.overridable&&this.overridableProperties.push(F);var ce=this.defaultPropertyValues[F]=new Wo(K,void 0),ye=this.defaultTransitionablePropertyValues[F]=new vl(K);this.defaultTransitioningPropertyValues[F]=ye.untransitioned(),this.defaultPossiblyEvaluatedValues[F]=ce.possiblyEvaluate({})}};lr("DataDrivenProperty",Vi),lr("DataConstantProperty",Ci),lr("CrossFadedDataDrivenProperty",Ul),lr("CrossFadedProperty",tu),lr("ColorRampProperty",fl);var la=function(S){function F(K,ce){if(S.call(this),this.id=K.id,this.type=K.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==K.type&&(this.metadata=(K=K).metadata,this.minzoom=K.minzoom,this.maxzoom=K.maxzoom,"background"!==K.type&&(this.source=K.source,this.sourceLayer=K["source-layer"],this.filter=K.filter),ce.layout&&(this._unevaluatedLayout=new Qi(ce.layout)),ce.paint)){for(var ye in this._transitionablePaint=new fs(ce.paint),K.paint)this.setPaintProperty(ye,K.paint[ye],{validate:!1});for(var ke in K.layout)this.setLayoutProperty(ke,K.layout[ke],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new cl(ce.paint)}}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},F.prototype.getLayoutProperty=function(K){return"visibility"===K?this.visibility:this._unevaluatedLayout.getValue(K)},F.prototype.setLayoutProperty=function(K,ce,ye){void 0===ye&&(ye={}),null!=ce&&this._validate(Sr,"layers."+this.id+".layout."+K,K,ce,ye)||("visibility"!==K?this._unevaluatedLayout.setValue(K,ce):this.visibility=ce)},F.prototype.getPaintProperty=function(K){return k(K,"-transition")?this._transitionablePaint.getTransition(K.slice(0,-"-transition".length)):this._transitionablePaint.getValue(K)},F.prototype.setPaintProperty=function(K,ce,ye){if(void 0===ye&&(ye={}),null!=ce&&this._validate(_r,"layers."+this.id+".paint."+K,K,ce,ye))return!1;if(k(K,"-transition"))return this._transitionablePaint.setTransition(K.slice(0,-"-transition".length),ce||void 0),!1;var ze=this._transitionablePaint._values[K],Ze="cross-faded-data-driven"===ze.property.specification["property-type"],ot=ze.value.isDataDriven(),mt=ze.value;this._transitionablePaint.setValue(K,ce),this._handleSpecialPaintPropertyUpdate(K);var Tt=this._transitionablePaint._values[K].value;return Tt.isDataDriven()||ot||Ze||this._handleOverridablePaintPropertyUpdate(K,mt,Tt)},F.prototype._handleSpecialPaintPropertyUpdate=function(K){},F.prototype._handleOverridablePaintPropertyUpdate=function(K,ce,ye){return!1},F.prototype.isHidden=function(K){return!!(this.minzoom&&K<this.minzoom)||!!(this.maxzoom&&K>=this.maxzoom)||"none"===this.visibility},F.prototype.updateTransitions=function(K){this._transitioningPaint=this._transitionablePaint.transitioned(K,this._transitioningPaint)},F.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},F.prototype.recalculate=function(K,ce){K.getCrossfadeParameters&&(this._crossfadeParameters=K.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(K,void 0,ce)),this.paint=this._transitioningPaint.possiblyEvaluate(K,void 0,ce)},F.prototype.serialize=function(){var K={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(K.layout=K.layout||{},K.layout.visibility=this.visibility),A(K,function(ce,ye){return!(void 0===ce||"layout"===ye&&!Object.keys(ce).length||"paint"===ye&&!Object.keys(ce).length)})},F.prototype._validate=function(K,ce,ye,ke,ze){return void 0===ze&&(ze={}),(!ze||!1!==ze.validate)&&Vr(this,K.call(fr,{key:ce,layerType:this.type,objectKey:ye,value:ke,styleSpec:je,style:{glyphs:!0,sprite:!0}}))},F.prototype.is3D=function(){return!1},F.prototype.isTileClipped=function(){return!1},F.prototype.hasOffscreenPass=function(){return!1},F.prototype.resize=function(){},F.prototype.isStateDependent=function(){for(var K in this.paint._values){var ce=this.paint.get(K);if(ce instanceof Go&&Ms(ce.property.specification)&&("source"===ce.value.kind||"composite"===ce.value.kind)&&ce.value.isStateDependent)return!0}return!1},F}(Se),Cu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ao=function(S,F){this._structArray=S,this._pos1=F*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ca=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Da(S,F){void 0===F&&(F=1);var K=0,ce=0;return{members:S.map(function(ye){var ze=Cu[ye.type].BYTES_PER_ELEMENT,Ze=K=hs(K,Math.max(F,ze)),ot=ye.components||1;return ce=Math.max(ce,ze),K+=ze*ot,{name:ye.name,type:ye.type,components:ot,offset:Ze}}),size:hs(K,Math.max(ce,F)),alignment:F}}function hs(S,F){return Math.ceil(S/F)*F}Ca.serialize=function(S,F){return S._trim(),F&&(S.isTransferred=!0,F.push(S.arrayBuffer)),{length:S.length,arrayBuffer:S.arrayBuffer}},Ca.deserialize=function(S){var F=Object.create(this.prototype);return F.arrayBuffer=S.arrayBuffer,F.length=S.length,F.capacity=S.arrayBuffer.byteLength/F.bytesPerElement,F._refreshViews(),F},Ca.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ca.prototype.clear=function(){this.length=0},Ca.prototype.resize=function(S){this.reserve(S),this.length=S},Ca.prototype.reserve=function(S){if(S>this.capacity){this.capacity=Math.max(S,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var F=this.uint8;this._refreshViews(),F&&this.uint8.set(F)}},Ca.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Js=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce){var ye=this.length;return this.resize(ye+1),this.emplace(ye,K,ce)},F.prototype.emplace=function(K,ce,ye){var ke=2*K;return this.int16[ke+0]=ce,this.int16[ke+1]=ye,K},F}(Ca);Js.prototype.bytesPerElement=4,lr("StructArrayLayout2i4",Js);var xo=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce,ye,ke){var ze=this.length;return this.resize(ze+1),this.emplace(ze,K,ce,ye,ke)},F.prototype.emplace=function(K,ce,ye,ke,ze){var Ze=4*K;return this.int16[Ze+0]=ce,this.int16[Ze+1]=ye,this.int16[Ze+2]=ke,this.int16[Ze+3]=ze,K},F}(Ca);xo.prototype.bytesPerElement=8,lr("StructArrayLayout4i8",xo);var Pl=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce,ye,ke,ze,Ze){var ot=this.length;return this.resize(ot+1),this.emplace(ot,K,ce,ye,ke,ze,Ze)},F.prototype.emplace=function(K,ce,ye,ke,ze,Ze,ot){var mt=6*K;return this.int16[mt+0]=ce,this.int16[mt+1]=ye,this.int16[mt+2]=ke,this.int16[mt+3]=ze,this.int16[mt+4]=Ze,this.int16[mt+5]=ot,K},F}(Ca);Pl.prototype.bytesPerElement=12,lr("StructArrayLayout2i4i12",Pl);var Vl=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce,ye,ke,ze,Ze){var ot=this.length;return this.resize(ot+1),this.emplace(ot,K,ce,ye,ke,ze,Ze)},F.prototype.emplace=function(K,ce,ye,ke,ze,Ze,ot){var mt=4*K,Tt=8*K;return this.int16[mt+0]=ce,this.int16[mt+1]=ye,this.uint8[Tt+4]=ke,this.uint8[Tt+5]=ze,this.uint8[Tt+6]=Ze,this.uint8[Tt+7]=ot,K},F}(Ca);Vl.prototype.bytesPerElement=8,lr("StructArrayLayout2i4ub8",Vl);var hl=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt){var an=this.length;return this.resize(an+1),this.emplace(an,K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt)},F.prototype.emplace=function(K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt,an){var $t=9*K,bn=18*K;return this.uint16[$t+0]=ce,this.uint16[$t+1]=ye,this.uint16[$t+2]=ke,this.uint16[$t+3]=ze,this.uint16[$t+4]=Ze,this.uint16[$t+5]=ot,this.uint16[$t+6]=mt,this.uint16[$t+7]=Tt,this.uint8[bn+16]=qt,this.uint8[bn+17]=an,K},F}(Ca);hl.prototype.bytesPerElement=18,lr("StructArrayLayout8ui2ub18",hl);var yl=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt,an,$t){var bn=this.length;return this.resize(bn+1),this.emplace(bn,K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt,an,$t)},F.prototype.emplace=function(K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt,an,$t,bn){var Dn=12*K;return this.int16[Dn+0]=ce,this.int16[Dn+1]=ye,this.int16[Dn+2]=ke,this.int16[Dn+3]=ze,this.uint16[Dn+4]=Ze,this.uint16[Dn+5]=ot,this.uint16[Dn+6]=mt,this.uint16[Dn+7]=Tt,this.int16[Dn+8]=qt,this.int16[Dn+9]=an,this.int16[Dn+10]=$t,this.int16[Dn+11]=bn,K},F}(Ca);yl.prototype.bytesPerElement=24,lr("StructArrayLayout4i4ui4i24",yl);var Do=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce,ye){var ke=this.length;return this.resize(ke+1),this.emplace(ke,K,ce,ye)},F.prototype.emplace=function(K,ce,ye,ke){var ze=3*K;return this.float32[ze+0]=ce,this.float32[ze+1]=ye,this.float32[ze+2]=ke,K},F}(Ca);Do.prototype.bytesPerElement=12,lr("StructArrayLayout3f12",Do);var Qs=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K){var ce=this.length;return this.resize(ce+1),this.emplace(ce,K)},F.prototype.emplace=function(K,ce){return this.uint32[1*K+0]=ce,K},F}(Ca);Qs.prototype.bytesPerElement=4,lr("StructArrayLayout1ul4",Qs);var Du=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce,ye,ke,ze,Ze,ot,mt,Tt){var qt=this.length;return this.resize(qt+1),this.emplace(qt,K,ce,ye,ke,ze,Ze,ot,mt,Tt)},F.prototype.emplace=function(K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt){var an=10*K,$t=5*K;return this.int16[an+0]=ce,this.int16[an+1]=ye,this.int16[an+2]=ke,this.int16[an+3]=ze,this.int16[an+4]=Ze,this.int16[an+5]=ot,this.uint32[$t+3]=mt,this.uint16[an+8]=Tt,this.uint16[an+9]=qt,K},F}(Ca);Du.prototype.bytesPerElement=20,lr("StructArrayLayout6i1ul2ui20",Du);var zs=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce,ye,ke,ze,Ze){var ot=this.length;return this.resize(ot+1),this.emplace(ot,K,ce,ye,ke,ze,Ze)},F.prototype.emplace=function(K,ce,ye,ke,ze,Ze,ot){var mt=6*K;return this.int16[mt+0]=ce,this.int16[mt+1]=ye,this.int16[mt+2]=ke,this.int16[mt+3]=ze,this.int16[mt+4]=Ze,this.int16[mt+5]=ot,K},F}(Ca);zs.prototype.bytesPerElement=12,lr("StructArrayLayout2i2i2i12",zs);var el=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce,ye,ke,ze){var Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,K,ce,ye,ke,ze)},F.prototype.emplace=function(K,ce,ye,ke,ze,Ze){var ot=4*K,mt=8*K;return this.float32[ot+0]=ce,this.float32[ot+1]=ye,this.float32[ot+2]=ke,this.int16[mt+6]=ze,this.int16[mt+7]=Ze,K},F}(Ca);el.prototype.bytesPerElement=16,lr("StructArrayLayout2f1f2i16",el);var Hl=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce,ye,ke){var ze=this.length;return this.resize(ze+1),this.emplace(ze,K,ce,ye,ke)},F.prototype.emplace=function(K,ce,ye,ke,ze){var Ze=12*K,ot=3*K;return this.uint8[Ze+0]=ce,this.uint8[Ze+1]=ye,this.float32[ot+1]=ke,this.float32[ot+2]=ze,K},F}(Ca);Hl.prototype.bytesPerElement=12,lr("StructArrayLayout2ub2f12",Hl);var Qo=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce,ye){var ke=this.length;return this.resize(ke+1),this.emplace(ke,K,ce,ye)},F.prototype.emplace=function(K,ce,ye,ke){var ze=3*K;return this.uint16[ze+0]=ce,this.uint16[ze+1]=ye,this.uint16[ze+2]=ke,K},F}(Ca);Qo.prototype.bytesPerElement=6,lr("StructArrayLayout3ui6",Qo);var Ju=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt,an,$t,bn,Dn,Vn,Bn,tr){var nr=this.length;return this.resize(nr+1),this.emplace(nr,K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt,an,$t,bn,Dn,Vn,Bn,tr)},F.prototype.emplace=function(K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt,an,$t,bn,Dn,Vn,Bn,tr,nr){var ur=24*K,Tr=12*K,Fr=48*K;return this.int16[ur+0]=ce,this.int16[ur+1]=ye,this.uint16[ur+2]=ke,this.uint16[ur+3]=ze,this.uint32[Tr+2]=Ze,this.uint32[Tr+3]=ot,this.uint32[Tr+4]=mt,this.uint16[ur+10]=Tt,this.uint16[ur+11]=qt,this.uint16[ur+12]=an,this.float32[Tr+7]=$t,this.float32[Tr+8]=bn,this.uint8[Fr+36]=Dn,this.uint8[Fr+37]=Vn,this.uint8[Fr+38]=Bn,this.uint32[Tr+10]=tr,this.int16[ur+22]=nr,K},F}(Ca);Ju.prototype.bytesPerElement=48,lr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ju);var Qu=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt,an,$t,bn,Dn,Vn,Bn,tr,nr,ur,Tr,Fr,ai,ti,di,ki,Si,vi,Ii){var Di=this.length;return this.resize(Di+1),this.emplace(Di,K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt,an,$t,bn,Dn,Vn,Bn,tr,nr,ur,Tr,Fr,ai,ti,di,ki,Si,vi,Ii)},F.prototype.emplace=function(K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt,an,$t,bn,Dn,Vn,Bn,tr,nr,ur,Tr,Fr,ai,ti,di,ki,Si,vi,Ii,Di){var Ei=34*K,La=17*K;return this.int16[Ei+0]=ce,this.int16[Ei+1]=ye,this.int16[Ei+2]=ke,this.int16[Ei+3]=ze,this.int16[Ei+4]=Ze,this.int16[Ei+5]=ot,this.int16[Ei+6]=mt,this.int16[Ei+7]=Tt,this.uint16[Ei+8]=qt,this.uint16[Ei+9]=an,this.uint16[Ei+10]=$t,this.uint16[Ei+11]=bn,this.uint16[Ei+12]=Dn,this.uint16[Ei+13]=Vn,this.uint16[Ei+14]=Bn,this.uint16[Ei+15]=tr,this.uint16[Ei+16]=nr,this.uint16[Ei+17]=ur,this.uint16[Ei+18]=Tr,this.uint16[Ei+19]=Fr,this.uint16[Ei+20]=ai,this.uint16[Ei+21]=ti,this.uint16[Ei+22]=di,this.uint32[La+12]=ki,this.float32[La+13]=Si,this.float32[La+14]=vi,this.float32[La+15]=Ii,this.float32[La+16]=Di,K},F}(Ca);Qu.prototype.bytesPerElement=68,lr("StructArrayLayout8i15ui1ul4f68",Qu);var pe=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K){var ce=this.length;return this.resize(ce+1),this.emplace(ce,K)},F.prototype.emplace=function(K,ce){return this.float32[1*K+0]=ce,K},F}(Ca);pe.prototype.bytesPerElement=4,lr("StructArrayLayout1f4",pe);var P=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce,ye){var ke=this.length;return this.resize(ke+1),this.emplace(ke,K,ce,ye)},F.prototype.emplace=function(K,ce,ye,ke){var ze=3*K;return this.int16[ze+0]=ce,this.int16[ze+1]=ye,this.int16[ze+2]=ke,K},F}(Ca);P.prototype.bytesPerElement=6,lr("StructArrayLayout3i6",P);var N=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce,ye){var ke=this.length;return this.resize(ke+1),this.emplace(ke,K,ce,ye)},F.prototype.emplace=function(K,ce,ye,ke){var Ze=4*K;return this.uint32[2*K+0]=ce,this.uint16[Ze+2]=ye,this.uint16[Ze+3]=ke,K},F}(Ca);N.prototype.bytesPerElement=8,lr("StructArrayLayout1ul2ui8",N);var V=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce){var ye=this.length;return this.resize(ye+1),this.emplace(ye,K,ce)},F.prototype.emplace=function(K,ce,ye){var ke=2*K;return this.uint16[ke+0]=ce,this.uint16[ke+1]=ye,K},F}(Ca);V.prototype.bytesPerElement=4,lr("StructArrayLayout2ui4",V);var Z=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K){var ce=this.length;return this.resize(ce+1),this.emplace(ce,K)},F.prototype.emplace=function(K,ce){return this.uint16[1*K+0]=ce,K},F}(Ca);Z.prototype.bytesPerElement=2,lr("StructArrayLayout1ui2",Z);var fe=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce){var ye=this.length;return this.resize(ye+1),this.emplace(ye,K,ce)},F.prototype.emplace=function(K,ce,ye){var ke=2*K;return this.float32[ke+0]=ce,this.float32[ke+1]=ye,K},F}(Ca);fe.prototype.bytesPerElement=8,lr("StructArrayLayout2f8",fe);var me=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function(K,ce,ye,ke){var ze=this.length;return this.resize(ze+1),this.emplace(ze,K,ce,ye,ke)},F.prototype.emplace=function(K,ce,ye,ke,ze){var Ze=4*K;return this.float32[Ze+0]=ce,this.float32[Ze+1]=ye,this.float32[Ze+2]=ke,this.float32[Ze+3]=ze,K},F}(Ca);me.prototype.bytesPerElement=16,lr("StructArrayLayout4f16",me);var we=function(S){function F(){S.apply(this,arguments)}S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F;var K={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return K.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},K.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},K.x1.get=function(){return this._structArray.int16[this._pos2+2]},K.y1.get=function(){return this._structArray.int16[this._pos2+3]},K.x2.get=function(){return this._structArray.int16[this._pos2+4]},K.y2.get=function(){return this._structArray.int16[this._pos2+5]},K.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},K.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},K.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},K.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(F.prototype,K),F}(Ao);we.prototype.size=20;var Ae=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.get=function(K){return new we(this,K)},F}(Du);lr("CollisionBoxArray",Ae);var Re=function(S){function F(){S.apply(this,arguments)}S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F;var K={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return K.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},K.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},K.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},K.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},K.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},K.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},K.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},K.segment.get=function(){return this._structArray.uint16[this._pos2+10]},K.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},K.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},K.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},K.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},K.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},K.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},K.placedOrientation.set=function(ce){this._structArray.uint8[this._pos1+37]=ce},K.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},K.hidden.set=function(ce){this._structArray.uint8[this._pos1+38]=ce},K.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},K.crossTileID.set=function(ce){this._structArray.uint32[this._pos4+10]=ce},K.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(F.prototype,K),F}(Ao);Re.prototype.size=48;var Xe=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.get=function(K){return new Re(this,K)},F}(Ju);lr("PlacedSymbolArray",Xe);var nt=function(S){function F(){S.apply(this,arguments)}S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F;var K={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return K.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},K.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},K.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},K.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},K.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},K.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},K.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},K.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},K.key.get=function(){return this._structArray.uint16[this._pos2+8]},K.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},K.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},K.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},K.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},K.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},K.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},K.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},K.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},K.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},K.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},K.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},K.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},K.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},K.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},K.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},K.crossTileID.set=function(ce){this._structArray.uint32[this._pos4+12]=ce},K.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},K.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},K.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},K.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(F.prototype,K),F}(Ao);nt.prototype.size=68;var ht=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.get=function(K){return new nt(this,K)},F}(Qu);lr("SymbolInstanceArray",ht);var Dt=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.getoffsetX=function(K){return this.float32[1*K+0]},F}(pe);lr("GlyphOffsetArray",Dt);var Ot=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.getx=function(K){return this.int16[3*K+0]},F.prototype.gety=function(K){return this.int16[3*K+1]},F.prototype.gettileUnitDistanceFromAnchor=function(K){return this.int16[3*K+2]},F}(P);lr("SymbolLineVertexArray",Ot);var It=function(S){function F(){S.apply(this,arguments)}S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F;var K={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return K.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},K.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},K.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(F.prototype,K),F}(Ao);It.prototype.size=8;var Lt=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.get=function(K){return new It(this,K)},F}(N);lr("FeatureIndexArray",Lt);var St=Da([{name:"a_pos",components:2,type:"Int16"}],4).members,Gt=function(S){void 0===S&&(S=[]),this.segments=S};function Vt(S,F){return 256*(S=c(Math.floor(S),0,255))+c(Math.floor(F),0,255)}Gt.prototype.prepareSegment=function(S,F,K,ce){var ye=this.segments[this.segments.length-1];return S>Gt.MAX_VERTEX_ARRAY_LENGTH&&C("Max vertices per segment is "+Gt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+S),(!ye||ye.vertexLength+S>Gt.MAX_VERTEX_ARRAY_LENGTH||ye.sortKey!==ce)&&(ye={vertexOffset:F.length,primitiveOffset:K.length,vertexLength:0,primitiveLength:0},void 0!==ce&&(ye.sortKey=ce),this.segments.push(ye)),ye},Gt.prototype.get=function(){return this.segments},Gt.prototype.destroy=function(){for(var S=0,F=this.segments;S<F.length;S+=1){var K=F[S];for(var ce in K.vaos)K.vaos[ce].destroy()}},Gt.simpleSegment=function(S,F,K,ce){return new Gt([{vertexOffset:S,primitiveOffset:F,vertexLength:K,primitiveLength:ce,vaos:{},sortKey:0}])},Gt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,lr("SegmentVector",Gt);var Yt=Da([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),xn=r(function(S){S.exports=function(F,K){var ce,ye,ke,ze,Ze,ot,mt,Tt;for(ye=F.length-(ce=3&F.length),ke=K,Ze=3432918353,ot=461845907,Tt=0;Tt<ye;)mt=255&F.charCodeAt(Tt)|(255&F.charCodeAt(++Tt))<<8|(255&F.charCodeAt(++Tt))<<16|(255&F.charCodeAt(++Tt))<<24,++Tt,ke=27492+(65535&(ze=5*(65535&(ke=(ke^=mt=(65535&(mt=(mt=(65535&mt)*Ze+(((mt>>>16)*Ze&65535)<<16)&4294967295)<<15|mt>>>17))*ot+(((mt>>>16)*ot&65535)<<16)&4294967295)<<13|ke>>>19))+((5*(ke>>>16)&65535)<<16)&4294967295))+((58964+(ze>>>16)&65535)<<16);switch(mt=0,ce){case 3:mt^=(255&F.charCodeAt(Tt+2))<<16;case 2:mt^=(255&F.charCodeAt(Tt+1))<<8;case 1:ke^=mt=(65535&(mt=(mt=(65535&(mt^=255&F.charCodeAt(Tt)))*Ze+(((mt>>>16)*Ze&65535)<<16)&4294967295)<<15|mt>>>17))*ot+(((mt>>>16)*ot&65535)<<16)&4294967295}return ke^=F.length,ke=2246822507*(65535&(ke^=ke>>>16))+((2246822507*(ke>>>16)&65535)<<16)&4294967295,ke=3266489909*(65535&(ke^=ke>>>13))+((3266489909*(ke>>>16)&65535)<<16)&4294967295,(ke^=ke>>>16)>>>0}}),En=r(function(S){S.exports=function(F,K){for(var ce,ye=F.length,ke=K^ye,ze=0;ye>=4;)ce=1540483477*(65535&(ce=255&F.charCodeAt(ze)|(255&F.charCodeAt(++ze))<<8|(255&F.charCodeAt(++ze))<<16|(255&F.charCodeAt(++ze))<<24))+((1540483477*(ce>>>16)&65535)<<16),ke=1540483477*(65535&ke)+((1540483477*(ke>>>16)&65535)<<16)^(ce=1540483477*(65535&(ce^=ce>>>24))+((1540483477*(ce>>>16)&65535)<<16)),ye-=4,++ze;switch(ye){case 3:ke^=(255&F.charCodeAt(ze+2))<<16;case 2:ke^=(255&F.charCodeAt(ze+1))<<8;case 1:ke=1540483477*(65535&(ke^=255&F.charCodeAt(ze)))+((1540483477*(ke>>>16)&65535)<<16)}return ke=1540483477*(65535&(ke^=ke>>>13))+((1540483477*(ke>>>16)&65535)<<16),(ke^=ke>>>15)>>>0}}),jn=xn,hr=En;jn.murmur3=xn,jn.murmur2=hr;var dr=function(){this.ids=[],this.positions=[],this.indexed=!1};dr.prototype.add=function(S,F,K,ce){this.ids.push(wr(S)),this.positions.push(F,K,ce)},dr.prototype.getPositions=function(S){for(var F=wr(S),K=0,ce=this.ids.length-1;K<ce;){var ye=K+ce>>1;this.ids[ye]>=F?ce=ye:K=ye+1}for(var ke=[];this.ids[K]===F;)ke.push({index:this.positions[3*K],start:this.positions[3*K+1],end:this.positions[3*K+2]}),K++;return ke},dr.serialize=function(S,F){var K=new Float64Array(S.ids),ce=new Uint32Array(S.positions);return function ye(ke,ze,Ze,ot){for(;Ze<ot;){for(var mt=ke[Ze+ot>>1],Tt=Ze-1,qt=ot+1;;){do{Tt++}while(ke[Tt]<mt);do{qt--}while(ke[qt]>mt);if(Tt>=qt)break;Jr(ke,Tt,qt),Jr(ze,3*Tt,3*qt),Jr(ze,3*Tt+1,3*qt+1),Jr(ze,3*Tt+2,3*qt+2)}qt-Ze<ot-qt?(ye(ke,ze,Ze,qt),Ze=qt+1):(ye(ke,ze,qt+1,ot),ot=qt)}}(K,ce,0,K.length-1),F&&F.push(K.buffer,ce.buffer),{ids:K,positions:ce}},dr.deserialize=function(S){var F=new dr;return F.ids=S.ids,F.positions=S.positions,F.indexed=!0,F};var Er=Math.pow(2,53)-1;function wr(S){var F=+S;return!isNaN(F)&&F<=Er?F:jn(String(S))}function Jr(S,F,K){var ce=S[F];S[F]=S[K],S[K]=ce}lr("FeaturePositionMap",dr);var pi=function(S,F){this.gl=S.gl,this.location=F},Li=function(S){function F(K,ce){S.call(this,K,ce),this.current=0}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.set=function(K){this.current!==K&&(this.current=K,this.gl.uniform1i(this.location,K))},F}(pi),ir=function(S){function F(K,ce){S.call(this,K,ce),this.current=0}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.set=function(K){this.current!==K&&(this.current=K,this.gl.uniform1f(this.location,K))},F}(pi),jr=function(S){function F(K,ce){S.call(this,K,ce),this.current=[0,0]}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.set=function(K){K[0]===this.current[0]&&K[1]===this.current[1]||(this.current=K,this.gl.uniform2f(this.location,K[0],K[1]))},F}(pi),mi=function(S){function F(K,ce){S.call(this,K,ce),this.current=[0,0,0]}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.set=function(K){K[0]===this.current[0]&&K[1]===this.current[1]&&K[2]===this.current[2]||(this.current=K,this.gl.uniform3f(this.location,K[0],K[1],K[2]))},F}(pi),fi=function(S){function F(K,ce){S.call(this,K,ce),this.current=[0,0,0,0]}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.set=function(K){K[0]===this.current[0]&&K[1]===this.current[1]&&K[2]===this.current[2]&&K[3]===this.current[3]||(this.current=K,this.gl.uniform4f(this.location,K[0],K[1],K[2],K[3]))},F}(pi),Mi=function(S){function F(K,ce){S.call(this,K,ce),this.current=sn.transparent}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.set=function(K){K.r===this.current.r&&K.g===this.current.g&&K.b===this.current.b&&K.a===this.current.a||(this.current=K,this.gl.uniform4f(this.location,K.r,K.g,K.b,K.a))},F}(pi),Ri=new Float32Array(16),ta=function(S){function F(K,ce){S.call(this,K,ce),this.current=Ri}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.set=function(K){if(K[12]!==this.current[12]||K[0]!==this.current[0])return this.current=K,void this.gl.uniformMatrix4fv(this.location,!1,K);for(var ce=1;ce<16;ce++)if(K[ce]!==this.current[ce]){this.current=K,this.gl.uniformMatrix4fv(this.location,!1,K);break}},F}(pi);function xi(S){return[Vt(255*S.r,255*S.g),Vt(255*S.b,255*S.a)]}var Hi=function(S,F,K){this.value=S,this.uniformNames=F.map(function(ce){return"u_"+ce}),this.type=K};Hi.prototype.setUniform=function(S,F,K){S.set(K.constantOr(this.value))},Hi.prototype.getBinding=function(S,F,K){return"color"===this.type?new Mi(S,F):new ir(S,F)};var Bi=function(S,F){this.uniformNames=F.map(function(K){return"u_"+K}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Bi.prototype.setConstantPatternPositions=function(S,F){this.pixelRatioFrom=F.pixelRatio,this.pixelRatioTo=S.pixelRatio,this.patternFrom=F.tlbr,this.patternTo=S.tlbr},Bi.prototype.setUniform=function(S,F,K,ce){var ye="u_pattern_to"===ce?this.patternTo:"u_pattern_from"===ce?this.patternFrom:"u_pixel_ratio_to"===ce?this.pixelRatioTo:"u_pixel_ratio_from"===ce?this.pixelRatioFrom:null;ye&&S.set(ye)},Bi.prototype.getBinding=function(S,F,K){return"u_pattern"===K.substr(0,9)?new fi(S,F):new ir(S,F)};var ra=function(S,F,K,ce){this.expression=S,this.type=K,this.maxValue=0,this.paintVertexAttributes=F.map(function(ye){return{name:"a_"+ye,type:"Float32",components:"color"===K?2:1,offset:0}}),this.paintVertexArray=new ce};ra.prototype.populatePaintArray=function(S,F,K,ce,ye){var ke=this.paintVertexArray.length,ze=this.expression.evaluate(new Ha(0),F,{},ce,[],ye);this.paintVertexArray.resize(S),this._setPaintValue(ke,S,ze)},ra.prototype.updatePaintArray=function(S,F,K,ce){var ye=this.expression.evaluate({zoom:0},K,ce);this._setPaintValue(S,F,ye)},ra.prototype._setPaintValue=function(S,F,K){if("color"===this.type)for(var ce=xi(K),ye=S;ye<F;ye++)this.paintVertexArray.emplace(ye,ce[0],ce[1]);else{for(var ke=S;ke<F;ke++)this.paintVertexArray.emplace(ke,K);this.maxValue=Math.max(this.maxValue,Math.abs(K))}},ra.prototype.upload=function(S){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=S.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ra.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var qi=function(S,F,K,ce,ye,ke){this.expression=S,this.uniformNames=F.map(function(ze){return"u_"+ze+"_t"}),this.type=K,this.useIntegerZoom=ce,this.zoom=ye,this.maxValue=0,this.paintVertexAttributes=F.map(function(ze){return{name:"a_"+ze,type:"Float32",components:"color"===K?4:2,offset:0}}),this.paintVertexArray=new ke};qi.prototype.populatePaintArray=function(S,F,K,ce,ye){var ke=this.expression.evaluate(new Ha(this.zoom),F,{},ce,[],ye),ze=this.expression.evaluate(new Ha(this.zoom+1),F,{},ce,[],ye),Ze=this.paintVertexArray.length;this.paintVertexArray.resize(S),this._setPaintValue(Ze,S,ke,ze)},qi.prototype.updatePaintArray=function(S,F,K,ce){var ye=this.expression.evaluate({zoom:this.zoom},K,ce),ke=this.expression.evaluate({zoom:this.zoom+1},K,ce);this._setPaintValue(S,F,ye,ke)},qi.prototype._setPaintValue=function(S,F,K,ce){if("color"===this.type)for(var ye=xi(K),ke=xi(ce),ze=S;ze<F;ze++)this.paintVertexArray.emplace(ze,ye[0],ye[1],ke[0],ke[1]);else{for(var Ze=S;Ze<F;Ze++)this.paintVertexArray.emplace(Ze,K,ce);this.maxValue=Math.max(this.maxValue,Math.abs(K),Math.abs(ce))}},qi.prototype.upload=function(S){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=S.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},qi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},qi.prototype.setUniform=function(S,F){var K=this.useIntegerZoom?Math.floor(F.zoom):F.zoom,ce=c(this.expression.interpolationFactor(K,this.zoom,this.zoom+1),0,1);S.set(ce)},qi.prototype.getBinding=function(S,F,K){return new ir(S,F)};var aa=function(S,F,K,ce,ye,ke){this.expression=S,this.type=F,this.useIntegerZoom=K,this.zoom=ce,this.layerId=ke,this.zoomInPaintVertexArray=new ye,this.zoomOutPaintVertexArray=new ye};aa.prototype.populatePaintArray=function(S,F,K){var ce=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(S),this.zoomOutPaintVertexArray.resize(S),this._setPaintValues(ce,S,F.patterns&&F.patterns[this.layerId],K)},aa.prototype.updatePaintArray=function(S,F,K,ce,ye){this._setPaintValues(S,F,K.patterns&&K.patterns[this.layerId],ye)},aa.prototype._setPaintValues=function(S,F,K,ce){if(ce&&K){var Ze=ce[K.min],ot=ce[K.mid],mt=ce[K.max];if(Ze&&ot&&mt)for(var Tt=S;Tt<F;Tt++)this.zoomInPaintVertexArray.emplace(Tt,ot.tl[0],ot.tl[1],ot.br[0],ot.br[1],Ze.tl[0],Ze.tl[1],Ze.br[0],Ze.br[1],ot.pixelRatio,Ze.pixelRatio),this.zoomOutPaintVertexArray.emplace(Tt,ot.tl[0],ot.tl[1],ot.br[0],ot.br[1],mt.tl[0],mt.tl[1],mt.br[0],mt.br[1],ot.pixelRatio,mt.pixelRatio)}},aa.prototype.upload=function(S){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=S.createVertexBuffer(this.zoomInPaintVertexArray,Yt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=S.createVertexBuffer(this.zoomOutPaintVertexArray,Yt.members,this.expression.isStateDependent))},aa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ha=function(S,F,K,ce){this.binders={},this.layoutAttributes=ce,this._buffers=[];var ye=[];for(var ke in S.paint._values)if(K(ke)){var ze=S.paint.get(ke);if(ze instanceof Go&&Ms(ze.property.specification)){var Ze=oo(ke,S.type),ot=ze.value,mt=ze.property.specification.type,Tt=ze.property.useIntegerZoom,qt=ze.property.specification["property-type"],an="cross-faded"===qt||"cross-faded-data-driven"===qt;if("constant"===ot.kind)this.binders[ke]=an?new Bi(ot.value,Ze):new Hi(ot.value,Ze,mt),ye.push("/u_"+ke);else if("source"===ot.kind||an){var $t=bo(ke,mt,"source");this.binders[ke]=an?new aa(ot,mt,Tt,F,$t,S.id):new ra(ot,Ze,mt,$t),ye.push("/a_"+ke)}else{var bn=bo(ke,mt,"composite");this.binders[ke]=new qi(ot,Ze,mt,Tt,F,bn),ye.push("/z_"+ke)}}}this.cacheKey=ye.sort().join("")};ha.prototype.getMaxValue=function(S){var F=this.binders[S];return F instanceof ra||F instanceof qi?F.maxValue:0},ha.prototype.populatePaintArrays=function(S,F,K,ce,ye){for(var ke in this.binders){var ze=this.binders[ke];(ze instanceof ra||ze instanceof qi||ze instanceof aa)&&ze.populatePaintArray(S,F,K,ce,ye)}},ha.prototype.setConstantPatternPositions=function(S,F){for(var K in this.binders){var ce=this.binders[K];ce instanceof Bi&&ce.setConstantPatternPositions(S,F)}},ha.prototype.updatePaintArrays=function(S,F,K,ce,ye){var ke=!1;for(var ze in S)for(var Ze=0,ot=F.getPositions(ze);Ze<ot.length;Ze+=1){var mt=ot[Ze],Tt=K.feature(mt.index);for(var qt in this.binders){var an=this.binders[qt];if((an instanceof ra||an instanceof qi||an instanceof aa)&&!0===an.expression.isStateDependent){var $t=ce.paint.get(qt);an.expression=$t.value,an.updatePaintArray(mt.start,mt.end,Tt,S[ze],ye),ke=!0}}}return ke},ha.prototype.defines=function(){var S=[];for(var F in this.binders){var K=this.binders[F];(K instanceof Hi||K instanceof Bi)&&S.push.apply(S,K.uniformNames.map(function(ce){return"#define HAS_UNIFORM_"+ce}))}return S},ha.prototype.getPaintVertexBuffers=function(){return this._buffers},ha.prototype.getUniforms=function(S,F){var K=[];for(var ce in this.binders){var ye=this.binders[ce];if(ye instanceof Hi||ye instanceof Bi||ye instanceof qi)for(var ke=0,ze=ye.uniformNames;ke<ze.length;ke+=1){var Ze=ze[ke];if(F[Ze]){var ot=ye.getBinding(S,F[Ze],Ze);K.push({name:Ze,property:ce,binding:ot})}}}return K},ha.prototype.setUniforms=function(S,F,K,ce){for(var ye=0,ke=F;ye<ke.length;ye+=1){var ze=ke[ye],Ze=ze.name,ot=ze.property;this.binders[ot].setUniform(ze.binding,ce,K.get(ot),Ze)}},ha.prototype.updatePaintBuffers=function(S){for(var F in this._buffers=[],this.binders){var K=this.binders[F];if(S&&K instanceof aa){var ce=2===S.fromScale?K.zoomInPaintVertexBuffer:K.zoomOutPaintVertexBuffer;ce&&this._buffers.push(ce)}else(K instanceof ra||K instanceof qi)&&K.paintVertexBuffer&&this._buffers.push(K.paintVertexBuffer)}},ha.prototype.upload=function(S){for(var F in this.binders){var K=this.binders[F];(K instanceof ra||K instanceof qi||K instanceof aa)&&K.upload(S)}this.updatePaintBuffers()},ha.prototype.destroy=function(){for(var S in this.binders){var F=this.binders[S];(F instanceof ra||F instanceof qi||F instanceof aa)&&F.destroy()}};var ho=function(S,F,K,ce){void 0===ce&&(ce=function(){return!0}),this.programConfigurations={};for(var ye=0,ke=F;ye<ke.length;ye+=1){var ze=ke[ye];this.programConfigurations[ze.id]=new ha(ze,K,ce,S)}this.needsUpload=!1,this._featureMap=new dr,this._bufferOffset=0};function oo(S,F){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[S]||[S.replace(F+"-","").replace(/-/g,"_")]}function bo(S,F,K){var ye={"line-pattern":{source:hl,composite:hl},"fill-pattern":{source:hl,composite:hl},"fill-extrusion-pattern":{source:hl,composite:hl}}[S];return ye&&ye[K]||{color:{source:fe,composite:me},number:{source:pe,composite:fe}}[F][K]}ho.prototype.populatePaintArrays=function(S,F,K,ce,ye,ke){for(var ze in this.programConfigurations)this.programConfigurations[ze].populatePaintArrays(S,F,ce,ye,ke);void 0!==F.id&&this._featureMap.add(F.id,K,this._bufferOffset,S),this._bufferOffset=S,this.needsUpload=!0},ho.prototype.updatePaintArrays=function(S,F,K,ce){for(var ye=0,ke=K;ye<ke.length;ye+=1){var ze=ke[ye];this.needsUpload=this.programConfigurations[ze.id].updatePaintArrays(S,this._featureMap,F,ze,ce)||this.needsUpload}},ho.prototype.get=function(S){return this.programConfigurations[S]},ho.prototype.upload=function(S){if(this.needsUpload){for(var F in this.programConfigurations)this.programConfigurations[F].upload(S);this.needsUpload=!1}},ho.prototype.destroy=function(){for(var S in this.programConfigurations)this.programConfigurations[S].destroy()},lr("ConstantBinder",Hi),lr("CrossFadedConstantBinder",Bi),lr("SourceExpressionBinder",ra),lr("CrossFadedCompositeBinder",aa),lr("CompositeExpressionBinder",qi),lr("ProgramConfiguration",ha,{omit:["_buffers"]}),lr("ProgramConfigurationSet",ho);var Lo=(15,{min:-1*Math.pow(2,14),max:Math.pow(2,14)-1});function po(S){for(var F=8192/S.extent,K=S.loadGeometry(),ce=0;ce<K.length;ce++)for(var ye=K[ce],ke=0;ke<ye.length;ke++){var ze=ye[ke];ze.x=Math.round(ze.x*F),ze.y=Math.round(ze.y*F),(ze.x<Lo.min||ze.x>Lo.max||ze.y<Lo.min||ze.y>Lo.max)&&(C("Geometry exceeds allowed extent, reduce your vector tile buffer size"),ze.x=c(ze.x,Lo.min,Lo.max),ze.y=c(ze.y,Lo.min,Lo.max))}return K}function ds(S,F,K,ce,ye){S.emplaceBack(2*F+(ce+1)/2,2*K+(ye+1)/2)}var Zo=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(F){return F.id}),this.index=S.index,this.hasPattern=!1,this.layoutVertexArray=new Js,this.indexArray=new Qo,this.segments=new Gt,this.programConfigurations=new ho(St,S.layers,S.zoom),this.stateDependentLayerIds=this.layers.filter(function(F){return F.isStateDependent()}).map(function(F){return F.id})};function Ns(S,F){for(var K=0;K<S.length;K++)if(nl(F,S[K]))return!0;for(var ce=0;ce<F.length;ce++)if(nl(S,F[ce]))return!0;return!!ql(S,F)}function tl(S,F,K){return!!nl(S,F)||!!xs(F,S,K)}function Ol(S,F){if(1===S.length)return Lu(F,S[0]);for(var K=0;K<F.length;K++)for(var ce=F[K],ye=0;ye<ce.length;ye++)if(nl(S,ce[ye]))return!0;for(var ke=0;ke<S.length;ke++)if(Lu(F,S[ke]))return!0;for(var ze=0;ze<F.length;ze++)if(ql(S,F[ze]))return!0;return!1}function vu(S,F,K){if(S.length>1){if(ql(S,F))return!0;for(var ce=0;ce<F.length;ce++)if(xs(F[ce],S,K))return!0}for(var ye=0;ye<S.length;ye++)if(xs(S[ye],F,K))return!0;return!1}function ql(S,F){if(0===S.length||0===F.length)return!1;for(var K=0;K<S.length-1;K++)for(var ce=S[K],ye=S[K+1],ke=0;ke<F.length-1;ke++)if(Gl(ce,ye,F[ke],F[ke+1]))return!0;return!1}function Gl(S,F,K,ce){return R(S,K,ce)!==R(F,K,ce)&&R(S,F,K)!==R(S,F,ce)}function xs(S,F,K){var ce=K*K;if(1===F.length)return S.distSqr(F[0])<ce;for(var ye=1;ye<F.length;ye++)if(nu(S,F[ye-1],F[ye])<ce)return!0;return!1}function nu(S,F,K){var ce=F.distSqr(K);if(0===ce)return S.distSqr(F);var ye=((S.x-F.x)*(K.x-F.x)+(S.y-F.y)*(K.y-F.y))/ce;return S.distSqr(ye<0?F:ye>1?K:K.sub(F)._mult(ye)._add(F))}function Lu(S,F){for(var K,ce,ye,ke=!1,ze=0;ze<S.length;ze++)for(var Ze=0,ot=(K=S[ze]).length-1;Ze<K.length;ot=Ze++)(ce=K[Ze]).y>F.y!=(ye=K[ot]).y>F.y&&F.x<(ye.x-ce.x)*(F.y-ce.y)/(ye.y-ce.y)+ce.x&&(ke=!ke);return ke}function nl(S,F){for(var K=!1,ce=0,ye=S.length-1;ce<S.length;ye=ce++){var ke=S[ce],ze=S[ye];ke.y>F.y!=ze.y>F.y&&F.x<(ze.x-ke.x)*(F.y-ke.y)/(ze.y-ke.y)+ke.x&&(K=!K)}return K}function Iu(S,F,K){var ce=K[0],ye=K[2];if(S.x<ce.x&&F.x<ce.x||S.x>ye.x&&F.x>ye.x||S.y<ce.y&&F.y<ce.y||S.y>ye.y&&F.y>ye.y)return!1;var ke=R(S,F,K[0]);return ke!==R(S,F,K[1])||ke!==R(S,F,K[2])||ke!==R(S,F,K[3])}function Eo(S,F,K){var ce=F.paint.get(S).value;return"constant"===ce.kind?ce.value:K.programConfigurations.get(F.id).getMaxValue(S)}function Ds(S){return Math.sqrt(S[0]*S[0]+S[1]*S[1])}function ps(S,F,K,ce,ye){if(!F[0]&&!F[1])return S;var ke=t.convert(F)._mult(ye);"viewport"===K&&ke._rotate(-ce);for(var ze=[],Ze=0;Ze<S.length;Ze++)ze.push(S[Ze].sub(ke));return ze}Zo.prototype.populate=function(S,F,K){var ce=this.layers[0],ye=[],ke=null;"circle"===ce.type&&(ke=ce.layout.get("circle-sort-key"));for(var ze=0,Ze=S;ze<Ze.length;ze+=1){var ot=Ze[ze],mt=ot.feature,Tt=ot.id,qt=ot.index,an=ot.sourceLayerIndex,$t=this.layers[0]._featureFilter.needGeometry,bn={type:mt.type,id:Tt,properties:mt.properties,geometry:$t?po(mt):[]};if(this.layers[0]._featureFilter.filter(new Ha(this.zoom),bn,K)){$t||(bn.geometry=po(mt));var Dn=ke?ke.evaluate(bn,{},K):void 0;ye.push({id:Tt,properties:mt.properties,type:mt.type,sourceLayerIndex:an,index:qt,geometry:bn.geometry,patterns:{},sortKey:Dn})}}ke&&ye.sort(function(di,ki){return di.sortKey-ki.sortKey});for(var Bn=0,tr=ye;Bn<tr.length;Bn+=1){var nr=tr[Bn],Tr=nr.geometry,Fr=nr.index,ai=nr.sourceLayerIndex,ti=S[Fr].feature;this.addFeature(nr,Tr,Fr,K),F.featureIndex.insert(ti,Tr,Fr,ai,this.index)}},Zo.prototype.update=function(S,F,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,F,this.stateDependentLayers,K)},Zo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Zo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Zo.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,St),this.indexBuffer=S.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(S),this.uploaded=!0},Zo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Zo.prototype.addFeature=function(S,F,K,ce){for(var ye=0,ke=F;ye<ke.length;ye+=1)for(var ze=0,Ze=ke[ye];ze<Ze.length;ze+=1){var ot=Ze[ze],mt=ot.x,Tt=ot.y;if(!(mt<0||mt>=8192||Tt<0||Tt>=8192)){var qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,S.sortKey),an=qt.vertexLength;ds(this.layoutVertexArray,mt,Tt,-1,-1),ds(this.layoutVertexArray,mt,Tt,1,-1),ds(this.layoutVertexArray,mt,Tt,1,1),ds(this.layoutVertexArray,mt,Tt,-1,1),this.indexArray.emplaceBack(an,an+1,an+2),this.indexArray.emplaceBack(an,an+3,an+2),qt.vertexLength+=4,qt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,K,{},ce)},lr("CircleBucket",Zo,{omit:["layers"]});var ru=new Zr({"circle-sort-key":new Vi(je.layout_circle["circle-sort-key"])}),yd={paint:new Zr({"circle-radius":new Vi(je.paint_circle["circle-radius"]),"circle-color":new Vi(je.paint_circle["circle-color"]),"circle-blur":new Vi(je.paint_circle["circle-blur"]),"circle-opacity":new Vi(je.paint_circle["circle-opacity"]),"circle-translate":new Ci(je.paint_circle["circle-translate"]),"circle-translate-anchor":new Ci(je.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ci(je.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ci(je.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Vi(je.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Vi(je.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Vi(je.paint_circle["circle-stroke-opacity"])}),layout:ru},Hs="undefined"!=typeof Float32Array?Float32Array:Array;function Sc(S){return S[0]=1,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=1,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S}function Rl(S,F,K){var ce=F[0],ye=F[1],ke=F[2],ze=F[3],Ze=F[4],ot=F[5],mt=F[6],Tt=F[7],qt=F[8],an=F[9],$t=F[10],bn=F[11],Dn=F[12],Vn=F[13],Bn=F[14],tr=F[15],nr=K[0],ur=K[1],Tr=K[2],Fr=K[3];return S[0]=nr*ce+ur*Ze+Tr*qt+Fr*Dn,S[1]=nr*ye+ur*ot+Tr*an+Fr*Vn,S[2]=nr*ke+ur*mt+Tr*$t+Fr*Bn,S[3]=nr*ze+ur*Tt+Tr*bn+Fr*tr,S[4]=(nr=K[4])*ce+(ur=K[5])*Ze+(Tr=K[6])*qt+(Fr=K[7])*Dn,S[5]=nr*ye+ur*ot+Tr*an+Fr*Vn,S[6]=nr*ke+ur*mt+Tr*$t+Fr*Bn,S[7]=nr*ze+ur*Tt+Tr*bn+Fr*tr,S[8]=(nr=K[8])*ce+(ur=K[9])*Ze+(Tr=K[10])*qt+(Fr=K[11])*Dn,S[9]=nr*ye+ur*ot+Tr*an+Fr*Vn,S[10]=nr*ke+ur*mt+Tr*$t+Fr*Bn,S[11]=nr*ze+ur*Tt+Tr*bn+Fr*tr,S[12]=(nr=K[12])*ce+(ur=K[13])*Ze+(Tr=K[14])*qt+(Fr=K[15])*Dn,S[13]=nr*ye+ur*ot+Tr*an+Fr*Vn,S[14]=nr*ke+ur*mt+Tr*$t+Fr*Bn,S[15]=nr*ze+ur*Tt+Tr*bn+Fr*tr,S}Math.hypot||(Math.hypot=function(){for(var S=arguments,F=0,K=arguments.length;K--;)F+=S[K]*S[K];return Math.sqrt(F)});var Fl,F,xd=Rl;function Tl(S,F,K){var ce=F[0],ye=F[1],ke=F[2],ze=F[3];return S[0]=K[0]*ce+K[4]*ye+K[8]*ke+K[12]*ze,S[1]=K[1]*ce+K[5]*ye+K[9]*ke+K[13]*ze,S[2]=K[2]*ce+K[6]*ye+K[10]*ke+K[14]*ze,S[3]=K[3]*ce+K[7]*ye+K[11]*ke+K[15]*ze,S}Fl=new Hs(3),Hs!=Float32Array&&(Fl[0]=0,Fl[1]=0,Fl[2]=0),F=new Hs(4),Hs!=Float32Array&&(F[0]=0,F[1]=0,F[2]=0,F[3]=0);var Rp=(function(){var F=new Hs(2);Hs!=Float32Array&&(F[0]=0,F[1]=0)}(),function(S){function F(K){S.call(this,K,yd)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.createBucket=function(K){return new Zo(K)},F.prototype.queryRadius=function(K){var ce=K;return Eo("circle-radius",this,ce)+Eo("circle-stroke-width",this,ce)+Ds(this.paint.get("circle-translate"))},F.prototype.queryIntersectsFeature=function(K,ce,ye,ke,ze,Ze,ot,mt){for(var Tt=ps(K,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ze.angle,ot),qt=this.paint.get("circle-radius").evaluate(ce,ye)+this.paint.get("circle-stroke-width").evaluate(ce,ye),an="map"===this.paint.get("circle-pitch-alignment"),$t=an?Tt:function(ai,ti){return ai.map(function(di){return ch(di,ti)})}(Tt,mt),bn=an?qt*ot:qt,Dn=0,Vn=ke;Dn<Vn.length;Dn+=1)for(var Bn=0,tr=Vn[Dn];Bn<tr.length;Bn+=1){var nr=tr[Bn],ur=an?nr:ch(nr,mt),Tr=bn,Fr=Tl([],[nr.x,nr.y,0,1],mt);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Tr*=Fr[3]/Ze.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Tr*=Ze.cameraToCenterDistance/Fr[3]),tl($t,ur,Tr))return!0}return!1},F}(la));function ch(S,F){var K=Tl([],[S.x,S.y,0,1],F);return new t(K[0]/K[3],K[1]/K[3])}var tc=function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F}(Zo);function Fp(S,F,K,ce){var ye=F.width,ke=F.height;if(ce){if(ce instanceof Uint8ClampedArray)ce=new Uint8Array(ce.buffer);else if(ce.length!==ye*ke*K)throw new RangeError("mismatched image size")}else ce=new Uint8Array(ye*ke*K);return S.width=ye,S.height=ke,S.data=ce,S}function zp(S,F,K){var ce=F.width,ye=F.height;if(ce!==S.width||ye!==S.height){var ke=Fp({},{width:ce,height:ye},K);Za(S,ke,{x:0,y:0},{x:0,y:0},{width:Math.min(S.width,ce),height:Math.min(S.height,ye)},K),S.width=ce,S.height=ye,S.data=ke.data}}function Za(S,F,K,ce,ye,ke){if(0===ye.width||0===ye.height)return F;if(ye.width>S.width||ye.height>S.height||K.x>S.width-ye.width||K.y>S.height-ye.height)throw new RangeError("out of range source coordinates for image copy");if(ye.width>F.width||ye.height>F.height||ce.x>F.width-ye.width||ce.y>F.height-ye.height)throw new RangeError("out of range destination coordinates for image copy");for(var ze=S.data,Ze=F.data,ot=0;ot<ye.height;ot++)for(var mt=((K.y+ot)*S.width+K.x)*ke,Tt=((ce.y+ot)*F.width+ce.x)*ke,qt=0;qt<ye.width*ke;qt++)Ze[Tt+qt]=ze[mt+qt];return F}lr("HeatmapBucket",tc,{omit:["layers"]});var nc=function(S,F){Fp(this,S,1,F)};nc.prototype.resize=function(S){zp(this,S,1)},nc.prototype.clone=function(){return new nc({width:this.width,height:this.height},new Uint8Array(this.data))},nc.copy=function(S,F,K,ce,ye){Za(S,F,K,ce,ye,1)};var dl=function(S,F){Fp(this,S,4,F)};dl.prototype.resize=function(S){zp(this,S,4)},dl.prototype.replace=function(S,F){F?this.data.set(S):this.data=S instanceof Uint8ClampedArray?new Uint8Array(S.buffer):S},dl.prototype.clone=function(){return new dl({width:this.width,height:this.height},new Uint8Array(this.data))},dl.copy=function(S,F,K,ce,ye){Za(S,F,K,ce,ye,4)},lr("AlphaImage",nc),lr("RGBAImage",dl);var Ly={paint:new Zr({"heatmap-radius":new Vi(je.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Vi(je.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ci(je.paint_heatmap["heatmap-intensity"]),"heatmap-color":new fl(je.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ci(je.paint_heatmap["heatmap-opacity"])})};function Bg(S,F){for(var K=new Uint8Array(1024),ce={},ye=0,ke=0;ye<256;ye++,ke+=4){ce[F]=ye/255;var ze=S.evaluate(ce);K[ke+0]=Math.floor(255*ze.r/ze.a),K[ke+1]=Math.floor(255*ze.g/ze.a),K[ke+2]=Math.floor(255*ze.b/ze.a),K[ke+3]=Math.floor(255*ze.a)}return new dl({width:256,height:1},K)}var Iy=function(S){function F(K){S.call(this,K,Ly),this._updateColorRamp()}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.createBucket=function(K){return new tc(K)},F.prototype._handleSpecialPaintPropertyUpdate=function(K){"heatmap-color"===K&&this._updateColorRamp()},F.prototype._updateColorRamp=function(){this.colorRamp=Bg(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},F.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},F.prototype.queryRadius=function(){return 0},F.prototype.queryIntersectsFeature=function(){return!1},F.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},F}(la),Py={paint:new Zr({"hillshade-illumination-direction":new Ci(je.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ci(je.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ci(je.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ci(je.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ci(je.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ci(je.paint_hillshade["hillshade-accent-color"])})},Oy=function(S){function F(K){S.call(this,K,Py)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},F}(la),Dc=Da([{name:"a_pos",components:2,type:"Int16"}],4).members,Np=Lc,Ls=Lc;function Lc(S,F,K){K=K||2;var ce,ye,ke,ze,Ze,ot,mt,Tt=F&&F.length,qt=Tt?F[0]*K:S.length,an=Ic(S,0,qt,K,!0),$t=[];if(!an||an.next===an.prev)return $t;if(Tt&&(an=function(Dn,Vn,Bn,tr){var nr,ur,ai,ti=[];for(nr=0,ur=Vn.length;nr<ur;nr++)(ai=Ic(Dn,Vn[nr]*tr,nr<ur-1?Vn[nr+1]*tr:Dn.length,tr,!1))===ai.next&&(ai.steiner=!0),ti.push(Ry(ai));for(ti.sort(hf),nr=0;nr<ti.length;nr++)jp(ti[nr],Bn),Bn=rc(Bn,Bn.next);return Bn}(S,F,an,K)),S.length>80*K){ce=ke=S[0],ye=ze=S[1];for(var bn=K;bn<qt;bn+=K)(Ze=S[bn])<ce&&(ce=Ze),(ot=S[bn+1])<ye&&(ye=ot),Ze>ke&&(ke=Ze),ot>ze&&(ze=ot);mt=0!==(mt=Math.max(ke-ce,ze-ye))?1/mt:0}return ff(an,$t,K,ce,ye,mt),$t}function Ic(S,F,K,ce,ye){var ke,ze;if(ye===hh(S,F,K,ce)>0)for(ke=F;ke<K;ke+=ce)ze=Hp(ke,S[ke],S[ke+1],ze);else for(ke=K-ce;ke>=F;ke-=ce)ze=Hp(ke,S[ke],S[ke+1],ze);return ze&&Pc(ze,ze.next)&&(mf(ze),ze=ze.next),ze}function rc(S,F){if(!S)return S;F||(F=S);var K,ce=S;do{if(K=!1,ce.steiner||!Pc(ce,ce.next)&&0!==Xa(ce.prev,ce,ce.next))ce=ce.next;else{if(mf(ce),(ce=F=ce.prev)===ce.next)break;K=!0}}while(K||ce!==F);return F}function ff(S,F,K,ce,ye,ke,ze){if(S){!ze&&ke&&function(Tt,qt,an,$t){var bn=Tt;do{null===bn.z&&(bn.z=bd(bn.x,bn.y,qt,an,$t)),bn.prevZ=bn.prev,bn.nextZ=bn.next,bn=bn.next}while(bn!==Tt);bn.prevZ.nextZ=null,bn.prevZ=null,function(Dn){var Vn,Bn,tr,nr,ur,Tr,Fr,ai,ti=1;do{for(Bn=Dn,Dn=null,ur=null,Tr=0;Bn;){for(Tr++,tr=Bn,Fr=0,Vn=0;Vn<ti&&(Fr++,tr=tr.nextZ);Vn++);for(ai=ti;Fr>0||ai>0&&tr;)0!==Fr&&(0===ai||!tr||Bn.z<=tr.z)?(nr=Bn,Bn=Bn.nextZ,Fr--):(nr=tr,tr=tr.nextZ,ai--),ur?ur.nextZ=nr:Dn=nr,nr.prevZ=ur,ur=nr;Bn=tr}ur.nextZ=null,ti*=2}while(Tr>1)}(bn)}(S,ce,ye,ke);for(var Ze,ot,mt=S;S.prev!==S.next;)if(Ze=S.prev,ot=S.next,ke?iu(S,ce,ye,ke):zl(S))F.push(Ze.i/K),F.push(S.i/K),F.push(ot.i/K),mf(S),S=ot.next,mt=ot.next;else if((S=ot)===mt){ze?1===ze?ff(S=Bp(rc(S),F,K),F,K,ce,ye,ke,2):2===ze&&fh(S,F,K,ce,ye,ke):ff(rc(S),F,K,ce,ye,ke,1);break}}}function zl(S){var F=S.prev,K=S,ce=S.next;if(Xa(F,K,ce)>=0)return!1;for(var ye=S.next.next;ye!==S.prev;){if(df(F.x,F.y,K.x,K.y,ce.x,ce.y,ye.x,ye.y)&&Xa(ye.prev,ye,ye.next)>=0)return!1;ye=ye.next}return!0}function iu(S,F,K,ce){var ye=S.prev,ke=S,ze=S.next;if(Xa(ye,ke,ze)>=0)return!1;for(var mt=ye.x>ke.x?ye.x>ze.x?ye.x:ze.x:ke.x>ze.x?ke.x:ze.x,Tt=ye.y>ke.y?ye.y>ze.y?ye.y:ze.y:ke.y>ze.y?ke.y:ze.y,qt=bd(ye.x<ke.x?ye.x<ze.x?ye.x:ze.x:ke.x<ze.x?ke.x:ze.x,ye.y<ke.y?ye.y<ze.y?ye.y:ze.y:ke.y<ze.y?ke.y:ze.y,F,K,ce),an=bd(mt,Tt,F,K,ce),$t=S.prevZ,bn=S.nextZ;$t&&$t.z>=qt&&bn&&bn.z<=an;){if($t!==S.prev&&$t!==S.next&&df(ye.x,ye.y,ke.x,ke.y,ze.x,ze.y,$t.x,$t.y)&&Xa($t.prev,$t,$t.next)>=0||($t=$t.prevZ,bn!==S.prev&&bn!==S.next&&df(ye.x,ye.y,ke.x,ke.y,ze.x,ze.y,bn.x,bn.y)&&Xa(bn.prev,bn,bn.next)>=0))return!1;bn=bn.nextZ}for(;$t&&$t.z>=qt;){if($t!==S.prev&&$t!==S.next&&df(ye.x,ye.y,ke.x,ke.y,ze.x,ze.y,$t.x,$t.y)&&Xa($t.prev,$t,$t.next)>=0)return!1;$t=$t.prevZ}for(;bn&&bn.z<=an;){if(bn!==S.prev&&bn!==S.next&&df(ye.x,ye.y,ke.x,ke.y,ze.x,ze.y,bn.x,bn.y)&&Xa(bn.prev,bn,bn.next)>=0)return!1;bn=bn.nextZ}return!0}function Bp(S,F,K){var ce=S;do{var ye=ce.prev,ke=ce.next.next;!Pc(ye,ke)&&ic(ye,ce,ce.next,ke)&&gf(ye,ke)&&gf(ke,ye)&&(F.push(ye.i/K),F.push(ce.i/K),F.push(ke.i/K),mf(ce),mf(ce.next),ce=S=ke),ce=ce.next}while(ce!==S);return rc(ce)}function fh(S,F,K,ce,ye,ke){var ze=S;do{for(var Ze=ze.next.next;Ze!==ze.prev;){if(ze.i!==Ze.i&&Up(ze,Ze)){var ot=Vp(ze,Ze);return ze=rc(ze,ze.next),ot=rc(ot,ot.next),ff(ze,F,K,ce,ye,ke),void ff(ot,F,K,ce,ye,ke)}Ze=Ze.next}ze=ze.next}while(ze!==S)}function hf(S,F){return S.x-F.x}function jp(S,F){if(F=function(ce,ye){var ke,ze=ye,Ze=ce.x,ot=ce.y,mt=-1/0;do{if(ot<=ze.y&&ot>=ze.next.y&&ze.next.y!==ze.y){var Tt=ze.x+(ot-ze.y)*(ze.next.x-ze.x)/(ze.next.y-ze.y);if(Tt<=Ze&&Tt>mt){if(mt=Tt,Tt===Ze){if(ot===ze.y)return ze;if(ot===ze.next.y)return ze.next}ke=ze.x<ze.next.x?ze:ze.next}}ze=ze.next}while(ze!==ye);if(!ke)return null;if(Ze===mt)return ke;var qt,an=ke,$t=ke.x,bn=ke.y,Dn=1/0;ze=ke;do{Ze>=ze.x&&ze.x>=$t&&Ze!==ze.x&&df(ot<bn?Ze:mt,ot,$t,bn,ot<bn?mt:Ze,ot,ze.x,ze.y)&&(qt=Math.abs(ot-ze.y)/(Ze-ze.x),gf(ze,ce)&&(qt<Dn||qt===Dn&&(ze.x>ke.x||ze.x===ke.x&&jg(ke,ze)))&&(ke=ze,Dn=qt)),ze=ze.next}while(ze!==an);return ke}(S,F)){var K=Vp(F,S);rc(F,F.next),rc(K,K.next)}}function jg(S,F){return Xa(S.prev,S,F.prev)<0&&Xa(F.next,S,S.next)<0}function bd(S,F,K,ce,ye){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-K)*ye)|S<<8))|S<<4))|S<<2))|S<<1))|(F=1431655765&((F=858993459&((F=252645135&((F=16711935&((F=32767*(F-ce)*ye)|F<<8))|F<<4))|F<<2))|F<<1))<<1}function Ry(S){var F=S,K=S;do{(F.x<K.x||F.x===K.x&&F.y<K.y)&&(K=F),F=F.next}while(F!==S);return K}function df(S,F,K,ce,ye,ke,ze,Ze){return(ye-ze)*(F-Ze)-(S-ze)*(ke-Ze)>=0&&(S-ze)*(ce-Ze)-(K-ze)*(F-Ze)>=0&&(K-ze)*(ke-Ze)-(ye-ze)*(ce-Ze)>=0}function Up(S,F){return S.next.i!==F.i&&S.prev.i!==F.i&&!function(K,ce){var ye=K;do{if(ye.i!==K.i&&ye.next.i!==K.i&&ye.i!==ce.i&&ye.next.i!==ce.i&&ic(ye,ye.next,K,ce))return!0;ye=ye.next}while(ye!==K);return!1}(S,F)&&(gf(S,F)&&gf(F,S)&&function(K,ce){var ye=K,ke=!1,ze=(K.x+ce.x)/2,Ze=(K.y+ce.y)/2;do{ye.y>Ze!=ye.next.y>Ze&&ye.next.y!==ye.y&&ze<(ye.next.x-ye.x)*(Ze-ye.y)/(ye.next.y-ye.y)+ye.x&&(ke=!ke),ye=ye.next}while(ye!==K);return ke}(S,F)&&(Xa(S.prev,S,F.prev)||Xa(S,F.prev,F))||Pc(S,F)&&Xa(S.prev,S,S.next)>0&&Xa(F.prev,F,F.next)>0)}function Xa(S,F,K){return(F.y-S.y)*(K.x-F.x)-(F.x-S.x)*(K.y-F.y)}function Pc(S,F){return S.x===F.x&&S.y===F.y}function ic(S,F,K,ce){var ye=pf(Xa(S,F,K)),ke=pf(Xa(S,F,ce)),ze=pf(Xa(K,ce,S)),Ze=pf(Xa(K,ce,F));return ye!==ke&&ze!==Ze||!(0!==ye||!_d(S,K,F))||!(0!==ke||!_d(S,ce,F))||!(0!==ze||!_d(K,S,ce))||!(0!==Ze||!_d(K,F,ce))}function _d(S,F,K){return F.x<=Math.max(S.x,K.x)&&F.x>=Math.min(S.x,K.x)&&F.y<=Math.max(S.y,K.y)&&F.y>=Math.min(S.y,K.y)}function pf(S){return S>0?1:S<0?-1:0}function gf(S,F){return Xa(S.prev,S,S.next)<0?Xa(S,F,S.next)>=0&&Xa(S,S.prev,F)>=0:Xa(S,F,S.prev)<0||Xa(S,S.next,F)<0}function Vp(S,F){var K=new wd(S.i,S.x,S.y),ce=new wd(F.i,F.x,F.y),ye=S.next,ke=F.prev;return S.next=F,F.prev=S,K.next=ye,ye.prev=K,ce.next=K,K.prev=ce,ke.next=ce,ce.prev=ke,ce}function Hp(S,F,K,ce){var ye=new wd(S,F,K);return ce?(ye.next=ce.next,ye.prev=ce,ce.next.prev=ye,ce.next=ye):(ye.prev=ye,ye.next=ye),ye}function mf(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function wd(S,F,K){this.i=S,this.x=F,this.y=K,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function hh(S,F,K,ce){for(var ye=0,ke=F,ze=K-ce;ke<K;ke+=ce)ye+=(S[ze]-S[ke])*(S[ke+1]+S[ze+1]),ze=ke;return ye}function Td(S,F,K,ce,ye){!function ke(ze,Ze,ot,mt,Tt){for(;mt>ot;){if(mt-ot>600){var qt=mt-ot+1,an=Ze-ot+1,$t=Math.log(qt),bn=.5*Math.exp(2*$t/3),Dn=.5*Math.sqrt($t*bn*(qt-bn)/qt)*(an-qt/2<0?-1:1);ke(ze,Ze,Math.max(ot,Math.floor(Ze-an*bn/qt+Dn)),Math.min(mt,Math.floor(Ze+(qt-an)*bn/qt+Dn)),Tt)}var tr=ze[Ze],nr=ot,ur=mt;for(Ou(ze,ot,Ze),Tt(ze[mt],tr)>0&&Ou(ze,ot,mt);nr<ur;){for(Ou(ze,nr,ur),nr++,ur--;Tt(ze[nr],tr)<0;)nr++;for(;Tt(ze[ur],tr)>0;)ur--}0===Tt(ze[ot],tr)?Ou(ze,ot,ur):Ou(ze,++ur,mt),ur<=Ze&&(ot=ur+1),Ze<=ur&&(mt=ur-1)}}(S,F,K||0,ce||S.length-1,ye||Fy)}function Ou(S,F,K){var ce=S[F];S[F]=S[K],S[K]=ce}function Fy(S,F){return S<F?-1:S>F?1:0}function ac(S,F){var K=S.length;if(K<=1)return[S];for(var ce,ye,ke=[],ze=0;ze<K;ze++){var Ze=O(S[ze]);0!==Ze&&(S[ze].area=Math.abs(Ze),void 0===ye&&(ye=Ze<0),ye===Ze<0?(ce&&ke.push(ce),ce=[S[ze]]):ce.push(S[ze]))}if(ce&&ke.push(ce),F>1)for(var ot=0;ot<ke.length;ot++)ke[ot].length<=F||(Td(ke[ot],F,1,ke[ot].length-1,Md),ke[ot]=ke[ot].slice(0,F));return ke}function Md(S,F){return F.area-S.area}function Oc(S,F,K){for(var ce=K.patternDependencies,ye=!1,ke=0,ze=F;ke<ze.length;ke+=1){var Ze=ze[ke].paint.get(S+"-pattern");Ze.isConstant()||(ye=!0);var ot=Ze.constantOr(null);ot&&(ye=!0,ce[ot.to]=!0,ce[ot.from]=!0)}return ye}function kd(S,F,K,ce,ye){for(var ke=ye.patternDependencies,ze=0,Ze=F;ze<Ze.length;ze+=1){var ot=Ze[ze],mt=ot.paint.get(S+"-pattern").value;if("constant"!==mt.kind){var Tt=mt.evaluate({zoom:ce-1},K,{},ye.availableImages),qt=mt.evaluate({zoom:ce},K,{},ye.availableImages),an=mt.evaluate({zoom:ce+1},K,{},ye.availableImages);qt=qt&&qt.name?qt.name:qt,an=an&&an.name?an.name:an,ke[Tt=Tt&&Tt.name?Tt.name:Tt]=!0,ke[qt]=!0,ke[an]=!0,K.patterns[ot.id]={min:Tt,mid:qt,max:an}}}return K}Lc.deviation=function(S,F,K,ce){var ye=F&&F.length,ze=Math.abs(hh(S,0,ye?F[0]*K:S.length,K));if(ye)for(var Ze=0,ot=F.length;Ze<ot;Ze++)ze-=Math.abs(hh(S,F[Ze]*K,Ze<ot-1?F[Ze+1]*K:S.length,K));var qt=0;for(Ze=0;Ze<ce.length;Ze+=3){var an=ce[Ze]*K,$t=ce[Ze+1]*K,bn=ce[Ze+2]*K;qt+=Math.abs((S[an]-S[bn])*(S[$t+1]-S[an+1])-(S[an]-S[$t])*(S[bn+1]-S[an+1]))}return 0===ze&&0===qt?0:Math.abs((qt-ze)/ze)},Lc.flatten=function(S){for(var F=S[0][0].length,K={vertices:[],holes:[],dimensions:F},ce=0,ye=0;ye<S.length;ye++){for(var ke=0;ke<S[ye].length;ke++)for(var ze=0;ze<F;ze++)K.vertices.push(S[ye][ke][ze]);ye>0&&K.holes.push(ce+=S[ye-1].length)}return K},Np.default=Ls;var Yl=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(F){return F.id}),this.index=S.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Js,this.indexArray=new Qo,this.indexArray2=new V,this.programConfigurations=new ho(Dc,S.layers,S.zoom),this.segments=new Gt,this.segments2=new Gt,this.stateDependentLayerIds=this.layers.filter(function(F){return F.isStateDependent()}).map(function(F){return F.id})};Yl.prototype.populate=function(S,F,K){this.hasPattern=Oc("fill",this.layers,F);for(var ce=this.layers[0].layout.get("fill-sort-key"),ye=[],ke=0,ze=S;ke<ze.length;ke+=1){var Ze=ze[ke],ot=Ze.feature,mt=Ze.id,Tt=Ze.index,qt=Ze.sourceLayerIndex,an=this.layers[0]._featureFilter.needGeometry,$t={type:ot.type,id:mt,properties:ot.properties,geometry:an?po(ot):[]};if(this.layers[0]._featureFilter.filter(new Ha(this.zoom),$t,K)){an||($t.geometry=po(ot));var bn=ce?ce.evaluate($t,{},K,F.availableImages):void 0;ye.push({id:mt,properties:ot.properties,type:ot.type,sourceLayerIndex:qt,index:Tt,geometry:$t.geometry,patterns:{},sortKey:bn})}}ce&&ye.sort(function(di,ki){return di.sortKey-ki.sortKey});for(var Vn=0,Bn=ye;Vn<Bn.length;Vn+=1){var tr=Bn[Vn],ur=tr.geometry,Tr=tr.index,Fr=tr.sourceLayerIndex;if(this.hasPattern){var ai=kd("fill",this.layers,tr,this.zoom,F);this.patternFeatures.push(ai)}else this.addFeature(tr,ur,Tr,K,{});F.featureIndex.insert(S[Tr].feature,ur,Tr,Fr,this.index)}},Yl.prototype.update=function(S,F,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,F,this.stateDependentLayers,K)},Yl.prototype.addFeatures=function(S,F,K){for(var ce=0,ye=this.patternFeatures;ce<ye.length;ce+=1){var ke=ye[ce];this.addFeature(ke,ke.geometry,ke.index,F,K)}},Yl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Yl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Yl.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,Dc),this.indexBuffer=S.createIndexBuffer(this.indexArray),this.indexBuffer2=S.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(S),this.uploaded=!0},Yl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Yl.prototype.addFeature=function(S,F,K,ce,ye){for(var ke=0,ze=ac(F,500);ke<ze.length;ke+=1){for(var Ze=ze[ke],ot=0,mt=0,Tt=Ze;mt<Tt.length;mt+=1)ot+=Tt[mt].length;for(var qt=this.segments.prepareSegment(ot,this.layoutVertexArray,this.indexArray),an=qt.vertexLength,$t=[],bn=[],Dn=0,Vn=Ze;Dn<Vn.length;Dn+=1){var Bn=Vn[Dn];if(0!==Bn.length){Bn!==Ze[0]&&bn.push($t.length/2);var tr=this.segments2.prepareSegment(Bn.length,this.layoutVertexArray,this.indexArray2),nr=tr.vertexLength;this.layoutVertexArray.emplaceBack(Bn[0].x,Bn[0].y),this.indexArray2.emplaceBack(nr+Bn.length-1,nr),$t.push(Bn[0].x),$t.push(Bn[0].y);for(var ur=1;ur<Bn.length;ur++)this.layoutVertexArray.emplaceBack(Bn[ur].x,Bn[ur].y),this.indexArray2.emplaceBack(nr+ur-1,nr+ur),$t.push(Bn[ur].x),$t.push(Bn[ur].y);tr.vertexLength+=Bn.length,tr.primitiveLength+=Bn.length}}for(var Tr=Np($t,bn),Fr=0;Fr<Tr.length;Fr+=3)this.indexArray.emplaceBack(an+Tr[Fr],an+Tr[Fr+1],an+Tr[Fr+2]);qt.vertexLength+=ot,qt.primitiveLength+=Tr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,K,ye,ce)},lr("FillBucket",Yl,{omit:["layers","patternFeatures"]});var Ug=new Zr({"fill-sort-key":new Vi(je.layout_fill["fill-sort-key"])}),qp={paint:new Zr({"fill-antialias":new Ci(je.paint_fill["fill-antialias"]),"fill-opacity":new Vi(je.paint_fill["fill-opacity"]),"fill-color":new Vi(je.paint_fill["fill-color"]),"fill-outline-color":new Vi(je.paint_fill["fill-outline-color"]),"fill-translate":new Ci(je.paint_fill["fill-translate"]),"fill-translate-anchor":new Ci(je.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ul(je.paint_fill["fill-pattern"])}),layout:Ug},Vg=function(S){function F(K){S.call(this,K,qp)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.recalculate=function(K,ce){S.prototype.recalculate.call(this,K,ce);var ye=this.paint._values["fill-outline-color"];"constant"===ye.value.kind&&void 0===ye.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},F.prototype.createBucket=function(K){return new Yl(K)},F.prototype.queryRadius=function(){return Ds(this.paint.get("fill-translate"))},F.prototype.queryIntersectsFeature=function(K,ce,ye,ke,ze,Ze,ot){return Ol(ps(K,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ze.angle,ot),ke)},F.prototype.isTileClipped=function(){return!0},F}(la),Rc=Da([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Ad=Fc;function Fc(S,F,K,ce,ye){this.properties={},this.extent=K,this.type=0,this._pbf=S,this._geometry=-1,this._keys=ce,this._values=ye,S.readFields(da,this,F)}function da(S,F,K){1==S?F.id=K.readVarint():2==S?function(ce,ye){for(var ke=ce.readVarint()+ce.pos;ce.pos<ke;){var ze=ye._keys[ce.readVarint()],Ze=ye._values[ce.readVarint()];ye.properties[ze]=Ze}}(K,F):3==S?F.type=K.readVarint():4==S&&(F._geometry=K.pos)}function Gp(S){for(var F,K,ce=0,ye=0,ke=S.length,ze=ke-1;ye<ke;ze=ye++)ce+=((K=S[ze]).x-(F=S[ye]).x)*(F.y+K.y);return ce}Fc.types=["Unknown","Point","LineString","Polygon"],Fc.prototype.loadGeometry=function(){var S=this._pbf;S.pos=this._geometry;for(var F,K=S.readVarint()+S.pos,ce=1,ye=0,ke=0,ze=0,Ze=[];S.pos<K;){if(ye<=0){var ot=S.readVarint();ce=7&ot,ye=ot>>3}if(ye--,1===ce||2===ce)ke+=S.readSVarint(),ze+=S.readSVarint(),1===ce&&(F&&Ze.push(F),F=[]),F.push(new t(ke,ze));else{if(7!==ce)throw new Error("unknown command "+ce);F&&F.push(F[0].clone())}}return F&&Ze.push(F),Ze},Fc.prototype.bbox=function(){var S=this._pbf;S.pos=this._geometry;for(var F=S.readVarint()+S.pos,K=1,ce=0,ye=0,ke=0,ze=1/0,Ze=-1/0,ot=1/0,mt=-1/0;S.pos<F;){if(ce<=0){var Tt=S.readVarint();K=7&Tt,ce=Tt>>3}if(ce--,1===K||2===K)(ye+=S.readSVarint())<ze&&(ze=ye),ye>Ze&&(Ze=ye),(ke+=S.readSVarint())<ot&&(ot=ke),ke>mt&&(mt=ke);else if(7!==K)throw new Error("unknown command "+K)}return[ze,ot,Ze,mt]},Fc.prototype.toGeoJSON=function(S,F,K){var ce,ye,ke=this.extent*Math.pow(2,K),ze=this.extent*S,Ze=this.extent*F,ot=this.loadGeometry(),mt=Fc.types[this.type];function Tt($t){for(var bn=0;bn<$t.length;bn++){var Dn=$t[bn];$t[bn]=[360*(Dn.x+ze)/ke-180,360/Math.PI*Math.atan(Math.exp((180-360*(Dn.y+Ze)/ke)*Math.PI/180))-90]}}switch(this.type){case 1:var qt=[];for(ce=0;ce<ot.length;ce++)qt[ce]=ot[ce][0];Tt(ot=qt);break;case 2:for(ce=0;ce<ot.length;ce++)Tt(ot[ce]);break;case 3:for(ot=function($t){var bn=$t.length;if(bn<=1)return[$t];for(var Dn,Vn,Bn=[],tr=0;tr<bn;tr++){var nr=Gp($t[tr]);0!==nr&&(void 0===Vn&&(Vn=nr<0),Vn===nr<0?(Dn&&Bn.push(Dn),Dn=[$t[tr]]):Dn.push($t[tr]))}return Dn&&Bn.push(Dn),Bn}(ot),ce=0;ce<ot.length;ce++)for(ye=0;ye<ot[ce].length;ye++)Tt(ot[ce][ye])}1===ot.length?ot=ot[0]:mt="Multi"+mt;var an={type:"Feature",geometry:{type:mt,coordinates:ot},properties:this.properties};return"id"in this&&(an.id=this.id),an};var Hg=dh;function dh(S,F){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=S,this._keys=[],this._values=[],this._features=[],S.readFields(vf,this,F),this.length=this._features.length}function vf(S,F,K){15===S?F.version=K.readVarint():1===S?F.name=K.readString():5===S?F.extent=K.readVarint():2===S?F._features.push(K.pos):3===S?F._keys.push(K.readString()):4===S&&F._values.push(function(ce){for(var ye=null,ke=ce.readVarint()+ce.pos;ce.pos<ke;){var ze=ce.readVarint()>>3;ye=1===ze?ce.readString():2===ze?ce.readFloat():3===ze?ce.readDouble():4===ze?ce.readVarint64():5===ze?ce.readVarint():6===ze?ce.readSVarint():7===ze?ce.readBoolean():null}return ye}(K))}function qg(S,F,K){if(3===S){var ce=new Hg(K,K.readVarint()+K.pos);ce.length&&(F[ce.name]=ce)}}dh.prototype.feature=function(S){if(S<0||S>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[S];var F=this._pbf.readVarint()+this._pbf.pos;return new Ad(this._pbf,F,this.extent,this._keys,this._values)};var zc={VectorTile:function(S,F){this.layers=S.readFields(qg,{},F)},VectorTileFeature:Ad,VectorTileLayer:Hg},Gg=zc.VectorTileFeature.types,oc=Math.pow(2,13);function xl(S,F,K,ce,ye,ke,ze,Ze){S.emplaceBack(F,K,2*Math.floor(ce*oc)+ze,ye*oc*2,ke*oc*2,Math.round(Ze))}var Nl=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(F){return F.id}),this.index=S.index,this.hasPattern=!1,this.layoutVertexArray=new Pl,this.indexArray=new Qo,this.programConfigurations=new ho(Rc,S.layers,S.zoom),this.segments=new Gt,this.stateDependentLayerIds=this.layers.filter(function(F){return F.isStateDependent()}).map(function(F){return F.id})};function Nc(S,F){return S.x===F.x&&(S.x<0||S.x>8192)||S.y===F.y&&(S.y<0||S.y>8192)}function Yg(S){return S.every(function(F){return F.x<0})||S.every(function(F){return F.x>8192})||S.every(function(F){return F.y<0})||S.every(function(F){return F.y>8192})}Nl.prototype.populate=function(S,F,K){this.features=[],this.hasPattern=Oc("fill-extrusion",this.layers,F);for(var ce=0,ye=S;ce<ye.length;ce+=1){var ke=ye[ce],ze=ke.feature,Ze=ke.id,ot=ke.index,mt=ke.sourceLayerIndex,Tt=this.layers[0]._featureFilter.needGeometry,qt={type:ze.type,id:Ze,properties:ze.properties,geometry:Tt?po(ze):[]};if(this.layers[0]._featureFilter.filter(new Ha(this.zoom),qt,K)){var an={id:Ze,sourceLayerIndex:mt,index:ot,geometry:Tt?qt.geometry:po(ze),properties:ze.properties,type:ze.type,patterns:{}};void 0!==ze.id&&(an.id=ze.id),this.hasPattern?this.features.push(kd("fill-extrusion",this.layers,an,this.zoom,F)):this.addFeature(an,an.geometry,ot,K,{}),F.featureIndex.insert(ze,an.geometry,ot,mt,this.index,!0)}}},Nl.prototype.addFeatures=function(S,F,K){for(var ce=0,ye=this.features;ce<ye.length;ce+=1){var ke=ye[ce];this.addFeature(ke,ke.geometry,ke.index,F,K)}},Nl.prototype.update=function(S,F,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,F,this.stateDependentLayers,K)},Nl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Nl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Nl.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,Rc),this.indexBuffer=S.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(S),this.uploaded=!0},Nl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Nl.prototype.addFeature=function(S,F,K,ce,ye){for(var ke=0,ze=ac(F,500);ke<ze.length;ke+=1){for(var Ze=ze[ke],ot=0,mt=0,Tt=Ze;mt<Tt.length;mt+=1)ot+=Tt[mt].length;for(var qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),an=0,$t=Ze;an<$t.length;an+=1){var bn=$t[an];if(0!==bn.length&&!Yg(bn))for(var Dn=0,Vn=0;Vn<bn.length;Vn++){var Bn=bn[Vn];if(Vn>=1){var tr=bn[Vn-1];if(!Nc(Bn,tr)){qt.vertexLength+4>Gt.MAX_VERTEX_ARRAY_LENGTH&&(qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var nr=Bn.sub(tr)._perp()._unit(),ur=tr.dist(Bn);Dn+ur>32768&&(Dn=0),xl(this.layoutVertexArray,Bn.x,Bn.y,nr.x,nr.y,0,0,Dn),xl(this.layoutVertexArray,Bn.x,Bn.y,nr.x,nr.y,0,1,Dn),xl(this.layoutVertexArray,tr.x,tr.y,nr.x,nr.y,0,0,Dn+=ur),xl(this.layoutVertexArray,tr.x,tr.y,nr.x,nr.y,0,1,Dn);var Tr=qt.vertexLength;this.indexArray.emplaceBack(Tr,Tr+2,Tr+1),this.indexArray.emplaceBack(Tr+1,Tr+2,Tr+3),qt.vertexLength+=4,qt.primitiveLength+=2}}}}if(qt.vertexLength+ot>Gt.MAX_VERTEX_ARRAY_LENGTH&&(qt=this.segments.prepareSegment(ot,this.layoutVertexArray,this.indexArray)),"Polygon"===Gg[S.type]){for(var Fr=[],ai=[],ti=qt.vertexLength,di=0,ki=Ze;di<ki.length;di+=1){var Si=ki[di];if(0!==Si.length){Si!==Ze[0]&&ai.push(Fr.length/2);for(var vi=0;vi<Si.length;vi++){var Ii=Si[vi];xl(this.layoutVertexArray,Ii.x,Ii.y,0,0,1,1,0),Fr.push(Ii.x),Fr.push(Ii.y)}}}for(var Di=Np(Fr,ai),Ei=0;Ei<Di.length;Ei+=3)this.indexArray.emplaceBack(ti+Di[Ei],ti+Di[Ei+2],ti+Di[Ei+1]);qt.primitiveLength+=Di.length/3,qt.vertexLength+=ot}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,K,ye,ce)},lr("FillExtrusionBucket",Nl,{omit:["layers","features"]});var Yp={paint:new Zr({"fill-extrusion-opacity":new Ci(je["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Vi(je["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ci(je["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ci(je["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ul(je["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Vi(je["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Vi(je["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ci(je["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Ed=function(S){function F(K){S.call(this,K,Yp)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.createBucket=function(K){return new Nl(K)},F.prototype.queryRadius=function(){return Ds(this.paint.get("fill-extrusion-translate"))},F.prototype.is3D=function(){return!0},F.prototype.queryIntersectsFeature=function(K,ce,ye,ke,ze,Ze,ot,mt){var Tt=ps(K,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ze.angle,ot),qt=this.paint.get("fill-extrusion-height").evaluate(ce,ye),an=this.paint.get("fill-extrusion-base").evaluate(ce,ye),$t=function(Dn,Vn,Bn,tr){for(var nr=[],ur=0,Tr=Dn;ur<Tr.length;ur+=1){var Fr=Tr[ur],ai=[Fr.x,Fr.y,0,1];Tl(ai,ai,Vn),nr.push(new t(ai[0]/ai[3],ai[1]/ai[3]))}return nr}(Tt,mt),bn=function(Dn,Vn,Bn,tr){for(var nr=[],ur=[],Tr=tr[8]*Vn,Fr=tr[9]*Vn,ai=tr[10]*Vn,ti=tr[11]*Vn,di=tr[8]*Bn,ki=tr[9]*Bn,Si=tr[10]*Bn,vi=tr[11]*Bn,Ii=0,Di=Dn;Ii<Di.length;Ii+=1){for(var La=[],Ma=[],Aa=0,Gi=Di[Ii];Aa<Gi.length;Aa+=1){var Ea=Gi[Aa],vo=Ea.x,mo=Ea.y,wo=tr[0]*vo+tr[4]*mo+tr[12],no=tr[1]*vo+tr[5]*mo+tr[13],es=tr[2]*vo+tr[6]*mo+tr[14],Io=tr[3]*vo+tr[7]*mo+tr[15],As=es+ai,_s=Io+ti,ws=wo+di,Gs=no+ki,Bs=es+Si,so=Io+vi,Es=new t((wo+Tr)/_s,(no+Fr)/_s);Es.z=As/_s,La.push(Es);var Xo=new t(ws/so,Gs/so);Xo.z=Bs/so,Ma.push(Xo)}nr.push(La),ur.push(Ma)}return[nr,ur]}(ke,an,qt,mt);return function(Dn,Vn,Bn){var tr=1/0;Ol(Bn,Vn)&&(tr=Sd(Bn,Vn[0]));for(var nr=0;nr<Vn.length;nr++)for(var ur=Vn[nr],Tr=Dn[nr],Fr=0;Fr<ur.length-1;Fr++){var ai=ur[Fr],Si=[ai,ur[Fr+1],Tr[Fr+1],Tr[Fr],ai];Ns(Bn,Si)&&(tr=Math.min(tr,Sd(Bn,Si)))}return tr!==1/0&&tr}(bn[0],bn[1],$t)},F}(la);function Ru(S,F){return S.x*F.x+S.y*F.y}function Sd(S,F){if(1===S.length){for(var K,ce=0,ye=F[ce++];!K||ye.equals(K);)if(!(K=F[ce++]))return 1/0;for(;ce<F.length;ce++){var ke=F[ce],ze=S[0],Ze=K.sub(ye),ot=ke.sub(ye),mt=ze.sub(ye),Tt=Ru(Ze,Ze),qt=Ru(Ze,ot),an=Ru(ot,ot),$t=Ru(mt,Ze),bn=Ru(mt,ot),Dn=Tt*an-qt*qt,Vn=(an*$t-qt*bn)/Dn,Bn=(Tt*bn-qt*$t)/Dn,nr=ye.z*(1-Vn-Bn)+K.z*Vn+ke.z*Bn;if(isFinite(nr))return nr}return 1/0}for(var ur=1/0,Tr=0,Fr=F;Tr<Fr.length;Tr+=1)ur=Math.min(ur,Fr[Tr].z);return ur}var Wp=Da([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Wg=zc.VectorTileFeature.types,Bc=Math.cos(Math.PI/180*37.5),jc=Math.pow(2,14)/.5,rl=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(F){return F.id}),this.index=S.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Vl,this.indexArray=new Qo,this.programConfigurations=new ho(Wp,S.layers,S.zoom),this.segments=new Gt,this.stateDependentLayerIds=this.layers.filter(function(F){return F.isStateDependent()}).map(function(F){return F.id})};rl.prototype.populate=function(S,F,K){this.hasPattern=Oc("line",this.layers,F);for(var ce=this.layers[0].layout.get("line-sort-key"),ye=[],ke=0,ze=S;ke<ze.length;ke+=1){var Ze=ze[ke],ot=Ze.feature,mt=Ze.id,Tt=Ze.index,qt=Ze.sourceLayerIndex,an=this.layers[0]._featureFilter.needGeometry,$t={type:ot.type,id:mt,properties:ot.properties,geometry:an?po(ot):[]};if(this.layers[0]._featureFilter.filter(new Ha(this.zoom),$t,K)){an||($t.geometry=po(ot));var bn=ce?ce.evaluate($t,{},K):void 0;ye.push({id:mt,properties:ot.properties,type:ot.type,sourceLayerIndex:qt,index:Tt,geometry:$t.geometry,patterns:{},sortKey:bn})}}ce&&ye.sort(function(di,ki){return di.sortKey-ki.sortKey});for(var Vn=0,Bn=ye;Vn<Bn.length;Vn+=1){var tr=Bn[Vn],ur=tr.geometry,Tr=tr.index,Fr=tr.sourceLayerIndex;if(this.hasPattern){var ai=kd("line",this.layers,tr,this.zoom,F);this.patternFeatures.push(ai)}else this.addFeature(tr,ur,Tr,K,{});F.featureIndex.insert(S[Tr].feature,ur,Tr,Fr,this.index)}},rl.prototype.update=function(S,F,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,F,this.stateDependentLayers,K)},rl.prototype.addFeatures=function(S,F,K){for(var ce=0,ye=this.patternFeatures;ce<ye.length;ce+=1){var ke=ye[ce];this.addFeature(ke,ke.geometry,ke.index,F,K)}},rl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},rl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},rl.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,Wp),this.indexBuffer=S.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(S),this.uploaded=!0},rl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},rl.prototype.addFeature=function(S,F,K,ce,ye){for(var ke=this.layers[0].layout,ze=ke.get("line-join").evaluate(S,{}),Ze=ke.get("line-cap"),ot=ke.get("line-miter-limit"),mt=ke.get("line-round-limit"),Tt=0,qt=F;Tt<qt.length;Tt+=1)this.addLine(qt[Tt],S,ze,Ze,ot,mt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,K,ye,ce)},rl.prototype.addLine=function(S,F,K,ce,ye,ke){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,F.properties&&F.properties.hasOwnProperty("mapbox_clip_start")&&F.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+F.properties.mapbox_clip_start,this.clipEnd=+F.properties.mapbox_clip_end;for(var ze=0;ze<S.length-1;ze++)this.totalDistance+=S[ze].dist(S[ze+1]);this.updateScaledDistance()}for(var Ze="Polygon"===Wg[F.type],ot=S.length;ot>=2&&S[ot-1].equals(S[ot-2]);)ot--;for(var mt=0;mt<ot-1&&S[mt].equals(S[mt+1]);)mt++;if(!(ot<(Ze?3:2))){"bevel"===K&&(ye=1.05);var Tt,qt=this.overscaling<=16?122880/(512*this.overscaling):0,an=this.segments.prepareSegment(10*ot,this.layoutVertexArray,this.indexArray),$t=void 0,bn=void 0,Dn=void 0,Vn=void 0;this.e1=this.e2=-1,Ze&&(Vn=S[mt].sub(Tt=S[ot-2])._unit()._perp());for(var Bn=mt;Bn<ot;Bn++)if(!(bn=Bn===ot-1?Ze?S[mt+1]:void 0:S[Bn+1])||!S[Bn].equals(bn)){Vn&&(Dn=Vn),Tt&&($t=Tt),Tt=S[Bn],Vn=bn?bn.sub(Tt)._unit()._perp():Dn;var tr=(Dn=Dn||Vn).add(Vn);0===tr.x&&0===tr.y||tr._unit();var nr=Dn.x*Vn.x+Dn.y*Vn.y,ur=tr.x*Vn.x+tr.y*Vn.y,Tr=0!==ur?1/ur:1/0,Fr=2*Math.sqrt(2-2*ur),ai=ur<Bc&&$t&&bn,ti=Dn.x*Vn.y-Dn.y*Vn.x>0;if(ai&&Bn>mt){var di=Tt.dist($t);if(di>2*qt){var ki=Tt.sub(Tt.sub($t)._mult(qt/di)._round());this.updateDistance($t,ki),this.addCurrentVertex(ki,Dn,0,0,an),$t=ki}}var Si=$t&&bn,vi=Si?K:Ze?"butt":ce;if(Si&&"round"===vi&&(Tr<ke?vi="miter":Tr<=2&&(vi="fakeround")),"miter"===vi&&Tr>ye&&(vi="bevel"),"bevel"===vi&&(Tr>2&&(vi="flipbevel"),Tr<ye&&(vi="miter")),$t&&this.updateDistance($t,Tt),"miter"===vi)tr._mult(Tr),this.addCurrentVertex(Tt,tr,0,0,an);else if("flipbevel"===vi){if(Tr>100)tr=Vn.mult(-1);else{var Ii=Tr*Dn.add(Vn).mag()/Dn.sub(Vn).mag();tr._perp()._mult(Ii*(ti?-1:1))}this.addCurrentVertex(Tt,tr,0,0,an),this.addCurrentVertex(Tt,tr.mult(-1),0,0,an)}else if("bevel"===vi||"fakeround"===vi){var Di=-Math.sqrt(Tr*Tr-1),Ei=ti?Di:0,La=ti?0:Di;if($t&&this.addCurrentVertex(Tt,Dn,Ei,La,an),"fakeround"===vi)for(var Ma=Math.round(180*Fr/Math.PI/20),Aa=1;Aa<Ma;Aa++){var Gi=Aa/Ma;if(.5!==Gi){var Ea=Gi-.5;Gi+=Gi*Ea*(Gi-1)*((1.0904+nr*(nr*(3.55645-1.43519*nr)-3.2452))*Ea*Ea+(.848013+nr*(.215638*nr-1.06021)))}var vo=Vn.sub(Dn)._mult(Gi)._add(Dn)._unit()._mult(ti?-1:1);this.addHalfVertex(Tt,vo.x,vo.y,!1,ti,0,an)}bn&&this.addCurrentVertex(Tt,Vn,-Ei,-La,an)}else if("butt"===vi)this.addCurrentVertex(Tt,tr,0,0,an);else if("square"===vi){var mo=$t?1:-1;this.addCurrentVertex(Tt,tr,mo,mo,an)}else"round"===vi&&($t&&(this.addCurrentVertex(Tt,Dn,0,0,an),this.addCurrentVertex(Tt,Dn,1,1,an,!0)),bn&&(this.addCurrentVertex(Tt,Vn,-1,-1,an,!0),this.addCurrentVertex(Tt,Vn,0,0,an)));if(ai&&Bn<ot-1){var wo=Tt.dist(bn);if(wo>2*qt){var no=Tt.add(bn.sub(Tt)._mult(qt/wo)._round());this.updateDistance(Tt,no),this.addCurrentVertex(no,Vn,0,0,an),Tt=no}}}}},rl.prototype.addCurrentVertex=function(S,F,K,ce,ye,ke){void 0===ke&&(ke=!1);var ot=F.y*ce-F.x,mt=-F.y-F.x*ce;this.addHalfVertex(S,F.x+F.y*K,F.y-F.x*K,ke,!1,K,ye),this.addHalfVertex(S,ot,mt,ke,!0,-ce,ye),this.distance>jc/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(S,F,K,ce,ye,ke))},rl.prototype.addHalfVertex=function(S,F,K,ce,ye,ke,ze){var mt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((S.x<<1)+(ce?1:0),(S.y<<1)+(ye?1:0),Math.round(63*F)+128,Math.round(63*K)+128,1+(0===ke?0:ke<0?-1:1)|(63&mt)<<2,mt>>6);var Tt=ze.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Tt),ze.primitiveLength++),ye?this.e2=Tt:this.e1=Tt},rl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(jc-1):this.distance},rl.prototype.updateDistance=function(S,F){this.distance+=S.dist(F),this.updateScaledDistance()},lr("LineBucket",rl,{omit:["layers","patternFeatures"]});var zy=new Zr({"line-cap":new Ci(je.layout_line["line-cap"]),"line-join":new Vi(je.layout_line["line-join"]),"line-miter-limit":new Ci(je.layout_line["line-miter-limit"]),"line-round-limit":new Ci(je.layout_line["line-round-limit"]),"line-sort-key":new Vi(je.layout_line["line-sort-key"])}),Cd={paint:new Zr({"line-opacity":new Vi(je.paint_line["line-opacity"]),"line-color":new Vi(je.paint_line["line-color"]),"line-translate":new Ci(je.paint_line["line-translate"]),"line-translate-anchor":new Ci(je.paint_line["line-translate-anchor"]),"line-width":new Vi(je.paint_line["line-width"]),"line-gap-width":new Vi(je.paint_line["line-gap-width"]),"line-offset":new Vi(je.paint_line["line-offset"]),"line-blur":new Vi(je.paint_line["line-blur"]),"line-dasharray":new tu(je.paint_line["line-dasharray"]),"line-pattern":new Ul(je.paint_line["line-pattern"]),"line-gradient":new fl(je.paint_line["line-gradient"])}),layout:zy},Zp=new(function(S){function F(){S.apply(this,arguments)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.possiblyEvaluate=function(K,ce){return ce=new Ha(Math.floor(ce.zoom),{now:ce.now,fadeDuration:ce.fadeDuration,zoomHistory:ce.zoomHistory,transition:ce.transition}),S.prototype.possiblyEvaluate.call(this,K,ce)},F.prototype.evaluate=function(K,ce,ye,ke){return ce=l({},ce,{zoom:Math.floor(ce.zoom)}),S.prototype.evaluate.call(this,K,ce,ye,ke)},F}(Vi))(Cd.paint.properties["line-width"].specification);Zp.useIntegerZoom=!0;var Ny=function(S){function F(K){S.call(this,K,Cd)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype._handleSpecialPaintPropertyUpdate=function(K){"line-gradient"===K&&this._updateGradient()},F.prototype._updateGradient=function(){this.gradient=Bg(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},F.prototype.recalculate=function(K,ce){S.prototype.recalculate.call(this,K,ce),this.paint._values["line-floorwidth"]=Zp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,K)},F.prototype.createBucket=function(K){return new rl(K)},F.prototype.queryRadius=function(K){var ce=K,ye=Xp(Eo("line-width",this,ce),Eo("line-gap-width",this,ce)),ke=Eo("line-offset",this,ce);return ye/2+Math.abs(ke)+Ds(this.paint.get("line-translate"))},F.prototype.queryIntersectsFeature=function(K,ce,ye,ke,ze,Ze,ot){var mt=ps(K,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ze.angle,ot),Tt=ot/2*Xp(this.paint.get("line-width").evaluate(ce,ye),this.paint.get("line-gap-width").evaluate(ce,ye)),qt=this.paint.get("line-offset").evaluate(ce,ye);return qt&&(ke=function(an,$t){for(var bn=[],Dn=new t(0,0),Vn=0;Vn<an.length;Vn++){for(var Bn=an[Vn],tr=[],nr=0;nr<Bn.length;nr++){var Tr=Bn[nr],Fr=Bn[nr+1],ai=0===nr?Dn:Tr.sub(Bn[nr-1])._unit()._perp(),ti=nr===Bn.length-1?Dn:Fr.sub(Tr)._unit()._perp(),di=ai._add(ti)._unit();di._mult(1/(di.x*ti.x+di.y*ti.y)),tr.push(di._mult($t)._add(Tr))}bn.push(tr)}return bn}(ke,qt*ot)),function(an,$t,bn){for(var Dn=0;Dn<$t.length;Dn++){var Vn=$t[Dn];if(an.length>=3)for(var Bn=0;Bn<Vn.length;Bn++)if(nl(an,Vn[Bn]))return!0;if(vu(an,Vn,bn))return!0}return!1}(mt,ke,Tt)},F.prototype.isTileClipped=function(){return!0},F}(la);function Xp(S,F){return F>0?F+2*S:S}var Dd=Da([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Zg=Da([{name:"a_projected_pos",components:3,type:"Float32"}],4),ph=(Da([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Da([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),gh=(Da([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Da([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Uc=Da([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Xg(S,F,K){return S.sections.forEach(function(ce){var ye,ze,Ze;ce.text=(ye=ce.text,ze=K,"uppercase"===(Ze=F.layout.get("text-transform").evaluate(ze,{}))?ye=ye.toLocaleUpperCase():"lowercase"===Ze&&(ye=ye.toLocaleLowerCase()),eo.applyArabicShaping&&(ye=eo.applyArabicShaping(ye)),ye)}),S}Da([{name:"triangle",components:3,type:"Uint16"}]),Da([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Da([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Da([{type:"Float32",name:"offsetX"}]),Da([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var yf={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},$g=function(S,F,K,ce,ye){var ke,ze,Ze=8*ye-ce-1,ot=(1<<Ze)-1,mt=ot>>1,Tt=-7,qt=K?ye-1:0,an=K?-1:1,$t=S[F+qt];for(qt+=an,ke=$t&(1<<-Tt)-1,$t>>=-Tt,Tt+=Ze;Tt>0;ke=256*ke+S[F+qt],qt+=an,Tt-=8);for(ze=ke&(1<<-Tt)-1,ke>>=-Tt,Tt+=ce;Tt>0;ze=256*ze+S[F+qt],qt+=an,Tt-=8);if(0===ke)ke=1-mt;else{if(ke===ot)return ze?NaN:1/0*($t?-1:1);ze+=Math.pow(2,ce),ke-=mt}return($t?-1:1)*ze*Math.pow(2,ke-ce)},xf=function(S,F,K,ce,ye,ke){var ze,Ze,ot,mt=8*ke-ye-1,Tt=(1<<mt)-1,qt=Tt>>1,an=23===ye?Math.pow(2,-24)-Math.pow(2,-77):0,$t=ce?0:ke-1,bn=ce?1:-1,Dn=F<0||0===F&&1/F<0?1:0;for(F=Math.abs(F),isNaN(F)||F===1/0?(Ze=isNaN(F)?1:0,ze=Tt):(ze=Math.floor(Math.log(F)/Math.LN2),F*(ot=Math.pow(2,-ze))<1&&(ze--,ot*=2),(F+=ze+qt>=1?an/ot:an*Math.pow(2,1-qt))*ot>=2&&(ze++,ot/=2),ze+qt>=Tt?(Ze=0,ze=Tt):ze+qt>=1?(Ze=(F*ot-1)*Math.pow(2,ye),ze+=qt):(Ze=F*Math.pow(2,qt-1)*Math.pow(2,ye),ze=0));ye>=8;S[K+$t]=255&Ze,$t+=bn,Ze/=256,ye-=8);for(ze=ze<<ye|Ze,mt+=ye;mt>0;S[K+$t]=255&ze,$t+=bn,ze/=256,mt-=8);S[K+$t-bn]|=128*Dn},Vc=go;function go(S){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(S)?S:new Uint8Array(S||0),this.pos=0,this.type=0,this.length=this.buf.length}go.Varint=0,go.Fixed64=1,go.Bytes=2,go.Fixed32=5;var Ld="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function au(S){return S.type===go.Bytes?S.readVarint()+S.pos:S.pos+1}function $p(S,F,K){var ce=F<=16383?1:F<=2097151?2:F<=268435455?3:Math.floor(Math.log(F)/(7*Math.LN2));K.realloc(ce);for(var ye=K.pos-1;ye>=S;ye--)K.buf[ye+ce]=K.buf[ye]}function Kg(S,F){for(var K=0;K<S.length;K++)F.writeVarint(S[K])}function Jg(S,F){for(var K=0;K<S.length;K++)F.writeSVarint(S[K])}function Qg(S,F){for(var K=0;K<S.length;K++)F.writeFloat(S[K])}function em(S,F){for(var K=0;K<S.length;K++)F.writeDouble(S[K])}function Fu(S,F){for(var K=0;K<S.length;K++)F.writeBoolean(S[K])}function bf(S,F){for(var K=0;K<S.length;K++)F.writeFixed32(S[K])}function tm(S,F){for(var K=0;K<S.length;K++)F.writeSFixed32(S[K])}function By(S,F){for(var K=0;K<S.length;K++)F.writeFixed64(S[K])}function jy(S,F){for(var K=0;K<S.length;K++)F.writeSFixed64(S[K])}function Id(S,F){return(S[F]|S[F+1]<<8|S[F+2]<<16)+16777216*S[F+3]}function _f(S,F,K){S[K]=F,S[K+1]=F>>>8,S[K+2]=F>>>16,S[K+3]=F>>>24}function nm(S,F){return(S[F]|S[F+1]<<8|S[F+2]<<16)+(S[F+3]<<24)}function Kp(S,F,K){1===S&&K.readMessage(rm,F)}function rm(S,F,K){if(3===S){var ce=K.readMessage(im,{}),ze=ce.width,Ze=ce.height,ot=ce.left,mt=ce.top,Tt=ce.advance;F.push({id:ce.id,bitmap:new nc({width:ze+6,height:Ze+6},ce.bitmap),metrics:{width:ze,height:Ze,left:ot,top:mt,advance:Tt}})}}function im(S,F,K){1===S?F.id=K.readVarint():2===S?F.bitmap=K.readBytes():3===S?F.width=K.readVarint():4===S?F.height=K.readVarint():5===S?F.left=K.readSVarint():6===S?F.top=K.readSVarint():7===S&&(F.advance=K.readVarint())}function Jp(S){for(var F=0,K=0,ce=0,ye=S;ce<ye.length;ce+=1){var ke=ye[ce];F+=ke.w*ke.h,K=Math.max(K,ke.w)}S.sort(function(Dn,Vn){return Vn.h-Dn.h});for(var ze=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(F/.95)),K),h:1/0}],Ze=0,ot=0,mt=0,Tt=S;mt<Tt.length;mt+=1)for(var qt=Tt[mt],an=ze.length-1;an>=0;an--){var $t=ze[an];if(!(qt.w>$t.w||qt.h>$t.h)){if(qt.x=$t.x,qt.y=$t.y,ot=Math.max(ot,qt.y+qt.h),Ze=Math.max(Ze,qt.x+qt.w),qt.w===$t.w&&qt.h===$t.h){var bn=ze.pop();an<ze.length&&(ze[an]=bn)}else qt.h===$t.h?($t.x+=qt.w,$t.w-=qt.w):qt.w===$t.w?($t.y+=qt.h,$t.h-=qt.h):(ze.push({x:$t.x+qt.w,y:$t.y,w:$t.w-qt.w,h:qt.h}),$t.y+=qt.h,$t.h-=qt.h);break}}return{w:Ze,h:ot,fill:F/(Ze*ot)||0}}go.prototype={destroy:function(){this.buf=null},readFields:function(S,F,K){for(K=K||this.length;this.pos<K;){var ce=this.readVarint(),ye=ce>>3,ke=this.pos;this.type=7&ce,S(ye,F,this),this.pos===ke&&this.skip(ce)}return F},readMessage:function(S,F){return this.readFields(S,F,this.readVarint()+this.pos)},readFixed32:function(){var S=Id(this.buf,this.pos);return this.pos+=4,S},readSFixed32:function(){var S=nm(this.buf,this.pos);return this.pos+=4,S},readFixed64:function(){var S=Id(this.buf,this.pos)+4294967296*Id(this.buf,this.pos+4);return this.pos+=8,S},readSFixed64:function(){var S=Id(this.buf,this.pos)+4294967296*nm(this.buf,this.pos+4);return this.pos+=8,S},readFloat:function(){var S=$g(this.buf,this.pos,!0,23,4);return this.pos+=4,S},readDouble:function(){var S=$g(this.buf,this.pos,!0,52,8);return this.pos+=8,S},readVarint:function(S){var F,K,ce=this.buf;return F=127&(K=ce[this.pos++]),K<128?F:(F|=(127&(K=ce[this.pos++]))<<7,K<128?F:(F|=(127&(K=ce[this.pos++]))<<14,K<128?F:(F|=(127&(K=ce[this.pos++]))<<21,K<128?F:function(ye,ke,ze){var Ze,ot,mt=ze.buf;if(Ze=(112&(ot=mt[ze.pos++]))>>4,ot<128||(Ze|=(127&(ot=mt[ze.pos++]))<<3,ot<128)||(Ze|=(127&(ot=mt[ze.pos++]))<<10,ot<128)||(Ze|=(127&(ot=mt[ze.pos++]))<<17,ot<128)||(Ze|=(127&(ot=mt[ze.pos++]))<<24,ot<128)||(Ze|=(1&(ot=mt[ze.pos++]))<<31,ot<128))return function sc(S,F,K){return K?4294967296*F+(S>>>0):4294967296*(F>>>0)+(S>>>0)}(ye,Ze,ke);throw new Error("Expected varint not more than 10 bytes")}(F|=(15&(K=ce[this.pos]))<<28,S,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var S=this.readVarint();return S%2==1?(S+1)/-2:S/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var S=this.readVarint()+this.pos,F=this.pos;return this.pos=S,S-F>=12&&Ld?Ld.decode(this.buf.subarray(F,S)):function(K,ce,ye){for(var ke="",ze=ce;ze<ye;){var Ze,ot,mt,Tt=K[ze],qt=null,an=Tt>239?4:Tt>223?3:Tt>191?2:1;if(ze+an>ye)break;1===an?Tt<128&&(qt=Tt):2===an?128==(192&(Ze=K[ze+1]))&&(qt=(31&Tt)<<6|63&Ze)<=127&&(qt=null):3===an?(ot=K[ze+2],128==(192&(Ze=K[ze+1]))&&128==(192&ot)&&((qt=(15&Tt)<<12|(63&Ze)<<6|63&ot)<=2047||qt>=55296&&qt<=57343)&&(qt=null)):4===an&&(ot=K[ze+2],mt=K[ze+3],128==(192&(Ze=K[ze+1]))&&128==(192&ot)&&128==(192&mt)&&((qt=(15&Tt)<<18|(63&Ze)<<12|(63&ot)<<6|63&mt)<=65535||qt>=1114112)&&(qt=null)),null===qt?(qt=65533,an=1):qt>65535&&(qt-=65536,ke+=String.fromCharCode(qt>>>10&1023|55296),qt=56320|1023&qt),ke+=String.fromCharCode(qt),ze+=an}return ke}(this.buf,F,S)},readBytes:function(){var S=this.readVarint()+this.pos,F=this.buf.subarray(this.pos,S);return this.pos=S,F},readPackedVarint:function(S,F){if(this.type!==go.Bytes)return S.push(this.readVarint(F));var K=au(this);for(S=S||[];this.pos<K;)S.push(this.readVarint(F));return S},readPackedSVarint:function(S){if(this.type!==go.Bytes)return S.push(this.readSVarint());var F=au(this);for(S=S||[];this.pos<F;)S.push(this.readSVarint());return S},readPackedBoolean:function(S){if(this.type!==go.Bytes)return S.push(this.readBoolean());var F=au(this);for(S=S||[];this.pos<F;)S.push(this.readBoolean());return S},readPackedFloat:function(S){if(this.type!==go.Bytes)return S.push(this.readFloat());var F=au(this);for(S=S||[];this.pos<F;)S.push(this.readFloat());return S},readPackedDouble:function(S){if(this.type!==go.Bytes)return S.push(this.readDouble());var F=au(this);for(S=S||[];this.pos<F;)S.push(this.readDouble());return S},readPackedFixed32:function(S){if(this.type!==go.Bytes)return S.push(this.readFixed32());var F=au(this);for(S=S||[];this.pos<F;)S.push(this.readFixed32());return S},readPackedSFixed32:function(S){if(this.type!==go.Bytes)return S.push(this.readSFixed32());var F=au(this);for(S=S||[];this.pos<F;)S.push(this.readSFixed32());return S},readPackedFixed64:function(S){if(this.type!==go.Bytes)return S.push(this.readFixed64());var F=au(this);for(S=S||[];this.pos<F;)S.push(this.readFixed64());return S},readPackedSFixed64:function(S){if(this.type!==go.Bytes)return S.push(this.readSFixed64());var F=au(this);for(S=S||[];this.pos<F;)S.push(this.readSFixed64());return S},skip:function(S){var F=7&S;if(F===go.Varint)for(;this.buf[this.pos++]>127;);else if(F===go.Bytes)this.pos=this.readVarint()+this.pos;else if(F===go.Fixed32)this.pos+=4;else{if(F!==go.Fixed64)throw new Error("Unimplemented type: "+F);this.pos+=8}},writeTag:function(S,F){this.writeVarint(S<<3|F)},realloc:function(S){for(var F=this.length||16;F<this.pos+S;)F*=2;if(F!==this.length){var K=new Uint8Array(F);K.set(this.buf),this.buf=K,this.length=F}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(S){this.realloc(4),_f(this.buf,S,this.pos),this.pos+=4},writeSFixed32:function(S){this.realloc(4),_f(this.buf,S,this.pos),this.pos+=4},writeFixed64:function(S){this.realloc(8),_f(this.buf,-1&S,this.pos),_f(this.buf,Math.floor(S*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(S){this.realloc(8),_f(this.buf,-1&S,this.pos),_f(this.buf,Math.floor(S*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(S){(S=+S||0)>268435455||S<0?function(F,K){var ce,ye,ke,Ze;if(F>=0?(ce=F%4294967296|0,ye=F/4294967296|0):(ye=~(-F/4294967296),4294967295^(ce=~(-F%4294967296))?ce=ce+1|0:(ce=0,ye=ye+1|0)),F>=0x10000000000000000||F<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");K.realloc(10),ke=ce,(Ze=K).buf[Ze.pos++]=127&ke|128,ke>>>=7,Ze.buf[Ze.pos++]=127&ke|128,ke>>>=7,Ze.buf[Ze.pos++]=127&ke|128,ke>>>=7,Ze.buf[Ze.pos++]=127&ke|128,Ze.buf[Ze.pos]=127&(ke>>>=7),function(ke,ze){var Ze=(7&ke)<<4;ze.buf[ze.pos++]|=Ze|((ke>>>=3)?128:0),ke&&(ze.buf[ze.pos++]=127&ke|((ke>>>=7)?128:0),ke&&(ze.buf[ze.pos++]=127&ke|((ke>>>=7)?128:0),ke&&(ze.buf[ze.pos++]=127&ke|((ke>>>=7)?128:0),ke&&(ze.buf[ze.pos++]=127&ke|((ke>>>=7)?128:0),ke&&(ze.buf[ze.pos++]=127&ke)))))}(ye,K)}(S,this):(this.realloc(4),this.buf[this.pos++]=127&S|(S>127?128:0),S<=127||(this.buf[this.pos++]=127&(S>>>=7)|(S>127?128:0),S<=127||(this.buf[this.pos++]=127&(S>>>=7)|(S>127?128:0),S<=127||(this.buf[this.pos++]=S>>>7&127))))},writeSVarint:function(S){this.writeVarint(S<0?2*-S-1:2*S)},writeBoolean:function(S){this.writeVarint(Boolean(S))},writeString:function(S){S=String(S),this.realloc(4*S.length),this.pos++;var F=this.pos;this.pos=function(ce,ye,ke){for(var ze,Ze,ot=0;ot<ye.length;ot++){if((ze=ye.charCodeAt(ot))>55295&&ze<57344){if(!Ze){ze>56319||ot+1===ye.length?(ce[ke++]=239,ce[ke++]=191,ce[ke++]=189):Ze=ze;continue}if(ze<56320){ce[ke++]=239,ce[ke++]=191,ce[ke++]=189,Ze=ze;continue}ze=Ze-55296<<10|ze-56320|65536,Ze=null}else Ze&&(ce[ke++]=239,ce[ke++]=191,ce[ke++]=189,Ze=null);ze<128?ce[ke++]=ze:(ze<2048?ce[ke++]=ze>>6|192:(ze<65536?ce[ke++]=ze>>12|224:(ce[ke++]=ze>>18|240,ce[ke++]=ze>>12&63|128),ce[ke++]=ze>>6&63|128),ce[ke++]=63&ze|128)}return ke}(this.buf,S,this.pos);var K=this.pos-F;K>=128&&$p(F,K,this),this.pos=F-1,this.writeVarint(K),this.pos+=K},writeFloat:function(S){this.realloc(4),xf(this.buf,S,this.pos,!0,23,4),this.pos+=4},writeDouble:function(S){this.realloc(8),xf(this.buf,S,this.pos,!0,52,8),this.pos+=8},writeBytes:function(S){var F=S.length;this.writeVarint(F),this.realloc(F);for(var K=0;K<F;K++)this.buf[this.pos++]=S[K]},writeRawMessage:function(S,F){this.pos++;var K=this.pos;S(F,this);var ce=this.pos-K;ce>=128&&$p(K,ce,this),this.pos=K-1,this.writeVarint(ce),this.pos+=ce},writeMessage:function(S,F,K){this.writeTag(S,go.Bytes),this.writeRawMessage(F,K)},writePackedVarint:function(S,F){F.length&&this.writeMessage(S,Kg,F)},writePackedSVarint:function(S,F){F.length&&this.writeMessage(S,Jg,F)},writePackedBoolean:function(S,F){F.length&&this.writeMessage(S,Fu,F)},writePackedFloat:function(S,F){F.length&&this.writeMessage(S,Qg,F)},writePackedDouble:function(S,F){F.length&&this.writeMessage(S,em,F)},writePackedFixed32:function(S,F){F.length&&this.writeMessage(S,bf,F)},writePackedSFixed32:function(S,F){F.length&&this.writeMessage(S,tm,F)},writePackedFixed64:function(S,F){F.length&&this.writeMessage(S,By,F)},writePackedSFixed64:function(S,F){F.length&&this.writeMessage(S,jy,F)},writeBytesField:function(S,F){this.writeTag(S,go.Bytes),this.writeBytes(F)},writeFixed32Field:function(S,F){this.writeTag(S,go.Fixed32),this.writeFixed32(F)},writeSFixed32Field:function(S,F){this.writeTag(S,go.Fixed32),this.writeSFixed32(F)},writeFixed64Field:function(S,F){this.writeTag(S,go.Fixed64),this.writeFixed64(F)},writeSFixed64Field:function(S,F){this.writeTag(S,go.Fixed64),this.writeSFixed64(F)},writeVarintField:function(S,F){this.writeTag(S,go.Varint),this.writeVarint(F)},writeSVarintField:function(S,F){this.writeTag(S,go.Varint),this.writeSVarint(F)},writeStringField:function(S,F){this.writeTag(S,go.Bytes),this.writeString(F)},writeFloatField:function(S,F){this.writeTag(S,go.Fixed32),this.writeFloat(F)},writeDoubleField:function(S,F){this.writeTag(S,go.Fixed64),this.writeDouble(F)},writeBooleanField:function(S,F){this.writeVarintField(S,Boolean(F))}};var mh=function(S,F){var K=F.pixelRatio,ce=F.version,ye=F.stretchX,ke=F.stretchY,ze=F.content;this.paddedRect=S,this.pixelRatio=K,this.stretchX=ye,this.stretchY=ke,this.content=ze,this.version=ce},vh={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};vh.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},vh.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},vh.tlbr.get=function(){return this.tl.concat(this.br)},vh.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(mh.prototype,vh);var wf=function(S,F){var K={},ce={};this.haveRenderCallbacks=[];var ye=[];this.addImages(S,K,ye),this.addImages(F,ce,ye);var ke=Jp(ye),ot=new dl({width:ke.w||1,height:ke.h||1});for(var mt in S){var Tt=S[mt],qt=K[mt].paddedRect;dl.copy(Tt.data,ot,{x:0,y:0},{x:qt.x+1,y:qt.y+1},Tt.data)}for(var an in F){var $t=F[an],bn=ce[an].paddedRect,Dn=bn.x+1,Vn=bn.y+1,Bn=$t.data.width,tr=$t.data.height;dl.copy($t.data,ot,{x:0,y:0},{x:Dn,y:Vn},$t.data),dl.copy($t.data,ot,{x:0,y:tr-1},{x:Dn,y:Vn-1},{width:Bn,height:1}),dl.copy($t.data,ot,{x:0,y:0},{x:Dn,y:Vn+tr},{width:Bn,height:1}),dl.copy($t.data,ot,{x:Bn-1,y:0},{x:Dn-1,y:Vn},{width:1,height:tr}),dl.copy($t.data,ot,{x:0,y:0},{x:Dn+Bn,y:Vn},{width:1,height:tr})}this.image=ot,this.iconPositions=K,this.patternPositions=ce};wf.prototype.addImages=function(S,F,K){for(var ce in S){var ye=S[ce],ke={x:0,y:0,w:ye.data.width+2,h:ye.data.height+2};K.push(ke),F[ce]=new mh(ke,ye),ye.hasRenderCallback&&this.haveRenderCallbacks.push(ce)}},wf.prototype.patchUpdatedImages=function(S,F){for(var K in S.dispatchRenderCallbacks(this.haveRenderCallbacks),S.updatedImages)this.patchUpdatedImage(this.iconPositions[K],S.getImage(K),F),this.patchUpdatedImage(this.patternPositions[K],S.getImage(K),F)},wf.prototype.patchUpdatedImage=function(S,F,K){if(S&&F&&S.version!==F.version){S.version=F.version;var ce=S.tl;K.update(F.data,void 0,{x:ce[0],y:ce[1]})}},lr("ImagePosition",mh),lr("ImageAtlas",wf);var qs={horizontal:1,vertical:2,horizontalOnly:3},lc=function(){this.scale=1,this.fontStack="",this.imageName=null};lc.forText=function(S,F){var K=new lc;return K.scale=S||1,K.fontStack=F,K},lc.forImage=function(S){var F=new lc;return F.imageName=S,F};var Fo=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function zu(S,F,K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt,an,$t,bn,Dn){var Vn,Bn=Fo.fromFeature(S,ye);qt===qs.vertical&&Bn.verticalizePunctuation();var tr=eo.processBidirectionalText,nr=eo.processStyledBidirectionalText;if(tr&&1===Bn.sections.length){Vn=[];for(var ur=0,Tr=tr(Bn.toString(),Mf(Bn,mt,ke,F,ce,$t,bn));ur<Tr.length;ur+=1){var Fr=Tr[ur],ai=new Fo;ai.text=Fr,ai.sections=Bn.sections;for(var ti=0;ti<Fr.length;ti++)ai.sectionIndex.push(0);Vn.push(ai)}}else if(nr){Vn=[];for(var di=0,ki=nr(Bn.text,Bn.sectionIndex,Mf(Bn,mt,ke,F,ce,$t,bn));di<ki.length;di+=1){var Si=ki[di],vi=new Fo;vi.text=Si[0],vi.sectionIndex=Si[1],vi.sections=Bn.sections,Vn.push(vi)}}else Vn=function(Ei,La){for(var Ma=[],Aa=Ei.text,Gi=0,Ea=0,vo=La;Ea<vo.length;Ea+=1){var mo=vo[Ea];Ma.push(Ei.substring(Gi,mo)),Gi=mo}return Gi<Aa.length&&Ma.push(Ei.substring(Gi,Aa.length)),Ma}(Bn,Mf(Bn,mt,ke,F,ce,$t,bn));var Ii=[],Di={positionedLines:Ii,text:Bn.toString(),top:Tt[1],bottom:Tt[1],left:Tt[0],right:Tt[0],writingMode:qt,iconsInText:!1,verticalizable:!1};return function(Ei,La,Ma,Aa,Gi,Ea,vo,mo,wo,no,es,Io){for(var As=0,_s=-17,ws=0,Gs=0,Bs="right"===mo?1:"left"===mo?0:.5,so=0,Es=0,Xo=Gi;Es<Xo.length;Es+=1){var gs=Xo[Es];gs.trim();var ma=gs.getMaxScale(),Ba=24*(ma-1),Yo={positionedGlyphs:[],lineOffset:0};Ei.positionedLines[so]=Yo;var zo=Yo.positionedGlyphs,No=0;if(gs.length()){for(var So=0;So<gs.length();So++){var qa=gs.getSection(So),Fi=gs.getSectionIndex(So),Ys=gs.getCharCode(So),sl=0,Is=null,bl=null,Ps=null,ms=24,Xl=!(wo===qs.horizontal||!es&&!Pi(Ys)||es&&(Tf[Ys]||(su=Ys,qr.Arabic(su)||qr["Arabic Supplement"](su)||qr["Arabic Extended-A"](su)||qr["Arabic Presentation Forms-A"](su)||qr["Arabic Presentation Forms-B"](su))));if(qa.imageName){var kl=Aa[qa.imageName];if(!kl)continue;Ps=qa.imageName,Ei.iconsInText=Ei.iconsInText||!0,bl=kl.paddedRect;var Os=kl.displaySize;qa.scale=24*qa.scale/Io,sl=Ba+(24-Os[1]*qa.scale),ms=(Is={width:Os[0],height:Os[1],left:1,top:-3,advance:Xl?Os[1]:Os[0]}).advance;var pc=Xl?Os[0]*qa.scale-24*ma:Os[1]*qa.scale-24*ma;pc>0&&pc>No&&(No=pc)}else{var $c=Ma[qa.fontStack],Kc=$c&&$c[Ys];if(Kc&&Kc.rect)bl=Kc.rect,Is=Kc.metrics;else{var Of=La[qa.fontStack],Gd=Of&&Of[Ys];if(!Gd)continue;Is=Gd.metrics}sl=24*(ma-qa.scale)}Xl?(Ei.verticalizable=!0,zo.push({glyph:Ys,imageName:Ps,x:As,y:_s+sl,vertical:Xl,scale:qa.scale,fontStack:qa.fontStack,sectionIndex:Fi,metrics:Is,rect:bl}),As+=ms*qa.scale+no):(zo.push({glyph:Ys,imageName:Ps,x:As,y:_s+sl,vertical:Xl,scale:qa.scale,fontStack:qa.fontStack,sectionIndex:Fi,metrics:Is,rect:bl}),As+=Is.advance*qa.scale+no)}0!==zo.length&&(ws=Math.max(As-no,ws),Od(zo,0,zo.length-1,Bs,No)),As=0;var mc=Ea*ma+No;Yo.lineOffset=Math.max(No,Ba),_s+=mc,Gs=Math.max(mc,Gs),++so}else _s+=Ea,++so}var su,ju=_s- -17,Jc=kf(vo),Rf=Jc.horizontalAlign,Uu=Jc.verticalAlign;(function(Ff,Ch,Dh,zf,Lh,Ih,Ph,Nf,Qc){var Vu,Oh=(Ch-Dh)*Lh;Vu=Ih!==Ph?-Nf*zf- -17:(-zf*Qc+.5)*Ph;for(var Bf=0,jf=Ff;Bf<jf.length;Bf+=1)for(var Uf=0,Rh=jf[Bf].positionedGlyphs;Uf<Rh.length;Uf+=1){var Vf=Rh[Uf];Vf.x+=Oh,Vf.y+=Vu}})(Ei.positionedLines,Bs,Rf,Uu,ws,Gs,Ea,ju,Gi.length),Ei.top+=-Uu*ju,Ei.bottom=Ei.top+ju,Ei.left+=-Rf*ws,Ei.right=Ei.left+ws}(Di,F,K,ce,Vn,ze,Ze,ot,qt,mt,an,Dn),!function(Ei){for(var La=0,Ma=Ei;La<Ma.length;La+=1)if(0!==Ma[La].positionedGlyphs.length)return!1;return!0}(Ii)&&Di}Fo.fromFeature=function(S,F){for(var K=new Fo,ce=0;ce<S.sections.length;ce++){var ye=S.sections[ce];ye.image?K.addImageSection(ye):K.addTextSection(ye,F)}return K},Fo.prototype.length=function(){return this.text.length},Fo.prototype.getSection=function(S){return this.sections[this.sectionIndex[S]]},Fo.prototype.getSectionIndex=function(S){return this.sectionIndex[S]},Fo.prototype.getCharCode=function(S){return this.text.charCodeAt(S)},Fo.prototype.verticalizePunctuation=function(){this.text=function(S){for(var F="",K=0;K<S.length;K++){var ce=S.charCodeAt(K+1)||null,ye=S.charCodeAt(K-1)||null;ce&&fa(ce)&&!yf[S[K+1]]||ye&&fa(ye)&&!yf[S[K-1]]||!yf[S[K]]?F+=S[K]:F+=yf[S[K]]}return F}(this.text)},Fo.prototype.trim=function(){for(var S=0,F=0;F<this.text.length&&Tf[this.text.charCodeAt(F)];F++)S++;for(var K=this.text.length,ce=this.text.length-1;ce>=0&&ce>=S&&Tf[this.text.charCodeAt(ce)];ce--)K--;this.text=this.text.substring(S,K),this.sectionIndex=this.sectionIndex.slice(S,K)},Fo.prototype.substring=function(S,F){var K=new Fo;return K.text=this.text.substring(S,F),K.sectionIndex=this.sectionIndex.slice(S,F),K.sections=this.sections,K},Fo.prototype.toString=function(){return this.text},Fo.prototype.getMaxScale=function(){var S=this;return this.sectionIndex.reduce(function(F,K){return Math.max(F,S.sections[K].scale)},0)},Fo.prototype.addTextSection=function(S,F){this.text+=S.text,this.sections.push(lc.forText(S.scale,S.fontStack||F));for(var K=this.sections.length-1,ce=0;ce<S.text.length;++ce)this.sectionIndex.push(K)},Fo.prototype.addImageSection=function(S){var F=S.image?S.image.name:"";if(0!==F.length){var K=this.getNextImageSectionCharCode();K?(this.text+=String.fromCharCode(K),this.sections.push(lc.forImage(F)),this.sectionIndex.push(this.sections.length-1)):C("Reached maximum number of images 6401")}else C("Can't add FormattedSection with an empty image.")},Fo.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Tf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},il={};function Pd(S,F,K,ce,ye,ke){if(F.imageName){var ze=ce[F.imageName];return ze?ze.displaySize[0]*F.scale*24/ke+ye:0}var Ze=K[F.fontStack],ot=Ze&&Ze[S];return ot?ot.metrics.advance*F.scale+ye:0}function am(S,F,K,ce){var ye=Math.pow(S-F,2);return ce?S<F?ye/2:2*ye:ye+Math.abs(K)*K}function Uy(S,F,K){var ce=0;return 10===S&&(ce-=1e4),K&&(ce+=150),40!==S&&65288!==S||(ce+=50),41!==F&&65289!==F||(ce+=50),ce}function om(S,F,K,ce,ye,ke){for(var ze=null,Ze=am(F,K,ye,ke),ot=0,mt=ce;ot<mt.length;ot+=1){var Tt=mt[ot],qt=am(F-Tt.x,K,ye,ke)+Tt.badness;qt<=Ze&&(ze=Tt,Ze=qt)}return{index:S,x:F,priorBreak:ze,badness:Ze}}function Mf(S,F,K,ce,ye,ke,ze){if("point"!==ke)return[];if(!S)return[];for(var Ze,ot=[],mt=function(Vn,Bn,tr,nr,ur,Tr){for(var Fr=0,ai=0;ai<Vn.length();ai++){var ti=Vn.getSection(ai);Fr+=Pd(Vn.getCharCode(ai),ti,nr,ur,Bn,Tr)}return Fr/Math.max(1,Math.ceil(Fr/tr))}(S,F,K,ce,ye,ze),Tt=S.text.indexOf("\u200b")>=0,qt=0,an=0;an<S.length();an++){var $t=S.getSection(an),bn=S.getCharCode(an);if(Tf[bn]||(qt+=Pd(bn,$t,ce,ye,F,ze)),an<S.length()-1){var Dn=!((Ze=bn)<11904||!(qr["Bopomofo Extended"](Ze)||qr.Bopomofo(Ze)||qr["CJK Compatibility Forms"](Ze)||qr["CJK Compatibility Ideographs"](Ze)||qr["CJK Compatibility"](Ze)||qr["CJK Radicals Supplement"](Ze)||qr["CJK Strokes"](Ze)||qr["CJK Symbols and Punctuation"](Ze)||qr["CJK Unified Ideographs Extension A"](Ze)||qr["CJK Unified Ideographs"](Ze)||qr["Enclosed CJK Letters and Months"](Ze)||qr["Halfwidth and Fullwidth Forms"](Ze)||qr.Hiragana(Ze)||qr["Ideographic Description Characters"](Ze)||qr["Kangxi Radicals"](Ze)||qr["Katakana Phonetic Extensions"](Ze)||qr.Katakana(Ze)||qr["Vertical Forms"](Ze)||qr["Yi Radicals"](Ze)||qr["Yi Syllables"](Ze)));(il[bn]||Dn||$t.imageName)&&ot.push(om(an+1,qt,mt,ot,Uy(bn,S.getCharCode(an+1),Dn&&Tt),!1))}}return function Vn(Bn){return Bn?Vn(Bn.priorBreak).concat(Bn.index):[]}(om(S.length(),qt,mt,ot,0,!0))}function kf(S){var F=.5,K=.5;switch(S){case"right":case"top-right":case"bottom-right":F=1;break;case"left":case"top-left":case"bottom-left":F=0}switch(S){case"bottom":case"bottom-right":case"bottom-left":K=1;break;case"top":case"top-right":case"top-left":K=0}return{horizontalAlign:F,verticalAlign:K}}function Od(S,F,K,ce,ye){if(ce||ye)for(var ke=S[K],Ze=(S[K].x+ke.metrics.advance*ke.scale)*ce,ot=F;ot<=K;ot++)S[ot].x-=Ze,S[ot].y+=ye}function sm(S,F,K,ce,ye,ke){var ze,Ze=S.image;if(Ze.content){var ot=Ze.content,mt=Ze.pixelRatio||1;ze=[ot[0]/mt,ot[1]/mt,Ze.displaySize[0]-ot[2]/mt,Ze.displaySize[1]-ot[3]/mt]}var Tt,qt,an,$t,bn=F.left*ke,Dn=F.right*ke;"width"===K||"both"===K?($t=ye[0]+bn-ce[3],qt=ye[0]+Dn+ce[1]):qt=($t=ye[0]+(bn+Dn-Ze.displaySize[0])/2)+Ze.displaySize[0];var Vn=F.top*ke,Bn=F.bottom*ke;return"height"===K||"both"===K?(Tt=ye[1]+Vn-ce[0],an=ye[1]+Bn+ce[2]):an=(Tt=ye[1]+(Vn+Bn-Ze.displaySize[1])/2)+Ze.displaySize[1],{image:Ze,top:Tt,right:qt,bottom:an,left:$t,collisionPadding:ze}}il[10]=!0,il[32]=!0,il[38]=!0,il[40]=!0,il[41]=!0,il[43]=!0,il[45]=!0,il[47]=!0,il[173]=!0,il[183]=!0,il[8203]=!0,il[8208]=!0,il[8211]=!0,il[8231]=!0;var Af=function(S){function F(K,ce,ye,ke){S.call(this,K,ce),this.angle=ye,void 0!==ke&&(this.segment=ke)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.clone=function(){return new F(this.x,this.y,this.angle,this.segment)},F}(t);function yh(S,F){var K=F.expression;if("constant"===K.kind)return{kind:"constant",layoutSize:K.evaluate(new Ha(S+1))};if("source"===K.kind)return{kind:"source"};for(var ce=K.zoomStops,ye=K.interpolationType,ke=0;ke<ce.length&&ce[ke]<=S;)ke++;for(var ze=ke=Math.max(0,ke-1);ze<ce.length&&ce[ze]<S+1;)ze++;ze=Math.min(ce.length-1,ze);var Ze=ce[ke],ot=ce[ze];return"composite"===K.kind?{kind:"composite",minZoom:Ze,maxZoom:ot,interpolationType:ye}:{kind:"camera",minZoom:Ze,maxZoom:ot,minSize:K.evaluate(new Ha(Ze)),maxSize:K.evaluate(new Ha(ot)),interpolationType:ye}}function Qp(S,F,K){var ce=F.uSize,ke=K.lowerSize;return"source"===S.kind?ke/128:"composite"===S.kind?cr(ke/128,K.upperSize/128,F.uSizeT):ce}function e0(S,F){var K=0,ce=0;if("constant"===S.kind)ce=S.layoutSize;else if("source"!==S.kind){var ye=S.interpolationType,Ze=ye?c(wa.interpolationFactor(ye,F,S.minZoom,S.maxZoom),0,1):0;"camera"===S.kind?ce=cr(S.minSize,S.maxSize,Ze):K=Ze}return{uSizeT:K,uSize:ce}}lr("Anchor",Af);var lm=Object.freeze({__proto__:null,getSizeData:yh,evaluateSizeForFeature:Qp,evaluateSizeForZoom:e0,SIZE_PACK_FACTOR:128});function t0(S,F,K,ce,ye){if(void 0===F.segment)return!0;for(var ke=F,ze=F.segment+1,Ze=0;Ze>-K/2;){if(--ze<0)return!1;Ze-=S[ze].dist(ke),ke=S[ze]}Ze+=S[ze].dist(S[ze+1]),ze++;for(var ot=[],mt=0;Ze<K/2;){var qt=S[ze],an=S[ze+1];if(!an)return!1;var $t=S[ze-1].angleTo(qt)-qt.angleTo(an);for($t=Math.abs(($t+3*Math.PI)%(2*Math.PI)-Math.PI),ot.push({distance:Ze,angleDelta:$t}),mt+=$t;Ze-ot[0].distance>ce;)mt-=ot.shift().angleDelta;if(mt>ye)return!1;ze++,Ze+=qt.dist(an)}return!0}function Rd(S){for(var F=0,K=0;K<S.length-1;K++)F+=S[K].dist(S[K+1]);return F}function Ef(S,F,K){return S?.6*F*K:0}function n0(S,F){return Math.max(S?S.right-S.left:0,F?F.right-F.left:0)}function Fd(S,F,K,ce,ye,ke){for(var ze=Ef(K,ye,ke),Ze=n0(K,ce)*ke,ot=0,mt=Rd(S)/2,Tt=0;Tt<S.length-1;Tt++){var qt=S[Tt],an=S[Tt+1],$t=qt.dist(an);if(ot+$t>mt){var bn=(mt-ot)/$t,Dn=cr(qt.x,an.x,bn),Vn=cr(qt.y,an.y,bn),Bn=new Af(Dn,Vn,an.angleTo(qt),Tt);return Bn._round(),!ze||t0(S,Bn,Ze,ze,F)?Bn:void 0}ot+=$t}}function um(S,F,K,ce,ye,ke,ze,Ze,ot){var mt=Ef(ce,ke,ze),Tt=n0(ce,ye),qt=Tt*ze,an=0===S[0].x||S[0].x===ot||0===S[0].y||S[0].y===ot;return F-qt<F/4&&(F=qt+F/4),function $t(bn,Dn,Vn,Bn,tr,nr,ur,Tr,Fr){for(var ai=nr/2,ti=Rd(bn),di=0,ki=Dn-Vn,Si=[],vi=0;vi<bn.length-1;vi++){for(var Ii=bn[vi],Di=bn[vi+1],Ei=Ii.dist(Di),La=Di.angleTo(Ii);ki+Vn<di+Ei;){var Ma=((ki+=Vn)-di)/Ei,Aa=cr(Ii.x,Di.x,Ma),Gi=cr(Ii.y,Di.y,Ma);if(Aa>=0&&Aa<Fr&&Gi>=0&&Gi<Fr&&ki-ai>=0&&ki+ai<=ti){var Ea=new Af(Aa,Gi,La,vi);Ea._round(),Bn&&!t0(bn,Ea,nr,Bn,tr)||Si.push(Ea)}}di+=Ei}return Tr||Si.length||ur||(Si=$t(bn,di/2,Vn,Bn,tr,nr,ur,!0,Fr)),Si}(S,an?F/2*Ze%F:(Tt/2+2*ke)*ze*Ze%F,F,mt,K,qt,an,!1,ot)}function bs(S,F,K,ce,ye){for(var ke=[],ze=0;ze<S.length;ze++)for(var Ze=S[ze],ot=void 0,mt=0;mt<Ze.length-1;mt++){var Tt=Ze[mt],qt=Ze[mt+1];Tt.x<F&&qt.x<F||(Tt.x<F?Tt=new t(F,Tt.y+(F-Tt.x)/(qt.x-Tt.x)*(qt.y-Tt.y))._round():qt.x<F&&(qt=new t(F,Tt.y+(F-Tt.x)/(qt.x-Tt.x)*(qt.y-Tt.y))._round()),Tt.y<K&&qt.y<K||(Tt.y<K?Tt=new t(Tt.x+(K-Tt.y)/(qt.y-Tt.y)*(qt.x-Tt.x),K)._round():qt.y<K&&(qt=new t(Tt.x+(K-Tt.y)/(qt.y-Tt.y)*(qt.x-Tt.x),K)._round()),Tt.x>=ce&&qt.x>=ce||(Tt.x>=ce?Tt=new t(ce,Tt.y+(ce-Tt.x)/(qt.x-Tt.x)*(qt.y-Tt.y))._round():qt.x>=ce&&(qt=new t(ce,Tt.y+(ce-Tt.x)/(qt.x-Tt.x)*(qt.y-Tt.y))._round()),Tt.y>=ye&&qt.y>=ye||(Tt.y>=ye?Tt=new t(Tt.x+(ye-Tt.y)/(qt.y-Tt.y)*(qt.x-Tt.x),ye)._round():qt.y>=ye&&(qt=new t(Tt.x+(ye-Tt.y)/(qt.y-Tt.y)*(qt.x-Tt.x),ye)._round()),ot&&Tt.equals(ot[ot.length-1])||ke.push(ot=[Tt]),ot.push(qt)))))}return ke}function r0(S,F,K,ce){var ye=[],ke=S.image,ze=ke.pixelRatio,Ze=ke.paddedRect.w-2,ot=ke.paddedRect.h-2,mt=S.right-S.left,Tt=S.bottom-S.top,qt=ke.stretchX||[[0,Ze]],an=ke.stretchY||[[0,ot]],$t=function(Ea,vo){return Ea+vo[1]-vo[0]},bn=qt.reduce($t,0),Dn=an.reduce($t,0),Vn=Ze-bn,Bn=ot-Dn,tr=0,nr=bn,ur=0,Tr=Dn,Fr=0,ai=Vn,ti=0,di=Bn;if(ke.content&&ce){var ki=ke.content;tr=xh(qt,0,ki[0]),ur=xh(an,0,ki[1]),nr=xh(qt,ki[0],ki[2]),Tr=xh(an,ki[1],ki[3]),Fr=ki[0]-tr,ti=ki[1]-ur,ai=ki[2]-ki[0]-nr,di=ki[3]-ki[1]-Tr}var Si=function(Ea,vo,mo,wo){var no=Sf(Ea.stretch-tr,nr,mt,S.left),es=_h(Ea.fixed-Fr,ai,Ea.stretch,bn),Io=Sf(vo.stretch-ur,Tr,Tt,S.top),As=_h(vo.fixed-ti,di,vo.stretch,Dn),_s=Sf(mo.stretch-tr,nr,mt,S.left),ws=_h(mo.fixed-Fr,ai,mo.stretch,bn),Gs=Sf(wo.stretch-ur,Tr,Tt,S.top),Bs=_h(wo.fixed-ti,di,wo.stretch,Dn),so=new t(no,Io),Es=new t(_s,Io),Xo=new t(_s,Gs),gs=new t(no,Gs),ma=new t(es/ze,As/ze),Ba=new t(ws/ze,Bs/ze),Yo=F*Math.PI/180;if(Yo){var zo=Math.sin(Yo),No=Math.cos(Yo),So=[No,-zo,zo,No];so._matMult(So),Es._matMult(So),gs._matMult(So),Xo._matMult(So)}var qa=Ea.stretch+Ea.fixed,Ys=vo.stretch+vo.fixed;return{tl:so,tr:Es,bl:gs,br:Xo,tex:{x:ke.paddedRect.x+1+qa,y:ke.paddedRect.y+1+Ys,w:mo.stretch+mo.fixed-qa,h:wo.stretch+wo.fixed-Ys},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ma,pixelOffsetBR:Ba,minFontScaleX:ai/ze/mt,minFontScaleY:di/ze/Tt,isSDF:K}};if(ce&&(ke.stretchX||ke.stretchY))for(var vi=bh(qt,Vn,bn),Ii=bh(an,Bn,Dn),Di=0;Di<vi.length-1;Di++)for(var Ei=vi[Di],La=vi[Di+1],Ma=0;Ma<Ii.length-1;Ma++)ye.push(Si(Ei,Ii[Ma],La,Ii[Ma+1]));else ye.push(Si({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ze+1},{fixed:0,stretch:ot+1}));return ye}function xh(S,F,K){for(var ce=0,ye=0,ke=S;ye<ke.length;ye+=1){var ze=ke[ye];ce+=Math.max(F,Math.min(K,ze[1]))-Math.max(F,Math.min(K,ze[0]))}return ce}function bh(S,F,K){for(var ce=[{fixed:-1,stretch:0}],ye=0,ke=S;ye<ke.length;ye+=1){var ze=ke[ye],Ze=ze[0],ot=ze[1],mt=ce[ce.length-1];ce.push({fixed:Ze-mt.stretch,stretch:mt.stretch}),ce.push({fixed:Ze-mt.stretch,stretch:mt.stretch+(ot-Ze)})}return ce.push({fixed:F+1,stretch:K}),ce}function Sf(S,F,K,ce){return S/F*K+ce}function _h(S,F,K,ce){return S-F*K/ce}var wh=function(S,F,K,ce,ye,ke,ze,Ze,ot,mt){if(this.boxStartIndex=S.length,ot){var Tt=ke.top,qt=ke.bottom,an=ke.collisionPadding;an&&(Tt-=an[1],qt+=an[3]);var $t=qt-Tt;$t>0&&($t=Math.max(10,$t),this.circleDiameter=$t)}else{var bn=ke.top*ze-Ze,Dn=ke.bottom*ze+Ze,Vn=ke.left*ze-Ze,Bn=ke.right*ze+Ze,tr=ke.collisionPadding;if(tr&&(Vn-=tr[0]*ze,bn-=tr[1]*ze,Bn+=tr[2]*ze,Dn+=tr[3]*ze),mt){var nr=new t(Vn,bn),ur=new t(Bn,bn),Tr=new t(Vn,Dn),Fr=new t(Bn,Dn),ai=mt*Math.PI/180;nr._rotate(ai),ur._rotate(ai),Tr._rotate(ai),Fr._rotate(ai),Vn=Math.min(nr.x,ur.x,Tr.x,Fr.x),Bn=Math.max(nr.x,ur.x,Tr.x,Fr.x),bn=Math.min(nr.y,ur.y,Tr.y,Fr.y),Dn=Math.max(nr.y,ur.y,Tr.y,Fr.y)}S.emplaceBack(F.x,F.y,Vn,bn,Bn,Dn,K,ce,ye)}this.boxEndIndex=S.length},Hc=function(S,F){if(void 0===S&&(S=[]),void 0===F&&(F=cm),this.data=S,this.length=this.data.length,this.compare=F,this.length>0)for(var K=(this.length>>1)-1;K>=0;K--)this._down(K)};function cm(S,F){return S<F?-1:S>F?1:0}function fm(S,F,K){void 0===F&&(F=1),void 0===K&&(K=!1);for(var ce=1/0,ye=1/0,ke=-1/0,ze=-1/0,Ze=S[0],ot=0;ot<Ze.length;ot++){var mt=Ze[ot];(!ot||mt.x<ce)&&(ce=mt.x),(!ot||mt.y<ye)&&(ye=mt.y),(!ot||mt.x>ke)&&(ke=mt.x),(!ot||mt.y>ze)&&(ze=mt.y)}var an=Math.min(ke-ce,ze-ye),$t=an/2,bn=new Hc([],Vy);if(0===an)return new t(ce,ye);for(var Dn=ce;Dn<ke;Dn+=an)for(var Vn=ye;Vn<ze;Vn+=an)bn.push(new Cf(Dn+$t,Vn+$t,$t,S));for(var Bn=function(ur){for(var Tr=0,Fr=0,ai=0,ti=ur[0],di=0,ki=ti.length,Si=ki-1;di<ki;Si=di++){var vi=ti[di],Ii=ti[Si],Di=vi.x*Ii.y-Ii.x*vi.y;Fr+=(vi.x+Ii.x)*Di,ai+=(vi.y+Ii.y)*Di,Tr+=3*Di}return new Cf(Fr/Tr,ai/Tr,0,ur)}(S),tr=bn.length;bn.length;){var nr=bn.pop();(nr.d>Bn.d||!Bn.d)&&(Bn=nr,K&&console.log("found best %d after %d probes",Math.round(1e4*nr.d)/1e4,tr)),nr.max-Bn.d<=F||(bn.push(new Cf(nr.p.x-($t=nr.h/2),nr.p.y-$t,$t,S)),bn.push(new Cf(nr.p.x+$t,nr.p.y-$t,$t,S)),bn.push(new Cf(nr.p.x-$t,nr.p.y+$t,$t,S)),bn.push(new Cf(nr.p.x+$t,nr.p.y+$t,$t,S)),tr+=4)}return K&&(console.log("num probes: "+tr),console.log("best distance: "+Bn.d)),Bn.p}function Vy(S,F){return F.max-S.max}function Cf(S,F,K,ce){this.p=new t(S,F),this.h=K,this.d=function(ye,ke){for(var ze=!1,Ze=1/0,ot=0;ot<ke.length;ot++)for(var mt=ke[ot],Tt=0,qt=mt.length,an=qt-1;Tt<qt;an=Tt++){var $t=mt[Tt],bn=mt[an];$t.y>ye.y!=bn.y>ye.y&&ye.x<(bn.x-$t.x)*(ye.y-$t.y)/(bn.y-$t.y)+$t.x&&(ze=!ze),Ze=Math.min(Ze,nu(ye,$t,bn))}return(ze?1:-1)*Math.sqrt(Ze)}(this.p,ce),this.max=this.d+this.h*Math.SQRT2}Hc.prototype.push=function(S){this.data.push(S),this.length++,this._up(this.length-1)},Hc.prototype.pop=function(){if(0!==this.length){var S=this.data[0],F=this.data.pop();return this.length--,this.length>0&&(this.data[0]=F,this._down(0)),S}},Hc.prototype.peek=function(){return this.data[0]},Hc.prototype._up=function(S){for(var F=this.data,K=this.compare,ce=F[S];S>0;){var ye=S-1>>1,ke=F[ye];if(K(ce,ke)>=0)break;F[S]=ke,S=ye}F[S]=ce},Hc.prototype._down=function(S){for(var F=this.data,K=this.compare,ce=this.length>>1,ye=F[S];S<ce;){var ke=1+(S<<1),ze=F[ke],Ze=ke+1;if(Ze<this.length&&K(F[Ze],ze)<0&&(ke=Ze,ze=F[Ze]),K(ze,ye)>=0)break;F[S]=ze,S=ke}F[S]=ye};var uc=Number.POSITIVE_INFINITY;function al(S,F){return F[1]!==uc?function(K,ce,ye){var ke=0,ze=0;switch(ce=Math.abs(ce),ye=Math.abs(ye),K){case"top-right":case"top-left":case"top":ze=ye-7;break;case"bottom-right":case"bottom-left":case"bottom":ze=7-ye}switch(K){case"top-right":case"bottom-right":case"right":ke=-ce;break;case"top-left":case"bottom-left":case"left":ke=ce}return[ke,ze]}(S,F[0],F[1]):function(K,ce){var ye=0,ke=0;ce<0&&(ce=0);var ze=ce/Math.sqrt(2);switch(K){case"top-right":case"top-left":ke=ze-7;break;case"bottom-right":case"bottom-left":ke=7-ze;break;case"bottom":ke=7-ce;break;case"top":ke=ce-7}switch(K){case"top-right":case"bottom-right":ye=-ze;break;case"top-left":case"bottom-left":ye=ze;break;case"left":ye=ce;break;case"right":ye=-ce}return[ye,ke]}(S,F[0])}function Df(S){switch(S){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function zd(S,F,K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt,an,$t,bn){var Dn=function(ur,Tr,Fr,ai,ti,di,ki,Si){for(var vi=ai.layout.get("text-rotate").evaluate(di,{})*Math.PI/180,Ii=[],Di=0,Ei=Tr.positionedLines;Di<Ei.length;Di+=1)for(var La=Ei[Di],Ma=0,Aa=La.positionedGlyphs;Ma<Aa.length;Ma+=1){var Gi=Aa[Ma];if(Gi.rect){var Ea=Gi.rect||{},vo=4,mo=!0,wo=1,no=0,es=(ti||Si)&&Gi.vertical,Io=Gi.metrics.advance*Gi.scale/2;if(Si&&Tr.verticalizable&&(no=La.lineOffset/2-(Gi.imageName?-(24-Gi.metrics.width*Gi.scale)/2:24*(Gi.scale-1))),Gi.imageName){var ws=ki[Gi.imageName];mo=ws.sdf,vo=1/(wo=ws.pixelRatio)}var Gs=ti?[Gi.x+Io,Gi.y]:[0,0],Bs=ti?[0,0]:[Gi.x+Io+Fr[0],Gi.y+Fr[1]-no],so=[0,0];es&&(so=Bs,Bs=[0,0]);var Es=(Gi.metrics.left-vo)*Gi.scale-Io+Bs[0],Xo=(-Gi.metrics.top-vo)*Gi.scale+Bs[1],gs=Es+Ea.w*Gi.scale/wo,ma=Xo+Ea.h*Gi.scale/wo,Ba=new t(Es,Xo),Yo=new t(gs,Xo),zo=new t(Es,ma),No=new t(gs,ma);if(es){var So=new t(-Io,Io- -17),qa=-Math.PI/2,Fi=12-Io,sl=new t(22-Fi,-(Gi.imageName?Fi:0)),Is=new(Function.prototype.bind.apply(t,[null].concat(so)));Ba._rotateAround(qa,So)._add(sl)._add(Is),Yo._rotateAround(qa,So)._add(sl)._add(Is),zo._rotateAround(qa,So)._add(sl)._add(Is),No._rotateAround(qa,So)._add(sl)._add(Is)}if(vi){var bl=Math.sin(vi),Ps=Math.cos(vi),ms=[Ps,-bl,bl,Ps];Ba._matMult(ms),Yo._matMult(ms),zo._matMult(ms),No._matMult(ms)}var Xl=new t(0,0),kl=new t(0,0);Ii.push({tl:Ba,tr:Yo,bl:zo,br:No,tex:Ea,writingMode:Tr.writingMode,glyphOffset:Gs,sectionIndex:Gi.sectionIndex,isSDF:mo,pixelOffsetTL:Xl,pixelOffsetBR:kl,minFontScaleX:0,minFontScaleY:0})}}return Ii}(0,K,Ze,ye,ke,ze,ce,S.allowVerticalPlacement),Vn=S.textSizeData,Bn=null;"source"===Vn.kind?(Bn=[128*ye.layout.get("text-size").evaluate(ze,{})])[0]>32640&&C(S.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Vn.kind&&((Bn=[128*$t.compositeTextSizes[0].evaluate(ze,{},bn),128*$t.compositeTextSizes[1].evaluate(ze,{},bn)])[0]>32640||Bn[1]>32640)&&C(S.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),S.addSymbols(S.text,Dn,Bn,Ze,ke,ze,mt,F,ot.lineStartIndex,ot.lineLength,an,bn);for(var tr=0,nr=Tt;tr<nr.length;tr+=1)qt[nr[tr]]=S.text.placedSymbolArray.length-1;return 4*Dn.length}function Nd(S){for(var F in S)return S[F];return null}function ol(S,F,K,ce){var ye=S.compareText;if(F in ye){for(var ke=ye[F],ze=ke.length-1;ze>=0;ze--)if(ce.dist(ke[ze])<K)return!0}else ye[F]=[];return ye[F].push(ce),!1}var Lf=zc.VectorTileFeature.types,Bd=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Th(S,F,K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt,an){var $t=Ze?Math.min(32640,Math.round(Ze[0])):0,bn=Ze?Math.min(32640,Math.round(Ze[1])):0;S.emplaceBack(F,K,Math.round(32*ce),Math.round(32*ye),ke,ze,($t<<1)+(ot?1:0),bn,16*mt,16*Tt,256*qt,256*an)}function jd(S,F,K){S.emplaceBack(F.x,F.y,K),S.emplaceBack(F.x,F.y,K),S.emplaceBack(F.x,F.y,K),S.emplaceBack(F.x,F.y,K)}function a0(S){for(var F=0,K=S.sections;F<K.length;F+=1)if(wi(K[F].text))return!0;return!1}var qc=function(S){this.layoutVertexArray=new yl,this.indexArray=new Qo,this.programConfigurations=S,this.segments=new Gt,this.dynamicLayoutVertexArray=new Do,this.opacityVertexArray=new Qs,this.placedSymbolArray=new Xe};qc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},qc.prototype.upload=function(S,F,K,ce){this.isEmpty()||(K&&(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,Dd.members),this.indexBuffer=S.createIndexBuffer(this.indexArray,F),this.dynamicLayoutVertexBuffer=S.createVertexBuffer(this.dynamicLayoutVertexArray,Zg.members,!0),this.opacityVertexBuffer=S.createVertexBuffer(this.opacityVertexArray,Bd,!0),this.opacityVertexBuffer.itemSize=1),(K||ce)&&this.programConfigurations.upload(S))},qc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},lr("SymbolBuffers",qc);var Gc=function(S,F,K){this.layoutVertexArray=new S,this.layoutAttributes=F,this.indexArray=new K,this.segments=new Gt,this.collisionVertexArray=new Hl};Gc.prototype.upload=function(S){this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=S.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=S.createVertexBuffer(this.collisionVertexArray,ph.members,!0)},Gc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},lr("CollisionBuffers",Gc);var to=function(S){this.collisionBoxArray=S.collisionBoxArray,this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(ze){return ze.id}),this.index=S.index,this.pixelRatio=S.pixelRatio,this.sourceLayerIndex=S.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Sc([]),this.placementViewportMatrix=Sc([]);var F=this.layers[0]._unevaluatedLayout._values;this.textSizeData=yh(this.zoom,F["text-size"]),this.iconSizeData=yh(this.zoom,F["icon-size"]);var K=this.layers[0].layout,ce=K.get("symbol-sort-key"),ye=K.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==ye&&void 0!==ce.constantOr(1),this.sortFeaturesByY=("viewport-y"===ye||"auto"===ye&&!this.sortFeaturesByKey)&&(K.get("text-allow-overlap")||K.get("icon-allow-overlap")||K.get("text-ignore-placement")||K.get("icon-ignore-placement")),"point"===K.get("symbol-placement")&&(this.writingModes=K.get("text-writing-mode").map(function(ze){return qs[ze]})),this.stateDependentLayerIds=this.layers.filter(function(ze){return ze.isStateDependent()}).map(function(ze){return ze.id}),this.sourceID=S.sourceID};to.prototype.createArrays=function(){this.text=new qc(new ho(Dd.members,this.layers,this.zoom,function(S){return/^text/.test(S)})),this.icon=new qc(new ho(Dd.members,this.layers,this.zoom,function(S){return/^icon/.test(S)})),this.glyphOffsetArray=new Dt,this.lineVertexArray=new Ot,this.symbolInstances=new ht},to.prototype.calculateGlyphDependencies=function(S,F,K,ce,ye){for(var ke=0;ke<S.length;ke++)if(F[S.charCodeAt(ke)]=!0,(K||ce)&&ye){var ze=yf[S.charAt(ke)];ze&&(F[ze.charCodeAt(0)]=!0)}},to.prototype.populate=function(S,F,K){var ce=this.layers[0],ye=ce.layout,ke=ye.get("text-font"),ze=ye.get("text-field"),Ze=ye.get("icon-image"),ot=("constant"!==ze.value.kind||ze.value.value instanceof Mn&&!ze.value.value.isEmpty()||ze.value.value.toString().length>0)&&("constant"!==ke.value.kind||ke.value.value.length>0),mt="constant"!==Ze.value.kind||!!Ze.value.value||Object.keys(Ze.parameters).length>0,Tt=ye.get("symbol-sort-key");if(this.features=[],ot||mt){for(var qt=F.iconDependencies,an=F.glyphDependencies,$t=F.availableImages,bn=new Ha(this.zoom),Dn=0,Vn=S;Dn<Vn.length;Dn+=1){var Bn=Vn[Dn],tr=Bn.feature,nr=Bn.id,ur=Bn.index,Tr=Bn.sourceLayerIndex,Fr=ce._featureFilter.needGeometry,ai={type:tr.type,id:nr,properties:tr.properties,geometry:Fr?po(tr):[]};if(ce._featureFilter.filter(bn,ai,K)){Fr||(ai.geometry=po(tr));var ti=void 0;if(ot){var di=ce.getValueAndResolveTokens("text-field",ai,K,$t),ki=Mn.factory(di);a0(ki)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ro()||this.hasRTLText&&eo.isParsed())&&(ti=Xg(ki,ce,ai))}var Si=void 0;if(mt){var vi=ce.getValueAndResolveTokens("icon-image",ai,K,$t);Si=vi instanceof Rn?vi:Rn.fromString(vi)}if(ti||Si){var Ii=this.sortFeaturesByKey?Tt.evaluate(ai,{},K):void 0,Di={id:nr,text:ti,icon:Si,index:ur,sourceLayerIndex:Tr,geometry:po(tr),properties:tr.properties,type:Lf[tr.type],sortKey:Ii};if(this.features.push(Di),Si&&(qt[Si.name]=!0),ti){var Ei=ke.evaluate(ai,{},K).join(","),La="map"===ye.get("text-rotation-alignment")&&"point"!==ye.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(qs.vertical)>=0;for(var Ma=0,Aa=ti.sections;Ma<Aa.length;Ma+=1){var Gi=Aa[Ma];if(Gi.image)qt[Gi.image.name]=!0;else{var Ea=pa(ti.toString()),vo=Gi.fontStack||Ei,mo=an[vo]=an[vo]||{};this.calculateGlyphDependencies(Gi.text,mo,La,this.allowVerticalPlacement,Ea)}}}}}}"line"===ye.get("symbol-placement")&&(this.features=function(wo){var no={},es={},Io=[],As=0;function _s(No){Io.push(wo[No]),As++}function ws(No,So,qa){var Fi=es[No];return delete es[No],es[So]=Fi,Io[Fi].geometry[0].pop(),Io[Fi].geometry[0]=Io[Fi].geometry[0].concat(qa[0]),Fi}function Gs(No,So,qa){var Fi=no[So];return delete no[So],no[No]=Fi,Io[Fi].geometry[0].shift(),Io[Fi].geometry[0]=qa[0].concat(Io[Fi].geometry[0]),Fi}function Bs(No,So,qa){var Fi=qa?So[0][So[0].length-1]:So[0][0];return No+":"+Fi.x+":"+Fi.y}for(var so=0;so<wo.length;so++){var Es=wo[so],Xo=Es.geometry,gs=Es.text?Es.text.toString():null;if(gs){var ma=Bs(gs,Xo),Ba=Bs(gs,Xo,!0);if(ma in es&&Ba in no&&es[ma]!==no[Ba]){var Yo=Gs(ma,Ba,Xo),zo=ws(ma,Ba,Io[Yo].geometry);delete no[ma],delete es[Ba],es[Bs(gs,Io[zo].geometry,!0)]=zo,Io[Yo].geometry=null}else ma in es?ws(ma,Ba,Xo):Ba in no?Gs(ma,Ba,Xo):(_s(so),no[ma]=As-1,es[Ba]=As-1)}else _s(so)}return Io.filter(function(No){return No.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(wo,no){return wo.sortKey-no.sortKey})}},to.prototype.update=function(S,F,K){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(S,F,this.layers,K),this.icon.programConfigurations.updatePaintArrays(S,F,this.layers,K))},to.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},to.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},to.prototype.upload=function(S){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(S),this.iconCollisionBox.upload(S)),this.text.upload(S,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(S,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},to.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},to.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},to.prototype.addToLineVertexArray=function(S,F){var K=this.lineVertexArray.length;if(void 0!==S.segment){for(var ce=S.dist(F[S.segment+1]),ye=S.dist(F[S.segment]),ke={},ze=S.segment+1;ze<F.length;ze++)ke[ze]={x:F[ze].x,y:F[ze].y,tileUnitDistanceFromAnchor:ce},ze<F.length-1&&(ce+=F[ze+1].dist(F[ze]));for(var Ze=S.segment||0;Ze>=0;Ze--)ke[Ze]={x:F[Ze].x,y:F[Ze].y,tileUnitDistanceFromAnchor:ye},Ze>0&&(ye+=F[Ze-1].dist(F[Ze]));for(var ot=0;ot<F.length;ot++){var mt=ke[ot];this.lineVertexArray.emplaceBack(mt.x,mt.y,mt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:K,lineLength:this.lineVertexArray.length-K}},to.prototype.addSymbols=function(S,F,K,ce,ye,ke,ze,Ze,ot,mt,Tt,qt){for(var an=S.indexArray,$t=S.layoutVertexArray,bn=S.segments.prepareSegment(4*F.length,$t,an,ke.sortKey),Dn=this.glyphOffsetArray.length,Vn=bn.vertexLength,Bn=this.allowVerticalPlacement&&ze===qs.vertical?Math.PI/2:0,tr=ke.text&&ke.text.sections,nr=0;nr<F.length;nr++){var ur=F[nr],Tr=ur.tl,Fr=ur.tr,ai=ur.bl,ti=ur.br,di=ur.tex,ki=ur.pixelOffsetTL,Si=ur.pixelOffsetBR,vi=ur.minFontScaleX,Ii=ur.minFontScaleY,Di=ur.glyphOffset,Ei=ur.isSDF,La=ur.sectionIndex,Ma=bn.vertexLength,Aa=Di[1];Th($t,Ze.x,Ze.y,Tr.x,Aa+Tr.y,di.x,di.y,K,Ei,ki.x,ki.y,vi,Ii),Th($t,Ze.x,Ze.y,Fr.x,Aa+Fr.y,di.x+di.w,di.y,K,Ei,Si.x,ki.y,vi,Ii),Th($t,Ze.x,Ze.y,ai.x,Aa+ai.y,di.x,di.y+di.h,K,Ei,ki.x,Si.y,vi,Ii),Th($t,Ze.x,Ze.y,ti.x,Aa+ti.y,di.x+di.w,di.y+di.h,K,Ei,Si.x,Si.y,vi,Ii),jd(S.dynamicLayoutVertexArray,Ze,Bn),an.emplaceBack(Ma,Ma+1,Ma+2),an.emplaceBack(Ma+1,Ma+2,Ma+3),bn.vertexLength+=4,bn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Di[0]),nr!==F.length-1&&La===F[nr+1].sectionIndex||S.programConfigurations.populatePaintArrays($t.length,ke,ke.index,{},qt,tr&&tr[La])}S.placedSymbolArray.emplaceBack(Ze.x,Ze.y,Dn,this.glyphOffsetArray.length-Dn,Vn,ot,mt,Ze.segment,K?K[0]:0,K?K[1]:0,ce[0],ce[1],ze,0,!1,0,Tt)},to.prototype._addCollisionDebugVertex=function(S,F,K,ce,ye,ke){return F.emplaceBack(0,0),S.emplaceBack(K.x,K.y,ce,ye,Math.round(ke.x),Math.round(ke.y))},to.prototype.addCollisionDebugVertices=function(S,F,K,ce,ye,ke,ze){var Ze=ye.segments.prepareSegment(4,ye.layoutVertexArray,ye.indexArray),ot=Ze.vertexLength,mt=ye.layoutVertexArray,Tt=ye.collisionVertexArray,qt=ze.anchorX,an=ze.anchorY;this._addCollisionDebugVertex(mt,Tt,ke,qt,an,new t(S,F)),this._addCollisionDebugVertex(mt,Tt,ke,qt,an,new t(K,F)),this._addCollisionDebugVertex(mt,Tt,ke,qt,an,new t(K,ce)),this._addCollisionDebugVertex(mt,Tt,ke,qt,an,new t(S,ce)),Ze.vertexLength+=4;var $t=ye.indexArray;$t.emplaceBack(ot,ot+1),$t.emplaceBack(ot+1,ot+2),$t.emplaceBack(ot+2,ot+3),$t.emplaceBack(ot+3,ot),Ze.primitiveLength+=4},to.prototype.addDebugCollisionBoxes=function(S,F,K,ce){for(var ye=S;ye<F;ye++){var ke=this.collisionBoxArray.get(ye);this.addCollisionDebugVertices(ke.x1,ke.y1,ke.x2,ke.y2,ce?this.textCollisionBox:this.iconCollisionBox,ke.anchorPoint,K)}},to.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Gc(zs,gh.members,V),this.iconCollisionBox=new Gc(zs,gh.members,V);for(var S=0;S<this.symbolInstances.length;S++){var F=this.symbolInstances.get(S);this.addDebugCollisionBoxes(F.textBoxStartIndex,F.textBoxEndIndex,F,!0),this.addDebugCollisionBoxes(F.verticalTextBoxStartIndex,F.verticalTextBoxEndIndex,F,!0),this.addDebugCollisionBoxes(F.iconBoxStartIndex,F.iconBoxEndIndex,F,!1),this.addDebugCollisionBoxes(F.verticalIconBoxStartIndex,F.verticalIconBoxEndIndex,F,!1)}},to.prototype._deserializeCollisionBoxesForSymbol=function(S,F,K,ce,ye,ke,ze,Ze,ot){for(var mt={},Tt=F;Tt<K;Tt++){var qt=S.get(Tt);mt.textBox={x1:qt.x1,y1:qt.y1,x2:qt.x2,y2:qt.y2,anchorPointX:qt.anchorPointX,anchorPointY:qt.anchorPointY},mt.textFeatureIndex=qt.featureIndex;break}for(var an=ce;an<ye;an++){var $t=S.get(an);mt.verticalTextBox={x1:$t.x1,y1:$t.y1,x2:$t.x2,y2:$t.y2,anchorPointX:$t.anchorPointX,anchorPointY:$t.anchorPointY},mt.verticalTextFeatureIndex=$t.featureIndex;break}for(var bn=ke;bn<ze;bn++){var Dn=S.get(bn);mt.iconBox={x1:Dn.x1,y1:Dn.y1,x2:Dn.x2,y2:Dn.y2,anchorPointX:Dn.anchorPointX,anchorPointY:Dn.anchorPointY},mt.iconFeatureIndex=Dn.featureIndex;break}for(var Vn=Ze;Vn<ot;Vn++){var Bn=S.get(Vn);mt.verticalIconBox={x1:Bn.x1,y1:Bn.y1,x2:Bn.x2,y2:Bn.y2,anchorPointX:Bn.anchorPointX,anchorPointY:Bn.anchorPointY},mt.verticalIconFeatureIndex=Bn.featureIndex;break}return mt},to.prototype.deserializeCollisionBoxes=function(S){this.collisionArrays=[];for(var F=0;F<this.symbolInstances.length;F++){var K=this.symbolInstances.get(F);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(S,K.textBoxStartIndex,K.textBoxEndIndex,K.verticalTextBoxStartIndex,K.verticalTextBoxEndIndex,K.iconBoxStartIndex,K.iconBoxEndIndex,K.verticalIconBoxStartIndex,K.verticalIconBoxEndIndex))}},to.prototype.hasTextData=function(){return this.text.segments.get().length>0},to.prototype.hasIconData=function(){return this.icon.segments.get().length>0},to.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},to.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},to.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},to.prototype.addIndicesForPlacedSymbol=function(S,F){for(var K=S.placedSymbolArray.get(F),ce=K.vertexStartIndex+4*K.numGlyphs,ye=K.vertexStartIndex;ye<ce;ye+=4)S.indexArray.emplaceBack(ye,ye+1,ye+2),S.indexArray.emplaceBack(ye+1,ye+2,ye+3)},to.prototype.getSortedSymbolIndexes=function(S){if(this.sortedAngle===S&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var F=Math.sin(S),K=Math.cos(S),ce=[],ye=[],ke=[],ze=0;ze<this.symbolInstances.length;++ze){ke.push(ze);var Ze=this.symbolInstances.get(ze);ce.push(0|Math.round(F*Ze.anchorX+K*Ze.anchorY)),ye.push(Ze.featureIndex)}return ke.sort(function(ot,mt){return ce[ot]-ce[mt]||ye[mt]-ye[ot]}),ke},to.prototype.addToSortKeyRanges=function(S,F){var K=this.sortKeyRanges[this.sortKeyRanges.length-1];K&&K.sortKey===F?K.symbolInstanceEnd=S+1:this.sortKeyRanges.push({sortKey:F,symbolInstanceStart:S,symbolInstanceEnd:S+1})},to.prototype.sortFeatures=function(S){var F=this;if(this.sortFeaturesByY&&this.sortedAngle!==S&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(S),this.sortedAngle=S,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var K=0,ce=this.symbolInstanceIndexes;K<ce.length;K+=1){var ke=this.symbolInstances.get(ce[K]);this.featureSortOrder.push(ke.featureIndex),[ke.rightJustifiedTextSymbolIndex,ke.centerJustifiedTextSymbolIndex,ke.leftJustifiedTextSymbolIndex].forEach(function(ze,Ze,ot){ze>=0&&ot.indexOf(ze)===Ze&&F.addIndicesForPlacedSymbol(F.text,ze)}),ke.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,ke.verticalPlacedTextSymbolIndex),ke.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ke.placedIconSymbolIndex),ke.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ke.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},lr("SymbolBucket",to,{omit:["layers","collisionBoxArray","features","compareText"]}),to.MAX_GLYPHS=65535,to.addDynamicAttributes=jd;var o0=new Zr({"symbol-placement":new Ci(je.layout_symbol["symbol-placement"]),"symbol-spacing":new Ci(je.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ci(je.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Vi(je.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ci(je.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ci(je.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ci(je.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ci(je.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ci(je.layout_symbol["icon-rotation-alignment"]),"icon-size":new Vi(je.layout_symbol["icon-size"]),"icon-text-fit":new Ci(je.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ci(je.layout_symbol["icon-text-fit-padding"]),"icon-image":new Vi(je.layout_symbol["icon-image"]),"icon-rotate":new Vi(je.layout_symbol["icon-rotate"]),"icon-padding":new Ci(je.layout_symbol["icon-padding"]),"icon-keep-upright":new Ci(je.layout_symbol["icon-keep-upright"]),"icon-offset":new Vi(je.layout_symbol["icon-offset"]),"icon-anchor":new Vi(je.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ci(je.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ci(je.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ci(je.layout_symbol["text-rotation-alignment"]),"text-field":new Vi(je.layout_symbol["text-field"]),"text-font":new Vi(je.layout_symbol["text-font"]),"text-size":new Vi(je.layout_symbol["text-size"]),"text-max-width":new Vi(je.layout_symbol["text-max-width"]),"text-line-height":new Ci(je.layout_symbol["text-line-height"]),"text-letter-spacing":new Vi(je.layout_symbol["text-letter-spacing"]),"text-justify":new Vi(je.layout_symbol["text-justify"]),"text-radial-offset":new Vi(je.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ci(je.layout_symbol["text-variable-anchor"]),"text-anchor":new Vi(je.layout_symbol["text-anchor"]),"text-max-angle":new Ci(je.layout_symbol["text-max-angle"]),"text-writing-mode":new Ci(je.layout_symbol["text-writing-mode"]),"text-rotate":new Vi(je.layout_symbol["text-rotate"]),"text-padding":new Ci(je.layout_symbol["text-padding"]),"text-keep-upright":new Ci(je.layout_symbol["text-keep-upright"]),"text-transform":new Vi(je.layout_symbol["text-transform"]),"text-offset":new Vi(je.layout_symbol["text-offset"]),"text-allow-overlap":new Ci(je.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ci(je.layout_symbol["text-ignore-placement"]),"text-optional":new Ci(je.layout_symbol["text-optional"])}),Ud={paint:new Zr({"icon-opacity":new Vi(je.paint_symbol["icon-opacity"]),"icon-color":new Vi(je.paint_symbol["icon-color"]),"icon-halo-color":new Vi(je.paint_symbol["icon-halo-color"]),"icon-halo-width":new Vi(je.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Vi(je.paint_symbol["icon-halo-blur"]),"icon-translate":new Ci(je.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ci(je.paint_symbol["icon-translate-anchor"]),"text-opacity":new Vi(je.paint_symbol["text-opacity"]),"text-color":new Vi(je.paint_symbol["text-color"],{runtimeType:Et,getOverride:function(S){return S.textColor},hasOverride:function(S){return!!S.textColor}}),"text-halo-color":new Vi(je.paint_symbol["text-halo-color"]),"text-halo-width":new Vi(je.paint_symbol["text-halo-width"]),"text-halo-blur":new Vi(je.paint_symbol["text-halo-blur"]),"text-translate":new Ci(je.paint_symbol["text-translate"]),"text-translate-anchor":new Ci(je.paint_symbol["text-translate-anchor"])}),layout:o0},Yc=function(S){this.type=S.property.overrides?S.property.overrides.runtimeType:Wt,this.defaultValue=S};Yc.prototype.evaluate=function(S){if(S.formattedSection){var F=this.defaultValue.property.overrides;if(F&&F.hasOverride(S.formattedSection))return F.getOverride(S.formattedSection)}return S.feature&&S.featureState?this.defaultValue.evaluate(S.feature,S.featureState):this.defaultValue.property.specification.default},Yc.prototype.eachChild=function(S){this.defaultValue.isConstant()||S(this.defaultValue.value._styleExpression.expression)},Yc.prototype.outputDefined=function(){return!1},Yc.prototype.serialize=function(){return null},lr("FormatSectionOverride",Yc,{omit:["defaultValue"]});var Vd=function(S){function F(K){S.call(this,K,Ud)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.recalculate=function(K,ce){if(S.prototype.recalculate.call(this,K,ce),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var ye=this.layout.get("text-writing-mode");if(ye){for(var ke=[],ze=0,Ze=ye;ze<Ze.length;ze+=1){var ot=Ze[ze];ke.indexOf(ot)<0&&ke.push(ot)}this.layout._values["text-writing-mode"]=ke}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},F.prototype.getValueAndResolveTokens=function(K,ce,ye,ke){var ot,ze=this.layout.get(K).evaluate(ce,{},ye,ke),Ze=this._unevaluatedLayout._values[K];return Ze.isDataDriven()||rn(Ze.value)||!ze?ze:(ot=ce.properties,ze.replace(/{([^{}]+)}/g,function(Tt,qt){return qt in ot?String(ot[qt]):""}))},F.prototype.createBucket=function(K){return new to(K)},F.prototype.queryRadius=function(){return 0},F.prototype.queryIntersectsFeature=function(){return!1},F.prototype._setPaintOverrides=function(){for(var K=0,ce=Ud.paint.overridableProperties;K<ce.length;K+=1){var ye=ce[K];if(F.hasPaintOverride(this.layout,ye)){var ot,ke=this.paint.get(ye),ze=new Yc(ke),Ze=new on(ze,ke.property.specification);ot="constant"===ke.value.kind||"source"===ke.value.kind?new yn("source",Ze):new mn("composite",Ze,ke.value.zoomStops,ke.value._interpolationType),this.paint._values[ye]=new Go(ke.property,ot,ke.parameters)}}},F.prototype._handleOverridablePaintPropertyUpdate=function(K,ce,ye){return!(!this.layout||ce.isDataDriven()||ye.isDataDriven())&&F.hasPaintOverride(this.layout,K)},F.hasPaintOverride=function(K,ce){var ye=K.get("text-field"),ke=Ud.paint.properties[ce],ze=!1,Ze=function(Tt){for(var qt=0,an=Tt;qt<an.length;qt+=1)if(ke.overrides&&ke.overrides.hasOverride(an[qt]))return void(ze=!0)};if("constant"===ye.value.kind&&ye.value.value instanceof Mn)Ze(ye.value.value.sections);else if("source"===ye.value.kind){var ot=function(Tt){ze||(Tt instanceof Ir&&rr(Tt.value)===dt?Ze(Tt.value.sections):Tt instanceof Dr?Ze(Tt.sections):Tt.eachChild(ot))},mt=ye.value;mt._styleExpression&&ot(mt._styleExpression.expression)}return ze},F}(la),hm={paint:new Zr({"background-color":new Ci(je.paint_background["background-color"]),"background-pattern":new tu(je.paint_background["background-pattern"]),"background-opacity":new Ci(je.paint_background["background-opacity"])})},dm=function(S){function F(K){S.call(this,K,hm)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F}(la),Hd={paint:new Zr({"raster-opacity":new Ci(je.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ci(je.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ci(je.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ci(je.paint_raster["raster-brightness-max"]),"raster-saturation":new Ci(je.paint_raster["raster-saturation"]),"raster-contrast":new Ci(je.paint_raster["raster-contrast"]),"raster-resampling":new Ci(je.paint_raster["raster-resampling"]),"raster-fade-duration":new Ci(je.paint_raster["raster-fade-duration"])})},pm=function(S){function F(K){S.call(this,K,Hd)}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F}(la),gm=function(S){function F(K){S.call(this,K,{}),this.implementation=K}return S&&(F.__proto__=S),(F.prototype=Object.create(S&&S.prototype)).constructor=F,F.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},F.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},F.prototype.recalculate=function(){},F.prototype.updateTransitions=function(){},F.prototype.hasTransition=function(){},F.prototype.serialize=function(){},F.prototype.onAdd=function(K){this.implementation.onAdd&&this.implementation.onAdd(K,K.painter.context.gl)},F.prototype.onRemove=function(K){this.implementation.onRemove&&this.implementation.onRemove(K,K.painter.context.gl)},F}(la),Wc={circle:Rp,heatmap:Iy,hillshade:Oy,fill:Vg,"fill-extrusion":Ed,line:Ny,symbol:Vd,background:dm,raster:pm},s0=self.HTMLImageElement,l0=self.HTMLCanvasElement,u0=self.HTMLVideoElement,c0=self.ImageData,Mh=self.ImageBitmap,Nu=function(S,F,K,ce){this.context=S,this.format=K,this.texture=S.gl.createTexture(),this.update(F,ce)};Nu.prototype.update=function(S,F,K){var ce=S.width,ye=S.height,ke=!(this.size&&this.size[0]===ce&&this.size[1]===ye||K),ze=this.context,Ze=ze.gl;if(this.useMipmap=Boolean(F&&F.useMipmap),Ze.bindTexture(Ze.TEXTURE_2D,this.texture),ze.pixelStoreUnpackFlipY.set(!1),ze.pixelStoreUnpack.set(1),ze.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ze.RGBA&&(!F||!1!==F.premultiply)),ke)this.size=[ce,ye],S instanceof s0||S instanceof l0||S instanceof u0||S instanceof c0||Mh&&S instanceof Mh?Ze.texImage2D(Ze.TEXTURE_2D,0,this.format,this.format,Ze.UNSIGNED_BYTE,S):Ze.texImage2D(Ze.TEXTURE_2D,0,this.format,ce,ye,0,this.format,Ze.UNSIGNED_BYTE,S.data);else{var ot=K||{x:0,y:0},mt=ot.x,Tt=ot.y;S instanceof s0||S instanceof l0||S instanceof u0||S instanceof c0||Mh&&S instanceof Mh?Ze.texSubImage2D(Ze.TEXTURE_2D,0,mt,Tt,Ze.RGBA,Ze.UNSIGNED_BYTE,S):Ze.texSubImage2D(Ze.TEXTURE_2D,0,mt,Tt,ce,ye,Ze.RGBA,Ze.UNSIGNED_BYTE,S.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ze.generateMipmap(Ze.TEXTURE_2D)},Nu.prototype.bind=function(S,F,K){var ce=this.context.gl;ce.bindTexture(ce.TEXTURE_2D,this.texture),K!==ce.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(K=ce.LINEAR),S!==this.filter&&(ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,S),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,K||S),this.filter=S),F!==this.wrap&&(ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,F),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,F),this.wrap=F)},Nu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Nu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var qd=function(S){var F=this;this._callback=S,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){F._triggered=!1,F._callback()})};qd.prototype.trigger=function(){var S=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){S._triggered=!1,S._callback()},0))},qd.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Zc=function(S,F,K){this.target=S,this.parent=F,this.mapId=K,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},s(["receive","process"],this),this.invoker=new qd(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=D()?S:self};function f0(S,F,K){var ce=2*Math.PI*6378137/256/Math.pow(2,K);return[S*ce-2*Math.PI*6378137/2,F*ce-2*Math.PI*6378137/2]}Zc.prototype.send=function(S,F,K,ce,ye){var ke=this;void 0===ye&&(ye=!1);var ze=Math.round(1e18*Math.random()).toString(36).substring(0,10);K&&(this.callbacks[ze]=K);var Ze=j(this.globalScope)?void 0:[];return this.target.postMessage({id:ze,type:S,hasCallback:!!K,targetMapId:ce,mustQueue:ye,sourceMapId:this.mapId,data:_i(F,Ze)},Ze),{cancel:function(){K&&delete ke.callbacks[ze],ke.target.postMessage({id:ze,type:"<cancel>",targetMapId:ce,sourceMapId:ke.mapId})}}},Zc.prototype.receive=function(S){var F=S.data,K=F.id;if(K&&(!F.targetMapId||this.mapId===F.targetMapId))if("<cancel>"===F.type){delete this.tasks[K];var ce=this.cancelCallbacks[K];delete this.cancelCallbacks[K],ce&&ce()}else D()||F.mustQueue?(this.tasks[K]=F,this.taskQueue.push(K),this.invoker.trigger()):this.processTask(K,F)},Zc.prototype.process=function(){if(this.taskQueue.length){var S=this.taskQueue.shift(),F=this.tasks[S];delete this.tasks[S],this.taskQueue.length&&this.invoker.trigger(),F&&this.processTask(S,F)}},Zc.prototype.processTask=function(S,F){var K=this;if("<response>"===F.type){var ce=this.callbacks[S];delete this.callbacks[S],ce&&(F.error?ce(Yi(F.error)):ce(null,Yi(F.data)))}else{var ye=!1,ke=j(this.globalScope)?void 0:[],ze=F.hasCallback?function(Tt,qt){ye=!0,delete K.cancelCallbacks[S],K.target.postMessage({id:S,type:"<response>",sourceMapId:K.mapId,error:Tt?_i(Tt):null,data:_i(qt,ke)},ke)}:function(Tt){ye=!0},Ze=null,ot=Yi(F.data);if(this.parent[F.type])Ze=this.parent[F.type](F.sourceMapId,ot,ze);else if(this.parent.getWorkerSource){var mt=F.type.split(".");Ze=this.parent.getWorkerSource(F.sourceMapId,mt[0],ot.source)[mt[1]](ot,ze)}else ze(new Error("Could not find function "+F.type));!ye&&Ze&&Ze.cancel&&(this.cancelCallbacks[S]=Ze.cancel)}},Zc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var as=function(S,F){S&&(F?this.setSouthWest(S).setNorthEast(F):4===S.length?this.setSouthWest([S[0],S[1]]).setNorthEast([S[2],S[3]]):this.setSouthWest(S[0]).setNorthEast(S[1]))};as.prototype.setNorthEast=function(S){return this._ne=S instanceof _o?new _o(S.lng,S.lat):_o.convert(S),this},as.prototype.setSouthWest=function(S){return this._sw=S instanceof _o?new _o(S.lng,S.lat):_o.convert(S),this},as.prototype.extend=function(S){var F,K,ce=this._sw,ye=this._ne;if(S instanceof _o)F=S,K=S;else{if(!(S instanceof as))return Array.isArray(S)?4===S.length||S.every(Array.isArray)?this.extend(as.convert(S)):this.extend(_o.convert(S)):this;if(K=S._ne,!(F=S._sw)||!K)return this}return ce||ye?(ce.lng=Math.min(F.lng,ce.lng),ce.lat=Math.min(F.lat,ce.lat),ye.lng=Math.max(K.lng,ye.lng),ye.lat=Math.max(K.lat,ye.lat)):(this._sw=new _o(F.lng,F.lat),this._ne=new _o(K.lng,K.lat)),this},as.prototype.getCenter=function(){return new _o((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},as.prototype.getSouthWest=function(){return this._sw},as.prototype.getNorthEast=function(){return this._ne},as.prototype.getNorthWest=function(){return new _o(this.getWest(),this.getNorth())},as.prototype.getSouthEast=function(){return new _o(this.getEast(),this.getSouth())},as.prototype.getWest=function(){return this._sw.lng},as.prototype.getSouth=function(){return this._sw.lat},as.prototype.getEast=function(){return this._ne.lng},as.prototype.getNorth=function(){return this._ne.lat},as.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},as.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},as.prototype.isEmpty=function(){return!(this._sw&&this._ne)},as.prototype.contains=function(S){var F=_o.convert(S),K=F.lng,ce=F.lat,ke=this._sw.lng<=K&&K<=this._ne.lng;return this._sw.lng>this._ne.lng&&(ke=this._sw.lng>=K&&K>=this._ne.lng),this._sw.lat<=ce&&ce<=this._ne.lat&&ke},as.convert=function(S){return!S||S instanceof as?S:new as(S)};var _o=function(S,F){if(isNaN(S)||isNaN(F))throw new Error("Invalid LngLat object: ("+S+", "+F+")");if(this.lng=+S,this.lat=+F,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};_o.prototype.wrap=function(){return new _o(f(this.lng,-180,180),this.lat)},_o.prototype.toArray=function(){return[this.lng,this.lat]},_o.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},_o.prototype.distanceTo=function(S){var F=Math.PI/180,K=this.lat*F,ce=S.lat*F,ye=Math.sin(K)*Math.sin(ce)+Math.cos(K)*Math.cos(ce)*Math.cos((S.lng-this.lng)*F);return 6371008.8*Math.acos(Math.min(ye,1))},_o.prototype.toBounds=function(S){void 0===S&&(S=0);var F=360*S/40075017,K=F/Math.cos(Math.PI/180*this.lat);return new as(new _o(this.lng-K,this.lat-F),new _o(this.lng+K,this.lat+F))},_o.convert=function(S){if(S instanceof _o)return S;if(Array.isArray(S)&&(2===S.length||3===S.length))return new _o(Number(S[0]),Number(S[1]));if(!Array.isArray(S)&&"object"==typeof S&&null!==S)return new _o(Number("lng"in S?S.lng:S.lon),Number(S.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var h0=2*Math.PI*6371008.8;function d0(S){return h0*Math.cos(S*Math.PI/180)}function p0(S){return(180+S)/360}function cc(S){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+S*Math.PI/360)))/360}function Wl(S,F){return S/d0(F)}function g0(S){return 360/Math.PI*Math.atan(Math.exp((180-360*S)*Math.PI/180))-90}var Xc=function(S,F,K){void 0===K&&(K=0),this.x=+S,this.y=+F,this.z=+K};Xc.fromLngLat=function(S,F){void 0===F&&(F=0);var K=_o.convert(S);return new Xc(p0(K.lng),cc(K.lat),Wl(F,K.lat))},Xc.prototype.toLngLat=function(){return new _o(360*this.x-180,g0(this.y))},Xc.prototype.toAltitude=function(){return this.z*d0(g0(this.y))},Xc.prototype.meterInMercatorCoordinateUnits=function(){return 1/h0*(S=g0(this.y),1/Math.cos(S*Math.PI/180));var S};var Bu=function(S,F,K){this.z=S,this.x=F,this.y=K,this.key=fc(0,S,S,F,K)};Bu.prototype.equals=function(S){return this.z===S.z&&this.x===S.x&&this.y===S.y},Bu.prototype.url=function(S,F){var K,ce,ye,ke,ze,Ze=(ce=this.y,ye=this.z,ke=f0(256*(K=this.x),256*(ce=Math.pow(2,ye)-ce-1),ye),ze=f0(256*(K+1),256*(ce+1),ye),ke[0]+","+ke[1]+","+ze[0]+","+ze[1]),ot=function(mt,Tt,qt){for(var an,$t="",bn=mt;bn>0;bn--)$t+=(Tt&(an=1<<bn-1)?1:0)+(qt&an?2:0);return $t}(this.z,this.x,this.y);return S[(this.x+this.y)%S.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===F?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ot).replace("{bbox-epsg-3857}",Ze)},Bu.prototype.getTilePoint=function(S){var F=Math.pow(2,this.z);return new t(8192*(S.x*F-this.x),8192*(S.y*F-this.y))},Bu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var mm=function(S,F){this.wrap=S,this.canonical=F,this.key=fc(S,F.z,F.z,F.x,F.y)},$a=function(S,F,K,ce,ye){this.overscaledZ=S,this.wrap=F,this.canonical=new Bu(K,+ce,+ye),this.key=fc(F,S,K,ce,ye)};function fc(S,F,K,ce,ye){(S*=2)<0&&(S=-1*S-1);var ke=1<<K;return(ke*ke*S+ke*ye+ce).toString(36)+K.toString(36)+F.toString(36)}$a.prototype.equals=function(S){return this.overscaledZ===S.overscaledZ&&this.wrap===S.wrap&&this.canonical.equals(S.canonical)},$a.prototype.scaledTo=function(S){var F=this.canonical.z-S;return S>this.canonical.z?new $a(S,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new $a(S,this.wrap,S,this.canonical.x>>F,this.canonical.y>>F)},$a.prototype.calculateScaledKey=function(S,F){var K=this.canonical.z-S;return S>this.canonical.z?fc(this.wrap*+F,S,this.canonical.z,this.canonical.x,this.canonical.y):fc(this.wrap*+F,S,S,this.canonical.x>>K,this.canonical.y>>K)},$a.prototype.isChildOf=function(S){if(S.wrap!==this.wrap)return!1;var F=this.canonical.z-S.canonical.z;return 0===S.overscaledZ||S.overscaledZ<this.overscaledZ&&S.canonical.x===this.canonical.x>>F&&S.canonical.y===this.canonical.y>>F},$a.prototype.children=function(S){if(this.overscaledZ>=S)return[new $a(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var F=this.canonical.z+1,K=2*this.canonical.x,ce=2*this.canonical.y;return[new $a(F,this.wrap,F,K,ce),new $a(F,this.wrap,F,K+1,ce),new $a(F,this.wrap,F,K,ce+1),new $a(F,this.wrap,F,K+1,ce+1)]},$a.prototype.isLessThan=function(S){return this.wrap<S.wrap||!(this.wrap>S.wrap)&&(this.overscaledZ<S.overscaledZ||!(this.overscaledZ>S.overscaledZ)&&(this.canonical.x<S.canonical.x||!(this.canonical.x>S.canonical.x)&&this.canonical.y<S.canonical.y))},$a.prototype.wrapped=function(){return new $a(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},$a.prototype.unwrapTo=function(S){return new $a(this.overscaledZ,S,this.canonical.z,this.canonical.x,this.canonical.y)},$a.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},$a.prototype.toUnwrapped=function(){return new mm(this.wrap,this.canonical)},$a.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},$a.prototype.getTilePoint=function(S){return this.canonical.getTilePoint(new Xc(S.x-this.wrap,S.y))},lr("CanonicalTileID",Bu),lr("OverscaledTileID",$a,{omit:["posMatrix"]});var Zl=function(S,F,K){if(this.uid=S,F.height!==F.width)throw new RangeError("DEM tiles must be square");if(K&&"mapbox"!==K&&"terrarium"!==K)return C('"'+K+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=F.height;var ce=this.dim=F.height-2;this.data=new Uint32Array(F.data.buffer),this.encoding=K||"mapbox";for(var ye=0;ye<ce;ye++)this.data[this._idx(-1,ye)]=this.data[this._idx(0,ye)],this.data[this._idx(ce,ye)]=this.data[this._idx(ce-1,ye)],this.data[this._idx(ye,-1)]=this.data[this._idx(ye,0)],this.data[this._idx(ye,ce)]=this.data[this._idx(ye,ce-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ce,-1)]=this.data[this._idx(ce-1,0)],this.data[this._idx(-1,ce)]=this.data[this._idx(0,ce-1)],this.data[this._idx(ce,ce)]=this.data[this._idx(ce-1,ce-1)]};Zl.prototype.get=function(S,F){var K=new Uint8Array(this.data.buffer),ce=4*this._idx(S,F);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(K[ce],K[ce+1],K[ce+2])},Zl.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Zl.prototype._idx=function(S,F){if(S<-1||S>=this.dim+1||F<-1||F>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(F+1)*this.stride+(S+1)},Zl.prototype._unpackMapbox=function(S,F,K){return(256*S*256+256*F+K)/10-1e4},Zl.prototype._unpackTerrarium=function(S,F,K){return 256*S+F+K/256-32768},Zl.prototype.getPixels=function(){return new dl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Zl.prototype.backfillBorder=function(S,F,K){if(this.dim!==S.dim)throw new Error("dem dimension mismatch");var ce=F*this.dim,ye=F*this.dim+this.dim,ke=K*this.dim,ze=K*this.dim+this.dim;switch(F){case-1:ce=ye-1;break;case 1:ye=ce+1}switch(K){case-1:ke=ze-1;break;case 1:ze=ke+1}for(var Ze=-F*this.dim,ot=-K*this.dim,mt=ke;mt<ze;mt++)for(var Tt=ce;Tt<ye;Tt++)this.data[this._idx(Tt,mt)]=S.data[this._idx(Tt+Ze,mt+ot)]},lr("DEMData",Zl);var kh=function(S){this._stringToNumber={},this._numberToString=[];for(var F=0;F<S.length;F++){var K=S[F];this._stringToNumber[K]=F,this._numberToString[F]=K}};kh.prototype.encode=function(S){return this._stringToNumber[S]},kh.prototype.decode=function(S){return this._numberToString[S]};var If=function(S,F,K,ce,ye){this.type="Feature",this._vectorTileFeature=S,S._z=F,S._x=K,S._y=ce,this.properties=S.properties,this.id=ye},hc={geometry:{configurable:!0}};hc.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},hc.geometry.set=function(S){this._geometry=S},If.prototype.toJSON=function(){var S={geometry:this.geometry};for(var F in this)"_geometry"!==F&&"_vectorTileFeature"!==F&&(S[F]=this[F]);return S},Object.defineProperties(If.prototype,hc);var dc=function(){this.state={},this.stateChanges={},this.deletedStates={}};dc.prototype.updateState=function(S,F,K){var ce=String(F);if(this.stateChanges[S]=this.stateChanges[S]||{},this.stateChanges[S][ce]=this.stateChanges[S][ce]||{},l(this.stateChanges[S][ce],K),null===this.deletedStates[S])for(var ye in this.deletedStates[S]={},this.state[S])ye!==ce&&(this.deletedStates[S][ye]=null);else if(this.deletedStates[S]&&null===this.deletedStates[S][ce])for(var ke in this.deletedStates[S][ce]={},this.state[S][ce])K[ke]||(this.deletedStates[S][ce][ke]=null);else for(var ze in K)this.deletedStates[S]&&this.deletedStates[S][ce]&&null===this.deletedStates[S][ce][ze]&&delete this.deletedStates[S][ce][ze]},dc.prototype.removeFeatureState=function(S,F,K){if(null!==this.deletedStates[S]){var ce=String(F);if(this.deletedStates[S]=this.deletedStates[S]||{},K&&void 0!==F)null!==this.deletedStates[S][ce]&&(this.deletedStates[S][ce]=this.deletedStates[S][ce]||{},this.deletedStates[S][ce][K]=null);else if(void 0!==F)if(this.stateChanges[S]&&this.stateChanges[S][ce])for(K in this.deletedStates[S][ce]={},this.stateChanges[S][ce])this.deletedStates[S][ce][K]=null;else this.deletedStates[S][ce]=null;else this.deletedStates[S]=null}},dc.prototype.getState=function(S,F){var K=String(F),ke=l({},(this.state[S]||{})[K],(this.stateChanges[S]||{})[K]);if(null===this.deletedStates[S])return{};if(this.deletedStates[S]){var ze=this.deletedStates[S][F];if(null===ze)return{};for(var Ze in ze)delete ke[Ze]}return ke},dc.prototype.initializeTileState=function(S,F){S.setFeatureState(this.state,F)},dc.prototype.coalesceChanges=function(S,F){var K={};for(var ce in this.stateChanges){this.state[ce]=this.state[ce]||{};var ye={};for(var ke in this.stateChanges[ce])this.state[ce][ke]||(this.state[ce][ke]={}),l(this.state[ce][ke],this.stateChanges[ce][ke]),ye[ke]=this.state[ce][ke];K[ce]=ye}for(var ze in this.deletedStates){this.state[ze]=this.state[ze]||{};var Ze={};if(null===this.deletedStates[ze])for(var ot in this.state[ze])Ze[ot]={},this.state[ze][ot]={};else for(var mt in this.deletedStates[ze]){if(null===this.deletedStates[ze][mt])this.state[ze][mt]={};else for(var Tt=0,qt=Object.keys(this.deletedStates[ze][mt]);Tt<qt.length;Tt+=1)delete this.state[ze][mt][qt[Tt]];Ze[mt]=this.state[ze][mt]}K[ze]=K[ze]||{},l(K[ze],Ze)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(K).length)for(var $t in S)S[$t].setFeatureState(K,F)};var ou=function(S,F){this.tileID=S,this.x=S.canonical.x,this.y=S.canonical.y,this.z=S.canonical.z,this.grid=new Ar(8192,16,0),this.grid3D=new Ar(8192,16,0),this.featureIndexArray=new Lt,this.promoteId=F};function Ah(S,F,K,ce,ye){return M(S,function(ke,ze){var Ze=F instanceof cl?F.get(ze):null;return Ze&&Ze.evaluate?Ze.evaluate(K,ce,ye):Ze})}function Eh(S){for(var F=1/0,K=1/0,ce=-1/0,ye=-1/0,ke=0,ze=S;ke<ze.length;ke+=1){var Ze=ze[ke];F=Math.min(F,Ze.x),K=Math.min(K,Ze.y),ce=Math.max(ce,Ze.x),ye=Math.max(ye,Ze.y)}return{minX:F,minY:K,maxX:ce,maxY:ye}}function m0(S,F){return F-S}ou.prototype.insert=function(S,F,K,ce,ye,ke){var ze=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(K,ce,ye);for(var Ze=ke?this.grid3D:this.grid,ot=0;ot<F.length;ot++){for(var mt=F[ot],Tt=[1/0,1/0,-1/0,-1/0],qt=0;qt<mt.length;qt++){var an=mt[qt];Tt[0]=Math.min(Tt[0],an.x),Tt[1]=Math.min(Tt[1],an.y),Tt[2]=Math.max(Tt[2],an.x),Tt[3]=Math.max(Tt[3],an.y)}Tt[0]<8192&&Tt[1]<8192&&Tt[2]>=0&&Tt[3]>=0&&Ze.insert(ze,Tt[0],Tt[1],Tt[2],Tt[3])}},ou.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new zc.VectorTile(new Vc(this.rawTileData)).layers,this.sourceLayerCoder=new kh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ou.prototype.query=function(S,F,K,ce){var ye=this;this.loadVTLayers();for(var ke=S.params||{},ze=8192/S.tileSize/S.scale,Ze=Xi(ke.filter),ot=S.queryGeometry,mt=S.queryPadding*ze,Tt=Eh(ot),qt=this.grid.query(Tt.minX-mt,Tt.minY-mt,Tt.maxX+mt,Tt.maxY+mt),an=Eh(S.cameraQueryGeometry),bn=0,Dn=this.grid3D.query(an.minX-mt,an.minY-mt,an.maxX+mt,an.maxY+mt,function(Tr,Fr,ai,ti){return function(di,ki,Si,vi,Ii){for(var Di=0,Ei=di;Di<Ei.length;Di+=1){var La=Ei[Di];if(ki<=La.x&&Si<=La.y&&vi>=La.x&&Ii>=La.y)return!0}var Ma=[new t(ki,Si),new t(ki,Ii),new t(vi,Ii),new t(vi,Si)];if(di.length>2)for(var Aa=0,Gi=Ma;Aa<Gi.length;Aa+=1)if(nl(di,Gi[Aa]))return!0;for(var Ea=0;Ea<di.length-1;Ea++)if(Iu(di[Ea],di[Ea+1],Ma))return!0;return!1}(S.cameraQueryGeometry,Tr-mt,Fr-mt,ai+mt,ti+mt)});bn<Dn.length;bn+=1)qt.push(Dn[bn]);qt.sort(m0);for(var Bn,tr={},nr=function(Tr){var Fr=qt[Tr];if(Fr!==Bn){Bn=Fr;var ai=ye.featureIndexArray.get(Fr),ti=null;ye.loadMatchingFeature(tr,ai.bucketIndex,ai.sourceLayerIndex,ai.featureIndex,Ze,ke.layers,ke.availableImages,F,K,ce,function(di,ki,Si){return ti||(ti=po(di)),ki.queryIntersectsFeature(ot,di,Si,ti,ye.z,S.transform,ze,S.pixelPosMatrix)})}},ur=0;ur<qt.length;ur++)nr(ur);return tr},ou.prototype.loadMatchingFeature=function(S,F,K,ce,ye,ke,ze,Ze,ot,mt,Tt){var qt=this.bucketLayerIDs[F];if(!ke||function(ai,ti){for(var di=0;di<ai.length;di++)if(ti.indexOf(ai[di])>=0)return!0;return!1}(ke,qt)){var an=this.sourceLayerCoder.decode(K),$t=this.vtLayers[an].feature(ce);if(ye.filter(new Ha(this.tileID.overscaledZ),$t))for(var bn=this.getId($t,an),Dn=0;Dn<qt.length;Dn++){var Vn=qt[Dn];if(!(ke&&ke.indexOf(Vn)<0)){var Bn=Ze[Vn];if(Bn){var tr={};void 0!==bn&&mt&&(tr=mt.getState(Bn.sourceLayer||"_geojsonTileLayer",bn));var nr=ot[Vn];nr.paint=Ah(nr.paint,Bn.paint,$t,tr,ze),nr.layout=Ah(nr.layout,Bn.layout,$t,tr,ze);var ur=!Tt||Tt($t,Bn,tr);if(ur){var Tr=new If($t,this.z,this.x,this.y,bn);Tr.layer=nr;var Fr=S[Vn];void 0===Fr&&(Fr=S[Vn]=[]),Fr.push({featureIndex:ce,feature:Tr,intersectionZ:ur})}}}}}},ou.prototype.lookupSymbolFeatures=function(S,F,K,ce,ye,ke,ze,Ze){var ot={};this.loadVTLayers();for(var mt=Xi(ye),Tt=0,qt=S;Tt<qt.length;Tt+=1)this.loadMatchingFeature(ot,K,ce,qt[Tt],mt,ke,ze,Ze,F);return ot},ou.prototype.hasLayer=function(S){for(var F=0,K=this.bucketLayerIDs;F<K.length;F+=1)for(var ce=0,ye=K[F];ce<ye.length;ce+=1)if(S===ye[ce])return!0;return!1},ou.prototype.getId=function(S,F){var K=S.id;return this.promoteId&&"boolean"==typeof(K=S.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[F]])&&(K=Number(K)),K},lr("FeatureIndex",ou,{omit:["rawTileData","sourceLayerCoder"]});var ks=function(S,F){this.tileID=S,this.uid=d(),this.uses=0,this.tileSize=F,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ks.prototype.registerFadeDuration=function(S){var F=S+this.timeAdded;F<U.now()||this.fadeEndTime&&F<this.fadeEndTime||(this.fadeEndTime=F)},ks.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},ks.prototype.loadVectorData=function(S,F,K){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",S){for(var ce in S.featureIndex&&(this.latestFeatureIndex=S.featureIndex,S.rawTileData?(this.latestRawTileData=S.rawTileData,this.latestFeatureIndex.rawTileData=S.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=S.collisionBoxArray,this.buckets=function(mt,Tt){var qt={};if(!Tt)return qt;for(var an=function(){var Dn=bn[$t],Vn=Dn.layerIds.map(function(ur){return Tt.getLayer(ur)}).filter(Boolean);if(0!==Vn.length){Dn.layers=Vn,Dn.stateDependentLayerIds&&(Dn.stateDependentLayers=Dn.stateDependentLayerIds.map(function(ur){return Vn.filter(function(Tr){return Tr.id===ur})[0]}));for(var Bn=0,tr=Vn;Bn<tr.length;Bn+=1)qt[tr[Bn].id]=Dn}},$t=0,bn=mt;$t<bn.length;$t+=1)an();return qt}(S.buckets,F.style),this.hasSymbolBuckets=!1,this.buckets){var ye=this.buckets[ce];if(ye instanceof to){if(this.hasSymbolBuckets=!0,!K)break;ye.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var ke in this.buckets){var ze=this.buckets[ke];if(ze instanceof to&&ze.hasRTLText){this.hasRTLText=!0,eo.isLoading()||eo.isLoaded()||"deferred"!==Ro()||ka();break}}for(var Ze in this.queryPadding=0,this.buckets){var ot=this.buckets[Ze];this.queryPadding=Math.max(this.queryPadding,F.style.getLayer(Ze).queryRadius(ot))}S.imageAtlas&&(this.imageAtlas=S.imageAtlas),S.glyphAtlasImage&&(this.glyphAtlasImage=S.glyphAtlasImage)}else this.collisionBoxArray=new Ae},ks.prototype.unloadVectorData=function(){for(var S in this.buckets)this.buckets[S].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ks.prototype.getBucket=function(S){return this.buckets[S.id]},ks.prototype.upload=function(S){for(var F in this.buckets){var K=this.buckets[F];K.uploadPending()&&K.upload(S)}var ce=S.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Nu(S,this.imageAtlas.image,ce.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Nu(S,this.glyphAtlasImage,ce.ALPHA),this.glyphAtlasImage=null)},ks.prototype.prepare=function(S){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(S,this.imageAtlasTexture)},ks.prototype.queryRenderedFeatures=function(S,F,K,ce,ye,ke,ze,Ze,ot,mt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ce,cameraQueryGeometry:ye,scale:ke,tileSize:this.tileSize,pixelPosMatrix:mt,transform:Ze,params:ze,queryPadding:this.queryPadding*ot},S,F,K):{}},ks.prototype.querySourceFeatures=function(S,F){var K=this.latestFeatureIndex;if(K&&K.rawTileData){var ce=K.loadVTLayers(),ye=F?F.sourceLayer:"",ke=ce._geojsonTileLayer||ce[ye];if(ke)for(var ze=Xi(F&&F.filter),Ze=this.tileID.canonical,ot=Ze.z,mt=Ze.x,Tt=Ze.y,qt={z:ot,x:mt,y:Tt},an=0;an<ke.length;an++){var $t=ke.feature(an);if(ze.filter(new Ha(this.tileID.overscaledZ),$t)){var bn=K.getId($t,ye),Dn=new If($t,ot,mt,Tt,bn);Dn.tile=qt,S.push(Dn)}}}},ks.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},ks.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ks.prototype.setExpiryData=function(S){var F=this.expirationTime;if(S.cacheControl){var K=L(S.cacheControl);K["max-age"]&&(this.expirationTime=Date.now()+1e3*K["max-age"])}else S.expires&&(this.expirationTime=new Date(S.expires).getTime());if(this.expirationTime){var ce=Date.now(),ye=!1;if(this.expirationTime>ce)ye=!1;else if(F)if(this.expirationTime<F)ye=!0;else{var ke=this.expirationTime-F;ke?this.expirationTime=ce+Math.max(ke,3e4):ye=!0}else ye=!0;ye?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ks.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},ks.prototype.setFeatureState=function(S,F){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(S).length){var K=this.latestFeatureIndex.loadVTLayers();for(var ce in this.buckets)if(F.style.hasLayer(ce)){var ye=this.buckets[ce],ke=ye.layers[0].sourceLayer||"_geojsonTileLayer",ze=K[ke],Ze=S[ke];if(ze&&Ze&&0!==Object.keys(Ze).length){ye.update(Ze,ze,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ot=F&&F.style&&F.style.getLayer(ce);ot&&(this.queryPadding=Math.max(this.queryPadding,ot.queryRadius(ye)))}}}},ks.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},ks.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<U.now()},ks.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ks.prototype.setHoldDuration=function(S){this.symbolFadeHoldUntil=U.now()+S},ks.prototype.setDependencies=function(S,F){for(var K={},ce=0,ye=F;ce<ye.length;ce+=1)K[ye[ce]]=!0;this.dependencies[S]=K},ks.prototype.hasDependency=function(S,F){for(var K=0,ce=S;K<ce.length;K+=1){var ke=this.dependencies[ce[K]];if(ke)for(var ze=0,Ze=F;ze<Ze.length;ze+=1)if(ke[Ze[ze]])return!0}return!1};var Ml=self.performance,Sh=function(S){this._marks={start:[S.url,"start"].join("#"),end:[S.url,"end"].join("#"),measure:S.url.toString()},Ml.mark(this._marks.start)};Sh.prototype.finish=function(){Ml.mark(this._marks.end);var S=Ml.getEntriesByName(this._marks.measure);return 0===S.length&&(Ml.measure(this._marks.measure,this._marks.start,this._marks.end),S=Ml.getEntriesByName(this._marks.measure),Ml.clearMarks(this._marks.start),Ml.clearMarks(this._marks.end),Ml.clearMeasures(this._marks.measure)),S},e.Actor=Zc,e.AlphaImage=nc,e.CanonicalTileID=Bu,e.CollisionBoxArray=Ae,e.Color=sn,e.DEMData=Zl,e.DataConstantProperty=Ci,e.DictionaryCoder=kh,e.EXTENT=8192,e.ErrorEvent=Ee,e.EvaluationParameters=Ha,e.Event=Me,e.Evented=Se,e.FeatureIndex=ou,e.FillBucket=Yl,e.FillExtrusionBucket=Nl,e.ImageAtlas=wf,e.ImagePosition=mh,e.LineBucket=rl,e.LngLat=_o,e.LngLatBounds=as,e.MercatorCoordinate=Xc,e.ONE_EM=24,e.OverscaledTileID=$a,e.Point=t,e.Point$1=t,e.Properties=Zr,e.Protobuf=Vc,e.RGBAImage=dl,e.RequestManager=ue,e.RequestPerformance=Sh,e.ResourceType=kt,e.SegmentVector=Gt,e.SourceFeatureState=dc,e.StructArrayLayout1ui2=Z,e.StructArrayLayout2f1f2i16=el,e.StructArrayLayout2i4=Js,e.StructArrayLayout3ui6=Qo,e.StructArrayLayout4i8=xo,e.SymbolBucket=to,e.Texture=Nu,e.Tile=ks,e.Transitionable=fs,e.Uniform1f=ir,e.Uniform1i=Li,e.Uniform2f=jr,e.Uniform3f=mi,e.Uniform4f=fi,e.UniformColor=Mi,e.UniformMatrix4f=ta,e.UnwrappedTileID=mm,e.ValidationError=qe,e.WritingMode=qs,e.ZoomHistory=sa,e.add=function(S,F,K){return S[0]=F[0]+K[0],S[1]=F[1]+K[1],S[2]=F[2]+K[2],S},e.addDynamicAttributes=jd,e.asyncAll=function(S,F,K){if(!S.length)return K(null,[]);var ce=S.length,ye=new Array(S.length),ke=null;S.forEach(function(ze,Ze){F(ze,function(ot,mt){ot&&(ke=ot),ye[Ze]=mt,0==--ce&&K(ke,ye)})})},e.bezier=u,e.bindAll=s,e.browser=U,e.cacheEntryPossiblyAdded=function(S){++ut>Ke&&(S.getActor().send("enforceCacheSizeLimit",He),ut=0)},e.clamp=c,e.clearTileCache=function(S){var F=self.caches.delete("mapbox-tiles");S&&F.catch(S).then(function(){return S()})},e.clipLine=bs,e.clone=function(S){var F=new Hs(16);return F[0]=S[0],F[1]=S[1],F[2]=S[2],F[3]=S[3],F[4]=S[4],F[5]=S[5],F[6]=S[6],F[7]=S[7],F[8]=S[8],F[9]=S[9],F[10]=S[10],F[11]=S[11],F[12]=S[12],F[13]=S[13],F[14]=S[14],F[15]=S[15],F},e.clone$1=E,e.clone$2=function(S){var F=new Hs(3);return F[0]=S[0],F[1]=S[1],F[2]=S[2],F},e.collisionCircleLayout=Uc,e.config=G,e.create=function(){var S=new Hs(16);return Hs!=Float32Array&&(S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=0,S[12]=0,S[13]=0,S[14]=0),S[0]=1,S[5]=1,S[10]=1,S[15]=1,S},e.create$1=function(){var S=new Hs(9);return Hs!=Float32Array&&(S[1]=0,S[2]=0,S[3]=0,S[5]=0,S[6]=0,S[7]=0),S[0]=1,S[4]=1,S[8]=1,S},e.create$2=function(){var S=new Hs(4);return Hs!=Float32Array&&(S[1]=0,S[2]=0),S[0]=1,S[3]=1,S},e.createCommonjsModule=r,e.createExpression=tn,e.createLayout=Da,e.createStyleLayer=function(S){return"custom"===S.type?new gm(S):new Wc[S.type](S)},e.cross=function(S,F,K){var ce=F[0],ye=F[1],ke=F[2],ze=K[0],Ze=K[1],ot=K[2];return S[0]=ye*ot-ke*Ze,S[1]=ke*ze-ce*ot,S[2]=ce*Ze-ye*ze,S},e.deepEqual=function S(F,K){if(Array.isArray(F)){if(!Array.isArray(K)||F.length!==K.length)return!1;for(var ce=0;ce<F.length;ce++)if(!S(F[ce],K[ce]))return!1;return!0}if("object"==typeof F&&null!==F&&null!==K){if("object"!=typeof K||Object.keys(F).length!==Object.keys(K).length)return!1;for(var ye in F)if(!S(F[ye],K[ye]))return!1;return!0}return F===K},e.dot=function(S,F){return S[0]*F[0]+S[1]*F[1]+S[2]*F[2]},e.dot$1=function(S,F){return S[0]*F[0]+S[1]*F[1]+S[2]*F[2]+S[3]*F[3]},e.ease=i,e.emitValidationErrors=Vr,e.endsWith=k,e.enforceCacheSizeLimit=function(S){st(),Be&&Be.then(function(F){F.keys().then(function(K){for(var ce=0;ce<K.length-S;ce++)F.delete(K[ce])})})},e.evaluateSizeForFeature=Qp,e.evaluateSizeForZoom=e0,e.evaluateVariableOffset=al,e.evented=Mo,e.extend=l,e.featureFilter=Xi,e.filterObject=A,e.fromRotation=function(S,F){var K=Math.sin(F),ce=Math.cos(F);return S[0]=ce,S[1]=K,S[2]=0,S[3]=-K,S[4]=ce,S[5]=0,S[6]=0,S[7]=0,S[8]=1,S},e.getAnchorAlignment=kf,e.getAnchorJustification=Df,e.getArrayBuffer=Ft,e.getImage=cn,e.getJSON=function(S,F){return lt(l(S,{type:"json"}),F)},e.getRTLTextPluginStatus=Ro,e.getReferrer=Rt,e.getVideo=function(S,F){var K,ce,ye=self.document.createElement("video");ye.muted=!0,ye.onloadstart=function(){F(null,ye)};for(var ke=0;ke<S.length;ke++){var ze=self.document.createElement("source");K=S[ke],ce=void 0,(ce=self.document.createElement("a")).href=K,(ce.protocol!==self.document.location.protocol||ce.host!==self.document.location.host)&&(ye.crossOrigin="Anonymous"),ze.src=S[ke],ye.appendChild(ze)}return{cancel:function(){}}},e.identity=Sc,e.invert=function(S,F){var K=F[0],ce=F[1],ye=F[2],ke=F[3],ze=F[4],Ze=F[5],ot=F[6],mt=F[7],Tt=F[8],qt=F[9],an=F[10],$t=F[11],bn=F[12],Dn=F[13],Vn=F[14],Bn=F[15],tr=K*Ze-ce*ze,nr=K*ot-ye*ze,ur=K*mt-ke*ze,Tr=ce*ot-ye*Ze,Fr=ce*mt-ke*Ze,ai=ye*mt-ke*ot,ti=Tt*Dn-qt*bn,di=Tt*Vn-an*bn,ki=Tt*Bn-$t*bn,Si=qt*Vn-an*Dn,vi=qt*Bn-$t*Dn,Ii=an*Bn-$t*Vn,Di=tr*Ii-nr*vi+ur*Si+Tr*ki-Fr*di+ai*ti;return Di?(S[0]=(Ze*Ii-ot*vi+mt*Si)*(Di=1/Di),S[1]=(ye*vi-ce*Ii-ke*Si)*Di,S[2]=(Dn*ai-Vn*Fr+Bn*Tr)*Di,S[3]=(an*Fr-qt*ai-$t*Tr)*Di,S[4]=(ot*ki-ze*Ii-mt*di)*Di,S[5]=(K*Ii-ye*ki+ke*di)*Di,S[6]=(Vn*ur-bn*ai-Bn*nr)*Di,S[7]=(Tt*ai-an*ur+$t*nr)*Di,S[8]=(ze*vi-Ze*ki+mt*ti)*Di,S[9]=(ce*ki-K*vi-ke*ti)*Di,S[10]=(bn*Fr-Dn*ur+Bn*tr)*Di,S[11]=(qt*ur-Tt*Fr-$t*tr)*Di,S[12]=(Ze*di-ze*Si-ot*ti)*Di,S[13]=(K*Si-ce*di+ye*ti)*Di,S[14]=(Dn*nr-bn*Tr-Vn*tr)*Di,S[15]=(Tt*Tr-qt*nr+an*tr)*Di,S):null},e.isChar=qr,e.isMapboxURL=de,e.keysDifference=function(S,F){var K=[];for(var ce in S)ce in F||K.push(ce);return K},e.makeRequest=lt,e.mapObject=M,e.mercatorXfromLng=p0,e.mercatorYfromLat=cc,e.mercatorZfromAltitude=Wl,e.mul=xd,e.multiply=Rl,e.mvt=zc,e.normalize=function(S,F){var K=F[0],ce=F[1],ye=F[2],ke=K*K+ce*ce+ye*ye;return ke>0&&(ke=1/Math.sqrt(ke)),S[0]=F[0]*ke,S[1]=F[1]*ke,S[2]=F[2]*ke,S},e.number=cr,e.offscreenCanvasSupported=xt,e.ortho=function(S,F,K,ce,ye,ke,ze){var Ze=1/(F-K),ot=1/(ce-ye),mt=1/(ke-ze);return S[0]=-2*Ze,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=-2*ot,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=2*mt,S[11]=0,S[12]=(F+K)*Ze,S[13]=(ye+ce)*ot,S[14]=(ze+ke)*mt,S[15]=1,S},e.parseGlyphPBF=function(S){return new Vc(S).readFields(Kp,[])},e.pbf=Vc,e.performSymbolLayout=function(S,F,K,ce,ye,ke,ze){S.createArrays(),S.tilePixelRatio=8192/(512*S.overscaling),S.compareText={},S.iconsNeedLinear=!1;var ot=S.layers[0].layout,mt=S.layers[0]._unevaluatedLayout._values,Tt={};if("composite"===S.textSizeData.kind){var qt=S.textSizeData,$t=qt.maxZoom;Tt.compositeTextSizes=[mt["text-size"].possiblyEvaluate(new Ha(qt.minZoom),ze),mt["text-size"].possiblyEvaluate(new Ha($t),ze)]}if("composite"===S.iconSizeData.kind){var bn=S.iconSizeData,Vn=bn.maxZoom;Tt.compositeIconSizes=[mt["icon-size"].possiblyEvaluate(new Ha(bn.minZoom),ze),mt["icon-size"].possiblyEvaluate(new Ha(Vn),ze)]}Tt.layoutTextSize=mt["text-size"].possiblyEvaluate(new Ha(S.zoom+1),ze),Tt.layoutIconSize=mt["icon-size"].possiblyEvaluate(new Ha(S.zoom+1),ze),Tt.textMaxSize=mt["text-size"].possiblyEvaluate(new Ha(18));for(var Bn=24*ot.get("text-line-height"),tr="map"===ot.get("text-rotation-alignment")&&"point"!==ot.get("symbol-placement"),nr=ot.get("text-keep-upright"),ur=ot.get("text-size"),Tr=function(){var ti=ai[Fr],di=ot.get("text-font").evaluate(ti,{},ze).join(","),ki=ur.evaluate(ti,{},ze),Si=Tt.layoutTextSize.evaluate(ti,{},ze),vi=Tt.layoutIconSize.evaluate(ti,{},ze),Ii={horizontal:{},vertical:void 0},Di=ti.text,Ei=[0,0];if(Di){var La=Di.toString(),Ma=24*ot.get("text-letter-spacing").evaluate(ti,{},ze),Aa=function(ma){for(var Ba=0,Yo=ma;Ba<Yo.length;Ba+=1)if(!ji(Yo[Ba].charCodeAt(0)))return!1;return!0}(La)?Ma:0,Gi=ot.get("text-anchor").evaluate(ti,{},ze),Ea=ot.get("text-variable-anchor");if(!Ea){var vo=ot.get("text-radial-offset").evaluate(ti,{},ze);Ei=vo?al(Gi,[24*vo,uc]):ot.get("text-offset").evaluate(ti,{},ze).map(function(ma){return 24*ma})}var mo=tr?"center":ot.get("text-justify").evaluate(ti,{},ze),wo=ot.get("symbol-placement"),no="point"===wo?24*ot.get("text-max-width").evaluate(ti,{},ze):0,es=function(){S.allowVerticalPlacement&&pa(La)&&(Ii.vertical=zu(Di,F,K,ye,di,no,Bn,Gi,"left",Aa,Ei,qs.vertical,!0,wo,Si,ki))};if(!tr&&Ea){for(var Io="auto"===mo?Ea.map(function(ma){return Df(ma)}):[mo],As=!1,_s=0;_s<Io.length;_s++){var ws=Io[_s];if(!Ii.horizontal[ws])if(As)Ii.horizontal[ws]=Ii.horizontal[0];else{var Gs=zu(Di,F,K,ye,di,no,Bn,"center",ws,Aa,Ei,qs.horizontal,!1,wo,Si,ki);Gs&&(Ii.horizontal[ws]=Gs,As=1===Gs.positionedLines.length)}}es()}else{"auto"===mo&&(mo=Df(Gi));var Bs=zu(Di,F,K,ye,di,no,Bn,Gi,mo,Aa,Ei,qs.horizontal,!1,wo,Si,ki);Bs&&(Ii.horizontal[mo]=Bs),es(),pa(La)&&tr&&nr&&(Ii.vertical=zu(Di,F,K,ye,di,no,Bn,Gi,mo,Aa,Ei,qs.vertical,!1,wo,Si,ki))}}var ma,Ba,zo,Ys,Is,so=void 0,Es=!1;if(ti.icon&&ti.icon.name){var Xo=ce[ti.icon.name];Xo&&(ma=ye[ti.icon.name],Ba=ot.get("icon-offset").evaluate(ti,{},ze),zo=kf(ot.get("icon-anchor").evaluate(ti,{},ze)),so={image:ma,top:Is=Ba[1]-ma.displaySize[1]*zo.verticalAlign,bottom:Is+ma.displaySize[1],left:Ys=Ba[0]-ma.displaySize[0]*zo.horizontalAlign,right:Ys+ma.displaySize[0]},Es=Xo.sdf,void 0===S.sdfIcons?S.sdfIcons=Xo.sdf:S.sdfIcons!==Xo.sdf&&C("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Xo.pixelRatio!==S.pixelRatio||0!==ot.get("icon-rotate").constantOr(1))&&(S.iconsNeedLinear=!0))}var gs=Nd(Ii.horizontal)||Ii.vertical;S.iconsInText=!!gs&&gs.iconsInText,(gs||so)&&function(ma,Ba,Yo,zo,No,So,qa,Fi,Ys,sl,Is){var bl=So.textMaxSize.evaluate(Ba,{});void 0===bl&&(bl=qa);var Ps,ms=ma.layers[0].layout,Xl=ms.get("icon-offset").evaluate(Ba,{},Is),kl=Nd(Yo.horizontal),Os=qa/24,Pf=ma.tilePixelRatio*Os,pc=ma.tilePixelRatio*bl/24,$c=ma.tilePixelRatio*Fi,Kc=ma.tilePixelRatio*ms.get("symbol-spacing"),Of=ms.get("text-padding")*ma.tilePixelRatio,Gd=ms.get("icon-padding")*ma.tilePixelRatio,gc=ms.get("text-max-angle")/180*Math.PI,mc="map"===ms.get("text-rotation-alignment")&&"point"!==ms.get("symbol-placement"),su="map"===ms.get("icon-rotation-alignment")&&"point"!==ms.get("symbol-placement"),ju=ms.get("symbol-placement"),Jc=Kc/2,Rf=ms.get("icon-text-fit");zo&&"none"!==Rf&&(ma.allowVerticalPlacement&&Yo.vertical&&(Ps=sm(zo,Yo.vertical,Rf,ms.get("icon-text-fit-padding"),Xl,Os)),kl&&(zo=sm(zo,kl,Rf,ms.get("icon-text-fit-padding"),Xl,Os)));var Uu=function(Wd,ef){ef.x<0||ef.x>=8192||ef.y<0||ef.y>=8192||function(Bo,$l,qu,yu,Zd,zh,Nh,Kl,Bh,qf,Gu,xu,Gf,vc,bu,yc,b0,Xd,$d,jh,ll,Yf,Wf,lu,_0){var w0,Yu,xc,tf,bc,nf=Bo.addToLineVertexArray($l,qu),T0=0,_l=0,M0=0,k0=0,A0=-1,E0=-1,uu={},xm=jn(""),Kd=0,Zf=0;if(void 0===Kl._unevaluatedLayout.getValue("text-radial-offset")?(Kd=(w0=Kl.layout.get("text-offset").evaluate(ll,{},lu).map(function(Kf){return 24*Kf}))[0],Zf=w0[1]):(Kd=24*Kl.layout.get("text-radial-offset").evaluate(ll,{},lu),Zf=uc),Bo.allowVerticalPlacement&&yu.vertical){var Jd=Kl.layout.get("text-rotate").evaluate(ll,{},lu)+90;tf=new wh(Bh,$l,qf,Gu,xu,yu.vertical,Gf,vc,bu,Jd),Nh&&(bc=new wh(Bh,$l,qf,Gu,xu,Nh,b0,Xd,bu,Jd))}if(Zd){var Qd=Kl.layout.get("icon-rotate").evaluate(ll,{}),S0="none"!==Kl.layout.get("icon-text-fit"),ep=r0(Zd,Qd,Wf,S0),tp=Nh?r0(Nh,Qd,Wf,S0):void 0;xc=new wh(Bh,$l,qf,Gu,xu,Zd,b0,Xd,!1,Qd),T0=4*ep.length;var np=Bo.iconSizeData,Xf=null;"source"===np.kind?(Xf=[128*Kl.layout.get("icon-size").evaluate(ll,{})])[0]>32640&&C(Bo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===np.kind&&((Xf=[128*Yf.compositeIconSizes[0].evaluate(ll,{},lu),128*Yf.compositeIconSizes[1].evaluate(ll,{},lu)])[0]>32640||Xf[1]>32640)&&C(Bo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Bo.addSymbols(Bo.icon,ep,Xf,jh,$d,ll,!1,$l,nf.lineStartIndex,nf.lineLength,-1,lu),A0=Bo.icon.placedSymbolArray.length-1,tp&&(_l=4*tp.length,Bo.addSymbols(Bo.icon,tp,Xf,jh,$d,ll,qs.vertical,$l,nf.lineStartIndex,nf.lineLength,-1,lu),E0=Bo.icon.placedSymbolArray.length-1)}for(var C0 in yu.horizontal){var $f=yu.horizontal[C0];if(!Yu){xm=jn($f.text);var D0=Kl.layout.get("text-rotate").evaluate(ll,{},lu);Yu=new wh(Bh,$l,qf,Gu,xu,$f,Gf,vc,bu,D0)}var L0=1===$f.positionedLines.length;if(M0+=zd(Bo,$l,$f,zh,Kl,bu,ll,yc,nf,yu.vertical?qs.horizontal:qs.horizontalOnly,L0?Object.keys(yu.horizontal):[C0],uu,A0,Yf,lu),L0)break}yu.vertical&&(k0+=zd(Bo,$l,yu.vertical,zh,Kl,bu,ll,yc,nf,qs.vertical,["vertical"],uu,E0,Yf,lu));var cu=Yu?Yu.boxStartIndex:Bo.collisionBoxArray.length,rp=Yu?Yu.boxEndIndex:Bo.collisionBoxArray.length,_m=tf?tf.boxStartIndex:Bo.collisionBoxArray.length,wm=tf?tf.boxEndIndex:Bo.collisionBoxArray.length,Hy=xc?xc.boxStartIndex:Bo.collisionBoxArray.length,I0=xc?xc.boxEndIndex:Bo.collisionBoxArray.length,Tm=bc?bc.boxStartIndex:Bo.collisionBoxArray.length,Mm=bc?bc.boxEndIndex:Bo.collisionBoxArray.length,fu=-1,rf=function(Kf,Jf){return Kf&&Kf.circleDiameter?Math.max(Kf.circleDiameter,Jf):Jf};fu=rf(Yu,fu),fu=rf(tf,fu),fu=rf(xc,fu);var P0=(fu=rf(bc,fu))>-1?1:0;P0&&(fu*=_0/24),Bo.glyphOffsetArray.length>=to.MAX_GLYPHS&&C("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==ll.sortKey&&Bo.addToSortKeyRanges(Bo.symbolInstances.length,ll.sortKey),Bo.symbolInstances.emplaceBack($l.x,$l.y,uu.right>=0?uu.right:-1,uu.center>=0?uu.center:-1,uu.left>=0?uu.left:-1,uu.vertical||-1,A0,E0,xm,cu,rp,_m,wm,Hy,I0,Tm,Mm,qf,M0,k0,T0,_l,P0,0,Gf,Kd,Zf,fu)}(ma,ef,Wd,Yo,zo,No,Ps,ma.layers[0],ma.collisionBoxArray,Ba.index,Ba.sourceLayerIndex,ma.index,Pf,Of,mc,Ys,$c,Gd,su,Xl,Ba,So,sl,Is,qa)};if("line"===ju)for(var Ff=0,Ch=bs(Ba.geometry,0,0,8192,8192);Ff<Ch.length;Ff+=1)for(var Dh=Ch[Ff],Lh=0,Ih=um(Dh,Kc,gc,Yo.vertical||kl,zo,24,pc,ma.overscaling,8192);Lh<Ih.length;Lh+=1){var Ph=Ih[Lh];kl&&ol(ma,kl.text,Jc,Ph)||Uu(Dh,Ph)}else if("line-center"===ju)for(var Qc=0,Oh=Ba.geometry;Qc<Oh.length;Qc+=1){var Vu=Oh[Qc];if(Vu.length>1){var Bf=Fd(Vu,gc,Yo.vertical||kl,zo,24,pc);Bf&&Uu(Vu,Bf)}}else if("Polygon"===Ba.type)for(var jf=0,Yd=ac(Ba.geometry,0);jf<Yd.length;jf+=1){var Uf=Yd[jf],Rh=fm(Uf,16);Uu(Uf[0],new Af(Rh.x,Rh.y,0))}else if("LineString"===Ba.type)for(var Vf=0,vm=Ba.geometry;Vf<vm.length;Vf+=1){var v0=vm[Vf];Uu(v0,new Af(v0[0].x,v0[0].y,0))}else if("Point"===Ba.type)for(var y0=0,ym=Ba.geometry;y0<ym.length;y0+=1)for(var Hf=0,x0=ym[y0];Hf<x0.length;Hf+=1){var Fh=x0[Hf];Uu([Fh],new Af(Fh.x,Fh.y,0))}}(S,ti,Ii,so,ce,Tt,Si,vi,Ei,Es,ze)},Fr=0,ai=S.features;Fr<ai.length;Fr+=1)Tr();ke&&S.generateCollisionDebugBuffers()},e.perspective=function(S,F,K,ce,ye){var ke,ze=1/Math.tan(F/2);return S[0]=ze/K,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=ze,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=-1,S[12]=0,S[13]=0,S[15]=0,null!=ye&&ye!==1/0?(S[10]=(ye+ce)*(ke=1/(ce-ye)),S[14]=2*ye*ce*ke):(S[10]=-1,S[14]=-2*ce),S},e.pick=function(S,F){for(var K={},ce=0;ce<F.length;ce++){var ye=F[ce];ye in S&&(K[ye]=S[ye])}return K},e.plugin=eo,e.polygonIntersectsPolygon=Ns,e.postMapLoadEvent=Ue,e.postTurnstileEvent=De,e.potpack=Jp,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=lr,e.registerForPluginStateChange=function(S){return S({pluginStatus:Ui,pluginURL:yo}),Mo.on("pluginStateChange",S),S},e.rotate=function(S,F,K){var ce=F[0],ye=F[1],ke=F[2],ze=F[3],Ze=Math.sin(K),ot=Math.cos(K);return S[0]=ce*ot+ke*Ze,S[1]=ye*ot+ze*Ze,S[2]=ce*-Ze+ke*ot,S[3]=ye*-Ze+ze*ot,S},e.rotateX=function(S,F,K){var ce=Math.sin(K),ye=Math.cos(K),ke=F[4],ze=F[5],Ze=F[6],ot=F[7],mt=F[8],Tt=F[9],qt=F[10],an=F[11];return F!==S&&(S[0]=F[0],S[1]=F[1],S[2]=F[2],S[3]=F[3],S[12]=F[12],S[13]=F[13],S[14]=F[14],S[15]=F[15]),S[4]=ke*ye+mt*ce,S[5]=ze*ye+Tt*ce,S[6]=Ze*ye+qt*ce,S[7]=ot*ye+an*ce,S[8]=mt*ye-ke*ce,S[9]=Tt*ye-ze*ce,S[10]=qt*ye-Ze*ce,S[11]=an*ye-ot*ce,S},e.rotateZ=function(S,F,K){var ce=Math.sin(K),ye=Math.cos(K),ke=F[0],ze=F[1],Ze=F[2],ot=F[3],mt=F[4],Tt=F[5],qt=F[6],an=F[7];return F!==S&&(S[8]=F[8],S[9]=F[9],S[10]=F[10],S[11]=F[11],S[12]=F[12],S[13]=F[13],S[14]=F[14],S[15]=F[15]),S[0]=ke*ye+mt*ce,S[1]=ze*ye+Tt*ce,S[2]=Ze*ye+qt*ce,S[3]=ot*ye+an*ce,S[4]=mt*ye-ke*ce,S[5]=Tt*ye-ze*ce,S[6]=qt*ye-Ze*ce,S[7]=an*ye-ot*ce,S},e.scale=function(S,F,K){var ce=K[0],ye=K[1],ke=K[2];return S[0]=F[0]*ce,S[1]=F[1]*ce,S[2]=F[2]*ce,S[3]=F[3]*ce,S[4]=F[4]*ye,S[5]=F[5]*ye,S[6]=F[6]*ye,S[7]=F[7]*ye,S[8]=F[8]*ke,S[9]=F[9]*ke,S[10]=F[10]*ke,S[11]=F[11]*ke,S[12]=F[12],S[13]=F[13],S[14]=F[14],S[15]=F[15],S},e.scale$1=function(S,F,K){return S[0]=F[0]*K,S[1]=F[1]*K,S[2]=F[2]*K,S[3]=F[3]*K,S},e.scale$2=function(S,F,K){return S[0]=F[0]*K,S[1]=F[1]*K,S[2]=F[2]*K,S},e.setCacheLimits=function(S,F){He=S,Ke=F},e.setRTLTextPlugin=function(S,F,K){if(void 0===K&&(K=!1),Ui===Na||Ui===ga||Ui===Vs)throw new Error("setRTLTextPlugin cannot be called multiple times.");yo=U.resolveURL(S),Ui=Na,Ra=F,ia(),K||ka()},e.sphericalToCartesian=function(S){var F=S[0],K=S[1],ce=S[2];return K+=90,K*=Math.PI/180,ce*=Math.PI/180,{x:F*Math.cos(K)*Math.sin(ce),y:F*Math.sin(K)*Math.sin(ce),z:F*Math.cos(ce)}},e.sqrLen=function(S){var F=S[0],K=S[1];return F*F+K*K},e.styleSpec=je,e.sub=function(S,F,K){return S[0]=F[0]-K[0],S[1]=F[1]-K[1],S[2]=F[2]-K[2],S},e.symbolSize=lm,e.transformMat3=function(S,F,K){var ce=F[0],ye=F[1],ke=F[2];return S[0]=ce*K[0]+ye*K[3]+ke*K[6],S[1]=ce*K[1]+ye*K[4]+ke*K[7],S[2]=ce*K[2]+ye*K[5]+ke*K[8],S},e.transformMat4=Tl,e.translate=function(S,F,K){var ce,ye,ke,ze,Ze,ot,mt,Tt,qt,an,$t,bn,Dn=K[0],Vn=K[1],Bn=K[2];return F===S?(S[12]=F[0]*Dn+F[4]*Vn+F[8]*Bn+F[12],S[13]=F[1]*Dn+F[5]*Vn+F[9]*Bn+F[13],S[14]=F[2]*Dn+F[6]*Vn+F[10]*Bn+F[14],S[15]=F[3]*Dn+F[7]*Vn+F[11]*Bn+F[15]):(ye=F[1],ke=F[2],ze=F[3],Ze=F[4],ot=F[5],mt=F[6],Tt=F[7],qt=F[8],an=F[9],$t=F[10],bn=F[11],S[0]=ce=F[0],S[1]=ye,S[2]=ke,S[3]=ze,S[4]=Ze,S[5]=ot,S[6]=mt,S[7]=Tt,S[8]=qt,S[9]=an,S[10]=$t,S[11]=bn,S[12]=ce*Dn+Ze*Vn+qt*Bn+F[12],S[13]=ye*Dn+ot*Vn+an*Bn+F[13],S[14]=ke*Dn+mt*Vn+$t*Bn+F[14],S[15]=ze*Dn+Tt*Vn+bn*Bn+F[15]),S},e.triggerPluginCompletionEvent=Jo,e.uniqueId=d,e.validateCustomStyleLayer=function(S){var F=[],K=S.id;return void 0===K&&F.push({message:"layers."+K+': missing required property "id"'}),void 0===S.render&&F.push({message:"layers."+K+': missing required method "render"'}),S.renderingMode&&"2d"!==S.renderingMode&&"3d"!==S.renderingMode&&F.push({message:"layers."+K+': property "renderingMode" must be either "2d" or "3d"'}),F},e.validateLight=kr,e.validateStyle=fr,e.values=function(S){var F=[];for(var K in S)F.push(S[K]);return F},e.vectorTile=zc,e.version="1.10.1",e.warnOnce=C,e.webpSupported=ie,e.window=self,e.wrap=f}),y(0,function(e){function r(Me){var Ee=typeof Me;if("number"===Ee||"boolean"===Ee||"string"===Ee||null==Me)return JSON.stringify(Me);if(Array.isArray(Me)){for(var Se="[",je=0,qe=Me;je<qe.length;je+=1)Se+=r(qe[je])+",";return Se+"]"}for(var Je=Object.keys(Me).sort(),at="{",it=0;it<Je.length;it++)at+=JSON.stringify(Je[it])+":"+r(Me[Je[it]])+",";return at+"}"}function n(Me){for(var Ee="",Se=0,je=e.refProperties;Se<je.length;Se+=1)Ee+="/"+r(Me[je[Se]]);return Ee}var a=function(Me){this.keyCache={},Me&&this.replace(Me)};a.prototype.replace=function(Me){this._layerConfigs={},this._layers={},this.update(Me,[])},a.prototype.update=function(Me,Ee){for(var Se=this,je=0,qe=Me;je<qe.length;je+=1){var Je=qe[je];this._layerConfigs[Je.id]=Je;var at=this._layers[Je.id]=e.createStyleLayer(Je);at._featureFilter=e.featureFilter(at.filter),this.keyCache[Je.id]&&delete this.keyCache[Je.id]}for(var it=0,yt=Ee;it<yt.length;it+=1){var vt=yt[it];delete this.keyCache[vt],delete this._layerConfigs[vt],delete this._layers[vt]}this.familiesBySource={};for(var Ut=0,Wt=function(et,dt){for(var Mt={},zt=0;zt<et.length;zt++){var Xt=dt&&dt[et[zt].id]||n(et[zt]);dt&&(dt[et[zt].id]=Xt);var un=Mt[Xt];un||(un=Mt[Xt]=[]),un.push(et[zt])}var Qt=[];for(var kn in Mt)Qt.push(Mt[kn]);return Qt}(e.values(this._layerConfigs),this.keyCache);Ut<Wt.length;Ut+=1){var gt=Wt[Ut].map(function(et){return Se._layers[et.id]}),At=gt[0];if("none"!==At.visibility){var Zt=At.source||"",Et=this.familiesBySource[Zt];Et||(Et=this.familiesBySource[Zt]={});var Ct=At.sourceLayer||"_geojsonTileLayer",Ne=Et[Ct];Ne||(Ne=Et[Ct]=[]),Ne.push(gt)}}};var t=function(Me){var Ee={},Se=[];for(var je in Me){var qe=Me[je],Je=Ee[je]={};for(var at in qe){var it=qe[+at];if(it&&0!==it.bitmap.width&&0!==it.bitmap.height){var yt={x:0,y:0,w:it.bitmap.width+2,h:it.bitmap.height+2};Se.push(yt),Je[at]={rect:yt,metrics:it.metrics}}}}var vt=e.potpack(Se),gt=new e.AlphaImage({width:vt.w||1,height:vt.h||1});for(var At in Me){var Zt=Me[At];for(var Et in Zt){var Ct=Zt[+Et];if(Ct&&0!==Ct.bitmap.width&&0!==Ct.bitmap.height){var Ne=Ee[At][Et].rect;e.AlphaImage.copy(Ct.bitmap,gt,{x:0,y:0},{x:Ne.x+1,y:Ne.y+1},Ct.bitmap)}}}this.image=gt,this.positions=Ee};e.register("GlyphAtlas",t);var p=function(Me){this.tileID=new e.OverscaledTileID(Me.tileID.overscaledZ,Me.tileID.wrap,Me.tileID.canonical.z,Me.tileID.canonical.x,Me.tileID.canonical.y),this.uid=Me.uid,this.zoom=Me.zoom,this.pixelRatio=Me.pixelRatio,this.tileSize=Me.tileSize,this.source=Me.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Me.showCollisionBoxes,this.collectResourceTiming=!!Me.collectResourceTiming,this.returnDependencies=!!Me.returnDependencies,this.promoteId=Me.promoteId};function u(Me,Ee,Se){for(var je=new e.EvaluationParameters(Ee),qe=0,Je=Me;qe<Je.length;qe+=1)Je[qe].recalculate(je,Se)}function i(Me,Ee){var Se=e.getArrayBuffer(Me.request,function(je,qe,Je,at){je?Ee(je):qe&&Ee(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(qe)),rawData:qe,cacheControl:Je,expires:at})});return function(){Se.cancel(),Ee()}}p.prototype.parse=function(Me,Ee,Se,je,qe){var Je=this;this.status="parsing",this.data=Me,this.collisionBoxArray=new e.CollisionBoxArray;var at=new e.DictionaryCoder(Object.keys(Me.layers).sort()),it=new e.FeatureIndex(this.tileID,this.promoteId);it.bucketLayerIDs=[];var yt,vt,Ut,Wt,gt={},At={featureIndex:it,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Se},Zt=Ee.familiesBySource[this.source];for(var Et in Zt){var Ct=Me.layers[Et];if(Ct){1===Ct.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+Et+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ne=at.encode(Et),et=[],dt=0;dt<Ct.length;dt++){var Mt=Ct.feature(dt),zt=it.getId(Mt,Et);et.push({feature:Mt,id:zt,index:dt,sourceLayerIndex:Ne})}for(var Xt=0,un=Zt[Et];Xt<un.length;Xt+=1){var Qt=un[Xt],kn=Qt[0];kn.minzoom&&this.zoom<Math.floor(kn.minzoom)||kn.maxzoom&&this.zoom>=kn.maxzoom||"none"!==kn.visibility&&(u(Qt,this.zoom,Se),(gt[kn.id]=kn.createBucket({index:it.bucketLayerIDs.length,layers:Qt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ne,sourceID:this.source})).populate(et,At,this.tileID.canonical),it.bucketLayerIDs.push(Qt.map(function(pn){return pn.id})))}}}var qn=e.mapObject(At.glyphDependencies,function(pn){return Object.keys(pn).map(Number)});Object.keys(qn).length?je.send("getGlyphs",{uid:this.uid,stacks:qn},function(pn,Mn){yt||(yt=pn,vt=Mn,vn.call(Je))}):vt={};var gn=Object.keys(At.iconDependencies);gn.length?je.send("getImages",{icons:gn,source:this.source,tileID:this.tileID,type:"icons"},function(pn,Mn){yt||(yt=pn,Ut=Mn,vn.call(Je))}):Ut={};var sn=Object.keys(At.patternDependencies);function vn(){if(yt)return qe(yt);if(vt&&Ut&&Wt){var pn=new t(vt),Mn=new e.ImageAtlas(Ut,Wt);for(var Rn in gt){var Xn=gt[Rn];Xn instanceof e.SymbolBucket?(u(Xn.layers,this.zoom,Se),e.performSymbolLayout(Xn,vt,pn.positions,Ut,Mn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Xn.hasPattern&&(Xn instanceof e.LineBucket||Xn instanceof e.FillBucket||Xn instanceof e.FillExtrusionBucket)&&(u(Xn.layers,this.zoom,Se),Xn.addFeatures(At,this.tileID.canonical,Mn.patternPositions))}this.status="done",qe(null,{buckets:e.values(gt).filter(function(Hn){return!Hn.isEmpty()}),featureIndex:it,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:pn.image,imageAtlas:Mn,glyphMap:this.returnDependencies?vt:null,iconMap:this.returnDependencies?Ut:null,glyphPositions:this.returnDependencies?pn.positions:null})}}sn.length?je.send("getImages",{icons:sn,source:this.source,tileID:this.tileID,type:"patterns"},function(pn,Mn){yt||(yt=pn,Wt=Mn,vn.call(Je))}):Wt={},vn.call(this)};var c=function(Me,Ee,Se,je){this.actor=Me,this.layerIndex=Ee,this.availableImages=Se,this.loadVectorData=je||i,this.loading={},this.loaded={}};c.prototype.loadTile=function(Me,Ee){var Se=this,je=Me.uid;this.loading||(this.loading={});var qe=!!(Me&&Me.request&&Me.request.collectResourceTiming)&&new e.RequestPerformance(Me.request),Je=this.loading[je]=new p(Me);Je.abort=this.loadVectorData(Me,function(at,it){if(delete Se.loading[je],at||!it)return Je.status="done",Se.loaded[je]=Je,Ee(at);var yt=it.rawData,vt={};it.expires&&(vt.expires=it.expires),it.cacheControl&&(vt.cacheControl=it.cacheControl);var Ut={};if(qe){var Wt=qe.finish();Wt&&(Ut.resourceTiming=JSON.parse(JSON.stringify(Wt)))}Je.vectorTile=it.vectorTile,Je.parse(it.vectorTile,Se.layerIndex,Se.availableImages,Se.actor,function(gt,At){if(gt||!At)return Ee(gt);Ee(null,e.extend({rawTileData:yt.slice(0)},At,vt,Ut))}),Se.loaded=Se.loaded||{},Se.loaded[je]=Je})},c.prototype.reloadTile=function(Me,Ee){var Se=this,je=this.loaded,qe=Me.uid,Je=this;if(je&&je[qe]){var at=je[qe];at.showCollisionBoxes=Me.showCollisionBoxes;var it=function(yt,vt){var Ut=at.reloadCallback;Ut&&(delete at.reloadCallback,at.parse(at.vectorTile,Je.layerIndex,Se.availableImages,Je.actor,Ut)),Ee(yt,vt)};"parsing"===at.status?at.reloadCallback=it:"done"===at.status&&(at.vectorTile?at.parse(at.vectorTile,this.layerIndex,this.availableImages,this.actor,it):it())}},c.prototype.abortTile=function(Me,Ee){var Se=this.loading,je=Me.uid;Se&&Se[je]&&Se[je].abort&&(Se[je].abort(),delete Se[je]),Ee()},c.prototype.removeTile=function(Me,Ee){var Se=this.loaded,je=Me.uid;Se&&Se[je]&&delete Se[je],Ee()};var f=e.window.ImageBitmap,l=function(){this.loaded={}};l.prototype.loadTile=function(Me,Ee){var Se=Me.uid,je=Me.encoding,qe=Me.rawImageData,Je=f&&qe instanceof f?this.getImageData(qe):qe,at=new e.DEMData(Se,Je,je);this.loaded=this.loaded||{},this.loaded[Se]=at,Ee(null,at)},l.prototype.getImageData=function(Me){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Me.width,Me.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Me.width,this.offscreenCanvas.height=Me.height,this.offscreenCanvasContext.drawImage(Me,0,0,Me.width,Me.height);var Ee=this.offscreenCanvasContext.getImageData(-1,-1,Me.width+2,Me.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:Ee.width,height:Ee.height},Ee.data)},l.prototype.removeTile=function(Me){var Ee=this.loaded,Se=Me.uid;Ee&&Ee[Se]&&delete Ee[Se]};var h=function Me(Ee,Se){var je,qe=Ee&&Ee.type;if("FeatureCollection"===qe)for(je=0;je<Ee.features.length;je++)Me(Ee.features[je],Se);else if("GeometryCollection"===qe)for(je=0;je<Ee.geometries.length;je++)Me(Ee.geometries[je],Se);else if("Feature"===qe)Me(Ee.geometry,Se);else if("Polygon"===qe)d(Ee.coordinates,Se);else if("MultiPolygon"===qe)for(je=0;je<Ee.coordinates.length;je++)d(Ee.coordinates[je],Se);return Ee};function d(Me,Ee){if(0!==Me.length){o(Me[0],Ee);for(var Se=1;Se<Me.length;Se++)o(Me[Se],!Ee)}}function o(Me,Ee){for(var Se=0,je=0,qe=Me.length,Je=qe-1;je<qe;Je=je++)Se+=(Me[je][0]-Me[Je][0])*(Me[Je][1]+Me[je][1]);Se>=0!=!!Ee&&Me.reverse()}var _=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,s=function(Me){this._feature=Me,this.extent=e.EXTENT,this.type=Me.type,this.properties=Me.tags,"id"in Me&&!isNaN(Me.id)&&(this.id=parseInt(Me.id,10))};s.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Me=[],Ee=0,Se=this._feature.geometry;Ee<Se.length;Ee+=1){var je=Se[Ee];Me.push([new e.Point$1(je[0],je[1])])}return Me}for(var qe=[],Je=0,at=this._feature.geometry;Je<at.length;Je+=1){for(var it=[],yt=0,vt=at[Je];yt<vt.length;yt+=1){var Ut=vt[yt];it.push(new e.Point$1(Ut[0],Ut[1]))}qe.push(it)}return qe},s.prototype.toGeoJSON=function(Me,Ee,Se){return _.call(this,Me,Ee,Se)};var k=function(Me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=Me.length,this._features=Me};k.prototype.feature=function(Me){return new s(this._features[Me])};var M=e.vectorTile.VectorTileFeature,A=E;function E(Me,Ee){this.options=Ee||{},this.features=Me,this.length=Me.length}function I(Me,Ee){this.id="number"==typeof Me.id?Me.id:void 0,this.type=Me.type,this.rawGeometry=1===Me.type?[Me.geometry]:Me.geometry,this.properties=Me.tags,this.extent=Ee||4096}E.prototype.feature=function(Me){return new I(this.features[Me],this.options.extent)},I.prototype.loadGeometry=function(){var Me=this.rawGeometry;this.geometry=[];for(var Ee=0;Ee<Me.length;Ee++){for(var Se=Me[Ee],je=[],qe=0;qe<Se.length;qe++)je.push(new e.Point$1(Se[qe][0],Se[qe][1]));this.geometry.push(je)}return this.geometry},I.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Me=this.geometry,Ee=1/0,Se=-1/0,je=1/0,qe=-1/0,Je=0;Je<Me.length;Je++)for(var at=Me[Je],it=0;it<at.length;it++){var yt=at[it];Ee=Math.min(Ee,yt.x),Se=Math.max(Se,yt.x),je=Math.min(je,yt.y),qe=Math.max(qe,yt.y)}return[Ee,je,Se,qe]},I.prototype.toGeoJSON=M.prototype.toGeoJSON;var C=L,D=A;function L(Me){var Ee=new e.pbf;return function(Se,je){for(var qe in Se.layers)je.writeMessage(3,B,Se.layers[qe])}(Me,Ee),Ee.finish()}function B(Me,Ee){var Se;Ee.writeVarintField(15,Me.version||1),Ee.writeStringField(1,Me.name||""),Ee.writeVarintField(5,Me.extent||4096);var je={keys:[],values:[],keycache:{},valuecache:{}};for(Se=0;Se<Me.length;Se++)je.feature=Me.feature(Se),Ee.writeMessage(2,j,je);var qe=je.keys;for(Se=0;Se<qe.length;Se++)Ee.writeStringField(3,qe[Se]);var Je=je.values;for(Se=0;Se<Je.length;Se++)Ee.writeMessage(4,X,Je[Se])}function j(Me,Ee){var Se=Me.feature;void 0!==Se.id&&Ee.writeVarintField(1,Se.id),Ee.writeMessage(2,W,Me),Ee.writeVarintField(3,Se.type),Ee.writeMessage(4,ne,Se)}function W(Me,Ee){var Se=Me.feature,je=Me.keys,qe=Me.values,Je=Me.keycache,at=Me.valuecache;for(var it in Se.properties){var yt=Je[it];void 0===yt&&(je.push(it),Je[it]=yt=je.length-1),Ee.writeVarint(yt);var vt=Se.properties[it],Ut=typeof vt;"string"!==Ut&&"boolean"!==Ut&&"number"!==Ut&&(vt=JSON.stringify(vt));var Wt=Ut+":"+vt,gt=at[Wt];void 0===gt&&(qe.push(vt),at[Wt]=gt=qe.length-1),Ee.writeVarint(gt)}}function Y(Me,Ee){return(Ee<<3)+(7&Me)}function Q(Me){return Me<<1^Me>>31}function ne(Me,Ee){for(var Se=Me.loadGeometry(),je=Me.type,qe=0,Je=0,at=Se.length,it=0;it<at;it++){var yt=Se[it],vt=1;1===je&&(vt=yt.length),Ee.writeVarint(Y(1,vt));for(var Ut=3===je?yt.length-1:yt.length,Wt=0;Wt<Ut;Wt++){1===Wt&&1!==je&&Ee.writeVarint(Y(2,Ut-1));var gt=yt[Wt].x-qe,At=yt[Wt].y-Je;Ee.writeVarint(Q(gt)),Ee.writeVarint(Q(At)),qe+=gt,Je+=At}3===je&&Ee.writeVarint(Y(7,1))}}function X(Me,Ee){var Se=typeof Me;"string"===Se?Ee.writeStringField(1,Me):"boolean"===Se?Ee.writeBooleanField(7,Me):"number"===Se&&(Me%1!=0?Ee.writeDoubleField(3,Me):Me<0?Ee.writeSVarintField(6,Me):Ee.writeVarintField(5,Me))}function $(Me,Ee,Se,je,qe,Je){if(!(qe-je<=Se)){var at=je+qe>>1;(function it(yt,vt,Ut,Wt,gt,At){for(;gt>Wt;){if(gt-Wt>600){var Zt=gt-Wt+1,Et=Ut-Wt+1,Ct=Math.log(Zt),Ne=.5*Math.exp(2*Ct/3),et=.5*Math.sqrt(Ct*Ne*(Zt-Ne)/Zt)*(Et-Zt/2<0?-1:1);it(yt,vt,Ut,Math.max(Wt,Math.floor(Ut-Et*Ne/Zt+et)),Math.min(gt,Math.floor(Ut+(Zt-Et)*Ne/Zt+et)),At)}var zt=vt[2*Ut+At],Xt=Wt,un=gt;for(re(yt,vt,Wt,Ut),vt[2*gt+At]>zt&&re(yt,vt,Wt,gt);Xt<un;){for(re(yt,vt,Xt,un),Xt++,un--;vt[2*Xt+At]<zt;)Xt++;for(;vt[2*un+At]>zt;)un--}vt[2*Wt+At]===zt?re(yt,vt,Wt,un):re(yt,vt,++un,gt),un<=Ut&&(Wt=un+1),Ut<=un&&(gt=un-1)}})(Me,Ee,at,je,qe,Je%2),$(Me,Ee,Se,je,at-1,Je+1),$(Me,Ee,Se,at+1,qe,Je+1)}}function re(Me,Ee,Se,je){H(Me,Se,je),H(Ee,2*Se,2*je),H(Ee,2*Se+1,2*je+1)}function H(Me,Ee,Se){var je=Me[Ee];Me[Ee]=Me[Se],Me[Se]=je}function U(Me,Ee,Se,je){var qe=Me-Se,Je=Ee-je;return qe*qe+Je*Je}C.fromVectorTileJs=L,C.fromGeojsonVt=function(Me,Ee){Ee=Ee||{};var Se={};for(var je in Me)Se[je]=new A(Me[je].features,Ee),Se[je].name=je,Se[je].version=Ee.version,Se[je].extent=Ee.extent;return L({layers:Se})},C.GeoJSONWrapper=D;var G=function(Me){return Me[0]},ie=function(Me){return Me[1]},q=function(Me,Ee,Se,je,qe){void 0===Ee&&(Ee=G),void 0===Se&&(Se=ie),void 0===je&&(je=64),void 0===qe&&(qe=Float64Array),this.nodeSize=je,this.points=Me;for(var Je=Me.length<65536?Uint16Array:Uint32Array,at=this.ids=new Je(Me.length),it=this.coords=new qe(2*Me.length),yt=0;yt<Me.length;yt++)at[yt]=yt,it[2*yt]=Ee(Me[yt]),it[2*yt+1]=Se(Me[yt]);$(at,it,je,0,at.length-1,0)};q.prototype.range=function(Me,Ee,Se,je){return function(qe,Je,at,it,yt,vt,Ut){for(var Wt,gt,At=[0,qe.length-1,0],Zt=[];At.length;){var Et=At.pop(),Ct=At.pop(),Ne=At.pop();if(Ct-Ne<=Ut)for(var et=Ne;et<=Ct;et++)gt=Je[2*et+1],(Wt=Je[2*et])>=at&&Wt<=yt&&gt>=it&&gt<=vt&&Zt.push(qe[et]);else{var dt=Math.floor((Ne+Ct)/2);gt=Je[2*dt+1],(Wt=Je[2*dt])>=at&&Wt<=yt&&gt>=it&&gt<=vt&&Zt.push(qe[dt]);var Mt=(Et+1)%2;(0===Et?at<=Wt:it<=gt)&&(At.push(Ne),At.push(dt-1),At.push(Mt)),(0===Et?yt>=Wt:vt>=gt)&&(At.push(dt+1),At.push(Ct),At.push(Mt))}}return Zt}(this.ids,this.coords,Me,Ee,Se,je,this.nodeSize)},q.prototype.within=function(Me,Ee,Se){return function(je,qe,Je,at,it,yt){for(var vt=[0,je.length-1,0],Ut=[],Wt=it*it;vt.length;){var gt=vt.pop(),At=vt.pop(),Zt=vt.pop();if(At-Zt<=yt)for(var Et=Zt;Et<=At;Et++)U(qe[2*Et],qe[2*Et+1],Je,at)<=Wt&&Ut.push(je[Et]);else{var Ct=Math.floor((Zt+At)/2),Ne=qe[2*Ct],et=qe[2*Ct+1];U(Ne,et,Je,at)<=Wt&&Ut.push(je[Ct]);var dt=(gt+1)%2;(0===gt?Je-it<=Ne:at-it<=et)&&(vt.push(Zt),vt.push(Ct-1),vt.push(dt)),(0===gt?Je+it>=Ne:at+it>=et)&&(vt.push(Ct+1),vt.push(At),vt.push(dt))}}return Ut}(this.ids,this.coords,Me,Ee,Se,this.nodeSize)};var ee={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Me){return Me}},te=function(Me){this.options=_e(Object.create(ee),Me),this.trees=new Array(this.options.maxZoom+1)};function se(Me,Ee,Se,je,qe){return{x:Me,y:Ee,zoom:1/0,id:Se,parentId:-1,numPoints:je,properties:qe}}function ue(Me,Ee){var Se=Me.geometry.coordinates,qe=Se[1];return{x:xe(Se[0]),y:ge(qe),zoom:1/0,index:Ee,parentId:-1}}function de(Me){return{type:"Feature",id:Me.id,properties:he(Me),geometry:{type:"Point",coordinates:[(je=Me.x,360*(je-.5)),(Ee=Me.y,Se=(180-360*Ee)*Math.PI/180,360*Math.atan(Math.exp(Se))/Math.PI-90)]}};var Ee,Se,je}function he(Me){var Ee=Me.numPoints,Se=Ee>=1e4?Math.round(Ee/1e3)+"k":Ee>=1e3?Math.round(Ee/100)/10+"k":Ee;return _e(_e({},Me.properties),{cluster:!0,cluster_id:Me.id,point_count:Ee,point_count_abbreviated:Se})}function xe(Me){return Me/360+.5}function ge(Me){var Ee=Math.sin(Me*Math.PI/180),Se=.5-.25*Math.log((1+Ee)/(1-Ee))/Math.PI;return Se<0?0:Se>1?1:Se}function _e(Me,Ee){for(var Se in Ee)Me[Se]=Ee[Se];return Me}function Ce(Me){return Me.x}function Le(Me){return Me.y}function Ie(Me,Ee,Se,je,qe,Je){var at=qe-Se,it=Je-je;if(0!==at||0!==it){var yt=((Me-Se)*at+(Ee-je)*it)/(at*at+it*it);yt>1?(Se=qe,je=Je):yt>0&&(Se+=at*yt,je+=it*yt)}return(at=Me-Se)*at+(it=Ee-je)*it}function Be(Me,Ee,Se,je){var qe={id:void 0===Me?null:Me,type:Ee,geometry:Se,tags:je,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Je){var at=Je.geometry,it=Je.type;if("Point"===it||"MultiPoint"===it||"LineString"===it)ve(Je,at);else if("Polygon"===it||"MultiLineString"===it)for(var yt=0;yt<at.length;yt++)ve(Je,at[yt]);else if("MultiPolygon"===it)for(yt=0;yt<at.length;yt++)for(var vt=0;vt<at[yt].length;vt++)ve(Je,at[yt][vt])}(qe),qe}function ve(Me,Ee){for(var Se=0;Se<Ee.length;Se+=3)Me.minX=Math.min(Me.minX,Ee[Se]),Me.minY=Math.min(Me.minY,Ee[Se+1]),Me.maxX=Math.max(Me.maxX,Ee[Se]),Me.maxY=Math.max(Me.maxY,Ee[Se+1])}function Te(Me,Ee,Se,je){if(Ee.geometry){var qe=Ee.geometry.coordinates,Je=Ee.geometry.type,at=Math.pow(Se.tolerance/((1<<Se.maxZoom)*Se.extent),2),it=[],yt=Ee.id;if(Se.promoteId?yt=Ee.properties[Se.promoteId]:Se.generateId&&(yt=je||0),"Point"===Je)Pe(qe,it);else if("MultiPoint"===Je)for(var vt=0;vt<qe.length;vt++)Pe(qe[vt],it);else if("LineString"===Je)De(qe,it,at,!1);else if("MultiLineString"===Je){if(Se.lineMetrics){for(vt=0;vt<qe.length;vt++)De(qe[vt],it=[],at,!1),Me.push(Be(yt,"LineString",it,Ee.properties));return}Fe(qe,it,at,!1)}else if("Polygon"===Je)Fe(qe,it,at,!0);else{if("MultiPolygon"!==Je){if("GeometryCollection"===Je){for(vt=0;vt<Ee.geometry.geometries.length;vt++)Te(Me,{id:yt,geometry:Ee.geometry.geometries[vt],properties:Ee.properties},Se,je);return}throw new Error("Input data is not a valid GeoJSON object.")}for(vt=0;vt<qe.length;vt++){var Ut=[];Fe(qe[vt],Ut,at,!0),it.push(Ut)}}Me.push(Be(yt,Je,it,Ee.properties))}}function Pe(Me,Ee){Ee.push(Ue(Me[0])),Ee.push(He(Me[1])),Ee.push(0)}function De(Me,Ee,Se,je){for(var qe,Je,at=0,it=0;it<Me.length;it++){var yt=Ue(Me[it][0]),vt=He(Me[it][1]);Ee.push(yt),Ee.push(vt),Ee.push(0),it>0&&(at+=je?(qe*vt-yt*Je)/2:Math.sqrt(Math.pow(yt-qe,2)+Math.pow(vt-Je,2))),qe=yt,Je=vt}var Ut=Ee.length-3;Ee[2]=1,function Wt(gt,At,Zt,Et){for(var Ct,Ne=Et,et=Zt-At>>1,dt=Zt-At,Mt=gt[At],zt=gt[At+1],Xt=gt[Zt],un=gt[Zt+1],Qt=At+3;Qt<Zt;Qt+=3){var kn=Ie(gt[Qt],gt[Qt+1],Mt,zt,Xt,un);if(kn>Ne)Ct=Qt,Ne=kn;else if(kn===Ne){var qn=Math.abs(Qt-et);qn<dt&&(Ct=Qt,dt=qn)}}Ne>Et&&(Ct-At>3&&Wt(gt,At,Ct,Et),gt[Ct+2]=Ne,Zt-Ct>3&&Wt(gt,Ct,Zt,Et))}(Ee,0,Ut,Se),Ee[Ut+2]=1,Ee.size=Math.abs(at),Ee.start=0,Ee.end=Ee.size}function Fe(Me,Ee,Se,je){for(var qe=0;qe<Me.length;qe++){var Je=[];De(Me[qe],Je,Se,je),Ee.push(Je)}}function Ue(Me){return Me/360+.5}function He(Me){var Ee=Math.sin(Me*Math.PI/180),Se=.5-.25*Math.log((1+Ee)/(1-Ee))/Math.PI;return Se<0?0:Se>1?1:Se}function Ke(Me,Ee,Se,je,qe,Je,at,it){if(je/=Ee,Je>=(Se/=Ee)&&at<je)return Me;if(at<Se||Je>=je)return null;for(var yt=[],vt=0;vt<Me.length;vt++){var Ut=Me[vt],Wt=Ut.geometry,gt=Ut.type,At=0===qe?Ut.minX:Ut.minY,Zt=0===qe?Ut.maxX:Ut.maxY;if(At>=Se&&Zt<je)yt.push(Ut);else if(!(Zt<Se||At>=je)){var Et=[];if("Point"===gt||"MultiPoint"===gt)st(Wt,Et,Se,je,qe);else if("LineString"===gt)Ve(Wt,Et,Se,je,qe,!1,it.lineMetrics);else if("MultiLineString"===gt)Qe(Wt,Et,Se,je,qe,!1);else if("Polygon"===gt)Qe(Wt,Et,Se,je,qe,!0);else if("MultiPolygon"===gt)for(var Ct=0;Ct<Wt.length;Ct++){var Ne=[];Qe(Wt[Ct],Ne,Se,je,qe,!0),Ne.length&&Et.push(Ne)}if(Et.length){if(it.lineMetrics&&"LineString"===gt){for(Ct=0;Ct<Et.length;Ct++)yt.push(Be(Ut.id,gt,Et[Ct],Ut.tags));continue}"LineString"!==gt&&"MultiLineString"!==gt||(1===Et.length?(gt="LineString",Et=Et[0]):gt="MultiLineString"),"Point"!==gt&&"MultiPoint"!==gt||(gt=3===Et.length?"Point":"MultiPoint"),yt.push(Be(Ut.id,gt,Et,Ut.tags))}}}return yt.length?yt:null}function st(Me,Ee,Se,je,qe){for(var Je=0;Je<Me.length;Je+=3){var at=Me[Je+qe];at>=Se&&at<=je&&(Ee.push(Me[Je]),Ee.push(Me[Je+1]),Ee.push(Me[Je+2]))}}function Ve(Me,Ee,Se,je,qe,Je,at){for(var it,yt,vt=$e(Me),Ut=0===qe?ut:xt,Wt=Me.start,gt=0;gt<Me.length-3;gt+=3){var At=Me[gt],Zt=Me[gt+1],Et=Me[gt+2],Ct=Me[gt+3],Ne=Me[gt+4],et=0===qe?At:Zt,dt=0===qe?Ct:Ne,Mt=!1;at&&(it=Math.sqrt(Math.pow(At-Ct,2)+Math.pow(Zt-Ne,2))),et<Se?dt>Se&&(yt=Ut(vt,At,Zt,Ct,Ne,Se),at&&(vt.start=Wt+it*yt)):et>je?dt<je&&(yt=Ut(vt,At,Zt,Ct,Ne,je),at&&(vt.start=Wt+it*yt)):tt(vt,At,Zt,Et),dt<Se&&et>=Se&&(yt=Ut(vt,At,Zt,Ct,Ne,Se),Mt=!0),dt>je&&et<=je&&(yt=Ut(vt,At,Zt,Ct,Ne,je),Mt=!0),!Je&&Mt&&(at&&(vt.end=Wt+it*yt),Ee.push(vt),vt=$e(Me)),at&&(Wt+=it)}var zt=Me.length-3;At=Me[zt],Zt=Me[zt+1],Et=Me[zt+2],(et=0===qe?At:Zt)>=Se&&et<=je&&tt(vt,At,Zt,Et),zt=vt.length-3,Je&&zt>=3&&(vt[zt]!==vt[0]||vt[zt+1]!==vt[1])&&tt(vt,vt[0],vt[1],vt[2]),vt.length&&Ee.push(vt)}function $e(Me){var Ee=[];return Ee.size=Me.size,Ee.start=Me.start,Ee.end=Me.end,Ee}function Qe(Me,Ee,Se,je,qe,Je){for(var at=0;at<Me.length;at++)Ve(Me[at],Ee,Se,je,qe,Je,!1)}function tt(Me,Ee,Se,je){Me.push(Ee),Me.push(Se),Me.push(je)}function ut(Me,Ee,Se,je,qe,Je){var at=(Je-Ee)/(je-Ee);return Me.push(Je),Me.push(Se+(qe-Se)*at),Me.push(1),at}function xt(Me,Ee,Se,je,qe,Je){var at=(Je-Se)/(qe-Se);return Me.push(Ee+(je-Ee)*at),Me.push(Je),Me.push(1),at}function kt(Me,Ee){for(var Se=[],je=0;je<Me.length;je++){var qe,Je=Me[je],at=Je.type;if("Point"===at||"MultiPoint"===at||"LineString"===at)qe=Bt(Je.geometry,Ee);else if("MultiLineString"===at||"Polygon"===at){qe=[];for(var it=0;it<Je.geometry.length;it++)qe.push(Bt(Je.geometry[it],Ee))}else if("MultiPolygon"===at)for(qe=[],it=0;it<Je.geometry.length;it++){for(var yt=[],vt=0;vt<Je.geometry[it].length;vt++)yt.push(Bt(Je.geometry[it][vt],Ee));qe.push(yt)}Se.push(Be(Je.id,at,qe,Je.tags))}return Se}function Bt(Me,Ee){var Se=[];Se.size=Me.size,void 0!==Me.start&&(Se.start=Me.start,Se.end=Me.end);for(var je=0;je<Me.length;je+=3)Se.push(Me[je]+Ee,Me[je+1],Me[je+2]);return Se}function Rt(Me,Ee){if(Me.transformed)return Me;var Se,je,qe,Je=1<<Me.z,at=Me.x,it=Me.y;for(Se=0;Se<Me.features.length;Se++){var yt=Me.features[Se],vt=yt.geometry,Ut=yt.type;if(yt.geometry=[],1===Ut)for(je=0;je<vt.length;je+=2)yt.geometry.push(ft(vt[je],vt[je+1],Ee,Je,at,it));else for(je=0;je<vt.length;je++){var Wt=[];for(qe=0;qe<vt[je].length;qe+=2)Wt.push(ft(vt[je][qe],vt[je][qe+1],Ee,Je,at,it));yt.geometry.push(Wt)}}return Me.transformed=!0,Me}function ft(Me,Ee,Se,je,qe,Je){return[Math.round(Se*(Me*je-qe)),Math.round(Se*(Ee*je-Je))]}function lt(Me,Ee,Se,je,qe){for(var Je=Ee===qe.maxZoom?0:qe.tolerance/((1<<Ee)*qe.extent),at={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Se,y:je,z:Ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},it=0;it<Me.length;it++){at.numFeatures++,Ft(at,Me[it],Je,qe);var yt=Me[it].minX,vt=Me[it].minY,Ut=Me[it].maxX,Wt=Me[it].maxY;yt<at.minX&&(at.minX=yt),vt<at.minY&&(at.minY=vt),Ut>at.maxX&&(at.maxX=Ut),Wt>at.maxY&&(at.maxY=Wt)}return at}function Ft(Me,Ee,Se,je){var qe=Ee.geometry,Je=Ee.type,at=[];if("Point"===Je||"MultiPoint"===Je)for(var it=0;it<qe.length;it+=3)at.push(qe[it]),at.push(qe[it+1]),Me.numPoints++,Me.numSimplified++;else if("LineString"===Je)Jt(at,qe,Me,Se,!1,!1);else if("MultiLineString"===Je||"Polygon"===Je)for(it=0;it<qe.length;it++)Jt(at,qe[it],Me,Se,"Polygon"===Je,0===it);else if("MultiPolygon"===Je)for(var yt=0;yt<qe.length;yt++){var vt=qe[yt];for(it=0;it<vt.length;it++)Jt(at,vt[it],Me,Se,!0,0===it)}if(at.length){var Ut=Ee.tags||null;if("LineString"===Je&&je.lineMetrics){for(var Wt in Ut={},Ee.tags)Ut[Wt]=Ee.tags[Wt];Ut.mapbox_clip_start=qe.start/qe.size,Ut.mapbox_clip_end=qe.end/qe.size}var gt={geometry:at,type:"Polygon"===Je||"MultiPolygon"===Je?3:"LineString"===Je||"MultiLineString"===Je?2:1,tags:Ut};null!==Ee.id&&(gt.id=Ee.id),Me.features.push(gt)}}function Jt(Me,Ee,Se,je,qe,Je){var at=je*je;if(je>0&&Ee.size<(qe?at:je))Se.numPoints+=Ee.length/3;else{for(var it=[],yt=0;yt<Ee.length;yt+=3)(0===je||Ee[yt+2]>at)&&(Se.numSimplified++,it.push(Ee[yt]),it.push(Ee[yt+1])),Se.numPoints++;qe&&function(vt,Ut){for(var Wt=0,gt=0,At=vt.length,Zt=At-2;gt<At;Zt=gt,gt+=2)Wt+=(vt[gt]-vt[Zt])*(vt[gt+1]+vt[Zt+1]);if(Wt>0===Ut)for(gt=0,At=vt.length;gt<At/2;gt+=2){var Et=vt[gt],Ct=vt[gt+1];vt[gt]=vt[At-2-gt],vt[gt+1]=vt[At-1-gt],vt[At-2-gt]=Et,vt[At-1-gt]=Ct}}(it,Je),Me.push(it)}}function ln(Me,Ee){var Se=(Ee=this.options=function(qe,Je){for(var at in Je)qe[at]=Je[at];return qe}(Object.create(this.options),Ee)).debug;if(Se&&console.time("preprocess data"),Ee.maxZoom<0||Ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ee.promoteId&&Ee.generateId)throw new Error("promoteId and generateId cannot be used together.");var qe,Je,at,it,yt,vt,je=function(qe,Je){var at=[];if("FeatureCollection"===qe.type)for(var it=0;it<qe.features.length;it++)Te(at,qe.features[it],Je,it);else Te(at,"Feature"===qe.type?qe:{geometry:qe},Je);return at}(Me,Ee);this.tiles={},this.tileCoords=[],Se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ee.indexMaxZoom,Ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(qe=je,Je=Ee,at=Je.buffer/Je.extent,it=qe,yt=Ke(qe,1,-1-at,at,0,-1,2,Je),vt=Ke(qe,1,1-at,2+at,0,-1,2,Je),(yt||vt)&&(it=Ke(qe,1,-at,1+at,0,-1,2,Je)||[],yt&&(it=kt(yt,1).concat(it)),vt&&(it=it.concat(kt(vt,-1)))),je=it).length&&this.splitTile(je,0,0,0),Se&&(je.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function dn(Me,Ee,Se){return 32*((1<<Me)*Se+Ee)+Me}function cn(Me,Ee){var Se=Me.tileID.canonical;if(!this._geoJSONIndex)return Ee(null,null);var je=this._geoJSONIndex.getTile(Se.z,Se.x,Se.y);if(!je)return Ee(null,null);var qe=new k(je.features),Je=C(qe);0===Je.byteOffset&&Je.byteLength===Je.buffer.byteLength||(Je=new Uint8Array(Je)),Ee(null,{vectorTile:qe,rawData:Je.buffer})}te.prototype.load=function(Me){var Ee=this.options,Se=Ee.log,je=Ee.minZoom,qe=Ee.maxZoom,Je=Ee.nodeSize;Se&&console.time("total time");var at="prepare "+Me.length+" points";Se&&console.time(at),this.points=Me;for(var it=[],yt=0;yt<Me.length;yt++)Me[yt].geometry&&it.push(ue(Me[yt],yt));this.trees[qe+1]=new q(it,Ce,Le,Je,Float32Array),Se&&console.timeEnd(at);for(var vt=qe;vt>=je;vt--){var Ut=+Date.now();it=this._cluster(it,vt),this.trees[vt]=new q(it,Ce,Le,Je,Float32Array),Se&&console.log("z%d: %d clusters in %dms",vt,it.length,+Date.now()-Ut)}return Se&&console.timeEnd("total time"),this},te.prototype.getClusters=function(Me,Ee){var Se=((Me[0]+180)%360+360)%360-180,je=Math.max(-90,Math.min(90,Me[1])),qe=180===Me[2]?180:((Me[2]+180)%360+360)%360-180,Je=Math.max(-90,Math.min(90,Me[3]));if(Me[2]-Me[0]>=360)Se=-180,qe=180;else if(Se>qe){var at=this.getClusters([Se,je,180,Je],Ee),it=this.getClusters([-180,je,qe,Je],Ee);return at.concat(it)}for(var yt=this.trees[this._limitZoom(Ee)],vt=[],Ut=0,Wt=yt.range(xe(Se),ge(Je),xe(qe),ge(je));Ut<Wt.length;Ut+=1){var At=yt.points[Wt[Ut]];vt.push(At.numPoints?de(At):this.points[At.index])}return vt},te.prototype.getChildren=function(Me){var Ee=this._getOriginId(Me),Se=this._getOriginZoom(Me),je="No cluster with the specified id.",qe=this.trees[Se];if(!qe)throw new Error(je);var Je=qe.points[Ee];if(!Je)throw new Error(je);for(var at=this.options.radius/(this.options.extent*Math.pow(2,Se-1)),it=[],yt=0,vt=qe.within(Je.x,Je.y,at);yt<vt.length;yt+=1){var Wt=qe.points[vt[yt]];Wt.parentId===Me&&it.push(Wt.numPoints?de(Wt):this.points[Wt.index])}if(0===it.length)throw new Error(je);return it},te.prototype.getLeaves=function(Me,Ee,Se){var je=[];return this._appendLeaves(je,Me,Ee=Ee||10,Se=Se||0,0),je},te.prototype.getTile=function(Me,Ee,Se){var je=this.trees[this._limitZoom(Me)],qe=Math.pow(2,Me),Je=this.options,it=Je.radius/Je.extent,yt=(Se-it)/qe,vt=(Se+1+it)/qe,Ut={features:[]};return this._addTileFeatures(je.range((Ee-it)/qe,yt,(Ee+1+it)/qe,vt),je.points,Ee,Se,qe,Ut),0===Ee&&this._addTileFeatures(je.range(1-it/qe,yt,1,vt),je.points,qe,Se,qe,Ut),Ee===qe-1&&this._addTileFeatures(je.range(0,yt,it/qe,vt),je.points,-1,Se,qe,Ut),Ut.features.length?Ut:null},te.prototype.getClusterExpansionZoom=function(Me){for(var Ee=this._getOriginZoom(Me)-1;Ee<=this.options.maxZoom;){var Se=this.getChildren(Me);if(Ee++,1!==Se.length)break;Me=Se[0].properties.cluster_id}return Ee},te.prototype._appendLeaves=function(Me,Ee,Se,je,qe){for(var Je=0,at=this.getChildren(Ee);Je<at.length;Je+=1){var it=at[Je],yt=it.properties;if(yt&&yt.cluster?qe+yt.point_count<=je?qe+=yt.point_count:qe=this._appendLeaves(Me,yt.cluster_id,Se,je,qe):qe<je?qe++:Me.push(it),Me.length===Se)break}return qe},te.prototype._addTileFeatures=function(Me,Ee,Se,je,qe,Je){for(var at=0,it=Me;at<it.length;at+=1){var yt=Ee[it[at]],vt=yt.numPoints,Ut={type:1,geometry:[[Math.round(this.options.extent*(yt.x*qe-Se)),Math.round(this.options.extent*(yt.y*qe-je))]],tags:vt?he(yt):this.points[yt.index].properties},Wt=void 0;vt?Wt=yt.id:this.options.generateId?Wt=yt.index:this.points[yt.index].id&&(Wt=this.points[yt.index].id),void 0!==Wt&&(Ut.id=Wt),Je.features.push(Ut)}},te.prototype._limitZoom=function(Me){return Math.max(this.options.minZoom,Math.min(Me,this.options.maxZoom+1))},te.prototype._cluster=function(Me,Ee){for(var Se=[],je=this.options,at=je.reduce,it=je.radius/(je.extent*Math.pow(2,Ee)),yt=0;yt<Me.length;yt++){var vt=Me[yt];if(!(vt.zoom<=Ee)){vt.zoom=Ee;for(var Ut=this.trees[Ee+1],Wt=Ut.within(vt.x,vt.y,it),gt=vt.numPoints||1,At=vt.x*gt,Zt=vt.y*gt,Et=at&&gt>1?this._map(vt,!0):null,Ct=(yt<<5)+(Ee+1)+this.points.length,Ne=0,et=Wt;Ne<et.length;Ne+=1){var Mt=Ut.points[et[Ne]];if(!(Mt.zoom<=Ee)){Mt.zoom=Ee;var zt=Mt.numPoints||1;At+=Mt.x*zt,Zt+=Mt.y*zt,gt+=zt,Mt.parentId=Ct,at&&(Et||(Et=this._map(vt,!0)),at(Et,this._map(Mt)))}}1===gt?Se.push(vt):(vt.parentId=Ct,Se.push(se(At/gt,Zt/gt,Ct,gt,Et)))}}return Se},te.prototype._getOriginId=function(Me){return Me-this.points.length>>5},te.prototype._getOriginZoom=function(Me){return(Me-this.points.length)%32},te.prototype._map=function(Me,Ee){if(Me.numPoints)return Ee?_e({},Me.properties):Me.properties;var Se=this.points[Me.index].properties,je=this.options.map(Se);return Ee&&je===Se?_e({},je):je},ln.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ln.prototype.splitTile=function(Me,Ee,Se,je,qe,Je,at){for(var it=[Me,Ee,Se,je],yt=this.options,vt=yt.debug;it.length;){je=it.pop(),Se=it.pop(),Ee=it.pop(),Me=it.pop();var Ut=1<<Ee,Wt=dn(Ee,Se,je),gt=this.tiles[Wt];if(!gt&&(vt>1&&console.time("creation"),gt=this.tiles[Wt]=lt(Me,Ee,Se,je,yt),this.tileCoords.push({z:Ee,x:Se,y:je}),vt)){vt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ee,Se,je,gt.numFeatures,gt.numPoints,gt.numSimplified),console.timeEnd("creation"));var At="z"+Ee;this.stats[At]=(this.stats[At]||0)+1,this.total++}if(gt.source=Me,qe){if(Ee===yt.maxZoom||Ee===qe)continue;var Zt=1<<qe-Ee;if(Se!==Math.floor(Je/Zt)||je!==Math.floor(at/Zt))continue}else if(Ee===yt.indexMaxZoom||gt.numPoints<=yt.indexMaxPoints)continue;if(gt.source=null,0!==Me.length){vt>1&&console.time("clipping");var Et,Ct,Ne,et,dt,Mt,zt=.5*yt.buffer/yt.extent,Xt=.5-zt,un=.5+zt,Qt=1+zt;Et=Ct=Ne=et=null,dt=Ke(Me,Ut,Se-zt,Se+un,0,gt.minX,gt.maxX,yt),Mt=Ke(Me,Ut,Se+Xt,Se+Qt,0,gt.minX,gt.maxX,yt),Me=null,dt&&(Et=Ke(dt,Ut,je-zt,je+un,1,gt.minY,gt.maxY,yt),Ct=Ke(dt,Ut,je+Xt,je+Qt,1,gt.minY,gt.maxY,yt),dt=null),Mt&&(Ne=Ke(Mt,Ut,je-zt,je+un,1,gt.minY,gt.maxY,yt),et=Ke(Mt,Ut,je+Xt,je+Qt,1,gt.minY,gt.maxY,yt),Mt=null),vt>1&&console.timeEnd("clipping"),it.push(Et||[],Ee+1,2*Se,2*je),it.push(Ct||[],Ee+1,2*Se,2*je+1),it.push(Ne||[],Ee+1,2*Se+1,2*je),it.push(et||[],Ee+1,2*Se+1,2*je+1)}}},ln.prototype.getTile=function(Me,Ee,Se){var je=this.options,qe=je.extent,Je=je.debug;if(Me<0||Me>24)return null;var at=1<<Me,it=dn(Me,Ee=(Ee%at+at)%at,Se);if(this.tiles[it])return Rt(this.tiles[it],qe);Je>1&&console.log("drilling down to z%d-%d-%d",Me,Ee,Se);for(var yt,vt=Me,Ut=Ee,Wt=Se;!yt&&vt>0;)vt--,Ut=Math.floor(Ut/2),Wt=Math.floor(Wt/2),yt=this.tiles[dn(vt,Ut,Wt)];return yt&&yt.source?(Je>1&&console.log("found parent tile z%d-%d-%d",vt,Ut,Wt),Je>1&&console.time("drilling down"),this.splitTile(yt.source,vt,Ut,Wt,Me,Ee,Se),Je>1&&console.timeEnd("drilling down"),this.tiles[it]?Rt(this.tiles[it],qe):null):null};var Tn=function(Me){function Ee(Se,je,qe,Je){Me.call(this,Se,je,qe,cn),Je&&(this.loadGeoJSON=Je)}return Me&&(Ee.__proto__=Me),(Ee.prototype=Object.create(Me&&Me.prototype)).constructor=Ee,Ee.prototype.loadData=function(Se,je){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=je,this._pendingLoadDataParams=Se,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ee.prototype._loadData=function(){var Se=this;if(this._pendingCallback&&this._pendingLoadDataParams){var je=this._pendingCallback,qe=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Je=!!(qe&&qe.request&&qe.request.collectResourceTiming)&&new e.RequestPerformance(qe.request);this.loadGeoJSON(qe,function(at,it){if(at||!it)return je(at);if("object"!=typeof it)return je(new Error("Input data given to '"+qe.source+"' is not a valid GeoJSON object."));h(it,!0);try{Se._geoJSONIndex=qe.cluster?new te(function(Ut){var Wt=Ut.superclusterOptions,gt=Ut.clusterProperties;if(!gt||!Wt)return Wt;for(var At={},Zt={},Et={accumulated:null,zoom:0},Ct={properties:null},Ne=Object.keys(gt),et=0,dt=Ne;et<dt.length;et+=1){var Mt=dt[et],zt=gt[Mt],Xt=zt[0],Qt=e.createExpression(zt[1]),kn=e.createExpression("string"==typeof Xt?[Xt,["accumulated"],["get",Mt]]:Xt);At[Mt]=Qt.value,Zt[Mt]=kn.value}return Wt.map=function(qn){Ct.properties=qn;for(var gn={},sn=0,vn=Ne;sn<vn.length;sn+=1){var pn=vn[sn];gn[pn]=At[pn].evaluate(Et,Ct)}return gn},Wt.reduce=function(qn,gn){Ct.properties=gn;for(var sn=0,vn=Ne;sn<vn.length;sn+=1){var pn=vn[sn];Et.accumulated=qn[pn],qn[pn]=Zt[pn].evaluate(Et,Ct)}},Wt}(qe)).load(it.features):new ln(Ut=it,qe.geojsonVtOptions)}catch(Ut){return je(Ut)}var Ut;Se.loaded={};var yt={};if(Je){var vt=Je.finish();vt&&(yt.resourceTiming={},yt.resourceTiming[qe.source]=JSON.parse(JSON.stringify(vt)))}je(null,yt)})}},Ee.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},Ee.prototype.reloadTile=function(Se,je){var qe=this.loaded;return qe&&qe[Se.uid]?Me.prototype.reloadTile.call(this,Se,je):this.loadTile(Se,je)},Ee.prototype.loadGeoJSON=function(Se,je){if(Se.request)e.getJSON(Se.request,je);else{if("string"!=typeof Se.data)return je(new Error("Input data given to '"+Se.source+"' is not a valid GeoJSON object."));try{return je(null,JSON.parse(Se.data))}catch(qe){return je(new Error("Input data given to '"+Se.source+"' is not a valid GeoJSON object."))}}},Ee.prototype.removeSource=function(Se,je){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),je()},Ee.prototype.getClusterExpansionZoom=function(Se,je){try{je(null,this._geoJSONIndex.getClusterExpansionZoom(Se.clusterId))}catch(qe){je(qe)}},Ee.prototype.getClusterChildren=function(Se,je){try{je(null,this._geoJSONIndex.getChildren(Se.clusterId))}catch(qe){je(qe)}},Ee.prototype.getClusterLeaves=function(Se,je){try{je(null,this._geoJSONIndex.getLeaves(Se.clusterId,Se.limit,Se.offset))}catch(qe){je(qe)}},Ee}(c),nn=function(Me){var Ee=this;this.self=Me,this.actor=new e.Actor(Me,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:c,geojson:Tn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Se,je){if(Ee.workerSourceTypes[Se])throw new Error('Worker source with name "'+Se+'" already registered.');Ee.workerSourceTypes[Se]=je},this.self.registerRTLTextPlugin=function(Se){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=Se.applyArabicShaping,e.plugin.processBidirectionalText=Se.processBidirectionalText,e.plugin.processStyledBidirectionalText=Se.processStyledBidirectionalText}};return nn.prototype.setReferrer=function(Me,Ee){this.referrer=Ee},nn.prototype.setImages=function(Me,Ee,Se){for(var je in this.availableImages[Me]=Ee,this.workerSources[Me]){var qe=this.workerSources[Me][je];for(var Je in qe)qe[Je].availableImages=Ee}Se()},nn.prototype.setLayers=function(Me,Ee,Se){this.getLayerIndex(Me).replace(Ee),Se()},nn.prototype.updateLayers=function(Me,Ee,Se){this.getLayerIndex(Me).update(Ee.layers,Ee.removedIds),Se()},nn.prototype.loadTile=function(Me,Ee,Se){this.getWorkerSource(Me,Ee.type,Ee.source).loadTile(Ee,Se)},nn.prototype.loadDEMTile=function(Me,Ee,Se){this.getDEMWorkerSource(Me,Ee.source).loadTile(Ee,Se)},nn.prototype.reloadTile=function(Me,Ee,Se){this.getWorkerSource(Me,Ee.type,Ee.source).reloadTile(Ee,Se)},nn.prototype.abortTile=function(Me,Ee,Se){this.getWorkerSource(Me,Ee.type,Ee.source).abortTile(Ee,Se)},nn.prototype.removeTile=function(Me,Ee,Se){this.getWorkerSource(Me,Ee.type,Ee.source).removeTile(Ee,Se)},nn.prototype.removeDEMTile=function(Me,Ee){this.getDEMWorkerSource(Me,Ee.source).removeTile(Ee)},nn.prototype.removeSource=function(Me,Ee,Se){if(this.workerSources[Me]&&this.workerSources[Me][Ee.type]&&this.workerSources[Me][Ee.type][Ee.source]){var je=this.workerSources[Me][Ee.type][Ee.source];delete this.workerSources[Me][Ee.type][Ee.source],void 0!==je.removeSource?je.removeSource(Ee,Se):Se()}},nn.prototype.loadWorkerSource=function(Me,Ee,Se){try{this.self.importScripts(Ee.url),Se()}catch(je){Se(je.toString())}},nn.prototype.syncRTLPluginState=function(Me,Ee,Se){try{e.plugin.setState(Ee);var je=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=je){this.self.importScripts(je);var qe=e.plugin.isParsed();Se(qe?void 0:new Error("RTL Text Plugin failed to import scripts from "+je),qe)}}catch(Je){Se(Je.toString())}},nn.prototype.getAvailableImages=function(Me){var Ee=this.availableImages[Me];return Ee||(Ee=[]),Ee},nn.prototype.getLayerIndex=function(Me){var Ee=this.layerIndexes[Me];return Ee||(Ee=this.layerIndexes[Me]=new a),Ee},nn.prototype.getWorkerSource=function(Me,Ee,Se){var je=this;return this.workerSources[Me]||(this.workerSources[Me]={}),this.workerSources[Me][Ee]||(this.workerSources[Me][Ee]={}),this.workerSources[Me][Ee][Se]||(this.workerSources[Me][Ee][Se]=new this.workerSourceTypes[Ee]({send:function(Je,at,it){je.actor.send(Je,at,it,Me)}},this.getLayerIndex(Me),this.getAvailableImages(Me))),this.workerSources[Me][Ee][Se]},nn.prototype.getDEMWorkerSource=function(Me,Ee){return this.demWorkerSources[Me]||(this.demWorkerSources[Me]={}),this.demWorkerSources[Me][Ee]||(this.demWorkerSources[Me][Ee]=new l),this.demWorkerSources[Me][Ee]},nn.prototype.enforceCacheSizeLimit=function(Me,Ee){e.enforceCacheSizeLimit(Ee)},"undefined"!=typeof WorkerGlobalScope&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new nn(e.window)),nn}),y(0,function(e){var r=e.createCommonjsModule(function(P){function N(fe){return!V(fe)}function V(fe){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var me,we,Ae=new Blob([""],{type:"text/javascript"}),Re=URL.createObjectURL(Ae);try{we=new Worker(Re),me=!0}catch(Xe){me=!1}return we&&we.terminate(),URL.revokeObjectURL(Re),me}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var me=document.createElement("canvas");me.width=me.height=1;var we=me.getContext("2d");if(!we)return!1;var Ae=we.getImageData(0,0,1,1);return Ae&&Ae.width===me.width}()?(void 0===Z[me=fe&&fe.failIfMajorPerformanceCaveat]&&(Z[me]=function(we){var Xe,nt,ht,Ae=(Xe=we,nt=document.createElement("canvas"),(ht=Object.create(N.webGLContextAttributes)).failIfMajorPerformanceCaveat=Xe,nt.probablySupportsContext?nt.probablySupportsContext("webgl",ht)||nt.probablySupportsContext("experimental-webgl",ht):nt.supportsContext?nt.supportsContext("webgl",ht)||nt.supportsContext("experimental-webgl",ht):nt.getContext("webgl",ht)||nt.getContext("experimental-webgl",ht));if(!Ae)return!1;var Re=Ae.createShader(Ae.VERTEX_SHADER);return!(!Re||Ae.isContextLost())&&(Ae.shaderSource(Re,"void main() {}"),Ae.compileShader(Re),!0===Ae.getShaderParameter(Re,Ae.COMPILE_STATUS))}(me)),Z[me]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var me}P.exports?P.exports=N:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=N,window.mapboxgl.notSupportedReason=V);var Z={};N.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),n={create:function(P,N,V){var Z=e.window.document.createElement(P);return void 0!==N&&(Z.className=N),V&&V.appendChild(Z),Z},createNS:function(P,N){return e.window.document.createElementNS(P,N)}},a=e.window.document.documentElement.style;function t(P){if(!a)return P[0];for(var N=0;N<P.length;N++)if(P[N]in a)return P[N];return P[0]}var p,u=t(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){a&&u&&(p=a[u],a[u]="none")},n.enableDrag=function(){a&&u&&(a[u]=p)};var i=t(["transform","WebkitTransform"]);n.setTransform=function(P,N){P.style[i]=N};var c=!1;try{var f=Object.defineProperty({},"passive",{get:function(){c=!0}});e.window.addEventListener("test",f,f),e.window.removeEventListener("test",f,f)}catch(P){c=!1}n.addEventListener=function(P,N,V,Z){void 0===Z&&(Z={}),P.addEventListener(N,V,"passive"in Z&&c?Z:Z.capture)},n.removeEventListener=function(P,N,V,Z){void 0===Z&&(Z={}),P.removeEventListener(N,V,"passive"in Z&&c?Z:Z.capture)};var l=function(P){P.preventDefault(),P.stopPropagation(),e.window.removeEventListener("click",l,!0)};function h(P){var N=P.userImage;return!!(N&&N.render&&N.render())&&(P.data.replace(new Uint8Array(N.data.buffer)),!0)}n.suppressClick=function(){e.window.addEventListener("click",l,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",l,!0)},0)},n.mousePos=function(P,N){var V=P.getBoundingClientRect();return new e.Point(N.clientX-V.left-P.clientLeft,N.clientY-V.top-P.clientTop)},n.touchPos=function(P,N){for(var V=P.getBoundingClientRect(),Z=[],fe=0;fe<N.length;fe++)Z.push(new e.Point(N[fe].clientX-V.left-P.clientLeft,N[fe].clientY-V.top-P.clientTop));return Z},n.mouseButton=function(P){return void 0!==e.window.InstallTrigger&&2===P.button&&P.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:P.button},n.remove=function(P){P.parentNode&&P.parentNode.removeChild(P)};var d=function(P){function N(){P.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.isLoaded=function(){return this.loaded},N.prototype.setLoaded=function(V){if(this.loaded!==V&&(this.loaded=V,V)){for(var Z=0,fe=this.requestors;Z<fe.length;Z+=1){var me=fe[Z];this._notify(me.ids,me.callback)}this.requestors=[]}},N.prototype.getImage=function(V){return this.images[V]},N.prototype.addImage=function(V,Z){this._validate(V,Z)&&(this.images[V]=Z)},N.prototype._validate=function(V,Z){var fe=!0;return this._validateStretch(Z.stretchX,Z.data&&Z.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+V+'" has invalid "stretchX" value'))),fe=!1),this._validateStretch(Z.stretchY,Z.data&&Z.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+V+'" has invalid "stretchY" value'))),fe=!1),this._validateContent(Z.content,Z)||(this.fire(new e.ErrorEvent(new Error('Image "'+V+'" has invalid "content" value'))),fe=!1),fe},N.prototype._validateStretch=function(V,Z){if(!V)return!0;for(var fe=0,me=0,we=V;me<we.length;me+=1){var Ae=we[me];if(Ae[0]<fe||Ae[1]<Ae[0]||Z<Ae[1])return!1;fe=Ae[1]}return!0},N.prototype._validateContent=function(V,Z){return!(V&&(4!==V.length||V[0]<0||Z.data.width<V[0]||V[1]<0||Z.data.height<V[1]||V[2]<0||Z.data.width<V[2]||V[3]<0||Z.data.height<V[3]||V[2]<V[0]||V[3]<V[1]))},N.prototype.updateImage=function(V,Z){Z.version=this.images[V].version+1,this.images[V]=Z,this.updatedImages[V]=!0},N.prototype.removeImage=function(V){var Z=this.images[V];delete this.images[V],delete this.patterns[V],Z.userImage&&Z.userImage.onRemove&&Z.userImage.onRemove()},N.prototype.listImages=function(){return Object.keys(this.images)},N.prototype.getImages=function(V,Z){var fe=!0;if(!this.isLoaded())for(var me=0,we=V;me<we.length;me+=1)this.images[we[me]]||(fe=!1);this.isLoaded()||fe?this._notify(V,Z):this.requestors.push({ids:V,callback:Z})},N.prototype._notify=function(V,Z){for(var fe={},me=0,we=V;me<we.length;me+=1){var Ae=we[me];this.images[Ae]||this.fire(new e.Event("styleimagemissing",{id:Ae}));var Re=this.images[Ae];Re?fe[Ae]={data:Re.data.clone(),pixelRatio:Re.pixelRatio,sdf:Re.sdf,version:Re.version,stretchX:Re.stretchX,stretchY:Re.stretchY,content:Re.content,hasRenderCallback:Boolean(Re.userImage&&Re.userImage.render)}:e.warnOnce('Image "'+Ae+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}Z(null,fe)},N.prototype.getPixelSize=function(){var V=this.atlasImage;return{width:V.width,height:V.height}},N.prototype.getPattern=function(V){var Z=this.patterns[V],fe=this.getImage(V);if(!fe)return null;if(Z&&Z.position.version===fe.version)return Z.position;if(Z)Z.position.version=fe.version;else{var me={w:fe.data.width+2,h:fe.data.height+2,x:0,y:0},we=new e.ImagePosition(me,fe);this.patterns[V]={bin:me,position:we}}return this._updatePatternAtlas(),this.patterns[V].position},N.prototype.bind=function(V){var Z=V.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(V,this.atlasImage,Z.RGBA),this.atlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)},N.prototype._updatePatternAtlas=function(){var V=[];for(var Z in this.patterns)V.push(this.patterns[Z].bin);var fe=e.potpack(V),me=fe.w,we=fe.h,Ae=this.atlasImage;for(var Re in Ae.resize({width:me||1,height:we||1}),this.patterns){var Xe=this.patterns[Re].bin,nt=Xe.x+1,ht=Xe.y+1,Dt=this.images[Re].data,Ot=Dt.width,It=Dt.height;e.RGBAImage.copy(Dt,Ae,{x:0,y:0},{x:nt,y:ht},{width:Ot,height:It}),e.RGBAImage.copy(Dt,Ae,{x:0,y:It-1},{x:nt,y:ht-1},{width:Ot,height:1}),e.RGBAImage.copy(Dt,Ae,{x:0,y:0},{x:nt,y:ht+It},{width:Ot,height:1}),e.RGBAImage.copy(Dt,Ae,{x:Ot-1,y:0},{x:nt-1,y:ht},{width:1,height:It}),e.RGBAImage.copy(Dt,Ae,{x:0,y:0},{x:nt+Ot,y:ht},{width:1,height:It})}this.dirty=!0},N.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},N.prototype.dispatchRenderCallbacks=function(V){for(var Z=0,fe=V;Z<fe.length;Z+=1){var me=fe[Z];if(!this.callbackDispatchedThisFrame[me]){this.callbackDispatchedThisFrame[me]=!0;var we=this.images[me];h(we)&&this.updateImage(me,we)}}},N}(e.Evented),o=k,_=k,s=1e20;function k(P,N,V,Z,fe,me){this.fontSize=P||24,this.buffer=void 0===N?3:N,this.cutoff=Z||.25,this.fontFamily=fe||"sans-serif",this.fontWeight=me||"normal",this.radius=V||8;var we=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=we,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(we*we),this.gridInner=new Float64Array(we*we),this.f=new Float64Array(we),this.d=new Float64Array(we),this.z=new Float64Array(we+1),this.v=new Int16Array(we),this.middle=Math.round(we/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function M(P,N,V,Z,fe,me,we){for(var Ae=0;Ae<N;Ae++){for(var Re=0;Re<V;Re++)Z[Re]=P[Re*N+Ae];for(A(Z,fe,me,we,V),Re=0;Re<V;Re++)P[Re*N+Ae]=fe[Re]}for(Re=0;Re<V;Re++){for(Ae=0;Ae<N;Ae++)Z[Ae]=P[Re*N+Ae];for(A(Z,fe,me,we,N),Ae=0;Ae<N;Ae++)P[Re*N+Ae]=Math.sqrt(fe[Ae])}}function A(P,N,V,Z,fe){V[0]=0,Z[0]=-s,Z[1]=+s;for(var me=1,we=0;me<fe;me++){for(var Ae=(P[me]+me*me-(P[V[we]]+V[we]*V[we]))/(2*me-2*V[we]);Ae<=Z[we];)we--,Ae=(P[me]+me*me-(P[V[we]]+V[we]*V[we]))/(2*me-2*V[we]);V[++we]=me,Z[we]=Ae,Z[we+1]=+s}for(me=0,we=0;me<fe;me++){for(;Z[we+1]<me;)we++;N[me]=(me-V[we])*(me-V[we])+P[V[we]]}}k.prototype.draw=function(P){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(P,this.buffer,this.middle);for(var N=this.ctx.getImageData(0,0,this.size,this.size),V=new Uint8ClampedArray(this.size*this.size),Z=0;Z<this.size*this.size;Z++){var fe=N.data[4*Z+3]/255;this.gridOuter[Z]=1===fe?0:0===fe?s:Math.pow(Math.max(0,.5-fe),2),this.gridInner[Z]=1===fe?s:0===fe?0:Math.pow(Math.max(0,fe-.5),2)}for(M(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),M(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),Z=0;Z<this.size*this.size;Z++)V[Z]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[Z]-this.gridInner[Z])/this.radius+this.cutoff))));return V},o.default=_;var E=function(P,N){this.requestManager=P,this.localIdeographFontFamily=N,this.entries={}};E.prototype.setURL=function(P){this.url=P},E.prototype.getGlyphs=function(P,N){var V=this,Z=[];for(var fe in P)for(var me=0,we=P[fe];me<we.length;me+=1)Z.push({stack:fe,id:we[me]});e.asyncAll(Z,function(Re,Xe){var nt=Re.stack,ht=Re.id,Dt=V.entries[nt];Dt||(Dt=V.entries[nt]={glyphs:{},requests:{},ranges:{}});var Ot=Dt.glyphs[ht];if(void 0===Ot){if(Ot=V._tinySDF(Dt,nt,ht))return Dt.glyphs[ht]=Ot,void Xe(null,{stack:nt,id:ht,glyph:Ot});var It=Math.floor(ht/256);if(256*It>65535)Xe(new Error("glyphs > 65535 not supported"));else if(Dt.ranges[It])Xe(null,{stack:nt,id:ht,glyph:Ot});else{var Lt=Dt.requests[It];Lt||(Lt=Dt.requests[It]=[],E.loadGlyphRange(nt,It,V.url,V.requestManager,function(St,Gt){if(Gt){for(var Vt in Gt)V._doesCharSupportLocalGlyph(+Vt)||(Dt.glyphs[+Vt]=Gt[+Vt]);Dt.ranges[It]=!0}for(var Yt=0,xn=Lt;Yt<xn.length;Yt+=1)(0,xn[Yt])(St,Gt);delete Dt.requests[It]})),Lt.push(function(St,Gt){St?Xe(St):Gt&&Xe(null,{stack:nt,id:ht,glyph:Gt[ht]||null})})}}else Xe(null,{stack:nt,id:ht,glyph:Ot})},function(Re,Xe){if(Re)N(Re);else if(Xe){for(var nt={},ht=0,Dt=Xe;ht<Dt.length;ht+=1){var Ot=Dt[ht],It=Ot.stack,Lt=Ot.id,St=Ot.glyph;(nt[It]||(nt[It]={}))[Lt]=St&&{id:St.id,bitmap:St.bitmap.clone(),metrics:St.metrics}}N(null,nt)}})},E.prototype._doesCharSupportLocalGlyph=function(P){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](P)||e.isChar["Hangul Syllables"](P)||e.isChar.Hiragana(P)||e.isChar.Katakana(P))},E.prototype._tinySDF=function(P,N,V){var Z=this.localIdeographFontFamily;if(Z&&this._doesCharSupportLocalGlyph(V)){var fe=P.tinySDF;if(!fe){var me="400";/bold/i.test(N)?me="900":/medium/i.test(N)?me="500":/light/i.test(N)&&(me="200"),fe=P.tinySDF=new E.TinySDF(24,3,8,.25,Z,me)}return{id:V,bitmap:new e.AlphaImage({width:30,height:30},fe.draw(String.fromCharCode(V))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},E.loadGlyphRange=function(P,N,V,Z,fe){var me=256*N,we=me+255,Ae=Z.transformRequest(Z.normalizeGlyphsURL(V).replace("{fontstack}",P).replace("{range}",me+"-"+we),e.ResourceType.Glyphs);e.getArrayBuffer(Ae,function(Re,Xe){if(Re)fe(Re);else if(Xe){for(var nt={},ht=0,Dt=e.parseGlyphPBF(Xe);ht<Dt.length;ht+=1){var Ot=Dt[ht];nt[Ot.id]=Ot}fe(null,nt)}})},E.TinySDF=o;var I=function(){this.specification=e.styleSpec.light.position};I.prototype.possiblyEvaluate=function(P,N){return e.sphericalToCartesian(P.expression.evaluate(N))},I.prototype.interpolate=function(P,N,V){return{x:e.number(P.x,N.x,V),y:e.number(P.y,N.y,V),z:e.number(P.z,N.z,V)}};var C=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new I,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),R=function(P){function N(V){P.call(this),this._transitionable=new e.Transitionable(C),this.setLight(V),this._transitioning=this._transitionable.untransitioned()}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getLight=function(){return this._transitionable.serialize()},N.prototype.setLight=function(V,Z){if(void 0===Z&&(Z={}),!this._validate(e.validateLight,V,Z))for(var fe in V){var me=V[fe];e.endsWith(fe,"-transition")?this._transitionable.setTransition(fe.slice(0,-"-transition".length),me):this._transitionable.setValue(fe,me)}},N.prototype.updateTransitions=function(V){this._transitioning=this._transitionable.transitioned(V,this._transitioning)},N.prototype.hasTransition=function(){return this._transitioning.hasTransition()},N.prototype.recalculate=function(V){this.properties=this._transitioning.possiblyEvaluate(V)},N.prototype._validate=function(V,Z,fe){return(!fe||!1!==fe.validate)&&e.emitValidationErrors(this,V.call(e.validateStyle,e.extend({value:Z,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},N}(e.Evented),O=function(P,N){this.width=P,this.height=N,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};O.prototype.getDash=function(P,N){var V=P.join(",")+String(N);return this.dashEntry[V]||(this.dashEntry[V]=this.addDash(P,N)),this.dashEntry[V]},O.prototype.getDashRanges=function(P,N,V){var Z=[],fe=P.length%2==1?-P[P.length-1]*V:0,me=P[0]*V,we=!0;Z.push({left:fe,right:me,isDash:we,zeroLength:0===P[0]});for(var Ae=P[0],Re=1;Re<P.length;Re++){var Xe=P[Re];fe=Ae*V,me=(Ae+=Xe)*V,Z.push({left:fe,right:me,isDash:we=!we,zeroLength:0===Xe})}return Z},O.prototype.addRoundDash=function(P,N,V){for(var Z=N/2,fe=-V;fe<=V;fe++)for(var we=this.width*(this.nextRow+V+fe),Ae=0,Re=P[Ae],Xe=0;Xe<this.width;Xe++){Xe/Re.right>1&&(Re=P[++Ae]);var nt=Math.abs(Xe-Re.left),ht=Math.abs(Xe-Re.right),Dt=Math.min(nt,ht),Ot=void 0,It=fe/V*(Z+1);if(Re.isDash){var Lt=Z-Math.abs(It);Ot=Math.sqrt(Dt*Dt+Lt*Lt)}else Ot=Z-Math.sqrt(Dt*Dt+It*It);this.data[we+Xe]=Math.max(0,Math.min(255,Ot+128))}},O.prototype.addRegularDash=function(P){for(var N=P.length-1;N>=0;--N){var V=P[N],Z=P[N+1];V.zeroLength?P.splice(N,1):Z&&Z.isDash===V.isDash&&(Z.left=V.left,P.splice(N,1))}var fe=P[0],me=P[P.length-1];fe.isDash===me.isDash&&(fe.left=me.left-this.width,me.right=fe.right+this.width);for(var we=this.width*this.nextRow,Ae=0,Re=P[Ae],Xe=0;Xe<this.width;Xe++){Xe/Re.right>1&&(Re=P[++Ae]);var nt=Math.abs(Xe-Re.left),ht=Math.abs(Xe-Re.right),Dt=Math.min(nt,ht);this.data[we+Xe]=Math.max(0,Math.min(255,(Re.isDash?Dt:-Dt)+128))}},O.prototype.addDash=function(P,N){var V=N?7:0,Z=2*V+1;if(this.nextRow+Z>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var fe=0,me=0;me<P.length;me++)fe+=P[me];if(0!==fe){var we=this.width/fe,Ae=this.getDashRanges(P,this.width,we);N?this.addRoundDash(Ae,we,V):this.addRegularDash(Ae)}var Re={y:(this.nextRow+V+.5)/this.height,height:2*V/this.height,width:fe};return this.nextRow+=Z,this.dirty=!0,Re},O.prototype.bind=function(P){var N=P.gl;this.texture?(N.bindTexture(N.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,N.texSubImage2D(N.TEXTURE_2D,0,0,0,this.width,this.height,N.ALPHA,N.UNSIGNED_BYTE,this.data))):(this.texture=N.createTexture(),N.bindTexture(N.TEXTURE_2D,this.texture),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,N.REPEAT),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,N.REPEAT),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.LINEAR),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.LINEAR),N.texImage2D(N.TEXTURE_2D,0,N.ALPHA,this.width,this.height,0,N.ALPHA,N.UNSIGNED_BYTE,this.data))};var D=function P(N,V){this.workerPool=N,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var Z=this.workerPool.acquire(this.id),fe=0;fe<Z.length;fe++){var we=new P.Actor(Z[fe],V,this.id);we.name="Worker "+fe,this.actors.push(we)}};function L(P,N,V){var Z=function(fe,me){if(fe)return V(fe);if(me){var we=e.pick(e.extend(me,P),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);me.vector_layers&&(we.vectorLayers=me.vector_layers,we.vectorLayerIds=we.vectorLayers.map(function(Ae){return Ae.id})),we.tiles=N.canonicalizeTileset(we,P.url),V(null,we)}};return P.url?e.getJSON(N.transformRequest(N.normalizeSourceURL(P.url),e.ResourceType.Source),Z):e.browser.frame(function(){return Z(null,P)})}D.prototype.broadcast=function(P,N,V){e.asyncAll(this.actors,function(Z,fe){Z.send(P,N,fe)},V=V||function(){})},D.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},D.prototype.remove=function(){this.actors.forEach(function(P){P.remove()}),this.actors=[],this.workerPool.release(this.id)},D.Actor=e.Actor;var B=function(P,N,V){this.bounds=e.LngLatBounds.convert(this.validateBounds(P)),this.minzoom=N||0,this.maxzoom=V||24};B.prototype.validateBounds=function(P){return Array.isArray(P)&&4===P.length?[Math.max(-180,P[0]),Math.max(-90,P[1]),Math.min(180,P[2]),Math.min(90,P[3])]:[-180,-90,180,90]},B.prototype.contains=function(P){var N=Math.pow(2,P.z),V=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*N),Z=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*N),fe=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*N),me=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*N);return P.x>=V&&P.x<fe&&P.y>=Z&&P.y<me};var j=function(P){function N(V,Z,fe,me){if(P.call(this),this.id=V,this.dispatcher=fe,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(Z,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},Z),this._collectResourceTiming=Z.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(me)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.load=function(){var V=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._requestManager,function(Z,fe){V._tileJSONRequest=null,V._loaded=!0,Z?V.fire(new e.ErrorEvent(Z)):fe&&(e.extend(V,fe),fe.bounds&&(V.tileBounds=new B(fe.bounds,V.minzoom,V.maxzoom)),e.postTurnstileEvent(fe.tiles,V.map._requestManager._customAccessToken),e.postMapLoadEvent(fe.tiles,V.map._getMapId(),V.map._requestManager._skuToken,V.map._requestManager._customAccessToken),V.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),V.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},N.prototype.loaded=function(){return this._loaded},N.prototype.hasTile=function(V){return!this.tileBounds||this.tileBounds.contains(V.canonical)},N.prototype.onAdd=function(V){this.map=V,this.load()},N.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},N.prototype.serialize=function(){return e.extend({},this._options)},N.prototype.loadTile=function(V,Z){var fe=this.map._requestManager.normalizeTileURL(V.tileID.canonical.url(this.tiles,this.scheme)),me={request:this.map._requestManager.transformRequest(fe,e.ResourceType.Tile),uid:V.uid,tileID:V.tileID,zoom:V.tileID.overscaledZ,tileSize:this.tileSize*V.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function we(Ae,Re){return delete V.request,V.aborted?Z(null):Ae&&404!==Ae.status?Z(Ae):(Re&&Re.resourceTiming&&(V.resourceTiming=Re.resourceTiming),this.map._refreshExpiredTiles&&Re&&V.setExpiryData(Re),V.loadVectorData(Re,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),Z(null),void(V.reloadCallback&&(this.loadTile(V,V.reloadCallback),V.reloadCallback=null)))}me.request.collectResourceTiming=this._collectResourceTiming,V.actor&&"expired"!==V.state?"loading"===V.state?V.reloadCallback=Z:V.request=V.actor.send("reloadTile",me,we.bind(this)):(V.actor=this.dispatcher.getActor(),V.request=V.actor.send("loadTile",me,we.bind(this)))},N.prototype.abortTile=function(V){V.request&&(V.request.cancel(),delete V.request),V.actor&&V.actor.send("abortTile",{uid:V.uid,type:this.type,source:this.id},void 0)},N.prototype.unloadTile=function(V){V.unloadVectorData(),V.actor&&V.actor.send("removeTile",{uid:V.uid,type:this.type,source:this.id},void 0)},N.prototype.hasTransition=function(){return!1},N}(e.Evented),W=function(P){function N(V,Z,fe,me){P.call(this),this.id=V,this.dispatcher=fe,this.setEventedParent(me),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},Z),e.extend(this,e.pick(Z,["url","scheme","tileSize"]))}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.load=function(){var V=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._requestManager,function(Z,fe){V._tileJSONRequest=null,V._loaded=!0,Z?V.fire(new e.ErrorEvent(Z)):fe&&(e.extend(V,fe),fe.bounds&&(V.tileBounds=new B(fe.bounds,V.minzoom,V.maxzoom)),e.postTurnstileEvent(fe.tiles),e.postMapLoadEvent(fe.tiles,V.map._getMapId(),V.map._requestManager._skuToken),V.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),V.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},N.prototype.loaded=function(){return this._loaded},N.prototype.onAdd=function(V){this.map=V,this.load()},N.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},N.prototype.serialize=function(){return e.extend({},this._options)},N.prototype.hasTile=function(V){return!this.tileBounds||this.tileBounds.contains(V.canonical)},N.prototype.loadTile=function(V,Z){var fe=this,me=this.map._requestManager.normalizeTileURL(V.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);V.request=e.getImage(this.map._requestManager.transformRequest(me,e.ResourceType.Tile),function(we,Ae){if(delete V.request,V.aborted)V.state="unloaded",Z(null);else if(we)V.state="errored",Z(we);else if(Ae){fe.map._refreshExpiredTiles&&V.setExpiryData(Ae),delete Ae.cacheControl,delete Ae.expires;var Re=fe.map.painter.context,Xe=Re.gl;V.texture=fe.map.painter.getTileTexture(Ae.width),V.texture?V.texture.update(Ae,{useMipmap:!0}):(V.texture=new e.Texture(Re,Ae,Xe.RGBA,{useMipmap:!0}),V.texture.bind(Xe.LINEAR,Xe.CLAMP_TO_EDGE,Xe.LINEAR_MIPMAP_NEAREST),Re.extTextureFilterAnisotropic&&Xe.texParameterf(Xe.TEXTURE_2D,Re.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Re.extTextureFilterAnisotropicMax)),V.state="loaded",e.cacheEntryPossiblyAdded(fe.dispatcher),Z(null)}})},N.prototype.abortTile=function(V,Z){V.request&&(V.request.cancel(),delete V.request),Z()},N.prototype.unloadTile=function(V,Z){V.texture&&this.map.painter.saveTileTexture(V.texture),Z()},N.prototype.hasTransition=function(){return!1},N}(e.Evented),Y=function(P){function N(V,Z,fe,me){P.call(this,V,Z,fe,me),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},Z),this.encoding=Z.encoding||"mapbox"}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},N.prototype.loadTile=function(V,Z){var fe=this.map._requestManager.normalizeTileURL(V.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function me(we,Ae){we&&(V.state="errored",Z(we)),Ae&&(V.dem=Ae,V.needsHillshadePrepare=!0,V.state="loaded",Z(null))}V.request=e.getImage(this.map._requestManager.transformRequest(fe,e.ResourceType.Tile),function(we,Ae){if(delete V.request,V.aborted)V.state="unloaded",Z(null);else if(we)V.state="errored",Z(we);else if(Ae){this.map._refreshExpiredTiles&&V.setExpiryData(Ae),delete Ae.cacheControl,delete Ae.expires;var Re=e.window.ImageBitmap&&Ae instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?Ae:e.browser.getImageData(Ae,1),Xe={uid:V.uid,coord:V.tileID,source:this.id,rawImageData:Re,encoding:this.encoding};V.actor&&"expired"!==V.state||(V.actor=this.dispatcher.getActor(),V.actor.send("loadDEMTile",Xe,me.bind(this)))}}.bind(this)),V.neighboringTiles=this._getNeighboringTiles(V.tileID)},N.prototype._getNeighboringTiles=function(V){var Z=V.canonical,fe=Math.pow(2,Z.z),me=(Z.x-1+fe)%fe,we=0===Z.x?V.wrap-1:V.wrap,Ae=(Z.x+1+fe)%fe,Re=Z.x+1===fe?V.wrap+1:V.wrap,Xe={};return Xe[new e.OverscaledTileID(V.overscaledZ,we,Z.z,me,Z.y).key]={backfilled:!1},Xe[new e.OverscaledTileID(V.overscaledZ,Re,Z.z,Ae,Z.y).key]={backfilled:!1},Z.y>0&&(Xe[new e.OverscaledTileID(V.overscaledZ,we,Z.z,me,Z.y-1).key]={backfilled:!1},Xe[new e.OverscaledTileID(V.overscaledZ,V.wrap,Z.z,Z.x,Z.y-1).key]={backfilled:!1},Xe[new e.OverscaledTileID(V.overscaledZ,Re,Z.z,Ae,Z.y-1).key]={backfilled:!1}),Z.y+1<fe&&(Xe[new e.OverscaledTileID(V.overscaledZ,we,Z.z,me,Z.y+1).key]={backfilled:!1},Xe[new e.OverscaledTileID(V.overscaledZ,V.wrap,Z.z,Z.x,Z.y+1).key]={backfilled:!1},Xe[new e.OverscaledTileID(V.overscaledZ,Re,Z.z,Ae,Z.y+1).key]={backfilled:!1}),Xe},N.prototype.unloadTile=function(V){V.demTexture&&this.map.painter.saveTileTexture(V.demTexture),V.fbo&&(V.fbo.destroy(),delete V.fbo),V.dem&&delete V.dem,delete V.neighboringTiles,V.state="unloaded",V.actor&&V.actor.send("removeDEMTile",{uid:V.uid,source:this.id})},N}(W),Q=function(P){function N(V,Z,fe,me){P.call(this),this.id=V,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=fe.getActor(),this.setEventedParent(me),this._data=Z.data,this._options=e.extend({},Z),this._collectResourceTiming=Z.collectResourceTiming,this._resourceTiming=[],void 0!==Z.maxzoom&&(this.maxzoom=Z.maxzoom),Z.type&&(this.type=Z.type),Z.attribution&&(this.attribution=Z.attribution),this.promoteId=Z.promoteId;var we=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:Z.cluster||!1,geojsonVtOptions:{buffer:(void 0!==Z.buffer?Z.buffer:128)*we,tolerance:(void 0!==Z.tolerance?Z.tolerance:.375)*we,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:Z.lineMetrics||!1,generateId:Z.generateId||!1},superclusterOptions:{maxZoom:void 0!==Z.clusterMaxZoom?Math.min(Z.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(Z.clusterRadius||50)*we,log:!1,generateId:Z.generateId||!1},clusterProperties:Z.clusterProperties},Z.workerOptions)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.load=function(){var V=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Z){if(Z)V.fire(new e.ErrorEvent(Z));else{var fe={dataType:"source",sourceDataType:"metadata"};V._collectResourceTiming&&V._resourceTiming&&V._resourceTiming.length>0&&(fe.resourceTiming=V._resourceTiming,V._resourceTiming=[]),V.fire(new e.Event("data",fe))}})},N.prototype.onAdd=function(V){this.map=V,this.load()},N.prototype.setData=function(V){var Z=this;return this._data=V,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(fe){if(fe)Z.fire(new e.ErrorEvent(fe));else{var me={dataType:"source",sourceDataType:"content"};Z._collectResourceTiming&&Z._resourceTiming&&Z._resourceTiming.length>0&&(me.resourceTiming=Z._resourceTiming,Z._resourceTiming=[]),Z.fire(new e.Event("data",me))}}),this},N.prototype.getClusterExpansionZoom=function(V,Z){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:V,source:this.id},Z),this},N.prototype.getClusterChildren=function(V,Z){return this.actor.send("geojson.getClusterChildren",{clusterId:V,source:this.id},Z),this},N.prototype.getClusterLeaves=function(V,Z,fe,me){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:V,limit:Z,offset:fe},me),this},N.prototype._updateWorkerData=function(V){var Z=this;this._loaded=!1;var fe=e.extend({},this.workerOptions),me=this._data;"string"==typeof me?(fe.request=this.map._requestManager.transformRequest(e.browser.resolveURL(me),e.ResourceType.Source),fe.request.collectResourceTiming=this._collectResourceTiming):fe.data=JSON.stringify(me),this.actor.send(this.type+".loadData",fe,function(we,Ae){Z._removed||Ae&&Ae.abandoned||(Z._loaded=!0,Ae&&Ae.resourceTiming&&Ae.resourceTiming[Z.id]&&(Z._resourceTiming=Ae.resourceTiming[Z.id].slice(0)),Z.actor.send(Z.type+".coalesce",{source:fe.source},null),V(we))})},N.prototype.loaded=function(){return this._loaded},N.prototype.loadTile=function(V,Z){var fe=this,me=V.actor?"reloadTile":"loadTile";V.actor=this.actor,V.request=this.actor.send(me,{type:this.type,uid:V.uid,tileID:V.tileID,zoom:V.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Ae,Re){return delete V.request,V.unloadVectorData(),V.aborted?Z(null):Ae?Z(Ae):(V.loadVectorData(Re,fe.map.painter,"reloadTile"===me),Z(null))})},N.prototype.abortTile=function(V){V.request&&(V.request.cancel(),delete V.request),V.aborted=!0},N.prototype.unloadTile=function(V){V.unloadVectorData(),this.actor.send("removeTile",{uid:V.uid,type:this.type,source:this.id})},N.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},N.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},N.prototype.hasTransition=function(){return!1},N}(e.Evented),ne=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),X=function(P){function N(V,Z,fe,me){P.call(this),this.id=V,this.dispatcher=fe,this.coordinates=Z.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(me),this.options=Z}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.load=function(V,Z){var fe=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(me,we){fe._loaded=!0,me?fe.fire(new e.ErrorEvent(me)):we&&(fe.image=we,V&&(fe.coordinates=V),Z&&Z(),fe._finishLoading())})},N.prototype.loaded=function(){return this._loaded},N.prototype.updateImage=function(V){var Z=this;return this.image&&V.url?(this.options.url=V.url,this.load(V.coordinates,function(){Z.texture=null}),this):this},N.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},N.prototype.onAdd=function(V){this.map=V,this.load()},N.prototype.setCoordinates=function(V){var Z=this;this.coordinates=V;var fe=V.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(we){for(var Ae=1/0,Re=1/0,Xe=-1/0,nt=-1/0,ht=0,Dt=we;ht<Dt.length;ht+=1){var Ot=Dt[ht];Ae=Math.min(Ae,Ot.x),Re=Math.min(Re,Ot.y),Xe=Math.max(Xe,Ot.x),nt=Math.max(nt,Ot.y)}var St=Math.max(Xe-Ae,nt-Re),Gt=Math.max(0,Math.floor(-Math.log(St)/Math.LN2)),Vt=Math.pow(2,Gt);return new e.CanonicalTileID(Gt,Math.floor((Ae+Xe)/2*Vt),Math.floor((Re+nt)/2*Vt))}(fe),this.minzoom=this.maxzoom=this.tileID.z;var me=fe.map(function(we){return Z.tileID.getTilePoint(we)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(me[0].x,me[0].y,0,0),this._boundsArray.emplaceBack(me[1].x,me[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(me[3].x,me[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(me[2].x,me[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},N.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var V=this.map.painter.context,Z=V.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=V.createVertexBuffer(this._boundsArray,ne.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(V,this.image,Z.RGBA),this.texture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)),this.tiles){var me=this.tiles[fe];"loaded"!==me.state&&(me.state="loaded",me.texture=this.texture)}}},N.prototype.loadTile=function(V,Z){this.tileID&&this.tileID.equals(V.tileID.canonical)?(this.tiles[String(V.tileID.wrap)]=V,V.buckets={},Z(null)):(V.state="errored",Z(null))},N.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},N.prototype.hasTransition=function(){return!1},N}(e.Evented),$=function(P){function N(V,Z,fe,me){P.call(this,V,Z,fe,me),this.roundZoom=!0,this.type="video",this.options=Z}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.load=function(){var V=this;this._loaded=!1;var Z=this.options;this.urls=[];for(var fe=0,me=Z.urls;fe<me.length;fe+=1)this.urls.push(this.map._requestManager.transformRequest(me[fe],e.ResourceType.Source).url);e.getVideo(this.urls,function(Ae,Re){V._loaded=!0,Ae?V.fire(new e.ErrorEvent(Ae)):Re&&(V.video=Re,V.video.loop=!0,V.video.addEventListener("playing",function(){V.map.triggerRepaint()}),V.map&&V.video.play(),V._finishLoading())})},N.prototype.pause=function(){this.video&&this.video.pause()},N.prototype.play=function(){this.video&&this.video.play()},N.prototype.seek=function(V){if(this.video){var Z=this.video.seekable;V<Z.start(0)||V>Z.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+Z.start(0)+" and "+Z.end(0)+"-second mark."))):this.video.currentTime=V}},N.prototype.getVideo=function(){return this.video},N.prototype.onAdd=function(V){this.map||(this.map=V,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},N.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var V=this.map.painter.context,Z=V.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=V.createVertexBuffer(this._boundsArray,ne.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Z.texSubImage2D(Z.TEXTURE_2D,0,0,0,Z.RGBA,Z.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(V,this.video,Z.RGBA),this.texture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)),this.tiles){var me=this.tiles[fe];"loaded"!==me.state&&(me.state="loaded",me.texture=this.texture)}}},N.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},N.prototype.hasTransition=function(){return this.video&&!this.video.paused},N}(X),re=function(P){function N(V,Z,fe,me){P.call(this,V,Z,fe,me),Z.coordinates?Array.isArray(Z.coordinates)&&4===Z.coordinates.length&&!Z.coordinates.some(function(we){return!Array.isArray(we)||2!==we.length||we.some(function(Ae){return"number"!=typeof Ae})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+V,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+V,null,'missing required property "coordinates"'))),Z.animate&&"boolean"!=typeof Z.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+V,null,'optional "animate" property must be a boolean value'))),Z.canvas?"string"==typeof Z.canvas||Z.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+V,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+V,null,'missing required property "canvas"'))),this.options=Z,this.animate=void 0===Z.animate||Z.animate}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},N.prototype.getCanvas=function(){return this.canvas},N.prototype.onAdd=function(V){this.map=V,this.load(),this.canvas&&this.animate&&this.play()},N.prototype.onRemove=function(){this.pause()},N.prototype.prepare=function(){var V=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,V=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,V=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var Z=this.map.painter.context,fe=Z.gl;for(var me in this.boundsBuffer||(this.boundsBuffer=Z.createVertexBuffer(this._boundsArray,ne.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(V||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(Z,this.canvas,fe.RGBA,{premultiply:!0}),this.tiles){var we=this.tiles[me];"loaded"!==we.state&&(we.state="loaded",we.texture=this.texture)}}},N.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},N.prototype.hasTransition=function(){return this._playing},N.prototype._hasInvalidDimensions=function(){for(var V=0,Z=[this.canvas.width,this.canvas.height];V<Z.length;V+=1){var fe=Z[V];if(isNaN(fe)||fe<=0)return!0}return!1},N}(X),H={vector:j,raster:W,"raster-dem":Y,geojson:Q,video:$,image:X,canvas:re};function U(P,N){var V=e.identity([]);return e.translate(V,V,[1,1,0]),e.scale(V,V,[.5*P.width,.5*P.height,1]),e.multiply(V,V,P.calculatePosMatrix(N.toUnwrapped()))}function G(P,N,V,Z,fe,me){var we=function(Lt,St,Gt){if(Lt)for(var Vt=0,Yt=Lt;Vt<Yt.length;Vt+=1){var xn=St[Yt[Vt]];if(xn&&xn.source===Gt&&"fill-extrusion"===xn.type)return!0}else for(var En in St){var jn=St[En];if(jn.source===Gt&&"fill-extrusion"===jn.type)return!0}return!1}(fe&&fe.layers,N,P.id),Ae=me.maxPitchScaleFactor(),Re=P.tilesIn(Z,Ae,we);Re.sort(ie);for(var Xe=[],nt=0,ht=Re;nt<ht.length;nt+=1){var Dt=ht[nt];Xe.push({wrappedTileID:Dt.tileID.wrapped().key,queryResults:Dt.tile.queryRenderedFeatures(N,V,P._state,Dt.queryGeometry,Dt.cameraQueryGeometry,Dt.scale,fe,me,Ae,U(P.transform,Dt.tileID))})}var Ot=function(Lt){for(var St={},Gt={},Vt=0,Yt=Lt;Vt<Yt.length;Vt+=1){var xn=Yt[Vt],En=xn.queryResults,jn=xn.wrappedTileID,Nn=Gt[jn]=Gt[jn]||{};for(var hr in En)for(var dr=En[hr],Er=Nn[hr]=Nn[hr]||{},wr=St[hr]=St[hr]||[],Jr=0,pi=dr;Jr<pi.length;Jr+=1){var Li=pi[Jr];Er[Li.featureIndex]||(Er[Li.featureIndex]=!0,wr.push(Li))}}return St}(Xe);for(var It in Ot)Ot[It].forEach(function(Lt){var St=Lt.feature,Gt=P.getFeatureState(St.layer["source-layer"],St.id);St.source=St.layer.source,St.layer["source-layer"]&&(St.sourceLayer=St.layer["source-layer"]),St.state=Gt});return Ot}function ie(P,N){var V=P.tileID,Z=N.tileID;return V.overscaledZ-Z.overscaledZ||V.canonical.y-Z.canonical.y||V.wrap-Z.wrap||V.canonical.x-Z.canonical.x}var q=function(P,N){this.max=P,this.onRemove=N,this.reset()};q.prototype.reset=function(){for(var P in this.data)for(var N=0,V=this.data[P];N<V.length;N+=1){var Z=V[N];Z.timeout&&clearTimeout(Z.timeout),this.onRemove(Z.value)}return this.data={},this.order=[],this},q.prototype.add=function(P,N,V){var Z=this,fe=P.wrapped().key;void 0===this.data[fe]&&(this.data[fe]=[]);var me={value:N,timeout:void 0};if(void 0!==V&&(me.timeout=setTimeout(function(){Z.remove(P,me)},V)),this.data[fe].push(me),this.order.push(fe),this.order.length>this.max){var we=this._getAndRemoveByKey(this.order[0]);we&&this.onRemove(we)}return this},q.prototype.has=function(P){return P.wrapped().key in this.data},q.prototype.getAndRemove=function(P){return this.has(P)?this._getAndRemoveByKey(P.wrapped().key):null},q.prototype._getAndRemoveByKey=function(P){var N=this.data[P].shift();return N.timeout&&clearTimeout(N.timeout),0===this.data[P].length&&delete this.data[P],this.order.splice(this.order.indexOf(P),1),N.value},q.prototype.getByKey=function(P){var N=this.data[P];return N?N[0].value:null},q.prototype.get=function(P){return this.has(P)?this.data[P.wrapped().key][0].value:null},q.prototype.remove=function(P,N){if(!this.has(P))return this;var V=P.wrapped().key,Z=void 0===N?0:this.data[V].indexOf(N),fe=this.data[V][Z];return this.data[V].splice(Z,1),fe.timeout&&clearTimeout(fe.timeout),0===this.data[V].length&&delete this.data[V],this.onRemove(fe.value),this.order.splice(this.order.indexOf(V),1),this},q.prototype.setMaxSize=function(P){for(this.max=P;this.order.length>this.max;){var N=this._getAndRemoveByKey(this.order[0]);N&&this.onRemove(N)}return this},q.prototype.filter=function(P){var N=[];for(var V in this.data)for(var Z=0,fe=this.data[V];Z<fe.length;Z+=1){var me=fe[Z];P(me.value)||N.push(me)}for(var we=0,Ae=N;we<Ae.length;we+=1){var Re=Ae[we];this.remove(Re.value.tileID,Re)}};var ee=function(P,N,V){this.context=P;var Z=P.gl;this.buffer=Z.createBuffer(),this.dynamicDraw=Boolean(V),this.context.unbindVAO(),P.bindElementBuffer.set(this.buffer),Z.bufferData(Z.ELEMENT_ARRAY_BUFFER,N.arrayBuffer,this.dynamicDraw?Z.DYNAMIC_DRAW:Z.STATIC_DRAW),this.dynamicDraw||delete N.arrayBuffer};ee.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ee.prototype.updateData=function(P){var N=this.context.gl;this.context.unbindVAO(),this.bind(),N.bufferSubData(N.ELEMENT_ARRAY_BUFFER,0,P.arrayBuffer)},ee.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var te={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},se=function(P,N,V,Z){this.length=N.length,this.attributes=V,this.itemSize=N.bytesPerElement,this.dynamicDraw=Z,this.context=P;var fe=P.gl;this.buffer=fe.createBuffer(),P.bindVertexBuffer.set(this.buffer),fe.bufferData(fe.ARRAY_BUFFER,N.arrayBuffer,this.dynamicDraw?fe.DYNAMIC_DRAW:fe.STATIC_DRAW),this.dynamicDraw||delete N.arrayBuffer};se.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},se.prototype.updateData=function(P){var N=this.context.gl;this.bind(),N.bufferSubData(N.ARRAY_BUFFER,0,P.arrayBuffer)},se.prototype.enableAttributes=function(P,N){for(var V=0;V<this.attributes.length;V++){var fe=N.attributes[this.attributes[V].name];void 0!==fe&&P.enableVertexAttribArray(fe)}},se.prototype.setVertexAttribPointers=function(P,N,V){for(var Z=0;Z<this.attributes.length;Z++){var fe=this.attributes[Z],me=N.attributes[fe.name];void 0!==me&&P.vertexAttribPointer(me,fe.components,P[te[fe.type]],!1,this.itemSize,fe.offset+this.itemSize*(V||0))}},se.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ue=function(P){this.gl=P.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ue.prototype.get=function(){return this.current},ue.prototype.set=function(P){},ue.prototype.getDefault=function(){return this.default},ue.prototype.setDefault=function(){this.set(this.default)};var de=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return e.Color.transparent},N.prototype.set=function(V){var Z=this.current;(V.r!==Z.r||V.g!==Z.g||V.b!==Z.b||V.a!==Z.a||this.dirty)&&(this.gl.clearColor(V.r,V.g,V.b,V.a),this.current=V,this.dirty=!1)},N}(ue),he=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return 1},N.prototype.set=function(V){(V!==this.current||this.dirty)&&(this.gl.clearDepth(V),this.current=V,this.dirty=!1)},N}(ue),xe=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return 0},N.prototype.set=function(V){(V!==this.current||this.dirty)&&(this.gl.clearStencil(V),this.current=V,this.dirty=!1)},N}(ue),ge=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return[!0,!0,!0,!0]},N.prototype.set=function(V){var Z=this.current;(V[0]!==Z[0]||V[1]!==Z[1]||V[2]!==Z[2]||V[3]!==Z[3]||this.dirty)&&(this.gl.colorMask(V[0],V[1],V[2],V[3]),this.current=V,this.dirty=!1)},N}(ue),_e=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return!0},N.prototype.set=function(V){(V!==this.current||this.dirty)&&(this.gl.depthMask(V),this.current=V,this.dirty=!1)},N}(ue),Ce=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return 255},N.prototype.set=function(V){(V!==this.current||this.dirty)&&(this.gl.stencilMask(V),this.current=V,this.dirty=!1)},N}(ue),Le=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},N.prototype.set=function(V){var Z=this.current;(V.func!==Z.func||V.ref!==Z.ref||V.mask!==Z.mask||this.dirty)&&(this.gl.stencilFunc(V.func,V.ref,V.mask),this.current=V,this.dirty=!1)},N}(ue),Ie=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){var V=this.gl;return[V.KEEP,V.KEEP,V.KEEP]},N.prototype.set=function(V){var Z=this.current;(V[0]!==Z[0]||V[1]!==Z[1]||V[2]!==Z[2]||this.dirty)&&(this.gl.stencilOp(V[0],V[1],V[2]),this.current=V,this.dirty=!1)},N}(ue),Be=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(V){if(V!==this.current||this.dirty){var Z=this.gl;V?Z.enable(Z.STENCIL_TEST):Z.disable(Z.STENCIL_TEST),this.current=V,this.dirty=!1}},N}(ue),ve=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return[0,1]},N.prototype.set=function(V){var Z=this.current;(V[0]!==Z[0]||V[1]!==Z[1]||this.dirty)&&(this.gl.depthRange(V[0],V[1]),this.current=V,this.dirty=!1)},N}(ue),Te=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(V){if(V!==this.current||this.dirty){var Z=this.gl;V?Z.enable(Z.DEPTH_TEST):Z.disable(Z.DEPTH_TEST),this.current=V,this.dirty=!1}},N}(ue),Pe=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.LESS},N.prototype.set=function(V){(V!==this.current||this.dirty)&&(this.gl.depthFunc(V),this.current=V,this.dirty=!1)},N}(ue),De=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(V){if(V!==this.current||this.dirty){var Z=this.gl;V?Z.enable(Z.BLEND):Z.disable(Z.BLEND),this.current=V,this.dirty=!1}},N}(ue),Fe=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){var V=this.gl;return[V.ONE,V.ZERO]},N.prototype.set=function(V){var Z=this.current;(V[0]!==Z[0]||V[1]!==Z[1]||this.dirty)&&(this.gl.blendFunc(V[0],V[1]),this.current=V,this.dirty=!1)},N}(ue),Ue=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return e.Color.transparent},N.prototype.set=function(V){var Z=this.current;(V.r!==Z.r||V.g!==Z.g||V.b!==Z.b||V.a!==Z.a||this.dirty)&&(this.gl.blendColor(V.r,V.g,V.b,V.a),this.current=V,this.dirty=!1)},N}(ue),He=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.FUNC_ADD},N.prototype.set=function(V){(V!==this.current||this.dirty)&&(this.gl.blendEquation(V),this.current=V,this.dirty=!1)},N}(ue),Ke=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(V){if(V!==this.current||this.dirty){var Z=this.gl;V?Z.enable(Z.CULL_FACE):Z.disable(Z.CULL_FACE),this.current=V,this.dirty=!1}},N}(ue),st=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.BACK},N.prototype.set=function(V){(V!==this.current||this.dirty)&&(this.gl.cullFace(V),this.current=V,this.dirty=!1)},N}(ue),Ve=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.CCW},N.prototype.set=function(V){(V!==this.current||this.dirty)&&(this.gl.frontFace(V),this.current=V,this.dirty=!1)},N}(ue),$e=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(V){(V!==this.current||this.dirty)&&(this.gl.useProgram(V),this.current=V,this.dirty=!1)},N}(ue),Qe=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.TEXTURE0},N.prototype.set=function(V){(V!==this.current||this.dirty)&&(this.gl.activeTexture(V),this.current=V,this.dirty=!1)},N}(ue),tt=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){var V=this.gl;return[0,0,V.drawingBufferWidth,V.drawingBufferHeight]},N.prototype.set=function(V){var Z=this.current;(V[0]!==Z[0]||V[1]!==Z[1]||V[2]!==Z[2]||V[3]!==Z[3]||this.dirty)&&(this.gl.viewport(V[0],V[1],V[2],V[3]),this.current=V,this.dirty=!1)},N}(ue),ut=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(V){if(V!==this.current||this.dirty){var Z=this.gl;Z.bindFramebuffer(Z.FRAMEBUFFER,V),this.current=V,this.dirty=!1}},N}(ue),xt=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(V){if(V!==this.current||this.dirty){var Z=this.gl;Z.bindRenderbuffer(Z.RENDERBUFFER,V),this.current=V,this.dirty=!1}},N}(ue),kt=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(V){if(V!==this.current||this.dirty){var Z=this.gl;Z.bindTexture(Z.TEXTURE_2D,V),this.current=V,this.dirty=!1}},N}(ue),Bt=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(V){if(V!==this.current||this.dirty){var Z=this.gl;Z.bindBuffer(Z.ARRAY_BUFFER,V),this.current=V,this.dirty=!1}},N}(ue),Rt=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(V){var Z=this.gl;Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,V),this.current=V,this.dirty=!1},N}(ue),ft=function(P){function N(V){P.call(this,V),this.vao=V.extVertexArrayObject}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(V){this.vao&&(V!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(V),this.current=V,this.dirty=!1)},N}(ue),lt=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return 4},N.prototype.set=function(V){if(V!==this.current||this.dirty){var Z=this.gl;Z.pixelStorei(Z.UNPACK_ALIGNMENT,V),this.current=V,this.dirty=!1}},N}(ue),Ft=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(V){if(V!==this.current||this.dirty){var Z=this.gl;Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V),this.current=V,this.dirty=!1}},N}(ue),Jt=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(V){if(V!==this.current||this.dirty){var Z=this.gl;Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,V),this.current=V,this.dirty=!1}},N}(ue),ln=function(P){function N(V,Z){P.call(this,V),this.context=V,this.parent=Z}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N}(ue),dn=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.setDirty=function(){this.dirty=!0},N.prototype.set=function(V){if(V!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var Z=this.gl;Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,V,0),this.current=V,this.dirty=!1}},N}(ln),cn=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.set=function(V){if(V!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var Z=this.gl;Z.framebufferRenderbuffer(Z.FRAMEBUFFER,Z.DEPTH_ATTACHMENT,Z.RENDERBUFFER,V),this.current=V,this.dirty=!1}},N}(ln),Tn=function(P,N,V,Z){this.context=P,this.width=N,this.height=V;var me=this.framebuffer=P.gl.createFramebuffer();this.colorAttachment=new dn(P,me),Z&&(this.depthAttachment=new cn(P,me))};Tn.prototype.destroy=function(){var P=this.context.gl,N=this.colorAttachment.get();if(N&&P.deleteTexture(N),this.depthAttachment){var V=this.depthAttachment.get();V&&P.deleteRenderbuffer(V)}P.deleteFramebuffer(this.framebuffer)};var nn=function(P,N,V){this.func=P,this.mask=N,this.range=V};nn.ReadOnly=!1,nn.ReadWrite=!0,nn.disabled=new nn(519,nn.ReadOnly,[0,1]);var Me=function(P,N,V,Z,fe,me){this.test=P,this.ref=N,this.mask=V,this.fail=Z,this.depthFail=fe,this.pass=me};Me.disabled=new Me({func:519,mask:0},0,0,7680,7680,7680);var Ee=function(P,N,V){this.blendFunction=P,this.blendColor=N,this.mask=V};Ee.disabled=new Ee(Ee.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),Ee.unblended=new Ee(Ee.Replace,e.Color.transparent,[!0,!0,!0,!0]),Ee.alphaBlended=new Ee([1,771],e.Color.transparent,[!0,!0,!0,!0]);var Se=function(P,N,V){this.enable=P,this.mode=N,this.frontFace=V};Se.disabled=new Se(!1,1029,2305),Se.backCCW=new Se(!0,1029,2305);var je=function(P){this.gl=P,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new de(this),this.clearDepth=new he(this),this.clearStencil=new xe(this),this.colorMask=new ge(this),this.depthMask=new _e(this),this.stencilMask=new Ce(this),this.stencilFunc=new Le(this),this.stencilOp=new Ie(this),this.stencilTest=new Be(this),this.depthRange=new ve(this),this.depthTest=new Te(this),this.depthFunc=new Pe(this),this.blend=new De(this),this.blendFunc=new Fe(this),this.blendColor=new Ue(this),this.blendEquation=new He(this),this.cullFace=new Ke(this),this.cullFaceSide=new st(this),this.frontFace=new Ve(this),this.program=new $e(this),this.activeTexture=new Qe(this),this.viewport=new tt(this),this.bindFramebuffer=new ut(this),this.bindRenderbuffer=new xt(this),this.bindTexture=new kt(this),this.bindVertexBuffer=new Bt(this),this.bindElementBuffer=new Rt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ft(this),this.pixelStoreUnpack=new lt(this),this.pixelStoreUnpackPremultiplyAlpha=new Ft(this),this.pixelStoreUnpackFlipY=new Jt(this),this.extTextureFilterAnisotropic=P.getExtension("EXT_texture_filter_anisotropic")||P.getExtension("MOZ_EXT_texture_filter_anisotropic")||P.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=P.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=P.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(P.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=P.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=P.getExtension("EXT_disjoint_timer_query")};je.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},je.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},je.prototype.createIndexBuffer=function(P,N){return new ee(this,P,N)},je.prototype.createVertexBuffer=function(P,N,V){return new se(this,P,N,V)},je.prototype.createRenderbuffer=function(P,N,V){var Z=this.gl,fe=Z.createRenderbuffer();return this.bindRenderbuffer.set(fe),Z.renderbufferStorage(Z.RENDERBUFFER,P,N,V),this.bindRenderbuffer.set(null),fe},je.prototype.createFramebuffer=function(P,N,V){return new Tn(this,P,N,V)},je.prototype.clear=function(P){var N=P.color,V=P.depth,Z=this.gl,fe=0;N&&(fe|=Z.COLOR_BUFFER_BIT,this.clearColor.set(N),this.colorMask.set([!0,!0,!0,!0])),void 0!==V&&(fe|=Z.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(V),this.depthMask.set(!0)),Z.clear(fe)},je.prototype.setCullFace=function(P){!1===P.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(P.mode),this.frontFace.set(P.frontFace))},je.prototype.setDepthMode=function(P){P.func!==this.gl.ALWAYS||P.mask?(this.depthTest.set(!0),this.depthFunc.set(P.func),this.depthMask.set(P.mask),this.depthRange.set(P.range)):this.depthTest.set(!1)},je.prototype.setStencilMode=function(P){P.test.func!==this.gl.ALWAYS||P.mask?(this.stencilTest.set(!0),this.stencilMask.set(P.mask),this.stencilOp.set([P.fail,P.depthFail,P.pass]),this.stencilFunc.set({func:P.test.func,ref:P.ref,mask:P.test.mask})):this.stencilTest.set(!1)},je.prototype.setColorMode=function(P){e.deepEqual(P.blendFunction,Ee.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(P.blendFunction),this.blendColor.set(P.blendColor)),this.colorMask.set(P.mask)},je.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var qe=function(P){function N(V,Z,fe){var me=this;P.call(this),this.id=V,this.dispatcher=fe,this.on("data",function(we){"source"===we.dataType&&"metadata"===we.sourceDataType&&(me._sourceLoaded=!0),me._sourceLoaded&&!me._paused&&"source"===we.dataType&&"content"===we.sourceDataType&&(me.reload(),me.transform&&me.update(me.transform))}),this.on("error",function(){me._sourceErrored=!0}),this._source=function(we,Ae,Re,Xe){var nt=new H[Ae.type](we,Ae,Re,Xe);if(nt.id!==we)throw new Error("Expected Source id to be "+we+" instead of "+nt.id);return e.bindAll(["load","abort","unload","serialize","prepare"],nt),nt}(V,Z,fe,this),this._tiles={},this._cache=new q(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.onAdd=function(V){this.map=V,this._maxTileCacheSize=V?V._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(V)},N.prototype.onRemove=function(V){this._source&&this._source.onRemove&&this._source.onRemove(V)},N.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var V in this._tiles){var Z=this._tiles[V];if("loaded"!==Z.state&&"errored"!==Z.state)return!1}return!0},N.prototype.getSource=function(){return this._source},N.prototype.pause=function(){this._paused=!0},N.prototype.resume=function(){if(this._paused){var V=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,V&&this.reload(),this.transform&&this.update(this.transform)}},N.prototype._loadTile=function(V,Z){return this._source.loadTile(V,Z)},N.prototype._unloadTile=function(V){if(this._source.unloadTile)return this._source.unloadTile(V,function(){})},N.prototype._abortTile=function(V){if(this._source.abortTile)return this._source.abortTile(V,function(){})},N.prototype.serialize=function(){return this._source.serialize()},N.prototype.prepare=function(V){for(var Z in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var fe=this._tiles[Z];fe.upload(V),fe.prepare(this.map.style.imageManager)}},N.prototype.getIds=function(){return e.values(this._tiles).map(function(V){return V.tileID}).sort(Je).map(function(V){return V.key})},N.prototype.getRenderableIds=function(V){var Z=this,fe=[];for(var me in this._tiles)this._isIdRenderable(me,V)&&fe.push(this._tiles[me]);return V?fe.sort(function(we,Ae){var Re=we.tileID,Xe=Ae.tileID,nt=new e.Point(Re.canonical.x,Re.canonical.y)._rotate(Z.transform.angle),ht=new e.Point(Xe.canonical.x,Xe.canonical.y)._rotate(Z.transform.angle);return Re.overscaledZ-Xe.overscaledZ||ht.y-nt.y||ht.x-nt.x}).map(function(we){return we.tileID.key}):fe.map(function(we){return we.tileID}).sort(Je).map(function(we){return we.key})},N.prototype.hasRenderableParent=function(V){var Z=this.findLoadedParent(V,0);return!!Z&&this._isIdRenderable(Z.tileID.key)},N.prototype._isIdRenderable=function(V,Z){return this._tiles[V]&&this._tiles[V].hasData()&&!this._coveredTiles[V]&&(Z||!this._tiles[V].holdingForFade())},N.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var V in this._cache.reset(),this._tiles)"errored"!==this._tiles[V].state&&this._reloadTile(V,"reloading")},N.prototype._reloadTile=function(V,Z){var fe=this._tiles[V];fe&&("loading"!==fe.state&&(fe.state=Z),this._loadTile(fe,this._tileLoaded.bind(this,fe,V,Z)))},N.prototype._tileLoaded=function(V,Z,fe,me){if(me)return V.state="errored",void(404!==me.status?this._source.fire(new e.ErrorEvent(me,{tile:V})):this.update(this.transform));V.timeAdded=e.browser.now(),"expired"===fe&&(V.refreshedUponExpiration=!0),this._setTileReloadTimer(Z,V),"raster-dem"===this.getSource().type&&V.dem&&this._backfillDEM(V),this._state.initializeTileState(V,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:V,coord:V.tileID}))},N.prototype._backfillDEM=function(V){for(var Z=this.getRenderableIds(),fe=0;fe<Z.length;fe++){var me=Z[fe];if(V.neighboringTiles&&V.neighboringTiles[me]){var we=this.getTileByID(me);Ae(V,we),Ae(we,V)}}function Ae(Re,Xe){Re.needsHillshadePrepare=!0;var nt=Xe.tileID.canonical.x-Re.tileID.canonical.x,ht=Xe.tileID.canonical.y-Re.tileID.canonical.y,Dt=Math.pow(2,Re.tileID.canonical.z),Ot=Xe.tileID.key;0===nt&&0===ht||Math.abs(ht)>1||(Math.abs(nt)>1&&(1===Math.abs(nt+Dt)?nt+=Dt:1===Math.abs(nt-Dt)&&(nt-=Dt)),Xe.dem&&Re.dem&&(Re.dem.backfillBorder(Xe.dem,nt,ht),Re.neighboringTiles&&Re.neighboringTiles[Ot]&&(Re.neighboringTiles[Ot].backfilled=!0)))}},N.prototype.getTile=function(V){return this.getTileByID(V.key)},N.prototype.getTileByID=function(V){return this._tiles[V]},N.prototype._retainLoadedChildren=function(V,Z,fe,me){for(var we in this._tiles){var Ae=this._tiles[we];if(!(me[we]||!Ae.hasData()||Ae.tileID.overscaledZ<=Z||Ae.tileID.overscaledZ>fe)){for(var Re=Ae.tileID;Ae&&Ae.tileID.overscaledZ>Z+1;){var Xe=Ae.tileID.scaledTo(Ae.tileID.overscaledZ-1);(Ae=this._tiles[Xe.key])&&Ae.hasData()&&(Re=Xe)}for(var nt=Re;nt.overscaledZ>Z;)if(V[(nt=nt.scaledTo(nt.overscaledZ-1)).key]){me[Re.key]=Re;break}}}},N.prototype.findLoadedParent=function(V,Z){if(V.key in this._loadedParentTiles){var fe=this._loadedParentTiles[V.key];return fe&&fe.tileID.overscaledZ>=Z?fe:null}for(var me=V.overscaledZ-1;me>=Z;me--){var we=V.scaledTo(me),Ae=this._getLoadedTile(we);if(Ae)return Ae}},N.prototype._getLoadedTile=function(V){var Z=this._tiles[V.key];return Z&&Z.hasData()?Z:this._cache.getByKey(V.wrapped().key)},N.prototype.updateCacheSize=function(V){var Z=(Math.ceil(V.width/this._source.tileSize)+1)*(Math.ceil(V.height/this._source.tileSize)+1),fe=Math.floor(5*Z),me="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,fe):fe;this._cache.setMaxSize(me)},N.prototype.handleWrapJump=function(V){var fe=Math.round((V-(void 0===this._prevLng?V:this._prevLng))/360);if(this._prevLng=V,fe){var me={};for(var we in this._tiles){var Ae=this._tiles[we];Ae.tileID=Ae.tileID.unwrapTo(Ae.tileID.wrap+fe),me[Ae.tileID.key]=Ae}for(var Re in this._tiles=me,this._timers)clearTimeout(this._timers[Re]),delete this._timers[Re];for(var Xe in this._tiles)this._setTileReloadTimer(Xe,this._tiles[Xe])}},N.prototype.update=function(V){var Z=this;if(this.transform=V,this._sourceLoaded&&!this._paused){var fe;this.updateCacheSize(V),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?fe=V.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Nn){return new e.OverscaledTileID(Nn.canonical.z,Nn.wrap,Nn.canonical.z,Nn.canonical.x,Nn.canonical.y)}):(fe=V.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(fe=fe.filter(function(Nn){return Z._source.hasTile(Nn)}))):fe=[];var me=V.coveringZoomLevel(this._source),we=Math.max(me-N.maxOverzooming,this._source.minzoom),Ae=Math.max(me+N.maxUnderzooming,this._source.minzoom),Re=this._updateRetainedTiles(fe,me);if(at(this._source.type)){for(var Xe={},nt={},ht=0,Dt=Object.keys(Re);ht<Dt.length;ht+=1){var Ot=Dt[ht],It=Re[Ot],Lt=this._tiles[Ot];if(Lt&&!(Lt.fadeEndTime&&Lt.fadeEndTime<=e.browser.now())){var St=this.findLoadedParent(It,we);St&&(this._addTile(St.tileID),Xe[St.tileID.key]=St.tileID),nt[Ot]=It}}for(var Gt in this._retainLoadedChildren(nt,me,Ae,Re),Xe)Re[Gt]||(this._coveredTiles[Gt]=!0,Re[Gt]=Xe[Gt])}for(var Vt in Re)this._tiles[Vt].clearFadeHold();for(var Yt=0,xn=e.keysDifference(this._tiles,Re);Yt<xn.length;Yt+=1){var En=xn[Yt],jn=this._tiles[En];jn.hasSymbolBuckets&&!jn.holdingForFade()?jn.setHoldDuration(this.map._fadeDuration):jn.hasSymbolBuckets&&!jn.symbolFadeFinished()||this._removeTile(En)}this._updateLoadedParentTileCache()}},N.prototype.releaseSymbolFadeTiles=function(){for(var V in this._tiles)this._tiles[V].holdingForFade()&&this._removeTile(V)},N.prototype._updateRetainedTiles=function(V,Z){for(var fe={},me={},we=Math.max(Z-N.maxOverzooming,this._source.minzoom),Ae=Math.max(Z+N.maxUnderzooming,this._source.minzoom),Re={},Xe=0,nt=V;Xe<nt.length;Xe+=1){var ht=nt[Xe],Dt=this._addTile(ht);fe[ht.key]=ht,Dt.hasData()||Z<this._source.maxzoom&&(Re[ht.key]=ht)}this._retainLoadedChildren(Re,Z,Ae,fe);for(var Ot=0,It=V;Ot<It.length;Ot+=1){var Lt=It[Ot],St=this._tiles[Lt.key];if(!St.hasData()){if(Z+1>this._source.maxzoom){var Gt=Lt.children(this._source.maxzoom)[0],Vt=this.getTile(Gt);if(Vt&&Vt.hasData()){fe[Gt.key]=Gt;continue}}else{var Yt=Lt.children(this._source.maxzoom);if(fe[Yt[0].key]&&fe[Yt[1].key]&&fe[Yt[2].key]&&fe[Yt[3].key])continue}for(var xn=St.wasRequested(),En=Lt.overscaledZ-1;En>=we;--En){var jn=Lt.scaledTo(En);if(me[jn.key]||(me[jn.key]=!0,!(St=this.getTile(jn))&&xn&&(St=this._addTile(jn)),St&&(fe[jn.key]=jn,xn=St.wasRequested(),St.hasData())))break}}}return fe},N.prototype._updateLoadedParentTileCache=function(){for(var V in this._loadedParentTiles={},this._tiles){for(var Z=[],fe=void 0,me=this._tiles[V].tileID;me.overscaledZ>0;){if(me.key in this._loadedParentTiles){fe=this._loadedParentTiles[me.key];break}Z.push(me.key);var we=me.scaledTo(me.overscaledZ-1);if(fe=this._getLoadedTile(we))break;me=we}for(var Ae=0,Re=Z;Ae<Re.length;Ae+=1)this._loadedParentTiles[Re[Ae]]=fe}},N.prototype._addTile=function(V){var Z=this._tiles[V.key];if(Z)return Z;(Z=this._cache.getAndRemove(V))&&(this._setTileReloadTimer(V.key,Z),Z.tileID=V,this._state.initializeTileState(Z,this.map?this.map.painter:null),this._cacheTimers[V.key]&&(clearTimeout(this._cacheTimers[V.key]),delete this._cacheTimers[V.key],this._setTileReloadTimer(V.key,Z)));var fe=Boolean(Z);return fe||(Z=new e.Tile(V,this._source.tileSize*V.overscaleFactor()),this._loadTile(Z,this._tileLoaded.bind(this,Z,V.key,Z.state))),Z?(Z.uses++,this._tiles[V.key]=Z,fe||this._source.fire(new e.Event("dataloading",{tile:Z,coord:Z.tileID,dataType:"source"})),Z):null},N.prototype._setTileReloadTimer=function(V,Z){var fe=this;V in this._timers&&(clearTimeout(this._timers[V]),delete this._timers[V]);var me=Z.getExpiryTimeout();me&&(this._timers[V]=setTimeout(function(){fe._reloadTile(V,"expired"),delete fe._timers[V]},me))},N.prototype._removeTile=function(V){var Z=this._tiles[V];Z&&(Z.uses--,delete this._tiles[V],this._timers[V]&&(clearTimeout(this._timers[V]),delete this._timers[V]),Z.uses>0||(Z.hasData()&&"reloading"!==Z.state?this._cache.add(Z.tileID,Z,Z.getExpiryTimeout()):(Z.aborted=!0,this._abortTile(Z),this._unloadTile(Z))))},N.prototype.clearTiles=function(){for(var V in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(V);this._cache.reset()},N.prototype.tilesIn=function(V,Z,fe){var me=this,we=[],Ae=this.transform;if(!Ae)return we;for(var Re=fe?Ae.getCameraQueryGeometry(V):V,Xe=V.map(function(En){return Ae.pointCoordinate(En)}),nt=Re.map(function(En){return Ae.pointCoordinate(En)}),ht=this.getIds(),Dt=1/0,Ot=1/0,It=-1/0,Lt=-1/0,St=0,Gt=nt;St<Gt.length;St+=1){var Vt=Gt[St];Dt=Math.min(Dt,Vt.x),Ot=Math.min(Ot,Vt.y),It=Math.max(It,Vt.x),Lt=Math.max(Lt,Vt.y)}for(var Yt=function(En){var jn=me._tiles[ht[En]];if(!jn.holdingForFade()){var Nn=jn.tileID,hr=Math.pow(2,Ae.zoom-jn.tileID.overscaledZ),dr=Z*jn.queryPadding*e.EXTENT/jn.tileSize/hr,Er=[Nn.getTilePoint(new e.MercatorCoordinate(Dt,Ot)),Nn.getTilePoint(new e.MercatorCoordinate(It,Lt))];if(Er[0].x-dr<e.EXTENT&&Er[0].y-dr<e.EXTENT&&Er[1].x+dr>=0&&Er[1].y+dr>=0){var wr=Xe.map(function(pi){return Nn.getTilePoint(pi)}),Jr=nt.map(function(pi){return Nn.getTilePoint(pi)});we.push({tile:jn,tileID:Nn,queryGeometry:wr,cameraQueryGeometry:Jr,scale:hr})}}},xn=0;xn<ht.length;xn++)Yt(xn);return we},N.prototype.getVisibleCoordinates=function(V){for(var Z=this,fe=this.getRenderableIds(V).map(function(Re){return Z._tiles[Re].tileID}),me=0,we=fe;me<we.length;me+=1){var Ae=we[me];Ae.posMatrix=this.transform.calculatePosMatrix(Ae.toUnwrapped())}return fe},N.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(at(this._source.type))for(var V in this._tiles){var Z=this._tiles[V];if(void 0!==Z.fadeEndTime&&Z.fadeEndTime>=e.browser.now())return!0}return!1},N.prototype.setFeatureState=function(V,Z,fe){this._state.updateState(V=V||"_geojsonTileLayer",Z,fe)},N.prototype.removeFeatureState=function(V,Z,fe){this._state.removeFeatureState(V=V||"_geojsonTileLayer",Z,fe)},N.prototype.getFeatureState=function(V,Z){return this._state.getState(V=V||"_geojsonTileLayer",Z)},N.prototype.setDependencies=function(V,Z,fe){var me=this._tiles[V];me&&me.setDependencies(Z,fe)},N.prototype.reloadTilesForDependencies=function(V,Z){for(var fe in this._tiles)this._tiles[fe].hasDependency(V,Z)&&this._reloadTile(fe,"reloading");this._cache.filter(function(me){return!me.hasDependency(V,Z)})},N}(e.Evented);function Je(P,N){var V=Math.abs(2*P.wrap)-+(P.wrap<0),Z=Math.abs(2*N.wrap)-+(N.wrap<0);return P.overscaledZ-N.overscaledZ||Z-V||N.canonical.y-P.canonical.y||N.canonical.x-P.canonical.x}function at(P){return"raster"===P||"image"===P||"video"===P}function it(){return new e.window.Worker(pe.workerUrl)}qe.maxOverzooming=10,qe.maxUnderzooming=3;var yt="mapboxgl_preloaded_worker_pool",vt=function(){this.active={}};vt.prototype.acquire=function(P){if(!this.workers)for(this.workers=[];this.workers.length<vt.workerCount;)this.workers.push(new it);return this.active[P]=!0,this.workers.slice()},vt.prototype.release=function(P){delete this.active[P],0===this.numActive()&&(this.workers.forEach(function(N){N.terminate()}),this.workers=null)},vt.prototype.isPreloaded=function(){return!!this.active[yt]},vt.prototype.numActive=function(){return Object.keys(this.active).length};var Ut,Wt=Math.floor(e.browser.hardwareConcurrency/2);function gt(){return Ut||(Ut=new vt),Ut}function At(P,N){var V={};for(var Z in P)"ref"!==Z&&(V[Z]=P[Z]);return e.refProperties.forEach(function(fe){fe in N&&(V[fe]=N[fe])}),V}function Zt(P){P=P.slice();for(var N=Object.create(null),V=0;V<P.length;V++)N[P[V].id]=P[V];for(var Z=0;Z<P.length;Z++)"ref"in P[Z]&&(P[Z]=At(P[Z],N[P[Z].ref]));return P}vt.workerCount=Math.max(Math.min(Wt,6),1);var Et={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ct(P,N,V){V.push({command:Et.addSource,args:[P,N[P]]})}function Ne(P,N,V){N.push({command:Et.removeSource,args:[P]}),V[P]=!0}function et(P,N,V,Z){Ne(P,V,Z),Ct(P,N,V)}function dt(P,N,V){var Z;for(Z in P[V])if(P[V].hasOwnProperty(Z)&&"data"!==Z&&!e.deepEqual(P[V][Z],N[V][Z]))return!1;for(Z in N[V])if(N[V].hasOwnProperty(Z)&&"data"!==Z&&!e.deepEqual(P[V][Z],N[V][Z]))return!1;return!0}function Mt(P,N,V,Z,fe,me){var we;for(we in N=N||{},P=P||{})P.hasOwnProperty(we)&&(e.deepEqual(P[we],N[we])||V.push({command:me,args:[Z,we,N[we],fe]}));for(we in N)N.hasOwnProperty(we)&&!P.hasOwnProperty(we)&&(e.deepEqual(P[we],N[we])||V.push({command:me,args:[Z,we,N[we],fe]}))}function zt(P){return P.id}function Xt(P,N){return P[N.id]=N,P}var Qt=function(P,N){this.reset(P,N)};Qt.prototype.reset=function(P,N){this.points=P||[],this._distances=[0];for(var V=1;V<this.points.length;V++)this._distances[V]=this._distances[V-1]+this.points[V].dist(this.points[V-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(N||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Qt.prototype.lerp=function(P){if(1===this.points.length)return this.points[0];P=e.clamp(P,0,1);for(var N=1,V=this._distances[N],Z=P*this.paddedLength+this.padding;V<Z&&N<this._distances.length;)V=this._distances[++N];var fe=N-1,me=this._distances[fe],we=V-me,Ae=we>0?(Z-me)/we:0;return this.points[fe].mult(1-Ae).add(this.points[N].mult(Ae))};var kn=function(P,N,V){var Z=this.boxCells=[],fe=this.circleCells=[];this.xCellCount=Math.ceil(P/V),this.yCellCount=Math.ceil(N/V);for(var me=0;me<this.xCellCount*this.yCellCount;me++)Z.push([]),fe.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=P,this.height=N,this.xScale=this.xCellCount/P,this.yScale=this.yCellCount/N,this.boxUid=0,this.circleUid=0};function qn(P,N,V,Z,fe){var me=e.create();return N?(e.scale(me,me,[1/fe,1/fe,1]),V||e.rotateZ(me,me,Z.angle)):e.multiply(me,Z.labelPlaneMatrix,P),me}function gn(P,N,V,Z,fe){if(N){var me=e.clone(P);return e.scale(me,me,[fe,fe,1]),V||e.rotateZ(me,me,-Z.angle),me}return Z.glCoordMatrix}function sn(P,N){var V=[P.x,P.y,0,1];ni(V,V,N);var Z=V[3];return{point:new e.Point(V[0]/Z,V[1]/Z),signedDistanceFromCamera:Z}}function vn(P,N){return.5+P/N*.5}function pn(P,N){var V=P[0]/P[3],Z=P[1]/P[3];return V>=-N[0]&&V<=N[0]&&Z>=-N[1]&&Z<=N[1]}function Mn(P,N,V,Z,fe,me,we,Ae){var Re=Z?P.textSizeData:P.iconSizeData,Xe=e.evaluateSizeForZoom(Re,V.transform.zoom),nt=[256/V.width*2+1,256/V.height*2+1],ht=Z?P.text.dynamicLayoutVertexArray:P.icon.dynamicLayoutVertexArray;ht.clear();for(var Dt=P.lineVertexArray,Ot=Z?P.text.placedSymbolArray:P.icon.placedSymbolArray,It=V.transform.width/V.transform.height,Lt=!1,St=0;St<Ot.length;St++){var Gt=Ot.get(St);if(Gt.hidden||Gt.writingMode===e.WritingMode.vertical&&!Lt)Or(Gt.numGlyphs,ht);else{Lt=!1;var Vt=[Gt.anchorX,Gt.anchorY,0,1];if(e.transformMat4(Vt,Vt,N),pn(Vt,nt)){var xn=vn(V.transform.cameraToCenterDistance,Vt[3]),En=e.evaluateSizeForFeature(Re,Xe,Gt),jn=we?En/xn:En*xn,Nn=new e.Point(Gt.anchorX,Gt.anchorY),hr=sn(Nn,fe).point,dr={},Er=Hn(Gt,jn,!1,Ae,N,fe,me,P.glyphOffsetArray,Dt,ht,hr,Nn,dr,It);Lt=Er.useVertical,(Er.notEnoughRoom||Lt||Er.needsFlipping&&Hn(Gt,jn,!0,Ae,N,fe,me,P.glyphOffsetArray,Dt,ht,hr,Nn,dr,It).notEnoughRoom)&&Or(Gt.numGlyphs,ht)}else Or(Gt.numGlyphs,ht)}}Z?P.text.dynamicLayoutVertexBuffer.updateData(ht):P.icon.dynamicLayoutVertexBuffer.updateData(ht)}function Rn(P,N,V,Z,fe,me,we,Ae,Re,Xe,nt){var ht=Ae.glyphStartIndex+Ae.numGlyphs,Dt=Ae.lineStartIndex,Ot=Ae.lineStartIndex+Ae.lineLength,It=N.getoffsetX(Ae.glyphStartIndex),Lt=N.getoffsetX(ht-1),St=er(P*It,V,Z,fe,me,we,Ae.segment,Dt,Ot,Re,Xe,nt);if(!St)return null;var Gt=er(P*Lt,V,Z,fe,me,we,Ae.segment,Dt,Ot,Re,Xe,nt);return Gt?{first:St,last:Gt}:null}function Xn(P,N,V,Z){return P===e.WritingMode.horizontal&&Math.abs(V.y-N.y)>Math.abs(V.x-N.x)*Z?{useVertical:!0}:(P===e.WritingMode.vertical?N.y<V.y:N.x>V.x)?{needsFlipping:!0}:null}function Hn(P,N,V,Z,fe,me,we,Ae,Re,Xe,nt,ht,Dt,Ot){var It,Lt=N/24,St=P.lineOffsetX*Lt,Gt=P.lineOffsetY*Lt;if(P.numGlyphs>1){var Vt=P.glyphStartIndex+P.numGlyphs,Yt=P.lineStartIndex,xn=P.lineStartIndex+P.lineLength,En=Rn(Lt,Ae,St,Gt,V,nt,ht,P,Re,me,Dt);if(!En)return{notEnoughRoom:!0};var jn=sn(En.first.point,we).point,Nn=sn(En.last.point,we).point;if(Z&&!V){var hr=Xn(P.writingMode,jn,Nn,Ot);if(hr)return hr}It=[En.first];for(var dr=P.glyphStartIndex+1;dr<Vt-1;dr++)It.push(er(Lt*Ae.getoffsetX(dr),St,Gt,V,nt,ht,P.segment,Yt,xn,Re,me,Dt));It.push(En.last)}else{if(Z&&!V){var Er=sn(ht,fe).point,wr=P.lineStartIndex+P.segment+1,Jr=new e.Point(Re.getx(wr),Re.gety(wr)),pi=sn(Jr,fe),Li=pi.signedDistanceFromCamera>0?pi.point:rr(ht,Jr,Er,1,fe),ir=Xn(P.writingMode,Er,Li,Ot);if(ir)return ir}var jr=er(Lt*Ae.getoffsetX(P.glyphStartIndex),St,Gt,V,nt,ht,P.segment,P.lineStartIndex,P.lineStartIndex+P.lineLength,Re,me,Dt);if(!jr)return{notEnoughRoom:!0};It=[jr]}for(var mi=0,fi=It;mi<fi.length;mi+=1){var Mi=fi[mi];e.addDynamicAttributes(Xe,Mi.point,Mi.angle)}return{}}function rr(P,N,V,Z,fe){var me=sn(P.add(P.sub(N)._unit()),fe).point,we=V.sub(me);return V.add(we._mult(Z/we.mag()))}function er(P,N,V,Z,fe,me,we,Ae,Re,Xe,nt,ht){var Dt=Z?P-N:P+N,Ot=Dt>0?1:-1,It=0;Z&&(Ot*=-1,It=Math.PI),Ot<0&&(It+=Math.PI);for(var Lt=Ot>0?Ae+we:Ae+we+1,St=fe,Gt=fe,Vt=0,Yt=0,xn=Math.abs(Dt),En=[];Vt+Yt<=xn;){if((Lt+=Ot)<Ae||Lt>=Re)return null;if(Gt=St,En.push(St),void 0===(St=ht[Lt])){var jn=new e.Point(Xe.getx(Lt),Xe.gety(Lt)),Nn=sn(jn,nt);if(Nn.signedDistanceFromCamera>0)St=ht[Lt]=Nn.point;else{var hr=Lt-Ot;St=rr(0===Vt?me:new e.Point(Xe.getx(hr),Xe.gety(hr)),jn,Gt,xn-Vt+1,nt)}}Vt+=Yt,Yt=Gt.dist(St)}var dr=(xn-Vt)/Yt,Er=St.sub(Gt),wr=Er.mult(dr)._add(Gt);wr._add(Er._unit()._perp()._mult(V*Ot));var Jr=It+Math.atan2(St.y-Gt.y,St.x-Gt.x);return En.push(wr),{point:wr,angle:Jr,path:En}}kn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},kn.prototype.insert=function(P,N,V,Z,fe){this._forEachCell(N,V,Z,fe,this._insertBoxCell,this.boxUid++),this.boxKeys.push(P),this.bboxes.push(N),this.bboxes.push(V),this.bboxes.push(Z),this.bboxes.push(fe)},kn.prototype.insertCircle=function(P,N,V,Z){this._forEachCell(N-Z,V-Z,N+Z,V+Z,this._insertCircleCell,this.circleUid++),this.circleKeys.push(P),this.circles.push(N),this.circles.push(V),this.circles.push(Z)},kn.prototype._insertBoxCell=function(P,N,V,Z,fe,me){this.boxCells[fe].push(me)},kn.prototype._insertCircleCell=function(P,N,V,Z,fe,me){this.circleCells[fe].push(me)},kn.prototype._query=function(P,N,V,Z,fe,me){if(V<0||P>this.width||Z<0||N>this.height)return!fe&&[];var we=[];if(P<=0&&N<=0&&this.width<=V&&this.height<=Z){if(fe)return!0;for(var Ae=0;Ae<this.boxKeys.length;Ae++)we.push({key:this.boxKeys[Ae],x1:this.bboxes[4*Ae],y1:this.bboxes[4*Ae+1],x2:this.bboxes[4*Ae+2],y2:this.bboxes[4*Ae+3]});for(var Re=0;Re<this.circleKeys.length;Re++){var Xe=this.circles[3*Re],nt=this.circles[3*Re+1],ht=this.circles[3*Re+2];we.push({key:this.circleKeys[Re],x1:Xe-ht,y1:nt-ht,x2:Xe+ht,y2:nt+ht})}return me?we.filter(me):we}return this._forEachCell(P,N,V,Z,this._queryCell,we,{hitTest:fe,seenUids:{box:{},circle:{}}},me),fe?we.length>0:we},kn.prototype._queryCircle=function(P,N,V,Z,fe){var me=P-V,we=P+V,Ae=N-V,Re=N+V;if(we<0||me>this.width||Re<0||Ae>this.height)return!Z&&[];var Xe=[];return this._forEachCell(me,Ae,we,Re,this._queryCellCircle,Xe,{hitTest:Z,circle:{x:P,y:N,radius:V},seenUids:{box:{},circle:{}}},fe),Z?Xe.length>0:Xe},kn.prototype.query=function(P,N,V,Z,fe){return this._query(P,N,V,Z,!1,fe)},kn.prototype.hitTest=function(P,N,V,Z,fe){return this._query(P,N,V,Z,!0,fe)},kn.prototype.hitTestCircle=function(P,N,V,Z){return this._queryCircle(P,N,V,!0,Z)},kn.prototype._queryCell=function(P,N,V,Z,fe,me,we,Ae){var Re=we.seenUids,Xe=this.boxCells[fe];if(null!==Xe)for(var nt=this.bboxes,ht=0,Dt=Xe;ht<Dt.length;ht+=1){var Ot=Dt[ht];if(!Re.box[Ot]){Re.box[Ot]=!0;var It=4*Ot;if(P<=nt[It+2]&&N<=nt[It+3]&&V>=nt[It+0]&&Z>=nt[It+1]&&(!Ae||Ae(this.boxKeys[Ot]))){if(we.hitTest)return me.push(!0),!0;me.push({key:this.boxKeys[Ot],x1:nt[It],y1:nt[It+1],x2:nt[It+2],y2:nt[It+3]})}}}var Lt=this.circleCells[fe];if(null!==Lt)for(var St=this.circles,Gt=0,Vt=Lt;Gt<Vt.length;Gt+=1){var Yt=Vt[Gt];if(!Re.circle[Yt]){Re.circle[Yt]=!0;var xn=3*Yt;if(this._circleAndRectCollide(St[xn],St[xn+1],St[xn+2],P,N,V,Z)&&(!Ae||Ae(this.circleKeys[Yt]))){if(we.hitTest)return me.push(!0),!0;var En=St[xn],jn=St[xn+1],Nn=St[xn+2];me.push({key:this.circleKeys[Yt],x1:En-Nn,y1:jn-Nn,x2:En+Nn,y2:jn+Nn})}}}},kn.prototype._queryCellCircle=function(P,N,V,Z,fe,me,we,Ae){var Re=we.circle,Xe=we.seenUids,nt=this.boxCells[fe];if(null!==nt)for(var ht=this.bboxes,Dt=0,Ot=nt;Dt<Ot.length;Dt+=1){var It=Ot[Dt];if(!Xe.box[It]){Xe.box[It]=!0;var Lt=4*It;if(this._circleAndRectCollide(Re.x,Re.y,Re.radius,ht[Lt+0],ht[Lt+1],ht[Lt+2],ht[Lt+3])&&(!Ae||Ae(this.boxKeys[It])))return me.push(!0),!0}}var St=this.circleCells[fe];if(null!==St)for(var Gt=this.circles,Vt=0,Yt=St;Vt<Yt.length;Vt+=1){var xn=Yt[Vt];if(!Xe.circle[xn]){Xe.circle[xn]=!0;var En=3*xn;if(this._circlesCollide(Gt[En],Gt[En+1],Gt[En+2],Re.x,Re.y,Re.radius)&&(!Ae||Ae(this.circleKeys[xn])))return me.push(!0),!0}}},kn.prototype._forEachCell=function(P,N,V,Z,fe,me,we,Ae){for(var Re=this._convertToXCellCoord(P),Xe=this._convertToYCellCoord(N),nt=this._convertToXCellCoord(V),ht=this._convertToYCellCoord(Z),Dt=Re;Dt<=nt;Dt++)for(var Ot=Xe;Ot<=ht;Ot++)if(fe.call(this,P,N,V,Z,this.xCellCount*Ot+Dt,me,we,Ae))return},kn.prototype._convertToXCellCoord=function(P){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(P*this.xScale)))},kn.prototype._convertToYCellCoord=function(P){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(P*this.yScale)))},kn.prototype._circlesCollide=function(P,N,V,Z,fe,me){var we=Z-P,Ae=fe-N,Re=V+me;return Re*Re>we*we+Ae*Ae},kn.prototype._circleAndRectCollide=function(P,N,V,Z,fe,me,we){var Ae=(me-Z)/2,Re=Math.abs(P-(Z+Ae));if(Re>Ae+V)return!1;var Xe=(we-fe)/2,nt=Math.abs(N-(fe+Xe));if(nt>Xe+V)return!1;if(Re<=Ae||nt<=Xe)return!0;var ht=Re-Ae,Dt=nt-Xe;return ht*ht+Dt*Dt<=V*V};var Ir=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Or(P,N){for(var V=0;V<P;V++){var Z=N.length;N.resize(Z+4),N.float32.set(Ir,3*Z)}}function ni(P,N,V){var Z=N[0],fe=N[1];return P[0]=V[0]*Z+V[4]*fe+V[12],P[1]=V[1]*Z+V[5]*fe+V[13],P[3]=V[3]*Z+V[7]*fe+V[15],P}var Br=function(P,N,V){void 0===N&&(N=new kn(P.width+200,P.height+200,25)),void 0===V&&(V=new kn(P.width+200,P.height+200,25)),this.transform=P,this.grid=N,this.ignoredGrid=V,this.pitchfactor=Math.cos(P._pitch)*P.cameraToCenterDistance,this.screenRightBoundary=P.width+100,this.screenBottomBoundary=P.height+100,this.gridRightBoundary=P.width+200,this.gridBottomBoundary=P.height+200};function Dr(P,N,V){return N*(e.EXTENT/(P.tileSize*Math.pow(2,V-P.tileID.overscaledZ)))}Br.prototype.placeCollisionBox=function(P,N,V,Z,fe){var me=this.projectAndGetPerspectiveRatio(Z,P.anchorPointX,P.anchorPointY),we=V*me.perspectiveRatio,Ae=P.x1*we+me.point.x,Re=P.y1*we+me.point.y,Xe=P.x2*we+me.point.x,nt=P.y2*we+me.point.y;return!this.isInsideGrid(Ae,Re,Xe,nt)||!N&&this.grid.hitTest(Ae,Re,Xe,nt,fe)?{box:[],offscreen:!1}:{box:[Ae,Re,Xe,nt],offscreen:this.isOffscreen(Ae,Re,Xe,nt)}},Br.prototype.placeCollisionCircles=function(P,N,V,Z,fe,me,we,Ae,Re,Xe,nt,ht,Dt){var Ot=[],It=new e.Point(N.anchorX,N.anchorY),Lt=sn(It,me),St=vn(this.transform.cameraToCenterDistance,Lt.signedDistanceFromCamera),Gt=(Xe?fe/St:fe*St)/e.ONE_EM,Vt=sn(It,we).point,Yt=Rn(Gt,Z,N.lineOffsetX*Gt,N.lineOffsetY*Gt,!1,Vt,It,N,V,we,{}),xn=!1,En=!1,jn=!0;if(Yt){for(var Nn=.5*ht*St+Dt,hr=new e.Point(-100,-100),dr=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Er=new Qt,wr=Yt.first,Jr=Yt.last,pi=[],Li=wr.path.length-1;Li>=1;Li--)pi.push(wr.path[Li]);for(var ir=1;ir<Jr.path.length;ir++)pi.push(Jr.path[ir]);var jr=2.5*Nn;if(Ae){var mi=pi.map(function(ds){return sn(ds,Ae)});pi=mi.some(function(ds){return ds.signedDistanceFromCamera<=0})?[]:mi.map(function(ds){return ds.point})}var fi=[];if(pi.length>0){for(var Mi=pi[0].clone(),Ri=pi[0].clone(),ta=1;ta<pi.length;ta++)Mi.x=Math.min(Mi.x,pi[ta].x),Mi.y=Math.min(Mi.y,pi[ta].y),Ri.x=Math.max(Ri.x,pi[ta].x),Ri.y=Math.max(Ri.y,pi[ta].y);fi=Mi.x>=hr.x&&Ri.x<=dr.x&&Mi.y>=hr.y&&Ri.y<=dr.y?[pi]:Ri.x<hr.x||Mi.x>dr.x||Ri.y<hr.y||Mi.y>dr.y?[]:e.clipLine([pi],hr.x,hr.y,dr.x,dr.y)}for(var xi=0,Hi=fi;xi<Hi.length;xi+=1){Er.reset(Hi[xi],.25*Nn);var ra;ra=Er.length<=.5*Nn?1:Math.ceil(Er.paddedLength/jr)+1;for(var qi=0;qi<ra;qi++){var aa=qi/Math.max(ra-1,1),ha=Er.lerp(aa),ho=ha.x+100,oo=ha.y+100;Ot.push(ho,oo,Nn,0);var bo=ho-Nn,Ya=oo-Nn,Lo=ho+Nn,po=oo+Nn;if(jn=jn&&this.isOffscreen(bo,Ya,Lo,po),En=En||this.isInsideGrid(bo,Ya,Lo,po),!P&&this.grid.hitTestCircle(ho,oo,Nn,nt)&&(xn=!0,!Re))return{circles:[],offscreen:!1,collisionDetected:xn}}}}return{circles:!Re&&xn||!En?[]:Ot,offscreen:jn,collisionDetected:xn}},Br.prototype.queryRenderedSymbols=function(P){if(0===P.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var N=[],V=1/0,Z=1/0,fe=-1/0,me=-1/0,we=0,Ae=P;we<Ae.length;we+=1){var Re=Ae[we],Xe=new e.Point(Re.x+100,Re.y+100);V=Math.min(V,Xe.x),Z=Math.min(Z,Xe.y),fe=Math.max(fe,Xe.x),me=Math.max(me,Xe.y),N.push(Xe)}for(var nt={},ht={},Dt=0,Ot=this.grid.query(V,Z,fe,me).concat(this.ignoredGrid.query(V,Z,fe,me));Dt<Ot.length;Dt+=1){var It=Ot[Dt],Lt=It.key;if(void 0===nt[Lt.bucketInstanceId]&&(nt[Lt.bucketInstanceId]={}),!nt[Lt.bucketInstanceId][Lt.featureIndex]){var St=[new e.Point(It.x1,It.y1),new e.Point(It.x2,It.y1),new e.Point(It.x2,It.y2),new e.Point(It.x1,It.y2)];e.polygonIntersectsPolygon(N,St)&&(nt[Lt.bucketInstanceId][Lt.featureIndex]=!0,void 0===ht[Lt.bucketInstanceId]&&(ht[Lt.bucketInstanceId]=[]),ht[Lt.bucketInstanceId].push(Lt.featureIndex))}}return ht},Br.prototype.insertCollisionBox=function(P,N,V,Z,fe){(N?this.ignoredGrid:this.grid).insert({bucketInstanceId:V,featureIndex:Z,collisionGroupID:fe},P[0],P[1],P[2],P[3])},Br.prototype.insertCollisionCircles=function(P,N,V,Z,fe){for(var me=N?this.ignoredGrid:this.grid,we={bucketInstanceId:V,featureIndex:Z,collisionGroupID:fe},Ae=0;Ae<P.length;Ae+=4)me.insertCircle(we,P[Ae],P[Ae+1],P[Ae+2])},Br.prototype.projectAndGetPerspectiveRatio=function(P,N,V){var Z=[N,V,0,1];return ni(Z,Z,P),{point:new e.Point((Z[0]/Z[3]+1)/2*this.transform.width+100,(-Z[1]/Z[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/Z[3]*.5}},Br.prototype.isOffscreen=function(P,N,V,Z){return V<100||P>=this.screenRightBoundary||Z<100||N>this.screenBottomBoundary},Br.prototype.isInsideGrid=function(P,N,V,Z){return V>=0&&P<this.gridRightBoundary&&Z>=0&&N<this.gridBottomBoundary},Br.prototype.getViewportMatrix=function(){var P=e.identity([]);return e.translate(P,P,[-100,-100,0]),P};var Rr=function(P,N,V,Z){this.opacity=P?Math.max(0,Math.min(1,P.opacity+(P.placed?N:-N))):Z&&V?1:0,this.placed=V};Rr.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var yi=function(P,N,V,Z,fe){this.text=new Rr(P?P.text:null,N,V,fe),this.icon=new Rr(P?P.icon:null,N,Z,fe)};yi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var $n=function(P,N,V){this.text=P,this.icon=N,this.skipFade=V},Mr=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},br=function(P,N,V,Z,fe){this.bucketInstanceId=P,this.featureIndex=N,this.sourceLayerIndex=V,this.bucketIndex=Z,this.tileID=fe},ar=function(P){this.crossSourceCollisions=P,this.maxGroupID=0,this.collisionGroups={}};function si(P,N,V,Z,fe){var me=e.getAnchorAlignment(P),we=-(me.horizontalAlign-.5)*N,Ae=-(me.verticalAlign-.5)*V,Re=e.evaluateVariableOffset(P,Z);return new e.Point(we+Re[0]*fe,Ae+Re[1]*fe)}function ri(P,N,V,Z,fe,me){var we=P.x1,Ae=P.x2,Re=P.y1,Xe=P.y2,nt=P.anchorPointX,ht=P.anchorPointY,Dt=new e.Point(N,V);return Z&&Dt._rotate(fe?me:-me),{x1:we+Dt.x,y1:Re+Dt.y,x2:Ae+Dt.x,y2:Xe+Dt.y,anchorPointX:nt,anchorPointY:ht}}ar.prototype.get=function(P){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[P]){var N=++this.maxGroupID;this.collisionGroups[P]={ID:N,predicate:function(V){return V.collisionGroupID===N}}}return this.collisionGroups[P]};var Cr=function(P,N,V,Z){this.transform=P.clone(),this.collisionIndex=new Br(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=N,this.retainedQueryData={},this.collisionGroups=new ar(V),this.collisionCircleArrays={},this.prevPlacement=Z,Z&&(Z.prevPlacement=void 0),this.placedOrientations={}};function Pr(P,N,V,Z,fe){P.emplaceBack(N?1:0,V?1:0,Z||0,fe||0),P.emplaceBack(N?1:0,V?1:0,Z||0,fe||0),P.emplaceBack(N?1:0,V?1:0,Z||0,fe||0),P.emplaceBack(N?1:0,V?1:0,Z||0,fe||0)}Cr.prototype.getBucketParts=function(P,N,V,Z){var fe=V.getBucket(N),me=V.latestFeatureIndex;if(fe&&me&&N.id===fe.layerIds[0]){var we=V.collisionBoxArray,Ae=fe.layers[0].layout,Re=Math.pow(2,this.transform.zoom-V.tileID.overscaledZ),Xe=V.tileSize/e.EXTENT,nt=this.transform.calculatePosMatrix(V.tileID.toUnwrapped()),ht="map"===Ae.get("text-pitch-alignment"),Dt="map"===Ae.get("text-rotation-alignment"),Ot=Dr(V,1,this.transform.zoom),It=qn(nt,ht,Dt,this.transform,Ot),Lt=null;if(ht){var St=gn(nt,ht,Dt,this.transform,Ot);Lt=e.multiply([],this.transform.labelPlaneMatrix,St)}this.retainedQueryData[fe.bucketInstanceId]=new br(fe.bucketInstanceId,me,fe.sourceLayerIndex,fe.index,V.tileID);var Gt={bucket:fe,layout:Ae,posMatrix:nt,textLabelPlaneMatrix:It,labelToScreenMatrix:Lt,scale:Re,textPixelRatio:Xe,holdingForFade:V.holdingForFade(),collisionBoxArray:we,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(fe.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(fe.sourceID)};if(Z)for(var Vt=0,Yt=fe.sortKeyRanges;Vt<Yt.length;Vt+=1){var xn=Yt[Vt];P.push({sortKey:xn.sortKey,symbolInstanceStart:xn.symbolInstanceStart,symbolInstanceEnd:xn.symbolInstanceEnd,parameters:Gt})}else P.push({symbolInstanceStart:0,symbolInstanceEnd:fe.symbolInstances.length,parameters:Gt})}},Cr.prototype.attemptAnchorPlacement=function(P,N,V,Z,fe,me,we,Ae,Re,Xe,nt,ht,Dt,Ot,It){var Lt,St=[ht.textOffset0,ht.textOffset1],Gt=si(P,V,Z,St,fe),Vt=this.collisionIndex.placeCollisionBox(ri(N,Gt.x,Gt.y,me,we,this.transform.angle),nt,Ae,Re,Xe.predicate);if((!It||0!==this.collisionIndex.placeCollisionBox(ri(It,Gt.x,Gt.y,me,we,this.transform.angle),nt,Ae,Re,Xe.predicate).box.length)&&Vt.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[ht.crossTileID]&&this.prevPlacement.placements[ht.crossTileID]&&this.prevPlacement.placements[ht.crossTileID].text&&(Lt=this.prevPlacement.variableOffsets[ht.crossTileID].anchor),this.variableOffsets[ht.crossTileID]={textOffset:St,width:V,height:Z,anchor:P,textBoxScale:fe,prevAnchor:Lt},this.markUsedJustification(Dt,P,ht,Ot),Dt.allowVerticalPlacement&&(this.markUsedOrientation(Dt,Ot,ht),this.placedOrientations[ht.crossTileID]=Ot),{shift:Gt,placedGlyphBoxes:Vt}},Cr.prototype.placeLayerBucketPart=function(P,N,V){var Z=this,fe=P.parameters,me=fe.bucket,we=fe.layout,Ae=fe.posMatrix,Re=fe.textLabelPlaneMatrix,Xe=fe.labelToScreenMatrix,nt=fe.textPixelRatio,ht=fe.holdingForFade,Dt=fe.collisionBoxArray,Ot=fe.partiallyEvaluatedTextSize,It=fe.collisionGroup,Lt=we.get("text-optional"),St=we.get("icon-optional"),Gt=we.get("text-allow-overlap"),Vt=we.get("icon-allow-overlap"),Yt="map"===we.get("text-rotation-alignment"),xn="map"===we.get("text-pitch-alignment"),En="none"!==we.get("icon-text-fit"),jn="viewport-y"===we.get("symbol-z-order"),Nn=Gt&&(Vt||!me.hasIconData()||St),hr=Vt&&(Gt||!me.hasTextData()||Lt);!me.collisionArrays&&Dt&&me.deserializeCollisionBoxes(Dt);var dr=function(ir,jr){if(!N[ir.crossTileID])if(ht)Z.placements[ir.crossTileID]=new $n(!1,!1,!1);else{var mi,fi=!1,Mi=!1,Ri=!0,ta=null,xi={box:null,offscreen:null},Hi={box:null,offscreen:null},Bi=null,ra=null,qi=0,aa=0,ha=0;jr.textFeatureIndex?qi=jr.textFeatureIndex:ir.useRuntimeCollisionCircles&&(qi=ir.featureIndex),jr.verticalTextFeatureIndex&&(aa=jr.verticalTextFeatureIndex);var ho=jr.textBox;if(ho){var oo=function(Eo){var Ds=e.WritingMode.horizontal;if(me.allowVerticalPlacement&&!Eo&&Z.prevPlacement){var ps=Z.prevPlacement.placedOrientations[ir.crossTileID];ps&&(Z.placedOrientations[ir.crossTileID]=ps,Z.markUsedOrientation(me,Ds=ps,ir))}return Ds},bo=function(Eo,Ds){if(me.allowVerticalPlacement&&ir.numVerticalGlyphVertices>0&&jr.verticalTextBox)for(var ps=0,ru=me.writingModes;ps<ru.length&&(ru[ps]===e.WritingMode.vertical?(xi=Ds(),Hi=xi):xi=Eo(),!(xi&&xi.box&&xi.box.length));ps+=1);else xi=Eo()};if(we.get("text-variable-anchor")){var Ya=we.get("text-variable-anchor");if(Z.prevPlacement&&Z.prevPlacement.variableOffsets[ir.crossTileID]){var Lo=Z.prevPlacement.variableOffsets[ir.crossTileID];Ya.indexOf(Lo.anchor)>0&&(Ya=Ya.filter(function(Eo){return Eo!==Lo.anchor})).unshift(Lo.anchor)}var po=function(Eo,Ds,ps){for(var ru=Eo.x2-Eo.x1,yd=Eo.y2-Eo.y1,Hs=ir.textBoxScale,Sc=En&&!Vt?Ds:null,Rl={box:[],offscreen:!1},xd=Gt?2*Ya.length:Ya.length,Fl=0;Fl<xd;++Fl){var Tl=Z.attemptAnchorPlacement(Ya[Fl%Ya.length],Eo,ru,yd,Hs,Yt,xn,nt,Ae,It,Fl>=Ya.length,ir,me,ps,Sc);if(Tl&&(Rl=Tl.placedGlyphBoxes)&&Rl.box&&Rl.box.length){fi=!0,ta=Tl.shift;break}}return Rl};bo(function(){return po(ho,jr.iconBox,e.WritingMode.horizontal)},function(){var Eo=jr.verticalTextBox;return me.allowVerticalPlacement&&!(xi&&xi.box&&xi.box.length)&&ir.numVerticalGlyphVertices>0&&Eo?po(Eo,jr.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),xi&&(fi=xi.box,Ri=xi.offscreen);var ds=oo(xi&&xi.box);if(!fi&&Z.prevPlacement){var Zo=Z.prevPlacement.variableOffsets[ir.crossTileID];Zo&&(Z.variableOffsets[ir.crossTileID]=Zo,Z.markUsedJustification(me,Zo.anchor,ir,ds))}}else{var Ns=function(Eo,Ds){var ps=Z.collisionIndex.placeCollisionBox(Eo,Gt,nt,Ae,It.predicate);return ps&&ps.box&&ps.box.length&&(Z.markUsedOrientation(me,Ds,ir),Z.placedOrientations[ir.crossTileID]=Ds),ps};bo(function(){return Ns(ho,e.WritingMode.horizontal)},function(){var Eo=jr.verticalTextBox;return me.allowVerticalPlacement&&ir.numVerticalGlyphVertices>0&&Eo?Ns(Eo,e.WritingMode.vertical):{box:null,offscreen:null}}),oo(xi&&xi.box&&xi.box.length)}}if(fi=(mi=xi)&&mi.box&&mi.box.length>0,Ri=mi&&mi.offscreen,ir.useRuntimeCollisionCircles){var tl=me.text.placedSymbolArray.get(ir.centerJustifiedTextSymbolIndex),Ol=e.evaluateSizeForFeature(me.textSizeData,Ot,tl),vu=we.get("text-padding");Bi=Z.collisionIndex.placeCollisionCircles(Gt,tl,me.lineVertexArray,me.glyphOffsetArray,Ol,Ae,Re,Xe,V,xn,It.predicate,ir.collisionCircleDiameter,vu),fi=Gt||Bi.circles.length>0&&!Bi.collisionDetected,Ri=Ri&&Bi.offscreen}if(jr.iconFeatureIndex&&(ha=jr.iconFeatureIndex),jr.iconBox){var Gl=function(Eo){var Ds=En&&ta?ri(Eo,ta.x,ta.y,Yt,xn,Z.transform.angle):Eo;return Z.collisionIndex.placeCollisionBox(Ds,Vt,nt,Ae,It.predicate)};Mi=Hi&&Hi.box&&Hi.box.length&&jr.verticalIconBox?(ra=Gl(jr.verticalIconBox)).box.length>0:(ra=Gl(jr.iconBox)).box.length>0,Ri=Ri&&ra.offscreen}var xs=Lt||0===ir.numHorizontalGlyphVertices&&0===ir.numVerticalGlyphVertices,nu=St||0===ir.numIconVertices;if(xs||nu?nu?xs||(Mi=Mi&&fi):fi=Mi&&fi:Mi=fi=Mi&&fi,fi&&mi&&mi.box&&Z.collisionIndex.insertCollisionBox(mi.box,we.get("text-ignore-placement"),me.bucketInstanceId,Hi&&Hi.box&&aa?aa:qi,It.ID),Mi&&ra&&Z.collisionIndex.insertCollisionBox(ra.box,we.get("icon-ignore-placement"),me.bucketInstanceId,ha,It.ID),Bi&&(fi&&Z.collisionIndex.insertCollisionCircles(Bi.circles,we.get("text-ignore-placement"),me.bucketInstanceId,qi,It.ID),V)){var Lu=me.bucketInstanceId,nl=Z.collisionCircleArrays[Lu];void 0===nl&&(nl=Z.collisionCircleArrays[Lu]=new Mr);for(var Iu=0;Iu<Bi.circles.length;Iu+=4)nl.circles.push(Bi.circles[Iu+0]),nl.circles.push(Bi.circles[Iu+1]),nl.circles.push(Bi.circles[Iu+2]),nl.circles.push(Bi.collisionDetected?1:0)}Z.placements[ir.crossTileID]=new $n(fi||Nn,Mi||hr,Ri||me.justReloaded),N[ir.crossTileID]=!0}};if(jn)for(var Er=me.getSortedSymbolIndexes(this.transform.angle),wr=Er.length-1;wr>=0;--wr){var Jr=Er[wr];dr(me.symbolInstances.get(Jr),me.collisionArrays[Jr])}else for(var pi=P.symbolInstanceStart;pi<P.symbolInstanceEnd;pi++)dr(me.symbolInstances.get(pi),me.collisionArrays[pi]);if(V&&me.bucketInstanceId in this.collisionCircleArrays){var Li=this.collisionCircleArrays[me.bucketInstanceId];e.invert(Li.invProjMatrix,Ae),Li.viewportMatrix=this.collisionIndex.getViewportMatrix()}me.justReloaded=!1},Cr.prototype.markUsedJustification=function(P,N,V,Z){var fe;fe=Z===e.WritingMode.vertical?V.verticalPlacedTextSymbolIndex:{left:V.leftJustifiedTextSymbolIndex,center:V.centerJustifiedTextSymbolIndex,right:V.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(N)];for(var we=0,Ae=[V.leftJustifiedTextSymbolIndex,V.centerJustifiedTextSymbolIndex,V.rightJustifiedTextSymbolIndex,V.verticalPlacedTextSymbolIndex];we<Ae.length;we+=1){var Re=Ae[we];Re>=0&&(P.text.placedSymbolArray.get(Re).crossTileID=fe>=0&&Re!==fe?0:V.crossTileID)}},Cr.prototype.markUsedOrientation=function(P,N,V){for(var Z=N===e.WritingMode.horizontal||N===e.WritingMode.horizontalOnly?N:0,fe=N===e.WritingMode.vertical?N:0,me=0,we=[V.leftJustifiedTextSymbolIndex,V.centerJustifiedTextSymbolIndex,V.rightJustifiedTextSymbolIndex];me<we.length;me+=1)P.text.placedSymbolArray.get(we[me]).placedOrientation=Z;V.verticalPlacedTextSymbolIndex&&(P.text.placedSymbolArray.get(V.verticalPlacedTextSymbolIndex).placedOrientation=fe)},Cr.prototype.commit=function(P){this.commitTime=P,this.zoomAtLastRecencyCheck=this.transform.zoom;var N=this.prevPlacement,V=!1;this.prevZoomAdjustment=N?N.zoomAdjustment(this.transform.zoom):0;var Z=N?N.symbolFadeChange(P):1,fe=N?N.opacities:{},me=N?N.variableOffsets:{},we=N?N.placedOrientations:{};for(var Ae in this.placements){var Re=this.placements[Ae],Xe=fe[Ae];Xe?(this.opacities[Ae]=new yi(Xe,Z,Re.text,Re.icon),V=V||Re.text!==Xe.text.placed||Re.icon!==Xe.icon.placed):(this.opacities[Ae]=new yi(null,Z,Re.text,Re.icon,Re.skipFade),V=V||Re.text||Re.icon)}for(var nt in fe){var ht=fe[nt];if(!this.opacities[nt]){var Dt=new yi(ht,Z,!1,!1);Dt.isHidden()||(this.opacities[nt]=Dt,V=V||ht.text.placed||ht.icon.placed)}}for(var Ot in me)this.variableOffsets[Ot]||!this.opacities[Ot]||this.opacities[Ot].isHidden()||(this.variableOffsets[Ot]=me[Ot]);for(var It in we)this.placedOrientations[It]||!this.opacities[It]||this.opacities[It].isHidden()||(this.placedOrientations[It]=we[It]);V?this.lastPlacementChangeTime=P:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=N?N.lastPlacementChangeTime:P)},Cr.prototype.updateLayerOpacities=function(P,N){for(var V={},Z=0,fe=N;Z<fe.length;Z+=1){var me=fe[Z],we=me.getBucket(P);we&&me.latestFeatureIndex&&P.id===we.layerIds[0]&&this.updateBucketOpacities(we,V,me.collisionBoxArray)}},Cr.prototype.updateBucketOpacities=function(P,N,V){var Z=this;P.hasTextData()&&P.text.opacityVertexArray.clear(),P.hasIconData()&&P.icon.opacityVertexArray.clear(),P.hasIconCollisionBoxData()&&P.iconCollisionBox.collisionVertexArray.clear(),P.hasTextCollisionBoxData()&&P.textCollisionBox.collisionVertexArray.clear();var fe=P.layers[0].layout,me=new yi(null,0,!1,!1,!0),we=fe.get("text-allow-overlap"),Ae=fe.get("icon-allow-overlap"),Re=fe.get("text-variable-anchor"),Xe="map"===fe.get("text-rotation-alignment"),nt="map"===fe.get("text-pitch-alignment"),ht="none"!==fe.get("icon-text-fit"),Dt=new yi(null,0,we&&(Ae||!P.hasIconData()||fe.get("icon-optional")),Ae&&(we||!P.hasTextData()||fe.get("text-optional")),!0);!P.collisionArrays&&V&&(P.hasIconCollisionBoxData()||P.hasTextCollisionBoxData())&&P.deserializeCollisionBoxes(V);for(var Ot=function(Gt,Vt,Yt){for(var xn=0;xn<Vt/4;xn++)Gt.opacityVertexArray.emplaceBack(Yt)},It=function(Gt){var Vt=P.symbolInstances.get(Gt),Yt=Vt.numHorizontalGlyphVertices,xn=Vt.numVerticalGlyphVertices,En=Vt.crossTileID,Nn=Z.opacities[En];N[En]?Nn=me:Nn||(Z.opacities[En]=Nn=Dt),N[En]=!0;var dr=Vt.numIconVertices>0,Er=Z.placedOrientations[Vt.crossTileID],wr=Er===e.WritingMode.vertical,Jr=Er===e.WritingMode.horizontal||Er===e.WritingMode.horizontalOnly;if(Yt>0||xn>0){var pi=Wn(Nn.text);Ot(P.text,Yt,wr?Pn:pi),Ot(P.text,xn,Jr?Pn:pi);var jr=Nn.text.isHidden();[Vt.rightJustifiedTextSymbolIndex,Vt.centerJustifiedTextSymbolIndex,Vt.leftJustifiedTextSymbolIndex].forEach(function(ha){ha>=0&&(P.text.placedSymbolArray.get(ha).hidden=jr||wr?1:0)}),Vt.verticalPlacedTextSymbolIndex>=0&&(P.text.placedSymbolArray.get(Vt.verticalPlacedTextSymbolIndex).hidden=jr||Jr?1:0);var mi=Z.variableOffsets[Vt.crossTileID];mi&&Z.markUsedJustification(P,mi.anchor,Vt,Er);var fi=Z.placedOrientations[Vt.crossTileID];fi&&(Z.markUsedJustification(P,"left",Vt,fi),Z.markUsedOrientation(P,fi,Vt))}if(dr){var Mi=Wn(Nn.icon),Ri=!(ht&&Vt.verticalPlacedIconSymbolIndex&&wr);Vt.placedIconSymbolIndex>=0&&(Ot(P.icon,Vt.numIconVertices,Ri?Mi:Pn),P.icon.placedSymbolArray.get(Vt.placedIconSymbolIndex).hidden=Nn.icon.isHidden()),Vt.verticalPlacedIconSymbolIndex>=0&&(Ot(P.icon,Vt.numVerticalIconVertices,Ri?Pn:Mi),P.icon.placedSymbolArray.get(Vt.verticalPlacedIconSymbolIndex).hidden=Nn.icon.isHidden())}if(P.hasIconCollisionBoxData()||P.hasTextCollisionBoxData()){var Hi=P.collisionArrays[Gt];if(Hi){var Bi=new e.Point(0,0);if(Hi.textBox||Hi.verticalTextBox){var ra=!0;if(Re){var qi=Z.variableOffsets[En];qi?(Bi=si(qi.anchor,qi.width,qi.height,qi.textOffset,qi.textBoxScale),Xe&&Bi._rotate(nt?Z.transform.angle:-Z.transform.angle)):ra=!1}Hi.textBox&&Pr(P.textCollisionBox.collisionVertexArray,Nn.text.placed,!ra||wr,Bi.x,Bi.y),Hi.verticalTextBox&&Pr(P.textCollisionBox.collisionVertexArray,Nn.text.placed,!ra||Jr,Bi.x,Bi.y)}var aa=Boolean(!Jr&&Hi.verticalIconBox);Hi.iconBox&&Pr(P.iconCollisionBox.collisionVertexArray,Nn.icon.placed,aa,ht?Bi.x:0,ht?Bi.y:0),Hi.verticalIconBox&&Pr(P.iconCollisionBox.collisionVertexArray,Nn.icon.placed,!aa,ht?Bi.x:0,ht?Bi.y:0)}}},Lt=0;Lt<P.symbolInstances.length;Lt++)It(Lt);if(P.sortFeatures(this.transform.angle),this.retainedQueryData[P.bucketInstanceId]&&(this.retainedQueryData[P.bucketInstanceId].featureSortOrder=P.featureSortOrder),P.hasTextData()&&P.text.opacityVertexBuffer&&P.text.opacityVertexBuffer.updateData(P.text.opacityVertexArray),P.hasIconData()&&P.icon.opacityVertexBuffer&&P.icon.opacityVertexBuffer.updateData(P.icon.opacityVertexArray),P.hasIconCollisionBoxData()&&P.iconCollisionBox.collisionVertexBuffer&&P.iconCollisionBox.collisionVertexBuffer.updateData(P.iconCollisionBox.collisionVertexArray),P.hasTextCollisionBoxData()&&P.textCollisionBox.collisionVertexBuffer&&P.textCollisionBox.collisionVertexBuffer.updateData(P.textCollisionBox.collisionVertexArray),P.bucketInstanceId in this.collisionCircleArrays){var St=this.collisionCircleArrays[P.bucketInstanceId];P.placementInvProjMatrix=St.invProjMatrix,P.placementViewportMatrix=St.viewportMatrix,P.collisionCircleArray=St.circles,delete this.collisionCircleArrays[P.bucketInstanceId]}},Cr.prototype.symbolFadeChange=function(P){return 0===this.fadeDuration?1:(P-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Cr.prototype.zoomAdjustment=function(P){return Math.max(0,(this.transform.zoom-P)/1.5)},Cr.prototype.hasTransitions=function(P){return this.stale||P-this.lastPlacementChangeTime<this.fadeDuration},Cr.prototype.stillRecent=function(P,N){var V=this.zoomAtLastRecencyCheck===N?1-this.zoomAdjustment(N):1;return this.zoomAtLastRecencyCheck=N,this.commitTime+this.fadeDuration*V>P},Cr.prototype.setStale=function(){this.stale=!0};var vr=Math.pow(2,25),hn=Math.pow(2,24),Jn=Math.pow(2,17),jt=Math.pow(2,16),fn=Math.pow(2,9),Sn=Math.pow(2,8),Kn=Math.pow(2,1);function Wn(P){if(0===P.opacity&&!P.placed)return 0;if(1===P.opacity&&P.placed)return 4294967295;var N=P.placed?1:0,V=Math.floor(127*P.opacity);return V*vr+N*hn+V*Jn+N*jt+V*fn+N*Sn+V*Kn+N}var Pn=0,Un=function(P){this._sortAcrossTiles="viewport-y"!==P.layout.get("symbol-z-order")&&void 0!==P.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Un.prototype.continuePlacement=function(P,N,V,Z,fe){for(var me=this._bucketParts;this._currentTileIndex<P.length;)if(N.getBucketParts(me,Z,P[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,fe())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,me.sort(function(Re,Xe){return Re.sortKey-Xe.sortKey}));this._currentPartIndex<me.length;)if(N.placeLayerBucketPart(me[this._currentPartIndex],this._seenCrossTileIDs,V),this._currentPartIndex++,fe())return!0;return!1};var Cn=function(P,N,V,Z,fe,me,we){this.placement=new Cr(P,fe,me,we),this._currentPlacementIndex=N.length-1,this._forceFullPlacement=V,this._showCollisionBoxes=Z,this._done=!1};Cn.prototype.isDone=function(){return this._done},Cn.prototype.continuePlacement=function(P,N,V){for(var Z=this,fe=e.browser.now(),me=function(){var Re=e.browser.now()-fe;return!Z._forceFullPlacement&&Re>2};this._currentPlacementIndex>=0;){var we=N[P[this._currentPlacementIndex]],Ae=this.placement.collisionIndex.transform.zoom;if("symbol"===we.type&&(!we.minzoom||we.minzoom<=Ae)&&(!we.maxzoom||we.maxzoom>Ae)){if(this._inProgressLayer||(this._inProgressLayer=new Un(we)),this._inProgressLayer.continuePlacement(V[we.source],this.placement,this._showCollisionBoxes,we,me))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Cn.prototype.commit=function(P){return this.placement.commit(P),this.placement};var On=512/e.EXTENT/2,Fn=function(P,N,V){this.tileID=P,this.indexedSymbolInstances={},this.bucketInstanceId=V;for(var Z=0;Z<N.length;Z++){var fe=N.get(Z),me=fe.key;this.indexedSymbolInstances[me]||(this.indexedSymbolInstances[me]=[]),this.indexedSymbolInstances[me].push({crossTileID:fe.crossTileID,coord:this.getScaledCoordinates(fe,P)})}};Fn.prototype.getScaledCoordinates=function(P,N){var Z=On/Math.pow(2,N.canonical.z-this.tileID.canonical.z);return{x:Math.floor((N.canonical.x*e.EXTENT+P.anchorX)*Z),y:Math.floor((N.canonical.y*e.EXTENT+P.anchorY)*Z)}},Fn.prototype.findMatches=function(P,N,V){for(var Z=this.tileID.canonical.z<N.canonical.z?1:Math.pow(2,this.tileID.canonical.z-N.canonical.z),fe=0;fe<P.length;fe++){var me=P.get(fe);if(!me.crossTileID){var we=this.indexedSymbolInstances[me.key];if(we)for(var Ae=this.getScaledCoordinates(me,N),Re=0,Xe=we;Re<Xe.length;Re+=1){var nt=Xe[Re];if(Math.abs(nt.coord.x-Ae.x)<=Z&&Math.abs(nt.coord.y-Ae.y)<=Z&&!V[nt.crossTileID]){V[nt.crossTileID]=!0,me.crossTileID=nt.crossTileID;break}}}}};var Gn=function(){this.maxCrossTileID=0};Gn.prototype.generate=function(){return++this.maxCrossTileID};var or=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};or.prototype.handleWrapJump=function(P){var N=Math.round((P-this.lng)/360);if(0!==N)for(var V in this.indexes){var Z=this.indexes[V],fe={};for(var me in Z){var we=Z[me];we.tileID=we.tileID.unwrapTo(we.tileID.wrap+N),fe[we.tileID.key]=we}this.indexes[V]=fe}this.lng=P},or.prototype.addBucket=function(P,N,V){if(this.indexes[P.overscaledZ]&&this.indexes[P.overscaledZ][P.key]){if(this.indexes[P.overscaledZ][P.key].bucketInstanceId===N.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(P.overscaledZ,this.indexes[P.overscaledZ][P.key])}for(var Z=0;Z<N.symbolInstances.length;Z++)N.symbolInstances.get(Z).crossTileID=0;this.usedCrossTileIDs[P.overscaledZ]||(this.usedCrossTileIDs[P.overscaledZ]={});var fe=this.usedCrossTileIDs[P.overscaledZ];for(var me in this.indexes){var we=this.indexes[me];if(Number(me)>P.overscaledZ)for(var Ae in we){var Re=we[Ae];Re.tileID.isChildOf(P)&&Re.findMatches(N.symbolInstances,P,fe)}else{var Xe=we[P.scaledTo(Number(me)).key];Xe&&Xe.findMatches(N.symbolInstances,P,fe)}}for(var nt=0;nt<N.symbolInstances.length;nt++){var ht=N.symbolInstances.get(nt);ht.crossTileID||(ht.crossTileID=V.generate(),fe[ht.crossTileID]=!0)}return void 0===this.indexes[P.overscaledZ]&&(this.indexes[P.overscaledZ]={}),this.indexes[P.overscaledZ][P.key]=new Fn(P,N.symbolInstances,N.bucketInstanceId),!0},or.prototype.removeBucketCrossTileIDs=function(P,N){for(var V in N.indexedSymbolInstances)for(var Z=0,fe=N.indexedSymbolInstances[V];Z<fe.length;Z+=1)delete this.usedCrossTileIDs[P][fe[Z].crossTileID]},or.prototype.removeStaleBuckets=function(P){var N=!1;for(var V in this.indexes){var Z=this.indexes[V];for(var fe in Z)P[Z[fe].bucketInstanceId]||(this.removeBucketCrossTileIDs(V,Z[fe]),delete Z[fe],N=!0)}return N};var sr=function(){this.layerIndexes={},this.crossTileIDs=new Gn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};sr.prototype.addLayer=function(P,N,V){var Z=this.layerIndexes[P.id];void 0===Z&&(Z=this.layerIndexes[P.id]=new or);var fe=!1,me={};Z.handleWrapJump(V);for(var we=0,Ae=N;we<Ae.length;we+=1){var Re=Ae[we],Xe=Re.getBucket(P);Xe&&P.id===Xe.layerIds[0]&&(Xe.bucketInstanceId||(Xe.bucketInstanceId=++this.maxBucketInstanceId),Z.addBucket(Re.tileID,Xe,this.crossTileIDs)&&(fe=!0),me[Xe.bucketInstanceId]=!0)}return Z.removeStaleBuckets(me)&&(fe=!0),fe},sr.prototype.pruneUnusedLayers=function(P){var N={};for(var V in P.forEach(function(Z){N[Z]=!0}),this.layerIndexes)N[V]||delete this.layerIndexes[V]};var pr=function(P,N){return e.emitValidationErrors(P,N&&N.filter(function(V){return"source.canvas"!==V.identifier}))},yr=e.pick(Et,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Lr=e.pick(Et,["setCenter","setZoom","setBearing","setPitch"]),zr=function(){var P={},N=e.styleSpec.$version;for(var V in e.styleSpec.$root){var Z=e.styleSpec.$root[V];if(Z.required){var fe;null!=(fe="version"===V?N:"array"===Z.type?[]:{})&&(P[V]=fe)}}return P}(),cr=function(P){function N(V,Z){var fe=this;void 0===Z&&(Z={}),P.call(this),this.map=V,this.dispatcher=new D(gt(),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new E(V._requestManager,Z.localIdeographFontFamily),this.lineAtlas=new O(256,512),this.crossTileSymbolIndex=new sr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var me=this;this._rtlTextPluginCallback=N.registerForPluginStateChange(function(we){me.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:we.pluginStatus,pluginURL:we.pluginURL},function(Re,Xe){if(e.triggerPluginCompletionEvent(Re),Xe&&Xe.every(function(ht){return ht}))for(var nt in me.sourceCaches)me.sourceCaches[nt].reload()})}),this.on("data",function(we){if("source"===we.dataType&&"metadata"===we.sourceDataType){var Ae=fe.sourceCaches[we.sourceId];if(Ae){var Re=Ae.getSource();if(Re&&Re.vectorLayerIds)for(var Xe in fe._layers){var nt=fe._layers[Xe];nt.source===Re.id&&fe._validateLayer(nt)}}}})}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.loadURL=function(V,Z){var fe=this;void 0===Z&&(Z={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var me="boolean"==typeof Z.validate?Z.validate:!e.isMapboxURL(V);V=this.map._requestManager.normalizeStyleURL(V,Z.accessToken);var we=this.map._requestManager.transformRequest(V,e.ResourceType.Style);this._request=e.getJSON(we,function(Ae,Re){fe._request=null,Ae?fe.fire(new e.ErrorEvent(Ae)):Re&&fe._load(Re,me)})},N.prototype.loadJSON=function(V,Z){var fe=this;void 0===Z&&(Z={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){fe._request=null,fe._load(V,!1!==Z.validate)})},N.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(zr,!1)},N.prototype._load=function(V,Z){if(!Z||!pr(this,e.validateStyle(V))){for(var fe in this._loaded=!0,this.stylesheet=V,V.sources)this.addSource(fe,V.sources[fe],{validate:!1});V.sprite?this._loadSprite(V.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(V.glyphs);var me=Zt(this.stylesheet.layers);this._order=me.map(function(Xe){return Xe.id}),this._layers={},this._serializedLayers={};for(var we=0,Ae=me;we<Ae.length;we+=1){var Re=Ae[we];(Re=e.createStyleLayer(Re)).setEventedParent(this,{layer:{id:Re.id}}),this._layers[Re.id]=Re,this._serializedLayers[Re.id]=Re.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new R(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},N.prototype._loadSprite=function(V){var Z=this;this._spriteRequest=function(fe,me,we){var Ae,Re,Xe,nt=e.browser.devicePixelRatio>1?"@2x":"",ht=e.getJSON(me.transformRequest(me.normalizeSpriteURL(fe,nt,".json"),e.ResourceType.SpriteJSON),function(It,Lt){ht=null,Xe||(Xe=It,Ae=Lt,Ot())}),Dt=e.getImage(me.transformRequest(me.normalizeSpriteURL(fe,nt,".png"),e.ResourceType.SpriteImage),function(It,Lt){Dt=null,Xe||(Xe=It,Re=Lt,Ot())});function Ot(){if(Xe)we(Xe);else if(Ae&&Re){var It=e.browser.getImageData(Re),Lt={};for(var St in Ae){var Gt=Ae[St],Vt=Gt.width,Yt=Gt.height,xn=Gt.x,En=Gt.y,jn=Gt.sdf,Nn=Gt.pixelRatio,hr=Gt.stretchX,dr=Gt.stretchY,Er=Gt.content,wr=new e.RGBAImage({width:Vt,height:Yt});e.RGBAImage.copy(It,wr,{x:xn,y:En},{x:0,y:0},{width:Vt,height:Yt}),Lt[St]={data:wr,pixelRatio:Nn,sdf:jn,stretchX:hr,stretchY:dr,content:Er}}we(null,Lt)}}return{cancel:function(){ht&&(ht.cancel(),ht=null),Dt&&(Dt.cancel(),Dt=null)}}}(V,this.map._requestManager,function(fe,me){if(Z._spriteRequest=null,fe)Z.fire(new e.ErrorEvent(fe));else if(me)for(var we in me)Z.imageManager.addImage(we,me[we]);Z.imageManager.setLoaded(!0),Z._availableImages=Z.imageManager.listImages(),Z.dispatcher.broadcast("setImages",Z._availableImages),Z.fire(new e.Event("data",{dataType:"style"}))})},N.prototype._validateLayer=function(V){var Z=this.sourceCaches[V.source];if(Z){var fe=V.sourceLayer;if(fe){var me=Z.getSource();("geojson"===me.type||me.vectorLayerIds&&-1===me.vectorLayerIds.indexOf(fe))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+fe+'" does not exist on source "'+me.id+'" as specified by style layer "'+V.id+'"')))}}},N.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var V in this.sourceCaches)if(!this.sourceCaches[V].loaded())return!1;return!!this.imageManager.isLoaded()},N.prototype._serializeLayers=function(V){for(var Z=[],fe=0,me=V;fe<me.length;fe+=1){var Ae=this._layers[me[fe]];"custom"!==Ae.type&&Z.push(Ae.serialize())}return Z},N.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var V in this.sourceCaches)if(this.sourceCaches[V].hasTransition())return!0;for(var Z in this._layers)if(this._layers[Z].hasTransition())return!0;return!1},N.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},N.prototype.update=function(V){if(this._loaded){var Z=this._changed;if(this._changed){var fe=Object.keys(this._updatedLayers),me=Object.keys(this._removedLayers);for(var we in(fe.length||me.length)&&this._updateWorkerLayers(fe,me),this._updatedSources){var Ae=this._updatedSources[we];"reload"===Ae?this._reloadSource(we):"clear"===Ae&&this._clearSource(we)}for(var Re in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Re].updateTransitions(V);this.light.updateTransitions(V),this._resetUpdates()}for(var Xe in this.sourceCaches)this.sourceCaches[Xe].used=!1;for(var nt=0,ht=this._order;nt<ht.length;nt+=1){var Ot=this._layers[ht[nt]];Ot.recalculate(V,this._availableImages),!Ot.isHidden(V.zoom)&&Ot.source&&(this.sourceCaches[Ot.source].used=!0)}this.light.recalculate(V),this.z=V.zoom,Z&&this.fire(new e.Event("data",{dataType:"style"}))}},N.prototype._updateTilesForChangedImages=function(){var V=Object.keys(this._changedImages);if(V.length){for(var Z in this.sourceCaches)this.sourceCaches[Z].reloadTilesForDependencies(["icons","patterns"],V);this._changedImages={}}},N.prototype._updateWorkerLayers=function(V,Z){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(V),removedIds:Z})},N.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},N.prototype.setState=function(V){var Z=this;if(this._checkLoaded(),pr(this,e.validateStyle(V)))return!1;(V=e.clone$1(V)).layers=Zt(V.layers);var fe=function un(P,N){if(!P)return[{command:Et.setStyle,args:[N]}];var V=[];try{if(!e.deepEqual(P.version,N.version))return[{command:Et.setStyle,args:[N]}];e.deepEqual(P.center,N.center)||V.push({command:Et.setCenter,args:[N.center]}),e.deepEqual(P.zoom,N.zoom)||V.push({command:Et.setZoom,args:[N.zoom]}),e.deepEqual(P.bearing,N.bearing)||V.push({command:Et.setBearing,args:[N.bearing]}),e.deepEqual(P.pitch,N.pitch)||V.push({command:Et.setPitch,args:[N.pitch]}),e.deepEqual(P.sprite,N.sprite)||V.push({command:Et.setSprite,args:[N.sprite]}),e.deepEqual(P.glyphs,N.glyphs)||V.push({command:Et.setGlyphs,args:[N.glyphs]}),e.deepEqual(P.transition,N.transition)||V.push({command:Et.setTransition,args:[N.transition]}),e.deepEqual(P.light,N.light)||V.push({command:Et.setLight,args:[N.light]});var Z={},fe=[];!function(we,Ae,Re,Xe){var nt;for(nt in Ae=Ae||{},we=we||{})we.hasOwnProperty(nt)&&(Ae.hasOwnProperty(nt)||Ne(nt,Re,Xe));for(nt in Ae)Ae.hasOwnProperty(nt)&&(we.hasOwnProperty(nt)?e.deepEqual(we[nt],Ae[nt])||("geojson"===we[nt].type&&"geojson"===Ae[nt].type&&dt(we,Ae,nt)?Re.push({command:Et.setGeoJSONSourceData,args:[nt,Ae[nt].data]}):et(nt,Ae,Re,Xe)):Ct(nt,Ae,Re))}(P.sources,N.sources,fe,Z);var me=[];P.layers&&P.layers.forEach(function(we){Z[we.source]?V.push({command:Et.removeLayer,args:[we.id]}):me.push(we)}),V=V.concat(fe),function(we,Ae,Re){Ae=Ae||[];var Xe,nt,ht,Dt,Ot,It,Lt,St=(we=we||[]).map(zt),Gt=Ae.map(zt),Vt=we.reduce(Xt,{}),Yt=Ae.reduce(Xt,{}),xn=St.slice(),En=Object.create(null);for(Xe=0,nt=0;Xe<St.length;Xe++)Yt.hasOwnProperty(ht=St[Xe])?nt++:(Re.push({command:Et.removeLayer,args:[ht]}),xn.splice(xn.indexOf(ht,nt),1));for(Xe=0,nt=0;Xe<Gt.length;Xe++)xn[xn.length-1-Xe]!==(ht=Gt[Gt.length-1-Xe])&&(Vt.hasOwnProperty(ht)?(Re.push({command:Et.removeLayer,args:[ht]}),xn.splice(xn.lastIndexOf(ht,xn.length-nt),1)):nt++,Re.push({command:Et.addLayer,args:[Yt[ht],It=xn[xn.length-Xe]]}),xn.splice(xn.length-Xe,0,ht),En[ht]=!0);for(Xe=0;Xe<Gt.length;Xe++)if(Dt=Vt[ht=Gt[Xe]],Ot=Yt[ht],!En[ht]&&!e.deepEqual(Dt,Ot))if(e.deepEqual(Dt.source,Ot.source)&&e.deepEqual(Dt["source-layer"],Ot["source-layer"])&&e.deepEqual(Dt.type,Ot.type)){for(Lt in Mt(Dt.layout,Ot.layout,Re,ht,null,Et.setLayoutProperty),Mt(Dt.paint,Ot.paint,Re,ht,null,Et.setPaintProperty),e.deepEqual(Dt.filter,Ot.filter)||Re.push({command:Et.setFilter,args:[ht,Ot.filter]}),e.deepEqual(Dt.minzoom,Ot.minzoom)&&e.deepEqual(Dt.maxzoom,Ot.maxzoom)||Re.push({command:Et.setLayerZoomRange,args:[ht,Ot.minzoom,Ot.maxzoom]}),Dt)Dt.hasOwnProperty(Lt)&&"layout"!==Lt&&"paint"!==Lt&&"filter"!==Lt&&"metadata"!==Lt&&"minzoom"!==Lt&&"maxzoom"!==Lt&&(0===Lt.indexOf("paint.")?Mt(Dt[Lt],Ot[Lt],Re,ht,Lt.slice(6),Et.setPaintProperty):e.deepEqual(Dt[Lt],Ot[Lt])||Re.push({command:Et.setLayerProperty,args:[ht,Lt,Ot[Lt]]}));for(Lt in Ot)Ot.hasOwnProperty(Lt)&&!Dt.hasOwnProperty(Lt)&&"layout"!==Lt&&"paint"!==Lt&&"filter"!==Lt&&"metadata"!==Lt&&"minzoom"!==Lt&&"maxzoom"!==Lt&&(0===Lt.indexOf("paint.")?Mt(Dt[Lt],Ot[Lt],Re,ht,Lt.slice(6),Et.setPaintProperty):e.deepEqual(Dt[Lt],Ot[Lt])||Re.push({command:Et.setLayerProperty,args:[ht,Lt,Ot[Lt]]}))}else Re.push({command:Et.removeLayer,args:[ht]}),It=xn[xn.lastIndexOf(ht)+1],Re.push({command:Et.addLayer,args:[Ot,It]})}(me,N.layers,V)}catch(we){console.warn("Unable to compute style diff:",we),V=[{command:Et.setStyle,args:[N]}]}return V}(this.serialize(),V).filter(function(we){return!(we.command in Lr)});if(0===fe.length)return!1;var me=fe.filter(function(we){return!(we.command in yr)});if(me.length>0)throw new Error("Unimplemented: "+me.map(function(we){return we.command}).join(", ")+".");return fe.forEach(function(we){"setTransition"!==we.command&&Z[we.command].apply(Z,we.args)}),this.stylesheet=V,!0},N.prototype.addImage=function(V,Z){if(this.getImage(V))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(V,Z),this._availableImages=this.imageManager.listImages(),this._changedImages[V]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},N.prototype.updateImage=function(V,Z){this.imageManager.updateImage(V,Z)},N.prototype.getImage=function(V){return this.imageManager.getImage(V)},N.prototype.removeImage=function(V){if(!this.getImage(V))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(V),this._availableImages=this.imageManager.listImages(),this._changedImages[V]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},N.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},N.prototype.addSource=function(V,Z,fe){var me=this;if(void 0===fe&&(fe={}),this._checkLoaded(),void 0!==this.sourceCaches[V])throw new Error("There is already a source with this ID");if(!Z.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(Z).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(Z.type)>=0&&this._validate(e.validateStyle.source,"sources."+V,Z,null,fe))){this.map&&this.map._collectResourceTiming&&(Z.collectResourceTiming=!0);var we=this.sourceCaches[V]=new qe(V,Z,this.dispatcher);we.style=this,we.setEventedParent(this,function(){return{isSourceLoaded:me.loaded(),source:we.serialize(),sourceId:V}}),we.onAdd(this.map),this._changed=!0}},N.prototype.removeSource=function(V){if(this._checkLoaded(),void 0===this.sourceCaches[V])throw new Error("There is no source with this ID");for(var Z in this._layers)if(this._layers[Z].source===V)return this.fire(new e.ErrorEvent(new Error('Source "'+V+'" cannot be removed while layer "'+Z+'" is using it.')));var fe=this.sourceCaches[V];delete this.sourceCaches[V],delete this._updatedSources[V],fe.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:V})),fe.setEventedParent(null),fe.clearTiles(),fe.onRemove&&fe.onRemove(this.map),this._changed=!0},N.prototype.setGeoJSONSourceData=function(V,Z){this._checkLoaded(),this.sourceCaches[V].getSource().setData(Z),this._changed=!0},N.prototype.getSource=function(V){return this.sourceCaches[V]&&this.sourceCaches[V].getSource()},N.prototype.addLayer=function(V,Z,fe){void 0===fe&&(fe={}),this._checkLoaded();var me=V.id;if(this.getLayer(me))this.fire(new e.ErrorEvent(new Error('Layer with id "'+me+'" already exists on this map')));else{var we;if("custom"===V.type){if(pr(this,e.validateCustomStyleLayer(V)))return;we=e.createStyleLayer(V)}else{if("object"==typeof V.source&&(this.addSource(me,V.source),V=e.clone$1(V),V=e.extend(V,{source:me})),this._validate(e.validateStyle.layer,"layers."+me,V,{arrayIndex:-1},fe))return;we=e.createStyleLayer(V),this._validateLayer(we),we.setEventedParent(this,{layer:{id:me}}),this._serializedLayers[we.id]=we.serialize()}var Ae=Z?this._order.indexOf(Z):this._order.length;if(Z&&-1===Ae)this.fire(new e.ErrorEvent(new Error('Layer with id "'+Z+'" does not exist on this map.')));else{if(this._order.splice(Ae,0,me),this._layerOrderChanged=!0,this._layers[me]=we,this._removedLayers[me]&&we.source&&"custom"!==we.type){var Re=this._removedLayers[me];delete this._removedLayers[me],Re.type!==we.type?this._updatedSources[we.source]="clear":(this._updatedSources[we.source]="reload",this.sourceCaches[we.source].pause())}this._updateLayer(we),we.onAdd&&we.onAdd(this.map)}}},N.prototype.moveLayer=function(V,Z){if(this._checkLoaded(),this._changed=!0,this._layers[V]){if(V!==Z){var fe=this._order.indexOf(V);this._order.splice(fe,1);var me=Z?this._order.indexOf(Z):this._order.length;Z&&-1===me?this.fire(new e.ErrorEvent(new Error('Layer with id "'+Z+'" does not exist on this map.'))):(this._order.splice(me,0,V),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+V+"' does not exist in the map's style and cannot be moved.")))},N.prototype.removeLayer=function(V){this._checkLoaded();var Z=this._layers[V];if(Z){Z.setEventedParent(null);var fe=this._order.indexOf(V);this._order.splice(fe,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[V]=Z,delete this._layers[V],delete this._serializedLayers[V],delete this._updatedLayers[V],delete this._updatedPaintProps[V],Z.onRemove&&Z.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+V+"' does not exist in the map's style and cannot be removed.")))},N.prototype.getLayer=function(V){return this._layers[V]},N.prototype.hasLayer=function(V){return V in this._layers},N.prototype.setLayerZoomRange=function(V,Z,fe){this._checkLoaded();var me=this.getLayer(V);me?me.minzoom===Z&&me.maxzoom===fe||(null!=Z&&(me.minzoom=Z),null!=fe&&(me.maxzoom=fe),this._updateLayer(me)):this.fire(new e.ErrorEvent(new Error("The layer '"+V+"' does not exist in the map's style and cannot have zoom extent.")))},N.prototype.setFilter=function(V,Z,fe){void 0===fe&&(fe={}),this._checkLoaded();var me=this.getLayer(V);if(me){if(!e.deepEqual(me.filter,Z))return null==Z?(me.filter=void 0,void this._updateLayer(me)):void(this._validate(e.validateStyle.filter,"layers."+me.id+".filter",Z,null,fe)||(me.filter=e.clone$1(Z),this._updateLayer(me)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+V+"' does not exist in the map's style and cannot be filtered.")))},N.prototype.getFilter=function(V){return e.clone$1(this.getLayer(V).filter)},N.prototype.setLayoutProperty=function(V,Z,fe,me){void 0===me&&(me={}),this._checkLoaded();var we=this.getLayer(V);we?e.deepEqual(we.getLayoutProperty(Z),fe)||(we.setLayoutProperty(Z,fe,me),this._updateLayer(we)):this.fire(new e.ErrorEvent(new Error("The layer '"+V+"' does not exist in the map's style and cannot be styled.")))},N.prototype.getLayoutProperty=function(V,Z){var fe=this.getLayer(V);if(fe)return fe.getLayoutProperty(Z);this.fire(new e.ErrorEvent(new Error("The layer '"+V+"' does not exist in the map's style.")))},N.prototype.setPaintProperty=function(V,Z,fe,me){void 0===me&&(me={}),this._checkLoaded();var we=this.getLayer(V);we?e.deepEqual(we.getPaintProperty(Z),fe)||(we.setPaintProperty(Z,fe,me)&&this._updateLayer(we),this._changed=!0,this._updatedPaintProps[V]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+V+"' does not exist in the map's style and cannot be styled.")))},N.prototype.getPaintProperty=function(V,Z){return this.getLayer(V).getPaintProperty(Z)},N.prototype.setFeatureState=function(V,Z){this._checkLoaded();var fe=V.source,me=V.sourceLayer,we=this.sourceCaches[fe];if(void 0!==we){var Ae=we.getSource().type;"geojson"===Ae&&me?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==Ae||me?(void 0===V.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),we.setFeatureState(me,V.id,Z)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+fe+"' does not exist in the map's style.")))},N.prototype.removeFeatureState=function(V,Z){this._checkLoaded();var fe=V.source,me=this.sourceCaches[fe];if(void 0!==me){var we=me.getSource().type,Ae="vector"===we?V.sourceLayer:void 0;"vector"!==we||Ae?Z&&"string"!=typeof V.id&&"number"!=typeof V.id?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):me.removeFeatureState(Ae,V.id,Z):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+fe+"' does not exist in the map's style.")))},N.prototype.getFeatureState=function(V){this._checkLoaded();var Z=V.source,fe=V.sourceLayer,me=this.sourceCaches[Z];if(void 0!==me){if("vector"!==me.getSource().type||fe)return void 0===V.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),me.getFeatureState(fe,V.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+Z+"' does not exist in the map's style.")))},N.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},N.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(V){return V.serialize()}),layers:this._serializeLayers(this._order)},function(V){return void 0!==V})},N.prototype._updateLayer=function(V){this._updatedLayers[V.id]=!0,V.source&&!this._updatedSources[V.source]&&"raster"!==this.sourceCaches[V.source].getSource().type&&(this._updatedSources[V.source]="reload",this.sourceCaches[V.source].pause()),this._changed=!0},N.prototype._flattenAndSortRenderedFeatures=function(V){for(var Z=this,fe=function(Er){return"fill-extrusion"===Z._layers[Er].type},me={},we=[],Ae=this._order.length-1;Ae>=0;Ae--){var Re=this._order[Ae];if(fe(Re)){me[Re]=Ae;for(var Xe=0,nt=V;Xe<nt.length;Xe+=1){var ht=nt[Xe][Re];if(ht)for(var Dt=0,Ot=ht;Dt<Ot.length;Dt+=1)we.push(Ot[Dt])}}}we.sort(function(Er,wr){return wr.intersectionZ-Er.intersectionZ});for(var Lt=[],St=this._order.length-1;St>=0;St--){var Gt=this._order[St];if(fe(Gt))for(var Vt=we.length-1;Vt>=0;Vt--){var Yt=we[Vt].feature;if(me[Yt.layer.id]<St)break;Lt.push(Yt),we.pop()}else for(var xn=0,En=V;xn<En.length;xn+=1){var jn=En[xn][Gt];if(jn)for(var Nn=0,hr=jn;Nn<hr.length;Nn+=1)Lt.push(hr[Nn].feature)}}return Lt},N.prototype.queryRenderedFeatures=function(V,Z,fe){Z&&Z.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",Z.filter,null,Z);var me={};if(Z&&Z.layers){if(!Array.isArray(Z.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var we=0,Ae=Z.layers;we<Ae.length;we+=1){var Re=Ae[we],Xe=this._layers[Re];if(!Xe)return this.fire(new e.ErrorEvent(new Error("The layer '"+Re+"' does not exist in the map's style and cannot be queried for features."))),[];me[Xe.source]=!0}}var nt=[];for(var ht in Z.availableImages=this._availableImages,this.sourceCaches)Z.layers&&!me[ht]||nt.push(G(this.sourceCaches[ht],this._layers,this._serializedLayers,V,Z,fe));return this.placement&&nt.push(function(Dt,Ot,It,Lt,St,Gt,Vt){for(var Yt={},xn=Gt.queryRenderedSymbols(Lt),En=[],jn=0,Nn=Object.keys(xn).map(Number);jn<Nn.length;jn+=1)En.push(Vt[Nn[jn]]);En.sort(ie);for(var dr=function(){var Li=wr[Er],ir=Li.featureIndex.lookupSymbolFeatures(xn[Li.bucketInstanceId],Ot,Li.bucketIndex,Li.sourceLayerIndex,St.filter,St.layers,St.availableImages,Dt);for(var jr in ir){var mi=Yt[jr]=Yt[jr]||[],fi=ir[jr];fi.sort(function(xi,Hi){var Bi=Li.featureSortOrder;if(Bi){var ra=Bi.indexOf(xi.featureIndex);return Bi.indexOf(Hi.featureIndex)-ra}return Hi.featureIndex-xi.featureIndex});for(var Mi=0,Ri=fi;Mi<Ri.length;Mi+=1)mi.push(Ri[Mi])}},Er=0,wr=En;Er<wr.length;Er+=1)dr();var Jr=function(Li){Yt[Li].forEach(function(ir){var jr=ir.feature,fi=It[Dt[Li].source].getFeatureState(jr.layer["source-layer"],jr.id);jr.source=jr.layer.source,jr.layer["source-layer"]&&(jr.sourceLayer=jr.layer["source-layer"]),jr.state=fi})};for(var pi in Yt)Jr(pi);return Yt}(this._layers,this._serializedLayers,this.sourceCaches,V,Z,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(nt)},N.prototype.querySourceFeatures=function(V,Z){Z&&Z.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",Z.filter,null,Z);var fe=this.sourceCaches[V];return fe?function(me,we){for(var Ae=me.getRenderableIds().map(function(Ot){return me.getTileByID(Ot)}),Re=[],Xe={},nt=0;nt<Ae.length;nt++){var ht=Ae[nt],Dt=ht.tileID.canonical.key;Xe[Dt]||(Xe[Dt]=!0,ht.querySourceFeatures(Re,we))}return Re}(fe,Z):[]},N.prototype.addSourceType=function(V,Z,fe){return N.getSourceType(V)?fe(new Error('A source type called "'+V+'" already exists.')):(N.setSourceType(V,Z),Z.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:V,url:Z.workerSourceURL},fe):fe(null,null))},N.prototype.getLight=function(){return this.light.getLight()},N.prototype.setLight=function(V,Z){void 0===Z&&(Z={}),this._checkLoaded();var fe=this.light.getLight(),me=!1;for(var we in V)if(!e.deepEqual(V[we],fe[we])){me=!0;break}if(me){var Ae={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(V,Z),this.light.updateTransitions(Ae)}},N.prototype._validate=function(V,Z,fe,me,we){return void 0===we&&(we={}),(!we||!1!==we.validate)&&pr(this,V.call(e.validateStyle,e.extend({key:Z,style:this.serialize(),value:fe,styleSpec:e.styleSpec},me)))},N.prototype._remove=function(){for(var V in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[V].setEventedParent(null);for(var Z in this.sourceCaches)this.sourceCaches[Z].clearTiles(),this.sourceCaches[Z].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},N.prototype._clearSource=function(V){this.sourceCaches[V].clearTiles()},N.prototype._reloadSource=function(V){this.sourceCaches[V].resume(),this.sourceCaches[V].reload()},N.prototype._updateSources=function(V){for(var Z in this.sourceCaches)this.sourceCaches[Z].update(V)},N.prototype._generateCollisionBoxes=function(){for(var V in this.sourceCaches)this._reloadSource(V)},N.prototype._updatePlacement=function(V,Z,fe,me,we){void 0===we&&(we=!1);for(var Ae=!1,Re=!1,Xe={},nt=0,ht=this._order;nt<ht.length;nt+=1){var Ot=this._layers[ht[nt]];if("symbol"===Ot.type){if(!Xe[Ot.source]){var It=this.sourceCaches[Ot.source];Xe[Ot.source]=It.getRenderableIds(!0).map(function(xn){return It.getTileByID(xn)}).sort(function(xn,En){return En.tileID.overscaledZ-xn.tileID.overscaledZ||(xn.tileID.isLessThan(En.tileID)?-1:1)})}var Lt=this.crossTileSymbolIndex.addLayer(Ot,Xe[Ot.source],V.center.lng);Ae=Ae||Lt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((we=we||this._layerOrderChanged||0===fe)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),V.zoom))&&(this.pauseablePlacement=new Cn(V,this._order,we,Z,fe,me,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Xe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Re=!0),Ae&&this.pauseablePlacement.placement.setStale()),Re||Ae)for(var St=0,Gt=this._order;St<Gt.length;St+=1){var Yt=this._layers[Gt[St]];"symbol"===Yt.type&&this.placement.updateLayerOpacities(Yt,Xe[Yt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},N.prototype._releaseSymbolFadeTiles=function(){for(var V in this.sourceCaches)this.sourceCaches[V].releaseSymbolFadeTiles()},N.prototype.getImages=function(V,Z,fe){this.imageManager.getImages(Z.icons,fe),this._updateTilesForChangedImages();var me=this.sourceCaches[Z.source];me&&me.setDependencies(Z.tileID.key,Z.type,Z.icons)},N.prototype.getGlyphs=function(V,Z,fe){this.glyphManager.getGlyphs(Z.stacks,fe)},N.prototype.getResource=function(V,Z,fe){return e.makeRequest(Z,fe)},N}(e.Evented);cr.getSourceType=function(P){return H[P]},cr.setSourceType=function(P,N){H[P]=N},cr.registerForPluginStateChange=e.registerForPluginStateChange;var Yr=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Qr=Oa("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),ci=Oa("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Wi=Oa("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Zi=Oa("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Nr=Oa("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),hi=Oa("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),bi=Oa("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ya=Oa("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ia=Oa("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Po=Oa("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),os=Oa("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Pa=Oa("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Fa=Oa("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),oa=Oa("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),wa=Oa("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),vs=Oa("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),jo=Oa("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Ki=Oa("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Uo=Oa("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ns=Oa("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ss=Oa("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Oo=Oa("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),za=Oa("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Co=Oa("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Cl=Oa("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),$s=Oa("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function Oa(P,N){var V=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Z={};return{fragmentSource:P=P.replace(V,function(fe,me,we,Ae,Re){return Z[Re]=!0,"define"===me?"\n#ifndef HAS_UNIFORM_u_"+Re+"\nvarying "+we+" "+Ae+" "+Re+";\n#else\nuniform "+we+" "+Ae+" u_"+Re+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Re+"\n    "+we+" "+Ae+" "+Re+" = u_"+Re+";\n#endif\n"}),vertexSource:N=N.replace(V,function(fe,me,we,Ae,Re){var Xe="float"===Ae?"vec2":"vec4",nt=Re.match(/color/)?"color":Xe;return Z[Re]?"define"===me?"\n#ifndef HAS_UNIFORM_u_"+Re+"\nuniform lowp float u_"+Re+"_t;\nattribute "+we+" "+Xe+" a_"+Re+";\nvarying "+we+" "+Ae+" "+Re+";\n#else\nuniform "+we+" "+Ae+" u_"+Re+";\n#endif\n":"vec4"===nt?"\n#ifndef HAS_UNIFORM_u_"+Re+"\n    "+Re+" = a_"+Re+";\n#else\n    "+we+" "+Ae+" "+Re+" = u_"+Re+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Re+"\n    "+Re+" = unpack_mix_"+nt+"(a_"+Re+", u_"+Re+"_t);\n#else\n    "+we+" "+Ae+" "+Re+" = u_"+Re+";\n#endif\n":"define"===me?"\n#ifndef HAS_UNIFORM_u_"+Re+"\nuniform lowp float u_"+Re+"_t;\nattribute "+we+" "+Xe+" a_"+Re+";\n#else\nuniform "+we+" "+Ae+" u_"+Re+";\n#endif\n":"vec4"===nt?"\n#ifndef HAS_UNIFORM_u_"+Re+"\n    "+we+" "+Ae+" "+Re+" = a_"+Re+";\n#else\n    "+we+" "+Ae+" "+Re+" = u_"+Re+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Re+"\n    "+we+" "+Ae+" "+Re+" = unpack_mix_"+nt+"(a_"+Re+", u_"+Re+"_t);\n#else\n    "+we+" "+Ae+" "+Re+" = u_"+Re+";\n#endif\n"})}}var ml=Object.freeze({__proto__:null,prelude:Qr,background:ci,backgroundPattern:Wi,circle:Zi,clippingMask:Nr,heatmap:hi,heatmapTexture:bi,collisionBox:ya,collisionCircle:Ia,debug:Po,fill:os,fillOutline:Pa,fillOutlinePattern:Fa,fillPattern:oa,fillExtrusion:wa,fillExtrusionPattern:vs,hillshadePrepare:jo,hillshade:Ki,line:Uo,lineGradient:ns,linePattern:ss,lineSDF:Oo,raster:za,symbolIcon:Co,symbolSDF:Cl,symbolTextAndIcon:$s}),Ks=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Ks.prototype.bind=function(P,N,V,Z,fe,me,we,Ae){this.context=P;for(var Re=this.boundPaintVertexBuffers.length!==Z.length,Xe=0;!Re&&Xe<Z.length;Xe++)this.boundPaintVertexBuffers[Xe]!==Z[Xe]&&(Re=!0);P.extVertexArrayObject&&this.vao&&this.boundProgram===N&&this.boundLayoutVertexBuffer===V&&!Re&&this.boundIndexBuffer===fe&&this.boundVertexOffset===me&&this.boundDynamicVertexBuffer===we&&this.boundDynamicVertexBuffer2===Ae?(P.bindVertexArrayOES.set(this.vao),we&&we.bind(),fe&&fe.dynamicDraw&&fe.bind(),Ae&&Ae.bind()):this.freshBind(N,V,Z,fe,me,we,Ae)},Ks.prototype.freshBind=function(P,N,V,Z,fe,me,we){var Ae,Re=P.numAttributes,Xe=this.context,nt=Xe.gl;if(Xe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Xe.extVertexArrayObject.createVertexArrayOES(),Xe.bindVertexArrayOES.set(this.vao),Ae=0,this.boundProgram=P,this.boundLayoutVertexBuffer=N,this.boundPaintVertexBuffers=V,this.boundIndexBuffer=Z,this.boundVertexOffset=fe,this.boundDynamicVertexBuffer=me,this.boundDynamicVertexBuffer2=we;else{Ae=Xe.currentNumAttributes||0;for(var ht=Re;ht<Ae;ht++)nt.disableVertexAttribArray(ht)}N.enableAttributes(nt,P);for(var Dt=0,Ot=V;Dt<Ot.length;Dt+=1)Ot[Dt].enableAttributes(nt,P);me&&me.enableAttributes(nt,P),we&&we.enableAttributes(nt,P),N.bind(),N.setVertexAttribPointers(nt,P,fe);for(var It=0,Lt=V;It<Lt.length;It+=1){var St=Lt[It];St.bind(),St.setVertexAttribPointers(nt,P,fe)}me&&(me.bind(),me.setVertexAttribPointers(nt,P,fe)),Z&&Z.bind(),we&&(we.bind(),we.setVertexAttribPointers(nt,P,fe)),Xe.currentNumAttributes=Re},Ks.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Dl=function(P,N,V,Z,fe){var me=P.gl;this.program=me.createProgram();var we=V?V.defines():[];fe&&we.push("#define OVERDRAW_INSPECTOR;");var Ae=we.concat(Qr.fragmentSource,N.fragmentSource).join("\n"),Re=we.concat(Qr.vertexSource,N.vertexSource).join("\n"),Xe=me.createShader(me.FRAGMENT_SHADER);if(me.isContextLost())this.failedToCreate=!0;else{me.shaderSource(Xe,Ae),me.compileShader(Xe),me.attachShader(this.program,Xe);var nt=me.createShader(me.VERTEX_SHADER);if(me.isContextLost())this.failedToCreate=!0;else{me.shaderSource(nt,Re),me.compileShader(nt),me.attachShader(this.program,nt);for(var ht=V?V.layoutAttributes:[],Dt=0;Dt<ht.length;Dt++)me.bindAttribLocation(this.program,Dt,ht[Dt].name);me.linkProgram(this.program),me.deleteShader(nt),me.deleteShader(Xe),this.numAttributes=me.getProgramParameter(this.program,me.ACTIVE_ATTRIBUTES),this.attributes={};for(var Ot={},It=0;It<this.numAttributes;It++){var Lt=me.getActiveAttrib(this.program,It);Lt&&(this.attributes[Lt.name]=me.getAttribLocation(this.program,Lt.name))}for(var St=me.getProgramParameter(this.program,me.ACTIVE_UNIFORMS),Gt=0;Gt<St;Gt++){var Vt=me.getActiveUniform(this.program,Gt);Vt&&(Ot[Vt.name]=me.getUniformLocation(this.program,Vt.name))}this.fixedUniforms=Z(P,Ot),this.binderUniforms=V?V.getUniforms(P,Ot):[]}}};function ys(P,N,V){var Z=1/Dr(V,1,N.transform.tileZoom),fe=Math.pow(2,V.tileID.overscaledZ),me=V.tileSize*Math.pow(2,N.transform.tileZoom)/fe,we=me*(V.tileID.canonical.x+V.tileID.wrap*fe),Ae=me*V.tileID.canonical.y;return{u_image:0,u_texsize:V.imageAtlasTexture.size,u_scale:[Z,P.fromScale,P.toScale],u_fade:P.t,u_pixel_coord_upper:[we>>16,Ae>>16],u_pixel_coord_lower:[65535&we,65535&Ae]}}Dl.prototype.draw=function(P,N,V,Z,fe,me,we,Ae,Re,Xe,nt,ht,Dt,Ot,It,Lt){var St,Gt=P.gl;if(!this.failedToCreate){for(var Vt in P.program.set(this.program),P.setDepthMode(V),P.setStencilMode(Z),P.setColorMode(fe),P.setCullFace(me),this.fixedUniforms)this.fixedUniforms[Vt].set(we[Vt]);Ot&&Ot.setUniforms(P,this.binderUniforms,ht,{zoom:Dt});for(var Yt=(St={},St[Gt.LINES]=2,St[Gt.TRIANGLES]=3,St[Gt.LINE_STRIP]=1,St)[N],xn=0,En=nt.get();xn<En.length;xn+=1){var jn=En[xn],Nn=jn.vaos||(jn.vaos={});(Nn[Ae]||(Nn[Ae]=new Ks)).bind(P,this,Re,Ot?Ot.getPaintVertexBuffers():[],Xe,jn.vertexOffset,It,Lt),Gt.drawElements(N,jn.primitiveLength*Yt,Gt.UNSIGNED_SHORT,jn.primitiveOffset*Yt*2)}}};var Ll=function(P,N,V,Z){var fe=N.style.light,me=fe.properties.get("position"),we=[me.x,me.y,me.z],Ae=e.create$1();"viewport"===fe.properties.get("anchor")&&e.fromRotation(Ae,-N.transform.angle),e.transformMat3(we,we,Ae);var Re=fe.properties.get("color");return{u_matrix:P,u_lightpos:we,u_lightintensity:fe.properties.get("intensity"),u_lightcolor:[Re.r,Re.g,Re.b],u_vertical_gradient:+V,u_opacity:Z}},Il=function(P,N,V,Z,fe,me,we){return e.extend(Ll(P,N,V,Z),ys(me,N,we),{u_height_factor:-Math.pow(2,fe.overscaledZ)/we.tileSize/8})},Ja=function(P){return{u_matrix:P}},uo=function(P,N,V,Z){return e.extend(Ja(P),ys(V,N,Z))},co=function(P,N){return{u_matrix:P,u_world:N}},$o=function(P,N,V,Z,fe){return e.extend(uo(P,N,V,Z),{u_world:fe})},rs=function(P,N,V,Z){var fe,me,we=P.transform;if("map"===Z.paint.get("circle-pitch-alignment")){var Ae=Dr(V,1,we.zoom);fe=!0,me=[Ae,Ae]}else fe=!1,me=we.pixelsToGLUnits;return{u_camera_to_center_distance:we.cameraToCenterDistance,u_scale_with_map:+("map"===Z.paint.get("circle-pitch-scale")),u_matrix:P.translatePosMatrix(N.posMatrix,V,Z.paint.get("circle-translate"),Z.paint.get("circle-translate-anchor")),u_pitch_with_map:+fe,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:me}},Vo=function(P,N,V){var Z=Dr(V,1,N.zoom),fe=Math.pow(2,N.zoom-V.tileID.overscaledZ),me=V.tileID.overscaleFactor();return{u_matrix:P,u_camera_to_center_distance:N.cameraToCenterDistance,u_pixels_to_tile_units:Z,u_extrude_scale:[N.pixelsToGLUnits[0]/(Z*fe),N.pixelsToGLUnits[1]/(Z*fe)],u_overscale_factor:me}},Ko=function(P,N,V){return{u_matrix:P,u_inv_matrix:N,u_camera_to_center_distance:V.cameraToCenterDistance,u_viewport_size:[V.width,V.height]}},ul=function(P,N,V){return void 0===V&&(V=1),{u_matrix:P,u_color:N,u_overlay:0,u_overlay_scale:V}},Ho=function(P){return{u_matrix:P}},Ms=function(P,N,V,Z){return{u_matrix:P,u_extrude_scale:Dr(N,1,V),u_intensity:Z}};function Cs(P,N){var V=Math.pow(2,N.canonical.z),Z=N.canonical.y;return[new e.MercatorCoordinate(0,Z/V).toLngLat().lat,new e.MercatorCoordinate(0,(Z+1)/V).toLngLat().lat]}var Qa=function(P,N,V){var Z=P.transform;return{u_matrix:pt(P,N,V),u_ratio:1/Dr(N,1,Z.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/Z.pixelsToGLUnits[0],1/Z.pixelsToGLUnits[1]]}},Sa=function(P,N,V){return e.extend(Qa(P,N,V),{u_image:0})},We=function(P,N,V,Z){var fe=P.transform,me=rt(N,fe);return{u_matrix:pt(P,N,V),u_texsize:N.imageAtlasTexture.size,u_ratio:1/Dr(N,1,fe.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[me,Z.fromScale,Z.toScale],u_fade:Z.t,u_units_to_pixels:[1/fe.pixelsToGLUnits[0],1/fe.pixelsToGLUnits[1]]}},Ge=function(P,N,V,Z,fe){var we=P.lineAtlas,Ae=rt(N,P.transform),Re="round"===V.layout.get("line-cap"),Xe=we.getDash(Z.from,Re),nt=we.getDash(Z.to,Re),ht=Xe.width*fe.fromScale,Dt=nt.width*fe.toScale;return e.extend(Qa(P,N,V),{u_patternscale_a:[Ae/ht,-Xe.height/2],u_patternscale_b:[Ae/Dt,-nt.height/2],u_sdfgamma:we.width/(256*Math.min(ht,Dt)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Xe.y,u_tex_y_b:nt.y,u_mix:fe.t})};function rt(P,N){return 1/Dr(P,1,N.tileZoom)}function pt(P,N,V){return P.translatePosMatrix(N.tileID.posMatrix,N,V.paint.get("line-translate"),V.paint.get("line-translate-anchor"))}var wt=function(P,N,V,Z,fe){return{u_matrix:P,u_tl_parent:N,u_scale_parent:V,u_buffer_scale:1,u_fade_t:Z.mix,u_opacity:Z.opacity*fe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:fe.paint.get("raster-brightness-min"),u_brightness_high:fe.paint.get("raster-brightness-max"),u_saturation_factor:(we=fe.paint.get("raster-saturation"),we>0?1-1/(1.001-we):-we),u_contrast_factor:(me=fe.paint.get("raster-contrast"),me>0?1/(1-me):1+me),u_spin_weights:_t(fe.paint.get("raster-hue-rotate"))};var me,we};function _t(P){P*=Math.PI/180;var N=Math.sin(P),V=Math.cos(P);return[(2*V+1)/3,(-Math.sqrt(3)*N-V+1)/3,(Math.sqrt(3)*N-V+1)/3]}var Pt,on=function(P,N,V,Z,fe,me,we,Ae,Re,Xe){var nt=fe.transform;return{u_is_size_zoom_constant:+("constant"===P||"source"===P),u_is_size_feature_constant:+("constant"===P||"camera"===P),u_size_t:N?N.uSizeT:0,u_size:N?N.uSize:0,u_camera_to_center_distance:nt.cameraToCenterDistance,u_pitch:nt.pitch/360*2*Math.PI,u_rotate_symbol:+V,u_aspect_ratio:nt.width/nt.height,u_fade_change:fe.options.fadeDuration?fe.symbolFadeChange:1,u_matrix:me,u_label_plane_matrix:we,u_coord_matrix:Ae,u_is_text:+Re,u_pitch_with_map:+Z,u_texsize:Xe,u_texture:0}},rn=function(P,N,V,Z,fe,me,we,Ae,Re,Xe,nt){var ht=fe.transform;return e.extend(on(P,N,V,Z,fe,me,we,Ae,Re,Xe),{u_gamma_scale:Z?Math.cos(ht._pitch)*ht.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+nt})},tn=function(P,N,V,Z,fe,me,we,Ae,Re,Xe){return e.extend(rn(P,N,V,Z,fe,me,we,Ae,!0,Re,!0),{u_texsize_icon:Xe,u_texture_icon:1})},yn=function(P,N,V){return{u_matrix:P,u_opacity:N,u_color:V}},mn=function(P,N,V,Z,fe,me){return e.extend((Ae=me,Xe=fe,nt=(Re=V).imageManager.getPattern((we=Z).from.toString()),ht=Re.imageManager.getPattern(we.to.toString()),Ot=(Dt=Re.imageManager.getPixelSize()).width,It=Dt.height,Lt=Math.pow(2,Xe.tileID.overscaledZ),Gt=(St=Xe.tileSize*Math.pow(2,Re.transform.tileZoom)/Lt)*(Xe.tileID.canonical.x+Xe.tileID.wrap*Lt),Vt=St*Xe.tileID.canonical.y,{u_image:0,u_pattern_tl_a:nt.tl,u_pattern_br_a:nt.br,u_pattern_tl_b:ht.tl,u_pattern_br_b:ht.br,u_texsize:[Ot,It],u_mix:Ae.t,u_pattern_size_a:nt.displaySize,u_pattern_size_b:ht.displaySize,u_scale_a:Ae.fromScale,u_scale_b:Ae.toScale,u_tile_units_to_pixels:1/Dr(Xe,1,Re.transform.tileZoom),u_pixel_coord_upper:[Gt>>16,Vt>>16],u_pixel_coord_lower:[65535&Gt,65535&Vt]}),{u_matrix:P,u_opacity:N});var we,Ae,Re,Xe,nt,ht,Dt,Ot,It,Lt,St,Gt,Vt},Ln={fillExtrusion:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_lightpos:new e.Uniform3f(P,N.u_lightpos),u_lightintensity:new e.Uniform1f(P,N.u_lightintensity),u_lightcolor:new e.Uniform3f(P,N.u_lightcolor),u_vertical_gradient:new e.Uniform1f(P,N.u_vertical_gradient),u_opacity:new e.Uniform1f(P,N.u_opacity)}},fillExtrusionPattern:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_lightpos:new e.Uniform3f(P,N.u_lightpos),u_lightintensity:new e.Uniform1f(P,N.u_lightintensity),u_lightcolor:new e.Uniform3f(P,N.u_lightcolor),u_vertical_gradient:new e.Uniform1f(P,N.u_vertical_gradient),u_height_factor:new e.Uniform1f(P,N.u_height_factor),u_image:new e.Uniform1i(P,N.u_image),u_texsize:new e.Uniform2f(P,N.u_texsize),u_pixel_coord_upper:new e.Uniform2f(P,N.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(P,N.u_pixel_coord_lower),u_scale:new e.Uniform3f(P,N.u_scale),u_fade:new e.Uniform1f(P,N.u_fade),u_opacity:new e.Uniform1f(P,N.u_opacity)}},fill:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix)}},fillPattern:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_image:new e.Uniform1i(P,N.u_image),u_texsize:new e.Uniform2f(P,N.u_texsize),u_pixel_coord_upper:new e.Uniform2f(P,N.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(P,N.u_pixel_coord_lower),u_scale:new e.Uniform3f(P,N.u_scale),u_fade:new e.Uniform1f(P,N.u_fade)}},fillOutline:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_world:new e.Uniform2f(P,N.u_world)}},fillOutlinePattern:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_world:new e.Uniform2f(P,N.u_world),u_image:new e.Uniform1i(P,N.u_image),u_texsize:new e.Uniform2f(P,N.u_texsize),u_pixel_coord_upper:new e.Uniform2f(P,N.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(P,N.u_pixel_coord_lower),u_scale:new e.Uniform3f(P,N.u_scale),u_fade:new e.Uniform1f(P,N.u_fade)}},circle:function(P,N){return{u_camera_to_center_distance:new e.Uniform1f(P,N.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(P,N.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(P,N.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(P,N.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(P,N.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(P,N.u_matrix)}},collisionBox:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_camera_to_center_distance:new e.Uniform1f(P,N.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(P,N.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(P,N.u_extrude_scale),u_overscale_factor:new e.Uniform1f(P,N.u_overscale_factor)}},collisionCircle:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_inv_matrix:new e.UniformMatrix4f(P,N.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(P,N.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(P,N.u_viewport_size)}},debug:function(P,N){return{u_color:new e.UniformColor(P,N.u_color),u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_overlay:new e.Uniform1i(P,N.u_overlay),u_overlay_scale:new e.Uniform1f(P,N.u_overlay_scale)}},clippingMask:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix)}},heatmap:function(P,N){return{u_extrude_scale:new e.Uniform1f(P,N.u_extrude_scale),u_intensity:new e.Uniform1f(P,N.u_intensity),u_matrix:new e.UniformMatrix4f(P,N.u_matrix)}},heatmapTexture:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_world:new e.Uniform2f(P,N.u_world),u_image:new e.Uniform1i(P,N.u_image),u_color_ramp:new e.Uniform1i(P,N.u_color_ramp),u_opacity:new e.Uniform1f(P,N.u_opacity)}},hillshade:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_image:new e.Uniform1i(P,N.u_image),u_latrange:new e.Uniform2f(P,N.u_latrange),u_light:new e.Uniform2f(P,N.u_light),u_shadow:new e.UniformColor(P,N.u_shadow),u_highlight:new e.UniformColor(P,N.u_highlight),u_accent:new e.UniformColor(P,N.u_accent)}},hillshadePrepare:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_image:new e.Uniform1i(P,N.u_image),u_dimension:new e.Uniform2f(P,N.u_dimension),u_zoom:new e.Uniform1f(P,N.u_zoom),u_maxzoom:new e.Uniform1f(P,N.u_maxzoom),u_unpack:new e.Uniform4f(P,N.u_unpack)}},line:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_ratio:new e.Uniform1f(P,N.u_ratio),u_device_pixel_ratio:new e.Uniform1f(P,N.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(P,N.u_units_to_pixels)}},lineGradient:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_ratio:new e.Uniform1f(P,N.u_ratio),u_device_pixel_ratio:new e.Uniform1f(P,N.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(P,N.u_units_to_pixels),u_image:new e.Uniform1i(P,N.u_image)}},linePattern:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_texsize:new e.Uniform2f(P,N.u_texsize),u_ratio:new e.Uniform1f(P,N.u_ratio),u_device_pixel_ratio:new e.Uniform1f(P,N.u_device_pixel_ratio),u_image:new e.Uniform1i(P,N.u_image),u_units_to_pixels:new e.Uniform2f(P,N.u_units_to_pixels),u_scale:new e.Uniform3f(P,N.u_scale),u_fade:new e.Uniform1f(P,N.u_fade)}},lineSDF:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_ratio:new e.Uniform1f(P,N.u_ratio),u_device_pixel_ratio:new e.Uniform1f(P,N.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(P,N.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(P,N.u_patternscale_a),u_patternscale_b:new e.Uniform2f(P,N.u_patternscale_b),u_sdfgamma:new e.Uniform1f(P,N.u_sdfgamma),u_image:new e.Uniform1i(P,N.u_image),u_tex_y_a:new e.Uniform1f(P,N.u_tex_y_a),u_tex_y_b:new e.Uniform1f(P,N.u_tex_y_b),u_mix:new e.Uniform1f(P,N.u_mix)}},raster:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_tl_parent:new e.Uniform2f(P,N.u_tl_parent),u_scale_parent:new e.Uniform1f(P,N.u_scale_parent),u_buffer_scale:new e.Uniform1f(P,N.u_buffer_scale),u_fade_t:new e.Uniform1f(P,N.u_fade_t),u_opacity:new e.Uniform1f(P,N.u_opacity),u_image0:new e.Uniform1i(P,N.u_image0),u_image1:new e.Uniform1i(P,N.u_image1),u_brightness_low:new e.Uniform1f(P,N.u_brightness_low),u_brightness_high:new e.Uniform1f(P,N.u_brightness_high),u_saturation_factor:new e.Uniform1f(P,N.u_saturation_factor),u_contrast_factor:new e.Uniform1f(P,N.u_contrast_factor),u_spin_weights:new e.Uniform3f(P,N.u_spin_weights)}},symbolIcon:function(P,N){return{u_is_size_zoom_constant:new e.Uniform1i(P,N.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(P,N.u_is_size_feature_constant),u_size_t:new e.Uniform1f(P,N.u_size_t),u_size:new e.Uniform1f(P,N.u_size),u_camera_to_center_distance:new e.Uniform1f(P,N.u_camera_to_center_distance),u_pitch:new e.Uniform1f(P,N.u_pitch),u_rotate_symbol:new e.Uniform1i(P,N.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(P,N.u_aspect_ratio),u_fade_change:new e.Uniform1f(P,N.u_fade_change),u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(P,N.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(P,N.u_coord_matrix),u_is_text:new e.Uniform1i(P,N.u_is_text),u_pitch_with_map:new e.Uniform1i(P,N.u_pitch_with_map),u_texsize:new e.Uniform2f(P,N.u_texsize),u_texture:new e.Uniform1i(P,N.u_texture)}},symbolSDF:function(P,N){return{u_is_size_zoom_constant:new e.Uniform1i(P,N.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(P,N.u_is_size_feature_constant),u_size_t:new e.Uniform1f(P,N.u_size_t),u_size:new e.Uniform1f(P,N.u_size),u_camera_to_center_distance:new e.Uniform1f(P,N.u_camera_to_center_distance),u_pitch:new e.Uniform1f(P,N.u_pitch),u_rotate_symbol:new e.Uniform1i(P,N.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(P,N.u_aspect_ratio),u_fade_change:new e.Uniform1f(P,N.u_fade_change),u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(P,N.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(P,N.u_coord_matrix),u_is_text:new e.Uniform1i(P,N.u_is_text),u_pitch_with_map:new e.Uniform1i(P,N.u_pitch_with_map),u_texsize:new e.Uniform2f(P,N.u_texsize),u_texture:new e.Uniform1i(P,N.u_texture),u_gamma_scale:new e.Uniform1f(P,N.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(P,N.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(P,N.u_is_halo)}},symbolTextAndIcon:function(P,N){return{u_is_size_zoom_constant:new e.Uniform1i(P,N.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(P,N.u_is_size_feature_constant),u_size_t:new e.Uniform1f(P,N.u_size_t),u_size:new e.Uniform1f(P,N.u_size),u_camera_to_center_distance:new e.Uniform1f(P,N.u_camera_to_center_distance),u_pitch:new e.Uniform1f(P,N.u_pitch),u_rotate_symbol:new e.Uniform1i(P,N.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(P,N.u_aspect_ratio),u_fade_change:new e.Uniform1f(P,N.u_fade_change),u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(P,N.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(P,N.u_coord_matrix),u_is_text:new e.Uniform1i(P,N.u_is_text),u_pitch_with_map:new e.Uniform1i(P,N.u_pitch_with_map),u_texsize:new e.Uniform2f(P,N.u_texsize),u_texsize_icon:new e.Uniform2f(P,N.u_texsize_icon),u_texture:new e.Uniform1i(P,N.u_texture),u_texture_icon:new e.Uniform1i(P,N.u_texture_icon),u_gamma_scale:new e.Uniform1f(P,N.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(P,N.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(P,N.u_is_halo)}},background:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_opacity:new e.Uniform1f(P,N.u_opacity),u_color:new e.UniformColor(P,N.u_color)}},backgroundPattern:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_opacity:new e.Uniform1f(P,N.u_opacity),u_image:new e.Uniform1i(P,N.u_image),u_pattern_tl_a:new e.Uniform2f(P,N.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(P,N.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(P,N.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(P,N.u_pattern_br_b),u_texsize:new e.Uniform2f(P,N.u_texsize),u_mix:new e.Uniform1f(P,N.u_mix),u_pattern_size_a:new e.Uniform2f(P,N.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(P,N.u_pattern_size_b),u_scale_a:new e.Uniform1f(P,N.u_scale_a),u_scale_b:new e.Uniform1f(P,N.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(P,N.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(P,N.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(P,N.u_tile_units_to_pixels)}}};function In(P,N,V,Z,fe,me,we){for(var Ae=P.context,Re=Ae.gl,Xe=P.useProgram("collisionBox"),nt=[],ht=0,Dt=0,Ot=0;Ot<Z.length;Ot++){var It=Z[Ot],Lt=N.getTile(It),St=Lt.getBucket(V);if(St){var Gt=It.posMatrix;0===fe[0]&&0===fe[1]||(Gt=P.translatePosMatrix(It.posMatrix,Lt,fe,me));var Vt=we?St.textCollisionBox:St.iconCollisionBox,Yt=St.collisionCircleArray;if(Yt.length>0){var xn=e.create(),En=Gt;e.mul(xn,St.placementInvProjMatrix,P.transform.glCoordMatrix),e.mul(xn,xn,St.placementViewportMatrix),nt.push({circleArray:Yt,circleOffset:Dt,transform:En,invTransform:xn}),Dt=ht+=Yt.length/4}Vt&&Xe.draw(Ae,Re.LINES,nn.disabled,Me.disabled,P.colorModeForRenderPass(),Se.disabled,Vo(Gt,P.transform,Lt),V.id,Vt.layoutVertexBuffer,Vt.indexBuffer,Vt.segments,null,P.transform.zoom,null,null,Vt.collisionVertexBuffer)}}if(we&&nt.length){var jn=P.useProgram("collisionCircle"),Nn=new e.StructArrayLayout2f1f2i16;Nn.resize(4*ht),Nn._trim();for(var hr=0,dr=0,Er=nt;dr<Er.length;dr+=1)for(var wr=Er[dr],Jr=0;Jr<wr.circleArray.length/4;Jr++){var pi=4*Jr,Li=wr.circleArray[pi+0],ir=wr.circleArray[pi+1],jr=wr.circleArray[pi+2],mi=wr.circleArray[pi+3];Nn.emplace(hr++,Li,ir,jr,mi,0),Nn.emplace(hr++,Li,ir,jr,mi,1),Nn.emplace(hr++,Li,ir,jr,mi,2),Nn.emplace(hr++,Li,ir,jr,mi,3)}(!Pt||Pt.length<2*ht)&&(Pt=function(Bi){var ra=2*Bi,qi=new e.StructArrayLayout3ui6;qi.resize(ra),qi._trim();for(var aa=0;aa<ra;aa++){var ha=6*aa;qi.uint16[ha+0]=4*aa+0,qi.uint16[ha+1]=4*aa+1,qi.uint16[ha+2]=4*aa+2,qi.uint16[ha+3]=4*aa+2,qi.uint16[ha+4]=4*aa+3,qi.uint16[ha+5]=4*aa+0}return qi}(ht));for(var fi=Ae.createIndexBuffer(Pt,!0),Mi=Ae.createVertexBuffer(Nn,e.collisionCircleLayout.members,!0),Ri=0,ta=nt;Ri<ta.length;Ri+=1){var xi=ta[Ri],Hi=Ko(xi.transform,xi.invTransform,P.transform);jn.draw(Ae,Re.TRIANGLES,nn.disabled,Me.disabled,P.colorModeForRenderPass(),Se.disabled,Hi,V.id,Mi,fi,e.SegmentVector.simpleSegment(0,2*xi.circleOffset,xi.circleArray.length,xi.circleArray.length/2),null,P.transform.zoom,null,null,null)}Mi.destroy(),fi.destroy()}}var Zn=e.identity(new Float32Array(16));function mr(P,N,V,Z,fe,me){var we=e.getAnchorAlignment(P),Ae=-(we.horizontalAlign-.5)*N,Re=-(we.verticalAlign-.5)*V,Xe=e.evaluateVariableOffset(P,Z);return new e.Point((Ae/fe+Xe[0])*me,(Re/fe+Xe[1])*me)}function xr(P,N,V,Z,fe,me,we,Ae,Re,Xe,nt){var ht=P.text.placedSymbolArray,Dt=P.text.dynamicLayoutVertexArray,Ot=P.icon.dynamicLayoutVertexArray,It={};Dt.clear();for(var Lt=0;Lt<ht.length;Lt++){var St=ht.get(Lt),Vt=St.hidden||!St.crossTileID||P.allowVerticalPlacement&&!St.placedOrientation?null:Z[St.crossTileID];if(Vt){var Yt=new e.Point(St.anchorX,St.anchorY),xn=sn(Yt,V?Ae:we),En=vn(me.cameraToCenterDistance,xn.signedDistanceFromCamera),jn=fe.evaluateSizeForFeature(P.textSizeData,Xe,St)*En/e.ONE_EM;V&&(jn*=P.tilePixelRatio/Re);for(var dr=mr(Vt.anchor,Vt.width,Vt.height,Vt.textOffset,Vt.textBoxScale,jn),Er=V?sn(Yt.add(dr),we).point:xn.point.add(N?dr.rotate(-me.angle):dr),wr=P.allowVerticalPlacement&&St.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Jr=0;Jr<St.numGlyphs;Jr++)e.addDynamicAttributes(Dt,Er,wr);nt&&St.associatedIconIndex>=0&&(It[St.associatedIconIndex]={shiftedAnchor:Er,angle:wr})}else Or(St.numGlyphs,Dt)}if(nt){Ot.clear();for(var pi=P.icon.placedSymbolArray,Li=0;Li<pi.length;Li++){var ir=pi.get(Li);if(ir.hidden)Or(ir.numGlyphs,Ot);else{var jr=It[Li];if(jr)for(var mi=0;mi<ir.numGlyphs;mi++)e.addDynamicAttributes(Ot,jr.shiftedAnchor,jr.angle);else Or(ir.numGlyphs,Ot)}}P.icon.dynamicLayoutVertexBuffer.updateData(Ot)}P.text.dynamicLayoutVertexBuffer.updateData(Dt)}function Wr(P,N,V){return V.iconsInText&&N?"symbolTextAndIcon":P?"symbolSDF":"symbolIcon"}function Kr(P,N,V,Z,fe,me,we,Ae,Re,Xe,nt,ht){for(var Dt=P.context,Ot=Dt.gl,It=P.transform,Lt="map"===Ae,St="map"===Re,Gt=Lt&&"point"!==V.layout.get("symbol-placement"),Vt=Lt&&!St&&!Gt,Yt=void 0!==V.layout.get("symbol-sort-key").constantOr(1),xn=P.depthModeForSublayer(0,nn.ReadOnly),En=V.layout.get("text-variable-anchor"),jn=[],Nn=0,hr=Z;Nn<hr.length;Nn+=1){var dr=hr[Nn],Er=N.getTile(dr),wr=Er.getBucket(V);if(wr){var Jr=fe?wr.text:wr.icon;if(Jr&&Jr.segments.get().length){var pi=Jr.programConfigurations.get(V.id),Li=fe||wr.sdfIcons,ir=fe?wr.textSizeData:wr.iconSizeData,jr=St||0!==It.pitch,mi=P.useProgram(Wr(Li,fe,wr),pi),fi=e.evaluateSizeForZoom(ir,It.zoom),Mi=void 0,Ri=[0,0],ta=void 0,xi=void 0,Hi=null,Bi=void 0;if(fe)ta=Er.glyphAtlasTexture,xi=Ot.LINEAR,Mi=Er.glyphAtlasTexture.size,wr.iconsInText&&(Ri=Er.imageAtlasTexture.size,Hi=Er.imageAtlasTexture,Bi=jr||P.options.rotating||P.options.zooming||"composite"===ir.kind||"camera"===ir.kind?Ot.LINEAR:Ot.NEAREST);else{var qi=1!==V.layout.get("icon-size").constantOr(0)||wr.iconsNeedLinear;ta=Er.imageAtlasTexture,xi=Li||P.options.rotating||P.options.zooming||qi||jr?Ot.LINEAR:Ot.NEAREST,Mi=Er.imageAtlasTexture.size}var aa=Dr(Er,1,P.transform.zoom),ha=qn(dr.posMatrix,St,Lt,P.transform,aa),ho=gn(dr.posMatrix,St,Lt,P.transform,aa),oo=En&&wr.hasTextData(),bo="none"!==V.layout.get("icon-text-fit")&&oo&&wr.hasIconData();Gt&&Mn(wr,dr.posMatrix,P,fe,ha,ho,St,Xe);var Ya=P.translatePosMatrix(dr.posMatrix,Er,me,we),Lo=Gt||fe&&En||bo?Zn:ha,po=P.translatePosMatrix(ho,Er,me,we,!0),ds=Li&&0!==V.paint.get(fe?"text-halo-width":"icon-halo-width").constantOr(1),Zo={program:mi,buffers:Jr,uniformValues:Li?wr.iconsInText?tn(ir.kind,fi,Vt,St,P,Ya,Lo,po,Mi,Ri):rn(ir.kind,fi,Vt,St,P,Ya,Lo,po,fe,Mi,!0):on(ir.kind,fi,Vt,St,P,Ya,Lo,po,fe,Mi),atlasTexture:ta,atlasTextureIcon:Hi,atlasInterpolation:xi,atlasInterpolationIcon:Bi,isSDF:Li,hasHalo:ds};if(Yt)for(var Ns=0,tl=Jr.segments.get();Ns<tl.length;Ns+=1){var Ol=tl[Ns];jn.push({segments:new e.SegmentVector([Ol]),sortKey:Ol.sortKey,state:Zo})}else jn.push({segments:Jr.segments,sortKey:0,state:Zo})}}}Yt&&jn.sort(function(Lu,nl){return Lu.sortKey-nl.sortKey});for(var vu=0,ql=jn;vu<ql.length;vu+=1){var Gl=ql[vu],xs=Gl.state;if(Dt.activeTexture.set(Ot.TEXTURE0),xs.atlasTexture.bind(xs.atlasInterpolation,Ot.CLAMP_TO_EDGE),xs.atlasTextureIcon&&(Dt.activeTexture.set(Ot.TEXTURE1),xs.atlasTextureIcon&&xs.atlasTextureIcon.bind(xs.atlasInterpolationIcon,Ot.CLAMP_TO_EDGE)),xs.isSDF){var nu=xs.uniformValues;xs.hasHalo&&(nu.u_is_halo=1,ei(xs.buffers,Gl.segments,V,P,xs.program,xn,nt,ht,nu)),nu.u_is_halo=0}ei(xs.buffers,Gl.segments,V,P,xs.program,xn,nt,ht,xs.uniformValues)}}function ei(P,N,V,Z,fe,me,we,Ae,Re){var Xe=Z.context;fe.draw(Xe,Xe.gl.TRIANGLES,me,we,Ae,Se.disabled,Re,V.id,P.layoutVertexBuffer,P.indexBuffer,N,V.paint,Z.transform.zoom,P.programConfigurations.get(V.id),P.dynamicLayoutVertexBuffer,P.opacityVertexBuffer)}function Ur(P,N,V,Z,fe,me,we){var Ae,Re,Xe,nt,ht,Dt=P.context.gl,Ot=V.paint.get("fill-pattern"),It=Ot&&Ot.constantOr(1),Lt=V.getCrossfadeParameters();we?(Re=It&&!V.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ae=Dt.LINES):(Re=It?"fillPattern":"fill",Ae=Dt.TRIANGLES);for(var St=0,Gt=Z;St<Gt.length;St+=1){var Vt=Gt[St],Yt=N.getTile(Vt);if(!It||Yt.patternsLoaded()){var xn=Yt.getBucket(V);if(xn){var En=xn.programConfigurations.get(V.id),jn=P.useProgram(Re,En);It&&(P.context.activeTexture.set(Dt.TEXTURE0),Yt.imageAtlasTexture.bind(Dt.LINEAR,Dt.CLAMP_TO_EDGE),En.updatePaintBuffers(Lt));var Nn=Ot.constantOr(null);if(Nn&&Yt.imageAtlas){var hr=Yt.imageAtlas,dr=hr.patternPositions[Nn.to.toString()],Er=hr.patternPositions[Nn.from.toString()];dr&&Er&&En.setConstantPatternPositions(dr,Er)}var wr=P.translatePosMatrix(Vt.posMatrix,Yt,V.paint.get("fill-translate"),V.paint.get("fill-translate-anchor"));if(we){nt=xn.indexBuffer2,ht=xn.segments2;var Jr=[Dt.drawingBufferWidth,Dt.drawingBufferHeight];Xe="fillOutlinePattern"===Re&&It?$o(wr,P,Lt,Yt,Jr):co(wr,Jr)}else nt=xn.indexBuffer,ht=xn.segments,Xe=It?uo(wr,P,Lt,Yt):Ja(wr);jn.draw(P.context,Ae,fe,P.stencilModeForClipping(Vt),me,Se.disabled,Xe,V.id,xn.layoutVertexBuffer,nt,ht,V.paint,P.transform.zoom,En)}}}}function zi(P,N,V,Z,fe,me,we){for(var Ae=P.context,Re=Ae.gl,Xe=V.paint.get("fill-extrusion-pattern"),nt=Xe.constantOr(1),ht=V.getCrossfadeParameters(),Dt=V.paint.get("fill-extrusion-opacity"),Ot=0,It=Z;Ot<It.length;Ot+=1){var Lt=It[Ot],St=N.getTile(Lt),Gt=St.getBucket(V);if(Gt){var Vt=Gt.programConfigurations.get(V.id),Yt=P.useProgram(nt?"fillExtrusionPattern":"fillExtrusion",Vt);nt&&(P.context.activeTexture.set(Re.TEXTURE0),St.imageAtlasTexture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),Vt.updatePaintBuffers(ht));var xn=Xe.constantOr(null);if(xn&&St.imageAtlas){var En=St.imageAtlas,jn=En.patternPositions[xn.to.toString()],Nn=En.patternPositions[xn.from.toString()];jn&&Nn&&Vt.setConstantPatternPositions(jn,Nn)}var hr=P.translatePosMatrix(Lt.posMatrix,St,V.paint.get("fill-extrusion-translate"),V.paint.get("fill-extrusion-translate-anchor")),dr=V.paint.get("fill-extrusion-vertical-gradient"),Er=nt?Il(hr,P,dr,Dt,Lt,ht,St):Ll(hr,P,dr,Dt);Yt.draw(Ae,Ae.gl.TRIANGLES,fe,me,we,Se.backCCW,Er,V.id,Gt.layoutVertexBuffer,Gt.indexBuffer,Gt.segments,V.paint,P.transform.zoom,Vt)}}}function Xi(P,N,V,Z,fe,me){var we=P.context,Ae=we.gl,Re=N.fbo;if(Re){var Xe=P.useProgram("hillshade");we.activeTexture.set(Ae.TEXTURE0),Ae.bindTexture(Ae.TEXTURE_2D,Re.colorAttachment.get());var nt=function(ht,Dt,Ot){var It=Ot.paint.get("hillshade-shadow-color"),Lt=Ot.paint.get("hillshade-highlight-color"),St=Ot.paint.get("hillshade-accent-color"),Gt=Ot.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ot.paint.get("hillshade-illumination-anchor")&&(Gt-=ht.transform.angle);var Vt=!ht.options.moving;return{u_matrix:ht.transform.calculatePosMatrix(Dt.tileID.toUnwrapped(),Vt),u_image:0,u_latrange:Cs(0,Dt.tileID),u_light:[Ot.paint.get("hillshade-exaggeration"),Gt],u_shadow:It,u_highlight:Lt,u_accent:St}}(P,N,V);Xe.draw(we,Ae.TRIANGLES,Z,fe,me,Se.disabled,nt,V.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments)}}function na(P,N,V,Z,fe,me,we){var St,Gt,Vt,Yt,xn,Ae=P.context,Re=Ae.gl,Xe=N.dem;if(Xe&&Xe.data){var nt=Xe.dim,ht=Xe.stride,Dt=Xe.getPixels();if(Ae.activeTexture.set(Re.TEXTURE1),Ae.pixelStoreUnpackPremultiplyAlpha.set(!1),N.demTexture=N.demTexture||P.getTileTexture(ht),N.demTexture){var Ot=N.demTexture;Ot.update(Dt,{premultiply:!1}),Ot.bind(Re.NEAREST,Re.CLAMP_TO_EDGE)}else N.demTexture=new e.Texture(Ae,Dt,Re.RGBA,{premultiply:!1}),N.demTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE);Ae.activeTexture.set(Re.TEXTURE0);var It=N.fbo;if(!It){var Lt=new e.Texture(Ae,{width:nt,height:nt,data:null},Re.RGBA);Lt.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),(It=N.fbo=Ae.createFramebuffer(nt,nt,!0)).colorAttachment.set(Lt.texture)}Ae.bindFramebuffer.set(It.framebuffer),Ae.viewport.set([0,0,nt,nt]),P.useProgram("hillshadePrepare").draw(Ae,Re.TRIANGLES,fe,me,we,Se.disabled,(St=N.tileID,Vt=Z,Yt=(Gt=Xe).stride,xn=e.create(),e.ortho(xn,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(xn,xn,[0,-e.EXTENT,0]),{u_matrix:xn,u_image:1,u_dimension:[Yt,Yt],u_zoom:St.overscaledZ,u_maxzoom:Vt,u_unpack:Gt.getUnpackVector()}),V.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments),N.needsHillshadePrepare=!1}}function Ji(P,N,V,Z,fe){var me=Z.paint.get("raster-fade-duration");if(me>0){var we=e.browser.now(),Ae=(we-P.timeAdded)/me,Re=N?(we-N.timeAdded)/me:-1,Xe=V.getSource(),nt=fe.coveringZoomLevel({tileSize:Xe.tileSize,roundZoom:Xe.roundZoom}),ht=!N||Math.abs(N.tileID.overscaledZ-nt)>Math.abs(P.tileID.overscaledZ-nt),Dt=ht&&P.refreshedUponExpiration?1:e.clamp(ht?Ae:1-Re,0,1);return P.refreshedUponExpiration&&Ae>=1&&(P.refreshedUponExpiration=!1),N?{opacity:1,mix:1-Dt}:{opacity:Dt,mix:0}}return{opacity:1,mix:0}}var Ta=new e.Color(1,0,0,1),fo=new e.Color(0,1,0,1),ao=new e.Color(0,0,1,1),xa=new e.Color(1,0,1,1),Ga=new e.Color(0,1,1,1);function qo(P,N,V,Z){ls(P,0,N+V/2,P.transform.width,V,Z)}function is(P,N,V,Z){ls(P,N-V/2,0,V,P.transform.height,Z)}function ls(P,N,V,Z,fe,me){var we=P.context,Ae=we.gl;Ae.enable(Ae.SCISSOR_TEST),Ae.scissor(N*e.browser.devicePixelRatio,V*e.browser.devicePixelRatio,Z*e.browser.devicePixelRatio,fe*e.browser.devicePixelRatio),we.clear({color:me}),Ae.disable(Ae.SCISSOR_TEST)}function us(P,N,V){var Z=P.context,fe=Z.gl,me=V.posMatrix,we=P.useProgram("debug"),Ae=nn.disabled,Re=Me.disabled,Xe=P.colorModeForRenderPass();Z.activeTexture.set(fe.TEXTURE0),P.emptyTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),we.draw(Z,fe.LINE_STRIP,Ae,Re,Xe,Se.disabled,ul(me,e.Color.red),"$debug",P.debugBuffer,P.tileBorderIndexBuffer,P.debugSegments);var nt=N.getTileByID(V.key).latestRawTileData,Dt=Math.floor((nt&&nt.byteLength||0)/1024),Ot=N.getTile(V).tileSize,It=512/Math.min(Ot,512)*(V.overscaledZ/P.transform.zoom)*.5,Lt=V.canonical.toString();V.overscaledZ!==V.canonical.z&&(Lt+=" => "+V.overscaledZ),function(St,Gt){St.initDebugOverlayCanvas();var Vt=St.debugOverlayCanvas,Yt=St.context.gl,xn=St.debugOverlayCanvas.getContext("2d");xn.clearRect(0,0,Vt.width,Vt.height),xn.shadowColor="white",xn.shadowBlur=2,xn.lineWidth=1.5,xn.strokeStyle="white",xn.textBaseline="top",xn.font="bold 36px Open Sans, sans-serif",xn.fillText(Gt,5,5),xn.strokeText(Gt,5,5),St.debugOverlayTexture.update(Vt),St.debugOverlayTexture.bind(Yt.LINEAR,Yt.CLAMP_TO_EDGE)}(P,Lt+" "+Dt+"kb"),we.draw(Z,fe.TRIANGLES,Ae,Re,Ee.alphaBlended,Se.disabled,ul(me,e.Color.transparent,It),"$debug",P.debugBuffer,P.quadTriangleIndexBuffer,P.debugSegments)}var cs={symbol:function(P,N,V,Z,fe){if("translucent"===P.renderPass){var me=Me.disabled,we=P.colorModeForRenderPass();V.layout.get("text-variable-anchor")&&function(Ae,Re,Xe,nt,ht,Dt,Ot){for(var It=Re.transform,Lt="map"===ht,St="map"===Dt,Gt=0,Vt=Ae;Gt<Vt.length;Gt+=1){var Yt=Vt[Gt],xn=nt.getTile(Yt),En=xn.getBucket(Xe);if(En&&En.text&&En.text.segments.get().length){var Nn=e.evaluateSizeForZoom(En.textSizeData,It.zoom),hr=Dr(xn,1,Re.transform.zoom),dr=qn(Yt.posMatrix,St,Lt,Re.transform,hr),Er="none"!==Xe.layout.get("icon-text-fit")&&En.hasIconData();if(Nn){var wr=Math.pow(2,It.zoom-xn.tileID.overscaledZ);xr(En,Lt,St,Ot,e.symbolSize,It,dr,Yt.posMatrix,wr,Nn,Er)}}}}(Z,P,V,N,V.layout.get("text-rotation-alignment"),V.layout.get("text-pitch-alignment"),fe),0!==V.paint.get("icon-opacity").constantOr(1)&&Kr(P,N,V,Z,!1,V.paint.get("icon-translate"),V.paint.get("icon-translate-anchor"),V.layout.get("icon-rotation-alignment"),V.layout.get("icon-pitch-alignment"),V.layout.get("icon-keep-upright"),me,we),0!==V.paint.get("text-opacity").constantOr(1)&&Kr(P,N,V,Z,!0,V.paint.get("text-translate"),V.paint.get("text-translate-anchor"),V.layout.get("text-rotation-alignment"),V.layout.get("text-pitch-alignment"),V.layout.get("text-keep-upright"),me,we),N.map.showCollisionBoxes&&(In(P,N,V,Z,V.paint.get("text-translate"),V.paint.get("text-translate-anchor"),!0),In(P,N,V,Z,V.paint.get("icon-translate"),V.paint.get("icon-translate-anchor"),!1))}},circle:function(P,N,V,Z){if("translucent"===P.renderPass){var fe=V.paint.get("circle-opacity"),me=V.paint.get("circle-stroke-width"),we=V.paint.get("circle-stroke-opacity"),Ae=void 0!==V.layout.get("circle-sort-key").constantOr(1);if(0!==fe.constantOr(1)||0!==me.constantOr(1)&&0!==we.constantOr(1)){for(var Re=P.context,Xe=Re.gl,nt=P.depthModeForSublayer(0,nn.ReadOnly),ht=Me.disabled,Dt=P.colorModeForRenderPass(),Ot=[],It=0;It<Z.length;It++){var Lt=Z[It],St=N.getTile(Lt),Gt=St.getBucket(V);if(Gt){var Vt=Gt.programConfigurations.get(V.id),Yt={programConfiguration:Vt,program:P.useProgram("circle",Vt),layoutVertexBuffer:Gt.layoutVertexBuffer,indexBuffer:Gt.indexBuffer,uniformValues:rs(P,Lt,St,V)};if(Ae)for(var xn=0,En=Gt.segments.get();xn<En.length;xn+=1){var jn=En[xn];Ot.push({segments:new e.SegmentVector([jn]),sortKey:jn.sortKey,state:Yt})}else Ot.push({segments:Gt.segments,sortKey:0,state:Yt})}}Ae&&Ot.sort(function(mi,fi){return mi.sortKey-fi.sortKey});for(var Nn=0,hr=Ot;Nn<hr.length;Nn+=1){var dr=hr[Nn],Er=dr.state;Er.program.draw(Re,Xe.TRIANGLES,nt,ht,Dt,Se.disabled,Er.uniformValues,V.id,Er.layoutVertexBuffer,Er.indexBuffer,dr.segments,V.paint,P.transform.zoom,Er.programConfiguration)}}}},heatmap:function(P,N,V,Z){if(0!==V.paint.get("heatmap-opacity"))if("offscreen"===P.renderPass){var fe=P.context,me=fe.gl,we=Me.disabled,Ae=new Ee([me.ONE,me.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(Lt,St,Gt){var Vt=Lt.gl;Lt.activeTexture.set(Vt.TEXTURE1),Lt.viewport.set([0,0,St.width/4,St.height/4]);var En,jn,Nn,hr,dr,Yt=Gt.heatmapFbo;if(Yt)Vt.bindTexture(Vt.TEXTURE_2D,Yt.colorAttachment.get()),Lt.bindFramebuffer.set(Yt.framebuffer);else{var xn=Vt.createTexture();Vt.bindTexture(Vt.TEXTURE_2D,xn),Vt.texParameteri(Vt.TEXTURE_2D,Vt.TEXTURE_WRAP_S,Vt.CLAMP_TO_EDGE),Vt.texParameteri(Vt.TEXTURE_2D,Vt.TEXTURE_WRAP_T,Vt.CLAMP_TO_EDGE),Vt.texParameteri(Vt.TEXTURE_2D,Vt.TEXTURE_MIN_FILTER,Vt.LINEAR),Vt.texParameteri(Vt.TEXTURE_2D,Vt.TEXTURE_MAG_FILTER,Vt.LINEAR),Nn=xn,hr=Yt=Gt.heatmapFbo=Lt.createFramebuffer(St.width/4,St.height/4,!1),(dr=(En=Lt).gl).texImage2D(dr.TEXTURE_2D,0,dr.RGBA,(jn=St).width/4,jn.height/4,0,dr.RGBA,En.extRenderToTextureHalfFloat?En.extTextureHalfFloat.HALF_FLOAT_OES:dr.UNSIGNED_BYTE,null),hr.colorAttachment.set(Nn)}})(fe,P,V),fe.clear({color:e.Color.transparent});for(var Re=0;Re<Z.length;Re++){var Xe=Z[Re];if(!N.hasRenderableParent(Xe)){var nt=N.getTile(Xe),ht=nt.getBucket(V);if(ht){var Dt=ht.programConfigurations.get(V.id);P.useProgram("heatmap",Dt).draw(fe,me.TRIANGLES,nn.disabled,we,Ae,Se.disabled,Ms(Xe.posMatrix,nt,P.transform.zoom,V.paint.get("heatmap-intensity")),V.id,ht.layoutVertexBuffer,ht.indexBuffer,ht.segments,V.paint,P.transform.zoom,Dt)}}}fe.viewport.set([0,0,P.width,P.height])}else"translucent"===P.renderPass&&(P.context.setColorMode(P.colorModeForRenderPass()),function(Lt,St){var Gt=Lt.context,Vt=Gt.gl,Yt=St.heatmapFbo;if(Yt){Gt.activeTexture.set(Vt.TEXTURE0),Vt.bindTexture(Vt.TEXTURE_2D,Yt.colorAttachment.get()),Gt.activeTexture.set(Vt.TEXTURE1);var xn=St.colorRampTexture;xn||(xn=St.colorRampTexture=new e.Texture(Gt,St.colorRamp,Vt.RGBA)),xn.bind(Vt.LINEAR,Vt.CLAMP_TO_EDGE),Lt.useProgram("heatmapTexture").draw(Gt,Vt.TRIANGLES,nn.disabled,Me.disabled,Lt.colorModeForRenderPass(),Se.disabled,function(En,jn,Nn,hr){var dr=e.create();e.ortho(dr,0,En.width,En.height,0,0,1);var Er=En.context.gl;return{u_matrix:dr,u_world:[Er.drawingBufferWidth,Er.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:jn.paint.get("heatmap-opacity")}}(Lt,St),St.id,Lt.viewportBuffer,Lt.quadTriangleIndexBuffer,Lt.viewportSegments,St.paint,Lt.transform.zoom)}}(P,V))},line:function(P,N,V,Z){if("translucent"===P.renderPass){var fe=V.paint.get("line-opacity"),me=V.paint.get("line-width");if(0!==fe.constantOr(1)&&0!==me.constantOr(1)){var we=P.depthModeForSublayer(0,nn.ReadOnly),Ae=P.colorModeForRenderPass(),Re=V.paint.get("line-dasharray"),Xe=V.paint.get("line-pattern"),nt=Xe.constantOr(1),ht=V.paint.get("line-gradient"),Dt=V.getCrossfadeParameters(),Ot=nt?"linePattern":Re?"lineSDF":ht?"lineGradient":"line",It=P.context,Lt=It.gl,St=!0;if(ht){It.activeTexture.set(Lt.TEXTURE0);var Gt=V.gradientTexture;if(!V.gradient)return;Gt||(Gt=V.gradientTexture=new e.Texture(It,V.gradient,Lt.RGBA)),Gt.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE)}for(var Vt=0,Yt=Z;Vt<Yt.length;Vt+=1){var xn=Yt[Vt],En=N.getTile(xn);if(!nt||En.patternsLoaded()){var jn=En.getBucket(V);if(jn){var Nn=jn.programConfigurations.get(V.id),hr=P.context.program.get(),dr=P.useProgram(Ot,Nn),Er=St||dr.program!==hr,wr=Xe.constantOr(null);if(wr&&En.imageAtlas){var Jr=En.imageAtlas,pi=Jr.patternPositions[wr.to.toString()],Li=Jr.patternPositions[wr.from.toString()];pi&&Li&&Nn.setConstantPatternPositions(pi,Li)}var ir=nt?We(P,En,V,Dt):Re?Ge(P,En,V,Re,Dt):ht?Sa(P,En,V):Qa(P,En,V);nt?(It.activeTexture.set(Lt.TEXTURE0),En.imageAtlasTexture.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE),Nn.updatePaintBuffers(Dt)):Re&&(Er||P.lineAtlas.dirty)&&(It.activeTexture.set(Lt.TEXTURE0),P.lineAtlas.bind(It)),dr.draw(It,Lt.TRIANGLES,we,P.stencilModeForClipping(xn),Ae,Se.disabled,ir,V.id,jn.layoutVertexBuffer,jn.indexBuffer,jn.segments,V.paint,P.transform.zoom,Nn),St=!1}}}}}},fill:function(P,N,V,Z){var fe=V.paint.get("fill-color"),me=V.paint.get("fill-opacity");if(0!==me.constantOr(1)){var we=P.colorModeForRenderPass(),Ae=V.paint.get("fill-pattern"),Re=P.opaquePassEnabledForLayer()&&!Ae.constantOr(1)&&1===fe.constantOr(e.Color.transparent).a&&1===me.constantOr(0)?"opaque":"translucent";if(P.renderPass===Re){var Xe=P.depthModeForSublayer(1,"opaque"===P.renderPass?nn.ReadWrite:nn.ReadOnly);Ur(P,N,V,Z,Xe,we,!1)}if("translucent"===P.renderPass&&V.paint.get("fill-antialias")){var nt=P.depthModeForSublayer(V.getPaintProperty("fill-outline-color")?2:0,nn.ReadOnly);Ur(P,N,V,Z,nt,we,!0)}}},"fill-extrusion":function(P,N,V,Z){var fe=V.paint.get("fill-extrusion-opacity");if(0!==fe&&"translucent"===P.renderPass){var me=new nn(P.context.gl.LEQUAL,nn.ReadWrite,P.depthRangeFor3D);if(1!==fe||V.paint.get("fill-extrusion-pattern").constantOr(1))zi(P,N,V,Z,me,Me.disabled,Ee.disabled),zi(P,N,V,Z,me,P.stencilModeFor3D(),P.colorModeForRenderPass());else{var we=P.colorModeForRenderPass();zi(P,N,V,Z,me,Me.disabled,we)}}},hillshade:function(P,N,V,Z){if("offscreen"===P.renderPass||"translucent"===P.renderPass){for(var fe=P.context,me=N.getSource().maxzoom,we=P.depthModeForSublayer(0,nn.ReadOnly),Ae=P.colorModeForRenderPass(),Re="translucent"===P.renderPass?P.stencilConfigForOverlap(Z):[{},Z],Xe=Re[0],nt=0,ht=Re[1];nt<ht.length;nt+=1){var Dt=ht[nt],Ot=N.getTile(Dt);Ot.needsHillshadePrepare&&"offscreen"===P.renderPass?na(P,Ot,V,me,we,Me.disabled,Ae):"translucent"===P.renderPass&&Xi(P,Ot,V,we,Xe[Dt.overscaledZ],Ae)}fe.viewport.set([0,0,P.width,P.height])}},raster:function(P,N,V,Z){if("translucent"===P.renderPass&&0!==V.paint.get("raster-opacity")&&Z.length)for(var fe=P.context,me=fe.gl,we=N.getSource(),Ae=P.useProgram("raster"),Re=P.colorModeForRenderPass(),Xe=we instanceof X?[{},Z]:P.stencilConfigForOverlap(Z),nt=Xe[0],ht=Xe[1],Dt=ht[ht.length-1].overscaledZ,Ot=!P.options.moving,It=0,Lt=ht;It<Lt.length;It+=1){var St=Lt[It],Gt=P.depthModeForSublayer(St.overscaledZ-Dt,1===V.paint.get("raster-opacity")?nn.ReadWrite:nn.ReadOnly,me.LESS),Vt=N.getTile(St),Yt=P.transform.calculatePosMatrix(St.toUnwrapped(),Ot);Vt.registerFadeDuration(V.paint.get("raster-fade-duration"));var xn=N.findLoadedParent(St,0),En=Ji(Vt,xn,N,V,P.transform),jn=void 0,Nn=void 0,hr="nearest"===V.paint.get("raster-resampling")?me.NEAREST:me.LINEAR;fe.activeTexture.set(me.TEXTURE0),Vt.texture.bind(hr,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST),fe.activeTexture.set(me.TEXTURE1),xn?(xn.texture.bind(hr,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST),jn=Math.pow(2,xn.tileID.overscaledZ-Vt.tileID.overscaledZ),Nn=[Vt.tileID.canonical.x*jn%1,Vt.tileID.canonical.y*jn%1]):Vt.texture.bind(hr,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST);var dr=wt(Yt,Nn||[0,0],jn||1,En,V);we instanceof X?Ae.draw(fe,me.TRIANGLES,Gt,Me.disabled,Re,Se.disabled,dr,V.id,we.boundsBuffer,P.quadTriangleIndexBuffer,we.boundsSegments):Ae.draw(fe,me.TRIANGLES,Gt,nt[St.overscaledZ],Re,Se.disabled,dr,V.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments)}},background:function(P,N,V){var Z=V.paint.get("background-color"),fe=V.paint.get("background-opacity");if(0!==fe){var me=P.context,we=me.gl,Ae=P.transform,Re=Ae.tileSize,Xe=V.paint.get("background-pattern");if(!P.isPatternMissing(Xe)){var nt=!Xe&&1===Z.a&&1===fe&&P.opaquePassEnabledForLayer()?"opaque":"translucent";if(P.renderPass===nt){var ht=Me.disabled,Dt=P.depthModeForSublayer(0,"opaque"===nt?nn.ReadWrite:nn.ReadOnly),Ot=P.colorModeForRenderPass(),It=P.useProgram(Xe?"backgroundPattern":"background"),Lt=Ae.coveringTiles({tileSize:Re});Xe&&(me.activeTexture.set(we.TEXTURE0),P.imageManager.bind(P.context));for(var St=V.getCrossfadeParameters(),Gt=0,Vt=Lt;Gt<Vt.length;Gt+=1){var Yt=Vt[Gt],xn=P.transform.calculatePosMatrix(Yt.toUnwrapped()),En=Xe?mn(xn,fe,P,Xe,{tileID:Yt,tileSize:Re},St):yn(xn,fe,Z);It.draw(me,we.TRIANGLES,Dt,ht,Ot,Se.disabled,En,V.id,P.tileExtentBuffer,P.quadTriangleIndexBuffer,P.tileExtentSegments)}}}}},debug:function(P,N,V){for(var Z=0;Z<V.length;Z++)us(P,N,V[Z])},custom:function(P,N,V){var Z=P.context,fe=V.implementation;if("offscreen"===P.renderPass){var me=fe.prerender;me&&(P.setCustomLayerDefaults(),Z.setColorMode(P.colorModeForRenderPass()),me.call(fe,Z.gl,P.transform.customLayerMatrix()),Z.setDirty(),P.setBaseState())}else if("translucent"===P.renderPass){P.setCustomLayerDefaults(),Z.setColorMode(P.colorModeForRenderPass()),Z.setStencilMode(Me.disabled);var we="3d"===fe.renderingMode?new nn(P.context.gl.LEQUAL,nn.ReadWrite,P.depthRangeFor3D):P.depthModeForSublayer(0,nn.ReadOnly);Z.setDepthMode(we),fe.render(Z.gl,P.transform.customLayerMatrix()),Z.setDirty(),P.setBaseState(),Z.bindFramebuffer.set(null)}}},ba=function(P,N){this.context=new je(P),this.transform=N,this._tileTextures={},this.setup(),this.numSublayers=qe.maxUnderzooming+qe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new sr,this.gpuTimers={}};ba.prototype.resize=function(P,N){if(this.width=P*e.browser.devicePixelRatio,this.height=N*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var V=0,Z=this.style._order;V<Z.length;V+=1)this.style._layers[Z[V]].resize()},ba.prototype.setup=function(){var P=this.context,N=new e.StructArrayLayout2i4;N.emplaceBack(0,0),N.emplaceBack(e.EXTENT,0),N.emplaceBack(0,e.EXTENT),N.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=P.createVertexBuffer(N,Yr.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var V=new e.StructArrayLayout2i4;V.emplaceBack(0,0),V.emplaceBack(e.EXTENT,0),V.emplaceBack(0,e.EXTENT),V.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=P.createVertexBuffer(V,Yr.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var Z=new e.StructArrayLayout4i8;Z.emplaceBack(0,0,0,0),Z.emplaceBack(e.EXTENT,0,e.EXTENT,0),Z.emplaceBack(0,e.EXTENT,0,e.EXTENT),Z.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=P.createVertexBuffer(Z,ne.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var fe=new e.StructArrayLayout2i4;fe.emplaceBack(0,0),fe.emplaceBack(1,0),fe.emplaceBack(0,1),fe.emplaceBack(1,1),this.viewportBuffer=P.createVertexBuffer(fe,Yr.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var me=new e.StructArrayLayout1ui2;me.emplaceBack(0),me.emplaceBack(1),me.emplaceBack(3),me.emplaceBack(2),me.emplaceBack(0),this.tileBorderIndexBuffer=P.createIndexBuffer(me);var we=new e.StructArrayLayout3ui6;we.emplaceBack(0,1,2),we.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=P.createIndexBuffer(we),this.emptyTexture=new e.Texture(P,{width:1,height:1,data:new Uint8Array([0,0,0,0])},P.gl.RGBA);var Ae=this.context.gl;this.stencilClearMode=new Me({func:Ae.ALWAYS,mask:0},0,255,Ae.ZERO,Ae.ZERO,Ae.ZERO)},ba.prototype.clearStencil=function(){var P=this.context,N=P.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var V=e.create();e.ortho(V,0,this.width,this.height,0,0,1),e.scale(V,V,[N.drawingBufferWidth,N.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(P,N.TRIANGLES,nn.disabled,this.stencilClearMode,Ee.disabled,Se.disabled,Ho(V),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ba.prototype._renderTileClippingMasks=function(P,N){if(this.currentStencilSource!==P.source&&P.isTileClipped()&&N&&N.length){this.currentStencilSource=P.source;var V=this.context,Z=V.gl;this.nextStencilID+N.length>256&&this.clearStencil(),V.setColorMode(Ee.disabled),V.setDepthMode(nn.disabled);var fe=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var me=0,we=N;me<we.length;me+=1){var Ae=we[me],Re=this._tileClippingMaskIDs[Ae.key]=this.nextStencilID++;fe.draw(V,Z.TRIANGLES,nn.disabled,new Me({func:Z.ALWAYS,mask:0},Re,255,Z.KEEP,Z.KEEP,Z.REPLACE),Ee.disabled,Se.disabled,Ho(Ae.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ba.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var P=this.nextStencilID++,N=this.context.gl;return new Me({func:N.NOTEQUAL,mask:255},P,255,N.KEEP,N.KEEP,N.REPLACE)},ba.prototype.stencilModeForClipping=function(P){var N=this.context.gl;return new Me({func:N.EQUAL,mask:255},this._tileClippingMaskIDs[P.key],0,N.KEEP,N.KEEP,N.REPLACE)},ba.prototype.stencilConfigForOverlap=function(P){var N,V=this.context.gl,Z=P.sort(function(Re,Xe){return Xe.overscaledZ-Re.overscaledZ}),fe=Z[Z.length-1].overscaledZ,me=Z[0].overscaledZ-fe+1;if(me>1){this.currentStencilSource=void 0,this.nextStencilID+me>256&&this.clearStencil();for(var we={},Ae=0;Ae<me;Ae++)we[Ae+fe]=new Me({func:V.GEQUAL,mask:255},Ae+this.nextStencilID,255,V.KEEP,V.KEEP,V.REPLACE);return this.nextStencilID+=me,[we,Z]}return[(N={},N[fe]=Me.disabled,N),Z]},ba.prototype.colorModeForRenderPass=function(){var P=this.context.gl;return this._showOverdrawInspector?new Ee([P.CONSTANT_COLOR,P.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ee.unblended:Ee.alphaBlended},ba.prototype.depthModeForSublayer=function(P,N,V){if(!this.opaquePassEnabledForLayer())return nn.disabled;var Z=1-((1+this.currentLayer)*this.numSublayers+P)*this.depthEpsilon;return new nn(V||this.context.gl.LEQUAL,N,[Z,Z])},ba.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ba.prototype.render=function(P,N){var V=this;this.style=P,this.options=N,this.lineAtlas=P.lineAtlas,this.imageManager=P.imageManager,this.glyphManager=P.glyphManager,this.symbolFadeChange=P.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var Z=this.style._order,fe=this.style.sourceCaches;for(var me in fe){var we=fe[me];we.used&&we.prepare(this.context)}var Ae,Re,Xe={},nt={},ht={};for(var Dt in fe){var Ot=fe[Dt];Xe[Dt]=Ot.getVisibleCoordinates(),nt[Dt]=Xe[Dt].slice().reverse(),ht[Dt]=Ot.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var It=0;It<Z.length;It++)if(this.style._layers[Z[It]].is3D()){this.opaquePassCutoff=It;break}this.renderPass="offscreen";for(var St=0,Gt=Z;St<Gt.length;St+=1){var Yt=this.style._layers[Gt[St]];if(Yt.hasOffscreenPass()&&!Yt.isHidden(this.transform.zoom)){var xn=nt[Yt.source];("custom"===Yt.type||xn.length)&&this.renderLayer(this,fe[Yt.source],Yt,xn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:N.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=N.showOverdrawInspector,this.depthRangeFor3D=[0,1-(P._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=Z.length-1;this.currentLayer>=0;this.currentLayer--){var En=this.style._layers[Z[this.currentLayer]],jn=fe[En.source],Nn=Xe[En.source];this._renderTileClippingMasks(En,Nn),this.renderLayer(this,jn,En,Nn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<Z.length;this.currentLayer++){var hr=this.style._layers[Z[this.currentLayer]],dr=fe[hr.source],Er=("symbol"===hr.type?ht:nt)[hr.source];this._renderTileClippingMasks(hr,Xe[hr.source]),this.renderLayer(this,dr,hr,Er)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(wr){wr.source&&!wr.isHidden(V.transform.zoom)&&(wr.source!==(Re&&Re.id)&&(Re=V.style.sourceCaches[wr.source]),(!Ae||Ae.getSource().maxzoom<Re.getSource().maxzoom)&&(Ae=Re))}),Ae&&cs.debug(this,Ae,Ae.getVisibleCoordinates())),this.options.showPadding&&function To(P){var N=P.transform.padding;qo(P,P.transform.height-(N.top||0),3,Ta),qo(P,N.bottom||0,3,fo),is(P,N.left||0,3,ao),is(P,P.transform.width-(N.right||0),3,xa);var Z,fe,me,we,V=P.transform.centerPoint;ls(Z=P,(fe=V.x)-1,(me=P.transform.height-V.y)-10,2,20,we=Ga),ls(Z,fe-10,me-1,20,2,we)}(this),this.context.setDefault()},ba.prototype.renderLayer=function(P,N,V,Z){V.isHidden(this.transform.zoom)||("background"===V.type||"custom"===V.type||Z.length)&&(this.id=V.id,this.gpuTimingStart(V),cs[V.type](P,N,V,Z,this.style.placement.variableOffsets),this.gpuTimingEnd())},ba.prototype.gpuTimingStart=function(P){if(this.options.gpuTiming){var N=this.context.extTimerQuery,V=this.gpuTimers[P.id];V||(V=this.gpuTimers[P.id]={calls:0,cpuTime:0,query:N.createQueryEXT()}),V.calls++,N.beginQueryEXT(N.TIME_ELAPSED_EXT,V.query)}},ba.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var P=this.context.extTimerQuery;P.endQueryEXT(P.TIME_ELAPSED_EXT)}},ba.prototype.collectGpuTimers=function(){var P=this.gpuTimers;return this.gpuTimers={},P},ba.prototype.queryGpuTimers=function(P){var N={};for(var V in P){var Z=P[V],fe=this.context.extTimerQuery,me=fe.getQueryObjectEXT(Z.query,fe.QUERY_RESULT_EXT)/1e6;fe.deleteQueryEXT(Z.query),N[V]=me}return N},ba.prototype.translatePosMatrix=function(P,N,V,Z,fe){if(!V[0]&&!V[1])return P;var me=fe?"map"===Z?this.transform.angle:0:"viewport"===Z?-this.transform.angle:0;if(me){var we=Math.sin(me),Ae=Math.cos(me);V=[V[0]*Ae-V[1]*we,V[0]*we+V[1]*Ae]}var Re=[fe?V[0]:Dr(N,V[0],this.transform.zoom),fe?V[1]:Dr(N,V[1],this.transform.zoom),0],Xe=new Float32Array(16);return e.translate(Xe,P,Re),Xe},ba.prototype.saveTileTexture=function(P){var N=this._tileTextures[P.size[0]];N?N.push(P):this._tileTextures[P.size[0]]=[P]},ba.prototype.getTileTexture=function(P){var N=this._tileTextures[P];return N&&N.length>0?N.pop():null},ba.prototype.isPatternMissing=function(P){if(!P)return!1;if(!P.from||!P.to)return!0;var N=this.imageManager.getPattern(P.from.toString()),V=this.imageManager.getPattern(P.to.toString());return!N||!V},ba.prototype.useProgram=function(P,N){this.cache=this.cache||{};var V=""+P+(N?N.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[V]||(this.cache[V]=new Dl(this.context,ml[P],N,Ln[P],this._showOverdrawInspector)),this.cache[V]},ba.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ba.prototype.setBaseState=function(){var P=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(P.FUNC_ADD)},ba.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ba.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var bt=function(P,N){this.points=P,this.planes=N};bt.fromInvProjectionMatrix=function(P,N,V){var Z=Math.pow(2,V),fe=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(we){return e.transformMat4([],we,P)}).map(function(we){return e.scale$1([],we,1/we[3]/N*Z)}),me=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(we){var Ae=e.sub([],fe[we[0]],fe[we[1]]),Re=e.sub([],fe[we[2]],fe[we[1]]),Xe=e.normalize([],e.cross([],Ae,Re)),nt=-e.dot(Xe,fe[we[1]]);return Xe.concat(nt)});return new bt(fe,me)};var Ht=function(P,N){this.min=P,this.max=N,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};Ht.prototype.quadrant=function(P){for(var N=[P%2==0,P<2],V=e.clone$2(this.min),Z=e.clone$2(this.max),fe=0;fe<N.length;fe++)V[fe]=N[fe]?this.min[fe]:this.center[fe],Z[fe]=N[fe]?this.center[fe]:this.max[fe];return Z[2]=this.max[2],new Ht(V,Z)},Ht.prototype.distanceX=function(P){return Math.max(Math.min(this.max[0],P[0]),this.min[0])-P[0]},Ht.prototype.distanceY=function(P){return Math.max(Math.min(this.max[1],P[1]),this.min[1])-P[1]},Ht.prototype.intersects=function(P){for(var N=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],V=!0,Z=0;Z<P.planes.length;Z++){for(var fe=P.planes[Z],me=0,we=0;we<N.length;we++)me+=e.dot$1(fe,N[we])>=0;if(0===me)return 0;me!==N.length&&(V=!1)}if(V)return 2;for(var Ae=0;Ae<3;Ae++){for(var Re=Number.MAX_VALUE,Xe=-Number.MAX_VALUE,nt=0;nt<P.points.length;nt++){var ht=P.points[nt][Ae]-this.min[Ae];Re=Math.min(Re,ht),Xe=Math.max(Xe,ht)}if(Xe<0||Re>this.max[Ae]-this.min[Ae])return 0}return 1};var _n=function(P,N,V,Z){if(void 0===P&&(P=0),void 0===N&&(N=0),void 0===V&&(V=0),void 0===Z&&(Z=0),isNaN(P)||P<0||isNaN(N)||N<0||isNaN(V)||V<0||isNaN(Z)||Z<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=P,this.bottom=N,this.left=V,this.right=Z};_n.prototype.interpolate=function(P,N,V){return null!=N.top&&null!=P.top&&(this.top=e.number(P.top,N.top,V)),null!=N.bottom&&null!=P.bottom&&(this.bottom=e.number(P.bottom,N.bottom,V)),null!=N.left&&null!=P.left&&(this.left=e.number(P.left,N.left,V)),null!=N.right&&null!=P.right&&(this.right=e.number(P.right,N.right,V)),this},_n.prototype.getCenter=function(P,N){var V=e.clamp((this.left+P-this.right)/2,0,P),Z=e.clamp((this.top+N-this.bottom)/2,0,N);return new e.Point(V,Z)},_n.prototype.equals=function(P){return this.top===P.top&&this.bottom===P.bottom&&this.left===P.left&&this.right===P.right},_n.prototype.clone=function(){return new _n(this.top,this.bottom,this.left,this.right)},_n.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Kt=function(P,N,V,Z,fe){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===fe||fe,this._minZoom=P||0,this._maxZoom=N||22,this._minPitch=null==V?0:V,this._maxPitch=null==Z?60:Z,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new _n,this._posMatrixCache={},this._alignedPosMatrixCache={}},wn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Kt.prototype.clone=function(){var P=new Kt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return P.tileSize=this.tileSize,P.latRange=this.latRange,P.width=this.width,P.height=this.height,P._center=this._center,P.zoom=this.zoom,P.angle=this.angle,P._fov=this._fov,P._pitch=this._pitch,P._unmodified=this._unmodified,P._edgeInsets=this._edgeInsets.clone(),P._calcMatrices(),P},wn.minZoom.get=function(){return this._minZoom},wn.minZoom.set=function(P){this._minZoom!==P&&(this._minZoom=P,this.zoom=Math.max(this.zoom,P))},wn.maxZoom.get=function(){return this._maxZoom},wn.maxZoom.set=function(P){this._maxZoom!==P&&(this._maxZoom=P,this.zoom=Math.min(this.zoom,P))},wn.minPitch.get=function(){return this._minPitch},wn.minPitch.set=function(P){this._minPitch!==P&&(this._minPitch=P,this.pitch=Math.max(this.pitch,P))},wn.maxPitch.get=function(){return this._maxPitch},wn.maxPitch.set=function(P){this._maxPitch!==P&&(this._maxPitch=P,this.pitch=Math.min(this.pitch,P))},wn.renderWorldCopies.get=function(){return this._renderWorldCopies},wn.renderWorldCopies.set=function(P){void 0===P?P=!0:null===P&&(P=!1),this._renderWorldCopies=P},wn.worldSize.get=function(){return this.tileSize*this.scale},wn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},wn.size.get=function(){return new e.Point(this.width,this.height)},wn.bearing.get=function(){return-this.angle/Math.PI*180},wn.bearing.set=function(P){var N=-e.wrap(P,-180,180)*Math.PI/180;this.angle!==N&&(this._unmodified=!1,this.angle=N,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},wn.pitch.get=function(){return this._pitch/Math.PI*180},wn.pitch.set=function(P){var N=e.clamp(P,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==N&&(this._unmodified=!1,this._pitch=N,this._calcMatrices())},wn.fov.get=function(){return this._fov/Math.PI*180},wn.fov.set=function(P){P=Math.max(.01,Math.min(60,P)),this._fov!==P&&(this._unmodified=!1,this._fov=P/180*Math.PI,this._calcMatrices())},wn.zoom.get=function(){return this._zoom},wn.zoom.set=function(P){var N=Math.min(Math.max(P,this.minZoom),this.maxZoom);this._zoom!==N&&(this._unmodified=!1,this._zoom=N,this.scale=this.zoomScale(N),this.tileZoom=Math.floor(N),this.zoomFraction=N-this.tileZoom,this._constrain(),this._calcMatrices())},wn.center.get=function(){return this._center},wn.center.set=function(P){P.lat===this._center.lat&&P.lng===this._center.lng||(this._unmodified=!1,this._center=P,this._constrain(),this._calcMatrices())},wn.padding.get=function(){return this._edgeInsets.toJSON()},wn.padding.set=function(P){this._edgeInsets.equals(P)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,P,1),this._calcMatrices())},wn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Kt.prototype.isPaddingEqual=function(P){return this._edgeInsets.equals(P)},Kt.prototype.interpolatePadding=function(P,N,V){this._unmodified=!1,this._edgeInsets.interpolate(P,N,V),this._constrain(),this._calcMatrices()},Kt.prototype.coveringZoomLevel=function(P){var N=(P.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/P.tileSize));return Math.max(0,N)},Kt.prototype.getVisibleUnwrappedCoordinates=function(P){var N=[new e.UnwrappedTileID(0,P)];if(this._renderWorldCopies)for(var V=this.pointCoordinate(new e.Point(0,0)),Z=this.pointCoordinate(new e.Point(this.width,0)),fe=this.pointCoordinate(new e.Point(this.width,this.height)),me=this.pointCoordinate(new e.Point(0,this.height)),we=Math.floor(Math.min(V.x,Z.x,fe.x,me.x)),Ae=Math.floor(Math.max(V.x,Z.x,fe.x,me.x)),Re=we-1;Re<=Ae+1;Re++)0!==Re&&N.push(new e.UnwrappedTileID(Re,P));return N},Kt.prototype.coveringTiles=function(P){var N=this.coveringZoomLevel(P),V=N;if(void 0!==P.minzoom&&N<P.minzoom)return[];void 0!==P.maxzoom&&N>P.maxzoom&&(N=P.maxzoom);var Z=e.MercatorCoordinate.fromLngLat(this.center),fe=Math.pow(2,N),me=[fe*Z.x,fe*Z.y,0],we=bt.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,N),Ae=P.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Ae=N);var Re=function(Er){return{aabb:new Ht([Er*fe,0,0],[(Er+1)*fe,fe,0]),zoom:0,x:0,y:0,wrap:Er,fullyVisible:!1}},Xe=[],nt=[],ht=N,Dt=P.reparseOverscaled?V:N;if(this._renderWorldCopies)for(var Ot=1;Ot<=3;Ot++)Xe.push(Re(-Ot)),Xe.push(Re(Ot));for(Xe.push(Re(0));Xe.length>0;){var It=Xe.pop(),Lt=It.x,St=It.y,Gt=It.fullyVisible;if(!Gt){var Vt=It.aabb.intersects(we);if(0===Vt)continue;Gt=2===Vt}var Yt=It.aabb.distanceX(me),xn=It.aabb.distanceY(me),En=Math.max(Math.abs(Yt),Math.abs(xn));if(It.zoom===ht||En>3+(1<<ht-It.zoom)-2&&It.zoom>=Ae)nt.push({tileID:new e.OverscaledTileID(It.zoom===ht?Dt:It.zoom,It.wrap,It.zoom,Lt,St),distanceSq:e.sqrLen([me[0]-.5-Lt,me[1]-.5-St])});else for(var Nn=0;Nn<4;Nn++){var hr=(Lt<<1)+Nn%2,dr=(St<<1)+(Nn>>1);Xe.push({aabb:It.aabb.quadrant(Nn),zoom:It.zoom+1,x:hr,y:dr,wrap:It.wrap,fullyVisible:Gt})}}return nt.sort(function(Er,wr){return Er.distanceSq-wr.distanceSq}).map(function(Er){return Er.tileID})},Kt.prototype.resize=function(P,N){this.width=P,this.height=N,this.pixelsToGLUnits=[2/P,-2/N],this._constrain(),this._calcMatrices()},wn.unmodified.get=function(){return this._unmodified},Kt.prototype.zoomScale=function(P){return Math.pow(2,P)},Kt.prototype.scaleZoom=function(P){return Math.log(P)/Math.LN2},Kt.prototype.project=function(P){var N=e.clamp(P.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(P.lng)*this.worldSize,e.mercatorYfromLat(N)*this.worldSize)},Kt.prototype.unproject=function(P){return new e.MercatorCoordinate(P.x/this.worldSize,P.y/this.worldSize).toLngLat()},wn.point.get=function(){return this.project(this.center)},Kt.prototype.setLocationAtPoint=function(P,N){var V=this.pointCoordinate(N),Z=this.pointCoordinate(this.centerPoint),fe=this.locationCoordinate(P),me=new e.MercatorCoordinate(fe.x-(V.x-Z.x),fe.y-(V.y-Z.y));this.center=this.coordinateLocation(me),this._renderWorldCopies&&(this.center=this.center.wrap())},Kt.prototype.locationPoint=function(P){return this.coordinatePoint(this.locationCoordinate(P))},Kt.prototype.pointLocation=function(P){return this.coordinateLocation(this.pointCoordinate(P))},Kt.prototype.locationCoordinate=function(P){return e.MercatorCoordinate.fromLngLat(P)},Kt.prototype.coordinateLocation=function(P){return P.toLngLat()},Kt.prototype.pointCoordinate=function(P){var N=[P.x,P.y,0,1],V=[P.x,P.y,1,1];e.transformMat4(N,N,this.pixelMatrixInverse),e.transformMat4(V,V,this.pixelMatrixInverse);var Z=N[3],fe=V[3],Ae=N[1]/Z,Re=V[1]/fe,Xe=N[2]/Z,nt=V[2]/fe,ht=Xe===nt?0:(0-Xe)/(nt-Xe);return new e.MercatorCoordinate(e.number(N[0]/Z,V[0]/fe,ht)/this.worldSize,e.number(Ae,Re,ht)/this.worldSize)},Kt.prototype.coordinatePoint=function(P){var N=[P.x*this.worldSize,P.y*this.worldSize,0,1];return e.transformMat4(N,N,this.pixelMatrix),new e.Point(N[0]/N[3],N[1]/N[3])},Kt.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},Kt.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Kt.prototype.setMaxBounds=function(P){P?(this.lngRange=[P.getWest(),P.getEast()],this.latRange=[P.getSouth(),P.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Kt.prototype.calculatePosMatrix=function(P,N){void 0===N&&(N=!1);var V=P.key,Z=N?this._alignedPosMatrixCache:this._posMatrixCache;if(Z[V])return Z[V];var fe=P.canonical,me=this.worldSize/this.zoomScale(fe.z),we=fe.x+Math.pow(2,fe.z)*P.wrap,Ae=e.identity(new Float64Array(16));return e.translate(Ae,Ae,[we*me,fe.y*me,0]),e.scale(Ae,Ae,[me/e.EXTENT,me/e.EXTENT,1]),e.multiply(Ae,N?this.alignedProjMatrix:this.projMatrix,Ae),Z[V]=new Float32Array(Ae),Z[V]},Kt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Kt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var P,N,V,Z,fe=-90,me=90,we=-180,Ae=180,Re=this.size,Xe=this._unmodified;if(this.latRange){var nt=this.latRange;fe=e.mercatorYfromLat(nt[1])*this.worldSize,P=(me=e.mercatorYfromLat(nt[0])*this.worldSize)-fe<Re.y?Re.y/(me-fe):0}if(this.lngRange){var ht=this.lngRange;we=e.mercatorXfromLng(ht[0])*this.worldSize,N=(Ae=e.mercatorXfromLng(ht[1])*this.worldSize)-we<Re.x?Re.x/(Ae-we):0}var Dt=this.point,Ot=Math.max(N||0,P||0);if(Ot)return this.center=this.unproject(new e.Point(N?(Ae+we)/2:Dt.x,P?(me+fe)/2:Dt.y)),this.zoom+=this.scaleZoom(Ot),this._unmodified=Xe,void(this._constraining=!1);if(this.latRange){var It=Dt.y,Lt=Re.y/2;It-Lt<fe&&(Z=fe+Lt),It+Lt>me&&(Z=me-Lt)}if(this.lngRange){var St=Dt.x,Gt=Re.x/2;St-Gt<we&&(V=we+Gt),St+Gt>Ae&&(V=Ae-Gt)}void 0===V&&void 0===Z||(this.center=this.unproject(new e.Point(void 0!==V?V:Dt.x,void 0!==Z?Z:Dt.y))),this._unmodified=Xe,this._constraining=!1}},Kt.prototype._calcMatrices=function(){if(this.height){var N=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var V=Math.PI/2+this._pitch,Z=this._fov*(.5+N.y/this.height),fe=Math.sin(Z)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-V-Z,.01,Math.PI-.01)),me=this.point,we=me.x,Ae=me.y,Re=1.01*(Math.cos(Math.PI/2-this._pitch)*fe+this.cameraToCenterDistance),Xe=this.height/50,nt=new Float64Array(16);e.perspective(nt,this._fov,this.width/this.height,Xe,Re),nt[8]=2*-N.x/this.width,nt[9]=2*N.y/this.height,e.scale(nt,nt,[1,-1,1]),e.translate(nt,nt,[0,0,-this.cameraToCenterDistance]),e.rotateX(nt,nt,this._pitch),e.rotateZ(nt,nt,this.angle),e.translate(nt,nt,[-we,-Ae,0]),this.mercatorMatrix=e.scale([],nt,[this.worldSize,this.worldSize,this.worldSize]),e.scale(nt,nt,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=nt,this.invProjMatrix=e.invert([],this.projMatrix);var ht=this.width%2/2,Dt=this.height%2/2,Ot=Math.cos(this.angle),It=Math.sin(this.angle),Lt=we-Math.round(we)+Ot*ht+It*Dt,St=Ae-Math.round(Ae)+Ot*Dt+It*ht,Gt=new Float64Array(nt);if(e.translate(Gt,Gt,[Lt>.5?Lt-1:Lt,St>.5?St-1:St,0]),this.alignedProjMatrix=Gt,nt=e.create(),e.scale(nt,nt,[this.width/2,-this.height/2,1]),e.translate(nt,nt,[1,-1,0]),this.labelPlaneMatrix=nt,nt=e.create(),e.scale(nt,nt,[1,-1,1]),e.translate(nt,nt,[-1,-1,0]),e.scale(nt,nt,[2/this.width,2/this.height,1]),this.glCoordMatrix=nt,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(nt=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=nt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Kt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var P=this.pointCoordinate(new e.Point(0,0)),N=[P.x*this.worldSize,P.y*this.worldSize,0,1];return e.transformMat4(N,N,this.pixelMatrix)[3]/this.cameraToCenterDistance},Kt.prototype.getCameraPoint=function(){var N=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,N))},Kt.prototype.getCameraQueryGeometry=function(P){var N=this.getCameraPoint();if(1===P.length)return[P[0],N];for(var V=N.x,Z=N.y,fe=N.x,me=N.y,we=0,Ae=P;we<Ae.length;we+=1){var Re=Ae[we];V=Math.min(V,Re.x),Z=Math.min(Z,Re.y),fe=Math.max(fe,Re.x),me=Math.max(me,Re.y)}return[new e.Point(V,Z),new e.Point(fe,Z),new e.Point(fe,me),new e.Point(V,me),new e.Point(V,Z)]},Object.defineProperties(Kt.prototype,wn);var Yn=function(P){var N,Z,fe,me;this._hashName=P&&encodeURIComponent(P),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(N=this._updateHashUnthrottled.bind(this),300,Z=!1,fe=null,me=function(){fe=null,Z&&(N(),fe=setTimeout(me,300),Z=!1)},function(){return Z=!0,fe||me(),fe})};Yn.prototype.addTo=function(P){return this._map=P,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Yn.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Yn.prototype.getHashString=function(P){var N=this._map.getCenter(),V=Math.round(100*this._map.getZoom())/100,Z=Math.ceil((V*Math.LN2+Math.log(512/360/.5))/Math.LN10),fe=Math.pow(10,Z),me=Math.round(N.lng*fe)/fe,we=Math.round(N.lat*fe)/fe,Ae=this._map.getBearing(),Re=this._map.getPitch(),Xe="";if(Xe+=P?"/"+me+"/"+we+"/"+V:V+"/"+we+"/"+me,(Ae||Re)&&(Xe+="/"+Math.round(10*Ae)/10),Re&&(Xe+="/"+Math.round(Re)),this._hashName){var nt=this._hashName,ht=!1,Dt=e.window.location.hash.slice(1).split("&").map(function(Ot){var It=Ot.split("=")[0];return It===nt?(ht=!0,It+"="+Xe):Ot}).filter(function(Ot){return Ot});return ht||Dt.push(nt+"="+Xe),"#"+Dt.join("&")}return"#"+Xe},Yn.prototype._getCurrentHash=function(){var P,N=this,V=e.window.location.hash.replace("#","");return this._hashName?(V.split("&").map(function(Z){return Z.split("=")}).forEach(function(Z){Z[0]===N._hashName&&(P=Z)}),(P&&P[1]||"").split("/")):V.split("/")},Yn.prototype._onHashChange=function(){var P=this._getCurrentHash();if(P.length>=3&&!P.some(function(V){return isNaN(V)})){var N=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(P[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+P[2],+P[1]],zoom:+P[0],bearing:N,pitch:+(P[4]||0)}),!0}return!1},Yn.prototype._updateHashUnthrottled=function(){var P=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",P)}catch(N){}};var Qn={linearity:.3,easing:e.bezier(0,0,.3,1)},fr=e.extend({deceleration:2500,maxSpeed:1400},Qn),kr=e.extend({deceleration:20,maxSpeed:1400},Qn),_r=e.extend({deceleration:1e3,maxSpeed:360},Qn),Sr=e.extend({deceleration:1e3,maxSpeed:90},Qn),Vr=function(P){this._map=P,this.clear()};function Ar(P,N){(!P.duration||P.duration<N.duration)&&(P.duration=N.duration,P.easing=N.easing)}function Hr(P,N,V){var Z=V.maxSpeed,fe=V.linearity,me=V.deceleration,we=e.clamp(P*fe/(N/1e3),-Z,Z),Ae=Math.abs(we)/(me*fe);return{easing:V.easing,duration:1e3*Ae,amount:we*(Ae/2)}}Vr.prototype.clear=function(){this._inertiaBuffer=[]},Vr.prototype.record=function(P){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:P})},Vr.prototype._drainInertiaBuffer=function(){for(var P=this._inertiaBuffer,N=e.browser.now();P.length>0&&N-P[0].time>160;)P.shift()},Vr.prototype._onMoveEnd=function(P){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var N={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},V=0,Z=this._inertiaBuffer;V<Z.length;V+=1){var fe=Z[V].settings;N.zoom+=fe.zoomDelta||0,N.bearing+=fe.bearingDelta||0,N.pitch+=fe.pitchDelta||0,fe.panDelta&&N.pan._add(fe.panDelta),fe.around&&(N.around=fe.around),fe.pinchAround&&(N.pinchAround=fe.pinchAround)}var me=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,we={};if(N.pan.mag()){var Ae=Hr(N.pan.mag(),me,e.extend({},fr,P||{}));we.offset=N.pan.mult(Ae.amount/N.pan.mag()),we.center=this._map.transform.center,Ar(we,Ae)}if(N.zoom){var Re=Hr(N.zoom,me,kr);we.zoom=this._map.transform.zoom+Re.amount,Ar(we,Re)}if(N.bearing){var Xe=Hr(N.bearing,me,_r);we.bearing=this._map.transform.bearing+e.clamp(Xe.amount,-179,179),Ar(we,Xe)}if(N.pitch){var nt=Hr(N.pitch,me,Sr);we.pitch=this._map.transform.pitch+nt.amount,Ar(we,nt)}if(we.zoom||we.bearing){var ht=void 0===N.pinchAround?N.around:N.pinchAround;we.around=ht?this._map.unproject(ht):this._map.getCenter()}return this.clear(),e.extend(we,{noMoveStart:!0})}};var ii=function(P){function N(Z,fe,me,we){void 0===we&&(we={});var Ae=n.mousePos(fe.getCanvasContainer(),me),Re=fe.unproject(Ae);P.call(this,Z,e.extend({point:Ae,lngLat:Re,originalEvent:me},we)),this._defaultPrevented=!1,this.target=fe}P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N;var V={defaultPrevented:{configurable:!0}};return N.prototype.preventDefault=function(){this._defaultPrevented=!0},V.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(N.prototype,V),N}(e.Event),oi=function(P){function N(Z,fe,me){var we="touchend"===Z?me.changedTouches:me.touches,Ae=n.touchPos(fe.getCanvasContainer(),we),Re=Ae.map(function(ht){return fe.unproject(ht)}),Xe=Ae.reduce(function(ht,Dt,Ot,It){return ht.add(Dt.div(It.length))},new e.Point(0,0)),nt=fe.unproject(Xe);P.call(this,Z,{points:Ae,point:Xe,lngLats:Re,lngLat:nt,originalEvent:me}),this._defaultPrevented=!1}P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N;var V={defaultPrevented:{configurable:!0}};return N.prototype.preventDefault=function(){this._defaultPrevented=!0},V.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(N.prototype,V),N}(e.Event),Ai=function(P){function N(Z,fe,me){P.call(this,Z,{originalEvent:me}),this._defaultPrevented=!1}P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N;var V={defaultPrevented:{configurable:!0}};return N.prototype.preventDefault=function(){this._defaultPrevented=!0},V.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(N.prototype,V),N}(e.Event),lr=function(P,N){this._map=P,this._clickTolerance=N.clickTolerance};lr.prototype.reset=function(){delete this._mousedownPos},lr.prototype.wheel=function(P){return this._firePreventable(new Ai(P.type,this._map,P))},lr.prototype.mousedown=function(P,N){return this._mousedownPos=N,this._firePreventable(new ii(P.type,this._map,P))},lr.prototype.mouseup=function(P){this._map.fire(new ii(P.type,this._map,P))},lr.prototype.click=function(P,N){this._mousedownPos&&this._mousedownPos.dist(N)>=this._clickTolerance||this._map.fire(new ii(P.type,this._map,P))},lr.prototype.dblclick=function(P){return this._firePreventable(new ii(P.type,this._map,P))},lr.prototype.mouseover=function(P){this._map.fire(new ii(P.type,this._map,P))},lr.prototype.mouseout=function(P){this._map.fire(new ii(P.type,this._map,P))},lr.prototype.touchstart=function(P){return this._firePreventable(new oi(P.type,this._map,P))},lr.prototype.touchmove=function(P){this._map.fire(new oi(P.type,this._map,P))},lr.prototype.touchend=function(P){this._map.fire(new oi(P.type,this._map,P))},lr.prototype.touchcancel=function(P){this._map.fire(new oi(P.type,this._map,P))},lr.prototype._firePreventable=function(P){if(this._map.fire(P),P.defaultPrevented)return{}},lr.prototype.isEnabled=function(){return!0},lr.prototype.isActive=function(){return!1},lr.prototype.enable=function(){},lr.prototype.disable=function(){};var Ti=function(P){this._map=P};Ti.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ti.prototype.mousemove=function(P){this._map.fire(new ii(P.type,this._map,P))},Ti.prototype.mousedown=function(){this._delayContextMenu=!0},Ti.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ii("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ti.prototype.contextmenu=function(P){this._delayContextMenu?this._contextMenuEvent=P:this._map.fire(new ii(P.type,this._map,P)),this._map.listens("contextmenu")&&P.preventDefault()},Ti.prototype.isEnabled=function(){return!0},Ti.prototype.isActive=function(){return!1},Ti.prototype.enable=function(){},Ti.prototype.disable=function(){};var $r=function(P,N){this._map=P,this._el=P.getCanvasContainer(),this._container=P.getContainer(),this._clickTolerance=N.clickTolerance||1};function li(P,N){for(var V={},Z=0;Z<P.length;Z++)V[P[Z].identifier]=N[Z];return V}$r.prototype.isEnabled=function(){return!!this._enabled},$r.prototype.isActive=function(){return!!this._active},$r.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},$r.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},$r.prototype.mousedown=function(P,N){this.isEnabled()&&P.shiftKey&&0===P.button&&(n.disableDrag(),this._startPos=this._lastPos=N,this._active=!0)},$r.prototype.mousemoveWindow=function(P,N){if(this._active){var V=N;if(!(this._lastPos.equals(V)||!this._box&&V.dist(this._startPos)<this._clickTolerance)){var Z=this._startPos;this._lastPos=V,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",P));var fe=Math.min(Z.x,V.x),me=Math.max(Z.x,V.x),we=Math.min(Z.y,V.y),Ae=Math.max(Z.y,V.y);n.setTransform(this._box,"translate("+fe+"px,"+we+"px)"),this._box.style.width=me-fe+"px",this._box.style.height=Ae-we+"px"}}},$r.prototype.mouseupWindow=function(P,N){var V=this;if(this._active&&0===P.button){var Z=this._startPos,fe=N;if(this.reset(),n.suppressClick(),Z.x!==fe.x||Z.y!==fe.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:P})),{cameraAnimation:function(me){return me.fitScreenCoordinates(Z,fe,V._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",P)}},$r.prototype.keydown=function(P){this._active&&27===P.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",P))},$r.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},$r.prototype._fireEvent=function(P,N){return this._map.fire(new e.Event(P,{originalEvent:N}))};var _i=function(P){this.reset(),this.numTouches=P.numTouches};_i.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},_i.prototype.touchstart=function(P,N,V){(this.centroid||V.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=P.timeStamp),V.length===this.numTouches&&(this.centroid=function(Z){for(var fe=new e.Point(0,0),me=0,we=Z;me<we.length;me+=1)fe._add(we[me]);return fe.div(Z.length)}(N),this.touches=li(V,N)))},_i.prototype.touchmove=function(P,N,V){if(!this.aborted&&this.centroid){var Z=li(V,N);for(var fe in this.touches){var we=Z[fe];(!we||we.dist(this.touches[fe])>30)&&(this.aborted=!0)}}},_i.prototype.touchend=function(P,N,V){if((!this.centroid||P.timeStamp-this.startTime>500)&&(this.aborted=!0),0===V.length){var Z=!this.aborted&&this.centroid;if(this.reset(),Z)return Z}};var Yi=function(P){this.singleTap=new _i(P),this.numTaps=P.numTaps,this.reset()};Yi.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Yi.prototype.touchstart=function(P,N,V){this.singleTap.touchstart(P,N,V)},Yi.prototype.touchmove=function(P,N,V){this.singleTap.touchmove(P,N,V)},Yi.prototype.touchend=function(P,N,V){var Z=this.singleTap.touchend(P,N,V);if(Z){var fe=P.timeStamp-this.lastTime<500,me=!this.lastTap||this.lastTap.dist(Z)<30;if(fe&&me||this.reset(),this.count++,this.lastTime=P.timeStamp,this.lastTap=Z,this.count===this.numTaps)return this.reset(),Z}};var sa=function(){this._zoomIn=new Yi({numTouches:1,numTaps:2}),this._zoomOut=new Yi({numTouches:2,numTaps:1}),this.reset()};sa.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},sa.prototype.touchstart=function(P,N,V){this._zoomIn.touchstart(P,N,V),this._zoomOut.touchstart(P,N,V)},sa.prototype.touchmove=function(P,N,V){this._zoomIn.touchmove(P,N,V),this._zoomOut.touchmove(P,N,V)},sa.prototype.touchend=function(P,N,V){var Z=this,fe=this._zoomIn.touchend(P,N,V),me=this._zoomOut.touchend(P,N,V);return fe?(this._active=!0,P.preventDefault(),setTimeout(function(){return Z.reset()},0),{cameraAnimation:function(we){return we.easeTo({duration:300,zoom:we.getZoom()+1,around:we.unproject(fe)},{originalEvent:P})}}):me?(this._active=!0,P.preventDefault(),setTimeout(function(){return Z.reset()},0),{cameraAnimation:function(we){return we.easeTo({duration:300,zoom:we.getZoom()-1,around:we.unproject(me)},{originalEvent:P})}}):void 0},sa.prototype.touchcancel=function(){this.reset()},sa.prototype.enable=function(){this._enabled=!0},sa.prototype.disable=function(){this._enabled=!1,this.reset()},sa.prototype.isEnabled=function(){return this._enabled},sa.prototype.isActive=function(){return this._active};var qr=function(P){this.reset(),this._clickTolerance=P.clickTolerance||1};qr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},qr.prototype._correctButton=function(P,N){return!1},qr.prototype._move=function(P,N){return{}},qr.prototype.mousedown=function(P,N){if(!this._lastPoint){var V=n.mouseButton(P);this._correctButton(P,V)&&(this._lastPoint=N,this._eventButton=V)}},qr.prototype.mousemoveWindow=function(P,N){var V=this._lastPoint;if(V&&(P.preventDefault(),this._moved||!(N.dist(V)<this._clickTolerance)))return this._moved=!0,this._lastPoint=N,this._move(V,N)},qr.prototype.mouseupWindow=function(P){n.mouseButton(P)===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},qr.prototype.enable=function(){this._enabled=!0},qr.prototype.disable=function(){this._enabled=!1,this.reset()},qr.prototype.isEnabled=function(){return this._enabled},qr.prototype.isActive=function(){return this._active};var pa=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.mousedown=function(V,Z){P.prototype.mousedown.call(this,V,Z),this._lastPoint&&(this._active=!0)},N.prototype._correctButton=function(V,Z){return 0===Z&&!V.ctrlKey},N.prototype._move=function(V,Z){return{around:Z,panDelta:Z.sub(V)}},N}(qr),ji=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype._correctButton=function(V,Z){return 0===Z&&V.ctrlKey||2===Z},N.prototype._move=function(V,Z){var fe=.8*(Z.x-V.x);if(fe)return this._active=!0,{bearingDelta:fe}},N.prototype.contextmenu=function(V){V.preventDefault()},N}(qr),Pi=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype._correctButton=function(V,Z){return 0===Z&&V.ctrlKey||2===Z},N.prototype._move=function(V,Z){var fe=-.5*(Z.y-V.y);if(fe)return this._active=!0,{pitchDelta:fe}},N.prototype.contextmenu=function(V){V.preventDefault()},N}(qr),fa=function(P){this._minTouches=1,this._clickTolerance=P.clickTolerance||1,this.reset()};fa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},fa.prototype.touchstart=function(P,N,V){return this._calculateTransform(P,N,V)},fa.prototype.touchmove=function(P,N,V){if(this._active)return P.preventDefault(),this._calculateTransform(P,N,V)},fa.prototype.touchend=function(P,N,V){this._calculateTransform(P,N,V),this._active&&V.length<this._minTouches&&this.reset()},fa.prototype.touchcancel=function(){this.reset()},fa.prototype._calculateTransform=function(P,N,V){V.length>0&&(this._active=!0);var Z=li(V,N),fe=new e.Point(0,0),me=new e.Point(0,0),we=0;for(var Ae in Z){var Re=Z[Ae],Xe=this._touches[Ae];Xe&&(fe._add(Re),me._add(Re.sub(Xe)),we++,Z[Ae]=Re)}if(this._touches=Z,!(we<this._minTouches)&&me.mag()){var nt=me.div(we);if(this._sum._add(nt),!(this._sum.mag()<this._clickTolerance))return{around:fe.div(we),panDelta:nt}}},fa.prototype.enable=function(){this._enabled=!0},fa.prototype.disable=function(){this._enabled=!1,this.reset()},fa.prototype.isEnabled=function(){return this._enabled},fa.prototype.isActive=function(){return this._active};var $i=function(){this.reset()};function Va(P,N,V){for(var Z=0;Z<P.length;Z++)if(P[Z].identifier===V)return N[Z]}function wi(P,N){return Math.log(P/N)/Math.LN2}$i.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},$i.prototype._start=function(P){},$i.prototype._move=function(P,N,V){return{}},$i.prototype.touchstart=function(P,N,V){this._firstTwoTouches||V.length<2||(this._firstTwoTouches=[V[0].identifier,V[1].identifier],this._start([N[0],N[1]]))},$i.prototype.touchmove=function(P,N,V){if(this._firstTwoTouches){P.preventDefault();var Z=this._firstTwoTouches,me=Z[1],we=Va(V,N,Z[0]),Ae=Va(V,N,me);if(we&&Ae){var Re=this._aroundCenter?null:we.add(Ae).div(2);return this._move([we,Ae],Re,P)}}},$i.prototype.touchend=function(P,N,V){if(this._firstTwoTouches){var Z=this._firstTwoTouches,me=Z[1],we=Va(V,N,Z[0]),Ae=Va(V,N,me);we&&Ae||(this._active&&n.suppressClick(),this.reset())}},$i.prototype.touchcancel=function(){this.reset()},$i.prototype.enable=function(P){this._enabled=!0,this._aroundCenter=!!P&&"center"===P.around},$i.prototype.disable=function(){this._enabled=!1,this.reset()},$i.prototype.isEnabled=function(){return this._enabled},$i.prototype.isActive=function(){return this._active};var Na=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.reset=function(){P.prototype.reset.call(this),delete this._distance,delete this._startDistance},N.prototype._start=function(V){this._startDistance=this._distance=V[0].dist(V[1])},N.prototype._move=function(V,Z){var fe=this._distance;if(this._distance=V[0].dist(V[1]),this._active||!(Math.abs(wi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:wi(this._distance,fe),pinchAround:Z}},N}($i);function ga(P,N){return 180*P.angleWith(N)/Math.PI}var Vs=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.reset=function(){P.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},N.prototype._start=function(V){this._startVector=this._vector=V[0].sub(V[1]),this._minDiameter=V[0].dist(V[1])},N.prototype._move=function(V,Z){var fe=this._vector;if(this._vector=V[0].sub(V[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ga(this._vector,fe),pinchAround:Z}},N.prototype._isBelowThreshold=function(V){this._minDiameter=Math.min(this._minDiameter,V.mag());var Z=25/(Math.PI*this._minDiameter)*360,fe=ga(V,this._startVector);return Math.abs(fe)<Z},N}($i);function Fs(P){return Math.abs(P.y)>Math.abs(P.x)}var Ra=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.reset=function(){P.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},N.prototype._start=function(V){this._lastPoints=V,Fs(V[0].sub(V[1]))&&(this._valid=!1)},N.prototype._move=function(V,Z,fe){var me=V[0].sub(this._lastPoints[0]),we=V[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(me,we,fe.timeStamp),this._valid)return this._lastPoints=V,this._active=!0,{pitchDelta:(me.y+we.y)/2*-.5}},N.prototype.gestureBeginsVertically=function(V,Z,fe){if(void 0!==this._valid)return this._valid;var me=V.mag()>=2,we=Z.mag()>=2;if(me||we){if(!me||!we)return void 0===this._firstMove&&(this._firstMove=fe),fe-this._firstMove<100&&void 0;var Ae=V.y>0==Z.y>0;return Fs(V)&&Fs(Z)&&Ae}},N}($i),Ui={panStep:100,bearingStep:15,pitchStep:10},yo=function(){var P=Ui;this._panStep=P.panStep,this._bearingStep=P.bearingStep,this._pitchStep=P.pitchStep};function Jo(P){return P*(2-P)}yo.prototype.reset=function(){this._active=!1},yo.prototype.keydown=function(P){var N=this;if(!(P.altKey||P.ctrlKey||P.metaKey)){var V=0,Z=0,fe=0,me=0,we=0;switch(P.keyCode){case 61:case 107:case 171:case 187:V=1;break;case 189:case 109:case 173:V=-1;break;case 37:P.shiftKey?Z=-1:(P.preventDefault(),me=-1);break;case 39:P.shiftKey?Z=1:(P.preventDefault(),me=1);break;case 38:P.shiftKey?fe=1:(P.preventDefault(),we=-1);break;case 40:P.shiftKey?fe=-1:(P.preventDefault(),we=1);break;default:return}return{cameraAnimation:function(Ae){var Re=Ae.getZoom();Ae.easeTo({duration:300,easeId:"keyboardHandler",easing:Jo,zoom:V?Math.round(Re)+V*(P.shiftKey?2:1):Re,bearing:Ae.getBearing()+Z*N._bearingStep,pitch:Ae.getPitch()+fe*N._pitchStep,offset:[-me*N._panStep,-we*N._panStep],center:Ae.getCenter()},{originalEvent:P})}}}},yo.prototype.enable=function(){this._enabled=!0},yo.prototype.disable=function(){this._enabled=!1,this.reset()},yo.prototype.isEnabled=function(){return this._enabled},yo.prototype.isActive=function(){return this._active};var ia=function(P,N){this._map=P,this._el=P.getCanvasContainer(),this._handler=N,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};ia.prototype.setZoomRate=function(P){this._defaultZoomRate=P},ia.prototype.setWheelZoomRate=function(P){this._wheelZoomRate=P},ia.prototype.isEnabled=function(){return!!this._enabled},ia.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},ia.prototype.isZooming=function(){return!!this._zooming},ia.prototype.enable=function(P){this.isEnabled()||(this._enabled=!0,this._aroundCenter=P&&"center"===P.around)},ia.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ia.prototype.wheel=function(P){if(this.isEnabled()){var N=P.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*P.deltaY:P.deltaY,V=e.browser.now(),Z=V-(this._lastWheelEventTime||0);this._lastWheelEventTime=V,0!==N&&N%4.000244140625==0?this._type="wheel":0!==N&&Math.abs(N)<4?this._type="trackpad":Z>400?(this._type=null,this._lastValue=N,this._timeout=setTimeout(this._onTimeout,40,P)):this._type||(this._type=Math.abs(Z*N)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,N+=this._lastValue)),P.shiftKey&&N&&(N/=4),this._type&&(this._lastWheelEvent=P,this._delta-=N,this._active||this._start(P)),P.preventDefault()}},ia.prototype._onTimeout=function(P){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(P)},ia.prototype._start=function(P){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var N=n.mousePos(this._el,P);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(N)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ia.prototype.renderFrame=function(){return this._onScrollFrame()},ia.prototype._onScrollFrame=function(){var P=this;if(this._frameId&&(this._frameId=null,this.isActive())){var N=this._map.transform;if(0!==this._delta){var V="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,Z=2/(1+Math.exp(-Math.abs(this._delta*V)));this._delta<0&&0!==Z&&(Z=1/Z);var fe="number"==typeof this._targetZoom?N.zoomScale(this._targetZoom):N.scale;this._targetZoom=Math.min(N.maxZoom,Math.max(N.minZoom,N.scaleZoom(fe*Z))),"wheel"===this._type&&(this._startZoom=N.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var me,we="number"==typeof this._targetZoom?this._targetZoom:N.zoom,Ae=this._startZoom,Re=this._easing,Xe=!1;if("wheel"===this._type&&Ae&&Re){var nt=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),ht=Re(nt);me=e.number(Ae,we,ht),nt<1?this._frameId||(this._frameId=!0):Xe=!0}else me=we,Xe=!0;return this._active=!0,Xe&&(this._active=!1,this._finishTimeout=setTimeout(function(){P._zooming=!1,P._handler._triggerRenderFrame(),delete P._targetZoom,delete P._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Xe,zoomDelta:me-N.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ia.prototype._smoothOutEasing=function(P){var N=e.ease;if(this._prevEase){var V=this._prevEase,Z=(e.browser.now()-V.start)/V.duration,fe=V.easing(Z+.01)-V.easing(Z),me=.27/Math.sqrt(fe*fe+1e-4)*.01,we=Math.sqrt(.0729-me*me);N=e.bezier(me,we,.25,1)}return this._prevEase={start:e.browser.now(),duration:P,easing:N},N},ia.prototype.reset=function(){this._active=!1};var Mo=function(P,N){this._clickZoom=P,this._tapZoom=N};Mo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Mo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Mo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Mo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ro=function(){this.reset()};Ro.prototype.reset=function(){this._active=!1},Ro.prototype.dblclick=function(P,N){return P.preventDefault(),{cameraAnimation:function(V){V.easeTo({duration:300,zoom:V.getZoom()+(P.shiftKey?-1:1),around:V.unproject(N)},{originalEvent:P})}}},Ro.prototype.enable=function(){this._enabled=!0},Ro.prototype.disable=function(){this._enabled=!1,this.reset()},Ro.prototype.isEnabled=function(){return this._enabled},Ro.prototype.isActive=function(){return this._active};var ka=function(){this._tap=new Yi({numTouches:1,numTaps:1}),this.reset()};ka.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ka.prototype.touchstart=function(P,N,V){this._swipePoint||(this._tapTime&&P.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?V.length>0&&(this._swipePoint=N[0],this._swipeTouch=V[0].identifier):this._tap.touchstart(P,N,V))},ka.prototype.touchmove=function(P,N,V){if(this._tapTime){if(this._swipePoint){if(V[0].identifier!==this._swipeTouch)return;var Z=N[0],fe=Z.y-this._swipePoint.y;return this._swipePoint=Z,P.preventDefault(),this._active=!0,{zoomDelta:fe/128}}}else this._tap.touchmove(P,N,V)},ka.prototype.touchend=function(P,N,V){this._tapTime?this._swipePoint&&0===V.length&&this.reset():this._tap.touchend(P,N,V)&&(this._tapTime=P.timeStamp)},ka.prototype.touchcancel=function(){this.reset()},ka.prototype.enable=function(){this._enabled=!0},ka.prototype.disable=function(){this._enabled=!1,this.reset()},ka.prototype.isEnabled=function(){return this._enabled},ka.prototype.isActive=function(){return this._active};var eo=function(P,N,V){this._el=P,this._mousePan=N,this._touchPan=V};eo.prototype.enable=function(P){this._inertiaOptions=P||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},eo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},eo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},eo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ha=function(P,N,V){this._pitchWithRotate=P.pitchWithRotate,this._mouseRotate=N,this._mousePitch=V};Ha.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Ha.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Ha.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Ha.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Wo=function(P,N,V,Z){this._el=P,this._touchZoom=N,this._touchRotate=V,this._tapDragZoom=Z,this._rotationDisabled=!1,this._enabled=!0};Wo.prototype.enable=function(P){this._touchZoom.enable(P),this._rotationDisabled||this._touchRotate.enable(P),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Wo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Wo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Wo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Wo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Wo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var vl=function(P){return P.zoom||P.drag||P.pitch||P.rotate},fs=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N}(e.Event);function jl(P){return P.panDelta&&P.panDelta.mag()||P.zoomDelta||P.bearingDelta||P.pitchDelta}var ko=function(P,N){this._map=P,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Vr(P),this._bearingSnap=N.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(N),e.bindAll(["handleEvent","handleWindowEvent"],this);var V=this._el;this._listeners=[[V,"touchstart",{passive:!1}],[V,"touchmove",{passive:!1}],[V,"touchend",void 0],[V,"touchcancel",void 0],[V,"mousedown",void 0],[V,"mousemove",void 0],[V,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[V,"mouseover",void 0],[V,"mouseout",void 0],[V,"dblclick",void 0],[V,"click",void 0],[V,"keydown",{capture:!1}],[V,"keyup",void 0],[V,"wheel",{passive:!1}],[V,"contextmenu",void 0],[e.window,"blur",void 0]];for(var Z=0,fe=this._listeners;Z<fe.length;Z+=1){var me=fe[Z],we=me[0];n.addEventListener(we,me[1],we===e.window.document?this.handleWindowEvent:this.handleEvent,me[2])}};ko.prototype.destroy=function(){for(var P=0,N=this._listeners;P<N.length;P+=1){var V=N[P],Z=V[0];n.removeEventListener(Z,V[1],Z===e.window.document?this.handleWindowEvent:this.handleEvent,V[2])}},ko.prototype._addDefaultHandlers=function(P){var N=this._map,V=N.getCanvasContainer();this._add("mapEvent",new lr(N,P));var Z=N.boxZoom=new $r(N,P);this._add("boxZoom",Z);var fe=new sa,me=new Ro;N.doubleClickZoom=new Mo(me,fe),this._add("tapZoom",fe),this._add("clickZoom",me);var we=new ka;this._add("tapDragZoom",we);var Ae=N.touchPitch=new Ra;this._add("touchPitch",Ae);var Re=new ji(P),Xe=new Pi(P);N.dragRotate=new Ha(P,Re,Xe),this._add("mouseRotate",Re,["mousePitch"]),this._add("mousePitch",Xe,["mouseRotate"]);var nt=new pa(P),ht=new fa(P);N.dragPan=new eo(V,nt,ht),this._add("mousePan",nt),this._add("touchPan",ht,["touchZoom","touchRotate"]);var Dt=new Vs,Ot=new Na;N.touchZoomRotate=new Wo(V,Ot,Dt,we),this._add("touchRotate",Dt,["touchPan","touchZoom"]),this._add("touchZoom",Ot,["touchPan","touchRotate"]);var It=N.scrollZoom=new ia(N,this);this._add("scrollZoom",It,["mousePan"]);var Lt=N.keyboard=new yo;this._add("keyboard",Lt),this._add("blockableMapEvent",new Ti(N));for(var St=0,Gt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];St<Gt.length;St+=1){var Vt=Gt[St];P.interactive&&P[Vt]&&N[Vt].enable(P[Vt])}},ko.prototype._add=function(P,N,V){this._handlers.push({handlerName:P,handler:N,allowed:V}),this._handlersById[P]=N},ko.prototype.stop=function(){if(!this._updatingCamera){for(var P=0,N=this._handlers;P<N.length;P+=1)N[P].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ko.prototype.isActive=function(){for(var P=0,N=this._handlers;P<N.length;P+=1)if(N[P].handler.isActive())return!0;return!1},ko.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ko.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ko.prototype.isMoving=function(){return Boolean(vl(this._eventsInProgress))||this.isZooming()},ko.prototype._blockedByActive=function(P,N,V){for(var Z in P)if(Z!==V&&(!N||N.indexOf(Z)<0))return!0;return!1},ko.prototype.handleWindowEvent=function(P){this.handleEvent(P,P.type+"Window")},ko.prototype._getMapTouches=function(P){for(var N=[],V=0,Z=P;V<Z.length;V+=1){var fe=Z[V];this._el.contains(fe.target)&&N.push(fe)}return N},ko.prototype.handleEvent=function(P,N){if("blur"!==P.type){this._updatingCamera=!0;for(var V="renderFrame"===P.type?void 0:P,Z={needsRenderFrame:!1},fe={},me={},we=P.touches?this._getMapTouches(P.touches):void 0,Ae=we?n.touchPos(this._el,we):n.mousePos(this._el,P),Re=0,Xe=this._handlers;Re<Xe.length;Re+=1){var nt=Xe[Re],ht=nt.handlerName,Dt=nt.handler,Ot=nt.allowed;if(Dt.isEnabled()){var It=void 0;this._blockedByActive(me,Ot,ht)?Dt.reset():Dt[N||P.type]&&(It=Dt[N||P.type](P,Ae,we),this.mergeHandlerResult(Z,fe,It,ht,V),It&&It.needsRenderFrame&&this._triggerRenderFrame()),(It||Dt.isActive())&&(me[ht]=Dt)}}var Lt={};for(var St in this._previousActiveHandlers)me[St]||(Lt[St]=V);this._previousActiveHandlers=me,(Object.keys(Lt).length||jl(Z))&&(this._changes.push([Z,fe,Lt]),this._triggerRenderFrame()),(Object.keys(me).length||jl(Z))&&this._map._stop(!0),this._updatingCamera=!1;var Gt=Z.cameraAnimation;Gt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Gt(this._map))}else this.stop()},ko.prototype.mergeHandlerResult=function(P,N,V,Z,fe){if(V){e.extend(P,V);var me={handlerName:Z,originalEvent:V.originalEvent||fe};void 0!==V.zoomDelta&&(N.zoom=me),void 0!==V.panDelta&&(N.drag=me),void 0!==V.pitchDelta&&(N.pitch=me),void 0!==V.bearingDelta&&(N.rotate=me)}},ko.prototype._applyChanges=function(){for(var P={},N={},V={},Z=0,fe=this._changes;Z<fe.length;Z+=1){var me=fe[Z],we=me[0],Ae=me[1],Re=me[2];we.panDelta&&(P.panDelta=(P.panDelta||new e.Point(0,0))._add(we.panDelta)),we.zoomDelta&&(P.zoomDelta=(P.zoomDelta||0)+we.zoomDelta),we.bearingDelta&&(P.bearingDelta=(P.bearingDelta||0)+we.bearingDelta),we.pitchDelta&&(P.pitchDelta=(P.pitchDelta||0)+we.pitchDelta),void 0!==we.around&&(P.around=we.around),void 0!==we.pinchAround&&(P.pinchAround=we.pinchAround),we.noInertia&&(P.noInertia=we.noInertia),e.extend(N,Ae),e.extend(V,Re)}this._updateMapTransform(P,N,V),this._changes=[]},ko.prototype._updateMapTransform=function(P,N,V){var Z=this._map,fe=Z.transform;if(!jl(P))return this._fireEvents(N,V);var me=P.panDelta,we=P.zoomDelta,Ae=P.bearingDelta,Re=P.pitchDelta,Xe=P.around,nt=P.pinchAround;void 0!==nt&&(Xe=nt),Z._stop(!0),Xe=Xe||Z.transform.centerPoint;var ht=fe.pointLocation(me?Xe.sub(me):Xe);Ae&&(fe.bearing+=Ae),Re&&(fe.pitch+=Re),we&&(fe.zoom+=we),fe.setLocationAtPoint(ht,Xe),this._map._update(),P.noInertia||this._inertia.record(P),this._fireEvents(N,V)},ko.prototype._fireEvents=function(P,N){var V=this,Z=vl(this._eventsInProgress),fe=vl(P),me={};for(var we in P)this._eventsInProgress[we]||(me[we+"start"]=P[we].originalEvent),this._eventsInProgress[we]=P[we];for(var Re in!Z&&fe&&this._fireEvent("movestart",fe.originalEvent),me)this._fireEvent(Re,me[Re]);for(var Xe in P.rotate&&(this._bearingChanged=!0),fe&&this._fireEvent("move",fe.originalEvent),P)this._fireEvent(Xe,P[Xe].originalEvent);var ht,Dt={};for(var Ot in this._eventsInProgress){var It=this._eventsInProgress[Ot],Lt=It.handlerName,St=It.originalEvent;this._handlersById[Lt].isActive()||(delete this._eventsInProgress[Ot],Dt[Ot+"end"]=ht=N[Lt]||St)}for(var Gt in Dt)this._fireEvent(Gt,Dt[Gt]);var Vt=vl(this._eventsInProgress);if((Z||fe)&&!Vt){this._updatingCamera=!0;var Yt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),xn=function(En){return 0!==En&&-V._bearingSnap<En&&En<V._bearingSnap};Yt?(xn(Yt.bearing||this._map.getBearing())&&(Yt.bearing=0),this._map.easeTo(Yt,{originalEvent:ht})):(this._map.fire(new e.Event("moveend",{originalEvent:ht})),xn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ko.prototype._fireEvent=function(P,N){this._map.fire(new e.Event(P,N?{originalEvent:N}:{}))},ko.prototype._triggerRenderFrame=function(){var P=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(N){delete P._frameId,P.handleEvent(new fs("renderFrame",{timeStamp:N})),P._applyChanges()}))};var Qi=function(P){function N(V,Z){P.call(this),this._moving=!1,this._zooming=!1,this.transform=V,this._bearingSnap=Z.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},N.prototype.setCenter=function(V,Z){return this.jumpTo({center:V},Z)},N.prototype.panBy=function(V,Z,fe){return V=e.Point.convert(V).mult(-1),this.panTo(this.transform.center,e.extend({offset:V},Z),fe)},N.prototype.panTo=function(V,Z,fe){return this.easeTo(e.extend({center:V},Z),fe)},N.prototype.getZoom=function(){return this.transform.zoom},N.prototype.setZoom=function(V,Z){return this.jumpTo({zoom:V},Z),this},N.prototype.zoomTo=function(V,Z,fe){return this.easeTo(e.extend({zoom:V},Z),fe)},N.prototype.zoomIn=function(V,Z){return this.zoomTo(this.getZoom()+1,V,Z),this},N.prototype.zoomOut=function(V,Z){return this.zoomTo(this.getZoom()-1,V,Z),this},N.prototype.getBearing=function(){return this.transform.bearing},N.prototype.setBearing=function(V,Z){return this.jumpTo({bearing:V},Z),this},N.prototype.getPadding=function(){return this.transform.padding},N.prototype.setPadding=function(V,Z){return this.jumpTo({padding:V},Z),this},N.prototype.rotateTo=function(V,Z,fe){return this.easeTo(e.extend({bearing:V},Z),fe)},N.prototype.resetNorth=function(V,Z){return this.rotateTo(0,e.extend({duration:1e3},V),Z),this},N.prototype.resetNorthPitch=function(V,Z){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},V),Z),this},N.prototype.snapToNorth=function(V,Z){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(V,Z):this},N.prototype.getPitch=function(){return this.transform.pitch},N.prototype.setPitch=function(V,Z){return this.jumpTo({pitch:V},Z),this},N.prototype.cameraForBounds=function(V,Z){return V=e.LngLatBounds.convert(V),this._cameraForBoxAndBearing(V.getNorthWest(),V.getSouthEast(),0,Z)},N.prototype._cameraForBoxAndBearing=function(V,Z,fe,me){var we={top:0,bottom:0,right:0,left:0};if("number"==typeof(me=e.extend({padding:we,offset:[0,0],maxZoom:this.transform.maxZoom},me)).padding){var Ae=me.padding;me.padding={top:Ae,bottom:Ae,right:Ae,left:Ae}}me.padding=e.extend(we,me.padding);var Re=this.transform,Xe=Re.padding,nt=Re.project(e.LngLat.convert(V)),ht=Re.project(e.LngLat.convert(Z)),Dt=nt.rotate(-fe*Math.PI/180),Ot=ht.rotate(-fe*Math.PI/180),It=new e.Point(Math.max(Dt.x,Ot.x),Math.max(Dt.y,Ot.y)),Lt=new e.Point(Math.min(Dt.x,Ot.x),Math.min(Dt.y,Ot.y)),St=It.sub(Lt),Gt=(Re.width-(Xe.left+Xe.right+me.padding.left+me.padding.right))/St.x,Vt=(Re.height-(Xe.top+Xe.bottom+me.padding.top+me.padding.bottom))/St.y;if(!(Vt<0||Gt<0)){var Yt=Math.min(Re.scaleZoom(Re.scale*Math.min(Gt,Vt)),me.maxZoom),xn=e.Point.convert(me.offset),Nn=new e.Point(xn.x+(me.padding.left-me.padding.right)/2,xn.y+(me.padding.top-me.padding.bottom)/2).mult(Re.scale/Re.zoomScale(Yt));return{center:Re.unproject(nt.add(ht).div(2).sub(Nn)),zoom:Yt,bearing:fe}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},N.prototype.fitBounds=function(V,Z,fe){return this._fitInternal(this.cameraForBounds(V,Z),Z,fe)},N.prototype.fitScreenCoordinates=function(V,Z,fe,me,we){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(V)),this.transform.pointLocation(e.Point.convert(Z)),fe,me),me,we)},N.prototype._fitInternal=function(V,Z,fe){return V?(delete(Z=e.extend(V,Z)).padding,Z.linear?this.easeTo(Z,fe):this.flyTo(Z,fe)):this},N.prototype.jumpTo=function(V,Z){this.stop();var fe=this.transform,me=!1,we=!1,Ae=!1;return"zoom"in V&&fe.zoom!==+V.zoom&&(me=!0,fe.zoom=+V.zoom),void 0!==V.center&&(fe.center=e.LngLat.convert(V.center)),"bearing"in V&&fe.bearing!==+V.bearing&&(we=!0,fe.bearing=+V.bearing),"pitch"in V&&fe.pitch!==+V.pitch&&(Ae=!0,fe.pitch=+V.pitch),null==V.padding||fe.isPaddingEqual(V.padding)||(fe.padding=V.padding),this.fire(new e.Event("movestart",Z)).fire(new e.Event("move",Z)),me&&this.fire(new e.Event("zoomstart",Z)).fire(new e.Event("zoom",Z)).fire(new e.Event("zoomend",Z)),we&&this.fire(new e.Event("rotatestart",Z)).fire(new e.Event("rotate",Z)).fire(new e.Event("rotateend",Z)),Ae&&this.fire(new e.Event("pitchstart",Z)).fire(new e.Event("pitch",Z)).fire(new e.Event("pitchend",Z)),this.fire(new e.Event("moveend",Z))},N.prototype.easeTo=function(V,Z){var fe=this;this._stop(!1,V.easeId),(!1===(V=e.extend({offset:[0,0],duration:500,easing:e.ease},V)).animate||!V.essential&&e.browser.prefersReducedMotion)&&(V.duration=0);var me=this.transform,we=this.getZoom(),Ae=this.getBearing(),Re=this.getPitch(),Xe=this.getPadding(),nt="zoom"in V?+V.zoom:we,ht="bearing"in V?this._normalizeBearing(V.bearing,Ae):Ae,Dt="pitch"in V?+V.pitch:Re,Ot="padding"in V?V.padding:me.padding,It=e.Point.convert(V.offset),Lt=me.centerPoint.add(It),St=me.pointLocation(Lt),Gt=e.LngLat.convert(V.center||St);this._normalizeCenter(Gt);var Vt,Yt,xn=me.project(St),En=me.project(Gt).sub(xn),jn=me.zoomScale(nt-we);V.around&&(Vt=e.LngLat.convert(V.around),Yt=me.locationPoint(Vt));var Nn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||nt!==we,this._rotating=this._rotating||Ae!==ht,this._pitching=this._pitching||Dt!==Re,this._padding=!me.isPaddingEqual(Ot),this._easeId=V.easeId,this._prepareEase(Z,V.noMoveStart,Nn),clearTimeout(this._easeEndTimeoutID),this._ease(function(hr){if(fe._zooming&&(me.zoom=e.number(we,nt,hr)),fe._rotating&&(me.bearing=e.number(Ae,ht,hr)),fe._pitching&&(me.pitch=e.number(Re,Dt,hr)),fe._padding&&(me.interpolatePadding(Xe,Ot,hr),Lt=me.centerPoint.add(It)),Vt)me.setLocationAtPoint(Vt,Yt);else{var dr=me.zoomScale(me.zoom-we),Er=nt>we?Math.min(2,jn):Math.max(.5,jn),wr=Math.pow(Er,1-hr),Jr=me.unproject(xn.add(En.mult(hr*wr)).mult(dr));me.setLocationAtPoint(me.renderWorldCopies?Jr.wrap():Jr,Lt)}fe._fireMoveEvents(Z)},function(hr){fe._afterEase(Z,hr)},V),this},N.prototype._prepareEase=function(V,Z,fe){void 0===fe&&(fe={}),this._moving=!0,Z||fe.moving||this.fire(new e.Event("movestart",V)),this._zooming&&!fe.zooming&&this.fire(new e.Event("zoomstart",V)),this._rotating&&!fe.rotating&&this.fire(new e.Event("rotatestart",V)),this._pitching&&!fe.pitching&&this.fire(new e.Event("pitchstart",V))},N.prototype._fireMoveEvents=function(V){this.fire(new e.Event("move",V)),this._zooming&&this.fire(new e.Event("zoom",V)),this._rotating&&this.fire(new e.Event("rotate",V)),this._pitching&&this.fire(new e.Event("pitch",V))},N.prototype._afterEase=function(V,Z){if(!this._easeId||!Z||this._easeId!==Z){delete this._easeId;var fe=this._zooming,me=this._rotating,we=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,fe&&this.fire(new e.Event("zoomend",V)),me&&this.fire(new e.Event("rotateend",V)),we&&this.fire(new e.Event("pitchend",V)),this.fire(new e.Event("moveend",V))}},N.prototype.flyTo=function(V,Z){var fe=this;if(!V.essential&&e.browser.prefersReducedMotion){var me=e.pick(V,["center","zoom","bearing","pitch","around"]);return this.jumpTo(me,Z)}this.stop(),V=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},V);var we=this.transform,Ae=this.getZoom(),Re=this.getBearing(),Xe=this.getPitch(),nt=this.getPadding(),ht="zoom"in V?e.clamp(+V.zoom,we.minZoom,we.maxZoom):Ae,Dt="bearing"in V?this._normalizeBearing(V.bearing,Re):Re,Ot="pitch"in V?+V.pitch:Xe,It="padding"in V?V.padding:we.padding,Lt=we.zoomScale(ht-Ae),St=e.Point.convert(V.offset),Gt=we.centerPoint.add(St),Vt=we.pointLocation(Gt),Yt=e.LngLat.convert(V.center||Vt);this._normalizeCenter(Yt);var xn=we.project(Vt),En=we.project(Yt).sub(xn),jn=V.curve,Nn=Math.max(we.width,we.height),hr=Nn/Lt,dr=En.mag();if("minZoom"in V){var Er=e.clamp(Math.min(V.minZoom,Ae,ht),we.minZoom,we.maxZoom),wr=Nn/we.zoomScale(Er-Ae);jn=Math.sqrt(wr/dr*2)}var Jr=jn*jn;function pi(xi){var Hi=(hr*hr-Nn*Nn+(xi?-1:1)*Jr*Jr*dr*dr)/(2*(xi?hr:Nn)*Jr*dr);return Math.log(Math.sqrt(Hi*Hi+1)-Hi)}function Li(xi){return(Math.exp(xi)-Math.exp(-xi))/2}function ir(xi){return(Math.exp(xi)+Math.exp(-xi))/2}var jr=pi(0),mi=function(xi){return ir(jr)/ir(jr+jn*xi)},fi=function(xi){return Nn*((ir(jr)*(Li(Hi=jr+jn*xi)/ir(Hi))-Li(jr))/Jr)/dr;var Hi},Mi=(pi(1)-jr)/jn;if(Math.abs(dr)<1e-6||!isFinite(Mi)){if(Math.abs(Nn-hr)<1e-6)return this.easeTo(V,Z);var Ri=hr<Nn?-1:1;Mi=Math.abs(Math.log(hr/Nn))/jn,fi=function(){return 0},mi=function(xi){return Math.exp(Ri*jn*xi)}}return V.duration="duration"in V?+V.duration:1e3*Mi/("screenSpeed"in V?+V.screenSpeed/jn:+V.speed),V.maxDuration&&V.duration>V.maxDuration&&(V.duration=0),this._zooming=!0,this._rotating=Re!==Dt,this._pitching=Ot!==Xe,this._padding=!we.isPaddingEqual(It),this._prepareEase(Z,!1),this._ease(function(xi){var Hi=xi*Mi,Bi=1/mi(Hi);we.zoom=1===xi?ht:Ae+we.scaleZoom(Bi),fe._rotating&&(we.bearing=e.number(Re,Dt,xi)),fe._pitching&&(we.pitch=e.number(Xe,Ot,xi)),fe._padding&&(we.interpolatePadding(nt,It,xi),Gt=we.centerPoint.add(St));var ra=1===xi?Yt:we.unproject(xn.add(En.mult(fi(Hi))).mult(Bi));we.setLocationAtPoint(we.renderWorldCopies?ra.wrap():ra,Gt),fe._fireMoveEvents(Z)},function(){return fe._afterEase(Z)},V),this},N.prototype.isEasing=function(){return!!this._easeFrameId},N.prototype.stop=function(){return this._stop()},N.prototype._stop=function(V,Z){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var fe=this._onEaseEnd;delete this._onEaseEnd,fe.call(this,Z)}if(!V){var me=this.handlers;me&&me.stop()}return this},N.prototype._ease=function(V,Z,fe){!1===fe.animate||0===fe.duration?(V(1),Z()):(this._easeStart=e.browser.now(),this._easeOptions=fe,this._onEaseFrame=V,this._onEaseEnd=Z,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},N.prototype._renderFrameCallback=function(){var V=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(V)),V<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},N.prototype._normalizeBearing=function(V,Z){V=e.wrap(V,-180,180);var fe=Math.abs(V-Z);return Math.abs(V-360-Z)<fe&&(V-=360),Math.abs(V+360-Z)<fe&&(V+=360),V},N.prototype._normalizeCenter=function(V){var Z=this.transform;if(Z.renderWorldCopies&&!Z.lngRange){var fe=V.lng-Z.center.lng;V.lng+=fe>180?-360:fe<-180?360:0}},N}(e.Evented),Go=function(P){void 0===P&&(P={}),this.options=P,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Go.prototype.getDefaultPosition=function(){return"bottom-right"},Go.prototype.onAdd=function(P){var N=this.options&&this.options.compact;return this._map=P,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),N&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===N&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Go.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Go.prototype._updateEditLink=function(){var P=this._editLink;P||(P=this._editLink=this._container.querySelector(".mapbox-improve-map"));var N=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(P){var V=N.reduce(function(Z,fe,me){return fe.value&&(Z+=fe.key+"="+fe.value+(me<N.length-1?"&":"")),Z},"?");P.href=e.config.FEEDBACK_URL+"/"+V+(this._map._hash?this._map._hash.getHashString(!0):""),P.rel="noopener nofollow"}},Go.prototype._updateData=function(P){!P||"metadata"!==P.sourceDataType&&"style"!==P.dataType||(this._updateAttributions(),this._updateEditLink())},Go.prototype._updateAttributions=function(){if(this._map.style){var P=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?P=P.concat(this.options.customAttribution.map(function(Ae){return"string"!=typeof Ae?"":Ae})):"string"==typeof this.options.customAttribution&&P.push(this.options.customAttribution)),this._map.style.stylesheet){var N=this._map.style.stylesheet;this.styleOwner=N.owner,this.styleId=N.id}var V=this._map.style.sourceCaches;for(var Z in V){var fe=V[Z];if(fe.used){var me=fe.getSource();me.attribution&&P.indexOf(me.attribution)<0&&P.push(me.attribution)}}P.sort(function(Ae,Re){return Ae.length-Re.length});var we=(P=P.filter(function(Ae,Re){for(var Xe=Re+1;Xe<P.length;Xe++)if(P[Xe].indexOf(Ae)>=0)return!1;return!0})).join(" | ");we!==this._attribHTML&&(this._attribHTML=we,P.length?(this._innerContainer.innerHTML=we,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Go.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var cl=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};cl.prototype.onAdd=function(P){this._map=P,this._container=n.create("div","mapboxgl-ctrl");var N=n.create("a","mapboxgl-ctrl-logo");return N.target="_blank",N.rel="noopener nofollow",N.href="https://www.mapbox.com/",N.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),N.setAttribute("rel","noopener nofollow"),this._container.appendChild(N),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},cl.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},cl.prototype.getDefaultPosition=function(){return"bottom-left"},cl.prototype._updateLogo=function(P){P&&"metadata"!==P.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},cl.prototype._logoRequired=function(){if(this._map.style){var P=this._map.style.sourceCaches;for(var N in P)if(P[N].getSource().mapbox_logo)return!0;return!1}},cl.prototype._updateCompact=function(){var P=this._container.children;if(P.length){var N=P[0];this._map.getCanvasContainer().offsetWidth<250?N.classList.add("mapboxgl-compact"):N.classList.remove("mapboxgl-compact")}};var Ci=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ci.prototype.add=function(P){var N=++this._id;return this._queue.push({callback:P,id:N,cancelled:!1}),N},Ci.prototype.remove=function(P){for(var N=this._currentlyRunning,V=0,Z=N?this._queue.concat(N):this._queue;V<Z.length;V+=1){var fe=Z[V];if(fe.id===P)return void(fe.cancelled=!0)}},Ci.prototype.run=function(P){void 0===P&&(P=0);var N=this._currentlyRunning=this._queue;this._queue=[];for(var V=0,Z=N;V<Z.length;V+=1){var fe=Z[V];if(!fe.cancelled&&(fe.callback(P),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ci.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Vi={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ul=e.window.HTMLImageElement,tu=e.window.HTMLElement,fl=e.window.ImageBitmap,Zr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},la=function(P){function N(Z){var fe=this;if(null!=(Z=e.extend({},Zr,Z)).minZoom&&null!=Z.maxZoom&&Z.minZoom>Z.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=Z.minPitch&&null!=Z.maxPitch&&Z.minPitch>Z.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=Z.minPitch&&Z.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=Z.maxPitch&&Z.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var me=new Kt(Z.minZoom,Z.maxZoom,Z.minPitch,Z.maxPitch,Z.renderWorldCopies);if(P.call(this,me,Z),this._interactive=Z.interactive,this._maxTileCacheSize=Z.maxTileCacheSize,this._failIfMajorPerformanceCaveat=Z.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=Z.preserveDrawingBuffer,this._antialias=Z.antialias,this._trackResize=Z.trackResize,this._bearingSnap=Z.bearingSnap,this._refreshExpiredTiles=Z.refreshExpiredTiles,this._fadeDuration=Z.fadeDuration,this._crossSourceCollisions=Z.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=Z.collectResourceTiming,this._renderTaskQueue=new Ci,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Vi,Z.locale),this._requestManager=new e.RequestManager(Z.transformRequest,Z.accessToken),"string"==typeof Z.container){if(this._container=e.window.document.getElementById(Z.container),!this._container)throw new Error("Container '"+Z.container+"' not found.")}else{if(!(Z.container instanceof tu))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=Z.container}if(Z.maxBounds&&this.setMaxBounds(Z.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return fe._update(!1)}),this.on("moveend",function(){return fe._update(!1)}),this.on("zoom",function(){return fe._update(!0)}),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ko(this,Z),this._hash=Z.hash&&new Yn("string"==typeof Z.hash&&Z.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:Z.center,zoom:Z.zoom,bearing:Z.bearing,pitch:Z.pitch}),Z.bounds&&(this.resize(),this.fitBounds(Z.bounds,e.extend({},Z.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=Z.localIdeographFontFamily,Z.style&&this.setStyle(Z.style,{localIdeographFontFamily:Z.localIdeographFontFamily}),Z.attributionControl&&this.addControl(new Go({customAttribution:Z.customAttribution})),this.addControl(new cl,Z.logoPosition),this.on("style.load",function(){fe.transform.unmodified&&fe.jumpTo(fe.style.stylesheet)}),this.on("data",function(Ae){fe._update("style"===Ae.dataType),fe.fire(new e.Event(Ae.dataType+"data",Ae))}),this.on("dataloading",function(Ae){fe.fire(new e.Event(Ae.dataType+"dataloading",Ae))})}P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N;var V={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return N.prototype._getMapId=function(){return this._mapId},N.prototype.addControl=function(Z,fe){if(void 0===fe&&Z.getDefaultPosition&&(fe=Z.getDefaultPosition()),void 0===fe&&(fe="top-right"),!Z||!Z.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var me=Z.onAdd(this);this._controls.push(Z);var we=this._controlPositions[fe];return-1!==fe.indexOf("bottom")?we.insertBefore(me,we.firstChild):we.appendChild(me),this},N.prototype.removeControl=function(Z){if(!Z||!Z.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var fe=this._controls.indexOf(Z);return fe>-1&&this._controls.splice(fe,1),Z.onRemove(this),this},N.prototype.resize=function(Z){var fe=this._containerDimensions(),me=fe[0],we=fe[1];this._resizeCanvas(me,we),this.transform.resize(me,we),this.painter.resize(me,we);var Ae=!this._moving;return Ae&&(this.stop(),this.fire(new e.Event("movestart",Z)).fire(new e.Event("move",Z))),this.fire(new e.Event("resize",Z)),Ae&&this.fire(new e.Event("moveend",Z)),this},N.prototype.getBounds=function(){return this.transform.getBounds()},N.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},N.prototype.setMaxBounds=function(Z){return this.transform.setMaxBounds(e.LngLatBounds.convert(Z)),this._update()},N.prototype.setMinZoom=function(Z){if((Z=null==Z?-2:Z)>=-2&&Z<=this.transform.maxZoom)return this.transform.minZoom=Z,this._update(),this.getZoom()<Z&&this.setZoom(Z),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},N.prototype.getMinZoom=function(){return this.transform.minZoom},N.prototype.setMaxZoom=function(Z){if((Z=null==Z?22:Z)>=this.transform.minZoom)return this.transform.maxZoom=Z,this._update(),this.getZoom()>Z&&this.setZoom(Z),this;throw new Error("maxZoom must be greater than the current minZoom")},N.prototype.getMaxZoom=function(){return this.transform.maxZoom},N.prototype.setMinPitch=function(Z){if((Z=null==Z?0:Z)<0)throw new Error("minPitch must be greater than or equal to 0");if(Z>=0&&Z<=this.transform.maxPitch)return this.transform.minPitch=Z,this._update(),this.getPitch()<Z&&this.setPitch(Z),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},N.prototype.getMinPitch=function(){return this.transform.minPitch},N.prototype.setMaxPitch=function(Z){if((Z=null==Z?60:Z)>60)throw new Error("maxPitch must be less than or equal to 60");if(Z>=this.transform.minPitch)return this.transform.maxPitch=Z,this._update(),this.getPitch()>Z&&this.setPitch(Z),this;throw new Error("maxPitch must be greater than the current minPitch")},N.prototype.getMaxPitch=function(){return this.transform.maxPitch},N.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},N.prototype.setRenderWorldCopies=function(Z){return this.transform.renderWorldCopies=Z,this._update()},N.prototype.project=function(Z){return this.transform.locationPoint(e.LngLat.convert(Z))},N.prototype.unproject=function(Z){return this.transform.pointLocation(e.Point.convert(Z))},N.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},N.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},N.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},N.prototype._createDelegatedListener=function(Z,fe,me){var we,Ae=this;if("mouseenter"===Z||"mouseover"===Z){var Re=!1;return{layer:fe,listener:me,delegates:{mousemove:function(nt){var ht=Ae.getLayer(fe)?Ae.queryRenderedFeatures(nt.point,{layers:[fe]}):[];ht.length?Re||(Re=!0,me.call(Ae,new ii(Z,Ae,nt.originalEvent,{features:ht}))):Re=!1},mouseout:function(){Re=!1}}}}if("mouseleave"===Z||"mouseout"===Z){var Xe=!1;return{layer:fe,listener:me,delegates:{mousemove:function(nt){(Ae.getLayer(fe)?Ae.queryRenderedFeatures(nt.point,{layers:[fe]}):[]).length?Xe=!0:Xe&&(Xe=!1,me.call(Ae,new ii(Z,Ae,nt.originalEvent)))},mouseout:function(nt){Xe&&(Xe=!1,me.call(Ae,new ii(Z,Ae,nt.originalEvent)))}}}}return{layer:fe,listener:me,delegates:(we={},we[Z]=function(nt){var ht=Ae.getLayer(fe)?Ae.queryRenderedFeatures(nt.point,{layers:[fe]}):[];ht.length&&(nt.features=ht,me.call(Ae,nt),delete nt.features)},we)}},N.prototype.on=function(Z,fe,me){if(void 0===me)return P.prototype.on.call(this,Z,fe);var we=this._createDelegatedListener(Z,fe,me);for(var Ae in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[Z]=this._delegatedListeners[Z]||[],this._delegatedListeners[Z].push(we),we.delegates)this.on(Ae,we.delegates[Ae]);return this},N.prototype.once=function(Z,fe,me){if(void 0===me)return P.prototype.once.call(this,Z,fe);var we=this._createDelegatedListener(Z,fe,me);for(var Ae in we.delegates)this.once(Ae,we.delegates[Ae]);return this},N.prototype.off=function(Z,fe,me){var we=this;return void 0===me?P.prototype.off.call(this,Z,fe):(this._delegatedListeners&&this._delegatedListeners[Z]&&function(Ae){for(var Re=Ae[Z],Xe=0;Xe<Re.length;Xe++){var nt=Re[Xe];if(nt.layer===fe&&nt.listener===me){for(var ht in nt.delegates)we.off(ht,nt.delegates[ht]);return Re.splice(Xe,1),we}}}(this._delegatedListeners),this)},N.prototype.queryRenderedFeatures=function(Z,fe){if(!this.style)return[];var me;if(void 0!==fe||void 0===Z||Z instanceof e.Point||Array.isArray(Z)||(fe=Z,Z=void 0),fe=fe||{},(Z=Z||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof Z[0])me=[e.Point.convert(Z)];else{var we=e.Point.convert(Z[0]),Ae=e.Point.convert(Z[1]);me=[we,new e.Point(Ae.x,we.y),Ae,new e.Point(we.x,Ae.y),we]}return this.style.queryRenderedFeatures(me,fe,this.transform)},N.prototype.querySourceFeatures=function(Z,fe){return this.style.querySourceFeatures(Z,fe)},N.prototype.setStyle=function(Z,fe){return!1!==(fe=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},fe)).diff&&fe.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&Z?(this._diffStyle(Z,fe),this):(this._localIdeographFontFamily=fe.localIdeographFontFamily,this._updateStyle(Z,fe))},N.prototype._getUIString=function(Z){var fe=this._locale[Z];if(null==fe)throw new Error("Missing UI string '"+Z+"'");return fe},N.prototype._updateStyle=function(Z,fe){return this.style&&(this.style.setEventedParent(null),this.style._remove()),Z?(this.style=new cr(this,fe||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof Z?this.style.loadURL(Z):this.style.loadJSON(Z),this):(delete this.style,this)},N.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new cr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},N.prototype._diffStyle=function(Z,fe){var me=this;if("string"==typeof Z){var we=this._requestManager.normalizeStyleURL(Z),Ae=this._requestManager.transformRequest(we,e.ResourceType.Style);e.getJSON(Ae,function(Re,Xe){Re?me.fire(new e.ErrorEvent(Re)):Xe&&me._updateDiff(Xe,fe)})}else"object"==typeof Z&&this._updateDiff(Z,fe)},N.prototype._updateDiff=function(Z,fe){try{this.style.setState(Z)&&this._update(!0)}catch(me){e.warnOnce("Unable to perform style diff: "+(me.message||me.error||me)+".  Rebuilding the style from scratch."),this._updateStyle(Z,fe)}},N.prototype.getStyle=function(){if(this.style)return this.style.serialize()},N.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},N.prototype.addSource=function(Z,fe){return this._lazyInitEmptyStyle(),this.style.addSource(Z,fe),this._update(!0)},N.prototype.isSourceLoaded=function(Z){var fe=this.style&&this.style.sourceCaches[Z];if(void 0!==fe)return fe.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+Z+"'")))},N.prototype.areTilesLoaded=function(){var Z=this.style&&this.style.sourceCaches;for(var fe in Z){var me=Z[fe]._tiles;for(var we in me){var Ae=me[we];if("loaded"!==Ae.state&&"errored"!==Ae.state)return!1}}return!0},N.prototype.addSourceType=function(Z,fe,me){return this._lazyInitEmptyStyle(),this.style.addSourceType(Z,fe,me)},N.prototype.removeSource=function(Z){return this.style.removeSource(Z),this._update(!0)},N.prototype.getSource=function(Z){return this.style.getSource(Z)},N.prototype.addImage=function(Z,fe,me){void 0===me&&(me={});var we=me.pixelRatio;void 0===we&&(we=1);var Ae=me.sdf;void 0===Ae&&(Ae=!1);var Re=me.stretchX,Xe=me.stretchY,nt=me.content;if(this._lazyInitEmptyStyle(),fe instanceof Ul||fl&&fe instanceof fl){var ht=e.browser.getImageData(fe);this.style.addImage(Z,{data:new e.RGBAImage({width:ht.width,height:ht.height},ht.data),pixelRatio:we,stretchX:Re,stretchY:Xe,content:nt,sdf:Ae,version:0})}else{if(void 0===fe.width||void 0===fe.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Vt=fe;this.style.addImage(Z,{data:new e.RGBAImage({width:fe.width,height:fe.height},new Uint8Array(fe.data)),pixelRatio:we,stretchX:Re,stretchY:Xe,content:nt,sdf:Ae,version:0,userImage:Vt}),Vt.onAdd&&Vt.onAdd(this,Z)}},N.prototype.updateImage=function(Z,fe){var me=this.style.getImage(Z);if(!me)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var we=fe instanceof Ul||fl&&fe instanceof fl?e.browser.getImageData(fe):fe,Ae=we.width,Re=we.height,Xe=we.data;return void 0===Ae||void 0===Re?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):Ae!==me.data.width||Re!==me.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(me.data.replace(Xe,!(fe instanceof Ul||fl&&fe instanceof fl)),void this.style.updateImage(Z,me))},N.prototype.hasImage=function(Z){return Z?!!this.style.getImage(Z):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},N.prototype.removeImage=function(Z){this.style.removeImage(Z)},N.prototype.loadImage=function(Z,fe){e.getImage(this._requestManager.transformRequest(Z,e.ResourceType.Image),fe)},N.prototype.listImages=function(){return this.style.listImages()},N.prototype.addLayer=function(Z,fe){return this._lazyInitEmptyStyle(),this.style.addLayer(Z,fe),this._update(!0)},N.prototype.moveLayer=function(Z,fe){return this.style.moveLayer(Z,fe),this._update(!0)},N.prototype.removeLayer=function(Z){return this.style.removeLayer(Z),this._update(!0)},N.prototype.getLayer=function(Z){return this.style.getLayer(Z)},N.prototype.setLayerZoomRange=function(Z,fe,me){return this.style.setLayerZoomRange(Z,fe,me),this._update(!0)},N.prototype.setFilter=function(Z,fe,me){return void 0===me&&(me={}),this.style.setFilter(Z,fe,me),this._update(!0)},N.prototype.getFilter=function(Z){return this.style.getFilter(Z)},N.prototype.setPaintProperty=function(Z,fe,me,we){return void 0===we&&(we={}),this.style.setPaintProperty(Z,fe,me,we),this._update(!0)},N.prototype.getPaintProperty=function(Z,fe){return this.style.getPaintProperty(Z,fe)},N.prototype.setLayoutProperty=function(Z,fe,me,we){return void 0===we&&(we={}),this.style.setLayoutProperty(Z,fe,me,we),this._update(!0)},N.prototype.getLayoutProperty=function(Z,fe){return this.style.getLayoutProperty(Z,fe)},N.prototype.setLight=function(Z,fe){return void 0===fe&&(fe={}),this._lazyInitEmptyStyle(),this.style.setLight(Z,fe),this._update(!0)},N.prototype.getLight=function(){return this.style.getLight()},N.prototype.setFeatureState=function(Z,fe){return this.style.setFeatureState(Z,fe),this._update()},N.prototype.removeFeatureState=function(Z,fe){return this.style.removeFeatureState(Z,fe),this._update()},N.prototype.getFeatureState=function(Z){return this.style.getFeatureState(Z)},N.prototype.getContainer=function(){return this._container},N.prototype.getCanvasContainer=function(){return this._canvasContainer},N.prototype.getCanvas=function(){return this._canvas},N.prototype._containerDimensions=function(){var Z=0,fe=0;return this._container&&(Z=this._container.clientWidth||400,fe=this._container.clientHeight||300),[Z,fe]},N.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},N.prototype._setupContainer=function(){var Z=this._container;Z.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",Z)).style.visibility="hidden",this._detectMissingCSS();var fe=this._canvasContainer=n.create("div","mapboxgl-canvas-container",Z);this._interactive&&fe.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",fe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var me=this._containerDimensions();this._resizeCanvas(me[0],me[1]);var we=this._controlContainer=n.create("div","mapboxgl-control-container",Z),Ae=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Re){Ae[Re]=n.create("div","mapboxgl-ctrl-"+Re,we)})},N.prototype._resizeCanvas=function(Z,fe){var me=e.browser.devicePixelRatio||1;this._canvas.width=me*Z,this._canvas.height=me*fe,this._canvas.style.width=Z+"px",this._canvas.style.height=fe+"px"},N.prototype._setupPainter=function(){var Z=e.extend({},r.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),fe=this._canvas.getContext("webgl",Z)||this._canvas.getContext("experimental-webgl",Z);fe?(this.painter=new ba(fe,this.transform),e.webpSupported.testSupport(fe)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},N.prototype._contextLost=function(Z){Z.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:Z}))},N.prototype._contextRestored=function(Z){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:Z}))},N.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},N.prototype._update=function(Z){return this.style?(this._styleDirty=this._styleDirty||Z,this._sourcesDirty=!0,this.triggerRepaint(),this):this},N.prototype._requestRenderFrame=function(Z){return this._update(),this._renderTaskQueue.add(Z)},N.prototype._cancelRenderFrame=function(Z){this._renderTaskQueue.remove(Z)},N.prototype._render=function(Z){var fe,me=this,we=0,Ae=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(fe=Ae.createQueryEXT(),Ae.beginQueryEXT(Ae.TIME_ELAPSED_EXT,fe),we=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(Z),!this._removed){var Re=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Xe=this.transform.zoom,nt=e.browser.now();this.style.zoomHistory.update(Xe,nt);var ht=new e.EvaluationParameters(Xe,{now:nt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Dt=ht.crossFadingFactor();1===Dt&&Dt===this._crossFadingFactor||(Re=!0,this._crossFadingFactor=Dt),this.style.update(ht)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Re)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Ot=e.browser.now()-we;Ae.endQueryEXT(Ae.TIME_ELAPSED_EXT,fe),setTimeout(function(){var Lt=Ae.getQueryObjectEXT(fe,Ae.QUERY_RESULT_EXT)/1e6;Ae.deleteQueryEXT(fe),me.fire(new e.Event("gpu-timing-frame",{cpuTime:Ot,gpuTime:Lt}))},50)}if(this.listens("gpu-timing-layer")){var It=this.painter.collectGpuTimers();setTimeout(function(){var Lt=me.painter.queryGpuTimers(It);me.fire(new e.Event("gpu-timing-layer",{layerTimes:Lt}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},N.prototype.remove=function(){this._hash&&this._hash.remove();for(var Z=0,fe=this._controls;Z<fe.length;Z+=1)fe[Z].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var me=this.painter.context.gl.getExtension("WEBGL_lose_context");me&&me.loseContext(),Cu(this._canvasContainer),Cu(this._controlContainer),Cu(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},N.prototype.triggerRepaint=function(){var Z=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(fe){Z._frame=null,Z._render(fe)}))},N.prototype._onWindowOnline=function(){this._update()},N.prototype._onWindowResize=function(Z){this._trackResize&&this.resize({originalEvent:Z})._update()},V.showTileBoundaries.get=function(){return!!this._showTileBoundaries},V.showTileBoundaries.set=function(Z){this._showTileBoundaries!==Z&&(this._showTileBoundaries=Z,this._update())},V.showPadding.get=function(){return!!this._showPadding},V.showPadding.set=function(Z){this._showPadding!==Z&&(this._showPadding=Z,this._update())},V.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},V.showCollisionBoxes.set=function(Z){this._showCollisionBoxes!==Z&&(this._showCollisionBoxes=Z,Z?this.style._generateCollisionBoxes():this._update())},V.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},V.showOverdrawInspector.set=function(Z){this._showOverdrawInspector!==Z&&(this._showOverdrawInspector=Z,this._update())},V.repaint.get=function(){return!!this._repaint},V.repaint.set=function(Z){this._repaint!==Z&&(this._repaint=Z,this.triggerRepaint())},V.vertices.get=function(){return!!this._vertices},V.vertices.set=function(Z){this._vertices=Z,this._update()},N.prototype._setCacheLimits=function(Z,fe){e.setCacheLimits(Z,fe)},V.version.get=function(){return e.version},Object.defineProperties(N.prototype,V),N}(Qi);function Cu(P){P.parentNode&&P.parentNode.removeChild(P)}var Ao={showCompass:!0,showZoom:!0,visualizePitch:!1},Ca=function(P){var N=this;this.options=e.extend({},Ao,P),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(V){return V.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(V){return N._map.zoomIn({},{originalEvent:V})}),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(V){return N._map.zoomOut({},{originalEvent:V})}),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(V){N.options.visualizePitch?N._map.resetNorthPitch({},{originalEvent:V}):N._map.resetNorth({},{originalEvent:V})}),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ca.prototype._updateZoomButtons=function(){var P=this._map.getZoom();this._zoomInButton.disabled=P===this._map.getMaxZoom(),this._zoomOutButton.disabled=P===this._map.getMinZoom()},Ca.prototype._rotateCompassArrow=function(){var P=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=P},Ca.prototype.onAdd=function(P){return this._map=P,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Da(this._map,this._compass,this.options.visualizePitch)),this._container},Ca.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ca.prototype._createButton=function(P,N){var V=n.create("button",P,this._container);return V.type="button",V.addEventListener("click",N),V},Ca.prototype._setButtonTitle=function(P,N){var V=this._map._getUIString("NavigationControl."+N);P.title=V,P.setAttribute("aria-label",V)};var Da=function(P,N,V){void 0===V&&(V=!1),this._clickTolerance=10,this.element=N,this.mouseRotate=new ji({clickTolerance:P.dragRotate._mouseRotate._clickTolerance}),this.map=P,V&&(this.mousePitch=new Pi({clickTolerance:P.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(N,"mousedown",this.mousedown),n.addEventListener(N,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(N,"touchmove",this.touchmove),n.addEventListener(N,"touchend",this.touchend),n.addEventListener(N,"touchcancel",this.reset)};function hs(P,N,V){if(P=new e.LngLat(P.lng,P.lat),N){var Z=new e.LngLat(P.lng-360,P.lat),fe=new e.LngLat(P.lng+360,P.lat),me=V.locationPoint(P).distSqr(N);V.locationPoint(Z).distSqr(N)<me?P=Z:V.locationPoint(fe).distSqr(N)<me&&(P=fe)}for(;Math.abs(P.lng-V.center.lng)>180;){var we=V.locationPoint(P);if(we.x>=0&&we.y>=0&&we.x<=V.width&&we.y<=V.height)break;P.lng>V.center.lng?P.lng-=360:P.lng+=360}return P}Da.prototype.down=function(P,N){this.mouseRotate.mousedown(P,N),this.mousePitch&&this.mousePitch.mousedown(P,N),n.disableDrag()},Da.prototype.move=function(P,N){var V=this.map,Z=this.mouseRotate.mousemoveWindow(P,N);if(Z&&Z.bearingDelta&&V.setBearing(V.getBearing()+Z.bearingDelta),this.mousePitch){var fe=this.mousePitch.mousemoveWindow(P,N);fe&&fe.pitchDelta&&V.setPitch(V.getPitch()+fe.pitchDelta)}},Da.prototype.off=function(){var P=this.element;n.removeEventListener(P,"mousedown",this.mousedown),n.removeEventListener(P,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(P,"touchmove",this.touchmove),n.removeEventListener(P,"touchend",this.touchend),n.removeEventListener(P,"touchcancel",this.reset),this.offTemp()},Da.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(e.window,"mousemove",this.mousemove),n.removeEventListener(e.window,"mouseup",this.mouseup)},Da.prototype.mousedown=function(P){this.down(e.extend({},P,{ctrlKey:!0,preventDefault:function(){return P.preventDefault()}}),n.mousePos(this.element,P)),n.addEventListener(e.window,"mousemove",this.mousemove),n.addEventListener(e.window,"mouseup",this.mouseup)},Da.prototype.mousemove=function(P){this.move(P,n.mousePos(this.element,P))},Da.prototype.mouseup=function(P){this.mouseRotate.mouseupWindow(P),this.mousePitch&&this.mousePitch.mouseupWindow(P),this.offTemp()},Da.prototype.touchstart=function(P){1!==P.targetTouches.length?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,P.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return P.preventDefault()}},this._startPos))},Da.prototype.touchmove=function(P){1!==P.targetTouches.length?this.reset():(this._lastPos=n.touchPos(this.element,P.targetTouches)[0],this.move({preventDefault:function(){return P.preventDefault()}},this._lastPos))},Da.prototype.touchend=function(P){0===P.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Da.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Js={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function xo(P,N,V){var Z=P.classList;for(var fe in Js)Z.remove("mapboxgl-"+V+"-anchor-"+fe);Z.add("mapboxgl-"+V+"-anchor-"+N)}var Pl,Vl=function(P){function N(V,Z){var fe=this;if(P.call(this),(V instanceof e.window.HTMLElement||Z)&&(V=e.extend({element:V},Z)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=V&&V.anchor||"center",this._color=V&&V.color||"#3FB1CE",this._draggable=V&&V.draggable||!1,this._state="inactive",this._rotation=V&&V.rotation||0,this._rotationAlignment=V&&V.rotationAlignment||"auto",this._pitchAlignment=V&&V.pitchAlignment&&"auto"!==V.pitchAlignment?V.pitchAlignment:this._rotationAlignment,V&&V.element)this._element=V.element,this._offset=e.Point.convert(V&&V.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var me=n.createNS("http://www.w3.org/2000/svg","svg");me.setAttributeNS(null,"display","block"),me.setAttributeNS(null,"height","41px"),me.setAttributeNS(null,"width","27px"),me.setAttributeNS(null,"viewBox","0 0 27 41");var we=n.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"stroke","none"),we.setAttributeNS(null,"stroke-width","1"),we.setAttributeNS(null,"fill","none"),we.setAttributeNS(null,"fill-rule","evenodd");var Ae=n.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"fill-rule","nonzero");var Re=n.createNS("http://www.w3.org/2000/svg","g");Re.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Re.setAttributeNS(null,"fill","#000000");for(var Xe=0,nt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Xe<nt.length;Xe+=1){var ht=nt[Xe],Dt=n.createNS("http://www.w3.org/2000/svg","ellipse");Dt.setAttributeNS(null,"opacity","0.04"),Dt.setAttributeNS(null,"cx","10.5"),Dt.setAttributeNS(null,"cy","5.80029008"),Dt.setAttributeNS(null,"rx",ht.rx),Dt.setAttributeNS(null,"ry",ht.ry),Re.appendChild(Dt)}var Ot=n.createNS("http://www.w3.org/2000/svg","g");Ot.setAttributeNS(null,"fill",this._color);var It=n.createNS("http://www.w3.org/2000/svg","path");It.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ot.appendChild(It);var Lt=n.createNS("http://www.w3.org/2000/svg","g");Lt.setAttributeNS(null,"opacity","0.25"),Lt.setAttributeNS(null,"fill","#000000");var St=n.createNS("http://www.w3.org/2000/svg","path");St.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Lt.appendChild(St);var Gt=n.createNS("http://www.w3.org/2000/svg","g");Gt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Gt.setAttributeNS(null,"fill","#FFFFFF");var Vt=n.createNS("http://www.w3.org/2000/svg","g");Vt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Yt=n.createNS("http://www.w3.org/2000/svg","circle");Yt.setAttributeNS(null,"fill","#000000"),Yt.setAttributeNS(null,"opacity","0.25"),Yt.setAttributeNS(null,"cx","5.5"),Yt.setAttributeNS(null,"cy","5.5"),Yt.setAttributeNS(null,"r","5.4999962");var xn=n.createNS("http://www.w3.org/2000/svg","circle");xn.setAttributeNS(null,"fill","#FFFFFF"),xn.setAttributeNS(null,"cx","5.5"),xn.setAttributeNS(null,"cy","5.5"),xn.setAttributeNS(null,"r","5.4999962"),Vt.appendChild(Yt),Vt.appendChild(xn),Ae.appendChild(Re),Ae.appendChild(Ot),Ae.appendChild(Lt),Ae.appendChild(Gt),Ae.appendChild(Vt),me.appendChild(Ae),this._element.appendChild(me),this._offset=e.Point.convert(V&&V.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(En){En.preventDefault()}),this._element.addEventListener("mousedown",function(En){En.preventDefault()}),this._element.addEventListener("focus",function(){var En=fe._map.getContainer();En.scrollTop=0,En.scrollLeft=0}),xo(this._element,this._anchor,"marker"),this._popup=null}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.addTo=function(V){return this.remove(),this._map=V,V.getCanvasContainer().appendChild(this._element),V.on("move",this._update),V.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},N.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},N.prototype.getLngLat=function(){return this._lngLat},N.prototype.setLngLat=function(V){return this._lngLat=e.LngLat.convert(V),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},N.prototype.getElement=function(){return this._element},N.prototype.setPopup=function(V){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),V){if(!("offset"in V.options)){var Z=Math.sqrt(Math.pow(13.5,2)/2);V.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[Z,-1*(24.6+Z)],"bottom-right":[-Z,-1*(24.6+Z)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=V,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},N.prototype._onKeyPress=function(V){var Z=V.code,fe=V.charCode||V.keyCode;"Space"!==Z&&"Enter"!==Z&&32!==fe&&13!==fe||this.togglePopup()},N.prototype._onMapClick=function(V){var Z=V.originalEvent.target,fe=this._element;this._popup&&(Z===fe||fe.contains(Z))&&this.togglePopup()},N.prototype.getPopup=function(){return this._popup},N.prototype.togglePopup=function(){var V=this._popup;return V?(V.isOpen()?V.remove():V.addTo(this._map),this):this},N.prototype._update=function(V){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=hs(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var Z="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?Z="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(Z="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var fe="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?fe="rotateX(0deg)":"map"===this._pitchAlignment&&(fe="rotateX("+this._map.getPitch()+"deg)"),V&&"moveend"!==V.type||(this._pos=this._pos.round()),n.setTransform(this._element,Js[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+fe+" "+Z)}},N.prototype.getOffset=function(){return this._offset},N.prototype.setOffset=function(V){return this._offset=e.Point.convert(V),this._update(),this},N.prototype._onMove=function(V){this._pos=V.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},N.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},N.prototype._addDragHandler=function(V){this._element.contains(V.originalEvent.target)&&(V.preventDefault(),this._positionDelta=V.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},N.prototype.setDraggable=function(V){return this._draggable=!!V,this._map&&(V?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},N.prototype.isDraggable=function(){return this._draggable},N.prototype.setRotation=function(V){return this._rotation=V||0,this._update(),this},N.prototype.getRotation=function(){return this._rotation},N.prototype.setRotationAlignment=function(V){return this._rotationAlignment=V||"auto",this._update(),this},N.prototype.getRotationAlignment=function(){return this._rotationAlignment},N.prototype.setPitchAlignment=function(V){return this._pitchAlignment=V&&"auto"!==V?V:this._rotationAlignment,this._update(),this},N.prototype.getPitchAlignment=function(){return this._pitchAlignment},N}(e.Evented),hl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},yl=0,Do=!1,Qs=function(P){function N(V){P.call(this),this.options=e.extend({},hl,V),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.onAdd=function(V){var Z;return this._map=V,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),Z=this._setupUI,void 0!==Pl?Z(Pl):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(function(fe){Z(Pl="denied"!==fe.state)}):Z(Pl=!!e.window.navigator.geolocation),this._container},N.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,yl=0,Do=!1},N.prototype._isOutOfMapMaxBounds=function(V){var Z=this._map.getMaxBounds(),fe=V.coords;return Z&&(fe.longitude<Z.getWest()||fe.longitude>Z.getEast()||fe.latitude<Z.getSouth()||fe.latitude>Z.getNorth())},N.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},N.prototype._onSuccess=function(V){if(this._map){if(this._isOutOfMapMaxBounds(V))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",V)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=V,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(V),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(V),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",V)),this._finish()}},N.prototype._updateCamera=function(V){var Z=new e.LngLat(V.coords.longitude,V.coords.latitude),fe=V.coords.accuracy,me=this._map.getBearing(),we=e.extend({bearing:me},this.options.fitBoundsOptions);this._map.fitBounds(Z.toBounds(fe),we,{geolocateSource:!0})},N.prototype._updateMarker=function(V){if(V){var Z=new e.LngLat(V.coords.longitude,V.coords.latitude);this._accuracyCircleMarker.setLngLat(Z).addTo(this._map),this._userLocationDotMarker.setLngLat(Z).addTo(this._map),this._accuracy=V.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},N.prototype._updateCircleRadius=function(){var V=this._map._container.clientHeight/2,Z=this._map.unproject([0,V]),fe=this._map.unproject([1,V]),me=Z.distanceTo(fe),we=Math.ceil(2*this._accuracy/me);this._circleElement.style.width=we+"px",this._circleElement.style.height=we+"px"},N.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},N.prototype._onError=function(V){if(this._map){if(this.options.trackUserLocation)if(1===V.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var Z=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=Z,this._geolocateButton.setAttribute("aria-label",Z),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===V.code&&Do)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",V)),this._finish()}},N.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},N.prototype._setupUI=function(V){var Z=this;if(this._container.addEventListener("contextmenu",function(we){return we.preventDefault()}),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===V){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var fe=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=fe,this._geolocateButton.setAttribute("aria-label",fe)}else{var me=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=me,this._geolocateButton.setAttribute("aria-label",me)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Vl(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Vl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(we){we.geolocateSource||"ACTIVE_LOCK"!==Z._watchState||we.originalEvent&&"resize"===we.originalEvent.type||(Z._watchState="BACKGROUND",Z._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),Z._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),Z.fire(new e.Event("trackuserlocationend")))})},N.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":yl--,Do=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var V;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++yl>1?(V={maximumAge:6e5,timeout:0},Do=!0):(V=this.options.positionOptions,Do=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,V)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},N.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},N}(e.Evented),Du={maxWidth:100,unit:"metric"},zs=function(P){this.options=e.extend({},Du,P),e.bindAll(["_onMove","setUnit"],this)};function el(P,N,V){var Z=V&&V.maxWidth||100,fe=P._container.clientHeight/2,me=P.unproject([0,fe]),we=P.unproject([Z,fe]),Ae=me.distanceTo(we);if(V&&"imperial"===V.unit){var Re=3.2808*Ae;Re>5280?Hl(N,Z,Re/5280,P._getUIString("ScaleControl.Miles")):Hl(N,Z,Re,P._getUIString("ScaleControl.Feet"))}else V&&"nautical"===V.unit?Hl(N,Z,Ae/1852,P._getUIString("ScaleControl.NauticalMiles")):Ae>=1e3?Hl(N,Z,Ae/1e3,P._getUIString("ScaleControl.Kilometers")):Hl(N,Z,Ae,P._getUIString("ScaleControl.Meters"))}function Hl(P,N,V,Z){var fe,me,we,Xe,nt,Ae=(fe=V,(me=Math.pow(10,(""+Math.floor(fe)).length-1))*(we=(we=fe/me)>=10?10:we>=5?5:we>=3?3:we>=2?2:we>=1?1:(Xe=we,nt=Math.pow(10,Math.ceil(-Math.log(Xe)/Math.LN10)),Math.round(Xe*nt)/nt)));P.style.width=N*(Ae/V)+"px",P.innerHTML=Ae+"&nbsp;"+Z}zs.prototype.getDefaultPosition=function(){return"bottom-left"},zs.prototype._onMove=function(){el(this._map,this._container,this.options)},zs.prototype.onAdd=function(P){return this._map=P,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",P.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},zs.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},zs.prototype.setUnit=function(P){this.options.unit=P,el(this._map,this._container,this.options)};var Qo=function(P){this._fullscreen=!1,P&&P.container&&(P.container instanceof e.window.HTMLElement?this._container=P.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};Qo.prototype.onAdd=function(P){return this._map=P,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Qo.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Qo.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Qo.prototype._setupUI=function(){var P=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",P).setAttribute("aria-hidden",!0),P.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Qo.prototype._updateTitle=function(){var P=this._getTitle();this._fullscreenButton.setAttribute("aria-label",P),this._fullscreenButton.title=P},Qo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Qo.prototype._isFullscreen=function(){return this._fullscreen},Qo.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Qo.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ju={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Qu=function(P){function N(V){P.call(this),this.options=e.extend(Object.create(Ju),V),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.addTo=function(V){return this._map&&this.remove(),this._map=V,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},N.prototype.isOpen=function(){return!!this._map},N.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},N.prototype.getLngLat=function(){return this._lngLat},N.prototype.setLngLat=function(V){return this._lngLat=e.LngLat.convert(V),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},N.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},N.prototype.getElement=function(){return this._container},N.prototype.setText=function(V){return this.setDOMContent(e.window.document.createTextNode(V))},N.prototype.setHTML=function(V){var Z,fe=e.window.document.createDocumentFragment(),me=e.window.document.createElement("body");for(me.innerHTML=V;Z=me.firstChild;)fe.appendChild(Z);return this.setDOMContent(fe)},N.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},N.prototype.setMaxWidth=function(V){return this.options.maxWidth=V,this._update(),this},N.prototype.setDOMContent=function(V){return this._createContent(),this._content.appendChild(V),this._update(),this},N.prototype.addClassName=function(V){this._container&&this._container.classList.add(V)},N.prototype.removeClassName=function(V){this._container&&this._container.classList.remove(V)},N.prototype.toggleClassName=function(V){if(this._container)return this._container.classList.toggle(V)},N.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},N.prototype._onMouseUp=function(V){this._update(V.point)},N.prototype._onMouseMove=function(V){this._update(V.point)},N.prototype._onDrag=function(V){this._update(V.point)},N.prototype._update=function(V){var Z=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Dt){return Z._container.classList.add(Dt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=hs(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||V)){var me=this._pos=this._trackPointer&&V?V:this._map.project(this._lngLat),we=this.options.anchor,Ae=function Dt(Ot){if(Ot){if("number"==typeof Ot){var It=Math.round(Math.sqrt(.5*Math.pow(Ot,2)));return{center:new e.Point(0,0),top:new e.Point(0,Ot),"top-left":new e.Point(It,It),"top-right":new e.Point(-It,It),bottom:new e.Point(0,-Ot),"bottom-left":new e.Point(It,-It),"bottom-right":new e.Point(-It,-It),left:new e.Point(Ot,0),right:new e.Point(-Ot,0)}}if(Ot instanceof e.Point||Array.isArray(Ot)){var Lt=e.Point.convert(Ot);return{center:Lt,top:Lt,"top-left":Lt,"top-right":Lt,bottom:Lt,"bottom-left":Lt,"bottom-right":Lt,left:Lt,right:Lt}}return{center:e.Point.convert(Ot.center||[0,0]),top:e.Point.convert(Ot.top||[0,0]),"top-left":e.Point.convert(Ot["top-left"]||[0,0]),"top-right":e.Point.convert(Ot["top-right"]||[0,0]),bottom:e.Point.convert(Ot.bottom||[0,0]),"bottom-left":e.Point.convert(Ot["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(Ot["bottom-right"]||[0,0]),left:e.Point.convert(Ot.left||[0,0]),right:e.Point.convert(Ot.right||[0,0])}}return Dt(new e.Point(0,0))}(this.options.offset);if(!we){var Re,Xe=this._container.offsetWidth,nt=this._container.offsetHeight;Re=me.y+Ae.bottom.y<nt?["top"]:me.y>this._map.transform.height-nt?["bottom"]:[],me.x<Xe/2?Re.push("left"):me.x>this._map.transform.width-Xe/2&&Re.push("right"),we=0===Re.length?"bottom":Re.join("-")}var ht=me.add(Ae[we]).round();n.setTransform(this._container,Js[we]+" translate("+ht.x+"px,"+ht.y+"px)"),xo(this._container,we,"popup")}},N.prototype._onClose=function(){this.remove()},N}(e.Evented),pe={version:e.version,supported:r,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:la,NavigationControl:Ca,GeolocateControl:Qs,AttributionControl:Go,ScaleControl:zs,FullscreenControl:Qo,Popup:Qu,Marker:Vl,Style:cr,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){gt().acquire(yt)},clearPrewarmedResources:function(){var P=Ut;P&&(P.isPreloaded()&&1===P.numActive()?(P.release(yt),Ut=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(P){e.config.ACCESS_TOKEN=P},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(P){e.config.API_URL=P},get workerCount(){return vt.workerCount},set workerCount(P){vt.workerCount=P},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(P){e.config.MAX_PARALLEL_IMAGE_REQUESTS=P},clearStorage:function(P){e.clearTileCache(P)},workerUrl:""};return pe}),w},"object"==typeof ae&&void 0!==oe?oe.exports=m():(g=g||self).mapboxgl=m()},{}],240:[function(x,oe,ae){"use strict";oe.exports=Math.log2||function(g){return Math.log(g)*Math.LOG2E}},{}],241:[function(x,oe,ae){"use strict";oe.exports=function(m,w){w||(w=m,m=window);var y=0,e=0,r=0,n={shift:!1,alt:!1,control:!1,meta:!1},a=!1;function t(_){var s=!1;return"altKey"in _&&(s=s||_.altKey!==n.alt,n.alt=!!_.altKey),"shiftKey"in _&&(s=s||_.shiftKey!==n.shift,n.shift=!!_.shiftKey),"ctrlKey"in _&&(s=s||_.ctrlKey!==n.control,n.control=!!_.ctrlKey),"metaKey"in _&&(s=s||_.metaKey!==n.meta,n.meta=!!_.metaKey),s}function p(_,s){var k=g.x(s),M=g.y(s);"buttons"in s&&(_=0|s.buttons),(_!==y||k!==e||M!==r||t(s))&&(y=0|_,e=k||0,r=M||0,w&&w(y,e,r,n))}function u(_){p(0,_)}function i(){(y||e||r||n.shift||n.alt||n.meta||n.control)&&(e=r=0,y=0,n.shift=n.alt=n.control=n.meta=!1,w&&w(0,0,0,n))}function c(_){t(_)&&w&&w(y,e,r,n)}function f(_){0===g.buttons(_)?p(0,_):p(y,_)}function l(_){p(y|g.buttons(_),_)}function h(_){p(y&~g.buttons(_),_)}function d(){a||(a=!0,m.addEventListener("mousemove",f),m.addEventListener("mousedown",l),m.addEventListener("mouseup",h),m.addEventListener("mouseleave",u),m.addEventListener("mouseenter",u),m.addEventListener("mouseout",u),m.addEventListener("mouseover",u),m.addEventListener("blur",i),m.addEventListener("keyup",c),m.addEventListener("keydown",c),m.addEventListener("keypress",c),m!==window&&(window.addEventListener("blur",i),window.addEventListener("keyup",c),window.addEventListener("keydown",c),window.addEventListener("keypress",c)))}d();var o={element:m};return Object.defineProperties(o,{enabled:{get:function(){return a},set:function(_){_?d():!a||(a=!1,m.removeEventListener("mousemove",f),m.removeEventListener("mousedown",l),m.removeEventListener("mouseup",h),m.removeEventListener("mouseleave",u),m.removeEventListener("mouseenter",u),m.removeEventListener("mouseout",u),m.removeEventListener("mouseover",u),m.removeEventListener("blur",i),m.removeEventListener("keyup",c),m.removeEventListener("keydown",c),m.removeEventListener("keypress",c),m!==window&&(window.removeEventListener("blur",i),window.removeEventListener("keyup",c),window.removeEventListener("keydown",c),window.removeEventListener("keypress",c)))},enumerable:!0},buttons:{get:function(){return y},enumerable:!0},x:{get:function(){return e},enumerable:!0},y:{get:function(){return r},enumerable:!0},mods:{get:function(){return n},enumerable:!0}}),o};var g=x("mouse-event")},{"mouse-event":243}],242:[function(x,oe,ae){var g={left:0,top:0};oe.exports=function(m,w,y){w=w||m.currentTarget||m.srcElement,Array.isArray(y)||(y=[0,0]);var a,e=m.clientX||0,r=m.clientY||0,n=(a=w)===window||a===document||a===document.body?g:a.getBoundingClientRect();return y[0]=e-n.left,y[1]=r-n.top,y}},{}],243:[function(x,oe,ae){"use strict";function g(m){return m.target||m.srcElement||window}ae.buttons=function(m){if("object"==typeof m){if("buttons"in m)return m.buttons;if("which"in m){if(2===(w=m.which))return 4;if(3===w)return 2;if(w>0)return 1<<w-1}else if("button"in m){var w;if(1===(w=m.button))return 4;if(2===w)return 2;if(w>=0)return 1<<w}}return 0},ae.element=g,ae.x=function(m){if("object"==typeof m){if("offsetX"in m)return m.offsetX;var w=g(m).getBoundingClientRect();return m.clientX-w.left}return 0},ae.y=function(m){if("object"==typeof m){if("offsetY"in m)return m.offsetY;var w=g(m).getBoundingClientRect();return m.clientY-w.top}return 0}},{}],244:[function(x,oe,ae){"use strict";var g=x("to-px");oe.exports=function(m,w,y){"function"==typeof m&&(y=!!w,w=m,m=window);var e=g("ex",m),r=function(n){y&&n.preventDefault();var a=n.deltaX||0,t=n.deltaY||0,p=n.deltaZ||0,u=1;switch(n.deltaMode){case 1:u=e;break;case 2:u=window.innerHeight}if(t*=u,p*=u,(a*=u)||t||p)return w(a,t,p,n)};return m.addEventListener("wheel",r),r}},{"to-px":314}],245:[function(x,oe,ae){(function(g,m){(function(){var w,y,e;e=function(){"use strict";var w,y,e,r=Object.prototype.toString,n=void 0!==m?function(_){return m(_)}:setTimeout;try{Object.defineProperty({},"x",{}),w=function(_,s,k,M){return Object.defineProperty(_,s,{value:k,writable:!0,configurable:!1!==M})}}catch(_){w=function(s,k,M){return s[k]=M,s}}function a(_,s){e.add(_,s),y||(y=n(e.drain))}function t(_){var s,k=typeof _;return null==_||"object"!=k&&"function"!=k||(s=_.then),"function"==typeof s&&s}function p(){for(var _=0;_<this.chain.length;_++)u(this,1===this.state?this.chain[_].success:this.chain[_].failure,this.chain[_]);this.chain.length=0}function u(_,s,k){var M,A;try{!1===s?k.reject(_.msg):(M=!0===s?_.msg:s.call(void 0,_.msg))===k.promise?k.reject(TypeError("Promise-chain cycle")):(A=t(M))?A.call(M,k.resolve,k.reject):k.resolve(M)}catch(E){k.reject(E)}}function i(_){var s,k=this;if(!k.triggered){k.triggered=!0,k.def&&(k=k.def);try{(s=t(_))?a(function(){var M=new l(k);try{s.call(_,function(){i.apply(M,arguments)},function(){c.apply(M,arguments)})}catch(A){c.call(M,A)}}):(k.msg=_,k.state=1,k.chain.length>0&&a(p,k))}catch(M){c.call(new l(k),M)}}}function c(_){var s=this;s.triggered||(s.triggered=!0,s.def&&(s=s.def),s.msg=_,s.state=2,s.chain.length>0&&a(p,s))}function f(_,s,k,M){for(var A=0;A<s.length;A++)!function(E){_.resolve(s[E]).then(function(I){k(E,I)},M)}(A)}function l(_){this.def=_,this.triggered=!1}function h(_){this.promise=_,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function d(_){if("function"!=typeof _)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var s=new h(this);this.then=function(k,M){var A={success:"function"!=typeof k||k,failure:"function"==typeof M&&M};return A.promise=new this.constructor(function(E,I){if("function"!=typeof E||"function"!=typeof I)throw TypeError("Not a function");A.resolve=E,A.reject=I}),s.chain.push(A),0!==s.state&&a(p,s),A.promise},this.catch=function(k){return this.then(void 0,k)};try{_.call(void 0,function(k){i.call(s,k)},function(k){c.call(s,k)})}catch(k){c.call(s,k)}}e=function(){var _,s,k;function M(A,E){this.fn=A,this.self=E,this.next=void 0}return{add:function(A,E){k=new M(A,E),s?s.next=k:_=k,s=k,k=void 0},drain:function(){var A=_;for(_=s=y=void 0;A;)A.fn.call(A.self),A=A.next}}}();var o=w({},"constructor",d,!1);return d.prototype=o,w(o,"__NPO__",0,!1),w(d,"resolve",function(_){return _&&"object"==typeof _&&1===_.__NPO__?_:new this(function(s,k){if("function"!=typeof s||"function"!=typeof k)throw TypeError("Not a function");s(_)})}),w(d,"reject",function(_){return new this(function(s,k){if("function"!=typeof s||"function"!=typeof k)throw TypeError("Not a function");k(_)})}),w(d,"all",function(_){var s=this;return"[object Array]"!=r.call(_)?s.reject(TypeError("Not an array")):0===_.length?s.resolve([]):new s(function(k,M){if("function"!=typeof k||"function"!=typeof M)throw TypeError("Not a function");var A=_.length,E=Array(A),I=0;f(s,_,function(C,R){E[C]=R,++I===A&&k(E)},M)})}),w(d,"race",function(_){var s=this;return"[object Array]"!=r.call(_)?s.reject(TypeError("Not an array")):new s(function(k,M){if("function"!=typeof k||"function"!=typeof M)throw TypeError("Not a function");f(s,_,function(A,E){k(E)},M)})}),d},(y=void 0!==g?g:this)[w="Promise"]=y[w]||e(),void 0!==oe&&oe.exports&&(oe.exports=y[w])}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},x("timers").setImmediate)},{timers:311}],246:[function(x,oe,ae){var g=Math.PI,m=n(120);function w(a,t,p,u){return["C",a,t,p,u,p,u]}function y(a,t,p,u,i,c){return["C",a/3+2/3*p,t/3+2/3*u,i/3+2/3*p,c/3+2/3*u,i,c]}function e(a,t,p,u,i,c,f,l,h,d){if(d)R=d[0],O=d[1],I=d[2],C=d[3];else{var o=r(a,t,-i);t=o.y;var _=((a=o.x)-(l=(o=r(l,h,-i)).x))/2,s=(t-(h=o.y))/2,k=_*_/(p*p)+s*s/(u*u);k>1&&(p*=k=Math.sqrt(k),u*=k);var M=p*p,A=u*u,E=(c==f?-1:1)*Math.sqrt(Math.abs((M*A-M*s*s-A*_*_)/(M*s*s+A*_*_)));E==1/0&&(E=1);var I=E*p*s/u+(a+l)/2,C=E*-u*_/p+(t+h)/2,R=Math.asin(((t-C)/u).toFixed(9)),O=Math.asin(((h-C)/u).toFixed(9));(R=a<I?g-R:R)<0&&(R=2*g+R),(O=l<I?g-O:O)<0&&(O=2*g+O),f&&R>O&&(R-=2*g),!f&&O>R&&(O-=2*g)}if(Math.abs(O-R)>m){var D=O,L=l,B=h;O=R+m*(f&&O>R?1:-1);var j=e(l=I+p*Math.cos(O),h=C+u*Math.sin(O),p,u,i,0,f,L,B,[O,D,I,C])}var W=Math.tan((O-R)/4),Y=4/3*p*W,Q=4/3*u*W,ne=[2*a-(a+Y*Math.sin(R)),2*t-(t-Q*Math.cos(R)),l+Y*Math.sin(O),h-Q*Math.cos(O),l,h];if(d)return ne;j&&(ne=ne.concat(j));for(var X=0;X<ne.length;){var $=r(ne[X],ne[X+1],i);ne[X++]=$.x,ne[X++]=$.y}return ne}function r(a,t,p){return{x:a*Math.cos(p)-t*Math.sin(p),y:a*Math.sin(p)+t*Math.cos(p)}}function n(a){return a*(g/180)}oe.exports=function(a){for(var t,p=[],u=0,i=0,c=0,f=0,l=null,h=null,d=0,o=0,_=0,s=a.length;_<s;_++){var k=a[_],M=k[0];switch(M){case"M":c=k[1],f=k[2];break;case"A":(k=e(d,o,k[1],k[2],n(k[3]),k[4],k[5],k[6],k[7])).unshift("C"),k.length>7&&(p.push(k.splice(0,7)),k.unshift("C"));break;case"S":var A=d,E=o;"C"!=t&&"S"!=t||(A+=A-u,E+=E-i),k=["C",A,E,k[1],k[2],k[3],k[4]];break;case"T":"Q"==t||"T"==t?(l=2*d-l,h=2*o-h):(l=d,h=o),k=y(d,o,l,h,k[1],k[2]);break;case"Q":l=k[1],h=k[2],k=y(d,o,k[1],k[2],k[3],k[4]);break;case"L":k=w(d,o,k[1],k[2]);break;case"H":k=w(d,o,k[1],o);break;case"V":k=w(d,o,d,k[1]);break;case"Z":k=w(d,o,c,f)}t=M,d=k[k.length-2],o=k[k.length-1],k.length>4?(u=k[k.length-4],i=k[k.length-3]):(u=d,i=o),p.push(k)}return p}},{}],247:[function(x,oe,ae){"use strict";var g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;function y(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}oe.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},n=0;n<10;n++)r["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(r).map(function(t){return r[t]}).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(t){a[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(t){return!1}}()?Object.assign:function(e,r){for(var n,a,t=y(e),p=1;p<arguments.length;p++){for(var u in n=Object(arguments[p]))m.call(n,u)&&(t[u]=n[u]);if(g){a=g(n);for(var i=0;i<a.length;i++)w.call(n,a[i])&&(t[a[i]]=n[a[i]])}}return t}},{}],248:[function(x,oe,ae){"use strict";function g(y,e){if("string"!=typeof y)return[y];var r=[y];"string"==typeof e||Array.isArray(e)?e={brackets:e}:e||(e={});var n=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],a=e.escape||"___",t=!!e.flat;n.forEach(function(u){var i=new RegExp(["\\",u[0],"[^\\",u[0],"\\",u[1],"]*\\",u[1]].join("")),c=[];function f(l,h,d){var o=r.push(l.slice(u[0].length,-u[1].length))-1;return c.push(o),a+o+a}r.forEach(function(l,h){for(var d,o=0;l!=d;)if(d=l,l=l.replace(i,f),o++>1e4)throw Error("References have circular dependency. Please, check them.");r[h]=l}),c=c.reverse(),r=r.map(function(l){return c.forEach(function(h){l=l.replace(new RegExp("(\\"+a+h+"\\"+a+")","g"),u[0]+"$1"+u[1])}),l})});var p=new RegExp("\\"+a+"([0-9]+)\\"+a);return t?r:function u(i,c,f){for(var l,h=[],d=0;l=p.exec(i);){if(d++>1e4)throw Error("Circular references in parenthesis");h.push(i.slice(0,l.index)),h.push(u(c[l[1]],c)),i=i.slice(l.index+l[0].length)}return h.push(i),h}(r[0],r)}function m(y,e){if(e&&e.flat){var r,n=e&&e.escape||"___",a=y[0];if(!a)return"";for(var t=new RegExp("\\"+n+"([0-9]+)\\"+n),p=0;a!=r;){if(p++>1e4)throw Error("Circular references in "+y);r=a,a=a.replace(t,u)}return a}return y.reduce(function i(c,f){return Array.isArray(f)&&(f=f.reduce(i,"")),c+f},"");function u(i,c){if(null==y[c])throw Error("Reference "+c+"is undefined");return y[c]}}function w(y,e){return Array.isArray(y)?m(y,e):g(y,e)}w.parse=g,w.stringify=m,oe.exports=w},{}],249:[function(x,oe,ae){"use strict";var g=x("pick-by-alias");oe.exports=function(m){var w;return arguments.length>1&&(m=arguments),"string"==typeof m?m=m.split(/\s/).map(parseFloat):"number"==typeof m&&(m=[m]),m.length&&"number"==typeof m[0]?w=1===m.length?{width:m[0],height:m[0],x:0,y:0}:2===m.length?{width:m[0],height:m[1],x:0,y:0}:{x:m[0],y:m[1],width:m[2]-m[0]||0,height:m[3]-m[1]||0}:m&&((w={x:(m=g(m,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:m.top||0}).width=null==m.width?m.right?m.right-w.x:0:m.width,w.height=null==m.height?m.bottom?m.bottom-w.y:0:m.height),w}},{"pick-by-alias":253}],250:[function(x,oe,ae){oe.exports=function(y){var e=[];return y.replace(m,function(r,n,a){var u,t=n.toLowerCase();for(u=void 0,a=(u=a.match(w))?u.map(Number):[],"m"==t&&a.length>2&&(e.push([n].concat(a.splice(0,2))),t="l",n="m"==n?"l":"L");;){if(a.length==g[t])return a.unshift(n),e.push(a);if(a.length<g[t])throw new Error("malformed path data");e.push([n].concat(a.splice(0,g[t])))}}),e};var g={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},m=/([astvzqmhlc])([^astvzqmhlc]*)/gi,w=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],251:[function(x,oe,ae){oe.exports=function(g,m){m||(m=[0,""]),g=String(g);var w=parseFloat(g,10);return m[0]=w,m[1]=g.match(/[\d.\-\+]*\s*(.*)/)[1]||"",m}},{}],252:[function(x,oe,ae){(function(g){(function(){(function(){var m,w,y,e,r,n;"undefined"!=typeof performance&&null!==performance&&performance.now?oe.exports=function(){return performance.now()}:null!=g&&g.hrtime?(oe.exports=function(){return(m()-r)/1e6},w=g.hrtime,e=(m=function(){var a;return 1e9*(a=w())[0]+a[1]})(),n=1e9*g.uptime(),r=e-n):Date.now?(oe.exports=function(){return Date.now()-y},y=Date.now()):(oe.exports=function(){return(new Date).getTime()-y},y=(new Date).getTime())}).call(this)}).call(this)}).call(this,x("_process"))},{_process:277}],253:[function(x,oe,ae){"use strict";oe.exports=function(w,y,e){var r,n,a={};if("string"==typeof y&&(y=m(y)),Array.isArray(y)){var t={};for(n=0;n<y.length;n++)t[y[n]]=!0;y=t}for(r in y)y[r]=m(y[r]);var p={};for(r in y){var u=y[r];if(Array.isArray(u))for(n=0;n<u.length;n++){var i=u[n];if(e&&(p[i]=!0),i in w){if(a[r]=w[i],e)for(var c=n;c<u.length;c++)p[u[c]]=!0;break}}else r in w&&(y[r]&&(a[r]=w[r]),e&&(p[r]=!0))}if(e)for(r in w)p[r]||(a[r]=w[r]);return a};var g={};function m(w){return g[w]?g[w]:("string"==typeof w&&(w=g[w]=w.split(/\s*,\s*|\s+/)),w)}},{}],254:[function(x,oe,ae){var g,m=x("./lib/build-log"),w=x("./lib/epsilon"),y=x("./lib/intersecter"),e=x("./lib/segment-chainer"),r=x("./lib/segment-selector"),n=x("./lib/geojson"),a=!1,t=w();function p(u,i,c){var f=g.segments(u),l=g.segments(i),h=c(g.combine(f,l));return g.polygon(h)}g={buildLog:function(u){return!0===u?a=m():!1===u&&(a=!1),!1!==a&&a.list},epsilon:function(u){return t.epsilon(u)},segments:function(u){var i=y(!0,t,a);return u.regions.forEach(i.addRegion),{segments:i.calculate(u.inverted),inverted:u.inverted}},combine:function(u,i){return{combined:y(!1,t,a).calculate(u.segments,u.inverted,i.segments,i.inverted),inverted1:u.inverted,inverted2:i.inverted}},selectUnion:function(u){return{segments:r.union(u.combined,a),inverted:u.inverted1||u.inverted2}},selectIntersect:function(u){return{segments:r.intersect(u.combined,a),inverted:u.inverted1&&u.inverted2}},selectDifference:function(u){return{segments:r.difference(u.combined,a),inverted:u.inverted1&&!u.inverted2}},selectDifferenceRev:function(u){return{segments:r.differenceRev(u.combined,a),inverted:!u.inverted1&&u.inverted2}},selectXor:function(u){return{segments:r.xor(u.combined,a),inverted:u.inverted1!==u.inverted2}},polygon:function(u){return{regions:e(u.segments,t,a),inverted:u.inverted}},polygonFromGeoJSON:function(u){return n.toPolygon(g,u)},polygonToGeoJSON:function(u){return n.fromPolygon(g,t,u)},union:function(u,i){return p(u,i,g.selectUnion)},intersect:function(u,i){return p(u,i,g.selectIntersect)},difference:function(u,i){return p(u,i,g.selectDifference)},differenceRev:function(u,i){return p(u,i,g.selectDifferenceRev)},xor:function(u,i){return p(u,i,g.selectXor)}},"object"==typeof window&&(window.PolyBool=g),oe.exports=g},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(x,oe,ae){oe.exports=function(){var g,m=0,w=!1;function y(e,r){return g.list.push({type:e,data:r?JSON.parse(JSON.stringify(r)):void 0}),g}return g={list:[],segmentId:function(){return m++},checkIntersection:function(e,r){return y("check",{seg1:e,seg2:r})},segmentChop:function(e,r){return y("div_seg",{seg:e,pt:r}),y("chop",{seg:e,pt:r})},statusRemove:function(e){return y("pop_seg",{seg:e})},segmentUpdate:function(e){return y("seg_update",{seg:e})},segmentNew:function(e,r){return y("new_seg",{seg:e,primary:r})},segmentRemove:function(e){return y("rem_seg",{seg:e})},tempStatus:function(e,r,n){return y("temp_status",{seg:e,above:r,below:n})},rewind:function(e){return y("rewind",{seg:e})},status:function(e,r,n){return y("status",{seg:e,above:r,below:n})},vert:function(e){return e===w?g:(w=e,y("vert",{x:e}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),y("log",{txt:e})},reset:function(){return y("reset")},selected:function(e){return y("selected",{segs:e})},chainStart:function(e){return y("chain_start",{seg:e})},chainRemoveHead:function(e,r){return y("chain_rem_head",{index:e,pt:r})},chainRemoveTail:function(e,r){return y("chain_rem_tail",{index:e,pt:r})},chainNew:function(e,r){return y("chain_new",{pt1:e,pt2:r})},chainMatch:function(e){return y("chain_match",{index:e})},chainClose:function(e){return y("chain_close",{index:e})},chainAddHead:function(e,r){return y("chain_add_head",{index:e,pt:r})},chainAddTail:function(e,r){return y("chain_add_tail",{index:e,pt:r})},chainConnect:function(e,r){return y("chain_con",{index1:e,index2:r})},chainReverse:function(e){return y("chain_rev",{index:e})},chainJoin:function(e,r){return y("chain_join",{index1:e,index2:r})},done:function(){return y("done")}}}},{}],256:[function(x,oe,ae){oe.exports=function(g){"number"!=typeof g&&(g=1e-10);var m={epsilon:function(w){return"number"==typeof w&&(g=w),g},pointAboveOrOnLine:function(w,y,e){var r=y[0],n=y[1];return(e[0]-r)*(w[1]-n)-(e[1]-n)*(w[0]-r)>=-g},pointBetween:function(w,y,e){var n=e[0]-y[0],t=e[1]-y[1],p=(w[0]-y[0])*n+(w[1]-y[1])*t;return!(p<g||p-(n*n+t*t)>-g)},pointsSameX:function(w,y){return Math.abs(w[0]-y[0])<g},pointsSameY:function(w,y){return Math.abs(w[1]-y[1])<g},pointsSame:function(w,y){return m.pointsSameX(w,y)&&m.pointsSameY(w,y)},pointsCompare:function(w,y){return m.pointsSameX(w,y)?m.pointsSameY(w,y)?0:w[1]<y[1]?-1:1:w[0]<y[0]?-1:1},pointsCollinear:function(w,y,e){return Math.abs((w[0]-y[0])*(y[1]-e[1])-(y[0]-e[0])*(w[1]-y[1]))<g},linesIntersect:function(w,y,e,r){var n=y[0]-w[0],a=y[1]-w[1],t=r[0]-e[0],p=r[1]-e[1],u=n*p-a*t;if(Math.abs(u)<g)return!1;var i=w[0]-e[0],c=w[1]-e[1],f=(t*c-p*i)/u,l=(n*c-a*i)/u,h={alongA:0,alongB:0,pt:[w[0]+f*n,w[1]+f*a]};return h.alongA=f<=-g?-2:f<g?-1:f-1<=-g?0:f-1<g?1:2,h.alongB=l<=-g?-2:l<g?-1:l-1<=-g?0:l-1<g?1:2,h},pointInsideRegion:function(w,y){for(var e=w[0],r=w[1],n=y[y.length-1][0],a=y[y.length-1][1],t=!1,p=0;p<y.length;p++){var u=y[p][0],i=y[p][1];i-r>g!=a-r>g&&(n-u)*(r-i)/(a-i)+u-e>g&&(t=!t),n=u,a=i}return t}};return m}},{}],257:[function(x,oe,ae){oe.exports={toPolygon:function(m,w){function y(n){if(n.length<=0)return m.segments({inverted:!1,regions:[]});function a(u){var i=u.slice(0,u.length-1);return m.segments({inverted:!1,regions:[i]})}for(var t=a(n[0]),p=1;p<n.length;p++)t=m.selectDifference(m.combine(t,a(n[p])));return t}if("Polygon"===w.type)return m.polygon(y(w.coordinates));if("MultiPolygon"===w.type){for(var e=m.segments({inverted:!1,regions:[]}),r=0;r<w.coordinates.length;r++)e=m.selectUnion(m.combine(e,y(w.coordinates[r])));return m.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(m,w,y){function e(l,h){return w.pointInsideRegion([.5*(l[0][0]+l[1][0]),.5*(l[0][1]+l[1][1])],h)}function r(l){return{region:l,children:[]}}y=m.polygon(m.segments(y));var n=r(null);function a(l,h){for(var d=0;d<l.children.length;d++)if(e(h,(_=l.children[d]).region))return void a(_,h);var o=r(h);for(d=0;d<l.children.length;d++){var _;e((_=l.children[d]).region,h)&&(o.children.push(_),l.children.splice(d,1),d--)}l.children.push(o)}for(var t=0;t<y.regions.length;t++){var p=y.regions[t];p.length<3||a(n,p)}function u(l,h){for(var d=0,o=l[l.length-1][0],_=l[l.length-1][1],s=[],k=0;k<l.length;k++){var M=l[k][0],A=l[k][1];s.push([M,A]),d+=A*o-M*_,o=M,_=A}return d<0!==h&&s.reverse(),s.push([s[0][0],s[0][1]]),s}var i=[];function c(l){var h=[u(l.region,!1)];i.push(h);for(var d=0;d<l.children.length;d++)h.push(f(l.children[d]))}function f(l){for(var h=0;h<l.children.length;h++)c(l.children[h]);return u(l.region,!0)}for(t=0;t<n.children.length;t++)c(n.children[t]);return i.length<=0?{type:"Polygon",coordinates:[]}:1==i.length?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}}}},{}],258:[function(x,oe,ae){var g=x("./linked-list");oe.exports=function(m,w,y){function e(u,i,c){return{id:y?y.segmentId():-1,start:u,end:i,myFill:{above:c.myFill.above,below:c.myFill.below},otherFill:null}}var r=g.create();function n(u,i){r.insertBefore(u,function(c){return f=u.isStart,h=i,d=c.isStart,_=c.other.pt,(0!==(s=w.pointsCompare(u.pt,o=c.pt))?s:w.pointsSame(h,_)?0:f!==d?f?1:-1:w.pointAboveOrOnLine(h,d?o:_,d?_:o)?1:-1)<0;var f,h,d,o,_,s})}function a(u,i){var f,h,c=(n(h=g.node({isStart:!0,pt:(f=u).start,seg:f,primary:i,other:null,status:null}),f.end),h);return function(f,l,h){var d=g.node({isStart:!1,pt:l.end,seg:l,primary:h,other:f,status:null});f.other=d,n(d,f.pt)}(c,u,i),c}function t(u,i){var f,l,c=e(i,u.seg.end,u.seg);return f=u,l=i,y&&y.segmentChop(f.seg,l),f.other.remove(),f.seg.end=l,f.other.pt=l,n(f.other,f.pt),a(c,u.primary)}function p(u,i){var c=g.create();function f(R){return c.findTransition(function(O){var D,L,B,j,W,Y;return j=(D=R).seg.end,(w.pointsCollinear(B=D.seg.start,W=(L=O.ev).seg.start,Y=L.seg.end)?w.pointsCollinear(j,W,Y)||w.pointAboveOrOnLine(j,W,Y)?1:-1:w.pointAboveOrOnLine(B,W,Y)?1:-1)>0})}function l(R,O){var D=R.seg,L=O.seg,B=D.start,j=D.end,W=L.start,Y=L.end;y&&y.checkIntersection(D,L);var Q=w.linesIntersect(B,j,W,Y);if(!1===Q){if(!w.pointsCollinear(B,j,W)||w.pointsSame(B,Y)||w.pointsSame(j,W))return!1;var ne=w.pointsSame(B,W),X=w.pointsSame(j,Y);if(ne&&X)return O;var $=!ne&&w.pointBetween(B,W,Y),re=!X&&w.pointBetween(j,W,Y);if(ne)return re?t(O,j):t(R,Y),O;$&&(X||(re?t(O,j):t(R,Y)),t(O,B))}else 0===Q.alongA&&(-1===Q.alongB?t(R,W):0===Q.alongB?t(R,Q.pt):1===Q.alongB&&t(R,Y)),0===Q.alongB&&(-1===Q.alongA?t(O,B):0===Q.alongA?t(O,Q.pt):1===Q.alongA&&t(O,j));return!1}for(var h=[];!r.isEmpty();){var d=r.getHead();if(y&&y.vert(d.pt[0]),d.isStart){let R=function(){if(_){var O=l(d,_);if(O)return O}return!!s&&l(d,s)};y&&y.segmentNew(d.seg,d.primary);var o=f(d),_=o.before?o.before.ev:null,s=o.after?o.after.ev:null;y&&y.tempStatus(d.seg,!!_&&_.seg,!!s&&s.seg);var k,A,M=R();if(M&&(m?(A=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below)&&(M.seg.myFill.above=!M.seg.myFill.above):M.seg.otherFill=d.seg.myFill,y&&y.segmentUpdate(M.seg),d.other.remove(),d.remove()),r.getHead()!==d){y&&y.rewind(d.seg);continue}m?(A=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below,d.seg.myFill.below=s?s.seg.myFill.above:u,d.seg.myFill.above=A?!d.seg.myFill.below:d.seg.myFill.below):null===d.seg.otherFill&&(d.seg.otherFill={above:k=s?d.primary===s.primary?s.seg.otherFill.above:s.seg.myFill.above:d.primary?i:u,below:k}),y&&y.status(d.seg,!!_&&_.seg,!!s&&s.seg),d.other.status=o.insert(g.node({ev:d}))}else{var E=d.status;if(null===E)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(c.exists(E.prev)&&c.exists(E.next)&&l(E.prev.ev,E.next.ev),y&&y.statusRemove(E.ev.seg),E.remove(),!d.primary){var I=d.seg.myFill;d.seg.myFill=d.seg.otherFill,d.seg.otherFill=I}h.push(d.seg)}r.getHead().remove()}return y&&y.done(),h}return m?{addRegion:function(u){for(var i,c,f,l=u[u.length-1],h=0;h<u.length;h++){var d=w.pointsCompare(i=l,l=u[h]);0!==d&&a((c=d<0?i:l,f=d<0?l:i,{id:y?y.segmentId():-1,start:c,end:f,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(u){return p(u,!1)}}:{calculate:function(u,i,c,f){return u.forEach(function(l){a(e(l.start,l.end,l),!0)}),c.forEach(function(l){a(e(l.start,l.end,l),!1)}),p(i,f)}}}},{"./linked-list":259}],259:[function(x,oe,ae){oe.exports={create:function(){var g={root:{root:!0,next:null},exists:function(m){return null!==m&&m!==g.root},isEmpty:function(){return null===g.root.next},getHead:function(){return g.root.next},insertBefore:function(m,w){for(var y=g.root,e=g.root.next;null!==e;){if(w(e))return m.prev=e.prev,m.next=e,e.prev.next=m,void(e.prev=m);y=e,e=e.next}y.next=m,m.prev=y,m.next=null},findTransition:function(m){for(var w=g.root,y=g.root.next;null!==y&&!m(y);)w=y,y=y.next;return{before:w===g.root?null:w,after:y,insert:function(e){return e.prev=w,e.next=y,w.next=e,null!==y&&(y.prev=e),e}}}};return g},node:function(g){return g.prev=null,g.next=null,g.remove=function(){g.prev.next=g.next,g.next&&(g.next.prev=g.prev),g.prev=null,g.next=null},g}}},{}],260:[function(x,oe,ae){oe.exports=function(g,m,w){var y=[],e=[];return g.forEach(function(r){var n=r.start,a=r.end;if(m.pointsSame(n,a))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{w&&w.chainStart(r);for(var t={index:0,matches_head:!1,matches_pt1:!1},p={index:0,matches_head:!1,matches_pt1:!1},u=t,i=0;i<y.length;i++){var c=(o=y[i])[0],f=o[o.length-1];if(m.pointsSame(c,n)){if(C(i,!0,!0))break}else if(m.pointsSame(c,a)){if(C(i,!0,!1))break}else if(m.pointsSame(f,n)){if(C(i,!1,!0))break}else if(m.pointsSame(f,a)&&C(i,!1,!1))break}if(u===t)return y.push([n,a]),void(w&&w.chainNew(n,a));if(u===p){w&&w.chainMatch(t.index);var l=t.index,h=t.matches_pt1?a:n,d=t.matches_head,o=y[l],_=d?o[0]:o[o.length-1],s=d?o[1]:o[o.length-2],k=d?o[o.length-1]:o[0],M=d?o[o.length-2]:o[1];return m.pointsCollinear(s,_,h)&&(d?(w&&w.chainRemoveHead(t.index,h),o.shift()):(w&&w.chainRemoveTail(t.index,h),o.pop()),_=s),m.pointsSame(k,h)?(y.splice(l,1),m.pointsCollinear(M,k,_)&&(d?(w&&w.chainRemoveTail(t.index,_),o.pop()):(w&&w.chainRemoveHead(t.index,_),o.shift())),w&&w.chainClose(t.index),void e.push(o)):void(d?(w&&w.chainAddHead(t.index,h),o.unshift(h)):(w&&w.chainAddTail(t.index,h),o.push(h)))}var A=t.index,E=p.index;w&&w.chainConnect(A,E);var I=y[A].length<y[E].length;t.matches_head?p.matches_head?I?(R(A),O(A,E)):(R(E),O(E,A)):O(E,A):p.matches_head?O(A,E):I?(R(A),O(E,A)):(R(E),O(A,E))}function C(D,L,B){return u.index=D,u.matches_head=L,u.matches_pt1=B,u===t?(u=p,!1):(u=null,!0)}function R(D){w&&w.chainReverse(D),y[D].reverse()}function O(D,L){var B=y[D],j=y[L],W=B[B.length-1],Y=B[B.length-2],Q=j[0],ne=j[1];m.pointsCollinear(Y,W,Q)&&(w&&w.chainRemoveTail(D,W),B.pop(),W=Y),m.pointsCollinear(W,Q,ne)&&(w&&w.chainRemoveHead(L,Q),j.shift()),w&&w.chainJoin(D,L),y[D]=B.concat(j),y.splice(L,1)}}),e}},{}],261:[function(x,oe,ae){function g(w,y,e){var r=[];return w.forEach(function(n){var a=(n.myFill.above?8:0)+(n.myFill.below?4:0)+(n.otherFill&&n.otherFill.above?2:0)+(n.otherFill&&n.otherFill.below?1:0);0!==y[a]&&r.push({id:e?e.segmentId():-1,start:n.start,end:n.end,myFill:{above:1===y[a],below:2===y[a]},otherFill:null})}),e&&e.selected(r),r}oe.exports={union:function(w,y){return g(w,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],y)},intersect:function(w,y){return g(w,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],y)},difference:function(w,y){return g(w,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],y)},differenceRev:function(w,y){return g(w,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],y)},xor:function(w,y){return g(w,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],y)}}},{}],262:[function(x,oe,ae){"use strict";var g=x("stream").Transform,m=x("stream-parser");function w(){g.call(this,{readableObjectMode:!0})}function y(e,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=e,r&&(this.code=r),n&&(this.statusCode=n)}(w.prototype=Object.create(g.prototype)).constructor=w,m(w.prototype),ae.ParserStream=w,ae.sliceEq=function(e,r,n){for(var a=r,t=0;t<n.length;)if(e[a++]!==n[t++])return!1;return!0},ae.str2arr=function(e,r){var n=[],a=0;if(r&&"hex"===r)for(;a<e.length;)n.push(parseInt(e.slice(a,a+2),16)),a+=2;else for(;a<e.length;a++)n.push(255&e.charCodeAt(a));return n},ae.readUInt16LE=function(e,r){return e[r]|e[r+1]<<8},ae.readUInt16BE=function(e,r){return e[r+1]|e[r]<<8},ae.readUInt32LE=function(e,r){return e[r]|e[r+1]<<8|e[r+2]<<16|16777216*e[r+3]},ae.readUInt32BE=function(e,r){return e[r+3]|e[r+2]<<8|e[r+1]<<16|16777216*e[r]},(y.prototype=Object.create(Error.prototype)).constructor=y,ae.ProbeError=y},{stream:285,"stream-parser":301}],263:[function(x,oe,ae){"use strict";function g(y,e){var r=new Error(y);return r.code=e,r}function m(y){try{return decodeURIComponent(escape(y))}catch(e){return y}}function w(y,e,r){this.input=y.subarray(e,r),this.start=e;var n=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==n&&"MM\0*"!==n)throw g("invalid TIFF signature","EBADDATA");this.big_endian="M"===n[0]}w.prototype.each=function(y){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var r=this.ifds_to_read.shift();r.offset&&this.scan_ifd(r.id,r.offset,y)}},w.prototype.read_uint16=function(y){var e=this.input;if(y+2>e.length)throw g("unexpected EOF","EBADDATA");return this.big_endian?256*e[y]+e[y+1]:e[y]+256*e[y+1]},w.prototype.read_uint32=function(y){var e=this.input;if(y+4>e.length)throw g("unexpected EOF","EBADDATA");return this.big_endian?16777216*e[y]+65536*e[y+1]+256*e[y+2]+e[y+3]:e[y]+256*e[y+1]+65536*e[y+2]+16777216*e[y+3]},w.prototype.is_subifd_link=function(y,e){return 0===y&&34665===e||0===y&&34853===e||34665===y&&40965===e},w.prototype.exif_format_length=function(y){switch(y){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},w.prototype.exif_format_read=function(y,e){var r;switch(y){case 1:case 2:return this.input[e];case 6:return(r=this.input[e])|33554430*(128&r);case 3:return this.read_uint16(e);case 8:return(r=this.read_uint16(e))|131070*(32768&r);case 4:return this.read_uint32(e);case 9:return 0|this.read_uint32(e);default:return null}},w.prototype.scan_ifd=function(y,e,r){var n=this.read_uint16(e);e+=2;for(var a=0;a<n;a++){var t=this.read_uint16(e),p=this.read_uint16(e+2),u=this.read_uint32(e+4),i=this.exif_format_length(p),c=u*i,f=c<=4?e+8:this.read_uint32(e+8),l=!1;if(f+c>this.input.length)throw g("unexpected EOF","EBADDATA");for(var h=[],d=f,o=0;o<u;o++,d+=i){var _=this.exif_format_read(p,d);if(null===_){h=null;break}h.push(_)}if(Array.isArray(h)&&2===p&&(h=m(String.fromCharCode.apply(null,h)))&&"\0"===h[h.length-1]&&(h=h.slice(0,-1)),this.is_subifd_link(y,t)&&Array.isArray(h)&&Number.isInteger(h[0])&&h[0]>0&&(this.ifds_to_read.push({id:t,offset:h[0]}),l=!0),!1===r({is_big_endian:this.big_endian,ifd:y,tag:t,format:p,count:u,entry_offset:e+this.start,data_length:c,data_offset:f+this.start,value:h,is_subifd_link:l}))return void(this.aborted=!0);e+=12}0===y&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},oe.exports.ExifParser=w,oe.exports.get_orientation=function(y){var e=0;try{return new w(y,0,y.length).each(function(r){if(0===r.ifd&&274===r.tag&&Array.isArray(r.value))return e=r.value[0],!1}),e}catch(r){return-1}}},{}],264:[function(x,oe,ae){"use strict";var g=x("./common").readUInt16BE,m=x("./common").readUInt32BE;function w(t,p){if(t.length<4+p)return null;var u=m(t,p);return t.length<u+p||u<8?null:{boxtype:String.fromCharCode.apply(null,t.slice(p+4,p+8)),data:t.slice(p+8,p+u),end:p+u}}function y(t,p){for(var u=0;;){var i=w(t,u);if(!i)break;switch(i.boxtype){case"ispe":p.sizes.push({width:m(i.data,4),height:m(i.data,8)});break;case"irot":p.transforms.push({type:"irot",value:3&i.data[0]});break;case"imir":p.transforms.push({type:"imir",value:1&i.data[0]})}u=i.end}}function e(t,p,u){for(var i=0,c=0;c<u;c++)i=256*i+(t[p+c]||0);return i}function r(t,p){for(var u=t[4]>>4&15,i=15&t[4],c=t[5]>>4&15,f=g(t,6),l=8,h=0;h<f;h++){var d=g(t,l),o=g(t,l+=2),_=e(t,l+=2,c),s=g(t,l+=c);if(l+=2,0===o&&1===s){var k=e(t,l,u),M=e(t,l+u,i);p.item_loc[d]={length:M,offset:k+_}}l+=s*(u+i)}}function n(t,p){for(var u=g(t,4),i=6,c=0;c<u;c++){var f=w(t,i);if(!f)break;if("infe"===f.boxtype){for(var l=g(f.data,4),h="",d=8;d<f.data.length&&f.data[d];d++)h+=String.fromCharCode(f.data[d]);p.item_inf[h]=l}i=f.end}}function a(t,p){for(var u=0;;){var i=w(t,u);if(!i)break;"ipco"===i.boxtype&&y(i.data,p),u=i.end}}oe.exports.unbox=w,oe.exports.readSizeFromMeta=function(t){var p={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(d,o){for(var _=4;;){var s=w(d,_);if(!s)break;"iprp"===s.boxtype&&a(s.data,o),"iloc"===s.boxtype&&r(s.data,o),"iinf"===s.boxtype&&n(s.data,o),_=s.end}}(t,p),p.sizes.length){var u,i,c,f=(i=(u=p.sizes).reduce(function(d,o){return d.width>o.width||d.width===o.width&&d.height>o.height?d:o}),c=u.reduce(function(d,o){return d.height>o.height||d.height===o.height&&d.width>o.width?d:o}),i.width>c.height||i.width===c.height&&i.height>c.width?i:c),l=1;p.transforms.forEach(function(d){var o={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},_={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===d.type&&(l=0===d.value?_[l]:o[l=o[l=_[l]]]),"irot"===d.type)for(var s=0;s<d.value;s++)l=o[l]});var h=null;return p.item_inf.Exif&&(h=p.item_loc[p.item_inf.Exif]),{width:f.width,height:f.height,orientation:p.transforms.length?l:null,variants:p.sizes,exif_location:h}}},oe.exports.getMimeType=function(t){var p=String.fromCharCode.apply(null,t.slice(0,4)),u={};u[p]=!0;for(var i=8;i<t.length;i+=4)u[String.fromCharCode.apply(null,t.slice(i,i+4))]=!0;if(u.mif1||u.msf1||u.miaf)return"avif"===p||"avis"===p||"avio"===p?{type:"avif",mime:"image/avif"}:"heic"===p||"heix"===p?{type:"heic",mime:"image/heic"}:"hevc"===p||"hevx"===p?{type:"heic",mime:"image/heic-sequence"}:u.avif||u.avis?{type:"avif",mime:"image/avif"}:u.heic||u.heix||u.hevc||u.hevx||u.heis?u.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(x,oe,ae){"use strict";var g=x("../common").str2arr,m=x("../common").sliceEq,w=x("../common").readUInt32BE,y=x("../miaf_utils"),e=x("../exif_utils"),r=g("ftyp");oe.exports=function(n){if(m(n,4,r)){var a=y.unbox(n,0);if(a){var t=y.getMimeType(a.data);if(t){for(var p,u=a.end;;){var i=y.unbox(n,u);if(!i)break;if(u=i.end,"mdat"===i.boxtype)return;if("meta"===i.boxtype){p=i.data;break}}if(p){var c=y.readSizeFromMeta(p);if(c){var f={width:c.width,height:c.height,type:t.type,mime:t.mime,wUnits:"px",hUnits:"px"};if(c.variants.length>1&&(f.variants=c.variants),c.orientation&&(f.orientation=c.orientation),c.exif_location&&c.exif_location.offset+c.exif_location.length<=n.length){var l=w(n,c.exif_location.offset),h=n.slice(c.exif_location.offset+l+4,c.exif_location.offset+c.exif_location.length),d=e.get_orientation(h);d>0&&(f.orientation=d)}return f}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(x,oe,ae){"use strict";var g=x("../common").str2arr,m=x("../common").sliceEq,w=x("../common").readUInt16LE,y=g("BM");oe.exports=function(e){if(!(e.length<26)&&m(e,0,y))return{width:w(e,18),height:w(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(x,oe,ae){"use strict";var g=x("../common").str2arr,m=x("../common").sliceEq,w=x("../common").readUInt16LE,y=g("GIF87a"),e=g("GIF89a");oe.exports=function(r){if(!(r.length<10)&&(m(r,0,y)||m(r,0,e)))return{width:w(r,6),height:w(r,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(x,oe,ae){"use strict";var g=x("../common").readUInt16LE;oe.exports=function(m){var w=g(m,0),y=g(m,2),e=g(m,4);if(0===w&&1===y&&e){for(var r=[],n={width:0,height:0},a=0;a<e;a++){var t=m[6+16*a]||256,p=m[6+16*a+1]||256,u={width:t,height:p};r.push(u),(t>n.width||p>n.height)&&(n=u)}return{width:n.width,height:n.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(x,oe,ae){"use strict";var g=x("../common").readUInt16BE,m=x("../common").str2arr,w=x("../common").sliceEq,y=x("../exif_utils"),e=m("Exif\0\0");oe.exports=function(r){if(!(r.length<2)&&255===r[0]&&216===r[1]&&255===r[2])for(var n=2;;){for(;;){if(r.length-n<2)return;if(255===r[n++])break}for(var a,t,p=r[n++];255===p;)p=r[n++];if(208<=p&&p<=217||1===p)a=0;else{if(!(192<=p&&p<=254)||r.length-n<2)return;a=g(r,n)-2,n+=2}if(217===p||218===p)return;if(225===p&&a>=10&&w(r,n,e)&&(t=y.get_orientation(r.slice(n+6,n+a))),a>=5&&192<=p&&p<=207&&196!==p&&200!==p&&204!==p){if(r.length-n<a)return;var u={width:g(r,n+3),height:g(r,n+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return t>0&&(u.orientation=t),u}n+=a}}},{"../common":262,"../exif_utils":263}],270:[function(x,oe,ae){"use strict";var g=x("../common").str2arr,m=x("../common").sliceEq,w=x("../common").readUInt32BE,y=g("\x89PNG\r\n\x1a\n"),e=g("IHDR");oe.exports=function(r){if(!(r.length<24)&&m(r,0,y)&&m(r,12,e))return{width:w(r,16),height:w(r,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(x,oe,ae){"use strict";var g=x("../common").str2arr,m=x("../common").sliceEq,w=x("../common").readUInt32BE,y=g("8BPS\0\x01");oe.exports=function(e){if(!(e.length<22)&&m(e,0,y))return{width:w(e,18),height:w(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(x,oe,ae){"use strict";function g(t){return"number"==typeof t&&isFinite(t)&&t>0}var m=/<[-_.:a-zA-Z0-9][^>]*>/,w=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,y=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,e=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,r=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,n=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function a(t){return n.test(t)?t.match(n)[0]:"px"}oe.exports=function(t){if(function(k){var M,A=0,E=k.length;for(239===k[0]&&187===k[1]&&191===k[2]&&(A=3);A<E&&(32===(M=k[A])||9===M||13===M||10===M);)A++;return A!==E&&60===k[A]}(t)){for(var p="",u=0;u<t.length;u++)p+=String.fromCharCode(t[u]);var i=(p.match(m)||[""])[0];if(w.test(i)){var c=(M=(k=i).match(y),A=k.match(e),E=k.match(r),{width:M&&(M[1]||M[2]),height:A&&(A[1]||A[2]),viewbox:E&&(E[1]||E[2])}),f=parseFloat(c.width),l=parseFloat(c.height);if(c.width&&c.height)return g(f)&&g(l)?{width:f,height:l,type:"svg",mime:"image/svg+xml",wUnits:a(c.width),hUnits:a(c.height)}:void 0;var h=(c.viewbox||"").split(" "),d={width:h[2],height:h[3]},o=parseFloat(d.width),_=parseFloat(d.height);if(g(o)&&g(_)&&a(d.width)===a(d.height)){var s=o/_;return c.width?g(f)?{width:f,height:f/s,type:"svg",mime:"image/svg+xml",wUnits:a(c.width),hUnits:a(c.width)}:void 0:c.height?g(l)?{width:l*s,height:l,type:"svg",mime:"image/svg+xml",wUnits:a(c.height),hUnits:a(c.height)}:void 0:{width:o,height:_,type:"svg",mime:"image/svg+xml",wUnits:a(d.width),hUnits:a(d.height)}}}}var k,M,A,E}},{}],273:[function(x,oe,ae){"use strict";var g=x("../common").str2arr,m=x("../common").sliceEq,w=x("../common").readUInt16LE,y=x("../common").readUInt16BE,e=x("../common").readUInt32LE,r=x("../common").readUInt32BE,n=g("II*\0"),a=g("MM\0*");function t(i,c,f){return f?y(i,c):w(i,c)}function p(i,c,f){return f?r(i,c):e(i,c)}function u(i,c,f){var l=t(i,c+2,f);return 1!==p(i,c+4,f)||3!==l&&4!==l?null:3===l?t(i,c+8,f):p(i,c+8,f)}oe.exports=function(i){if(!(i.length<8)&&(m(i,0,n)||m(i,0,a))){var c=77===i[0],f=p(i,4,c)-8;if(!(f<0)){var l=f+8;if(!(i.length-l<2)){var h=12*t(i,l+0,c);if(!(h<=0||(l+=2,i.length-l<h))){var d,o,_,s;for(d=0;d<h;d+=12)256===(s=t(i,l+d,c))?o=u(i,l+d,c):257===s&&(_=u(i,l+d,c));return o&&_?{width:o,height:_,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":262}],274:[function(x,oe,ae){"use strict";var g=x("../common").str2arr,m=x("../common").sliceEq,w=x("../common").readUInt16LE,y=x("../common").readUInt32LE,e=x("../exif_utils"),r=g("RIFF"),n=g("WEBP");function a(u,i){if(157===u[i+3]&&1===u[i+4]&&42===u[i+5])return{width:16383&w(u,i+6),height:16383&w(u,i+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function t(u,i){if(47===u[i]){var c=y(u,i+1);return{width:1+(16383&c),height:1+(c>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function p(u,i){return{width:1+(u[i+6]<<16|u[i+5]<<8|u[i+4]),height:1+(u[i+9]<<i|u[i+8]<<8|u[i+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}oe.exports=function(u){if(!(u.length<16)&&(m(u,0,r)||m(u,8,n))){var i=12,c=null,f=0,l=y(u,4)+8;if(!(l>u.length)){for(;i+8<l;)if(0!==u[i]){var h=String.fromCharCode.apply(null,u.slice(i,i+4)),d=y(u,i+4);"VP8 "===h&&d>=10?c=c||a(u,i+8):"VP8L"===h&&d>=9?c=c||t(u,i+8):"VP8X"===h&&d>=10?c=c||p(u,i+8):"EXIF"===h&&(f=e.get_orientation(u.slice(i+8,i+8+d)),i=1/0),i+=8+d}else i++;if(c)return f>0&&(c.orientation=f),c}}}},{"../common":262,"../exif_utils":263}],275:[function(x,oe,ae){"use strict";oe.exports={avif:x("./parse_sync/avif"),bmp:x("./parse_sync/bmp"),gif:x("./parse_sync/gif"),ico:x("./parse_sync/ico"),jpeg:x("./parse_sync/jpeg"),png:x("./parse_sync/png"),psd:x("./parse_sync/psd"),svg:x("./parse_sync/svg"),tiff:x("./parse_sync/tiff"),webp:x("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(x,oe,ae){"use strict";var g=x("./lib/parsers_sync");oe.exports=function(m){return function(w){for(var y=Object.keys(g),e=0;e<y.length;e++){var r=g[y[e]](w);if(r)return r}return null}(m)},oe.exports.parsers=g},{"./lib/parsers_sync":275}],277:[function(x,oe,ae){var g,m,w=oe.exports={};function y(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function r(l){if(g===setTimeout)return setTimeout(l,0);if((g===y||!g)&&setTimeout)return g=setTimeout,setTimeout(l,0);try{return g(l,0)}catch(h){try{return g.call(null,l,0)}catch(d){return g.call(this,l,0)}}}!function(){try{g="function"==typeof setTimeout?setTimeout:y}catch(l){g=y}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(l){m=e}}();var n,a=[],t=!1,p=-1;function u(){t&&n&&(t=!1,n.length?a=n.concat(a):p=-1,a.length&&i())}function i(){if(!t){var l=r(u);t=!0;for(var h=a.length;h;){for(n=a,a=[];++p<h;)n&&n[p].run();p=-1,h=a.length}n=null,t=!1,function(d){if(m===clearTimeout)return clearTimeout(d);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(d);try{m(d)}catch(o){try{return m.call(null,d)}catch(_){return m.call(this,d)}}}(l)}}function c(l,h){this.fun=l,this.array=h}function f(){}w.nextTick=function(l){var h=new Array(arguments.length-1);if(arguments.length>1)for(var d=1;d<arguments.length;d++)h[d-1]=arguments[d];a.push(new c(l,h)),1!==a.length||t||r(i)},c.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={},w.on=f,w.addListener=f,w.once=f,w.off=f,w.removeListener=f,w.removeAllListeners=f,w.emit=f,w.prependListener=f,w.prependOnceListener=f,w.listeners=function(l){return[]},w.binding=function(l){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(l){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},{}],278:[function(x,oe,ae){(function(g){(function(){for(var m=x("performance-now"),w="undefined"==typeof window?g:window,y=["moz","webkit"],e="AnimationFrame",r=w["request"+e],n=w["cancel"+e]||w["cancelRequest"+e],a=0;!r&&a<y.length;a++)r=w[y[a]+"Request"+e],n=w[y[a]+"Cancel"+e]||w[y[a]+"CancelRequest"+e];if(!r||!n){var t=0,p=0,u=[];r=function(i){if(0===u.length){var c=m(),f=Math.max(0,1e3/60-(c-t));t=f+c,setTimeout(function(){var l=u.slice(0);u.length=0;for(var h=0;h<l.length;h++)if(!l[h].cancelled)try{l[h].callback(t)}catch(d){setTimeout(function(){throw d},0)}},Math.round(f))}return u.push({handle:++p,callback:i,cancelled:!1}),p},n=function(i){for(var c=0;c<u.length;c++)u[c].handle===i&&(u[c].cancelled=!0)}}oe.exports=function(i){return r.call(w,i)},oe.exports.cancel=function(){n.apply(w,arguments)},oe.exports.polyfill=function(i){i||(i=w),i.requestAnimationFrame=r,i.cancelAnimationFrame=n}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":252}],279:[function(x,oe,ae){"use strict";var g=x("array-bounds"),m=x("color-normalize"),w=x("update-diff"),y=x("pick-by-alias"),e=x("object-assign"),r=x("flatten-vertex-data"),n=x("to-float32"),a=n.float32,t=n.fract32;oe.exports=function(u,i){if("function"==typeof u?(i||(i={}),i.regl=u):i=u,i.length&&(i.positions=i),!(u=i.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var c,f,l,h,d,o,_=u._gl,s={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},k=[];return h=u.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),f=u.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),l=u.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),d=u.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),o=u.buffer({usage:"static",type:"float",data:p}),I(i),c=u({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:u.prop("range"),lineWidth:u.prop("lineWidth"),capSize:u.prop("capSize"),opacity:u.prop("opacity"),scale:u.prop("scale"),translate:u.prop("translate"),scaleFract:u.prop("scaleFract"),translateFract:u.prop("translateFract"),viewport:function(R,O){return[O.viewport.x,O.viewport.y,R.viewportWidth,R.viewportHeight]}},attributes:{color:{buffer:h,offset:function(R,O){return 4*O.offset},divisor:1},position:{buffer:f,offset:function(R,O){return 8*O.offset},divisor:1},positionFract:{buffer:l,offset:function(R,O){return 8*O.offset},divisor:1},error:{buffer:d,offset:function(R,O){return 16*O.offset},divisor:1},direction:{buffer:o,stride:24,offset:0},lineOffset:{buffer:o,stride:24,offset:8},capOffset:{buffer:o,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:u.prop("viewport")},viewport:u.prop("viewport"),stencil:!1,instances:u.prop("count"),count:p.length}),e(M,{update:I,draw:A,destroy:C,regl:u,gl:_,canvas:_.canvas,groups:k}),M;function M(R){R?I(R):null===R&&C(),A()}function A(R){if("number"==typeof R)return E(R);R&&!Array.isArray(R)&&(R=[R]),u._refresh(),k.forEach(function(O,D){O&&(R&&(O.draw=!!R[D]),O.draw?E(D):O.draw=!0)})}function E(R){"number"==typeof R&&(R=k[R]),null!=R&&R&&R.count&&R.color&&R.opacity&&R.positions&&R.positions.length>1&&(R.scaleRatio=[R.scale[0]*R.viewport.width,R.scale[1]*R.viewport.height],c(R),R.after&&R.after(R))}function I(R){if(R){null!=R.length?"number"==typeof R[0]&&(R=[{positions:R}]):Array.isArray(R)||(R=[R]);var O=0,D=0;if(M.groups=k=R.map(function(ne,X){var $=k[X];return ne&&("function"==typeof ne?ne={after:ne}:"number"==typeof ne[0]&&(ne={positions:ne}),ne=y(ne,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),$||(k[X]=$={id:X,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},ne=e({},s,ne)),w($,ne,[{lineWidth:function(re){return.5*+re},capSize:function(re){return.5*+re},opacity:parseFloat,errors:function(re){return re=r(re),D+=re.length,re},positions:function(re,H){return re=r(re,"float64"),H.count=Math.floor(re.length/2),H.bounds=g(re,2),H.offset=O,O+=H.count,re}},{color:function(re,H){var U=H.count;if(re||(re="transparent"),!Array.isArray(re)||"number"==typeof re[0]){var G=re;re=Array(U);for(var ie=0;ie<U;ie++)re[ie]=G}if(re.length<U)throw Error("Not enough colors");for(var q=new Uint8Array(4*U),ee=0;ee<U;ee++){var te=m(re[ee],"uint8");q.set(te,4*ee)}return q},range:function(re,H,U){return re||(re=H.bounds),H.scale=[1/(re[2]-re[0]),1/(re[3]-re[1])],H.translate=[-re[0],-re[1]],H.scaleFract=t(H.scale),H.translateFract=t(H.translate),re},viewport:function(re){var H;return Array.isArray(re)?H={x:re[0],y:re[1],width:re[2]-re[0],height:re[3]-re[1]}:re?((H={x:re.x||re.left||0,y:re.y||re.top||0}).width=re.right?re.right-H.x:re.w||re.width||0,H.height=re.bottom?re.bottom-H.y:re.h||re.height||0):H={x:0,y:0,width:_.drawingBufferWidth,height:_.drawingBufferHeight},H}}])),$}),O||D){var L=k.reduce(function(ne,X,$){return ne+(X?X.count:0)},0),B=new Float64Array(2*L),j=new Uint8Array(4*L),W=new Float32Array(4*L);k.forEach(function(ne,X){if(ne){var $=ne.positions,H=ne.offset,G=ne.errors;ne.count&&(j.set(ne.color,4*H),W.set(G,4*H),B.set($,2*H))}});var Y=a(B);f(Y);var Q=t(B,Y);l(Q),h(j),d(W)}}}function C(){f.destroy(),l.destroy(),h.destroy(),d.destroy(),o.destroy()}};var p=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(x,oe,ae){"use strict";var g=x("color-normalize"),m=x("array-bounds"),w=x("object-assign"),y=x("glslify"),e=x("pick-by-alias"),r=x("flatten-vertex-data"),n=x("earcut"),a=x("array-normalize"),t=x("to-float32"),p=t.float32,u=t.fract32,i=x("es6-weak-map"),c=x("parse-rect"),f=x("array-find-index");function l(h,d){if(!(this instanceof l))return new l(h,d);if("function"==typeof h?(d||(d={}),d.regl=h):d=h,d.length&&(d.positions=d),!(h=d.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=h._gl,this.regl=h,this.passes=[],this.shaders=l.shaders.has(h)?l.shaders.get(h):l.shaders.set(h,l.createShaders(h)).get(h),this.update(d)}oe.exports=l,l.dashMult=2,l.maxPatternLength=256,l.precisionThreshold=3e6,l.maxPoints=1e4,l.maxLines=2048,l.shaders=new i,l.createShaders=function(h){var d,o=h.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),_={primitive:"triangle strip",instances:h.prop("count"),count:4,offset:0,uniforms:{miterMode:function(k,M){return"round"===M.join?2:1},miterLimit:h.prop("miterLimit"),scale:h.prop("scale"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),thickness:h.prop("thickness"),dashTexture:h.prop("dashTexture"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),dashLength:h.prop("dashLength"),viewport:function(k,M){return[M.viewport.x,M.viewport.y,k.viewportWidth,k.viewportHeight]},depth:h.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(k,M){return!M.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport")},s=h(w({vert:y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:y(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:o,divisor:0,stride:8,offset:0},lineTop:{buffer:o,divisor:0,stride:8,offset:4},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},_));try{d=h(w({cull:{enable:!0,face:"back"},vert:y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:y(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:o,divisor:0,stride:8,offset:0},lineTop:{buffer:o,divisor:0,stride:8,offset:4},aColor:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:h.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},_))}catch(k){d=s}return{fill:h({primitive:"triangle",elements:function(k,M){return M.triangles},offset:0,vert:y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:y(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:h.prop("scale"),color:h.prop("fill"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),viewport:function(k,M){return[M.viewport.x,M.viewport.y,k.viewportWidth,k.viewportHeight]}},attributes:{position:{buffer:h.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8}},blend:_.blend,depth:{enable:!1},scissor:_.scissor,stencil:_.stencil,viewport:_.viewport}),rect:s,miter:d}},l.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},l.prototype.render=function(){for(var h,d=[],o=arguments.length;o--;)d[o]=arguments[o];d.length&&(h=this).update.apply(h,d),this.draw()},l.prototype.draw=function(){for(var h=this,d=[],o=arguments.length;o--;)d[o]=arguments[o];return(d.length?d:this.passes).forEach(function(_,s){var k;if(_&&Array.isArray(_))return(k=h).draw.apply(k,_);"number"==typeof _&&(_=h.passes[_]),_&&_.count>1&&_.opacity&&(h.regl._refresh(),_.fill&&_.triangles&&_.triangles.length>2&&h.shaders.fill(_),_.thickness&&(_.scale[0]*_.viewport.width>l.precisionThreshold||_.scale[1]*_.viewport.height>l.precisionThreshold||"rect"===_.join||!_.join&&(_.thickness<=2||_.count>=l.maxPoints)?h.shaders.rect(_):h.shaders.miter(_)))}),this},l.prototype.update=function(h){var d=this;if(h){null!=h.length?"number"==typeof h[0]&&(h=[{positions:h}]):Array.isArray(h)||(h=[h]);var o=this.regl,_=this.gl;if(h.forEach(function(E,I){var C=d.passes[I];if(void 0!==E)if(null!==E){if("number"==typeof E[0]&&(E={positions:E}),E=e(E,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),C||(d.passes[I]=C={id:I,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:o.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:o.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:o.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},E=w({},l.defaults,E)),null!=E.thickness&&(C.thickness=parseFloat(E.thickness)),null!=E.opacity&&(C.opacity=parseFloat(E.opacity)),null!=E.miterLimit&&(C.miterLimit=parseFloat(E.miterLimit)),null!=E.overlay&&(C.overlay=!!E.overlay,I<l.maxLines&&(C.depth=2*(l.maxLines-1-I%l.maxLines)/l.maxLines-1)),null!=E.join&&(C.join=E.join),null!=E.hole&&(C.hole=E.hole),null!=E.fill&&(C.fill=E.fill?g(E.fill,"uint8"):null),null!=E.viewport&&(C.viewport=c(E.viewport)),C.viewport||(C.viewport=c([_.drawingBufferWidth,_.drawingBufferHeight])),null!=E.close&&(C.close=E.close),null===E.positions&&(E.positions=[]),E.positions){var R,O;if(E.positions.x&&E.positions.y){var D=E.positions.x,L=E.positions.y;O=C.count=Math.max(D.length,L.length),R=new Float64Array(2*O);for(var B=0;B<O;B++)R[2*B]=D[B],R[2*B+1]=L[B]}else R=r(E.positions,"float64"),O=C.count=Math.floor(R.length/2);var j=C.bounds=m(R,2);if(C.fill){for(var W=[],Y={},Q=0,ne=0,X=0,$=C.count;ne<$;ne++){var re=R[2*ne],H=R[2*ne+1];isNaN(re)||isNaN(H)||null==re||null==H?(re=R[2*Q],H=R[2*Q+1],Y[ne]=Q):Q=ne,W[X++]=re,W[X++]=H}if(E.splitNull){C.count-1 in Y||(Y[C.count]=C.count-1);var U=Object.keys(Y).map(Number).sort(function(Ft,Jt){return Ft-Jt}),G=[],ie=0,q=null!=C.hole?C.hole[0]:null;if(null!=q){var ee=f(U,function(Ft){return Ft>=q});(U=U.slice(0,ee)).push(q)}for(var te=function(Ft){var Jt=W.slice(2*ie,2*U[Ft]).concat(q?W.slice(2*q):[]),ln=(C.hole||[]).map(function(cn){return cn-q+(U[Ft]-ie)}),dn=n(Jt,ln);dn=dn.map(function(cn){return cn+ie+(cn+ie<U[Ft]?0:q-U[Ft])}),G.push.apply(G,dn),ie=U[Ft]+1},se=0;se<U.length;se++)te(se);for(var ue=0,de=G.length;ue<de;ue++)null!=Y[G[ue]]&&(G[ue]=Y[G[ue]]);C.triangles=G}else{for(var he=n(W,C.hole||[]),xe=0,ge=he.length;xe<ge;xe++)null!=Y[he[xe]]&&(he[xe]=Y[he[xe]]);C.triangles=he}}var _e=new Float64Array(R);a(_e,2,j);var Ce=new Float64Array(2*O+6);C.close?R[0]===R[2*O-2]&&R[1]===R[2*O-1]?(Ce[0]=_e[2*O-4],Ce[1]=_e[2*O-3]):(Ce[0]=_e[2*O-2],Ce[1]=_e[2*O-1]):(Ce[0]=_e[0],Ce[1]=_e[1]),Ce.set(_e,2),C.close?R[0]===R[2*O-2]&&R[1]===R[2*O-1]?(Ce[2*O+2]=_e[2],Ce[2*O+3]=_e[3],C.count-=1):(Ce[2*O+2]=_e[0],Ce[2*O+3]=_e[1],Ce[2*O+4]=_e[2],Ce[2*O+5]=_e[3]):(Ce[2*O+2]=_e[2*O-2],Ce[2*O+3]=_e[2*O-1],Ce[2*O+4]=_e[2*O-2],Ce[2*O+5]=_e[2*O-1]);var Le=p(Ce);C.positionBuffer(Le);var Ie=u(Ce,Le);C.positionFractBuffer(Ie)}if(E.range?C.range=E.range:C.range||(C.range=C.bounds),(E.range||E.positions)&&C.count){var Be=C.bounds,Pe=C.range[2]-C.range[0],De=C.range[3]-C.range[1];C.scale=[(Be[2]-Be[0])/Pe,(Be[3]-Be[1])/De],C.translate=[-C.range[0]/Pe+Be[0]/Pe||0,-C.range[1]/De+Be[1]/De||0],C.scaleFract=u(C.scale),C.translateFract=u(C.translate)}if(E.dashes){var Fe,Ue=0;if(!E.dashes||E.dashes.length<2)Ue=1,Fe=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ue=0;for(var He=0;He<E.dashes.length;++He)Ue+=E.dashes[He];Fe=new Uint8Array(Ue*l.dashMult);for(var Ke=0,st=255,Ve=0;Ve<2;Ve++)for(var $e=0;$e<E.dashes.length;++$e){for(var Qe=0,tt=E.dashes[$e]*l.dashMult*.5;Qe<tt;++Qe)Fe[Ke++]=st;st^=255}}C.dashLength=Ue,C.dashTexture({channels:1,data:Fe,width:Fe.length,height:1,mag:"linear",min:"linear"},0,0)}if(E.color){var ut=C.count,xt=E.color;xt||(xt="transparent");var kt=new Uint8Array(4*ut+4);if(Array.isArray(xt)&&"number"!=typeof xt[0]){for(var Bt=0;Bt<ut;Bt++){var Rt=g(xt[Bt],"uint8");kt.set(Rt,4*Bt)}kt.set(g(xt[0],"uint8"),4*ut)}else for(var ft=g(xt,"uint8"),lt=0;lt<ut+1;lt++)kt.set(ft,4*lt);C.colorBuffer({usage:"dynamic",type:"uint8",data:kt})}}else d.passes[I]=null}),h.length<this.passes.length){for(var s=h.length;s<this.passes.length;s++){var k=this.passes[s];k&&(k.colorBuffer.destroy(),k.positionBuffer.destroy(),k.dashTexture.destroy())}this.passes.length=h.length}for(var M=[],A=0;A<this.passes.length;A++)null!==this.passes[A]&&M.push(this.passes[A]);return this.passes=M,this}},l.prototype.destroy=function(){return this.passes.forEach(function(h){h.colorBuffer.destroy(),h.positionBuffer.destroy(),h.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(x,oe,ae){"use strict";function g(s,k){return function(M){if(Array.isArray(M))return M}(s)||function(M,A){var E=null==M?null:"undefined"!=typeof Symbol&&M[Symbol.iterator]||M["@@iterator"];if(null!=E){var I,C,R=[],O=!0,D=!1;try{for(E=E.call(M);!(O=(I=E.next()).done)&&(R.push(I.value),!A||R.length!==A);O=!0);}catch(L){D=!0,C=L}finally{try{O||null==E.return||E.return()}finally{if(D)throw C}}return R}}(s,k)||w(s,k)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(s){return function(k){if(Array.isArray(k))return y(k)}(s)||function(k){if("undefined"!=typeof Symbol&&null!=k[Symbol.iterator]||null!=k["@@iterator"])return Array.from(k)}(s)||w(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(s,k){if(s){if("string"==typeof s)return y(s,k);var M=Object.prototype.toString.call(s).slice(8,-1);return"Object"===M&&s.constructor&&(M=s.constructor.name),"Map"===M||"Set"===M?Array.from(s):"Arguments"===M||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M)?y(s,k):void 0}}function y(s,k){(null==k||k>s.length)&&(k=s.length);for(var M=0,A=new Array(k);M<k;M++)A[M]=s[M];return A}var e=x("color-normalize"),r=x("array-bounds"),n=x("color-id"),a=x("@plotly/point-cluster"),t=x("object-assign"),p=x("glslify"),u=x("pick-by-alias"),i=x("update-diff"),c=x("flatten-vertex-data"),f=x("is-iexplorer"),l=x("to-float32"),h=x("parse-rect"),d=o;function o(s,k){var M=this;if(!(this instanceof o))return new o(s,k);"function"==typeof s?(k||(k={}),k.regl=s):(k=s,s=null),k&&k.length&&(k.positions=k);var A,E=(s=k.regl)._gl,I=[];this.tooManyColors=f,A=s.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:s,gl:E,groups:[],markerCache:[null],markerTextures:[null],palette:I,paletteIds:{},paletteTexture:A,maxColors:255,maxSize:100,canvas:E.canvas}),this.update(k);var C={uniforms:{constPointSize:!!k.constPointSize,opacity:s.prop("opacity"),paletteSize:function(D,L){return[M.tooManyColors?0:255,A.height]},pixelRatio:s.context("pixelRatio"),scale:s.prop("scale"),scaleFract:s.prop("scaleFract"),translate:s.prop("translate"),translateFract:s.prop("translateFract"),markerTexture:s.prop("markerTexture"),paletteTexture:A},attributes:{x:function(D,L){return L.xAttr||{buffer:L.positionBuffer,stride:8,offset:0}},y:function(D,L){return L.yAttr||{buffer:L.positionBuffer,stride:8,offset:4}},xFract:function(D,L){return L.xAttr?{constant:[0,0]}:{buffer:L.positionFractBuffer,stride:8,offset:0}},yFract:function(D,L){return L.yAttr?{constant:[0,0]}:{buffer:L.positionFractBuffer,stride:8,offset:4}},size:function(D,L){return L.size.length?{buffer:L.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*L.size/M.maxSize)]}},borderSize:function(D,L){return L.borderSize.length?{buffer:L.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*L.borderSize/M.maxSize)]}},colorId:function(D,L){return L.color.length?{buffer:L.colorBuffer,stride:M.tooManyColors?8:4,offset:0}:{constant:M.tooManyColors?I.slice(4*L.color,4*L.color+4):[L.color]}},borderColorId:function(D,L){return L.borderColor.length?{buffer:L.colorBuffer,stride:M.tooManyColors?8:4,offset:M.tooManyColors?4:2}:{constant:M.tooManyColors?I.slice(4*L.borderColor,4*L.borderColor+4):[L.borderColor]}},isActive:function(D,L){return!0===L.activation?{constant:[1]}:L.activation?L.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:s.prop("viewport")},viewport:s.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:s.prop("elements"),count:s.prop("count"),offset:s.prop("offset"),primitive:"points"},R=t({},C);R.frag=p(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),R.vert=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=s(R);var O=t({},C);O.frag=p(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),O.vert=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),f&&(O.frag=O.frag.replace("smoothstep","smoothStep"),R.frag=R.frag.replace("smoothstep","smoothStep")),this.drawCircle=s(O)}o.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},o.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},o.prototype.draw=function(){for(var s=this,k=arguments.length,M=new Array(k),A=0;A<k;A++)M[A]=arguments[A];var E=this.groups;if(1===M.length&&Array.isArray(M[0])&&(null===M[0][0]||Array.isArray(M[0][0]))&&(M=M[0]),this.regl._refresh(),M.length)for(var I=0;I<M.length;I++)this.drawItem(I,M[I]);else E.forEach(function(C,R){s.drawItem(R)});return this},o.prototype.drawItem=function(s,k){var M=this.groups,A=M[s];if("number"==typeof k&&(s=k,A=M[k],k=null),A&&A.count&&A.opacity){A.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,A,k));for(var E=[],I=1;I<A.activation.length;I++)A.activation[I]&&(!0===A.activation[I]||A.activation[I].data.length)&&E.push.apply(E,m(this.getMarkerDrawOptions(I,A,k)));E.length&&this.drawMarker(E)}},o.prototype.getMarkerDrawOptions=function(s,k,M){var A=k.range,E=k.tree,I=k.viewport,C=k.activation,R=k.selectionBuffer,O=k.count;if(!E)return M?[t({},k,{markerTexture:this.markerTextures[s],activation:C[s],count:M.length,elements:M,offset:0})]:[t({},k,{markerTexture:this.markerTextures[s],activation:C[s],offset:0})];var D=[],L=E.range(A,{lod:!0,px:[(A[2]-A[0])/I.width,(A[3]-A[1])/I.height]});if(M){for(var B=C[s].data,j=new Uint8Array(O),W=0;W<M.length;W++){var Y=M[W];j[Y]=B?B[Y]:1}R.subdata(j)}for(var Q=L.length;Q--;){var ne=g(L[Q],2),X=ne[0];D.push(t({},k,{markerTexture:this.markerTextures[s],activation:M?R:C[s],offset:X,count:ne[1]-X}))}return D},o.prototype.update=function(){for(var s=this,k=arguments.length,M=new Array(k),A=0;A<k;A++)M[A]=arguments[A];if(M.length){1===M.length&&Array.isArray(M[0])&&(M=M[0]);var E=this.groups,I=this.gl,C=this.regl,R=this.maxSize,O=this.maxColors,D=this.palette;this.groups=E=M.map(function(L,B){var j=E[B];if(void 0===L)return j;null===L?L={positions:null}:"function"==typeof L?L={ondraw:L}:"number"==typeof L[0]&&(L={positions:L}),null===(L=u(L,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(L.positions=[]),null!=L.tooManyColors&&(s.tooManyColors=L.tooManyColors),j||(E[B]=j={id:B,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:C.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:C.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:C.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:C.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:C.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},L=t({},o.defaults,L)),L.positions&&!("marker"in L)&&(L.marker=j.marker,delete j.marker),L.marker&&!("positions"in L)&&(L.positions=j.positions,delete j.positions);var W=0,Y=0;if(i(j,L,[{snap:!0,size:function(ge,_e){return null==ge&&(ge=o.defaults.size),W+=ge&&ge.length?1:0,ge},borderSize:function(ge,_e){return null==ge&&(ge=o.defaults.borderSize),W+=ge&&ge.length?1:0,ge},opacity:parseFloat,color:function(ge,_e){return null==ge&&(ge=o.defaults.color),ge=s.updateColor(ge),Y++,ge},borderColor:function(ge,_e){return null==ge&&(ge=o.defaults.borderColor),ge=s.updateColor(ge),Y++,ge},bounds:function(ge,_e,Ce){return"range"in Ce||(Ce.range=null),ge},positions:function(ge,_e,Ce){var Le=_e.snap,Ie=_e.positionBuffer,Be=_e.positionFractBuffer,ve=_e.selectionBuffer;if(ge.x||ge.y)return _e.xAttr=ge.x.length?{buffer:C.buffer(ge.x),offset:0,stride:4,count:ge.x.length}:{buffer:ge.x.buffer,offset:4*ge.x.offset||0,stride:4*(ge.x.stride||1),count:ge.x.count},_e.yAttr=ge.y.length?{buffer:C.buffer(ge.y),offset:0,stride:4,count:ge.y.length}:{buffer:ge.y.buffer,offset:4*ge.y.offset||0,stride:4*(ge.y.stride||1),count:ge.y.count},_e.count=Math.max(_e.xAttr.count,_e.yAttr.count),ge;ge=c(ge,"float64");var Te=_e.count=Math.floor(ge.length/2),Pe=_e.bounds=Te?r(ge,2):null;if(Ce.range||_e.range||(delete _e.range,Ce.range=Pe),Ce.marker||_e.marker||(delete _e.marker,Ce.marker=null),Le&&(!0===Le||Te>Le)?_e.tree=a(ge,{bounds:Pe}):Le&&Le.length&&(_e.tree=Le),_e.tree){var De={primitive:"points",usage:"static",data:_e.tree,type:"uint32"};_e.elements?_e.elements(De):_e.elements=C.elements(De)}var Fe=l.float32(ge);return Ie({data:Fe,usage:"dynamic"}),Be({data:l.fract32(ge,Fe),usage:"dynamic"}),ve({data:new Uint8Array(Te),type:"uint8",usage:"stream"}),ge}},{marker:function(ge,_e,Ce){var Le=_e.activation;if(Le.forEach(function(Fe){return Fe&&Fe.destroy&&Fe.destroy()}),Le.length=0,ge&&"number"!=typeof ge[0]){for(var Ie=[],Be=0,ve=Math.min(ge.length,_e.count);Be<ve;Be++){var Te=s.addMarker(ge[Be]);Ie[Te]||(Ie[Te]=new Uint8Array(_e.count)),Ie[Te][Be]=1}for(var Pe=0;Pe<Ie.length;Pe++)if(Ie[Pe]){var De={data:Ie[Pe],type:"uint8",usage:"static"};Le[Pe]?Le[Pe](De):Le[Pe]=C.buffer(De),Le[Pe].data=Ie[Pe]}}else Le[s.addMarker(ge)]=!0;return ge},range:function(ge,_e,Ce){var Le=_e.bounds;if(Le)return ge||(ge=Le),_e.scale=[1/(ge[2]-ge[0]),1/(ge[3]-ge[1])],_e.translate=[-ge[0],-ge[1]],_e.scaleFract=l.fract(_e.scale),_e.translateFract=l.fract(_e.translate),ge},viewport:function(ge){return h(ge||[I.drawingBufferWidth,I.drawingBufferHeight])}}]),W){var ne=j.count,X=j.size,$=j.borderSize,re=j.sizeBuffer,H=new Uint8Array(2*ne);if(X.length||$.length)for(var U=0;U<ne;U++)H[2*U]=Math.round(255*(null==X[U]?X:X[U])/R),H[2*U+1]=Math.round(255*(null==$[U]?$:$[U])/R);re({data:H,usage:"dynamic"})}if(Y){var G,q=j.count,ee=j.color,te=j.borderColor,se=j.colorBuffer;if(s.tooManyColors){if(ee.length||te.length){G=new Uint8Array(8*q);for(var ue=0;ue<q;ue++){var de=ee[ue];G[8*ue]=D[4*de],G[8*ue+1]=D[4*de+1],G[8*ue+2]=D[4*de+2],G[8*ue+3]=D[4*de+3];var he=te[ue];G[8*ue+4]=D[4*he],G[8*ue+5]=D[4*he+1],G[8*ue+6]=D[4*he+2],G[8*ue+7]=D[4*he+3]}}}else if(ee.length||te.length){G=new Uint8Array(4*q+2);for(var xe=0;xe<q;xe++)null!=ee[xe]&&(G[4*xe]=ee[xe]%O,G[4*xe+1]=Math.floor(ee[xe]/O)),null!=te[xe]&&(G[4*xe+2]=te[xe]%O,G[4*xe+3]=Math.floor(te[xe]/O))}se({data:G||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return j})}},o.prototype.addMarker=function(s){var k,M=this.markerTextures,A=this.regl,E=this.markerCache,I=null==s?0:E.indexOf(s);if(I>=0)return I;if(s instanceof Uint8Array||s instanceof Uint8ClampedArray)k=s;else{k=new Uint8Array(s.length);for(var C=0,R=s.length;C<R;C++)k[C]=255*s[C]}var O=Math.floor(Math.sqrt(k.length));return I=M.length,E.push(s),M.push(A.texture({channels:1,data:k,radius:O,mag:"linear",min:"linear"})),I},o.prototype.updateColor=function(s){var k=this.paletteIds,M=this.palette,A=this.maxColors;Array.isArray(s)||(s=[s]);var E=[];if("number"==typeof s[0]){var I=[];if(Array.isArray(s))for(var C=0;C<s.length;C+=4)I.push(s.slice(C,C+4));else for(var R=0;R<s.length;R+=4)I.push(s.subarray(R,R+4));s=I}for(var O=0;O<s.length;O++){var D=s[O];D=e(D,"uint8");var L=n(D,!1);if(null==k[L]){var B=M.length;k[L]=Math.floor(B/4),M[B]=D[0],M[B+1]=D[1],M[B+2]=D[2],M[B+3]=D[3]}E[O]=k[L]}return!this.tooManyColors&&M.length>4*A&&(this.tooManyColors=!0),this.updatePalette(M),1===E.length?E[0]:E},o.prototype.updatePalette=function(s){if(!this.tooManyColors){var k=this.maxColors,M=this.paletteTexture,A=Math.ceil(.25*s.length/k);if(A>1)for(var E=.25*(s=s.slice()).length%k;E<A*k;E++)s.push(0,0,0,0);M.height<A&&M.resize(k,A),M.subimage({width:Math.min(.25*s.length,k),height:A,data:s},0,0)}},o.prototype.destroy=function(){return this.groups.forEach(function(s){s.sizeBuffer.destroy(),s.positionBuffer.destroy(),s.positionFractBuffer.destroy(),s.colorBuffer.destroy(),s.activation.forEach(function(k){return k&&k.destroy&&k.destroy()}),s.selectionBuffer.destroy(),s.elements&&s.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(s){return s&&s.destroy&&s.destroy()}),this};var _=x("object-assign");oe.exports=function(s,k){var M=new d(s,k),A=M.render.bind(M);return _(A,{render:A,update:M.update.bind(M),draw:M.draw.bind(M),destroy:M.destroy.bind(M),regl:M.regl,gl:M.gl,canvas:M.gl.canvas,groups:M.groups,markers:M.markerCache,palette:M.palette}),A}},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(x,oe,ae){"use strict";var g=x("regl-scatter2d"),m=x("pick-by-alias"),w=x("array-bounds"),y=x("raf"),e=x("array-range"),r=x("parse-rect"),n=x("flatten-vertex-data");function a(i,c){if(!(this instanceof a))return new a(i,c);this.traces=[],this.passes={},this.regl=i,this.scatter=g(i),this.canvas=this.scatter.canvas}function t(i,c,f){return(null!=i.id?i.id:i)<<16|(255&c)<<8|255&f}function p(i,c,f){var l,h,d,o,_=i[c],s=i[f];return _.length>2?(l=_[1],h=_[3]):_.length?(l=_[0],h=_[1]):(l=_.y,h=_.y+_.height),s.length>2?(d=s[0],o=s[2]):s.length?(d=s[0],o=s[1]):(d=s.x,o=s.x+s.width),[d,l,o,h]}function u(i){if("number"==typeof i)return[i,i,i,i];if(2===i.length)return[i[0],i[1],i[0],i[1]];var c=r(i);return[c.x,c.y,c.x+c.width,c.y+c.height]}oe.exports=a,a.prototype.render=function(){for(var i,c=this,f=[],l=arguments.length;l--;)f[l]=arguments[l];return f.length&&(i=this).update.apply(i,f),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=y(function(){c.draw(),c.dirty=!0,c.planned=null})):(this.draw(),this.dirty=!0,y(function(){c.dirty=!1})),this)},a.prototype.update=function(){for(var i,c=[],f=arguments.length;f--;)c[f]=arguments[f];if(c.length){for(var l=0;l<c.length;l++)this.updateItem(l,c[l]);this.traces=this.traces.filter(Boolean);for(var h=[],d=0,o=0;o<this.traces.length;o++){for(var _=this.traces[o],s=this.traces[o].passes,k=0;k<s.length;k++)h.push(this.passes[s[k]]);_.passOffset=d,d+=_.passes.length}return(i=this.scatter).update.apply(i,h),this}},a.prototype.updateItem=function(i,c){var f=this.regl;if(null===c)return this.traces[i]=null,this;if(!c)return this;var l,h=m(c,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),d=this.traces[i]||(this.traces[i]={id:i,buffer:f.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:r([f._gl.drawingBufferWidth,f._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=h.color&&(d.color=h.color),null!=h.size&&(d.size=h.size),null!=h.marker&&(d.marker=h.marker),null!=h.borderColor&&(d.borderColor=h.borderColor),null!=h.borderSize&&(d.borderSize=h.borderSize),null!=h.opacity&&(d.opacity=h.opacity),h.viewport&&(d.viewport=r(h.viewport)),null!=h.diagonal&&(d.diagonal=h.diagonal),null!=h.upper&&(d.upper=h.upper),null!=h.lower&&(d.lower=h.lower),h.data){d.buffer(n(h.data)),d.columns=h.data.length,d.count=h.data[0].length,d.bounds=[];for(var o=0;o<d.columns;o++)d.bounds[o]=w(h.data[o],1)}h.range&&(d.range=h.range,l=d.range&&"number"!=typeof d.range[0]),h.domain&&(d.domain=h.domain);var _=!1;null!=h.padding&&(Array.isArray(h.padding)&&h.padding.length===d.columns&&"number"==typeof h.padding[h.padding.length-1]?(d.padding=h.padding.map(u),_=!0):d.padding=u(h.padding));var s=d.columns,k=d.count,M=d.viewport.width,A=d.viewport.height,E=d.viewport.x,I=d.viewport.y,C=M/s,R=A/s;d.passes=[];for(var O=0;O<s;O++)for(var D=0;D<s;D++)if((d.diagonal||D!==O)&&(d.upper||!(O>D))&&(d.lower||!(O<D))){var L=t(d.id,O,D),B=this.passes[L]||(this.passes[L]={});if(h.data&&(B.positions=h.transpose?{x:{buffer:d.buffer,offset:D,count:k,stride:s},y:{buffer:d.buffer,offset:O,count:k,stride:s}}:{x:{buffer:d.buffer,offset:D*k,count:k},y:{buffer:d.buffer,offset:O*k,count:k}},B.bounds=p(d.bounds,O,D)),h.domain||h.viewport||h.data){var j=_?p(d.padding,O,D):d.padding;if(d.domain){var W=p(d.domain,O,D);B.viewport=[E+W[0]*M+j[0],I+W[1]*A+j[1],E+W[2]*M-j[2],I+W[3]*A-j[3]]}else B.viewport=[E+D*C+C*j[0],I+O*R+R*j[1],E+(D+1)*C-C*j[2],I+(O+1)*R-R*j[3]]}h.color&&(B.color=d.color),h.size&&(B.size=d.size),h.marker&&(B.marker=d.marker),h.borderSize&&(B.borderSize=d.borderSize),h.borderColor&&(B.borderColor=d.borderColor),h.opacity&&(B.opacity=d.opacity),h.range&&(B.range=l?p(d.range,O,D):d.range||B.bounds),d.passes.push(L)}return this},a.prototype.draw=function(){for(var i,c=[],f=arguments.length;f--;)c[f]=arguments[f];if(c.length){for(var l=[],h=0;h<c.length;h++)if("number"==typeof c[h]){var d=this.traces[c[h]],_=d.passOffset;l.push.apply(l,e(_,_+d.passes.length))}else if(c[h].length){var s=c[h],k=this.traces[h],M=k.passes,A=k.passOffset;M=M.map(function(E,I){l[A+I]=s})}(i=this.scatter).draw.apply(i,l)}else this.scatter.draw();return this},a.prototype.destroy=function(){return this.traces.forEach(function(i){i.buffer&&i.buffer.destroy&&i.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(x,oe,ae){var m;m=function(){function g(Se,je){this.id=ee++,this.type=Se,this.data=je}function m(Se){return"["+function je(qe){if(0===qe.length)return[];var Je=qe.charAt(0),at=qe.charAt(qe.length-1);if(1<qe.length&&Je===at&&('"'===Je||"'"===Je))return['"'+qe.substr(1,qe.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Je=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(qe))return je(qe.substr(0,Je.index)).concat(je(Je[1])).concat(je(qe.substr(Je.index+Je[0].length)));if(1===(Je=qe.split(".")).length)return['"'+qe.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(qe=[],at=0;at<Je.length;++at)qe=qe.concat(je(Je[at]));return qe}(Se).join("][")+"]"}function w(Se){return"string"==typeof Se?Se.split():Se}function y(Se){return"string"==typeof Se?document.querySelector(Se):Se}function r(Se,je){for(var qe=Array(Se),Je=0;Je<Se;++Je)qe[Je]=je(Je);return qe}function n(Se){var je,qe;return je=(65535<Se)<<4,je|=qe=(255<(Se>>>=je))<<3,(je|=qe=(15<(Se>>>=qe))<<2)|(qe=(3<(Se>>>=qe))<<1)|Se>>>qe>>1}function a(){function Se(Je){e:{for(var at=16;268435456>=at;at*=16)if(Je<=at){Je=at;break e}Je=0}return 0<(at=qe[n(Je)>>2]).length?at.pop():new ArrayBuffer(Je)}function je(Je){qe[n(Je.byteLength)>>2].push(Je)}var qe=r(8,function(){return[]});return{alloc:Se,free:je,allocType:function(Je,at){var it=null;switch(Je){case 5120:it=new Int8Array(Se(at),0,at);break;case 5121:it=new Uint8Array(Se(at),0,at);break;case 5122:it=new Int16Array(Se(2*at),0,at);break;case 5123:it=new Uint16Array(Se(2*at),0,at);break;case 5124:it=new Int32Array(Se(4*at),0,at);break;case 5125:it=new Uint32Array(Se(4*at),0,at);break;case 5126:it=new Float32Array(Se(4*at),0,at);break;default:return null}return it.length!==at?it.subarray(0,at):it},freeType:function(Je){je(Je.buffer)}}}function t(Se){return!!Se&&"object"==typeof Se&&Array.isArray(Se.shape)&&Array.isArray(Se.stride)&&"number"==typeof Se.offset&&Se.shape.length===Se.stride.length&&(Array.isArray(Se.data)||xe(Se.data))}function p(Se,je,qe,Je,at,it){for(var yt=0;yt<je;++yt)for(var vt=Se[yt],Ut=0;Ut<qe;++Ut)for(var Wt=vt[Ut],gt=0;gt<Je;++gt)at[it++]=Wt[gt]}function u(Se){return 0|Ce[Object.prototype.toString.call(Se)]}function i(Se,je){for(var qe=0;qe<je.length;++qe)Se[qe]=je[qe]}function c(Se,je,qe,Je,at,it,yt){for(var vt=0,Ut=0;Ut<qe;++Ut)for(var Wt=0;Wt<Je;++Wt)Se[vt++]=je[at*Ut+it*Wt+yt]}function h(Se){for(var je=de.allocType(5123,Se.length),qe=0;qe<Se.length;++qe)if(isNaN(Se[qe]))je[qe]=65535;else if(1/0===Se[qe])je[qe]=31744;else if(-1/0===Se[qe])je[qe]=64512;else{De[0]=Se[qe];var Je=(it=Fe[0])>>>31<<15,at=(it<<1>>>24)-127,it=it>>13&1023;je[qe]=-24>at?Je:-14>at?Je+(it+1024>>-14-at):15<at?Je+31744:Je+(at+15<<10)+it}return je}function d(Se){return Array.isArray(Se)||xe(Se)}function o(Se){return"[object "+Se+"]"}function _(Se){return Array.isArray(Se)&&(0===Se.length||"number"==typeof Se[0])}function s(Se){return!(!Array.isArray(Se)||0===Se.length||!d(Se[0]))}function k(Se){return Object.prototype.toString.call(Se)}function M(Se){if(!Se)return!1;var je=k(Se);return 0<=xt.indexOf(je)||_(Se)||s(Se)||t(Se)}function A(Se,je){36193===Se.type?(Se.data=h(je),de.freeType(je)):Se.data=je}function E(Se,je,qe,Je,at,it){if(Se=void 0!==Bt[Se]?Bt[Se]:Ke[Se]*kt[je],it&&(Se*=6),at){for(Je=0;1<=qe;)Je+=Se*qe*qe,qe/=2;return Je}return Se*qe*Je}function R(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function B(Se,je){return Se>>>je|Se<<32-je}function j(Se,je){var qe=(65535&Se)+(65535&je);return(Se>>16)+(je>>16)+(qe>>16)<<16|65535&qe}function W(Se){return Array.prototype.slice.call(Se)}function Y(Se){return W(Se).join("")}function ne(Se){return Array.isArray(Se)||xe(Se)||t(Se)}function X(Se){return Se.sort(function(je,qe){return"viewport"===je?-1:"viewport"===qe?1:je<qe?-1:1})}function $(Se,je,qe,Je){this.thisDep=Se,this.contextDep=je,this.propDep=qe,this.append=Je}function re(Se){return Se&&!(Se.thisDep||Se.contextDep||Se.propDep)}function H(Se){return new $(!1,!1,!1,Se)}function U(Se,je){var qe=Se.type;if(0===qe)return new $(!0,1<=(qe=Se.data.length),2<=qe,je);if(4===qe)return new $((qe=Se.data).thisDep,qe.contextDep,qe.propDep,je);if(5===qe)return new $(!1,!1,!1,je);if(6===qe){for(var Je=qe=!1,at=!1,it=0;it<Se.data.length;++it){var yt=Se.data[it];1===yt.type?at=!0:2===yt.type?Je=!0:3===yt.type?qe=!0:0===yt.type?(qe=!0,1<=(yt=yt.data)&&(Je=!0),2<=yt&&(at=!0)):4===yt.type&&(qe=qe||yt.data.thisDep,Je=Je||yt.data.contextDep,at=at||yt.data.propDep)}return new $(qe,Je,at,je)}return new $(3===qe,2===qe,1===qe,je)}function G(Se,je,qe,Je,at,it,yt,vt,Ut,Wt,gt,At,Zt,Et,Ct,Ne){function et(jt){return jt.replace(".","_")}function dt(jt,fn,Sn){var Kn=et(jt);ri.push(jt),si[Kn]=ar[Kn]=!!Sn,Cr[Kn]=fn}function Mt(jt,fn,Sn){var Kn=et(jt);ri.push(jt),Array.isArray(Sn)?(ar[Kn]=Sn.slice(),si[Kn]=Sn.slice()):ar[Kn]=si[Kn]=Sn,Pr[Kn]=fn}function zt(){var jt=function Q(Se){function je(){var gt=[],At=[];return q(function(){gt.push.apply(gt,W(arguments))},{def:function(){var Zt="v"+at++;return At.push(Zt),0<arguments.length&&(gt.push(Zt,"="),gt.push.apply(gt,W(arguments)),gt.push(";")),Zt},toString:function(){return Y([0<At.length?"var "+At.join(",")+";":"",Y(gt)])}})}function qe(){function gt(Ne,et){Zt(Ne,et,"=",At.def(Ne,et),";")}var At=je(),Zt=je(),Et=At.toString,Ct=Zt.toString;return q(function(){At.apply(At,W(arguments))},{def:At.def,entry:At,exit:Zt,save:gt,set:function(Ne,et,dt){gt(Ne,et),At(Ne,et,"=",dt,";")},toString:function(){return Et()+Ct()}})}var Je=Se&&Se.cache,at=0,it=[],yt=[],vt=[],Ut=je(),Wt={};return{global:Ut,link:function(gt,At){var Zt=At&&At.stable;if(!Zt)for(var Et=0;Et<yt.length;++Et)if(yt[Et]===gt&&!vt[Et])return it[Et];return Et="g"+at++,it.push(Et),yt.push(gt),vt.push(Zt),Et},block:je,proc:function(gt,At){function Zt(){var et="a"+Et.length;return Et.push(et),et}var Et=[];At=At||0;for(var Ct=0;Ct<At;++Ct)Zt();var Ne=(Ct=qe()).toString;return Wt[gt]=q(Ct,{arg:Zt,toString:function(){return Y(["function(",Et.join(),"){",Ne(),"}"])}})},scope:qe,cond:function(){var gt=Y(arguments),At=qe(),Zt=qe(),Et=At.toString,Ct=Zt.toString;return q(At,{then:function(){return At.apply(At,W(arguments)),this},else:function(){return Zt.apply(Zt,W(arguments)),this},toString:function(){var Ne=Ct();return Ne&&(Ne="else{"+Ne+"}"),Y(["if(",gt,"){",Et(),"}",Ne])}})},compile:function(){var gt=['"use strict";',Ut,"return {"];Object.keys(Wt).forEach(function(Et){gt.push('"',Et,'":',Wt[Et].toString(),",")}),gt.push("}");var At,Zt=Y(gt).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Je&&(At=function(Et){for(var Ct,Ne="",et=0;et<Et.length;et++)Ct=Et.charCodeAt(et),Ne+="0123456789abcdef".charAt(Ct>>>4&15)+"0123456789abcdef".charAt(15&Ct);return Ne}(function(Et){for(var Ct=Array(Et.length>>2),Ne=0;Ne<Ct.length;Ne++)Ct[Ne]=0;for(Ne=0;Ne<8*Et.length;Ne+=8)Ct[Ne>>5]|=(255&Et.charCodeAt(Ne/8))<<24-Ne%32;var et,dt,Mt,zt,Xt,un,Qt,kn,qn,gn,sn,vn=8*Et.length;for(Et=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Ne=Array(64),Ct[vn>>5]|=128<<24-vn%32,Ct[15+(vn+64>>9<<4)]=vn,kn=0;kn<Ct.length;kn+=16){for(vn=Et[0],et=Et[1],dt=Et[2],Mt=Et[3],zt=Et[4],Xt=Et[5],un=Et[6],Qt=Et[7],qn=0;64>qn;qn++){var pn;16>qn?Ne[qn]=Ct[qn+kn]:(gn=qn,sn=j(sn=B(sn=Ne[qn-2],17)^B(sn,19)^sn>>>10,Ne[qn-7]),pn=B(pn=Ne[qn-15],7)^B(pn,18)^pn>>>3,Ne[gn]=j(j(sn,pn),Ne[qn-16])),gn=j(j(j(j(Qt,gn=B(gn=zt,6)^B(gn,11)^B(gn,25)),zt&Xt^~zt&un),Jt[qn]),Ne[qn]),sn=j(Qt=B(Qt=vn,2)^B(Qt,13)^B(Qt,22),vn&et^vn&dt^et&dt),Qt=un,un=Xt,Xt=zt,zt=j(Mt,gn),Mt=dt,dt=et,et=vn,vn=j(gn,sn)}Et[0]=j(vn,Et[0]),Et[1]=j(et,Et[1]),Et[2]=j(dt,Et[2]),Et[3]=j(Mt,Et[3]),Et[4]=j(zt,Et[4]),Et[5]=j(Xt,Et[5]),Et[6]=j(un,Et[6]),Et[7]=j(Qt,Et[7])}for(Ct="",Ne=0;Ne<32*Et.length;Ne+=8)Ct+=String.fromCharCode(Et[Ne>>5]>>>24-Ne%32&255);return Ct}(function(Et){for(var Ct,Ne,et="",dt=-1;++dt<Et.length;)Ct=Et.charCodeAt(dt),Ne=dt+1<Et.length?Et.charCodeAt(dt+1):0,55296<=Ct&&56319>=Ct&&56320<=Ne&&57343>=Ne&&(Ct=65536+((1023&Ct)<<10)+(1023&Ne),dt++),127>=Ct?et+=String.fromCharCode(Ct):2047>=Ct?et+=String.fromCharCode(192|Ct>>>6&31,128|63&Ct):65535>=Ct?et+=String.fromCharCode(224|Ct>>>12&15,128|Ct>>>6&63,128|63&Ct):2097151>=Ct&&(et+=String.fromCharCode(240|Ct>>>18&7,128|Ct>>>12&63,128|Ct>>>6&63,128|63&Ct));return et}(Zt))),Je[At])?Je[At].apply(null,yt):(Zt=Function.apply(null,it.concat(Zt)),Je&&(Je[At]=Zt),Zt.apply(null,yt))}}}({cache:Ct}),fn=jt.link,Sn=jt.global;jt.id=Jn++,jt.batchId="0";var Kn=fn(vr),Wn=jt.shared={props:"a0"};Object.keys(vr).forEach(function(Fn){Wn[Fn]=Sn.def(Kn,".",Fn)});var Pn=jt.next={},Un=jt.current={};Object.keys(Pr).forEach(function(Fn){Array.isArray(ar[Fn])&&(Pn[Fn]=Sn.def(Wn.next,".",Fn),Un[Fn]=Sn.def(Wn.current,".",Fn))});var Cn=jt.constants={};Object.keys(hn).forEach(function(Fn){Cn[Fn]=Sn.def(JSON.stringify(hn[Fn]))}),jt.invoke=function(Fn,Gn){switch(Gn.type){case 0:var or=["this",Wn.context,Wn.props,jt.batchId];return Fn.def(fn(Gn.data),".call(",or.slice(0,Math.max(Gn.data.length+1,4)),")");case 1:return Fn.def(Wn.props,Gn.data);case 2:return Fn.def(Wn.context,Gn.data);case 3:return Fn.def("this",Gn.data);case 4:return Gn.data.append(jt,Fn),Gn.data.ref;case 5:return Gn.data.toString();case 6:return Gn.data.map(function(sr){return jt.invoke(Fn,sr)})}},jt.attribCache={};var On={};return jt.scopeAttrib=function(Fn){if((Fn=je.id(Fn))in On)return On[Fn];var Gn=Wt.scope[Fn];return Gn||(Gn=Wt.scope[Fn]=new Rr),On[Fn]=fn(Gn)},jt}function qn(jt,fn,Sn,Kn,Wn){function Pn(Lr){var zr=Cn[Lr];zr&&(Fn[Lr]=zr)}var Lr,cr,Yr,Qr,Un=function(Lr,zr){if("string"==typeof(cr=Lr.static).frag&&"string"==typeof cr.vert){if(0<Object.keys(zr.dynamic).length)return null;var cr=zr.static,Yr=Object.keys(cr);if(0<Yr.length&&"number"==typeof cr[Yr[0]]){for(var Qr=[],ci=0;ci<Yr.length;++ci)Qr.push([0|cr[Yr[ci]],Yr[ci]]);return Qr}}return null}(jt,fn),Cn=function(Lr,zr,cr){function Yr(Zi){if(Zi in Qr){var Nr=Qr[Zi];Zi=!0;var hi,bi,ya=0|Nr.x,Ia=0|Nr.y;return"width"in Nr?hi=0|Nr.width:Zi=!1,"height"in Nr?bi=0|Nr.height:Zi=!1,new $(!Zi&&zr&&zr.thisDep,!Zi&&zr&&zr.contextDep,!Zi&&zr&&zr.propDep,function(os,Pa){var Fa=os.shared.context,oa=hi;"width"in Nr||(oa=Pa.def(Fa,".","framebufferWidth","-",ya));var wa=bi;return"height"in Nr||(wa=Pa.def(Fa,".","framebufferHeight","-",Ia)),[ya,Ia,oa,wa]})}if(Zi in ci){var Po=ci[Zi];return Zi=U(Po,function(os,Pa){var Fa=os.invoke(Pa,Po),oa=os.shared.context,wa=Pa.def(Fa,".x|0"),vs=Pa.def(Fa,".y|0");return[wa,vs,Pa.def('"width" in ',Fa,"?",Fa,".width|0:","(",oa,".","framebufferWidth","-",wa,")"),Fa=Pa.def('"height" in ',Fa,"?",Fa,".height|0:","(",oa,".","framebufferHeight","-",vs,")")]}),zr&&(Zi.thisDep=Zi.thisDep||zr.thisDep,Zi.contextDep=Zi.contextDep||zr.contextDep,Zi.propDep=Zi.propDep||zr.propDep),Zi}return zr?new $(zr.thisDep,zr.contextDep,zr.propDep,function(os,Pa){var Fa=os.shared.context;return[0,0,Pa.def(Fa,".","framebufferWidth"),Pa.def(Fa,".","framebufferHeight")]}):null}var Qr=Lr.static,ci=Lr.dynamic;if(Lr=Yr("viewport")){var Wi=Lr;Lr=new $(Lr.thisDep,Lr.contextDep,Lr.propDep,function(Zi,Nr){var hi=Wi.append(Zi,Nr),bi=Zi.shared.context;return Nr.set(bi,".viewportWidth",hi[2]),Nr.set(bi,".viewportHeight",hi[3]),hi})}return{viewport:Lr,scissor_box:Yr("scissor.box")}}(jt,or=function Xt(jt,fn){var Sn=jt.static,Kn=jt.dynamic;if("framebuffer"in Sn){var Wn=Sn.framebuffer;return Wn?(Wn=vt.getFramebuffer(Wn),H(function(Un,Cn){var On=Un.link(Wn),Fn=Un.shared;return Cn.set(Fn.framebuffer,".next",On),Cn.set(Fn=Fn.context,".framebufferWidth",On+".width"),Cn.set(Fn,".framebufferHeight",On+".height"),On})):H(function(Un,Cn){var On=Un.shared;return Cn.set(On.framebuffer,".next","null"),Cn.set(On=On.context,".framebufferWidth",On+".drawingBufferWidth"),Cn.set(On,".framebufferHeight",On+".drawingBufferHeight"),"null"})}if("framebuffer"in Kn){var Pn=Kn.framebuffer;return U(Pn,function(Un,Cn){var On=Un.invoke(Cn,Pn),Fn=Un.shared,Gn=Fn.framebuffer;return On=Cn.def(Gn,".getFramebuffer(",On,")"),Cn.set(Gn,".next",On),Cn.set(Fn=Fn.context,".framebufferWidth",On+"?"+On+".width:"+Fn+".drawingBufferWidth"),Cn.set(Fn,".framebufferHeight",On+"?"+On+".height:"+Fn+".drawingBufferHeight"),On})}return null}(jt)),On=function Qt(jt,fn){function Sn(yr,Lr){if(yr in Kn){var zr=0|Kn[yr];return Lr?Pn.offset=zr:Pn.instances=zr,H(function(Yr,Qr){return Lr&&(Yr.OFFSET=zr),zr})}if(yr in Wn){var cr=Wn[yr];return U(cr,function(Yr,Qr){var ci=Yr.invoke(Qr,cr);return Lr&&(Yr.OFFSET=ci),ci})}if(Lr){if(On)return H(function(Yr,Qr){return Yr.OFFSET=0});if(Un)return new $(Cn.thisDep,Cn.contextDep,Cn.propDep,function(Yr,Qr){return Qr.def(Yr.shared.vao+".currentVAO?"+Yr.shared.vao+".currentVAO.offset:0")})}else if(Un)return new $(Cn.thisDep,Cn.contextDep,Cn.propDep,function(Yr,Qr){return Qr.def(Yr.shared.vao+".currentVAO?"+Yr.shared.vao+".currentVAO.instances:-1")});return null}var Kn=jt.static,Wn=jt.dynamic,Pn={},Un=!1,Cn=function(){if("vao"in Kn){var yr=Kn.vao;return null!==yr&&null===Wt.getVAO(yr)&&(yr=Wt.createVAO(yr)),Un=!0,Pn.vao=yr,H(function(zr){var cr=Wt.getVAO(yr);return cr?zr.link(cr):"null"})}if("vao"in Wn){Un=!0;var Lr=Wn.vao;return U(Lr,function(zr,cr){var Yr=zr.invoke(cr,Lr);return cr.def(zr.shared.vao+".getVAO("+Yr+")")})}return null}(),On=!1,Fn=function(){if("elements"in Kn){var yr=Kn.elements;if(Pn.elements=yr,ne(yr)){var Lr=Pn.elements=it.create(yr,!0);yr=it.getElements(Lr),On=!0}else yr&&(yr=it.getElements(yr),On=!0);return(Lr=H(function(cr,Yr){if(yr){var Qr=cr.link(yr);return cr.ELEMENTS=Qr}return cr.ELEMENTS=null})).value=yr,Lr}if("elements"in Wn){On=!0;var zr=Wn.elements;return U(zr,function(cr,Yr){var Qr=(ci=cr.shared).isBufferArgs,ci=ci.elements,Wi=cr.invoke(Yr,zr),Zi=Yr.def("null");return Qr=Yr.def(Qr,"(",Wi,")"),Wi=cr.cond(Qr).then(Zi,"=",ci,".createStream(",Wi,");").else(Zi,"=",ci,".getElements(",Wi,");"),Yr.entry(Wi),Yr.exit(cr.cond(Qr).then(ci,".destroyStream(",Zi,");")),cr.ELEMENTS=Zi})}return Un?new $(Cn.thisDep,Cn.contextDep,Cn.propDep,function(cr,Yr){return Yr.def(cr.shared.vao+".currentVAO?"+cr.shared.elements+".getElements("+cr.shared.vao+".currentVAO.elements):null")}):null}(),Gn=Sn("offset",!0),or=function(){if("primitive"in Kn){var yr=Kn.primitive;return Pn.primitive=yr,H(function(zr,cr){return Pe[yr]})}if("primitive"in Wn){var Lr=Wn.primitive;return U(Lr,function(zr,cr){var Yr=zr.constants.primTypes,Qr=zr.invoke(cr,Lr);return cr.def(Yr,"[",Qr,"]")})}return On?re(Fn)?H(Fn.value?function(zr,cr){return cr.def(zr.ELEMENTS,".primType")}:function(){return 4}):new $(Fn.thisDep,Fn.contextDep,Fn.propDep,function(zr,cr){var Yr=zr.ELEMENTS;return cr.def(Yr,"?",Yr,".primType:",4)}):Un?new $(Cn.thisDep,Cn.contextDep,Cn.propDep,function(zr,cr){return cr.def(zr.shared.vao+".currentVAO?"+zr.shared.vao+".currentVAO.primitive:4")}):null}(),sr=function(){if("count"in Kn){var yr=0|Kn.count;return Pn.count=yr,H(function(){return yr})}if("count"in Wn){var Lr=Wn.count;return U(Lr,function(zr,cr){return zr.invoke(cr,Lr)})}return On?re(Fn)?Fn?Gn?new $(Gn.thisDep,Gn.contextDep,Gn.propDep,function(zr,cr){return cr.def(zr.ELEMENTS,".vertCount-",zr.OFFSET)}):H(function(zr,cr){return cr.def(zr.ELEMENTS,".vertCount")}):H(function(){return-1}):new $(Fn.thisDep||Gn.thisDep,Fn.contextDep||Gn.contextDep,Fn.propDep||Gn.propDep,function(zr,cr){var Yr=zr.ELEMENTS;return zr.OFFSET?cr.def(Yr,"?",Yr,".vertCount-",zr.OFFSET,":-1"):cr.def(Yr,"?",Yr,".vertCount:-1")}):Un?new $(Cn.thisDep,Cn.contextDep,Cn.propDep,function(zr,cr){return cr.def(zr.shared.vao,".currentVAO?",zr.shared.vao,".currentVAO.count:-1")}):null}(),pr=Sn("instances",!1);return{elements:Fn,primitive:or,count:sr,instances:pr,offset:Gn,vao:Cn,vaoActive:Un,elementsActive:On,static:Pn}}(jt),Fn=(cr=(Lr=jt).static,Yr=Lr.dynamic,Qr={},ri.forEach(function(ci){function Wi(Nr,hi){if(ci in cr){var bi=Nr(cr[ci]);Qr[Zi]=H(function(){return bi})}else if(ci in Yr){var ya=Yr[ci];Qr[Zi]=U(ya,function(Ia,Po){return hi(Ia,Po,Ia.invoke(Po,ya))})}}var Zi=et(ci);switch(ci){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return Wi(function(Nr){return Nr},function(Nr,hi,bi){return bi});case"depth.func":return Wi(function(Nr){return Tn[Nr]},function(Nr,hi,bi){return hi.def(Nr.constants.compareFuncs,"[",bi,"]")});case"depth.range":return Wi(function(Nr){return Nr},function(Nr,hi,bi){return[hi.def("+",bi,"[0]"),hi=hi.def("+",bi,"[1]")]});case"blend.func":return Wi(function(Nr){return[cn["srcRGB"in Nr?Nr.srcRGB:Nr.src],cn["dstRGB"in Nr?Nr.dstRGB:Nr.dst],cn["srcAlpha"in Nr?Nr.srcAlpha:Nr.src],cn["dstAlpha"in Nr?Nr.dstAlpha:Nr.dst]]},function(Nr,hi,bi){function ya(Pa,Fa){return hi.def('"',Pa,Fa,'" in ',bi,"?",bi,".",Pa,Fa,":",bi,".",Pa)}Nr=Nr.constants.blendFuncs;var Ia=ya("src","RGB"),Po=ya("dst","RGB"),os=(Ia=hi.def(Nr,"[",Ia,"]"),hi.def(Nr,"[",ya("src","Alpha"),"]"));return[Ia,Po=hi.def(Nr,"[",Po,"]"),os,Nr=hi.def(Nr,"[",ya("dst","Alpha"),"]")]});case"blend.equation":return Wi(function(Nr){return"string"==typeof Nr?[yi[Nr],yi[Nr]]:"object"==typeof Nr?[yi[Nr.rgb],yi[Nr.alpha]]:void 0},function(Nr,hi,bi){var ya=Nr.constants.blendEquations,Ia=hi.def(),Po=hi.def();return(Nr=Nr.cond("typeof ",bi,'==="string"')).then(Ia,"=",Po,"=",ya,"[",bi,"];"),Nr.else(Ia,"=",ya,"[",bi,".rgb];",Po,"=",ya,"[",bi,".alpha];"),hi(Nr),[Ia,Po]});case"blend.color":return Wi(function(Nr){return r(4,function(hi){return+Nr[hi]})},function(Nr,hi,bi){return r(4,function(ya){return hi.def("+",bi,"[",ya,"]")})});case"stencil.mask":return Wi(function(Nr){return 0|Nr},function(Nr,hi,bi){return hi.def(bi,"|0")});case"stencil.func":return Wi(function(Nr){return[Tn[Nr.cmp||"keep"],Nr.ref||0,"mask"in Nr?Nr.mask:-1]},function(Nr,hi,bi){return[Nr=hi.def('"cmp" in ',bi,"?",Nr.constants.compareFuncs,"[",bi,".cmp]",":",7680),hi.def(bi,".ref|0"),hi=hi.def('"mask" in ',bi,"?",bi,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return Wi(function(Nr){return["stencil.opBack"===ci?1029:1028,nn[Nr.fail||"keep"],nn[Nr.zfail||"keep"],nn[Nr.zpass||"keep"]]},function(Nr,hi,bi){function ya(Po){return hi.def('"',Po,'" in ',bi,"?",Ia,"[",bi,".",Po,"]:",7680)}var Ia=Nr.constants.stencilOps;return["stencil.opBack"===ci?1029:1028,ya("fail"),ya("zfail"),ya("zpass")]});case"polygonOffset.offset":return Wi(function(Nr){return[0|Nr.factor,0|Nr.units]},function(Nr,hi,bi){return[hi.def(bi,".factor|0"),hi=hi.def(bi,".units|0")]});case"cull.face":return Wi(function(Nr){var hi=0;return"front"===Nr?hi=1028:"back"===Nr&&(hi=1029),hi},function(Nr,hi,bi){return hi.def(bi,'==="front"?',1028,":",1029)});case"frontFace":return Wi(function(Nr){return Me[Nr]},function(Nr,hi,bi){return hi.def(bi+'==="cw"?2304:2305')});case"colorMask":return Wi(function(Nr){return Nr.map(function(hi){return!!hi})},function(Nr,hi,bi){return r(4,function(ya){return"!!"+bi+"["+ya+"]"})});case"sample.coverage":return Wi(function(Nr){return["value"in Nr?Nr.value:1,!!Nr.invert]},function(Nr,hi,bi){return[hi.def('"value" in ',bi,"?+",bi,".value:1"),hi=hi.def("!!",bi,".invert")]})}}),Qr),Gn=function un(jt,fn,Sn){function Kn(Fn){if(Fn in Wn){var Gn=je.id(Wn[Fn]);return(Fn=H(function(){return Gn})).id=Gn,Fn}if(Fn in Pn){var or=Pn[Fn];return U(or,function(sr,pr){var yr=sr.invoke(pr,or);return pr.def(sr.shared.strings,".id(",yr,")")})}return null}var Wn=jt.static,Pn=jt.dynamic,Un=Kn("frag"),Cn=Kn("vert"),On=null;return re(Un)&&re(Cn)?(On=gt.program(Cn.id,Un.id,null,Sn),jt=H(function(Fn,Gn){return Fn.link(On)})):jt=new $(Un&&Un.thisDep||Cn&&Cn.thisDep,Un&&Un.contextDep||Cn&&Cn.contextDep,Un&&Un.propDep||Cn&&Cn.propDep,function(Fn,Gn){var or,sr,pr=Fn.shared.shader;return or=Un?Un.append(Fn,Gn):Gn.def(pr,".","frag"),sr=Cn?Cn.append(Fn,Gn):Gn.def(pr,".","vert"),Gn.def(pr+".program("+sr+","+or+")")}),{frag:Un,vert:Cn,progVar:jt,program:On}}(jt,0,Un);Pn("viewport"),Pn(et("scissor.box"));var or,sr=0<Object.keys(Fn).length;if((or={framebuffer:or,draw:On,shader:Gn,state:Fn,dirty:sr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Lr){var zr,cr=Lr.static;if(Lr=Lr.dynamic,"profile"in cr){var Yr=!!cr.profile;(zr=H(function(ci,Wi){return Yr})).enable=Yr}else if("profile"in Lr){var Qr=Lr.profile;zr=U(Qr,function(ci,Wi){return ci.invoke(Wi,Qr)})}return zr}(jt),or.uniforms=function(Lr,zr){var cr=Lr.static,Yr=Lr.dynamic,Qr={};return Object.keys(cr).forEach(function(ci){var Wi,Zi=cr[ci];if("number"==typeof Zi||"boolean"==typeof Zi)Wi=H(function(){return Zi});else if("function"==typeof Zi){var Nr=Zi._reglType;"texture2d"===Nr||"textureCube"===Nr?Wi=H(function(hi){return hi.link(Zi)}):"framebuffer"!==Nr&&"framebufferCube"!==Nr||(Wi=H(function(hi){return hi.link(Zi.color[0])}))}else d(Zi)&&(Wi=H(function(hi){return hi.global.def("[",r(Zi.length,function(bi){return Zi[bi]}),"]")}));Wi.value=Zi,Qr[ci]=Wi}),Object.keys(Yr).forEach(function(ci){var Wi=Yr[ci];Qr[ci]=U(Wi,function(Zi,Nr){return Zi.invoke(Nr,Wi)})}),Qr}(Sn),or.drawVAO=or.scopeVAO=On.vao,!or.drawVAO&&Gn.program&&!Un&&qe.angle_instanced_arrays&&On.static.elements){var pr=!0;if(jt=Gn.program.attributes.map(function(Lr){return Lr=fn.static[Lr],pr=pr&&!!Lr,Lr}),pr&&0<jt.length){var yr=Wt.getVAO(Wt.createVAO({attributes:jt,elements:On.static.elements}));or.drawVAO=new $(null,null,null,function(Lr,zr){return Lr.link(yr)}),or.useVAO=!0}}return Un?or.useVAO=!0:or.attributes=function kn(jt,fn){var Sn=jt.static,Kn=jt.dynamic,Wn={};return Object.keys(Sn).forEach(function(Pn){var Un=Sn[Pn],Cn=je.id(Pn),On=new Rr;if(ne(Un))On.state=1,On.buffer=at.getBuffer(at.create(Un,34962,!1,!0)),On.type=0;else if(Gn=at.getBuffer(Un))On.state=1,On.buffer=Gn,On.type=0;else if("constant"in Un){var Fn=Un.constant;On.buffer="null",On.state=2,"number"==typeof Fn?On.x=Fn:ln.forEach(function(zr,cr){cr<Fn.length&&(On[zr]=Fn[cr])})}else{var Gn=ne(Un.buffer)?at.getBuffer(at.create(Un.buffer,34962,!1,!0)):at.getBuffer(Un.buffer),or=0|Un.offset,sr=0|Un.stride,pr=0|Un.size,yr=!!Un.normalized,Lr=0;"type"in Un&&(Lr=Le[Un.type]),Un=0|Un.divisor,On.buffer=Gn,On.state=1,On.size=pr,On.normalized=yr,On.type=Lr||Gn.dtype,On.offset=or,On.stride=sr,On.divisor=Un}Wn[Pn]=H(function(zr,cr){var Yr=zr.attribCache;if(Cn in Yr)return Yr[Cn];var Qr={isStream:!1};return Object.keys(On).forEach(function(ci){Qr[ci]=On[ci]}),On.buffer&&(Qr.buffer=zr.link(On.buffer),Qr.type=Qr.type||Qr.buffer+".dtype"),Yr[Cn]=Qr})}),Object.keys(Kn).forEach(function(Pn){var Un=Kn[Pn];Wn[Pn]=U(Un,function(Cn,On){function Fn(Yr){On(yr[Yr],"=",Gn,".",Yr,"|0;")}var Gn=Cn.invoke(On,Un),or=Cn.shared,sr=Cn.constants,pr=or.isBufferArgs,yr=(or=or.buffer,{isStream:On.def(!1)}),Lr=new Rr;Lr.state=1,Object.keys(Lr).forEach(function(Yr){yr[Yr]=On.def(""+Lr[Yr])});var zr=yr.buffer,cr=yr.type;return On("if(",pr,"(",Gn,")){",yr.isStream,"=true;",zr,"=",or,".createStream(",34962,",",Gn,");",cr,"=",zr,".dtype;","}else{",zr,"=",or,".getBuffer(",Gn,");","if(",zr,"){",cr,"=",zr,".dtype;",'}else if("constant" in ',Gn,"){",yr.state,"=",2,";","if(typeof "+Gn+'.constant === "number"){',yr[ln[0]],"=",Gn,".constant;",ln.slice(1).map(function(Yr){return yr[Yr]}).join("="),"=0;","}else{",ln.map(function(Yr,Qr){return yr[Yr]+"="+Gn+".constant.length>"+Qr+"?"+Gn+".constant["+Qr+"]:0;"}).join(""),"}}else{","if(",pr,"(",Gn,".buffer)){",zr,"=",or,".createStream(",34962,",",Gn,".buffer);","}else{",zr,"=",or,".getBuffer(",Gn,".buffer);","}",cr,'="type" in ',Gn,"?",sr.glTypes,"[",Gn,".type]:",zr,".dtype;",yr.normalized,"=!!",Gn,".normalized;"),Fn("size"),Fn("offset"),Fn("stride"),Fn("divisor"),On("}}"),On.exit("if(",yr.isStream,"){",or,".destroyStream(",zr,");","}"),yr})}),Wn}(fn),or.context=function(Lr){var zr=Lr.static,cr=Lr.dynamic,Yr={};return Object.keys(zr).forEach(function(Qr){var ci=zr[Qr];Yr[Qr]=H(function(Wi,Zi){return"number"==typeof ci||"boolean"==typeof ci?""+ci:Wi.link(ci)})}),Object.keys(cr).forEach(function(Qr){var ci=cr[Qr];Yr[Qr]=U(ci,function(Wi,Zi){return Wi.invoke(Zi,ci)})}),Yr}(Kn),or}function gn(jt,fn,Sn){var Kn=jt.shared.context,Wn=jt.scope();Object.keys(Sn).forEach(function(Pn){fn.save(Kn,"."+Pn);var Un=Sn[Pn].append(jt,fn);Array.isArray(Un)?Wn(Kn,".",Pn,"=[",Un.join(),"];"):Wn(Kn,".",Pn,"=",Un,";")}),fn(Wn)}function sn(jt,fn,Sn,Kn){var Wn,Pn=(Cn=jt.shared).gl,Un=Cn.framebuffer;Mr&&(Wn=fn.def(Cn.extensions,".webgl_draw_buffers"));var Cn=(On=jt.constants).drawBuffer,On=On.backBuffer;jt=Sn?Sn.append(jt,fn):fn.def(Un,".next"),Kn||fn("if(",jt,"!==",Un,".cur){"),fn("if(",jt,"){",Pn,".bindFramebuffer(",36160,",",jt,".framebuffer);"),Mr&&fn(Wn,".drawBuffersWEBGL(",Cn,"[",jt,".colorAttachments.length]);"),fn("}else{",Pn,".bindFramebuffer(",36160,",null);"),Mr&&fn(Wn,".drawBuffersWEBGL(",On,");"),fn("}",Un,".cur=",jt,";"),Kn||fn("}")}function vn(jt,fn,Sn){var Kn=jt.shared,Wn=Kn.gl,Pn=jt.current,Un=jt.next,Cn=Kn.current,On=Kn.next,Fn=jt.cond(Cn,".dirty");ri.forEach(function(Gn){var or,sr;if(!((Gn=et(Gn))in Sn.state))if(Gn in Un){or=Un[Gn],sr=Pn[Gn];var pr=r(ar[Gn].length,function(yr){return Fn.def(or,"[",yr,"]")});Fn(jt.cond(pr.map(function(yr,Lr){return yr+"!=="+sr+"["+Lr+"]"}).join("||")).then(Wn,".",Pr[Gn],"(",pr,");",pr.map(function(yr,Lr){return sr+"["+Lr+"]="+yr}).join(";"),";"))}else or=Fn.def(On,".",Gn),pr=jt.cond(or,"!==",Cn,".",Gn),Fn(pr),Gn in Cr?pr(jt.cond(or).then(Wn,".enable(",Cr[Gn],");").else(Wn,".disable(",Cr[Gn],");"),Cn,".",Gn,"=",or,";"):pr(Wn,".",Pr[Gn],"(",or,");",Cn,".",Gn,"=",or,";")}),0===Object.keys(Sn.state).length&&Fn(Cn,".dirty=false;"),fn(Fn)}function pn(jt,fn,Sn,Kn){var Wn,Pn=jt.shared,Un=jt.current,Cn=Pn.current,On=Pn.gl;X(Object.keys(Sn)).forEach(function(Fn){var Gn=Sn[Fn];if(!Kn||Kn(Gn)){var or=Gn.append(jt,fn);if(Cr[Fn]){var sr=Cr[Fn];re(Gn)?(Wn=jt.link(or,{stable:!0}),fn(jt.cond(Wn).then(On,".enable(",sr,");").else(On,".disable(",sr,");")),fn(Cn,".",Fn,"=",Wn,";")):(fn(jt.cond(or).then(On,".enable(",sr,");").else(On,".disable(",sr,");")),fn(Cn,".",Fn,"=",or,";"))}else if(d(or)){var pr=Un[Fn];fn(On,".",Pr[Fn],"(",or,");",or.map(function(yr,Lr){return pr+"["+Lr+"]="+yr}).join(";"),";")}else re(Gn)?(Wn=jt.link(or,{stable:!0}),fn(On,".",Pr[Fn],"(",Wn,");",Cn,".",Fn,"=",Wn,";")):fn(On,".",Pr[Fn],"(",or,");",Cn,".",Fn,"=",or,";")}})}function Mn(jt,fn){$n&&(jt.instancing=fn.def(jt.shared.extensions,".angle_instanced_arrays"))}function Rn(jt,fn,Sn,Kn,Wn){function Pn(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function Un(Lr){Lr(Fn=fn.def(),"=",Pn(),";"),"string"==typeof Wn?Lr(sr,".count+=",Wn,";"):Lr(sr,".count++;"),Et&&(Kn?Lr(Gn=fn.def(),"=",yr,".getNumPendingQueries();"):Lr(yr,".beginQuery(",sr,");"))}function Cn(Lr){Lr(sr,".cpuTime+=",Pn(),"-",Fn,";"),Et&&(Kn?Lr(yr,".pushScopeStats(",Gn,",",yr,".getNumPendingQueries(),",sr,");"):Lr(yr,".endQuery();"))}function On(Lr){var zr=fn.def(pr,".profile");fn(pr,".profile=",Lr,";"),fn.exit(pr,".profile=",zr,";")}var Fn,Gn,or=jt.shared,sr=jt.stats,pr=or.current,yr=or.timer;if(Sn=Sn.profile){if(re(Sn))return void(Sn.enable?(Un(fn),Cn(fn.exit),On("true")):On("false"));On(Sn=Sn.append(jt,fn))}else Sn=fn.def(pr,".profile");Un(or=jt.block()),fn("if(",Sn,"){",or,"}"),Cn(jt=jt.block()),fn.exit("if(",Sn,"){",jt,"}")}function Xn(jt,fn,Sn,Kn,Wn){var Un=jt.shared;Kn.forEach(function(Cn){var On,Fn=Cn.name,Gn=Sn.attributes[Fn];if(Gn){if(!Wn(Gn))return;On=Gn.append(jt,fn)}else{if(!Wn(Ee))return;var or=jt.scopeAttrib(Fn);On={},Object.keys(new Rr).forEach(function(sr){On[sr]=fn.def(or,".",sr)})}!function Pn(Cn,On,Fn){function Gn(){fn("if(!",yr,".buffer){",sr,".enableVertexAttribArray(",pr,");}");var Yr,Qr=Fn.type;Yr=Fn.size?fn.def(Fn.size,"||",On):On,fn("if(",yr,".type!==",Qr,"||",yr,".size!==",Yr,"||",cr.map(function(ci){return yr+"."+ci+"!=="+Fn[ci]}).join("||"),"){",sr,".bindBuffer(",34962,",",Lr,".buffer);",sr,".vertexAttribPointer(",[pr,Yr,Qr,Fn.normalized,Fn.stride,Fn.offset],");",yr,".type=",Qr,";",yr,".size=",Yr,";",cr.map(function(ci){return yr+"."+ci+"="+Fn[ci]+";"}).join(""),"}"),$n&&fn("if(",yr,".divisor!==",Qr=Fn.divisor,"){",jt.instancing,".vertexAttribDivisorANGLE(",[pr,Qr],");",yr,".divisor=",Qr,";}")}function or(){fn("if(",yr,".buffer){",sr,".disableVertexAttribArray(",pr,");",yr,".buffer=null;","}if(",ln.map(function(Yr,Qr){return yr+"."+Yr+"!=="+zr[Qr]}).join("||"),"){",sr,".vertexAttrib4f(",pr,",",zr,");",ln.map(function(Yr,Qr){return yr+"."+Yr+"="+zr[Qr]+";"}).join(""),"}")}var sr=Un.gl,pr=fn.def(Cn,".location"),yr=fn.def(Un.attributes,"[",pr,"]"),Lr=Fn.buffer,zr=[Fn.x,Fn.y,Fn.z,Fn.w],cr=["buffer","normalized","offset","stride"];1===(Cn=Fn.state)?Gn():2===Cn?or():(fn("if(",Cn,"===",1,"){"),Gn(),fn("}else{"),or(),fn("}"))}(jt.link(Cn),function(sr){switch(sr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Cn.info.type),On)})}function Hn(jt,fn,Sn,Kn,Wn,Pn){for(var Un,Cn=jt.shared,On=Cn.gl,Fn=0;Fn<Kn.length;++Fn){var Gn,or=(yr=Kn[Fn]).name,sr=yr.info.type,pr=Sn.uniforms[or],yr=jt.link(yr)+".location";if(pr){if(!Wn(pr))continue;if(re(pr)){if(or=pr.value,35678===sr||35680===sr)fn(On,".uniform1i(",yr,",",(sr=jt.link(or._texture||or.color[0]._texture))+".bind());"),fn.exit(sr,".unbind();");else if(35674===sr||35675===sr||35676===sr)pr=2,35675===sr?pr=3:35676===sr&&(pr=4),fn(On,".uniformMatrix",pr,"fv(",yr,",false,",or=jt.global.def("new Float32Array(["+Array.prototype.slice.call(or)+"])"),");");else{switch(sr){case 5126:Un="1f";break;case 35664:Un="2f";break;case 35665:Un="3f";break;case 35666:Un="4f";break;case 35670:case 5124:Un="1i";break;case 35671:case 35667:Un="2i";break;case 35672:case 35668:Un="3i";break;case 35673:case 35669:Un="4i"}fn(On,".uniform",Un,"(",yr,",",d(or)?Array.prototype.slice.call(or):or,");")}continue}Gn=pr.append(jt,fn)}else{if(!Wn(Ee))continue;Gn=fn.def(Cn.uniforms,"[",je.id(or),"]")}switch(35678===sr?fn("if(",Gn,"&&",Gn,'._reglType==="framebuffer"){',Gn,"=",Gn,".color[0];","}"):35680===sr&&fn("if(",Gn,"&&",Gn,'._reglType==="framebufferCube"){',Gn,"=",Gn,".color[0];","}"),or=1,sr){case 35678:case 35680:sr=fn.def(Gn,"._texture"),fn(On,".uniform1i(",yr,",",sr,".bind());"),fn.exit(sr,".unbind();");continue;case 5124:case 35670:Un="1i";break;case 35667:case 35671:Un="2i",or=2;break;case 35668:case 35672:Un="3i",or=3;break;case 35669:case 35673:Un="4i",or=4;break;case 5126:Un="1f";break;case 35664:Un="2f",or=2;break;case 35665:Un="3f",or=3;break;case 35666:Un="4f",or=4;break;case 35674:Un="Matrix2fv";break;case 35675:Un="Matrix3fv";break;case 35676:Un="Matrix4fv"}if("M"===Un.charAt(0)){fn(On,".uniform",Un,"(",yr,","),yr=Math.pow(sr-35674+2,2);var Lr=jt.global.def("new Float32Array(",yr,")");Array.isArray(Gn)?fn("false,(",r(yr,function(cr){return Lr+"["+cr+"]="+Gn[cr]}),",",Lr,")"):fn("false,(Array.isArray(",Gn,")||",Gn," instanceof Float32Array)?",Gn,":(",r(yr,function(cr){return Lr+"["+cr+"]="+Gn+"["+cr+"]"}),",",Lr,")"),fn(");")}else{if(1<or){sr=[];var zr=[];for(pr=0;pr<or;++pr)Array.isArray(Gn)?zr.push(Gn[pr]):zr.push(fn.def(Gn+"["+pr+"]")),Pn&&sr.push(fn.def());Pn&&fn("if(!",jt.batchId,"||",sr.map(function(cr,Yr){return cr+"!=="+zr[Yr]}).join("||"),"){",sr.map(function(cr,Yr){return cr+"="+zr[Yr]+";"}).join("")),fn(On,".uniform",Un,"(",yr,",",zr.join(","),");")}else Pn&&(sr=fn.def(),fn("if(!",jt.batchId,"||",sr,"!==",Gn,"){",sr,"=",Gn,";")),fn(On,".uniform",Un,"(",yr,",",Gn,");");Pn&&fn("}")}}}function rr(jt,fn,Sn,Kn){function Wn(Qr){var ci=sr[Qr];return ci?ci.append(jt,ci.contextDep&&Kn.contextDynamic||ci.propDep?Sn:fn):fn.def(or,".",Qr)}function Pn(){function Qr(){Sn(On,".drawElementsInstancedANGLE(",[yr,zr,cr,Lr+"<<(("+cr+"-5121)>>1)",Cn],");")}function ci(){Sn(On,".drawArraysInstancedANGLE(",[yr,Lr,zr,Cn],");")}pr&&"null"!==pr?Yr?Qr():(Sn("if(",pr,"){"),Qr(),Sn("}else{"),ci(),Sn("}")):ci()}function Un(){function Qr(){Sn(Gn+".drawElements("+[yr,zr,cr,Lr+"<<(("+cr+"-5121)>>1)"]+");")}function ci(){Sn(Gn+".drawArrays("+[yr,Lr,zr]+");")}pr&&"null"!==pr?Yr?Qr():(Sn("if(",pr,"){"),Qr(),Sn("}else{"),ci(),Sn("}")):ci()}var Cn,On,Qr,ci,Fn=jt.shared,Gn=Fn.gl,or=Fn.draw,sr=Kn.draw,pr=(ci=fn,(Qr=sr.elements)?((Qr.contextDep&&Kn.contextDynamic||Qr.propDep)&&(ci=Sn),Qr=Qr.append(jt,ci),sr.elementsActive&&ci("if("+Qr+")"+Gn+".bindBuffer(34963,"+Qr+".buffer.buffer);")):(Qr=ci.def(),ci(Qr,"=",or,".","elements",";","if(",Qr,"){",Gn,".bindBuffer(",34963,",",Qr,".buffer.buffer);}","else if(",Fn.vao,".currentVAO){",Qr,"=",jt.shared.elements+".getElements("+Fn.vao,".currentVAO.elements);",br?"":"if("+Qr+")"+Gn+".bindBuffer(34963,"+Qr+".buffer.buffer);","}")),Qr),yr=Wn("primitive"),Lr=Wn("offset"),zr=function(){var Qr=sr.count,ci=fn;return Qr?((Qr.contextDep&&Kn.contextDynamic||Qr.propDep)&&(ci=Sn),Qr=Qr.append(jt,ci)):Qr=ci.def(or,".","count"),Qr}();if("number"==typeof zr){if(0===zr)return}else Sn("if(",zr,"){"),Sn.exit("}");$n&&(Cn=Wn("instances"),On=jt.instancing);var cr=pr+".type",Yr=sr.elements&&re(sr.elements)&&!sr.vaoActive;$n&&("number"!=typeof Cn||0<=Cn)?"string"==typeof Cn?(Sn("if(",Cn,">0){"),Pn(),Sn("}else if(",Cn,"<0){"),Un(),Sn("}")):Pn():Un()}function er(jt,fn,Sn,Kn,Wn){return Wn=(fn=zt()).proc("body",Wn),$n&&(fn.instancing=Wn.def(fn.shared.extensions,".angle_instanced_arrays")),jt(fn,Wn,Sn,Kn),fn.compile().body}function Ir(jt,fn,Sn,Kn){Mn(jt,fn),Sn.useVAO?Sn.drawVAO?fn(jt.shared.vao,".setVAO(",Sn.drawVAO.append(jt,fn),");"):fn(jt.shared.vao,".setVAO(",jt.shared.vao,".targetVAO);"):(fn(jt.shared.vao,".setVAO(null);"),Xn(jt,fn,Sn,Kn.attributes,function(){return!0})),Hn(jt,fn,Sn,Kn.uniforms,function(){return!0},!1),rr(jt,fn,fn,Sn)}function Or(jt,fn,Sn,Kn){function Wn(){return!0}jt.batchId="a1",Mn(jt,fn),Xn(jt,fn,Sn,Kn.attributes,Wn),Hn(jt,fn,Sn,Kn.uniforms,Wn,!1),rr(jt,fn,fn,Sn)}function ni(jt,fn,Sn,Kn){function Wn(or){return or.contextDep&&Un||or.propDep}function Pn(or){return!Wn(or)}Mn(jt,fn);var Un=Sn.contextDep,Cn=fn.def(),On=fn.def();jt.shared.props=On,jt.batchId=Cn;var Fn=jt.scope(),Gn=jt.scope();fn(Fn.entry,"for(",Cn,"=0;",Cn,"<","a1",";++",Cn,"){",On,"=","a0","[",Cn,"];",Gn,"}",Fn.exit),Sn.needsContext&&gn(jt,Gn,Sn.context),Sn.needsFramebuffer&&sn(jt,Gn,Sn.framebuffer),pn(jt,Gn,Sn.state,Wn),Sn.profile&&Wn(Sn.profile)&&Rn(jt,Gn,Sn,!1,!0),Kn?(Sn.useVAO?Sn.drawVAO?Wn(Sn.drawVAO)?Gn(jt.shared.vao,".setVAO(",Sn.drawVAO.append(jt,Gn),");"):Fn(jt.shared.vao,".setVAO(",Sn.drawVAO.append(jt,Fn),");"):Fn(jt.shared.vao,".setVAO(",jt.shared.vao,".targetVAO);"):(Fn(jt.shared.vao,".setVAO(null);"),Xn(jt,Fn,Sn,Kn.attributes,Pn),Xn(jt,Gn,Sn,Kn.attributes,Wn)),Hn(jt,Fn,Sn,Kn.uniforms,Pn,!1),Hn(jt,Gn,Sn,Kn.uniforms,Wn,!0),rr(jt,Fn,Gn,Sn)):(fn=jt.global.def("{}"),Kn=Sn.shader.progVar.append(jt,Gn),On=Gn.def(Kn,".id"),Fn=Gn.def(fn,"[",On,"]"),Gn(jt.shared.gl,".useProgram(",Kn,".program);","if(!",Fn,"){",Fn,"=",fn,"[",On,"]=",jt.link(function(or){return er(Or,jt,Sn,or,2)}),"(",Kn,");}",Fn,".call(this,a0[",Cn,"],",Cn,");"))}function Dr(jt,fn,Sn){var Kn=fn.static[Sn];if(Kn&&function(Gn){if("object"==typeof Gn&&!d(Gn)){for(var or=Object.keys(Gn),sr=0;sr<or.length;++sr)if(te.isDynamic(Gn[or[sr]]))return!0;return!1}}(Kn)){var Wn=jt.global,Pn=Object.keys(Kn),Un=!1,Cn=!1,On=!1,Fn=jt.global.def("{}");Pn.forEach(function(Gn){var or=Kn[Gn];if(te.isDynamic(or))"function"==typeof or&&(or=Kn[Gn]=te.unbox(or)),Gn=U(or,null),Un=Un||Gn.thisDep,On=On||Gn.propDep,Cn=Cn||Gn.contextDep;else{switch(Wn(Fn,".",Gn,"="),typeof or){case"number":Wn(or);break;case"string":Wn('"',or,'"');break;case"object":Array.isArray(or)&&Wn("[",or.join(),"]");break;default:Wn(jt.link(or))}Wn(";")}}),fn.dynamic[Sn]=new te.DynamicVariable(4,{thisDep:Un,contextDep:Cn,propDep:On,ref:Fn,append:function(Gn,or){Pn.forEach(function(sr){var pr=Kn[sr];te.isDynamic(pr)&&(pr=Gn.invoke(or,pr),or(Fn,".",sr,"=",pr,";"))})}}),delete fn.static[Sn]}}var Rr=Wt.Record,yi={add:32774,subtract:32778,"reverse subtract":32779};qe.ext_blend_minmax&&(yi.min=32775,yi.max=32776);var $n=qe.angle_instanced_arrays,Mr=qe.webgl_draw_buffers,br=qe.oes_vertex_array_object,ar={dirty:!0,profile:Ne.profile},si={},ri=[],Cr={},Pr={};dt("dither",3024),dt("blend.enable",3042),Mt("blend.color","blendColor",[0,0,0,0]),Mt("blend.equation","blendEquationSeparate",[32774,32774]),Mt("blend.func","blendFuncSeparate",[1,0,1,0]),dt("depth.enable",2929,!0),Mt("depth.func","depthFunc",513),Mt("depth.range","depthRange",[0,1]),Mt("depth.mask","depthMask",!0),Mt("colorMask","colorMask",[!0,!0,!0,!0]),dt("cull.enable",2884),Mt("cull.face","cullFace",1029),Mt("frontFace","frontFace",2305),Mt("lineWidth","lineWidth",1),dt("polygonOffset.enable",32823),Mt("polygonOffset.offset","polygonOffset",[0,0]),dt("sample.alpha",32926),dt("sample.enable",32928),Mt("sample.coverage","sampleCoverage",[1,!1]),dt("stencil.enable",2960),Mt("stencil.mask","stencilMask",-1),Mt("stencil.func","stencilFunc",[519,0,-1]),Mt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Mt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),dt("scissor.enable",3089),Mt("scissor.box","scissor",[0,0,Se.drawingBufferWidth,Se.drawingBufferHeight]),Mt("viewport","viewport",[0,0,Se.drawingBufferWidth,Se.drawingBufferHeight]);var vr={gl:Se,context:Zt,strings:je,next:si,current:ar,draw:At,elements:it,buffer:at,shader:gt,attributes:Wt.state,vao:Wt,uniforms:Ut,framebuffer:vt,extensions:qe,timer:Et,isBufferArgs:ne},hn={primTypes:Pe,compareFuncs:Tn,blendFuncs:cn,blendEquations:yi,stencilOps:nn,glTypes:Le,orientationType:Me};Mr&&(hn.backBuffer=[1029],hn.drawBuffer=r(Je.maxDrawbuffers,function(jt){return 0===jt?[0]:r(jt,function(fn){return 36064+fn})}));var Jn=0;return{next:si,current:ar,procs:function(){var jt=zt(),fn=jt.proc("poll"),Sn=jt.proc("refresh"),Kn=jt.block();fn(Kn),Sn(Kn);var Wn,Pn=(On=jt.shared).gl,Un=On.next,Cn=On.current;Kn(Cn,".dirty=false;"),sn(jt,fn),sn(jt,Sn,null,!0),$n&&(Wn=jt.link($n)),qe.oes_vertex_array_object&&Sn(jt.link(qe.oes_vertex_array_object),".bindVertexArrayOES(null);");var On=Sn.def(On.attributes),Fn=Sn.def(0),Gn=jt.cond(Fn,".buffer");Gn.then(Pn,".enableVertexAttribArray(i);",Pn,".bindBuffer(",34962,",",Fn,".buffer.buffer);",Pn,".vertexAttribPointer(i,",Fn,".size,",Fn,".type,",Fn,".normalized,",Fn,".stride,",Fn,".offset);").else(Pn,".disableVertexAttribArray(i);",Pn,".vertexAttrib4f(i,",Fn,".x,",Fn,".y,",Fn,".z,",Fn,".w);",Fn,".buffer=null;");var or=jt.link(Je.maxAttributes,{stable:!0});return Sn("for(var i=0;i<",or,";++i){",Fn,"=",On,"[i];",Gn,"}"),$n&&Sn("for(var i=0;i<",or,";++i){",Wn,".vertexAttribDivisorANGLE(i,",On,"[i].divisor);","}"),Sn(jt.shared.vao,".currentVAO=null;",jt.shared.vao,".setVAO(",jt.shared.vao,".targetVAO);"),Object.keys(Cr).forEach(function(sr){var pr=Cr[sr],yr=Kn.def(Un,".",sr),Lr=jt.block();Lr("if(",yr,"){",Pn,".enable(",pr,")}else{",Pn,".disable(",pr,")}",Cn,".",sr,"=",yr,";"),Sn(Lr),fn("if(",yr,"!==",Cn,".",sr,"){",Lr,"}")}),Object.keys(Pr).forEach(function(sr){var pr,yr,Lr=Pr[sr],zr=ar[sr],cr=jt.block();cr(Pn,".",Lr,"("),d(zr)?(Lr=zr.length,pr=jt.global.def(Un,".",sr),yr=jt.global.def(Cn,".",sr),cr(r(Lr,function(Yr){return pr+"["+Yr+"]"}),");",r(Lr,function(Yr){return yr+"["+Yr+"]="+pr+"["+Yr+"];"}).join("")),fn("if(",r(Lr,function(Yr){return pr+"["+Yr+"]!=="+yr+"["+Yr+"]"}).join("||"),"){",cr,"}")):(pr=Kn.def(Un,".",sr),yr=Kn.def(Cn,".",sr),cr(pr,");",Cn,".",sr,"=",pr,";"),fn("if(",pr,"!==",yr,"){",cr,"}")),Sn(cr)}),jt.compile()}(),compile:function(jt,fn,Sn,Kn,Wn){var Pn=zt();Pn.stats=Pn.link(Wn),Object.keys(fn.static).forEach(function(Cn){Dr(Pn,fn,Cn)}),dn.forEach(function(Cn){Dr(Pn,jt,Cn)});var Un=qn(jt,fn,Sn,Kn);return Un.shader.program&&(Un.shader.program.attributes.sort(function(Cn,On){return Cn.name<On.name?-1:1}),Un.shader.program.uniforms.sort(function(Cn,On){return Cn.name<On.name?-1:1})),function(Cn,On){var Fn=Cn.proc("draw",1);Mn(Cn,Fn),gn(Cn,Fn,On.context),sn(Cn,Fn,On.framebuffer),vn(Cn,Fn,On),pn(Cn,Fn,On.state),Rn(Cn,Fn,On,!1,!0);var Gn=On.shader.progVar.append(Cn,Fn);if(Fn(Cn.shared.gl,".useProgram(",Gn,".program);"),On.shader.program)Ir(Cn,Fn,On,On.shader.program);else{Fn(Cn.shared.vao,".setVAO(null);");var or=Cn.global.def("{}"),sr=Fn.def(Gn,".id"),pr=Fn.def(or,"[",sr,"]");Fn(Cn.cond(pr).then(pr,".call(this,a0);").else(pr,"=",or,"[",sr,"]=",Cn.link(function(yr){return er(Ir,Cn,On,yr,1)}),"(",Gn,");",pr,".call(this,a0);"))}0<Object.keys(On.state).length&&Fn(Cn.shared.current,".dirty=true;"),Cn.shared.vao&&Fn(Cn.shared.vao,".setVAO(null);")}(Pn,Un),function Br(jt,fn){function Sn(Cn){var On=fn.shader[Cn];On&&(On=On.append(jt,Kn),isNaN(On)?Kn.set(Wn.shader,"."+Cn,On):Kn.set(Wn.shader,"."+Cn,jt.link(On,{stable:!0})))}var Kn=jt.proc("scope",3);jt.batchId="a2";var Wn=jt.shared,Pn=Wn.current;if(gn(jt,Kn,fn.context),fn.framebuffer&&fn.framebuffer.append(jt,Kn),X(Object.keys(fn.state)).forEach(function(Cn){var On=fn.state[Cn],Fn=On.append(jt,Kn);d(Fn)?Fn.forEach(function(Gn,or){isNaN(Gn)?Kn.set(jt.next[Cn],"["+or+"]",Gn):Kn.set(jt.next[Cn],"["+or+"]",jt.link(Gn,{stable:!0}))}):re(On)?Kn.set(Wn.next,"."+Cn,jt.link(Fn,{stable:!0})):Kn.set(Wn.next,"."+Cn,Fn)}),Rn(jt,Kn,fn,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Cn){var On=fn.draw[Cn];On&&(On=On.append(jt,Kn),isNaN(On)?Kn.set(Wn.draw,"."+Cn,On):Kn.set(Wn.draw,"."+Cn,jt.link(On),{stable:!0}))}),Object.keys(fn.uniforms).forEach(function(Cn){var On=fn.uniforms[Cn].append(jt,Kn);Array.isArray(On)&&(On="["+On.map(function(Fn){return isNaN(Fn)?Fn:jt.link(Fn,{stable:!0})})+"]"),Kn.set(Wn.uniforms,"["+jt.link(je.id(Cn),{stable:!0})+"]",On)}),Object.keys(fn.attributes).forEach(function(Cn){var On=fn.attributes[Cn].append(jt,Kn),Fn=jt.scopeAttrib(Cn);Object.keys(new Rr).forEach(function(Gn){Kn.set(Fn,"."+Gn,On[Gn])})}),fn.scopeVAO){var Un=fn.scopeVAO.append(jt,Kn);isNaN(Un)?Kn.set(Wn.vao,".targetVAO",Un):Kn.set(Wn.vao,".targetVAO",jt.link(Un,{stable:!0}))}Sn("vert"),Sn("frag"),0<Object.keys(fn.state).length&&(Kn(Pn,".dirty=true;"),Kn.exit(Pn,".dirty=true;")),Kn("a1(",jt.shared.context,",a0,",jt.batchId,");")}(Pn,Un),function(Cn,On){function Fn(zr){return zr.contextDep&&or||zr.propDep}var Gn=Cn.proc("batch",2);Cn.batchId="0",Mn(Cn,Gn);var or=!1,sr=!0;Object.keys(On.context).forEach(function(zr){or=or||On.context[zr].propDep}),or||(gn(Cn,Gn,On.context),sr=!1);var pr=!1;if((yr=On.framebuffer)?(yr.propDep?or=pr=!0:yr.contextDep&&or&&(pr=!0),pr||sn(Cn,Gn,yr)):sn(Cn,Gn,null),On.state.viewport&&On.state.viewport.propDep&&(or=!0),vn(Cn,Gn,On),pn(Cn,Gn,On.state,function(zr){return!Fn(zr)}),On.profile&&Fn(On.profile)||Rn(Cn,Gn,On,!1,"a1"),On.contextDep=or,On.needsContext=sr,On.needsFramebuffer=pr,(sr=On.shader.progVar).contextDep&&or||sr.propDep)ni(Cn,Gn,On,null);else if(sr=sr.append(Cn,Gn),Gn(Cn.shared.gl,".useProgram(",sr,".program);"),On.shader.program)ni(Cn,Gn,On,On.shader.program);else{Gn(Cn.shared.vao,".setVAO(null);");var yr=Cn.global.def("{}"),Lr=(pr=Gn.def(sr,".id"),Gn.def(yr,"[",pr,"]"));Gn(Cn.cond(Lr).then(Lr,".call(this,a0,a1);").else(Lr,"=",yr,"[",pr,"]=",Cn.link(function(zr){return er(ni,Cn,On,zr,2)}),"(",sr,");",Lr,".call(this,a0,a1);"))}0<Object.keys(On.state).length&&Gn(Cn.shared.current,".dirty=true;"),Cn.shared.vao&&Gn(Cn.shared.vao,".setVAO(null);")}(Pn,Un),q(Pn.compile(),{destroy:function(){Un.shader.program.destroy()}})}}}function ie(Se,je){for(var qe=0;qe<Se.length;++qe)if(Se[qe]===je)return qe;return-1}var q=function(Se,je){for(var qe=Object.keys(je),Je=0;Je<qe.length;++Je)Se[qe[Je]]=je[qe[Je]];return Se},ee=0,te={DynamicVariable:g,define:function(Se,je){return new g(Se,m(je+""))},isDynamic:function(Se){return"function"==typeof Se&&!Se._reglType||Se instanceof g},unbox:function Se(je,qe){return"function"==typeof je?new g(0,je):"number"==typeof je||"boolean"==typeof je?new g(5,je):Array.isArray(je)?new g(6,je.map(function(Je,at){return Se(Je,qe+"["+at+"]")})):je instanceof g?je:void 0},accessor:m},se={next:"function"==typeof requestAnimationFrame?function(Se){return requestAnimationFrame(Se)}:function(Se){return setTimeout(Se,16)},cancel:"function"==typeof cancelAnimationFrame?function(Se){return cancelAnimationFrame(Se)}:clearTimeout},ue="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},de=a();de.zero=a();var xe=function(Se){return Se instanceof Uint8Array||Se instanceof Uint16Array||Se instanceof Uint32Array||Se instanceof Int8Array||Se instanceof Int16Array||Se instanceof Int32Array||Se instanceof Float32Array||Se instanceof Float64Array||Se instanceof Uint8ClampedArray},ge=function(Se){return Object.keys(Se).map(function(je){return Se[je]})},_e={shape:function(Se){for(var je=[];Se.length;Se=Se[0])je.push(Se.length);return je},flatten:function(Se,je,qe,Je){var at=1;if(je.length)for(var it=0;it<je.length;++it)at*=je[it];else at=0;switch(qe=Je||de.allocType(qe,at),je.length){case 0:break;case 1:for(Je=je[0],je=0;je<Je;++je)qe[je]=Se[je];break;case 2:for(Je=je[0],je=je[1],it=at=0;it<Je;++it)for(var yt=Se[it],vt=0;vt<je;++vt)qe[at++]=yt[vt];break;case 3:p(Se,je[0],je[1],je[2],qe,0);break;default:!function Ut(Wt,gt,At,Zt,Et){for(var Ct=1,Ne=At+1;Ne<gt.length;++Ne)Ct*=gt[Ne];var et=gt[At];if(gt.length-At==4){var dt=gt[At+1],Mt=gt[At+2];for(gt=gt[At+3],Ne=0;Ne<et;++Ne)p(Wt[Ne],dt,Mt,gt,Zt,Et),Et+=Ct}else for(Ne=0;Ne<et;++Ne)Ut(Wt[Ne],gt,At+1,Zt,Et),Et+=Ct}(Se,je,0,qe,0)}return qe}},Ce={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Le={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ie={dynamic:35048,stream:35040,static:35044},Be=_e.flatten,ve=_e.shape,Te=[];Te[5120]=1,Te[5122]=2,Te[5124]=4,Te[5121]=1,Te[5123]=2,Te[5125]=4,Te[5126]=4;var Pe={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},De=new Float32Array(1),Fe=new Uint32Array(De.buffer),Ue=[9984,9986,9985,9987],He=[0,6409,6410,6407,6408],Ke={};Ke[6409]=Ke[6406]=Ke[6402]=1,Ke[34041]=Ke[6410]=2,Ke[6407]=Ke[35904]=3,Ke[6408]=Ke[35906]=4;var st=o("HTMLCanvasElement"),Ve=o("OffscreenCanvas"),$e=o("CanvasRenderingContext2D"),Qe=o("ImageBitmap"),tt=o("HTMLImageElement"),ut=o("HTMLVideoElement"),xt=Object.keys(Ce).concat([st,Ve,$e,Qe,tt,ut]),kt=[];kt[5121]=1,kt[5126]=4,kt[36193]=2,kt[5123]=2,kt[5125]=4;var Bt=[];Bt[32854]=2,Bt[32855]=2,Bt[36194]=2,Bt[34041]=4,Bt[33776]=.5,Bt[33777]=.5,Bt[33778]=1,Bt[33779]=1,Bt[35986]=.5,Bt[35987]=1,Bt[34798]=1,Bt[35840]=.5,Bt[35841]=.25,Bt[35842]=.5,Bt[35843]=.25,Bt[36196]=.5;var Rt=[];Rt[32854]=2,Rt[32855]=2,Rt[36194]=2,Rt[33189]=2,Rt[36168]=1,Rt[34041]=4,Rt[35907]=4,Rt[34836]=16,Rt[34842]=8,Rt[34843]=6;var lt=[];lt[6408]=4,lt[6407]=3;var Ft=[];Ft[5121]=1,Ft[5126]=4,Ft[36193]=2;var Jt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],ln=["x","y","z","w"],dn="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),cn={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Tn={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},nn={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Me={cw:2304,ccw:2305},Ee=new $(!1,!1,!1,function(){});return function(Se){function je(){if(0===Or.length)Xt&&Xt.update(),Rr=null;else{Rr=se.next(je),gt();for(var $n=Or.length-1;0<=$n;--$n){var Mr=Or[$n];Mr&&Mr(qn,null,0)}Et.flush(),Xt&&Xt.update()}}function qe(){!Rr&&0<Or.length&&(Rr=se.next(je))}function Je(){Rr&&(se.cancel(je),Rr=null)}function at($n){$n.preventDefault(),Je(),ni.forEach(function(Mr){Mr()})}function it($n){Et.getError(),Ne.restore(),Mn.restore(),sn.restore(),Rn.restore(),Xn.restore(),Hn.restore(),pn.restore(),Xt&&Xt.restore(),rr.procs.refresh(),qe(),Br.forEach(function(Mr){Mr()})}function yt($n){function Mr(jt,fn){var Sn={},Kn={};return Object.keys(jt).forEach(function(Wn){var Pn=jt[Wn];if(te.isDynamic(Pn))Kn[Wn]=te.unbox(Pn,Wn);else{if(fn&&Array.isArray(Pn))for(var Un=0;Un<Pn.length;++Un)if(te.isDynamic(Pn[Un]))return void(Kn[Wn]=te.unbox(Pn,Wn));Sn[Wn]=Pn}}),{dynamic:Kn,static:Sn}}var br=Mr($n.context||{},!0),ar=Mr($n.uniforms||{},!0),si=Mr($n.attributes||{},!1);$n=Mr(function(jt){function fn(Kn){if(Kn in Sn){var Wn=Sn[Kn];delete Sn[Kn],Object.keys(Wn).forEach(function(Pn){Sn[Kn+"."+Pn]=Wn[Pn]})}}var Sn=q({},jt);return delete Sn.uniforms,delete Sn.attributes,delete Sn.context,delete Sn.vao,"stencil"in Sn&&Sn.stencil.op&&(Sn.stencil.opBack=Sn.stencil.opFront=Sn.stencil.op,delete Sn.stencil.op),fn("blend"),fn("depth"),fn("cull"),fn("stencil"),fn("polygonOffset"),fn("scissor"),fn("sample"),"vao"in jt&&(Sn.vao=jt.vao),Sn}($n),!1);var ri={gpuTime:0,cpuTime:0,count:0},Cr=rr.compile($n,si,ar,br,ri),Pr=Cr.draw,vr=Cr.batch,hn=Cr.scope,Jn=[];return q(function(jt,fn){var Sn;if("function"==typeof jt)return hn.call(this,null,jt,0);if("function"==typeof fn)if("number"==typeof jt)for(Sn=0;Sn<jt;++Sn)hn.call(this,null,fn,Sn);else{if(!Array.isArray(jt))return hn.call(this,jt,fn,0);for(Sn=0;Sn<jt.length;++Sn)hn.call(this,jt[Sn],fn,Sn)}else if("number"==typeof jt){if(0<jt)return vr.call(this,function(Kn){for(;Jn.length<Kn;)Jn.push(null);return Jn}(0|jt),0|jt)}else{if(!Array.isArray(jt))return Pr.call(this,jt);if(jt.length)return vr.call(this,jt,jt.length)}},{stats:ri,destroy:function(){Cr.destroy()}})}function vt($n,Mr){var br=0;rr.procs.poll();var ar=Mr.color;ar&&(Et.clearColor(+ar[0]||0,+ar[1]||0,+ar[2]||0,+ar[3]||0),br|=16384),"depth"in Mr&&(Et.clearDepth(+Mr.depth),br|=256),"stencil"in Mr&&(Et.clearStencil(0|Mr.stencil),br|=1024),Et.clear(br)}function Ut($n){return Or.push($n),qe(),{cancel:function(){var Mr=ie(Or,$n);Or[Mr]=function br(){var ar=ie(Or,br);Or[ar]=Or[Or.length-1],--Or.length,0>=Or.length&&Je()}}}}function Wt(){var $n=er.viewport,Mr=er.scissor_box;$n[0]=$n[1]=Mr[0]=Mr[1]=0,qn.viewportWidth=qn.framebufferWidth=qn.drawingBufferWidth=$n[2]=Mr[2]=Et.drawingBufferWidth,qn.viewportHeight=qn.framebufferHeight=qn.drawingBufferHeight=$n[3]=Mr[3]=Et.drawingBufferHeight}function gt(){qn.tick+=1,qn.time=Zt(),Wt(),rr.procs.poll()}function At(){Rn.refresh(),Wt(),rr.procs.refresh(),Xt&&Xt.update()}function Zt(){return(ue()-un)/1e3}if(!(Se=function e(Se){var je,qe,Je,at,it=Se||{};Se={};var yt=[],vt=[],Ut="undefined"==typeof window?1:window.devicePixelRatio,Wt=!1,gt={},At=function(Et){},Zt=function(){};if("string"==typeof it?je=document.querySelector(it):"object"==typeof it&&("string"==typeof it.nodeName&&"function"==typeof it.appendChild&&"function"==typeof it.getBoundingClientRect?je=it:"function"==typeof it.drawArrays||"function"==typeof it.drawElements?Je=(at=it).canvas:("gl"in it?at=it.gl:"canvas"in it?Je=y(it.canvas):"container"in it&&(qe=y(it.container)),"attributes"in it&&(Se=it.attributes),"extensions"in it&&(yt=w(it.extensions)),"optionalExtensions"in it&&(vt=w(it.optionalExtensions)),"onDone"in it&&(At=it.onDone),"profile"in it&&(Wt=!!it.profile),"pixelRatio"in it&&(Ut=+it.pixelRatio),"cachedCode"in it&&(gt=it.cachedCode))),je&&("canvas"===je.nodeName.toLowerCase()?Je=je:qe=je),!at){if(!Je){if(!(je=function(Et,Ct,Ne){function et(){var zt=window.innerWidth,Xt=window.innerHeight;Et!==document.body&&(zt=(Xt=Mt.getBoundingClientRect()).right-Xt.left,Xt=Xt.bottom-Xt.top),Mt.width=Ne*zt,Mt.height=Ne*Xt}var dt,Mt=document.createElement("canvas");return q(Mt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Et.appendChild(Mt),Et===document.body&&(Mt.style.position="absolute",q(Et.style,{margin:0,padding:0})),Et!==document.body&&"function"==typeof ResizeObserver?(dt=new ResizeObserver(function(){setTimeout(et)})).observe(Et):window.addEventListener("resize",et,!1),et(),{canvas:Mt,onDestroy:function(){dt?dt.disconnect():window.removeEventListener("resize",et),Et.removeChild(Mt)}}}(qe||document.body,0,Ut)))return null;Je=je.canvas,Zt=je.onDestroy}void 0===Se.premultipliedAlpha&&(Se.premultipliedAlpha=!0),at=function(Et,Ct){function Ne(et){try{return Et.getContext(et,Ct)}catch(dt){return null}}return Ne("webgl")||Ne("experimental-webgl")||Ne("webgl-experimental")}(Je,Se)}return at?{gl:at,canvas:Je,container:qe,extensions:yt,optionalExtensions:vt,pixelRatio:Ut,profile:Wt,cachedCode:gt,onDone:At,onDestroy:Zt}:(Zt(),At("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(Se)))return null;var Et=Se.gl,Ct=Et.getContextAttributes();Et.isContextLost();var Ne=function($n,Mr){function br(Cr){var Pr;Cr=Cr.toLowerCase();try{Pr=ar[Cr]=$n.getExtension(Cr)}catch(vr){}return!!Pr}for(var ar={},si=0;si<Mr.extensions.length;++si){var ri=Mr.extensions[si];if(!br(ri))return Mr.onDestroy(),Mr.onDone('"'+ri+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Mr.optionalExtensions.forEach(br),{extensions:ar,restore:function(){Object.keys(ar).forEach(function(Cr){if(ar[Cr]&&!br(Cr))throw Error("(regl): error restoring extension "+Cr)})}}}(Et,Se);if(!Ne)return null;var $n,Mr,et=($n={"":0},Mr=[""],{id:function(br){var ar=$n[br];return ar||(ar=$n[br]=Mr.length,Mr.push(br),ar)},str:function(br){return Mr[br]}}),dt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Mt=Se.cachedCode||{},zt=Ne.extensions,Xt=function($n,Mr){function br(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function ar(Jn,jt,fn){var Sn=Cr.pop()||new br;Sn.startQueryIndex=Jn,Sn.endQueryIndex=jt,Sn.sum=0,Sn.stats=fn,Pr.push(Sn)}if(!Mr.ext_disjoint_timer_query)return null;var si=[],ri=[],Cr=[],Pr=[],vr=[],hn=[];return{beginQuery:function(Jn){var jt=si.pop()||Mr.ext_disjoint_timer_query.createQueryEXT();Mr.ext_disjoint_timer_query.beginQueryEXT(35007,jt),ri.push(jt),ar(ri.length-1,ri.length,Jn)},endQuery:function(){Mr.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:ar,update:function(){var Jn,jt;if(0!==(Jn=ri.length)){hn.length=Math.max(hn.length,Jn+1),vr.length=Math.max(vr.length,Jn+1),vr[0]=0;var fn=hn[0]=0;for(jt=Jn=0;jt<ri.length;++jt){var Sn=ri[jt];Mr.ext_disjoint_timer_query.getQueryObjectEXT(Sn,34919)?(fn+=Mr.ext_disjoint_timer_query.getQueryObjectEXT(Sn,34918),si.push(Sn)):ri[Jn++]=Sn,vr[jt+1]=fn,hn[jt+1]=Jn}for(ri.length=Jn,jt=Jn=0;jt<Pr.length;++jt){var Kn=(fn=Pr[jt]).startQueryIndex;fn.sum+=vr[Sn=fn.endQueryIndex]-vr[Kn],(Sn=hn[Sn])===(Kn=hn[Kn])?(fn.stats.gpuTime+=fn.sum/1e6,Cr.push(fn)):(fn.startQueryIndex=Kn,fn.endQueryIndex=Sn,Pr[Jn++]=fn)}Pr.length=Jn}},getNumPendingQueries:function(){return ri.length},clear:function(){si.push.apply(si,ri);for(var Jn=0;Jn<si.length;Jn++)Mr.ext_disjoint_timer_query.deleteQueryEXT(si[Jn]);ri.length=0,si.length=0},restore:function(){ri.length=0,si.length=0}}}(0,zt),un=ue(),Qt=Et.drawingBufferWidth,kn=Et.drawingBufferHeight,qn={tick:0,time:0,viewportWidth:Qt,viewportHeight:kn,framebufferWidth:Qt,framebufferHeight:kn,drawingBufferWidth:Qt,drawingBufferHeight:kn,pixelRatio:Se.pixelRatio},gn=(Qt={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(Se,je){var qe=1;je.ext_texture_filter_anisotropic&&(qe=Se.getParameter(34047));var Je=1,at=1;je.webgl_draw_buffers&&(Je=Se.getParameter(34852),at=Se.getParameter(36063));var it=!!je.oes_texture_float;if(it){it=Se.createTexture(),Se.bindTexture(3553,it),Se.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var yt=Se.createFramebuffer();if(Se.bindFramebuffer(36160,yt),Se.framebufferTexture2D(36160,36064,3553,it,0),Se.bindTexture(3553,null),36053!==Se.checkFramebufferStatus(36160))it=!1;else{Se.viewport(0,0,1,1),Se.clearColor(1,0,0,1),Se.clear(16384);var vt=de.allocType(5126,4);Se.readPixels(0,0,1,1,6408,5126,vt),Se.getError()?it=!1:(Se.deleteFramebuffer(yt),Se.deleteTexture(it),it=1===vt[0]),de.freeType(vt)}}return vt=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(vt=Se.createTexture(),yt=de.allocType(5121,36),Se.activeTexture(33984),Se.bindTexture(34067,vt),Se.texImage2D(34069,0,6408,3,3,0,6408,5121,yt),de.freeType(yt),Se.bindTexture(34067,null),Se.deleteTexture(vt),vt=!Se.getError()),{colorBits:[Se.getParameter(3410),Se.getParameter(3411),Se.getParameter(3412),Se.getParameter(3413)],depthBits:Se.getParameter(3414),stencilBits:Se.getParameter(3415),subpixelBits:Se.getParameter(3408),extensions:Object.keys(je).filter(function(Ut){return!!je[Ut]}),maxAnisotropic:qe,maxDrawbuffers:Je,maxColorAttachments:at,pointSizeDims:Se.getParameter(33901),lineWidthDims:Se.getParameter(33902),maxViewportDims:Se.getParameter(3386),maxCombinedTextureUnits:Se.getParameter(35661),maxCubeMapSize:Se.getParameter(34076),maxRenderbufferSize:Se.getParameter(34024),maxTextureUnits:Se.getParameter(34930),maxTextureSize:Se.getParameter(3379),maxAttributes:Se.getParameter(34921),maxVertexUniforms:Se.getParameter(36347),maxVertexTextureUnits:Se.getParameter(35660),maxVaryingVectors:Se.getParameter(36348),maxFragmentUniforms:Se.getParameter(36349),glsl:Se.getParameter(35724),renderer:Se.getParameter(7937),vendor:Se.getParameter(7936),version:Se.getParameter(7938),readFloat:it,npotTextureCube:vt}}(Et,zt)),sn=function f(Se,je,qe,Je){function at(At){this.id=Ut++,this.buffer=Se.createBuffer(),this.type=At,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,qe.profile&&(this.stats={size:0})}function it(At,Zt,Et){At.byteLength=Zt.byteLength,Se.bufferData(At.type,Zt,Et)}function yt(At,Zt,Et,Ct,Ne,et){if(At.usage=Et,Array.isArray(Zt)){if(At.dtype=Ct||5126,0<Zt.length)if(Array.isArray(Zt[0])){Ne=ve(Zt);for(var dt=Ct=1;dt<Ne.length;++dt)Ct*=Ne[dt];At.dimension=Ct,it(At,Zt=Be(Zt,Ne,At.dtype),Et),et?At.persistentData=Zt:de.freeType(Zt)}else"number"==typeof Zt[0]?(At.dimension=Ne,i(Ne=de.allocType(At.dtype,Zt.length),Zt),it(At,Ne,Et),et?At.persistentData=Ne:de.freeType(Ne)):xe(Zt[0])&&(At.dimension=Zt[0].length,At.dtype=Ct||u(Zt[0])||5126,it(At,Zt=Be(Zt,[Zt.length,Zt[0].length],At.dtype),Et),et?At.persistentData=Zt:de.freeType(Zt))}else if(xe(Zt))At.dtype=Ct||u(Zt),At.dimension=Ne,it(At,Zt,Et),et&&(At.persistentData=new Uint8Array(new Uint8Array(Zt.buffer)));else if(t(Zt)){var Mt=Zt.stride,zt=(dt=Zt.offset,0),Xt=0,un=0,Qt=0;1===(Ne=Zt.shape).length?(zt=Ne[0],Xt=1,un=Mt[0],Qt=0):2===Ne.length&&(zt=Ne[0],Xt=Ne[1],un=Mt[0],Qt=Mt[1]),At.dtype=Ct||u(Zt.data)||5126,At.dimension=Xt,c(Ne=de.allocType(At.dtype,zt*Xt),Zt.data,zt,Xt,un,Qt,dt),it(At,Ne,Et),et?At.persistentData=Ne:de.freeType(Ne)}else Zt instanceof ArrayBuffer&&(At.dtype=5121,At.dimension=Ne,it(At,Zt,Et),et&&(At.persistentData=new Uint8Array(new Uint8Array(Zt))))}function vt(At){je.bufferCount--,Je(At),Se.deleteBuffer(At.buffer),At.buffer=null,delete Wt[At.id]}var Ut=0,Wt={};at.prototype.bind=function(){Se.bindBuffer(this.type,this.buffer)},at.prototype.destroy=function(){vt(this)};var gt=[];return qe.profile&&(je.getTotalBufferSize=function(){var At=0;return Object.keys(Wt).forEach(function(Zt){At+=Wt[Zt].stats.size}),At}),{create:function(At,Zt,Et,Ct){function Ne(dt){var Mt=35044,zt=null,Xt=0,un=0,Qt=1;return Array.isArray(dt)||xe(dt)||t(dt)||dt instanceof ArrayBuffer?zt=dt:"number"==typeof dt?Xt=0|dt:dt&&("data"in dt&&(zt=dt.data),"usage"in dt&&(Mt=Ie[dt.usage]),"type"in dt&&(un=Le[dt.type]),"dimension"in dt&&(Qt=0|dt.dimension),"length"in dt&&(Xt=0|dt.length)),et.bind(),zt?yt(et,zt,Mt,un,Qt,Ct):(Xt&&Se.bufferData(et.type,Xt,Mt),et.dtype=un||5121,et.usage=Mt,et.dimension=Qt,et.byteLength=Xt),qe.profile&&(et.stats.size=et.byteLength*Te[et.dtype]),Ne}je.bufferCount++;var et=new at(Zt);return Wt[et.id]=et,Et||Ne(At),Ne._reglType="buffer",Ne._buffer=et,Ne.subdata=function(dt,Mt){var zt,Xt=0|(Mt||0);if(et.bind(),xe(dt)||dt instanceof ArrayBuffer)Se.bufferSubData(et.type,Xt,dt);else if(Array.isArray(dt)){if(0<dt.length)if("number"==typeof dt[0]){var un=de.allocType(et.dtype,dt.length);i(un,dt),Se.bufferSubData(et.type,Xt,un),de.freeType(un)}else(Array.isArray(dt[0])||xe(dt[0]))&&(zt=ve(dt),un=Be(dt,zt,et.dtype),Se.bufferSubData(et.type,Xt,un),de.freeType(un))}else if(t(dt)){var Qt=dt.stride,kn=un=0,qn=0,gn=0;1===(zt=dt.shape).length?(un=zt[0],kn=1,qn=Qt[0],gn=0):2===zt.length&&(un=zt[0],kn=zt[1],qn=Qt[0],gn=Qt[1]),zt=Array.isArray(dt.data)?et.dtype:u(dt.data),c(zt=de.allocType(zt,un*kn),dt.data,un,kn,qn,gn,dt.offset),Se.bufferSubData(et.type,Xt,zt),de.freeType(zt)}return Ne},qe.profile&&(Ne.stats=et.stats),Ne.destroy=function(){vt(et)},Ne},createStream:function(At,Zt){var Et=gt.pop();return Et||(Et=new at(At)),Et.bind(),yt(Et,Zt,35040,0,1,!1),Et},destroyStream:function(At){gt.push(At)},clear:function(){ge(Wt).forEach(vt),gt.forEach(vt)},getBuffer:function(At){return At&&At._buffer instanceof at?At._buffer:null},restore:function(){ge(Wt).forEach(function(At){At.buffer=Se.createBuffer(),Se.bindBuffer(At.type,At.buffer),Se.bufferData(At.type,At.persistentData||At.byteLength,At.usage)})},_initBuffer:yt}}(Et,dt,Se,function($n){return pn.destroyBuffer($n)}),vn=function l(Se,je,qe,Je){function at(At){this.id=Ut++,vt[this.id]=this,this.buffer=At,this.primType=4,this.type=this.vertCount=0}function it(At,Zt,Et,Ct,Ne,et,dt){var Mt;if(At.buffer.bind(),Zt?((Mt=dt)||xe(Zt)&&(!t(Zt)||xe(Zt.data))||(Mt=je.oes_element_index_uint?5125:5123),qe._initBuffer(At.buffer,Zt,Et,Mt,3)):(Se.bufferData(34963,et,Et),At.buffer.dtype=Mt||5121,At.buffer.usage=Et,At.buffer.dimension=3,At.buffer.byteLength=et),Mt=dt,!dt){switch(At.buffer.dtype){case 5121:case 5120:Mt=5121;break;case 5123:case 5122:Mt=5123;break;case 5125:case 5124:Mt=5125}At.buffer.dtype=Mt}At.type=Mt,0>(Zt=Ne)&&(Zt=At.buffer.byteLength,5123===Mt?Zt>>=1:5125===Mt&&(Zt>>=2)),At.vertCount=Zt,Zt=Ct,0>Ct&&(Zt=4,1===(Ct=At.buffer.dimension)&&(Zt=0),2===Ct&&(Zt=1),3===Ct&&(Zt=4)),At.primType=Zt}function yt(At){Je.elementsCount--,delete vt[At.id],At.buffer.destroy(),At.buffer=null}var vt={},Ut=0,Wt={uint8:5121,uint16:5123};je.oes_element_index_uint&&(Wt.uint32=5125),at.prototype.bind=function(){this.buffer.bind()};var gt=[];return{create:function(At,Zt){function Et(et){if(et)if("number"==typeof et)Ct(et),Ne.primType=4,Ne.vertCount=0|et,Ne.type=5121;else{var dt=null,Mt=35044,zt=-1,Xt=-1,un=0,Qt=0;Array.isArray(et)||xe(et)||t(et)?dt=et:("data"in et&&(dt=et.data),"usage"in et&&(Mt=Ie[et.usage]),"primitive"in et&&(zt=Pe[et.primitive]),"count"in et&&(Xt=0|et.count),"type"in et&&(Qt=Wt[et.type]),"length"in et?un=0|et.length:(un=Xt,5123===Qt||5122===Qt?un*=2:5125!==Qt&&5124!==Qt||(un*=4))),it(Ne,dt,Mt,zt,Xt,un,Qt)}else Ct(),Ne.primType=4,Ne.vertCount=0,Ne.type=5121;return Et}var Ct=qe.create(null,34963,!0),Ne=new at(Ct._buffer);return Je.elementsCount++,Et(At),Et._reglType="elements",Et._elements=Ne,Et.subdata=function(et,dt){return Ct.subdata(et,dt),Et},Et.destroy=function(){yt(Ne)},Et},createStream:function(At){var Zt=gt.pop();return Zt||(Zt=new at(qe.create(null,34963,!0,!1)._buffer)),it(Zt,At,35040,-1,-1,0,0),Zt},destroyStream:function(At){gt.push(At)},getElements:function(At){return"function"==typeof At&&At._elements instanceof at?At._elements:null},clear:function(){ge(vt).forEach(yt)}}}(Et,zt,sn,dt),pn=function O(Se,je,qe,Je,at,it,yt){function vt(){this.id=++gt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Et=je.oes_vertex_array_object;this.vao=Et?Et.createVertexArrayOES():null,At[this.id]=this,this.buffers=[]}var Ut=qe.maxAttributes,Wt=Array(Ut);for(qe=0;qe<Ut;++qe)Wt[qe]=new R;var gt=0,At={},Zt={Record:R,scope:{},state:Wt,currentVAO:null,targetVAO:null,restore:je.oes_vertex_array_object?function(){je.oes_vertex_array_object&&ge(At).forEach(function(Et){Et.refresh()})}:function(){},createVAO:function(Et){function Ct(et){var dt;Array.isArray(et)?(dt=et,Ne.elements&&Ne.ownsElements&&Ne.elements.destroy(),Ne.elements=null,Ne.ownsElements=!1,Ne.offset=0,Ne.count=0,Ne.instances=-1,Ne.primitive=4):(et.elements?(dt=et.elements,Ne.ownsElements?("function"==typeof dt&&"elements"===dt._reglType?Ne.elements.destroy():Ne.elements(dt),Ne.ownsElements=!1):it.getElements(et.elements)?(Ne.elements=et.elements,Ne.ownsElements=!1):(Ne.elements=it.create(et.elements),Ne.ownsElements=!0)):(Ne.elements=null,Ne.ownsElements=!1),dt=et.attributes,Ne.offset=0,Ne.count=-1,Ne.instances=-1,Ne.primitive=4,Ne.elements&&(Ne.count=Ne.elements._elements.vertCount,Ne.primitive=Ne.elements._elements.primType),"offset"in et&&(Ne.offset=0|et.offset),"count"in et&&(Ne.count=0|et.count),"instances"in et&&(Ne.instances=0|et.instances),"primitive"in et&&(Ne.primitive=Pe[et.primitive])),et={};var Mt=Ne.attributes;Mt.length=dt.length;for(var zt=0;zt<dt.length;++zt){var Xt,un=dt[zt],Qt=Mt[zt]=new R,kn=un.data||un;Array.isArray(kn)||xe(kn)||t(kn)?(Ne.buffers[zt]&&(Xt=Ne.buffers[zt],xe(kn)&&Xt._buffer.byteLength>=kn.byteLength?Xt.subdata(kn):(Xt.destroy(),Ne.buffers[zt]=null)),Ne.buffers[zt]||(Xt=Ne.buffers[zt]=at.create(un,34962,!1,!0)),Qt.buffer=at.getBuffer(Xt),Qt.size=0|Qt.buffer.dimension,Qt.normalized=!1,Qt.type=Qt.buffer.dtype,Qt.offset=0,Qt.stride=0,Qt.divisor=0,Qt.state=1,et[zt]=1):at.getBuffer(un)?(Qt.buffer=at.getBuffer(un),Qt.size=0|Qt.buffer.dimension,Qt.normalized=!1,Qt.type=Qt.buffer.dtype,Qt.offset=0,Qt.stride=0,Qt.divisor=0,Qt.state=1):at.getBuffer(un.buffer)?(Qt.buffer=at.getBuffer(un.buffer),Qt.size=0|(+un.size||Qt.buffer.dimension),Qt.normalized=!!un.normalized||!1,Qt.type="type"in un?Le[un.type]:Qt.buffer.dtype,Qt.offset=0|(un.offset||0),Qt.stride=0|(un.stride||0),Qt.divisor=0|(un.divisor||0),Qt.state=1):"x"in un&&(Qt.x=+un.x||0,Qt.y=+un.y||0,Qt.z=+un.z||0,Qt.w=+un.w||0,Qt.state=2)}for(Xt=0;Xt<Ne.buffers.length;++Xt)!et[Xt]&&Ne.buffers[Xt]&&(Ne.buffers[Xt].destroy(),Ne.buffers[Xt]=null);return Ne.refresh(),Ct}var Ne=new vt;return Je.vaoCount+=1,Ct.destroy=function(){for(var et=0;et<Ne.buffers.length;++et)Ne.buffers[et]&&Ne.buffers[et].destroy();Ne.buffers.length=0,Ne.ownsElements&&(Ne.elements.destroy(),Ne.elements=null,Ne.ownsElements=!1),Ne.destroy()},Ct._vao=Ne,Ct._reglType="vao",Ct(Et)},getVAO:function(Et){return"function"==typeof Et&&Et._vao?Et._vao:null},destroyBuffer:function(Et){for(var Ct=0;Ct<Wt.length;++Ct){var Ne=Wt[Ct];Ne.buffer===Et&&(Se.disableVertexAttribArray(Ct),Ne.buffer=null)}},setVAO:je.oes_vertex_array_object?function(Et){Et!==Zt.currentVAO&&(je.oes_vertex_array_object.bindVertexArrayOES(Et?Et.vao:null),Zt.currentVAO=Et)}:function(Et){if(Et!==Zt.currentVAO){if(Et)Et.bindAttrs();else{for(var Ct=je.angle_instanced_arrays,Ne=0;Ne<Wt.length;++Ne){var et=Wt[Ne];et.buffer?(Se.enableVertexAttribArray(Ne),et.buffer.bind(),Se.vertexAttribPointer(Ne,et.size,et.type,et.normalized,et.stride,et.offfset),Ct&&et.divisor&&Ct.vertexAttribDivisorANGLE(Ne,et.divisor)):(Se.disableVertexAttribArray(Ne),Se.vertexAttrib4f(Ne,et.x,et.y,et.z,et.w))}Se.bindBuffer(34963,yt.elements?yt.elements.buffer.buffer:null)}Zt.currentVAO=Et}},clear:je.oes_vertex_array_object?function(){ge(At).forEach(function(Et){Et.destroy()})}:function(){}};return vt.prototype.bindAttrs=function(){for(var Et=je.angle_instanced_arrays,Ct=this.attributes,Ne=0;Ne<Ct.length;++Ne){var et=Ct[Ne];et.buffer?(Se.enableVertexAttribArray(Ne),Se.bindBuffer(34962,et.buffer.buffer),Se.vertexAttribPointer(Ne,et.size,et.type,et.normalized,et.stride,et.offset),Et&&et.divisor&&Et.vertexAttribDivisorANGLE(Ne,et.divisor)):(Se.disableVertexAttribArray(Ne),Se.vertexAttrib4f(Ne,et.x,et.y,et.z,et.w))}for(Et=Ct.length;Et<Ut;++Et)Se.disableVertexAttribArray(Et);(Et=it.getElements(this.elements))?Se.bindBuffer(34963,Et.buffer.buffer):Se.bindBuffer(34963,null)},vt.prototype.refresh=function(){var Et=je.oes_vertex_array_object;Et&&(Et.bindVertexArrayOES(this.vao),this.bindAttrs(),Zt.currentVAO=null,Et.bindVertexArrayOES(null))},vt.prototype.destroy=function(){if(this.vao){var Et=je.oes_vertex_array_object;this===Zt.currentVAO&&(Zt.currentVAO=null,Et.bindVertexArrayOES(null)),Et.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),At[this.id]&&(delete At[this.id],--Je.vaoCount)},Zt}(Et,zt,gn,dt,sn,vn,Qt),Mn=function D(Se,je,qe,Je){function at(Ct,Ne,et,dt){this.name=Ct,this.id=Ne,this.location=et,this.info=dt}function it(Ct,Ne){for(var et=0;et<Ct.length;++et)if(Ct[et].id===Ne.id)return void(Ct[et].location=Ne.location);Ct.push(Ne)}function yt(Ct,Ne,et){if(!(Mt=(et=35632===Ct?Wt:gt)[Ne])){var dt=je.str(Ne),Mt=Se.createShader(Ct);Se.shaderSource(Mt,dt),Se.compileShader(Mt),et[Ne]=Mt}return Mt}function vt(Ct,Ne){this.id=Et++,this.fragId=Ct,this.vertId=Ne,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Je.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ut(Ct,Ne,et){var dt;dt=yt(35632,Ct.fragId);var Mt=yt(35633,Ct.vertId);if(Ne=Ct.program=Se.createProgram(),Se.attachShader(Ne,dt),Se.attachShader(Ne,Mt),et)for(dt=0;dt<et.length;++dt)Se.bindAttribLocation(Ne,(Mt=et[dt])[0],Mt[1]);Se.linkProgram(Ne),Mt=Se.getProgramParameter(Ne,35718),Je.profile&&(Ct.stats.uniformsCount=Mt);var zt=Ct.uniforms;for(dt=0;dt<Mt;++dt)if(et=Se.getActiveUniform(Ne,dt))if(1<et.size)for(var Xt=0;Xt<et.size;++Xt){var un=et.name.replace("[0]","["+Xt+"]");it(zt,new at(un,je.id(un),Se.getUniformLocation(Ne,un),et))}else it(zt,new at(et.name,je.id(et.name),Se.getUniformLocation(Ne,et.name),et));for(Mt=Se.getProgramParameter(Ne,35721),Je.profile&&(Ct.stats.attributesCount=Mt),Ct=Ct.attributes,dt=0;dt<Mt;++dt)(et=Se.getActiveAttrib(Ne,dt))&&it(Ct,new at(et.name,je.id(et.name),Se.getAttribLocation(Ne,et.name),et))}var Wt={},gt={},At={},Zt=[],Et=0;return Je.profile&&(qe.getMaxUniformsCount=function(){var Ct=0;return Zt.forEach(function(Ne){Ne.stats.uniformsCount>Ct&&(Ct=Ne.stats.uniformsCount)}),Ct},qe.getMaxAttributesCount=function(){var Ct=0;return Zt.forEach(function(Ne){Ne.stats.attributesCount>Ct&&(Ct=Ne.stats.attributesCount)}),Ct}),{clear:function(){var Ct=Se.deleteShader.bind(Se);ge(Wt).forEach(Ct),Wt={},ge(gt).forEach(Ct),gt={},Zt.forEach(function(Ne){Se.deleteProgram(Ne.program)}),Zt.length=0,At={},qe.shaderCount=0},program:function(Ct,Ne,et,dt){var Mt=At[Ne];Mt||(Mt=At[Ne]={});var zt=Mt[Ct];if(zt&&(zt.refCount++,!dt))return zt;var Xt=new vt(Ne,Ct);return qe.shaderCount++,Ut(Xt,et,dt),zt||(Mt[Ct]=Xt),Zt.push(Xt),q(Xt,{destroy:function(){if(Xt.refCount--,0>=Xt.refCount){Se.deleteProgram(Xt.program);var un=Zt.indexOf(Xt);Zt.splice(un,1),qe.shaderCount--}0>=Mt[Xt.vertId].refCount&&(Se.deleteShader(gt[Xt.vertId]),delete gt[Xt.vertId],delete At[Xt.fragId][Xt.vertId]),Object.keys(At[Xt.fragId]).length||(Se.deleteShader(Wt[Xt.fragId]),delete Wt[Xt.fragId],delete At[Xt.fragId])}})},restore:function(){Wt={},gt={};for(var Ct=0;Ct<Zt.length;++Ct)Ut(Zt[Ct],null,Zt[Ct].attributes.map(function(Ne){return[Ne.location,Ne.name]}))},shader:yt,frag:-1,vert:-1}}(Et,et,dt,Se),Rn=function I(Se,je,qe,Je,at,it,yt){function vt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Ut(hn,Jn){hn.internalformat=Jn.internalformat,hn.format=Jn.format,hn.type=Jn.type,hn.compressed=Jn.compressed,hn.premultiplyAlpha=Jn.premultiplyAlpha,hn.flipY=Jn.flipY,hn.unpackAlignment=Jn.unpackAlignment,hn.colorSpace=Jn.colorSpace,hn.width=Jn.width,hn.height=Jn.height,hn.channels=Jn.channels}function Wt(hn,Jn){if("object"==typeof Jn&&Jn){"premultiplyAlpha"in Jn&&(hn.premultiplyAlpha=Jn.premultiplyAlpha),"flipY"in Jn&&(hn.flipY=Jn.flipY),"alignment"in Jn&&(hn.unpackAlignment=Jn.alignment),"colorSpace"in Jn&&(hn.colorSpace=rr[Jn.colorSpace]),"type"in Jn&&(hn.type=er[Jn.type]);var jt=hn.width,fn=hn.height,Sn=hn.channels,Kn=!1;"shape"in Jn?(jt=Jn.shape[0],fn=Jn.shape[1],3===Jn.shape.length&&(Sn=Jn.shape[2],Kn=!0)):("radius"in Jn&&(jt=fn=Jn.radius),"width"in Jn&&(jt=Jn.width),"height"in Jn&&(fn=Jn.height),"channels"in Jn&&(Sn=Jn.channels,Kn=!0)),hn.width=0|jt,hn.height=0|fn,hn.channels=0|Sn,jt=!1,"format"in Jn&&(fn=hn.internalformat=Ir[jt=Jn.format],hn.format=br[fn],jt in er&&!("type"in Jn)&&(hn.type=er[jt]),jt in Or&&(hn.compressed=!0),jt=!0),!Kn&&jt?hn.channels=Ke[hn.format]:Kn&&!jt&&hn.channels!==He[hn.format]&&(hn.format=hn.internalformat=He[hn.channels])}}function gt(hn){Se.pixelStorei(37440,hn.flipY),Se.pixelStorei(37441,hn.premultiplyAlpha),Se.pixelStorei(37443,hn.colorSpace),Se.pixelStorei(3317,hn.unpackAlignment)}function At(){vt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Zt(hn,Jn){var jt=null;if(M(Jn)?jt=Jn:Jn&&(Wt(hn,Jn),"x"in Jn&&(hn.xOffset=0|Jn.x),"y"in Jn&&(hn.yOffset=0|Jn.y),M(Jn.data)&&(jt=Jn.data)),Jn.copy){var fn=at.viewportWidth,Sn=at.viewportHeight;hn.width=hn.width||fn-hn.xOffset,hn.height=hn.height||Sn-hn.yOffset,hn.needsCopy=!0}else if(jt){if(xe(jt))hn.channels=hn.channels||4,hn.data=jt,"type"in Jn||5121!==hn.type||(hn.type=0|Ce[Object.prototype.toString.call(jt)]);else if(_(jt)){switch(hn.channels=hn.channels||4,Sn=(fn=jt).length,hn.type){case 5121:case 5123:case 5125:case 5126:(Sn=de.allocType(hn.type,Sn)).set(fn),hn.data=Sn;break;case 36193:hn.data=h(fn)}hn.alignment=1,hn.needsFree=!0}else if(t(jt)){fn=jt.data,Array.isArray(fn)||5121!==hn.type||(hn.type=0|Ce[Object.prototype.toString.call(fn)]);var Kn,Wn,Pn,Un,Cn=jt.stride;3===(Sn=jt.shape).length?(Pn=Sn[2],Un=Cn[2]):Un=Pn=1,Kn=Sn[0],Wn=Sn[1],Sn=Cn[0],Cn=Cn[1],hn.alignment=1,hn.width=Kn,hn.height=Wn,hn.channels=Pn,hn.format=hn.internalformat=He[Pn],hn.needsFree=!0,Kn=Un,jt=jt.offset;for(var On=de.allocType(36193===hn.type?5126:hn.type,(Pn=hn.width)*(Un=hn.height)*(Wn=hn.channels)),Fn=0,Gn=0;Gn<Un;++Gn)for(var or=0;or<Pn;++or)for(var sr=0;sr<Wn;++sr)On[Fn++]=fn[Sn*or+Cn*Gn+Kn*sr+jt];A(hn,On)}else if(k(jt)===st||k(jt)===Ve||k(jt)===$e)hn.element=k(jt)===st||k(jt)===Ve?jt:jt.canvas,hn.width=hn.element.width,hn.height=hn.element.height,hn.channels=4;else if(k(jt)===Qe)hn.element=jt,hn.width=jt.width,hn.height=jt.height,hn.channels=4;else if(k(jt)===tt)hn.element=jt,hn.width=jt.naturalWidth,hn.height=jt.naturalHeight,hn.channels=4;else if(k(jt)===ut)hn.element=jt,hn.width=jt.videoWidth,hn.height=jt.videoHeight,hn.channels=4;else if(s(jt)){for(fn=hn.width||jt[0].length,Sn=hn.height||jt.length,Cn=hn.channels,Cn=d(jt[0][0])?Cn||jt[0][0].length:Cn||1,Kn=_e.shape(jt),Pn=1,Un=0;Un<Kn.length;++Un)Pn*=Kn[Un];Pn=de.allocType(36193===hn.type?5126:hn.type,Pn),_e.flatten(jt,Kn,"",Pn),A(hn,Pn),hn.alignment=1,hn.width=fn,hn.height=Sn,hn.channels=Cn,hn.format=hn.internalformat=He[Cn],hn.needsFree=!0}}else hn.width=hn.width||1,hn.height=hn.height||1,hn.channels=hn.channels||4}function Et(hn,Jn,jt,fn,Sn){var Kn=hn.element,Wn=hn.data,Pn=hn.internalformat,Un=hn.format,Cn=hn.type,On=hn.width,Fn=hn.height;gt(hn),Kn?Se.texSubImage2D(Jn,Sn,jt,fn,Un,Cn,Kn):hn.compressed?Se.compressedTexSubImage2D(Jn,Sn,jt,fn,Pn,On,Fn,Wn):hn.needsCopy?(Je(),Se.copyTexSubImage2D(Jn,Sn,jt,fn,hn.xOffset,hn.yOffset,On,Fn)):Se.texSubImage2D(Jn,Sn,jt,fn,On,Fn,Un,Cn,Wn)}function Ct(){return ar.pop()||new At}function Ne(hn){hn.needsFree&&de.freeType(hn.data),At.call(hn),ar.push(hn)}function et(){vt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function dt(hn,Jn,jt){var fn=hn.images[0]=Ct();hn.mipmask=1,fn.width=hn.width=Jn,fn.height=hn.height=jt,fn.channels=hn.channels=4}function Mt(hn,Jn){var jt=null;if(M(Jn))Ut(jt=hn.images[0]=Ct(),hn),Zt(jt,Jn),hn.mipmask=1;else if(Wt(hn,Jn),Array.isArray(Jn.mipmap))for(var fn=Jn.mipmap,Sn=0;Sn<fn.length;++Sn)Ut(jt=hn.images[Sn]=Ct(),hn),jt.width>>=Sn,jt.height>>=Sn,Zt(jt,fn[Sn]),hn.mipmask|=1<<Sn;else Ut(jt=hn.images[0]=Ct(),hn),Zt(jt,Jn),hn.mipmask=1;Ut(hn,hn.images[0])}function zt(hn,Jn){for(var jt=hn.images,fn=0;fn<jt.length&&jt[fn];++fn){var Sn=jt[fn],Kn=Jn,Wn=fn,Pn=Sn.element,Un=Sn.data,Cn=Sn.internalformat,On=Sn.format,Fn=Sn.type,Gn=Sn.width,or=Sn.height;gt(Sn),Pn?Se.texImage2D(Kn,Wn,On,On,Fn,Pn):Sn.compressed?Se.compressedTexImage2D(Kn,Wn,Cn,Gn,or,0,Un):Sn.needsCopy?(Je(),Se.copyTexImage2D(Kn,Wn,On,Sn.xOffset,Sn.yOffset,Gn,or,0)):Se.texImage2D(Kn,Wn,On,Gn,or,0,On,Fn,Un||null)}}function Xt(){var hn=si.pop()||new et;vt.call(hn);for(var Jn=hn.mipmask=0;16>Jn;++Jn)hn.images[Jn]=null;return hn}function un(hn){for(var Jn=hn.images,jt=0;jt<Jn.length;++jt)Jn[jt]&&Ne(Jn[jt]),Jn[jt]=null;si.push(hn)}function Qt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function kn(hn,Jn){"min"in Jn&&(hn.minFilter=Hn[Jn.min],0<=Ue.indexOf(hn.minFilter)&&!("faces"in Jn)&&(hn.genMipmaps=!0)),"mag"in Jn&&(hn.magFilter=Xn[Jn.mag]);var jt=hn.wrapS,fn=hn.wrapT;if("wrap"in Jn){var Sn=Jn.wrap;"string"==typeof Sn?jt=fn=Rn[Sn]:Array.isArray(Sn)&&(jt=Rn[Sn[0]],fn=Rn[Sn[1]])}else"wrapS"in Jn&&(jt=Rn[Jn.wrapS]),"wrapT"in Jn&&(fn=Rn[Jn.wrapT]);if(hn.wrapS=jt,hn.wrapT=fn,"anisotropic"in Jn&&(hn.anisotropic=Jn.anisotropic),"mipmap"in Jn){switch(jt=!1,typeof Jn.mipmap){case"string":hn.mipmapHint=Mn[Jn.mipmap],jt=hn.genMipmaps=!0;break;case"boolean":jt=hn.genMipmaps=Jn.mipmap;break;case"object":hn.genMipmaps=!1,jt=!0}!jt||"min"in Jn||(hn.minFilter=9984)}}function qn(hn,Jn){Se.texParameteri(Jn,10241,hn.minFilter),Se.texParameteri(Jn,10240,hn.magFilter),Se.texParameteri(Jn,10242,hn.wrapS),Se.texParameteri(Jn,10243,hn.wrapT),je.ext_texture_filter_anisotropic&&Se.texParameteri(Jn,34046,hn.anisotropic),hn.genMipmaps&&(Se.hint(33170,hn.mipmapHint),Se.generateMipmap(Jn))}function gn(hn){vt.call(this),this.mipmask=0,this.internalformat=6408,this.id=ri++,this.refCount=1,this.target=hn,this.texture=Se.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Qt,yt.profile&&(this.stats={size:0})}function sn(hn){Se.activeTexture(33984),Se.bindTexture(hn.target,hn.texture)}function vn(){var hn=vr[0];hn?Se.bindTexture(hn.target,hn.texture):Se.bindTexture(3553,null)}function pn(hn){var Jn=hn.texture,jt=hn.unit,fn=hn.target;0<=jt&&(Se.activeTexture(33984+jt),Se.bindTexture(fn,null),vr[jt]=null),Se.deleteTexture(Jn),hn.texture=null,hn.params=null,hn.pixels=null,hn.refCount=0,delete Cr[hn.id],it.textureCount--}var Mn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Rn={repeat:10497,clamp:33071,mirror:33648},Xn={nearest:9728,linear:9729},Hn=q({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Xn),rr={none:0,browser:37444},er={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Ir={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Or={};je.ext_srgb&&(Ir.srgb=35904,Ir.srgba=35906),je.oes_texture_float&&(er.float32=er.float=5126),je.oes_texture_half_float&&(er.float16=er["half float"]=36193),je.webgl_depth_texture&&(q(Ir,{depth:6402,"depth stencil":34041}),q(er,{uint16:5123,uint32:5125,"depth stencil":34042})),je.webgl_compressed_texture_s3tc&&q(Or,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),je.webgl_compressed_texture_atc&&q(Or,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),je.webgl_compressed_texture_pvrtc&&q(Or,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),je.webgl_compressed_texture_etc1&&(Or["rgb etc1"]=36196);var ni=Array.prototype.slice.call(Se.getParameter(34467));Object.keys(Or).forEach(function(hn){var Jn=Or[hn];0<=ni.indexOf(Jn)&&(Ir[hn]=Jn)});var Br=Object.keys(Ir);qe.textureFormats=Br;var Dr=[];Object.keys(Ir).forEach(function(hn){Dr[Ir[hn]]=hn});var Rr=[];Object.keys(er).forEach(function(hn){Rr[er[hn]]=hn});var yi=[];Object.keys(Xn).forEach(function(hn){yi[Xn[hn]]=hn});var $n=[];Object.keys(Hn).forEach(function(hn){$n[Hn[hn]]=hn});var Mr=[];Object.keys(Rn).forEach(function(hn){Mr[Rn[hn]]=hn});var br=Br.reduce(function(hn,Jn){var jt=Ir[Jn];return hn[jt]=6409===jt||6406===jt||6409===jt||6410===jt||6402===jt||34041===jt||je.ext_srgb&&(35904===jt||35906===jt)?jt:32855===jt||0<=Jn.indexOf("rgba")?6408:6407,hn},{}),ar=[],si=[],ri=0,Cr={},Pr=qe.maxTextureUnits,vr=Array(Pr).map(function(){return null});return q(gn.prototype,{bind:function(){this.bindCount+=1;var hn=this.unit;if(0>hn){for(var Jn=0;Jn<Pr;++Jn){var jt=vr[Jn];if(jt){if(0<jt.bindCount)continue;jt.unit=-1}vr[Jn]=this,hn=Jn;break}yt.profile&&it.maxTextureUnits<hn+1&&(it.maxTextureUnits=hn+1),this.unit=hn,Se.activeTexture(33984+hn),Se.bindTexture(this.target,this.texture)}return hn},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&pn(this)}}),yt.profile&&(it.getTotalTextureSize=function(){var hn=0;return Object.keys(Cr).forEach(function(Jn){hn+=Cr[Jn].stats.size}),hn}),{create2D:function(hn,Jn){function jt(Sn,Kn){var Wn=fn.texInfo;Qt.call(Wn);var Pn=Xt();return"number"==typeof Sn?dt(Pn,0|Sn,"number"==typeof Kn?0|Kn:0|Sn):Sn?(kn(Wn,Sn),Mt(Pn,Sn)):dt(Pn,1,1),Wn.genMipmaps&&(Pn.mipmask=(Pn.width<<1)-1),fn.mipmask=Pn.mipmask,Ut(fn,Pn),fn.internalformat=Pn.internalformat,jt.width=Pn.width,jt.height=Pn.height,sn(fn),zt(Pn,3553),qn(Wn,3553),vn(),un(Pn),yt.profile&&(fn.stats.size=E(fn.internalformat,fn.type,Pn.width,Pn.height,Wn.genMipmaps,!1)),jt.format=Dr[fn.internalformat],jt.type=Rr[fn.type],jt.mag=yi[Wn.magFilter],jt.min=$n[Wn.minFilter],jt.wrapS=Mr[Wn.wrapS],jt.wrapT=Mr[Wn.wrapT],jt}var fn=new gn(3553);return Cr[fn.id]=fn,it.textureCount++,jt(hn,Jn),jt.subimage=function(Sn,Kn,Wn,Pn){Kn|=0,Wn|=0,Pn|=0;var Un=Ct();return Ut(Un,fn),Un.width=0,Un.height=0,Zt(Un,Sn),Un.width=Un.width||(fn.width>>Pn)-Kn,Un.height=Un.height||(fn.height>>Pn)-Wn,sn(fn),Et(Un,3553,Kn,Wn,Pn),vn(),Ne(Un),jt},jt.resize=function(Sn,Kn){var Wn=0|Sn,Pn=0|Kn||Wn;if(Wn===fn.width&&Pn===fn.height)return jt;jt.width=fn.width=Wn,jt.height=fn.height=Pn,sn(fn);for(var Un=0;fn.mipmask>>Un;++Un){var Cn=Wn>>Un,On=Pn>>Un;if(!Cn||!On)break;Se.texImage2D(3553,Un,fn.format,Cn,On,0,fn.format,fn.type,null)}return vn(),yt.profile&&(fn.stats.size=E(fn.internalformat,fn.type,Wn,Pn,!1,!1)),jt},jt._reglType="texture2d",jt._texture=fn,yt.profile&&(jt.stats=fn.stats),jt.destroy=function(){fn.decRef()},jt},createCube:function(hn,Jn,jt,fn,Sn,Kn){function Wn(Cn,On,Fn,Gn,or,sr){var pr,yr=Pn.texInfo;for(Qt.call(yr),pr=0;6>pr;++pr)Un[pr]=Xt();if("number"!=typeof Cn&&Cn){if("object"==typeof Cn)if(On)Mt(Un[0],Cn),Mt(Un[1],On),Mt(Un[2],Fn),Mt(Un[3],Gn),Mt(Un[4],or),Mt(Un[5],sr);else if(kn(yr,Cn),Wt(Pn,Cn),"faces"in Cn)for(Cn=Cn.faces,pr=0;6>pr;++pr)Ut(Un[pr],Pn),Mt(Un[pr],Cn[pr]);else for(pr=0;6>pr;++pr)Mt(Un[pr],Cn)}else for(Cn=0|Cn||1,pr=0;6>pr;++pr)dt(Un[pr],Cn,Cn);for(Ut(Pn,Un[0]),Pn.mipmask=yr.genMipmaps?(Un[0].width<<1)-1:Un[0].mipmask,Pn.internalformat=Un[0].internalformat,Wn.width=Un[0].width,Wn.height=Un[0].height,sn(Pn),pr=0;6>pr;++pr)zt(Un[pr],34069+pr);for(qn(yr,34067),vn(),yt.profile&&(Pn.stats.size=E(Pn.internalformat,Pn.type,Wn.width,Wn.height,yr.genMipmaps,!0)),Wn.format=Dr[Pn.internalformat],Wn.type=Rr[Pn.type],Wn.mag=yi[yr.magFilter],Wn.min=$n[yr.minFilter],Wn.wrapS=Mr[yr.wrapS],Wn.wrapT=Mr[yr.wrapT],pr=0;6>pr;++pr)un(Un[pr]);return Wn}var Pn=new gn(34067);Cr[Pn.id]=Pn,it.cubeCount++;var Un=Array(6);return Wn(hn,Jn,jt,fn,Sn,Kn),Wn.subimage=function(Cn,On,Fn,Gn,or){Fn|=0,Gn|=0,or|=0;var sr=Ct();return Ut(sr,Pn),sr.width=0,sr.height=0,Zt(sr,On),sr.width=sr.width||(Pn.width>>or)-Fn,sr.height=sr.height||(Pn.height>>or)-Gn,sn(Pn),Et(sr,34069+Cn,Fn,Gn,or),vn(),Ne(sr),Wn},Wn.resize=function(Cn){if((Cn|=0)!==Pn.width){Wn.width=Pn.width=Cn,Wn.height=Pn.height=Cn,sn(Pn);for(var On=0;6>On;++On)for(var Fn=0;Pn.mipmask>>Fn;++Fn)Se.texImage2D(34069+On,Fn,Pn.format,Cn>>Fn,Cn>>Fn,0,Pn.format,Pn.type,null);return vn(),yt.profile&&(Pn.stats.size=E(Pn.internalformat,Pn.type,Wn.width,Wn.height,!1,!0)),Wn}},Wn._reglType="textureCube",Wn._texture=Pn,yt.profile&&(Wn.stats=Pn.stats),Wn.destroy=function(){Pn.decRef()},Wn},clear:function(){for(var hn=0;hn<Pr;++hn)Se.activeTexture(33984+hn),Se.bindTexture(3553,null),vr[hn]=null;ge(Cr).forEach(pn),it.cubeCount=0,it.textureCount=0},getTexture:function(hn){return null},restore:function(){for(var hn=0;hn<Pr;++hn){var Jn=vr[hn];Jn&&(Jn.bindCount=0,Jn.unit=-1,vr[hn]=null)}ge(Cr).forEach(function(jt){jt.texture=Se.createTexture(),Se.bindTexture(jt.target,jt.texture);for(var fn=0;32>fn;++fn)if(0!=(jt.mipmask&1<<fn))if(3553===jt.target)Se.texImage2D(3553,fn,jt.internalformat,jt.width>>fn,jt.height>>fn,0,jt.internalformat,jt.type,null);else for(var Sn=0;6>Sn;++Sn)Se.texImage2D(34069+Sn,fn,jt.internalformat,jt.width>>fn,jt.height>>fn,0,jt.internalformat,jt.type,null);qn(jt.texInfo,jt.target)})},refresh:function(){for(var hn=0;hn<Pr;++hn){var Jn=vr[hn];Jn&&(Jn.bindCount=0,Jn.unit=-1,vr[hn]=null),Se.activeTexture(33984+hn),Se.bindTexture(3553,null),Se.bindTexture(34067,null)}}}}(Et,zt,gn,function(){rr.procs.poll()},qn,dt,Se),Xn=function(Se,je,qe,Je,at){function it(At){this.id=Wt++,this.refCount=1,this.renderbuffer=At,this.format=32854,this.height=this.width=0,at.profile&&(this.stats={size:0})}function yt(At){var Zt=At.renderbuffer;Se.bindRenderbuffer(36161,null),Se.deleteRenderbuffer(Zt),At.renderbuffer=null,At.refCount=0,delete gt[At.id],Je.renderbufferCount--}var vt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};je.ext_srgb&&(vt.srgba=35907),je.ext_color_buffer_half_float&&(vt.rgba16f=34842,vt.rgb16f=34843),je.webgl_color_buffer_float&&(vt.rgba32f=34836);var Ut=[];Object.keys(vt).forEach(function(At){Ut[vt[At]]=At});var Wt=0,gt={};return it.prototype.decRef=function(){0>=--this.refCount&&yt(this)},at.profile&&(Je.getTotalRenderbufferSize=function(){var At=0;return Object.keys(gt).forEach(function(Zt){At+=gt[Zt].stats.size}),At}),{create:function(At,Zt){function Et(Ne,et){var dt=0,Mt=0,zt=32854;if("object"==typeof Ne&&Ne?("shape"in Ne?(dt=0|(Mt=Ne.shape)[0],Mt=0|Mt[1]):("radius"in Ne&&(dt=Mt=0|Ne.radius),"width"in Ne&&(dt=0|Ne.width),"height"in Ne&&(Mt=0|Ne.height)),"format"in Ne&&(zt=vt[Ne.format])):"number"==typeof Ne?(dt=0|Ne,Mt="number"==typeof et?0|et:dt):Ne||(dt=Mt=1),dt!==Ct.width||Mt!==Ct.height||zt!==Ct.format)return Et.width=Ct.width=dt,Et.height=Ct.height=Mt,Ct.format=zt,Se.bindRenderbuffer(36161,Ct.renderbuffer),Se.renderbufferStorage(36161,zt,dt,Mt),at.profile&&(Ct.stats.size=Rt[Ct.format]*Ct.width*Ct.height),Et.format=Ut[Ct.format],Et}var Ct=new it(Se.createRenderbuffer());return gt[Ct.id]=Ct,Je.renderbufferCount++,Et(At,Zt),Et.resize=function(Ne,et){var dt=0|Ne,Mt=0|et||dt;return dt===Ct.width&&Mt===Ct.height||(Et.width=Ct.width=dt,Et.height=Ct.height=Mt,Se.bindRenderbuffer(36161,Ct.renderbuffer),Se.renderbufferStorage(36161,Ct.format,dt,Mt),at.profile&&(Ct.stats.size=Rt[Ct.format]*Ct.width*Ct.height)),Et},Et._reglType="renderbuffer",Et._renderbuffer=Ct,at.profile&&(Et.stats=Ct.stats),Et.destroy=function(){Ct.decRef()},Et},clear:function(){ge(gt).forEach(yt)},restore:function(){ge(gt).forEach(function(At){At.renderbuffer=Se.createRenderbuffer(),Se.bindRenderbuffer(36161,At.renderbuffer),Se.renderbufferStorage(36161,At.format,At.width,At.height)}),Se.bindRenderbuffer(36161,null)}}}(Et,zt,0,dt,Se),Hn=function C(Se,je,qe,Je,at,it){function yt(gn,sn,vn){this.target=gn,this.texture=sn,this.renderbuffer=vn;var pn=gn=0;sn?(gn=sn.width,pn=sn.height):vn&&(gn=vn.width,pn=vn.height),this.width=gn,this.height=pn}function vt(gn){gn&&(gn.texture&&gn.texture._texture.decRef(),gn.renderbuffer&&gn.renderbuffer._renderbuffer.decRef())}function Ut(gn,sn,vn){gn&&(gn.texture?gn.texture._texture.refCount+=1:gn.renderbuffer._renderbuffer.refCount+=1)}function Wt(gn,sn){sn&&(sn.texture?Se.framebufferTexture2D(36160,gn,sn.target,sn.texture._texture.texture,0):Se.framebufferRenderbuffer(36160,gn,36161,sn.renderbuffer._renderbuffer.renderbuffer))}function gt(gn){var sn=3553,vn=null,pn=null,Mn=gn;return"object"==typeof gn&&(Mn=gn.data,"target"in gn&&(sn=0|gn.target)),"texture2d"===(gn=Mn._reglType)||"textureCube"===gn?vn=Mn:"renderbuffer"===gn&&(pn=Mn,sn=36161),new yt(sn,vn,pn)}function At(gn,sn,vn,pn,Mn){return vn?((gn=Je.create2D({width:gn,height:sn,format:pn,type:Mn}))._texture.refCount=0,new yt(3553,gn,null)):((gn=at.create({width:gn,height:sn,format:pn}))._renderbuffer.refCount=0,new yt(36161,null,gn))}function Zt(gn){return gn&&(gn.texture||gn.renderbuffer)}function Et(gn,sn,vn){gn&&(gn.texture?gn.texture.resize(sn,vn):gn.renderbuffer&&gn.renderbuffer.resize(sn,vn),gn.width=sn,gn.height=vn)}function Ct(){this.id=kn++,qn[this.id]=this,this.framebuffer=Se.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Ne(gn){gn.colorAttachments.forEach(vt),vt(gn.depthAttachment),vt(gn.stencilAttachment),vt(gn.depthStencilAttachment)}function et(gn){Se.deleteFramebuffer(gn.framebuffer),gn.framebuffer=null,it.framebufferCount--,delete qn[gn.id]}function dt(gn){var sn;Se.bindFramebuffer(36160,gn.framebuffer);var vn=gn.colorAttachments;for(sn=0;sn<vn.length;++sn)Wt(36064+sn,vn[sn]);for(sn=vn.length;sn<qe.maxColorAttachments;++sn)Se.framebufferTexture2D(36160,36064+sn,3553,null,0);Se.framebufferTexture2D(36160,33306,3553,null,0),Se.framebufferTexture2D(36160,36096,3553,null,0),Se.framebufferTexture2D(36160,36128,3553,null,0),Wt(36096,gn.depthAttachment),Wt(36128,gn.stencilAttachment),Wt(33306,gn.depthStencilAttachment),Se.checkFramebufferStatus(36160),Se.isContextLost(),Se.bindFramebuffer(36160,zt.next?zt.next.framebuffer:null),zt.cur=zt.next,Se.getError()}function Mt(gn,sn){function vn(Mn,Rn){var Xn,Hn=0,rr=0,er=!0,Ir=!0;Xn=null;var Or=!0,ni="rgba",Br="uint8",Dr=1,Rr=null,yi=null,$n=null,Mr=!1;"number"==typeof Mn?(Hn=0|Mn,rr=0|Rn||Hn):Mn?("shape"in Mn?(Hn=(rr=Mn.shape)[0],rr=rr[1]):("radius"in Mn&&(Hn=rr=Mn.radius),"width"in Mn&&(Hn=Mn.width),"height"in Mn&&(rr=Mn.height)),("color"in Mn||"colors"in Mn)&&(Xn=Mn.color||Mn.colors,Array.isArray(Xn)),Xn||("colorCount"in Mn&&(Dr=0|Mn.colorCount),"colorTexture"in Mn&&(Or=!!Mn.colorTexture,ni="rgba4"),"colorType"in Mn&&(Br=Mn.colorType,!Or)&&("half float"===Br||"float16"===Br?ni="rgba16f":"float"!==Br&&"float32"!==Br||(ni="rgba32f")),"colorFormat"in Mn&&(0<=Xt.indexOf(ni=Mn.colorFormat)?Or=!0:0<=un.indexOf(ni)&&(Or=!1))),("depthTexture"in Mn||"depthStencilTexture"in Mn)&&(Mr=!(!Mn.depthTexture&&!Mn.depthStencilTexture)),"depth"in Mn&&("boolean"==typeof Mn.depth?er=Mn.depth:(Rr=Mn.depth,Ir=!1)),"stencil"in Mn&&("boolean"==typeof Mn.stencil?Ir=Mn.stencil:(yi=Mn.stencil,er=!1)),"depthStencil"in Mn&&("boolean"==typeof Mn.depthStencil?er=Ir=Mn.depthStencil:($n=Mn.depthStencil,Ir=er=!1))):Hn=rr=1;var br=null,ar=null,si=null,ri=null;if(Array.isArray(Xn))br=Xn.map(gt);else if(Xn)br=[gt(Xn)];else for(br=Array(Dr),Xn=0;Xn<Dr;++Xn)br[Xn]=At(Hn,rr,Or,ni,Br);for(Hn=Hn||br[0].width,rr=rr||br[0].height,Rr?ar=gt(Rr):er&&!Ir&&(ar=At(Hn,rr,Mr,"depth","uint32")),yi?si=gt(yi):Ir&&!er&&(si=At(Hn,rr,!1,"stencil","uint8")),$n?ri=gt($n):!Rr&&!yi&&Ir&&er&&(ri=At(Hn,rr,Mr,"depth stencil","depth stencil")),er=null,Xn=0;Xn<br.length;++Xn)Ut(br[Xn]),br[Xn]&&br[Xn].texture&&(Ir=lt[br[Xn].texture._texture.format]*Ft[br[Xn].texture._texture.type],null===er&&(er=Ir));return Ut(ar),Ut(si),Ut(ri),Ne(pn),pn.width=Hn,pn.height=rr,pn.colorAttachments=br,pn.depthAttachment=ar,pn.stencilAttachment=si,pn.depthStencilAttachment=ri,vn.color=br.map(Zt),vn.depth=Zt(ar),vn.stencil=Zt(si),vn.depthStencil=Zt(ri),vn.width=pn.width,vn.height=pn.height,dt(pn),vn}var pn=new Ct;return it.framebufferCount++,vn(gn,sn),q(vn,{resize:function(Mn,Rn){var Xn=Math.max(0|Mn,1),Hn=Math.max(0|Rn||Xn,1);if(Xn===pn.width&&Hn===pn.height)return vn;for(var rr=pn.colorAttachments,er=0;er<rr.length;++er)Et(rr[er],Xn,Hn);return Et(pn.depthAttachment,Xn,Hn),Et(pn.stencilAttachment,Xn,Hn),Et(pn.depthStencilAttachment,Xn,Hn),pn.width=vn.width=Xn,pn.height=vn.height=Hn,dt(pn),vn},_reglType:"framebuffer",_framebuffer:pn,destroy:function(){et(pn),Ne(pn)},use:function(Mn){zt.setFBO({framebuffer:vn},Mn)}})}var zt={cur:null,next:null,dirty:!1,setFBO:null},Xt=["rgba"],un=["rgba4","rgb565","rgb5 a1"];je.ext_srgb&&un.push("srgba"),je.ext_color_buffer_half_float&&un.push("rgba16f","rgb16f"),je.webgl_color_buffer_float&&un.push("rgba32f");var Qt=["uint8"];je.oes_texture_half_float&&Qt.push("half float","float16"),je.oes_texture_float&&Qt.push("float","float32");var kn=0,qn={};return q(zt,{getFramebuffer:function(gn){return"function"==typeof gn&&"framebuffer"===gn._reglType&&(gn=gn._framebuffer)instanceof Ct?gn:null},create:Mt,createCube:function(gn){function sn(pn){var Mn,Rn={color:null},Xn=0,Hn=null;Mn="rgba";var rr="uint8",er=1;if("number"==typeof pn?Xn=0|pn:pn?("shape"in pn?Xn=pn.shape[0]:("radius"in pn&&(Xn=0|pn.radius),"width"in pn?Xn=0|pn.width:"height"in pn&&(Xn=0|pn.height)),("color"in pn||"colors"in pn)&&(Hn=pn.color||pn.colors,Array.isArray(Hn)),Hn||("colorCount"in pn&&(er=0|pn.colorCount),"colorType"in pn&&(rr=pn.colorType),"colorFormat"in pn&&(Mn=pn.colorFormat)),"depth"in pn&&(Rn.depth=pn.depth),"stencil"in pn&&(Rn.stencil=pn.stencil),"depthStencil"in pn&&(Rn.depthStencil=pn.depthStencil)):Xn=1,Hn)if(Array.isArray(Hn))for(pn=[],Mn=0;Mn<Hn.length;++Mn)pn[Mn]=Hn[Mn];else pn=[Hn];else for(pn=Array(er),Hn={radius:Xn,format:Mn,type:rr},Mn=0;Mn<er;++Mn)pn[Mn]=Je.createCube(Hn);for(Rn.color=Array(pn.length),Mn=0;Mn<pn.length;++Mn)er=pn[Mn],Xn=Xn||er.width,Rn.color[Mn]={target:34069,data:pn[Mn]};for(Mn=0;6>Mn;++Mn){for(er=0;er<pn.length;++er)Rn.color[er].target=34069+Mn;0<Mn&&(Rn.depth=vn[0].depth,Rn.stencil=vn[0].stencil,Rn.depthStencil=vn[0].depthStencil),vn[Mn]?vn[Mn](Rn):vn[Mn]=Mt(Rn)}return q(sn,{width:Xn,height:Xn,color:pn})}var vn=Array(6);return sn(gn),q(sn,{faces:vn,resize:function(pn){var Mn=0|pn;if(Mn===sn.width)return sn;var Rn=sn.color;for(pn=0;pn<Rn.length;++pn)Rn[pn].resize(Mn);for(pn=0;6>pn;++pn)vn[pn].resize(Mn);return sn.width=sn.height=Mn,sn},_reglType:"framebufferCube",destroy:function(){vn.forEach(function(pn){pn.destroy()})}})},clear:function(){ge(qn).forEach(et)},restore:function(){zt.cur=null,zt.next=null,zt.dirty=!0,ge(qn).forEach(function(gn){gn.framebuffer=Se.createFramebuffer(),dt(gn)})}})}(Et,zt,gn,Rn,Xn,dt),rr=G(Et,et,zt,gn,sn,vn,0,Hn,{},pn,Mn,Qt,qn,Xt,Mt,Se),er=(et=function L(Se,je,qe,Je,at,it,yt){function vt(Ut){var Wt;Wt=null===je.next?5121:je.next.colorAttachments[0].texture._texture.type;var gt=0,At=0,Zt=Je.framebufferWidth,Et=Je.framebufferHeight,Ct=null;return xe(Ut)?Ct=Ut:Ut&&(gt=0|Ut.x,At=0|Ut.y,Zt=0|(Ut.width||Je.framebufferWidth-gt),Et=0|(Ut.height||Je.framebufferHeight-At),Ct=Ut.data||null),qe(),Ut=Zt*Et*4,Ct||(5121===Wt?Ct=new Uint8Array(Ut):5126===Wt&&(Ct=Ct||new Float32Array(Ut))),Se.pixelStorei(3333,4),Se.readPixels(gt,At,Zt,Et,6408,Wt,Ct),Ct}return function(Ut){return Ut&&"framebuffer"in Ut?(je.setFBO({framebuffer:(Wt=Ut).framebuffer},function(){gt=vt(Wt)}),gt):vt(Ut);var Wt,gt}}(Et,Hn,rr.procs.poll,qn),rr.next),Ir=Et.canvas,Or=[],ni=[],Br=[],Dr=[Se.onDestroy],Rr=null;Ir&&(Ir.addEventListener("webglcontextlost",at,!1),Ir.addEventListener("webglcontextrestored",it,!1));var yi=Hn.setFBO=yt({framebuffer:te.define.call(null,1,"framebuffer")});return At(),Ct=q(yt,{clear:function($n){if("framebuffer"in $n)if($n.framebuffer&&"framebufferCube"===$n.framebuffer_reglType)for(var Mr=0;6>Mr;++Mr)yi(q({framebuffer:$n.framebuffer.faces[Mr]},$n),vt);else yi($n,vt);else vt(0,$n)},prop:te.define.bind(null,1),context:te.define.bind(null,2),this:te.define.bind(null,3),draw:yt({}),buffer:function($n){return sn.create($n,34962,!1,!1)},elements:function($n){return vn.create($n,!1)},texture:Rn.create2D,cube:Rn.createCube,renderbuffer:Xn.create,framebuffer:Hn.create,framebufferCube:Hn.createCube,vao:pn.createVAO,attributes:Ct,frame:Ut,on:function($n,Mr){var br;switch($n){case"frame":return Ut(Mr);case"lost":br=ni;break;case"restore":br=Br;break;case"destroy":br=Dr}return br.push(Mr),{cancel:function(){for(var ar=0;ar<br.length;++ar)if(br[ar]===Mr){br[ar]=br[br.length-1],br.pop();break}}}},limits:gn,hasExtension:function($n){return 0<=gn.extensions.indexOf($n.toLowerCase())},read:et,destroy:function(){Or.length=0,Je(),Ir&&(Ir.removeEventListener("webglcontextlost",at),Ir.removeEventListener("webglcontextrestored",it)),Mn.clear(),Hn.clear(),Xn.clear(),pn.clear(),Rn.clear(),vn.clear(),sn.clear(),Xt&&Xt.clear(),Dr.forEach(function($n){$n()})},_gl:Et,_refresh:At,poll:function(){gt(),Xt&&Xt.update()},now:Zt,stats:dt,getCachedCode:function(){return Mt},preloadCachedCode:function($n){Object.entries($n).forEach(function(Mr){Mt[Mr[0]]=Mr[1]})}}),Se.onDone(null,Ct),Ct}},"object"==typeof ae&&void 0!==oe?oe.exports=m():this.createREGL=m()},{}],284:[function(x,oe,ae){var g=x("buffer"),m=g.Buffer;function w(e,r){for(var n in e)r[n]=e[n]}function y(e,r,n){return m(e,r,n)}m.from&&m.alloc&&m.allocUnsafe&&m.allocUnsafeSlow?oe.exports=g:(w(g,ae),ae.Buffer=y),y.prototype=Object.create(m.prototype),w(m,y),y.from=function(e,r,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return m(e,r,n)},y.alloc=function(e,r,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var a=m(e);return void 0!==r?"string"==typeof n?a.fill(r,n):a.fill(r):a.fill(0),a},y.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return m(e)},y.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return g.SlowBuffer(e)}},{buffer:85}],285:[function(x,oe,ae){oe.exports=m;var g=x("events").EventEmitter;function m(){g.call(this)}x("inherits")(m,g),m.Readable=x("readable-stream/lib/_stream_readable.js"),m.Writable=x("readable-stream/lib/_stream_writable.js"),m.Duplex=x("readable-stream/lib/_stream_duplex.js"),m.Transform=x("readable-stream/lib/_stream_transform.js"),m.PassThrough=x("readable-stream/lib/_stream_passthrough.js"),m.finished=x("readable-stream/lib/internal/streams/end-of-stream.js"),m.pipeline=x("readable-stream/lib/internal/streams/pipeline.js"),m.Stream=m,m.prototype.pipe=function(w,y){var e=this;function r(c){w.writable&&!1===w.write(c)&&e.pause&&e.pause()}function n(){e.readable&&e.resume&&e.resume()}e.on("data",r),w.on("drain",n),w._isStdio||y&&!1===y.end||(e.on("end",t),e.on("close",p));var a=!1;function t(){a||(a=!0,w.end())}function p(){a||(a=!0,"function"==typeof w.destroy&&w.destroy())}function u(c){if(i(),0===g.listenerCount(this,"error"))throw c}function i(){e.removeListener("data",r),w.removeListener("drain",n),e.removeListener("end",t),e.removeListener("close",p),e.removeListener("error",u),w.removeListener("error",u),e.removeListener("end",i),e.removeListener("close",i),w.removeListener("close",i)}return e.on("error",u),w.on("error",u),e.on("end",i),e.on("close",i),w.on("close",i),w.emit("pipe",e),w}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(x,oe,ae){"use strict";var g={};function m(y,e,r){r||(r=Error);var n=function(a){var t,p;function u(i,c,f){return a.call(this,"string"==typeof e?e:e(i,c,f))||this}return p=a,(t=u).prototype=Object.create(p.prototype),t.prototype.constructor=t,t.__proto__=p,u}(r);n.prototype.name=r.name,n.prototype.code=y,g[y]=n}function w(y,e){if(Array.isArray(y)){var r=y.length;return y=y.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(y.slice(0,r-1).join(", "),", or ")+y[r-1]:2===r?"one of ".concat(e," ").concat(y[0]," or ").concat(y[1]):"of ".concat(e," ").concat(y[0])}return"of ".concat(e," ").concat(String(y))}m("ERR_INVALID_OPT_VALUE",function(y,e){return'The value "'+e+'" is invalid for option "'+y+'"'},TypeError),m("ERR_INVALID_ARG_TYPE",function(y,e,r){var n,p,i,f;if("string"==typeof e&&"not "===e.substr(0,"not ".length)?(n="must not be",e=e.replace(/^not /,"")):n="must be",i=y,(void 0===f||f>i.length)&&(f=i.length)," argument"===i.substring(f-" argument".length,f))p="The ".concat(y," ").concat(n," ").concat(w(e,"type"));else{var u=function(i,c,f){return"number"!=typeof f&&(f=0),!(f+".".length>i.length)&&-1!==i.indexOf(".",f)}(y)?"property":"argument";p='The "'.concat(y,'" ').concat(u," ").concat(n," ").concat(w(e,"type"))}return p+". Received type ".concat(typeof r)},TypeError),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),m("ERR_METHOD_NOT_IMPLEMENTED",function(y){return"The "+y+" method is not implemented"}),m("ERR_STREAM_PREMATURE_CLOSE","Premature close"),m("ERR_STREAM_DESTROYED",function(y){return"Cannot call "+y+" after a stream was destroyed"}),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),m("ERR_STREAM_WRITE_AFTER_END","write after end"),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_UNKNOWN_ENCODING",function(y){return"Unknown encoding: "+y},TypeError),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),oe.exports.codes=g},{}],287:[function(x,oe,ae){(function(g){(function(){"use strict";var m=Object.keys||function(u){var i=[];for(var c in u)i.push(c);return i};oe.exports=a;var w=x("./_stream_readable"),y=x("./_stream_writable");x("inherits")(a,w);for(var e=m(y.prototype),r=0;r<e.length;r++){var n=e[r];a.prototype[n]||(a.prototype[n]=y.prototype[n])}function a(u){if(!(this instanceof a))return new a(u);w.call(this,u),y.call(this,u),this.allowHalfOpen=!0,u&&(!1===u.readable&&(this.readable=!1),!1===u.writable&&(this.writable=!1),!1===u.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",t)))}function t(){this._writableState.ended||g.nextTick(p,this)}function p(u){u.end()}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(u){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=u,this._writableState.destroyed=u)}})}).call(this)}).call(this,x("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(x,oe,ae){"use strict";oe.exports=m;var g=x("./_stream_transform");function m(w){if(!(this instanceof m))return new m(w);g.call(this,w)}x("inherits")(m,g),m.prototype._transform=function(w,y,e){e(null,w)}},{"./_stream_transform":290,inherits:231}],289:[function(x,oe,ae){(function(g,m){(function(){"use strict";var w;oe.exports=E,E.ReadableState=A,x("events");var a,y=function(H,U){return H.listeners(U).length},e=x("./internal/streams/stream"),r=x("buffer").Buffer,n=m.Uint8Array||function(){},t=x("util");a=t&&t.debuglog?t.debuglog("stream"):function(){};var p,u,i,c=x("./internal/streams/buffer_list"),f=x("./internal/streams/destroy"),l=x("./internal/streams/state").getHighWaterMark,h=x("../errors").codes,d=h.ERR_INVALID_ARG_TYPE,o=h.ERR_STREAM_PUSH_AFTER_EOF,_=h.ERR_METHOD_NOT_IMPLEMENTED,s=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;x("inherits")(E,e);var k=f.errorOrDestroy,M=["error","close","destroy","pause","resume"];function A(H,U,G){w=w||x("./_stream_duplex"),"boolean"!=typeof G&&(G=U instanceof w),this.objectMode=!!(H=H||{}).objectMode,G&&(this.objectMode=this.objectMode||!!H.readableObjectMode),this.highWaterMark=l(this,H,"readableHighWaterMark",G),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==H.emitClose,this.autoDestroy=!!H.autoDestroy,this.destroyed=!1,this.defaultEncoding=H.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,H.encoding&&(p||(p=x("string_decoder/").StringDecoder),this.decoder=new p(H.encoding),this.encoding=H.encoding)}function E(H){if(w=w||x("./_stream_duplex"),!(this instanceof E))return new E(H);this._readableState=new A(H,this,this instanceof w),this.readable=!0,H&&("function"==typeof H.read&&(this._read=H.read),"function"==typeof H.destroy&&(this._destroy=H.destroy)),e.call(this)}function I(H,U,G,ie,q){a("readableAddChunk",U);var ee,se,ue,de,he,te=H._readableState;if(null===U)te.reading=!1,function(se,ue){if(a("onEofChunk"),!ue.ended){if(ue.decoder){var de=ue.decoder.end();de&&de.length&&(ue.buffer.push(de),ue.length+=ue.objectMode?1:de.length)}ue.ended=!0,ue.sync?O(se):(ue.needReadable=!1,ue.emittedReadable||(ue.emittedReadable=!0,D(se)))}}(H,te);else if(q||(se=te,r.isBuffer(he=ue=U)||he instanceof n||"string"==typeof ue||void 0===ue||se.objectMode||(de=new d("chunk",["string","Buffer","Uint8Array"],ue)),ee=de),ee)k(H,ee);else if(te.objectMode||U&&U.length>0)if("string"==typeof U||te.objectMode||Object.getPrototypeOf(U)===r.prototype||(U=function(se){return r.from(se)}(U)),ie)te.endEmitted?k(H,new s):C(H,te,U,!0);else if(te.ended)k(H,new o);else{if(te.destroyed)return!1;te.reading=!1,te.decoder&&!G?(U=te.decoder.write(U),te.objectMode||0!==U.length?C(H,te,U,!1):L(H,te)):C(H,te,U,!1)}else ie||(te.reading=!1,L(H,te));return!te.ended&&(te.length<te.highWaterMark||0===te.length)}function C(H,U,G,ie){U.flowing&&0===U.length&&!U.sync?(U.awaitDrain=0,H.emit("data",G)):(U.length+=U.objectMode?1:G.length,ie?U.buffer.unshift(G):U.buffer.push(G),U.needReadable&&O(H)),L(H,U)}function R(H,U){return H<=0||0===U.length&&U.ended?0:U.objectMode?1:H!=H?U.flowing&&U.length?U.buffer.head.data.length:U.length:(H>U.highWaterMark&&(U.highWaterMark=((G=H)>=1073741824?G=1073741824:(G--,G|=G>>>1,G|=G>>>2,G|=G>>>4,G|=G>>>8,G|=G>>>16,G++),G)),H<=U.length?H:U.ended?U.length:(U.needReadable=!0,0));var G}function O(H){var U=H._readableState;a("emitReadable",U.needReadable,U.emittedReadable),U.needReadable=!1,U.emittedReadable||(a("emitReadable",U.flowing),U.emittedReadable=!0,g.nextTick(D,H))}function D(H){var U=H._readableState;a("emitReadable_",U.destroyed,U.length,U.ended),U.destroyed||!U.length&&!U.ended||(H.emit("readable"),U.emittedReadable=!1),U.needReadable=!U.flowing&&!U.ended&&U.length<=U.highWaterMark,Q(H)}function L(H,U){U.readingMore||(U.readingMore=!0,g.nextTick(B,H,U))}function B(H,U){for(;!U.reading&&!U.ended&&(U.length<U.highWaterMark||U.flowing&&0===U.length);){var G=U.length;if(a("maybeReadMore read 0"),H.read(0),G===U.length)break}U.readingMore=!1}function j(H){var U=H._readableState;U.readableListening=H.listenerCount("readable")>0,U.resumeScheduled&&!U.paused?U.flowing=!0:H.listenerCount("data")>0&&H.resume()}function W(H){a("readable nexttick read 0"),H.read(0)}function Y(H,U){a("resume",U.reading),U.reading||H.read(0),U.resumeScheduled=!1,H.emit("resume"),Q(H),U.flowing&&!U.reading&&H.read(0)}function Q(H){var U=H._readableState;for(a("flow",U.flowing);U.flowing&&null!==H.read(););}function ne(H,U){return 0===U.length?null:(U.objectMode?G=U.buffer.shift():!H||H>=U.length?(G=U.decoder?U.buffer.join(""):1===U.buffer.length?U.buffer.first():U.buffer.concat(U.length),U.buffer.clear()):G=U.buffer.consume(H,U.decoder),G);var G}function X(H){var U=H._readableState;a("endReadable",U.endEmitted),U.endEmitted||(U.ended=!0,g.nextTick($,U,H))}function $(H,U){if(a("endReadableNT",H.endEmitted,H.length),!H.endEmitted&&0===H.length&&(H.endEmitted=!0,U.readable=!1,U.emit("end"),H.autoDestroy)){var G=U._writableState;(!G||G.autoDestroy&&G.finished)&&U.destroy()}}function re(H,U){for(var G=0,ie=H.length;G<ie;G++)if(H[G]===U)return G;return-1}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(H){this._readableState&&(this._readableState.destroyed=H)}}),E.prototype.destroy=f.destroy,E.prototype._undestroy=f.undestroy,E.prototype._destroy=function(H,U){U(H)},E.prototype.push=function(H,U){var G,ie=this._readableState;return ie.objectMode?G=!0:"string"==typeof H&&((U=U||ie.defaultEncoding)!==ie.encoding&&(H=r.from(H,U),U=""),G=!0),I(this,H,U,!1,G)},E.prototype.unshift=function(H){return I(this,H,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(H){p||(p=x("string_decoder/").StringDecoder);var U=new p(H);this._readableState.decoder=U,this._readableState.encoding=this._readableState.decoder.encoding;for(var G=this._readableState.buffer.head,ie="";null!==G;)ie+=U.write(G.data),G=G.next;return this._readableState.buffer.clear(),""!==ie&&this._readableState.buffer.push(ie),this._readableState.length=ie.length,this},E.prototype.read=function(H){a("read",H),H=parseInt(H,10);var U=this._readableState,G=H;if(0!==H&&(U.emittedReadable=!1),0===H&&U.needReadable&&((0!==U.highWaterMark?U.length>=U.highWaterMark:U.length>0)||U.ended))return a("read: emitReadable",U.length,U.ended),0===U.length&&U.ended?X(this):O(this),null;if(0===(H=R(H,U))&&U.ended)return 0===U.length&&X(this),null;var ie,q=U.needReadable;return a("need readable",q),(0===U.length||U.length-H<U.highWaterMark)&&a("length less than watermark",q=!0),U.ended||U.reading?a("reading or ended",q=!1):q&&(a("do read"),U.reading=!0,U.sync=!0,0===U.length&&(U.needReadable=!0),this._read(U.highWaterMark),U.sync=!1,U.reading||(H=R(G,U))),null===(ie=H>0?ne(H,U):null)?(U.needReadable=U.length<=U.highWaterMark,H=0):(U.length-=H,U.awaitDrain=0),0===U.length&&(U.ended||(U.needReadable=!0),G!==H&&U.ended&&X(this)),null!==ie&&this.emit("data",ie),ie},E.prototype._read=function(H){k(this,new _("_read()"))},E.prototype.pipe=function(H,U){var G=this,ie=this._readableState;switch(ie.pipesCount){case 0:ie.pipes=H;break;case 1:ie.pipes=[ie.pipes,H];break;default:ie.pipes.push(H)}ie.pipesCount+=1,a("pipe count=%d opts=%j",ie.pipesCount,U);var q=U&&!1===U.end||H===g.stdout||H===g.stderr?_e:te;function te(){a("onend"),H.end()}ie.endEmitted?g.nextTick(q):G.once("end",q),H.on("unpipe",function ee(Ce,Le){a("onunpipe"),Ce===G&&Le&&!1===Le.hasUnpiped&&(Le.hasUnpiped=!0,a("cleanup"),H.removeListener("close",xe),H.removeListener("finish",ge),H.removeListener("drain",se),H.removeListener("error",he),H.removeListener("unpipe",ee),G.removeListener("end",te),G.removeListener("end",_e),G.removeListener("data",de),ue=!0,!ie.awaitDrain||H._writableState&&!H._writableState.needDrain||se())});var Ce,se=(Ce=G,function(){var Le=Ce._readableState;a("pipeOnDrain",Le.awaitDrain),Le.awaitDrain&&Le.awaitDrain--,0===Le.awaitDrain&&y(Ce,"data")&&(Le.flowing=!0,Q(Ce))});H.on("drain",se);var ue=!1;function de(Ce){a("ondata");var Le=H.write(Ce);a("dest.write",Le),!1===Le&&((1===ie.pipesCount&&ie.pipes===H||ie.pipesCount>1&&-1!==re(ie.pipes,H))&&!ue&&(a("false write response, pause",ie.awaitDrain),ie.awaitDrain++),G.pause())}function he(Ce){a("onerror",Ce),_e(),H.removeListener("error",he),0===y(H,"error")&&k(H,Ce)}function xe(){H.removeListener("finish",ge),_e()}function ge(){a("onfinish"),H.removeListener("close",xe),_e()}function _e(){a("unpipe"),G.unpipe(H)}return G.on("data",de),function(Ce,Le,Ie){if("function"==typeof Ce.prependListener)return Ce.prependListener(Le,Ie);Ce._events&&Ce._events[Le]?Array.isArray(Ce._events[Le])?Ce._events[Le].unshift(Ie):Ce._events[Le]=[Ie,Ce._events[Le]]:Ce.on(Le,Ie)}(H,"error",he),H.once("close",xe),H.once("finish",ge),H.emit("pipe",G),ie.flowing||(a("pipe resume"),G.resume()),H},E.prototype.unpipe=function(H){var U=this._readableState,G={hasUnpiped:!1};if(0===U.pipesCount)return this;if(1===U.pipesCount)return H&&H!==U.pipes||(H||(H=U.pipes),U.pipes=null,U.pipesCount=0,U.flowing=!1,H&&H.emit("unpipe",this,G)),this;if(!H){var ie=U.pipes,q=U.pipesCount;U.pipes=null,U.pipesCount=0,U.flowing=!1;for(var ee=0;ee<q;ee++)ie[ee].emit("unpipe",this,{hasUnpiped:!1});return this}var te=re(U.pipes,H);return-1===te||(U.pipes.splice(te,1),U.pipesCount-=1,1===U.pipesCount&&(U.pipes=U.pipes[0]),H.emit("unpipe",this,G)),this},E.prototype.addListener=E.prototype.on=function(H,U){var G=e.prototype.on.call(this,H,U),ie=this._readableState;return"data"===H?(ie.readableListening=this.listenerCount("readable")>0,!1!==ie.flowing&&this.resume()):"readable"===H&&(ie.endEmitted||ie.readableListening||(ie.readableListening=ie.needReadable=!0,ie.flowing=!1,ie.emittedReadable=!1,a("on readable",ie.length,ie.reading),ie.length?O(this):ie.reading||g.nextTick(W,this))),G},E.prototype.removeListener=function(H,U){var G=e.prototype.removeListener.call(this,H,U);return"readable"===H&&g.nextTick(j,this),G},E.prototype.removeAllListeners=function(H){var U=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==H&&void 0!==H||g.nextTick(j,this),U},E.prototype.resume=function(){var G,H=this._readableState;return H.flowing||(a("resume"),H.flowing=!H.readableListening,this,(G=H).resumeScheduled||(G.resumeScheduled=!0,g.nextTick(Y,this,G))),H.paused=!1,this},E.prototype.pause=function(){return a("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(a("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(H){var U=this,G=this._readableState,ie=!1;for(var q in H.on("end",function(){if(a("wrapped end"),G.decoder&&!G.ended){var te=G.decoder.end();te&&te.length&&U.push(te)}U.push(null)}),H.on("data",function(te){a("wrapped data"),G.decoder&&(te=G.decoder.write(te)),G.objectMode&&null==te||(G.objectMode||te&&te.length)&&(U.push(te)||(ie=!0,H.pause()))}),H)void 0===this[q]&&"function"==typeof H[q]&&(this[q]=function(te){return function(){return H[te].apply(H,arguments)}}(q));for(var ee=0;ee<M.length;ee++)H.on(M[ee],this.emit.bind(this,M[ee]));return this._read=function(te){a("wrapped _read",te),ie&&(ie=!1,H.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===u&&(u=x("./internal/streams/async_iterator")),u(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(H){this._readableState&&(this._readableState.flowing=H)}}),E._fromList=ne,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(H,U){return void 0===i&&(i=x("./internal/streams/from")),i(E,H,U)})}).call(this)}).call(this,x("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(x,oe,ae){"use strict";oe.exports=a;var g=x("../errors").codes,m=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_MULTIPLE_CALLBACK,y=g.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=g.ERR_TRANSFORM_WITH_LENGTH_0,r=x("./_stream_duplex");function n(u,i){var c=this._transformState;c.transforming=!1;var f=c.writecb;if(null===f)return this.emit("error",new w);c.writechunk=null,c.writecb=null,null!=i&&this.push(i),f(u);var l=this._readableState;l.reading=!1,(l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}function a(u){if(!(this instanceof a))return new a(u);r.call(this,u),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&("function"==typeof u.transform&&(this._transform=u.transform),"function"==typeof u.flush&&(this._flush=u.flush)),this.on("prefinish",t)}function t(){var u=this;"function"!=typeof this._flush||this._readableState.destroyed?p(this,null,null):this._flush(function(i,c){p(u,i,c)})}function p(u,i,c){if(i)return u.emit("error",i);if(null!=c&&u.push(c),u._writableState.length)throw new e;if(u._transformState.transforming)throw new y;return u.push(null)}x("inherits")(a,r),a.prototype.push=function(u,i){return this._transformState.needTransform=!1,r.prototype.push.call(this,u,i)},a.prototype._transform=function(u,i,c){c(new m("_transform()"))},a.prototype._write=function(u,i,c){var f=this._transformState;if(f.writecb=c,f.writechunk=u,f.writeencoding=i,!f.transforming){var l=this._readableState;(f.needTransform||l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}},a.prototype._read=function(u){var i=this._transformState;null===i.writechunk||i.transforming?i.needTransform=!0:(i.transforming=!0,this._transform(i.writechunk,i.writeencoding,i.afterTransform))},a.prototype._destroy=function(u,i){r.prototype._destroy.call(this,u,function(c){i(c)})}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(x,oe,ae){(function(g,m){(function(){"use strict";function w(B){var j=this;this.next=null,this.entry=null,this.finish=function(){!function(W,Y,Q){var ne=W.entry;for(W.entry=null;ne;){var X=ne.callback;Y.pendingcb--,X(undefined),ne=ne.next}Y.corkedRequestsFree.next=W}(j,B)}}var y;oe.exports=E,E.WritableState=A;var t,e={deprecate:x("util-deprecate")},r=x("./internal/streams/stream"),n=x("buffer").Buffer,a=m.Uint8Array||function(){},p=x("./internal/streams/destroy"),u=x("./internal/streams/state").getHighWaterMark,i=x("../errors").codes,c=i.ERR_INVALID_ARG_TYPE,f=i.ERR_METHOD_NOT_IMPLEMENTED,l=i.ERR_MULTIPLE_CALLBACK,h=i.ERR_STREAM_CANNOT_PIPE,d=i.ERR_STREAM_DESTROYED,o=i.ERR_STREAM_NULL_VALUES,_=i.ERR_STREAM_WRITE_AFTER_END,s=i.ERR_UNKNOWN_ENCODING,k=p.errorOrDestroy;function M(){}function A(B,j,W){y=y||x("./_stream_duplex"),"boolean"!=typeof W&&(W=j instanceof y),this.objectMode=!!(B=B||{}).objectMode,W&&(this.objectMode=this.objectMode||!!B.writableObjectMode),this.highWaterMark=u(this,B,"writableHighWaterMark",W),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===B.decodeStrings),this.defaultEncoding=B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Q){!function(ne,X){var G,$=ne._writableState,re=$.sync,H=$.writecb;if("function"!=typeof H)throw new l;if((G=$).writing=!1,G.writecb=null,G.length-=G.writelen,G.writelen=0,X)!function(G,ie,q,ee,te){--ie.pendingcb,q?(g.nextTick(te,ee),g.nextTick(L,G,ie),G._writableState.errorEmitted=!0,k(G,ee)):(te(ee),G._writableState.errorEmitted=!0,k(G,ee),L(G,ie))}(ne,$,re,X,H);else{var U=O($)||ne.destroyed;U||$.corked||$.bufferProcessing||!$.bufferedRequest||R(ne,$),re?g.nextTick(C,ne,$,U,H):C(ne,$,U,H)}}(j,Q)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==B.emitClose,this.autoDestroy=!!B.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new w(this)}function E(B){var j=this instanceof(y=y||x("./_stream_duplex"));if(!j&&!t.call(E,this))return new E(B);this._writableState=new A(B,this,j),this.writable=!0,B&&("function"==typeof B.write&&(this._write=B.write),"function"==typeof B.writev&&(this._writev=B.writev),"function"==typeof B.destroy&&(this._destroy=B.destroy),"function"==typeof B.final&&(this._final=B.final)),r.call(this)}function I(B,j,W,Y,Q,ne,X){j.writelen=Y,j.writecb=X,j.writing=!0,j.sync=!0,j.destroyed?j.onwrite(new d("write")):W?B._writev(Q,j.onwrite):B._write(Q,ne,j.onwrite),j.sync=!1}function C(B,j,W,Y){var Q,ne;W||(Q=B,0===(ne=j).length&&ne.needDrain&&(ne.needDrain=!1,Q.emit("drain"))),j.pendingcb--,Y(),L(B,j)}function R(B,j){j.bufferProcessing=!0;var W=j.bufferedRequest;if(B._writev&&W&&W.next){var Q=new Array(j.bufferedRequestCount),ne=j.corkedRequestsFree;ne.entry=W;for(var X=0,$=!0;W;)Q[X]=W,W.isBuf||($=!1),W=W.next,X+=1;Q.allBuffers=$,I(B,j,!0,j.length,Q,"",ne.finish),j.pendingcb++,j.lastBufferedRequest=null,ne.next?(j.corkedRequestsFree=ne.next,ne.next=null):j.corkedRequestsFree=new w(j),j.bufferedRequestCount=0}else{for(;W;){var re=W.chunk;if(I(B,j,!1,j.objectMode?1:re.length,re,W.encoding,W.callback),W=W.next,j.bufferedRequestCount--,j.writing)break}null===W&&(j.lastBufferedRequest=null)}j.bufferedRequest=W,j.bufferProcessing=!1}function O(B){return B.ending&&0===B.length&&null===B.bufferedRequest&&!B.finished&&!B.writing}function D(B,j){B._final(function(W){j.pendingcb--,W&&k(B,W),j.prefinished=!0,B.emit("prefinish"),L(B,j)})}function L(B,j){var Q,ne,W=O(j);if(W&&(Q=B,(ne=j).prefinished||ne.finalCalled||("function"!=typeof Q._final||ne.destroyed?(ne.prefinished=!0,Q.emit("prefinish")):(ne.pendingcb++,ne.finalCalled=!0,g.nextTick(D,Q,ne))),0===j.pendingcb&&(j.finished=!0,B.emit("finish"),j.autoDestroy))){var Y=B._readableState;(!Y||Y.autoDestroy&&Y.endEmitted)&&B.destroy()}return W}x("inherits")(E,r),A.prototype.getBuffer=function(){for(var B=this.bufferedRequest,j=[];B;)j.push(B),B=B.next;return j},function(){try{Object.defineProperty(A.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(B){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(t=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(B){return!!t.call(this,B)||this===E&&B&&B._writableState instanceof A}})):t=function(B){return B instanceof this},E.prototype.pipe=function(){k(this,new h)},E.prototype.write=function(B,j,W){var Y,$,re,H,Q=this._writableState,ne=!1,X=!Q.objectMode&&(n.isBuffer(Y=B)||Y instanceof a);return X&&!n.isBuffer(B)&&(B=n.from(B)),"function"==typeof j&&(W=j,j=null),X?j="buffer":j||(j=Q.defaultEncoding),"function"!=typeof W&&(W=M),Q.ending?($=this,re=W,H=new _,k($,H),g.nextTick(re,H)):(X||function($,re,H,U){var G;return null===H?G=new o:"string"==typeof H||re.objectMode||(G=new c("chunk",["string","Buffer"],H)),!G||(k($,G),g.nextTick(U,G),!1)}(this,Q,B,W))&&(Q.pendingcb++,ne=function($,re,H,U,G,ie){if(!H){var q=(de=U,(ue=re).objectMode||!1===ue.decodeStrings||"string"!=typeof de||(de=n.from(de,G)),de);U!==q&&(H=!0,G="buffer",U=q)}var ue,de,ee=re.objectMode?1:U.length;re.length+=ee;var te=re.length<re.highWaterMark;if(te||(re.needDrain=!0),re.writing||re.corked){var se=re.lastBufferedRequest;re.lastBufferedRequest={chunk:U,encoding:G,isBuf:H,callback:ie,next:null},se?se.next=re.lastBufferedRequest:re.bufferedRequest=re.lastBufferedRequest,re.bufferedRequestCount+=1}else I($,re,!1,ee,U,G,ie);return te}(this,Q,X,B,j,W)),ne},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var B=this._writableState;B.corked&&(B.corked--,B.writing||B.corked||B.bufferProcessing||!B.bufferedRequest||R(this,B))},E.prototype.setDefaultEncoding=function(B){if("string"==typeof B&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new s(B);return this._writableState.defaultEncoding=B,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(B,j,W){W(new f("_write()"))},E.prototype._writev=null,E.prototype.end=function(B,j,W){var Q,ne,X,Y=this._writableState;return"function"==typeof B?(W=B,B=null,j=null):"function"==typeof j&&(W=j,j=null),null!=B&&this.write(B,j),Y.corked&&(Y.corked=1,this.uncork()),Y.ending||(Q=this,X=W,(ne=Y).ending=!0,L(Q,ne),X&&(ne.finished?g.nextTick(X):Q.once("finish",X)),ne.ended=!0,Q.writable=!1),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(B){this._writableState&&(this._writableState.destroyed=B)}}),E.prototype.destroy=p.destroy,E.prototype._undestroy=p.undestroy,E.prototype._destroy=function(B,j){j(B)}}).call(this)}).call(this,x("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(x,oe,ae){(function(g){(function(){"use strict";var m;function w(d,o,_){return o in d?Object.defineProperty(d,o,{value:_,enumerable:!0,configurable:!0,writable:!0}):d[o]=_,d}var y=x("./end-of-stream"),e=Symbol("lastResolve"),r=Symbol("lastReject"),n=Symbol("error"),a=Symbol("ended"),t=Symbol("lastPromise"),p=Symbol("handlePromise"),u=Symbol("stream");function i(d,o){return{value:d,done:o}}function c(d){var o=d[e];if(null!==o){var _=d[u].read();null!==_&&(d[t]=null,d[e]=null,d[r]=null,o(i(_,!1)))}}function f(d){g.nextTick(c,d)}var l=Object.getPrototypeOf(function(){}),h=Object.setPrototypeOf((w(m={get stream(){return this[u]},next:function(){var d=this,o=this[n];if(null!==o)return Promise.reject(o);if(this[a])return Promise.resolve(i(void 0,!0));if(this[u].destroyed)return new Promise(function(M,A){g.nextTick(function(){d[n]?A(d[n]):M(i(void 0,!0))})});var _,M,A,s=this[t];if(s)_=new Promise((M=s,A=this,function(E,I){M.then(function(){A[a]?E(i(void 0,!0)):A[p](E,I)},I)}));else{var k=this[u].read();if(null!==k)return Promise.resolve(i(k,!1));_=new Promise(this[p])}return this[t]=_,_}},Symbol.asyncIterator,function(){return this}),w(m,"return",function(){var d=this;return new Promise(function(o,_){d[u].destroy(null,function(s){s?_(s):o(i(void 0,!0))})})}),m),l);oe.exports=function(d){var o,_=Object.create(h,(w(o={},u,{value:d,writable:!0}),w(o,e,{value:null,writable:!0}),w(o,r,{value:null,writable:!0}),w(o,n,{value:null,writable:!0}),w(o,a,{value:d._readableState.endEmitted,writable:!0}),w(o,p,{value:function(s,k){var M=_[u].read();M?(_[t]=null,_[e]=null,_[r]=null,s(i(M,!1))):(_[e]=s,_[r]=k)},writable:!0}),o));return _[t]=null,y(d,function(s){if(s&&"ERR_STREAM_PREMATURE_CLOSE"!==s.code){var k=_[r];return null!==k&&(_[t]=null,_[e]=null,_[r]=null,k(s)),void(_[n]=s)}var M=_[e];null!==M&&(_[t]=null,_[e]=null,_[r]=null,M(i(void 0,!0))),_[a]=!0}),d.on("readable",f.bind(null,_)),_}}).call(this)}).call(this,x("_process"))},{"./end-of-stream":295,_process:277}],293:[function(x,oe,ae){"use strict";function g(n,a){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(n);a&&(p=p.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),t.push.apply(t,p)}return t}function m(n,a,t){return a in n?Object.defineProperty(n,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[a]=t,n}function w(n,a){for(var t=0;t<a.length;t++){var p=a[t];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(n,p.key,p)}}var y=x("buffer").Buffer,e=x("util").inspect,r=e&&e.custom||"inspect";oe.exports=function(){function n(){(function(u,i){if(!(u instanceof i))throw new TypeError("Cannot call a class as a function")})(this,n),this.head=null,this.tail=null,this.length=0}var a,t;return a=n,(t=[{key:"push",value:function(u){var i={data:u,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(u){var i={data:u,next:this.head};0===this.length&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(0!==this.length){var u=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,u}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(u){if(0===this.length)return"";for(var i=this.head,c=""+i.data;i=i.next;)c+=u+i.data;return c}},{key:"concat",value:function(u){if(0===this.length)return y.alloc(0);for(var l=y.allocUnsafe(u>>>0),h=this.head,d=0;h;)y.prototype.copy.call(h.data,l,d),d+=h.data.length,h=h.next;return l}},{key:"consume",value:function(u,i){var c;return u<this.head.data.length?(c=this.head.data.slice(0,u),this.head.data=this.head.data.slice(u)):c=u===this.head.data.length?this.shift():i?this._getString(u):this._getBuffer(u),c}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(u){var i=this.head,c=1,f=i.data;for(u-=f.length;i=i.next;){var l=i.data,h=u>l.length?l.length:u;if(f+=h===l.length?l:l.slice(0,u),0==(u-=h)){h===l.length?(++c,this.head=i.next?i.next:this.tail=null):(this.head=i,i.data=l.slice(h));break}++c}return this.length-=c,f}},{key:"_getBuffer",value:function(u){var i=y.allocUnsafe(u),c=this.head,f=1;for(c.data.copy(i),u-=c.data.length;c=c.next;){var l=c.data,h=u>l.length?l.length:u;if(l.copy(i,i.length-u,0,h),0==(u-=h)){h===l.length?(++f,this.head=c.next?c.next:this.tail=null):(this.head=c,c.data=l.slice(h));break}++f}return this.length-=f,i}},{key:r,value:function(u,i){return e(this,function(c){for(var f=1;f<arguments.length;f++){var l=null!=arguments[f]?arguments[f]:{};f%2?g(Object(l),!0).forEach(function(h){m(c,h,l[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(l)):g(Object(l)).forEach(function(h){Object.defineProperty(c,h,Object.getOwnPropertyDescriptor(l,h))})}return c}({},i,{depth:0,customInspect:!1}))}}])&&w(a.prototype,t),n}()},{buffer:85,util:83}],294:[function(x,oe,ae){(function(g){(function(){"use strict";function m(e,r){y(e,r),w(e)}function w(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function y(e,r){e.emit("error",r)}oe.exports={destroy:function(e,r){var n=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,g.nextTick(y,this,e)):g.nextTick(y,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(p){!r&&p?n._writableState?n._writableState.errorEmitted?g.nextTick(w,n):(n._writableState.errorEmitted=!0,g.nextTick(m,n,p)):g.nextTick(m,n,p):r?(g.nextTick(w,n),r(p)):g.nextTick(w,n)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,r){var n=e._readableState,a=e._writableState;n&&n.autoDestroy||a&&a.autoDestroy?e.destroy(r):e.emit("error",r)}}}).call(this)}).call(this,x("_process"))},{_process:277}],295:[function(x,oe,ae){"use strict";var g=x("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function m(){}oe.exports=function w(y,e,r){if("function"==typeof e)return w(y,null,e);var d,o;e||(e={}),d=r||m,o=!1,r=function(){if(!o){o=!0;for(var _=arguments.length,s=new Array(_),k=0;k<_;k++)s[k]=arguments[k];d.apply(this,s)}};var n=e.readable||!1!==e.readable&&y.readable,a=e.writable||!1!==e.writable&&y.writable,t=function(){y.writable||u()},p=y._writableState&&y._writableState.finished,u=function(){a=!1,p=!0,n||r.call(y)},i=y._readableState&&y._readableState.endEmitted,c=function(){n=!1,i=!0,a||r.call(y)},f=function(d){r.call(y,d)},l=function(){var d;return n&&!i?(y._readableState&&y._readableState.ended||(d=new g),r.call(y,d)):a&&!p?(y._writableState&&y._writableState.ended||(d=new g),r.call(y,d)):void 0},h=function(){y.req.on("finish",u)};return function(d){return d.setHeader&&"function"==typeof d.abort}(y)?(y.on("complete",u),y.on("abort",l),y.req?h():y.on("request",h)):a&&!y._writableState&&(y.on("end",t),y.on("close",t)),y.on("end",c),y.on("finish",u),!1!==e.error&&y.on("error",f),y.on("close",l),function(){y.removeListener("complete",u),y.removeListener("abort",l),y.removeListener("request",h),y.req&&y.req.removeListener("finish",u),y.removeListener("end",t),y.removeListener("close",t),y.removeListener("finish",u),y.removeListener("end",c),y.removeListener("error",f),y.removeListener("close",l)}}},{"../../../errors":286}],296:[function(x,oe,ae){oe.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(x,oe,ae){"use strict";var g,m=x("../../../errors").codes,w=m.ERR_MISSING_ARGS,y=m.ERR_STREAM_DESTROYED;function e(p){if(p)throw p}function r(p,u,i,c){var h,d;h=c,d=!1,c=function(){d||(d=!0,h.apply(void 0,arguments))};var f=!1;p.on("close",function(){f=!0}),void 0===g&&(g=x("./end-of-stream")),g(p,{readable:u,writable:i},function(h){if(h)return c(h);f=!0,c()});var l=!1;return function(h){if(!f&&!l)return l=!0,function(d){return d.setHeader&&"function"==typeof d.abort}(p)?p.abort():"function"==typeof p.destroy?p.destroy():void c(h||new y("pipe"))}}function n(p){p()}function a(p,u){return p.pipe(u)}function t(p){return p.length?"function"!=typeof p[p.length-1]?e:p.pop():e}oe.exports=function(){for(var p=arguments.length,u=new Array(p),i=0;i<p;i++)u[i]=arguments[i];var c,f=t(u);if(Array.isArray(u[0])&&(u=u[0]),u.length<2)throw new w("streams");var l=u.map(function(h,d){var o=d<u.length-1;return r(h,o,d>0,function(_){c||(c=_),_&&l.forEach(n),o||(l.forEach(n),f(c))})});return u.reduce(a)}},{"../../../errors":286,"./end-of-stream":295}],298:[function(x,oe,ae){"use strict";var g=x("../../../errors").codes.ERR_INVALID_OPT_VALUE;oe.exports={getHighWaterMark:function(m,w,y,e){var n,r=null!=(n=w).highWaterMark?n.highWaterMark:e?n[y]:null;if(null!=r){if(!isFinite(r)||Math.floor(r)!==r||r<0)throw new g(e?y:"highWaterMark",r);return Math.floor(r)}return m.objectMode?16:16384}}},{"../../../errors":286}],299:[function(x,oe,ae){oe.exports=x("events").EventEmitter},{events:84}],300:[function(x,oe,ae){"use strict";var g=x("safe-buffer").Buffer,m=g.isEncoding||function(i){switch((i=""+i)&&i.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function w(i){var c;switch(this.encoding=function(f){var l=function(h){if(!h)return"utf8";for(var d;;)switch(h){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return h;default:if(d)return;h=(""+h).toLowerCase(),d=!0}}(f);if("string"!=typeof l&&(g.isEncoding===m||!m(f)))throw new Error("Unknown encoding: "+f);return l||f}(i),this.encoding){case"utf16le":this.text=r,this.end=n,c=4;break;case"utf8":this.fillLast=e,c=4;break;case"base64":this.text=a,this.end=t,c=3;break;default:return this.write=p,void(this.end=u)}this.lastNeed=0,this.lastTotal=0,this.lastChar=g.allocUnsafe(c)}function y(i){return i<=127?0:i>>5==6?2:i>>4==14?3:i>>3==30?4:i>>6==2?-1:-2}function e(i){var c=this.lastTotal-this.lastNeed,f=function(l,h,d){if(128!=(192&h[0]))return l.lastNeed=0,"\ufffd";if(l.lastNeed>1&&h.length>1){if(128!=(192&h[1]))return l.lastNeed=1,"\ufffd";if(l.lastNeed>2&&h.length>2&&128!=(192&h[2]))return l.lastNeed=2,"\ufffd"}}(this,i);return void 0!==f?f:this.lastNeed<=i.length?(i.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(i.copy(this.lastChar,c,0,i.length),void(this.lastNeed-=i.length))}function r(i,c){if((i.length-c)%2==0){var f=i.toString("utf16le",c);if(f){var l=f.charCodeAt(f.length-1);if(l>=55296&&l<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1],f.slice(0,-1)}return f}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=i[i.length-1],i.toString("utf16le",c,i.length-1)}function n(i){var c=i&&i.length?this.write(i):"";return this.lastNeed?c+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):c}function a(i,c){var f=(i.length-c)%3;return 0===f?i.toString("base64",c):(this.lastNeed=3-f,this.lastTotal=3,1===f?this.lastChar[0]=i[i.length-1]:(this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1]),i.toString("base64",c,i.length-f))}function t(i){var c=i&&i.length?this.write(i):"";return this.lastNeed?c+this.lastChar.toString("base64",0,3-this.lastNeed):c}function p(i){return i.toString(this.encoding)}function u(i){return i&&i.length?this.write(i):""}ae.StringDecoder=w,w.prototype.write=function(i){if(0===i.length)return"";var c,f;if(this.lastNeed){if(void 0===(c=this.fillLast(i)))return"";f=this.lastNeed,this.lastNeed=0}else f=0;return f<i.length?c?c+this.text(i,f):this.text(i,f):c||""},w.prototype.end=function(i){var c=i&&i.length?this.write(i):"";return this.lastNeed?c+"\ufffd":c},w.prototype.text=function(i,c){var f=function(h,d,o){var _=d.length-1;if(_<o)return 0;var s=y(d[_]);return s>=0?(s>0&&(h.lastNeed=s-1),s):--_<o||-2===s?0:(s=y(d[_]))>=0?(s>0&&(h.lastNeed=s-2),s):--_<o||-2===s?0:(s=y(d[_]))>=0?(s>0&&(2===s?s=0:h.lastNeed=s-3),s):0}(this,i,c);if(!this.lastNeed)return i.toString("utf8",c);this.lastTotal=f;var l=i.length-(f-this.lastNeed);return i.copy(this.lastChar,0,l),i.toString("utf8",c,l)},w.prototype.fillLast=function(i){if(this.lastNeed<=i.length)return i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,i.length),this.lastNeed-=i.length}},{"safe-buffer":284}],301:[function(x,oe,ae){(function(g,m){(function(){var w=x("assert"),y=x("debug")("stream-parser");function e(f){y("initializing parser stream"),f._parserBytesLeft=0,f._parserBuffers=[],f._parserBuffered=0,f._parserState=-1,f._parserCallback=null,"function"==typeof f.push&&(f._parserOutput=f.push.bind(f)),f._parserInit=!0}function r(f,l){w(!this._parserCallback,'there is already a "callback" set!'),w(isFinite(f)&&f>0,'can only buffer a finite number of bytes > 0, got "'+f+'"'),this._parserInit||e(this),y("buffering %o bytes",f),this._parserBytesLeft=f,this._parserCallback=l,this._parserState=0}function n(f,l){w(!this._parserCallback,'there is already a "callback" set!'),w(f>0,'can only skip > 0 bytes, got "'+f+'"'),this._parserInit||e(this),y("skipping %o bytes",f),this._parserBytesLeft=f,this._parserCallback=l,this._parserState=1}function a(f,l){w(!this._parserCallback,'There is already a "callback" set!'),w(f>0,'can only pass through > 0 bytes, got "'+f+'"'),this._parserInit||e(this),y("passing through %o bytes",f),this._parserBytesLeft=f,this._parserCallback=l,this._parserState=2}function t(f,l,h){this._parserInit||e(this),y("write(%o bytes)",f.length),"function"==typeof l&&(h=l),i(this,f,null,h)}function p(f,l,h){this._parserInit||e(this),y("transform(%o bytes)",f.length),"function"!=typeof l&&(l=this._parserOutput),i(this,f,l,h)}function u(f,l,h,d){if(f._parserBytesLeft-=l.length,y("%o bytes left for stream piece",f._parserBytesLeft),0===f._parserState?(f._parserBuffers.push(l),f._parserBuffered+=l.length):2===f._parserState&&h(l),0!==f._parserBytesLeft)return d;var o=f._parserCallback;if(o&&0===f._parserState&&f._parserBuffers.length>1&&(l=m.concat(f._parserBuffers,f._parserBuffered)),0!==f._parserState&&(l=null),f._parserCallback=null,f._parserBuffered=0,f._parserState=-1,f._parserBuffers.splice(0),o){var _=[];l&&_.push(l),h&&_.push(h);var s=o.length>_.length;s&&_.push(c(d));var k=o.apply(f,_);if(!s||d===k)return d}}oe.exports=function(f){var l=f&&"function"==typeof f._transform;if(!(l||f&&"function"==typeof f._write))throw new Error("must pass a Writable or Transform stream in");y("extending Parser into stream"),f._bytes=r,f._skipBytes=n,l&&(f._passthrough=a),l?f._transform=p:f._write=t};var i=c(function f(l,h,d,o){return l._parserBytesLeft<=0?o(new Error("got data but not currently parsing anything")):h.length<=l._parserBytesLeft?function(){return u(l,h,d,o)}:function(){var _=h.slice(0,l._parserBytesLeft);return u(l,_,d,function(s){return s?o(s):h.length>_.length?function(){return f(l,h.slice(_.length),d,o)}:void 0})}});function c(f){return function(){for(var l=f.apply(this,arguments);"function"==typeof l;)l=l();return l}}}).call(this)}).call(this,x("_process"),x("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(x,oe,ae){(function(g){(function(){function m(){var w;try{w=ae.storage.debug}catch(y){}return!w&&void 0!==g&&"env"in g&&(w=g.env.DEBUG),w}(ae=oe.exports=x("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},ae.formatArgs=function(w){var y=this.useColors;if(w[0]=(y?"%c":"")+this.namespace+(y?" %c":" ")+w[0]+(y?"%c ":" ")+"+"+ae.humanize(this.diff),y){var e="color: "+this.color;w.splice(1,0,e,"color: inherit");var r=0,n=0;w[0].replace(/%[a-zA-Z%]/g,function(a){"%%"!==a&&(r++,"%c"===a&&(n=r))}),w.splice(n,0,e)}},ae.save=function(w){try{null==w?ae.storage.removeItem("debug"):ae.storage.debug=w}catch(y){}},ae.load=m,ae.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},ae.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(w){}}(),ae.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],ae.formatters.j=function(w){try{return JSON.stringify(w)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}},ae.enable(m())}).call(this)}).call(this,x("_process"))},{"./debug":303,_process:277}],303:[function(x,oe,ae){var g;function m(w){function y(){if(y.enabled){var e=y,r=+new Date;e.diff=r-(g||r),e.prev=g,e.curr=r,g=r;for(var a=new Array(arguments.length),t=0;t<a.length;t++)a[t]=arguments[t];a[0]=ae.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var p=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(i,c){if("%%"===i)return i;p++;var f=ae.formatters[c];return"function"==typeof f&&(i=f.call(e,a[p]),a.splice(p,1),p--),i}),ae.formatArgs.call(e,a),(y.log||ae.log||console.log.bind(console)).apply(e,a)}}return y.namespace=w,y.enabled=ae.enabled(w),y.useColors=ae.useColors(),y.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return ae.colors[Math.abs(n)%ae.colors.length]}(w),"function"==typeof ae.init&&ae.init(y),y}(ae=oe.exports=m.debug=m.default=m).coerce=function(w){return w instanceof Error?w.stack||w.message:w},ae.disable=function(){ae.enable("")},ae.enable=function(w){ae.save(w),ae.names=[],ae.skips=[];for(var y=("string"==typeof w?w:"").split(/[\s,]+/),e=y.length,r=0;r<e;r++)y[r]&&("-"===(w=y[r].replace(/\*/g,".*?"))[0]?ae.skips.push(new RegExp("^"+w.substr(1)+"$")):ae.names.push(new RegExp("^"+w+"$")))},ae.enabled=function(w){var y,e;for(y=0,e=ae.skips.length;y<e;y++)if(ae.skips[y].test(w))return!1;for(y=0,e=ae.names.length;y<e;y++)if(ae.names[y].test(w))return!0;return!1},ae.humanize=x("ms"),ae.names=[],ae.skips=[],ae.formatters={}},{ms:304}],304:[function(x,oe,ae){var g=1e3,m=6e4,w=60*m,y=24*w;function e(r,n,a){if(!(r<n))return r<1.5*n?Math.floor(r/n)+" "+a:Math.ceil(r/n)+" "+a+"s"}oe.exports=function(r,n){n=n||{};var a,p,t=typeof r;if("string"===t&&r.length>0)return function(p){if(!((p=String(p)).length>100)){var u=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(p);if(u){var i=parseFloat(u[1]);switch((u[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return i*y;case"hours":case"hour":case"hrs":case"hr":case"h":return i*w;case"minutes":case"minute":case"mins":case"min":case"m":return i*m;case"seconds":case"second":case"secs":case"sec":case"s":return i*g;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(r);if("number"===t&&!1===isNaN(r))return n.long?e(a=r,y,"day")||e(a,w,"hour")||e(a,m,"minute")||e(a,g,"second")||a+" ms":(p=r)>=y?Math.round(p/y)+"d":p>=w?Math.round(p/w)+"h":p>=m?Math.round(p/m)+"m":p>=g?Math.round(p/g)+"s":p+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))}},{}],305:[function(x,oe,ae){"use strict";var g=x("parenthesis");oe.exports=function(m,w,y){if(null==m)throw Error("First argument should be a string");if(null==w)throw Error("Separator should be a string or a RegExp");y?("string"==typeof y||Array.isArray(y))&&(y={ignore:y}):y={},null==y.escape&&(y.escape=!0),null==y.ignore?y.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof y.ignore&&(y.ignore=[y.ignore]),y.ignore=y.ignore.map(function(u){return 1===u.length&&(u+=u),u}));var e=g.parse(m,{flat:!0,brackets:y.ignore}),r=e[0].split(w);if(y.escape){for(var n=[],a=0;a<r.length;a++){var t=r[a];"\\"===t[t.length-1]&&"\\"!==t[t.length-2]?(n.push(t+w+r[a+1]),a++):n.push(t)}r=n}for(a=0;a<r.length;a++)e[0]=r[a],r[a]=g.stringify(e,{flat:!0});return r}},{parenthesis:248}],306:[function(x,oe,ae){"use strict";oe.exports=function(g){for(var m=g.length,w=new Array(m),y=new Array(m),e=new Array(m),r=new Array(m),n=new Array(m),a=new Array(m),t=0;t<m;++t)w[t]=-1,y[t]=0,e[t]=!1,r[t]=0,n[t]=-1,a[t]=[];var p,u=0,i=[],c=[];function f(d){var o=[d],_=[d];for(w[d]=y[d]=u,e[d]=!0,u+=1;_.length>0;){var s=g[d=_[_.length-1]];if(r[d]<s.length){for(var k=r[d];k<s.length;++k){var M=s[k];if(w[M]<0){w[M]=y[M]=u,e[M]=!0,u+=1,o.push(M),_.push(M);break}e[M]&&(y[d]=0|Math.min(y[d],y[M])),n[M]>=0&&a[d].push(n[M])}r[d]=k}else{if(y[d]===w[d]){var A=[],E=[],I=0;for(k=o.length-1;k>=0;--k){var C=o[k];if(e[C]=!1,A.push(C),E.push(a[C]),I+=a[C].length,n[C]=i.length,C===d){o.length=k;break}}i.push(A);var R=new Array(I);for(k=0;k<E.length;k++)for(var O=0;O<E[k].length;O++)R[--I]=E[k][O];c.push(R)}_.pop()}}}for(t=0;t<m;++t)w[t]<0&&f(t);for(t=0;t<c.length;t++){var l=c[t];if(0!==l.length){l.sort(function(d,o){return d-o}),p=[l[0]];for(var h=1;h<l.length;h++)l[h]!==l[h-1]&&p.push(l[h]);c[t]=p}}return{components:i,adjacencyList:c}}},{}],307:[function(x,oe,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var m=2*Math.PI,w=function(r,n,a,t,p,u,i){var c=r.x,f=r.y;return{x:t*(c*=n)-p*(f*=a)+u,y:p*c+t*f+i}},y=function(r,n){var a=1.5707963267948966===n?.551915024494:-1.5707963267948966===n?-.551915024494:4/3*Math.tan(n/4),t=Math.cos(r),p=Math.sin(r),u=Math.cos(r+n),i=Math.sin(r+n);return[{x:t-p*a,y:p+t*a},{x:u+i*a,y:i-u*a},{x:u,y:i}]},e=function(r,n,a,t){var p=r*a+n*t;return p>1&&(p=1),p<-1&&(p=-1),(r*t-n*a<0?-1:1)*Math.acos(p)};ae.default=function(r){var n=r.px,a=r.py,t=r.cx,p=r.cy,u=r.rx,i=r.ry,c=r.xAxisRotation,f=void 0===c?0:c,l=r.largeArcFlag,h=void 0===l?0:l,d=r.sweepFlag,o=void 0===d?0:d,_=[];if(0===u||0===i)return[];var s=Math.sin(f*m/360),k=Math.cos(f*m/360),M=k*(n-t)/2+s*(a-p)/2,A=-s*(n-t)/2+k*(a-p)/2;if(0===M&&0===A)return[];u=Math.abs(u),i=Math.abs(i);var E=Math.pow(M,2)/Math.pow(u,2)+Math.pow(A,2)/Math.pow(i,2);E>1&&(u*=Math.sqrt(E),i*=Math.sqrt(E));var C=function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(a,t){var p=[],u=!0,i=!1,c=void 0;try{for(var f,l=a[Symbol.iterator]();!(u=(f=l.next()).done)&&(p.push(f.value),!t||p.length!==t);u=!0);}catch(h){i=!0,c=h}finally{try{!u&&l.return&&l.return()}finally{if(i)throw c}}return p}(r,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(Y,Q,ne,X,$,re,H,U,G,ie,q,ee){var te=Math.pow($,2),se=Math.pow(re,2),ue=Math.pow(q,2),de=Math.pow(ee,2),he=te*se-te*de-se*ue;he<0&&(he=0),he/=te*de+se*ue;var xe=(he=Math.sqrt(he)*(H===U?-1:1))*$/re*ee,ge=he*-re/$*q,_e=ie*xe-G*ge+(Y+ne)/2,Ce=G*xe+ie*ge+(Q+X)/2,Le=(q-xe)/$,Ie=(ee-ge)/re,Be=(-q-xe)/$,ve=(-ee-ge)/re,Te=e(1,0,Le,Ie),Pe=e(Le,Ie,Be,ve);return 0===U&&Pe>0&&(Pe-=m),1===U&&Pe<0&&(Pe+=m),[_e,Ce,Te,Pe]}(n,a,t,p,u,i,h,o,s,k,M,A),4),R=C[0],O=C[1],D=C[2],L=C[3],B=Math.abs(L)/(m/4);Math.abs(1-B)<1e-7&&(B=1);var j=Math.max(Math.ceil(B),1);L/=j;for(var W=0;W<j;W++)_.push(y(D,L)),D+=L;return _.map(function(Y){var Q=w(Y[0],u,i,k,s,R,O),ne=Q.x,X=Q.y,$=w(Y[1],u,i,k,s,R,O),re=$.x,H=$.y,U=w(Y[2],u,i,k,s,R,O);return{x1:ne,y1:X,x2:re,y2:H,x:U.x,y:U.y}})},oe.exports=ae.default},{}],308:[function(x,oe,ae){"use strict";var g=x("parse-svg-path"),m=x("abs-svg-path"),w=x("normalize-svg-path"),y=x("is-svg-path"),e=x("assert");oe.exports=function(r){if(Array.isArray(r)&&1===r.length&&"string"==typeof r[0]&&(r=r[0]),"string"==typeof r&&(e(y(r),"String is not an SVG path."),r=g(r)),e(Array.isArray(r),"Argument should be a string or an array of path segments."),r=m(r),!(r=w(r)).length)return[0,0,0,0];for(var n=[1/0,1/0,-1/0,-1/0],a=0,t=r.length;a<t;a++)for(var p=r[a].slice(1),u=0;u<p.length;u+=2)p[u+0]<n[0]&&(n[0]=p[u+0]),p[u+1]<n[1]&&(n[1]=p[u+1]),p[u+0]>n[2]&&(n[2]=p[u+0]),p[u+1]>n[3]&&(n[3]=p[u+1]);return n}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(x,oe,ae){"use strict";oe.exports=function(y){for(var e,r=[],n=0,a=0,t=0,p=0,u=null,i=null,c=0,f=0,l=0,h=y.length;l<h;l++){var d=y[l],o=d[0];switch(o){case"M":t=d[1],p=d[2];break;case"A":var _=g({px:c,py:f,cx:d[6],cy:d[7],rx:d[1],ry:d[2],xAxisRotation:d[3],largeArcFlag:d[4],sweepFlag:d[5]});if(!_.length)continue;for(var s,k=0;k<_.length;k++)d=["C",(s=_[k]).x1,s.y1,s.x2,s.y2,s.x,s.y],k<_.length-1&&r.push(d);break;case"S":var M=c,A=f;"C"!=e&&"S"!=e||(M+=M-n,A+=A-a),d=["C",M,A,d[1],d[2],d[3],d[4]];break;case"T":"Q"==e||"T"==e?(u=2*c-u,i=2*f-i):(u=c,i=f),d=w(c,f,u,i,d[1],d[2]);break;case"Q":u=d[1],i=d[2],d=w(c,f,d[1],d[2],d[3],d[4]);break;case"L":d=m(c,f,d[1],d[2]);break;case"H":d=m(c,f,d[1],f);break;case"V":d=m(c,f,c,d[1]);break;case"Z":d=m(c,f,t,p)}e=o,c=d[d.length-2],f=d[d.length-1],d.length>4?(n=d[d.length-4],a=d[d.length-3]):(n=c,a=f),r.push(d)}return r};var g=x("svg-arc-to-cubic-bezier");function m(y,e,r,n){return["C",y,e,r,n,r,n]}function w(y,e,r,n,a,t){return["C",y/3+2/3*r,e/3+2/3*n,a/3+2/3*r,t/3+2/3*n,a,t]}},{"svg-arc-to-cubic-bezier":307}],310:[function(x,oe,ae){"use strict";var g,m=x("svg-path-bounds"),w=x("parse-svg-path"),y=x("draw-svg-path"),e=x("is-svg-path"),r=x("bitmap-sdf"),n=document.createElement("canvas"),a=n.getContext("2d");oe.exports=function(t,p){if(!e(t))throw Error("Argument should be valid svg path string");var u,i;p||(p={}),p.shape?(u=p.shape[0],i=p.shape[1]):(u=n.width=p.w||p.width||200,i=n.height=p.h||p.height||200);var c=Math.min(u,i),f=p.stroke||0,l=p.viewbox||p.viewBox||m(t),h=[u/(l[2]-l[0]),i/(l[3]-l[1])],d=Math.min(h[0]||0,h[1]||0)/2;if(a.fillStyle="black",a.fillRect(0,0,u,i),a.fillStyle="white",f&&("number"!=typeof f&&(f=1),a.strokeStyle=f>0?"white":"black",a.lineWidth=Math.abs(f)),a.translate(.5*u,.5*i),a.scale(d,d),function(){if(null!=g)return g;var s=document.createElement("canvas").getContext("2d");if(s.canvas.width=s.canvas.height=1,!window.Path2D)return g=!1;var k=new Path2D("M0,0h1v1h-1v-1Z");s.fillStyle="black",s.fill(k);var M=s.getImageData(0,0,1,1);return g=M&&M.data&&255===M.data[3]}()){var o=new Path2D(t);a.fill(o),f&&a.stroke(o)}else{var _=w(t);y(a,_),a.fill(),f&&a.stroke()}return a.setTransform(1,0,0,1,0,0),r(a,{cutoff:null!=p.cutoff?p.cutoff:.5,radius:null!=p.radius?p.radius:.5*c})}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(x,oe,ae){(function(g,m){(function(){var w=x("process/browser.js").nextTick,y=Function.prototype.apply,e=Array.prototype.slice,r={},n=0;function a(t,p){this._id=t,this._clearFn=p}ae.setTimeout=function(){return new a(y.call(setTimeout,window,arguments),clearTimeout)},ae.setInterval=function(){return new a(y.call(setInterval,window,arguments),clearInterval)},ae.clearTimeout=ae.clearInterval=function(t){t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},ae.enroll=function(t,p){clearTimeout(t._idleTimeoutId),t._idleTimeout=p},ae.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},ae._unrefActive=ae.active=function(t){clearTimeout(t._idleTimeoutId);var p=t._idleTimeout;p>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},p))},ae.setImmediate="function"==typeof g?g:function(t){var p=n++,u=!(arguments.length<2)&&e.call(arguments,1);return r[p]=!0,w(function(){r[p]&&(u?t.apply(null,u):t.call(null),ae.clearImmediate(p))}),p},ae.clearImmediate="function"==typeof m?m:function(t){delete r[t]}}).call(this)}).call(this,x("timers").setImmediate,x("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(x,oe,ae){!function(g){var m=/^\s+/,w=/\s+$/,y=0,e=g.round,r=g.min,n=g.max,a=g.random;function t(G,ie){if(ie=ie||{},(G=G||"")instanceof t)return G;if(!(this instanceof t))return new t(G,ie);var ee,Ce,Le,te,se,ue,de,he,xe,ge,q=(te={r:0,g:0,b:0},se=1,ue=null,de=null,he=null,xe=!1,ge=!1,"string"==typeof(ee=G)&&(ee=function(Ie){Ie=Ie.replace(m,"").replace(w,"").toLowerCase();var Be,ve=!1;if(R[Ie])Ie=R[Ie],ve=!0;else if("transparent"==Ie)return{r:0,g:0,b:0,a:0,format:"name"};return(Be=H.rgb.exec(Ie))?{r:Be[1],g:Be[2],b:Be[3]}:(Be=H.rgba.exec(Ie))?{r:Be[1],g:Be[2],b:Be[3],a:Be[4]}:(Be=H.hsl.exec(Ie))?{h:Be[1],s:Be[2],l:Be[3]}:(Be=H.hsla.exec(Ie))?{h:Be[1],s:Be[2],l:Be[3],a:Be[4]}:(Be=H.hsv.exec(Ie))?{h:Be[1],s:Be[2],v:Be[3]}:(Be=H.hsva.exec(Ie))?{h:Be[1],s:Be[2],v:Be[3],a:Be[4]}:(Be=H.hex8.exec(Ie))?{r:j(Be[1]),g:j(Be[2]),b:j(Be[3]),a:ne(Be[4]),format:ve?"name":"hex8"}:(Be=H.hex6.exec(Ie))?{r:j(Be[1]),g:j(Be[2]),b:j(Be[3]),format:ve?"name":"hex"}:(Be=H.hex4.exec(Ie))?{r:j(Be[1]+""+Be[1]),g:j(Be[2]+""+Be[2]),b:j(Be[3]+""+Be[3]),a:ne(Be[4]+""+Be[4]),format:ve?"name":"hex8"}:!!(Be=H.hex3.exec(Ie))&&{r:j(Be[1]+""+Be[1]),g:j(Be[2]+""+Be[2]),b:j(Be[3]+""+Be[3]),format:ve?"name":"hex"}}(ee)),"object"==typeof ee&&(U(ee.r)&&U(ee.g)&&U(ee.b)?(Ce=ee.g,Le=ee.b,te={r:255*L(ee.r,255),g:255*L(Ce,255),b:255*L(Le,255)},xe=!0,ge="%"===String(ee.r).substr(-1)?"prgb":"rgb"):U(ee.h)&&U(ee.s)&&U(ee.v)?(ue=Y(ee.s),de=Y(ee.v),te=function(Ie,Be,ve){Ie=6*L(Ie,360),Be=L(Be,100),ve=L(ve,100);var Te=g.floor(Ie),Pe=Ie-Te,De=ve*(1-Be),Fe=ve*(1-Pe*Be),Ue=ve*(1-(1-Pe)*Be),He=Te%6;return{r:255*[ve,Fe,De,De,Ue,ve][He],g:255*[Ue,ve,ve,Fe,De,De][He],b:255*[De,De,Ue,ve,ve,Fe][He]}}(ee.h,ue,de),xe=!0,ge="hsv"):U(ee.h)&&U(ee.s)&&U(ee.l)&&(ue=Y(ee.s),he=Y(ee.l),te=function(Ie,Be,ve){var Te,Pe,De;function Fe(Ke,st,Ve){return Ve<0&&(Ve+=1),Ve>1&&(Ve-=1),Ve<1/6?Ke+6*(st-Ke)*Ve:Ve<.5?st:Ve<2/3?Ke+(st-Ke)*(2/3-Ve)*6:Ke}if(Ie=L(Ie,360),Be=L(Be,100),ve=L(ve,100),0===Be)Te=Pe=De=ve;else{var Ue=ve<.5?ve*(1+Be):ve+Be-ve*Be,He=2*ve-Ue;Te=Fe(He,Ue,Ie+1/3),Pe=Fe(He,Ue,Ie),De=Fe(He,Ue,Ie-1/3)}return{r:255*Te,g:255*Pe,b:255*De}}(ee.h,ue,he),xe=!0,ge="hsl"),ee.hasOwnProperty("a")&&(se=ee.a)),se=D(se),{ok:xe,format:ee.format||ge,r:r(255,n(te.r,0)),g:r(255,n(te.g,0)),b:r(255,n(te.b,0)),a:se});this._originalInput=G,this._r=q.r,this._g=q.g,this._b=q.b,this._a=q.a,this._roundA=e(100*this._a)/100,this._format=ie.format||q.format,this._gradientType=ie.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=q.ok,this._tc_id=y++}function p(G,ie,q){G=L(G,255),ie=L(ie,255),q=L(q,255);var ee,te,se=n(G,ie,q),ue=r(G,ie,q),de=(se+ue)/2;if(se==ue)ee=te=0;else{var he=se-ue;switch(te=de>.5?he/(2-se-ue):he/(se+ue),se){case G:ee=(ie-q)/he+(ie<q?6:0);break;case ie:ee=(q-G)/he+2;break;case q:ee=(G-ie)/he+4}ee/=6}return{h:ee,s:te,l:de}}function u(G,ie,q){G=L(G,255),ie=L(ie,255),q=L(q,255);var ee,te,se=n(G,ie,q),ue=r(G,ie,q),de=se,he=se-ue;if(te=0===se?0:he/se,se==ue)ee=0;else{switch(se){case G:ee=(ie-q)/he+(ie<q?6:0);break;case ie:ee=(q-G)/he+2;break;case q:ee=(G-ie)/he+4}ee/=6}return{h:ee,s:te,v:de}}function i(G,ie,q,ee){var te=[W(e(G).toString(16)),W(e(ie).toString(16)),W(e(q).toString(16))];return ee&&te[0].charAt(0)==te[0].charAt(1)&&te[1].charAt(0)==te[1].charAt(1)&&te[2].charAt(0)==te[2].charAt(1)?te[0].charAt(0)+te[1].charAt(0)+te[2].charAt(0):te.join("")}function c(G,ie,q,ee){return[W(Q(ee)),W(e(G).toString(16)),W(e(ie).toString(16)),W(e(q).toString(16))].join("")}function f(G,ie){ie=0===ie?0:ie||10;var q=t(G).toHsl();return q.s-=ie/100,q.s=B(q.s),t(q)}function l(G,ie){ie=0===ie?0:ie||10;var q=t(G).toHsl();return q.s+=ie/100,q.s=B(q.s),t(q)}function h(G){return t(G).desaturate(100)}function d(G,ie){ie=0===ie?0:ie||10;var q=t(G).toHsl();return q.l+=ie/100,q.l=B(q.l),t(q)}function o(G,ie){ie=0===ie?0:ie||10;var q=t(G).toRgb();return q.r=n(0,r(255,q.r-e(-ie/100*255))),q.g=n(0,r(255,q.g-e(-ie/100*255))),q.b=n(0,r(255,q.b-e(-ie/100*255))),t(q)}function _(G,ie){ie=0===ie?0:ie||10;var q=t(G).toHsl();return q.l-=ie/100,q.l=B(q.l),t(q)}function s(G,ie){var q=t(G).toHsl(),ee=(q.h+ie)%360;return q.h=ee<0?360+ee:ee,t(q)}function k(G){var ie=t(G).toHsl();return ie.h=(ie.h+180)%360,t(ie)}function M(G){var ie=t(G).toHsl(),q=ie.h;return[t(G),t({h:(q+120)%360,s:ie.s,l:ie.l}),t({h:(q+240)%360,s:ie.s,l:ie.l})]}function A(G){var ie=t(G).toHsl(),q=ie.h;return[t(G),t({h:(q+90)%360,s:ie.s,l:ie.l}),t({h:(q+180)%360,s:ie.s,l:ie.l}),t({h:(q+270)%360,s:ie.s,l:ie.l})]}function E(G){var ie=t(G).toHsl(),q=ie.h;return[t(G),t({h:(q+72)%360,s:ie.s,l:ie.l}),t({h:(q+216)%360,s:ie.s,l:ie.l})]}function I(G,ie,q){ie=ie||6,q=q||30;var ee=t(G).toHsl(),te=360/q,se=[t(G)];for(ee.h=(ee.h-(te*ie>>1)+720)%360;--ie;)ee.h=(ee.h+te)%360,se.push(t(ee));return se}function C(G,ie){ie=ie||6;for(var q=t(G).toHsv(),ee=q.h,te=q.s,se=q.v,ue=[],de=1/ie;ie--;)ue.push(t({h:ee,s:te,v:se})),se=(se+de)%1;return ue}t.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var G=this.toRgb();return(299*G.r+587*G.g+114*G.b)/1e3},getLuminance:function(){var G,ie,q,ee=this.toRgb();return ie=ee.g/255,q=ee.b/255,.2126*((G=ee.r/255)<=.03928?G/12.92:g.pow((G+.055)/1.055,2.4))+.7152*(ie<=.03928?ie/12.92:g.pow((ie+.055)/1.055,2.4))+.0722*(q<=.03928?q/12.92:g.pow((q+.055)/1.055,2.4))},setAlpha:function(G){return this._a=D(G),this._roundA=e(100*this._a)/100,this},toHsv:function(){var G=u(this._r,this._g,this._b);return{h:360*G.h,s:G.s,v:G.v,a:this._a}},toHsvString:function(){var G=u(this._r,this._g,this._b),ie=e(360*G.h),q=e(100*G.s),ee=e(100*G.v);return 1==this._a?"hsv("+ie+", "+q+"%, "+ee+"%)":"hsva("+ie+", "+q+"%, "+ee+"%, "+this._roundA+")"},toHsl:function(){var G=p(this._r,this._g,this._b);return{h:360*G.h,s:G.s,l:G.l,a:this._a}},toHslString:function(){var G=p(this._r,this._g,this._b),ie=e(360*G.h),q=e(100*G.s),ee=e(100*G.l);return 1==this._a?"hsl("+ie+", "+q+"%, "+ee+"%)":"hsla("+ie+", "+q+"%, "+ee+"%, "+this._roundA+")"},toHex:function(G){return i(this._r,this._g,this._b,G)},toHexString:function(G){return"#"+this.toHex(G)},toHex8:function(G){return q=this._g,ee=this._b,te=this._a,se=G,ue=[W(e(this._r).toString(16)),W(e(q).toString(16)),W(e(ee).toString(16)),W(Q(te))],se&&ue[0].charAt(0)==ue[0].charAt(1)&&ue[1].charAt(0)==ue[1].charAt(1)&&ue[2].charAt(0)==ue[2].charAt(1)&&ue[3].charAt(0)==ue[3].charAt(1)?ue[0].charAt(0)+ue[1].charAt(0)+ue[2].charAt(0)+ue[3].charAt(0):ue.join("");var q,ee,te,se,ue},toHex8String:function(G){return"#"+this.toHex8(G)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(100*L(this._r,255))+"%",g:e(100*L(this._g,255))+"%",b:e(100*L(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+e(100*L(this._r,255))+"%, "+e(100*L(this._g,255))+"%, "+e(100*L(this._b,255))+"%)":"rgba("+e(100*L(this._r,255))+"%, "+e(100*L(this._g,255))+"%, "+e(100*L(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(O[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(G){var ie="#"+c(this._r,this._g,this._b,this._a),q=ie,ee=this._gradientType?"GradientType = 1, ":"";if(G){var te=t(G);q="#"+c(te._r,te._g,te._b,te._a)}return"progid:DXImageTransform.Microsoft.gradient("+ee+"startColorstr="+ie+",endColorstr="+q+")"},toString:function(G){var ie=!!G;G=G||this._format;var q=!1;return ie||!(this._a<1&&this._a>=0)||"hex"!==G&&"hex6"!==G&&"hex3"!==G&&"hex4"!==G&&"hex8"!==G&&"name"!==G?("rgb"===G&&(q=this.toRgbString()),"prgb"===G&&(q=this.toPercentageRgbString()),"hex"!==G&&"hex6"!==G||(q=this.toHexString()),"hex3"===G&&(q=this.toHexString(!0)),"hex4"===G&&(q=this.toHex8String(!0)),"hex8"===G&&(q=this.toHex8String()),"name"===G&&(q=this.toName()),"hsl"===G&&(q=this.toHslString()),"hsv"===G&&(q=this.toHsvString()),q||this.toHexString()):"name"===G&&0===this._a?this.toName():this.toRgbString()},clone:function(){return t(this.toString())},_applyModification:function(G,ie){var q=G.apply(null,[this].concat([].slice.call(ie)));return this._r=q._r,this._g=q._g,this._b=q._b,this.setAlpha(q._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(o,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(h,arguments)},spin:function(){return this._applyModification(s,arguments)},_applyCombination:function(G,ie){return G.apply(null,[this].concat([].slice.call(ie)))},analogous:function(){return this._applyCombination(I,arguments)},complement:function(){return this._applyCombination(k,arguments)},monochromatic:function(){return this._applyCombination(C,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(A,arguments)}},t.fromRatio=function(G,ie){if("object"==typeof G){var q={};for(var ee in G)G.hasOwnProperty(ee)&&(q[ee]="a"===ee?G[ee]:Y(G[ee]));G=q}return t(G,ie)},t.equals=function(G,ie){return!(!G||!ie)&&t(G).toRgbString()==t(ie).toRgbString()},t.random=function(){return t.fromRatio({r:a(),g:a(),b:a()})},t.mix=function(G,ie,q){q=0===q?0:q||50;var ee=t(G).toRgb(),te=t(ie).toRgb(),se=q/100;return t({r:(te.r-ee.r)*se+ee.r,g:(te.g-ee.g)*se+ee.g,b:(te.b-ee.b)*se+ee.b,a:(te.a-ee.a)*se+ee.a})},t.readability=function(G,ie){var q=t(G),ee=t(ie);return(g.max(q.getLuminance(),ee.getLuminance())+.05)/(g.min(q.getLuminance(),ee.getLuminance())+.05)},t.isReadable=function(G,ie,q){var ee,te,ue,de,he,se=t.readability(G,ie);switch(te=!1,(ue=q,"AA"!==(de=((ue=ue||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==de&&(de="AA"),"small"!==(he=(ue.size||"small").toLowerCase())&&"large"!==he&&(he="small"),ee={level:de,size:he}).level+ee.size){case"AAsmall":case"AAAlarge":te=se>=4.5;break;case"AAlarge":te=se>=3;break;case"AAAsmall":te=se>=7}return te},t.mostReadable=function(G,ie,q){var ee,te,se,ue,de=null,he=0;te=(q=q||{}).includeFallbackColors,se=q.level,ue=q.size;for(var xe=0;xe<ie.length;xe++)(ee=t.readability(G,ie[xe]))>he&&(he=ee,de=t(ie[xe]));return t.isReadable(G,de,{level:se,size:ue})||!te?de:(q.includeFallbackColors=!1,t.mostReadable(G,["#fff","#000"],q))};var R=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=t.hexNames=function(G){var ie={};for(var q in G)G.hasOwnProperty(q)&&(ie[G[q]]=q);return ie}(R);function D(G){return G=parseFloat(G),(isNaN(G)||G<0||G>1)&&(G=1),G}function L(G,ie){var ee;"string"==typeof(ee=G)&&-1!=ee.indexOf(".")&&1===parseFloat(ee)&&(G="100%");var q=function(ee){return"string"==typeof ee&&-1!=ee.indexOf("%")}(G);return G=r(ie,n(0,parseFloat(G))),q&&(G=parseInt(G*ie,10)/100),g.abs(G-ie)<1e-6?1:G%ie/parseFloat(ie)}function B(G){return r(1,n(0,G))}function j(G){return parseInt(G,16)}function W(G){return 1==G.length?"0"+G:""+G}function Y(G){return G<=1&&(G=100*G+"%"),G}function Q(G){return g.round(255*parseFloat(G)).toString(16)}function ne(G){return j(G)/255}var X,$,re,H=($="[\\s|\\(]+("+(X="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",re="[\\s|\\(]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",{CSS_UNIT:new RegExp(X),rgb:new RegExp("rgb"+$),rgba:new RegExp("rgba"+re),hsl:new RegExp("hsl"+$),hsla:new RegExp("hsla"+re),hsv:new RegExp("hsv"+$),hsva:new RegExp("hsva"+re),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function U(G){return!!H.CSS_UNIT.exec(G)}void 0!==oe&&oe.exports?oe.exports=t:window.tinycolor=t}(Math)},{}],313:[function(x,oe,ae){"use strict";oe.exports=m,oe.exports.float32=oe.exports.float=m,oe.exports.fract32=oe.exports.fract=function(w,y){if(w.length){if(w instanceof Float32Array)return new Float32Array(w.length);y instanceof Float32Array||(y=m(w));for(var e=0,r=y.length;e<r;e++)y[e]=w[e]-y[e];return y}return m(w-m(w))};var g=new Float32Array(1);function m(w){return w.length?w instanceof Float32Array?w:new Float32Array(w):(g[0]=w,g[0])}},{}],314:[function(x,oe,ae){"use strict";var g=x("parse-unit");function m(y,e){var r=g(getComputedStyle(y).getPropertyValue(e));return r[0]*w(r[1],y)}function w(y,e){switch(e=e||document.body,y=(y||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),y){case"%":return e.clientHeight/100;case"ch":case"ex":return function(r,n){var a=document.createElement("div");a.style["font-size"]="128"+r,n.appendChild(a);var t=m(a,"font-size")/128;return n.removeChild(a),t}(y,e);case"em":return m(e,"font-size");case"rem":return m(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}oe.exports=w},{"parse-unit":251}],315:[function(x,oe,ae){var g,m;g=this,m=function(g){"use strict";function m(c){return c}function w(c){if(null==c)return m;var f,l,h=c.scale[0],d=c.scale[1],o=c.translate[0],_=c.translate[1];return function(s,k){k||(f=l=0);var M=2,A=s.length,E=new Array(A);for(E[0]=(f+=s[0])*h+o,E[1]=(l+=s[1])*d+_;M<A;)E[M]=s[M],++M;return E}}function y(c){var f,l=w(c.transform),h=1/0,d=h,o=-h,_=-h;function s(M){(M=l(M))[0]<h&&(h=M[0]),M[0]>o&&(o=M[0]),M[1]<d&&(d=M[1]),M[1]>_&&(_=M[1])}function k(M){switch(M.type){case"GeometryCollection":M.geometries.forEach(k);break;case"Point":s(M.coordinates);break;case"MultiPoint":M.coordinates.forEach(s)}}for(f in c.arcs.forEach(function(M){for(var A,E=-1,I=M.length;++E<I;)(A=l(M[E],E))[0]<h&&(h=A[0]),A[0]>o&&(o=A[0]),A[1]<d&&(d=A[1]),A[1]>_&&(_=A[1])}),c.objects)k(c.objects[f]);return[h,d,o,_]}function e(c,f){var l=f.id,h=f.bbox,d=null==f.properties?{}:f.properties,o=r(c,f);return null==l&&null==h?{type:"Feature",properties:d,geometry:o}:null==h?{type:"Feature",id:l,properties:d,geometry:o}:{type:"Feature",id:l,bbox:h,properties:d,geometry:o}}function r(c,f){var l=w(c.transform),h=c.arcs;function d(M,A){A.length&&A.pop();for(var E=h[M<0?~M:M],I=0,C=E.length;I<C;++I)A.push(l(E[I],I));M<0&&function(R,O){for(var D,L=R.length,B=L-O;B<--L;)D=R[B],R[B++]=R[L],R[L]=D}(A,C)}function o(M){return l(M)}function _(M){for(var A=[],E=0,I=M.length;E<I;++E)d(M[E],A);return A.length<2&&A.push(A[0]),A}function s(M){for(var A=_(M);A.length<4;)A.push(A[0]);return A}function k(M){return M.map(s)}return function M(A){var E,I=A.type;switch(I){case"GeometryCollection":return{type:I,geometries:A.geometries.map(M)};case"Point":E=o(A.coordinates);break;case"MultiPoint":E=A.coordinates.map(o);break;case"LineString":E=_(A.arcs);break;case"MultiLineString":E=A.arcs.map(_);break;case"Polygon":E=k(A.arcs);break;case"MultiPolygon":E=A.arcs.map(k);break;default:return null}return{type:I,coordinates:E}}(f)}function n(c,f){var l={},h={},d={},o=[],_=-1;function s(k,M){for(var A in k){var E=k[A];delete M[E.start],delete E.start,delete E.end,E.forEach(function(I){l[I<0?~I:I]=1}),o.push(E)}}return f.forEach(function(k,M){var A,E=c.arcs[k<0?~k:k];E.length<3&&!E[1][0]&&!E[1][1]&&(A=f[++_],f[_]=k,f[M]=A)}),f.forEach(function(k){var M,A,D,L,B,j,E=(j=(B=c.arcs[(D=k)<0?~D:D])[0],c.transform?(L=[0,0],B.forEach(function(W){L[0]+=W[0],L[1]+=W[1]})):L=B[B.length-1],D<0?[L,j]:[j,L]),I=E[0],C=E[1];if(M=d[I])if(delete d[M.end],M.push(k),M.end=C,A=h[C]){delete h[A.start];var R=A===M?M:M.concat(A);h[R.start=M.start]=d[R.end=A.end]=R}else h[M.start]=d[M.end]=M;else if(M=h[C])if(delete h[M.start],M.unshift(k),M.start=I,A=d[I]){delete d[A.end];var O=A===M?M:A.concat(M);h[O.start=A.start]=d[O.end=M.end]=O}else h[M.start]=d[M.end]=M;else h[(M=[k]).start=I]=d[M.end=C]=M}),s(d,h),s(h,d),f.forEach(function(k){l[k<0?~k:k]||o.push([k])}),o}function a(c,f,l){var h,d,o;if(arguments.length>1)h=t(0,f,l);else for(d=0,h=new Array(o=c.arcs.length);d<o;++d)h[d]=d;return{type:"MultiLineString",arcs:n(c,h)}}function t(c,f,l){var h,d=[],o=[];function _(M){var A=M<0?~M:M;(o[A]||(o[A]=[])).push({i:M,g:h})}function s(M){M.forEach(_)}function k(M){M.forEach(s)}return function M(A){switch(h=A,A.type){case"GeometryCollection":A.geometries.forEach(M);break;case"LineString":s(A.arcs);break;case"MultiLineString":case"Polygon":k(A.arcs);break;case"MultiPolygon":A.arcs.forEach(k)}}(f),o.forEach(null==l?function(M){d.push(M[0].i)}:function(M){l(M[0].g,M[M.length-1].g)&&d.push(M[0].i)}),d}function p(c,f){var l={},h=[],d=[];function o(s){s.forEach(function(k){k.forEach(function(M){(l[M=M<0?~M:M]||(l[M]=[])).push(s)})}),h.push(s)}function _(s){return function(k){for(var M,A=-1,E=k.length,I=k[E-1],C=0;++A<E;)C+=(M=I)[0]*(I=k[A])[1]-M[1]*I[0];return Math.abs(C)}(r(c,{type:"Polygon",arcs:[s]}).coordinates[0])}return f.forEach(function s(k){switch(k.type){case"GeometryCollection":k.geometries.forEach(s);break;case"Polygon":o(k.arcs);break;case"MultiPolygon":k.arcs.forEach(o)}}),h.forEach(function(s){if(!s._){var k=[],M=[s];for(s._=1,d.push(k);s=M.pop();)k.push(s),s.forEach(function(A){A.forEach(function(E){l[E<0?~E:E].forEach(function(I){I._||(I._=1,M.push(I))})})})}}),h.forEach(function(s){delete s._}),{type:"MultiPolygon",arcs:d.map(function(s){var k,M=[];if(s.forEach(function(R){R.forEach(function(O){O.forEach(function(D){l[D<0?~D:D].length<2&&M.push(D)})})}),(k=(M=n(c,M)).length)>1)for(var A,E,I=1,C=_(M[0]);I<k;++I)(A=_(M[I]))>C&&(E=M[0],M[0]=M[I],M[I]=E,C=A);return M}).filter(function(s){return s.length>0})}}function u(c,f){for(var l=0,h=c.length;l<h;){var d=l+h>>>1;c[d]<f?l=d+1:h=d}return l}function i(c){if(null==c)return m;var f,l,h=c.scale[0],d=c.scale[1],o=c.translate[0],_=c.translate[1];return function(s,k){k||(f=l=0);var M=2,A=s.length,E=new Array(A),I=Math.round((s[0]-o)/h),C=Math.round((s[1]-_)/d);for(E[0]=I-f,f=I,E[1]=C-l,l=C;M<A;)E[M]=s[M],++M;return E}}g.bbox=y,g.feature=function(c,f){return"string"==typeof f&&(f=c.objects[f]),"GeometryCollection"===f.type?{type:"FeatureCollection",features:f.geometries.map(function(l){return e(c,l)})}:e(c,f)},g.merge=function(c){return r(c,p.apply(this,arguments))},g.mergeArcs=p,g.mesh=function(c){return r(c,a.apply(this,arguments))},g.meshArcs=a,g.neighbors=function(c){var f={},l=c.map(function(){return[]});function h(R,O){R.forEach(function(D){D<0&&(D=~D);var L=f[D];L?L.push(O):f[D]=[O]})}function d(R,O){R.forEach(function(D){h(D,O)})}var o={LineString:h,MultiLineString:d,Polygon:d,MultiPolygon:function(R,O){R.forEach(function(D){d(D,O)})}};for(var _ in c.forEach(function R(O,D){"GeometryCollection"===O.type?O.geometries.forEach(function(L){R(L,D)}):O.type in o&&o[O.type](O.arcs,D)}),f)for(var s=f[_],k=s.length,M=0;M<k;++M)for(var A=M+1;A<k;++A){var E,I=s[M],C=s[A];(E=l[I])[_=u(E,C)]!==C&&E.splice(_,0,C),(E=l[C])[_=u(E,I)]!==I&&E.splice(_,0,I)}return l},g.quantize=function(c,f){if(c.transform)throw new Error("already quantized");if(f&&f.scale)s=c.bbox;else{if(!((l=Math.floor(f))>=2))throw new Error("n must be \u22652");var l,h=(s=c.bbox||y(c))[0],d=s[1],o=s[2],_=s[3];f={scale:[o-h?(o-h)/(l-1):1,_-d?(_-d)/(l-1):1],translate:[h,d]}}var s,k,M=i(f),A=c.objects,E={};function I(R){return M(R)}function C(R){var O;switch(R.type){case"GeometryCollection":O={type:"GeometryCollection",geometries:R.geometries.map(C)};break;case"Point":O={type:"Point",coordinates:I(R.coordinates)};break;case"MultiPoint":O={type:"MultiPoint",coordinates:R.coordinates.map(I)};break;default:return R}return null!=R.id&&(O.id=R.id),null!=R.bbox&&(O.bbox=R.bbox),null!=R.properties&&(O.properties=R.properties),O}for(k in A)E[k]=C(A[k]);return{type:"Topology",bbox:s,transform:f,objects:E,arcs:c.arcs.map(function(R){var O,D=0,L=1,B=R.length,j=new Array(B);for(j[0]=M(R[0],0);++D<B;)((O=M(R[D],D))[0]||O[1])&&(j[L++]=O);return 1===L&&(j[L++]=[0,0]),j.length=L,j})}},g.transform=w,g.untransform=i,Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ae&&void 0!==oe?ae:(g=g||self).topojson=g.topojson||{})},{}],316:[function(x,oe,ae){"use strict";var g=x("../prototype/is");oe.exports=function(m){if("function"!=typeof m||!hasOwnProperty.call(m,"length"))return!1;try{if("number"!=typeof m.length||"function"!=typeof m.call||"function"!=typeof m.apply)return!1}catch(w){return!1}return!g(m)}},{"../prototype/is":323}],317:[function(x,oe,ae){"use strict";var g=x("../value/is"),m=x("../object/is"),w=x("../string/coerce"),y=x("./to-short-string"),e=function(r,n){return r.replace("%v",y(n))};oe.exports=function(r,n,a){if(!m(a))throw new TypeError(e(n,r));if(!g(r)){if("default"in a)return a.default;if(a.isOptional)return null}var t=w(a.errorMessage);throw g(t)||(t=n),new TypeError(e(t,r))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(x,oe,ae){"use strict";oe.exports=function(g){try{return g.toString()}catch(m){try{return String(g)}catch(w){return null}}}},{}],319:[function(x,oe,ae){"use strict";var g=x("./safe-to-string"),m=/[\n\r\u2028\u2029]/g;oe.exports=function(w){var y=g(w);return null===y?"<Non-coercible to string value>":(y.length>100&&(y=y.slice(0,99)+"\u2026"),y=y.replace(m,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":318}],320:[function(x,oe,ae){"use strict";var g=x("../value/is"),m={object:!0,function:!0,undefined:!0};oe.exports=function(w){return!!g(w)&&hasOwnProperty.call(m,typeof w)}},{"../value/is":326}],321:[function(x,oe,ae){"use strict";var g=x("../lib/resolve-exception"),m=x("./is");oe.exports=function(w){return m(w)?w:g(w,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(x,oe,ae){"use strict";var g=x("../function/is"),m=/^\s*class[\s{/}]/,w=Function.prototype.toString;oe.exports=function(y){return!!g(y)&&!m.test(w.call(y))}},{"../function/is":316}],323:[function(x,oe,ae){"use strict";var g=x("../object/is");oe.exports=function(m){if(!g(m))return!1;try{return!!m.constructor&&m.constructor.prototype===m}catch(w){return!1}}},{"../object/is":320}],324:[function(x,oe,ae){"use strict";var g=x("../value/is"),m=x("../object/is"),w=Object.prototype.toString;oe.exports=function(y){if(!g(y))return null;if(m(y)){var e=y.toString;if("function"!=typeof e||e===w)return null}try{return""+y}catch(r){return null}}},{"../object/is":320,"../value/is":326}],325:[function(x,oe,ae){"use strict";var g=x("../lib/resolve-exception"),m=x("./is");oe.exports=function(w){return m(w)?w:g(w,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(x,oe,ae){"use strict";oe.exports=function(g){return null!=g}},{}],327:[function(x,oe,ae){(function(g){(function(){"use strict";var m=x("bit-twiddle"),w=x("dup"),y=x("buffer").Buffer;g.__TYPEDARRAY_POOL||(g.__TYPEDARRAY_POOL={UINT8:w([32,0]),UINT16:w([32,0]),UINT32:w([32,0]),BIGUINT64:w([32,0]),INT8:w([32,0]),INT16:w([32,0]),INT32:w([32,0]),BIGINT64:w([32,0]),FLOAT:w([32,0]),DOUBLE:w([32,0]),DATA:w([32,0]),UINT8C:w([32,0]),BUFFER:w([32,0])});var e="undefined"!=typeof Uint8ClampedArray,r="undefined"!=typeof BigUint64Array,n="undefined"!=typeof BigInt64Array,a=g.__TYPEDARRAY_POOL;a.UINT8C||(a.UINT8C=w([32,0])),a.BIGUINT64||(a.BIGUINT64=w([32,0])),a.BIGINT64||(a.BIGINT64=w([32,0])),a.BUFFER||(a.BUFFER=w([32,0]));var t=a.DATA,p=a.BUFFER;function u(C){if(C){var O=m.log2(C.length||C.byteLength);t[O].push(C)}}function i(C){C=m.nextPow2(C);var R=m.log2(C),O=t[R];return O.length>0?O.pop():new ArrayBuffer(C)}function c(C){return new Uint8Array(i(C),0,C)}function f(C){return new Uint16Array(i(2*C),0,C)}function l(C){return new Uint32Array(i(4*C),0,C)}function h(C){return new Int8Array(i(C),0,C)}function d(C){return new Int16Array(i(2*C),0,C)}function o(C){return new Int32Array(i(4*C),0,C)}function _(C){return new Float32Array(i(4*C),0,C)}function s(C){return new Float64Array(i(8*C),0,C)}function k(C){return e?new Uint8ClampedArray(i(C),0,C):c(C)}function M(C){return r?new BigUint64Array(i(8*C),0,C):null}function A(C){return n?new BigInt64Array(i(8*C),0,C):null}function E(C){return new DataView(i(C),0,C)}function I(C){C=m.nextPow2(C);var R=m.log2(C),O=p[R];return O.length>0?O.pop():new y(C)}ae.free=function(C){if(y.isBuffer(C))p[m.log2(C.length)].push(C);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(C)&&(C=C.buffer),!C)return;var O=0|m.log2(C.length||C.byteLength);t[O].push(C)}},ae.freeUint8=ae.freeUint16=ae.freeUint32=ae.freeBigUint64=ae.freeInt8=ae.freeInt16=ae.freeInt32=ae.freeBigInt64=ae.freeFloat32=ae.freeFloat=ae.freeFloat64=ae.freeDouble=ae.freeUint8Clamped=ae.freeDataView=function(C){u(C.buffer)},ae.freeArrayBuffer=u,ae.freeBuffer=function(C){p[m.log2(C.length)].push(C)},ae.malloc=function(C,R){if(void 0===R||"arraybuffer"===R)return i(C);switch(R){case"uint8":return c(C);case"uint16":return f(C);case"uint32":return l(C);case"int8":return h(C);case"int16":return d(C);case"int32":return o(C);case"float":case"float32":return _(C);case"double":case"float64":return s(C);case"uint8_clamped":return k(C);case"bigint64":return A(C);case"biguint64":return M(C);case"buffer":return I(C);case"data":case"dataview":return E(C);default:return null}return null},ae.mallocArrayBuffer=i,ae.mallocUint8=c,ae.mallocUint16=f,ae.mallocUint32=l,ae.mallocInt8=h,ae.mallocInt16=d,ae.mallocInt32=o,ae.mallocFloat32=ae.mallocFloat=_,ae.mallocFloat64=ae.mallocDouble=s,ae.mallocUint8Clamped=k,ae.mallocBigUint64=M,ae.mallocBigInt64=A,ae.mallocDataView=E,ae.mallocBuffer=I,ae.clearCache=function(){for(var C=0;C<32;++C)a.UINT8[C].length=0,a.UINT16[C].length=0,a.UINT32[C].length=0,a.INT8[C].length=0,a.INT16[C].length=0,a.INT32[C].length=0,a.FLOAT[C].length=0,a.DOUBLE[C].length=0,a.BIGUINT64[C].length=0,a.BIGINT64[C].length=0,a.UINT8C[C].length=0,t[C].length=0,p[C].length=0}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(x,oe,ae){var g=/[\'\"]/;oe.exports=function(m){return m?(g.test(m.charAt(0))&&(m=m.substr(1)),g.test(m.charAt(m.length-1))&&(m=m.substr(0,m.length-1)),m):""}},{}],329:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w){Array.isArray(w)||(w=[].slice.call(arguments,2));for(var y=0,e=w.length;y<e;y++){var r=w[y];for(var n in r)if((void 0===m[n]||Array.isArray(m[n])||g[n]!==m[n])&&n in m){var a;if(!0===r[n])a=m[n];else if(!1===r[n]||"function"==typeof r[n]&&void 0===(a=r[n](m[n],g,m)))continue;g[n]=a}}return g}},{}],330:[function(x,oe,ae){(function(g){(function(){function m(w){try{if(!g.localStorage)return!1}catch(e){return!1}var y=g.localStorage[w];return null!=y&&"true"===String(y).toLowerCase()}oe.exports=function(w,y){if(m("noDeprecation"))return w;var e=!1;return function(){if(!e){if(m("throwDeprecation"))throw new Error(y);m("traceDeprecation")?console.trace(y):console.warn(y),e=!0}return w.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],331:[function(x,oe,ae){var g=x("get-canvas-context");oe.exports=function(m){return g("webgl",m)}},{"get-canvas-context":194}],332:[function(x,oe,ae){var g=x("../main"),m=x("object-assign"),w=g.instance();function y(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}m(y.prototype=new g.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(u,i){if("string"==typeof u){var c=u.match(r);return c?c[0]:""}var f=this._validateYear(u),l=u.month(),h=""+this.toChineseMonth(f,l);return i&&h.length<2&&(h="0"+h),this.isIntercalaryMonth(f,l)&&(h+="i"),h},monthNames:function(u){if("string"==typeof u){var i=u.match(n);return i?i[0]:""}var c=this._validateYear(u),f=u.month(),l=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(c,f)-1];return this.isIntercalaryMonth(c,f)&&(l="\u95f0"+l),l},monthNamesShort:function(u){if("string"==typeof u){var i=u.match(a);return i?i[0]:""}var c=this._validateYear(u),f=u.month(),l=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(c,f)-1];return this.isIntercalaryMonth(c,f)&&(l="\u95f0"+l),l},parseMonth:function(u,i){u=this._validateYear(u);var c,f=parseInt(i);if(isNaN(f))"\u95f0"===i[0]&&(c=!0,i=i.substring(1)),"\u6708"===i[i.length-1]&&(i=i.substring(0,i.length-1)),f=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(i);else{var l=i[i.length-1];c="i"===l||"I"===l}return this.toMonthIndex(u,f,c)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(u,i){if(u.year&&(u=u.year()),"number"!=typeof u||u<1888||u>2111)throw i.replace(/\{0\}/,this.local.name);return u},toMonthIndex:function(u,i,c){var f=this.intercalaryMonth(u);if(c&&i!==f||i<1||i>12)throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);return f?!c&&i<=f?i-1:i:i-1},toChineseMonth:function(u,i){u.year&&(i=(u=u.year()).month());var c=this.intercalaryMonth(u);if(i<0||i>(c?12:11))throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?i<c?i+1:i:i+1},intercalaryMonth:function(u){return u=this._validateYear(u),t[u-t[0]]>>13},isIntercalaryMonth:function(u,i){u.year&&(i=(u=u.year()).month());var c=this.intercalaryMonth(u);return!!c&&c===i},leapYear:function(u){return 0!==this.intercalaryMonth(u)},weekOfYear:function(u,i,c){var f,l=this._validateYear(u,g.local.invalidyear),h=p[l-p[0]];(f=w.newDate(h>>9&4095,h>>5&15,31&h)).add(4-(f.dayOfWeek()||7),"d");var s=this.toJD(u,i,c)-f.toJD();return 1+Math.floor(s/7)},monthsInYear:function(u){return this.leapYear(u)?13:12},daysInMonth:function(u,i){u.year&&(i=u.month(),u=u.year()),u=this._validateYear(u);var c=t[u-t[0]];if(i>(c>>13?12:11))throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);return c&1<<12-i?30:29},weekDay:function(u,i,c){return(this.dayOfWeek(u,i,c)||7)<6},toJD:function(u,i,c){var f=this._validate(u,h,c,g.local.invalidDate);u=this._validateYear(f.year()),i=f.month(),c=f.day();var l=this.isIntercalaryMonth(u,i),h=this.toChineseMonth(u,i),d=function(o,_,s,k,M){var A,E,I;if("object"==typeof o)E=o,A=_||{};else{var C;if(!("number"==typeof o&&o>=1888&&o<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof _&&_>=1&&_<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof s&&s>=1&&s<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof k?(C=!1,A=k):(C=!!k,A={}),E={year:o,month:_,day:s,isIntercalary:C}}I=E.day-1;var R,O=t[E.year-t[0]],D=O>>13;R=D&&(E.month>D||E.isIntercalary)?E.month:E.month-1;for(var L=0;L<R;L++)I+=O&1<<12-L?30:29;var B=p[E.year-p[0]],j=new Date(B>>9&4095,(B>>5&15)-1,(31&B)+I);return A.year=j.getFullYear(),A.month=1+j.getMonth(),A.day=j.getDate(),A}(u,h,c,l);return w.toJD(d.year,d.month,d.day)},fromJD:function(u){var i=w.fromJD(u),c=function(l,h,d,o){var _,s;if("object"==typeof l)_=l,s=h||{};else{if(!("number"==typeof l&&l>=1888&&l<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof h&&h>=1&&h<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof d&&d>=1&&d<=31))throw new Error("Solar day outside range 1 - 31");_={year:l,month:h,day:d},s={}}var k=p[_.year-p[0]];s.year=(_.year<<9|_.month<<5|_.day)>=k?_.year:_.year-1,k=p[s.year-p[0]];var A,E=new Date(k>>9&4095,(k>>5&15)-1,31&k),I=new Date(_.year,_.month-1,_.day);A=Math.round((I-E)/864e5);var C,R=t[s.year-t[0]];for(C=0;C<13;C++){var O=R&1<<12-C?30:29;if(A<O)break;A-=O}var D=R>>13;return!D||C<D?(s.isIntercalary=!1,s.month=1+C):C===D?(s.isIntercalary=!0,s.month=C):(s.isIntercalary=!1,s.month=C),s.day=1+A,s}(i.year(),i.month(),i.day()),f=this.toMonthIndex(c.year,c.month,c.isIntercalary);return this.newDate(c.year,f,c.day)},fromString:function(u){var i=u.match(e),c=this._validateYear(+i[1]),h=this.toMonthIndex(c,+i[2],!!i[3]);return this.newDate(c,h,+i[4])},add:function(u,i,c){var f=u.year(),l=u.month(),h=this.isIntercalaryMonth(f,l),d=this.toChineseMonth(f,l),o=Object.getPrototypeOf(y.prototype).add.call(this,u,i,c);if("y"===c){var _=o.year(),s=o.month(),k=this.isIntercalaryMonth(_,d),M=this.toMonthIndex(_,d,!(!h||!k));M!==s&&o.month(M)}return o}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,r=/^\d?\d[iI]?/m,n=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,a=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;g.calendars.chinese=y;var t=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],p=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":346,"object-assign":247}],333:[function(x,oe,ae){var g=x("../main");function w(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}x("object-assign")(w.prototype=new g.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var e=this._validate(y,this.minMonth,this.minDay,g.local.invalidYear);return(y=e.year()+(e.year()<0?1:0))%4==3||y%4==-1},monthsInYear:function(y){return this._validate(y,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear),13},weekOfYear:function(y,e,r){var n=this.newDate(y,e,r);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(y,e){var r=this._validate(y,e,this.minDay,g.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(13===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(y,e,r){return(this.dayOfWeek(y,e,r)||7)<6},toJD:function(y,e,r){var n=this._validate(y,e,r,g.local.invalidDate);return(y=n.year())<0&&y++,n.day()+30*(n.month()-1)+365*(y-1)+Math.floor(y/4)+this.jdEpoch-1},fromJD:function(y){var e=Math.floor(y)+.5-this.jdEpoch,r=Math.floor((e-Math.floor((e+366)/1461))/365)+1;r<=0&&r--,e=Math.floor(y)+.5-this.newDate(r,1,1).toJD();var n=Math.floor(e/30)+1;return this.newDate(r,n,e-30*(n-1)+1)}}),g.calendars.coptic=w},{"../main":346,"object-assign":247}],334:[function(x,oe,ae){var g=x("../main");function w(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x("object-assign")(w.prototype=new g.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,g.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,g.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,g.local.invalidYear),400},weekOfYear:function(e,r,n){var a=this.newDate(e,r,n);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/8)+1},daysInMonth:function(e,r){var n=this._validate(e,r,this.minDay,g.local.invalidMonth);return this.daysPerMonth[n.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,r,n){return(this._validate(e,r,n,g.local.invalidDate).day()+1)%8},weekDay:function(e,r,n){var a=this.dayOfWeek(e,r,n);return a>=2&&a<=6},extraInfo:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidDate);return{century:y[Math.floor((a.year()-1)/100)+1]||""}},toJD:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidDate);return e=a.year()+(a.year()<0?1:0),r=a.month(),(n=a.day())+(r>1?16:0)+(r>2?32*(r-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var r=Math.floor(e/400)+1;e-=400*(r-1),e+=e>15?16:0;var n=Math.floor(e/32)+1;return this.newDate(r<=0?r-1:r,n,e-32*(n-1)+1)}});var y={20:"Fruitbat",21:"Anchovy"};g.calendars.discworld=w},{"../main":346,"object-assign":247}],335:[function(x,oe,ae){var g=x("../main");function w(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}x("object-assign")(w.prototype=new g.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var e=this._validate(y,this.minMonth,this.minDay,g.local.invalidYear);return(y=e.year()+(e.year()<0?1:0))%4==3||y%4==-1},monthsInYear:function(y){return this._validate(y,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear),13},weekOfYear:function(y,e,r){var n=this.newDate(y,e,r);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(y,e){var r=this._validate(y,e,this.minDay,g.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(13===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(y,e,r){return(this.dayOfWeek(y,e,r)||7)<6},toJD:function(y,e,r){var n=this._validate(y,e,r,g.local.invalidDate);return(y=n.year())<0&&y++,n.day()+30*(n.month()-1)+365*(y-1)+Math.floor(y/4)+this.jdEpoch-1},fromJD:function(y){var e=Math.floor(y)+.5-this.jdEpoch,r=Math.floor((e-Math.floor((e+366)/1461))/365)+1;r<=0&&r--,e=Math.floor(y)+.5-this.newDate(r,1,1).toJD();var n=Math.floor(e/30)+1;return this.newDate(r,n,e-30*(n-1)+1)}}),g.calendars.ethiopian=w},{"../main":346,"object-assign":247}],336:[function(x,oe,ae){var g=x("../main");function w(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function y(e,r){return e-r*Math.floor(e/r)}x("object-assign")(w.prototype=new g.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return this._leapYear(r.year())},_leapYear:function(e){return y(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,g.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,r,n){var a=this.newDate(e,r,n);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,r){return e.year&&(r=e.month(),e=e.year()),this._validate(e,r,this.minDay,g.local.invalidMonth),12===r&&this.leapYear(e)||8===r&&5===y(this.daysInYear(e),10)?30:9===r&&3===y(this.daysInYear(e),10)?29:this.daysPerMonth[r-1]},weekDay:function(e,r,n){return 6!==this.dayOfWeek(e,r,n)},extraInfo:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidDate);return{yearType:(this.leapYear(a)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(a)%10-3]}},toJD:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidDate);e=a.year(),r=a.month(),n=a.day();var t=e<=0?e+1:e,p=this.jdEpoch+this._delay1(t)+this._delay2(t)+n+1;if(r<7){for(var u=7;u<=this.monthsInYear(e);u++)p+=this.daysInMonth(e,u);for(u=1;u<r;u++)p+=this.daysInMonth(e,u)}else for(u=7;u<r;u++)p+=this.daysInMonth(e,u);return p},_delay1:function(e){var r=Math.floor((235*e-234)/19),a=29*r+Math.floor((12084+13753*r)/25920);return y(3*(a+1),7)<3&&a++,a},_delay2:function(e){var r=this._delay1(e-1),n=this._delay1(e);return this._delay1(e+1)-n==356?2:n-r==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var r=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===r?1:r+1,7,1);)r++;for(var n=e<this.toJD(r,1,1)?7:1;e>this.toJD(r,n,this.daysInMonth(r,n));)n++;var a=e-this.toJD(r,n,1)+1;return this.newDate(r,n,a)}}),g.calendars.hebrew=w},{"../main":346,"object-assign":247}],337:[function(x,oe,ae){var g=x("../main");function w(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}x("object-assign")(w.prototype=new g.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(y){return(11*this._validate(y,this.minMonth,this.minDay,g.local.invalidYear).year()+14)%30<11},weekOfYear:function(y,e,r){var n=this.newDate(y,e,r);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(y){return this.leapYear(y)?355:354},daysInMonth:function(y,e){var r=this._validate(y,e,this.minDay,g.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(12===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(y,e,r){return 5!==this.dayOfWeek(y,e,r)},toJD:function(y,e,r){var n=this._validate(y,e,r,g.local.invalidDate);return y=n.year(),e=n.month(),y=y<=0?y+1:y,(r=n.day())+Math.ceil(29.5*(e-1))+354*(y-1)+Math.floor((3+11*y)/30)+this.jdEpoch-1},fromJD:function(y){y=Math.floor(y)+.5;var e=Math.floor((30*(y-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var r=Math.min(12,Math.ceil((y-29-this.toJD(e,1,1))/29.5)+1),n=y-this.toJD(e,r,1)+1;return this.newDate(e,r,n)}}),g.calendars.islamic=w},{"../main":346,"object-assign":247}],338:[function(x,oe,ae){var g=x("../main");function w(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}x("object-assign")(w.prototype=new g.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var e=this._validate(y,this.minMonth,this.minDay,g.local.invalidYear);return(y=e.year()<0?e.year()+1:e.year())%4==0},weekOfYear:function(y,e,r){var n=this.newDate(y,e,r);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(y,e){var r=this._validate(y,e,this.minDay,g.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(2===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(y,e,r){return(this.dayOfWeek(y,e,r)||7)<6},toJD:function(y,e,r){var n=this._validate(y,e,r,g.local.invalidDate);return y=n.year(),e=n.month(),r=n.day(),y<0&&y++,e<=2&&(y--,e+=12),Math.floor(365.25*(y+4716))+Math.floor(30.6001*(e+1))+r-1524.5},fromJD:function(y){var e=Math.floor(y+.5)+1524,r=Math.floor((e-122.1)/365.25),n=Math.floor(365.25*r),a=Math.floor((e-n)/30.6001),t=a-Math.floor(a<14?1:13),p=r-Math.floor(t>2?4716:4715),u=e-n-Math.floor(30.6001*a);return p<=0&&p--,this.newDate(p,t,u)}}),g.calendars.julian=w},{"../main":346,"object-assign":247}],339:[function(x,oe,ae){var g=x("../main");function w(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}function y(r,n){return r-n*Math.floor(r/n)}function e(r,n){return y(r-1,n)+1}x("object-assign")(w.prototype=new g.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(r){return this._validate(r,this.minMonth,this.minDay,g.local.invalidYear),!1},formatYear:function(r){r=this._validate(r,this.minMonth,this.minDay,g.local.invalidYear).year();var n=Math.floor(r/400);return r%=400,r+=r<0?400:0,n+"."+Math.floor(r/20)+"."+r%20},forYear:function(r){if((r=r.split(".")).length<3)throw"Invalid Mayan year";for(var n=0,a=0;a<r.length;a++){var t=parseInt(r[a],10);if(Math.abs(t)>19||a>0&&t<0)throw"Invalid Mayan year";n=20*n+t}return n},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,g.local.invalidYear),18},weekOfYear:function(r,n,a){return this._validate(r,n,a,g.local.invalidDate),0},daysInYear:function(r){return this._validate(r,this.minMonth,this.minDay,g.local.invalidYear),360},daysInMonth:function(r,n){return this._validate(r,n,this.minDay,g.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(r,n,a){return this._validate(r,n,a,g.local.invalidDate).day()},weekDay:function(r,n,a){return this._validate(r,n,a,g.local.invalidDate),!0},extraInfo:function(r,n,a){var t=this._validate(r,n,a,g.local.invalidDate).toJD(),p=this._toHaab(t),u=this._toTzolkin(t);return{haabMonthName:this.local.haabMonths[p[0]-1],haabMonth:p[0],haabDay:p[1],tzolkinDayName:this.local.tzolkinMonths[u[0]-1],tzolkinDay:u[0],tzolkinTrecena:u[1]}},_toHaab:function(r){var n=y(8+(r-=this.jdEpoch)+340,365);return[Math.floor(n/20)+1,y(n,20)]},_toTzolkin:function(r){return[e(20+(r-=this.jdEpoch),20),e(r+4,13)]},toJD:function(r,n,a){var t=this._validate(r,n,a,g.local.invalidDate);return t.day()+20*t.month()+360*t.year()+this.jdEpoch},fromJD:function(r){r=Math.floor(r)+.5-this.jdEpoch;var n=Math.floor(r/360);r%=360,r+=r<0?360:0;var a=Math.floor(r/20);return this.newDate(n,a,r%20)}}),g.calendars.mayan=w},{"../main":346,"object-assign":247}],340:[function(x,oe,ae){var g=x("../main"),m=x("object-assign");function w(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}w.prototype=new g.baseCalendar;var y=g.instance("gregorian");m(w.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return y.leapYear(r.year()+(r.year()<1?1:0)+1469)},weekOfYear:function(e,r,n){var a=this.newDate(e,r,n);return a.add(1-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,r){var n=this._validate(e,r,this.minDay,g.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,r,n){return(this.dayOfWeek(e,r,n)||7)<6},toJD:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidMonth);(e=a.year())<0&&e++;for(var t=a.day(),p=1;p<a.month();p++)t+=this.daysPerMonth[p-1];return t+y.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var r=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(r+1,1,1);)r++;for(var n=e-Math.floor(this.toJD(r,1,1)+.5)+1,a=1;n>this.daysInMonth(r,a);)n-=this.daysInMonth(r,a),a++;return this.newDate(r,a,n)}}),g.calendars.nanakshahi=w},{"../main":346,"object-assign":247}],341:[function(x,oe,ae){var g=x("../main");function w(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}x("object-assign")(w.prototype=new g.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(y){return this.daysInYear(y)!==this.daysPerYear},weekOfYear:function(y,e,r){var n=this.newDate(y,e,r);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(y){if(y=this._validate(y,this.minMonth,this.minDay,g.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[y])return this.daysPerYear;for(var e=0,r=this.minMonth;r<=12;r++)e+=this.NEPALI_CALENDAR_DATA[y][r];return e},daysInMonth:function(y,e){return y.year&&(e=y.month(),y=y.year()),this._validate(y,e,this.minDay,g.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[y]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[y][e]},weekDay:function(y,e,r){return 6!==this.dayOfWeek(y,e,r)},toJD:function(y,e,r){var n=this._validate(y,e,r,g.local.invalidDate);y=n.year(),e=n.month(),r=n.day();var a=g.instance(),t=0,p=e,u=y;this._createMissingCalendarData(y);var i=y-(p>9||9===p&&r>=this.NEPALI_CALENDAR_DATA[u][0]?56:57);for(9!==e&&(t=r,p--);9!==p;)p<=0&&(p=12,u--),t+=this.NEPALI_CALENDAR_DATA[u][p],p--;return 9===e?(t+=r-this.NEPALI_CALENDAR_DATA[u][0])<0&&(t+=a.daysInYear(i)):t+=this.NEPALI_CALENDAR_DATA[u][9]-this.NEPALI_CALENDAR_DATA[u][0],a.newDate(i,1,1).add(t,"d").toJD()},fromJD:function(y){var e=g.instance().fromJD(y),r=e.year(),n=e.dayOfYear(),a=r+56;this._createMissingCalendarData(a);for(var t=9,u=this.NEPALI_CALENDAR_DATA[a][t]-this.NEPALI_CALENDAR_DATA[a][0]+1;n>u;)++t>12&&(t=1,a++),u+=this.NEPALI_CALENDAR_DATA[a][t];return this.newDate(a,t,this.NEPALI_CALENDAR_DATA[a][t]-(u-n))},_createMissingCalendarData:function(y){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var r=y-1;r<y+2;r++)void 0===this.NEPALI_CALENDAR_DATA[r]&&(this.NEPALI_CALENDAR_DATA[r]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),g.calendars.nepali=w},{"../main":346,"object-assign":247}],342:[function(x,oe,ae){var g=x("../main");function w(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function y(e,r){return e-r*Math.floor(e/r)}x("object-assign")(w.prototype=new g.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return 682*((r.year()-(r.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,r,n){var a=this.newDate(e,r,n);return a.add(-(a.dayOfWeek()+1)%7,"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,r){var n=this._validate(e,r,this.minDay,g.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,r,n){return 5!==this.dayOfWeek(e,r,n)},toJD:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidDate);e=a.year(),r=a.month(),n=a.day();var t=e-(e>=0?474:473),p=474+y(t,2820);return n+(r<=7?31*(r-1):30*(r-1)+6)+Math.floor((682*p-110)/2816)+365*(p-1)+1029983*Math.floor(t/2820)+this.jdEpoch-1},fromJD:function(e){var r=(e=Math.floor(e)+.5)-this.toJD(475,1,1),n=Math.floor(r/1029983),a=y(r,1029983),t=2820;if(1029982!==a){var p=Math.floor(a/366),u=y(a,366);t=Math.floor((2134*p+2816*u+2815)/1028522)+p+1}var i=t+2820*n+474,c=e-this.toJD(i=i<=0?i-1:i,1,1)+1,f=c<=186?Math.ceil(c/31):Math.ceil((c-6)/30),l=e-this.toJD(i,f,1)+1;return this.newDate(i,f,l)}}),g.calendars.persian=w,g.calendars.jalali=w},{"../main":346,"object-assign":247}],343:[function(x,oe,ae){var g=x("../main"),m=x("object-assign"),w=g.instance();function y(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}m(y.prototype=new g.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return e=this._t2gYear(r.year()),w.leapYear(e)},weekOfYear:function(e,r,n){var a=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return e=this._t2gYear(a.year()),w.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,r){var n=this._validate(e,r,this.minDay,g.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,r,n){return(this.dayOfWeek(e,r,n)||7)<6},toJD:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidDate);return e=this._t2gYear(a.year()),w.toJD(e,a.month(),a.day())},fromJD:function(e){var r=w.fromJD(e),n=this._g2tYear(r.year());return this.newDate(n,r.month(),r.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),g.calendars.taiwan=y},{"../main":346,"object-assign":247}],344:[function(x,oe,ae){var g=x("../main"),m=x("object-assign"),w=g.instance();function y(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}m(y.prototype=new g.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return e=this._t2gYear(r.year()),w.leapYear(e)},weekOfYear:function(e,r,n){var a=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return e=this._t2gYear(a.year()),w.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,r){var n=this._validate(e,r,this.minDay,g.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,r,n){return(this.dayOfWeek(e,r,n)||7)<6},toJD:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidDate);return e=this._t2gYear(a.year()),w.toJD(e,a.month(),a.day())},fromJD:function(e){var r=w.fromJD(e),n=this._g2tYear(r.year());return this.newDate(n,r.month(),r.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),g.calendars.thai=y},{"../main":346,"object-assign":247}],345:[function(x,oe,ae){var g=x("../main");function w(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x("object-assign")(w.prototype=new g.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return 355===this.daysInYear(r.year())},weekOfYear:function(e,r,n){var a=this.newDate(e,r,n);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var r=0,n=1;n<=12;n++)r+=this.daysInMonth(e,n);return r},daysInMonth:function(e,r){for(var n=this._validate(e,r,this.minDay,g.local.invalidMonth).toJD()-24e5+.5,a=0,t=0;t<y.length;t++){if(y[t]>n)return y[a]-y[a-1];a++}return 30},weekDay:function(e,r,n){return 5!==this.dayOfWeek(e,r,n)},toJD:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidDate),t=12*(a.year()-1)+a.month()-15292;return a.day()+y[t-1]-1+24e5-.5},fromJD:function(e){for(var r=e-24e5+.5,n=0,a=0;a<y.length&&!(y[a]>r);a++)n++;var t=n+15292,p=Math.floor((t-1)/12);return this.newDate(p+1,t-12*p,r-y[n-1]+1)},isValid:function(e,r,n){var a=g.baseCalendar.prototype.isValid.apply(this,arguments);return a&&(a=(e=null!=e.year?e.year:e)>=1276&&e<=1500),a},_validate:function(e,r,n,a){var t=g.baseCalendar.prototype._validate.apply(this,arguments);if(t.year<1276||t.year>1500)throw a.replace(/\{0\}/,this.local.name);return t}}),g.calendars.ummalqura=w;var y=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(x,oe,ae){var g=x("object-assign");function m(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function w(a,t,p,u){if(this._calendar=a,this._year=t,this._month=p,this._day=u,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(n.local.invalidDate||n.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function y(a,t){return"000000".substring(0,t-(a=""+a).length)+a}function e(){this.shortYearCutoff="+10"}function r(a){this.local=this.regionalOptions[a]||this.regionalOptions[""]}g(m.prototype,{instance:function(a,t){a=(a||"gregorian").toLowerCase();var p=this._localCals[a+"-"+(t=t||"")];if(!p&&this.calendars[a]&&(p=new this.calendars[a](t),this._localCals[a+"-"+t]=p),!p)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,a);return p},newDate:function(a,t,p,u,i){return(u=(null!=a&&a.year?a.calendar():"string"==typeof u?this.instance(u,i):u)||this.instance()).newDate(a,t,p)},substituteDigits:function(a){return function(t){return(t+"").replace(/[0-9]/g,function(p){return a[p]})}},substituteChineseDigits:function(a,t){return function(p){for(var u="",i=0;p>0;){var c=p%10;u=(0===c?"":a[c]+t[i])+u,i++,p=Math.floor(p/10)}return 0===u.indexOf(a[1]+t[1])&&(u=u.substr(1)),u||a[0]}}}),g(w.prototype,{newDate:function(a,t,p){return this._calendar.newDate(null==a?this:a,t,p)},year:function(a){return 0===arguments.length?this._year:this.set(a,"y")},month:function(a){return 0===arguments.length?this._month:this.set(a,"m")},day:function(a){return 0===arguments.length?this._day:this.set(a,"d")},date:function(a,t,p){if(!this._calendar.isValid(a,t,p))throw(n.local.invalidDate||n.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=a,this._month=t,this._day=p,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(a,t){return this._calendar.add(this,a,t)},set:function(a,t){return this._calendar.set(this,a,t)},compareTo:function(a){if(this._calendar.name!==a._calendar.name)throw(n.local.differentCalendars||n.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,a._calendar.local.name);var t=this._year!==a._year?this._year-a._year:this._month!==a._month?this.monthOfYear()-a.monthOfYear():this._day-a._day;return 0===t?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(a){return this._calendar.fromJD(a)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(a){return this._calendar.fromJSDate(a)},toString:function(){return(this.year()<0?"-":"")+y(Math.abs(this.year()),4)+"-"+y(this.month(),2)+"-"+y(this.day(),2)}}),g(e.prototype,{_validateLevel:0,newDate:function(a,t,p){return null==a?this.today():(a.year&&(this._validate(a,t,p,n.local.invalidDate||n.regionalOptions[""].invalidDate),p=a.day(),t=a.month(),a=a.year()),new w(this,a,t,p))},today:function(){return this.fromJSDate(new Date)},epoch:function(a){return this._validate(a,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(a){var t=this._validate(a,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+y(Math.abs(t.year()),4)},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear),12},monthOfYear:function(a,t){var p=this._validate(a,t,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth);return(p.month()+this.monthsInYear(p)-this.firstMonth)%this.monthsInYear(p)+this.minMonth},fromMonthOfYear:function(a,t){var p=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(a)+this.minMonth;return this._validate(a,p,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth),p},daysInYear:function(a){var t=this._validate(a,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(a,t,p){var u=this._validate(a,t,p,n.local.invalidDate||n.regionalOptions[""].invalidDate);return u.toJD()-this.newDate(u.year(),this.fromMonthOfYear(u.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(a,t,p){var u=this._validate(a,t,p,n.local.invalidDate||n.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(u))+2)%this.daysInWeek()},extraInfo:function(a,t,p){return this._validate(a,t,p,n.local.invalidDate||n.regionalOptions[""].invalidDate),{}},add:function(a,t,p){return this._validate(a,this.minMonth,this.minDay,n.local.invalidDate||n.regionalOptions[""].invalidDate),this._correctAdd(a,this._add(a,t,p),t,p)},_add:function(a,t,p){if(this._validateLevel++,"d"===p||"w"===p){var u=a.toJD()+t*("w"===p?this.daysInWeek():1),i=a.calendar().fromJD(u);return this._validateLevel--,[i.year(),i.month(),i.day()]}try{var c=a.year()+("y"===p?t:0),f=a.monthOfYear()+("m"===p?t:0);i=a.day(),"y"===p?(a.month()!==this.fromMonthOfYear(c,f)&&(f=this.newDate(c,a.month(),this.minDay).monthOfYear()),f=Math.min(f,this.monthsInYear(c)),i=Math.min(i,this.daysInMonth(c,this.fromMonthOfYear(c,f)))):"m"===p&&(function(h){for(;f<h.minMonth;)c--,f+=h.monthsInYear(c);for(var d=h.monthsInYear(c);f>d-1+h.minMonth;)c++,f-=d,d=h.monthsInYear(c)}(this),i=Math.min(i,this.daysInMonth(c,this.fromMonthOfYear(c,f))));var l=[c,this.fromMonthOfYear(c,f),i];return this._validateLevel--,l}catch(h){throw this._validateLevel--,h}},_correctAdd:function(a,t,p,u){if(!(this.hasYearZero||"y"!==u&&"m"!==u||0!==t[0]&&a.year()>0==t[0]>0)){var i={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[u];t=this._add(a,p*i[0]+(p<0?-1:1)*i[1],i[2])}return a.date(t[0],t[1],t[2])},set:function(a,t,p){this._validate(a,this.minMonth,this.minDay,n.local.invalidDate||n.regionalOptions[""].invalidDate);var u="y"===p?t:a.year(),i="m"===p?t:a.month(),c="d"===p?t:a.day();return"y"!==p&&"m"!==p||(c=Math.min(c,this.daysInMonth(u,i))),a.date(u,i,c)},isValid:function(a,t,p){this._validateLevel++;var u=this.hasYearZero||0!==a;if(u){var i=this.newDate(a,t,this.minDay);u=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(i)&&p>=this.minDay&&p-this.minDay<this.daysInMonth(i)}return this._validateLevel--,u},toJSDate:function(a,t,p){var u=this._validate(a,t,p,n.local.invalidDate||n.regionalOptions[""].invalidDate);return n.instance().fromJD(this.toJD(u)).toJSDate()},fromJSDate:function(a){return this.fromJD(n.instance().fromJSDate(a).toJD())},_validate:function(a,t,p,u){if(a.year){if(0===this._validateLevel&&this.name!==a.calendar().name)throw(n.local.differentCalendars||n.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,a.calendar().local.name);return a}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(a,t,p))throw u.replace(/\{0\}/,this.local.name);var i=this.newDate(a,t,p);return this._validateLevel--,i}catch(c){throw this._validateLevel--,c}}}),g(r.prototype=new e,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var t=this._validate(a,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return(a=t.year()+(t.year()<0?1:0))%4==0&&(a%100!=0||a%400==0)},weekOfYear:function(a,t,p){var u=this.newDate(a,t,p);return u.add(4-(u.dayOfWeek()||7),"d"),Math.floor((u.dayOfYear()-1)/7)+1},daysInMonth:function(a,t){var p=this._validate(a,t,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth);return this.daysPerMonth[p.month()-1]+(2===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(a,t,p){return(this.dayOfWeek(a,t,p)||7)<6},toJD:function(a,t,p){var u=this._validate(a,t,p,n.local.invalidDate||n.regionalOptions[""].invalidDate);a=u.year(),t=u.month(),p=u.day(),a<0&&a++,t<3&&(t+=12,a--);var i=Math.floor(a/100),c=2-i+Math.floor(i/4);return Math.floor(365.25*(a+4716))+Math.floor(30.6001*(t+1))+p+c-1524.5},fromJD:function(a){var t=Math.floor(a+.5),p=Math.floor((t-1867216.25)/36524.25),u=1524+(p=t+1+p-Math.floor(p/4)),i=Math.floor((u-122.1)/365.25),c=Math.floor(365.25*i),f=Math.floor((u-c)/30.6001),l=u-c-Math.floor(30.6001*f),h=f-(f>13.5?13:1),d=i-(h>2.5?4716:4715);return d<=0&&d--,this.newDate(d,h,l)},toJSDate:function(a,t,p){var u=this._validate(a,t,p,n.local.invalidDate||n.regionalOptions[""].invalidDate),i=new Date(u.year(),u.month()-1,u.day());return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setHours(i.getHours()>12?i.getHours()+2:0),i},fromJSDate:function(a){return this.newDate(a.getFullYear(),a.getMonth()+1,a.getDate())}});var n=oe.exports=new m;n.cdate=w,n.baseCalendar=e,n.calendars.gregorian=r},{"object-assign":247}],347:[function(x,oe,ae){var g=x("object-assign"),m=x("./main");g(m.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),m.local=m.regionalOptions[""],g(m.cdate.prototype,{formatDate:function(w,y){return"string"!=typeof w&&(y=w,w=""),this._calendar.formatDate(w||"",this,y)}}),g(m.baseCalendar.prototype,{UNIX_EPOCH:m.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:m.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(w,y,e){if("string"!=typeof w&&(e=y,y=w,w=""),!y)return"";if(y.calendar()!==this)throw m.local.invalidFormat||m.regionalOptions[""].invalidFormat;w=w||this.local.dateFormat;for(var n,a,t,p=(e=e||{}).dayNamesShort||this.local.dayNamesShort,u=e.dayNames||this.local.dayNames,i=e.monthNumbers||this.local.monthNumbers,c=e.monthNamesShort||this.local.monthNamesShort,f=e.monthNames||this.local.monthNames,l=function(I,C){for(var R=1;E+R<w.length&&w.charAt(E+R)===I;)R++;return E+=R-1,Math.floor(R/(C||1))>1},h=function(I,C,R,O){var D=""+C;if(l(I,O))for(;D.length<R;)D="0"+D;return D},d=this,_=function(I,C){return C?"function"==typeof f?f.call(d,I):f[I.month()-d.minMonth]:"function"==typeof c?c.call(d,I):c[I.month()-d.minMonth]},s=this.local.digits,k=function(I){return e.localNumbers&&s?s(I):I},M="",A=!1,E=0;E<w.length;E++)if(A)"'"!==w.charAt(E)||l("'")?M+=w.charAt(E):A=!1;else switch(w.charAt(E)){case"d":M+=k(h("d",y.day(),2));break;case"D":M+=("D",n=y.dayOfWeek(),a=p,t=u,l("D")?t[n]:a[n]);break;case"o":M+=h("o",y.dayOfYear(),3);break;case"w":M+=h("w",y.weekOfYear(),2);break;case"m":M+=(I=y,"function"==typeof i?i.call(d,I,l("m")):k(h("m",I.month(),2)));break;case"M":M+=_(y,l("M"));break;case"y":M+=l("y",2)?y.year():(y.year()%100<10?"0":"")+y.year()%100;break;case"Y":l("Y",2),M+=y.formatYear();break;case"J":M+=y.toJD();break;case"@":M+=(y.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":M+=(y.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":l("'")?M+="'":A=!0;break;default:M+=w.charAt(E)}var I;return M},parseDate:function(w,y,e){if(null==y)throw m.local.invalidArguments||m.regionalOptions[""].invalidArguments;if(""===(y="object"==typeof y?y.toString():y+""))return null;w=w||this.local.dateFormat;var r=(e=e||{}).shortYearCutoff||this.shortYearCutoff;r="string"!=typeof r?r:this.today().year()%100+parseInt(r,10);for(var n=e.dayNamesShort||this.local.dayNamesShort,a=e.dayNames||this.local.dayNames,t=e.parseMonth||this.local.parseMonth,p=e.monthNumbers||this.local.monthNumbers,u=e.monthNamesShort||this.local.monthNamesShort,i=e.monthNames||this.local.monthNames,c=-1,f=-1,l=-1,h=-1,d=-1,o=!1,_=!1,s=function(B,j){for(var W=1;O+W<w.length&&w.charAt(O+W)===B;)W++;return O+=W-1,Math.floor(W/(j||1))>1},k=function(B,j){var W=s(B,j),Y=[2,3,W?4:2,W?4:2,10,11,20]["oyYJ@!".indexOf(B)+1],Q=new RegExp("^-?\\d{1,"+Y+"}"),ne=y.substring(R).match(Q);if(!ne)throw(m.local.missingNumberAt||m.regionalOptions[""].missingNumberAt).replace(/\{0\}/,R);return R+=ne[0].length,parseInt(ne[0],10)},M=this,A=function(){if("function"==typeof p){s("m");var B=p.call(M,y.substring(R));return R+=B.length,B}return k("m")},E=function(B,j,W,Y){for(var Q=s(B,Y)?W:j,ne=0;ne<Q.length;ne++)if(y.substr(R,Q[ne].length).toLowerCase()===Q[ne].toLowerCase())return R+=Q[ne].length,ne+M.minMonth;throw(m.local.unknownNameAt||m.regionalOptions[""].unknownNameAt).replace(/\{0\}/,R)},I=function(){if("function"==typeof i){var B=s("M")?i.call(M,y.substring(R)):u.call(M,y.substring(R));return R+=B.length,B}return E("M",u,i)},C=function(){if(y.charAt(R)!==w.charAt(O))throw(m.local.unexpectedLiteralAt||m.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,R);R++},R=0,O=0;O<w.length;O++)if(_)"'"!==w.charAt(O)||s("'")?C():_=!1;else switch(w.charAt(O)){case"d":h=k("d");break;case"D":E("D",n,a);break;case"o":d=k("o");break;case"w":k("w");break;case"m":l=A();break;case"M":l=I();break;case"y":var D=O;o=!s("y",2),O=D,f=k("y",2);break;case"Y":f=k("Y",2);break;case"J":c=k("J")+.5,"."===y.charAt(R)&&(R++,k("J"));break;case"@":c=k("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":c=k("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":R=y.length;break;case"'":s("'")?C():_=!0;break;default:C()}if(R<y.length)throw m.local.unexpectedText||m.regionalOptions[""].unexpectedText;if(-1===f?f=this.today().year():f<100&&o&&(f+=-1===r?1900:this.today().year()-this.today().year()%100-(f<=r?0:100)),"string"==typeof l&&(l=t.call(this,f,l)),d>-1){h=d;for(var L=this.daysInMonth(f,l=1);h>L;L=this.daysInMonth(f,l))l++,h-=L}return c>-1?this.fromJD(c):this.newDate(f,l,h)},determineDate:function(w,y,e,r,n){e&&"object"!=typeof e&&(n=r,r=e,e=null),"string"!=typeof r&&(n=r,r="");var a=this;return y=y?y.newDate():null,null==w?y:"string"==typeof w?function(t){try{return a.parseDate(r,t,n)}catch(c){}for(var p=((t=t.toLowerCase()).match(/^c/)&&e?e.newDate():null)||a.today(),u=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,i=u.exec(t);i;)p.add(parseInt(i[1],10),i[2]||"d"),i=u.exec(t);return p}(w):"number"==typeof w?isNaN(w)||w===1/0||w===-1/0?y:a.today().add(w,"d"):a.newDate(w)}})},{"./main":346,"object-assign":247}],348:[function(x,oe,ae){"use strict";oe.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(x,oe,ae){"use strict";var g=x("./arrow_paths"),m=x("../../plots/font_attributes"),w=x("../../plots/cartesian/constants"),y=x("../../plot_api/plot_template").templatedArray;x("../../constants/axis_placeable_objects"),oe.exports=y("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:m({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:g.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:g.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",w.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",w.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",w.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",w.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:m({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/cartesian/axes"),w=x("./draw").draw;function y(r){g.filterVisible(r._fullLayout.annotations).forEach(function(a){var t=m.getFromId(r,a.xref),p=m.getFromId(r,a.yref),u=m.getRefType(a.xref),i=m.getRefType(a.yref);a._extremes={},"range"===u&&e(a,t),"range"===i&&e(a,p)})}function e(r,n){var a,t=n._id,p=t.charAt(0),u=r[p],i=r["a"+p],l=r["_"+p+"padplus"],h=r["_"+p+"padminus"],d={x:1,y:-1}[p]*r[p+"shift"],o=3*r.arrowsize*r.arrowwidth||0,_=o+d,s=o-d,k=3*r.startarrowsize*r.arrowwidth||0,M=k+d,A=k-d;if(r["a"+p+"ref"]===r[p+"ref"]){var E=m.findExtremes(n,[n.r2c(u)],{ppadplus:_,ppadminus:s}),I=m.findExtremes(n,[n.r2c(i)],{ppadplus:Math.max(l,M),ppadminus:Math.max(h,A)});a={min:[E.min[0],I.min[0]],max:[E.max[0],I.max[0]]}}else M=i?M+i:M,A=i?A-i:A,a=m.findExtremes(n,[n.r2c(u)],{ppadplus:Math.max(l,_,M),ppadminus:Math.max(h,s,A)});r._extremes[t]=a}oe.exports=function(r){if(g.filterVisible(r._fullLayout.annotations).length&&r._fullData.length)return g.syncOrAsync([w,y],r)}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../registry"),w=x("../../plot_api/plot_template").arrayEditor;function y(r,n){var a,t,p,u,i,c,f,l=r._fullLayout.annotations,h=[],d=[],o=[],_=(n||[]).length;for(a=0;a<l.length;a++)if(u=(p=l[a]).clicktoshow){for(t=0;t<_;t++)if(c=(i=n[t]).xaxis,f=i.yaxis,c._id===p.xref&&f._id===p.yref&&c.d2r(i.x)===e(p._xclick,c)&&f.d2r(i.y)===e(p._yclick,f)){(p.visible?"onout"===u?d:o:h).push(a);break}t===_&&p.visible&&"onout"===u&&d.push(a)}return{on:h,off:d,explicitOff:o}}function e(r,n){return"log"===n.type?n.l2r(r):n.d2r(r)}oe.exports={hasClickToShow:function(r,n){var a=y(r,n);return a.on.length>0||a.explicitOff.length>0},onClick:function(r,n){var a,t,p=y(r,n),u=p.on,i=p.off.concat(p.explicitOff),c={},f=r._fullLayout.annotations;if(u.length||i.length){for(a=0;a<u.length;a++)(t=w(r.layout,"annotations",f[u[a]])).modifyItem("visible",!0),g.extendFlat(c,t.getUpdateObj());for(a=0;a<i.length;a++)(t=w(r.layout,"annotations",f[i[a]])).modifyItem("visible",!1),g.extendFlat(c,t.getUpdateObj());return m.call("update",r,{},c)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../color");oe.exports=function(w,y,e,r){r("opacity");var n=r("bgcolor"),a=r("bordercolor"),t=m.opacity(a);r("borderpad");var p=r("borderwidth"),u=r("showarrow");if(r("text",u?" ":e._dfltTitle.annotation),r("textangle"),g.coerceFont(r,"font",e.font),r("width"),r("align"),r("height")&&r("valign"),u){var i,c,f=r("arrowside");-1!==f.indexOf("end")&&(i=r("arrowhead"),c=r("arrowsize")),-1!==f.indexOf("start")&&(r("startarrowhead",i),r("startarrowsize",c)),r("arrowcolor",t?y.bordercolor:m.defaultLine),r("arrowwidth",2*(t&&p||1)),r("standoff"),r("startstandoff")}var l=r("hovertext"),h=e.hoverlabel||{};if(l){var d=r("hoverlabel.bgcolor",h.bgcolor||(m.opacity(n)?m.rgb(n):m.defaultLine)),o=r("hoverlabel.bordercolor",h.bordercolor||m.contrast(d));g.coerceFont(r,"hoverlabel.font",{family:h.font.family,size:h.font.size,color:h.font.color||o})}r("captureevents",!!l)}},{"../../lib":503,"../color":366}],353:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib/to_log_range");oe.exports=function(w,y,e,r){y=y||{};var n="log"===e&&"linear"===y.type;if(n||"linear"===e&&"log"===y.type)for(var t,p,u=w._fullLayout.annotations,i=y._id.charAt(0),c=0;c<u.length;c++)p="annotations["+c+"].",(t=u[c])[i+"ref"]===y._id&&f(i),t["a"+i+"ref"]===y._id&&f("a"+i);function f(l){var h=t[l],d=null;d=n?m(h,y.range):Math.pow(10,h),g(d)||(d=null),r(p+l,d)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/cartesian/axes"),w=x("../../plots/array_container_defaults"),y=x("./common_defaults"),e=x("./attributes");function r(n,a,t){function p(I,C){return g.coerce(n,a,e,I,C)}var u=p("visible"),i=p("clicktoshow");if(u||i){y(n,a,t,p);for(var c=a.showarrow,f=["x","y"],l=[-10,-30],h={_fullLayout:t},d=0;d<2;d++){var o=f[d],_=m.coerceRef(n,a,h,o,"","paper");if("paper"!==_&&m.getFromId(h,_)._annIndices.push(a._index),m.coercePosition(a,h,p,_,o,.5),c){var s="a"+o,k=m.coerceRef(n,a,h,s,"pixel",["pixel","paper"]);"pixel"!==k&&k!==_&&(k=a[s]="pixel"),m.coercePosition(a,h,p,k,s,"pixel"===k?l[d]:.4)}p(o+"anchor"),p(o+"shift")}if(g.noneOrAll(n,a,["x","y"]),c&&g.noneOrAll(n,a,["ax","ay"]),i){var A=p("xclick"),E=p("yclick");a._xclick=void 0===A?a.x:m.cleanPosition(A,h,a.xref),a._yclick=void 0===E?a.y:m.cleanPosition(E,h,a.yref)}}}oe.exports=function(n,a){w(n,a,{name:"annotations",handleItemDefaults:r})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../registry"),w=x("../../plots/plots"),y=x("../../lib"),e=y.strTranslate,r=x("../../plots/cartesian/axes"),n=x("../color"),a=x("../drawing"),t=x("../fx"),p=x("../../lib/svg_text_utils"),u=x("../../lib/setcursor"),i=x("../dragelement"),c=x("../../plot_api/plot_template").arrayEditor,f=x("./draw_arrow_head");function l(o,_){var s=o._fullLayout.annotations[_]||{},k=r.getFromId(o,s.xref),M=r.getFromId(o,s.yref);k&&k.setScale(),M&&M.setScale(),d(o,s,_,!1,k,M)}function h(o,_,s,k,M){var A=M[s],E=M[s+"ref"],I=-1!==s.indexOf("y"),C="domain"===r.getRefType(E),R=I?k.h:k.w;return o?C?A+(I?-_:_)/o._length:o.p2r(o.r2p(A)+_):A+(I?-_:_)/R}function d(o,_,s,k,M,A){var E,I,C=o._fullLayout,R=o._fullLayout._size,O=o._context.edits;k?(E="annotation-"+k,I=k+".annotations"):(E="annotation",I="annotations");var D=c(o.layout,I,_),L=D.modifyBase,B=D.modifyItem,j=D.getUpdateObj;C._infolayer.selectAll("."+E+'[data-index="'+s+'"]').remove();var W="clip"+C._uid+"_ann"+s;if(_._input&&!1!==_.visible){var Y={x:{},y:{}},Q=+_.textangle||0,ne=C._infolayer.append("g").classed(E,!0).attr("data-index",String(s)).style("opacity",_.opacity),X=ne.append("g").classed("annotation-text-g",!0),$=O[_.showarrow?"annotationTail":"annotationPosition"],re=_.captureevents||O.annotationText||$,H=X.append("g").style("pointer-events",re?"all":null).call(u,"pointer").on("click",function(){o._dragging=!1,o.emit("plotly_clickannotation",he(g.event))});_.hovertext&&H.on("mouseover",function(){var _e=_.hoverlabel,Ce=_e.font,Le=this.getBoundingClientRect(),Ie=o.getBoundingClientRect();t.loneHover({x0:Le.left-Ie.left,x1:Le.right-Ie.left,y:(Le.top+Le.bottom)/2-Ie.top,text:_.hovertext,color:_e.bgcolor,borderColor:_e.bordercolor,fontFamily:Ce.family,fontSize:Ce.size,fontColor:Ce.color},{container:C._hoverlayer.node(),outerContainer:C._paper.node(),gd:o})}).on("mouseout",function(){t.loneUnhover(C._hoverlayer.node())});var U=_.borderwidth,ie=U+_.borderpad,q=H.append("rect").attr("class","bg").style("stroke-width",U+"px").call(n.stroke,_.bordercolor).call(n.fill,_.bgcolor),ee=_.width||_.height,te=C._topclips.selectAll("#"+W).data(ee?[0]:[]);te.enter().append("clipPath").classed("annclip",!0).attr("id",W).append("rect"),te.exit().remove();var se=_.font,ue=C._meta?y.templateString(_.text,C._meta):_.text,de=H.append("text").classed("annotation-text",!0).text(ue);O.annotationText?de.call(p.makeEditable,{delegate:H,gd:o}).call(xe).on("edit",function(_e){_.text=_e,this.call(xe),B("text",_e),M&&M.autorange&&L(M._name+".autorange",!0),A&&A.autorange&&L(A._name+".autorange",!0),m.call("_guiRelayout",o,j())}):de.call(xe)}else g.selectAll("#"+W).remove();function he(_e){var Ce={index:s,annotation:_._input,fullAnnotation:_,event:_e};return k&&(Ce.subplotId=k),Ce}function xe(_e){return _e.call(a.font,se).attr({"text-anchor":{left:"start",right:"end"}[_.align]||"middle"}),p.convertToTspans(_e,o,ge),_e}function ge(){var _e=de.selectAll("a");1===_e.size()&&_e.text()===de.text()&&H.insert("a",":first-child").attr({"xlink:xlink:href":_e.attr("xlink:href"),"xlink:xlink:show":_e.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(q.node());var Ce=H.select(".annotation-text-math-group"),Le=!Ce.empty(),Ie=a.bBox((Le?Ce:de).node()),Be=Ie.width,ve=Ie.height,Te=_.width||Be,Pe=_.height||ve,De=Math.round(Te+2*ie),Fe=Math.round(Pe+2*ie);function Ue(gt,At){return"auto"===At&&(At=gt<1/3?"left":gt>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[At]}for(var He=!1,Ke=["x","y"],st=0;st<Ke.length;st++){var Ve,$e,Qe,tt,ut,xt=Ke[st],kt=_[xt+"ref"]||xt,Bt=_["a"+xt+"ref"],Rt={x:M,y:A}[xt],ft=(Q+("x"===xt?0:-90))*Math.PI/180,lt=De*Math.cos(ft),Ft=Fe*Math.sin(ft),Jt=Math.abs(lt)+Math.abs(Ft),ln=_[xt+"anchor"],dn=_[xt+"shift"]*("x"===xt?1:-1),cn=Y[xt],Tn=r.getRefType(kt);if(Rt&&"domain"!==Tn){var nn=Rt.r2fraction(_[xt]);(nn<0||nn>1)&&(Bt===kt?((nn=Rt.r2fraction(_["a"+xt]))<0||nn>1)&&(He=!0):He=!0),Ve=Rt._offset+Rt.r2p(_[xt]),tt=.5}else{var Me="domain"===Tn;"x"===xt?(Qe=_[xt],Ve=Me?Rt._offset+Rt._length*Qe:Ve=R.l+R.w*Qe):(Qe=1-_[xt],Ve=Me?Rt._offset+Rt._length*Qe:Ve=R.t+R.h*Qe),tt=_.showarrow?.5:Qe}if(_.showarrow){cn.head=Ve;var Ee=_["a"+xt];if(ut=lt*Ue(.5,_.xanchor)-Ft*Ue(.5,_.yanchor),Bt===kt){var Se=r.getRefType(Bt);"domain"===Se?("y"===xt&&(Ee=1-Ee),cn.tail=Rt._offset+Rt._length*Ee):cn.tail="paper"===Se?"y"===xt?R.t+R.h*(Ee=1-Ee):R.l+R.w*Ee:Rt._offset+Rt.r2p(Ee),$e=ut}else cn.tail=Ve+Ee,$e=ut+Ee;cn.text=cn.tail+ut;var je=C["x"===xt?"width":"height"];if("paper"===kt&&(cn.head=y.constrain(cn.head,1,je-1)),"pixel"===Bt){var qe=-Math.max(cn.tail-3,cn.text),Je=Math.min(cn.tail+3,cn.text)-je;qe>0?(cn.tail+=qe,cn.text+=qe):Je>0&&(cn.tail-=Je,cn.text-=Je)}cn.tail+=dn,cn.head+=dn}else $e=ut=Jt*Ue(tt,ln),cn.text=Ve+ut;cn.text+=dn,ut+=dn,_["_"+xt+"padplus"]=Jt/2+($e+=dn),_["_"+xt+"padminus"]=Jt/2-$e,_["_"+xt+"size"]=Jt,_["_"+xt+"shift"]=ut}if(He)H.remove();else{var at=0,it=0;"left"!==_.align&&(at=(Te-Be)*("center"===_.align?.5:1)),"top"!==_.valign&&(it=(Pe-ve)*("middle"===_.valign?.5:1)),Le?Ce.select("svg").attr({x:ie+at-1,y:ie+it}).call(a.setClipUrl,ee?W:null,o):de.call(p.positionText,ie+at-Ie.left,ie+it-Ie.top).call(a.setClipUrl,ee?W:null,o),te.select("rect").call(a.setRect,ie,ie,Te,Pe),q.call(a.setRect,U/2,U/2,De-U,Fe-U),H.call(a.setTranslate,Math.round(Y.x.text-De/2),Math.round(Y.y.text-Fe/2)),X.attr({transform:"rotate("+Q+","+Y.x.text+","+Y.y.text+")"});var Ut,Wt=function(gt,At){ne.selectAll(".annotation-arrow-g").remove();var Zt=Y.x.head,Et=Y.y.head,Ct=Y.x.tail+gt,Ne=Y.y.tail+At,et=Y.x.text+gt,dt=Y.y.text+At,Mt=y.rotationXYMatrix(Q,et,dt),zt=y.apply2DTransform(Mt),Xt=y.apply2DTransform2(Mt),un=+q.attr("width"),Qt=+q.attr("height"),kn=et-.5*un,qn=kn+un,gn=dt-.5*Qt,sn=gn+Qt,vn=[[kn,gn,kn,sn],[kn,sn,qn,sn],[qn,sn,qn,gn],[qn,gn,kn,gn]].map(Xt);if(!vn.reduce(function(Dr,Rr){return Dr^!!y.segmentsIntersect(Zt,Et,Zt+1e6,Et+1e6,Rr[0],Rr[1],Rr[2],Rr[3])},!1)){vn.forEach(function(Dr){var Rr=y.segmentsIntersect(Ct,Ne,Zt,Et,Dr[0],Dr[1],Dr[2],Dr[3]);Rr&&(Ct=Rr.x,Ne=Rr.y)});var pn=_.arrowwidth,Mn=_.arrowcolor,Rn=_.arrowside,Xn=ne.append("g").style({opacity:n.opacity(Mn)}).classed("annotation-arrow-g",!0),Hn=Xn.append("path").attr("d","M"+Ct+","+Ne+"L"+Zt+","+Et).style("stroke-width",pn+"px").call(n.stroke,n.rgb(Mn));if(f(Hn,Rn,_),O.annotationPosition&&Hn.node().parentNode&&!k){var rr=Zt,er=Et;if(_.standoff){var Ir=Math.sqrt(Math.pow(Zt-Ct,2)+Math.pow(Et-Ne,2));rr+=_.standoff*(Ct-Zt)/Ir,er+=_.standoff*(Ne-Et)/Ir}var Or,ni,Br=Xn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Ct-rr)+","+(Ne-er),transform:e(rr,er)}).style("stroke-width",pn+6+"px").call(n.stroke,"rgba(0,0,0,0)").call(n.fill,"rgba(0,0,0,0)");i.init({element:Br.node(),gd:o,prepFn:function(){var Dr=a.getTranslate(H);Or=Dr.x,ni=Dr.y,M&&M.autorange&&L(M._name+".autorange",!0),A&&A.autorange&&L(A._name+".autorange",!0)},moveFn:function(Dr,Rr){var yi=zt(Or,ni),$n=yi[0]+Dr,Mr=yi[1]+Rr;H.call(a.setTranslate,$n,Mr),B("x",h(M,Dr,"x",R,_)),B("y",h(A,Rr,"y",R,_)),_.axref===_.xref&&B("ax",h(M,Dr,"ax",R,_)),_.ayref===_.yref&&B("ay",h(A,Rr,"ay",R,_)),Xn.attr("transform",e(Dr,Rr)),X.attr({transform:"rotate("+Q+","+$n+","+Mr+")"})},doneFn:function(){m.call("_guiRelayout",o,j());var Dr=document.querySelector(".js-notes-box-panel");Dr&&Dr.redraw(Dr.selectedObj)}})}}};_.showarrow&&Wt(0,0),$&&i.init({element:H.node(),gd:o,prepFn:function(){Ut=X.attr("transform")},moveFn:function(gt,At){var Zt="pointer";if(_.showarrow)B("ax",_.axref===_.xref?h(M,gt,"ax",R,_):_.ax+gt),B("ay",_.ayref===_.yref?h(A,At,"ay",R.w,_):_.ay+At),Wt(gt,At);else{if(k)return;var Et,Ct;if(M)Et=h(M,gt,"x",R,_);else{var Ne=_._xsize/R.w;Et=i.align(_.x+(_._xshift-_.xshift)/R.w-Ne/2+gt/R.w,Ne,0,1,_.xanchor)}if(A)Ct=h(A,At,"y",R,_);else{var dt=_._ysize/R.h;Ct=i.align(_.y-(_._yshift+_.yshift)/R.h-dt/2-At/R.h,dt,0,1,_.yanchor)}B("x",Et),B("y",Ct),M&&A||(Zt=i.getCursor(M?.5:Et,A?.5:Ct,_.xanchor,_.yanchor))}X.attr({transform:e(gt,At)+Ut}),u(H,Zt)},clickFn:function(gt,At){_.captureevents&&o.emit("plotly_clickannotation",he(At))},doneFn:function(){u(H),m.call("_guiRelayout",o,j());var gt=document.querySelector(".js-notes-box-panel");gt&&gt.redraw(gt.selectedObj)}})}}}oe.exports={draw:function(o){var _=o._fullLayout;_._infolayer.selectAll(".annotation").remove();for(var s=0;s<_.annotations.length;s++)_.annotations[s].visible&&l(o,s);return w.previousPromises(o)},drawOne:l,drawRaw:d}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../color"),w=x("./arrow_paths"),y=x("../../lib"),e=y.strScale,r=y.strRotate,n=y.strTranslate;oe.exports=function(a,t,p){var u,i,c,f,l=a.node(),h=w[p.arrowhead||0],d=w[p.startarrowhead||0],o=(p.arrowwidth||1)*(p.arrowsize||1),_=(p.arrowwidth||1)*(p.startarrowsize||1),s=t.indexOf("start")>=0,k=t.indexOf("end")>=0,M=h.backoff*o+p.standoff,A=d.backoff*_+p.startstandoff;if("line"===l.nodeName){u={x:+a.attr("x1"),y:+a.attr("y1")},i={x:+a.attr("x2"),y:+a.attr("y2")};var E=u.x-i.x,I=u.y-i.y;if(f=(c=Math.atan2(I,E))+Math.PI,M&&A&&M+A>Math.sqrt(E*E+I*I))return void ne();if(M){if(M*M>E*E+I*I)return void ne();var C=M*Math.cos(c),R=M*Math.sin(c);i.x+=C,i.y+=R,a.attr({x2:i.x,y2:i.y})}if(A){if(A*A>E*E+I*I)return void ne();var O=A*Math.cos(c),D=A*Math.sin(c);u.x-=O,u.y-=D,a.attr({x1:u.x,y1:u.y})}}else if("path"===l.nodeName){var L=l.getTotalLength(),B="";if(L<M+A)return void ne();var j=l.getPointAtLength(0),W=l.getPointAtLength(.1);c=Math.atan2(j.y-W.y,j.x-W.x),u=l.getPointAtLength(Math.min(A,L)),B="0px,"+A+"px,";var Y=l.getPointAtLength(L),Q=l.getPointAtLength(L-.1);f=Math.atan2(Y.y-Q.y,Y.x-Q.x),i=l.getPointAtLength(Math.max(0,L-M)),a.style("stroke-dasharray",B+=L-(B?A+M:M)+"px,"+L+"px")}function ne(){a.style("stroke-dasharray","0px,100px")}function X($,re,H,U){$.path&&($.noRotate&&(H=0),g.select(l.parentNode).append("path").attr({class:a.attr("class"),d:$.path,transform:n(re.x,re.y)+r(180*H/Math.PI)+e(U)}).style({fill:m.rgb(p.arrowcolor),"stroke-width":0}))}s&&X(d,u,c,_),k&&X(h,i,f,o)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(x,oe,ae){"use strict";var g=x("./draw"),m=x("./click");oe.exports={moduleType:"component",name:"annotations",layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),includeBasePlot:x("../../plots/cartesian/include_components")("annotations"),calcAutorange:x("./calc_autorange"),draw:g.draw,drawOne:g.drawOne,drawRaw:g.drawRaw,hasClickToShow:m.hasClickToShow,onClick:m.onClick,convertCoords:x("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(x,oe,ae){"use strict";var g=x("../annotations/attributes"),m=x("../../plot_api/edit_types").overrideAll,w=x("../../plot_api/plot_template").templatedArray;oe.exports=m(w("annotation",{visible:g.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:g.xanchor,xshift:g.xshift,yanchor:g.yanchor,yshift:g.yshift,text:g.text,textangle:g.textangle,font:g.font,width:g.width,height:g.height,opacity:g.opacity,align:g.align,valign:g.valign,bgcolor:g.bgcolor,bordercolor:g.bordercolor,borderpad:g.borderpad,borderwidth:g.borderwidth,showarrow:g.showarrow,arrowcolor:g.arrowcolor,arrowhead:g.arrowhead,startarrowhead:g.startarrowhead,arrowside:g.arrowside,arrowsize:g.arrowsize,startarrowsize:g.startarrowsize,arrowwidth:g.arrowwidth,standoff:g.standoff,startstandoff:g.startstandoff,hovertext:g.hovertext,hoverlabel:g.hoverlabel,captureevents:g.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/cartesian/axes");function w(y,e){var r=e.fullSceneLayout.domain,n=e.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};y._xa={},g.extendFlat(y._xa,a),m.setConvert(y._xa),y._xa._offset=n.l+r.x[0]*n.w,y._xa.l2p=function(){return.5*(1+y._pdata[0]/y._pdata[3])*n.w*(r.x[1]-r.x[0])},y._ya={},g.extendFlat(y._ya,a),m.setConvert(y._ya),y._ya._offset=n.t+(1-r.y[1])*n.h,y._ya.l2p=function(){return.5*(1-y._pdata[1]/y._pdata[3])*n.h*(r.y[1]-r.y[0])}}oe.exports=function(y){for(var e=y.fullSceneLayout.annotations,r=0;r<e.length;r++)w(e[r],y);y.fullLayout._infolayer.selectAll(".annotation-"+y.id).remove()}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/cartesian/axes"),w=x("../../plots/array_container_defaults"),y=x("../annotations/common_defaults"),e=x("./attributes");function r(n,a,t,p){function u(c,f){return g.coerce(n,a,e,c,f)}function i(c){var f=c+"axis",l={_fullLayout:{}};return l._fullLayout[f]=t[f],m.coercePosition(a,l,u,c,c,.5)}u("visible")&&(y(n,a,p.fullLayout,u),i("x"),i("y"),i("z"),g.noneOrAll(n,a,["x","y","z"]),a.xref="x",a.yref="y",a.zref="z",u("xanchor"),u("yanchor"),u("xshift"),u("yshift"),a.showarrow&&(a.axref="pixel",a.ayref="pixel",u("ax",-10),u("ay",-30),g.noneOrAll(n,a,["ax","ay"])))}oe.exports=function(n,a,t){w(n,a,{name:"annotations",handleItemDefaults:r,fullLayout:t.fullLayout})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(x,oe,ae){"use strict";var g=x("../annotations/draw").drawRaw,m=x("../../plots/gl3d/project"),w=["x","y","z"];oe.exports=function(y){for(var e=y.fullSceneLayout,r=y.dataScale,n=e.annotations,a=0;a<n.length;a++){for(var t=n[a],p=!1,u=0;u<3;u++){var i=w[u],f=e[i+"axis"].r2fraction(t[i]);if(f<0||f>1){p=!0;break}}p?y.fullLayout._infolayer.select(".annotation-"+y.id+'[data-index="'+a+'"]').remove():(t._pdata=m(y.glplot.cameraParams,[e.xaxis.r2l(t.x)*r[0],e.yaxis.r2l(t.y)*r[1],e.zaxis.r2l(t.z)*r[2]]),g(y.graphDiv,t,a,y.id,t._xa,t._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../lib");oe.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:x("./attributes")}}},layoutAttributes:x("./attributes"),handleDefaults:x("./defaults"),includeBasePlot:function(w,y){var e=g.subplotsRegistry.gl3d;if(e)for(var r=e.attrRegex,n=Object.keys(w),a=0;a<n.length;a++){var t=n[a];r.test(t)&&(w[t].annotations||[]).length&&(m.pushUnique(y._basePlotModules,e),m.pushUnique(y._subplots.gl3d,t))}},convert:x("./convert"),draw:x("./draw")}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(x,oe,ae){"use strict";oe.exports=x("world-calendars/dist/main"),x("world-calendars/dist/plus"),x("world-calendars/dist/calendars/chinese"),x("world-calendars/dist/calendars/coptic"),x("world-calendars/dist/calendars/discworld"),x("world-calendars/dist/calendars/ethiopian"),x("world-calendars/dist/calendars/hebrew"),x("world-calendars/dist/calendars/islamic"),x("world-calendars/dist/calendars/julian"),x("world-calendars/dist/calendars/mayan"),x("world-calendars/dist/calendars/nanakshahi"),x("world-calendars/dist/calendars/nepali"),x("world-calendars/dist/calendars/persian"),x("world-calendars/dist/calendars/taiwan"),x("world-calendars/dist/calendars/thai"),x("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(x,oe,ae){"use strict";var g=x("./calendars"),m=x("../../lib"),w=x("../../constants/numerical"),y=w.EPOCHJD,e=w.ONEDAY,r={valType:"enumerated",values:m.sortObjectKeys(g.calendars),editType:"calc",dflt:"gregorian"},n=function(d,o,_,s){var k={};return k[_]=r,m.coerce(d,o,k,_,s)},a={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},t={};function p(d){return t[d]||(t[d]=g.instance(d))}function u(d){return m.extendFlat({},r,{description:d})}function i(d){return"Sets the calendar system to use with `"+d+"` date data."}var c={xcalendar:u(i("x"))},f=m.extendFlat({},c,{ycalendar:u(i("y"))}),l=m.extendFlat({},f,{zcalendar:u(i("z"))}),h=u(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));oe.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:f,bar:f,box:f,heatmap:f,contour:f,histogram:f,histogram2d:f,histogram2dcontour:f,scatter3d:l,surface:l,mesh3d:l,scattergl:f,ohlc:c,candlestick:c},layout:{calendar:u(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:h},yaxis:{calendar:h},scene:{xaxis:{calendar:h},yaxis:{calendar:h},zaxis:{calendar:h}},polar:{radialaxis:{calendar:h}}},transforms:{filter:{valuecalendar:u(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:u(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:r,handleDefaults:n,handleTraceDefaults:function(d,o,_,s){for(var k=0;k<_.length;k++)n(d,o,_[k]+"calendar",s.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:p,worldCalFmt:function(d,o,_){for(var s,k,M,A,E,I=Math.floor((o+.05)/e)+y,C=p(_).fromJD(I),R=0;-1!==(R=d.indexOf("%",R));)"0"===(s=d.charAt(R+1))||"-"===s||"_"===s?(M=3,k=d.charAt(R+2),"_"===s&&(s="-")):(k=s,s="0",M=2),(A=a[k])?(E="##"===A?"##":C.formatDate(A[s]),d=d.substr(0,R)+E+d.substr(R+M),R+=E.length):R+=M;return d}}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(x,oe,ae){"use strict";ae.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],ae.defaultLine="#444",ae.lightLine="#eee",ae.background="#fff",ae.borderLine="#BEC8D9",ae.lightFraction=1e3/11},{}],366:[function(x,oe,ae){"use strict";var g=x("tinycolor2"),m=x("fast-isnumeric"),w=x("../../lib/array").isTypedArray,y=oe.exports={},e=x("./attributes");y.defaults=e.defaults;var r=y.defaultLine=e.defaultLine;y.lightLine=e.lightLine;var n=y.background=e.background;function a(t){if(m(t)||"string"!=typeof t)return t;var p=t.trim();if("rgb"!==p.substr(0,3))return t;var u=p.match(/^rgba?\s*\(([^()]*)\)$/);if(!u)return t;var i=u[1].trim().split(/\s*[\s,]\s*/),c="a"===p.charAt(3)&&4===i.length;if(!c&&3!==i.length)return t;for(var f=0;f<i.length;f++){if(!(i[f].length&&(i[f]=Number(i[f]),i[f]>=0)))return t;if(3===f)i[f]>1&&(i[f]=1);else if(i[f]>=1)return t}var l=Math.round(255*i[0])+", "+Math.round(255*i[1])+", "+Math.round(255*i[2]);return c?"rgba("+l+", "+i[3]+")":"rgb("+l+")"}y.tinyRGB=function(t){var p=t.toRgb();return"rgb("+Math.round(p.r)+", "+Math.round(p.g)+", "+Math.round(p.b)+")"},y.rgb=function(t){return y.tinyRGB(g(t))},y.opacity=function(t){return t?g(t).getAlpha():0},y.addOpacity=function(t,p){var u=g(t).toRgb();return"rgba("+Math.round(u.r)+", "+Math.round(u.g)+", "+Math.round(u.b)+", "+p+")"},y.combine=function(t,p){var u=g(t).toRgb();if(1===u.a)return g(t).toRgbString();var i=g(p||n).toRgb(),c=1===i.a?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a};return g({r:c.r*(1-u.a)+u.r*u.a,g:c.g*(1-u.a)+u.g*u.a,b:c.b*(1-u.a)+u.b*u.a}).toRgbString()},y.contrast=function(t,p,u){var i=g(t);return 1!==i.getAlpha()&&(i=g(y.combine(t,n))),(i.isDark()?p?i.lighten(p):n:u?i.darken(u):r).toString()},y.stroke=function(t,p){var u=g(p);t.style({stroke:y.tinyRGB(u),"stroke-opacity":u.getAlpha()})},y.fill=function(t,p){var u=g(p);t.style({fill:y.tinyRGB(u),"fill-opacity":u.getAlpha()})},y.clean=function(t){if(t&&"object"==typeof t){var p,u,i,c,f=Object.keys(t);for(p=0;p<f.length;p++)if(c=t[i=f[p]],"color"===i.substr(i.length-5))if(Array.isArray(c))for(u=0;u<c.length;u++)c[u]=a(c[u]);else t[i]=a(c);else if("colorscale"===i.substr(i.length-10)&&Array.isArray(c))for(u=0;u<c.length;u++)Array.isArray(c[u])&&(c[u][1]=a(c[u][1]));else if(Array.isArray(c)){var l=c[0];if(!Array.isArray(l)&&l&&"object"==typeof l)for(u=0;u<c.length;u++)y.clean(c[u])}else c&&"object"==typeof c&&!w(c)&&y.clean(c)}}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/layout_attributes"),m=x("../../plots/font_attributes"),w=x("../../lib/extend").extendFlat,y=x("../../plot_api/edit_types").overrideAll;oe.exports=y({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:g.linecolor,outlinewidth:g.linewidth,bordercolor:g.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:w({},g.ticks,{dflt:""}),ticklabeloverflow:w({},g.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,ticklabelstep:g.ticklabelstep,showticklabels:g.showticklabels,tickfont:m({}),tickangle:g.tickangle,tickformat:g.tickformat,tickformatstops:g.tickformatstops,tickprefix:g.tickprefix,showtickprefix:g.showtickprefix,ticksuffix:g.ticksuffix,showticksuffix:g.showticksuffix,separatethousands:g.separatethousands,exponentformat:g.exponentformat,minexponent:g.minexponent,showexponent:g.showexponent,title:{text:{valType:"string"},font:m({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:m({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(x,oe,ae){"use strict";oe.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plot_api/plot_template"),w=x("../../plots/cartesian/tick_value_defaults"),y=x("../../plots/cartesian/tick_mark_defaults"),e=x("../../plots/cartesian/tick_label_defaults"),r=x("../../plots/cartesian/prefix_suffix_defaults"),n=x("./attributes");oe.exports=function(a,t,p){var u=m.newContainer(t,"colorbar"),i=a.colorbar||{};function c(I,C){return g.coerce(i,u,n,I,C)}var f=p.margin||{t:0,b:0,l:0,r:0},l=p.width-f.l-f.r,h=p.height-f.t-f.b,d="v"===c("orientation"),o=c("thicknessmode");c("thickness","fraction"===o?30/(d?l:h):30);var _=c("lenmode");c("len","fraction"===_?1:d?h:l),c("x",d?1.02:.5),c("xanchor",d?"left":"center"),c("xpad"),c("y",d?.5:1.02),c("yanchor",d?"middle":"bottom"),c("ypad"),g.noneOrAll(i,u,["x","y"]),c("outlinecolor"),c("outlinewidth"),c("bordercolor"),c("borderwidth"),c("bgcolor");var s=g.coerce(i,u,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:d?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");c("ticklabeloverflow",-1!==s.indexOf("inside")?"hide past domain":"hide past div"),w(i,u,c,"linear");var k=p.font,M={outerTicks:!1,font:k};-1!==s.indexOf("inside")&&(M.bgColor="black"),r(i,u,c,"linear",M),e(i,u,c,"linear",M),y(i,u,c,"linear",M),c("title.text",p._dfltTitle.colorbar);var A=u.tickfont,E=g.extendFlat({},A,{color:k.color,size:g.bigFont(A.size)});g.coerceFont(c,"title.font",E),c("title.side",d?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("tinycolor2"),w=x("../../plots/plots"),y=x("../../registry"),e=x("../../plots/cartesian/axes"),r=x("../dragelement"),n=x("../../lib"),a=n.strTranslate,t=x("../../lib/extend").extendFlat,p=x("../../lib/setcursor"),u=x("../drawing"),i=x("../color"),c=x("../titles"),f=x("../../lib/svg_text_utils"),l=x("../colorscale/helpers").flipScale,h=x("../../plots/cartesian/axis_defaults"),d=x("../../plots/cartesian/position_defaults"),o=x("../../plots/cartesian/layout_attributes"),_=x("../../constants/alignment"),s=_.LINE_SPACING,k=_.FROM_TL,M=_.FROM_BR,A=x("./constants").cn;oe.exports={draw:function(E){var I=E._fullLayout._infolayer.selectAll("g."+A.colorbar).data(function(C){var R,O,D,L,B=C._fullLayout,j=C.calcdata,W=[];function Y(ee){return t(ee,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Q(){"function"==typeof L.calc?L.calc(C,D,R):(R._fillgradient=O.reversescale?l(O.colorscale):O.colorscale,R._zrange=[O[L.min],O[L.max]])}for(var ne=0;ne<j.length;ne++){var $=(D=j[ne][0].trace)._module.colorbar;if(!0===D.visible&&$)for(var re=Array.isArray($),H=re?$:[$],U=0;U<H.length;U++){var G=(L=H[U]).container;(O=G?D[G]:D)&&O.showscale&&((R=Y(O.colorbar))._id="cb"+D.uid+(re&&G?"-"+G:""),R._traceIndex=D.index,R._propPrefix=(G?G+".":"")+"colorbar.",R._meta=D._meta,Q(),W.push(R))}}for(var ie in B._colorAxes)if((O=B[ie]).showscale){var q=B._colorAxes[ie];(R=Y(O.colorbar))._id="cb"+ie,R._propPrefix=ie+".colorbar.",R._meta=B._meta,L={min:"cmin",max:"cmax"},"heatmap"!==q[0]&&(L.calc=(D=q[1])._module.colorbar.calc),Q(),W.push(R)}return W}(E),function(C){return C._id});I.enter().append("g").attr("class",function(C){return C._id}).classed(A.colorbar,!0),I.each(function(C){var R=g.select(this);n.ensureSingle(R,"rect",A.cbbg),n.ensureSingle(R,"g",A.cbfills),n.ensureSingle(R,"g",A.cblines),n.ensureSingle(R,"g",A.cbaxis,function(D){D.classed(A.crisp,!0)}),n.ensureSingle(R,"g",A.cbtitleunshift,function(D){D.append("g").classed(A.cbtitle,!0)}),n.ensureSingle(R,"rect",A.cboutline);var D,L,B,j,W,Y,Q,ne,O=function(D,L,B){var j="v"===L.orientation,W=L.len,Y=L.lenmode,Q=L.thickness,ne=L.thicknessmode,X=L.outlinewidth,$=L.borderwidth,re=L.bgcolor,H=L.xanchor,U=L.yanchor,G=L.xpad,ie=L.ypad,q=L.x,ee=j?L.y:1-L.y,te=B._fullLayout,se=te._size,ue=L._fillcolor,de=L._line,he=L.title,xe=he.side,ge=L._zrange||g.extent(("function"==typeof ue?ue:de.color).domain()),_e="function"==typeof de.color?de.color:function(){return de.color},Ce="function"==typeof ue?ue:function(){return ue},Le=L._levels,Ie=function(Tn,nn,Me){var Ee,Se,je=nn._levels,qe=[],Je=[],at=je.end+je.size/100,it=je.size,yt=1.001*Me[0]-.001*Me[1],vt=1.001*Me[1]-.001*Me[0];for(Se=0;Se<1e5&&(Ee=je.start+Se*it,!(it>0?Ee>=at:Ee<=at));Se++)Ee>yt&&Ee<vt&&qe.push(Ee);if(nn._fillgradient)Je=[0];else if("function"==typeof nn._fillcolor){var Ut=nn._filllevels;if(Ut)for(at=Ut.end+Ut.size/100,it=Ut.size,Se=0;Se<1e5&&(Ee=Ut.start+Se*it,!(it>0?Ee>=at:Ee<=at));Se++)Ee>Me[0]&&Ee<Me[1]&&Je.push(Ee);else(Je=qe.map(function(Wt){return Wt-je.size/2})).push(Je[Je.length-1]+je.size)}else nn._fillcolor&&"string"==typeof nn._fillcolor&&(Je=[0]);return je.size<0&&(qe.reverse(),Je.reverse()),{line:qe,fill:Je}}(0,L,ge),Be=Ie.fill,ve=Ie.line,Te=Math.round(Q*("fraction"===ne?j?se.w:se.h:1)),Pe=Te/(j?se.w:se.h),De=Math.round(W*("fraction"===Y?j?se.h:se.w:1)),Fe=De/(j?se.h:se.w),Ue=Math.round(j?q*se.w+G:ee*se.h+ie),He={center:.5,right:1}[H]||0,Ke={top:1,middle:.5}[U]||0,st=j?q-He*Pe:ee-Ke*Pe,Ve=j?ee-Ke*Fe:q-He*Fe,$e=Math.round(j?se.h*(1-Ve):se.w*Ve);L._lenFrac=Fe,L._thickFrac=Pe,L._uFrac=st,L._vFrac=Ve;var Qe=L._axis=function(Tn,nn,Me){var Ee=Tn._fullLayout,Se="v"===nn.orientation,je={type:"linear",range:Me,tickmode:nn.tickmode,nticks:nn.nticks,tick0:nn.tick0,dtick:nn.dtick,tickvals:nn.tickvals,ticktext:nn.ticktext,ticks:nn.ticks,ticklen:nn.ticklen,tickwidth:nn.tickwidth,tickcolor:nn.tickcolor,showticklabels:nn.showticklabels,ticklabelposition:nn.ticklabelposition,ticklabeloverflow:nn.ticklabeloverflow,ticklabelstep:nn.ticklabelstep,tickfont:nn.tickfont,tickangle:nn.tickangle,tickformat:nn.tickformat,exponentformat:nn.exponentformat,minexponent:nn.minexponent,separatethousands:nn.separatethousands,showexponent:nn.showexponent,showtickprefix:nn.showtickprefix,tickprefix:nn.tickprefix,showticksuffix:nn.showticksuffix,ticksuffix:nn.ticksuffix,title:nn.title,showline:!0,anchor:"free",side:Se?"right":"bottom",position:1},qe=Se?"y":"x",Je={type:"linear",_id:qe+nn._id},at={letter:qe,font:Ee.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:Ee.calendar};function it(yt,vt){return n.coerce(je,Je,o,yt,vt)}return h(je,Je,it,at,Ee),d(je,Je,it,at),Je}(B,L,ge);Qe.position=Pe+(j?q+G/se.w:ee+ie/se.h);var tt=-1!==["top","bottom"].indexOf(xe);if(j&&tt&&(Qe.title.side=xe,Qe.titlex=q+G/se.w,Qe.titley=Ve+("top"===he.side?Fe-ie/se.h:ie/se.h)),j||tt||(Qe.title.side=xe,Qe.titley=ee+ie/se.h,Qe.titlex=Ve+G/se.w),de.color&&"auto"===L.tickmode){Qe.tickmode="linear",Qe.tick0=Le.start;var ut=Le.size,xt=n.constrain(De/50,4,15)+1,kt=(ge[1]-ge[0])/((L.nticks||xt)*ut);if(kt>1){var Bt=Math.pow(10,Math.floor(Math.log(kt)/Math.LN10));ut*=Bt*n.roundUp(kt/Bt,[2,5,10]),(Math.abs(Le.start)/Le.size+1e-6)%1<2e-6&&(Qe.tick0=0)}Qe.dtick=ut}Qe.domain=j?[Ve+ie/se.h,Ve+Fe-ie/se.h]:[Ve+G/se.w,Ve+Fe-G/se.w],Qe.setScale(),D.attr("transform",a(Math.round(se.l),Math.round(se.t)));var Rt,ft=D.select("."+A.cbtitleunshift).attr("transform",a(-Math.round(se.l),-Math.round(se.t))),lt=Qe.ticklabelposition,Ft=Qe.title.font.size,Jt=D.select("."+A.cbaxis),ln=0,dn=0;function cn(Tn,nn){var Me={propContainer:Qe,propName:L._propPrefix+"title",traceIndex:L._traceIndex,_meta:L._meta,placeholder:te._dfltTitle.colorbar,containerGroup:D.select("."+A.cbtitle)},Ee="h"===Tn.charAt(0)?Tn.substr(1):"h"+Tn;D.selectAll("."+Ee+",."+Ee+"-math-group").remove(),c.draw(B,Tn,t(Me,nn||{}))}return n.syncOrAsync([w.previousPromises,function(){var Tn,nn;(j&&tt||!j&&!tt)&&("top"===xe&&(Tn=G+se.l+se.w*q,nn=ie+se.t+se.h*(1-Ve-Fe)+3+.75*Ft),"bottom"===xe&&(Tn=G+se.l+se.w*q,nn=ie+se.t+se.h*(1-Ve)-3-.25*Ft),"right"===xe&&(nn=ie+se.t+se.h*ee+3+.75*Ft,Tn=G+se.l+se.w*Ve),cn(Qe._id+"title",{attributes:{x:Tn,y:nn,"text-anchor":j?"start":"middle"}}))},function(){if(!j&&!tt||j&&tt){var Tn,nn=D.select("."+A.cbtitle),Me=nn.select("text"),Ee=[-X/2,X/2],Se=nn.select(".h"+Qe._id+"title-math-group").node(),je=15.6;if(Me.node()&&(je=parseInt(Me.node().style.fontSize,10)*s),Se?(Tn=u.bBox(Se),dn=Tn.width,(ln=Tn.height)>je&&(Ee[1]-=(ln-je)/2)):Me.node()&&!Me.classed(A.jsPlaceholder)&&(Tn=u.bBox(Me.node()),dn=Tn.width,ln=Tn.height),j){if(ln){if(ln+=5,"top"===xe)Qe.domain[1]-=ln/se.h,Ee[1]*=-1;else{Qe.domain[0]+=ln/se.h;var qe=f.lineCount(Me);Ee[1]+=(1-qe)*je}nn.attr("transform",a(Ee[0],Ee[1])),Qe.setScale()}}else dn&&("right"===xe&&(Qe.domain[0]+=(dn+Ft/2)/se.w),nn.attr("transform",a(Ee[0],Ee[1])),Qe.setScale())}D.selectAll("."+A.cbfills+",."+A.cblines).attr("transform",j?a(0,Math.round(se.h*(1-Qe.domain[1]))):a(Math.round(se.w*Qe.domain[0]),0)),Jt.attr("transform",j?a(0,Math.round(-se.t)):a(Math.round(-se.l),0));var Je=D.select("."+A.cbfills).selectAll("rect."+A.cbfill).attr("style","").data(Be);Je.enter().append("rect").classed(A.cbfill,!0).style("stroke","none"),Je.exit().remove();var at=ge.map(Qe.c2p).map(Math.round).sort(function(Wt,gt){return Wt-gt});Je.each(function(Wt,gt){var At=[0===gt?ge[0]:(Be[gt]+Be[gt-1])/2,gt===Be.length-1?ge[1]:(Be[gt]+Be[gt+1])/2].map(Qe.c2p).map(Math.round);j&&(At[1]=n.constrain(At[1]+(At[1]>At[0])?1:-1,at[0],at[1]));var Zt=g.select(this).attr(j?"x":"y",Ue).attr(j?"y":"x",g.min(At)).attr(j?"width":"height",Math.max(Te,2)).attr(j?"height":"width",Math.max(g.max(At)-g.min(At),2));if(L._fillgradient)u.gradient(Zt,B,L._id,j?"vertical":"horizontalreversed",L._fillgradient,"fill");else{var Et=Ce(Wt).replace("e-","");Zt.attr("fill",m(Et).toHexString())}});var it=D.select("."+A.cblines).selectAll("path."+A.cbline).data(de.color&&de.width?ve:[]);it.enter().append("path").classed(A.cbline,!0),it.exit().remove(),it.each(function(Wt){var gt=Ue,At=Math.round(Qe.c2p(Wt))+de.width/2%1;g.select(this).attr("d","M"+(j?gt+","+At:At+","+gt)+(j?"h":"v")+Te).call(u.lineGroupStyle,de.width,_e(Wt),de.dash)}),Jt.selectAll("g."+Qe._id+"tick,path").remove();var yt=Ue+Te+(X||0)/2-("outside"===L.ticks?1:0),vt=e.calcTicks(Qe),Ut=e.getTickSigns(Qe)[2];return e.drawTicks(B,Qe,{vals:"inside"===Qe.ticks?e.clipEnds(Qe,vt):vt,layer:Jt,path:e.makeTickPath(Qe,yt,Ut),transFn:e.makeTransTickFn(Qe)}),e.drawLabels(B,Qe,{vals:vt,layer:Jt,transFn:e.makeTransTickLabelFn(Qe),labelFns:e.makeLabelFns(Qe,yt)})},function(){if(j&&!tt||!j&&tt){var Tn,nn,Me=Qe.position||0,Ee=Qe._offset+Qe._length/2;if("right"===xe)nn=Ee,Tn=se.l+se.w*Me+10+Ft*(Qe.showticklabels?1:.5);else if(Tn=Ee,"bottom"===xe&&(nn=se.t+se.h*Me+10+(-1===lt.indexOf("inside")?Qe.tickfont.size:0)+("intside"!==Qe.ticks&&L.ticklen||0)),"top"===xe){var Se=he.text.split("<br>").length;nn=se.t+se.h*Me+10-Te-s*Ft*Se}cn((j?"h":"v")+Qe._id+"title",{avoid:{selection:g.select(B).selectAll("g."+Qe._id+"tick"),side:xe,offsetTop:j?0:se.t,offsetLeft:j?se.l:0,maxShift:j?te.width:te.height},attributes:{x:Tn,y:nn,"text-anchor":"middle"},transform:{rotate:j?-90:0,offset:0}})}},w.previousPromises,function(){var Tn,nn=Te+X/2;-1===lt.indexOf("inside")&&(Tn=u.bBox(Jt.node()),nn+=j?Tn.width:Tn.height),Rt=ft.select("text");var Me=0,Ee=j&&"top"===xe,Se=!j&&"right"===xe,je=0;if(Rt.node()&&!Rt.classed(A.jsPlaceholder)){var qe,Je=ft.select(".h"+Qe._id+"title-math-group").node();Je&&(j&&tt||!j&&!tt)?(Me=(Tn=u.bBox(Je)).width,qe=Tn.height):(Me=(Tn=u.bBox(ft.node())).right-se.l-(j?Ue:$e),qe=Tn.bottom-se.t-(j?$e:Ue),j||"top"!==xe||(nn+=Tn.height,je=Tn.height)),Se&&(Rt.attr("transform",a(Me/2+Ft/2,0)),Me*=2),nn=Math.max(nn,j?Me:qe)}var at=2*(j?G:ie)+nn+$+X/2,it=0;!j&&he.text&&"bottom"===U&&ee<=0&&(at+=it=at/2,je+=it),te._hColorbarMoveTitle=it,te._hColorbarMoveCBTitle=je;var yt=$+X;D.select("."+A.cbbg).attr("x",(j?Ue:$e)-yt/2-(j?G:0)).attr("y",(j?$e:Ue)-(j?De:ie+je-it)).attr(j?"width":"height",Math.max(at-it,2)).attr(j?"height":"width",Math.max(De+yt,2)).call(i.fill,re).call(i.stroke,L.bordercolor).style("stroke-width",$);var vt=Se?Math.max(Me-10,0):0;if(D.selectAll("."+A.cboutline).attr("x",(j?Ue:$e+G)+vt).attr("y",(j?$e+ie-De:Ue)+(Ee?ln:0)).attr(j?"width":"height",Math.max(Te,2)).attr(j?"height":"width",Math.max(De-(j?2*ie+ln:2*G+vt),2)).call(i.stroke,L.outlinecolor).style({fill:"none","stroke-width":X}),D.attr("transform",a(se.l-(j?He*at:0),se.t-(j?0:(1-Ke)*at-je))),!j&&($||m(re).getAlpha()&&!m.equals(te.paper_bgcolor,re))){var Ut=Jt.selectAll("text"),Wt=Ut[0].length,gt=D.select("."+A.cbbg).node(),At=u.bBox(gt),Zt=u.getTranslate(D);Ut.each(function(zt,Xt){var un=Wt-1;if(0===Xt||Xt===un){var Qt,kn=u.bBox(this),qn=u.getTranslate(this);Xt===un?(Qt=At.right+Zt.x+$e-$-2+q-(kn.right+qn.x))>0&&(Qt=0):0===Xt&&(Qt=At.left+Zt.x+$e+$+2-(kn.left+qn.x))<0&&(Qt=0),Qt&&(Wt<3?this.setAttribute("transform","translate("+Qt+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Et={},Ct=k[H],Ne=M[H],et=k[U],dt=M[U],Mt=at-Te;j?("pixels"===Y?(Et.y=ee,Et.t=De*et,Et.b=De*dt):(Et.t=Et.b=0,Et.yt=ee+W*et,Et.yb=ee-W*dt),"pixels"===ne?(Et.x=q,Et.l=at*Ct,Et.r=at*Ne):(Et.l=Mt*Ct,Et.r=Mt*Ne,Et.xl=q-Q*Ct,Et.xr=q+Q*Ne)):("pixels"===Y?(Et.x=q,Et.l=De*Ct,Et.r=De*Ne):(Et.l=Et.r=0,Et.xl=q+W*Ct,Et.xr=q-W*Ne),"pixels"===ne?(Et.y=1-ee,Et.t=at*et,Et.b=at*dt):(Et.t=Mt*et,Et.b=Mt*dt,Et.yt=ee-Q*et,Et.yb=ee+Q*dt)),w.autoMargin(B,L._id,Et)}],B)}(R,C,E);O&&O.then&&(E._promises||[]).push(O),E._context.edits.colorbarPosition&&(Q="v"===(L=C).orientation,ne=(B=E)._fullLayout._size,r.init({element:(D=R).node(),gd:B,prepFn:function(){j=D.attr("transform"),p(D)},moveFn:function(X,$){D.attr("transform",j+a(X,$)),W=r.align((Q?L._uFrac:L._vFrac)+X/ne.w,Q?L._thickFrac:L._lenFrac,0,1,L.xanchor),Y=r.align((Q?L._vFrac:1-L._uFrac)-$/ne.h,Q?L._lenFrac:L._thickFrac,0,1,L.yanchor);var re=r.getCursor(W,Y,L.xanchor,L.yanchor);p(D,re)},doneFn:function(){if(p(D),void 0!==W&&void 0!==Y){var X={};X[L._propPrefix+"x"]=W,X[L._propPrefix+"y"]=Y,void 0!==L._traceIndex?y.call("_guiRestyle",B,X,L._traceIndex):y.call("_guiRelayout",B,X)}}}))}),I.exit().each(function(C){w.autoMargin(E,C._id)}).remove(),I.order()}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(x,oe,ae){"use strict";var g=x("../../lib");oe.exports=function(m){return g.isPlainObject(m.colorbar)}},{"../../lib":503}],372:[function(x,oe,ae){"use strict";oe.exports={moduleType:"component",name:"colorbar",attributes:x("./attributes"),supplyDefaults:x("./defaults"),draw:x("./draw").draw,hasColorbar:x("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(x,oe,ae){"use strict";var g=x("../colorbar/attributes"),m=x("../../lib/regex").counter,w=x("../../lib/sort_object_keys"),y=x("./scales.js").scales;function e(r){return"`"+r+"`"}w(y),oe.exports=function(r,n){r=r||"";var a,t=(n=n||{}).cLetter||"c",p=("onlyIfNumerical"in n||Boolean(r),"noScale"in n?n.noScale:"marker.line"===r),u="showScaleDflt"in n?n.showScaleDflt:"z"===t,i="string"==typeof n.colorscaleDflt?y[n.colorscaleDflt]:null,c=n.editTypeOverride||"",f=r?r+".":"";"colorAttr"in n?a=n.colorAttr:e(f+(a={z:"z",c:"color"}[t]));var l=t+"auto",h=t+"min",d=t+"max",o=t+"mid",_=(e(f+l),e(f+h),e(f+d),{});_[h]=_[d]=void 0;var s={};s[l]=!1;var k={};return"color"===a&&(k.color={valType:"color",arrayOk:!0,editType:c||"style"},n.anim&&(k.color.anim=!0)),k[l]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:_},k[h]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:s},k[d]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:s},k[o]={valType:"number",dflt:null,editType:"calc",impliedEdits:_},k.colorscale={valType:"colorscale",editType:"calc",dflt:i,impliedEdits:{autocolorscale:!1}},k.autocolorscale={valType:"boolean",dflt:!1!==n.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},k.reversescale={valType:"boolean",dflt:!1,editType:"plot"},p||(k.showscale={valType:"boolean",dflt:u,editType:"calc"},k.colorbar=g),n.noColorAxis||(k.coloraxis={valType:"subplotid",regex:m("coloraxis"),dflt:null,editType:"calc"}),k}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib"),w=x("./helpers").extractOpts;oe.exports=function(y,e,r){var a=y._fullLayout,t=r.vals,p=r.containerStr,u=p?m.nestedProperty(e,p).get():e,i=w(u),c=!1!==i.auto,f=i.min,l=i.max,h=i.mid,d=function(){return m.aggNums(Math.min,null,t)},o=function(){return m.aggNums(Math.max,null,t)};void 0===f?f=d():c&&(f=u._colorAx&&g(f)?Math.min(f,d()):d()),void 0===l?l=o():c&&(l=u._colorAx&&g(l)?Math.max(l,o()):o()),c&&void 0!==h&&(l-h>h-f?f=h-(l-h):l-h<h-f&&(l=h+(h-f))),f===l&&(f-=.5,l+=.5),i._sync("min",f),i._sync("max",l),i.autocolorscale&&i._sync("colorscale",f*l<0?a.colorscale.diverging:f>=0?a.colorscale.sequential:a.colorscale.sequentialminus)}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./helpers").hasColorscale,w=x("./helpers").extractOpts;oe.exports=function(y,e){function r(c,f){var l=c["_"+f];void 0!==l&&(c[f]=l)}function n(c,f){var l=f.container?g.nestedProperty(c,f.container).get():c;if(l)if(l.coloraxis)l._colorAx=e[l.coloraxis];else{var h=w(l),d=h.auto;(d||void 0===h.min)&&r(l,f.min),(d||void 0===h.max)&&r(l,f.max),h.autocolorscale&&r(l,"colorscale")}}for(var a=0;a<y.length;a++){var t=y[a],p=t._module.colorbar;if(p)if(Array.isArray(p))for(var u=0;u<p.length;u++)n(t,p[u]);else n(t,p);m(t,"marker.line")&&n(t,{container:"marker.line",min:"cmin",max:"cmax"})}for(var i in e._colorAxes)n(e[i],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib"),w=x("../colorbar/has_colorbar"),y=x("../colorbar/defaults"),e=x("./scales").isValid,r=x("../../registry").traceIs;function n(a,t){var p=t.slice(0,t.length-1);return t?m.nestedProperty(a,p).get()||{}:a}oe.exports=function a(t,p,u,i,c){var f=c.prefix,l=c.cLetter,h="_module"in p,d=n(t,f),o=n(p,f),_=n(p._template||{},f)||{},s=function(){return delete t.coloraxis,delete p.coloraxis,a(t,p,u,i,c)};if(h){var k=u._colorAxes||{},M=i(f+"coloraxis");if(M){var A=r(p,"contour")&&m.nestedProperty(p,"contours.coloring").get()||"heatmap",E=k[M];return void(E?(E[2].push(s),E[0]!==A&&(E[0]=!1,m.warn(["Ignoring coloraxis:",M,"setting","as it is linked to incompatible colorscales."].join(" ")))):k[M]=[A,p,[s]])}}var I=d[l+"min"],C=d[l+"max"],R=g(I)&&g(C)&&I<C;i(f+l+"auto",!R)?i(f+l+"mid"):(i(f+l+"min"),i(f+l+"max"));var O,D,L=d.colorscale,B=_.colorscale;void 0!==L&&(O=!e(L)),void 0!==B&&(O=!e(B)),i(f+"autocolorscale",O),i(f+"colorscale"),i(f+"reversescale"),"marker.line."!==f&&(f&&h&&(D=w(d)),i(f+"showscale",D)&&(f&&_&&(o._template=_),y(d,o,u)))}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("tinycolor2"),w=x("fast-isnumeric"),y=x("../../lib"),e=x("../color"),r=x("./scales").isValid,n=["showscale","autocolorscale","colorscale","reversescale","colorbar"],a=["min","max","mid","auto"];function t(f){var l,h,d,o=f._colorAx,_=o||f,s={};for(h=0;h<n.length;h++)s[d=n[h]]=_[d];if(o)for(l="c",h=0;h<a.length;h++)s[d=a[h]]=_["c"+d];else{var k;for(h=0;h<a.length;h++)((k="c"+(d=a[h]))in _||(k="z"+d)in _)&&(s[d]=_[k]);l=k.charAt(0)}return s._sync=function(M,A){var E=-1!==a.indexOf(M)?l+M:M;_[E]=_["_"+E]=A},s}function p(f){for(var l=t(f),h=l.min,d=l.max,o=l.reversescale?u(l.colorscale):l.colorscale,_=o.length,s=new Array(_),k=new Array(_),M=0;M<_;M++){var A=o[M];s[M]=h+A[0]*(d-h),k[M]=A[1]}return{domain:s,range:k}}function u(f){for(var l=f.length,h=new Array(l),d=l-1,o=0;d>=0;d--,o++){var _=f[d];h[o]=[1-_[0],_[1]]}return h}function i(f,l){l=l||{};for(var h=f.domain,d=f.range,o=d.length,_=new Array(o),s=0;s<o;s++){var k=m(d[s]).toRgb();_[s]=[k.r,k.g,k.b,k.a]}var M,A=g.scale.linear().domain(h).range(_).clamp(!0),E=l.noNumericCheck,I=l.returnArray;return(M=E&&I?A:E?function(C){return c(A(C))}:I?function(C){return w(C)?A(C):m(C).isValid()?C:e.defaultLine}:function(C){return w(C)?c(A(C)):m(C).isValid()?C:e.defaultLine}).domain=A.domain,M.range=function(){return d},M}function c(f){return m({r:f[0],g:f[1],b:f[2],a:f[3]}).toRgbString()}oe.exports={hasColorscale:function(f,l,h){var d=l?y.nestedProperty(f,l).get()||{}:f,o=d[h||"color"],_=!1;if(y.isArrayOrTypedArray(o))for(var s=0;s<o.length;s++)if(w(o[s])){_=!0;break}return y.isPlainObject(d)&&(_||!0===d.showscale||w(d.cmin)&&w(d.cmax)||r(d.colorscale)||y.isPlainObject(d.colorbar))},extractOpts:t,extractScale:p,flipScale:u,makeColorScaleFunc:i,makeColorScaleFuncFromTrace:function(f,l){return i(p(f),l)}}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(x,oe,ae){"use strict";var g=x("./scales"),m=x("./helpers");oe.exports={moduleType:"component",name:"colorscale",attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyLayoutDefaults:x("./layout_defaults"),handleDefaults:x("./defaults"),crossTraceDefaults:x("./cross_trace_defaults"),calc:x("./calc"),scales:g.scales,defaultScale:g.defaultScale,getScale:g.get,isValidScale:g.isValid,hasColorscale:m.hasColorscale,extractOpts:m.extractOpts,extractScale:m.extractScale,flipScale:m.flipScale,makeColorScaleFunc:m.makeColorScaleFunc,makeColorScaleFuncFromTrace:m.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(x,oe,ae){"use strict";var g=x("../../lib/extend").extendFlat,m=x("./attributes"),w=x("./scales").scales;oe.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:w.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:w.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:w.RdBu,editType:"calc"}},coloraxis:g({_isSubplotObj:!0,editType:"calc"},m("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plot_api/plot_template"),w=x("./layout_attributes"),y=x("./defaults");oe.exports=function(e,r){function n(l,h){return g.coerce(e,r,w,l,h)}n("colorscale.sequential"),n("colorscale.sequentialminus"),n("colorscale.diverging");var a,t,p=r._colorAxes;function u(l,h){return g.coerce(a,t,w.coloraxis,l,h)}for(var i in p){var c=p[i];if(c[0])a=e[i]||{},(t=m.newContainer(r,i,"coloraxis"))._name=i,y(a,t,r,u,{prefix:"",cLetter:"c"});else{for(var f=0;f<c[2].length;f++)c[2][f]();delete r._colorAxes[i]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(x,oe,ae){"use strict";var g=x("tinycolor2"),m={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},w=m.RdBu;function y(e){var r=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var n=0;n<e.length;n++){var a=e[n];if(2!==a.length||+a[0]<r||!g(a[1]).isValid())return!1;r=+a[0]}return!0}oe.exports={scales:m,defaultScale:w,get:function(e,r){if(r||(r=w),!e)return r;function n(){try{e=m[e]||JSON.parse(e)}catch(a){e=r}}return"string"==typeof e&&(n(),"string"==typeof e&&n()),y(e)?e:r},isValid:function(e){return void 0!==m[e]||y(e)}}},{tinycolor2:312}],382:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w,y,e){var r=(g-w)/(y-w),n=r+m/(y-w),a=(r+n)/2;return"left"===e||"bottom"===e?r:"center"===e||"middle"===e?a:"right"===e||"top"===e?n:r<2/3-a?r:n>4/3-a?n:a}},{}],383:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];oe.exports=function(w,y,e,r){return w="left"===e?0:"center"===e?1:"right"===e?2:g.constrain(Math.floor(3*w),0,2),y="bottom"===r?0:"middle"===r?1:"top"===r?2:g.constrain(Math.floor(3*y),0,2),m[y][w]}},{"../../lib":503}],384:[function(x,oe,ae){"use strict";ae.selectMode=function(g){return"lasso"===g||"select"===g},ae.drawMode=function(g){return"drawclosedpath"===g||"drawopenpath"===g||"drawline"===g||"drawrect"===g||"drawcircle"===g},ae.openMode=function(g){return"drawline"===g||"drawopenpath"===g},ae.rectMode=function(g){return"select"===g||"drawline"===g||"drawrect"===g||"drawcircle"===g},ae.freeMode=function(g){return"lasso"===g||"drawclosedpath"===g||"drawopenpath"===g},ae.selectingOrDrawing=function(g){return ae.freeMode(g)||ae.rectMode(g)}},{}],385:[function(x,oe,ae){"use strict";var g=x("mouse-event-offset"),m=x("has-hover"),w=x("has-passive-events"),y=x("../../lib").removeElement,e=x("../../plots/cartesian/constants"),r=oe.exports={};r.align=x("./align"),r.getCursor=x("./cursor");var n=x("./unhover");function a(){var p=document.createElement("div");p.className="dragcover";var u=p.style;return u.position="fixed",u.left=0,u.right=0,u.top=0,u.bottom=0,u.zIndex=999999999,u.background="none",document.body.appendChild(p),p}function t(p){return g(p.changedTouches?p.changedTouches[0]:p,document.body)}r.unhover=n.wrapped,r.unhoverRaw=n.raw,r.init=function(p){var u,i,c,f,l,h,d,o,_=p.gd,s=1,k=_._context.doubleClickDelay,M=p.element;_._mouseDownTime||(_._mouseDownTime=0),M.style.pointerEvents="all",M.onmousedown=E,w?(M._ontouchstart&&M.removeEventListener("touchstart",M._ontouchstart),M._ontouchstart=E,M.addEventListener("touchstart",E,{passive:!1})):M.ontouchstart=E;var A=p.clampFn||function(R,O,D){return Math.abs(R)<D&&(R=0),Math.abs(O)<D&&(O=0),[R,O]};function E(R){_._dragged=!1,_._dragging=!0;var O=t(R);u=O[0],i=O[1],d=R.target,h=R,o=2===R.buttons||R.ctrlKey,void 0===R.clientX&&void 0===R.clientY&&(R.clientX=u,R.clientY=i),(c=(new Date).getTime())-_._mouseDownTime<k?s+=1:(s=1,_._mouseDownTime=c),p.prepFn&&p.prepFn(R,u,i),m&&!o?(l=a()).style.cursor=window.getComputedStyle(M).cursor:m||(l=document,f=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(M).cursor),document.addEventListener("mouseup",C),document.addEventListener("touchend",C),!1!==p.dragmode&&(R.preventDefault(),document.addEventListener("mousemove",I),document.addEventListener("touchmove",I,{passive:!1}))}function I(R){R.preventDefault();var O=t(R),L=A(O[0]-u,O[1]-i,p.minDrag||e.MINDRAG),B=L[0],j=L[1];(B||j)&&(_._dragged=!0,r.unhover(_,R)),_._dragged&&p.moveFn&&!o&&(_._dragdata={element:M,dx:B,dy:j},p.moveFn(B,j))}function C(R){if(delete _._dragdata,!1!==p.dragmode&&(R.preventDefault(),document.removeEventListener("mousemove",I),document.removeEventListener("touchmove",I)),document.removeEventListener("mouseup",C),document.removeEventListener("touchend",C),m?y(l):f&&(l.documentElement.style.cursor=f,f=null),_._dragging){if(_._dragging=!1,(new Date).getTime()-_._mouseDownTime>k&&(s=Math.max(s-1,1)),_._dragged)p.doneFn&&p.doneFn();else if(p.clickFn&&p.clickFn(s,h),!o){var O;try{O=new MouseEvent("click",R)}catch(L){var D=t(R);(O=document.createEvent("MouseEvents")).initMouseEvent("click",R.bubbles,R.cancelable,R.view,R.detail,R.screenX,R.screenY,D[0],D[1],R.ctrlKey,R.altKey,R.shiftKey,R.metaKey,R.button,R.relatedTarget)}d.dispatchEvent(O)}_._dragging=!1,_._dragged=!1}else _._dragged=!1}},r.coverSlip=a},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(x,oe,ae){"use strict";var g=x("../../lib/events"),m=x("../../lib/throttle"),w=x("../../lib/dom").getGraphDiv,y=x("../fx/constants"),e=oe.exports={};e.wrapped=function(r,n,a){(r=w(r))._fullLayout&&m.clear(r._fullLayout._uid+y.HOVERID),e.raw(r,n,a)},e.raw=function(r,n){var a=r._fullLayout,t=r._hoverdata;n||(n={}),n.target&&!r._dragged&&!1===g.triggerHandler(r,"plotly_beforehover",n)||(a._hoverlayer.selectAll("g").remove(),a._hoverlayer.selectAll("line").remove(),a._hoverlayer.selectAll("circle").remove(),r._hoverdata=void 0,n.target&&t&&r.emit("plotly_unhover",{event:n,points:t}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(x,oe,ae){"use strict";ae.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},ae.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=m.numberFormat,y=x("fast-isnumeric"),e=x("tinycolor2"),r=x("../../registry"),n=x("../color"),a=x("../colorscale"),t=m.strTranslate,p=x("../../lib/svg_text_utils"),u=x("../../constants/xmlns_namespaces"),i=x("../../constants/alignment").LINE_SPACING,c=x("../../constants/interactions").DESELECTDIM,f=x("../../traces/scatter/subtypes"),l=x("../../traces/scatter/make_bubble_size_func"),h=x("../../components/fx/helpers").appendArrayPointValue,d=oe.exports={};function o(X,$,re){var H=$.fillpattern,U=H&&d.getPatternAttr(H.shape,0,"");if(U){var G=d.getPatternAttr(H.bgcolor,0,null),ie=d.getPatternAttr(H.fgcolor,0,null),q=H.fgopacity,ee=d.getPatternAttr(H.size,0,8),te=d.getPatternAttr(H.solidity,0,.3);d.pattern(X,"point",re,$.uid,U,ee,te,void 0,H.fillmode,G,ie,q)}else $.fillcolor&&X.call(n.fill,$.fillcolor)}d.font=function(X,$,re,H){m.isPlainObject($)&&(H=$.color,re=$.size,$=$.family),$&&X.style("font-family",$),re+1&&X.style("font-size",re+"px"),H&&X.call(n.fill,H)},d.setPosition=function(X,$,re){X.attr("x",$).attr("y",re)},d.setSize=function(X,$,re){X.attr("width",$).attr("height",re)},d.setRect=function(X,$,re,H,U){X.call(d.setPosition,$,re).call(d.setSize,H,U)},d.translatePoint=function(X,$,re,H){var U=re.c2p(X.x),G=H.c2p(X.y);return!!(y(U)&&y(G)&&$.node())&&("text"===$.node().nodeName?$.attr("x",U).attr("y",G):$.attr("transform",t(U,G)),!0)},d.translatePoints=function(X,$,re){X.each(function(H){var U=g.select(this);d.translatePoint(H,U,$,re)})},d.hideOutsideRangePoint=function(X,$,re,H,U,G){$.attr("display",re.isPtWithinRange(X,U)&&H.isPtWithinRange(X,G)?null:"none")},d.hideOutsideRangePoints=function(X,$){if($._hasClipOnAxisFalse){var re=$.xaxis,H=$.yaxis;X.each(function(U){var G=U[0].trace,ie=G.xcalendar,q=G.ycalendar,ee=r.traceIs(G,"bar-like")?".bartext":".point,.textpoint";X.selectAll(ee).each(function(te){d.hideOutsideRangePoint(te,g.select(this),re,H,ie,q)})})}},d.crispRound=function(X,$,re){return $&&y($)?X._context.staticPlot?$:$<1?1:Math.round($):re||0},d.singleLineStyle=function(X,$,re,H,U){$.style("fill","none");var G=(((X||[])[0]||{}).trace||{}).line||{},ie=re||G.width||0,q=U||G.dash||"";n.stroke($,H||G.color),d.dashLine($,q,ie)},d.lineGroupStyle=function(X,$,re,H){X.style("fill","none").each(function(U){var G=(((U||[])[0]||{}).trace||{}).line||{},ie=$||G.width||0,q=H||G.dash||"";g.select(this).call(n.stroke,re||G.color).call(d.dashLine,q,ie)})},d.dashLine=function(X,$,re){$=d.dashStyle($,re=+re||0),X.style({"stroke-dasharray":$,"stroke-width":re+"px"})},d.dashStyle=function(X,$){$=+$||1;var re=Math.max($,3);return"solid"===X?X="":"dot"===X?X=re+"px,"+re+"px":"dash"===X?X=3*re+"px,"+3*re+"px":"longdash"===X?X=5*re+"px,"+5*re+"px":"dashdot"===X?X=3*re+"px,"+re+"px,"+re+"px,"+re+"px":"longdashdot"===X&&(X=5*re+"px,"+2*re+"px,"+re+"px,"+2*re+"px"),X},d.singleFillStyle=function(X,$){var re=g.select(X.node());o(X,((re.data()[0]||[])[0]||{}).trace||{},$)},d.fillGroupStyle=function(X,$){X.style("stroke-width",0).each(function(re){var H=g.select(this);re[0].trace&&o(H,re[0].trace,$)})};var _=x("./symbol_defs");d.symbolNames=[],d.symbolFuncs=[],d.symbolNeedLines={},d.symbolNoDot={},d.symbolNoFill={},d.symbolList=[],Object.keys(_).forEach(function(X){var $=_[X],re=$.n;d.symbolList.push(re,String(re),X,re+100,String(re+100),X+"-open"),d.symbolNames[re]=X,d.symbolFuncs[re]=$.f,$.needLine&&(d.symbolNeedLines[re]=!0),$.noDot?d.symbolNoDot[re]=!0:d.symbolList.push(re+200,String(re+200),X+"-dot",re+300,String(re+300),X+"-open-dot"),$.noFill&&(d.symbolNoFill[re]=!0)});var s=d.symbolNames.length;function k(X,$){return d.symbolFuncs[X%100]($)+(X>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}d.symbolNumber=function(X){if(y(X))X=+X;else if("string"==typeof X){var $=0;X.indexOf("-open")>0&&($=100,X=X.replace("-open","")),X.indexOf("-dot")>0&&($+=200,X=X.replace("-dot","")),(X=d.symbolNames.indexOf(X))>=0&&(X+=$)}return X%100>=s||X>=400?0:Math.floor(Math.max(X,0))};var M={x1:1,x2:0,y1:0,y2:0},A={x1:0,x2:0,y1:1,y2:0},E=w("~f"),I={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:M},horizontalreversed:{node:"linearGradient",attrs:M,reversed:!0},vertical:{node:"linearGradient",attrs:A},verticalreversed:{node:"linearGradient",attrs:A,reversed:!0}};d.gradient=function(X,$,re,H,U,G){for(var ie=U.length,q=I[H],ee=new Array(ie),te=0;te<ie;te++)q.reversed?ee[ie-1-te]=[E(100*(1-U[te][0])),U[te][1]]:ee[te]=[E(100*U[te][0]),U[te][1]];var se=$._fullLayout,ue="g"+se._uid+"-"+re,de=se._defs.select(".gradients").selectAll("#"+ue).data([H+ee.join(";")],m.identity);de.exit().remove(),de.enter().append(q.node).each(function(){var he=g.select(this);q.attrs&&he.attr(q.attrs),he.attr("id",ue);var xe=he.selectAll("stop").data(ee);xe.exit().remove(),xe.enter().append("stop"),xe.each(function(ge){var _e=e(ge[1]);g.select(this).attr({offset:ge[0]+"%","stop-color":n.tinyRGB(_e),"stop-opacity":_e.getAlpha()})})}),X.style(G,Y(ue,$)).style(G+"-opacity",null),X.classed("gradient_filled",!0)},d.pattern=function(X,$,re,H,U,G,ie,q,ee,te,se,ue){var de="legend"===$;q&&("overlay"===ee?se=n.contrast(te=q):(te=void 0,se=q));var he,xe,ge,_e,Ce,Le,Ie,Be,Te,De=re._fullLayout,Fe="p"+De._uid+"-"+H,Ue={};switch(U){case"/":he=G*Math.sqrt(2),xe=G*Math.sqrt(2),Le="path",Ue={d:ge="M-"+he/4+","+xe/4+"l"+he/2+",-"+xe/2+"M0,"+xe+"L"+he+",0M"+he/4*3+","+xe/4*5+"l"+he/2+",-"+xe/2,opacity:ue,stroke:se,"stroke-width":(_e=ie*G)+"px"};break;case"\\":he=G*Math.sqrt(2),xe=G*Math.sqrt(2),Le="path",Ue={d:ge="M"+he/4*3+",-"+xe/4+"l"+he/2+","+xe/2+"M0,0L"+he+","+xe+"M-"+he/4+","+xe/4*3+"l"+he/2+","+xe/2,opacity:ue,stroke:se,"stroke-width":(_e=ie*G)+"px"};break;case"x":he=G*Math.sqrt(2),xe=G*Math.sqrt(2),ge="M-"+he/4+","+xe/4+"l"+he/2+",-"+xe/2+"M0,"+xe+"L"+he+",0M"+he/4*3+","+xe/4*5+"l"+he/2+",-"+xe/2+"M"+he/4*3+",-"+xe/4+"l"+he/2+","+xe/2+"M0,0L"+he+","+xe+"M-"+he/4+","+xe/4*3+"l"+he/2+","+xe/2,_e=G-G*Math.sqrt(1-ie),Le="path",Ue={d:ge,opacity:ue,stroke:se,"stroke-width":_e+"px"};break;case"|":Le="path",Le="path",Ue={d:ge="M"+(he=G)/2+",0L"+he/2+","+(xe=G),opacity:ue,stroke:se,"stroke-width":(_e=ie*G)+"px"};break;case"-":Le="path",Le="path",Ue={d:ge="M0,"+(xe=G)/2+"L"+(he=G)+","+xe/2,opacity:ue,stroke:se,"stroke-width":(_e=ie*G)+"px"};break;case"+":Le="path",ge="M"+(he=G)/2+",0L"+he/2+","+(xe=G)+"M0,"+xe/2+"L"+he+","+xe/2,_e=G-G*Math.sqrt(1-ie),Le="path",Ue={d:ge,opacity:ue,stroke:se,"stroke-width":_e+"px"};break;case".":he=G,xe=G,ie<Math.PI/4?Ce=Math.sqrt(ie*G*G/Math.PI):(Ie=ie,Be=Math.PI/4,1,Ce=(Te=G/2)+(G/Math.sqrt(2)-Te)*(Ie-Be)/(1-Be)),Le="circle",Ue={cx:he/2,cy:xe/2,r:Ce,opacity:ue,fill:se}}var He=[U||"noSh",te||"noBg",se||"noFg",G,ie].join(";"),Ke=De._defs.select(".patterns").selectAll("#"+Fe).data([He],m.identity);Ke.exit().remove(),Ke.enter().append("pattern").each(function(){var st=g.select(this);if(st.attr({id:Fe,width:he+"px",height:xe+"px",patternUnits:"userSpaceOnUse",patternTransform:de?"scale(0.8)":""}),te){var Ve=st.selectAll("rect").data([0]);Ve.exit().remove(),Ve.enter().append("rect").attr({width:he+"px",height:xe+"px",fill:te})}var $e=st.selectAll(Le).data([0]);$e.exit().remove(),$e.enter().append(Le).attr(Ue)}),X.style("fill",Y(Fe,re)).style("fill-opacity",null),X.classed("pattern_filled",!0)},d.initGradients=function(X){m.ensureSingle(X._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),g.select(X).selectAll(".gradient_filled").classed("gradient_filled",!1)},d.initPatterns=function(X){m.ensureSingle(X._fullLayout._defs,"g","patterns").selectAll("pattern").remove(),g.select(X).selectAll(".pattern_filled").classed("pattern_filled",!1)},d.getPatternAttr=function(X,$,re){return X&&m.isArrayOrTypedArray(X)?$<X.length?X[$]:re:X},d.pointStyle=function(X,$,re){if(X.size()){var H=d.makePointStyleFns($);X.each(function(U){d.singlePointStyle(U,g.select(this),$,H,re)})}},d.singlePointStyle=function(X,$,re,H,U){var G=re.marker,ie=G.line;if($.style("opacity",H.selectedOpacityFn?H.selectedOpacityFn(X):void 0===X.mo?G.opacity:X.mo),H.ms2mrc){var q;q="various"===X.ms||"various"===G.size?3:H.ms2mrc(X.ms),X.mrc=q,H.selectedSizeFn&&(q=X.mrc=H.selectedSizeFn(X));var ee=d.symbolNumber(X.mx||G.symbol)||0;X.om=ee%200>=100,$.attr("d",k(ee,q))}var te,se,ue,de=!1;if(X.so?(ue=ie.outlierwidth,se=ie.outliercolor,te=G.outliercolor):(ue=(X.mlw+1||(ie||{}).width+1||(X.trace?(X.trace.marker.line||{}).width:0)+1)-1||0,se="mlc"in X?X.mlcc=H.lineScale(X.mlc):m.isArrayOrTypedArray(ie.color)?n.defaultLine:ie.color,m.isArrayOrTypedArray(G.color)&&(te=n.defaultLine,de=!0),te="mc"in X?X.mcc=H.markerScale(X.mc):G.color||"rgba(0,0,0,0)",H.selectedColorFn&&(te=H.selectedColorFn(X))),X.om)$.call(n.stroke,te).style({"stroke-width":(ue||1)+"px",fill:"none"});else{$.style("stroke-width",(X.isBlank?0:ue)+"px");var xe=G.gradient,ge=X.mgt;ge?de=!0:ge=xe&&xe.type,m.isArrayOrTypedArray(ge)&&(I[ge=ge[0]]||(ge=0));var _e=G.pattern,Ce=_e&&d.getPatternAttr(_e.shape,X.i,"");if(ge&&"none"!==ge){var Le=X.mgc;Le?de=!0:Le=xe.color;var Ie=re.uid;de&&(Ie+="-"+X.i),d.gradient($,U,Ie,ge,[[0,Le],[1,te]],"fill")}else if(Ce){var Be=d.getPatternAttr(_e.bgcolor,X.i,null),ve=d.getPatternAttr(_e.fgcolor,X.i,null),Te=_e.fgopacity,Pe=d.getPatternAttr(_e.size,X.i,8),De=d.getPatternAttr(_e.solidity,X.i,.3),Fe=X.mcc||m.isArrayOrTypedArray(_e.shape)||m.isArrayOrTypedArray(_e.bgcolor)||m.isArrayOrTypedArray(_e.size)||m.isArrayOrTypedArray(_e.solidity),Ue=re.uid;Fe&&(Ue+="-"+X.i),d.pattern($,"point",U,Ue,Ce,Pe,De,X.mcc,_e.fillmode,Be,ve,Te)}else n.fill($,te);ue&&n.stroke($,se)}},d.makePointStyleFns=function(X){var $={},re=X.marker;return $.markerScale=d.tryColorscale(re,""),$.lineScale=d.tryColorscale(re,"line"),r.traceIs(X,"symbols")&&($.ms2mrc=f.isBubble(X)?l(X):function(){return(re.size||6)/2}),X.selectedpoints&&m.extendFlat($,d.makeSelectedPointStyleFns(X)),$},d.makeSelectedPointStyleFns=function(X){var $={},U=X.marker||{},G=(X.selected||{}).marker||{},ie=(X.unselected||{}).marker||{},ee=G.opacity,te=ie.opacity,se=void 0!==ee,ue=void 0!==te;(m.isArrayOrTypedArray(U.opacity)||se||ue)&&($.selectedOpacityFn=function(Be){var ve=void 0===Be.mo?U.opacity:Be.mo;return Be.selected?se?ee:ve:ue?te:c*ve});var de=U.color,he=G.color,xe=ie.color;(he||xe)&&($.selectedColorFn=function(Be){var ve=Be.mcc||de;return Be.selected?he||ve:xe||ve});var ge=U.size,_e=G.size,Ce=ie.size,Le=void 0!==_e,Ie=void 0!==Ce;return r.traceIs(X,"symbols")&&(Le||Ie)&&($.selectedSizeFn=function(Be){var ve=Be.mrc||ge/2;return Be.selected?Le?_e/2:ve:Ie?Ce/2:ve}),$},d.makeSelectedTextStyleFns=function(X){var $={},q=(X.textfont||{}).color,ee=((X.selected||{}).textfont||{}).color,te=((X.unselected||{}).textfont||{}).color;return $.selectedTextColorFn=function(se){var ue=se.tc||q;return se.selected?ee||ue:te||(ee?ue:n.addOpacity(ue,c))},$},d.selectedPointStyle=function(X,$){if(X.size()&&$.selectedpoints){var re=d.makeSelectedPointStyleFns($),H=$.marker||{},U=[];re.selectedOpacityFn&&U.push(function(G,ie){G.style("opacity",re.selectedOpacityFn(ie))}),re.selectedColorFn&&U.push(function(G,ie){n.fill(G,re.selectedColorFn(ie))}),re.selectedSizeFn&&U.push(function(G,ie){var q=ie.mx||H.symbol||0,ee=re.selectedSizeFn(ie);G.attr("d",k(d.symbolNumber(q),ee)),ie.mrc2=ee}),U.length&&X.each(function(G){for(var ie=g.select(this),q=0;q<U.length;q++)U[q](ie,G)})}},d.tryColorscale=function(X,$){var re=$?m.nestedProperty(X,$).get():X;return re&&(re.colorscale||re._colorAx)&&m.isArrayOrTypedArray(re.color)?a.makeColorScaleFuncFromTrace(re):m.identity};var C={start:1,end:-1,middle:0,bottom:1,top:-1};function R(X,$,re,H,U){var G=g.select(X.node().parentNode),ie=-1!==$.indexOf("top")?"top":-1!==$.indexOf("bottom")?"bottom":"middle",q=-1!==$.indexOf("left")?"end":-1!==$.indexOf("right")?"start":"middle",ee=H?H/.8+1:0,te=(p.lineCount(X)-1)*i+1,se=C[q]*ee,ue=.75*re+C[ie]*ee+(C[ie]-1)*te*re/2;X.attr("text-anchor",q),U||G.attr("transform",t(se,ue))}function O(X,$){var re=X.ts||$.textfont.size;return y(re)&&re>0?re:0}function D(X,$,re,H){var U=X[0]-$[0],G=X[1]-$[1],ie=re[0]-$[0],q=re[1]-$[1],ee=Math.pow(U*U+G*G,.25),te=Math.pow(ie*ie+q*q,.25),se=(te*te*U-ee*ee*ie)*H,ue=(te*te*G-ee*ee*q)*H,de=3*te*(ee+te),he=3*ee*(ee+te);return[[g.round($[0]+(de&&se/de),2),g.round($[1]+(de&&ue/de),2)],[g.round($[0]-(he&&se/he),2),g.round($[1]-(he&&ue/he),2)]]}d.textPointStyle=function(X,$,re){if(X.size()){var H;if($.selectedpoints){var U=d.makeSelectedTextStyleFns($);H=U.selectedTextColorFn}var G=$.texttemplate,ie=re._fullLayout;X.each(function(q){var ee=g.select(this),te=G?m.extractOption(q,$,"txt","texttemplate"):m.extractOption(q,$,"tx","text");if(te||0===te){if(G){var se=$._module.formatLabels,ue=se?se(q,$,ie):{},de={};h(de,$,q.i),te=m.texttemplateString(te,ue,ie._d3locale,de,q,$._meta||{})}var xe=q.tp||$.textposition,ge=O(q,$),_e=H?H(q):q.tc||$.textfont.color;ee.call(d.font,q.tf||$.textfont.family,ge,_e).text(te).call(p.convertToTspans,re).call(R,xe,ge,q.mrc)}else ee.remove()})}},d.selectedTextStyle=function(X,$){if(X.size()&&$.selectedpoints){var re=d.makeSelectedTextStyleFns($);X.each(function(H){var U=g.select(this),G=re.selectedTextColorFn(H),ie=H.tp||$.textposition,q=O(H,$);n.fill(U,G);var ee=r.traceIs($,"bar-like");R(U,ie,q,H.mrc2||H.mrc,ee)})}},d.smoothopen=function(X,$){if(X.length<3)return"M"+X.join("L");var re,H="M"+X[0],U=[];for(re=1;re<X.length-1;re++)U.push(D(X[re-1],X[re],X[re+1],$));for(H+="Q"+U[0][0]+" "+X[1],re=2;re<X.length-1;re++)H+="C"+U[re-2][1]+" "+U[re-1][0]+" "+X[re];return H+"Q"+U[X.length-3][1]+" "+X[X.length-1]},d.smoothclosed=function(X,$){if(X.length<3)return"M"+X.join("L")+"Z";var re,H="M"+X[0],U=X.length-1,G=[D(X[U],X[0],X[1],$)];for(re=1;re<U;re++)G.push(D(X[re-1],X[re],X[re+1],$));for(G.push(D(X[U-1],X[U],X[0],$)),re=1;re<=U;re++)H+="C"+G[re-1][1]+" "+G[re][0]+" "+X[re];return H+"C"+G[U][1]+" "+G[0][0]+" "+X[0]+"Z"};var L={hv:function(X,$){return"H"+g.round($[0],2)+"V"+g.round($[1],2)},vh:function(X,$){return"V"+g.round($[1],2)+"H"+g.round($[0],2)},hvh:function(X,$){return"H"+g.round((X[0]+$[0])/2,2)+"V"+g.round($[1],2)+"H"+g.round($[0],2)},vhv:function(X,$){return"V"+g.round((X[1]+$[1])/2,2)+"H"+g.round($[0],2)+"V"+g.round($[1],2)}},B=function(X,$){return"L"+g.round($[0],2)+","+g.round($[1],2)};d.steps=function(X){var $=L[X]||B;return function(re){for(var H="M"+g.round(re[0][0],2)+","+g.round(re[0][1],2),U=1;U<re.length;U++)H+=$(re[U-1],re[U]);return H}},d.makeTester=function(){var X=m.ensureSingleById(g.select("body"),"svg","js-plotly-tester",function(re){re.attr(u.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),$=m.ensureSingle(X,"path","js-reference-point",function(re){re.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});d.tester=X,d.testref=$},d.savedBBoxes={};var j=0;function W(X){var $=X.getAttribute("data-unformatted");if(null!==$)return $+X.getAttribute("data-math")+X.getAttribute("text-anchor")+X.getAttribute("style")}function Y(X,$){if(!X)return null;var re=$._context,H=re._exportedPlot?"":re._baseUrl||"";return H?"url('"+H+"#"+X+"')":"url(#"+X+")"}d.bBox=function(X,$,re){var H,U,G;if(re||(re=W(X)),re){if(H=d.savedBBoxes[re])return m.extendFlat({},H)}else if(1===X.childNodes.length){var ie=X.childNodes[0];if(re=W(ie)){var q=+ie.getAttribute("x")||0,ee=+ie.getAttribute("y")||0,te=ie.getAttribute("transform");if(!te){var se=d.bBox(ie,!1,re);return q&&(se.left+=q,se.right+=q),ee&&(se.top+=ee,se.bottom+=ee),se}if(H=d.savedBBoxes[re+="~"+q+"~"+ee+"~"+te])return m.extendFlat({},H)}}$?U=X:(G=d.tester.node(),U=X.cloneNode(!0),G.appendChild(U)),g.select(U).attr("transform",null).call(p.positionText,0,0);var ue=U.getBoundingClientRect(),de=d.testref.node().getBoundingClientRect();$||G.removeChild(U);var he={height:ue.height,width:ue.width,left:ue.left-de.left,top:ue.top-de.top,right:ue.right-de.left,bottom:ue.bottom-de.top};return j>=1e4&&(d.savedBBoxes={},j=0),re&&(d.savedBBoxes[re]=he),j++,m.extendFlat({},he)},d.setClipUrl=function(X,$,re){X.attr("clip-path",Y($,re))},d.getTranslate=function(X){var $=(X[X.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(re,H,U){return[H,U].join(" ")}).split(" ");return{x:+$[0]||0,y:+$[1]||0}},d.setTranslate=function(X,$,re){var U=X.attr?"attr":"setAttribute",G=X[X.attr?"attr":"getAttribute"]("transform")||"";return $=$||0,re=re||0,G=G.replace(/(\btranslate\(.*?\);?)/,"").trim(),G=(G+=t($,re)).trim(),X[U]("transform",G),G},d.getScale=function(X){var $=(X[X.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(re,H,U){return[H,U].join(" ")}).split(" ");return{x:+$[0]||1,y:+$[1]||1}},d.setScale=function(X,$,re){var U=X.attr?"attr":"setAttribute",G=X[X.attr?"attr":"getAttribute"]("transform")||"";return $=$||1,re=re||1,G=G.replace(/(\bscale\(.*?\);?)/,"").trim(),G=(G+="scale("+$+","+re+")").trim(),X[U]("transform",G),G};var Q=/\s*sc.*/;d.setPointGroupScale=function(X,$,re){if($=$||1,re=re||1,X){var H=1===$&&1===re?"":"scale("+$+","+re+")";X.each(function(){var U=(this.getAttribute("transform")||"").replace(Q,"");U=(U+=H).trim(),this.setAttribute("transform",U)})}};var ne=/translate\([^)]*\)\s*$/;d.setTextPointsScale=function(X,$,re){X&&X.each(function(){var H,U=g.select(this),G=U.select("text");if(G.node()){var ie=parseFloat(G.attr("x")||0),q=parseFloat(G.attr("y")||0),ee=(U.attr("transform")||"").match(ne);H=1===$&&1===re?[]:[t(ie,q),"scale("+$+","+re+")",t(-ie,-q)],ee&&H.push(ee),U.attr("transform",H.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":944,"../../traces/scatter/subtypes":952,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(x,oe,ae){"use strict";var g=x("@plotly/d3");oe.exports={circle:{n:0,f:function(m){var w=g.round(m,2);return"M"+w+",0A"+w+","+w+" 0 1,1 0,-"+w+"A"+w+","+w+" 0 0,1 "+w+",0Z"}},square:{n:1,f:function(m){var w=g.round(m,2);return"M"+w+","+w+"H-"+w+"V-"+w+"H"+w+"Z"}},diamond:{n:2,f:function(m){var w=g.round(1.3*m,2);return"M"+w+",0L0,"+w+"L-"+w+",0L0,-"+w+"Z"}},cross:{n:3,f:function(m){var w=g.round(.4*m,2),y=g.round(1.2*m,2);return"M"+y+","+w+"H"+w+"V"+y+"H-"+w+"V"+w+"H-"+y+"V-"+w+"H-"+w+"V-"+y+"H"+w+"V-"+w+"H"+y+"Z"}},x:{n:4,f:function(m){var w=g.round(.8*m/Math.sqrt(2),2),y="l"+w+","+w,e="l"+w+",-"+w,r="l-"+w+",-"+w,n="l-"+w+","+w;return"M0,"+w+y+e+r+e+r+n+r+n+y+n+y+"Z"}},"triangle-up":{n:5,f:function(m){var w=g.round(2*m/Math.sqrt(3),2);return"M-"+w+","+g.round(m/2,2)+"H"+w+"L0,-"+g.round(m,2)+"Z"}},"triangle-down":{n:6,f:function(m){var w=g.round(2*m/Math.sqrt(3),2);return"M-"+w+",-"+g.round(m/2,2)+"H"+w+"L0,"+g.round(m,2)+"Z"}},"triangle-left":{n:7,f:function(m){var w=g.round(2*m/Math.sqrt(3),2);return"M"+g.round(m/2,2)+",-"+w+"V"+w+"L-"+g.round(m,2)+",0Z"}},"triangle-right":{n:8,f:function(m){var w=g.round(2*m/Math.sqrt(3),2);return"M-"+g.round(m/2,2)+",-"+w+"V"+w+"L"+g.round(m,2)+",0Z"}},"triangle-ne":{n:9,f:function(m){var w=g.round(.6*m,2),y=g.round(1.2*m,2);return"M-"+y+",-"+w+"H"+w+"V"+y+"Z"}},"triangle-se":{n:10,f:function(m){var w=g.round(.6*m,2),y=g.round(1.2*m,2);return"M"+w+",-"+y+"V"+w+"H-"+y+"Z"}},"triangle-sw":{n:11,f:function(m){var w=g.round(.6*m,2),y=g.round(1.2*m,2);return"M"+y+","+w+"H-"+w+"V-"+y+"Z"}},"triangle-nw":{n:12,f:function(m){var w=g.round(.6*m,2),y=g.round(1.2*m,2);return"M-"+w+","+y+"V-"+w+"H"+y+"Z"}},pentagon:{n:13,f:function(m){var w=g.round(.951*m,2),y=g.round(.588*m,2),e=g.round(-m,2),r=g.round(-.309*m,2);return"M"+w+","+r+"L"+y+","+g.round(.809*m,2)+"H-"+y+"L-"+w+","+r+"L0,"+e+"Z"}},hexagon:{n:14,f:function(m){var w=g.round(m,2),y=g.round(m/2,2),e=g.round(m*Math.sqrt(3)/2,2);return"M"+e+",-"+y+"V"+y+"L0,"+w+"L-"+e+","+y+"V-"+y+"L0,-"+w+"Z"}},hexagon2:{n:15,f:function(m){var w=g.round(m,2),y=g.round(m/2,2),e=g.round(m*Math.sqrt(3)/2,2);return"M-"+y+","+e+"H"+y+"L"+w+",0L"+y+",-"+e+"H-"+y+"L-"+w+",0Z"}},octagon:{n:16,f:function(m){var w=g.round(.924*m,2),y=g.round(.383*m,2);return"M-"+y+",-"+w+"H"+y+"L"+w+",-"+y+"V"+y+"L"+y+","+w+"H-"+y+"L-"+w+","+y+"V-"+y+"Z"}},star:{n:17,f:function(m){var w=1.4*m,y=g.round(.225*w,2),e=g.round(.951*w,2),r=g.round(.363*w,2),n=g.round(.588*w,2),a=g.round(-w,2),t=g.round(-.309*w,2),p=g.round(.118*w,2),u=g.round(.809*w,2);return"M"+y+","+t+"H"+e+"L"+r+","+p+"L"+n+","+u+"L0,"+g.round(.382*w,2)+"L-"+n+","+u+"L-"+r+","+p+"L-"+e+","+t+"H-"+y+"L0,"+a+"Z"}},hexagram:{n:18,f:function(m){var w=g.round(.66*m,2),y=g.round(.38*m,2),e=g.round(.76*m,2);return"M-"+e+",0l-"+y+",-"+w+"h"+e+"l"+y+",-"+w+"l"+y+","+w+"h"+e+"l-"+y+","+w+"l"+y+","+w+"h-"+e+"l-"+y+","+w+"l-"+y+",-"+w+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(m){var w=g.round(m*Math.sqrt(3)*.8,2),y=g.round(.8*m,2),e=g.round(1.6*m,2),r=g.round(4*m,2),n="A "+r+","+r+" 0 0 1 ";return"M-"+w+","+y+n+w+","+y+n+"0,-"+e+n+"-"+w+","+y+"Z"}},"star-triangle-down":{n:20,f:function(m){var w=g.round(m*Math.sqrt(3)*.8,2),y=g.round(.8*m,2),e=g.round(1.6*m,2),r=g.round(4*m,2),n="A "+r+","+r+" 0 0 1 ";return"M"+w+",-"+y+n+"-"+w+",-"+y+n+"0,"+e+n+w+",-"+y+"Z"}},"star-square":{n:21,f:function(m){var w=g.round(1.1*m,2),y=g.round(2*m,2),e="A "+y+","+y+" 0 0 1 ";return"M-"+w+",-"+w+e+"-"+w+","+w+e+w+","+w+e+w+",-"+w+e+"-"+w+",-"+w+"Z"}},"star-diamond":{n:22,f:function(m){var w=g.round(1.4*m,2),y=g.round(1.9*m,2),e="A "+y+","+y+" 0 0 1 ";return"M-"+w+",0"+e+"0,"+w+e+w+",0"+e+"0,-"+w+e+"-"+w+",0Z"}},"diamond-tall":{n:23,f:function(m){var w=g.round(.7*m,2),y=g.round(1.4*m,2);return"M0,"+y+"L"+w+",0L0,-"+y+"L-"+w+",0Z"}},"diamond-wide":{n:24,f:function(m){var w=g.round(1.4*m,2),y=g.round(.7*m,2);return"M0,"+y+"L"+w+",0L0,-"+y+"L-"+w+",0Z"}},hourglass:{n:25,f:function(m){var w=g.round(m,2);return"M"+w+","+w+"H-"+w+"L"+w+",-"+w+"H-"+w+"Z"},noDot:!0},bowtie:{n:26,f:function(m){var w=g.round(m,2);return"M"+w+","+w+"V-"+w+"L-"+w+","+w+"V-"+w+"Z"},noDot:!0},"circle-cross":{n:27,f:function(m){var w=g.round(m,2);return"M0,"+w+"V-"+w+"M"+w+",0H-"+w+"M"+w+",0A"+w+","+w+" 0 1,1 0,-"+w+"A"+w+","+w+" 0 0,1 "+w+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(m){var w=g.round(m,2),y=g.round(m/Math.sqrt(2),2);return"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y+"M"+w+",0A"+w+","+w+" 0 1,1 0,-"+w+"A"+w+","+w+" 0 0,1 "+w+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(m){var w=g.round(m,2);return"M0,"+w+"V-"+w+"M"+w+",0H-"+w+"M"+w+","+w+"H-"+w+"V-"+w+"H"+w+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(m){var w=g.round(m,2);return"M"+w+","+w+"L-"+w+",-"+w+"M"+w+",-"+w+"L-"+w+","+w+"M"+w+","+w+"H-"+w+"V-"+w+"H"+w+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(m){var w=g.round(1.3*m,2);return"M"+w+",0L0,"+w+"L-"+w+",0L0,-"+w+"ZM0,-"+w+"V"+w+"M-"+w+",0H"+w},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(m){var w=g.round(1.3*m,2),y=g.round(.65*m,2);return"M"+w+",0L0,"+w+"L-"+w+",0L0,-"+w+"ZM-"+y+",-"+y+"L"+y+","+y+"M-"+y+","+y+"L"+y+",-"+y},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(m){var w=g.round(1.4*m,2);return"M0,"+w+"V-"+w+"M"+w+",0H-"+w},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(m){var w=g.round(m,2);return"M"+w+","+w+"L-"+w+",-"+w+"M"+w+",-"+w+"L-"+w+","+w},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(m){var w=g.round(1.2*m,2),y=g.round(.85*m,2);return"M0,"+w+"V-"+w+"M"+w+",0H-"+w+"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(m){var w=g.round(m/2,2),y=g.round(m,2);return"M"+w+","+y+"V-"+y+"m-"+y+",0V"+y+"M"+y+","+w+"H-"+y+"m0,-"+y+"H"+y},needLine:!0,noFill:!0},"y-up":{n:37,f:function(m){var w=g.round(1.2*m,2),y=g.round(1.6*m,2),e=g.round(.8*m,2);return"M-"+w+","+e+"L0,0M"+w+","+e+"L0,0M0,-"+y+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(m){var w=g.round(1.2*m,2),y=g.round(1.6*m,2),e=g.round(.8*m,2);return"M-"+w+",-"+e+"L0,0M"+w+",-"+e+"L0,0M0,"+y+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(m){var w=g.round(1.2*m,2),y=g.round(1.6*m,2),e=g.round(.8*m,2);return"M"+e+","+w+"L0,0M"+e+",-"+w+"L0,0M-"+y+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(m){var w=g.round(1.2*m,2),y=g.round(1.6*m,2),e=g.round(.8*m,2);return"M-"+e+","+w+"L0,0M-"+e+",-"+w+"L0,0M"+y+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(m){var w=g.round(1.4*m,2);return"M"+w+",0H-"+w},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(m){var w=g.round(1.4*m,2);return"M0,"+w+"V-"+w},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(m){var w=g.round(m,2);return"M"+w+",-"+w+"L-"+w+","+w},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(m){var w=g.round(m,2);return"M"+w+","+w+"L-"+w+",-"+w},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(m){var w=g.round(m,2);return"M0,0L-"+w+","+g.round(2*m,2)+"H"+w+"Z"},noDot:!0},"arrow-down":{n:46,f:function(m){var w=g.round(m,2);return"M0,0L-"+w+",-"+g.round(2*m,2)+"H"+w+"Z"},noDot:!0},"arrow-left":{n:47,f:function(m){var w=g.round(2*m,2),y=g.round(m,2);return"M0,0L"+w+",-"+y+"V"+y+"Z"},noDot:!0},"arrow-right":{n:48,f:function(m){var w=g.round(2*m,2),y=g.round(m,2);return"M0,0L-"+w+",-"+y+"V"+y+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(m){var w=g.round(m,2);return"M-"+w+",0H"+w+"M0,0L-"+w+","+g.round(2*m,2)+"H"+w+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(m){var w=g.round(m,2);return"M-"+w+",0H"+w+"M0,0L-"+w+",-"+g.round(2*m,2)+"H"+w+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(m){var w=g.round(2*m,2),y=g.round(m,2);return"M0,-"+y+"V"+y+"M0,0L"+w+",-"+y+"V"+y+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(m){var w=g.round(2*m,2),y=g.round(m,2);return"M0,-"+y+"V"+y+"M0,0L-"+w+",-"+y+"V"+y+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(x,oe,ae){"use strict";oe.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../registry"),w=x("../../plots/cartesian/axes"),y=x("../../lib"),e=x("./compute_error");function r(n,a,t,p){var u=a["error_"+p]||{},i=[];if(u.visible&&-1!==["linear","log"].indexOf(t.type)){for(var c=e(u),f=0;f<n.length;f++){var l=n[f],h=l.i;if(void 0===h)h=f;else if(null===h)continue;var d=l[p];if(g(t.c2l(d))){var o=c(d,h);if(g(o[0])&&g(o[1])){var _=l[p+"s"]=d-o[0],s=l[p+"h"]=d+o[1];i.push(_,s)}}}var M=a._extremes[t._id],A=w.findExtremes(t,i,y.extendFlat({tozero:M.opts.tozero},{padded:!0}));M.min=M.min.concat(A.min),M.max=M.max.concat(A.max)}}oe.exports=function(n){for(var a=n.calcdata,t=0;t<a.length;t++){var p=a[t],u=p[0].trace;if(!0===u.visible&&m.traceIs(u,"errorBarsOK")){var i=w.getFromId(n,u.xaxis),c=w.getFromId(n,u.yaxis);r(p,u,i,"x"),r(p,u,c,"y")}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(x,oe,ae){"use strict";function g(m,w){return"percent"===m?function(y){return Math.abs(y*w/100)}:"constant"===m?function(){return Math.abs(w)}:"sqrt"===m?function(y){return Math.sqrt(Math.abs(y))}:void 0}oe.exports=function(m){var w=m.type,y=m.symmetric;if("data"===w){var e=m.array||[];if(y)return function(t,p){var u=+e[p];return[u,u]};var r=m.arrayminus||[];return function(t,p){var u=+e[p],i=+r[p];return isNaN(u)&&isNaN(i)?[NaN,NaN]:[i||0,u||0]}}var n=g(w,m.value),a=g(w,m.valueminus);return y||void 0===m.valueminus?function(t){var p=n(t);return[p,p]}:function(t){return[a(t),n(t)]}}},{}],393:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../registry"),w=x("../../lib"),y=x("../../plot_api/plot_template"),e=x("./attributes");oe.exports=function(r,n,a,t){var p="error_"+t.axis,u=y.newContainer(n,p),i=r[p]||{};function c(d,o){return w.coerce(i,u,e,d,o)}if(!1!==c("visible",void 0!==i.array||void 0!==i.value||"sqrt"===i.type)){var f=c("type","array"in i?"data":"percent"),l=!0;"sqrt"!==f&&(l=c("symmetric",!(("data"===f?"arrayminus":"valueminus")in i))),"data"===f?(c("array"),c("traceref"),l||(c("arrayminus"),c("tracerefminus"))):"percent"!==f&&"constant"!==f||(c("value"),l||c("valueminus"));var h="copy_"+t.inherit+"style";t.inherit&&(n["error_"+t.inherit]||{}).visible&&c(h,!(i.color||g(i.thickness)||g(i.width))),t.inherit&&u[h]||(c("color",a),c("thickness"),c("width",m.traceIs(n,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plot_api/edit_types").overrideAll,w=x("./attributes"),y={error_x:g.extendFlat({},w),error_y:g.extendFlat({},w)};delete y.error_x.copy_zstyle,delete y.error_y.copy_zstyle,delete y.error_y.copy_ystyle;var e={error_x:g.extendFlat({},w),error_y:g.extendFlat({},w),error_z:g.extendFlat({},w)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,oe.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:y,bar:y,histogram:y,scatter3d:m(e,"calc","nested"),scattergl:m(y,"calc","nested")}},supplyDefaults:x("./defaults"),calc:x("./calc"),makeComputeError:x("./compute_error"),plot:x("./plot"),style:x("./style"),hoverInfo:function(r,n,a){(n.error_y||{}).visible&&(a.yerr=r.yh-r.y,n.error_y.symmetric||(a.yerrneg=r.y-r.ys)),(n.error_x||{}).visible&&(a.xerr=r.xh-r.x,n.error_x.symmetric||(a.xerrneg=r.x-r.xs))}}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("fast-isnumeric"),w=x("../drawing"),y=x("../../traces/scatter/subtypes");oe.exports=function(e,r,n,a){var t=n.xaxis,p=n.yaxis,u=a&&a.duration>0;r.each(function(i){var c,f=i[0].trace,l=f.error_x||{},h=f.error_y||{};f.ids&&(c=function(s){return s.id});var d=y.hasMarkers(f)&&f.marker.maxdisplayed>0;h.visible||l.visible||(i=[]);var o=g.select(this).selectAll("g.errorbar").data(i,c);if(o.exit().remove(),i.length){l.visible||o.selectAll("path.xerror").remove(),h.visible||o.selectAll("path.yerror").remove(),o.style("opacity",1);var _=o.enter().append("g").classed("errorbar",!0);u&&_.style("opacity",0).transition().duration(a.duration).style("opacity",1),w.setClipUrl(o,n.layerClipId,e),o.each(function(s){var O,D,L,B,k=g.select(this),M=(L=p,B={x:(D=t).c2p((O=s).x),y:L.c2p(O.y)},void 0!==O.yh&&(B.yh=L.c2p(O.yh),B.ys=L.c2p(O.ys),m(B.ys)||(B.noYS=!0,B.ys=L.c2p(O.ys,!0))),void 0!==O.xh&&(B.xh=D.c2p(O.xh),B.xs=D.c2p(O.xs),m(B.xs)||(B.noXS=!0,B.xs=D.c2p(O.xs,!0))),B);if(!d||s.vis){var A,E=k.select("path.yerror");if(h.visible&&m(M.x)&&m(M.yh)&&m(M.ys)){var I=h.width;A="M"+(M.x-I)+","+M.yh+"h"+2*I+"m-"+I+",0V"+M.ys,M.noYS||(A+="m-"+I+",0h"+2*I),E.size()?u&&(E=E.transition().duration(a.duration).ease(a.easing)):E=k.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),E.attr("d",A)}else E.remove();var C=k.select("path.xerror");if(l.visible&&m(M.y)&&m(M.xh)&&m(M.xs)){var R=(l.copy_ystyle?h:l).width;A="M"+M.xh+","+(M.y-R)+"v"+2*R+"m0,-"+R+"H"+M.xs,M.noXS||(A+="m0,-"+R+"v"+2*R),C.size()?u&&(C=C.transition().duration(a.duration).ease(a.easing)):C=k.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),C.attr("d",A)}else C.remove()}})}})}},{"../../traces/scatter/subtypes":952,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../color");oe.exports=function(w){w.each(function(y){var e=y[0].trace,r=e.error_y||{},n=e.error_x||{},a=g.select(this);a.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(m.stroke,r.color),n.copy_ystyle&&(n=r),a.selectAll("path.xerror").style("stroke-width",n.thickness+"px").call(m.stroke,n.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(x,oe,ae){"use strict";var g=x("../../plots/font_attributes"),m=x("./layout_attributes").hoverlabel,w=x("../../lib/extend").extendFlat;oe.exports={hoverlabel:{bgcolor:w({},m.bgcolor,{arrayOk:!0}),bordercolor:w({},m.bordercolor,{arrayOk:!0}),font:g({arrayOk:!0,editType:"none"}),align:w({},m.align,{arrayOk:!0}),namelength:w({},m.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../registry");function w(y,e,r,n){n=n||g.identity,Array.isArray(y)&&(e[0][r]=n(y))}oe.exports=function(y){var e=y.calcdata,r=y._fullLayout;function n(i){return function(c){return g.coerceHoverinfo({hoverinfo:c},{_module:i._module},r)}}for(var a=0;a<e.length;a++){var t=e[a],p=t[0].trace;if(!m.traceIs(p,"pie-like")){var u=m.traceIs(p,"2dMap")?w:g.fillArray;u(p.hoverinfo,t,"hi",n(p)),p.hovertemplate&&u(p.hovertemplate,t,"ht"),p.hoverlabel&&(u(p.hoverlabel.bgcolor,t,"hbg"),u(p.hoverlabel.bordercolor,t,"hbc"),u(p.hoverlabel.font.size,t,"hts"),u(p.hoverlabel.font.color,t,"htc"),u(p.hoverlabel.font.family,t,"htf"),u(p.hoverlabel.namelength,t,"hnl"),u(p.hoverlabel.align,t,"hta"))}}}},{"../../lib":503,"../../registry":638}],399:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("./hover").hover;oe.exports=function(w,y,e){var r=g.getComponentMethod("annotations","onClick")(w,w._hoverdata);function n(){w.emit("plotly_click",{points:w._hoverdata,event:y})}void 0!==e&&m(w,y,e,!0),w._hoverdata&&y&&y.target&&(r&&r.then?r.then(n):n(),y.stopImmediatePropagation&&y.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(x,oe,ae){"use strict";oe.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./attributes"),w=x("./hoverlabel_defaults");oe.exports=function(y,e,r,n){var a=g.extendFlat({},n.hoverlabel);e.hovertemplate&&(a.namelength=-1),w(y,e,function(t,p){return g.coerce(y,e,m,t,p)},a)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(x,oe,ae){"use strict";var g=x("../../lib");ae.getSubplot=function(n){return n.subplot||n.xaxis+n.yaxis||n.geo},ae.isTraceInSubplots=function(n,a){if("splom"===n.type){for(var t=n.xaxes||[],p=n.yaxes||[],u=0;u<t.length;u++)for(var i=0;i<p.length;i++)if(-1!==a.indexOf(t[u]+p[i]))return!0;return!1}return-1!==a.indexOf(ae.getSubplot(n))},ae.flat=function(n,a){for(var t=new Array(n.length),p=0;p<n.length;p++)t[p]=a;return t},ae.p2c=function(n,a){for(var t=new Array(n.length),p=0;p<n.length;p++)t[p]=n[p].p2c(a);return t},ae.getDistanceFunction=function(n,a,t,p){return"closest"===n?p||ae.quadrature(a,t):"x"===n.charAt(0)?a:t},ae.getClosest=function(n,a,t){if(!1!==t.index)t.index>=0&&t.index<n.length?t.distance=0:t.index=!1;else for(var p=0;p<n.length;p++){var u=a(n[p]);u<=t.distance&&(t.index=p,t.distance=u)}return t},ae.inbox=function(n,a,t){return n*a<0||0===n?t:1/0},ae.quadrature=function(n,a){return function(t){var p=n(t),u=a(t);return Math.sqrt(p*p+u*u)}},ae.makeEventData=function(n,a,t){var p="index"in n?n.index:n.pointNumber,u={data:a._input,fullData:a,curveNumber:a.index,pointNumber:p};if(a._indexToPoints){var i=a._indexToPoints[p];1===i.length?u.pointIndex=i[0]:u.pointIndices=i}else u.pointIndex=p;return a._module.eventData?u=a._module.eventData(u,n,a,t,p):("xVal"in n?u.x=n.xVal:"x"in n&&(u.x=n.x),"yVal"in n?u.y=n.yVal:"y"in n&&(u.y=n.y),n.xa&&(u.xaxis=n.xa),n.ya&&(u.yaxis=n.ya),void 0!==n.zLabelVal&&(u.z=n.zLabelVal)),ae.appendArrayPointValue(u,a,p),u},ae.appendArrayPointValue=function(n,a,t){var p=a._arrayAttrs;if(p)for(var u=0;u<p.length;u++){var i=p[u],c=w(i);if(void 0===n[c]){var f=y(g.nestedProperty(a,i).get(),t);void 0!==f&&(n[c]=f)}}},ae.appendArrayMultiPointValues=function(n,a,t){var p=a._arrayAttrs;if(p)for(var u=0;u<p.length;u++){var i=p[u],c=w(i);if(void 0===n[c]){for(var f=g.nestedProperty(a,i).get(),l=new Array(t.length),h=0;h<t.length;h++)l[h]=y(f,t[h]);n[c]=l}}};var m={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function w(n){return m[n]||n}function y(n,a){return Array.isArray(a)?Array.isArray(n)&&Array.isArray(n[a[0]])?n[a[0]][a[1]]:void 0:n[a]}var e={x:!0,y:!0},r={"x unified":!0,"y unified":!0};ae.isUnifiedHover=function(n){return"string"==typeof n&&!!r[n]},ae.isXYhover=function(n){return"string"==typeof n&&!!e[n]}},{"../../lib":503}],403:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("fast-isnumeric"),w=x("tinycolor2"),y=x("../../lib"),e=y.strTranslate,r=y.strRotate,n=x("../../lib/events"),a=x("../../lib/svg_text_utils"),t=x("../../lib/override_cursor"),p=x("../drawing"),u=x("../color"),i=x("../dragelement"),c=x("../../plots/cartesian/axes"),f=x("../../registry"),l=x("./helpers"),h=x("./constants"),d=x("../legend/defaults"),o=x("../legend/draw"),_=h.YANGLE,s=Math.PI*_/180,k=1/Math.sin(s),M=Math.cos(s),A=Math.sin(s),E=h.HOVERARROWSIZE,I=h.HOVERTEXTPAD,C={box:!0,ohlc:!0,violin:!0,candlestick:!0},R={scatter:!0,scattergl:!0,splom:!0};function O(U){return[U.trace.index,U.index,U.x0,U.y0,U.name,U.attr,U.xa?U.xa._id:"",U.ya?U.ya._id:""].join(",")}ae.hover=function(U,G,ie,q){U=y.getGraphDiv(U);var ee=G.target;y.throttle(U._fullLayout._uid+h.HOVERID,h.HOVERMINTIME,function(){!function(te,se,ue,de,he){ue||(ue="xy");var xe=Array.isArray(ue)?ue:[ue],ge=te._fullLayout,_e=ge._plots||[],Ce=_e[ue],Le=ge._has("cartesian");if(Ce){var Ie=Ce.overlays.map(function($n){return $n.id});xe=xe.concat(Ie)}for(var Be=xe.length,ve=new Array(Be),Te=new Array(Be),Pe=!1,De=0;De<Be;De++){var Fe=xe[De];if(_e[Fe])Pe=!0,ve[De]=_e[Fe].xaxis,Te[De]=_e[Fe].yaxis;else{if(!ge[Fe]||!ge[Fe]._subplot)return void y.warn("Unrecognized subplot: "+Fe);var Ue=ge[Fe]._subplot;ve[De]=Ue.xaxis,Te[De]=Ue.yaxis}}var He=se.hovermode||ge.hovermode;if(He&&!Pe&&(He="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(He)||!te.calcdata||te.querySelector(".zoombox")||te._dragging)return i.unhoverRaw(te,se);var Ke=ge.hoverdistance;-1===Ke&&(Ke=1/0);var st=ge.spikedistance;-1===st&&(st=1/0);var Ve,$e,Qe,tt,ut,xt,kt,Bt,Rt,ft,lt,Ft,Jt,ln=[],dn=[],cn={hLinePoint:null,vLinePoint:null},Tn=!1;if(Array.isArray(se))for(He="array",Qe=0;Qe<se.length;Qe++)(ut=te.calcdata[se[Qe].curveNumber||0])&&(xt=ut[0].trace,"skip"!==ut[0].trace.hoverinfo&&(dn.push(ut),"h"===xt.orientation&&(Tn=!0)));else{for(tt=0;tt<te.calcdata.length;tt++)"skip"!==(xt=(ut=te.calcdata[tt])[0].trace).hoverinfo&&l.isTraceInSubplots(xt,xe)&&(dn.push(ut),"h"===xt.orientation&&(Tn=!0));var nn,Me;if(he){if(!1===n.triggerHandler(te,"plotly_beforehover",se))return;var Ee=he.getBoundingClientRect();nn=se.clientX-Ee.left,Me=se.clientY-Ee.top,ge._calcInverseTransform(te);var Se=y.apply3DTransform(ge._invTransform)(nn,Me);if(Me=Se[1],(nn=Se[0])<0||nn>ve[0]._length||Me<0||Me>Te[0]._length)return i.unhoverRaw(te,se)}else nn="xpx"in se?se.xpx:ve[0]._length/2,Me="ypx"in se?se.ypx:Te[0]._length/2;if(se.pointerX=nn+ve[0]._offset,se.pointerY=Me+Te[0]._offset,Ve="xval"in se?l.flat(xe,se.xval):l.p2c(ve,nn),$e="yval"in se?l.flat(xe,se.yval):l.p2c(Te,Me),!m(Ve[0])||!m($e[0]))return y.warn("Fx.hover failed",se,te),i.unhoverRaw(te,se)}var je=1/0;function qe($n,Mr){for(tt=0;tt<dn.length;tt++)if((ut=dn[tt])&&ut[0]&&ut[0].trace&&!0===(xt=ut[0].trace).visible&&0!==xt._length&&-1===["carpet","contourcarpet"].indexOf(xt._module.name)){if("splom"===xt.type?kt=xe[Bt=0]:(kt=l.getSubplot(xt),Bt=xe.indexOf(kt)),l.isUnifiedHover(Rt=He)&&(Rt=Rt.charAt(0)),Ft={cd:ut,trace:xt,xa:ve[Bt],ya:Te[Bt],maxHoverDistance:Ke,maxSpikeDistance:st,index:!1,distance:Math.min(je,Ke),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:u.defaultLine,name:xt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ge[kt]&&(Ft.subplot=ge[kt]._subplot),ge._splomScenes&&ge._splomScenes[xt.uid]&&(Ft.scene=ge._splomScenes[xt.uid]),Jt=ln.length,"array"===Rt){var br=se[tt];"pointNumber"in br?(Ft.index=br.pointNumber,Rt="closest"):(Rt="","xval"in br&&(ft=br.xval,Rt="x"),"yval"in br&&(lt=br.yval,Rt=Rt?"closest":"y"))}else void 0!==$n&&void 0!==Mr?(ft=$n,lt=Mr):(ft=Ve[Bt],lt=$e[Bt]);if(0!==Ke)if(xt._module&&xt._module.hoverPoints){var ar=xt._module.hoverPoints(Ft,ft,lt,Rt,{finiteRange:!0,hoverLayer:ge._hoverlayer});if(ar)for(var si,ri=0;ri<ar.length;ri++)m((si=ar[ri]).x0)&&m(si.y0)&&ln.push(W(si,He))}else y.log("Unrecognized trace type in hover:",xt);if("closest"===He&&ln.length>Jt&&(ln.splice(0,Jt),je=ln[0].distance),Le&&0!==st&&0===ln.length){Ft.distance=st,Ft.index=!1;var Cr=xt._module.hoverPoints(Ft,ft,lt,"closest",{hoverLayer:ge._hoverlayer});if(Cr&&(Cr=Cr.filter(function(fn){return fn.spikeDistance<=st})),Cr&&Cr.length){var Pr,vr=Cr.filter(function(fn){return fn.xa.showspikes&&"hovered data"!==fn.xa.spikesnap});if(vr.length){var hn=vr[0];m(hn.x0)&&m(hn.y0)&&(Pr=at(hn),(!cn.vLinePoint||cn.vLinePoint.spikeDistance>Pr.spikeDistance)&&(cn.vLinePoint=Pr))}var Jn=Cr.filter(function(fn){return fn.ya.showspikes&&"hovered data"!==fn.ya.spikesnap});if(Jn.length){var jt=Jn[0];m(jt.x0)&&m(jt.y0)&&(Pr=at(jt),(!cn.hLinePoint||cn.hLinePoint.spikeDistance>Pr.spikeDistance)&&(cn.hLinePoint=Pr))}}}}}function Je($n,Mr,br){for(var ar,si=null,ri=1/0,Cr=0;Cr<$n.length;Cr++)ar=$n[Cr].spikeDistance,br&&0===Cr&&(ar=-1/0),ar<=ri&&ar<=Mr&&(si=$n[Cr],ri=ar);return si}function at($n){return $n?{xa:$n.xa,ya:$n.ya,x:void 0!==$n.xSpike?$n.xSpike:($n.x0+$n.x1)/2,y:void 0!==$n.ySpike?$n.ySpike:($n.y0+$n.y1)/2,distance:$n.distance,spikeDistance:$n.spikeDistance,curveNumber:$n.trace.index,color:$n.color,pointNumber:$n.index}:null}qe();var it={fullLayout:ge,container:ge._hoverlayer,event:se},yt=te._spikepoints;te._spikepoints={vLinePoint:cn.vLinePoint,hLinePoint:cn.hLinePoint};var Ut=function(){ln.sort(function($n,Mr){return $n.distance-Mr.distance}),ln=function($n,Mr){for(var br=Mr.charAt(0),ar=[],si=[],ri=[],Cr=0;Cr<$n.length;Cr++){var Pr=$n[Cr];f.traceIs(Pr.trace,"bar-like")||f.traceIs(Pr.trace,"box-violin")?ri.push(Pr):Pr.trace[br+"period"]?si.push(Pr):ar.push(Pr)}return ar.concat(si).concat(ri)}(ln,He)};Ut();var Wt=He.charAt(0),gt=("x"===Wt||"y"===Wt)&&ln[0]&&R[ln[0].trace.type];if(Le&&0!==st&&0!==ln.length){var At=Je(ln.filter(function($n){return $n.ya.showspikes}),st,gt);cn.hLinePoint=at(At);var Zt=Je(ln.filter(function($n){return $n.xa.showspikes}),st,gt);cn.vLinePoint=at(Zt)}if(0===ln.length){var Et=i.unhoverRaw(te,se);return!Le||null===cn.hLinePoint&&null===cn.vLinePoint||Q(yt)&&Y(te,cn,it),Et}if(Le&&Q(yt)&&Y(te,cn,it),l.isXYhover(Rt)&&0!==ln[0].length&&"splom"!==ln[0].trace.type){var Ct=ln[0],Ne=(ln=C[Ct.trace.type]?ln.filter(function($n){return $n.trace.index===Ct.trace.index}):[Ct]).length;qe(X("x",Ct,ge),X("y",Ct,ge));var Mt,zt=[],Xt={},un=0,Qt=function($n){var Mr=C[$n.trace.type]?O($n):$n.trace.index;if(Xt[Mr]){var br=Xt[Mr]-1,ar=zt[br];br>0&&Math.abs($n.distance)<Math.abs(ar.distance)&&(zt[br]=$n)}else un++,Xt[Mr]=un,zt.push($n)};for(Mt=0;Mt<Ne;Mt++)Qt(ln[Mt]);for(Mt=ln.length-1;Mt>Ne-1;Mt--)Qt(ln[Mt]);ln=zt,Ut()}var kn=te._hoverdata,qn=[],gn=$(te),sn=re(te);for(Qe=0;Qe<ln.length;Qe++){var vn=ln[Qe],pn=l.makeEventData(vn,vn.trace,vn.cd);if(!1!==vn.hovertemplate){var Mn=!1;vn.cd[vn.index]&&vn.cd[vn.index].ht&&(Mn=vn.cd[vn.index].ht),vn.hovertemplate=Mn||vn.trace.hovertemplate||!1}if(vn.xa&&vn.ya){var Rn=vn.x0+vn.xa._offset,Xn=vn.x1+vn.xa._offset,Hn=vn.y0+vn.ya._offset,rr=vn.y1+vn.ya._offset,er=Math.min(Rn,Xn),Ir=Math.max(Rn,Xn),Or=Math.min(Hn,rr),ni=Math.max(Hn,rr);pn.bbox={x0:er+sn,x1:Ir+sn,y0:Or+gn,y1:ni+gn}}vn.eventData=[pn],qn.push(pn)}te._hoverdata=qn;var Br="y"===He&&(dn.length>1||ln.length>1)||"closest"===He&&Tn&&ln.length>1,Dr=u.combine(ge.plot_bgcolor||u.background,ge.paper_bgcolor),Rr=L(ln,{gd:te,hovermode:He,rotateLabels:Br,bgColor:Dr,container:ge._hoverlayer,outerContainer:ge._paper.node(),commonLabelOpts:ge.hoverlabel,hoverdistance:ge.hoverdistance});if(l.isUnifiedHover(He)||(function($n,Mr,br){var ar,si,ri,Cr,Pr,vr,hn,Jn=0,jt=1,fn=$n.size(),Sn=new Array(fn),Kn=0;function Wn(sr){var pr=sr[0],yr=sr[sr.length-1];if(ri=yr.pos+yr.dp+yr.size-pr.pmax,(si=pr.pmin-pr.pos-pr.dp+pr.size)>.01){for(Pr=sr.length-1;Pr>=0;Pr--)sr[Pr].dp+=si;ar=!1}if(!(ri<.01)){if(si<-.01){for(Pr=sr.length-1;Pr>=0;Pr--)sr[Pr].dp-=ri;ar=!1}if(ar){var Lr=0;for(Cr=0;Cr<sr.length;Cr++)(vr=sr[Cr]).pos+vr.dp+vr.size>pr.pmax&&Lr++;for(Cr=sr.length-1;Cr>=0&&!(Lr<=0);Cr--)(vr=sr[Cr]).pos>pr.pmax-1&&(vr.del=!0,Lr--);for(Cr=0;Cr<sr.length&&!(Lr<=0);Cr++)if((vr=sr[Cr]).pos<pr.pmin+1)for(vr.del=!0,Lr--,ri=2*vr.size,Pr=sr.length-1;Pr>=0;Pr--)sr[Pr].dp-=ri;for(Cr=sr.length-1;Cr>=0&&!(Lr<=0);Cr--)(vr=sr[Cr]).pos+vr.dp+vr.size>pr.pmax&&(vr.del=!0,Lr--)}}}for($n.each(function(sr){var pr=sr[Mr],yr="x"===pr._id.charAt(0),Lr=pr.range;0===Kn&&Lr&&Lr[0]>Lr[1]!==yr&&(jt=-1),Sn[Kn++]=[{datum:sr,traceIndex:sr.trace.index,dp:0,pos:sr.pos,posref:sr.posref,size:sr.by*(yr?k:1)/2,pmin:0,pmax:yr?br.width:br.height}]}),Sn.sort(function(sr,pr){return sr[0].posref-pr[0].posref||jt*(pr[0].traceIndex-sr[0].traceIndex)});!ar&&Jn<=fn;){for(Jn++,ar=!0,Cr=0;Cr<Sn.length-1;){var Pn=Sn[Cr],Un=Sn[Cr+1],Cn=Pn[Pn.length-1],On=Un[0];if((si=Cn.pos+Cn.dp+Cn.size-On.pos-On.dp+On.size)>.01&&Cn.pmin===On.pmin&&Cn.pmax===On.pmax){for(Pr=Un.length-1;Pr>=0;Pr--)Un[Pr].dp+=si;for(Pn.push.apply(Pn,Un),Sn.splice(Cr+1,1),hn=0,Pr=Pn.length-1;Pr>=0;Pr--)hn+=Pn[Pr].dp;for(ri=hn/Pn.length,Pr=Pn.length-1;Pr>=0;Pr--)Pn[Pr].dp-=ri;ar=!1}else Cr++}Sn.forEach(Wn)}for(Cr=Sn.length-1;Cr>=0;Cr--){var Fn=Sn[Cr];for(Pr=Fn.length-1;Pr>=0;Pr--){var Gn=Fn[Pr],or=Gn.datum;or.offset=Gn.dp,or.del=Gn.del}}}(Rr,Br?"xa":"ya",ge),j(Rr,Br,ge._invScaleX,ge._invScaleY)),he&&he.tagName){var yi=f.getComponentMethod("annotations","hasClickToShow")(te,qn);t(g.select(he),yi?"pointer":"")}!he||de||!function($n,Mr,br){if(!br||br.length!==$n._hoverdata.length)return!0;for(var ar=br.length-1;ar>=0;ar--){var si=br[ar],ri=$n._hoverdata[ar];if(si.curveNumber!==ri.curveNumber||String(si.pointNumber)!==String(ri.pointNumber)||String(si.pointNumbers)!==String(ri.pointNumbers))return!0}return!1}(te,0,kn)||(kn&&te.emit("plotly_unhover",{event:se,points:kn}),te.emit("plotly_hover",{event:se,points:te._hoverdata,xaxes:ve,yaxes:Te,xvals:Ve,yvals:$e}))}(U,G,ie,q,ee)})},ae.loneHover=function(U,G){var ie=!0;Array.isArray(U)||(ie=!1,U=[U]);var q=G.gd,ee=$(q),te=re(q),se=L(U.map(function(he){var xe=he._x0||he.x0||he.x||0,ge=he._x1||he.x1||he.x||0,_e=he._y0||he.y0||he.y||0,Ce=he._y1||he.y1||he.y||0,Le=he.eventData;if(Le){var Ie=Math.min(xe,ge),Be=Math.max(xe,ge),ve=Math.min(_e,Ce),Te=Math.max(_e,Ce),Pe=he.trace;if(f.traceIs(Pe,"gl3d")){var De=q._fullLayout[Pe.scene]._scene.container,Fe=De.offsetLeft,Ue=De.offsetTop;Ie+=Fe,Be+=Fe,ve+=Ue,Te+=Ue}Le.bbox={x0:Ie+te,x1:Be+te,y0:ve+ee,y1:Te+ee},G.inOut_bbox&&G.inOut_bbox.push(Le.bbox)}else Le=!1;return{color:he.color||u.defaultLine,x0:he.x0||he.x||0,x1:he.x1||he.x||0,y0:he.y0||he.y||0,y1:he.y1||he.y||0,xLabel:he.xLabel,yLabel:he.yLabel,zLabel:he.zLabel,text:he.text,name:he.name,idealAlign:he.idealAlign,borderColor:he.borderColor,fontFamily:he.fontFamily,fontSize:he.fontSize,fontColor:he.fontColor,nameLength:he.nameLength,textAlign:he.textAlign,trace:he.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:he.hovertemplate||!1,hovertemplateLabels:he.hovertemplateLabels||!1,eventData:Le}}),{gd:q,hovermode:"closest",rotateLabels:!1,bgColor:G.bgColor||u.background,container:g.select(G.container),outerContainer:G.outerContainer||G.container}),ue=0,de=0;return se.sort(function(he,xe){return he.y0-xe.y0}).each(function(he,xe){var ge=he.y0-he.by/2;he.offset=ge-5<ue?ue-ge+5:0,ue=ge+he.by+he.offset,xe===G.anchorIndex&&(de=he.offset)}).each(function(he){he.offset-=de}),j(se,!1,q._fullLayout._invScaleX,q._fullLayout._invScaleY),ie?se:se.node()};var D=/<extra>([\s\S]*)<\/extra>/;function L(U,G){var ie=G.gd,q=ie._fullLayout,ee=G.hovermode,te=G.rotateLabels,se=G.bgColor,ue=G.container,de=G.outerContainer,he=G.commonLabelOpts||{};if(0===U.length)return[[]];var xe=G.fontFamily||h.HOVERFONT,ge=G.fontSize||h.HOVERFONTSIZE,_e=U[0],Ce=_e.xa,Le=_e.ya,Ie=ee.charAt(0),Be=_e[Ie+"Label"],ve=H(ie,de),Te=ve.top,Pe=ve.width,De=ve.height,Fe=void 0!==Be&&_e.distance<=G.hoverdistance&&("x"===ee||"y"===ee);if(Fe){var Ue,He,Ke=!0;for(Ue=0;Ue<U.length;Ue++)if(Ke&&void 0===U[Ue].zLabel&&(Ke=!1),He=U[Ue].hoverinfo||U[Ue].trace.hoverinfo){var st=Array.isArray(He)?He:He.split("+");if(-1===st.indexOf("all")&&-1===st.indexOf(ee)){Fe=!1;break}}Ke&&(Fe=!1)}var Ve=ue.selectAll("g.axistext").data(Fe?[0]:[]);if(Ve.enter().append("g").classed("axistext",!0),Ve.exit().remove(),Ve.each(function(){var gt=g.select(this),At=y.ensureSingle(gt,"path","",function(Xn){Xn.style({"stroke-width":"1px"})}),Zt=y.ensureSingle(gt,"text","",function(Xn){Xn.attr("data-notex",1)}),Et=he.bgcolor||u.defaultLine,Ct=he.bordercolor||u.contrast(Et),Ne=u.contrast(Et),et={family:he.font.family||xe,size:he.font.size||ge,color:he.font.color||Ne};At.style({fill:Et,stroke:Ct}),Zt.text(Be).call(p.font,et).call(a.positionText,0,0).call(a.convertToTspans,ie),gt.attr("transform","");var dt,Mt,zt=H(ie,Zt.node());if("x"===ee){var Xt="top"===Ce.side?"-":"";Zt.attr("text-anchor","middle").call(a.positionText,0,"top"===Ce.side?Te-zt.bottom-E-I:Te-zt.top+E+I),Mt=Le._offset+("top"===Ce.side?0:Le._length);var un=zt.width/2+I;(dt=Ce._offset+(_e.x0+_e.x1)/2)<un?(dt=un,At.attr("d","M-"+(un-E)+",0L-"+(un-2*E)+","+Xt+E+"H"+(I+zt.width/2)+"v"+Xt+(2*I+zt.height)+"H-"+un+"V"+Xt+E+"Z")):dt>q.width-un?(dt=q.width-un,At.attr("d","M"+(un-E)+",0L"+un+","+Xt+E+"v"+Xt+(2*I+zt.height)+"H-"+un+"V"+Xt+E+"H"+(un-2*E)+"Z")):At.attr("d","M0,0L"+E+","+Xt+E+"H"+(I+zt.width/2)+"v"+Xt+(2*I+zt.height)+"H-"+(I+zt.width/2)+"V"+Xt+E+"H-"+E+"Z")}else{var Qt,kn,qn;"right"===Le.side?(Qt="start",kn=1,qn="",dt=Ce._offset+Ce._length):(Qt="end",kn=-1,qn="-",dt=Ce._offset),Mt=Le._offset+(_e.y0+_e.y1)/2,Zt.attr("text-anchor",Qt),At.attr("d","M0,0L"+qn+E+","+E+"V"+(I+zt.height/2)+"h"+qn+(2*I+zt.width)+"V-"+(I+zt.height/2)+"H"+qn+E+"V-"+E+"Z");var gn,sn=zt.height/2,vn=Te-zt.top-sn,pn="clip"+q._uid+"commonlabel"+Le._id;if(dt<zt.width+2*I+E){gn="M-"+(E+I)+"-"+sn+"h-"+(zt.width-I)+"V"+sn+"h"+(zt.width-I)+"Z";var Mn=zt.width-dt+I;a.positionText(Zt,Mn,vn),"end"===Qt&&Zt.selectAll("tspan").each(function(){var Xn=g.select(this),Hn=p.tester.append("text").text(Xn.text()).call(p.font,et),rr=H(ie,Hn.node());Math.round(rr.width)<Math.round(zt.width)&&Xn.attr("x",Mn-rr.width),Hn.remove()})}else a.positionText(Zt,kn*(I+E),vn),gn=null;var Rn=q._topclips.selectAll("#"+pn).data(gn?[0]:[]);Rn.enter().append("clipPath").attr("id",pn).append("path"),Rn.exit().remove(),Rn.select("path").attr("d",gn),p.setClipUrl(Zt,gn?pn:null,ie)}gt.attr("transform",e(dt,Mt))}),l.isUnifiedHover(ee)){ue.selectAll("g.hovertext").remove();var $e=U.filter(function(gt){return"none"!==gt.hoverinfo});if(0===$e.length)return;var Qe=q.hoverlabel,tt=Qe.font,xt={font:tt};d({showlegend:!0,legend:{title:{text:Be,font:tt},font:tt,bgcolor:Qe.bgcolor,bordercolor:Qe.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:q.legend?q.legend.traceorder:void 0,orientation:"v"}},xt,ie._fullData);var kt=xt.legend;kt.entries=[];for(var Bt=0;Bt<$e.length;Bt++){var Rt=$e[Bt];if("none"!==Rt.hoverinfo){var ft=B(Rt,!0,ee,q,Be),lt=ft[0],Ft=ft[1];Rt.name=Ft,Rt.text=""!==Ft?Ft+" : "+lt:lt;var Jt=Rt.cd[Rt.index];Jt&&(Jt.mc&&(Rt.mc=Jt.mc),Jt.mcc&&(Rt.mc=Jt.mcc),Jt.mlc&&(Rt.mlc=Jt.mlc),Jt.mlcc&&(Rt.mlc=Jt.mlcc),Jt.mlw&&(Rt.mlw=Jt.mlw),Jt.mrc&&(Rt.mrc=Jt.mrc),Jt.dir&&(Rt.dir=Jt.dir)),Rt._distinct=!0,kt.entries.push([Rt])}}kt.entries.sort(function(gt,At){return gt[0].trace.index-At[0].trace.index}),kt.layer=ue,kt._inHover=!0,kt._groupTitleFont=Qe.grouptitlefont,o(ie,kt);var ln,dn,cn,Tn,nn=ue.select("g.legend"),Me=H(ie,nn.node()),Ee=Me.width+2*I,Se=Me.height+2*I,je=$e[0],qe=(je.x0+je.x1)/2,Je=(je.y0+je.y1)/2,at=!(f.traceIs(je.trace,"bar-like")||f.traceIs(je.trace,"box-violin"));"y"===Ie?at?(dn=Je-I,ln=Je+I):(dn=Math.min.apply(null,$e.map(function(gt){return Math.min(gt.y0,gt.y1)})),ln=Math.max.apply(null,$e.map(function(gt){return Math.max(gt.y0,gt.y1)}))):dn=ln=y.mean($e.map(function(gt){return(gt.y0+gt.y1)/2}))-Se/2,"x"===Ie?at?(cn=qe+I,Tn=qe-I):(cn=Math.max.apply(null,$e.map(function(gt){return Math.max(gt.x0,gt.x1)})),Tn=Math.min.apply(null,$e.map(function(gt){return Math.min(gt.x0,gt.x1)}))):cn=Tn=y.mean($e.map(function(gt){return(gt.x0+gt.x1)/2}))-Ee/2;var it,yt,vt=Ce._offset,Ut=Le._offset;return Tn+=vt-Ee,dn+=Ut-Se,it=(cn+=vt)+Ee<Pe&&cn>=0?cn:Tn+Ee<Pe&&Tn>=0?Tn:vt+Ee<Pe?vt:cn-qe<qe-Tn+Ee?Pe-Ee:0,yt=(ln+=Ut)+Se<De&&ln>=0?ln:dn+Se<De&&dn>=0?dn:Ut+Se<De?Ut:ln-Je<Je-dn+Se?De-Se:0,nn.attr("transform",e((it+=I)-1,(yt+=I)-1)),nn}var Wt=ue.selectAll("g.hovertext").data(U,function(gt){return O(gt)});return Wt.enter().append("g").classed("hovertext",!0).each(function(){var gt=g.select(this);gt.append("rect").call(u.fill,u.addOpacity(se,.8)),gt.append("text").classed("name",!0),gt.append("path").style("stroke-width","1px"),gt.append("text").classed("nums",!0).call(p.font,xe,ge)}),Wt.exit().remove(),Wt.each(function(gt){var At=g.select(this).attr("transform",""),Zt=gt.color;Array.isArray(Zt)&&(Zt=Zt[gt.eventData[0].pointNumber]);var Et=gt.bgcolor||Zt,Ct=u.combine(u.opacity(Et)?Et:u.defaultLine,se),Ne=u.combine(u.opacity(Zt)?Zt:u.defaultLine,se),et=gt.borderColor||u.contrast(Ct),dt=B(gt,Fe,ee,q,Be,At),Mt=dt[0],zt=dt[1],Xt=At.select("text.nums").call(p.font,gt.fontFamily||xe,gt.fontSize||ge,gt.fontColor||et).text(Mt).attr("data-notex",1).call(a.positionText,0,0).call(a.convertToTspans,ie),un=At.select("text.name"),Qt=0,kn=0;if(zt&&zt!==Mt){un.call(p.font,gt.fontFamily||xe,gt.fontSize||ge,Ne).text(zt).attr("data-notex",1).call(a.positionText,0,0).call(a.convertToTspans,ie);var qn=H(ie,un.node());Qt=qn.width+2*I,kn=qn.height+2*I}else un.remove(),At.select("rect").remove();At.select("path").style({fill:Ct,stroke:et});var gn=gt.xa._offset+(gt.x0+gt.x1)/2,sn=gt.ya._offset+(gt.y0+gt.y1)/2,vn=Math.abs(gt.x1-gt.x0),pn=Math.abs(gt.y1-gt.y0),Mn=H(ie,Xt.node()),Rn=Mn.width/q._invScaleX,Xn=Mn.height/q._invScaleY;gt.ty0=(Te-Mn.top)/q._invScaleY,gt.bx=Rn+2*I,gt.by=Math.max(Xn+2*I,kn),gt.anchor="start",gt.txwidth=Rn,gt.tx2width=Qt,gt.offset=0;var Hn,rr,er=(Rn+E+I+Qt)*q._invScaleX;if(te)gt.pos=gn,Hn=sn+pn/2+er<=De,rr=sn-pn/2-er>=0,"top"!==gt.idealAlign&&Hn||!rr?Hn?(sn+=pn/2,gt.anchor="start"):gt.anchor="middle":(sn-=pn/2,gt.anchor="end");else if(gt.pos=sn,Hn=gn+vn/2+er<=Pe,rr=gn-vn/2-er>=0,"left"!==gt.idealAlign&&Hn||!rr)if(Hn)gn+=vn/2,gt.anchor="start";else{gt.anchor="middle";var Ir=er/2,Or=gn+Ir-Pe,ni=gn-Ir;Or>0&&(gn-=Or),ni<0&&(gn+=-ni)}else gn-=vn/2,gt.anchor="end";Xt.attr("text-anchor",gt.anchor),Qt&&un.attr("text-anchor",gt.anchor),At.attr("transform",e(gn,sn)+(te?r(_):""))}),Wt}function B(U,G,ie,q,ee,te){var se="",ue="";void 0!==U.nameOverride&&(U.name=U.nameOverride),U.name&&(U.trace._meta&&(U.name=y.templateString(U.name,U.trace._meta)),se=ne(U.name,U.nameLength));var de=ie.charAt(0);void 0!==U.zLabel?(void 0!==U.xLabel&&(ue+="x: "+U.xLabel+"<br>"),void 0!==U.yLabel&&(ue+="y: "+U.yLabel+"<br>"),"choropleth"!==U.trace.type&&"choroplethmapbox"!==U.trace.type&&(ue+=(ue?"z: ":"")+U.zLabel)):G&&U[de+"Label"]===ee?ue=U[("x"===de?"y":"x")+"Label"]||"":void 0===U.xLabel?void 0!==U.yLabel&&"scattercarpet"!==U.trace.type&&(ue=U.yLabel):ue=void 0===U.yLabel?U.xLabel:"("+U.xLabel+", "+U.yLabel+")",!U.text&&0!==U.text||Array.isArray(U.text)||(ue+=(ue?"<br>":"")+U.text),void 0!==U.extraText&&(ue+=(ue?"<br>":"")+U.extraText),te&&""===ue&&!U.hovertemplate&&(""===se&&te.remove(),ue=se);var xe=U.hovertemplate||!1;if(xe){var ge=U.hovertemplateLabels||U;U[de+"Label"]!==ee&&(ge[de+"other"]=ge[de+"Val"],ge[de+"otherLabel"]=ge[de+"Label"]),ue=(ue=y.hovertemplateString(xe,ge,q._d3locale,U.eventData[0]||{},U.trace._meta)).replace(D,function(_e,Ce){return se=ne(Ce,U.nameLength),""})}return[ue,se]}function j(U,G,ie,q){var ee=function(se){return se*ie},te=function(se){return se*q};U.each(function(se){var ue=g.select(this);if(se.del)return ue.remove();var de=ue.select("text.nums"),he=se.anchor,xe="end"===he?-1:1,ge={start:1,end:-1,middle:0}[he],_e=ge*(E+I),Ce=_e+ge*(se.txwidth+I),Le=0,Ie=se.offset,Be="middle"===he;Be&&(_e-=se.tx2width/2,Ce+=se.txwidth/2+I),G&&(Ie*=-A,Le=se.offset*M),ue.select("path").attr("d",Be?"M-"+ee(se.bx/2+se.tx2width/2)+","+te(Ie-se.by/2)+"h"+ee(se.bx)+"v"+te(se.by)+"h-"+ee(se.bx)+"Z":"M0,0L"+ee(xe*E+Le)+","+te(E+Ie)+"v"+te(se.by/2-E)+"h"+ee(xe*se.bx)+"v-"+te(se.by)+"H"+ee(xe*E+Le)+"V"+te(Ie-E)+"Z");var ve=Le+_e,Te=Ie+se.ty0-se.by/2+I,Pe=se.textAlign||"auto";"auto"!==Pe&&("left"===Pe&&"start"!==he?(de.attr("text-anchor","start"),ve=Be?-se.bx/2-se.tx2width/2+I:-se.bx-I):"right"===Pe&&"end"!==he&&(de.attr("text-anchor","end"),ve=Be?se.bx/2-se.tx2width/2-I:se.bx+I)),de.call(a.positionText,ee(ve),te(Te)),se.tx2width&&(ue.select("text.name").call(a.positionText,ee(Ce+ge*I+Le),te(Ie+se.ty0-se.by/2+I)),ue.select("rect").call(p.setRect,ee(Ce+(ge-1)*se.tx2width/2+Le),te(Ie-se.by/2-1),ee(se.tx2width),te(se.by+2)))})}function W(U,G){var ie=U.index,q=U.trace||{},ee=U.cd[0],te=U.cd[ie]||{};function se(_e){return _e||m(_e)&&0===_e}var ue=Array.isArray(ie)?function(_e,Ce){var Le=y.castOption(ee,ie,_e);return se(Le)?Le:y.extractOption({},q,"",Ce)}:function(_e,Ce){return y.extractOption(te,q,_e,Ce)};function de(_e,Ce,Le){var Ie=ue(Ce,Le);se(Ie)&&(U[_e]=Ie)}if(de("hoverinfo","hi","hoverinfo"),de("bgcolor","hbg","hoverlabel.bgcolor"),de("borderColor","hbc","hoverlabel.bordercolor"),de("fontFamily","htf","hoverlabel.font.family"),de("fontSize","hts","hoverlabel.font.size"),de("fontColor","htc","hoverlabel.font.color"),de("nameLength","hnl","hoverlabel.namelength"),de("textAlign","hta","hoverlabel.align"),U.posref="y"===G||"closest"===G&&"h"===q.orientation?U.xa._offset+(U.x0+U.x1)/2:U.ya._offset+(U.y0+U.y1)/2,U.x0=y.constrain(U.x0,0,U.xa._length),U.x1=y.constrain(U.x1,0,U.xa._length),U.y0=y.constrain(U.y0,0,U.ya._length),U.y1=y.constrain(U.y1,0,U.ya._length),void 0!==U.xLabelVal&&(U.xLabel="xLabel"in U?U.xLabel:c.hoverLabelText(U.xa,U.xLabelVal,q.xhoverformat),U.xVal=U.xa.c2d(U.xLabelVal)),void 0!==U.yLabelVal&&(U.yLabel="yLabel"in U?U.yLabel:c.hoverLabelText(U.ya,U.yLabelVal,q.yhoverformat),U.yVal=U.ya.c2d(U.yLabelVal)),void 0!==U.zLabelVal&&void 0===U.zLabel&&(U.zLabel=String(U.zLabelVal)),!(isNaN(U.xerr)||"log"===U.xa.type&&U.xerr<=0)){var he=c.tickText(U.xa,U.xa.c2l(U.xerr),"hover").text;U.xLabel+=void 0!==U.xerrneg?" +"+he+" / -"+c.tickText(U.xa,U.xa.c2l(U.xerrneg),"hover").text:" \xb1 "+he,"x"===G&&(U.distance+=1)}if(!(isNaN(U.yerr)||"log"===U.ya.type&&U.yerr<=0)){var xe=c.tickText(U.ya,U.ya.c2l(U.yerr),"hover").text;U.yLabel+=void 0!==U.yerrneg?" +"+xe+" / -"+c.tickText(U.ya,U.ya.c2l(U.yerrneg),"hover").text:" \xb1 "+xe,"y"===G&&(U.distance+=1)}var ge=U.hoverinfo||U.trace.hoverinfo;return ge&&"all"!==ge&&(-1===(ge=Array.isArray(ge)?ge:ge.split("+")).indexOf("x")&&(U.xLabel=void 0),-1===ge.indexOf("y")&&(U.yLabel=void 0),-1===ge.indexOf("z")&&(U.zLabel=void 0),-1===ge.indexOf("text")&&(U.text=void 0),-1===ge.indexOf("name")&&(U.name=void 0)),U}function Y(U,G,ie){var q,ee,te=ie.container,se=ie.fullLayout,ue=se._size,de=ie.event,he=!!G.hLinePoint,xe=!!G.vLinePoint;if(te.selectAll(".spikeline").remove(),xe||he){var ge=u.combine(se.plot_bgcolor,se.paper_bgcolor);if(he){var _e,Ce,Le=G.hLinePoint;q=Le&&Le.xa,"cursor"===(ee=Le&&Le.ya).spikesnap?(_e=de.pointerX,Ce=de.pointerY):(_e=q._offset+Le.x,Ce=ee._offset+Le.y);var Ie,Be,ve=w.readability(Le.color,ge)<1.5?u.contrast(ge):Le.color,Te=ee.spikemode,Pe=ee.spikethickness,De=ee.spikecolor||ve,Fe=c.getPxPosition(U,ee);if(-1!==Te.indexOf("toaxis")||-1!==Te.indexOf("across")){if(-1!==Te.indexOf("toaxis")&&(Ie=Fe,Be=_e),-1!==Te.indexOf("across")){var Ue=ee._counterDomainMin,He=ee._counterDomainMax;"free"===ee.anchor&&(Ue=Math.min(Ue,ee.position),He=Math.max(He,ee.position)),Ie=ue.l+Ue*ue.w,Be=ue.l+He*ue.w}te.insert("line",":first-child").attr({x1:Ie,x2:Be,y1:Ce,y2:Ce,"stroke-width":Pe,stroke:De,"stroke-dasharray":p.dashStyle(ee.spikedash,Pe)}).classed("spikeline",!0).classed("crisp",!0),te.insert("line",":first-child").attr({x1:Ie,x2:Be,y1:Ce,y2:Ce,"stroke-width":Pe+2,stroke:ge}).classed("spikeline",!0).classed("crisp",!0)}-1!==Te.indexOf("marker")&&te.insert("circle",":first-child").attr({cx:Fe+("right"!==ee.side?Pe:-Pe),cy:Ce,r:Pe,fill:De}).classed("spikeline",!0)}if(xe){var Ke,st,Ve=G.vLinePoint;ee=Ve&&Ve.ya,"cursor"===(q=Ve&&Ve.xa).spikesnap?(Ke=de.pointerX,st=de.pointerY):(Ke=q._offset+Ve.x,st=ee._offset+Ve.y);var $e,Qe,tt=w.readability(Ve.color,ge)<1.5?u.contrast(ge):Ve.color,ut=q.spikemode,xt=q.spikethickness,kt=q.spikecolor||tt,Bt=c.getPxPosition(U,q);if(-1!==ut.indexOf("toaxis")||-1!==ut.indexOf("across")){if(-1!==ut.indexOf("toaxis")&&($e=Bt,Qe=st),-1!==ut.indexOf("across")){var Rt=q._counterDomainMin,ft=q._counterDomainMax;"free"===q.anchor&&(Rt=Math.min(Rt,q.position),ft=Math.max(ft,q.position)),$e=ue.t+(1-ft)*ue.h,Qe=ue.t+(1-Rt)*ue.h}te.insert("line",":first-child").attr({x1:Ke,x2:Ke,y1:$e,y2:Qe,"stroke-width":xt,stroke:kt,"stroke-dasharray":p.dashStyle(q.spikedash,xt)}).classed("spikeline",!0).classed("crisp",!0),te.insert("line",":first-child").attr({x1:Ke,x2:Ke,y1:$e,y2:Qe,"stroke-width":xt+2,stroke:ge}).classed("spikeline",!0).classed("crisp",!0)}-1!==ut.indexOf("marker")&&te.insert("circle",":first-child").attr({cx:Ke,cy:Bt-("top"!==q.side?xt:-xt),r:xt,fill:kt}).classed("spikeline",!0)}}}function Q(U,G){return!G||G.vLinePoint!==U._spikepoints.vLinePoint||G.hLinePoint!==U._spikepoints.hLinePoint}function ne(U,G){return a.plainText(U||"",{len:G,allowedTags:["br","sub","sup","b","i","em"]})}function X(U,G,ie){var q=G[U+"a"],ee=G[U+"Val"],te=G.cd[0];if("category"===q.type)ee=q._categoriesMap[ee];else if("date"===q.type){var se=G.trace[U+"periodalignment"];if(se){var ue=G.cd[G.index],de=ue[U+"Start"];void 0===de&&(de=ue[U]);var he=ue[U+"End"];void 0===he&&(he=ue[U]);var xe=he-de;"end"===se?ee+=xe:"middle"===se&&(ee+=xe/2)}ee=q.d2c(ee)}return te&&te.t&&te.t.posLetter===q._id&&("group"!==ie.boxmode&&"group"!==ie.violinmode||(ee+=te.t.dPos)),ee}function $(U){return U.offsetTop+U.clientTop}function re(U){return U.offsetLeft+U.clientLeft}function H(U,G){var ie=U._fullLayout,q=G.getBoundingClientRect(),ee=q.x,te=q.y,se=ee+q.width,ue=te+q.height,de=y.apply3DTransform(ie._invTransform)(ee,te),he=y.apply3DTransform(ie._invTransform)(se,ue),xe=de[0],ge=de[1],_e=he[0],Ce=he[1];return{x:xe,y:ge,width:_e-xe,height:Ce-ge,top:Math.min(ge,Ce),left:Math.min(xe,_e),right:Math.max(xe,_e),bottom:Math.max(ge,Ce)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../color"),w=x("./helpers").isUnifiedHover;oe.exports=function(y,e,r,n){n=n||{};var a=e.legend;function t(p){n.font[p]||(n.font[p]=a?e.legend.font[p]:e.font[p])}e&&w(e.hovermode)&&(n.font||(n.font={}),t("size"),t("family"),t("color"),a?(n.bgcolor||(n.bgcolor=m.combine(e.legend.bgcolor,e.paper_bgcolor)),n.bordercolor||(n.bordercolor=e.legend.bordercolor)):n.bgcolor||(n.bgcolor=e.paper_bgcolor)),r("hoverlabel.bgcolor",n.bgcolor),r("hoverlabel.bordercolor",n.bordercolor),r("hoverlabel.namelength",n.namelength),g.coerceFont(r,"hoverlabel.font",n.font),r("hoverlabel.align",n.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./layout_attributes");oe.exports=function(w,y){function e(r,n){return void 0!==y[r]?y[r]:g.coerce(w,y,m,r,n)}return e("clickmode"),e("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=x("../dragelement"),y=x("./helpers"),e=x("./layout_attributes"),r=x("./hover");oe.exports={moduleType:"component",name:"fx",constants:x("./constants"),schema:{layout:e},attributes:x("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:x("./layout_global_defaults"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc"),getDistanceFunction:y.getDistanceFunction,getClosest:y.getClosest,inbox:y.inbox,quadrature:y.quadrature,appendArrayPointValue:y.appendArrayPointValue,castHoverOption:function(n,a,t){return m.castOption(n,a,"hoverlabel."+t)},castHoverinfo:function(n,a,t){return m.castOption(n,t,"hoverinfo",function(p){return m.coerceHoverinfo({hoverinfo:p},{_module:n._module},a)})},hover:r.hover,unhover:w.unhover,loneHover:r.loneHover,loneUnhover:function(n){var a=m.isD3Selection(n)?n:g.select(n);a.selectAll("g.hovertext").remove(),a.selectAll(".spikeline").remove()},click:x("./click")}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(x,oe,ae){"use strict";var g=x("./constants"),m=x("../../plots/font_attributes"),w=m({editType:"none"});w.family.dflt=g.HOVERFONT,w.size.dflt=g.HOVERFONTSIZE,oe.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:w,grouptitlefont:m({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./layout_attributes"),w=x("./hovermode_defaults"),y=x("./hoverlabel_defaults");oe.exports=function(e,r){function n(u,i){return g.coerce(e,r,m,u,i)}w(e,r)&&(n("hoverdistance"),n("spikedistance")),"select"===n("dragmode")&&n("selectdirection");var a=r._has("mapbox"),t=r._has("geo"),p=r._basePlotModules.length;"zoom"===r.dragmode&&((a||t)&&1===p||a&&t&&2===p)&&(r.dragmode="pan"),y(e,r,n),g.coerceFont(n,"hoverlabel.grouptitlefont",r.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./hoverlabel_defaults"),w=x("./layout_attributes");oe.exports=function(y,e){m(y,e,function(r,n){return g.coerce(y,e,w,r,n)})}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../lib/regex").counter,w=x("../../plots/domain").attributes,y=x("../../plots/cartesian/constants").idRegex,e=x("../../plot_api/plot_template"),r={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[m("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[y.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[y.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:w({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function n(p,u,i){var c=u[i+"axes"],f=Object.keys((p._splomAxes||{})[i]||{});return Array.isArray(c)?c:f.length?f:void 0}function a(p,u,i,c,f,l){var h=u(p+"gap",i),d=u("domain."+p);u(p+"side",c);for(var o=new Array(f),_=d[0],s=(d[1]-_)/(f-h),k=s*(1-h),M=0;M<f;M++){var A=_+s*M;o[l?f-1-M:M]=[A,A+k]}return o}function t(p,u,i,c,f){var l,h=new Array(i);function d(o,_){-1!==u.indexOf(_)&&void 0===c[_]?(h[o]=_,c[_]=o):h[o]=""}if(Array.isArray(p))for(l=0;l<i;l++)d(l,p[l]);else for(d(0,f),l=1;l<i;l++)d(l,f+(l+1));return h}oe.exports={moduleType:"component",name:"grid",schema:{layout:{grid:r}},layoutAttributes:r,sizeDefaults:function(p,u){var i=p.grid||{},c=n(u,i,"x"),f=n(u,i,"y");if(p.grid||c||f){var l,h,d=Array.isArray(i.subplots)&&Array.isArray(i.subplots[0]),o=Array.isArray(c),_=Array.isArray(f),s=o&&c!==i.xaxes&&_&&f!==i.yaxes;d?(l=i.subplots.length,h=i.subplots[0].length):(_&&(l=f.length),o&&(h=c.length));var k=e.newContainer(u,"grid"),M=D("rows",l),A=D("columns",h);if(M*A>1){!d&&!o&&!_&&"independent"===D("pattern")&&(d=!0),k._hasSubplotGrid=d;var E,I,C="top to bottom"===D("roworder"),O=d?.3:.1;s&&u._splomGridDflt&&(E=u._splomGridDflt.xside,I=u._splomGridDflt.yside),k._domains={x:a("x",D,d?.2:.1,E,A),y:a("y",D,O,I,M,C)}}else delete u.grid}function D(L,B){return g.coerce(i,k,r,L,B)}},contentDefaults:function(p,u){var i=u.grid;if(i&&i._domains){var c,f,l,h,d,o,_,s=p.grid||{},k=u._subplots,M=i._hasSubplotGrid,A=i.rows,E=i.columns,I="independent"===i.pattern,C=i._axisMap={};if(M){var R=s.subplots||[];o=i.subplots=new Array(A);var O=1;for(c=0;c<A;c++){var D=o[c]=new Array(E),L=R[c]||[];for(f=0;f<E;f++)if(I?(d=1===O?"xy":"x"+O+"y"+O,O++):d=L[f],D[f]="",-1!==k.cartesian.indexOf(d)){if(_=d.indexOf("y"),l=d.slice(0,_),h=d.slice(_),void 0!==C[l]&&C[l]!==f||void 0!==C[h]&&C[h]!==c)continue;D[f]=d,C[l]=f,C[h]=c}}}else{var B=n(u,s,"x"),j=n(u,s,"y");i.xaxes=t(B,k.xaxis,E,C,"x"),i.yaxes=t(j,k.yaxis,A,C,"y")}var W=i._anchors={},Y="top to bottom"===i.roworder;for(var Q in C){var ne,X,$,re=Q.charAt(0),H=i[re+"side"];if(H.length<8)W[Q]="free";else if("x"===re){if("t"===H.charAt(0)===Y?(ne=0,X=1,$=A):(ne=A-1,X=-1,$=-1),M){var U=C[Q];for(c=ne;c!==$;c+=X)if((d=o[c][U])&&(_=d.indexOf("y"),d.slice(0,_)===Q)){W[Q]=d.slice(_);break}}else for(c=ne;c!==$;c+=X)if(-1!==k.cartesian.indexOf(Q+(h=i.yaxes[c]))){W[Q]=h;break}}else if("l"===H.charAt(0)?(ne=0,X=1,$=E):(ne=E-1,X=-1,$=-1),M){var G=C[Q];for(c=ne;c!==$;c+=X)if((d=o[G][c])&&(_=d.indexOf("y"),d.slice(_)===Q)){W[Q]=d.slice(0,_);break}}else for(c=ne;c!==$;c+=X)if(-1!==k.cartesian.indexOf((l=i.xaxes[c])+Q)){W[Q]=l;break}}}}}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/constants"),m=x("../../plot_api/plot_template").templatedArray;x("../../constants/axis_placeable_objects"),oe.exports=m("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",g.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",g.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib/to_log_range");oe.exports=function(w,y,e,r){y=y||{};var n="log"===e&&"linear"===y.type;if(n||"linear"===e&&"log"===y.type)for(var t,p,u=w._fullLayout.images,i=y._id.charAt(0),c=0;c<u.length;c++)if(p="images["+c+"].",(t=u[c])[i+"ref"]===y._id){var f=t[i],l=t["size"+i],h=null,d=null;if(n){h=m(f,y.range);var o=l/Math.pow(10,h)/2;d=2*Math.log(o+Math.sqrt(1+o*o))/Math.LN10}else d=(h=Math.pow(10,f))*(Math.pow(10,l/2)-Math.pow(10,-l/2));g(h)?g(d)||(d=null):(h=null,d=null),r(p+i,h),r(p+"size"+i,d)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/cartesian/axes"),w=x("../../plots/array_container_defaults"),y=x("./attributes");function e(r,n,a){function t(h,d){return g.coerce(r,n,y,h,d)}var p=t("source");if(!t("visible",!!p))return n;t("layer"),t("xanchor"),t("yanchor"),t("sizex"),t("sizey"),t("sizing"),t("opacity");for(var u={_fullLayout:a},i=["x","y"],c=0;c<2;c++){var f=i[c],l=m.coerceRef(r,n,u,f,"paper",void 0);"paper"!==l&&m.getFromId(u,l)._imgIndices.push(n._index),m.coercePosition(n,u,t,l,f,0)}return n}oe.exports=function(r,n){w(r,n,{name:"images",handleItemDefaults:e})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../drawing"),w=x("../../plots/cartesian/axes"),y=x("../../plots/cartesian/axis_ids"),e=x("../../constants/xmlns_namespaces");oe.exports=function(r){var n,a,t=r._fullLayout,p=[],u={},i=[];for(a=0;a<t.images.length;a++){var c=t.images[a];if(c.visible)if("below"===c.layer&&"paper"!==c.xref&&"paper"!==c.yref){n=y.ref2id(c.xref)+y.ref2id(c.yref);var f=t._plots[n];if(!f){i.push(c);continue}f.mainplot&&(n=f.mainplot.id),u[n]||(u[n]=[]),u[n].push(c)}else"above"===c.layer?p.push(c):i.push(c)}var l={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},h={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function d(E){var I=g.select(this);if(this._imgSrc!==E.source)if(I.attr("xmlns",e.svg),E.source&&"data:"===E.source.slice(0,5))I.attr("xlink:href",E.source),this._imgSrc=E.source;else{var C=new Promise(function(R){var O=new Image;function D(){I.remove(),R()}this.img=O,O.setAttribute("crossOrigin","anonymous"),O.onerror=D,O.onload=function(){var L=document.createElement("canvas");L.width=this.width,L.height=this.height,L.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var B=L.toDataURL("image/png");I.attr("xlink:href",B),R()},I.on("error",D),O.src=E.source,this._imgSrc=E.source}.bind(this));r._promises.push(C)}}function o(E){var I,C,R=g.select(this),O=w.getFromId(r,E.xref),D=w.getFromId(r,E.yref),L="domain"===w.getRefType(E.xref),B="domain"===w.getRefType(E.yref),j=t._size;I=void 0!==O?"string"==typeof E.xref&&L?O._length*E.sizex:Math.abs(O.l2p(E.sizex)-O.l2p(0)):E.sizex*j.w,C=void 0!==D?"string"==typeof E.yref&&B?D._length*E.sizey:Math.abs(D.l2p(E.sizey)-D.l2p(0)):E.sizey*j.h;var W,Y,Q=I*l[E.xanchor].offset,ne=C*h[E.yanchor].offset,X=l[E.xanchor].sizing+h[E.yanchor].sizing;switch(W=void 0!==O?"string"==typeof E.xref&&L?O._length*E.x+O._offset:O.r2p(E.x)+O._offset:E.x*j.w+j.l,W+=Q,Y=void 0!==D?"string"==typeof E.yref&&B?D._length*(1-E.y)+D._offset:D.r2p(E.y)+D._offset:j.h-E.y*j.h+j.t,Y+=ne,E.sizing){case"fill":X+=" slice";break;case"stretch":X="none"}R.attr({x:W,y:Y,width:I,height:C,preserveAspectRatio:X,opacity:E.opacity});var $=(O&&"domain"!==w.getRefType(E.xref)?O._id:"")+(D&&"domain"!==w.getRefType(E.yref)?D._id:"");m.setClipUrl(R,$?"clip"+t._uid+$:null,r)}var _=t._imageLowerLayer.selectAll("image").data(i),s=t._imageUpperLayer.selectAll("image").data(p);_.enter().append("image"),s.enter().append("image"),_.exit().remove(),s.exit().remove(),_.each(function(E){d.bind(this)(E),o.bind(this)(E)}),s.each(function(E){d.bind(this)(E),o.bind(this)(E)});var k=Object.keys(t._plots);for(a=0;a<k.length;a++){var M=t._plots[n=k[a]];if(M.imagelayer){var A=M.imagelayer.selectAll("image").data(u[n]||[]);A.enter().append("image"),A.exit().remove(),A.each(function(E){d.bind(this)(E),o.bind(this)(E)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(x,oe,ae){"use strict";oe.exports={moduleType:"component",name:"images",layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),includeBasePlot:x("../../plots/cartesian/include_components")("images"),draw:x("./draw"),convertCoords:x("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(x,oe,ae){"use strict";var g=x("../../plots/font_attributes"),m=x("../color/attributes");oe.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:g({editType:"legend"}),grouptitlefont:g({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:g({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(x,oe,ae){"use strict";oe.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../lib"),w=x("../../plot_api/plot_template"),y=x("../../plots/attributes"),e=x("./attributes"),r=x("../../plots/layout_attributes"),n=x("./helpers");oe.exports=function(a,t,p){var u,i=a.legend||{},c=w.newContainer(t,"legend");function f(D,L){return m.coerce(i,c,e,D,L)}for(var l=function(D,L){return m.coerce(u._input,u,y,D,L)},h=t.font||{},d=m.coerceFont(f,"grouptitlefont",m.extendFlat({},h,{size:Math.round(1.1*h.size)})),o=0,_=!1,s="normal",k=0;k<p.length;k++)(u=p[k]).visible&&((u.showlegend||u._dfltShowLegend&&!(u._module&&u._module.attributes&&u._module.attributes.showlegend&&!1===u._module.attributes.showlegend.dflt))&&(o++,u.showlegend&&(_=!0,(g.traceIs(u,"pie-like")||!0===u._input.showlegend)&&o++),m.coerceFont(l,"legendgrouptitle.font",d)),(g.traceIs(u,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(u.fill))&&(s=n.isGrouped({traceorder:s})?"grouped+reversed":"reversed"),void 0!==u.legendgroup&&""!==u.legendgroup&&(s=n.isReversed({traceorder:s})?"reversed+grouped":"grouped"));var M=m.coerce(a,t,r,"showlegend",_&&o>1);if(!1===M&&(t.legend=void 0),(!1!==M||i.uirevision)&&(f("uirevision",t.uirevision),!1!==M)){f("bgcolor",t.paper_bgcolor),f("bordercolor"),f("borderwidth");var A,E,I,C=m.coerceFont(f,"font",t.font),R="h"===f("orientation");if(R?(A=0,g.getComponentMethod("rangeslider","isVisible")(a.xaxis)?(E=1.1,I="bottom"):(E=-.1,I="top")):(A=1.02,E=1,I="auto"),f("traceorder",s),n.isGrouped(t.legend)&&f("tracegroupgap"),f("itemsizing"),f("itemwidth"),f("itemclick"),f("itemdoubleclick"),f("groupclick"),f("x",A),f("xanchor"),f("y",E),f("yanchor",I),f("valign"),m.noneOrAll(i,c,["x","y"]),f("title.text")){f("title.side",R?"left":"top");var O=m.extendFlat({},C,{size:m.bigFont(C.size)});m.coerceFont(f,"title.font",O)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=x("../../plots/plots"),y=x("../../registry"),e=x("../../lib/events"),r=x("../dragelement"),n=x("../drawing"),a=x("../color"),t=x("../../lib/svg_text_utils"),p=x("./handle_click"),u=x("./constants"),i=x("../../constants/alignment"),c=i.LINE_SPACING,f=i.FROM_TL,l=i.FROM_BR,h=x("./get_legend_data"),d=x("./style"),o=x("./helpers");function _(C,R,O,D,L){var B=O.data()[0][0].trace,j={event:L,node:O.node(),curveNumber:B.index,expandedIndex:B._expandedIndex,data:C.data,layout:C.layout,frames:C._transitionData._frames,config:C._context,fullData:C._fullData,fullLayout:C._fullLayout};B._group&&(j.group=B._group),y.traceIs(B,"pie-like")&&(j.label=O.datum()[0].label),!1!==e.triggerHandler(C,"plotly_legendclick",j)&&(1===D?R._clickTimeout=setTimeout(function(){C._fullLayout&&p(O,C,D)},C._context.doubleClickDelay):2===D&&(R._clickTimeout&&clearTimeout(R._clickTimeout),C._legendMouseDownTime=0,!1!==e.triggerHandler(C,"plotly_legenddoubleclick",j)&&p(O,C,D)))}function s(C,R,O){var D,L,B=C.data()[0][0],j=B.trace,W=y.traceIs(j,"pie-like"),Y=!O._inHover&&R._context.edits.legendText&&!W,Q=O._maxNameLength;B.groupTitle?(D=B.groupTitle.text,L=B.groupTitle.font):(L=O.font,O.entries?D=B.text:(D=W?B.label:j.name,j._meta&&(D=m.templateString(D,j._meta))));var ne=m.ensureSingle(C,"text","legendtext");ne.attr("text-anchor","start").call(n.font,L).text(Y?k(D,Q):D),t.positionText(ne,O.itemwidth+2*u.itemGap,0),Y?ne.call(t.makeEditable,{gd:R,text:D}).call(A,C,R,O).on("edit",function($){this.text(k($,Q)).call(A,C,R,O);var re=B.trace._fullInput||{},H={};if(y.hasTransform(re,"groupby")){var U=y.getTransformIndices(re,"groupby"),ie=m.keyedContainer(re,"transforms["+U[U.length-1]+"].styles","target","value.name");ie.set(B.trace._group,$),H=ie.constructUpdate()}else H.name=$;return y.call("_guiRestyle",R,H,j.index)}):A(ne,C,R,O)}function k(C,R){var O=Math.max(4,R);if(C&&C.trim().length>=O/2)return C;for(var D=O-(C=C||"").length;D>0;D--)C+=" ";return C}function M(C,R){var O,D=R._context.doubleClickDelay,L=1,B=m.ensureSingle(C,"rect","legendtoggle",function(j){R._context.staticPlot||j.style("cursor","pointer").attr("pointer-events","all"),j.call(a.fill,"rgba(0,0,0,0)")});R._context.staticPlot||(B.on("mousedown",function(){(O=(new Date).getTime())-R._legendMouseDownTime<D?L+=1:(L=1,R._legendMouseDownTime=O)}),B.on("mouseup",function(){if(!R._dragged&&!R._editing){var j=R._fullLayout.legend;(new Date).getTime()-R._legendMouseDownTime>D&&(L=Math.max(L-1,1)),_(R,j,C,L,g.event)}}))}function A(C,R,O,D,L){D._inHover&&C.attr("data-notex",!0),t.convertToTspans(C,O,function(){!function(B,j,W,Y){var Q=B.data()[0][0];if(W._inHover||!Q||Q.trace.showlegend){var ne=B.select("g[class*=math-group]"),X=ne.node();W||(W=j._fullLayout.legend);var H,U,re=W.borderwidth,G=(1===Y?W.title.font:Q.groupTitle?Q.groupTitle.font:W.font).size*c;if(X){var ie=n.bBox(X);H=ie.height,U=ie.width,1===Y?n.setTranslate(ne,re,re+.75*H):n.setTranslate(ne,0,.25*H)}else{var q=B.select(1===Y?".legendtitletext":".legendtext"),ee=t.lineCount(q),te=q.node();if(H=G*ee,U=te?n.bBox(te).width:0,1===Y)"left"===W.title.side&&(U+=2*u.itemGap),t.positionText(q,re+u.titlePad,re+G);else{var se=2*u.itemGap+W.itemwidth;Q.groupTitle&&(se=u.itemGap,U-=W.itemwidth),t.positionText(q,se,-G*((ee-1)/2-.3))}}1===Y?(W._titleWidth=U,W._titleHeight=H):(Q.lineHeight=G,Q.height=Math.max(H,16)+3,Q.width=U)}else B.remove()}(R,O,D,L)})}function E(C){return m.isRightAnchor(C)?"right":m.isCenterAnchor(C)?"center":"left"}function I(C){return m.isBottomAnchor(C)?"bottom":m.isMiddleAnchor(C)?"middle":"top"}oe.exports=function(C,R){return R||(R=C._fullLayout.legend||{}),function(O,D){var L,B,j=O._fullLayout,W="legend"+j._uid,Y=D._inHover;if(Y?(L=D.layer,W+="-hover"):L=j._infolayer,L){if(O._legendMouseDownTime||(O._legendMouseDownTime=0),Y){if(!D.entries)return;B=h(D.entries,D)}else{if(!O.calcdata)return;B=j.showlegend&&h(O.calcdata,D)}var Q=j.hiddenlabels||[];if(!(Y||j.showlegend&&B.length))return L.selectAll(".legend").remove(),j._topdefs.select("#"+W).remove(),w.autoMargin(O,"legend");var ne=m.ensureSingle(L,"g","legend",function(ee){Y||ee.attr("pointer-events","all")}),X=m.ensureSingleById(j._topdefs,"clipPath",W,function(ee){ee.append("rect")}),$=m.ensureSingle(ne,"rect","bg",function(ee){ee.attr("shape-rendering","crispEdges")});$.call(a.stroke,D.bordercolor).call(a.fill,D.bgcolor).style("stroke-width",D.borderwidth+"px");var re=m.ensureSingle(ne,"g","scrollbox"),H=D.title;if(D._titleWidth=0,D._titleHeight=0,H.text){var U=m.ensureSingle(re,"text","legendtitletext");U.attr("text-anchor","start").call(n.font,H.font).text(H.text),A(U,re,O,D,1)}else re.selectAll(".legendtitletext").remove();var G=m.ensureSingle(ne,"rect","scrollbar",function(ee){ee.attr(u.scrollBarEnterAttrs).call(a.fill,u.scrollBarColor)}),ie=re.selectAll("g.groups").data(B);ie.enter().append("g").attr("class","groups"),ie.exit().remove();var q=ie.selectAll("g.traces").data(m.identity);q.enter().append("g").attr("class","traces"),q.exit().remove(),q.style("opacity",function(ee){var te=ee[0].trace;return y.traceIs(te,"pie-like")?-1!==Q.indexOf(ee[0].label)?.5:1:"legendonly"===te.visible?.5:1}).each(function(){g.select(this).call(s,O,D)}).call(d,O,D).each(function(){Y||g.select(this).call(M,O)}),m.syncOrAsync([w.previousPromises,function(){return function(ee,te,se,ue){var de=ee._fullLayout;ue||(ue=de.legend);var he=de._size,xe=o.isVertical(ue),ge=o.isGrouped(ue),_e=ue.borderwidth,Ce=2*_e,Le=u.itemGap,Ie=ue.itemwidth+2*Le,Be=2*(_e+Le),ve=I(ue),Te=ue.y<0||0===ue.y&&"top"===ve,Pe=ue.y>1||1===ue.y&&"bottom"===ve,De=ue.tracegroupgap;ue._maxHeight=Math.max(Te||Pe?de.height/2:he.h,30);var Fe=0;ue._width=0,ue._height=0;var Tn,nn,Me,Ee,Ue=(nn=0,Me=0,(Ee=(Tn=ue).title.side)&&(-1!==Ee.indexOf("left")&&(nn=Tn._titleWidth),-1!==Ee.indexOf("top")&&(Me=Tn._titleHeight)),[nn,Me]);if(xe)se.each(function(Tn){var nn=Tn[0].height;n.setTranslate(this,_e+Ue[0],_e+Ue[1]+ue._height+nn/2+Le),ue._height+=nn,ue._width=Math.max(ue._width,Tn[0].width)}),Fe=Ie+ue._width,ue._width+=Le+Ie+Ce,ue._height+=Be,ge&&(te.each(function(Tn,nn){n.setTranslate(this,0,nn*ue.tracegroupgap)}),ue._height+=(ue._lgroupsLength-1)*ue.tracegroupgap);else{var He=E(ue),Ve=Pe||Te,$e=de.width/2;ue._maxWidth=Math.max(ue.x<0||0===ue.x&&"right"===He?Ve&&"left"===He?he.l+he.w:$e:ue.x>1||1===ue.x&&"left"===He?Ve&&"right"===He?he.r+he.w:$e:he.w,2*Ie);var Qe=0,tt=0;se.each(function(Tn){var nn=Tn[0].width+Ie;Qe=Math.max(Qe,nn),tt+=nn}),Fe=null;var ut=0;if(ge){var xt=0,kt=0,Bt=0;te.each(function(){var Tn=0,nn=0;g.select(this).selectAll("g.traces").each(function(Ee){var Se=Ee[0].width,je=Ee[0].height;n.setTranslate(this,Ue[0],Ue[1]+_e+Le+je/2+nn),nn+=je,Tn=Math.max(Tn,Ie+Se)});var Me=Tn+Le;kt>0&&Me+_e+kt>ue._maxWidth?(ut=Math.max(ut,kt),kt=0,Bt+=xt+De,xt=nn):xt=Math.max(xt,nn),n.setTranslate(this,kt,Bt),kt+=Me}),ue._width=Math.max(ut,kt)+_e,ue._height=Bt+xt+Be}else{var Rt=se.size(),ft=tt+Ce+(Rt-1)*Le<ue._maxWidth,lt=0,Ft=0,Jt=0,ln=0;se.each(function(Tn){var nn=Tn[0].height,Me=Ie+Tn[0].width,Ee=(ft?Me:Qe)+Le;Ee+_e+Ft-Le>=ue._maxWidth&&(ut=Math.max(ut,ln),Ft=0,Jt+=lt,ue._height+=lt,lt=0),n.setTranslate(this,Ue[0]+_e+Ft,Ue[1]+_e+Jt+nn/2+Le),ln=Ft+Me+Le,Ft+=Ee,lt=Math.max(lt,nn)}),ft?(ue._width=Ft+Ce,ue._height=lt+Be):(ue._width=Math.max(ut,ln)+Ce,ue._height+=lt+Be)}}ue._width=Math.ceil(Math.max(ue._width+Ue[0],ue._titleWidth+2*(_e+u.titlePad))),ue._height=Math.ceil(Math.max(ue._height+Ue[1],ue._titleHeight+2*(_e+u.itemGap))),ue._effHeight=Math.min(ue._height,ue._maxHeight);var dn=ee._context.edits,cn=dn.legendText||dn.legendPosition;se.each(function(Tn){var nn=g.select(this).select(".legendtoggle"),Me=Tn[0].height,Ee=cn?Ie:Fe||Ie+Tn[0].width;xe||(Ee+=Le/2),n.setRect(nn,0,-Me/2,Ee,Me)})}(O,ie,q,D)},function(){var ee,te,se,ue,Ve,$e,Qe,tt,de=j._size,he=D.borderwidth;if(!Y){if(Qe=E($e=(Ve=O)._fullLayout.legend),tt=I($e),w.autoMargin(Ve,"legend",{x:$e.x,y:$e.y,l:$e._width*f[Qe],r:$e._width*l[Qe],b:$e._effHeight*l[tt],t:$e._effHeight*f[tt]}))return;var xe=de.l+de.w*D.x-f[E(D)]*D._width,ge=de.t+de.h*(1-D.y)-f[I(D)]*D._effHeight;if(j.margin.autoexpand){var _e=xe,Ce=ge;xe=m.constrain(xe,0,j.width-D._width),ge=m.constrain(ge,0,j.height-D._effHeight),xe!==_e&&m.log("Constrain legend.x to make legend fit inside graph"),ge!==Ce&&m.log("Constrain legend.y to make legend fit inside graph")}n.setTranslate(ne,xe,ge)}if(G.on(".drag",null),ne.on("wheel",null),Y||D._height<=D._maxHeight||O._context.staticPlot){var Le=D._effHeight;Y&&(Le=D._height),$.attr({width:D._width-he,height:Le-he,x:he/2,y:he/2}),n.setTranslate(re,0,0),X.select("rect").attr({width:D._width-2*he,height:Le-2*he,x:he,y:he}),n.setClipUrl(re,W,O),n.setRect(G,0,0,0,0),delete D._scrollY}else{var Ie,ve,Te=Math.max(u.scrollBarMinHeight,D._effHeight*D._effHeight/D._height),Pe=D._effHeight-Te-2*u.scrollBarMargin,De=D._height-D._effHeight,Fe=Pe/De,Ue=Math.min(D._scrollY||0,De);$.attr({width:D._width-2*he+u.scrollBarWidth+u.scrollBarMargin,height:D._effHeight-he,x:he/2,y:he/2}),X.select("rect").attr({width:D._width-2*he+u.scrollBarWidth+u.scrollBarMargin,height:D._effHeight-2*he,x:he,y:he+Ue}),n.setClipUrl(re,W,O),st(Ue,Te,Fe),ne.on("wheel",function(){st(Ue=m.constrain(D._scrollY+g.event.deltaY/Pe*De,0,De),Te,Fe),0!==Ue&&Ue!==De&&g.event.preventDefault()});var He=g.behavior.drag().on("dragstart",function(){var Ve=g.event.sourceEvent;Ie="touchstart"===Ve.type?Ve.changedTouches[0].clientY:Ve.clientY,ve=Ue}).on("drag",function(){var Ve=g.event.sourceEvent;2===Ve.buttons||Ve.ctrlKey||st(Ue=function($e,Qe,tt){return m.constrain((tt-Qe)/Fe+$e,0,De)}(ve,Ie,"touchmove"===Ve.type?Ve.changedTouches[0].clientY:Ve.clientY),Te,Fe)});G.call(He);var Ke=g.behavior.drag().on("dragstart",function(){var Ve=g.event.sourceEvent;"touchstart"===Ve.type&&(Ie=Ve.changedTouches[0].clientY,ve=Ue)}).on("drag",function(){var Ve=g.event.sourceEvent;"touchmove"===Ve.type&&st(Ue=function($e,Qe,tt){return m.constrain((Qe-tt)/Fe+$e,0,De)}(ve,Ie,Ve.changedTouches[0].clientY),Te,Fe)});re.call(Ke)}function st(Ve,$e,Qe){D._scrollY=O._fullLayout.legend._scrollY=Ve,n.setTranslate(re,0,-Ve),n.setRect(G,D._width,u.scrollBarMargin+Ve*Qe,u.scrollBarWidth,$e),X.select("rect").attr("y",he+Ve)}O._context.edits.legendPosition&&(ne.classed("cursor-move",!0),r.init({element:ne.node(),gd:O,prepFn:function(){var Ve=n.getTranslate(ne);se=Ve.x,ue=Ve.y},moveFn:function(Ve,$e){var Qe=se+Ve,tt=ue+$e;n.setTranslate(ne,Qe,tt),ee=r.align(Qe,0,de.l,de.l+de.w,D.xanchor),te=r.align(tt,0,de.t+de.h,de.t,D.yanchor)},doneFn:function(){void 0!==ee&&void 0!==te&&y.call("_guiRelayout",O,{"legend.x":ee,"legend.y":te})},clickFn:function(Ve,$e){var Qe=L.selectAll("g.traces").filter(function(){var tt=this.getBoundingClientRect();return $e.clientX>=tt.left&&$e.clientX<=tt.right&&$e.clientY>=tt.top&&$e.clientY<=tt.bottom});Qe.size()>0&&_(O,ne,Qe,Ve,$e)}}))}],O)}}(C,R)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("./helpers");oe.exports=function(w,y){var e,r,n=y._inHover,a=m.isGrouped(y),t=m.isReversed(y),p={},u=[],i=!1,c={},f=0,l=0;function h(j,W){if(""!==j&&m.isGrouped(y))-1===u.indexOf(j)?(u.push(j),i=!0,p[j]=[W]):p[j].push(W);else{var Y="~~i"+f;u.push(Y),p[Y]=[W],f++}}for(e=0;e<w.length;e++){var d=w[e],o=d[0],_=o.trace,s=_.legendgroup;if(n||_.visible&&_.showlegend)if(g.traceIs(_,"pie-like"))for(c[s]||(c[s]={}),r=0;r<d.length;r++){var k=d[r].label;c[s][k]||(h(s,{label:k,color:d[r].color,i:d[r].i,trace:_,pts:d[r].pts}),c[s][k]=!0,l=Math.max(l,(k||"").length))}else h(s,o),l=Math.max(l,(_.name||"").length)}if(!u.length)return[];var M=!i||!a,A=[];for(e=0;e<u.length;e++){var E=p[u[e]];A.push(M?E[0]:E)}for(M&&(A=[A]),e=0;e<A.length;e++){var I=1/0;for(r=0;r<A[e].length;r++){var C=A[e][r].trace.legendrank;I>C&&(I=C)}A[e][0]._groupMinRank=I,A[e][0]._preGroupSort=e}var R=function(j,W){return j.trace.legendrank-W.trace.legendrank||j._preSort-W._preSort};for(A.forEach(function(j,W){j[0]._preGroupSort=W}),A.sort(function(j,W){return j[0]._groupMinRank-W[0]._groupMinRank||j[0]._preGroupSort-W[0]._preGroupSort}),e=0;e<A.length;e++){A[e].forEach(function(j,W){j._preSort=W}),A[e].sort(R);var O=A[e][0].trace,D=null;for(r=0;r<A[e].length;r++){var L=A[e][r].trace.legendgrouptitle;if(L&&L.text){D=L,n&&(L.font=y._groupTitleFont);break}}if(t&&A[e].reverse(),D){var B=!1;for(r=0;r<A[e].length;r++)if(g.traceIs(A[e][r].trace,"pie-like")){B=!0;break}A[e].unshift({i:-1,groupTitle:D,noClick:B,trace:{showlegend:O.showlegend,legendgroup:O.legendgroup,visible:"toggleitem"===y.groupclick||O.visible}})}for(r=0;r<A[e].length;r++)A[e][r]=[A[e][r]]}return y._lgroupsLength=A.length,y._maxNameLength=l,A}},{"../../registry":638,"./helpers":422}],421:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../registry"),w=!0;oe.exports=function(y,e,r){var n=e._fullLayout;if(!e._dragged&&!e._editing){var a,t=n.legend.itemclick,p=n.legend.itemdoubleclick,u=n.legend.groupclick;if(1===r&&"toggle"===t&&"toggleothers"===p&&w&&e.data&&e._context.showTips&&g.notifier(g._(e,"Double-click on legend to isolate one trace"),"long"),w=!1,1===r?a=t:2===r&&(a=p),a){var i="togglegroup"===u,c=n.hiddenlabels?n.hiddenlabels.slice():[],f=y.data()[0][0];if(!f.groupTitle||!f.noClick){var l,h,d,o,_,s=e._fullData,k=f.trace,M=k.legendgroup,A={},E=[],I=[],C=[];if(m.traceIs(k,"pie-like")){var R=f.label,O=c.indexOf(R);"toggle"===a?-1===O?c.push(R):c.splice(O,1):"toggleothers"===a&&(c=[],e.calcdata[0].forEach(function(G){R!==G.label&&c.push(G.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===c.length&&-1===O&&(c=[])),m.call("_guiRelayout",e,"hiddenlabels",c)}else{var D,L=M&&M.length,B=[];if(L)for(l=0;l<s.length;l++)(D=s[l]).visible&&D.legendgroup===M&&B.push(l);if("toggle"===a){var j;switch(k.visible){case!0:j="legendonly";break;case!1:j=!1;break;case"legendonly":j=!0}if(L)if(i)for(l=0;l<s.length;l++)!1!==s[l].visible&&s[l].legendgroup===M&&U(s[l],j);else U(k,j);else U(k,j)}else if("toggleothers"===a){var Q,X=!0;for(l=0;l<s.length;l++)if(Q=!0!==s[l].showlegend,!(s[l]===k||Q||L&&s[l].legendgroup===M||!0!==s[l].visible||m.traceIs(s[l],"notLegendIsolatable"))){X=!1;break}for(l=0;l<s.length;l++)if(!1!==s[l].visible&&!m.traceIs(s[l],"notLegendIsolatable"))switch(k.visible){case"legendonly":U(s[l],!0);break;case!0:Q=!0!==s[l].showlegend&&!s[l].legendgroup,U(s[l],!!(s[l]===k||L&&s[l].legendgroup===M||Q)||!!X||"legendonly")}}for(l=0;l<I.length;l++)if(d=I[l]){var $=d.constructUpdate(),re=Object.keys($);for(h=0;h<re.length;h++)(A[o=re[h]]=A[o]||[])[C[l]]=$[o]}for(_=Object.keys(A),l=0;l<_.length;l++)for(o=_[l],h=0;h<E.length;h++)A[o].hasOwnProperty(h)||(A[o][h]=void 0);m.call("_guiRestyle",e,A,E)}}}}function H(G,ie,q){var ee=E.indexOf(G),te=A[ie];return te||(te=A[ie]=[]),-1===E.indexOf(G)&&(E.push(G),ee=E.length-1),te[ee]=q,ee}function U(G,ie){if(!f.groupTitle||i){var q=G._fullInput;if(m.hasTransform(q,"groupby")){var ee=I[q.index];if(!ee){var te=m.getTransformIndices(q,"groupby");ee=g.keyedContainer(q,"transforms["+te[te.length-1]+"].styles","target","value.visible"),I[q.index]=ee}var ue=ee.get(G._group);void 0===ue&&(ue=!0),!1!==ue&&ee.set(G._group,ie),C[q.index]=H(q.index,"visible",!1!==q.visible)}else H(q.index,"visible",!1!==q.visible&&ie)}}}},{"../../lib":503,"../../registry":638}],422:[function(x,oe,ae){"use strict";ae.isGrouped=function(g){return-1!==(g.traceorder||"").indexOf("grouped")},ae.isVertical=function(g){return"h"!==g.orientation},ae.isReversed=function(g){return-1!==(g.traceorder||"").indexOf("reversed")}},{}],423:[function(x,oe,ae){"use strict";oe.exports={moduleType:"component",name:"legend",layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),draw:x("./draw"),style:x("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../registry"),w=x("../../lib"),y=w.strTranslate,e=x("../drawing"),r=x("../color"),n=x("../colorscale/helpers").extractOpts,a=x("../../traces/scatter/subtypes"),t=x("../../traces/pie/style_one"),p=x("../../traces/pie/helpers").castOption,u=x("./constants");function i(l,h){return(h?"radial":"horizontal")+(l?"":"reversed")}function c(l){var h=l[0].trace,d=h.contours,o=a.hasLines(h),_=a.hasMarkers(h),s=h.visible&&h.fill&&"none"!==h.fill,k=!1,M=!1;if(d){var A=d.coloring;"lines"===A?k=!0:o="none"===A||"heatmap"===A||d.showlines,"constraint"===d.type?s="="!==d._operation:"fill"!==A&&"heatmap"!==A||(M=!0)}return{showMarker:_,showLine:o,showFill:s,showGradientLine:k,showGradientFill:M,anyLine:o||k,anyFill:s||M}}function f(l,h,d){return l&&w.isArrayOrTypedArray(l)?h:l>d?d:l}oe.exports=function(l,h,d){d||(d=h._fullLayout.legend);var _="constant"===d.itemsizing,s=d.itemwidth,M=y((s+2*u.itemGap)/2,0),A=function(C,R,O,D){var L;if(C+1)L=C;else{if(!(R&&R.width>0))return 0;L=R.width}return _?D:Math.min(L,O)};function E(C,R,O){var D=C[0].trace,L=D.marker||{},B=L.line||{},j=O?D.visible&&D.type===O:m.traceIs(D,"bar"),W=g.select(R).select("g.legendpoints").selectAll("path.legend"+O).data(j?[C]:[]);W.enter().append("path").classed("legend"+O,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",M),W.exit().remove(),W.each(function(Y){var Q=g.select(this),ne=Y[0],X=A(ne.mlw,L.line,5,2);Q.style("stroke-width",X+"px");var $=ne.mcc;if(!d._inHover&&"mc"in ne){var re=n(L),H=re.mid;void 0===H&&(H=(re.max+re.min)/2),$=e.tryColorscale(L,"")(H)}var U=$||ne.mc||L.color,G=L.pattern,ie=G&&e.getPatternAttr(G.shape,0,"");if(ie){var q=e.getPatternAttr(G.bgcolor,0,null),ee=e.getPatternAttr(G.fgcolor,0,null),te=G.fgopacity,se=f(G.size,8,10),ue=f(G.solidity,.5,1);Q.call(e.pattern,"legend",h,"legend-"+D.uid,ie,se,ue,$,G.fillmode,q,ee,te)}else Q.call(r.fill,U);X&&r.stroke(Q,ne.mlc||B.color)})}function I(C,R,O){var D=C[0],L=D.trace,B=O?L.visible&&L.type===O:m.traceIs(L,O),j=g.select(R).select("g.legendpoints").selectAll("path.legend"+O).data(B?[C]:[]);if(j.enter().append("path").classed("legend"+O,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",M),j.exit().remove(),j.size()){var W=(L.marker||{}).line,Y=A(p(W.width,D.pts),W,5,2),Q=w.minExtend(L,{marker:{line:{width:Y}}});Q.marker.line.color=W.color;var ne=w.minExtend(D,{trace:Q});t(j,ne,Q)}}l.each(function(C){var R=g.select(this),O=w.ensureSingle(R,"g","layers");O.style("opacity",C[0].trace.opacity);var D=d.valign,L=C[0].lineHeight,B=C[0].height;O.attr("transform","middle"!==D&&L&&B?y(0,{top:1,bottom:-1}[D]*(.5*(L-B+3))):null),O.selectAll("g.legendfill").data([C]).enter().append("g").classed("legendfill",!0),O.selectAll("g.legendlines").data([C]).enter().append("g").classed("legendlines",!0);var W=O.selectAll("g.legendsymbols").data([C]);W.enter().append("g").classed("legendsymbols",!0),W.selectAll("g.legendpoints").data([C]).enter().append("g").classed("legendpoints",!0)}).each(function(C){var R,O=C[0].trace,D=[];if(O.visible)switch(O.type){case"histogram2d":case"heatmap":D=[["M-15,-2V4H15V-2Z"]],R=!0;break;case"choropleth":case"choroplethmapbox":D=[["M-6,-6V6H6V-6Z"]],R=!0;break;case"densitymapbox":D=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],R="radial";break;case"cone":D=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],R=!1;break;case"streamtube":D=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],R=!1;break;case"surface":D=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],R=!0;break;case"mesh3d":D=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],R=!1;break;case"volume":D=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],R=!0;break;case"isosurface":D=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],R=!1}var L=g.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(D);L.enter().append("path").classed("legend3dandfriends",!0).attr("transform",M).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(B,j){var W,Y=g.select(this),Q=n(O),ne=Q.colorscale,X=Q.reversescale;if(ne){if(!R){var $=ne.length;W=0===j?ne[X?$-1:0][1]:1===j?ne[X?0:$-1][1]:ne[Math.floor(($-1)/2)][1]}}else{var re=O.vertexcolor||O.facecolor||O.color;W=w.isArrayOrTypedArray(re)?re[j]||re[0]:re}Y.attr("d",B[0]),W?Y.call(r.fill,W):Y.call(function(H){H.size()&&e.gradient(H,h,"legendfill-"+O.uid,i(X,"radial"===R),ne,"fill")})})}).each(function(C){var R=C[0].trace,O="waterfall"===R.type;if(C[0]._distinct&&O){var D=C[0].trace[C[0].dir].marker;return C[0].mc=D.color,C[0].mlw=D.line.width,C[0].mlc=D.line.color,E(C,this,"waterfall")}var L=[];R.visible&&O&&(L=C[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var B=g.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(L);B.enter().append("path").classed("legendwaterfall",!0).attr("transform",M).style("stroke-miterlimit",1),B.exit().remove(),B.each(function(j){var W=g.select(this),Y=R[j[0]].marker,Q=A(void 0,Y.line,5,2);W.attr("d",j[1]).style("stroke-width",Q+"px").call(r.fill,Y.color),Q&&W.call(r.stroke,Y.line.color)})}).each(function(C){E(C,this,"funnel")}).each(function(C){E(C,this)}).each(function(C){var R=C[0].trace,O=g.select(this).select("g.legendpoints").selectAll("path.legendbox").data(R.visible&&m.traceIs(R,"box-violin")?[C]:[]);O.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",M),O.exit().remove(),O.each(function(){var D=g.select(this);if("all"!==R.boxpoints&&"all"!==R.points||0!==r.opacity(R.fillcolor)||0!==r.opacity((R.line||{}).color)){var L=A(void 0,R.line,5,2);D.style("stroke-width",L+"px").call(r.fill,R.fillcolor),L&&r.stroke(D,R.line.color)}else{var B=w.minExtend(R,{marker:{size:_?12:w.constrain(R.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});O.call(e.pointStyle,B,h)}})}).each(function(C){I(C,this,"funnelarea")}).each(function(C){I(C,this,"pie")}).each(function(C){var R,O,D=c(C),L=D.showFill,B=D.showLine,j=D.showGradientLine,W=D.showGradientFill,Y=D.anyFill,Q=D.anyLine,ne=C[0],X=ne.trace,$=n(X),re=$.colorscale,H=$.reversescale,U=a.hasMarkers(X)||!Y?"M5,0":Q?"M5,-2":"M5,-3",G=g.select(this),ie=G.select(".legendfill").selectAll("path").data(L||W?[C]:[]);if(ie.enter().append("path").classed("js-fill",!0),ie.exit().remove(),ie.attr("d",U+"h"+s+"v6h-"+s+"z").call(function(te){te.size()&&(L?e.fillGroupStyle(te,h):e.gradient(te,h,"legendfill-"+X.uid,i(H),re,"fill"))}),B||j){var q=A(void 0,X.line,10,5);O=w.minExtend(X,{line:{width:q}}),R=[w.minExtend(ne,{trace:O})]}var ee=G.select(".legendlines").selectAll("path").data(B||j?[R]:[]);ee.enter().append("path").classed("js-line",!0),ee.exit().remove(),ee.attr("d",U+(j?"l"+s+",0.0001":"h"+s)).call(B?e.lineGroupStyle:function(te){if(te.size()){var se="legendline-"+X.uid;e.lineGroupStyle(te),e.gradient(te,h,se,i(H),re,"stroke")}})}).each(function(C){var R,O,D=c(C),j=D.showLine,W=D.showMarker,Y=C[0],Q=Y.trace,ne=!W&&!D.anyLine&&!D.anyFill&&a.hasText(Q);function X(ee,te,se,ue){var de=w.nestedProperty(Q,ee).get(),he=w.isArrayOrTypedArray(de)&&te?te(de):de;if(_&&he&&void 0!==ue&&(he=ue),se){if(he<se[0])return se[0];if(he>se[1])return se[1]}return he}function $(ee){return Y._distinct&&Y.index&&ee[Y.index]?ee[Y.index]:ee[0]}if(W||ne||j){var re={},H={};if(W){re.mc=X("marker.color",$),re.mx=X("marker.symbol",$),re.mo=X("marker.opacity",w.mean,[.2,1]),re.mlc=X("marker.line.color",$),re.mlw=X("marker.line.width",w.mean,[0,5],2),H.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var U=X("marker.size",w.mean,[2,16],12);re.ms=U,H.marker.size=U}j&&(H.line={width:X("line.width",$,[0,10],5)}),ne&&(re.tx="Aa",re.tp=X("textposition",$),re.ts=10,re.tc=X("textfont.color",$),re.tf=X("textfont.family",$)),R=[w.minExtend(Y,re)],(O=w.minExtend(Q,H)).selectedpoints=null,O.texttemplate=null}var G=g.select(this).select("g.legendpoints"),ie=G.selectAll("path.scatterpts").data(W?R:[]);ie.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",M),ie.exit().remove(),ie.call(e.pointStyle,O,h),W&&(R[0].mrc=3);var q=G.selectAll("g.pointtext").data(ne?R:[]);q.enter().append("g").classed("pointtext",!0).append("text").attr("transform",M),q.exit().remove(),q.selectAll("text").call(e.textPointStyle,O,h)}).each(function(C){var R=C[0].trace,O=g.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(R.visible&&"candlestick"===R.type?[C,C]:[]);O.enter().append("path").classed("legendcandle",!0).attr("d",function(D,L){return L?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",M).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(D,L){var B=g.select(this),j=R[L?"increasing":"decreasing"],W=A(void 0,j.line,5,2);B.style("stroke-width",W+"px").call(r.fill,j.fillcolor),W&&r.stroke(B,j.line.color)})}).each(function(C){var R=C[0].trace,O=g.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(R.visible&&"ohlc"===R.type?[C,C]:[]);O.enter().append("path").classed("legendohlc",!0).attr("d",function(D,L){return L?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",M).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(D,L){var B=g.select(this),j=R[L?"increasing":"decreasing"],W=A(void 0,j.line,5,2);B.style("fill","none").call(e.dashLine,j.line.dash,W),W&&r.stroke(B,j.line.color)})})}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":906,"../../traces/pie/style_one":912,"../../traces/scatter/subtypes":952,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(x,oe,ae){"use strict";x("./constants"),oe.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../plots/plots"),w=x("../../plots/cartesian/axis_ids"),y=x("../../fonts/ploticon"),e=x("../shapes/draw").eraseActiveShape,r=x("../../lib"),n=r._,a=oe.exports={};function t(o,_){var s,k,M=_.currentTarget,A=M.getAttribute("data-attr"),E=M.getAttribute("data-val")||!0,I=o._fullLayout,C={},R=w.list(o,null,!0),O=I._cartesianSpikesEnabled;if("zoom"===A){var D,L="in"===E?.5:2,B=(1+L)/2,j=(1-L)/2;for(k=0;k<R.length;k++)if(!(s=R[k]).fixedrange)if(D=s._name,"auto"===E)C[D+".autorange"]=!0;else if("reset"===E){if(void 0===s._rangeInitial)C[D+".autorange"]=!0;else{var W=s._rangeInitial.slice();C[D+".range[0]"]=W[0],C[D+".range[1]"]=W[1]}void 0!==s._showSpikeInitial&&(C[D+".showspikes"]=s._showSpikeInitial,"on"!==O||s._showSpikeInitial||(O="off"))}else{var Y=[s.r2l(s.range[0]),s.r2l(s.range[1])],Q=[B*Y[0]+j*Y[1],B*Y[1]+j*Y[0]];C[D+".range[0]"]=s.l2r(Q[0]),C[D+".range[1]"]=s.l2r(Q[1])}}else"hovermode"!==A||"x"!==E&&"y"!==E||M.setAttribute("data-val",E=I._isHoriz?"y":"x"),C[A]=E;I._cartesianSpikesEnabled=O,g.call("_guiRelayout",o,C)}function p(o,_){for(var s=_.currentTarget,k=s.getAttribute("data-attr"),M=s.getAttribute("data-val")||!0,A=o._fullLayout._subplots.gl3d||[],E={},I=k.split("."),C=0;C<A.length;C++)E[A[C]+"."+I[1]]=M;E.dragmode="pan"===M?M:"zoom",g.call("_guiRelayout",o,E)}function u(o,_){for(var s=_.currentTarget.getAttribute("data-attr"),k="resetLastSave"===s,M="resetDefault"===s,A=o._fullLayout,E=A._subplots.gl3d||[],I={},C=0;C<E.length;C++){var R,O=E[C],D=O+".camera",L=O+".aspectratio",B=O+".aspectmode",j=A[O]._scene;k?(I[D+".up"]=j.viewInitial.up,I[D+".eye"]=j.viewInitial.eye,I[D+".center"]=j.viewInitial.center,R=!0):M&&(I[D+".up"]=null,I[D+".eye"]=null,I[D+".center"]=null,R=!0),R&&(I[L+".x"]=j.viewInitial.aspectratio.x,I[L+".y"]=j.viewInitial.aspectratio.y,I[L+".z"]=j.viewInitial.aspectratio.z,I[B]=j.viewInitial.aspectmode)}g.call("_guiRelayout",o,I)}function i(o,_){var s=_.currentTarget,k=s._previousVal,M=o._fullLayout,A=M._subplots.gl3d||[],E=["xaxis","yaxis","zaxis"],I={},C={};if(k)C=k,s._previousVal=null;else{for(var R=0;R<A.length;R++){var O=A[R],D=M[O],L=O+".hovermode";I[L]=D.hovermode,C[L]=!1;for(var B=0;B<3;B++){var j=E[B],W=O+"."+j+".showspikes";C[W]=!1,I[W]=D[j].showspikes}}s._previousVal=I}return C}function c(o,_){for(var s=_.currentTarget,k=s.getAttribute("data-attr"),M=s.getAttribute("data-val")||!0,A=o._fullLayout,E=A._subplots.geo||[],I=0;I<E.length;I++){var C=E[I];if("zoom"===k){var O=A[C].projection.scale;g.call("_guiRelayout",o,C+".projection.scale","in"===M?2*O:.5*O)}}"reset"===k&&d(o,"geo")}function f(o){var _=o._fullLayout;return!_.hovermode&&(_._has("cartesian")?_._isHoriz?"y":"x":"closest")}function l(o){var _=f(o);g.call("_guiRelayout",o,"hovermode",_)}function h(o,_){for(var s=_.currentTarget.getAttribute("data-val"),k=o._fullLayout,M=k._subplots.mapbox||[],A={},E=0;E<M.length;E++){var I=M[E],C=k[I].zoom;A[I+".zoom"]="in"===s?1.05*C:C/1.05}g.call("_guiRelayout",o,A)}function d(o,_){for(var s=o._fullLayout,k=s._subplots[_]||[],M={},A=0;A<k.length;A++)for(var E=k[A],I=s[E]._subplot.viewInitial,C=Object.keys(I),R=0;R<C.length;R++){var O=C[R];M[E+"."+O]=I[O]}g.call("_guiRelayout",o,M)}a.toImage={name:"toImage",title:function(o){return n(o,"png"===((o._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:y.camera,click:function(o){var _=o._context.toImageButtonOptions,s={format:_.format||"png"};r.notifier(n(o,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==s.format&&r.isIE()&&(r.notifier(n(o,"IE only supports svg.  Changing format to svg."),"long"),s.format="svg"),["filename","width","height","scale"].forEach(function(k){k in _&&(s[k]=_[k])}),g.call("downloadImage",o,s).then(function(k){r.notifier(n(o,"Snapshot succeeded")+" - "+k,"long")}).catch(function(){r.notifier(n(o,"Sorry, there was a problem downloading your snapshot!"),"long")})}},a.sendDataToCloud={name:"sendDataToCloud",title:function(o){return n(o,"Edit in Chart Studio")},icon:y.disk,click:function(o){m.sendDataToCloud(o)}},a.editInChartStudio={name:"editInChartStudio",title:function(o){return n(o,"Edit in Chart Studio")},icon:y.pencil,click:function(o){m.sendDataToCloud(o)}},a.zoom2d={name:"zoom2d",_cat:"zoom",title:function(o){return n(o,"Zoom")},attr:"dragmode",val:"zoom",icon:y.zoombox,click:t},a.pan2d={name:"pan2d",_cat:"pan",title:function(o){return n(o,"Pan")},attr:"dragmode",val:"pan",icon:y.pan,click:t},a.select2d={name:"select2d",_cat:"select",title:function(o){return n(o,"Box Select")},attr:"dragmode",val:"select",icon:y.selectbox,click:t},a.lasso2d={name:"lasso2d",_cat:"lasso",title:function(o){return n(o,"Lasso Select")},attr:"dragmode",val:"lasso",icon:y.lasso,click:t},a.drawclosedpath={name:"drawclosedpath",title:function(o){return n(o,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:y.drawclosedpath,click:t},a.drawopenpath={name:"drawopenpath",title:function(o){return n(o,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:y.drawopenpath,click:t},a.drawline={name:"drawline",title:function(o){return n(o,"Draw line")},attr:"dragmode",val:"drawline",icon:y.drawline,click:t},a.drawrect={name:"drawrect",title:function(o){return n(o,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:y.drawrect,click:t},a.drawcircle={name:"drawcircle",title:function(o){return n(o,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:y.drawcircle,click:t},a.eraseshape={name:"eraseshape",title:function(o){return n(o,"Erase active shape")},icon:y.eraseshape,click:e},a.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(o){return n(o,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:t},a.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(o){return n(o,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:t},a.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(o){return n(o,"Autoscale")},attr:"zoom",val:"auto",icon:y.autoscale,click:t},a.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(o){return n(o,"Reset axes")},attr:"zoom",val:"reset",icon:y.home,click:t},a.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(o){return n(o,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:y.tooltip_basic,gravity:"ne",click:t},a.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(o){return n(o,"Compare data on hover")},attr:"hovermode",val:function(o){return o._fullLayout._isHoriz?"y":"x"},icon:y.tooltip_compare,gravity:"ne",click:t},a.zoom3d={name:"zoom3d",_cat:"zoom",title:function(o){return n(o,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:y.zoombox,click:p},a.pan3d={name:"pan3d",_cat:"pan",title:function(o){return n(o,"Pan")},attr:"scene.dragmode",val:"pan",icon:y.pan,click:p},a.orbitRotation={name:"orbitRotation",title:function(o){return n(o,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:y["3d_rotate"],click:p},a.tableRotation={name:"tableRotation",title:function(o){return n(o,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:y["z-axis"],click:p},a.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(o){return n(o,"Reset camera to default")},attr:"resetDefault",icon:y.home,click:u},a.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(o){return n(o,"Reset camera to last save")},attr:"resetLastSave",icon:y.movie,click:u},a.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(o){return n(o,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:function(o,_){var s=i(o,_);g.call("_guiRelayout",o,s)}},a.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(o){return n(o,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:c},a.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(o){return n(o,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:c},a.resetGeo={name:"resetGeo",_cat:"reset",title:function(o){return n(o,"Reset")},attr:"reset",val:null,icon:y.autoscale,click:c},a.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(o){return n(o,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:l},a.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(o){return n(o,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:l},a.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(o){return n(o,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:y.tooltip_basic,gravity:"ne",click:l},a.resetViewSankey={name:"resetSankeyGroup",title:function(o){return n(o,"Reset view")},icon:y.home,click:function(o){for(var _={"node.groups":[],"node.x":[],"node.y":[]},s=0;s<o._fullData.length;s++){var k=o._fullData[s]._viewInitial;_["node.groups"].push(k.node.groups.slice()),_["node.x"].push(k.node.x.slice()),_["node.y"].push(k.node.y.slice())}g.call("restyle",o,_)}},a.toggleHover={name:"toggleHover",title:function(o){return n(o,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:function(o,_){var s=i(o,_);s.hovermode=f(o),g.call("_guiRelayout",o,s)}},a.resetViews={name:"resetViews",title:function(o){return n(o,"Reset views")},icon:y.home,click:function(o,_){var s=_.currentTarget;s.setAttribute("data-attr","zoom"),s.setAttribute("data-val","reset"),t(o,_),s.setAttribute("data-attr","resetLastSave"),u(o,_),d(o,"geo"),d(o,"mapbox")}},a.toggleSpikelines={name:"toggleSpikelines",title:function(o){return n(o,"Toggle Spike Lines")},icon:y.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(o){var _=o._fullLayout;_._cartesianSpikesEnabled="on"===_._cartesianSpikesEnabled?"off":"on",g.call("_guiRelayout",o,function(k){for(var M="on"===k._fullLayout._cartesianSpikesEnabled,A=w.list(k,null,!0),E={},I=0;I<A.length;I++){var C=A[I];E[C._name+".showspikes"]=!!M||C._showSpikeInitial}return E}(o))}},a.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(o){return n(o,"Reset view")},attr:"reset",icon:y.home,click:function(o){d(o,"mapbox")}},a.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(o){return n(o,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:h},a.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(o){return n(o,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:h}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(x,oe,ae){"use strict";var g=x("./buttons"),m=Object.keys(g),w=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],y=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(w),e=[];m.forEach(function(r){!function(n){if(-1===y.indexOf(n._cat||n.name)){var a=n.name,t=(n._cat||n.name).toLowerCase();-1===e.indexOf(a)&&e.push(a),-1===e.indexOf(t)&&e.push(t)}}(g[r])}),e.sort(),oe.exports={DRAW_MODES:w,backButtons:y,foreButtons:e}},{"./buttons":426}],428:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../color"),w=x("../../plot_api/plot_template"),y=x("./attributes");oe.exports=function(e,r){var n=e.modebar||{},a=w.newContainer(r,"modebar");function t(u,i){return g.coerce(n,a,y,u,i)}t("orientation"),t("bgcolor",m.addOpacity(r.paper_bgcolor,.5));var p=m.contrast(m.rgb(r.modebar.bgcolor));t("color",m.addOpacity(p,.3)),t("activecolor",m.addOpacity(p,.7)),t("uirevision",r.uirevision),t("add"),t("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(x,oe,ae){"use strict";oe.exports={moduleType:"component",name:"modebar",layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),manage:x("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axis_ids"),m=x("../../traces/scatter/subtypes"),w=x("../../registry"),y=x("../fx/helpers").isUnifiedHover,e=x("./modebar"),r=x("./buttons"),n=x("./constants").DRAW_MODES,a=x("../../lib").extendDeep;oe.exports=function(t){var p=t._fullLayout,u=t._context,i=p._modeBar;if(u.displayModeBar||u.watermark){if(!Array.isArray(u.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(u.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var c,f=u.modeBarButtons;c=Array.isArray(f)&&f.length?function(l){for(var h=a([],l),d=0;d<h.length;d++)for(var o=h[d],_=0;_<o.length;_++){var s=o[_];if("string"==typeof s){if(void 0===r[s])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));h[d][_]=r[s]}}return h}(f):!u.displayModeBar&&u.watermark?[]:function(l){var h=l._fullLayout,d=l._fullData,o=l._context;function _(de,he){if("string"==typeof he){if(he.toLowerCase()===de.toLowerCase())return!0}else if(he.name===de||(he._cat||he.name)===de.toLowerCase())return!0;return!1}var s=h.modebar.add;"string"==typeof s&&(s=[s]);var k=h.modebar.remove;"string"==typeof k&&(k=[k]);var M=o.modeBarButtonsToAdd.concat(s.filter(function(de){for(var he=0;he<o.modeBarButtonsToRemove.length;he++)if(_(de,o.modeBarButtonsToRemove[he]))return!1;return!0})),A=o.modeBarButtonsToRemove.concat(k.filter(function(de){for(var he=0;he<o.modeBarButtonsToAdd.length;he++)if(_(de,o.modeBarButtonsToAdd[he]))return!1;return!0})),E=h._has("cartesian"),I=h._has("gl3d"),C=h._has("geo"),R=h._has("pie"),O=h._has("funnelarea"),D=h._has("gl2d"),L=h._has("ternary"),B=h._has("mapbox"),j=h._has("polar"),W=h._has("smith"),Y=h._has("sankey"),Q=function(de){for(var he=g.list({_fullLayout:de},null,!0),xe=0;xe<he.length;xe++)if(!he[xe].fixedrange)return!1;return!0}(h),ne=y(h.hovermode),X=[];function $(de){if(de.length){for(var he=[],xe=0;xe<de.length;xe++){for(var ge=de[xe],_e=r[ge],Ce=_e.name.toLowerCase(),Le=(_e._cat||_e.name).toLowerCase(),Ie=!1,Be=0;Be<A.length;Be++){var ve=A[Be].toLowerCase();if(ve===Ce||ve===Le){Ie=!0;break}}Ie||he.push(r[ge])}X.push(he)}}var re=["toImage"];o.showEditInChartStudio?re.push("editInChartStudio"):o.showSendToCloud&&re.push("sendDataToCloud"),$(re);var H=[],U=[],G=[],ie=[];(E||D||R||O||L)+C+I+B+j+W>1?(U=["toggleHover"],G=["resetViews"]):C?(H=["zoomInGeo","zoomOutGeo"],U=["hoverClosestGeo"],G=["resetGeo"]):I?(U=["hoverClosest3d"],G=["resetCameraDefault3d","resetCameraLastSave3d"]):B?(H=["zoomInMapbox","zoomOutMapbox"],U=["toggleHover"],G=["resetViewMapbox"]):D?U=["hoverClosestGl2d"]:R?U=["hoverClosestPie"]:Y?(U=["hoverClosestCartesian","hoverCompareCartesian"],G=["resetViewSankey"]):U=["toggleHover"],E&&(U=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(de){for(var he=0;he<de.length;he++)if(!w.traceIs(de[he],"noHover"))return!1;return!0}(d)||ne)&&(U=[]),!E&&!D||Q||(H=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==G[0]&&(G=["resetScale2d"])),I?ie=["zoom3d","pan3d","orbitRotation","tableRotation"]:(E||D)&&!Q||L?ie=["zoom2d","pan2d"]:B||C?ie=["pan2d"]:j&&(ie=["zoom2d"]),function(de){for(var he=!1,xe=0;xe<de.length&&!he;xe++){var ge=de[xe];ge._module&&ge._module.selectPoints&&(w.traceIs(ge,"scatter-like")?(m.hasMarkers(ge)||m.hasText(ge))&&(he=!0):w.traceIs(ge,"box-violin")&&"all"!==ge.boxpoints&&"all"!==ge.points||(he=!0))}return he}(d)&&ie.push("select2d","lasso2d");var q=[],ee=function(de){-1===q.indexOf(de)&&-1!==U.indexOf(de)&&q.push(de)};if(Array.isArray(M)){for(var te=[],se=0;se<M.length;se++){var ue=M[se];"string"==typeof ue?(ue=ue.toLowerCase(),-1!==n.indexOf(ue)?(h._has("mapbox")||h._has("cartesian"))&&ie.push(ue):"togglespikelines"===ue?ee("toggleSpikelines"):"togglehover"===ue?ee("toggleHover"):"hovercompare"===ue?ee("hoverCompareCartesian"):"hoverclosest"===ue?(ee("hoverClosestCartesian"),ee("hoverClosestGeo"),ee("hoverClosest3d"),ee("hoverClosestGl2d"),ee("hoverClosestPie")):"v1hovermode"===ue&&(ee("toggleHover"),ee("hoverClosestCartesian"),ee("hoverCompareCartesian"),ee("hoverClosestGeo"),ee("hoverClosest3d"),ee("hoverClosestGl2d"),ee("hoverClosestPie"))):te.push(ue)}M=te}return $(ie),$(H.concat(G)),$(q),function(de,he){if(he.length)if(Array.isArray(he[0]))for(var xe=0;xe<he.length;xe++)de.push(he[xe]);else de.push(he);return de}(X,M)}(t),i?i.update(t,c):p._modeBar=e(t,c)}else i&&(i.destroy(),delete p._modeBar)}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":952,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("fast-isnumeric"),w=x("../../lib"),y=x("../../fonts/ploticon"),e=x("../../version").version,r=new DOMParser;function n(t){this.container=t.container,this.element=document.createElement("div"),this.update(t.graphInfo,t.buttons),this.container.appendChild(this.element)}var a=n.prototype;a.update=function(t,p){this.graphInfo=t;var u=this.graphInfo._context,i=this.graphInfo._fullLayout,c="modebar-"+i._uid;this.element.setAttribute("id",c),this._uid=c,this.element.className="modebar","hover"===u.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===i.modebar.orientation&&(this.element.className+=" vertical",p=p.reverse());var f=i.modebar,l="hover"===u.displayModeBar?".js-plotly-plot .plotly:hover ":"";w.deleteRelatedStyleRule(c),w.addRelatedStyleRule(c,l+"#"+c+" .modebar-group","background-color: "+f.bgcolor),w.addRelatedStyleRule(c,"#"+c+" .modebar-btn .icon path","fill: "+f.color),w.addRelatedStyleRule(c,"#"+c+" .modebar-btn:hover .icon path","fill: "+f.activecolor),w.addRelatedStyleRule(c,"#"+c+" .modebar-btn.active .icon path","fill: "+f.activecolor);var h=!this.hasButtons(p),d=this.hasLogo!==u.displaylogo,o=this.locale!==u.locale;if(this.locale=u.locale,(h||d||o)&&(this.removeAllButtons(),this.updateButtons(p),u.watermark||u.displaylogo)){var _=this.getLogo();u.watermark&&(_.className=_.className+" watermark"),"v"===i.modebar.orientation?this.element.insertBefore(_,this.element.childNodes[0]):this.element.appendChild(_),this.hasLogo=!0}this.updateActiveButton()},a.updateButtons=function(t){var p=this;this.buttons=t,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(u){var i=p.createGroup();u.forEach(function(c){var f=c.name;if(!f)throw new Error("must provide button 'name' in button config");if(-1!==p.buttonsNames.indexOf(f))throw new Error("button name '"+f+"' is taken");p.buttonsNames.push(f);var l=p.createButton(c);p.buttonElements.push(l),i.appendChild(l)}),p.element.appendChild(i)})},a.createGroup=function(){var t=document.createElement("div");return t.className="modebar-group",t},a.createButton=function(t){var p=this,u=document.createElement("a");u.setAttribute("rel","tooltip"),u.className="modebar-btn";var i=t.title;void 0===i?i=t.name:"function"==typeof i&&(i=i(this.graphInfo)),(i||0===i)&&u.setAttribute("data-title",i),void 0!==t.attr&&u.setAttribute("data-attr",t.attr);var c=t.val;if(void 0!==c&&("function"==typeof c&&(c=c(this.graphInfo)),u.setAttribute("data-val",c)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");u.addEventListener("click",function(l){t.click(p.graphInfo,l),p.updateActiveButton(l.currentTarget)}),u.setAttribute("data-toggle",t.toggle||!1),t.toggle&&g.select(u).classed("active",!0);var f=t.icon;return u.appendChild("function"==typeof f?f():this.createIcon(f||y.question)),u.setAttribute("data-gravity",t.gravity||"n"),u},a.createIcon=function(t){var p,u=m(t.height)?Number(t.height):t.ascent-t.descent,i="http://www.w3.org/2000/svg";if(t.path){(p=document.createElementNS(i,"svg")).setAttribute("viewBox",[0,0,t.width,u].join(" ")),p.setAttribute("class","icon");var c=document.createElementNS(i,"path");c.setAttribute("d",t.path),t.transform?c.setAttribute("transform",t.transform):void 0!==t.ascent&&c.setAttribute("transform","matrix(1 0 0 -1 0 "+t.ascent+")"),p.appendChild(c)}return t.svg&&(p=r.parseFromString(t.svg,"application/xml").childNodes[0]),p.setAttribute("height","1em"),p.setAttribute("width","1em"),p},a.updateActiveButton=function(t){var p=this.graphInfo._fullLayout,u=void 0!==t?t.getAttribute("data-attr"):null;this.buttonElements.forEach(function(i){var c=i.getAttribute("data-val")||!0,f=i.getAttribute("data-attr"),l="true"===i.getAttribute("data-toggle"),h=g.select(i);if(l)f===u&&h.classed("active",!h.classed("active"));else{var d=null===f?f:w.nestedProperty(p,f).get();h.classed("active",d===c)}})},a.hasButtons=function(t){var p=this.buttons;if(!p||t.length!==p.length)return!1;for(var u=0;u<t.length;++u){if(t[u].length!==p[u].length)return!1;for(var i=0;i<t[u].length;i++)if(t[u][i].name!==p[u][i].name)return!1}return!0},a.getLogo=function(){var t=this.createGroup(),p=document.createElement("a");return p.href="https://plotly.com/",p.target="_blank",p.setAttribute("data-title",w._(this.graphInfo,"Produced with Plotly.js")+" (v"+e+")"),p.className="modebar-btn plotlyjsicon modebar-btn--logo",p.appendChild(this.createIcon(y.newplotlylogo)),t.appendChild(p),t},a.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},a.destroy=function(){w.removeElement(this.container.querySelector(".modebar")),w.deleteRelatedStyleRule(this._uid)},oe.exports=function(t,p){var u=t._fullLayout,i=new n({graphInfo:t,container:u._modebardiv.node(),buttons:p});return u._privateplot&&g.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}},{"../../fonts/ploticon":482,"../../lib":503,"../../version":1123,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(x,oe,ae){"use strict";var g=x("../../plots/font_attributes"),m=x("../color/attributes"),w=(0,x("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});oe.exports={visible:{valType:"boolean",editType:"plot"},buttons:w,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:g({editType:"plot"}),bgcolor:{valType:"color",dflt:m.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(x,oe,ae){"use strict";oe.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../color"),w=x("../../plot_api/plot_template"),y=x("../../plots/array_container_defaults"),e=x("./attributes"),r=x("./constants");function n(a,t,p,u){var i=u.calendar;function c(l,h){return g.coerce(a,t,e.buttons,l,h)}if(c("visible")){var f=c("step");"all"!==f&&(!i||"gregorian"===i||"month"!==f&&"year"!==f?c("stepmode"):t.stepmode="backward",c("count")),c("label")}}oe.exports=function(a,t,p,u,i){var c=a.rangeselector||{},f=w.newContainer(t,"rangeselector");function l(o,_){return g.coerce(c,f,e,o,_)}if(l("visible",y(c,f,{name:"buttons",handleItemDefaults:n,calendar:i}).length>0)){var h=function(o,_,s){for(var k=s.filter(function(I){return _[I].anchor===o._id}),M=0,A=0;A<k.length;A++){var E=_[k[A]].domain;E&&(M=Math.max(E[1],M))}return[o.domain[0],M+r.yPad]}(t,p,u);l("x",h[0]),l("y",h[1]),g.noneOrAll(a,t,["x","y"]),l("xanchor"),l("yanchor"),g.coerceFont(l,"font",p.font);var d=l("bgcolor");l("activecolor",m.contrast(d,r.lightAmount,r.darkAmount)),l("bordercolor"),l("borderwidth")}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../registry"),w=x("../../plots/plots"),y=x("../color"),e=x("../drawing"),r=x("../../lib"),n=r.strTranslate,a=x("../../lib/svg_text_utils"),t=x("../../plots/cartesian/axis_ids"),p=x("../../constants/alignment"),u=p.LINE_SPACING,i=p.FROM_TL,c=p.FROM_BR,f=x("./constants"),l=x("./get_update_object");function h(_){return _._id}function d(_,s,k){var A,E,M=r.ensureSingle(_,"rect","selector-rect",function(A){A.attr("shape-rendering","crispEdges")});M.attr({rx:f.rx,ry:f.ry}),M.call(y.stroke,s.bordercolor).call(y.fill,(A=s,E=k,E._isActive||E._isHovered?A.activecolor:A.bgcolor)).style("stroke-width",s.borderwidth+"px")}function o(_,s,k,M){var A,E;r.ensureSingle(_,"text","selector-text",function(A){A.attr("text-anchor","middle")}).call(e.font,s.font).text((A=k,E=M._fullLayout._meta,A.label?E?r.templateString(A.label,E):A.label:"all"===A.step?"all":A.count+A.step.charAt(0))).call(function(A){a.convertToTspans(A,M)})}oe.exports=function(_){var s=_._fullLayout._infolayer.selectAll(".rangeselector").data(function(k){for(var M=t.list(k,"x",!0),A=[],E=0;E<M.length;E++){var I=M[E];I.rangeselector&&I.rangeselector.visible&&A.push(I)}return A}(_),h);s.enter().append("g").classed("rangeselector",!0),s.exit().remove(),s.style({cursor:"pointer","pointer-events":"all"}),s.each(function(k){var M=g.select(this),A=k,E=A.rangeselector,I=M.selectAll("g.button").data(r.filterVisible(E.buttons));I.enter().append("g").classed("button",!0),I.exit().remove(),I.each(function(C){var R=g.select(this),O=l(A,C);C._isActive=function(D,L,B){if("all"===L.step)return!0===D.autorange;var j=Object.keys(B);return D.range[0]===B[j[0]]&&D.range[1]===B[j[1]]}(A,C,O),R.call(d,E,C),R.call(o,E,C,_),R.on("click",function(){_._dragged||m.call("_guiRelayout",_,O)}),R.on("mouseover",function(){C._isHovered=!0,R.call(d,E,C)}),R.on("mouseout",function(){C._isHovered=!1,R.call(d,E,C)})}),function(C,R,O,D,L){var B=0,j=0,W=O.borderwidth;R.each(function(){var re=g.select(this).select(".selector-text"),U=Math.max(O.font.size*u*a.lineCount(re),16)+3;j=Math.max(j,U)}),R.each(function(){var re=g.select(this),H=re.select(".selector-rect"),U=re.select(".selector-text"),G=U.node()&&e.bBox(U.node()).width,ie=O.font.size*u,q=a.lineCount(U),ee=Math.max(G+10,f.minButtonWidth);re.attr("transform",n(W+B,W)),H.attr({x:0,y:0,width:ee,height:j}),a.positionText(U,ee/2,j/2-(q-1)*ie/2+3),B+=ee+5});var Y=C._fullLayout._size,Q=Y.l+Y.w*O.x,ne=Y.t+Y.h*(1-O.y),X="left";r.isRightAnchor(O)&&(Q-=B,X="right"),r.isCenterAnchor(O)&&(Q-=B/2,X="center");var $="top";r.isBottomAnchor(O)&&(ne-=j,$="bottom"),r.isMiddleAnchor(O)&&(ne-=j/2,$="middle"),B=Math.ceil(B),j=Math.ceil(j),Q=Math.round(Q),ne=Math.round(ne),w.autoMargin(C,D+"-range-selector",{x:O.x,y:O.y,l:B*i[X],r:B*c[X],b:j*c[$],t:j*i[$]}),L.attr("transform",n(Q,ne))}(_,I,E,A._name,M)})}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(x,oe,ae){"use strict";var g=x("d3-time"),m=x("../../lib").titleCase;oe.exports=function(w,y){var e=w._name,r={};if("all"===y.step)r[e+".autorange"]=!0;else{var n=function(a,t){var p,u=a.range,i=new Date(a.r2l(u[1])),f=g["utc"+m(t.step)],l=t.count;switch(t.stepmode){case"backward":p=a.l2r(+f.offset(i,-l));break;case"todate":var h=f.offset(i,-l);p=a.l2r(+f.ceil(h))}return[p,u[1]]}(w,y);r[e+".range[0]"]=n[0],r[e+".range[1]"]=n[1]}return r}},{"../../lib":503,"d3-time":122}],437:[function(x,oe,ae){"use strict";oe.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:x("./attributes")}}},layoutAttributes:x("./attributes"),handleDefaults:x("./defaults"),draw:x("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(x,oe,ae){"use strict";var g=x("../color/attributes");oe.exports={bgcolor:{valType:"color",dflt:g.background,editType:"plot"},bordercolor:{valType:"color",dflt:g.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axis_ids").list,m=x("../../plots/cartesian/autorange").getAutoRange,w=x("./constants");oe.exports=function(y){for(var e=g(y,"x",!0),r=0;r<e.length;r++){var n=e[r],a=n[w.name];a&&a.visible&&a.autorange&&(a._input.autorange=!0,a._input.range=a.range=m(y,n))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(x,oe,ae){"use strict";oe.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plot_api/plot_template"),w=x("../../plots/cartesian/axis_ids"),y=x("./attributes"),e=x("./oppaxis_attributes");oe.exports=function(r,n,a){var t=r[a],p=n[a];if(t.rangeslider||n._requestRangeslider[p._id]){g.isPlainObject(t.rangeslider)||(t.rangeslider={});var u,i,c=t.rangeslider,f=m.newContainer(p,"rangeslider");if(M("visible")){M("bgcolor",n.plot_bgcolor),M("bordercolor"),M("borderwidth"),M("thickness"),M("autorange",!p.isValidRange(c.range)),M("range");var l=n._subplots;if(l)for(var h=l.cartesian.filter(function(E){return E.substr(0,E.indexOf("y"))===w.name2id(a)}).map(function(E){return E.substr(E.indexOf("y"),E.length)}),d=g.simpleMap(h,w.id2name),o=0;o<d.length;o++){var _=d[o];u=c[_]||{},i=m.newContainer(f,_,"yaxis");var s,k=n[_];u.range&&k.isValidRange(u.range)&&(s="fixed"),"match"!==A("rangemode",s)&&A("range",k.range.slice())}f._input=c}}function M(E,I){return g.coerce(c,f,y,E,I)}function A(E,I){return g.coerce(u,i,e,E,I)}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../registry"),w=x("../../plots/plots"),y=x("../../lib"),e=y.strTranslate,r=x("../drawing"),n=x("../color"),a=x("../titles"),t=x("../../plots/cartesian"),p=x("../../plots/cartesian/axis_ids"),u=x("../dragelement"),i=x("../../lib/setcursor"),c=x("./constants");function f(s,k,M,A){var E=y.ensureSingle(s,"rect",c.bgClassName,function(O){O.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),I=A.borderwidth%2==0?A.borderwidth:A.borderwidth-1,C=-A._offsetShift,R=r.crispRound(k,A.borderwidth);E.attr({width:A._width+I,height:A._height+I,transform:e(C,C),fill:A.bgcolor,stroke:A.bordercolor,"stroke-width":R})}function l(s,k,M,A){y.ensureSingleById(k._fullLayout._topdefs,"clipPath",A._clipId,function(I){I.append("rect").attr({x:0,y:0})}).select("rect").attr({width:A._width,height:A._height})}function h(s,k,M,A){var E,I=k.calcdata,C=s.selectAll("g."+c.rangePlotClassName).data(M._subplotsWith,y.identity);C.enter().append("g").attr("class",function(R){return c.rangePlotClassName+" "+R}).call(r.setClipUrl,A._clipId,k),C.order(),C.exit().remove(),C.each(function(R,O){var D=g.select(this),L=0===O,B=p.getFromId(k,R,"y"),j=B._name,W=A[j],Y={data:[],layout:{xaxis:{type:M.type,domain:[0,1],range:A.range.slice(),calendar:M.calendar},width:A._width,height:A._height,margin:{t:0,b:0,l:0,r:0}},_context:k._context};M.rangebreaks&&(Y.layout.xaxis.rangebreaks=M.rangebreaks),Y.layout[j]={type:B.type,domain:[0,1],range:"match"!==W.rangemode?W.range.slice():B.range.slice(),calendar:B.calendar},B.rangebreaks&&(Y.layout[j].rangebreaks=B.rangebreaks),w.supplyDefaults(Y);var Q=Y._fullLayout.xaxis,ne=Y._fullLayout[j];Q.clearCalc(),Q.setScale(),ne.clearCalc(),ne.setScale();var X={id:R,plotgroup:D,xaxis:Q,yaxis:ne,isRangePlot:!0};L?E=X:(X.mainplot="xy",X.mainplotinfo=E),t.rangePlot(k,X,function($,re){for(var H=[],U=0;U<$.length;U++){var G=$[U],ie=G[0].trace;ie.xaxis+ie.yaxis===re&&H.push(G)}return H}(I,R))})}function d(s,k,M,A,E){y.ensureSingle(s,"rect",c.maskMinClassName,function(I){I.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",A._height).call(n.fill,c.maskColor),y.ensureSingle(s,"rect",c.maskMaxClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",A._height).call(n.fill,c.maskColor),"match"!==E.rangemode&&(y.ensureSingle(s,"rect",c.maskMinOppAxisClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",A._width).call(n.fill,c.maskOppAxisColor),y.ensureSingle(s,"rect",c.maskMaxOppAxisClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",A._width).style("border-top",c.maskOppBorder).call(n.fill,c.maskOppAxisColor))}function o(s,k,M,A){k._context.staticPlot||y.ensureSingle(s,"rect",c.slideBoxClassName,function(E){E.attr({y:0,cursor:c.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:A._height,fill:c.slideBoxFill})}function _(s,k,M,A){var E=y.ensureSingle(s,"g",c.grabberMinClassName),I=y.ensureSingle(s,"g",c.grabberMaxClassName),C={x:0,width:c.handleWidth,rx:c.handleRadius,fill:n.background,stroke:n.defaultLine,"stroke-width":c.handleStrokeWidth,"shape-rendering":"crispEdges"},R={y:Math.round(A._height/4),height:Math.round(A._height/2)};y.ensureSingle(E,"rect",c.handleMinClassName,function(D){D.attr(C)}).attr(R),y.ensureSingle(I,"rect",c.handleMaxClassName,function(D){D.attr(C)}).attr(R);var O={width:c.grabAreaWidth,x:0,y:0,fill:c.grabAreaFill,cursor:k._context.staticPlot?void 0:c.grabAreaCursor};y.ensureSingle(E,"rect",c.grabAreaMinClassName,function(D){D.attr(O)}).attr("height",A._height),y.ensureSingle(I,"rect",c.grabAreaMaxClassName,function(D){D.attr(O)}).attr("height",A._height)}oe.exports=function(s){for(var k=s._fullLayout,M=k._rangeSliderData,A=0;A<M.length;A++){var E=M[A][c.name];E._clipId=E._id+"-"+k._uid}var I=k._infolayer.selectAll("g."+c.containerClassName).data(M,function(C){return C._name});I.exit().each(function(C){k._topdefs.select("#"+C[c.name]._clipId).remove()}).remove(),0!==M.length&&(I.enter().append("g").classed(c.containerClassName,!0).attr("pointer-events","all"),I.each(function(C){var R=g.select(this),O=C[c.name],D=k[p.id2name(C.anchor)],L=O[p.id2name(C.anchor)];if(O.range){var B,j=y.simpleMap(O.range,C.r2l),W=y.simpleMap(C.range,C.r2l);B=W[0]<W[1]?[Math.min(j[0],W[0]),Math.max(j[1],W[1])]:[Math.max(j[0],W[0]),Math.min(j[1],W[1])],O.range=O._input.range=y.simpleMap(B,C.l2r)}C.cleanRange("rangeslider.range");var Y=k._size,Q=C.domain;O._width=Y.w*(Q[1]-Q[0]);var ne=Math.round(Y.l+Y.w*Q[0]),X=Math.round(Y.t+Y.h*(1-C._counterDomainMin)+("bottom"===C.side?C._depth:0)+O._offsetShift+c.extraPad);R.attr("transform",e(ne,X)),O._rl=y.simpleMap(O.range,C.r2l);var $=O._rl[0],re=O._rl[1],H=re-$;if(O.p2d=function(de){return de/O._width*H+$},O.d2p=function(de){return(de-$)/H*O._width},C.rangebreaks){var U=C.locateBreaks($,re);if(U.length){var G,ie,q=0;for(G=0;G<U.length;G++)q+=(ie=U[G]).max-ie.min;var ee=O._width/(re-$-q),te=[-ee*$];for(G=0;G<U.length;G++)te.push(te[te.length-1]-ee*((ie=U[G]).max-ie.min));for(O.d2p=function(de){for(var he=te[0],xe=0;xe<U.length;xe++){var ge=U[xe];if(de>=ge.max)he=te[xe+1];else if(de<ge.min)break}return he+ee*de},G=0;G<U.length;G++)(ie=U[G]).pmin=O.d2p(ie.min),ie.pmax=O.d2p(ie.max);O.p2d=function(de){for(var he=te[0],xe=0;xe<U.length;xe++){var ge=U[xe];if(de>=ge.pmax)he=te[xe+1];else if(de<ge.pmin)break}return(de-he)/ee}}}if("match"!==L.rangemode){var se=D.r2l(L.range[0]),ue=D.r2l(L.range[1])-se;O.d2pOppAxis=function(de){return(de-se)/ue*O._height}}R.call(f,s,C,O).call(l,s,C,O).call(h,s,C,O).call(d,s,C,O,L).call(o,s,C,O).call(_,s,C,O),function(de,he,xe,ge){if(!he._context.staticPlot){var _e=de.select("rect."+c.slideBoxClassName).node(),Ce=de.select("rect."+c.grabAreaMinClassName).node(),Le=de.select("rect."+c.grabAreaMaxClassName).node();de.on("mousedown",Ie),de.on("touchstart",Ie)}function Ie(){var Be=g.event,ve=Be.target,Te=Be.clientX||Be.touches[0].clientX,Pe=Te-de.node().getBoundingClientRect().left,De=ge.d2p(xe._rl[0]),Fe=ge.d2p(xe._rl[1]),Ue=u.coverSlip();function He(st){var Ve,$e,Qe,tt=+(st.clientX||st.touches[0].clientX)-Te;switch(ve){case _e:Qe="ew-resize",Ve=De+tt,$e=Fe+tt;break;case Ce:Qe="col-resize",Ve=De+tt,$e=Fe;break;case Le:Qe="col-resize",Ve=De,$e=Fe+tt;break;default:Qe="ew-resize",Ve=Pe,$e=Pe+tt}if($e<Ve){var ut=$e;$e=Ve,Ve=ut}ge._pixelMin=Ve,ge._pixelMax=$e,i(g.select(Ue),Qe),function(xt,kt,Bt,Rt){function ft(Jt){return Bt.l2r(y.constrain(Jt,Rt._rl[0],Rt._rl[1]))}var lt=ft(Rt.p2d(Rt._pixelMin)),Ft=ft(Rt.p2d(Rt._pixelMax));window.requestAnimationFrame(function(){m.call("_guiRelayout",kt,Bt._name+".range",[lt,Ft])})}(0,he,xe,ge)}function Ke(){Ue.removeEventListener("mousemove",He),Ue.removeEventListener("mouseup",Ke),this.removeEventListener("touchmove",He),this.removeEventListener("touchend",Ke),y.removeElement(Ue)}this.addEventListener("touchmove",He),this.addEventListener("touchend",Ke),Ue.addEventListener("mousemove",He),Ue.addEventListener("mouseup",Ke)}}(R,s,C,O),function(de,he,xe,ge,_e,Ce){var Le=c.handleWidth/2;function Ie(Ke){return y.constrain(Ke,0,ge._width)}function Be(Ke){return y.constrain(Ke,0,ge._height)}function ve(Ke){return y.constrain(Ke,-Le,ge._width+Le)}var Te=Ie(ge.d2p(xe._rl[0])),Pe=Ie(ge.d2p(xe._rl[1]));if(de.select("rect."+c.slideBoxClassName).attr("x",Te).attr("width",Pe-Te),de.select("rect."+c.maskMinClassName).attr("width",Te),de.select("rect."+c.maskMaxClassName).attr("x",Pe).attr("width",ge._width-Pe),"match"!==Ce.rangemode){var De=ge._height-Be(ge.d2pOppAxis(_e._rl[1])),Fe=ge._height-Be(ge.d2pOppAxis(_e._rl[0]));de.select("rect."+c.maskMinOppAxisClassName).attr("x",Te).attr("height",De).attr("width",Pe-Te),de.select("rect."+c.maskMaxOppAxisClassName).attr("x",Te).attr("y",Fe).attr("height",ge._height-Fe).attr("width",Pe-Te),de.select("rect."+c.slideBoxClassName).attr("y",De).attr("height",Fe-De)}var Ue=Math.round(ve(Te-Le))-.5,He=Math.round(ve(Pe-Le))+.5;de.select("g."+c.grabberMinClassName).attr("transform",e(Ue,.5)),de.select("g."+c.grabberMaxClassName).attr("transform",e(He,.5))}(R,0,C,O,D,L),"bottom"===C.side&&a.draw(s,C._id+"title",{propContainer:C,propName:C._name+".title",placeholder:k._dfltTitle.x,attributes:{x:C._offset+C._length/2,y:X+O._height+O._offsetShift+10+1.5*C.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axis_ids"),m=x("../../lib/svg_text_utils"),w=x("./constants"),y=x("../../constants/alignment").LINE_SPACING,e=w.name;function r(n){var a=n&&n[e];return a&&a.visible}ae.isVisible=r,ae.makeData=function(n){var a=g.list({_fullLayout:n},"x",!0),t=n.margin,p=[];if(!n._has("gl2d"))for(var u=0;u<a.length;u++){var i=a[u];if(r(i)){p.push(i);var c=i[e];c._id=e+i._id,c._height=(n.height-t.b-t.t)*c.thickness,c._offsetShift=Math.floor(c.borderwidth/2)}}n._rangeSliderData=p},ae.autoMarginOpts=function(n,a){var t=n._fullLayout,p=a[e],u=a._id.charAt(0),i=0,c=0;return"bottom"===a.side&&(i=a._depth,a.title.text!==t._dfltTitle[u]&&(c=1.5*a.title.font.size+10+p._offsetShift,c+=(a.title.text.match(m.BR_TAG_ALL)||[]).length*a.title.font.size*y)),{x:0,y:a._counterDomainMin,l:0,r:0,t:0,b:p._height+i+Math.max(t.margin.b,c),pad:w.extraPad+2*p._offsetShift}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./attributes"),w=x("./oppaxis_attributes"),y=x("./helpers");oe.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:g.extendFlat({},m,{yaxis:w})}}},layoutAttributes:x("./attributes"),handleDefaults:x("./defaults"),calcAutorange:x("./calc_autorange"),draw:x("./draw"),isVisible:y.isVisible,makeData:y.makeData,autoMarginOpts:y.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(x,oe,ae){"use strict";oe.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(x,oe,ae){"use strict";var g=x("../annotations/attributes"),m=x("../../traces/scatter/attributes").line,w=x("../drawing/attributes").dash,y=x("../../lib/extend").extendFlat,e=x("../../plot_api/plot_template").templatedArray;x("../../constants/axis_placeable_objects"),oe.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:y({},g.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:y({},g.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:y({},m.color,{editType:"arraydraw"}),width:y({},m.width,{editType:"calc+arraydraw"}),dash:y({},w,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":927,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/cartesian/axes"),w=x("./constants"),y=x("./helpers");function e(t){return n(t.line.width,t.xsizemode,t.x0,t.x1,t.path,!1)}function r(t){return n(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function n(t,p,u,i,c,f){var l=t/2,h=f;if("pixel"===p){var d=c?y.extractPathCoords(c,f?w.paramIsY:w.paramIsX):[u,i],o=g.aggNums(Math.max,null,d),_=g.aggNums(Math.min,null,d),s=_<0?Math.abs(_)+l:l,k=o>0?o+l:l;return{ppad:l,ppadplus:h?s:k,ppadminus:h?k:s}}return{ppad:l}}function a(t,p,u,i,c){var f="category"===t.type||"multicategory"===t.type?t.r2c:t.d2c;if(void 0!==p)return[f(p),f(u)];if(i){var l,h,d,o,_=1/0,s=-1/0,k=i.match(w.segmentRE);for("date"===t.type&&(f=y.decodeDate(f)),l=0;l<k.length;l++)void 0!==(h=c[k[l].charAt(0)].drawn)&&(!(d=k[l].substr(1).match(w.paramRE))||d.length<h||((o=f(d[h]))<_&&(_=o),o>s&&(s=o)));return s>=_?[_,s]:void 0}}oe.exports=function(t){var u=g.filterVisible(t._fullLayout.shapes);if(u.length&&t._fullData.length)for(var i=0;i<u.length;i++){var c,f,l=u[i];l._extremes={};var h=m.getRefType(l.xref),d=m.getRefType(l.yref);if("paper"!==l.xref&&"domain"!==h){var o="pixel"===l.xsizemode?l.xanchor:l.x0,_="pixel"===l.xsizemode?l.xanchor:l.x1;(f=a(c=m.getFromId(t,l.xref),o,_,l.path,w.paramIsX))&&(l._extremes[c._id]=m.findExtremes(c,f,e(l)))}if("paper"!==l.yref&&"domain"!==d){var s="pixel"===l.ysizemode?l.yanchor:l.y0,k="pixel"===l.ysizemode?l.yanchor:l.y1;(f=a(c=m.getFromId(t,l.yref),s,k,l.path,w.paramIsY))&&(l._extremes[c._id]=m.findExtremes(c,f,r(l)))}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(x,oe,ae){"use strict";oe.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/cartesian/axes"),w=x("../../plots/array_container_defaults"),y=x("./attributes"),e=x("./helpers");function r(n,a,t){function p(L,B){return g.coerce(n,a,y,L,B)}if(p("visible")){var u=p("path"),i=p("type",u?"path":"rect");"path"!==a.type&&delete a.path,p("editable"),p("layer"),p("opacity"),p("fillcolor"),p("fillrule"),p("line.width")&&(p("line.color"),p("line.dash"));for(var c=p("xsizemode"),f=p("ysizemode"),l=["x","y"],h=0;h<2;h++){var d,o,_,s=l[h],k=s+"anchor",M="x"===s?c:f,A={_fullLayout:t},E=m.coerceRef(n,a,A,s,void 0,"paper");if("range"===m.getRefType(E)?((d=m.getFromId(A,E))._shapeIndices.push(a._index),_=e.rangeToShapePosition(d),o=e.shapePositionToRange(d)):o=_=g.identity,"path"!==i){var I=s+"0",C=s+"1",R=n[I],O=n[C];n[I]=o(n[I],!0),n[C]=o(n[C],!0),"pixel"===M?(p(I,0),p(C,10)):(m.coercePosition(a,A,p,E,I,.25),m.coercePosition(a,A,p,E,C,.75)),a[I]=_(a[I]),a[C]=_(a[C]),n[I]=R,n[C]=O}if("pixel"===M){var D=n[k];n[k]=o(n[k],!0),m.coercePosition(a,A,p,E,k,.25),a[k]=_(a[k]),n[k]=D}}"path"===i?p("path"):g.noneOrAll(n,a,["x0","x1","y0","y1"])}}oe.exports=function(n,a){w(n,a,{name:"shapes",handleItemDefaults:r})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../lib"),w=x("../../plots/cartesian/axes"),y=x("./draw_newshape/helpers").readPaths,e=x("./draw_newshape/display_outlines"),r=x("../../plots/cartesian/handle_outline").clearOutlineControllers,n=x("../color"),a=x("../drawing"),t=x("../../plot_api/plot_template").arrayEditor,p=x("../dragelement"),u=x("../../lib/setcursor"),i=x("./constants"),c=x("./helpers");function f(M){var A=M._fullLayout;for(var E in A._shapeUpperLayer.selectAll("path").remove(),A._shapeLowerLayer.selectAll("path").remove(),A._plots){var I=A._plots[E].shapelayer;I&&I.selectAll("path").remove()}for(var C=0;C<A.shapes.length;C++)A.shapes[C].visible&&d(M,C)}function l(M){return!!M._fullLayout._drawing}function h(M){return!M._context.edits.shapePosition}function d(M,A){M._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+A+'"]').remove();var E=c.makeOptionsAndPlotinfo(M,A),I=E.options,C=E.plotinfo;I._input&&!1!==I.visible&&function R(O){var D=_(M,I),L={"data-index":A,"fill-rule":I.fillrule,d:D},B=I.opacity,j=I.fillcolor,W=I.line.width?I.line.color:"rgba(0,0,0,0)",Y=I.line.width,Q=I.line.dash;Y||!0!==I.editable||(Y=5,Q="solid");var ne="Z"!==D[D.length-1],X=h(M)&&I.editable&&M._fullLayout._activeShapeIndex===A;X&&(j=ne?"rgba(0,0,0,0)":M._fullLayout.activeshape.fillcolor,B=M._fullLayout.activeshape.opacity);var $,re=O.append("path").attr(L).style("opacity",B).call(n.stroke,W).call(n.fill,j).call(a.dashLine,Q,Y);if(o(re,M,I),(X||M._context.edits.shapePosition)&&($=t(M.layout,"shapes",I)),X){re.style({cursor:"move"});var H={element:re.node(),plotinfo:C,gd:M,editHelpers:$,isActiveShape:!0},U=y(D,M);e(U,re,H)}else M._context.edits.shapePosition?function(G,ie,q,ee,te,se){var ue,de,he,xe,ge,_e,Ce,Le,Ie,Be,ve,Te,Pe,De,Fe,Ue,He="pixel"===q.xsizemode,Ke="pixel"===q.ysizemode,st="line"===q.type,Ve="path"===q.type,$e=se.modifyItem,Qe=w.getFromId(G,q.xref),tt=w.getRefType(q.xref),ut=w.getFromId(G,q.yref),xt=w.getRefType(q.yref),kt=c.getDataToPixel(G,Qe,!1,tt),Bt=c.getDataToPixel(G,ut,!0,xt),Rt=c.getPixelToData(G,Qe,!1,tt),ft=c.getPixelToData(G,ut,!0,xt),lt=st?function(){var nn=Math.max(q.line.width,10),Me=te.append("g").attr("data-index",ee);Me.append("path").attr("d",ie.attr("d")).style({cursor:"move","stroke-width":nn,"stroke-opacity":"0"});var Ee={"fill-opacity":"0"},Se=Math.max(nn/2,10);return Me.append("circle").attr({"data-line-point":"start-point",cx:He?kt(q.xanchor)+q.x0:kt(q.x0),cy:Ke?Bt(q.yanchor)-q.y0:Bt(q.y0),r:Se}).style(Ee).classed("cursor-grab",!0),Me.append("circle").attr({"data-line-point":"end-point",cx:He?kt(q.xanchor)+q.x1:kt(q.x1),cy:Ke?Bt(q.yanchor)-q.y1:Bt(q.y1),r:Se}).style(Ee).classed("cursor-grab",!0),Me}():ie,Ft={element:lt.node(),gd:G,prepFn:function(nn){var Me,Ee,Se,je,qe,Je,at,it;l(G)||(He&&(ge=kt(q.xanchor)),Ke&&(_e=Bt(q.yanchor)),"path"===q.type?Fe=q.path:(ue=He?q.x0:kt(q.x0),de=Ke?q.y0:Bt(q.y0),he=He?q.x1:kt(q.x1),xe=Ke?q.y1:Bt(q.y1)),ue<he?(Ie=ue,Pe="x0",Be=he,De="x1"):(Ie=he,Pe="x1",Be=ue,De="x0"),!Ke&&de<xe||Ke&&de>xe?(Ce=de,ve="y0",Le=xe,Te="y1"):(Ce=xe,ve="y1",Le=de,Te="y0"),Jt(nn),cn(te,q),Me=ie,qe=(Ee=q).yref,Je=w.getFromId(Se=G,je=Ee.xref),at=w.getFromId(Se,qe),it="","paper"===je||Je.autorange||(it+=je),"paper"===qe||at.autorange||(it+=qe),a.setClipUrl(Me,it?"clip"+Se._fullLayout._uid+it:null,Se),Ft.moveFn="move"===Ue?ln:dn,Ft.altKey=nn.altKey)},doneFn:function(){l(G)||(u(ie),Tn(te),o(ie,G,q),g.call("_guiRelayout",G,se.getUpdateObj()))},clickFn:function(){l(G)||Tn(te)}};function Jt(nn){if(l(G))Ue=null;else if(st)Ue="path"===nn.target.tagName?"move":"start-point"===nn.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Me=Ft.element.getBoundingClientRect(),Ee=Me.right-Me.left,Se=Me.bottom-Me.top,Je=!Ve&&Ee>10&&Se>10&&!nn.shiftKey?p.getCursor((nn.clientX-Me.left)/Ee,1-(nn.clientY-Me.top)/Se):"move";u(ie,Je),Ue=Je.split("-")[0]}}function ln(nn,Me){if("path"===q.type){var Ee=function(qe){return qe},Se=Ee,je=Ee;He?$e("xanchor",q.xanchor=Rt(ge+nn)):(Se=function(qe){return Rt(kt(qe)+nn)},Qe&&"date"===Qe.type&&(Se=c.encodeDate(Se))),Ke?$e("yanchor",q.yanchor=ft(_e+Me)):(je=function(qe){return ft(Bt(qe)+Me)},ut&&"date"===ut.type&&(je=c.encodeDate(je))),$e("path",q.path=s(Fe,Se,je))}else He?$e("xanchor",q.xanchor=Rt(ge+nn)):($e("x0",q.x0=Rt(ue+nn)),$e("x1",q.x1=Rt(he+nn))),Ke?$e("yanchor",q.yanchor=ft(_e+Me)):($e("y0",q.y0=ft(de+Me)),$e("y1",q.y1=ft(xe+Me)));ie.attr("d",_(G,q)),cn(te,q)}function dn(nn,Me){if(Ve){var Ee=function(Ne){return Ne},Se=Ee,je=Ee;He?$e("xanchor",q.xanchor=Rt(ge+nn)):(Se=function(Ne){return Rt(kt(Ne)+nn)},Qe&&"date"===Qe.type&&(Se=c.encodeDate(Se))),Ke?$e("yanchor",q.yanchor=ft(_e+Me)):(je=function(Ne){return ft(Bt(Ne)+Me)},ut&&"date"===ut.type&&(je=c.encodeDate(je))),$e("path",q.path=s(Fe,Se,je))}else if(st){if("resize-over-start-point"===Ue){var qe=ue+nn,Je=Ke?de-Me:de+Me;$e("x0",q.x0=He?qe:Rt(qe)),$e("y0",q.y0=Ke?Je:ft(Je))}else if("resize-over-end-point"===Ue){var at=he+nn,it=Ke?xe-Me:xe+Me;$e("x1",q.x1=He?at:Rt(at)),$e("y1",q.y1=Ke?it:ft(it))}}else{var yt=function(Ne){return-1!==Ue.indexOf(Ne)},vt=yt("n"),Ut=yt("s"),Wt=yt("w"),gt=yt("e"),At=vt?Ce+Me:Ce,Zt=Ut?Le+Me:Le,Et=Wt?Ie+nn:Ie,Ct=gt?Be+nn:Be;Ke&&(vt&&(At=Ce-Me),Ut&&(Zt=Le-Me)),(!Ke&&Zt-At>10||Ke&&At-Zt>10)&&($e(ve,q[ve]=Ke?At:ft(At)),$e(Te,q[Te]=Ke?Zt:ft(Zt))),Ct-Et>10&&($e(Pe,q[Pe]=He?Et:Rt(Et)),$e(De,q[De]=He?Ct:Rt(Ct)))}ie.attr("d",_(G,q)),cn(te,q)}function cn(nn,Me){(He||Ke)&&function(){var Ee="path"!==Me.type,Se=nn.selectAll(".visual-cue").data([0]);Se.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var je=kt(He?Me.xanchor:m.midRange(Ee?[Me.x0,Me.x1]:c.extractPathCoords(Me.path,i.paramIsX))),qe=Bt(Ke?Me.yanchor:m.midRange(Ee?[Me.y0,Me.y1]:c.extractPathCoords(Me.path,i.paramIsY)));je=c.roundPositionForSharpStrokeRendering(je,1),qe=c.roundPositionForSharpStrokeRendering(qe,1),Se.attr("d",He&&Ke?"M"+(je-1-1)+","+(qe-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":He?"M"+(je-1-1)+","+(qe-9-1)+"v18 h2 v-18 Z":"M"+(je-9-1)+","+(qe-1-1)+"h18 v2 h-18 Z")}()}function Tn(nn){nn.selectAll(".visual-cue").remove()}p.init(Ft),lt.node().onmousemove=Jt}(M,re,I,A,O,$):!0===I.editable&&re.style("pointer-events",ne||n.opacity(j)*B<=.5?"stroke":"all");re.node().addEventListener("click",function(){return function(G,ie){if(h(G)){var q=+ie.node().getAttribute("data-index");if(q>=0){if(q===G._fullLayout._activeShapeIndex)return void k(G);G._fullLayout._activeShapeIndex=q,G._fullLayout._deactivateShape=k,f(G)}}}(M,re)})}("below"!==I.layer?M._fullLayout._shapeUpperLayer:"paper"===I.xref||"paper"===I.yref?M._fullLayout._shapeLowerLayer:C._hadPlotinfo?(C.mainplotinfo||C).shapelayer:M._fullLayout._shapeLowerLayer)}function o(M,A,E){var I=(E.xref+E.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");a.setClipUrl(M,I?"clip"+A._fullLayout._uid+I:null,A)}function _(M,A){var E,I,C,R,O,D,L,B,te,se,ue,he,xe,ge,_e,j=A.type,W=w.getRefType(A.xref),Y=w.getRefType(A.yref),Q=w.getFromId(M,A.xref),ne=w.getFromId(M,A.yref),X=M._fullLayout._size;if(Q?"domain"===W?I=function(te){return Q._offset+Q._length*te}:(E=c.shapePositionToRange(Q),I=function(te){return Q._offset+Q.r2p(E(te,!0))}):I=function(te){return X.l+X.w*te},ne?"domain"===Y?R=function(te){return ne._offset+ne._length*(1-te)}:(C=c.shapePositionToRange(ne),R=function(te){return ne._offset+ne.r2p(C(te,!0))}):R=function(te){return X.t+X.h*(1-te)},"path"===j)return Q&&"date"===Q.type&&(I=c.decodeDate(I)),ne&&"date"===ne.type&&(R=c.decodeDate(R)),se=I,ue=R,he=(te=A).xsizemode,xe=te.ysizemode,ge=te.xanchor,_e=te.yanchor,te.path.replace(i.segmentRE,function(Ce){var Le=0,Ie=Ce.charAt(0),Be=i.paramIsX[Ie],ve=i.paramIsY[Ie],Te=i.numParams[Ie],Pe=Ce.substr(1).replace(i.paramRE,function(De){return Be[Le]?De="pixel"===he?se(ge)+Number(De):se(De):ve[Le]&&(De="pixel"===xe?ue(_e)-Number(De):ue(De)),++Le>Te&&(De="X"),De});return Le>Te&&(Pe=Pe.replace(/[\s,]*X.*/,""),m.log("Ignoring extra params in segment "+Ce)),Ie+Pe});if("pixel"===A.xsizemode){var $=I(A.xanchor);O=$+A.x0,D=$+A.x1}else O=I(A.x0),D=I(A.x1);if("pixel"===A.ysizemode){var re=R(A.yanchor);L=re-A.y0,B=re-A.y1}else L=R(A.y0),B=R(A.y1);if("line"===j)return"M"+O+","+L+"L"+D+","+B;if("rect"===j)return"M"+O+","+L+"H"+D+"V"+B+"H"+O+"Z";var H=(O+D)/2,U=(L+B)/2,G=Math.abs(H-O),ie=Math.abs(U-L),q="A"+G+","+ie,ee=H+G+","+U;return"M"+ee+q+" 0 1,1 "+H+","+(U-ie)+q+" 0 0,1 "+ee+"Z"}function s(M,A,E){return M.replace(i.segmentRE,function(I){var C=0,R=I.charAt(0),O=i.paramIsX[R],D=i.paramIsY[R],L=i.numParams[R];return R+I.substr(1).replace(i.paramRE,function(B){return C>=L||(O[C]?B=A(B):D[C]&&(B=E(B)),C++),B})})}function k(M){h(M)&&M._fullLayout._activeShapeIndex>=0&&(r(M),delete M._fullLayout._activeShapeIndex,f(M))}oe.exports={draw:f,drawOne:d,eraseActiveShape:function(M){if(h(M)){r(M);var A=M._fullLayout._activeShapeIndex,E=(M.layout||{}).shapes||[];if(A<E.length){for(var I=[],C=0;C<E.length;C++)C!==A&&I.push(E[C]);delete M._fullLayout._activeShapeIndex,g.call("_guiRelayout",M,{shapes:I})}}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(x,oe,ae){"use strict";var g=x("../../drawing/attributes").dash,m=x("../../../lib/extend").extendFlat;oe.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:m({},g,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(x,oe,ae){"use strict";oe.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(x,oe,ae){"use strict";var g=x("../../color");oe.exports=function(m,w,y){y("newshape.drawdirection"),y("newshape.layer"),y("newshape.fillcolor"),y("newshape.fillrule"),y("newshape.opacity"),y("newshape.line.width")&&(y("newshape.line.color",g.contrast((m||{}).plot_bgcolor||"#FFF")),y("newshape.line.dash")),y("activeshape.fillcolor"),y("activeshape.opacity")}},{"../../color":366}],454:[function(x,oe,ae){"use strict";var g=x("../../dragelement"),m=x("../../dragelement/helpers").drawMode,w=x("../../../registry"),y=x("./constants"),e=y.i000,r=y.i090,n=y.i180,a=y.i270,t=x("../../../plots/cartesian/handle_outline").clearOutlineControllers,p=x("./helpers"),u=p.pointsShapeRectangle,i=p.pointsShapeEllipse,c=p.writePaths,f=x("./newshapes");oe.exports=function l(h,d,o,_){_||(_=0);var s=o.gd;function k(){l(h,d,o,_++),i(h[0])&&M({redrawing:!0})}function M($){o.isActiveShape=!1;var re=f(d,o);Object.keys(re).length&&w.call(($||{}).redrawing?"relayout":"_guiRelayout",s,re)}var A,E,I,C,R,O=o.isActiveShape,D=s._fullLayout._zoomlayer;function B($){I=+$.srcElement.getAttribute("data-i"),C=+$.srcElement.getAttribute("data-j"),A[I][C].moveFn=j}function j($,re){if(h.length){var H=R[I][C][1],U=R[I][C][2],G=h[I],ie=G.length;if(u(G)){for(var q=0;q<ie;q++)if(q!==C){var ee=G[q];ee[1]===G[C][1]&&(ee[1]=H+$),ee[2]===G[C][2]&&(ee[2]=U+re)}if(G[C][1]=H+$,G[C][2]=U+re,!u(G))for(var te=0;te<ie;te++)for(var se=0;se<G[te].length;se++)G[te][se]=R[I][te][se]}else G[C][1]=H+$,G[C][2]=U+re;k()}}function W(){M()}function Y($,re){if(2===$){I=+re.srcElement.getAttribute("data-i"),C=+re.srcElement.getAttribute("data-j");var H=h[I];u(H)||i(H)||function(){if(h.length&&h[I]&&h[I].length){for(var U=[],G=0;G<h[I].length;G++)G!==C&&U.push(h[I][G]);U.length>1&&(2!==U.length||"Z"!==U[1][0])&&(0===C&&(U[0][0]="M"),h[I]=U,k(),M())}}()}}function Q($,re){(function(H,U){if(h.length)for(var G=0;G<h.length;G++)for(var ie=0;ie<h[G].length;ie++)for(var q=0;q+2<h[G][ie].length;q+=2)h[G][ie][q+1]=R[G][ie][q+1]+H,h[G][ie][q+2]=R[G][ie][q+2]+U})($,re),k()}m(o.dragmode)?s._fullLayout._drawing=!0:s._fullLayout._activeShapeIndex>=0&&t(s),d.attr("d",c(h)),O&&!_&&(R=function($,re){for(var H=0;H<re.length;H++){var U=re[H];$[H]=[];for(var G=0;G<U.length;G++){$[H][G]=[];for(var ie=0;ie<U[G].length;ie++)$[H][G][ie]=U[G][ie]}}return $}([],h),function($){A=[];for(var re=0;re<h.length;re++){var H=h[re],U=!u(H)&&i(H);A[re]=[];for(var G=0;G<H.length;G++)if("Z"!==H[G][0]&&(!U||G===e||G===r||G===n||G===a)){var ie=H[G][1],q=H[G][2],ee=$.append("circle").classed("cursor-grab",!0).attr("data-i",re).attr("data-j",G).attr("cx",ie).attr("cy",q).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});A[re][G]={element:ee.node(),gd:s,prepFn:B,doneFn:W,clickFn:Y},g.init(A[re][G])}}}(D.append("g").attr("class","outline-controllers")),E=[],h.length&&(E[0]={element:d[0][0],gd:s,prepFn:function ne($){(I=+$.srcElement.getAttribute("data-i"))||(I=0),E[I].moveFn=Q},doneFn:function X(){M()}},g.init(E[0])))}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(x,oe,ae){"use strict";var g=x("parse-svg-path"),m=x("./constants"),w=m.CIRCLE_SIDES,y=m.SQRT2,e=x("../../../plots/cartesian/helpers"),r=e.p2r,n=e.r2p,a=[0,3,4,5,6,1,2],t=[0,3,4,1,2];function p(i,c){return Math.abs(i-c)<=1e-6}function u(i,c){var f=c[1]-i[1],l=c[2]-i[2];return Math.sqrt(f*f+l*l)}ae.writePaths=function(i){var c=i.length;if(!c)return"M0,0Z";for(var f="",l=0;l<c;l++)for(var h=i[l].length,d=0;d<h;d++){var o=i[l][d][0];if("Z"===o)f+="Z";else for(var _=i[l][d].length,s=0;s<_;s++){var k=s;"Q"===o||"S"===o?k=t[s]:"C"===o&&(k=a[s]),f+=i[l][d][k],s>0&&s<_-1&&(f+=",")}}return f},ae.readPaths=function(i,c,f,l){var h,d,o,_=g(i),s=[],k=-1,M=0,A=0,E=function(){d=M,o=A};E();for(var I=0;I<_.length;I++){var L=[],B=_[I][0],j=B;switch(B){case"M":s[++k]=[],L.push([j,M=+_[I][1],A=+_[I][2]]),E();break;case"Q":case"S":L.push([j,M=+_[I][3],A=+_[I][4],+_[I][1],+_[I][2]]);break;case"C":L.push([j,M=+_[I][5],A=+_[I][6],+_[I][1],+_[I][2],+_[I][3],+_[I][4]]);break;case"T":case"L":L.push([j,M=+_[I][1],A=+_[I][2]]);break;case"H":L.push([j="L",M=+_[I][1],A]);break;case"V":L.push([j="L",M,A=+_[I][1]]);break;case"A":j="L";var W=+_[I][1],Y=+_[I][2];+_[I][4]||(W=-W,Y=-Y);var Q=M-W,ne=A;for(h=1;h<=w/2;h++){var X=2*Math.PI*h/w;L.push([j,Q+W*Math.cos(X),ne+Y*Math.sin(X)])}break;case"Z":M===d&&A===o||L.push([j,M=d,A=o])}for(var $=(f||{}).domain,re=c._fullLayout._size,H=f&&"pixel"===f.xsizemode,U=f&&"pixel"===f.ysizemode,G=!1===l,ie=0;ie<L.length;ie++){for(h=0;h+2<7;h+=2){var q=L[ie][h+1],ee=L[ie][h+2];void 0!==q&&void 0!==ee&&(M=q,A=ee,f&&(f.xaxis&&f.xaxis.p2r?(G&&(q-=f.xaxis._offset),q=H?n(f.xaxis,f.xanchor)+q:r(f.xaxis,q)):(G&&(q-=re.l),$?q=$.x[0]+q/re.w:q/=re.w),f.yaxis&&f.yaxis.p2r?(G&&(ee-=f.yaxis._offset),ee=U?n(f.yaxis,f.yanchor)-ee:r(f.yaxis,ee)):(G&&(ee-=re.t),ee=$?$.y[1]-ee/re.h:1-ee/re.h)),L[ie][h+1]=q,L[ie][h+2]=ee)}s[k].push(L[ie].slice())}}return s},ae.pointsShapeRectangle=function(i){if(5!==i.length)return!1;for(var c=1;c<3;c++)if(!p(i[0][c]-i[1][c],i[3][c]-i[2][c])||!p(i[0][c]-i[3][c],i[1][c]-i[2][c]))return!1;return!(!p(i[0][1],i[1][1])&&!p(i[0][1],i[3][1])||!(u(i[0],i[1])*u(i[0],i[3])))},ae.pointsShapeEllipse=function(i){var c=i.length;if(c!==w+1)return!1;c=w;for(var f=0;f<c;f++){var l=(2*c-f)%c,h=(c/2+l)%c;if(!p(u(i[f],i[(c/2+f)%c]),u(i[l],i[h])))return!1}return!0},ae.handleEllipse=function(i,c,f){if(!i)return[c,f];var l=ae.ellipseOver({x0:c[0],y0:c[1],x1:f[0],y1:f[1]}),h=(l.x1+l.x0)/2,d=(l.y1+l.y0)/2,o=(l.x1-l.x0)/2,_=(l.y1-l.y0)/2;o||(o=_/=y),_||(_=o/=y);for(var s=[],k=0;k<w;k++){var M=2*k*Math.PI/w;s.push([h+o*Math.cos(M),d+_*Math.sin(M)])}return s},ae.ellipseOver=function(i){var c=i.x0,f=i.y0,l=i.x1,h=i.y1,d=l-c,o=h-f,_=((c-=d)+l)/2,s=((f-=o)+h)/2;return{x0:_-(d*=y),y0:s-(o*=y),x1:_+d,y1:s+o}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(x,oe,ae){"use strict";var g=x("../../dragelement/helpers"),m=g.drawMode,w=g.openMode,y=x("./constants"),e=y.i000,r=y.i090,n=y.i180,a=y.i270,t=y.cos45,p=y.sin45,u=x("../../../plots/cartesian/helpers"),i=u.p2r,c=u.r2p,f=x("../../../plots/cartesian/handle_outline").clearSelect,l=x("./helpers"),h=l.readPaths,d=l.writePaths,o=l.ellipseOver;oe.exports=function(_,s){if(_.length){var k=_[0][0];if(k){var M=k.getAttribute("d"),A=s.gd,E=A._fullLayout.newshape,I=s.plotinfo,C=I.xaxis,R=I.yaxis,O=!!I.domain||!I.xaxis,D=!!I.domain||!I.yaxis,L=s.isActiveShape,B=s.dragmode,j=(A.layout||{}).shapes||[];if(!m(B)&&void 0!==L){var W=A._fullLayout._activeShapeIndex;if(W<j.length)switch(A._fullLayout.shapes[W].type){case"rect":B="drawrect";break;case"circle":B="drawcircle";break;case"line":B="drawline";break;case"path":var Y=j[W].path||"";B="Z"===Y[Y.length-1]?"drawclosedpath":"drawopenpath"}}var Q,ne=w(B),X=h(M,A,I,L),$={editable:!0,xref:O?"paper":C._id,yref:D?"paper":R._id,layer:E.layer,opacity:E.opacity,line:{color:E.line.color,width:E.line.width,dash:E.line.dash}};if(ne||($.fillcolor=E.fillcolor,$.fillrule=E.fillrule),1===X.length&&(Q=X[0]),Q&&"drawrect"===B)$.type="rect",$.x0=Q[0][1],$.y0=Q[0][2],$.x1=Q[2][1],$.y1=Q[2][2];else if(Q&&"drawline"===B)$.type="line",$.x0=Q[0][1],$.y0=Q[0][2],$.x1=Q[1][1],$.y1=Q[1][2];else if(Q&&"drawcircle"===B){$.type="circle";var re=Q[e][1],H=Q[r][1],U=Q[n][1],G=Q[a][1],ie=Q[e][2],q=Q[r][2],ee=Q[n][2],te=Q[a][2],se=I.xaxis&&("date"===I.xaxis.type||"log"===I.xaxis.type),ue=I.yaxis&&("date"===I.yaxis.type||"log"===I.yaxis.type);se&&(re=c(I.xaxis,re),H=c(I.xaxis,H),U=c(I.xaxis,U),G=c(I.xaxis,G)),ue&&(ie=c(I.yaxis,ie),q=c(I.yaxis,q),ee=c(I.yaxis,ee),te=c(I.yaxis,te));var de=(H+G)/2,he=(ie+ee)/2,xe=o({x0:de,y0:he,x1:de+(G-H+U-re)/2*t,y1:he+(te-q+ee-ie)/2*p});se&&(xe.x0=i(I.xaxis,xe.x0),xe.x1=i(I.xaxis,xe.x1)),ue&&(xe.y0=i(I.yaxis,xe.y0),xe.y1=i(I.yaxis,xe.y1)),$.x0=xe.x0,$.y0=xe.y0,$.x1=xe.x1,$.y1=xe.y1}else $.type="path",C&&R&&function(ve,Te,Pe){var De="date"===Te.type,Fe="date"===Pe.type;if(!De&&!Fe)return ve;for(var Ue=0;Ue<ve.length;Ue++)for(var He=0;He<ve[Ue].length;He++)for(var Ke=0;Ke+2<ve[Ue][He].length;Ke+=2)De&&(ve[Ue][He][Ke+1]=ve[Ue][He][Ke+1].replace(" ","_")),Fe&&(ve[Ue][He][Ke+2]=ve[Ue][He][Ke+2].replace(" ","_"))}(X,C,R),$.path=d(X),Q=null;f(A);for(var ge=s.editHelpers,_e=(ge||{}).modifyItem,Ce=[],Le=0;Le<j.length;Le++){var Ie=A._fullLayout.shapes[Le];if(Ce[Le]=Ie._input,void 0!==L&&Le===A._fullLayout._activeShapeIndex){var Be=$;switch(Ie.type){case"line":case"rect":case"circle":_e("x0",Be.x0),_e("x1",Be.x1),_e("y0",Be.y0),_e("y1",Be.y1);break;case"path":_e("path",Be.path)}}}return void 0===L?(Ce.push($),Ce):ge?ge.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(x,oe,ae){"use strict";var g=x("./constants"),m=x("../../lib");ae.rangeToShapePosition=function(w){return"log"===w.type?w.r2d:function(y){return y}},ae.shapePositionToRange=function(w){return"log"===w.type?w.d2r:function(y){return y}},ae.decodeDate=function(w){return function(y){return y.replace&&(y=y.replace("_"," ")),w(y)}},ae.encodeDate=function(w){return function(y){return w(y).replace(" ","_")}},ae.extractPathCoords=function(w,y){var e=[];return w.match(g.segmentRE).forEach(function(r){var n=y[r.charAt(0)].drawn;if(void 0!==n){var a=r.substr(1).match(g.paramRE);!a||a.length<n||e.push(m.cleanNumber(a[n]))}}),e},ae.getDataToPixel=function(w,y,e,r){var n,a=w._fullLayout._size;if(y)if("domain"===r)n=function(p){return y._length*(e?1-p:p)+y._offset};else{var t=ae.shapePositionToRange(y);n=function(p){return y._offset+y.r2p(t(p,!0))},"date"===y.type&&(n=ae.decodeDate(n))}else n=e?function(p){return a.t+a.h*(1-p)}:function(p){return a.l+a.w*p};return n},ae.getPixelToData=function(w,y,e,r){var n,a=w._fullLayout._size;if(y)if("domain"===r)n=function(p){var u=(p-y._offset)/y._length;return e?1-u:u};else{var t=ae.rangeToShapePosition(y);n=function(p){return t(y.p2r(p-y._offset))}}else n=e?function(p){return 1-(p-a.t)/a.h}:function(p){return(p-a.l)/a.w};return n},ae.roundPositionForSharpStrokeRendering=function(w,y){var e=1===Math.round(y%2),r=Math.round(w);return e?r+.5:r},ae.makeOptionsAndPlotinfo=function(w,y){var e=w._fullLayout.shapes[y]||{},r=w._fullLayout._plots[e.xref+e.yref];return r?r._hadPlotinfo=!0:(r={},e.xref&&"paper"!==e.xref&&(r.xaxis=w._fullLayout[e.xref+"axis"]),e.yref&&"paper"!==e.yref&&(r.yaxis=w._fullLayout[e.yref+"axis"])),r.xsizemode=e.xsizemode,r.ysizemode=e.ysizemode,r.xanchor=e.xanchor,r.yanchor=e.yanchor,{options:e,plotinfo:r}}},{"../../lib":503,"./constants":448}],458:[function(x,oe,ae){"use strict";var g=x("./draw");oe.exports={moduleType:"component",name:"shapes",layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),supplyDrawNewShapeDefaults:x("./draw_newshape/defaults"),includeBasePlot:x("../../plots/cartesian/include_components")("shapes"),calcAutorange:x("./calc_autorange"),draw:g.draw,drawOne:g.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(x,oe,ae){"use strict";var g=x("../../plots/font_attributes"),m=x("../../plots/pad_attributes"),w=x("../../lib/extend").extendDeepAll,y=x("../../plot_api/edit_types").overrideAll,e=x("../../plots/animation_attributes"),r=x("../../plot_api/plot_template").templatedArray,n=x("./constants"),a=r("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});oe.exports=y(r("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:a,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:w(m({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:g({})},font:g({}),activebgcolor:{valType:"color",dflt:n.gripBgActiveColor},bgcolor:{valType:"color",dflt:n.railBgColor},bordercolor:{valType:"color",dflt:n.railBorderColor},borderwidth:{valType:"number",min:0,dflt:n.railBorderWidth},ticklen:{valType:"number",min:0,dflt:n.tickLength},tickcolor:{valType:"color",dflt:n.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:n.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(x,oe,ae){"use strict";oe.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/array_container_defaults"),w=x("./attributes"),y=x("./constants").name,e=w.steps;function r(a,t,p){function u(h,d){return g.coerce(a,t,w,h,d)}for(var i=m(a,t,{name:"steps",handleItemDefaults:n}),c=0,f=0;f<i.length;f++)i[f].visible&&c++;if(c<2?t.visible=!1:u("visible")){t._stepCount=c;var l=t._visibleSteps=g.filterVisible(i);(i[u("active")]||{}).visible||(t.active=l[0]._index),u("x"),u("y"),g.noneOrAll(a,t,["x","y"]),u("xanchor"),u("yanchor"),u("len"),u("lenmode"),u("pad.t"),u("pad.r"),u("pad.b"),u("pad.l"),g.coerceFont(u,"font",p.font),u("currentvalue.visible")&&(u("currentvalue.xanchor"),u("currentvalue.prefix"),u("currentvalue.suffix"),u("currentvalue.offset"),g.coerceFont(u,"currentvalue.font",t.font)),u("transition.duration"),u("transition.easing"),u("bgcolor"),u("activebgcolor"),u("bordercolor"),u("borderwidth"),u("ticklen"),u("tickwidth"),u("tickcolor"),u("minorticklen")}}function n(a,t){function p(i,c){return g.coerce(a,t,e,i,c)}if("skip"===a.method||Array.isArray(a.args)?p("visible"):t.visible=!1){p("method"),p("args");var u=p("label","step-"+t._index);p("value",u),p("execute")}}oe.exports=function(a,t){m(a,t,{name:y,handleItemDefaults:r})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../plots/plots"),w=x("../color"),y=x("../drawing"),e=x("../../lib"),r=e.strTranslate,n=x("../../lib/svg_text_utils"),a=x("../../plot_api/plot_template").arrayEditor,t=x("./constants"),p=x("../../constants/alignment"),u=p.LINE_SPACING,i=p.FROM_TL,c=p.FROM_BR;function f(L){return t.autoMarginIdRoot+L._index}function l(L){return L._index}function h(L,B){var j=y.tester.selectAll("g."+t.labelGroupClass).data(B._visibleSteps);j.enter().append("g").classed(t.labelGroupClass,!0);var W=0,Y=0;j.each(function(ie){var q=_(g.select(this),{step:ie},B).node();if(q){var ee=y.bBox(q);Y=Math.max(Y,ee.height),W=Math.max(W,ee.width)}}),j.remove();var Q=B._dims={};Q.inputAreaWidth=Math.max(t.railWidth,t.gripHeight);var ne=L._fullLayout._size;if(Q.lx=ne.l+ne.w*B.x,Q.ly=ne.t+ne.h*(1-B.y),Q.outerLength="fraction"===B.lenmode?Math.round(ne.w*B.len):B.len,Q.inputAreaStart=0,Q.inputAreaLength=Math.round(Q.outerLength-B.pad.l-B.pad.r),Q.labelStride=Math.max(1,Math.ceil((W+t.labelPadding)/((Q.inputAreaLength-2*t.stepInset)/(B._stepCount-1)))),Q.labelHeight=Y,Q.currentValueMaxWidth=0,Q.currentValueHeight=0,Q.currentValueTotalHeight=0,Q.currentValueMaxLines=1,B.currentvalue.visible){var re=y.tester.append("g");j.each(function(ie){var q=d(re,B,ie.label),ee=q.node()&&y.bBox(q.node())||{width:0,height:0},te=n.lineCount(q);Q.currentValueMaxWidth=Math.max(Q.currentValueMaxWidth,Math.ceil(ee.width)),Q.currentValueHeight=Math.max(Q.currentValueHeight,Math.ceil(ee.height)),Q.currentValueMaxLines=Math.max(Q.currentValueMaxLines,te)}),Q.currentValueTotalHeight=Q.currentValueHeight+B.currentvalue.offset,re.remove()}Q.height=Q.currentValueTotalHeight+t.tickOffset+B.ticklen+t.labelOffset+Q.labelHeight+B.pad.t+B.pad.b;var H="left";e.isRightAnchor(B)&&(Q.lx-=Q.outerLength,H="right"),e.isCenterAnchor(B)&&(Q.lx-=Q.outerLength/2,H="center");var U="top";e.isBottomAnchor(B)&&(Q.ly-=Q.height,U="bottom"),e.isMiddleAnchor(B)&&(Q.ly-=Q.height/2,U="middle"),Q.outerLength=Math.ceil(Q.outerLength),Q.height=Math.ceil(Q.height),Q.lx=Math.round(Q.lx),Q.ly=Math.round(Q.ly);var G={y:B.y,b:Q.height*c[U],t:Q.height*i[U]};"fraction"===B.lenmode?(G.l=0,G.xl=B.x-B.len*i[H],G.r=0,G.xr=B.x+B.len*c[H]):(G.x=B.x,G.l=Q.outerLength*i[H],G.r=Q.outerLength*c[H]),m.autoMargin(L,f(B),G)}function d(L,B,j){if(B.currentvalue.visible){var W,Y,Q=B._dims;switch(B.currentvalue.xanchor){case"right":W=Q.inputAreaLength-t.currentValueInset-Q.currentValueMaxWidth,Y="left";break;case"center":W=.5*Q.inputAreaLength,Y="middle";break;default:W=t.currentValueInset,Y="left"}var ne=e.ensureSingle(L,"text",t.labelClass,function(G){G.attr({"text-anchor":Y,"data-notex":1})}),X=B.currentvalue.prefix?B.currentvalue.prefix:"";if("string"==typeof j)X+=j;else{var $=B.steps[B.active].label,re=B._gd._fullLayout._meta;re&&($=e.templateString($,re)),X+=$}B.currentvalue.suffix&&(X+=B.currentvalue.suffix),ne.call(y.font,B.currentvalue.font).text(X).call(n.convertToTspans,B._gd);var H=n.lineCount(ne);return n.positionText(ne,W,(Q.currentValueMaxLines+1-H)*B.currentvalue.font.size*u),ne}}function o(L,B,j){e.ensureSingle(L,"rect",t.gripRectClass,function(W){W.call(A,B,L,j).style("pointer-events","all")}).attr({width:t.gripWidth,height:t.gripHeight,rx:t.gripRadius,ry:t.gripRadius}).call(w.stroke,j.bordercolor).call(w.fill,j.bgcolor).style("stroke-width",j.borderwidth+"px")}function _(L,B,j){var W=e.ensureSingle(L,"text",t.labelClass,function(ne){ne.attr({"text-anchor":"middle","data-notex":1})}),Y=B.step.label,Q=j._gd._fullLayout._meta;return Q&&(Y=e.templateString(Y,Q)),W.call(y.font,j.font).text(Y).call(n.convertToTspans,j._gd),W}function s(L,B){var j=e.ensureSingle(L,"g",t.labelsClass),W=B._dims,Y=j.selectAll("g."+t.labelGroupClass).data(W.labelSteps);Y.enter().append("g").classed(t.labelGroupClass,!0),Y.exit().remove(),Y.each(function(Q){var ne=g.select(this);ne.call(_,Q,B),y.setTranslate(ne,C(B,Q.fraction),t.tickOffset+B.ticklen+B.font.size*u+t.labelOffset+W.currentValueTotalHeight)})}function k(L,B,j,W,Y){var Q=Math.round(W*(j._stepCount-1)),ne=j._visibleSteps[Q]._index;ne!==j.active&&M(L,B,j,ne,!0,Y)}function M(L,B,j,W,Y,Q){var ne=j.active;j.active=W,a(L.layout,t.name,j).applyUpdate("active",W);var X=j.steps[j.active];B.call(I,j,Q),B.call(d,j),L.emit("plotly_sliderchange",{slider:j,step:j.steps[j.active],interaction:Y,previousActive:ne}),X&&X.method&&Y&&(B._nextMethod?(B._nextMethod.step=X,B._nextMethod.doCallback=Y,B._nextMethod.doTransition=Q):(B._nextMethod={step:X,doCallback:Y,doTransition:Q},B._nextMethodRaf=window.requestAnimationFrame(function(){var $=B._nextMethod.step;$.method&&($.execute&&m.executeAPICommand(L,$.method,$.args),B._nextMethod=null,B._nextMethodRaf=null)})))}function A(L,B,j){var W=j.node(),Y=g.select(B);function Q(){return j.data()[0]}function ne(){var X=Q();B.emit("plotly_sliderstart",{slider:X});var $=j.select("."+t.gripRectClass);g.event.stopPropagation(),g.event.preventDefault(),$.call(w.fill,X.activebgcolor);var re=R(X,g.mouse(W)[0]);function H(){var G=Q(),ie=R(G,g.mouse(W)[0]);k(B,j,G,ie,!1)}function U(){var G=Q();G._dragging=!1,$.call(w.fill,G.bgcolor),Y.on("mouseup",null),Y.on("mousemove",null),Y.on("touchend",null),Y.on("touchmove",null),B.emit("plotly_sliderend",{slider:G,step:G.steps[G.active]})}k(B,j,X,re,!0),X._dragging=!0,Y.on("mousemove",H),Y.on("touchmove",H),Y.on("mouseup",U),Y.on("touchend",U)}L.on("mousedown",ne),L.on("touchstart",ne)}function E(L,B){var j=L.selectAll("rect."+t.tickRectClass).data(B._visibleSteps),W=B._dims;j.enter().append("rect").classed(t.tickRectClass,!0),j.exit().remove(),j.attr({width:B.tickwidth+"px","shape-rendering":"crispEdges"}),j.each(function(Y,Q){var ne=Q%W.labelStride==0,X=g.select(this);X.attr({height:ne?B.ticklen:B.minorticklen}).call(w.fill,B.tickcolor),y.setTranslate(X,C(B,Q/(B._stepCount-1))-.5*B.tickwidth,(ne?t.tickOffset:t.minorTickOffset)+W.currentValueTotalHeight)})}function I(L,B,j){for(var W=L.select("rect."+t.gripRectClass),Y=0,Q=0;Q<B._stepCount;Q++)if(B._visibleSteps[Q]._index===B.active){Y=Q;break}var ne=C(B,Y/(B._stepCount-1));if(!B._invokingCommand){var X=W;j&&B.transition.duration>0&&(X=X.transition().duration(B.transition.duration).ease(B.transition.easing)),X.attr("transform",r(ne-.5*t.gripWidth,B._dims.currentValueTotalHeight))}}function C(L,B){var j=L._dims;return j.inputAreaStart+t.stepInset+(j.inputAreaLength-2*t.stepInset)*Math.min(1,Math.max(0,B))}function R(L,B){var j=L._dims;return Math.min(1,Math.max(0,(B-t.stepInset-j.inputAreaStart)/(j.inputAreaLength-2*t.stepInset-2*j.inputAreaStart)))}function O(L,B,j){var W=j._dims,Y=e.ensureSingle(L,"rect",t.railTouchRectClass,function(Q){Q.call(A,B,L,j).style("pointer-events","all")});Y.attr({width:W.inputAreaLength,height:Math.max(W.inputAreaWidth,t.tickOffset+j.ticklen+W.labelHeight)}).call(w.fill,j.bgcolor).attr("opacity",0),y.setTranslate(Y,0,W.currentValueTotalHeight)}function D(L,B){var j=B._dims,W=j.inputAreaLength-2*t.railInset,Y=e.ensureSingle(L,"rect",t.railRectClass);Y.attr({width:W,height:t.railWidth,rx:t.railRadius,ry:t.railRadius,"shape-rendering":"crispEdges"}).call(w.stroke,B.bordercolor).call(w.fill,B.bgcolor).style("stroke-width",B.borderwidth+"px"),y.setTranslate(Y,t.railInset,.5*(j.inputAreaWidth-t.railWidth)+j.currentValueTotalHeight)}oe.exports=function(L){var B=L._fullLayout,j=function($,re){for(var H=$[t.name],U=[],G=0;G<H.length;G++){var ie=H[G];ie.visible&&(ie._gd=re,U.push(ie))}return U}(B,L),W=B._infolayer.selectAll("g."+t.containerClassName).data(j.length>0?[0]:[]);function Y($){$._commandObserver&&($._commandObserver.remove(),delete $._commandObserver),m.autoMargin(L,f($))}if(W.enter().append("g").classed(t.containerClassName,!0).style("cursor","ew-resize"),W.exit().each(function(){g.select(this).selectAll("g."+t.groupClassName).each(Y)}).remove(),0!==j.length){var Q=W.selectAll("g."+t.groupClassName).data(j,l);Q.enter().append("g").classed(t.groupClassName,!0),Q.exit().each(Y).remove();for(var ne=0;ne<j.length;ne++)h(L,j[ne]);Q.each(function($){var re=g.select(this);(function(H){var U=H._dims;U.labelSteps=[];for(var G=H._stepCount,ie=0;ie<G;ie+=U.labelStride)U.labelSteps.push({fraction:ie/(G-1),step:H._visibleSteps[ie]})})($),m.manageCommandObserver(L,$,$._visibleSteps,function(H){var U=re.data()[0];U.active!==H.index&&(U._dragging||M(L,re,U,H.index,!1,!0))}),function(H,U,G){(G.steps[G.active]||{}).visible||(G.active=G._visibleSteps[0]._index),U.call(d,G).call(D,G).call(s,G).call(E,G).call(O,H,G).call(o,H,G);var ie=G._dims;y.setTranslate(U,ie.lx+G.pad.l,ie.ly+G.pad.t),U.call(I,G,!1),U.call(d,G)}(L,g.select(this),$)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(x,oe,ae){"use strict";var g=x("./constants");oe.exports={moduleType:"component",name:g.name,layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),draw:x("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("fast-isnumeric"),w=x("../../plots/plots"),y=x("../../registry"),e=x("../../lib"),r=e.strTranslate,n=x("../drawing"),a=x("../color"),t=x("../../lib/svg_text_utils"),p=x("../../constants/interactions"),u=x("../../constants/alignment").OPPOSITE_SIDE,i=/ [XY][0-9]* /;oe.exports={draw:function(c,f,l){var h,o=l.propName,_=l.placeholder,s=l.traceIndex,k=l.avoid||{},M=l.attributes,A=l.transform,E=l.containerGroup,I=c._fullLayout,C=1,R=!1,O=l.propContainer.title,D=(O&&O.text?O.text:"").trim(),L=O&&O.font?O.font:{},B=L.family,j=L.size,W=L.color;"title.text"===o?h="titleText":-1!==o.indexOf("axis")?h="axisTitleText":o.indexOf(!0)&&(h="colorbarTitleText");var Y=c._context.edits[h];""===D?C=0:D.replace(i," % ")===_.replace(i," % ")&&(C=.2,R=!0,Y||(D="")),l._meta?D=e.templateString(D,l._meta):I._meta&&(D=e.templateString(D,I._meta));var Q,ne=D||Y;E||(E=e.ensureSingle(I._infolayer,"g","g-"+f),Q=I._hColorbarMoveTitle);var X=E.selectAll("text").data(ne?[0]:[]);if(X.enter().append("text"),X.text(D).attr("class",f),X.exit().remove(),!ne)return E;function $(U){e.syncOrAsync([re,H],U)}function re(U){var G;return!A&&Q&&(A={}),A?(G="",A.rotate&&(G+="rotate("+[A.rotate,M.x,M.y]+")"),(A.offset||Q)&&(G+=r(0,(A.offset||0)-(Q||0)))):G=null,U.attr("transform",G),U.style({"font-family":B,"font-size":g.round(j,2)+"px",fill:a.rgb(W),opacity:C*a.opacity(W),"font-weight":w.fontWeight}).attr(M).call(t.convertToTspans,c),w.previousPromises(c)}function H(U){var G=g.select(U.node().parentNode);if(k&&k.selection&&k.side&&D){G.attr("transform",null);var ie=u[k.side],q="left"===k.side||"top"===k.side?-1:1,ee=m(k.pad)?k.pad:2,te=n.bBox(G.node()),ue=k.maxShift||q*({left:0,top:0,right:I.width,bottom:I.height}[k.side]-te[k.side]),de=0;if(ue<0)de=ue;else{var he=k.offsetLeft||0,xe=k.offsetTop||0;te.left-=he,te.right-=he,te.top-=xe,te.bottom-=xe,k.selection.each(function(){var _e=n.bBox(this);e.bBoxIntersect(te,_e,ee)&&(de=Math.max(de,q*(_e[k.side]-te[ie])+ee))}),de=Math.min(ue,de)}if(de>0||ue<0){var ge={left:[-de,0],right:[de,0],top:[0,-de],bottom:[0,de]}[k.side];G.attr("transform",r(ge[0],ge[1]))}}}return X.call($),Y&&(D?X.on(".opacity",null):(C=0,R=!0,X.text(_).on("mouseover.opacity",function(){g.select(this).transition().duration(p.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){g.select(this).transition().duration(p.HIDE_PLACEHOLDER).style("opacity",0)})),X.call(t.makeEditable,{gd:c}).on("edit",function(U){void 0!==s?y.call("_guiRestyle",c,o,U,s):y.call("_guiRelayout",c,o,U)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call($)}).on("input",function(U){this.text(U||" ").call(t.positionText,M.x,M.y)})),X.classed("js-placeholder",R),E}}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(x,oe,ae){"use strict";var g=x("../../plots/font_attributes"),m=x("../color/attributes"),w=x("../../lib/extend").extendFlat,y=x("../../plot_api/edit_types").overrideAll,e=x("../../plots/pad_attributes"),r=x("../../plot_api/plot_template").templatedArray,n=r("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});oe.exports=y(r("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:n,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:w(e({editType:"arraydraw"}),{}),font:g({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:m.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(x,oe,ae){"use strict";oe.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],467:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/array_container_defaults"),w=x("./attributes"),y=x("./constants").name,e=w.buttons;function r(a,t,p){function u(i,c){return g.coerce(a,t,w,i,c)}u("visible",m(a,t,{name:"buttons",handleItemDefaults:n}).length>0)&&(u("active"),u("direction"),u("type"),u("showactive"),u("x"),u("y"),g.noneOrAll(a,t,["x","y"]),u("xanchor"),u("yanchor"),u("pad.t"),u("pad.r"),u("pad.b"),u("pad.l"),g.coerceFont(u,"font",p.font),u("bgcolor",p.paper_bgcolor),u("bordercolor"),u("borderwidth"))}function n(a,t){function p(u,i){return g.coerce(a,t,e,u,i)}p("visible","skip"===a.method||Array.isArray(a.args))&&(p("method"),p("args"),p("args2"),p("label"),p("execute"))}oe.exports=function(a,t){m(a,t,{name:y,handleItemDefaults:r})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../plots/plots"),w=x("../color"),y=x("../drawing"),e=x("../../lib"),r=x("../../lib/svg_text_utils"),n=x("../../plot_api/plot_template").arrayEditor,a=x("../../constants/alignment").LINE_SPACING,t=x("./constants"),p=x("./scrollbox");function u(C){return C._index}function i(C,R){return+C.attr(t.menuIndexAttrName)===R._index}function c(C,R,O,D,L,B,j,W){R.active=j,n(C.layout,t.name,R).applyUpdate("active",j),"buttons"===R.type?l(C,D,null,null,R):"dropdown"===R.type&&(L.attr(t.menuIndexAttrName,"-1"),f(C,D,L,B,R),W||l(C,D,L,B,R))}function f(C,R,O,D,L){var B=e.ensureSingle(R,"g",t.headerClassName,function(X){X.style("pointer-events","all")}),j=L._dims,Q={y:L.pad.t,yPad:0,x:L.pad.l,xPad:0,index:0},ne={width:j.headerWidth,height:j.headerHeight};B.call(h,L,L.buttons[L.active]||t.blankHeaderOpts,C).call(E,L,Q,ne),e.ensureSingle(R,"text",t.headerArrowClassName,function(X){X.attr("text-anchor","end").call(y.font,L.font).text(t.arrowSymbol[L.direction])}).attr({x:j.headerWidth-t.arrowOffsetX+L.pad.l,y:j.headerHeight/2+t.textOffsetY+L.pad.t}),B.on("click",function(){O.call(I,String(i(O,L)?-1:L._index)),l(C,R,O,D,L)}),B.on("mouseover",function(){B.call(s)}),B.on("mouseout",function(){B.call(k,L)}),y.setTranslate(R,j.lx,j.ly)}function l(C,R,O,D,L){O||(O=R).attr("pointer-events","all");var B=-1==+O.attr(t.menuIndexAttrName)&&"buttons"!==L.type?[]:L.buttons,j="dropdown"===L.type?t.dropdownButtonClassName:t.buttonClassName,W=O.selectAll("g."+j).data(e.filterVisible(B)),Y=W.enter().append("g").classed(j,!0),Q=W.exit();"dropdown"===L.type?(Y.attr("opacity","0").transition().attr("opacity","1"),Q.transition().attr("opacity","0").remove()):Q.remove();var ne=0,X=0,$=L._dims,re=-1!==["up","down"].indexOf(L.direction);"dropdown"===L.type&&(re?X=$.headerHeight+t.gapButtonHeader:ne=$.headerWidth+t.gapButtonHeader),"dropdown"===L.type&&"up"===L.direction&&(X=-t.gapButtonHeader+t.gapButton-$.openHeight),"dropdown"===L.type&&"left"===L.direction&&(ne=-t.gapButtonHeader+t.gapButton-$.openWidth);var G,ie,q,H={x:$.lx+ne+L.pad.l,y:$.ly+X+L.pad.t,yPad:t.gapButton,xPad:t.gapButton,index:0},U={l:H.x+L.borderwidth,t:H.y+L.borderwidth};W.each(function(G,ie){var q=g.select(this);q.call(h,L,G,C).call(E,L,H),q.on("click",function(){g.event.defaultPrevented||(G.execute&&(G.args2&&L.active===ie?(c(C,L,0,R,O,D,-1),m.executeAPICommand(C,G.method,G.args2)):(c(C,L,0,R,O,D,ie),m.executeAPICommand(C,G.method,G.args))),C.emit("plotly_buttonclicked",{menu:L,button:G,active:L.active}))}),q.on("mouseover",function(){q.call(s)}),q.on("mouseout",function(){q.call(k,L),W.call(_,L)})}),W.call(_,L),re?(U.w=Math.max($.openWidth,$.headerWidth),U.h=H.y-U.t):(U.w=H.x-U.l,U.h=Math.max($.openHeight,$.headerHeight)),U.direction=L.direction,D&&(W.size()?function(G,ie,q,ee,te,se){var ue,de,he,xe=te.direction,_e=te._dims,Ce=te.active;if("up"===xe||"down"===xe)for(de=0,he=0;he<Ce;he++)de+=_e.heights[he]+t.gapButton;else for(ue=0,he=0;he<Ce;he++)ue+=_e.widths[he]+t.gapButton;ee.enable(se,ue,de),ee.hbar&&ee.hbar.attr("opacity","0").transition().attr("opacity","1"),ee.vbar&&ee.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,D,L,U):(q=!!(G=D).vbar,(ie=!!G.hbar)&&G.hbar.transition().attr("opacity","0").each("end",function(){ie=!1,q||G.disable()}),q&&G.vbar.transition().attr("opacity","0").each("end",function(){q=!1,ie||G.disable()})))}function h(C,R,O,D){C.call(d,R).call(o,R,O,D)}function d(C,R){e.ensureSingle(C,"rect",t.itemRectClassName,function(O){O.attr({rx:t.rx,ry:t.ry,"shape-rendering":"crispEdges"})}).call(w.stroke,R.bordercolor).call(w.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px")}function o(C,R,O,D){var L=e.ensureSingle(C,"text",t.itemTextClassName,function(W){W.attr({"text-anchor":"start","data-notex":1})}),B=O.label,j=D._fullLayout._meta;j&&(B=e.templateString(B,j)),L.call(y.font,R.font).text(B).call(r.convertToTspans,D)}function _(C,R){var O=R.active;C.each(function(D,L){var B=g.select(this);L===O&&R.showactive&&B.select("rect."+t.itemRectClassName).call(w.fill,t.activeColor)})}function s(C){C.select("rect."+t.itemRectClassName).call(w.fill,t.hoverColor)}function k(C,R){C.select("rect."+t.itemRectClassName).call(w.fill,R.bgcolor)}function M(C,R){var O=R._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},D=y.tester.selectAll("g."+t.dropdownButtonClassName).data(e.filterVisible(R.buttons));D.enter().append("g").classed(t.dropdownButtonClassName,!0);var L=-1!==["up","down"].indexOf(R.direction);D.each(function(ne,X){var $=g.select(this);$.call(h,R,ne,C);var re=$.select("."+t.itemTextClassName),H=re.node()&&y.bBox(re.node()).width,U=Math.max(H+t.textPadX,t.minWidth),G=R.font.size*a,ie=r.lineCount(re),q=Math.max(G*ie,t.minHeight)+t.textOffsetY;q=Math.ceil(q),U=Math.ceil(U),O.widths[X]=U,O.heights[X]=q,O.height1=Math.max(O.height1,q),O.width1=Math.max(O.width1,U),L?(O.totalWidth=Math.max(O.totalWidth,U),O.openWidth=O.totalWidth,O.totalHeight+=q+t.gapButton,O.openHeight+=q+t.gapButton):(O.totalWidth+=U+t.gapButton,O.openWidth+=U+t.gapButton,O.totalHeight=Math.max(O.totalHeight,q),O.openHeight=O.totalHeight)}),L?O.totalHeight-=t.gapButton:O.totalWidth-=t.gapButton,O.headerWidth=O.width1+t.arrowPadX,O.headerHeight=O.height1,"dropdown"===R.type&&(L?(O.width1+=t.arrowPadX,O.totalHeight=O.height1):O.totalWidth=O.width1,O.totalWidth+=t.arrowPadX),D.remove();var B=O.totalWidth+R.pad.l+R.pad.r,j=O.totalHeight+R.pad.t+R.pad.b,W=C._fullLayout._size;O.lx=W.l+W.w*R.x,O.ly=W.t+W.h*(1-R.y);var Y="left";e.isRightAnchor(R)&&(O.lx-=B,Y="right"),e.isCenterAnchor(R)&&(O.lx-=B/2,Y="center");var Q="top";e.isBottomAnchor(R)&&(O.ly-=j,Q="bottom"),e.isMiddleAnchor(R)&&(O.ly-=j/2,Q="middle"),O.totalWidth=Math.ceil(O.totalWidth),O.totalHeight=Math.ceil(O.totalHeight),O.lx=Math.round(O.lx),O.ly=Math.round(O.ly),m.autoMargin(C,A(R),{x:R.x,y:R.y,l:B*({right:1,center:.5}[Y]||0),r:B*({left:1,center:.5}[Y]||0),b:j*({top:1,middle:.5}[Q]||0),t:j*({bottom:1,middle:.5}[Q]||0)})}function A(C){return t.autoMarginIdRoot+C._index}function E(C,R,O,D){D=D||{};var L=C.select("."+t.itemRectClassName),B=C.select("."+t.itemTextClassName),j=R.borderwidth,W=O.index,Y=R._dims;y.setTranslate(C,j+O.x,j+O.y);var Q=-1!==["up","down"].indexOf(R.direction),ne=D.height||(Q?Y.heights[W]:Y.height1);L.attr({x:0,y:0,width:D.width||(Q?Y.width1:Y.widths[W]),height:ne});var X=R.font.size*a,$=(r.lineCount(B)-1)*X/2;r.positionText(B,t.textOffsetX,ne/2-$+t.textOffsetY),Q?O.y+=Y.heights[W]+O.yPad:O.x+=Y.widths[W]+O.xPad,O.index++}function I(C,R){C.attr(t.menuIndexAttrName,R||"-1").selectAll("g."+t.dropdownButtonClassName).remove()}oe.exports=function(C){var R=C._fullLayout,O=e.filterVisible(R[t.name]);function D(X){m.autoMargin(C,A(X))}var L=R._menulayer.selectAll("g."+t.containerClassName).data(O.length>0?[0]:[]);if(L.enter().append("g").classed(t.containerClassName,!0).style("cursor","pointer"),L.exit().each(function(){g.select(this).selectAll("g."+t.headerGroupClassName).each(D)}).remove(),0!==O.length){var B=L.selectAll("g."+t.headerGroupClassName).data(O,u);B.enter().append("g").classed(t.headerGroupClassName,!0);for(var j=e.ensureSingle(L,"g",t.dropdownButtonGroupClassName,function(X){X.style("pointer-events","all")}),W=0;W<O.length;W++)M(C,O[W]);var ne=new p(C,j,"updatemenus"+R._uid);B.enter().size()&&(j.node().parentNode.appendChild(j.node()),j.call(I)),B.exit().each(function(X){j.call(I),D(X)}).remove(),B.each(function(X){var $=g.select(this),re="dropdown"===X.type?j:null;m.manageCommandObserver(C,X,X.buttons,function(H){c(C,X,0,$,re,ne,H.index,!0)}),"dropdown"===X.type?(f(C,$,j,ne,X),i(j,X)&&l(C,$,j,ne,X)):l(C,$,null,null,X)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(x,oe,ae){arguments[4][463][0].apply(ae,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(x,oe,ae){"use strict";oe.exports=e;var g=x("@plotly/d3"),m=x("../color"),w=x("../drawing"),y=x("../../lib");function e(r,n,a){this.gd=r,this.container=n,this.id=a,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(r,n,a){var t=this.gd._fullLayout,p=t.width,u=t.height;this.position=r;var i,c,f,l,h=this.position.l,d=this.position.w,o=this.position.t,_=this.position.h,s=this.position.direction,k="down"===s,M="left"===s,A="up"===s,E=d,I=_;k||M||"right"===s||A||(this.position.direction="down",k=!0),k||A?(c=(i=h)+E,k?(f=o,I=(l=Math.min(f+I,u))-f):I=(l=o+I)-(f=Math.max(l-I,0))):(l=(f=o)+I,M?E=(c=h+E)-(i=Math.max(c-E,0)):(i=h,E=(c=Math.min(i+E,p))-i)),this._box={l:i,t:f,w:E,h:I};var C=d>E,R=e.barLength+2*e.barPad,O=e.barWidth+2*e.barPad,D=h,L=o+_;L+O>u&&(L=u-O);var B=this.container.selectAll("rect.scrollbar-horizontal").data(C?[0]:[]);B.exit().on(".drag",null).remove(),B.enter().append("rect").classed("scrollbar-horizontal",!0).call(m.fill,e.barColor),C?(this.hbar=B.attr({rx:e.barRadius,ry:e.barRadius,x:D,y:L,width:R,height:O}),this._hbarXMin=D+R/2,this._hbarTranslateMax=E-R):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var j=_>I,W=e.barWidth+2*e.barPad,Y=e.barLength+2*e.barPad,Q=h+d,ne=o;Q+W>p&&(Q=p-W);var X=this.container.selectAll("rect.scrollbar-vertical").data(j?[0]:[]);X.exit().on(".drag",null).remove(),X.enter().append("rect").classed("scrollbar-vertical",!0).call(m.fill,e.barColor),j?(this.vbar=X.attr({rx:e.barRadius,ry:e.barRadius,x:Q,y:ne,width:W,height:Y}),this._vbarYMin=ne+Y/2,this._vbarTranslateMax=I-Y):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var $=this.id,re=i-.5,H=j?c+W+.5:c+.5,U=f-.5,G=C?l+O+.5:l+.5,ie=t._topdefs.selectAll("#"+$).data(C||j?[0]:[]);if(ie.exit().remove(),ie.enter().append("clipPath").attr("id",$).append("rect"),C||j?(this._clipRect=ie.select("rect").attr({x:Math.floor(re),y:Math.floor(U),width:Math.ceil(H)-Math.floor(re),height:Math.ceil(G)-Math.floor(U)}),this.container.call(w.setClipUrl,$,this.gd),this.bg.attr({x:h,y:o,width:d,height:_})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(w.setClipUrl,null),delete this._clipRect),C||j){var q=g.behavior.drag().on("dragstart",function(){g.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(q);var ee=g.behavior.drag().on("dragstart",function(){g.event.sourceEvent.preventDefault(),g.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));C&&this.hbar.on(".drag",null).call(ee),j&&this.vbar.on(".drag",null).call(ee)}this.setTranslate(n,a)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(w.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var r=this.translateX,n=this.translateY;this.hbar&&(r-=g.event.dx),this.vbar&&(n-=g.event.dy),this.setTranslate(r,n)},e.prototype._onBoxWheel=function(){var r=this.translateX,n=this.translateY;this.hbar&&(r+=g.event.deltaY),this.vbar&&(n+=g.event.deltaY),this.setTranslate(r,n)},e.prototype._onBarDrag=function(){var r=this.translateX,n=this.translateY;if(this.hbar){var a=r+this._hbarXMin,t=a+this._hbarTranslateMax;r=(y.constrain(g.event.x,a,t)-a)/(t-a)*(this.position.w-this._box.w)}if(this.vbar){var p=n+this._vbarYMin,u=p+this._vbarTranslateMax;n=(y.constrain(g.event.y,p,u)-p)/(u-p)*(this.position.h-this._box.h)}this.setTranslate(r,n)},e.prototype.setTranslate=function(r,n){var a=this.position.w-this._box.w,t=this.position.h-this._box.h;r=y.constrain(r||0,0,a),n=y.constrain(n||0,0,t),this.translateX=r,this.translateY=n,this.container.call(w.setTranslate,this._box.l-this.position.l-r,this._box.t-this.position.t-n),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+r-.5),y:Math.floor(this.position.t+n-.5)}),this.hbar&&this.hbar.call(w.setTranslate,r+r/a*this._hbarTranslateMax,n),this.vbar&&this.vbar.call(w.setTranslate,r,n+n/t*this._vbarTranslateMax)}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(x,oe,ae){"use strict";oe.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(x,oe,ae){"use strict";oe.exports={axisRefDescription:function(g,m,w){return["If set to a",g,"axis id (e.g. *"+g+"* or","*"+g+"2*), the `"+g+"` position refers to a",g,"coordinate. If set to *paper*, the `"+g+"`","position refers to the distance from the",m,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",m,"("+w+"). If set to a",g,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",m,"of the domain of that axis: e.g.,","*"+g+"2 domain* refers to the domain of the second",g," axis and a",g,"position of 0.5 refers to the","point between the",m,"and the",w,"of the domain of the","second",g,"axis."].join(" ")}}},{}],473:[function(x,oe,ae){"use strict";oe.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},{}],474:[function(x,oe,ae){"use strict";oe.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(x,oe,ae){"use strict";oe.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(x,oe,ae){"use strict";oe.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(x,oe,ae){"use strict";oe.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},{}],478:[function(x,oe,ae){"use strict";oe.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(x,oe,ae){"use strict";oe.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(x,oe,ae){"use strict";ae.xmlns="http://www.w3.org/2000/xmlns/",ae.svg="http://www.w3.org/2000/svg",ae.xlink="http://www.w3.org/1999/xlink",ae.svgAttrs={xmlns:ae.svg,"xmlns:xlink":ae.xlink}},{}],481:[function(x,oe,ae){"use strict";ae.version=x("./version").version,x("native-promise-only"),x("../build/plotcss");for(var g=x("./registry"),m=ae.register=g.register,w=x("./plot_api"),y=Object.keys(w),e=0;e<y.length;e++){var r=y[e];"_"!==r.charAt(0)&&(ae[r]=w[r]),m({moduleType:"apiMethod",name:r,fn:w[r]})}m(x("./traces/scatter")),m([x("./components/legend"),x("./components/fx"),x("./components/annotations"),x("./components/annotations3d"),x("./components/shapes"),x("./components/images"),x("./components/updatemenus"),x("./components/sliders"),x("./components/rangeslider"),x("./components/rangeselector"),x("./components/grid"),x("./components/errorbars"),x("./components/colorscale"),x("./components/colorbar"),x("./components/modebar")]),m([x("./locale-en"),x("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(m(window.PlotlyLocales),delete window.PlotlyLocales),ae.Icons=x("./fonts/ploticon");var n=x("./components/fx"),a=x("./plots/plots");ae.Plots={resize:a.resize,graphJson:a.graphJson,sendDataToCloud:a.sendDataToCloud},ae.Fx={hover:n.hover,unhover:n.unhover,loneHover:n.loneHover,loneUnhover:n.loneUnhover},ae.Snapshot=x("./snapshot"),ae.PlotSchema=x("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":939,"./version":1123,"native-promise-only":245}],482:[function(x,oe,ae){"use strict";oe.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(x,oe,ae){"use strict";ae.isLeftAnchor=function(g){return"left"===g.xanchor||"auto"===g.xanchor&&g.x<=1/3},ae.isCenterAnchor=function(g){return"center"===g.xanchor||"auto"===g.xanchor&&g.x>1/3&&g.x<2/3},ae.isRightAnchor=function(g){return"right"===g.xanchor||"auto"===g.xanchor&&g.x>=2/3},ae.isTopAnchor=function(g){return"top"===g.yanchor||"auto"===g.yanchor&&g.y>=2/3},ae.isMiddleAnchor=function(g){return"middle"===g.yanchor||"auto"===g.yanchor&&g.y>1/3&&g.y<2/3},ae.isBottomAnchor=function(g){return"bottom"===g.yanchor||"auto"===g.yanchor&&g.y<=1/3}},{}],484:[function(x,oe,ae){"use strict";var g=x("./mod"),m=g.mod,w=g.modHalf,y=Math.PI,e=2*y;function r(p){return Math.abs(p[1]-p[0])>e-1e-14}function n(p,u){return w(u-p,e)}function a(p,u){if(r(u))return!0;var i,c;u[0]<u[1]?(i=u[0],c=u[1]):(i=u[1],c=u[0]),(i=m(i,e))>(c=m(c,e))&&(c+=e);var f=m(p,e),l=f+e;return f>=i&&f<=c||l>=i&&l<=c}function t(p,u,i,c,f,l,h){f=f||0,l=l||0;var d,o,_,s,k,M=r([i,c]);function A(R,O){return[R*Math.cos(O)+f,l-R*Math.sin(O)]}M?(d=0,o=y,_=e):i<c?(d=i,_=c):(d=c,_=i),p<u?(s=p,k=u):(s=u,k=p);var E,I=Math.abs(_-d)<=y?0:1;function C(R,O,D){return"A"+[R,R]+" "+[0,I,D]+" "+A(R,O)}return M?E=null===s?"M"+A(k,d)+C(k,o,0)+C(k,_,0)+"Z":"M"+A(s,d)+C(s,o,0)+C(s,_,0)+"ZM"+A(k,d)+C(k,o,1)+C(k,_,1)+"Z":null===s?(E="M"+A(k,d)+C(k,_,0),h&&(E+="L0,0Z")):E="M"+A(s,d)+"L"+A(k,d)+C(k,_,0)+"L"+A(s,_)+C(s,d,1)+"Z",E}oe.exports={deg2rad:function(p){return p/180*y},rad2deg:function(p){return p/y*180},angleDelta:n,angleDist:function(p,u){return Math.abs(n(p,u))},isFullCircle:r,isAngleInsideSector:a,isPtInsideSector:function(p,u,i,c){return!!a(u,c)&&(i[0]<i[1]?(f=i[0],l=i[1]):(f=i[1],l=i[0]),p>=f&&p<=l);var f,l},pathArc:function(p,u,i,c,f){return t(null,p,u,i,c,f,0)},pathSector:function(p,u,i,c,f){return t(null,p,u,i,c,f,1)},pathAnnulus:function(p,u,i,c,f,l){return t(p,u,i,c,f,l,1)}}},{"./mod":510}],485:[function(x,oe,ae){"use strict";var g=Array.isArray,m=ArrayBuffer,w=DataView;function y(n){return m.isView(n)&&!(n instanceof w)}function e(n){return g(n)||y(n)}function r(n,a,t){if(e(n)){if(e(n[0])){for(var p=t,u=0;u<n.length;u++)p=a(p,n[u].length);return p}return n.length}return 0}ae.isTypedArray=y,ae.isArrayOrTypedArray=e,ae.isArray1D=function(n){return!e(n[0])},ae.ensureArray=function(n,a){return g(n)||(n=[]),n.length=a,n},ae.concat=function(){var n,a,t,p,u,i,c,f,l=[],h=!0,d=0;for(t=0;t<arguments.length;t++)(i=(p=arguments[t]).length)&&(a?l.push(p):(a=p,u=i),g(p)?n=!1:(h=!1,d?n!==p.constructor&&(n=!1):n=p.constructor),d+=i);if(!d)return[];if(!l.length)return a;if(h)return a.concat.apply(a,l);if(n){for((c=new n(d)).set(a),t=0;t<l.length;t++)c.set(p=l[t],u),u+=p.length;return c}for(c=new Array(d),f=0;f<a.length;f++)c[f]=a[f];for(t=0;t<l.length;t++){for(p=l[t],f=0;f<p.length;f++)c[u+f]=p[f];u+=f}return c},ae.maxRowLength=function(n){return r(n,Math.max,0)},ae.minRowLength=function(n){return r(n,Math.min,1/0)}},{}],486:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../constants/numerical").BADNUM,w=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;oe.exports=function(y){return"string"==typeof y&&(y=y.replace(w,"")),g(y)?Number(y):m}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(x,oe,ae){"use strict";oe.exports=function(g){var m=g._fullLayout;m._glcanvas&&m._glcanvas.size()&&m._glcanvas.each(function(w){w.regl&&w.regl.clear({color:!0,depth:!0})})}},{}],488:[function(x,oe,ae){"use strict";oe.exports=function(g){g._responsiveChartHandler&&(window.removeEventListener("resize",g._responsiveChartHandler),delete g._responsiveChartHandler)}},{}],489:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("tinycolor2"),w=x("../plots/attributes"),y=x("../components/colorscale/scales"),e=x("../components/color"),r=x("../constants/interactions").DESELECTDIM,n=x("./nested_property"),a=x("./regex").counter,t=x("./mod").modHalf,p=x("./array").isArrayOrTypedArray;function u(i,c){var f=ae.valObjectMeta[c.valType];if(c.arrayOk&&p(i))return!0;if(f.validateFunction)return f.validateFunction(i,c);var l={},h=l;return f.coerceFunction(i,{set:function(o){h=o}},l,c),h!==l}ae.valObjectMeta={data_array:{coerceFunction:function(i,c,f){p(i)?c.set(i):void 0!==f&&c.set(f)}},enumerated:{coerceFunction:function(i,c,f,l){l.coerceNumber&&(i=+i),-1===l.values.indexOf(i)?c.set(f):c.set(i)},validateFunction:function(i,c){c.coerceNumber&&(i=+i);for(var f=c.values,l=0;l<f.length;l++){var h=String(f[l]);if("/"===h.charAt(0)&&"/"===h.charAt(h.length-1)){if(new RegExp(h.substr(1,h.length-2)).test(i))return!0}else if(i===f[l])return!0}return!1}},boolean:{coerceFunction:function(i,c,f){c.set(!0===i||!1===i?i:f)}},number:{coerceFunction:function(i,c,f,l){!g(i)||void 0!==l.min&&i<l.min||void 0!==l.max&&i>l.max?c.set(f):c.set(+i)}},integer:{coerceFunction:function(i,c,f,l){i%1||!g(i)||void 0!==l.min&&i<l.min||void 0!==l.max&&i>l.max?c.set(f):c.set(+i)}},string:{coerceFunction:function(i,c,f,l){c.set("string"!=typeof i?!0!==l.strict&&"number"==typeof i?String(i):f:l.noBlank&&!i?f:i)}},color:{coerceFunction:function(i,c,f){m(i).isValid()?c.set(i):c.set(f)}},colorlist:{coerceFunction:function(i,c,f){Array.isArray(i)&&i.length&&i.every(function(l){return m(l).isValid()})?c.set(i):c.set(f)}},colorscale:{coerceFunction:function(i,c,f){c.set(y.get(i,f))}},angle:{coerceFunction:function(i,c,f){"auto"===i?c.set("auto"):g(i)?c.set(t(+i,360)):c.set(f)}},subplotid:{coerceFunction:function(i,c,f,l){var h=l.regex||a(f);"string"==typeof i&&h.test(i)?c.set(i):c.set(f)},validateFunction:function(i,c){var f=c.dflt;return i===f||"string"==typeof i&&!!a(f).test(i)}},flaglist:{coerceFunction:function(i,c,f,l){if("string"==typeof i)if(-1===(l.extras||[]).indexOf(i)){for(var h=i.split("+"),d=0;d<h.length;){var o=h[d];-1===l.flags.indexOf(o)||h.indexOf(o)<d?h.splice(d,1):d++}c.set(h.length?h.join("+"):f)}else c.set(i);else c.set(f)}},any:{coerceFunction:function(i,c,f){c.set(void 0===i?f:i)}},info_array:{coerceFunction:function(i,c,f,l){function h(L,B,j){var W;return void 0===j&&(j=B.dflt),ae.valObjectMeta[B.valType].coerceFunction(L,{set:function(Q){W=Q}},j,B),W}var d=2===l.dimensions||"1-2"===l.dimensions&&Array.isArray(i)&&Array.isArray(i[0]);if(Array.isArray(i)){var o,_,s,M,A,E=l.items,I=[],C=Array.isArray(E),R=C&&d&&Array.isArray(E[0]),O=d&&C&&!R,D=C&&!O?E.length:i.length;if(f=Array.isArray(f)?f:[],d)for(o=0;o<D;o++)for(I[o]=[],s=Array.isArray(i[o])?i[o]:[],M=O?E.length:C?E[o].length:s.length,_=0;_<M;_++)void 0!==(A=h(s[_],O?E[_]:C?E[o][_]:E,(f[o]||[])[_]))&&(I[o][_]=A);else for(o=0;o<D;o++)void 0!==(A=h(i[o],C?E[o]:E,f[o]))&&(I[o]=A);c.set(I)}else c.set(f)},validateFunction:function(i,c){if(!Array.isArray(i))return!1;var f=c.items,l=Array.isArray(f),h=2===c.dimensions;if(!c.freeLength&&i.length!==f.length)return!1;for(var d=0;d<i.length;d++)if(h){if(!Array.isArray(i[d])||!c.freeLength&&i[d].length!==f[d].length)return!1;for(var o=0;o<i[d].length;o++)if(!u(i[d][o],l?f[d][o]:f))return!1}else if(!u(i[d],l?f[d]:f))return!1;return!0}}},ae.coerce=function(i,c,f,l,h){var d=n(f,l).get(),o=n(i,l),_=n(c,l),s=o.get(),k=c._template;if(void 0===s&&k&&(s=n(k,l).get(),k=0),void 0===h&&(h=d.dflt),d.arrayOk&&p(s))return _.set(s),s;var M=ae.valObjectMeta[d.valType].coerceFunction;M(s,_,h,d);var A=_.get();return k&&A===h&&!u(s,d)&&(M(s=n(k,l).get(),_,h,d),A=_.get()),A},ae.coerce2=function(i,c,f,l,h){var d=n(i,l),o=ae.coerce(i,c,f,l,h);return null!=d.get()&&o},ae.coerceFont=function(i,c,f){var l={};return l.family=i(c+".family",(f=f||{}).family),l.size=i(c+".size",f.size),l.color=i(c+".color",f.color),l},ae.coercePattern=function(i,c,f,l){if(i(c+".shape")){i(c+".solidity"),i(c+".size");var h="overlay"===i(c+".fillmode");if(!l){var d=i(c+".bgcolor",h?f:void 0);i(c+".fgcolor",h?e.contrast(d):f)}i(c+".fgopacity",h?.5:1)}},ae.coerceHoverinfo=function(i,c,f){var l,h=c._module.attributes,d=h.hoverinfo?h:w,o=d.hoverinfo;if(1===f._dataLength){var _="all"===o.dflt?o.flags.slice():o.dflt.split("+");_.splice(_.indexOf("name"),1),l=_.join("+")}return ae.coerce(i,c,d,"hoverinfo",l)},ae.coerceSelectionMarkerOpacity=function(i,c){if(i.marker){var f,l,h=i.marker.opacity;void 0!==h&&(p(h)||i.selected||i.unselected||(f=h,l=r*h),c("selected.marker.opacity",f),c("unselected.marker.opacity",l))}},ae.validate=u},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(x,oe,ae){"use strict";var g,m,w=x("d3-time-format").timeFormat,y=x("fast-isnumeric"),e=x("./loggers"),r=x("./mod").mod,n=x("../constants/numerical"),a=n.BADNUM,t=n.ONEDAY,p=n.ONEHOUR,u=n.ONEMIN,i=n.ONESEC,c=n.EPOCHJD,f=x("../registry"),l=x("d3-time-format").utcFormat,h=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,o=(new Date).getFullYear()-70;function _(B){return B&&f.componentsRegistry.calendars&&"string"==typeof B&&"gregorian"!==B}function s(B,j){return String(B+Math.pow(10,j)).substr(1)}ae.dateTick0=function(B,j){var Q,ne,W=(ne=!!j,_(Q=B)?ne?f.getComponentMethod("calendars","CANONICAL_SUNDAY")[Q]:f.getComponentMethod("calendars","CANONICAL_TICK")[Q]:ne?"2000-01-02":"2000-01-01");if(j<2)return W;var Y=ae.dateTime2ms(W,B);return ae.ms2DateTime(Y+=t*(j-1),0,B)},ae.dfltRange=function(B){return _(B)?f.getComponentMethod("calendars","DFLTRANGE")[B]:["2000-01-01","2001-01-01"]},ae.isJSDate=function(B){return"object"==typeof B&&null!==B&&"function"==typeof B.getTime},ae.dateTime2ms=function(B,j){if(ae.isJSDate(B)){var W=B.getTimezoneOffset()*u,Y=(B.getUTCMinutes()-B.getMinutes())*u+(B.getUTCSeconds()-B.getSeconds())*i+(B.getUTCMilliseconds()-B.getMilliseconds());if(Y){var Q=3*u;W=W-Q/2+r(Y-W+Q/2,Q)}return(B=Number(B)-W)>=g&&B<=m?B:a}if("string"!=typeof B&&"number"!=typeof B)return a;B=String(B);var ne=_(j),X=B.charAt(0);!ne||"G"!==X&&"g"!==X||(B=B.substr(1),j="");var $=ne&&"chinese"===j.substr(0,7),re=B.match($?d:h);if(!re)return a;var H=re[1],U=re[3]||"1",G=Number(re[5]||1),ie=Number(re[7]||0),q=Number(re[9]||0),ee=Number(re[11]||0);if(ne){if(2===H.length)return a;var te;H=Number(H);try{var se=f.getComponentMethod("calendars","getCal")(j);if($){var ue="i"===U.charAt(U.length-1);U=parseInt(U,10),te=se.newDate(H,se.toMonthIndex(H,U,ue),G)}else te=se.newDate(H,Number(U),G)}catch(he){return a}return te?(te.toJD()-c)*t+ie*p+q*u+ee*i:a}H=2===H.length?(Number(H)+2e3-o)%100+o:Number(H),U-=1;var de=new Date(Date.UTC(2e3,U,G,ie,q));return de.setUTCFullYear(H),de.getUTCMonth()!==U||de.getUTCDate()!==G?a:de.getTime()+ee*i},g=ae.MIN_MS=ae.dateTime2ms("-9999"),m=ae.MAX_MS=ae.dateTime2ms("9999-12-31 23:59:59.9999"),ae.isDateTime=function(B,j){return ae.dateTime2ms(B,j)!==a};var k=90*t,M=3*p,A=5*u;function E(B,j,W,Y,Q){if((j||W||Y||Q)&&(B+=" "+s(j,2)+":"+s(W,2),(Y||Q)&&(B+=":"+s(Y,2),Q))){for(var ne=4;Q%10==0;)ne-=1,Q/=10;B+="."+s(Q,ne)}return B}ae.ms2DateTime=function(B,j,W){if("number"!=typeof B||!(B>=g&&B<=m))return a;j||(j=0);var Y,Q,ne,X,$,re,H=Math.floor(10*r(B+.05,1)),U=Math.round(B-H/10);if(_(W)){var G=Math.floor(U/t)+c,ie=Math.floor(r(B,t));try{Y=f.getComponentMethod("calendars","getCal")(W).fromJD(G).formatDate("yyyy-mm-dd")}catch(q){Y=l("G%Y-%m-%d")(new Date(U))}if("-"===Y.charAt(0))for(;Y.length<11;)Y="-0"+Y.substr(1);else for(;Y.length<10;)Y="0"+Y;Q=j<k?Math.floor(ie/p):0,ne=j<k?Math.floor(ie%p/u):0,X=j<M?Math.floor(ie%u/i):0,$=j<A?ie%i*10+H:0}else re=new Date(U),Y=l("%Y-%m-%d")(re),Q=j<k?re.getUTCHours():0,ne=j<k?re.getUTCMinutes():0,X=j<M?re.getUTCSeconds():0,$=j<A?10*re.getUTCMilliseconds()+H:0;return E(Y,Q,ne,X,$)},ae.ms2DateTimeLocal=function(B){if(!(B>=g+t&&B<=m-t))return a;var j=Math.floor(10*r(B+.05,1)),W=new Date(Math.round(B-j/10));return E(w("%Y-%m-%d")(W),W.getHours(),W.getMinutes(),W.getSeconds(),10*W.getUTCMilliseconds()+j)},ae.cleanDate=function(B,j,W){if(B===a)return j;if(ae.isJSDate(B)||"number"==typeof B&&isFinite(B)){if(_(W))return e.error("JS Dates and milliseconds are incompatible with world calendars",B),j;if(!(B=ae.ms2DateTimeLocal(+B))&&void 0!==j)return j}else if(!ae.isDateTime(B,W))return e.error("unrecognized date",B),j;return B};var I=/%\d?f/g,C=/%h/g,R={1:"1",2:"1",3:"2",4:"2"};function O(B,j,W,Y){B=B.replace(I,function(ne){var X=Math.min(+ne.charAt(1)||6,6);return(j/1e3%1+2).toFixed(X).substr(2).replace(/0+$/,"")||"0"});var Q=new Date(Math.floor(j+.05));if(B=B.replace(C,function(){return R[W("%q")(Q)]}),_(Y))try{B=f.getComponentMethod("calendars","worldCalFmt")(B,j,Y)}catch(ne){return"Invalid"}return W(B)(Q)}var D=[59,59.9,59.99,59.999,59.9999];ae.formatDate=function(B,j,W,Y,Q,ne){if(Q=_(Q)&&Q,!j)if("y"===W)j=ne.year;else if("m"===W)j=ne.month;else{if("d"!==W)return function(X,$){var re=r(X+.05,t),H=s(Math.floor(re/p),2)+":"+s(r(Math.floor(re/u),60),2);if("M"!==$){y($)||($=0);var U=(100+Math.min(r(X/i,60),D[$])).toFixed($).substr(1);$>0&&(U=U.replace(/0+$/,"").replace(/[\.]$/,"")),H+=":"+U}return H}(B,W)+"\n"+O(ne.dayMonthYear,B,Y,Q);j=ne.dayMonth+"\n"+ne.year}return O(j,B,Y,Q)};var L=3*t;ae.incrementMonth=function(B,j,W){W=_(W)&&W;var Y=r(B,t);if(B=Math.round(B-Y),W)try{var Q=Math.round(B/t)+c,ne=f.getComponentMethod("calendars","getCal")(W),X=ne.fromJD(Q);return j%12?ne.add(X,j,"m"):ne.add(X,j/12,"y"),(X.toJD()-c)*t+Y}catch(re){e.error("invalid ms "+B+" in calendar "+W)}var $=new Date(B+L);return $.setUTCMonth($.getUTCMonth()+j)+Y-L},ae.findExactDates=function(B,j){for(var W,Y,Q=0,ne=0,X=0,$=0,re=_(j)&&f.getComponentMethod("calendars","getCal")(j),H=0;H<B.length;H++)if(y(Y=B[H])){if(!(Y%t))if(re)try{1===(W=re.fromJD(Y/t+c)).day()?1===W.month()?Q++:ne++:X++}catch(G){}else 1===(W=new Date(Y)).getUTCDate()?0===W.getUTCMonth()?Q++:ne++:X++}else $++;X+=ne+=Q;var U=B.length-$;return{exactYears:Q/U,exactMonths:ne/U,exactDays:X/U}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("./loggers"),w=x("./matrix"),y=x("gl-mat4");function e(p){var u=p&&p.parentNode;u&&u.removeChild(p)}function r(p,u,i){var c="plotly.js-style-"+p,f=document.getElementById(c);f||((f=document.createElement("style")).setAttribute("id",c),f.appendChild(document.createTextNode("")),document.head.appendChild(f));var l=f.sheet;l.insertRule?l.insertRule(u+"{"+i+"}",0):l.addRule?l.addRule(u,i,0):m.warn("addStyleRule failed")}function n(p){var u=window.getComputedStyle(p,null),i=u.getPropertyValue("-webkit-transform")||u.getPropertyValue("-moz-transform")||u.getPropertyValue("-ms-transform")||u.getPropertyValue("-o-transform")||u.getPropertyValue("transform");return"none"===i?null:i.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(c){return+c})}function a(p){for(var u=[];t(p);)u.push(p),p=p.parentNode;return u}function t(p){return p&&(p instanceof Element||p instanceof HTMLElement)}oe.exports={getGraphDiv:function(p){var u;if("string"==typeof p){if(null===(u=document.getElementById(p)))throw new Error("No DOM element with id '"+p+"' exists on the page.");return u}if(null==p)throw new Error("DOM element provided is null or undefined");return p},isPlotDiv:function(p){var u=g.select(p);return u.node()instanceof HTMLElement&&u.size()&&u.classed("js-plotly-plot")},removeElement:e,addStyleRule:function(p,u){r("global",p,u)},addRelatedStyleRule:r,deleteRelatedStyleRule:function(p){var i=document.getElementById("plotly.js-style-"+p);i&&e(i)},getFullTransformMatrix:function(p){var u=a(p),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return u.forEach(function(c){var f=n(c);if(f){var l=w.convertCssMatrix(f);i=y.multiply(i,i,l)}}),i},getElementTransformMatrix:n,getElementAndAncestors:a,equalDomRects:function(p,u){return p&&u&&p.x===u.x&&p.y===u.y&&p.top===u.top&&p.left===u.left&&p.right===u.right&&p.bottom===u.bottom}}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(x,oe,ae){"use strict";var g=x("events").EventEmitter;oe.exports={init:function(w){if(w._ev instanceof g)return w;var y=new g,e=new g;return w._ev=y,w._internalEv=e,w.on=y.on.bind(y),w.once=y.once.bind(y),w.removeListener=y.removeListener.bind(y),w.removeAllListeners=y.removeAllListeners.bind(y),w._internalOn=e.on.bind(e),w._internalOnce=e.once.bind(e),w._removeInternalListener=e.removeListener.bind(e),w._removeAllInternalListeners=e.removeAllListeners.bind(e),w.emit=function(r,n){"undefined"!=typeof jQuery&&jQuery(w).trigger(r,n),y.emit(r,n),e.emit(r,n)},w},triggerHandler:function(w,y,e){var r,n;"undefined"!=typeof jQuery&&(r=jQuery(w).triggerHandler(y,e));var a=w._ev;if(!a)return r;var t,p=a._events[y];if(!p)return r;function u(i){return i.listener?(a.removeListener(y,i.listener),i.fired?void 0:(i.fired=!0,i.listener.apply(a,[e]))):i.apply(a,[e])}for(p=Array.isArray(p)?p:[p],t=0;t<p.length-1;t++)u(p[t]);return n=u(p[t]),void 0!==r?r:n},purge:function(w){return delete w._ev,delete w.on,delete w.once,delete w.removeListener,delete w.removeAllListeners,delete w.emit,delete w._ev,delete w._internalEv,delete w._internalOn,delete w._internalOnce,delete w._removeInternalListener,delete w._removeAllInternalListeners,w}}},{events:84}],493:[function(x,oe,ae){"use strict";var g=x("./is_plain_object.js"),m=Array.isArray;function w(y,e,r,n){var a,t,p,u,i,c,f=y[0],l=y.length;if(2===l&&m(f)&&m(y[1])&&0===f.length){if(function(d,o){var _,s;for(_=0;_<d.length;_++){if(null!==(s=d[_])&&"object"==typeof s)return!1;void 0!==s&&(o[_]=s)}return!0}(y[1],f))return f;f.splice(0,f.length)}for(var h=1;h<l;h++)for(t in a=y[h])p=f[t],u=a[t],n&&m(u)?f[t]=u:e&&u&&(g(u)||(i=m(u)))?(i?(i=!1,c=p&&m(p)?p:[]):c=p&&g(p)?p:{},f[t]=w([c,u],e,r,n)):(void 0!==u||r)&&(f[t]=u);return f}ae.extendFlat=function(){return w(arguments,!1,!1,!1)},ae.extendDeep=function(){return w(arguments,!0,!1,!1)},ae.extendDeepAll=function(){return w(arguments,!0,!0,!1)},ae.extendDeepNoArrays=function(){return w(arguments,!0,!1,!0)}},{"./is_plain_object.js":504}],494:[function(x,oe,ae){"use strict";oe.exports=function(g){for(var m={},w=[],y=0,e=0;e<g.length;e++){var r=g[e];1!==m[r]&&(m[r]=1,w[y++]=r)}return w}},{}],495:[function(x,oe,ae){"use strict";function g(w){return!0===w.visible}function m(w){var y=w[0].trace;return!0===y.visible&&0!==y._length}oe.exports=function(w){for(var y,e=(y=w,Array.isArray(y)&&Array.isArray(y[0])&&y[0][0]&&y[0][0].trace?m:g),r=[],n=0;n<w.length;n++){var a=w[n];e(a)&&r.push(a)}return r}},{}],496:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("country-regex"),w=x("@turf/area"),y=x("@turf/centroid"),e=x("@turf/bbox"),r=x("./identity"),n=x("./loggers"),a=x("./is_plain_object"),t=x("./nested_property"),p=x("./polygon"),u=Object.keys(m),i={"ISO-3":r,"USA-states":r,"country names":function(f){for(var l=0;l<u.length;l++){var h=u[l];if(new RegExp(m[h]).test(f.trim().toLowerCase()))return h}return n.log("Unrecognized country name: "+f+"."),!1}};function c(f){var l=f.geojson,h=window.PlotlyGeoAssets||{},d="string"==typeof l?h[l]:l;return a(d)?d:(n.error("Oops ... something went wrong when fetching "+l),!1)}oe.exports={locationToFeature:function(f,l,h){if(!l||"string"!=typeof l)return!1;var d,o,_,s=i[f](l);if(s){if("USA-states"===f)for(d=[],_=0;_<h.length;_++)(o=h[_]).properties&&o.properties.gu&&"USA"===o.properties.gu&&d.push(o);else d=h;for(_=0;_<d.length;_++)if((o=d[_]).id===s)return o;n.log(["Location with id",s,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(f){var l,h,d,o,_=f.geometry,s=_.coordinates,k=f.id,M=[];function A(E){for(var I=0;I<E.length-1;I++)if(E[I][0]>0&&E[I+1][0]<0)return I;return null}switch(l="RUS"===k||"FJI"===k?function(E){var I;if(null===A(E))I=E;else for(I=new Array(E.length),o=0;o<E.length;o++)I[o]=[E[o][0]<0?E[o][0]+360:E[o][0],E[o][1]];M.push(p.tester(I))}:"ATA"===k?function(E){var I=A(E);if(null===I)return M.push(p.tester(E));var C=new Array(E.length+1),R=0;for(o=0;o<E.length;o++)o>I?C[R++]=[E[o][0]+360,E[o][1]]:o===I?(C[R++]=E[o],C[R++]=[E[o][0],-90]):C[R++]=E[o];var O=p.tester(C);O.pts.pop(),M.push(O)}:function(E){M.push(p.tester(E))},_.type){case"MultiPolygon":for(h=0;h<s.length;h++)for(d=0;d<s[h].length;d++)l(s[h][d]);break;case"Polygon":for(h=0;h<s.length;h++)l(s[h])}return M},getTraceGeojson:c,extractTraceFeature:function(f){var l=f[0].trace,h=c(l);if(!h)return!1;var d,o={},_=[];for(d=0;d<l._length;d++){var s=f[d];(s.loc||0===s.loc)&&(o[s.loc]=s)}function k(E){var I=t(E,l.featureidkey||"id").get(),C=o[I];if(C){var R=E.geometry;if("Polygon"===R.type||"MultiPolygon"===R.type){var O={type:"Feature",id:I,geometry:R,properties:{}};O.properties.ct=function(D){var L,B=D.geometry;if("MultiPolygon"===B.type)for(var j=B.coordinates,W=0,Y=0;Y<j.length;Y++){var Q={type:"Polygon",coordinates:j[Y]},ne=w.default(Q);ne>W&&(W=ne,L=Q)}else L=B;return y.default(L).geometry.coordinates}(O),C.fIn=E,C.fOut=O,_.push(O)}else n.log(["Location",C.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete o[I]}switch(h.type){case"FeatureCollection":var M=h.features;for(d=0;d<M.length;d++)k(M[d]);break;case"Feature":k(h);break;default:return n.warn(["Invalid GeoJSON type",(h.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var A in o)n.log(["Location *"+A+"*","does not have a matching feature with id-key","*"+l.featureidkey+"*."].join(" "));return _},fetchTraceGeoData:function(f){var l=window.PlotlyGeoAssets||{},h=[];function d(k){return new Promise(function(M,A){g.json(k,function(E,I){return E?(delete l[k],A(new Error(404===E.status?'GeoJSON at URL "'+k+'" does not exist.':"Unexpected error while fetching from "+k))):(l[k]=I,M(I))})})}function o(k){return new Promise(function(M,A){var E=0,I=setInterval(function(){return l[k]&&"pending"!==l[k]?(clearInterval(I),M(l[k])):E>100?(clearInterval(I),A("Unexpected error while fetching from "+k)):void E++},50)})}for(var _=0;_<f.length;_++){var s=f[_][0].trace.geojson;"string"==typeof s&&(l[s]?"pending"===l[s]&&h.push(o(s)):(l[s]="pending",h.push(d(s))))}return h},computeBbox:function(f){return e.default(f)}}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(x,oe,ae){"use strict";var g=x("../constants/numerical").BADNUM;ae.calcTraceToLineCoords=function(m){for(var w=m[0].trace.connectgaps,y=[],e=[],r=0;r<m.length;r++){var n=m[r].lonlat;n[0]!==g?e.push(n):!w&&e.length>0&&(y.push(e),e=[])}return e.length>0&&y.push(e),y},ae.makeLine=function(m){return 1===m.length?{type:"LineString",coordinates:m[0]}:{type:"MultiLineString",coordinates:m}},ae.makePolygon=function(m){if(1===m.length)return{type:"Polygon",coordinates:m};for(var w=new Array(m.length),y=0;y<m.length;y++)w[y]=[m[y]];return{type:"MultiPolygon",coordinates:w}},ae.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(x,oe,ae){"use strict";var g,m,w,y=x("./mod").mod;function e(n,a,t,p,u,i,c,f){var l=t-n,h=u-n,d=c-u,o=p-a,_=i-a,s=f-i,k=l*s-d*o;if(0===k)return null;var M=(h*s-d*_)/k,A=(h*o-l*_)/k;return A<0||A>1||M<0||M>1?null:{x:n+l*M,y:a+o*M}}function r(n,a,t,p,u){var i=p*n+u*a;if(i<0)return p*p+u*u;if(i>t){var c=p-n,f=u-a;return c*c+f*f}var l=p*a-u*n;return l*l/t}ae.segmentsIntersect=e,ae.segmentDistance=function(n,a,t,p,u,i,c,f){if(e(n,a,t,p,u,i,c,f))return 0;var l=t-n,h=p-a,d=c-u,o=f-i,_=l*l+h*h,s=d*d+o*o,k=Math.min(r(l,h,_,u-n,i-a),r(l,h,_,c-n,f-a),r(d,o,s,n-u,a-i),r(d,o,s,t-u,p-i));return Math.sqrt(k)},ae.getTextLocation=function(n,a,t,p){if(n===m&&p===w||(g={},m=n,w=p),g[t])return g[t];var u=n.getPointAtLength(y(t-p/2,a)),i=n.getPointAtLength(y(t+p/2,a)),c=Math.atan((i.y-u.y)/(i.x-u.x)),f=n.getPointAtLength(y(t,a)),l={x:(4*f.x+u.x+i.x)/6,y:(4*f.y+u.y+i.y)/6,theta:c};return g[t]=l,l},ae.clearLocationCache=function(){m=null},ae.getVisibleSegment=function(n,a,t){var p,u,i=a.left,c=a.right,f=a.top,l=a.bottom,h=0,d=n.getTotalLength(),o=d;function _(k){var M=n.getPointAtLength(k);0===k?p=M:k===d&&(u=M);var A=M.x<i?i-M.x:M.x>c?M.x-c:0,E=M.y<f?f-M.y:M.y>l?M.y-l:0;return Math.sqrt(A*A+E*E)}for(var s=_(h);s;){if((h+=s+t)>o)return;s=_(h)}for(s=_(o);s;){if(h>(o-=s+t))return;s=_(o)}return{min:h,max:o,len:o-h,total:d,isClosed:0===h&&o===d&&Math.abs(p.x-u.x)<.1&&Math.abs(p.y-u.y)<.1}},ae.findPointOnPath=function(n,a,t,p){for(var u,i,c,f=(p=p||{}).pathLength||n.getTotalLength(),l=p.tolerance||.001,h=p.iterationLimit||30,d=n.getPointAtLength(0)[t]>n.getPointAtLength(f)[t]?-1:1,o=0,_=0,s=f;o<h;){if(c=(i=n.getPointAtLength(u=(_+s)/2))[t]-a,Math.abs(c)<l)return i;d*c>0?s=u:_=u,o++}return i}},{"./mod":510}],499:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("tinycolor2"),w=x("color-normalize"),y=x("../components/colorscale"),e=x("../components/color/attributes").defaultLine,r=x("./array").isArrayOrTypedArray,n=w(e);function a(u,i){var c=u;return c[3]*=i,c}function t(u){if(g(u))return n;var i=w(u);return i.length?i:n}function p(u){return g(u)?u:1}oe.exports={formatColor:function(u,i,c){var f,l,h,d,o,_=u.color,s=r(_),k=r(i),M=y.extractOpts(u),A=[];if(f=void 0!==M.colorscale?y.makeColorScaleFuncFromTrace(u):t,l=s?function(I,C){return void 0===I[C]?n:w(f(I[C]))}:t,h=k?function(I,C){return void 0===I[C]?1:p(I[C])}:p,s||k)for(var E=0;E<c;E++)d=l(_,E),o=h(i,E),A[E]=a(d,o);else A=a(w(_),i);return A},parseColorScale:function(u){var i=y.extractOpts(u),c=i.colorscale;return i.reversescale&&(c=y.flipScale(i.colorscale)),c.map(function(f){var l=f[0],h=m(f[1]).toRgb();return{index:l,rgb:[h.r,h.g,h.b,h.a]}})}}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(x,oe,ae){"use strict";var g=x("./identity");function m(w){return[w]}oe.exports={keyFun:function(w){return w.key},repeat:m,descend:g,wrap:m,unwrap:function(w){return w[0]}}},{"./identity":501}],501:[function(x,oe,ae){"use strict";oe.exports=function(g){return g}},{}],502:[function(x,oe,ae){"use strict";oe.exports=function(g,m){if(!m)return g;var w=1/Math.abs(m),y=w>1?(w*g+w*m)/w:g+m,e=String(y).length;if(e>16){var r=String(m).length;if(e>=String(g).length+r){var n=parseFloat(y).toPrecision(12);-1===n.indexOf("e+")&&(y=+n)}}return y}},{}],503:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("d3-time-format").utcFormat,w=x("d3-format").format,y=x("fast-isnumeric"),e=x("../constants/numerical"),r=e.FP_SAFE,n=-r,a=e.BADNUM,t=oe.exports={};t.adjustFormat=function(H){return!H||/^\d[.]\df/.test(H)||/[.]\d%/.test(H)?H:"0.f"===H?"~f":/^\d%/.test(H)?"~%":/^\ds/.test(H)?"~s":!/^[~,.0$]/.test(H)&&/[&fps]/.test(H)?"~"+H:H};var p={};t.warnBadFormat=function(H){var U=String(H);p[U]||(p[U]=1,t.warn('encountered bad format: "'+U+'"'))},t.noFormat=function(H){return String(H)},t.numberFormat=function(H){var U;try{U=w(t.adjustFormat(H))}catch(G){return t.warnBadFormat(H),t.noFormat}return U},t.nestedProperty=x("./nested_property"),t.keyedContainer=x("./keyed_container"),t.relativeAttr=x("./relative_attr"),t.isPlainObject=x("./is_plain_object"),t.toLogRange=x("./to_log_range"),t.relinkPrivateKeys=x("./relink_private");var u=x("./array");t.isTypedArray=u.isTypedArray,t.isArrayOrTypedArray=u.isArrayOrTypedArray,t.isArray1D=u.isArray1D,t.ensureArray=u.ensureArray,t.concat=u.concat,t.maxRowLength=u.maxRowLength,t.minRowLength=u.minRowLength;var i=x("./mod");t.mod=i.mod,t.modHalf=i.modHalf;var c=x("./coerce");t.valObjectMeta=c.valObjectMeta,t.coerce=c.coerce,t.coerce2=c.coerce2,t.coerceFont=c.coerceFont,t.coercePattern=c.coercePattern,t.coerceHoverinfo=c.coerceHoverinfo,t.coerceSelectionMarkerOpacity=c.coerceSelectionMarkerOpacity,t.validate=c.validate;var f=x("./dates");t.dateTime2ms=f.dateTime2ms,t.isDateTime=f.isDateTime,t.ms2DateTime=f.ms2DateTime,t.ms2DateTimeLocal=f.ms2DateTimeLocal,t.cleanDate=f.cleanDate,t.isJSDate=f.isJSDate,t.formatDate=f.formatDate,t.incrementMonth=f.incrementMonth,t.dateTick0=f.dateTick0,t.dfltRange=f.dfltRange,t.findExactDates=f.findExactDates,t.MIN_MS=f.MIN_MS,t.MAX_MS=f.MAX_MS;var l=x("./search");t.findBin=l.findBin,t.sorterAsc=l.sorterAsc,t.sorterDes=l.sorterDes,t.distinctVals=l.distinctVals,t.roundUp=l.roundUp,t.sort=l.sort,t.findIndexOfMin=l.findIndexOfMin,t.sortObjectKeys=x("./sort_object_keys");var h=x("./stats");t.aggNums=h.aggNums,t.len=h.len,t.mean=h.mean,t.median=h.median,t.midRange=h.midRange,t.variance=h.variance,t.stdev=h.stdev,t.interp=h.interp;var d=x("./matrix");t.init2dArray=d.init2dArray,t.transposeRagged=d.transposeRagged,t.dot=d.dot,t.translationMatrix=d.translationMatrix,t.rotationMatrix=d.rotationMatrix,t.rotationXYMatrix=d.rotationXYMatrix,t.apply3DTransform=d.apply3DTransform,t.apply2DTransform=d.apply2DTransform,t.apply2DTransform2=d.apply2DTransform2,t.convertCssMatrix=d.convertCssMatrix,t.inverseTransformMatrix=d.inverseTransformMatrix;var o=x("./angles");t.deg2rad=o.deg2rad,t.rad2deg=o.rad2deg,t.angleDelta=o.angleDelta,t.angleDist=o.angleDist,t.isFullCircle=o.isFullCircle,t.isAngleInsideSector=o.isAngleInsideSector,t.isPtInsideSector=o.isPtInsideSector,t.pathArc=o.pathArc,t.pathSector=o.pathSector,t.pathAnnulus=o.pathAnnulus;var _=x("./anchor_utils");t.isLeftAnchor=_.isLeftAnchor,t.isCenterAnchor=_.isCenterAnchor,t.isRightAnchor=_.isRightAnchor,t.isTopAnchor=_.isTopAnchor,t.isMiddleAnchor=_.isMiddleAnchor,t.isBottomAnchor=_.isBottomAnchor;var s=x("./geometry2d");t.segmentsIntersect=s.segmentsIntersect,t.segmentDistance=s.segmentDistance,t.getTextLocation=s.getTextLocation,t.clearLocationCache=s.clearLocationCache,t.getVisibleSegment=s.getVisibleSegment,t.findPointOnPath=s.findPointOnPath;var k=x("./extend");t.extendFlat=k.extendFlat,t.extendDeep=k.extendDeep,t.extendDeepAll=k.extendDeepAll,t.extendDeepNoArrays=k.extendDeepNoArrays;var M=x("./loggers");t.log=M.log,t.warn=M.warn,t.error=M.error;var A=x("./regex");t.counterRegex=A.counter;var E=x("./throttle");t.throttle=E.throttle,t.throttleDone=E.done,t.clearThrottle=E.clear;var I=x("./dom");function C(H){var U={};for(var G in H)for(var ie=H[G],q=0;q<ie.length;q++)U[ie[q]]=+G;return U}t.getGraphDiv=I.getGraphDiv,t.isPlotDiv=I.isPlotDiv,t.removeElement=I.removeElement,t.addStyleRule=I.addStyleRule,t.addRelatedStyleRule=I.addRelatedStyleRule,t.deleteRelatedStyleRule=I.deleteRelatedStyleRule,t.getFullTransformMatrix=I.getFullTransformMatrix,t.getElementTransformMatrix=I.getElementTransformMatrix,t.getElementAndAncestors=I.getElementAndAncestors,t.equalDomRects=I.equalDomRects,t.clearResponsive=x("./clear_responsive"),t.preserveDrawingBuffer=x("./preserve_drawing_buffer"),t.makeTraceGroups=x("./make_trace_groups"),t._=x("./localize"),t.notifier=x("./notifier"),t.filterUnique=x("./filter_unique"),t.filterVisible=x("./filter_visible"),t.pushUnique=x("./push_unique"),t.increment=x("./increment"),t.cleanNumber=x("./clean_number"),t.ensureNumber=function(H){return y(H)?(H=Number(H))>r||H<n?a:H:a},t.isIndex=function(H,U){return!(void 0!==U&&H>=U)&&y(H)&&H>=0&&H%1==0},t.noop=x("./noop"),t.identity=x("./identity"),t.repeat=function(H,U){for(var G=new Array(U),ie=0;ie<U;ie++)G[ie]=H;return G},t.swapAttrs=function(H,U,G,ie){G||(G="x"),ie||(ie="y");for(var q=0;q<U.length;q++){var ee=U[q],te=t.nestedProperty(H,ee.replace("?",G)),se=t.nestedProperty(H,ee.replace("?",ie)),ue=te.get();te.set(se.get()),se.set(ue)}},t.raiseToTop=function(H){H.parentNode.appendChild(H)},t.cancelTransition=function(H){return H.transition().duration(0)},t.constrain=function(H,U,G){return U>G?Math.max(G,Math.min(U,H)):Math.max(U,Math.min(G,H))},t.bBoxIntersect=function(H,U,G){return H.left<=U.right+(G=G||0)&&U.left<=H.right+G&&H.top<=U.bottom+G&&U.top<=H.bottom+G},t.simpleMap=function(H,U,G,ie,q){for(var ee=H.length,te=new Array(ee),se=0;se<ee;se++)te[se]=U(H[se],G,ie,q);return te},t.randstr=function H(U,G,ie,q){if(ie||(ie=16),void 0===G&&(G=24),G<=0)return"0";var ee,te,se=Math.log(Math.pow(2,G))/Math.log(ie),ue="";for(ee=2;se===1/0;ee*=2)se=Math.log(Math.pow(2,G/ee))/Math.log(ie)*ee;var de=se-Math.floor(se);for(ee=0;ee<Math.floor(se);ee++)ue=Math.floor(Math.random()*ie).toString(ie)+ue;de&&(te=Math.pow(ie,de),ue=Math.floor(Math.random()*te).toString(ie)+ue);var he=parseInt(ue,ie);return U&&U[ue]||he!==1/0&&he>=Math.pow(2,G)?q>10?(t.warn("randstr failed uniqueness"),ue):H(U,G,ie,(q||0)+1):ue},t.OptionControl=function(H,U){H||(H={}),U||(U="opt");var G={optionList:[],_newoption:function(ie){ie[U]=H,G[ie.name]=ie,G.optionList.push(ie)}};return G["_"+U]=H,G},t.smooth=function(H,U){if((U=Math.round(U)||0)<2)return H;var G,ie,q,ee,te=H.length,se=2*te,ue=2*U-1,de=new Array(ue),he=new Array(te);for(G=0;G<ue;G++)de[G]=(1-Math.cos(Math.PI*(G+1)/U))/(2*U);for(G=0;G<te;G++){for(ee=0,ie=0;ie<ue;ie++)(q=G+ie+1-U)<-te?q-=se*Math.round(q/se):q>=se&&(q-=se*Math.floor(q/se)),q<0?q=-1-q:q>=te&&(q=se-1-q),ee+=H[q]*de[ie];he[G]=ee}return he},t.syncOrAsync=function(H,U,G){var ie;function q(){return t.syncOrAsync(H,U,G)}for(;H.length;)if((ie=(0,H.splice(0,1)[0])(U))&&ie.then)return ie.then(q);return G&&G(U)},t.stripTrailingSlash=function(H){return"/"===H.substr(-1)?H.substr(0,H.length-1):H},t.noneOrAll=function(H,U,G){if(H){var ie,q=!1,ee=!0;for(ie=0;ie<G.length;ie++)null!=H[G[ie]]?q=!0:ee=!1;if(q&&!ee)for(ie=0;ie<G.length;ie++)H[G[ie]]=U[G[ie]]}},t.mergeArray=function(H,U,G,ie){var q="function"==typeof ie;if(t.isArrayOrTypedArray(H))for(var ee=Math.min(H.length,U.length),te=0;te<ee;te++){var se=H[te];U[te][G]=q?ie(se):se}},t.mergeArrayCastPositive=function(H,U,G){return t.mergeArray(H,U,G,function(ie){var q=+ie;return isFinite(q)&&q>0?q:0})},t.fillArray=function(H,U,G,ie){if(ie=ie||t.identity,t.isArrayOrTypedArray(H))for(var q=0;q<U.length;q++)U[q][G]=ie(H[q])},t.castOption=function(H,U,G,ie){ie=ie||t.identity;var q=t.nestedProperty(H,G).get();return t.isArrayOrTypedArray(q)?Array.isArray(U)&&t.isArrayOrTypedArray(q[U[0]])?ie(q[U[0]][U[1]]):ie(q[U]):q},t.extractOption=function(H,U,G,ie){if(G in H)return H[G];var q=t.nestedProperty(U,ie).get();return Array.isArray(q)?void 0:q},t.tagSelected=function(H,U,G){var ie,q,ee=U.selectedpoints,te=U._indexToPoints;te&&(ie=C(te));for(var se=0;se<ee.length;se++){var ue=ee[se];if(t.isIndex(ue)||t.isArrayOrTypedArray(ue)&&t.isIndex(ue[0])&&t.isIndex(ue[1])){var de=ie?ie[ue]:ue,he=G?G[de]:de;void 0!==(q=he)&&q<H.length&&(H[he].selected=1)}}},t.selIndices2selPoints=function(H){var U=H.selectedpoints,G=H._indexToPoints;if(G){for(var ie=C(G),q=[],ee=0;ee<U.length;ee++){var te=U[ee];if(t.isIndex(te)){var se=ie[te];t.isIndex(se)&&q.push(se)}}return q}return U},t.getTargetArray=function(H,U){var G=U.target;if("string"==typeof G&&G){var ie=t.nestedProperty(H,G).get();return!!Array.isArray(ie)&&ie}return!!Array.isArray(G)&&G},t.minExtend=function(H,U){var G={};"object"!=typeof U&&(U={});var ie,q,ee,te=Object.keys(H);for(ie=0;ie<te.length;ie++)ee=H[q=te[ie]],"_"!==q.charAt(0)&&"function"!=typeof ee&&(G[q]="module"===q?ee:Array.isArray(ee)?"colorscale"===q?ee.slice():ee.slice(0,3):t.isTypedArray(ee)?ee.subarray(0,3):ee&&"object"==typeof ee?t.minExtend(H[q],U[q]):ee);for(te=Object.keys(U),ie=0;ie<te.length;ie++)"object"==typeof(ee=U[q=te[ie]])&&q in G&&"object"==typeof G[q]||(G[q]=ee);return G},t.titleCase=function(H){return H.charAt(0).toUpperCase()+H.substr(1)},t.containsAny=function(H,U){for(var G=0;G<U.length;G++)if(-1!==H.indexOf(U[G]))return!0;return!1},t.isIE=function(){return void 0!==window.navigator.msSaveBlob};var R=/Version\/[\d\.]+.*Safari/;t.isSafari=function(){return R.test(window.navigator.userAgent)};var O=/iPad|iPhone|iPod/;t.isIOS=function(){return O.test(window.navigator.userAgent)};var D=/Firefox\/(\d+)\.\d+/;t.getFirefoxVersion=function(){var H=D.exec(window.navigator.userAgent);if(H&&2===H.length){var U=parseInt(H[1]);if(!isNaN(U))return U}return null},t.isD3Selection=function(H){return H instanceof g.selection},t.ensureSingle=function(H,U,G,ie){var q=H.select(U+(G?"."+G:""));if(q.size())return q;var ee=H.append(U);return G&&ee.classed(G,!0),ie&&ee.call(ie),ee},t.ensureSingleById=function(H,U,G,ie){var q=H.select(U+"#"+G);if(q.size())return q;var ee=H.append(U).attr("id",G);return ie&&ee.call(ie),ee},t.objectFromPath=function(H,U){for(var G,ie=H.split("."),q=G={},ee=0;ee<ie.length;ee++){var te=ie[ee],se=null,ue=ie[ee].match(/(.*)\[([0-9]+)\]/);ue?(se=ue[2],(G=G[te=ue[1]]=[])[se]=ee===ie.length-1?U:{},G=G[se]):(G[te]=ee===ie.length-1?U:{},G=G[te])}return q};var L=/^([^\[\.]+)\.(.+)?/,B=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;t.expandObjectPaths=function(H){var U,G,ie,q,ee,te,se;if("object"==typeof H&&!Array.isArray(H))for(G in H)H.hasOwnProperty(G)&&((U=G.match(L))?(q=H[G],ie=U[1],delete H[G],H[ie]=t.extendDeepNoArrays(H[ie]||{},t.objectFromPath(G,t.expandObjectPaths(q))[ie])):(U=G.match(B))?(q=H[G],ie=U[1],ee=parseInt(U[2]),delete H[G],H[ie]=H[ie]||[],"."===U[3]?(se=U[4],te=H[ie][ee]=H[ie][ee]||{},t.extendDeepNoArrays(te,t.objectFromPath(se,t.expandObjectPaths(q)))):H[ie][ee]=t.expandObjectPaths(q)):H[G]=t.expandObjectPaths(H[G]));return H},t.numSeparate=function(H,U,G){if(G||(G=!1),"string"!=typeof U||0===U.length)throw new Error("Separator string required for formatting!");"number"==typeof H&&(H=String(H));var ie=/(\d+)(\d{3})/,q=U.charAt(0),ee=U.charAt(1),te=H.split("."),se=te[0],ue=te.length>1?q+te[1]:"";if(ee&&(te.length>1||se.length>4||G))for(;ie.test(se);)se=se.replace(ie,"$1"+ee+"$2");return se+ue},t.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var j=/^\w*$/;t.templateString=function(H,U){var G={};return H.replace(t.TEMPLATE_STRING_REGEX,function(ie,q){var ee;return j.test(q)?ee=U[q]:(G[q]=G[q]||t.nestedProperty(U,q).get,ee=G[q]()),t.isValidTextValue(ee)?ee:""})};var W={max:10,count:0,name:"hovertemplate"};t.hovertemplateString=function(){return ne.apply(W,arguments)};var Y={max:10,count:0,name:"texttemplate"};t.texttemplateString=function(){return ne.apply(Y,arguments)};var Q=/^[:|\|]/;function ne(H,U,G){var ie=this,q=arguments;U||(U={});var ee={};return H.replace(t.TEMPLATE_STRING_REGEX,function(te,se,ue){var de,he,xe,ge="_xother"===se||"_yother"===se,_e="_xother_"===se||"_yother_"===se,Ce="xother_"===se||"yother_"===se,Le="xother"===se||"yother"===se||ge||Ce||_e,Ie=se;if((ge||_e)&&(Ie=Ie.substring(1)),(Ce||_e)&&(Ie=Ie.substring(0,Ie.length-1)),Le){if(void 0===(de=U[Ie]))return""}else for(xe=3;xe<q.length;xe++)if(he=q[xe]){if(he.hasOwnProperty(Ie)){de=he[Ie];break}if(j.test(Ie)||(de=t.nestedProperty(he,Ie).get(),(de=ee[Ie]||t.nestedProperty(he,Ie).get())&&(ee[Ie]=de)),void 0!==de)break}if(void 0===de&&ie)return ie.count<ie.max&&(t.warn("Variable '"+Ie+"' in "+ie.name+" could not be found!"),de=te),ie.count===ie.max&&t.warn("Too many "+ie.name+" warnings - additional warnings will be suppressed"),ie.count++,te;if(ue){var Be;if(":"===ue[0]&&(de=(Be=G?G.numberFormat:t.numberFormat)(ue.replace(Q,""))(de)),"|"===ue[0]){Be=G?G.timeFormat:m;var ve=t.dateTime2ms(de);de=t.formatDate(ve,ue.replace(Q,""),!1,Be)}}else{var Te=Ie+"Label";U.hasOwnProperty(Te)&&(de=U[Te])}return Le&&(de="("+de+")",(ge||_e)&&(de=" "+de),(Ce||_e)&&(de+=" ")),de})}t.subplotSort=function(H,U){for(var G=Math.min(H.length,U.length)+1,ie=0,q=0,ee=0;ee<G;ee++){var te=H.charCodeAt(ee)||0,se=U.charCodeAt(ee)||0,ue=te>=48&&te<=57,de=se>=48&&se<=57;if(ue&&(ie=10*ie+te-48),de&&(q=10*q+se-48),!ue||!de){if(ie!==q)return ie-q;if(te!==se)return te-se}}return q-ie};var X=2e9;t.seedPseudoRandom=function(){X=2e9},t.pseudoRandom=function(){var H=X;return X=(69069*X+1)%4294967296,Math.abs(X-H)<429496729?t.pseudoRandom():X/4294967296},t.fillText=function(H,U,G){var ie=Array.isArray(G)?function(te){G.push(te)}:function(te){G.text=te},q=t.extractOption(H,U,"htx","hovertext");if(t.isValidTextValue(q))return ie(q);var ee=t.extractOption(H,U,"tx","text");return t.isValidTextValue(ee)?ie(ee):void 0},t.isValidTextValue=function(H){return H||0===H},t.formatPercent=function(H,U){U=U||0;for(var G=(Math.round(100*H*Math.pow(10,U))*Math.pow(.1,U)).toFixed(U)+"%",ie=0;ie<U;ie++)-1!==G.indexOf(".")&&(G=(G=G.replace("0%","%")).replace(".%","%"));return G},t.isHidden=function(H){var U=window.getComputedStyle(H).display;return!U||"none"===U},t.strTranslate=function(H,U){return H||U?"translate("+H+","+U+")":""},t.strRotate=function(H){return H?"rotate("+H+")":""},t.strScale=function(H){return 1!==H?"scale("+H+")":""},t.getTextTransform=function(H){var U=H.noCenter,G=H.textX,ie=H.textY,ue=H.rotate,de=H.scale;return de?de>1&&(de=1):de=0,t.strTranslate(H.targetX-de*(G+(H.anchorX||0)),H.targetY-de*(ie+(H.anchorY||0)))+t.strScale(de)+(ue?"rotate("+ue+(U?"":" "+G+" "+ie)+")":"")},t.ensureUniformFontSize=function(H,U){var G=t.extendFlat({},U);return G.size=Math.max(U.size,H._fullLayout.uniformtext.minsize||0),G},t.join2=function(H,U,G){var ie=H.length;return ie>1?H.slice(0,-1).join(U)+G+H[ie-1]:H.join(U)},t.bigFont=function(H){return Math.round(1.2*H)};var $=t.getFirefoxVersion(),re=null!==$&&$<86;t.getPositionFromD3Event=function(){return re?[g.event.layerX,g.event.layerY]:[g.event.offsetX,g.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(x,oe,ae){"use strict";oe.exports=function(g){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(g):"[object Object]"===Object.prototype.toString.call(g)&&Object.getPrototypeOf(g).hasOwnProperty("hasOwnProperty")}},{}],505:[function(x,oe,ae){"use strict";var g=x("./nested_property"),m=/^\w*$/;oe.exports=function(w,y,e,r){var n,a,t;e=e||"name",r=r||"value";var p={};y&&y.length?(t=g(w,y),a=t.get()):a=w,y=y||"";var u={};if(a)for(n=0;n<a.length;n++)u[a[n][e]]=n;var i=m.test(r),c={set:function(f,l){var h=null===l?4:0;if(!a){if(!t||4===h)return;t.set(a=[])}var d=u[f];if(void 0===d){if(4===h)return;h|=3,u[f]=d=a.length}else l!==(i?a[d][r]:g(a[d],r).get())&&(h|=2);var o=a[d]=a[d]||{};return o[e]=f,i?o[r]=l:g(o,r).set(l),null!==l&&(h&=-5),p[d]=p[d]|h,c},get:function(f){if(a){var l=u[f];return void 0===l?void 0:i?a[l][r]:g(a[l],r).get()}},rename:function(f,l){var h=u[f];return void 0===h||(p[h]=1|p[h],u[l]=h,delete u[f],a[h][e]=l),c},remove:function(f){var l=u[f];if(void 0===l)return c;var h=a[l];if(Object.keys(h).length>2)return p[l]=2|p[l],c.set(f,null);if(i){for(n=l;n<a.length;n++)p[n]=3|p[n];for(n=l;n<a.length;n++)u[a[n][e]]--;a.splice(l,1),delete u[f]}else g(h,r).set(null),p[l]=6|p[l];return c},constructUpdate:function(){for(var f,l,h={},d=Object.keys(p),o=0;o<d.length;o++)f=y+"["+(l=d[o])+"]",a[l]?(1&p[l]&&(h[f+"."+e]=a[l][e]),2&p[l]&&(h[f+"."+r]=i?4&p[l]?null:a[l][r]:4&p[l]?null:g(a[l],r).get())):h[f]=null;return h}};return c}},{"./nested_property":511}],506:[function(x,oe,ae){"use strict";var g=x("../registry");oe.exports=function(m,w){for(var y=m._context.locale,e=0;e<2;e++){for(var r=m._context.locales,n=0;n<2;n++){var a=(r[y]||{}).dictionary;if(a){var t=a[w];if(t)return t}r=g.localeRegistry}var p=y.split("-")[0];if(p===y)break;y=p}return w}},{"../registry":638}],507:[function(x,oe,ae){"use strict";var g=x("../plot_api/plot_config").dfltConfig,m=x("./notifier"),w=oe.exports={};w.log=function(){var y;if(g.logging>1){var e=["LOG:"];for(y=0;y<arguments.length;y++)e.push(arguments[y]);console.trace.apply(console,e)}if(g.notifyOnLogging>1){var r=[];for(y=0;y<arguments.length;y++)r.push(arguments[y]);m(r.join("<br>"),"long")}},w.warn=function(){var y;if(g.logging>0){var e=["WARN:"];for(y=0;y<arguments.length;y++)e.push(arguments[y]);console.trace.apply(console,e)}if(g.notifyOnLogging>0){var r=[];for(y=0;y<arguments.length;y++)r.push(arguments[y]);m(r.join("<br>"),"stick")}},w.error=function(){var y;if(g.logging>0){var e=["ERROR:"];for(y=0;y<arguments.length;y++)e.push(arguments[y]);console.error.apply(console,e)}if(g.notifyOnLogging>0){var r=[];for(y=0;y<arguments.length;y++)r.push(arguments[y]);m(r.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(x,oe,ae){"use strict";var g=x("@plotly/d3");oe.exports=function(m,w,y){var e=m.selectAll("g."+y.replace(/\s/g,".")).data(w,function(n){return n[0].trace.uid});e.exit().remove(),e.enter().append("g").attr("class",y),e.order();var r=m.classed("rangeplot")?"nodeRangePlot3":"node3";return e.each(function(n){n[0][r]=g.select(this)}),e}},{"@plotly/d3":58}],509:[function(x,oe,ae){"use strict";var g=x("gl-mat4");ae.init2dArray=function(m,w){for(var y=new Array(m),e=0;e<m;e++)y[e]=new Array(w);return y},ae.transposeRagged=function(m){var w,y,e=0,r=m.length;for(w=0;w<r;w++)e=Math.max(e,m[w].length);var n=new Array(e);for(w=0;w<e;w++)for(n[w]=new Array(r),y=0;y<r;y++)n[w][y]=m[y][w];return n},ae.dot=function(m,w){if(!m.length||!w.length||m.length!==w.length)return null;var y,e,r=m.length;if(m[0].length)for(y=new Array(r),e=0;e<r;e++)y[e]=ae.dot(m[e],w);else if(w[0].length){var n=ae.transposeRagged(w);for(y=new Array(n.length),e=0;e<n.length;e++)y[e]=ae.dot(m,n[e])}else for(y=0,e=0;e<r;e++)y+=m[e]*w[e];return y},ae.translationMatrix=function(m,w){return[[1,0,m],[0,1,w],[0,0,1]]},ae.rotationMatrix=function(m){var w=m*Math.PI/180;return[[Math.cos(w),-Math.sin(w),0],[Math.sin(w),Math.cos(w),0],[0,0,1]]},ae.rotationXYMatrix=function(m,w,y){return ae.dot(ae.dot(ae.translationMatrix(w,y),ae.rotationMatrix(m)),ae.translationMatrix(-w,-y))},ae.apply3DTransform=function(m){return function(){var w=arguments,y=1===arguments.length?w[0]:[w[0],w[1],w[2]||0];return ae.dot(m,[y[0],y[1],y[2],1]).slice(0,3)}},ae.apply2DTransform=function(m){return function(){var w=arguments;3===w.length&&(w=w[0]);var y=1===arguments.length?w[0]:[w[0],w[1]];return ae.dot(m,[y[0],y[1],1]).slice(0,2)}},ae.apply2DTransform2=function(m){var w=ae.apply2DTransform(m);return function(y){return w(y.slice(0,2)).concat(w(y.slice(2,4)))}},ae.convertCssMatrix=function(m){if(m){var w=m.length;if(16===w)return m;if(6===w)return[m[0],m[1],0,0,m[2],m[3],0,0,0,0,1,0,m[4],m[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},ae.inverseTransformMatrix=function(m){var w=[];return g.invert(w,m),[[w[0],w[1],w[2],w[3]],[w[4],w[5],w[6],w[7]],[w[8],w[9],w[10],w[11]],[w[12],w[13],w[14],w[15]]]}},{"gl-mat4":210}],510:[function(x,oe,ae){"use strict";oe.exports={mod:function(g,m){var w=g%m;return w<0?w+m:w},modHalf:function(g,m){return Math.abs(g)>m/2?g-Math.round(g/m)*m:g}}},{}],511:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("./array").isArrayOrTypedArray;function w(p,u){return function(){var i,c,f,l,h,d=p;for(l=0;l<u.length-1;l++){if(-1===(i=u[l])){for(c=!0,f=[],h=0;h<d.length;h++)f[h]=w(d[h],u.slice(l+1))(),f[h]!==f[0]&&(c=!1);return c?f[0]:f}if("number"==typeof i&&!m(d)||"object"!=typeof(d=d[i])||null===d)return}if("object"==typeof d&&null!==d&&null!==(f=d[u[l]]))return f}}oe.exports=function(p,u){if(g(u))u=String(u);else if("string"!=typeof u||"[-1]"===u.substr(u.length-4))throw"bad property string";for(var i,c,f,l=0,h=u.split(".");l<h.length;){if(i=String(h[l]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(i[1])h[l]=i[1];else{if(0!==l)throw"bad property string";h.splice(0,1)}for(c=i[2].substr(1,i[2].length-2).split("]["),f=0;f<c.length;f++)l++,h.splice(l,0,Number(c[f]))}l++}return"object"!=typeof p?{set:function(){throw"bad container"},get:function(){},astr:u,parts:h,obj:p}:{set:r(p,h,u),get:w(p,h),astr:u,parts:h,obj:p}};var y=/(^|\.)args\[/;function e(p,u){return void 0===p||null===p&&!u.match(y)}function r(p,u,i){return function(c){var f,l,h=p,d="",o=[[p,d]],_=e(c,i);for(l=0;l<u.length-1;l++){if("number"==typeof(f=u[l])&&!m(h))throw"array index but container is not an array";if(-1===f){if(_=!a(h,u.slice(l+1),c,i))break;return}if(!t(h,f,u[l+1],_))break;if("object"!=typeof(h=h[f])||null===h)throw"container is not an object";d=n(d,f),o.push([h,d])}if(_){if(l===u.length-1&&(delete h[u[l]],Array.isArray(h)&&+u[l]==h.length-1))for(;h.length&&void 0===h[h.length-1];)h.pop()}else h[u[l]]=c}}function n(p,u){var i=u;return g(u)?i="["+u+"]":p&&(i="."+u),p+i}function a(p,u,i,c){var f,l=m(i),h=!0,d=i,o=c.replace("-1",0),_=!l&&e(i,o),s=u[0];for(f=0;f<p.length;f++)o=c.replace("-1",f),l&&(_=e(d=i[f%i.length],o)),_&&(h=!1),t(p,f,s,_)&&r(p[f],u,c.replace("-1",f))(d);return h}function t(p,u,i,c){if(void 0===p[u]){if(c)return!1;p[u]="number"==typeof i?[]:{}}return!0}},{"./array":485,"fast-isnumeric":190}],512:[function(x,oe,ae){"use strict";oe.exports=function(){}},{}],513:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("fast-isnumeric"),w=[];oe.exports=function(y,e){if(-1===w.indexOf(y)){w.push(y);var r=1e3;m(e)?r=e:"long"===e&&(r=3e3);var n=g.select("body").selectAll(".plotly-notifier").data([0]);n.enter().append("div").classed("plotly-notifier",!0),n.selectAll(".notifier-note").data(w).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(t){var p=g.select(this);p.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){p.transition().call(a)});for(var u=p.append("p"),i=t.split(/<br\s*\/?>/g),c=0;c<i.length;c++)c&&u.append("br"),u.append("span").text(i[c]);"stick"===e?p.transition().duration(350).style("opacity",1):p.transition().duration(700).style("opacity",1).transition().delay(r).call(a)})}function a(t){t.duration(700).style("opacity",0).each("end",function(p){var u=w.indexOf(p);-1!==u&&w.splice(u,1),g.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(x,oe,ae){"use strict";var g=x("./setcursor"),m="data-savedcursor";oe.exports=function(w,y){var e=w.attr(m);if(y){if(!e){for(var r=(w.attr("class")||"").split(" "),n=0;n<r.length;n++){var a=r[n];0===a.indexOf("cursor-")&&w.attr(m,a.substr(7)).classed(a,!1)}w.attr(m)||w.attr(m,"!!")}g(w,y)}else e&&(w.attr(m,null),"!!"===e?g(w):g(w,e))}},{"./setcursor":524}],515:[function(x,oe,ae){"use strict";var g=x("./matrix").dot,m=x("../constants/numerical").BADNUM,w=oe.exports={};w.tester=function(y){var e,r=y.slice(),n=r[0][0],a=n,t=r[0][1],p=t;for(r.push(r[0]),e=1;e<r.length;e++)n=Math.min(n,r[e][0]),a=Math.max(a,r[e][0]),t=Math.min(t,r[e][1]),p=Math.max(p,r[e][1]);var u,i=!1;5===r.length&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(i=!0,u=function(l){return l[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(i=!0,u=function(l){return l[1]===r[0][1]}));var c=!0,f=r[0];for(e=1;e<r.length;e++)if(f[0]!==r[e][0]||f[1]!==r[e][1]){c=!1;break}return{xmin:n,xmax:a,ymin:t,ymax:p,pts:r,contains:i?function(l,h){var d=l[0],o=l[1];return!(d===m||d<n||d>a||o===m||o<t||o>p||h&&u(l))}:function(l,h){var d=l[0],o=l[1];if(d===m||d<n||d>a||o===m||o<t||o>p)return!1;var _,s,k,M,A,E=r.length,I=r[0][0],C=r[0][1],R=0;for(_=1;_<E;_++)if(s=I,k=C,I=r[_][0],C=r[_][1],!(d<(M=Math.min(s,I))||d>Math.max(s,I)||o>Math.max(k,C)))if(o<Math.min(k,C))d!==M&&R++;else{if(o===(A=I===s?o:k+(d-s)*(C-k)/(I-s)))return 1!==_||!h;o<=A&&d!==M&&R++}return R%2==1},isRect:i,degenerate:c}},w.isSegmentBent=function(y,e,r,n){var a,t,p,u=y[e],i=[y[r][0]-u[0],y[r][1]-u[1]],c=g(i,i),f=Math.sqrt(c),l=[-i[1]/f,i[0]/f];for(a=e+1;a<r;a++)if((p=g(t=[y[a][0]-u[0],y[a][1]-u[1]],i))<0||p>c||Math.abs(g(t,l))>n)return!0;return!1},w.filter=function(y,e){var r=[y[0]],n=0,a=0;function t(p){y.push(p);var u=r.length,i=n;r.splice(a+1);for(var c=i+1;c<y.length;c++)(c===y.length-1||w.isSegmentBent(y,i,c+1,e))&&(r.push(y[c]),r.length<u-2&&(n=c,a=r.length-1),i=c)}return y.length>1&&t(y.pop()),{addPt:t,raw:y,filtered:r}}},{"../constants/numerical":479,"./matrix":509}],516:[function(x,oe,ae){(function(g){(function(){"use strict";var m=x("./show_no_webgl_msg"),w=x("regl");oe.exports=function(y,e,r){var n=y._fullLayout,a=!0;return n._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(r);else if(!t.pick||n._has("parcoords")){try{t.regl=w({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:y._context.plotGlPixelRatio||g.devicePixelRatio,extensions:e||[],cachedCode:r||{}})}catch(p){a=!1}t.regl||(a=!1),a&&this.addEventListener("webglcontextlost",function(p){y&&y.emit&&y.emit("plotly_webglcontextlost",{event:p,layer:t.key})},!1)}}),a||m({container:n._glcontainer.node()}),a}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("is-mobile");oe.exports=function(w){var y,u;if("string"!=typeof(y=w&&w.hasOwnProperty("userAgent")?w.userAgent:("undefined"!=typeof navigator&&(u=navigator.userAgent),u&&u.headers&&"string"==typeof u.headers["user-agent"]&&(u=u.headers["user-agent"]),u)))return!0;var e=m({ua:{headers:{"user-agent":y}},tablet:!0,featureDetect:!1});if(!e)for(var r=y.split(" "),n=1;n<r.length;n++)if(-1!==r[n].indexOf("Safari"))for(var a=n-1;a>-1;a--){var t=r[a];if("Version/"===t.substr(0,8)){var p=t.substr(8).split(".")[0];if(g(p)&&(p=+p),p>=13)return!0}}return e}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(x,oe,ae){"use strict";oe.exports=function(g,m){if(m instanceof RegExp){for(var w=m.toString(),y=0;y<g.length;y++)if(g[y]instanceof RegExp&&g[y].toString()===w)return g;g.push(m)}else!m&&0!==m||-1!==g.indexOf(m)||g.push(m);return g}},{}],519:[function(x,oe,ae){"use strict";var g=x("../lib"),m=x("../plot_api/plot_config").dfltConfig,w={add:function(y,e,r,n,a){var t,p;y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},p=y.undoQueue.index,y.autoplay?y.undoQueue.inSequence||(y.autoplay=!1):(!y.undoQueue.sequence||y.undoQueue.beginSequence?(y.undoQueue.queue.splice(p,y.undoQueue.queue.length-p,t={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),y.undoQueue.index+=1):t=y.undoQueue.queue[p-1],y.undoQueue.beginSequence=!1,t&&(t.undo.calls.unshift(e),t.undo.args.unshift(r),t.redo.calls.push(n),t.redo.args.push(a)),y.undoQueue.queue.length>m.queueLength&&(y.undoQueue.queue.shift(),y.undoQueue.index--))},startSequence:function(y){y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},y.undoQueue.sequence=!0,y.undoQueue.beginSequence=!0},stopSequence:function(y){y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},y.undoQueue.sequence=!1,y.undoQueue.beginSequence=!1},undo:function(y){var e,r;if(!(void 0===y.undoQueue||isNaN(y.undoQueue.index)||y.undoQueue.index<=0)){for(y.undoQueue.index--,e=y.undoQueue.queue[y.undoQueue.index],y.undoQueue.inSequence=!0,r=0;r<e.undo.calls.length;r++)w.plotDo(y,e.undo.calls[r],e.undo.args[r]);y.undoQueue.inSequence=!1,y.autoplay=!1}},redo:function(y){var e,r;if(!(void 0===y.undoQueue||isNaN(y.undoQueue.index)||y.undoQueue.index>=y.undoQueue.queue.length)){for(e=y.undoQueue.queue[y.undoQueue.index],y.undoQueue.inSequence=!0,r=0;r<e.redo.calls.length;r++)w.plotDo(y,e.redo.calls[r],e.redo.args[r]);y.undoQueue.inSequence=!1,y.autoplay=!1,y.undoQueue.index++}},plotDo:function(y,e,r){y.autoplay=!0,r=function(n,a){for(var t,p=[],u=0;u<a.length;u++)p[u]=(t=a[u])===n?t:"object"==typeof t?Array.isArray(t)?g.extendDeep([],t):g.extendDeepAll({},t):t;return p}(y,r),e.apply(null,r)}};oe.exports=w},{"../lib":503,"../plot_api/plot_config":541}],520:[function(x,oe,ae){"use strict";ae.counter=function(g,m,w,y){var e=(m||"")+(w?"":"$"),r=!1===y?"":"^";return"xy"===g?new RegExp(r+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(r+g+"([2-9]|[1-9][0-9]+)?"+e)}},{}],521:[function(x,oe,ae){"use strict";var g=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,m=/^[^\.\[\]]+$/;oe.exports=function(w,y){for(;y;){var e=w.match(g);if(e)w=e[1];else{if(!w.match(m))throw new Error("bad relativeAttr call:"+[w,y]);w=""}if("^"!==y.charAt(0))break;y=y.slice(1)}return w&&"["!==y.charAt(0)?w+"."+y:w+y}},{}],522:[function(x,oe,ae){"use strict";var g=x("./array").isArrayOrTypedArray,m=x("./is_plain_object");oe.exports=function w(y,e){for(var r in e){var n=e[r],a=y[r];if(a!==n)if("_"===r.charAt(0)||"function"==typeof n){if(r in y)continue;y[r]=n}else if(g(n)&&g(a)&&m(n[0])){if("customdata"===r||"ids"===r)continue;for(var t=Math.min(n.length,a.length),p=0;p<t;p++)a[p]!==n[p]&&m(n[p])&&m(a[p])&&w(a[p],n[p])}else m(n)&&m(a)&&(w(a,n),Object.keys(a).length||delete y[r])}}},{"./array":485,"./is_plain_object":504}],523:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("./loggers"),w=x("./identity"),y=x("../constants/numerical").BADNUM;function e(t,p){return t<p}function r(t,p){return t<=p}function n(t,p){return t>p}function a(t,p){return t>=p}ae.findBin=function(t,p,u){if(g(p.start))return u?Math.ceil((t-p.start)/p.size-1e-9)-1:Math.floor((t-p.start)/p.size+1e-9);var i,c,f=0,l=p.length,h=0,d=l>1?(p[l-1]-p[0])/(l-1):1;for(c=d>=0?u?e:r:u?a:n,t+=1e-9*d*(u?-1:1)*(d>=0?1:-1);f<l&&h++<100;)c(p[i=Math.floor((f+l)/2)],t)?f=i+1:l=i;return h>90&&m.log("Long binary search..."),f-1},ae.sorterAsc=function(t,p){return t-p},ae.sorterDes=function(t,p){return p-t},ae.distinctVals=function(t){var p,u=t.slice();for(u.sort(ae.sorterAsc),p=u.length-1;p>-1&&u[p]===y;p--);for(var i,c=u[p]-u[0]||1,f=c/(p||1)/1e4,l=[],h=0;h<=p;h++){var d=u[h],o=d-i;void 0===i?(l.push(d),i=d):o>f&&(c=Math.min(c,o),l.push(d),i=d)}return{vals:l,minDiff:c}},ae.roundUp=function(t,p,u){for(var i,c=0,f=p.length-1,l=0,h=u?0:1,d=u?1:0,o=u?Math.ceil:Math.floor;c<f&&l++<100;)p[i=o((c+f)/2)]<=t?c=i+h:f=i-d;return p[c]},ae.sort=function(t,p){for(var u=0,i=0,c=1;c<t.length;c++){var f=p(t[c],t[c-1]);if(f<0?u=1:f>0&&(i=1),u&&i)return t.sort(p)}return i?t:t.reverse()},ae.findIndexOfMin=function(t,p){p=p||w;for(var u,i=1/0,c=0;c<t.length;c++){var f=p(t[c]);f<i&&(i=f,u=c)}return u}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(x,oe,ae){"use strict";oe.exports=function(g,m){(g.attr("class")||"").split(" ").forEach(function(w){0===w.indexOf("cursor-")&&g.classed(w,!1)}),m&&g.classed("cursor-"+m,!0)}},{}],525:[function(x,oe,ae){"use strict";var g=x("../components/color"),m=function(){};oe.exports=function(w){for(var y in w)"function"==typeof w[y]&&(w[y]=m);w.destroy=function(){w.container.parentNode.removeChild(w.container)};var e=document.createElement("div");e.className="no-webgl",e.style.cursor="pointer",e.style.fontSize="24px",e.style.color=g.defaults[0],e.style.position="absolute",e.style.left=e.style.top="0px",e.style.width=e.style.height="100%",e.style["background-color"]=g.lightLine,e.style["z-index"]=30;var r=document.createElement("p");return r.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",r.style.position="relative",r.style.top="50%",r.style.left="50%",r.style.height="30%",r.style.width="50%",r.style.margin="-15% 0 0 -25%",e.appendChild(r),w.container.appendChild(e),w.container.style.background="#FFFFFF",w.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(x,oe,ae){"use strict";oe.exports=function(g){return Object.keys(g).sort()}},{}],527:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("./array").isArrayOrTypedArray;ae.aggNums=function(w,y,e,r){var n,a;if((!r||r>e.length)&&(r=e.length),g(y)||(y=!1),m(e[0])){for(a=new Array(r),n=0;n<r;n++)a[n]=ae.aggNums(w,y,e[n]);e=a}for(n=0;n<r;n++)g(y)?g(e[n])&&(y=w(+y,+e[n])):y=e[n];return y},ae.len=function(w){return ae.aggNums(function(y){return y+1},0,w)},ae.mean=function(w,y){return y||(y=ae.len(w)),ae.aggNums(function(e,r){return e+r},0,w)/y},ae.midRange=function(w){if(void 0!==w&&0!==w.length)return(ae.aggNums(Math.max,null,w)+ae.aggNums(Math.min,null,w))/2},ae.variance=function(w,y,e){return y||(y=ae.len(w)),g(e)||(e=ae.mean(w,y)),ae.aggNums(function(r,n){return r+Math.pow(n-e,2)},0,w)/y},ae.stdev=function(w,y,e){return Math.sqrt(ae.variance(w,y,e))},ae.median=function(w){var y=w.slice().sort();return ae.interp(y,.5)},ae.interp=function(w,y){if(!g(y))throw"n should be a finite number";if((y=y*w.length-.5)<0)return w[0];if(y>w.length-1)return w[w.length-1];var e=y%1;return e*w[Math.ceil(y)]+(1-e)*w[Math.floor(y)]}},{"./array":485,"fast-isnumeric":190}],528:[function(x,oe,ae){"use strict";var g=x("color-normalize");oe.exports=function(m){return m?g(m):[0,0,0,1]}},{"color-normalize":89}],529:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../lib"),w=m.strTranslate,y=x("../constants/xmlns_namespaces"),e=x("../constants/alignment").LINE_SPACING,r=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;ae.convertToTspans=function(D,L,B){var j=D.text(),W=!D.attr("data-notex")&&L&&L._context.typesetMath&&"undefined"!=typeof MathJax&&j.match(r),Y=g.select(D.node().parentNode);if(!Y.empty()){var Q=D.attr("class")?D.attr("class").split(" ")[0]:"text";return Y.selectAll("svg."+(Q+="-math")).remove(),Y.selectAll("g."+Q+"-group").remove(),D.style("display",null).attr({"data-unformatted":j,"data-math":"N"}),W?(L&&L._promises||[]).push(new Promise(function(X){D.style("display","none");var $=parseInt(D.node().style.fontSize,10);!function(H,U,G){var ie,q,ee,te,se=parseInt((MathJax.version||"").split(".")[0]);if(2===se||3===se){var ue=function(){var he="math-output-"+m.randstr({},64),xe=(te=g.select("body").append("div").attr({id:he}).style({visibility:"hidden",position:"absolute","font-size":U.fontSize+"px"}).text(H.replace(n,"\\lt ").replace(a,"\\gt "))).node();return 2===se?MathJax.Hub.Typeset(xe):MathJax.typeset([xe])},de=function(){var he=te.select(2===se?".MathJax_SVG":".MathJax"),xe=!he.empty()&&te.select("svg").node();if(xe){var ge,_e=xe.getBoundingClientRect();ge=2===se?g.select("body").select("#MathJax_SVG_glyphs"):he.select("defs"),G(he,ge,_e)}else m.log("There was an error in the tex syntax.",H),G();te.remove()};2===se?MathJax.Hub.Queue(function(){return q=m.extendDeepAll({},MathJax.Hub.config),ee=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:t},displayAlign:"left"})},function(){if("SVG"!==(ie=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},ue,de,function(){if("SVG"!==ie)return MathJax.Hub.setRenderer(ie)},function(){return void 0!==ee&&(MathJax.Hub.processSectionDelay=ee),MathJax.Hub.Config(q)}):3===se&&(q=m.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=t,"svg"!==(ie=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ue(),de(),"svg"!==ie&&(MathJax.config.startup.output=ie),MathJax.config=q}))}else m.warn("No MathJax version:",MathJax.version)}(W[2],{fontSize:$},function(H,U,G){Y.selectAll("svg."+Q).remove(),Y.selectAll("g."+Q+"-group").remove();var ie=H&&H.select("svg");if(!ie||!ie.node())return ne(),void X();var q=Y.append("g").classed(Q+"-group",!0).attr({"pointer-events":"none","data-unformatted":j,"data-math":"Y"});q.node().appendChild(ie.node()),U&&U.node()&&ie.node().insertBefore(U.node().cloneNode(!0),ie.node().firstChild);var ee=G.width,te=G.height;ie.attr({class:Q,height:te,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var se=D.node().style.fill||"black",ue=ie.select("g");ue.attr({fill:se,stroke:se});var de=ue.node().getBoundingClientRect(),he=de.width,xe=de.height;(he>ee||xe>te)&&(ie.style("overflow","hidden"),he=(de=ie.node().getBoundingClientRect()).width,xe=de.height);var ge=+D.attr("x"),_e=+D.attr("y"),Ce=-($||D.node().getBoundingClientRect().height)/4;if("y"===Q[0])q.attr({transform:"rotate("+[-90,ge,_e]+")"+w(-he/2,Ce-xe/2)});else if("l"===Q[0])_e=Ce-xe/2;else if("a"===Q[0]&&0!==Q.indexOf("atitle"))ge=0,_e=Ce;else{var Le=D.attr("text-anchor");ge-=he*("middle"===Le?.5:"end"===Le?1:0),_e=_e+Ce-xe/2}ie.attr({x:ge,y:_e}),B&&B.call(D,q),X(q)})})):ne(),D}function ne(){Y.empty()||(Q=D.attr("class")+"-math",Y.select("svg."+Q).remove()),D.text("").style("white-space","pre"),function(X,$){$=$.replace(f," ");var re,H=!1,U=[],G=-1;function ie(){G++;var ve=document.createElementNS(y.svg,"tspan");g.select(ve).attr({class:"line",dy:G*e+"em"}),X.appendChild(ve),re=ve;var Te=U;if(U=[{node:ve}],Te.length>1)for(var Pe=1;Pe<Te.length;Pe++)q(Te[Pe])}function q(ve){var Te,Pe=ve.type,De={};if("a"===Pe){Te="a";var Fe=ve.target,Ue=ve.href,He=ve.popup;Ue&&(De={"xlink:xlink:show":"_blank"===Fe||"_"!==Fe.charAt(0)?"new":"replace",target:Fe,"xlink:xlink:href":Ue},He&&(De.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+He+'");return false;'))}else Te="tspan";ve.style&&(De.style=ve.style);var Ke=document.createElementNS(y.svg,Te);if("sup"===Pe||"sub"===Pe){ee(re,"\u200b"),re.appendChild(Ke);var st=document.createElementNS(y.svg,"tspan");ee(st,"\u200b"),g.select(st).attr("dy",i[Pe]),De.dy=u[Pe],re.appendChild(Ke),re.appendChild(st)}else re.appendChild(Ke);g.select(Ke).attr(De),re=ve.node=Ke,U.push(ve)}function ee(ve,Te){ve.appendChild(document.createTextNode(Te))}function te(ve){if(1!==U.length){var Te=U.pop();ve!==Te.type&&m.log("Start tag <"+Te.type+"> doesnt match end tag <"+ve+">. Pretending it did match.",$),re=U[U.length-1].node}else m.log("Ignoring unexpected end tag </"+ve+">.",$)}d.test($)?ie():(re=X,U=[{node:X}]);for(var se=$.split(l),ue=0;ue<se.length;ue++){var de=se[ue],he=de.match(h),xe=he&&he[2].toLowerCase(),ge=p[xe];if("br"===xe)ie();else if(void 0===ge)ee(re,C(de));else if(he[1])te(xe);else{var _e=he[4],Ce={type:xe},Le=M(_e,o);if(Le?(Le=Le.replace(A,"$1 fill:"),ge&&(Le+=";"+ge)):ge&&(Le=ge),Le&&(Ce.style=Le),"a"===xe){H=!0;var Ie=M(_e,_);if(Ie){var Be=R(Ie);Be&&(Ce.href=Be,Ce.target=M(_e,s)||"_blank",Ce.popup=M(_e,k))}}q(Ce)}}return H}(D.node(),j)&&D.style("pointer-events","all"),ae.positionText(D),B&&B.call(D)}};var n=/(<|&lt;|&#60;)/g,a=/(>|&gt;|&#62;)/g,t=[["$","$"],["\\(","\\)"]],p={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},u={sub:"0.3em",sup:"-0.6em"},i={sub:"-0.21em",sup:"0.42em"},c=["http:","https:","mailto:","",void 0,":"],f=ae.NEWLINES=/(\r\n?|\n)/g,l=/(<[^<>]*>)/,h=/<(\/?)([^ >]*)(\s+(.*))?>/i,d=/<br(\s+.*)?>/i;ae.BR_TAG_ALL=/<br(\s+.*)?>/gi;var o=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,_=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,s=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,k=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function M(D,L){if(!D)return null;var B=D.match(L),j=B&&(B[3]||B[4]);return j&&C(j)}var A=/(^|;)\s*color:/;ae.plainText=function(D,L){for(var B=void 0!==(L=L||{}).len&&-1!==L.len?L.len:1/0,j=void 0!==L.allowedTags?L.allowedTags:["br"],W="...".length,Y=D.split(l),Q=[],ne="",X=0,$=0;$<Y.length;$++){var re=Y[$],H=re.match(h),U=H&&H[2].toLowerCase();if(U)-1!==j.indexOf(U)&&(Q.push(re),ne=U);else{var G=re.length;if(X+G<B)Q.push(re),X+=G;else if(X<B){var ie=B-X;ne&&("br"!==ne||ie<=W||G<=W)&&Q.pop(),Q.push(B>W?re.substr(0,ie-W)+"...":re.substr(0,ie));break}ne=""}}return Q.join("")};var E={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},I=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function C(D){return D.replace(I,function(L,B){return("#"===B.charAt(0)?function(j){if(!(j>1114111)){var W=String.fromCodePoint;if(W)return W(j);var Y=String.fromCharCode;return j<=65535?Y(j):Y(55232+(j>>10),j%1024+56320)}}("x"===B.charAt(1)?parseInt(B.substr(2),16):parseInt(B.substr(1),10)):E[B])||L})}function R(D){var L=encodeURI(decodeURI(D)),B=document.createElement("a"),j=document.createElement("a");B.href=D,j.href=L;var Y=j.protocol;return-1!==c.indexOf(B.protocol)&&-1!==c.indexOf(Y)?L:""}function O(D,L,B){var j,W,Y,Q=B.horizontalAlign,ne=B.verticalAlign||"top",X=D.node().getBoundingClientRect(),$=L.node().getBoundingClientRect();return W="bottom"===ne?function(){return X.bottom-j.height}:"middle"===ne?function(){return X.top+(X.height-j.height)/2}:function(){return X.top},Y="right"===Q?function(){return X.right-j.width}:"center"===Q?function(){return X.left+(X.width-j.width)/2}:function(){return X.left},function(){j=this.node().getBoundingClientRect();var re=Y()-$.left,H=W()-$.top,U=B.gd||{};if(B.gd){U._fullLayout._calcInverseTransform(U);var G=m.apply3DTransform(U._fullLayout._invTransform)(re,H);re=G[0],H=G[1]}return this.style({top:H+"px",left:re+"px","z-index":1e3}),this}}ae.convertEntities=C,ae.sanitizeHTML=function(D){D=D.replace(f," ");for(var L=document.createElement("p"),B=L,j=[],W=D.split(l),Y=0;Y<W.length;Y++){var Q=W[Y],ne=Q.match(h),X=ne&&ne[2].toLowerCase();if(X in p)if(ne[1])j.length&&(B=j.pop());else{var $=ne[4],re=M($,o),H=re?{style:re}:{};if("a"===X){var U=M($,_);if(U){var G=R(U);if(G){H.href=G;var ie=M($,s);ie&&(H.target=ie)}}}var q=document.createElement(X);B.appendChild(q),g.select(q).attr(H),B=q,j.push(q)}else B.appendChild(document.createTextNode(C(Q)))}return L.innerHTML},ae.lineCount=function(D){return D.selectAll("tspan.line").size()||1},ae.positionText=function(D,L,B){return D.each(function(){var j=g.select(this);function W(ne,X){return void 0===X?null===(X=j.attr(ne))&&(j.attr(ne,0),X=0):j.attr(ne,X),X}var Y=W("x",L),Q=W("y",B);"text"===this.nodeName&&j.selectAll("tspan.line").attr({x:Y,y:Q})})},ae.makeTextShadow=function(D){var L="1px ",B="1px ",j="1px ";return L+B+j+D+", -"+L+"-"+B+j+D+", "+L+"-"+B+j+D+", -"+L+B+j+D},ae.makeEditable=function(D,L){var B=L.gd,j=L.delegate,W=g.dispatch("edit","input","cancel"),Y=j||D;if(D.style({"pointer-events":j?"none":"all"}),1!==D.size())throw new Error("boo");function Q(){var re,H,U,G,ie;re=g.select(B).select(".svg-container"),H=re.append("div"),U=D.node().style,G=parseFloat(U.fontSize||12),void 0===(ie=L.text)&&(ie=D.attr("data-unformatted")),H.classed("plugin-editable editable",!0).style({position:"absolute","font-family":U.fontFamily||"Arial","font-size":G,color:L.fill||U.fill||"black",opacity:1,"background-color":L.background||"transparent",outline:"#ffffff33 1px solid",margin:[-G/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ie).call(O(D,re,L)).on("blur",function(){B._editing=!1,D.text(this.textContent).style({opacity:1});var q,ee=g.select(this).attr("class");(q=ee?"."+ee.split(" ")[0]+"-math-group":"[class*=-math-group]")&&g.select(D.node().parentNode).select(q).style({opacity:0});var te=this.textContent;g.select(this).transition().duration(0).remove(),g.select(document).on("mouseup",null),W.edit.call(D,te)}).on("focus",function(){var q=this;B._editing=!0,g.select(document).on("mouseup",function(){if(g.event.target===q)return!1;document.activeElement===H.node()&&H.node().blur()})}).on("keyup",function(){27===g.event.which?(B._editing=!1,D.style({opacity:1}),g.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),W.cancel.call(D,this.textContent)):(W.input.call(D,this.textContent),g.select(this).call(O(D,re,L)))}).on("keydown",function(){13===g.event.which&&this.blur()}).call(ne),D.style({opacity:0});var X,$=Y.attr("class");(X=$?"."+$.split(" ")[0]+"-math-group":"[class*=-math-group]")&&g.select(D.node().parentNode).select(X).style({opacity:0})}function ne(X){var $=X.node(),re=document.createRange();re.selectNodeContents($);var H=window.getSelection();H.removeAllRanges(),H.addRange(re),$.focus()}return L.immediate?Q():Y.on("click",Q),g.rebind(D,W,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(x,oe,ae){"use strict";var g={};function m(w){w&&null!==w.timer&&(clearTimeout(w.timer),w.timer=null)}ae.throttle=function(w,y,e){var r=g[w],n=Date.now();if(!r){for(var a in g)g[a].ts<n-6e4&&delete g[a];r=g[w]={ts:0,timer:null}}function t(){e(),r.ts=Date.now(),r.onDone&&(r.onDone(),r.onDone=null)}m(r),n>r.ts+y?t():r.timer=setTimeout(function(){t(),r.timer=null},y)},ae.done=function(w){var y=g[w];return y&&y.timer?new Promise(function(e){var r=y.onDone;y.onDone=function(){r&&r(),e(),y.onDone=null}}):Promise.resolve()},ae.clear=function(w){if(w)m(g[w]),delete g[w];else for(var y in g)ae.clear(y)}},{}],531:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric");oe.exports=function(m,w){if(m>0)return Math.log(m)/Math.LN10;var y=Math.log(Math.min(w[0],w[1]))/Math.LN10;return g(y)||(y=Math.log(Math.max(w[0],w[1]))/Math.LN10-6),y}},{"fast-isnumeric":190}],532:[function(x,oe,ae){"use strict";var g=oe.exports={},m=x("../plots/geo/constants").locationmodeToLayer,w=x("topojson-client").feature;g.getTopojsonName=function(y){return[y.scope.replace(/ /g,"-"),"_",y.resolution.toString(),"m"].join("")},g.getTopojsonPath=function(y,e){return y+e+".json"},g.getTopojsonFeatures=function(y,e){return w(e,e.objects[m[y.locationmode]]).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(x,oe,ae){"use strict";oe.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(x,oe,ae){"use strict";oe.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(x,oe,ae){"use strict";var g=x("../registry");oe.exports=function(m){for(var w,y,e=g.layoutArrayContainers,r=g.layoutArrayRegexes,n=m.split("[")[0],a=0;a<r.length;a++)if((y=m.match(r[a]))&&0===y.index){w=y[0];break}if(w||(w=e[e.indexOf(n)]),!w)return!1;var t=m.substr(w.length);return t?!!(y=t.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:w,index:Number(y[1]),property:y[3]||""}:{array:w,index:"",property:""}}},{"../registry":638}],536:[function(x,oe,ae){"use strict";var g=x("../lib"),m=g.extendFlat,w=g.isPlainObject,y={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},r=y.flags.slice().concat(["fullReplot"]),n=e.flags.slice().concat("layoutReplot");function a(u){for(var i={},c=0;c<u.length;c++)i[u[c]]=!1;return i}function t(u,i,c){var f=m({},u);for(var l in f){var h=f[l];w(h)&&(f[l]=p(h,i,0,l))}return"from-root"===c&&(f.editType=i),f}function p(u,i,c,f){if(u.valType){var l=m({},u);if(l.editType=i,Array.isArray(u.items)){l.items=new Array(u.items.length);for(var h=0;h<u.items.length;h++)l.items[h]=p(u.items[h],i)}return l}return t(u,i,"_"===f.charAt(0)?"nested":"from-root")}oe.exports={traces:y,layout:e,traceFlags:function(){return a(r)},layoutFlags:function(){return a(n)},update:function(u,i){var c=i.editType;if(c&&"none"!==c)for(var f=c.split("+"),l=0;l<f.length;l++)u[f[l]]=!0},overrideAll:t}},{"../lib":503}],537:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("gl-mat4/fromQuat"),w=x("../registry"),y=x("../lib"),e=x("../plots/plots"),r=x("../plots/cartesian/axis_ids"),n=x("../components/color"),a=r.cleanId,t=r.getFromTrace,p=w.traceIs;function u(s,k){var M=s[k],A=k.charAt(0);M&&"paper"!==M&&(s[k]=a(M,A,!0))}function i(s){function k(M,A){s[M]&&(!s.title||!s.title[A])&&(s.title||(s.title={}),s.title[A]=s[M],delete s[M])}s&&("string"!=typeof s.title&&"number"!=typeof s.title||(s.title={text:s.title}),k("titlefont","font"),k("titleposition","position"),k("titleside","side"),k("titleoffset","offset"))}function c(s){if(!y.isPlainObject(s))return!1;var k=s.name;return delete s.name,delete s.showlegend,("string"==typeof k||"number"==typeof k)&&String(k)}function f(s,k,M,A){if(M&&!A)return s;if(A&&!M||!s.trim())return k;if(!k.trim())return s;var E,I=Math.min(s.length,k.length);for(E=0;E<I&&s.charAt(E)===k.charAt(E);E++);return s.substr(0,E).trim()}function l(s){var k="middle",M="center";return"string"==typeof s&&(-1!==s.indexOf("top")?k="top":-1!==s.indexOf("bottom")&&(k="bottom"),-1!==s.indexOf("left")?M="left":-1!==s.indexOf("right")&&(M="right")),k+" "+M}function h(s,k){return k in s&&"object"==typeof s[k]&&0===Object.keys(s[k]).length}ae.clearPromiseQueue=function(s){Array.isArray(s._promises)&&s._promises.length>0&&y.log("Clearing previous rejected promises from queue."),s._promises=[]},ae.cleanLayout=function(s){var k,M;s||(s={}),s.xaxis1&&(s.xaxis||(s.xaxis=s.xaxis1),delete s.xaxis1),s.yaxis1&&(s.yaxis||(s.yaxis=s.yaxis1),delete s.yaxis1),s.scene1&&(s.scene||(s.scene=s.scene1),delete s.scene1);var A=(e.subplotsRegistry.cartesian||{}).attrRegex,E=(e.subplotsRegistry.polar||{}).attrRegex,I=(e.subplotsRegistry.ternary||{}).attrRegex,C=(e.subplotsRegistry.gl3d||{}).attrRegex,R=Object.keys(s);for(k=0;k<R.length;k++){var O=R[k];if(A&&A.test(O)){var D=s[O];D.anchor&&"free"!==D.anchor&&(D.anchor=a(D.anchor)),D.overlaying&&(D.overlaying=a(D.overlaying)),D.type||(D.isdate?D.type="date":D.islog?D.type="log":!1===D.isdate&&!1===D.islog&&(D.type="linear")),"withzero"!==D.autorange&&"tozero"!==D.autorange||(D.autorange=!0,D.rangemode="tozero"),delete D.islog,delete D.isdate,delete D.categories,h(D,"domain")&&delete D.domain,void 0!==D.autotick&&(void 0===D.tickmode&&(D.tickmode=D.autotick?"auto":"linear"),delete D.autotick),i(D)}else if(E&&E.test(O))i(s[O].radialaxis);else if(I&&I.test(O)){var L=s[O];i(L.aaxis),i(L.baxis),i(L.caxis)}else if(C&&C.test(O)){var B=s[O],j=B.cameraposition;if(Array.isArray(j)&&4===j[0].length){var Y=j[1],Q=j[2],ne=m([],j[0]),X=[];for(M=0;M<3;++M)X[M]=Y[M]+Q*ne[2+4*M];B.camera={eye:{x:X[0],y:X[1],z:X[2]},center:{x:Y[0],y:Y[1],z:Y[2]},up:{x:0,y:0,z:1}},delete B.cameraposition}i(B.xaxis),i(B.yaxis),i(B.zaxis)}}var $=Array.isArray(s.annotations)?s.annotations.length:0;for(k=0;k<$;k++){var re=s.annotations[k];y.isPlainObject(re)&&(re.ref&&("paper"===re.ref?(re.xref="paper",re.yref="paper"):"data"===re.ref&&(re.xref="x",re.yref="y"),delete re.ref),u(re,"xref"),u(re,"yref"))}var H=Array.isArray(s.shapes)?s.shapes.length:0;for(k=0;k<H;k++){var U=s.shapes[k];y.isPlainObject(U)&&(u(U,"xref"),u(U,"yref"))}var G=Array.isArray(s.images)?s.images.length:0;for(k=0;k<G;k++){var ie=s.images[k];y.isPlainObject(ie)&&(u(ie,"xref"),u(ie,"yref"))}var q=s.legend;return q&&(q.x>3?(q.x=1.02,q.xanchor="left"):q.x<-2&&(q.x=-.02,q.xanchor="right"),q.y>3?(q.y=1.02,q.yanchor="bottom"):q.y<-2&&(q.y=-.02,q.yanchor="top")),i(s),"rotate"===s.dragmode&&(s.dragmode="orbit"),n.clean(s),s.template&&s.template.layout&&ae.cleanLayout(s.template.layout),s},ae.cleanData=function(s){for(var k=0;k<s.length;k++){var M,A=s[k];if("histogramy"===A.type&&"xbins"in A&&!("ybins"in A)&&(A.ybins=A.xbins,delete A.xbins),A.error_y&&"opacity"in A.error_y){var E=n.defaults,I=A.error_y.color||(p(A,"bar")?n.defaultLine:E[k%E.length]);A.error_y.color=n.addOpacity(n.rgb(I),n.opacity(I)*A.error_y.opacity),delete A.error_y.opacity}if("bardir"in A&&("h"!==A.bardir||!p(A,"bar")&&"histogram"!==A.type.substr(0,9)||(A.orientation="h",ae.swapXYData(A)),delete A.bardir),"histogramy"===A.type&&ae.swapXYData(A),"histogramx"!==A.type&&"histogramy"!==A.type||(A.type="histogram"),"scl"in A&&!("colorscale"in A)&&(A.colorscale=A.scl,delete A.scl),"reversescl"in A&&!("reversescale"in A)&&(A.reversescale=A.reversescl,delete A.reversescl),A.xaxis&&(A.xaxis=a(A.xaxis,"x")),A.yaxis&&(A.yaxis=a(A.yaxis,"y")),p(A,"gl3d")&&A.scene&&(A.scene=e.subplotsRegistry.gl3d.cleanId(A.scene)),!p(A,"pie-like")&&!p(A,"bar-like"))if(Array.isArray(A.textposition))for(M=0;M<A.textposition.length;M++)A.textposition[M]=l(A.textposition[M]);else A.textposition&&(A.textposition=l(A.textposition));var C=w.getModule(A);if(C&&C.colorbar){var R=C.colorbar.container,O=R?A[R]:A;O&&O.colorscale&&("YIGnBu"===O.colorscale&&(O.colorscale="YlGnBu"),"YIOrRd"===O.colorscale&&(O.colorscale="YlOrRd"))}if("surface"===A.type&&y.isPlainObject(A.contours)){var D=["x","y","z"];for(M=0;M<D.length;M++){var L=A.contours[D[M]];y.isPlainObject(L)&&(L.highlightColor&&(L.highlightcolor=L.highlightColor,delete L.highlightColor),L.highlightWidth&&(L.highlightwidth=L.highlightWidth,delete L.highlightWidth))}}if("candlestick"===A.type||"ohlc"===A.type){var B=!1!==(A.increasing||{}).showlegend,j=!1!==(A.decreasing||{}).showlegend,W=c(A.increasing),Y=c(A.decreasing);if(!1!==W&&!1!==Y){var Q=f(W,Y,B,j);Q&&(A.name=Q)}else!W&&!Y||A.name||(A.name=W||Y)}if(Array.isArray(A.transforms)){var ne=A.transforms;for(M=0;M<ne.length;M++){var X=ne[M];if(y.isPlainObject(X))switch(X.type){case"filter":X.filtersrc&&(X.target=X.filtersrc,delete X.filtersrc),X.calendar&&(X.valuecalendar||(X.valuecalendar=X.calendar),delete X.calendar);break;case"groupby":if(X.styles=X.styles||X.style,X.styles&&!Array.isArray(X.styles)){var $=X.styles,re=Object.keys($);X.styles=[];for(var H=0;H<re.length;H++)X.styles.push({target:re[H],value:$[re[H]]})}}}}h(A,"line")&&delete A.line,"marker"in A&&(h(A.marker,"line")&&delete A.marker.line,h(A,"marker")&&delete A.marker),n.clean(A),A.autobinx&&(delete A.autobinx,delete A.xbins),A.autobiny&&(delete A.autobiny,delete A.ybins),i(A),A.colorbar&&i(A.colorbar),A.marker&&A.marker.colorbar&&i(A.marker.colorbar),A.line&&A.line.colorbar&&i(A.line.colorbar),A.aaxis&&i(A.aaxis),A.baxis&&i(A.baxis)}},ae.swapXYData=function(s){var k;if(y.swapAttrs(s,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(s.z)&&Array.isArray(s.z[0])&&(s.transpose?delete s.transpose:s.transpose=!0),s.error_x&&s.error_y){var M=s.error_y,A="copy_ystyle"in M?M.copy_ystyle:!(M.color||M.thickness||M.width);y.swapAttrs(s,["error_?.copy_ystyle"]),A&&y.swapAttrs(s,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof s.hoverinfo){var E=s.hoverinfo.split("+");for(k=0;k<E.length;k++)"x"===E[k]?E[k]="y":"y"===E[k]&&(E[k]="x");s.hoverinfo=E.join("+")}},ae.coerceTraceIndices=function(s,k){if(g(k))return[k];if(!Array.isArray(k)||!k.length)return s.data.map(function(E,I){return I});if(Array.isArray(k)){for(var M=[],A=0;A<k.length;A++)y.isIndex(k[A],s.data.length)?M.push(k[A]):y.warn("trace index (",k[A],") is not a number or is out of bounds");return M}return k},ae.manageArrayContainers=function(s,k,M){var A=s.obj,E=s.parts,I=E.length,C=E[I-1],R=g(C);if(R&&null===k){var O=E.slice(0,I-1).join(".");y.nestedProperty(A,O).get().splice(C,1)}else R&&void 0===s.get()&&void 0===s.get()&&(M[s.astr]=null),s.set(k)};var d=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function o(s){var k=s.search(d);if(k>0)return s.substr(0,k)}ae.hasParent=function(s,k){for(var M=o(k);M;){if(M in s)return!0;M=o(M)}return!1};var _=["x","y","z"];ae.clearAxisTypes=function(s,k,M){for(var A=0;A<k.length;A++)for(var E=s._fullData[A],I=0;I<3;I++){var C=t(s,E,_[I]);if(C&&"log"!==C.type){var R=C._name,O=C._id.substr(1);if("scene"===O.substr(0,5)){if(void 0!==M[O])continue;R=O+"."+R}var D=R+".type";void 0===M[R]&&void 0===M[D]&&y.nestedProperty(s.layout,D).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(x,oe,ae){"use strict";var g=x("./plot_api");ae._doPlot=g._doPlot,ae.newPlot=g.newPlot,ae.restyle=g.restyle,ae.relayout=g.relayout,ae.redraw=g.redraw,ae.update=g.update,ae._guiRestyle=g._guiRestyle,ae._guiRelayout=g._guiRelayout,ae._guiUpdate=g._guiUpdate,ae._storeDirectGUIEdit=g._storeDirectGUIEdit,ae.react=g.react,ae.extendTraces=g.extendTraces,ae.prependTraces=g.prependTraces,ae.addTraces=g.addTraces,ae.deleteTraces=g.deleteTraces,ae.moveTraces=g.moveTraces,ae.purge=g.purge,ae.addFrames=g.addFrames,ae.deleteFrames=g.deleteFrames,ae.animate=g.animate,ae.setPlotConfig=g.setPlotConfig,ae.toImage=x("./to_image"),ae.validate=x("./validate"),ae.downloadImage=x("../snapshot/download");var m=x("./template_api");ae.makeTemplate=m.makeTemplate,ae.validateTemplate=m.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(x,oe,ae){"use strict";var g=x("../lib/is_plain_object"),m=x("../lib/noop"),w=x("../lib/loggers"),y=x("../lib/search").sorterAsc,e=x("../registry");ae.containerArrayMatch=x("./container_array_match");var r=ae.isAddVal=function(a){return"add"===a||g(a)},n=ae.isRemoveVal=function(a){return null===a||"remove"===a};ae.applyContainerArrayChanges=function(a,t,p,u,i){var c=t.astr,f=e.getComponentMethod(c,"supplyLayoutDefaults"),l=e.getComponentMethod(c,"draw"),h=e.getComponentMethod(c,"drawOne"),d=u.replot||u.recalc||f===m||l===m,o=a.layout,_=a._fullLayout;if(p[""]){Object.keys(p).length>1&&w.warn("Full array edits are incompatible with other edits",c);var s=p[""][""];if(n(s))t.set(null);else{if(!Array.isArray(s))return w.warn("Unrecognized full array edit value",c,s),!0;t.set(s)}return!d&&(f(o,_),l(a),!0)}var k,M,A,E,I,C,R,D=Object.keys(p).map(Number).sort(y),L=t.get(),B=L||[],j=i(_,c).get(),W=[],Y=-1,Q=B.length;for(k=0;k<D.length;k++)if(E=p[A=D[k]],I=Object.keys(E),R=r(C=E[""]),A<0||A>B.length-(R?0:1))w.warn("index out of range",c,A);else if(void 0!==C)I.length>1&&w.warn("Insertion & removal are incompatible with edits to the same index.",c,A),n(C)?W.push(A):R?("add"===C&&(C={}),B.splice(A,0,C),j&&j.splice(A,0,{})):w.warn("Unrecognized full object edit value",c,A,C),-1===Y&&(Y=A);else for(M=0;M<I.length;M++)i(B[A],I[M],c+"["+A+"].").set(E[I[M]]);for(k=W.length-1;k>=0;k--)B.splice(W[k],1),j&&j.splice(W[k],1);if(B.length?L||t.set(B):t.set(null),d)return!1;if(f(o,_),h!==m){var ne;if(-1===Y)ne=D;else{for(Q=Math.max(B.length,Q),ne=[],k=0;k<D.length&&!((A=D[k])>=Y);k++)ne.push(A);for(k=Y;k<Q;k++)ne.push(k)}for(k=0;k<ne.length;k++)h(a,ne[k])}else l(a);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("fast-isnumeric"),w=x("has-hover"),y=x("../lib"),e=y.nestedProperty,r=x("../lib/events"),n=x("../lib/queue"),a=x("../registry"),t=x("./plot_schema"),p=x("../plots/plots"),u=x("../plots/cartesian/axes"),i=x("../components/drawing"),c=x("../components/color"),f=x("../plots/cartesian/graph_interact").initInteractions,l=x("../constants/xmlns_namespaces"),h=x("../plots/cartesian/select").clearSelect,d=x("./plot_config").dfltConfig,o=x("./manage_arrays"),_=x("./helpers"),s=x("./subroutines"),k=x("./edit_types"),M=x("../plots/cartesian/constants").AX_NAME_PATTERN,A=0;function E(ve){var Te=ve._fullLayout;Te._redrawFromAutoMarginCount?Te._redrawFromAutoMarginCount--:ve.emit("plotly_afterplot")}function I(ve,Te){try{ve._fullLayout._paper.style("background",Te)}catch(Pe){y.error(Pe)}}function C(ve,Te){I(ve,c.combine(Te,"white"))}function R(ve,Te){if(!ve._context){ve._context=y.extendDeep({},d);var Pe=g.select("base");ve._context._baseUrl=Pe.size()&&Pe.attr("href")?window.location.href.split("#")[0]:""}var De,Fe,Ue,He=ve._context;if(Te){for(Fe=Object.keys(Te),De=0;De<Fe.length;De++)"editable"!==(Ue=Fe[De])&&"edits"!==Ue&&Ue in He&&(He[Ue]="setBackground"===Ue&&"opaque"===Te[Ue]?C:Te[Ue]);Te.plot3dPixelRatio&&!He.plotGlPixelRatio&&(He.plotGlPixelRatio=He.plot3dPixelRatio);var Ke=Te.editable;if(void 0!==Ke)for(He.editable=Ke,Fe=Object.keys(He.edits),De=0;De<Fe.length;De++)He.edits[Fe[De]]=Ke;if(Te.edits)for(Fe=Object.keys(Te.edits),De=0;De<Fe.length;De++)(Ue=Fe[De])in He.edits&&(He.edits[Ue]=Te.edits[Ue]);He._exportedPlot=Te._exportedPlot}He.staticPlot&&(He.editable=!1,He.edits={},He.autosizable=!1,He.scrollZoom=!1,He.doubleClick=!1,He.showTips=!1,He.showLink=!1,He.displayModeBar=!1),"hover"!==He.displayModeBar||w||(He.displayModeBar=!0),"transparent"!==He.setBackground&&"function"==typeof He.setBackground||(He.setBackground=I),He._hasZeroHeight=He._hasZeroHeight||0===ve.clientHeight,He._hasZeroWidth=He._hasZeroWidth||0===ve.clientWidth;var st=He.scrollZoom,Ve=He._scrollZoom={};if(!0===st)Ve.cartesian=1,Ve.gl3d=1,Ve.geo=1,Ve.mapbox=1;else if("string"==typeof st){var $e=st.split("+");for(De=0;De<$e.length;De++)Ve[$e[De]]=1}else!1!==st&&(Ve.gl3d=1,Ve.geo=1,Ve.mapbox=1)}function O(ve,Te){var Pe,De,Fe=Te+1,Ue=[];for(Pe=0;Pe<ve.length;Pe++)(De=ve[Pe])<0?Ue.push(Fe+De):Ue.push(De);return Ue}function D(ve,Te,Pe){var De,Fe;for(De=0;De<Te.length;De++){if((Fe=Te[De])!==parseInt(Fe,10))throw new Error("all values in "+Pe+" must be integers");if(Fe>=ve.data.length||Fe<-ve.data.length)throw new Error(Pe+" must be valid indices for gd.data.");if(Te.indexOf(Fe,De+1)>-1||Fe>=0&&Te.indexOf(-ve.data.length+Fe)>-1||Fe<0&&Te.indexOf(ve.data.length+Fe)>-1)throw new Error("each index in "+Pe+" must be unique.")}}function L(ve,Te,Pe){if(!Array.isArray(ve.data))throw new Error("gd.data must be an array.");if(void 0===Te)throw new Error("currentIndices is a required argument.");if(Array.isArray(Te)||(Te=[Te]),D(ve,Te,"currentIndices"),void 0===Pe||Array.isArray(Pe)||(Pe=[Pe]),void 0!==Pe&&D(ve,Pe,"newIndices"),void 0!==Pe&&Te.length!==Pe.length)throw new Error("current and new indices must be of equal length.")}function B(ve,Te,Pe,De,Fe){!function(tt,ut,xt,kt){var Bt=y.isPlainObject(kt);if(!Array.isArray(tt.data))throw new Error("gd.data must be an array");if(!y.isPlainObject(ut))throw new Error("update must be a key:value object");if(void 0===xt)throw new Error("indices must be an integer or array of integers");for(var Rt in D(tt,xt,"indices"),ut){if(!Array.isArray(ut[Rt])||ut[Rt].length!==xt.length)throw new Error("attribute "+Rt+" must be an array of length equal to indices array length");if(Bt&&(!(Rt in kt)||!Array.isArray(kt[Rt])||kt[Rt].length!==ut[Rt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(ve,Te,Pe,De);for(var Ue=function(tt,ut,xt,kt){var Rt,ft,lt,Ft,Jt=y.isPlainObject(kt),ln=[];for(var dn in Array.isArray(xt)||(xt=[xt]),xt=O(xt,tt.data.length-1),ut)for(var cn=0;cn<xt.length;cn++){if(Rt=(ft=e(tt.data[xt[cn]],dn)).get(),!y.isArrayOrTypedArray(lt=ut[dn][cn]))throw new Error("attribute: "+dn+" index: "+cn+" must be an array");if(!y.isArrayOrTypedArray(Rt))throw new Error("cannot extend missing or non-array attribute: "+dn);if(Rt.constructor!==lt.constructor)throw new Error("cannot extend array with an array of a different type: "+dn);m(Ft=Jt?kt[dn][cn]:kt)||(Ft=-1),ln.push({prop:ft,target:Rt,insert:lt,maxp:Math.floor(Ft)})}return ln}(ve,Te,Pe,De),He={},Ke={},st=0;st<Ue.length;st++){var Ve=Ue[st].prop,Qe=Fe(Ue[st].target,Ue[st].insert,Ue[st].maxp);Ve.set(Qe[0]),Array.isArray(He[Ve.astr])||(He[Ve.astr]=[]),He[Ve.astr].push(Qe[1]),Array.isArray(Ke[Ve.astr])||(Ke[Ve.astr]=[]),Ke[Ve.astr].push(Ue[st].target.length)}return{update:He,maxPoints:Ke}}function j(ve,Te){var Pe=new ve.constructor(ve.length+Te.length);return Pe.set(ve),Pe.set(Te,ve.length),Pe}function W(ve,Te,Pe,De){ve=y.getGraphDiv(ve),_.clearPromiseQueue(ve);var Fe={};if("string"==typeof Te)Fe[Te]=Pe;else{if(!y.isPlainObject(Te))return y.warn("Restyle fail.",Te,Pe,De),Promise.reject();Fe=y.extendFlat({},Te),void 0===De&&(De=Pe)}Object.keys(Fe).length&&(ve.changed=!0);var Ue=_.coerceTraceIndices(ve,De),He=X(ve,Fe,Ue),Ke=He.flags;Ke.calc&&(ve.calcdata=void 0),Ke.clearAxisTypes&&_.clearAxisTypes(ve,Ue,{});var st=[];Ke.fullReplot?st.push(ae._doPlot):(st.push(p.previousPromises),p.supplyDefaults(ve),Ke.markerSize&&(p.doCalcdata(ve),U(st)),Ke.style&&st.push(s.doTraceStyle),Ke.colorbars&&st.push(s.doColorBars),st.push(E)),st.push(p.rehover,p.redrag),n.add(ve,W,[ve,He.undoit,He.traces],W,[ve,He.redoit,He.traces]);var Ve=y.syncOrAsync(st,ve);return Ve&&Ve.then||(Ve=Promise.resolve()),Ve.then(function(){return ve.emit("plotly_restyle",He.eventData),ve})}function Y(ve){return void 0===ve?null:ve}function Q(ve,Te){return Te?function(Pe,De,Fe){var Ue=e(Pe,De),He=Ue.set;return Ue.set=function(Ke){ne((Fe||"")+De,Ue.get(),Ke,ve),He(Ke)},Ue}:e}function ne(ve,Te,Pe,De){if(Array.isArray(Te)||Array.isArray(Pe))for(var Fe=Array.isArray(Te)?Te:[],Ue=Array.isArray(Pe)?Pe:[],He=Math.max(Fe.length,Ue.length),Ke=0;Ke<He;Ke++)ne(ve+"["+Ke+"]",Fe[Ke],Ue[Ke],De);else if(y.isPlainObject(Te)||y.isPlainObject(Pe)){var st=y.isPlainObject(Te)?Te:{},Ve=y.isPlainObject(Pe)?Pe:{},$e=y.extendFlat({},st,Ve);for(var Qe in $e)ne(ve+"."+Qe,st[Qe],Ve[Qe],De)}else void 0===De[ve]&&(De[ve]=Y(Te))}function X(ve,Te,Pe){var De,Fe=ve._fullLayout,Ue=ve._fullData,He=ve.data,Ke=Fe._guiEditing,st=Q(Fe._preGUI,Ke),Ve=y.extendDeepAll({},Te);$(Te);var $e,Qe=k.traceFlags(),tt={},ut={};function xt(){return Pe.map(function(){})}function kt(dt){var Mt=u.id2name(dt);-1===$e.indexOf(Mt)&&$e.push(Mt)}function Bt(dt){return"LAYOUT"+dt+".autorange"}function Rt(dt){return"LAYOUT"+dt+".range"}function ft(dt){for(var Mt=dt;Mt<Ue.length;Mt++)if(Ue[Mt]._input===He[dt])return Ue[Mt]}function lt(dt,Mt,zt){if(Array.isArray(dt))dt.forEach(function(Qt){lt(Qt,Mt,zt)});else if(!(dt in Te)&&!_.hasParent(Te,dt)){var Xt;if("LAYOUT"===dt.substr(0,6))Xt=st(ve.layout,dt.replace("LAYOUT",""));else{var un=Pe[zt];Xt=Q(Fe._tracePreGUI[ft(un)._fullInput.uid],Ke)(He[un],dt)}dt in ut||(ut[dt]=xt()),void 0===ut[dt][zt]&&(ut[dt][zt]=Y(Xt.get())),void 0!==Mt&&Xt.set(Mt)}}function Ft(dt){return function(Mt){return Ue[Mt][dt]}}function Jt(dt){return function(Mt,zt){return!1===Mt?Ue[Pe[zt]][dt]:null}}for(var ln in Te){if(_.hasParent(Te,ln))throw new Error("cannot set "+ln+" and a parent attribute simultaneously");var dn,cn,Tn,nn,Me,Ee,Se=Te[ln];if("autobinx"!==ln&&"autobiny"!==ln||(ln=ln.charAt(ln.length-1)+"bins",Se=Array.isArray(Se)?Se.map(Jt(ln)):!1===Se?Pe.map(Ft(ln)):null),tt[ln]=Se,"LAYOUT"!==ln.substr(0,6)){for(ut[ln]=xt(),De=0;De<Pe.length;De++)if(dn=He[Pe[De]],cn=ft(Pe[De]),nn=(Tn=Q(Fe._tracePreGUI[cn._fullInput.uid],Ke)(dn,ln)).get(),void 0!==(Me=Array.isArray(Se)?Se[De%Se.length]:Se)){var je=Tn.parts[Tn.parts.length-1],qe=ln.substr(0,ln.length-je.length-1),Je=qe?qe+".":"",at=qe?e(cn,qe).get():cn;if((Ee=t.getTraceValObject(cn,Tn.parts))&&Ee.impliedEdits&&null!==Me)for(var it in Ee.impliedEdits)lt(y.relativeAttr(ln,it),Ee.impliedEdits[it],De);else if("thicknessmode"!==je&&"lenmode"!==je||nn===Me||"fraction"!==Me&&"pixels"!==Me||!at){if("type"===ln&&("pie"===Me!=("pie"===nn)||"funnelarea"===Me!=("funnelarea"===nn))){var yt="x",vt="y";"bar"!==Me&&"bar"!==nn||"h"!==dn.orientation||(yt="y",vt="x"),y.swapAttrs(dn,["?","?src"],"labels",yt),y.swapAttrs(dn,["d?","?0"],"label",yt),y.swapAttrs(dn,["?","?src"],"values",vt),"pie"===nn||"funnelarea"===nn?(e(dn,"marker.color").set(e(dn,"marker.colors").get()),Fe._pielayer.selectAll("g.trace").remove()):a.traceIs(dn,"cartesian")&&e(dn,"marker.colors").set(e(dn,"marker.color").get())}}else{var Ut=Fe._size,Wt=at.orient,gt="top"===Wt||"bottom"===Wt;if("thicknessmode"===je){var At=gt?Ut.h:Ut.w;lt(Je+"thickness",at.thickness*("fraction"===Me?1/At:At),De)}else{var Zt=gt?Ut.w:Ut.h;lt(Je+"len",at.len*("fraction"===Me?1/Zt:Zt),De)}}if(ut[ln][De]=Y(nn),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(ln)){if("orientation"===ln){Tn.set(Me);var Et=dn.x&&!dn.y?"h":"v";if((Tn.get()||Et)===cn.orientation)continue}else"orientationaxes"===ln&&(dn.orientation={v:"h",h:"v"}[cn.orientation]);_.swapXYData(dn),Qe.calc=Qe.clearAxisTypes=!0}else-1!==p.dataArrayContainers.indexOf(Tn.parts[0])?(_.manageArrayContainers(Tn,Me,ut),Qe.calc=!0):(Ee?Ee.arrayOk&&!a.traceIs(cn,"regl")&&(y.isArrayOrTypedArray(Me)||y.isArrayOrTypedArray(nn))?Qe.calc=!0:k.update(Qe,Ee):Qe.calc=!0,Tn.set(Me))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(ln)&&u.swap(ve,Pe),"orientationaxes"===ln){var Ct=e(ve.layout,"hovermode"),Ne=Ct.get();"x"===Ne?Ct.set("y"):"y"===Ne?Ct.set("x"):"x unified"===Ne?Ct.set("y unified"):"y unified"===Ne&&Ct.set("x unified")}if(-1!==["orientation","type"].indexOf(ln)){for($e=[],De=0;De<Pe.length;De++){var et=He[Pe[De]];a.traceIs(et,"cartesian")&&(kt(et.xaxis||"x"),kt(et.yaxis||"y"))}lt($e.map(Bt),!0,0),lt($e.map(Rt),[0,1],0)}}else Tn=st(ve.layout,ln.replace("LAYOUT","")),ut[ln]=[Y(Tn.get())],Tn.set(Array.isArray(Se)?Se[0]:Se),Qe.calc=!0}return(Qe.calc||Qe.plot)&&(Qe.fullReplot=!0),{flags:Qe,undoit:ut,redoit:tt,traces:Pe,eventData:y.extendDeepNoArrays([],[Ve,Pe])}}function $(ve){var Te,Pe,De,Fe=y.counterRegex("axis",".title",!1,!1),Ue=/colorbar\.title$/,He=Object.keys(ve);for(Te=0;Te<He.length;Te++)De=ve[Pe=He[Te]],"title"!==Pe&&!Fe.test(Pe)&&!Ue.test(Pe)||"string"!=typeof De&&"number"!=typeof De?Pe.indexOf("titlefont")>-1&&-1===Pe.indexOf("grouptitlefont")?Ke(Pe,Pe.replace("titlefont","title.font")):Pe.indexOf("titleposition")>-1?Ke(Pe,Pe.replace("titleposition","title.position")):Pe.indexOf("titleside")>-1?Ke(Pe,Pe.replace("titleside","title.side")):Pe.indexOf("titleoffset")>-1&&Ke(Pe,Pe.replace("titleoffset","title.offset")):Ke(Pe,Pe.replace("title","title.text"));function Ke(st,Ve){ve[Ve]=ve[st],delete ve[st]}}function re(ve,Te,Pe){ve=y.getGraphDiv(ve),_.clearPromiseQueue(ve);var De={};if("string"==typeof Te)De[Te]=Pe;else{if(!y.isPlainObject(Te))return y.warn("Relayout fail.",Te,Pe),Promise.reject();De=y.extendFlat({},Te)}Object.keys(De).length&&(ve.changed=!0);var Fe=ee(ve,De),Ue=Fe.flags;Ue.calc&&(ve.calcdata=void 0);var He=[p.previousPromises];Ue.layoutReplot?He.push(s.layoutReplot):Object.keys(De).length&&(H(ve,Ue,Fe)||p.supplyDefaults(ve),Ue.legend&&He.push(s.doLegend),Ue.layoutstyle&&He.push(s.layoutStyles),Ue.axrange&&U(He,Fe.rangesAltered),Ue.ticks&&He.push(s.doTicksRelayout),Ue.modebar&&He.push(s.doModeBar),Ue.camera&&He.push(s.doCamera),Ue.colorbars&&He.push(s.doColorBars),He.push(E)),He.push(p.rehover,p.redrag),n.add(ve,re,[ve,Fe.undoit],re,[ve,Fe.redoit]);var Ke=y.syncOrAsync(He,ve);return Ke&&Ke.then||(Ke=Promise.resolve(ve)),Ke.then(function(){return ve.emit("plotly_relayout",Fe.eventData),ve})}function H(ve,Te,Pe){var De=ve._fullLayout;if(!Te.axrange)return!1;for(var Fe in Te)if("axrange"!==Fe&&Te[Fe])return!1;for(var Ue in Pe.rangesAltered){var He=u.id2name(Ue),Ke=ve.layout[He],st=De[He];if(st.autorange=Ke.autorange,Ke.range&&(st.range=Ke.range.slice()),st.cleanRange(),st._matchGroup)for(var Ve in st._matchGroup)if(Ve!==Ue){var $e=De[u.id2name(Ve)];$e.autorange=st.autorange,$e.range=st.range.slice(),$e._input.range=st.range.slice()}}return!0}function U(ve,Te){ve.push(h,s.doAutoRangeAndConstraints,Te?function(De){var Fe=[],Ue=!0;for(var He in Te){var Ke=u.getFromId(De,He);if(Fe.push(He),-1!==(Ke.ticklabelposition||"").indexOf("inside")&&Ke._anchorAxis&&Fe.push(Ke._anchorAxis._id),Ke._matchGroup)for(var st in Ke._matchGroup)Te[st]||Fe.push(st);Ke.automargin&&(Ue=!1)}return u.draw(De,Fe,{skipTitle:Ue})}:function(De){return u.draw(De,"redraw")},s.drawData,s.finalDraw)}var G=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ie=/^[xyz]axis[0-9]*\.autorange$/,q=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ee(ve,Te){var Pe,De,Fe,Ue=ve.layout,He=ve._fullLayout,st=Q(He._preGUI,He._guiEditing),Ve=Object.keys(Te),$e=u.list(ve),Qe=y.extendDeepAll({},Te),tt={};for($(Te),Ve=Object.keys(Te),De=0;De<Ve.length;De++)if(0===Ve[De].indexOf("allaxes")){for(Fe=0;Fe<$e.length;Fe++){var ut=$e[Fe]._id.substr(1),xt=-1!==ut.indexOf("scene")?ut+".":"",kt=Ve[De].replace("allaxes",xt+$e[Fe]._name);Te[kt]||(Te[kt]=Te[Ve[De]])}delete Te[Ve[De]]}var Bt=k.layoutFlags(),Rt={},ft={};function lt(un,Qt){if(Array.isArray(un))un.forEach(function(qn){lt(qn,Qt)});else if(!(un in Te)&&!_.hasParent(Te,un)){var kn=st(Ue,un);un in ft||(ft[un]=Y(kn.get())),void 0!==Qt&&kn.set(Qt)}}var Ft,Jt={};function ln(un){var Qt=u.name2id(un.split(".")[0]);return Jt[Qt]=1,Qt}for(var dn in Te){if(_.hasParent(Te,dn))throw new Error("cannot set "+dn+" and a parent attribute simultaneously");for(var cn=st(Ue,dn),Tn=Te[dn],nn=cn.parts.length-1;nn>0&&"string"!=typeof cn.parts[nn];)nn--;var Me=cn.parts[nn],Ee=cn.parts[nn-1]+"."+Me,Se=cn.parts.slice(0,nn).join("."),je=e(ve.layout,Se).get(),qe=e(He,Se).get(),Je=cn.get();if(void 0!==Tn){Rt[dn]=Tn,ft[dn]="reverse"===Me?Tn:Y(Je);var at=t.getLayoutValObject(He,cn.parts);if(at&&at.impliedEdits&&null!==Tn)for(var it in at.impliedEdits)lt(y.relativeAttr(dn,it),at.impliedEdits[it]);if(-1!==["width","height"].indexOf(dn))if(Tn){lt("autosize",null);var yt="height"===dn?"width":"height";lt(yt,He[yt])}else He[dn]=ve._initialAutoSize[dn];else if("autosize"===dn)lt("width",Tn?null:He.width),lt("height",Tn?null:He.height);else if(Ee.match(G))ln(Ee),e(He,Se+"._inputRange").set(null);else if(Ee.match(ie)){ln(Ee),e(He,Se+"._inputRange").set(null);var vt=e(He,Se).get();vt._inputDomain&&(vt._input.domain=vt._inputDomain.slice())}else Ee.match(q)&&e(He,Se+"._inputDomain").set(null);if("type"===Me){Ft=je;var Ut="linear"===qe.type&&"log"===Tn;if(Ut||"log"===qe.type&&"linear"===Tn){if(Ft&&Ft.range)if(qe.autorange)Ut&&(Ft.range=Ft.range[1]>Ft.range[0]?[1,2]:[2,1]);else{var gt=Ft.range[0],At=Ft.range[1];Ut?(gt<=0&&At<=0&&lt(Se+".autorange",!0),gt<=0?gt=At/1e6:At<=0&&(At=gt/1e6),lt(Se+".range[0]",Math.log(gt)/Math.LN10),lt(Se+".range[1]",Math.log(At)/Math.LN10)):(lt(Se+".range[0]",Math.pow(10,gt)),lt(Se+".range[1]",Math.pow(10,At)))}else lt(Se+".autorange",!0);Array.isArray(He._subplots.polar)&&He._subplots.polar.length&&He[cn.parts[0]]&&"radialaxis"===cn.parts[1]&&delete He[cn.parts[0]]._subplot.viewInitial["radialaxis.range"],a.getComponentMethod("annotations","convertCoords")(ve,qe,Tn,lt),a.getComponentMethod("images","convertCoords")(ve,qe,Tn,lt)}else lt(Se+".autorange",!0),lt(Se+".range",null);e(He,Se+"._inputRange").set(null)}else if(Me.match(M)){var Zt=e(He,dn).get(),Et=(Tn||{}).type;Et&&"-"!==Et||(Et="linear"),a.getComponentMethod("annotations","convertCoords")(ve,Zt,Et,lt),a.getComponentMethod("images","convertCoords")(ve,Zt,Et,lt)}var Ct=o.containerArrayMatch(dn);if(Ct){Pe=Ct.array;var Ne=Ct.property,et=at||{editType:"calc"};""!==(De=Ct.index)&&""===Ne&&(o.isAddVal(Tn)?ft[dn]=null:o.isRemoveVal(Tn)?ft[dn]=(e(Ue,Pe).get()||[])[De]:y.warn("unrecognized full object value",Te)),k.update(Bt,et),tt[Pe]||(tt[Pe]={});var dt=tt[Pe][De];dt||(dt=tt[Pe][De]={}),dt[Ne]=Tn,delete Te[dn]}else"reverse"===Me?(je.range?je.range.reverse():(lt(Se+".autorange",!0),je.range=[1,0]),qe.autorange?Bt.calc=!0:Bt.plot=!0):("dragmode"===dn&&(!1===Tn&&!1!==Je||!1!==Tn&&!1===Je)||He._has("scatter-like")&&He._has("regl")&&"dragmode"===dn&&("lasso"===Tn||"select"===Tn)&&"lasso"!==Je&&"select"!==Je||He._has("gl2d")?Bt.plot=!0:at?k.update(Bt,at):Bt.calc=!0,cn.set(Tn))}}for(Pe in tt)o.applyContainerArrayChanges(ve,st(Ue,Pe),tt[Pe],Bt,st)||(Bt.plot=!0);for(var Mt in Jt){var zt=(Ft=u.getFromId(ve,Mt))&&Ft._constraintGroup;if(zt)for(var Xt in Bt.calc=!0,zt)Jt[Xt]||(u.getFromId(ve,Xt)._constraintShrinkable=!0)}return(te(ve)||Te.height||Te.width)&&(Bt.plot=!0),(Bt.plot||Bt.calc)&&(Bt.layoutReplot=!0),{flags:Bt,rangesAltered:Jt,undoit:ft,redoit:Rt,eventData:Qe}}function te(ve){var Te=ve._fullLayout,Pe=Te.width,De=Te.height;return ve.layout.autosize&&p.plotAutoSize(ve,ve.layout,Te),Te.width!==Pe||Te.height!==De}function se(ve,Te,Pe,De){ve=y.getGraphDiv(ve),_.clearPromiseQueue(ve),y.isPlainObject(Te)||(Te={}),y.isPlainObject(Pe)||(Pe={}),Object.keys(Te).length&&(ve.changed=!0),Object.keys(Pe).length&&(ve.changed=!0);var Fe=_.coerceTraceIndices(ve,De),Ue=X(ve,y.extendFlat({},Te),Fe),He=Ue.flags,Ke=ee(ve,y.extendFlat({},Pe)),st=Ke.flags;(He.calc||st.calc)&&(ve.calcdata=void 0),He.clearAxisTypes&&_.clearAxisTypes(ve,Fe,Pe);var Ve=[];st.layoutReplot?Ve.push(s.layoutReplot):He.fullReplot?Ve.push(ae._doPlot):(Ve.push(p.previousPromises),H(ve,st,Ke)||p.supplyDefaults(ve),He.style&&Ve.push(s.doTraceStyle),(He.colorbars||st.colorbars)&&Ve.push(s.doColorBars),st.legend&&Ve.push(s.doLegend),st.layoutstyle&&Ve.push(s.layoutStyles),st.axrange&&U(Ve,Ke.rangesAltered),st.ticks&&Ve.push(s.doTicksRelayout),st.modebar&&Ve.push(s.doModeBar),st.camera&&Ve.push(s.doCamera),Ve.push(E)),Ve.push(p.rehover,p.redrag),n.add(ve,se,[ve,Ue.undoit,Ke.undoit,Ue.traces],se,[ve,Ue.redoit,Ke.redoit,Ue.traces]);var $e=y.syncOrAsync(Ve,ve);return $e&&$e.then||($e=Promise.resolve(ve)),$e.then(function(){return ve.emit("plotly_update",{data:Ue.eventData,layout:Ke.eventData}),ve})}function ue(ve){return function(Te){Te._fullLayout._guiEditing=!0;var Pe=ve.apply(null,arguments);return Te._fullLayout._guiEditing=!1,Pe}}var de=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],he=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function xe(ve,Te){for(var Pe=0;Pe<Te.length;Pe++){var De=Te[Pe],Fe=ve.match(De.pattern);if(Fe){var Ue=Fe[1]||"";return{head:Ue,tail:ve.substr(Ue.length+1),attr:De.attr}}}}function ge(ve,Te){var Pe=e(Te,ve).get();if(void 0!==Pe)return Pe;var De=ve.split(".");for(De.pop();De.length>1;)if(De.pop(),void 0!==(Pe=e(Te,De.join(".")+".uirevision").get()))return Pe;return Te.uirevision}function _e(ve,Te){for(var Pe=0;Pe<Te.length;Pe++)if(Te[Pe]._fullInput.uid===ve)return Pe;return-1}function Ce(ve,Te,Pe){for(var De=0;De<Te.length;De++)if(Te[De].uid===ve)return De;return!Te[Pe]||Te[Pe].uid?-1:Pe}function Le(ve,Te){var Pe=y.isPlainObject(ve),De=Array.isArray(ve);return Pe||De?(Pe&&y.isPlainObject(Te)||De&&Array.isArray(Te))&&JSON.stringify(ve)===JSON.stringify(Te):ve===Te}function Ie(ve,Te,Pe,De){var Fe,Ue,He,Ke=De.getValObject,st=De.flags,Ve=De.immutable,$e=De.inArray,Qe=De.arrayIndex;function tt(){var je=Fe.editType;$e&&-1!==je.indexOf("arraydraw")?y.pushUnique(st.arrays[$e],Qe):(k.update(st,Fe),"none"!==je&&st.nChanges++,De.transition&&Fe.anim&&st.nChangesAnim++,(G.test(He)||ie.test(He))&&(st.rangesAltered[Pe[0]]=1),q.test(He)&&e(Te,"_inputDomain").set(null),"datarevision"===Ue&&(st.newDataRevision=1))}function ut(je){return"data_array"===je.valType||je.arrayOk}for(Ue in ve){if(st.calc&&!De.transition)return;var xt=ve[Ue],kt=Te[Ue],Bt=Pe.concat(Ue);if(He=Bt.join("."),"_"!==Ue.charAt(0)&&"function"!=typeof xt&&xt!==kt){if(("tick0"===Ue||"dtick"===Ue)&&"geo"!==Pe[0]){var Rt=Te.tickmode;if("auto"===Rt||"array"===Rt||!Rt)continue}if(("range"!==Ue||!Te.autorange)&&("zmin"!==Ue&&"zmax"!==Ue||"contourcarpet"!==Te.type)&&(Fe=Ke(Bt))&&(!Fe._compareAsJSON||JSON.stringify(xt)!==JSON.stringify(kt))){var ft,lt=Fe.valType,Ft=ut(Fe),Jt=Array.isArray(xt),ln=Array.isArray(kt);if(Jt&&ln){var dn="_input_"+Ue,cn=ve[dn],Tn=Te[dn];if(Array.isArray(cn)&&cn===Tn)continue}if(void 0===kt)Ft&&Jt?st.calc=!0:tt();else if(Fe._isLinkedToArray){var nn=[],Me=!1;$e||(st.arrays[Ue]=nn);var Ee=Math.min(xt.length,kt.length),Se=Math.max(xt.length,kt.length);if(Ee!==Se){if("arraydraw"!==Fe.editType){tt();continue}Me=!0}for(ft=0;ft<Ee;ft++)Ie(xt[ft],kt[ft],Bt.concat(ft),y.extendFlat({inArray:Ue,arrayIndex:ft},De));if(Me)for(ft=Ee;ft<Se;ft++)nn.push(ft)}else!lt&&y.isPlainObject(xt)?Ie(xt,kt,Bt,De):Ft?Jt&&ln?(Ve&&(st.calc=!0),(Ve||De.newDataRevision)&&tt()):Jt!==ln?st.calc=!0:tt():Jt&&ln&&xt.length===kt.length&&String(xt)===String(kt)||tt()}}}for(Ue in Te)if(!(Ue in ve)&&"_"!==Ue.charAt(0)&&"function"!=typeof Te[Ue]){if(ut(Fe=Ke(Pe.concat(Ue)))&&Array.isArray(Te[Ue]))return void(st.calc=!0);tt()}}function Be(ve){var Te=ve._fullLayout,Pe=ve.getBoundingClientRect();if(!y.equalDomRects(Pe,Te._lastBBox)){var De=Te._invTransform=y.inverseTransformMatrix(y.getFullTransformMatrix(ve));Te._invScaleX=Math.sqrt(De[0][0]*De[0][0]+De[0][1]*De[0][1]+De[0][2]*De[0][2]),Te._invScaleY=Math.sqrt(De[1][0]*De[1][0]+De[1][1]*De[1][1]+De[1][2]*De[1][2]),Te._lastBBox=Pe}}ae.animate=function(ve,Te,Pe){if(ve=y.getGraphDiv(ve),!y.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var De=ve._transitionData;De._frameQueue||(De._frameQueue=[]);var Fe=(Pe=p.supplyAnimationDefaults(Pe)).transition,Ue=Pe.frame;function He(Ve){return Array.isArray(Fe)?Ve>=Fe.length?Fe[0]:Fe[Ve]:Fe}function Ke(Ve){return Array.isArray(Ue)?Ve>=Ue.length?Ue[0]:Ue[Ve]:Ue}function st(Ve,$e){var Qe=0;return function(){if(Ve&&++Qe===$e)return Ve()}}return void 0===De._frameWaitingCnt&&(De._frameWaitingCnt=0),new Promise(function(Ve,$e){function tt(){ve.emit("plotly_animating"),De._lastFrameAt=-1/0,De._timeToNext=0,De._runningTransitions=0,De._currentFrame=null;var cn=function(){De._animationRaf=window.requestAnimationFrame(cn),Date.now()-De._lastFrameAt>De._timeToNext&&function Qe(){De._currentFrame&&De._currentFrame.onComplete&&De._currentFrame.onComplete();var cn=De._currentFrame=De._frameQueue.shift();if(cn){var Tn=cn.name?cn.name.toString():null;ve._fullLayout._currentFrame=Tn,De._lastFrameAt=Date.now(),De._timeToNext=cn.frameOpts.duration,p.transition(ve,cn.frame.data,cn.frame.layout,_.coerceTraceIndices(ve,cn.frame.traces),cn.frameOpts,cn.transitionOpts).then(function(){cn.onComplete&&cn.onComplete()}),ve.emit("plotly_animatingframe",{name:Tn,frame:cn.frame,animation:{frame:cn.frameOpts,transition:cn.transitionOpts}})}else ve.emit("plotly_animated"),window.cancelAnimationFrame(De._animationRaf),De._animationRaf=null}()};cn()}var ut,xt,kt=0;function Bt(cn){return cn.transitionOpts=Array.isArray(Fe)?kt>=Fe.length?Fe[kt]:Fe[0]:Fe,kt++,cn}var Rt=[],ft=null==Te,lt=Array.isArray(Te);if(ft||lt||!y.isPlainObject(Te)){if(ft||-1!==["string","number"].indexOf(typeof Te))for(ut=0;ut<De._frames.length;ut++)(xt=De._frames[ut])&&(ft||String(xt.group)===String(Te))&&Rt.push({type:"byname",name:String(xt.name),data:Bt({name:xt.name})});else if(lt)for(ut=0;ut<Te.length;ut++){var Ft=Te[ut];-1!==["number","string"].indexOf(typeof Ft)?(Ft=String(Ft),Rt.push({type:"byname",name:Ft,data:Bt({name:Ft})})):y.isPlainObject(Ft)&&Rt.push({type:"object",data:Bt(y.extendFlat({},Ft))})}}else Rt.push({type:"object",data:Bt(y.extendFlat({},Te))});for(ut=0;ut<Rt.length;ut++)if("byname"===(xt=Rt[ut]).type&&!De._frameHash[xt.data.name])return y.warn('animate failure: frame not found: "'+xt.data.name+'"'),void $e();-1!==["next","immediate"].indexOf(Pe.mode)&&function(){if(0!==De._frameQueue.length){for(;De._frameQueue.length;){var cn=De._frameQueue.pop();cn.onInterrupt&&cn.onInterrupt()}ve.emit("plotly_animationinterrupted",[])}}(),"reverse"===Pe.direction&&Rt.reverse();var Jt=ve._fullLayout._currentFrame;if(Jt&&Pe.fromcurrent){var ln=-1;for(ut=0;ut<Rt.length;ut++)if("byname"===(xt=Rt[ut]).type&&xt.name===Jt){ln=ut;break}if(ln>0&&ln<Rt.length-1){var dn=[];for(ut=0;ut<Rt.length;ut++)xt=Rt[ut],("byname"!==Rt[ut].type||ut>ln)&&dn.push(xt);Rt=dn}}Rt.length>0?function(cn){if(0!==cn.length){for(var Tn=0;Tn<cn.length;Tn++){var nn;nn="byname"===cn[Tn].type?p.computeFrame(ve,cn[Tn].name):cn[Tn].data;var Me=Ke(Tn),Ee=He(Tn);Ee.duration=Math.min(Ee.duration,Me.duration);var Se={frame:nn,name:cn[Tn].name,frameOpts:Me,transitionOpts:Ee};Tn===cn.length-1&&(Se.onComplete=st(Ve,2),Se.onInterrupt=$e),De._frameQueue.push(Se)}"immediate"===Pe.mode&&(De._lastFrameAt=-1/0),De._animationRaf||tt()}}(Rt):(ve.emit("plotly_animated"),Ve())})},ae.addFrames=function(ve,Te,Pe){if(ve=y.getGraphDiv(ve),null==Te)return Promise.resolve();if(!y.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var De,Fe,Ue,He,Ke=ve._transitionData._frames,st=ve._transitionData._frameHash;if(!Array.isArray(Te))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Te);var Ve=Ke.length+2*Te.length,$e=[],Qe={};for(De=Te.length-1;De>=0;De--)if(y.isPlainObject(Te[De])){var tt=Te[De].name,ut=(st[tt]||Qe[tt]||{}).name,xt=Te[De].name;ut&&xt&&"number"==typeof xt&&(st[ut]||Qe[ut])&&A<5&&(A++,y.warn('addFrames: overwriting frame "'+(st[ut]||Qe[ut]).name+'" with a frame whose name of type "number" also equates to "'+ut+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===A&&y.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Qe[tt]={name:tt},$e.push({frame:p.supplyFrameDefaults(Te[De]),index:Pe&&null!=Pe[De]?Pe[De]:Ve+De})}$e.sort(function(dn,cn){return dn.index>cn.index?-1:dn.index<cn.index?1:0});var Bt=[],Rt=[],ft=Ke.length;for(De=$e.length-1;De>=0;De--){if("number"==typeof(Fe=$e[De].frame).name&&y.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Fe.name)for(;st[Fe.name="frame "+ve._transitionData._counter++];);if(st[Fe.name]){for(Ue=0;Ue<Ke.length&&(Ke[Ue]||{}).name!==Fe.name;Ue++);Bt.push({type:"replace",index:Ue,value:Fe}),Rt.unshift({type:"replace",index:Ue,value:Ke[Ue]})}else He=Math.max(0,Math.min($e[De].index,ft)),Bt.push({type:"insert",index:He,value:Fe}),Rt.unshift({type:"delete",index:He}),ft++}return n&&n.add(ve,p.modifyFrames,[ve,Rt],p.modifyFrames,[ve,Bt]),p.modifyFrames(ve,Bt)},ae.deleteFrames=function(ve,Te){if(ve=y.getGraphDiv(ve),!y.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve);var Pe,De,Fe=ve._transitionData._frames,Ue=[],He=[];if(!Te)for(Te=[],Pe=0;Pe<Fe.length;Pe++)Te.push(Pe);for((Te=Te.slice()).sort(),Pe=Te.length-1;Pe>=0;Pe--)Ue.push({type:"delete",index:De=Te[Pe]}),He.unshift({type:"insert",index:De,value:Fe[De]});return n&&n.add(ve,p.modifyFrames,[ve,He],p.modifyFrames,[ve,Ue]),p.modifyFrames(ve,Ue)},ae.addTraces=function ve(Te,Pe,De){Te=y.getGraphDiv(Te);var Fe,Ue,He=[],Ke=ae.deleteTraces,st=ve,Ve=[Te,He],$e=[Te,Pe];for(function(Qe,tt,ut){var xt,kt;if(!Array.isArray(Qe.data))throw new Error("gd.data must be an array.");if(void 0===tt)throw new Error("traces must be defined.");for(Array.isArray(tt)||(tt=[tt]),xt=0;xt<tt.length;xt++)if("object"!=typeof(kt=tt[xt])||Array.isArray(kt)||null===kt)throw new Error("all values in traces array must be non-array objects");if(void 0===ut||Array.isArray(ut)||(ut=[ut]),void 0!==ut&&ut.length!==tt.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Te,Pe,De),Array.isArray(Pe)||(Pe=[Pe]),Pe=Pe.map(function(Qe){return y.extendFlat({},Qe)}),_.cleanData(Pe),Fe=0;Fe<Pe.length;Fe++)Te.data.push(Pe[Fe]);for(Fe=0;Fe<Pe.length;Fe++)He.push(-Pe.length+Fe);if(void 0===De)return Ue=ae.redraw(Te),n.add(Te,Ke,Ve,st,$e),Ue;Array.isArray(De)||(De=[De]);try{L(Te,He,De)}catch(Qe){throw Te.data.splice(Te.data.length-Pe.length,Pe.length),Qe}return n.startSequence(Te),n.add(Te,Ke,Ve,st,$e),Ue=ae.moveTraces(Te,He,De),n.stopSequence(Te),Ue},ae.deleteTraces=function ve(Te,Pe){Te=y.getGraphDiv(Te);var De,Fe,Ue=[],He=ae.addTraces,Ke=ve,st=[Te,Ue,Pe],Ve=[Te,Pe];if(void 0===Pe)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Pe)||(Pe=[Pe]),D(Te,Pe,"indices"),(Pe=O(Pe,Te.data.length-1)).sort(y.sorterDes),De=0;De<Pe.length;De+=1)Fe=Te.data.splice(Pe[De],1)[0],Ue.push(Fe);var $e=ae.redraw(Te);return n.add(Te,He,st,Ke,Ve),$e},ae.extendTraces=function ve(Te,Pe,De,Fe){function Ue(Ve,$e,Qe){var tt,ut;if(y.isTypedArray(Ve))if(Qe<0){var xt=new Ve.constructor(0),kt=j(Ve,$e);Qe<0?(tt=kt,ut=xt):(tt=xt,ut=kt)}else if(tt=new Ve.constructor(Qe),ut=new Ve.constructor(Ve.length+$e.length-Qe),Qe===$e.length)tt.set($e),ut.set(Ve);else if(Qe<$e.length){var Bt=$e.length-Qe;tt.set($e.subarray(Bt)),ut.set(Ve),ut.set($e.subarray(0,Bt),Ve.length)}else{var Rt=Qe-$e.length,ft=Ve.length-Rt;tt.set(Ve.subarray(ft)),tt.set($e,Rt),ut.set(Ve.subarray(0,ft))}else tt=Ve.concat($e),ut=Qe>=0&&Qe<tt.length?tt.splice(0,tt.length-Qe):[];return[tt,ut]}var He=B(Te=y.getGraphDiv(Te),Pe,De,Fe,Ue),Ke=ae.redraw(Te);return n.add(Te,ae.prependTraces,[Te,He.update,De,He.maxPoints],ve,arguments),Ke},ae.moveTraces=function ve(Te,Pe,De){var Fe,Ue=[],He=[],Ke=ve,st=ve,Ve=[Te=y.getGraphDiv(Te),De,Pe],$e=[Te,Pe,De];if(L(Te,Pe,De),Pe=Array.isArray(Pe)?Pe:[Pe],void 0===De)for(De=[],Fe=0;Fe<Pe.length;Fe++)De.push(-Pe.length+Fe);for(De=Array.isArray(De)?De:[De],Pe=O(Pe,Te.data.length-1),De=O(De,Te.data.length-1),Fe=0;Fe<Te.data.length;Fe++)-1===Pe.indexOf(Fe)&&Ue.push(Te.data[Fe]);for(Fe=0;Fe<Pe.length;Fe++)He.push({newIndex:De[Fe],trace:Te.data[Pe[Fe]]});for(He.sort(function(tt,ut){return tt.newIndex-ut.newIndex}),Fe=0;Fe<He.length;Fe+=1)Ue.splice(He[Fe].newIndex,0,He[Fe].trace);Te.data=Ue;var Qe=ae.redraw(Te);return n.add(Te,Ke,Ve,st,$e),Qe},ae.prependTraces=function ve(Te,Pe,De,Fe){function Ue(Ve,$e,Qe){var tt,ut;if(y.isTypedArray(Ve))if(Qe<=0){var xt=new Ve.constructor(0),kt=j($e,Ve);Qe<0?(tt=kt,ut=xt):(tt=xt,ut=kt)}else if(tt=new Ve.constructor(Qe),ut=new Ve.constructor(Ve.length+$e.length-Qe),Qe===$e.length)tt.set($e),ut.set(Ve);else if(Qe<$e.length){var Bt=$e.length-Qe;tt.set($e.subarray(0,Bt)),ut.set($e.subarray(Bt)),ut.set(Ve,Bt)}else{var Rt=Qe-$e.length;tt.set($e),tt.set(Ve.subarray(0,Rt),$e.length),ut.set(Ve.subarray(Rt))}else tt=$e.concat(Ve),ut=Qe>=0&&Qe<tt.length?tt.splice(Qe,tt.length):[];return[tt,ut]}var He=B(Te=y.getGraphDiv(Te),Pe,De,Fe,Ue),Ke=ae.redraw(Te);return n.add(Te,ae.extendTraces,[Te,He.update,De,He.maxPoints],ve,arguments),Ke},ae.newPlot=function(ve,Te,Pe,De){return ve=y.getGraphDiv(ve),p.cleanPlot([],{},ve._fullData||[],ve._fullLayout||{}),p.purge(ve),ae._doPlot(ve,Te,Pe,De)},ae._doPlot=function(ve,Te,Pe,De){var Fe;if(ve=y.getGraphDiv(ve),r.init(ve),y.isPlainObject(Te)){var Ue=Te;Te=Ue.data,Pe=Ue.layout,De=Ue.config,Fe=Ue.frames}if(!1===r.triggerHandler(ve,"plotly_beforeplot",[Te,Pe,De]))return Promise.reject();Te||Pe||y.isPlotDiv(ve)||y.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ve),R(ve,De),Pe||(Pe={}),g.select(ve).classed("js-plotly-plot",!0),i.makeTester(),Array.isArray(ve._promises)||(ve._promises=[]);var He=0===(ve.data||[]).length&&Array.isArray(Te);Array.isArray(Te)&&(_.cleanData(Te),He?ve.data=Te:ve.data.push.apply(ve.data,Te),ve.empty=!1),ve.layout&&!He||(ve.layout=_.cleanLayout(Pe)),p.supplyDefaults(ve);var Ke=ve._fullLayout,st=Ke._has("cartesian");Ke._replotting=!0,(He||Ke._shouldCreateBgLayer)&&(function(Rt){var ft=g.select(Rt),lt=Rt._fullLayout;if(lt._calcInverseTransform=Be,lt._calcInverseTransform(Rt),lt._container=ft.selectAll(".plot-container").data([0]),lt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),lt._paperdiv=lt._container.selectAll(".svg-container").data([0]),lt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),lt._glcontainer=lt._paperdiv.selectAll(".gl-container").data([{}]),lt._glcontainer.enter().append("div").classed("gl-container",!0),lt._paperdiv.selectAll(".main-svg").remove(),lt._paperdiv.select(".modebar-container").remove(),lt._paper=lt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),lt._toppaper=lt._paperdiv.append("svg").classed("main-svg",!0),lt._modebardiv=lt._paperdiv.append("div"),delete lt._modeBar,lt._hoverpaper=lt._paperdiv.append("svg").classed("main-svg",!0),!lt._uid){var Ft={};g.selectAll("defs").each(function(){this.id&&(Ft[this.id.split("-")[1]]=1)}),lt._uid=y.randstr(Ft)}lt._paperdiv.selectAll(".main-svg").attr(l.svgAttrs),lt._defs=lt._paper.append("defs").attr("id","defs-"+lt._uid),lt._clips=lt._defs.append("g").classed("clips",!0),lt._topdefs=lt._toppaper.append("defs").attr("id","topdefs-"+lt._uid),lt._topclips=lt._topdefs.append("g").classed("clips",!0),lt._bgLayer=lt._paper.append("g").classed("bglayer",!0),lt._draggers=lt._paper.append("g").classed("draglayer",!0);var Jt=lt._paper.append("g").classed("layer-below",!0);lt._imageLowerLayer=Jt.append("g").classed("imagelayer",!0),lt._shapeLowerLayer=Jt.append("g").classed("shapelayer",!0),lt._cartesianlayer=lt._paper.append("g").classed("cartesianlayer",!0),lt._polarlayer=lt._paper.append("g").classed("polarlayer",!0),lt._smithlayer=lt._paper.append("g").classed("smithlayer",!0),lt._ternarylayer=lt._paper.append("g").classed("ternarylayer",!0),lt._geolayer=lt._paper.append("g").classed("geolayer",!0),lt._funnelarealayer=lt._paper.append("g").classed("funnelarealayer",!0),lt._pielayer=lt._paper.append("g").classed("pielayer",!0),lt._iciclelayer=lt._paper.append("g").classed("iciclelayer",!0),lt._treemaplayer=lt._paper.append("g").classed("treemaplayer",!0),lt._sunburstlayer=lt._paper.append("g").classed("sunburstlayer",!0),lt._indicatorlayer=lt._toppaper.append("g").classed("indicatorlayer",!0),lt._glimages=lt._paper.append("g").classed("glimages",!0);var ln=lt._toppaper.append("g").classed("layer-above",!0);lt._imageUpperLayer=ln.append("g").classed("imagelayer",!0),lt._shapeUpperLayer=ln.append("g").classed("shapelayer",!0),lt._infolayer=lt._toppaper.append("g").classed("infolayer",!0),lt._menulayer=lt._toppaper.append("g").classed("menulayer",!0),lt._zoomlayer=lt._toppaper.append("g").classed("zoomlayer",!0),lt._hoverlayer=lt._hoverpaper.append("g").classed("hoverlayer",!0),lt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Rt.emit("plotly_framework")}(ve),Ke._shouldCreateBgLayer&&delete Ke._shouldCreateBgLayer),i.initGradients(ve),i.initPatterns(ve),He&&u.saveShowSpikeInitial(ve);var Ve=!ve.calcdata||ve.calcdata.length!==(ve._fullData||[]).length;Ve&&p.doCalcdata(ve);for(var $e=0;$e<ve.calcdata.length;$e++)ve.calcdata[$e][0].trace=ve._fullData[$e];ve._context.responsive?ve._responsiveChartHandler||(ve._responsiveChartHandler=function(){y.isHidden(ve)||p.resize(ve)},window.addEventListener("resize",ve._responsiveChartHandler)):y.clearResponsive(ve);var Qe=y.extendFlat({},Ke._size),tt=0;function ut(){if(p.clearAutoMarginIds(ve),s.drawMarginPushers(ve),u.allowAutoMargin(ve),Ke._has("pie"))for(var Rt=ve._fullData,ft=0;ft<Rt.length;ft++){var lt=Rt[ft];"pie"===lt.type&&lt.automargin&&p.allowAutoMargin(ve,"pie."+lt.uid+".automargin")}return p.doAutoMargin(ve),p.previousPromises(ve)}function xt(){ve._transitioning||(s.doAutoRangeAndConstraints(ve),He&&u.saveRangeInitial(ve),a.getComponentMethod("rangeslider","calcAutorange")(ve))}var kt=[p.previousPromises,function(){if(Fe)return ae.addFrames(ve,Fe)},function Rt(){for(var ft=Ke._basePlotModules,lt=0;lt<ft.length;lt++)ft[lt].drawFramework&&ft[lt].drawFramework(ve);!Ke._glcanvas&&Ke._has("gl")&&(Ke._glcanvas=Ke._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(dn){return dn.key}),Ke._glcanvas.enter().append("canvas").attr("class",function(dn){return"gl-canvas gl-canvas-"+dn.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Ft=ve._context.plotGlPixelRatio;if(Ke._glcanvas){Ke._glcanvas.attr("width",Ke.width*Ft).attr("height",Ke.height*Ft).style("width",Ke.width+"px").style("height",Ke.height+"px");var Jt=Ke._glcanvas.data()[0].regl;if(Jt&&(Math.floor(Ke.width*Ft)!==Jt._gl.drawingBufferWidth||Math.floor(Ke.height*Ft)!==Jt._gl.drawingBufferHeight)){var ln="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!tt)return y.log(ln+" Clearing graph and plotting again."),p.cleanPlot([],{},ve._fullData,Ke),p.supplyDefaults(ve),Ke=ve._fullLayout,p.doCalcdata(ve),tt++,Rt();y.error(ln)}}return"h"===Ke.modebar.orientation?Ke._modebardiv.style("height",null).style("width","100%"):Ke._modebardiv.style("width",null).style("height",Ke.height+"px"),p.previousPromises(ve)},ut,function(){if(p.didMarginChange(Qe,Ke._size))return y.syncOrAsync([ut,s.layoutStyles],ve)}];st&&kt.push(function(){if(Ve)return y.syncOrAsync([a.getComponentMethod("shapes","calcAutorange"),a.getComponentMethod("annotations","calcAutorange"),xt],ve);xt()}),kt.push(s.layoutStyles),st&&kt.push(function(){return u.draw(ve,He?"":"redraw")},function(Rt){Rt._fullLayout._insideTickLabelsAutorange&&re(Rt,Rt._fullLayout._insideTickLabelsAutorange).then(function(){Rt._fullLayout._insideTickLabelsAutorange=void 0})}),kt.push(s.drawData,s.finalDraw,f,p.addLinks,p.rehover,p.redrag,p.doAutoMargin,function(Rt){Rt._fullLayout._insideTickLabelsAutorange&&He&&u.saveRangeInitial(Rt,!0)},p.previousPromises);var Bt=y.syncOrAsync(kt,ve);return Bt&&Bt.then||(Bt=Promise.resolve()),Bt.then(function(){return E(ve),ve})},ae.purge=function(ve){var Te=(ve=y.getGraphDiv(ve))._fullLayout||{};return p.cleanPlot([],{},ve._fullData||[],Te),p.purge(ve),r.purge(ve),Te._container&&Te._container.remove(),delete ve._context,ve},ae.react=function(ve,Te,Pe,De){var Fe,Ue;ve=y.getGraphDiv(ve),_.clearPromiseQueue(ve);var Se,je,qe,Je,at,it,He=ve._fullData,Ke=ve._fullLayout;if(y.isPlotDiv(ve)&&He&&Ke){if(y.isPlainObject(Te)){var st=Te;Te=st.data,Pe=st.layout,De=st.config,Fe=st.frames}var Ve=!1;if(De){var $e=y.extendDeep({},ve._context);ve._context=void 0,R(ve,De),Ve=function Se(je,qe){var Je;for(Je in je)if("_"!==Je.charAt(0)){var at=je[Je],it=qe[Je];if(at!==it)if(y.isPlainObject(at)&&y.isPlainObject(it)){if(Se(at,it))return!0}else{if(!Array.isArray(at)||!Array.isArray(it)||at.length!==it.length)return!0;for(var yt=0;yt<at.length;yt++)if(at[yt]!==it[yt]&&(!y.isPlainObject(at[yt])||!y.isPlainObject(it[yt])||Se(at[yt],it[yt])))return!0}}}($e,ve._context)}ve.data=Te||[],_.cleanData(ve.data),ve.layout=Pe||{},_.cleanLayout(ve.layout),function(Se,je,qe,Je){var at,it,yt,vt,Ut,Wt,gt,At,Zt,Et,Ct=Je._preGUI,Ne=[],et={},dt={};for(at in Ct){if(Ut=xe(at,de)){if(Zt=Ut.head,Et=Ut.tail,(vt=(yt=e(Je,it=Ut.attr||Zt+".uirevision").get())&&ge(it,je))&&vt===yt){if(null===(Wt=Ct[at])&&(Wt=void 0),Le(At=(gt=e(je,at)).get(),Wt)){void 0===At&&"autorange"===Et&&Ne.push(Zt),gt.set(Y(e(Je,at).get()));continue}if("autorange"===Et||"range["===Et.substr(0,6)){var Xt=Ct[Zt+".autorange"];if(Xt||null===Xt&&null===Ct[Zt+".range[0]"]&&null===Ct[Zt+".range[1]"]){if(!(Zt in et)){var un=e(je,Zt).get();et[Zt]=un&&(un.autorange||!1!==un.autorange&&(!un.range||2!==un.range.length))}if(et[Zt]){gt.set(Y(e(Je,at).get()));continue}}}}}else y.warn("unrecognized GUI edit: "+at);delete Ct[at],Ut&&"range["===Ut.tail.substr(0,6)&&(dt[Ut.head]=1)}for(var Qt=0;Qt<Ne.length;Qt++){var kn=Ne[Qt];if(dt[kn]){var qn=e(je,kn).get();qn&&delete qn.autorange}}var gn=Je._tracePreGUI;for(var sn in gn){var vn,pn=gn[sn],Mn=null;for(at in pn){if(!Mn){var Rn=_e(sn,qe);if(Rn<0){delete gn[sn];break}var Xn=Ce(sn,Se,(vn=qe[Rn]._fullInput).index);if(Xn<0){delete gn[sn];break}Mn=Se[Xn]}if(Ut=xe(at,he)){if(Ut.attr?vt=(yt=e(Je,Ut.attr).get())&&ge(Ut.attr,je):(yt=vn.uirevision,void 0===(vt=Mn.uirevision)&&(vt=je.uirevision)),vt&&vt===yt&&(null===(Wt=pn[at])&&(Wt=void 0),Le(At=(gt=e(Mn,at)).get(),Wt))){gt.set(Y(e(vn,at).get()));continue}}else y.warn("unrecognized GUI edit: "+at+" in trace uid "+sn);delete pn[at]}}}(ve.data,ve.layout,He,Ke),p.supplyDefaults(ve,{skipUpdateCalc:!0});var Qe=ve._fullData,tt=ve._fullLayout,ut=void 0===tt.datarevision,xt=tt.transition,kt=(Se=ve,je=Ke,qe=tt,Je=ut,at=xt,(it=k.layoutFlags()).arrays={},it.rangesAltered={},it.nChanges=0,it.nChangesAnim=0,Ie(je,qe,[],{getValObject:function yt(vt){return t.getLayoutValObject(qe,vt)},flags:it,immutable:Je,transition:at,gd:Se}),(it.plot||it.calc)&&(it.layoutReplot=!0),at&&it.nChanges&&it.nChangesAnim&&(it.anim=it.nChanges===it.nChangesAnim?"all":"some"),it),Rt=function(Se,je,qe,Je,at,it){var yt=je.length===qe.length;if(!at&&!yt)return{fullReplot:!0,calc:!0};var vt,Ut,Wt=k.traceFlags();Wt.arrays={},Wt.nChanges=0,Wt.nChangesAnim=0;var gt={getValObject:function(Zt){var Et=t.getTraceValObject(Ut,Zt);return!Ut._module.animatable&&Et.anim&&(Et.anim=!1),Et},flags:Wt,immutable:Je,transition:at,newDataRevision:it,gd:Se},At={};for(vt=0;vt<je.length;vt++)if(qe[vt]){if(p.hasMakesDataTransform(Ut=qe[vt]._fullInput)&&(Ut=qe[vt]),At[Ut.uid])continue;At[Ut.uid]=1,Ie(je[vt]._fullInput,Ut,[],gt)}return(Wt.calc||Wt.plot)&&(Wt.fullReplot=!0),at&&Wt.nChanges&&Wt.nChangesAnim&&(Wt.anim=Wt.nChanges===Wt.nChangesAnim&&yt?"all":"some"),Wt}(ve,He,Qe,ut,xt,kt.newDataRevision);if(te(ve)&&(kt.layoutReplot=!0),Rt.calc||kt.calc){ve.calcdata=void 0;for(var ft=Object.getOwnPropertyNames(tt),lt=0;lt<ft.length;lt++){var Ft=ft[lt],Jt=Ft.substring(0,5);if("xaxis"===Jt||"yaxis"===Jt){var ln=tt[Ft]._emptyCategories;ln&&ln()}}}else p.supplyDefaultsUpdateCalc(ve.calcdata,Qe);var dn=[];if(Fe&&(ve._transitionData={},p.createTransitionData(ve),dn.push(function(){return ae.addFrames(ve,Fe)})),tt.transition&&!Ve&&(Rt.anim||kt.anim))kt.ticks&&dn.push(s.doTicksRelayout),p.doCalcdata(ve),s.doAutoRangeAndConstraints(ve),dn.push(function(){return p.transitionFromReact(ve,Rt,kt,Ke)});else if(Rt.fullReplot||kt.layoutReplot||Ve)ve._fullLayout._skipDefaults=!0,dn.push(ae._doPlot);else{for(var cn in kt.arrays){var Tn=kt.arrays[cn];if(Tn.length){var nn=a.getComponentMethod(cn,"drawOne");if(nn!==y.noop)for(var Me=0;Me<Tn.length;Me++)nn(ve,Tn[Me]);else{var Ee=a.getComponentMethod(cn,"draw");if(Ee===y.noop)throw new Error("cannot draw components: "+cn);Ee(ve)}}}dn.push(p.previousPromises),Rt.style&&dn.push(s.doTraceStyle),(Rt.colorbars||kt.colorbars)&&dn.push(s.doColorBars),kt.legend&&dn.push(s.doLegend),kt.layoutstyle&&dn.push(s.layoutStyles),kt.axrange&&U(dn),kt.ticks&&dn.push(s.doTicksRelayout),kt.modebar&&dn.push(s.doModeBar),kt.camera&&dn.push(s.doCamera),dn.push(E)}dn.push(p.rehover,p.redrag),(Ue=y.syncOrAsync(dn,ve))&&Ue.then||(Ue=Promise.resolve(ve))}else Ue=ae.newPlot(ve,Te,Pe,De);return Ue.then(function(){return ve.emit("plotly_react",{data:Te,layout:Pe}),ve})},ae.redraw=function(ve){if(ve=y.getGraphDiv(ve),!y.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve);return _.cleanData(ve.data),_.cleanLayout(ve.layout),ve.calcdata=void 0,ae._doPlot(ve).then(function(){return ve.emit("plotly_redraw"),ve})},ae.relayout=re,ae.restyle=W,ae.setPlotConfig=function(ve){return y.extendFlat(d,ve)},ae.update=se,ae._guiRelayout=ue(re),ae._guiRestyle=ue(W),ae._guiUpdate=ue(se),ae._storeDirectGUIEdit=function(ve,Te,Pe){for(var De in Pe)ne(De,e(ve,De).get(),Pe[De],Te)}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(x,oe,ae){"use strict";var g={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},m={};(function w(y,e){for(var r in y){var n=y[r];n.valType?e[r]=n.dflt:(e[r]||(e[r]={}),w(n,e[r]))}})(g,m),oe.exports={configAttributes:g,dfltConfig:m}},{}],542:[function(x,oe,ae){"use strict";var g=x("../registry"),m=x("../lib"),w=x("../plots/attributes"),y=x("../plots/layout_attributes"),e=x("../plots/frame_attributes"),r=x("../plots/animation_attributes"),n=x("./plot_config").configAttributes,a=x("./edit_types"),t=m.extendDeepAll,p=m.isPlainObject,u=m.isArrayOrTypedArray,i=m.nestedProperty,c=m.valObjectMeta,f=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function l(M,A,E){if(!M)return!1;if(M._isLinkedToArray)if(h(A[E]))E++;else if(E<A.length)return!1;for(;E<A.length;E++){var I=M[A[E]];if(!p(I)||(M=I,E===A.length-1))break;if(M._isLinkedToArray){if(!h(A[++E]))return!1}else if("info_array"===M.valType){var C=A[++E];if(!h(C))return!1;var R=M.items;if(Array.isArray(R)){if(C>=R.length)return!1;if(2===M.dimensions){if(E++,A.length===E)return M;var O=A[E];if(!h(O))return!1;M=R[C][O]}else M=R[C]}else M=R}}return M}function h(M){return M===Math.round(M)&&M>=0}function d(){var M,A,E={};for(M in t(E,y),g.subplotsRegistry)if((A=g.subplotsRegistry[M]).layoutAttributes)if(Array.isArray(A.attr))for(var I=0;I<A.attr.length;I++)s(E,A,A.attr[I]);else s(E,A,"subplot"===A.attr?A.name:A.attr);for(M in g.componentsRegistry){var C=(A=g.componentsRegistry[M]).schema;if(C&&(C.subplots||C.layout)){var R=C.subplots;if(R&&R.xaxis&&!R.yaxis)for(var O in R.xaxis)delete E.yaxis[O]}else"colorscale"===A.name?t(E,A.layoutAttributes):A.layoutAttributes&&k(E,A.layoutAttributes,A.name)}return{layoutAttributes:_(E)}}function o(){var M={frames:t({},e)};return _(M),M.frames}function _(M){return ae.crawl(M,function(E,I,C){ae.isValObject(E)?!0!==E.arrayOk&&"data_array"!==E.valType||(C[I+"src"]={valType:"string",editType:"none"}):p(E)&&(E.role="object")}),ae.crawl(M,function(E,I,C){if(E){var R=E._isLinkedToArray;R&&(delete E._isLinkedToArray,C[I]={items:{}},C[I].items[R]=E,C[I].role="object")}}),function(A){!function E(I){for(var C in I)if(p(I[C]))E(I[C]);else if(Array.isArray(I[C]))for(var R=0;R<I[C].length;R++)E(I[C][R]);else I[C]instanceof RegExp&&(I[C]=I[C].toString())}(A)}(M),M}function s(M,A,E){var I=i(M,E),C=t({},A.layoutAttributes);C._isSubplotObj=!0,I.set(C)}function k(M,A,E){var I=i(M,E);I.set(t(I.get()||{},A))}ae.IS_SUBPLOT_OBJ="_isSubplotObj",ae.IS_LINKED_TO_ARRAY="_isLinkedToArray",ae.DEPRECATED="_deprecated",ae.UNDERSCORE_ATTRS=f,ae.get=function(){var M={};g.allTypes.forEach(function(E){M[E]=function(I){var C,R;R=(C=g.modules[I]._module).basePlotModule;var O={type:null},D=t({},w),L=t({},C.attributes);ae.crawl(L,function(W,Y,Q,ne,X){i(D,X).set(void 0),void 0===W&&i(L,X).set(void 0)}),t(O,D),g.traceIs(I,"noOpacity")&&delete O.opacity,g.traceIs(I,"showLegend")||(delete O.showlegend,delete O.legendgroup),g.traceIs(I,"noHover")&&(delete O.hoverinfo,delete O.hoverlabel),C.selectPoints||delete O.selectedpoints,t(O,L),R.attributes&&t(O,R.attributes),O.type=I;var B={meta:C.meta||{},categories:C.categories||{},animatable:Boolean(C.animatable),type:I,attributes:_(O)};if(C.layoutAttributes){var j={};t(j,C.layoutAttributes),B.layoutAttributes=_(j)}return C.animatable||ae.crawl(B,function(W){ae.isValObject(W)&&"anim"in W&&delete W.anim}),B}(E)});var A={};return Object.keys(g.transformsRegistry).forEach(function(E){var I,R;A[E]=(R=t({},g.transformsRegistry[I=E].attributes),Object.keys(g.componentsRegistry).forEach(function(O){var D=g.componentsRegistry[O];D.schema&&D.schema.transforms&&D.schema.transforms[I]&&Object.keys(D.schema.transforms[I]).forEach(function(L){k(R,D.schema.transforms[I][L],L)})}),{attributes:_(R)})}),{defs:{valObjects:c,metaKeys:f.concat(["description","role","editType","impliedEdits"]),editType:{traces:a.traces,layout:a.layout},impliedEdits:{}},traces:M,layout:d(),transforms:A,frames:o(),animation:_(r),config:_(n)}},ae.crawl=function(M,A,E,I){var C=E||0;I=I||"",Object.keys(M).forEach(function(R){var O=M[R];if(-1===f.indexOf(R)){var D=(I?I+".":"")+R;A(O,R,M,C,D),ae.isValObject(O)||p(O)&&"impliedEdits"!==R&&ae.crawl(O,A,C+1,D)}})},ae.isValObject=function(M){return M&&void 0!==M.valType},ae.findArrayAttributes=function(M){var A,E,I=[],C=[],R=[];function O(W,Y,Q,ne){C=C.slice(0,ne).concat([Y]),R=R.slice(0,ne).concat([W&&W._isLinkedToArray]),W&&("data_array"===W.valType||!0===W.arrayOk)&&("colorbar"!==C[ne-1]||"ticktext"!==Y&&"tickvals"!==Y)&&function X($,re,H){var U=$[C[re]],G=H+C[re];if(re===C.length-1)u(U)&&I.push(E+G);else if(R[re]){if(Array.isArray(U))for(var ie=0;ie<U.length;ie++)p(U[ie])&&X(U[ie],re+1,G+"["+ie+"].")}else p(U)&&X(U,re+1,G+".")}(A,0,"")}A=M,E="",ae.crawl(w,O),M._module&&M._module.attributes&&ae.crawl(M._module.attributes,O);var D=M.transforms;if(D)for(var L=0;L<D.length;L++){var B=D[L],j=B._module;j&&(E="transforms["+L+"].",A=B,ae.crawl(j.attributes,O))}return I},ae.getTraceValObject=function(M,A){var E,I,C=A[0],R=1;if("transforms"===C){if(1===A.length)return w.transforms;var O=M.transforms;if(!Array.isArray(O)||!O.length)return!1;var D=A[1];if(!h(D)||D>=O.length)return!1;I=(E=(g.transformsRegistry[O[D].type]||{}).attributes)&&E[A[2]],R=3}else{var L=M._module;if(L||(L=(g.modules[M.type||w.type.dflt]||{})._module),!L)return!1;if(!(I=(E=L.attributes)&&E[C])){var B=L.basePlotModule;B&&B.attributes&&(I=B.attributes[C])}I||(I=w[C])}return l(I,A,R)},ae.getLayoutValObject=function(M,A){return l(function(E,I){var C,R,O,D,L=E._basePlotModules;if(L){var B;for(C=0;C<L.length;C++){if((O=L[C]).attrRegex&&O.attrRegex.test(I)){if(O.layoutAttrOverrides)return O.layoutAttrOverrides;!B&&O.layoutAttributes&&(B=O.layoutAttributes)}var j=O.baseLayoutAttrOverrides;if(j&&I in j)return j[I]}if(B)return B}var W=E._modules;if(W)for(C=0;C<W.length;C++)if((D=W[C].layoutAttributes)&&I in D)return D[I];for(R in g.componentsRegistry){if("colorscale"===(O=g.componentsRegistry[R]).name&&0===I.indexOf("coloraxis"))return O.layoutAttributes[I];if(!O.schema&&I===O.name)return O.layoutAttributes}return I in y&&y[I]}(M,A[0]),A,1)}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(x,oe,ae){"use strict";var g=x("../lib"),m=x("../plots/attributes"),w={name:{valType:"string",editType:"none"}};function y(r){return r&&"string"==typeof r}function e(r){return"s"!==r.charAt(r.length-1)&&g.warn("bad argument to arrayDefaultKey: "+r),r.substr(0,r.length-1)+"defaults"}w.templateitemname={valType:"string",editType:"calc"},ae.templatedArray=function(r,n){return n._isLinkedToArray=r,n.name=w.name,n.templateitemname=w.templateitemname,n},ae.traceTemplater=function(r){var n,a,t={};for(n in r)a=r[n],Array.isArray(a)&&a.length&&(t[n]=0);return{newTrace:function(p){var u={type:n=g.coerce(p,{},m,"type"),_template:null};if(n in t){var i=t[n]%(a=r[n]).length;t[n]++,u._template=a[i]}return u}}},ae.newContainer=function(r,n,a){var t=r._template,p=t&&(t[n]||a&&t[a]);return g.isPlainObject(p)||(p=null),r[n]={_template:p}},ae.arrayTemplater=function(r,n,a){var t=r._template,p=t&&t[e(n)],u=t&&t[n];Array.isArray(u)&&u.length||(u=[]);var i={};return{newItem:function(c){var f={name:c.name,_input:c},l=f.templateitemname=c.templateitemname;if(!y(l))return f._template=p,f;for(var h=0;h<u.length;h++){var d=u[h];if(d.name===l)return i[l]=1,f._template=d,f}return f[a]=c[a]||!1,f._template=!1,f},defaultItems:function(){for(var c=[],f=0;f<u.length;f++){var l=u[f],h=l.name;if(y(h)&&!i[h]){var d={_template:l,name:h,_input:{_templateitemname:h}};d.templateitemname=l.templateitemname,c.push(d),i[h]=1}}return c}}},ae.arrayDefaultKey=e,ae.arrayEditor=function(r,n,a){var t=(g.nestedProperty(r,n).get()||[]).length,p=a._index,u=p>=t&&(a._input||{})._templateitemname;u&&(p=t);var i,c=n+"["+p+"]";function f(){i={},u&&(i[c]={},i[c].templateitemname=u)}function l(d,o){u?g.nestedProperty(i[c],d).set(o):i[c+"."+d]=o}function h(){var d=i;return f(),d}return f(),{modifyBase:function(d,o){i[d]=o},modifyItem:l,getUpdateObj:h,applyUpdate:function(d,o){d&&l(d,o);var _=h();for(var s in _)g.nestedProperty(r,s).set(_[s])}}}},{"../lib":503,"../plots/attributes":550}],544:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../registry"),w=x("../plots/plots"),y=x("../lib"),e=x("../lib/clear_gl_canvases"),r=x("../components/color"),n=x("../components/drawing"),a=x("../components/titles"),t=x("../components/modebar"),p=x("../plots/cartesian/axes"),u=x("../constants/alignment"),i=x("../plots/cartesian/constraints"),c=i.enforce,f=i.clean,l=x("../plots/cartesian/autorange").doAutoRange;function h(A,E,I){for(var C=0;C<I.length;C++){var R=I[C][0],O=I[C][1];if(!(R[0]>=A[1]||R[1]<=A[0])&&O[0]<E[1]&&O[1]>E[0])return!0}return!1}function d(A){var E,I,C,R,O,D,L=A._fullLayout,B=L._size,j=B.p,W=p.list(A,"",!0);if(L._paperdiv.style({width:A._context.responsive&&L.autosize&&!A._context._hasZeroWidth&&!A.layout.width?"100%":L.width+"px",height:A._context.responsive&&L.autosize&&!A._context._hasZeroHeight&&!A.layout.height?"100%":L.height+"px"}).selectAll(".main-svg").call(n.setSize,L.width,L.height),A._context.setBackground(A,L.paper_bgcolor),ae.drawMainTitle(A),t.manage(A),!L._has("cartesian"))return w.previousPromises(A);function Y(tt,ut,xt){var kt=tt._lw/2;return"x"===tt._id.charAt(0)?ut?"top"===xt?ut._offset-j-kt:ut._offset+ut._length+j+kt:B.t+B.h*(1-(tt.position||0))+kt%1:ut?"right"===xt?ut._offset+ut._length+j+kt:ut._offset-j-kt:B.l+B.w*(tt.position||0)+kt%1}for(E=0;E<W.length;E++){var Q=(R=W[E])._anchorAxis;R._linepositions={},R._lw=n.crispRound(A,R.linewidth,1),R._mainLinePosition=Y(R,Q,R.side),R._mainMirrorPosition=R.mirror&&Q?Y(R,Q,u.OPPOSITE_SIDE[R.side]):null}var ne=[],X=[],$=[],re=1===r.opacity(L.paper_bgcolor)&&1===r.opacity(L.plot_bgcolor)&&L.paper_bgcolor===L.plot_bgcolor;for(I in L._plots)if((C=L._plots[I]).mainplot)C.bg&&C.bg.remove(),C.bg=void 0;else{var H=C.xaxis.domain,U=C.yaxis.domain,G=C.plotgroup;if(h(H,U,$)){var ie=G.node(),q=C.bg=y.ensureSingle(G,"rect","bg");ie.insertBefore(q.node(),ie.childNodes[0]),X.push(I)}else G.select("rect.bg").remove(),$.push([H,U]),re||(ne.push(I),X.push(I))}var ee,te,se,ue,de,he,xe,ge,_e,Ce,Le,Ie,Be,ve=L._bgLayer.selectAll(".bg").data(ne);for(ve.enter().append("rect").classed("bg",!0),ve.exit().remove(),ve.each(function(tt){L._plots[tt].bg=g.select(this)}),E=0;E<X.length;E++)O=(C=L._plots[X[E]]).xaxis,D=C.yaxis,C.bg&&void 0!==O._offset&&void 0!==D._offset&&C.bg.call(n.setRect,O._offset-j,D._offset-j,O._length+2*j,D._length+2*j).call(r.fill,L.plot_bgcolor).style("stroke-width",0);if(!L._hasOnlyLargeSploms)for(I in L._plots){O=(C=L._plots[I]).xaxis,D=C.yaxis;var Te,Pe,De=C.clipId="clip"+L._uid+I+"plot",Fe=y.ensureSingleById(L._clips,"clipPath",De,function(tt){tt.classed("plotclip",!0).append("rect")});C.clipRect=Fe.select("rect").attr({width:O._length,height:D._length}),n.setTranslate(C.plot,O._offset,D._offset),C._hasClipOnAxisFalse?(Te=null,Pe=De):(Te=De,Pe=null),n.setClipUrl(C.plot,Te,A),C.layerClipId=Pe}function Ue(tt){return"M"+ee+","+tt+"H"+te}function He(tt){return"M"+O._offset+","+tt+"h"+O._length}function Ke(tt){return"M"+tt+","+ge+"V"+xe}function st(tt){return"M"+tt+","+D._offset+"v"+D._length}function Ve(tt,ut,xt){if(!tt.showline||I!==tt._mainSubplot)return"";if(!tt._anchorAxis)return xt(tt._mainLinePosition);var kt=ut(tt._mainLinePosition);return tt.mirror&&(kt+=ut(tt._mainMirrorPosition)),kt}for(I in L._plots){D=(C=L._plots[I]).yaxis;var $e="M0,0";o(O=C.xaxis,I)&&(de=s(O,"left",D,W),ee=O._offset-(de?j+de:0),he=s(O,"right",D,W),te=O._offset+O._length+(he?j+he:0),se=Y(O,D,"bottom"),ue=Y(O,D,"top"),!(Be=!O._anchorAxis||I!==O._mainSubplot)||"allticks"!==O.mirror&&"all"!==O.mirror||(O._linepositions[I]=[se,ue]),$e=Ve(O,Ue,He),Be&&O.showline&&("all"===O.mirror||"allticks"===O.mirror)&&($e+=Ue(se)+Ue(ue)),C.xlines.style("stroke-width",O._lw+"px").call(r.stroke,O.showline?O.linecolor:"rgba(0,0,0,0)")),C.xlines.attr("d",$e);var Qe="M0,0";o(D,I)&&(Le=s(D,"bottom",O,W),xe=D._offset+D._length+(Le?j:0),Ie=s(D,"top",O,W),ge=D._offset-(Ie?j:0),_e=Y(D,O,"left"),Ce=Y(D,O,"right"),!(Be=!D._anchorAxis||I!==D._mainSubplot)||"allticks"!==D.mirror&&"all"!==D.mirror||(D._linepositions[I]=[_e,Ce]),Qe=Ve(D,Ke,st),Be&&D.showline&&("all"===D.mirror||"allticks"===D.mirror)&&(Qe+=Ke(_e)+Ke(Ce)),C.ylines.style("stroke-width",D._lw+"px").call(r.stroke,D.showline?D.linecolor:"rgba(0,0,0,0)")),C.ylines.attr("d",Qe)}return p.makeClipPaths(A),w.previousPromises(A)}function o(A,E){return(A.ticks||A.showline)&&(E===A._mainSubplot||"all"===A.mirror||"allticks"===A.mirror)}function _(A,E,I){if(!I.showline||!I._lw)return!1;if("all"===I.mirror||"allticks"===I.mirror)return!0;var C=I._anchorAxis;if(!C)return!1;var R=u.FROM_BL[E];return I.side===E?C.domain[R]===A.domain[R]:I.mirror&&C.domain[1-R]===A.domain[1-R]}function s(A,E,I,C){if(_(A,E,I))return I._lw;for(var R=0;R<C.length;R++){var O=C[R];if(O._mainAxis===I._mainAxis&&_(A,E,O))return O._lw}return 0}function k(A,E){var I=A.title,C=A._size,R=0;return"paper"===("start"===E?R=I.pad.l:"end"===E&&(R=-I.pad.r),I.xref)?C.l+C.w*I.x+R:A.width*I.x+R}function M(A,E){var I=A.title,C=A._size,R=0;return"0em"!==E&&E?E===u.CAP_SHIFT+"em"&&(R=I.pad.t):R=-I.pad.b,"auto"===I.y?C.t/2:"paper"===I.yref?C.t+C.h-C.h*I.y+R:A.height-A.height*I.y+R}ae.layoutStyles=function(A){return y.syncOrAsync([w.doAutoMargin,d],A)},ae.drawMainTitle=function(A){var O,D,E=A._fullLayout,I=(D="middle",y.isRightAnchor(O=E.title)?D="end":y.isLeftAnchor(O)&&(D="start"),D),C=function(R){var O=R.title,D="0em";return y.isTopAnchor(O)?D=u.CAP_SHIFT+"em":y.isMiddleAnchor(O)&&(D=u.MID_SHIFT+"em"),D}(E);a.draw(A,"gtitle",{propContainer:E,propName:"title.text",placeholder:E._dfltTitle.plot,attributes:{x:k(E,I),y:M(E,C),"text-anchor":I,dy:C}})},ae.doTraceStyle=function(A){var E,I=A.calcdata,C=[];for(E=0;E<I.length;E++){var R=I[E],O=R[0]||{},D=O.trace||{},L=D._module||{},B=L.arraysToCalcdata;B&&B(R,D);var j=L.editStyle;j&&C.push({fn:j,cd0:O})}if(C.length){for(E=0;E<C.length;E++){var W=C[E];W.fn(A,W.cd0)}e(A),ae.redrawReglTraces(A)}return w.style(A),m.getComponentMethod("legend","draw")(A),w.previousPromises(A)},ae.doColorBars=function(A){return m.getComponentMethod("colorbar","draw")(A),w.previousPromises(A)},ae.layoutReplot=function(A){var E=A.layout;return A.layout=void 0,m.call("_doPlot",A,"",E)},ae.doLegend=function(A){return m.getComponentMethod("legend","draw")(A),w.previousPromises(A)},ae.doTicksRelayout=function(A){return p.draw(A,"redraw"),A._fullLayout._hasOnlyLargeSploms&&(m.subplotsRegistry.splom.updateGrid(A),e(A),ae.redrawReglTraces(A)),ae.drawMainTitle(A),w.previousPromises(A)},ae.doModeBar=function(A){var E=A._fullLayout;t.manage(A);for(var I=0;I<E._basePlotModules.length;I++){var C=E._basePlotModules[I].updateFx;C&&C(A)}return w.previousPromises(A)},ae.doCamera=function(A){for(var E=A._fullLayout,I=E._subplots.gl3d,C=0;C<I.length;C++){var R=E[I[C]];R._scene.setViewport(R)}},ae.drawData=function(A){var E=A._fullLayout;e(A);for(var I=E._basePlotModules,C=0;C<I.length;C++)I[C].plot(A);return ae.redrawReglTraces(A),w.style(A),m.getComponentMethod("shapes","draw")(A),m.getComponentMethod("annotations","draw")(A),m.getComponentMethod("images","draw")(A),E._replotting=!1,w.previousPromises(A)},ae.redrawReglTraces=function(A){var E=A._fullLayout;if(E._has("regl")){var I,C,R=A._fullData,O=[],D=[];for(E._hasOnlyLargeSploms&&E._splomGrid.draw(),I=0;I<R.length;I++){var L=R[I];!0===L.visible&&0!==L._length&&("splom"===L.type?E._splomScenes[L.uid].draw():"scattergl"===L.type?y.pushUnique(O,L.xaxis+L.yaxis):"scatterpolargl"===L.type&&y.pushUnique(D,L.subplot))}for(I=0;I<O.length;I++)(C=E._plots[O[I]])._scene&&C._scene.draw();for(I=0;I<D.length;I++)(C=E[D[I]]._subplot)._scene&&C._scene.draw()}},ae.doAutoRangeAndConstraints=function(A){for(var E,I=p.list(A,"",!0),C={},R=0;R<I.length;R++)if(!C[(E=I[R])._id]){C[E._id]=1,f(A,E),l(A,E);var O=E._matchGroup;if(O)for(var D in O){var L=p.getFromId(A,D);l(A,L,E.range),C[D]=1}}c(A)},ae.finalDraw=function(A){m.getComponentMethod("rangeslider","draw")(A),m.getComponentMethod("rangeselector","draw")(A)},ae.drawMarginPushers=function(A){m.getComponentMethod("legend","draw")(A),m.getComponentMethod("rangeselector","draw")(A),m.getComponentMethod("sliders","draw")(A),m.getComponentMethod("updatemenus","draw")(A),m.getComponentMethod("colorbar","draw")(A)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(x,oe,ae){"use strict";var g=x("../lib"),m=g.isPlainObject,w=x("./plot_schema"),y=x("../plots/plots"),e=x("../plots/attributes"),r=x("./plot_template"),n=x("./plot_config").dfltConfig;function a(h,d){h=g.extendDeep({},h);var o,_,s=Object.keys(h).sort();function k(C,R,O){if(m(R)&&m(C))a(C,R);else if(Array.isArray(R)&&Array.isArray(C)){var D=r.arrayTemplater({_template:h},O);for(_=0;_<R.length;_++){var L=R[_],B=D.newItem(L)._template;B&&a(B,L)}var j=D.defaultItems();for(_=0;_<j.length;_++)R.push(j[_]._template);for(_=0;_<R.length;_++)delete R[_].templateitemname}}for(o=0;o<s.length;o++){var M=s[o],A=h[M];if(M in d?k(A,d[M],M):d[M]=A,t(M)===M)for(var E in d){var I=t(E);E===I||I!==M||E in h||k(A,d[E],M)}}}function t(h){return h.replace(/[0-9]+$/,"")}function p(h,d,o,_,s){var k=s&&o(s);for(var M in h){var A=h[M],E=c(h,M,_),I=c(h,M,s),C=o(I);if(!C){var R=t(M);R!==M&&(C=o(I=c(h,R,s)))}if(!(k&&k===C||!C||C._noTemplating||"data_array"===C.valType||C.arrayOk&&Array.isArray(A)))if(!C.valType&&m(A))p(A,d,o,E,I);else if(C._isLinkedToArray&&Array.isArray(A))for(var O=!1,D=0,L={},B=0;B<A.length;B++){var j=A[B];if(m(j)){var W=j.name;if(W)L[W]||(p(j,d,o,c(A,D,E),c(A,D,I)),D++,L[W]=1);else if(!O){var Y=c(h,r.arrayDefaultKey(M),_),Q=c(A,D,E);p(j,d,o,Q,c(A,D,I));var ne=g.nestedProperty(d,Q);g.nestedProperty(d,Y).set(ne.get()),ne.set(null),O=!0}}}else g.nestedProperty(d,E).set(A)}}function u(h,d){return w.getLayoutValObject(h,g.nestedProperty({},d).parts)}function i(h,d){return w.getTraceValObject(h,g.nestedProperty({},d).parts)}function c(h,d,o){return o?Array.isArray(h)?o+"["+d+"]":o+"."+d:d}function f(h){for(var d=0;d<h.length;d++)if(m(h[d]))return!0}function l(h){var d;switch(h.code){case"data":d="The template has no key data.";break;case"layout":d="The template has no key layout.";break;case"missing":d=h.path?"There are no templates for item "+h.path+" with name "+h.templateitemname:"There are no templates for trace "+h.index+", of type "+h.traceType+".";break;case"unused":d=h.path?"The template item at "+h.path+" was not used in constructing the plot.":h.dataCount?"Some of the templates of type "+h.traceType+" were not used. The template has "+h.templateCount+" traces, the data only has "+h.dataCount+" of this type.":"The template has "+h.templateCount+" traces of type "+h.traceType+" but there are none in the data.";break;case"reused":d="Some of the templates of type "+h.traceType+" were used more than once. The template has "+h.templateCount+" traces, the data has "+h.dataCount+" of this type."}return h.msg=d,h}ae.makeTemplate=function(h){h=g.isPlainObject(h)?h:g.getGraphDiv(h),h=g.extendDeep({_context:n},{data:h.data,layout:h.layout}),y.supplyDefaults(h);var d=h.data||[],o=h.layout||{};o._basePlotModules=h._fullLayout._basePlotModules,o._modules=h._fullLayout._modules;var _={data:{},layout:{}};d.forEach(function(D){var L={};p(D,L,i.bind(null,D));var B=g.coerce(D,{},e,"type"),j=_.data[B];j||(j=_.data[B]=[]),j.push(L)}),p(o,_.layout,u.bind(null,o)),delete _.layout.template;var s=o.template;if(m(s)){var k,M,A,E,I,C,R=s.layout;m(R)&&a(R,_.layout);var O=s.data;if(m(O)){for(M in _.data)if(A=O[M],Array.isArray(A)){for(C=(I=_.data[M]).length,E=A.length,k=0;k<C;k++)a(A[k%E],I[k]);for(k=C;k<E;k++)I.push(g.extendDeep({},A[k]))}for(M in O)M in _.data||(_.data[M]=g.extendDeep([],O[M]))}}return _},ae.validateTemplate=function(h,d){var o=g.extendDeep({},{_context:n,data:h.data,layout:h.layout}),_=o.layout||{};m(d)||(d=_.template||{});var s=d.layout,k=d.data,M=[];o.layout=_,o.layout.template=d,y.supplyDefaults(o);var A=o._fullLayout,E=o._fullData,I={};if(m(s)?(function j(W,Y){for(var Q in W)if("_"!==Q.charAt(0)&&m(W[Q])){var ne,X=t(Q),$=[];for(ne=0;ne<Y.length;ne++)$.push(c(W,Q,Y[ne])),X!==Q&&$.push(c(W,X,Y[ne]));for(ne=0;ne<$.length;ne++)I[$[ne]]=1;j(W[Q],$)}}(A,["layout"]),function j(W,Y){for(var Q in W)if(-1===Q.indexOf("defaults")&&m(W[Q])){var ne=c(W,Q,Y);I[ne]?j(W[Q],ne):M.push({code:"unused",path:ne})}}(s,"layout")):M.push({code:"layout"}),m(k)){for(var C,R={},O=0;O<E.length;O++){var D=E[O];R[C=D.type]=(R[C]||0)+1,D._fullInput._template||M.push({code:"missing",index:D._fullInput.index,traceType:C})}for(C in k){var L=k[C].length,B=R[C]||0;L>B?M.push({code:"unused",traceType:C,templateCount:L,dataCount:B}):B>L&&M.push({code:"reused",traceType:C,templateCount:L,dataCount:B})}}else M.push({code:"data"});if(function j(W,Y){for(var Q in W)if("_"!==Q.charAt(0)){var ne=W[Q],X=c(W,Q,Y);m(ne)?(Array.isArray(W)&&!1===ne._template&&ne.templateitemname&&M.push({code:"missing",path:X,templateitemname:ne.templateitemname}),j(ne,X)):Array.isArray(ne)&&f(ne)&&j(ne,X)}}({data:E,layout:A},""),M.length)return M.map(l)}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("./plot_api"),w=x("../plots/plots"),y=x("../lib"),e=x("../snapshot/helpers"),r=x("../snapshot/tosvg"),n=x("../snapshot/svgtoimg"),a=x("../version").version,t={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};oe.exports=function(p,u){var i,c,f,l;function h(B){return!(B in u)||y.validate(u[B],t[B])}if(u=u||{},y.isPlainObject(p)?(i=p.data||[],c=p.layout||{},f=p.config||{},l={}):(p=y.getGraphDiv(p),i=y.extendDeep([],p.data),c=y.extendDeep({},p.layout),f=p._context,l=p._fullLayout||{}),!h("width")&&null!==u.width||!h("height")&&null!==u.height)throw new Error("Height and width should be pixel values.");if(!h("format"))throw new Error("Export format is not "+y.join2(t.format.values,", "," or ")+".");var d={};function o(B,j){return y.coerce(u,d,t,B,j)}var _=o("format"),s=o("width"),k=o("height"),M=o("scale"),A=o("setBackground"),E=o("imageDataOnly"),I=document.createElement("div");I.style.position="absolute",I.style.left="-5000px",document.body.appendChild(I);var C=y.extendFlat({},c);s?C.width=s:null===u.width&&g(l.width)&&(C.width=l.width),k?C.height=k:null===u.height&&g(l.height)&&(C.height=l.height);var R=y.extendFlat({},f,{_exportedPlot:!0,staticPlot:!0,setBackground:A}),O=e.getRedrawFunc(I);function D(){return new Promise(function(B){setTimeout(B,e.getDelay(I._fullLayout))})}function L(){return new Promise(function(B,j){var W=r(I,_,M),Y=I._fullLayout.width,Q=I._fullLayout.height;function ne(){m.purge(I),document.body.removeChild(I)}if("full-json"===_){var X=w.graphJson(I,!1,"keepdata","object",!0,!0);return X.version=a,X=JSON.stringify(X),ne(),B(E?X:e.encodeJSON(X))}if(ne(),"svg"===_)return B(E?W:e.encodeSVG(W));var $=document.createElement("canvas");$.id=y.randstr(),n({format:_,width:Y,height:Q,scale:M,canvas:$,svg:W,promise:!0}).then(B).catch(j)})}return new Promise(function(B,j){m.newPlot(I,i,C,R).then(O).then(D).then(L).then(function(W){var Y;B((Y=W,E?Y.replace(e.IMAGE_URL_PREFIX,""):Y))}).catch(function(W){j(W)})})}},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1123,"./plot_api":540,"fast-isnumeric":190}],547:[function(x,oe,ae){"use strict";var g=x("../lib"),m=x("../plots/plots"),w=x("./plot_schema"),y=x("./plot_config").dfltConfig,e=g.isPlainObject,r=Array.isArray,n=g.isArrayOrTypedArray;function a(d,o,_,s,k,M){M=M||[];for(var A=Object.keys(d),E=0;E<A.length;E++){var I=A[E];if("transforms"!==I){var C=M.slice();C.push(I);var R=d[I],O=o[I],D=f(_,I),L=(D||{}).valType,B="info_array"===L,j="colorscale"===L,W=(D||{}).items;if(c(_,I))if(e(R)&&e(O)&&"any"!==L)a(R,O,D,s,k,C);else if(B&&r(R)){R.length>O.length&&s.push(i("unused",k,C.concat(O.length)));var Y,Q,X,$,re=O.length,H=Array.isArray(W);if(H&&(re=Math.min(re,W.length)),2===D.dimensions)for(Q=0;Q<re;Q++)if(r(R[Q])){R[Q].length>O[Q].length&&s.push(i("unused",k,C.concat(Q,O[Q].length)));var U=O[Q].length;for(Y=0;Y<(H?Math.min(U,W[Q].length):U);Y++)$=O[Q][Y],g.validate(X=R[Q][Y],H?W[Q][Y]:W)?$!==X&&$!==+X&&s.push(i("dynamic",k,C.concat(Q,Y),X,$)):s.push(i("value",k,C.concat(Q,Y),X))}else s.push(i("array",k,C.concat(Q),R[Q]));else for(Q=0;Q<re;Q++)$=O[Q],g.validate(X=R[Q],H?W[Q]:W)?$!==X&&$!==+X&&s.push(i("dynamic",k,C.concat(Q),X,$)):s.push(i("value",k,C.concat(Q),X))}else if(D.items&&!B&&r(R)){var G,ie,q=W[Object.keys(W)[0]],ee=[];for(G=0;G<O.length;G++){var te=O[G]._index||G;if((ie=C.slice()).push(te),e(R[te])&&e(O[G])){ee.push(te);var se=R[te],ue=O[G];e(se)&&!1!==se.visible&&!1===ue.visible?s.push(i("invisible",k,ie)):a(se,ue,q,s,k,ie)}}for(G=0;G<R.length;G++)(ie=C.slice()).push(G),e(R[G])?-1===ee.indexOf(G)&&s.push(i("unused",k,ie)):s.push(i("object",k,ie,R[G]))}else!e(R)&&e(O)?s.push(i("object",k,C,R)):n(R)||!n(O)||B||j?I in o?g.validate(R,D)?"enumerated"===D.valType&&(D.coerceNumber&&R!==+O||R!==O)&&s.push(i("dynamic",k,C,R,O)):s.push(i("value",k,C,R)):s.push(i("unused",k,C,R)):s.push(i("array",k,C,R));else s.push(i("schema",k,C))}}return s}function t(d,o){for(var _=d.layout.layoutAttributes,s=0;s<o.length;s++){var k=o[s],M=d.traces[k.type],A=M.layoutAttributes;A&&g.extendFlat(k.subplot?_[M.attributes.subplot.dflt]:_,A)}return _}oe.exports=function(d,o){void 0===d&&(d=[]),void 0===o&&(o={});var _,s,k=w.get(),M=[],A={_context:g.extendFlat({},y)};r(d)?(A.data=g.extendDeep([],d),_=d):(A.data=[],_=[],M.push(i("array","data"))),e(o)?(A.layout=g.extendDeep({},o),s=o):(A.layout={},s={},arguments.length>1&&M.push(i("object","layout"))),m.supplyDefaults(A);for(var E=A._fullData,I=_.length,C=0;C<I;C++){var R=_[C],O=["data",C];if(e(R)){var D=E[C],L=D.type,B=k.traces[L].attributes;B.type={valType:"enumerated",values:[L]},!1===D.visible&&!1!==R.visible&&M.push(i("invisible",O)),a(R,D,B,M,O);var j=R.transforms,W=D.transforms;if(j){r(j)||M.push(i("array",O,["transforms"])),O.push("transforms");for(var Y=0;Y<j.length;Y++){var Q=["transforms",Y],ne=j[Y].type;if(e(j[Y])){var X=k.transforms[ne]?k.transforms[ne].attributes:{};X.type={valType:"enumerated",values:Object.keys(k.transforms)},a(j[Y],W[Y],X,M,O,Q)}else M.push(i("object",O,Q))}}}else M.push(i("object",O))}return a(s,A._fullLayout,t(k,E),M,"layout"),0===M.length?void 0:M};var p={object:function(d,o){return("layout"===d&&""===o?"The layout argument":"data"===d[0]&&""===o?"Trace "+d[1]+" in the data argument":u(d)+"key "+o)+" must be linked to an object container"},array:function(d,o){return("data"===d?"The data argument":u(d)+"key "+o)+" must be linked to an array container"},schema:function(d,o){return u(d)+"key "+o+" is not part of the schema"},unused:function(d,o,_){var s=e(_)?"container":"key";return u(d)+s+" "+o+" did not get coerced"},dynamic:function(d,o,_,s){return[u(d)+"key",o,"(set to '"+_+"')","got reset to","'"+s+"'","during defaults."].join(" ")},invisible:function(d,o){return(o?u(d)+"item "+o:"Trace "+d[1])+" got defaulted to be not visible"},value:function(d,o,_){return[u(d)+"key "+o,"is set to an invalid value ("+_+")"].join(" ")}};function u(d){return r(d)?"In data trace "+d[1]+", ":"In "+d+", "}function i(d,o,_,s,k){var M,A;_=_||"",r(o)?(M=o[0],A=o[1]):(M=o,A=null);var E=function(C){if(!r(C))return String(C);for(var R="",O=0;O<C.length;O++){var D=C[O];"number"==typeof D?R=R.substr(0,R.length-1)+"["+D+"]":R+=D,O<C.length-1&&(R+=".")}return R}(_),I=p[d](o,E,s,k);return g.log(I),{code:d,container:M,trace:A,path:_,astr:E,msg:I}}function c(d,o){var _=h(o),s=_.keyMinusId;return!!(s in d&&d[s]._isSubplotObj&&_.id)||o in d}function f(d,o){return o in d?d[o]:d[h(o).keyMinusId]}var l=g.counterRegex("([a-z]+)");function h(d){var o=d.match(l);return{keyMinusId:o&&o[1],id:o&&o[2]}}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(x,oe,ae){"use strict";oe.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(x,oe,ae){"use strict";var g=x("../lib"),m=x("../plot_api/plot_template");oe.exports=function(w,y,e){var r,n,a=e.name,t=e.inclusionAttr||"visible",p=y[a],u=g.isArrayOrTypedArray(w[a])?w[a]:[],i=y[a]=[],c=m.arrayTemplater(y,a,t);for(r=0;r<u.length;r++){var f=u[r];g.isPlainObject(f)?n=c.newItem(f):(n=c.newItem({}))[t]=!1,n._index=r,!1!==n[t]&&e.handleItemDefaults(f,n,y,e),i.push(n)}var l=c.defaultItems();for(r=0;r<l.length;r++)(n=l[r])._index=i.length,e.handleItemDefaults({},n,y,e,{}),i.push(n);if(g.isArrayOrTypedArray(p)){var h=Math.min(p.length,i.length);for(r=0;r<h;r++)g.relinkPrivateKeys(i[r],p[r])}return i}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(x,oe,ae){"use strict";var g=x("./font_attributes"),m=x("../components/fx/attributes");oe.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:g({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:m.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib"),w=m.dateTime2ms,y=m.incrementMonth,e=x("../../constants/numerical").ONEAVGMONTH;oe.exports=function(r,n,a,t){if("date"!==n.type)return{vals:t};var p=r[a+"periodalignment"];if(!p)return{vals:t};var u,i=r[a+"period"];if(g(i)){if((i=+i)<=0)return{vals:t}}else if("string"==typeof i&&"M"===i.charAt(0)){var c=+i.substring(1);if(!(c>0&&Math.round(c)===c))return{vals:t};u=c}for(var f=n.calendar,l="start"===p,h="end"===p,o=w(r[a+"period0"],f)||0,_=[],s=[],k=[],M=t.length,A=0;A<M;A++){var E,I,C,R=t[A];if(u){for(E=Math.round((R-o)/(u*e)),C=y(o,u*E,f);C>R;)C=y(C,-u,f);for(;C<=R;)C=y(C,u,f);I=y(C,-u,f)}else{for(C=o+(E=Math.round((R-o)/i))*i;C>R;)C-=i;for(;C<=R;)C+=i;I=C-i}_[A]=l?I:h?C:(I+C)/2,s[A]=I,k[A]=C}return{vals:_,starts:s,ends:k}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(x,oe,ae){"use strict";oe.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("fast-isnumeric"),w=x("../../lib"),y=x("../../constants/numerical").FP_SAFE,e=x("../../registry"),r=x("../../components/drawing"),n=x("./axis_ids"),a=n.getFromId,t=n.isLinked;function p(s,k){var M,A,E=[],I=s._fullLayout,C=i(I,k,0),R=i(I,k,1),O=c(s,k),D=O.min,L=O.max;if(0===D.length||0===L.length)return w.simpleMap(k.range,k.r2l);var B=D[0].val,j=L[0].val;for(M=1;M<D.length&&B===j;M++)B=Math.min(B,D[M].val);for(M=1;M<L.length&&B===j;M++)j=Math.max(j,L[M].val);var W=!1;if(k.range){var Y=w.simpleMap(k.range,k.r2l);W=Y[1]<Y[0]}"reversed"===k.autorange&&(W=!0,k.autorange=!0);var Q,ne,X,$,re,H,U=k.rangemode,G="tozero"===U,ie="nonnegative"===U,q=k._length,ee=q/10,te=0;for(M=0;M<D.length;M++)for(Q=D[M],A=0;A<L.length;A++)(H=(ne=L[A]).val-Q.val-u(k,Q.val,ne.val))>0&&((re=q-C(Q)-R(ne))>ee?H/re>te&&(X=Q,$=ne,te=H/re):H/q>te&&(X={val:Q.val,nopad:1},$={val:ne.val,nopad:1},te=H/q));if(B===j){var se=B-1,ue=B+1;if(G)if(0===B)E=[0,1];else{var de=(B>0?L:D).reduce(function(xe,ge){return Math.max(xe,R(ge))},0),he=B/(1-Math.min(.5,de/q));E=B>0?[0,he]:[he,0]}else E=ie?[Math.max(0,se),Math.max(1,ue)]:[se,ue]}else G?(X.val>=0&&(X={val:0,nopad:1}),$.val<=0&&($={val:0,nopad:1})):ie&&(X.val-te*C(X)<0&&(X={val:0,nopad:1}),$.val<=0&&($={val:1,nopad:1})),te=($.val-X.val-u(k,Q.val,ne.val))/(q-C(X)-R($)),E=[X.val-te*C(X),$.val+te*R($)];return W&&E.reverse(),w.simpleMap(E,k.l2r||Number)}function u(s,k,M){var A=0;if(s.rangebreaks)for(var E=s.locateBreaks(k,M),I=0;I<E.length;I++){var C=E[I];A+=C.max-C.min}return A}function i(s,k,M){var A=.05*k._length,E=k._anchorAxis||{};if(-1!==(k.ticklabelposition||"").indexOf("inside")||-1!==(E.ticklabelposition||"").indexOf("inside")){var I="reversed"===k.autorange;if(!I){var C=w.simpleMap(k.range,k.r2l);I=C[1]<C[0]}I&&(M=!M)}var R=0;return t(s,k._id)||(R=function(O,D,L){var B=0,j="x"===D._id.charAt(0);for(var W in O._plots){var Y=O._plots[W];if(D._id===Y.xaxis._id||D._id===Y.yaxis._id){var Q=(j?Y.yaxis:Y.xaxis)||{};if(-1!==(Q.ticklabelposition||"").indexOf("inside")&&(!L&&("left"===Q.side||"bottom"===Q.side)||L&&("top"===Q.side||"right"===Q.side))){if(Q._vals){var ne=w.deg2rad(Q._tickAngles[Q._id+"tick"]||0),X=Math.abs(Math.cos(ne)),$=Math.abs(Math.sin(ne));Q._vals[0].bb||Q._selections[Q._id+"tick"].each(function(q){var ee=g.select(this);ee.select(".text-math-group").empty()&&(q.bb=r.bBox(ee.node()))});for(var H=0;H<Q._vals.length;H++){var U=Q._vals[H].bb;if(U){var G=6+U.width,ie=6+U.height;B=Math.max(B,j?Math.max(G*X,ie*$):Math.max(ie*X,G*$))}}}"inside"===Q.ticks&&"inside"===Q.ticklabelposition&&(B+=Q.ticklen||0)}}}return B}(s,k,M)),A=Math.max(R,A),"domain"===k.constrain&&k._inputDomain&&(A*=(k._inputDomain[1]-k._inputDomain[0])/(k.domain[1]-k.domain[0])),function(O){return O.nopad?0:O.pad+(O.extrapad?A:R)}}function c(s,k,M){var A,E,I,C=k._id,O=s._fullLayout,D=[],L=[];function B(ne,X){for(A=0;A<X.length;A++){var $=ne[X[A]],re=($._extremes||{})[C];if(!0===$.visible&&re){for(E=0;E<re.min.length;E++)f(D,(I=re.min[E]).val,I.pad,{extrapad:I.extrapad});for(E=0;E<re.max.length;E++)l(L,(I=re.max[E]).val,I.pad,{extrapad:I.extrapad})}}}if(B(s._fullData,k._traceIndices),B(O.annotations||[],k._annIndices||[]),B(O.shapes||[],k._shapeIndices||[]),k._matchGroup&&!M)for(var j in k._matchGroup)if(j!==k._id){var W=a(s,j),Y=c(s,W,!0),Q=k._length/W._length;for(E=0;E<Y.min.length;E++)f(D,(I=Y.min[E]).val,I.pad*Q,{extrapad:I.extrapad});for(E=0;E<Y.max.length;E++)l(L,(I=Y.max[E]).val,I.pad*Q,{extrapad:I.extrapad})}return{min:D,max:L}}function f(s,k,M,A){h(s,k,M,A,o)}function l(s,k,M,A){h(s,k,M,A,_)}function h(s,k,M,A,E){for(var I=A.tozero,C=A.extrapad,R=!0,O=0;O<s.length&&R;O++){var D=s[O];if(E(D.val,k)&&D.pad>=M&&(D.extrapad||!C)){R=!1;break}E(k,D.val)&&D.pad<=M&&(C||!D.extrapad)&&(s.splice(O,1),O--)}if(R){var L=I&&0===k;s.push({val:k,pad:L?0:M,extrapad:!L&&C})}}function d(s){return m(s)&&Math.abs(s)<y}function o(s,k){return s<=k}function _(s,k){return s>=k}oe.exports={getAutoRange:p,makePadFn:i,doAutoRange:function(s,k,M){if(k.setScale(),k.autorange){k.range=M?M.slice():p(s,k),k._r=k.range.slice(),k._rl=w.simpleMap(k._r,k.r2l);var A=k._input,E={};E[k._attr+".range"]=k.range,E[k._attr+".autorange"]=k.autorange,e.call("_storeDirectGUIEdit",s.layout,s._fullLayout._preGUI,E),A.range=k.range.slice(),A.autorange=k.autorange}var I=k._anchorAxis;if(I&&I.rangeslider){var C=I.rangeslider[k._name];C&&"auto"===C.rangemode&&(C.range=p(s,k)),I._input.rangeslider[k._name]=w.extendFlat({},C)}},findExtremes:function(s,k,M){M||(M={}),s._m||s.setScale();var A,E,I,C,R,O,D,L,B,j=[],W=[],Y=k.length,Q=M.padded||!1,ne=M.tozero&&("linear"===s.type||"-"===s.type),X="log"===s.type,$=!1,re=M.vpadLinearized||!1;function H(ue){if(Array.isArray(ue))return $=!0,function(he){return Math.max(Number(ue[he]||0),0)};var de=Math.max(Number(ue||0),0);return function(){return de}}var U=H((s._m>0?M.ppadplus:M.ppadminus)||M.ppad||0),G=H((s._m>0?M.ppadminus:M.ppadplus)||M.ppad||0),ie=H(M.vpadplus||M.vpad),q=H(M.vpadminus||M.vpad);if(!$){if(L=1/0,B=-1/0,X)for(A=0;A<Y;A++)(E=k[A])<L&&E>0&&(L=E),E>B&&E<y&&(B=E);else for(A=0;A<Y;A++)(E=k[A])<L&&E>-y&&(L=E),E>B&&E<y&&(B=E);k=[L,B],Y=2}var ee={tozero:ne,extrapad:Q};function te(ue){m(I=k[ue])&&(O=U(ue),D=G(ue),re?(C=s.c2l(I)-q(ue),R=s.c2l(I)+ie(ue)):(L=I-q(ue),B=I+ie(ue),X&&L<B/10&&(L=B/10),C=s.c2l(L),R=s.c2l(B)),ne&&(C=Math.min(0,C),R=Math.max(0,R)),d(C)&&f(j,C,D,ee),d(R)&&l(W,R,O,ee))}var se=Math.min(6,Y);for(A=0;A<se;A++)te(A);for(A=Y-1;A>=se;A--)te(A);return{min:j,max:W,opts:M}},concatExtremes:c}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("fast-isnumeric"),w=x("../../plots/plots"),y=x("../../registry"),e=x("../../lib"),r=e.strTranslate,n=x("../../lib/svg_text_utils"),a=x("../../components/titles"),t=x("../../components/color"),p=x("../../components/drawing"),u=x("./layout_attributes"),i=x("./clean_ticks"),c=x("../../constants/numerical"),f=c.ONEMAXYEAR,l=c.ONEAVGYEAR,h=c.ONEMINYEAR,d=c.ONEMAXQUARTER,o=c.ONEAVGQUARTER,_=c.ONEMINQUARTER,s=c.ONEMAXMONTH,k=c.ONEAVGMONTH,M=c.ONEMINMONTH,A=c.ONEWEEK,E=c.ONEDAY,I=E/2,C=c.ONEHOUR,R=c.ONEMIN,O=c.ONESEC,D=c.MINUS_SIGN,L=c.BADNUM,B={K:"zeroline"},j={K:"gridline",L:"path"},W={K:"minor-gridline",L:"path"},Y={K:"tick",L:"path"},Q={K:"tick",L:"text"},ne=x("../../constants/alignment"),X=ne.MID_SHIFT,$=ne.CAP_SHIFT,re=ne.LINE_SPACING,H=ne.OPPOSITE_SIDE,U=oe.exports={};U.setConvert=x("./set_convert");var G=x("./axis_autotype"),ie=x("./axis_ids"),q=ie.idSort,ee=ie.isLinked;U.id2name=ie.id2name,U.name2id=ie.name2id,U.cleanId=ie.cleanId,U.list=ie.list,U.listIds=ie.listIds,U.getFromId=ie.getFromId,U.getFromTrace=ie.getFromTrace;var te=x("./autorange");function se(Me){var Ee=1e-4*(Me[1]-Me[0]);return[Me[0]-Ee,Me[1]+Ee]}U.getAutoRange=te.getAutoRange,U.findExtremes=te.findExtremes,U.coerceRef=function(Me,Ee,Se,je,qe,Je){var at=je.charAt(je.length-1),it=Se._fullLayout._subplots[at+"axis"],yt=je+"ref",vt={};return qe||(qe=it[0]||("string"==typeof Je?Je:Je[0])),Je||(Je=qe),it=it.concat(it.map(function(Ut){return Ut+" domain"})),vt[yt]={valType:"enumerated",values:it.concat(Je?"string"==typeof Je?[Je]:Je:[]),dflt:qe},e.coerce(Me,Ee,vt,yt)},U.getRefType=function(Me){return void 0===Me?Me:"paper"===Me?"paper":"pixel"===Me?"pixel":/( domain)$/.test(Me)?"domain":"range"},U.coercePosition=function(Me,Ee,Se,je,qe,Je){var at,it;if("range"!==U.getRefType(je))at=e.ensureNumber,it=Se(qe,Je);else{var yt=U.getFromId(Ee,je);it=Se(qe,Je=yt.fraction2r(Je)),at=yt.cleanPos}Me[qe]=at(it)},U.cleanPosition=function(Me,Ee,Se){return("paper"===Se||"pixel"===Se?e.ensureNumber:U.getFromId(Ee,Se).cleanPos)(Me)},U.redrawComponents=function(Me,Ee){Ee=Ee||U.listIds(Me);var Se=Me._fullLayout;function je(qe,Je,at,it){for(var yt=y.getComponentMethod(qe,Je),vt={},Ut=0;Ut<Ee.length;Ut++)for(var Wt=Se[U.id2name(Ee[Ut])][at],gt=0;gt<Wt.length;gt++){var At=Wt[gt];if(!vt[At]&&(yt(Me,At),vt[At]=1,it))return}}je("annotations","drawOne","_annIndices"),je("shapes","drawOne","_shapeIndices"),je("images","draw","_imgIndices",!0)};var ue=U.getDataConversions=function(Me,Ee,Se,je){var qe,Je="x"===Se||"y"===Se||"z"===Se?Se:je;if(Array.isArray(Je)){if(qe={type:G(je,void 0,{autotypenumbers:Me._fullLayout.autotypenumbers}),_categories:[]},U.setConvert(qe),"category"===qe.type)for(var at=0;at<je.length;at++)qe.d2c(je[at])}else qe=U.getFromTrace(Me,Ee,Je);return qe?{d2c:qe.d2c,c2d:qe.c2d}:"ids"===Je?{d2c:he,c2d:he}:{d2c:de,c2d:de}};function de(Me){return+Me}function he(Me){return String(Me)}function xe(Me,Ee){return Math.abs((Me/Ee+.5)%1-.5)<.001}function ge(Me,Ee){return Math.abs(Me/Ee-1)<.001}function _e(Me){return+Me.substring(1)}function Ce(Me){var Ee=se(e.simpleMap(Me.range,Me.r2l)),Se=Math.min(Ee[0],Ee[1]),je=Math.max(Ee[0],Ee[1]),qe="category"===Me.type?Me.d2l_noadd:Me.d2l;"log"===Me.type&&"L"!==String(Me.dtick).charAt(0)&&(Me.dtick="L"+Math.pow(10,Math.floor(Math.min(Me.range[0],Me.range[1]))-1));for(var Je=[],at=0;at<=1;at++)if(!at||Me.minor){var it=at?Me.minor.tickvals:Me.tickvals,yt=at?[]:Me.ticktext;if(it){Array.isArray(yt)||(yt=[]);for(var vt=0;vt<it.length;vt++){var Ut=qe(it[vt]);if(Ut>Se&&Ut<je){var Wt=void 0===yt[vt]?U.tickText(Me,Ut):He(Me,Ut,String(yt[vt]));at&&(Wt.minor=!0,Wt.text=""),Je.push(Wt)}}}}return Me.rangebreaks&&(Je=Je.filter(function(gt){return Me.maskBreaks(gt.x)!==L})),Je}U.getDataToCoordFunc=function(Me,Ee,Se,je){return ue(Me,Ee,Se,je).d2c},U.counterLetter=function(Me){var Ee=Me.charAt(0);return"x"===Ee?"y":"y"===Ee?"x":void 0},U.minDtick=function(Me,Ee,Se,je){-1===["log","category","multicategory"].indexOf(Me.type)&&je?void 0===Me._minDtick?(Me._minDtick=Ee,Me._forceTick0=Se):Me._minDtick&&((Me._minDtick/Ee+1e-6)%1<2e-6&&((Se-Me._forceTick0)/Ee%1+1.000001)%1<2e-6?(Me._minDtick=Ee,Me._forceTick0=Se):((Ee/Me._minDtick+1e-6)%1>2e-6||((Se-Me._forceTick0)/Me._minDtick%1+1.000001)%1>2e-6)&&(Me._minDtick=0)):Me._minDtick=0},U.saveRangeInitial=function(Me,Ee){for(var Se=U.list(Me,"",!0),je=!1,qe=0;qe<Se.length;qe++){var Je=Se[qe],at=void 0===Je._rangeInitial;(at&&!1===Je.autorange||Ee&&(at||Je.range[0]!==Je._rangeInitial[0]||Je.range[1]!==Je._rangeInitial[1]))&&(Je._rangeInitial=Je.range.slice(),je=!0)}return je},U.saveShowSpikeInitial=function(Me,Ee){for(var Se=U.list(Me,"",!0),je=!1,qe="on",Je=0;Je<Se.length;Je++){var at=Se[Je],it=void 0===at._showSpikeInitial;(it||Ee&&(it||at.showspikes!==at._showspikes))&&(at._showSpikeInitial=at.showspikes,je=!0),"on"!==qe||at.showspikes||(qe="off")}return Me._fullLayout._cartesianSpikesEnabled=qe,je},U.autoBin=function(Me,Ee,Se,je,qe,Je){var at,it=e.aggNums(Math.min,null,Me),yt=e.aggNums(Math.max,null,Me);if("category"===Ee.type||"multicategory"===Ee.type)return{start:it-.5,end:yt+.5,size:Math.max(1,Math.round(Je)||1),_dataSpan:yt-it};if(qe||(qe=Ee.calendar),at="log"===Ee.type?{type:"linear",range:[it,yt]}:{type:Ee.type,range:e.simpleMap([it,yt],Ee.c2r,0,qe),calendar:qe},U.setConvert(at),Je=Je&&i.dtick(Je,at.type))at.dtick=Je,at.tick0=i.tick0(void 0,at.type,qe);else{var vt;if(Se)vt=(yt-it)/Se;else{var Ut=e.distinctVals(Me),Wt=Math.pow(10,Math.floor(Math.log(Ut.minDiff)/Math.LN10)),gt=Wt*e.roundUp(Ut.minDiff/Wt,[.9,1.9,4.9,9.9],!0);vt=Math.max(gt,2*e.stdev(Me)/Math.pow(Me.length,je?.25:.4)),m(vt)||(vt=1)}U.autoTicks(at,vt)}var At,Zt=at.dtick,Et=U.tickIncrement(U.tickFirst(at),Zt,"reverse",qe);if("number"==typeof Zt)At=(Et=function(Ct,Ne,et,dt,Mt){var zt=0,Xt=0,un=0,Qt=0;function kn(vn){return(1+100*(vn-Ct)/et.dtick)%100<2}for(var qn=0;qn<Ne.length;qn++)Ne[qn]%1==0?un++:m(Ne[qn])||Qt++,kn(Ne[qn])&&zt++,kn(Ne[qn]+et.dtick/2)&&Xt++;var gn=Ne.length-Qt;if(un===gn&&"date"!==et.type)et.dtick<1?Ct=dt-.5*et.dtick:(Ct-=.5)+et.dtick<dt&&(Ct+=et.dtick);else if(Xt<.1*gn&&(zt>.3*gn||kn(dt)||kn(Mt))){var sn=et.dtick/2;Ct+=Ct+sn<dt?sn:-sn}return Ct}(Et,Me,at,it,yt))+(1+Math.floor((yt-Et)/Zt))*Zt;else for("M"===at.dtick.charAt(0)&&(Et=function(Ct,Ne,et,dt,Mt){var zt=e.findExactDates(Ne,Mt);if(zt.exactDays>.8){var Xt=Number(et.substr(1));zt.exactYears>.8&&Xt%12==0?Ct=U.tickIncrement(Ct,"M6","reverse")+1.5*E:zt.exactMonths>.8?Ct=U.tickIncrement(Ct,"M1","reverse")+15.5*E:Ct-=I;var un=U.tickIncrement(Ct,et);if(un<=dt)return un}return Ct}(Et,Me,Zt,it,qe)),At=Et;At<=yt;)At=U.tickIncrement(At,Zt,!1,qe);return{start:Ee.c2r(Et,0,qe),end:Ee.c2r(At,0,qe),size:Zt,_dataSpan:yt-it}},U.prepMinorTicks=function(Me,Ee,Se){if(!Ee.minor.dtick){delete Me.dtick;var je,qe=Ee.dtick&&m(Ee._tmin);if(qe){var Je=U.tickIncrement(Ee._tmin,Ee.dtick,!0);je=[Ee._tmin,.99*Je+.01*Ee._tmin]}else{var at=e.simpleMap(Ee.range,Ee.r2l);je=[at[0],.8*at[0]+.2*at[1]]}if(Me.range=e.simpleMap(je,Ee.l2r),Me._isMinor=!0,U.prepTicks(Me,Se),qe){var it=m(Ee.dtick),yt=m(Me.dtick),vt=it?Ee.dtick:+Ee.dtick.substring(1),Ut=yt?Me.dtick:+Me.dtick.substring(1);it&&yt?xe(vt,Ut)?vt===2*A&&Ut===2*E&&(Me.dtick=A):Me.dtick=vt===2*A&&Ut===3*E?A:vt!==A||(Ee._input.minor||{}).nticks?ge(vt/Ut,2.5)?vt/2:vt:E:"M"===String(Ee.dtick).charAt(0)?yt?Me.dtick="M1":xe(vt,Ut)?vt>=12&&2===Ut&&(Me.dtick="M3"):Me.dtick=Ee.dtick:"L"===String(Me.dtick).charAt(0)?"L"===String(Ee.dtick).charAt(0)?xe(vt,Ut)||(Me.dtick=ge(vt/Ut,2.5)?Ee.dtick/2:Ee.dtick):Me.dtick="D1":"D2"===Me.dtick&&+Ee.dtick>1&&(Me.dtick=1)}Me.range=Ee.range}void 0===Ee.minor._tick0Init&&(Me.tick0=Ee.tick0)},U.prepTicks=function(Me,Ee){var Se=e.simpleMap(Me.range,Me.r2l,void 0,void 0,Ee);if("auto"===Me.tickmode||!Me.dtick){var je,qe=Me.nticks;qe||("category"===Me.type||"multicategory"===Me.type?(je=Me.tickfont?e.bigFont(Me.tickfont.size||12):15,qe=Me._length/je):(je="y"===Me._id.charAt(0)?40:80,qe=e.constrain(Me._length/je,4,9)+1),"radialaxis"===Me._name&&(qe*=2)),Me.minor&&"array"!==Me.minor.tickmode||"array"===Me.tickmode&&(qe*=100),Me._roughDTick=Math.abs(Se[1]-Se[0])/qe,U.autoTicks(Me,Me._roughDTick),Me._minDtick>0&&Me.dtick<2*Me._minDtick&&(Me.dtick=Me._minDtick,Me.tick0=Me.l2r(Me._forceTick0))}"period"===Me.ticklabelmode&&function(Je){var at;function it(){return!(m(Je.dtick)||"M"!==Je.dtick.charAt(0))}var yt=it(),vt=U.getTickFormat(Je);if(vt){var Ut=Je._dtickInit!==Je.dtick;/%[fLQsSMX]/.test(vt)||(/%[HI]/.test(vt)?(at=C,Ut&&!yt&&Je.dtick<C&&(Je.dtick=C)):/%p/.test(vt)?(at=I,Ut&&!yt&&Je.dtick<I&&(Je.dtick=I)):/%[Aadejuwx]/.test(vt)?(at=E,Ut&&!yt&&Je.dtick<E&&(Je.dtick=E)):/%[UVW]/.test(vt)?(at=A,Ut&&!yt&&Je.dtick<A&&(Je.dtick=A)):/%[Bbm]/.test(vt)?(at=k,Ut&&(yt?_e(Je.dtick)<1:Je.dtick<M)&&(Je.dtick="M1")):/%[q]/.test(vt)?(at=o,Ut&&(yt?_e(Je.dtick)<3:Je.dtick<_)&&(Je.dtick="M3")):/%[Yy]/.test(vt)&&(at=l,Ut&&(yt?_e(Je.dtick)<12:Je.dtick<h)&&(Je.dtick="M12")))}(yt=it())&&Je.tick0===Je._dowTick0&&(Je.tick0=Je._rawTick0),Je._definedDelta=at}(Me),Me.tick0||(Me.tick0="date"===Me.type?"2000-01-01":0),"date"===Me.type&&Me.dtick<.1&&(Me.dtick=.1),Ue(Me)},U.calcTicks=function(Me,Ee){for(var Se,je,qe=Me.type,Je=Me.calendar,at=Me.ticklabelstep,it="period"===Me.ticklabelmode,yt=e.simpleMap(Me.range,Me.r2l,void 0,void 0,Ee),vt=yt[1]<yt[0],Ut=Math.min(yt[0],yt[1]),Wt=Math.max(yt[0],yt[1]),gt=Math.max(1e3,Me._length||0),At=[],Zt=[],Et=[],Ct=[],Ne=Me.minor&&(Me.minor.ticks||Me.minor.showgrid),et=1;et>=(Ne?0:1);et--){var dt=!et;et?(Me._dtickInit=Me.dtick,Me._tick0Init=Me.tick0):(Me.minor._dtickInit=Me.minor.dtick,Me.minor._tick0Init=Me.minor.tick0);var Mt=et?Me:e.extendFlat({},Me,Me.minor);if(dt?U.prepMinorTicks(Mt,Me,Ee):U.prepTicks(Mt,Ee),"array"!==Mt.tickmode){var zt=se(yt),Xt=zt[0],un=zt[1],Qt=m(Mt.dtick),kn="log"===qe&&!(Qt||"L"===Mt.dtick.charAt(0)),qn=U.tickFirst(Mt,Ee);if(et){if(Me._tmin=qn,qn<Xt!==vt)break;"category"!==qe&&"multicategory"!==qe||(un=vt?Math.max(-.5,un):Math.min(Me._categories.length-.5,un))}var gn,sn,vn=null,pn=qn;et&&(Qt?sn=Me.dtick:"date"===qe?"string"==typeof Me.dtick&&"M"===Me.dtick.charAt(0)&&(sn=k*Me.dtick.substring(1)):sn=Me._roughDTick,gn=Math.round((Me.r2l(pn)-Me.r2l(Me.tick0))/sn)-1);var Mn=Mt.dtick;for(Mt.rangebreaks&&Mt._tick0Init!==Mt.tick0&&(pn=cn(pn,Me),vt||(pn=U.tickIncrement(pn,Mn,!vt,Je))),et&&it&&(pn=U.tickIncrement(pn,Mn,!vt,Je),gn--);vt?pn>=un:pn<=un;pn=U.tickIncrement(pn,Mn,vt,Je)){if(et&&gn++,Mt.rangebreaks&&!vt){if(pn<Xt)continue;if(Mt.maskBreaks(pn)===L&&cn(pn,Mt)>=Wt)break}if(Et.length>gt||pn===vn)break;vn=pn;var Rn={value:pn};et?(kn&&pn!==(0|pn)&&(Rn.simpleLabel=!0),at>1&&gn%at&&(Rn.skipLabel=!0),Et.push(Rn)):(Rn.minor=!0,Ct.push(Rn))}}else et?(Et=[],At=Ce(Me)):(Ct=[],Zt=Ce(Me))}if(Ne&&!("inside"===Me.minor.ticks&&"outside"===Me.ticks||"outside"===Me.minor.ticks&&"inside"===Me.ticks)){for(var Xn=Et.map(function(ri){return ri.value}),Hn=[],rr=0;rr<Ct.length;rr++){var er=Ct[rr],Ir=er.value;if(-1===Xn.indexOf(Ir)){for(var Or=!1,ni=0;!Or&&ni<Et.length;ni++)1e7+Et[ni].value===1e7+Ir&&(Or=!0);Or||Hn.push(er)}}Ct=Hn}if(it&&function(ri,Cr,Pr){for(var vr=0;vr<ri.length;vr++){var hn=ri[vr].value,Jn=vr,jt=vr+1;vr<ri.length-1?(Jn=vr,jt=vr+1):vr>0?(Jn=vr-1,jt=vr):(Jn=vr,jt=vr);var fn,Wn=Math.abs(ri[jt].value-ri[Jn].value),Pn=Pr||Wn,Un=0;Pn>=h?Un=Wn>=h&&Wn<=f?Wn:l:Pr===o&&Pn>=_?Un=Wn>=_&&Wn<=d?Wn:o:Pn>=M?Un=Wn>=M&&Wn<=s?Wn:k:Pr===A&&Pn>=A?Un=A:Pn>=E?Un=E:Pr===I&&Pn>=I?Un=I:Pr===C&&Pn>=C&&(Un=C),Un>=Wn&&(Un=Wn,fn=!0);var Cn=hn+Un;if(Cr.rangebreaks&&Un>0){for(var On=0,Fn=0;Fn<84;Fn++){var Gn=(Fn+.5)/84;Cr.maskBreaks(hn*(1-Gn)+Gn*Cn)!==L&&On++}(Un*=On/84)||(ri[vr].drop=!0),fn&&Wn>A&&(Un=Wn)}(Un>0||0===vr)&&(ri[vr].periodX=hn+Un/2)}}(Et,Me,Me._definedDelta),Me.rangebreaks){var Br="y"===Me._id.charAt(0),Dr=1;"auto"===Me.tickmode&&(Dr=Me.tickfont?Me.tickfont.size:12);var Rr=NaN;for(Se=Et.length-1;Se>-1;Se--)if(Et[Se].drop)Et.splice(Se,1);else{Et[Se].value=cn(Et[Se].value,Me);var yi=Me.c2p(Et[Se].value);(Br?Rr>yi-Dr:Rr<yi+Dr)?Et.splice(vt?Se+1:Se,1):Rr=yi}}dn(Me)&&360===Math.abs(yt[1]-yt[0])&&Et.pop(),Me._tmax=(Et[Et.length-1]||{}).value,Me._prevDateHead="",Me._inCalcTicks=!0;var $n,Mr,br=function(ri){ri.text="",Me._prevDateHead=je};for(Et=Et.concat(Ct),Se=0;Se<Et.length;Se++){var si=Et[Se].value;Et[Se].minor?Zt.push({x:si,minor:!0}):(je=Me._prevDateHead,$n=U.tickText(Me,si,!1,Et[Se].simpleLabel),void 0!==(Mr=Et[Se].periodX)&&($n.periodX=Mr,(Mr>Wt||Mr<Ut)&&(Mr>Wt&&($n.periodX=Wt),Mr<Ut&&($n.periodX=Ut),br($n))),Et[Se].skipLabel&&br($n),At.push($n))}return At=At.concat(Zt),Me._inCalcTicks=!1,it&&At.length&&(At[0].noTick=!0),At};var Le=[2,5,10],Ie=[1,2,3,6,12],Be=[1,2,5,10,15,30],ve=[1,2,3,7,14],Te=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Pe=[-.301,0,.301,.699,1],De=[15,30,45,90,180];function Fe(Me,Ee,Se){return Ee*e.roundUp(Me/Ee,Se)}function Ue(Me){var Ee=Me.dtick;if(Me._tickexponent=0,m(Ee)||"string"==typeof Ee||(Ee=1),"category"!==Me.type&&"multicategory"!==Me.type||(Me._tickround=null),"date"===Me.type){var Se=Me.r2l(Me.tick0),je=Me.l2r(Se).replace(/(^-|i)/g,""),qe=je.length;if("M"===String(Ee).charAt(0))Me._tickround=qe>10||"01-01"!==je.substr(5)?"d":+Ee.substr(1)%12==0?"y":"m";else if(Ee>=E&&qe<=10||Ee>=15*E)Me._tickround="d";else if(Ee>=R&&qe<=16||Ee>=C)Me._tickround="M";else if(Ee>=O&&qe<=19||Ee>=R)Me._tickround="S";else{var Je=Me.l2r(Se+Ee).replace(/^-/,"").length;Me._tickround=Math.max(qe,Je)-20,Me._tickround<0&&(Me._tickround=4)}}else if(m(Ee)||"L"===Ee.charAt(0)){var at=Me.range.map(Me.r2d||Number);m(Ee)||(Ee=Number(Ee.substr(1))),Me._tickround=2-Math.floor(Math.log(Ee)/Math.LN10+.01);var it=Math.max(Math.abs(at[0]),Math.abs(at[1])),yt=Math.floor(Math.log(it)/Math.LN10+.01),vt=void 0===Me.minexponent?3:Me.minexponent;Math.abs(yt)>vt&&(Me._tickexponent=st(Me.exponentformat)&&!Ve(yt)?3*Math.round((yt-1)/3):yt)}else Me._tickround=null}function He(Me,Ee,Se){var je=Me.tickfont||{};return{x:Ee,dx:0,dy:0,text:Se||"",fontSize:je.size,font:je.family,fontColor:je.color}}U.autoTicks=function(Me,Ee,Se){var je;function qe(Wt){return Math.pow(Wt,Math.floor(Math.log(Ee)/Math.LN10))}if("date"===Me.type){Me.tick0=e.dateTick0(Me.calendar,0);var Je=2*Ee;if(Je>l)Ee/=l,je=qe(10),Me.dtick="M"+12*Fe(Ee,je,Le);else if(Je>k)Me.dtick="M"+Fe(Ee/=k,1,Ie);else if(Je>E){if(Me.dtick=Fe(Ee,E,Me._hasDayOfWeekBreaks?[1,2,7,14]:ve),!Se){var at=U.getTickFormat(Me),it="period"===Me.ticklabelmode;it&&(Me._rawTick0=Me.tick0),Me.tick0=/%[uVW]/.test(at)?e.dateTick0(Me.calendar,2):e.dateTick0(Me.calendar,1),it&&(Me._dowTick0=Me.tick0)}}else Je>C?Me.dtick=Fe(Ee,C,Ie):Je>R?Me.dtick=Fe(Ee,R,Be):Je>O?Me.dtick=Fe(Ee,O,Be):(je=qe(10),Me.dtick=Fe(Ee,je,Le))}else if("log"===Me.type){Me.tick0=0;var yt=e.simpleMap(Me.range,Me.r2l);if(Me._isMinor&&(Ee*=1.5),Ee>.7)Me.dtick=Math.ceil(Ee);else if(Math.abs(yt[1]-yt[0])<1){var vt=1.5*Math.abs((yt[1]-yt[0])/Ee);Ee=Math.abs(Math.pow(10,yt[1])-Math.pow(10,yt[0]))/vt,je=qe(10),Me.dtick="L"+Fe(Ee,je,Le)}else Me.dtick=Ee>.3?"D2":"D1"}else"category"===Me.type||"multicategory"===Me.type?(Me.tick0=0,Me.dtick=Math.ceil(Math.max(Ee,1))):dn(Me)?(Me.tick0=0,Me.dtick=Fe(Ee,je=1,De)):(Me.tick0=0,je=qe(10),Me.dtick=Fe(Ee,je,Le));if(0===Me.dtick&&(Me.dtick=1),!m(Me.dtick)&&"string"!=typeof Me.dtick){var Ut=Me.dtick;throw Me.dtick=1,"ax.dtick error: "+String(Ut)}},U.tickIncrement=function(Me,Ee,Se,je){var qe=Se?-1:1;if(m(Ee))return e.increment(Me,qe*Ee);var Je=Ee.charAt(0),at=qe*Number(Ee.substr(1));if("M"===Je)return e.incrementMonth(Me,at,je);if("L"===Je)return Math.log(Math.pow(10,Me)+at)/Math.LN10;if("D"===Je){var it="D2"===Ee?Pe:Te,yt=Me+.01*qe,vt=e.roundUp(e.mod(yt,1),it,Se);return Math.floor(yt)+Math.log(g.round(Math.pow(10,vt),1))/Math.LN10}throw"unrecognized dtick "+String(Ee)},U.tickFirst=function(Me,Ee){var Se=Me.r2l||Number,je=e.simpleMap(Me.range,Se,void 0,void 0,Ee),qe=je[1]<je[0],Je=qe?Math.floor:Math.ceil,at=se(je)[0],it=Me.dtick,yt=Se(Me.tick0);if(m(it)){var vt=Je((at-yt)/it)*it+yt;return"category"!==Me.type&&"multicategory"!==Me.type||(vt=e.constrain(vt,0,Me._categories.length-1)),vt}var Ut=it.charAt(0),Wt=Number(it.substr(1));if("M"===Ut){for(var gt,At,Zt,Et=0,Ct=yt;Et<10;){if(((gt=U.tickIncrement(Ct,it,qe,Me.calendar))-at)*(Ct-at)<=0)return qe?Math.min(Ct,gt):Math.max(Ct,gt);At=(at-(Ct+gt)/2)/(gt-Ct),Zt=Ut+(Math.abs(Math.round(At))||1)*Wt,Ct=U.tickIncrement(Ct,Zt,At<0?!qe:qe,Me.calendar),Et++}return e.error("tickFirst did not converge",Me),Ct}if("L"===Ut)return Math.log(Je((Math.pow(10,at)-yt)/Wt)*Wt+yt)/Math.LN10;if("D"===Ut){var Ne="D2"===it?Pe:Te,et=e.roundUp(e.mod(at,1),Ne,qe);return Math.floor(at)+Math.log(g.round(Math.pow(10,et),1))/Math.LN10}throw"unrecognized dtick "+String(it)},U.tickText=function(Me,Ee,Se,je){var qe,Je=He(Me,Ee),at="array"===Me.tickmode,it=Se||at,yt=Me.type,vt="category"===yt?Me.d2l_noadd:Me.d2l;if(at&&Array.isArray(Me.ticktext)){var Ut=e.simpleMap(Me.range,Me.r2l),Wt=(Math.abs(Ut[1]-Ut[0])-(Me._lBreaks||0))/1e4;for(qe=0;qe<Me.ticktext.length&&!(Math.abs(Ee-vt(Me.tickvals[qe]))<Wt);qe++);if(qe<Me.ticktext.length)return Je.text=String(Me.ticktext[qe]),Je}function gt(Et){return void 0===Et||(Se?"none"===Et:"all"!==Et&&Ee!=={first:Me._tmin,last:Me._tmax}[Et])}var Ct,Ne,At=Se?"never":"none"!==Me.exponentformat&&gt(Me.showexponent)?"hide":"";if("date"===yt?function(Et,Ct,Ne,et){var dt=Et._tickround,Mt=Ne&&Et.hoverformat||U.getTickFormat(Et);et&&(dt=m(dt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[dt]);var zt,Xt=e.formatDate(Ct.x,Mt,dt,Et._dateFormat,Et.calendar,Et._extraFormat),un=Xt.indexOf("\n");if(-1!==un&&(zt=Xt.substr(un+1),Xt=Xt.substr(0,un)),et&&("00:00:00"===Xt||"00:00"===Xt?(Xt=zt,zt=""):8===Xt.length&&(Xt=Xt.replace(/:00$/,""))),zt)if(Ne)"d"===dt?Xt+=", "+zt:Xt=zt+(Xt?", "+Xt:"");else if(Et._inCalcTicks&&Et._prevDateHead===zt){var Qt=Tn(Et),kn=Et._trueSide||Et.side;(!Qt&&"top"===kn||Qt&&"bottom"===kn)&&(Xt+="<br> ")}else Et._prevDateHead=zt,Xt+="<br>"+zt;Ct.text=Xt}(Me,Je,Se,it):"log"===yt?function(Et,Ct,Ne,et,dt){var Mt=Et.dtick,zt=Ct.x,Xt=Et.tickformat,un="string"==typeof Mt&&Mt.charAt(0);if("never"===dt&&(dt=""),et&&"L"!==un&&(Mt="L3",un="L"),Xt||"L"===un)Ct.text=$e(Math.pow(10,zt),Et,dt,et);else if(m(Mt)||"D"===un&&e.mod(zt+.01,1)<.1){var Qt=Math.round(zt),kn=Math.abs(Qt),qn=Et.exponentformat;"power"===qn||st(qn)&&Ve(Qt)?(Ct.text=0===Qt?1:1===Qt?"10":"10<sup>"+(Qt>1?"":D)+kn+"</sup>",Ct.fontSize*=1.25):("e"===qn||"E"===qn)&&kn>2?Ct.text="1"+qn+(Qt>0?"+":D)+kn:(Ct.text=$e(Math.pow(10,zt),Et,"","fakehover"),"D1"===Mt&&"y"===Et._id.charAt(0)&&(Ct.dy-=Ct.fontSize/6))}else{if("D"!==un)throw"unrecognized dtick "+String(Mt);Ct.text=String(Math.round(Math.pow(10,e.mod(zt,1)))),Ct.fontSize*=.75}if("D1"===Et.dtick){var gn=String(Ct.text).charAt(0);"0"!==gn&&"1"!==gn||("y"===Et._id.charAt(0)?Ct.dx-=Ct.fontSize/4:(Ct.dy+=Ct.fontSize/2,Ct.dx+=(Et.range[1]>Et.range[0]?1:-1)*Ct.fontSize*(zt<0?.5:.25)))}}(Me,Je,0,it,At):"category"===yt?(Ct=Je,void 0===(Ne=Me._categories[Math.round(Ct.x)])&&(Ne=""),Ct.text=String(Ne)):"multicategory"===yt?function(Et,Ct,Ne){var et=Math.round(Ct.x),dt=Et._categories[et]||[],Mt=void 0===dt[1]?"":String(dt[1]),zt=void 0===dt[0]?"":String(dt[0]);Ne?Ct.text=zt+" - "+Mt:(Ct.text=Mt,Ct.text2=zt)}(Me,Je,Se):dn(Me)?function(Et,Ct,Ne,et,dt){if("radians"!==Et.thetaunit||Ne)Ct.text=$e(Ct.x,Et,dt,et);else{var Mt=Ct.x/180;if(0===Mt)Ct.text="0";else{var zt=function(un){function Qt(sn,vn){return Math.abs(sn-vn)<=1e-6}var kn=function(sn){for(var vn=1;!Qt(Math.round(sn*vn)/vn,sn);)vn*=10;return vn}(un),qn=un*kn,gn=Math.abs(function sn(vn,pn){return Qt(pn,0)?vn:sn(pn,vn%pn)}(qn,kn));return[Math.round(qn/gn),Math.round(kn/gn)]}(Mt);if(zt[1]>=100)Ct.text=$e(e.deg2rad(Ct.x),Et,dt,et);else{var Xt=Ct.x<0;Ct.text=1===zt[1]?1===zt[0]?"\u03c0":zt[0]+"\u03c0":["<sup>",zt[0],"</sup>","\u2044","<sub>",zt[1],"</sub>","\u03c0"].join(""),Xt&&(Ct.text=D+Ct.text)}}}}(Me,Je,Se,it,At):function(Et,Ct,Ne,et,dt){"never"===dt?dt="":"all"===Et.showexponent&&Math.abs(Ct.x/Et.dtick)<1e-6&&(dt="hide"),Ct.text=$e(Ct.x,Et,dt,et)}(Me,Je,0,it,At),je||(Me.tickprefix&&!gt(Me.showtickprefix)&&(Je.text=Me.tickprefix+Je.text),Me.ticksuffix&&!gt(Me.showticksuffix)&&(Je.text+=Me.ticksuffix)),"boundaries"===Me.tickson||Me.showdividers){var Zt=function(Et){var Ct=Me.l2p(Et);return Ct>=0&&Ct<=Me._length?Et:null};Je.xbnd=[Zt(Je.x-.5),Zt(Je.x+Me.dtick-.5)]}return Je},U.hoverLabelText=function(Me,Ee,Se){Se&&(Me=e.extendFlat({},Me,{hoverformat:Se}));var je=Array.isArray(Ee)?Ee[0]:Ee,qe=Array.isArray(Ee)?Ee[1]:void 0;if(void 0!==qe&&qe!==je)return U.hoverLabelText(Me,je,Se)+" - "+U.hoverLabelText(Me,qe,Se);var Je="log"===Me.type&&je<=0,at=U.tickText(Me,Me.c2l(Je?-je:je),"hover").text;return Je?0===je?"0":D+at:at};var Ke=["f","p","n","\u03bc","m","","k","M","G","T"];function st(Me){return"SI"===Me||"B"===Me}function Ve(Me){return Me>14||Me<-15}function $e(Me,Ee,Se,je){var qe=Me<0,Je=Ee._tickround,at=Se||Ee.exponentformat||"B",it=Ee._tickexponent,yt=U.getTickFormat(Ee),vt=Ee.separatethousands;if(je){var Ut={exponentformat:at,minexponent:Ee.minexponent,dtick:"none"===Ee.showexponent?Ee.dtick:m(Me)&&Math.abs(Me)||1,range:"none"===Ee.showexponent?Ee.range.map(Ee.r2d):[0,Me||1]};Ue(Ut),Je=(Number(Ut._tickround)||0)+4,it=Ut._tickexponent,Ee.hoverformat&&(yt=Ee.hoverformat)}if(yt)return Ee._numFormat(yt)(Me).replace(/-/g,D);var Wt,gt=Math.pow(10,-Je)/2;if("none"===at&&(it=0),(Me=Math.abs(Me))<gt)Me="0",qe=!1;else{if(Me+=gt,it&&(Me*=Math.pow(10,-it),Je+=it),0===Je)Me=String(Math.floor(Me));else if(Je<0){Me=(Me=String(Math.round(Me))).substr(0,Me.length+Je);for(var At=Je;At<0;At++)Me+="0"}else{var Zt=(Me=String(Me)).indexOf(".")+1;Zt&&(Me=Me.substr(0,Zt+Je).replace(/\.?0+$/,""))}Me=e.numSeparate(Me,Ee._separators,vt)}return it&&"hide"!==at&&(st(at)&&Ve(it)&&(at="power"),Wt=it<0?D+-it:"power"!==at?"+"+it:String(it),"e"===at||"E"===at?Me+=at+Wt:"power"===at?Me+="\xd710<sup>"+Wt+"</sup>":"B"===at&&9===it?Me+="B":st(at)&&(Me+=Ke[it/3+5])),qe?D+Me:Me}function Qe(Me,Ee){for(var Se=[],je={},qe=0;qe<Ee.length;qe++){var Je=Ee[qe];je[Je.text2]?je[Je.text2].push(Je.x):je[Je.text2]=[Je.x]}for(var at in je)Se.push(He(Me,e.interp(je[at],.5),at));return Se}function tt(Me){return void 0!==Me.periodX?Me.periodX:Me.x}function ut(Me){return[Me.text,Me.x,Me.axInfo,Me.font,Me.fontSize,Me.fontColor].join("_")}function xt(Me){var Ee=Me.title.font.size,Se=(Me.title.text.match(n.BR_TAG_ALL)||[]).length;return Me.title.hasOwnProperty("standoff")?Se?Ee*($+Se*re):Ee*$:Se?Ee*(Se+1)*re:Ee}function kt(Me,Ee){var Se=Me.l2p(Ee);return Se>1&&Se<Me._length-1}function Bt(Me){var Ee=g.select(Me),Se=Ee.select(".text-math-group");return Se.empty()?Ee.select("text"):Se}function Rt(Me){return Me._id+".automargin"}function ft(Me){return Rt(Me)+".mirror"}function lt(Me){return Me._id+".rangeslider"}function Ft(Me,Ee){for(var Se=0;Se<Ee.length;Se++)-1===Me.indexOf(Ee[Se])&&Me.push(Ee[Se])}function Jt(Me,Ee,Se){var je,qe,Je=[],at=[],it=Me.layout;for(je=0;je<Ee.length;je++)Je.push(U.getFromId(Me,Ee[je]));for(je=0;je<Se.length;je++)at.push(U.getFromId(Me,Se[je]));var yt=Object.keys(u),vt=["anchor","domain","overlaying","position","side","tickangle","editType"],Ut=["linear","log"];for(je=0;je<yt.length;je++){var Wt=yt[je],gt=Je[0][Wt],At=at[0][Wt],Zt=!0,Et=!1,Ct=!1;if("_"!==Wt.charAt(0)&&"function"!=typeof gt&&-1===vt.indexOf(Wt)){for(qe=1;qe<Je.length&&Zt;qe++){var Ne=Je[qe][Wt];"type"===Wt&&-1!==Ut.indexOf(gt)&&-1!==Ut.indexOf(Ne)&&gt!==Ne?Et=!0:Ne!==gt&&(Zt=!1)}for(qe=1;qe<at.length&&Zt;qe++){var et=at[qe][Wt];"type"===Wt&&-1!==Ut.indexOf(At)&&-1!==Ut.indexOf(et)&&At!==et?Ct=!0:at[qe][Wt]!==At&&(Zt=!1)}Zt&&(Et&&(it[Je[0]._name].type="linear"),Ct&&(it[at[0]._name].type="linear"),ln(it,Wt,Je,at,Me._fullLayout._dfltTitle))}}for(je=0;je<Me._fullLayout.annotations.length;je++){var dt=Me._fullLayout.annotations[je];-1!==Ee.indexOf(dt.xref)&&-1!==Se.indexOf(dt.yref)&&e.swapAttrs(it.annotations[je],["?"])}}function ln(Me,Ee,Se,je,qe){var Je,at=e.nestedProperty,it=at(Me[Se[0]._name],Ee).get(),yt=at(Me[je[0]._name],Ee).get();for("title"===Ee&&(it&&it.text===qe.x&&(it.text=qe.y),yt&&yt.text===qe.y&&(yt.text=qe.x)),Je=0;Je<Se.length;Je++)at(Me,Se[Je]._name+"."+Ee).set(yt);for(Je=0;Je<je.length;Je++)at(Me,je[Je]._name+"."+Ee).set(it)}function dn(Me){return"angularaxis"===Me._id}function cn(Me,Ee){for(var Se=Ee._rangebreaks.length,je=0;je<Se;je++){var qe=Ee._rangebreaks[je];if(Me>=qe.min&&Me<qe.max)return qe.max}return Me}function Tn(Me){return-1!==(Me.ticklabelposition||"").indexOf("inside")}function nn(Me,Ee){Tn(Me._anchorAxis||{})&&Me._hideCounterAxisInsideTickLabels&&Me._hideCounterAxisInsideTickLabels(Ee)}U.getTickFormat=function(Me){var Ee,Se,je,qe,Je,at,it,yt,gt,At,Zt,Et,Ct,Ne;function vt(gt){return"string"!=typeof gt?gt:Number(gt.replace("M",""))*k}function Ut(gt,At){var Zt=["L","D"];if(typeof gt==typeof At){if("number"==typeof gt)return gt-At;var Et=Zt.indexOf(gt.charAt(0)),Ct=Zt.indexOf(At.charAt(0));return Et===Ct?Number(gt.replace(/(L|D)/g,""))-Number(At.replace(/(L|D)/g,"")):Et-Ct}return"number"==typeof gt?1:-1}if(Me.tickformatstops&&Me.tickformatstops.length>0)switch(Me.type){case"date":case"linear":for(Ee=0;Ee<Me.tickformatstops.length;Ee++)if((je=Me.tickformatstops[Ee]).enabled&&(qe=Me.dtick,at=void 0,void 0,void 0,at=vt||function(gt){return gt},yt=(Je=je.dtickrange)[1],(!(it=Je[0])&&"number"!=typeof it||at(it)<=at(qe))&&(!yt&&"number"!=typeof yt||at(yt)>=at(qe)))){Se=je;break}break;case"log":for(Ee=0;Ee<Me.tickformatstops.length;Ee++)if((je=Me.tickformatstops[Ee]).enabled&&(Zt=void 0,Et=void 0,Ct=void 0,Ne=void 0,Zt=null===(At=je.dtickrange)[0],Et=null===At[1],Ct=Ut(gt=Me.dtick,At[0])>=0,Ne=Ut(gt,At[1])<=0,(Zt||Ct)&&(Et||Ne))){Se=je;break}}return Se?Se.value:Me.tickformat},U.getSubplots=function(Me,Ee){var Se=Me._fullLayout._subplots,je=Se.cartesian.concat(Se.gl2d||[]),qe=Ee?U.findSubplotsWithAxis(je,Ee):je;return qe.sort(function(Je,at){var it=Je.substr(1).split("y"),yt=at.substr(1).split("y");return it[0]===yt[0]?+it[1]-+yt[1]:+it[0]-+yt[0]}),qe},U.findSubplotsWithAxis=function(Me,Ee){for(var Se=new RegExp("x"===Ee._id.charAt(0)?"^"+Ee._id+"y":Ee._id+"$"),je=[],qe=0;qe<Me.length;qe++){var Je=Me[qe];Se.test(Je)&&je.push(Je)}return je},U.makeClipPaths=function(Me){var Ee=Me._fullLayout;if(!Ee._hasOnlyLargeSploms){var Se,je,qe={_offset:0,_length:Ee.width,_id:""},Je={_offset:0,_length:Ee.height,_id:""},at=U.list(Me,"x",!0),it=U.list(Me,"y",!0),yt=[];for(Se=0;Se<at.length;Se++)for(yt.push({x:at[Se],y:Je}),je=0;je<it.length;je++)0===Se&&yt.push({x:qe,y:it[je]}),yt.push({x:at[Se],y:it[je]});var vt=Ee._clips.selectAll(".axesclip").data(yt,function(Ut){return Ut.x._id+Ut.y._id});vt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Ut){return"clip"+Ee._uid+Ut.x._id+Ut.y._id}).append("rect"),vt.exit().remove(),vt.each(function(Ut){g.select(this).select("rect").attr({x:Ut.x._offset||0,y:Ut.y._offset||0,width:Ut.x._length||1,height:Ut.y._length||1})})}},U.draw=function(Me,Ee,Se){var je=Me._fullLayout;"redraw"===Ee&&je._paper.selectAll("g.subplot").each(function(Je){var it=je._plots[Je[0]];if(it){var yt=it.xaxis,vt=it.yaxis;it.xaxislayer.selectAll("."+yt._id+"tick").remove(),it.yaxislayer.selectAll("."+vt._id+"tick").remove(),it.xaxislayer.selectAll("."+yt._id+"tick2").remove(),it.yaxislayer.selectAll("."+vt._id+"tick2").remove(),it.xaxislayer.selectAll("."+yt._id+"divider").remove(),it.yaxislayer.selectAll("."+vt._id+"divider").remove(),it.minorGridlayer&&it.minorGridlayer.selectAll("path").remove(),it.gridlayer&&it.gridlayer.selectAll("path").remove(),it.zerolinelayer&&it.zerolinelayer.selectAll("path").remove(),je._infolayer.select(".g-"+yt._id+"title").remove(),je._infolayer.select(".g-"+vt._id+"title").remove()}});var qe=Ee&&"redraw"!==Ee?Ee:U.listIds(Me);return e.syncOrAsync(qe.map(function(Je){return function(){if(Je){var at=U.getFromId(Me,Je),it=U.drawOne(Me,at,Se);return at._r=at.range.slice(),at._rl=e.simpleMap(at._r,at.r2l),it}}}))},U.drawOne=function(Me,Ee,Se){var je,qe,Je;Se=Se||{},Ee.setScale();var at=Me._fullLayout,it=Ee._id,yt=it.charAt(0),vt=U.counterLetter(it),Ut=at._plots[Ee._mainSubplot];if(Ut){var Wt=Ut[yt+"axislayer"],gt=Ee._mainLinePosition,At=Ee._mainMirrorPosition,Zt=Ee._vals=U.calcTicks(Ee),Et=[Ee.mirror,gt,At].join("_");for(je=0;je<Zt.length;je++)Zt[je].axInfo=Et;Ee._selections={},Ee._tickAngles&&(Ee._prevTickAngles=Ee._tickAngles),Ee._tickAngles={},Ee._depth=null;var Ct={};if(Ee.visible){var Ne,et,dt=U.makeTransTickFn(Ee),Mt=U.makeTransTickLabelFn(Ee),zt="inside"===Ee.ticks,Xt="outside"===Ee.ticks;if("boundaries"===Ee.tickson){var un=function(Pr,vr){var hn,Jn=[],jt=function(fn,Sn){var Kn=fn.xbnd[Sn];null!==Kn&&Jn.push(e.extendFlat({},fn,{x:Kn}))};if(vr.length){for(hn=0;hn<vr.length;hn++)jt(vr[hn],0);jt(vr[hn-1],1)}return Jn}(0,Zt);et=U.clipEnds(Ee,un),Ne=zt?et:un}else et=U.clipEnds(Ee,Zt),Ne=zt&&"period"!==Ee.ticklabelmode?et:Zt;var Qt,kn=Ee._gridVals=et,qn=function(Pr,vr){var hn,Jn,jt=[],fn=vr.length&&vr[vr.length-1].x<vr[0].x,Sn=function(Wn,Pn){var Un=Wn.xbnd[Pn];null!==Un&&jt.push(e.extendFlat({},Wn,{x:Un}))};if(Pr.showdividers&&vr.length){for(hn=0;hn<vr.length;hn++){var Kn=vr[hn];Kn.text2!==Jn&&Sn(Kn,fn?1:0),Jn=Kn.text2}Sn(vr[hn-1],fn?0:1)}return jt}(Ee,Zt);if(!at._hasOnlyLargeSploms){var gn=Ee._subplotsWith,sn={};for(je=0;je<gn.length;je++){var vn=(Je=at._plots[qe=gn[je]])[vt+"axis"],pn=vn._mainAxis._id;if(!sn[pn]){sn[pn]=1;var Mn="x"===yt?"M0,"+vn._offset+"v"+vn._length:"M"+vn._offset+",0h"+vn._length;U.drawGrid(Me,Ee,{vals:kn,counterAxis:vn,layer:Je.gridlayer.select("."+it),minorLayer:Je.minorGridlayer.select("."+it),path:Mn,transFn:dt}),U.drawZeroLine(Me,Ee,{counterAxis:vn,layer:Je.zerolinelayer,path:Mn,transFn:dt})}}}var Rn=U.getTickSigns(Ee),Xn=U.getTickSigns(Ee,"minor");if(Ee.ticks||Ee.minor&&Ee.minor.ticks){var Hn,rr,er,Ir,Or=U.makeTickPath(Ee,gt,Rn[2]),ni=U.makeTickPath(Ee,gt,Xn[2],{minor:!0});if(Ee._anchorAxis&&Ee.mirror&&!0!==Ee.mirror?(Hn=U.makeTickPath(Ee,At,Rn[3]),rr=U.makeTickPath(Ee,At,Xn[3],{minor:!0}),er=Or+Hn,Ir=ni+rr):(Hn="",rr="",er=Or,Ir=ni),Ee.showdividers&&Xt&&"boundaries"===Ee.tickson){var Br={};for(je=0;je<qn.length;je++)Br[qn[je].x]=1;Qt=function(Pr){return Br[Pr.x]?Hn:er}}else Qt=function(Pr){return Pr.minor?Ir:er}}if(U.drawTicks(Me,Ee,{vals:Ne,layer:Wt,path:Qt,transFn:dt}),"allticks"===Ee.mirror){var Dr=Object.keys(Ee._linepositions||{});for(je=0;je<Dr.length;je++){Je=at._plots[qe=Dr[je]];var Rr=Ee._linepositions[qe]||[],$n=Rr[1],Mr=Rr[2],br=U.makeTickPath(Ee,Rr[0],Mr?Rn[0]:Xn[0],{minor:Mr})+U.makeTickPath(Ee,$n,Mr?Rn[1]:Xn[1],{minor:Mr});U.drawTicks(Me,Ee,{vals:Ne,layer:Je[yt+"axislayer"],path:br,transFn:dt})}}var ar=[];if(ar.push(function(){return U.drawLabels(Me,Ee,{vals:Zt,layer:Wt,plotinfo:Je,transFn:Mt,labelFns:U.makeLabelFns(Ee,gt)})}),"multicategory"===Ee.type){var si={x:2,y:10}[yt];ar.push(function(){var Pr={x:"height",y:"width"}[yt],vr=Cr()[Pr]+si+(Ee._tickAngles[it+"tick"]?Ee.tickfont.size*re:0);return U.drawLabels(Me,Ee,{vals:Qe(Ee,Zt),layer:Wt,cls:it+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:dt,labelFns:U.makeLabelFns(Ee,gt+vr*Rn[4])})}),ar.push(function(){return Ee._depth=Rn[4]*(Cr("tick2")[Ee.side]-gt),Pr=Me,vr=Ee,jt=(hn={vals:qn,layer:Wt,path:U.makeTickPath(Ee,gt,Rn[4],{len:Ee._depth}),transFn:dt}).vals,(fn=hn.layer.selectAll("path."+(Jn=vr._id+"divider")).data(jt,ut)).exit().remove(),fn.enter().insert("path",":first-child").classed(Jn,1).classed("crisp",1).call(t.stroke,vr.dividercolor).style("stroke-width",p.crispRound(Pr,vr.dividerwidth,1)+"px"),void fn.attr("transform",hn.transFn).attr("d",hn.path);var Pr,vr,hn,Jn,jt,fn})}else Ee.title.hasOwnProperty("standoff")&&ar.push(function(){Ee._depth=Rn[4]*(Cr()[Ee.side]-gt)});var ri=y.getComponentMethod("rangeslider","isVisible")(Ee);return ar.push(function(){var Pr,vr,hn,Jn,jt=Ee.side.charAt(0),fn=H[Ee.side].charAt(0),Sn=U.getPxPosition(Me,Ee),Kn=Xt?Ee.ticklen:0;if((Ee.automargin||ri)&&("multicategory"===Ee.type?Pr=Cr("tick2"):(Pr=Cr(),"x"===yt&&"b"===jt&&(Ee._depth=Math.max(Pr.width>0?Pr.bottom-Sn:0,Kn)))),Ee.automargin){vr={x:0,y:0,r:0,l:0,t:0,b:0};var Wn=[0,1];if("x"===yt){if("b"===jt?vr[jt]=Ee._depth:(vr[jt]=Ee._depth=Math.max(Pr.width>0?Sn-Pr.top:0,Kn),Wn.reverse()),Pr.width>0){var Pn=Pr.right-(Ee._offset+Ee._length);Pn>0&&(vr.xr=1,vr.r=Pn);var Un=Ee._offset-Pr.left;Un>0&&(vr.xl=0,vr.l=Un)}}else if("l"===jt?vr[jt]=Ee._depth=Math.max(Pr.height>0?Sn-Pr.left:0,Kn):(vr[jt]=Ee._depth=Math.max(Pr.height>0?Pr.right-Sn:0,Kn),Wn.reverse()),Pr.height>0){var Cn=Pr.bottom-(Ee._offset+Ee._length);Cn>0&&(vr.yb=0,vr.b=Cn);var On=Ee._offset-Pr.top;On>0&&(vr.yt=1,vr.t=On)}vr[vt]="free"===Ee.anchor?Ee.position:Ee._anchorAxis.domain[Wn[0]],Ee.title.text!==at._dfltTitle[yt]&&(vr[jt]+=xt(Ee)+(Ee.title.standoff||0)),Ee.mirror&&"free"!==Ee.anchor&&((hn={x:0,y:0,r:0,l:0,t:0,b:0})[fn]=Ee.linewidth,Ee.mirror&&!0!==Ee.mirror&&(hn[fn]+=Kn),!0===Ee.mirror||"ticks"===Ee.mirror?hn[vt]=Ee._anchorAxis.domain[Wn[1]]:"all"!==Ee.mirror&&"allticks"!==Ee.mirror||(hn[vt]=[Ee._counterDomainMin,Ee._counterDomainMax][Wn[1]]))}ri&&(Jn=y.getComponentMethod("rangeslider","autoMarginOpts")(Me,Ee)),w.autoMargin(Me,Rt(Ee),vr),w.autoMargin(Me,ft(Ee),hn),w.autoMargin(Me,lt(Ee),Jn)}),Se.skipTitle||ri&&"bottom"===Ee.side||ar.push(function(){return function(Pr,vr){var hn,Jn=Pr._fullLayout,jt=vr._id,fn=jt.charAt(0),Sn=vr.title.font.size;if(vr.title.hasOwnProperty("standoff"))hn=vr._depth+vr.title.standoff+xt(vr);else{var Kn=Tn(vr);if("multicategory"===vr.type)hn=vr._depth;else{var Wn=1.5*Sn;Kn&&(Wn=.5*Sn,"outside"===vr.ticks&&(Wn+=vr.ticklen)),hn=10+Wn+(vr.linewidth?vr.linewidth-1:0)}Kn||(hn+="x"===fn?"top"===vr.side?Sn*(vr.showticklabels?1:0):Sn*(vr.showticklabels?1.5:.5):"right"===vr.side?Sn*(vr.showticklabels?1:.5):Sn*(vr.showticklabels?.5:0))}var Pn,Un,Cn,On,Fn=U.getPxPosition(Pr,vr);if("x"===fn?(Un=vr._offset+vr._length/2,Cn="top"===vr.side?Fn-hn:Fn+hn):(Cn=vr._offset+vr._length/2,Un="right"===vr.side?Fn+hn:Fn-hn,Pn={rotate:"-90",offset:0}),"multicategory"!==vr.type){var Gn=vr._selections[vr._id+"tick"];if(On={selection:Gn,side:vr.side},Gn&&Gn.node()&&Gn.node().parentNode){var or=p.getTranslate(Gn.node().parentNode);On.offsetLeft=or.x,On.offsetTop=or.y}vr.title.hasOwnProperty("standoff")&&(On.pad=0)}return a.draw(Pr,jt+"title",{propContainer:vr,propName:vr._name+".title.text",placeholder:Jn._dfltTitle[fn],avoid:On,transform:Pn,attributes:{x:Un,y:Cn,"text-anchor":"middle"}})}(Me,Ee)}),e.syncOrAsync(ar)}}function Cr(Pr){var hn,Jn,jt,fn,Sn,Kn,vr=it+(Pr||"tick");return Ct[vr]||(Ct[vr]=((hn=Ee)._selections[Jn=vr].size()?(jt=1/0,fn=-1/0,Sn=1/0,Kn=-1/0,hn._selections[Jn].each(function(){var Wn=Bt(this),Pn=p.bBox(Wn.node().parentNode);jt=Math.min(jt,Pn.top),fn=Math.max(fn,Pn.bottom),Sn=Math.min(Sn,Pn.left),Kn=Math.max(Kn,Pn.right)})):(jt=0,fn=0,Sn=0,Kn=0),{top:jt,bottom:fn,left:Sn,right:Kn,height:fn-jt,width:Kn-Sn})),Ct[vr]}},U.getTickSigns=function(Me,Ee){var Se=Me._id.charAt(0),qe=Me.side==={x:"top",y:"right"}[Se]?1:-1,Je=[-1,1,qe,-qe];return"inside"!==(Ee?(Me.minor||{}).ticks:Me.ticks)==("x"===Se)&&(Je=Je.map(function(at){return-at})),Me.side&&Je.push({l:-1,t:-1,r:1,b:1}[Me.side.charAt(0)]),Je},U.makeTransTickFn=function(Me){return"x"===Me._id.charAt(0)?function(Ee){return r(Me._offset+Me.l2p(Ee.x),0)}:function(Ee){return r(0,Me._offset+Me.l2p(Ee.x))}},U.makeTransTickLabelFn=function(Me){var Ee=function(qe){var Je=qe.ticklabelposition||"",at=function(Ne){return-1!==Je.indexOf(Ne)},it=at("top"),yt=at("left"),vt=at("right"),Ut=at("bottom"),Wt=at("inside"),gt=Ut||yt||it||vt;if(!gt&&!Wt)return[0,0];var At=qe.side,Zt=gt?(qe.tickwidth||0)/2:0,Et=3,Ct=qe.tickfont?qe.tickfont.size:12;return(Ut||it)&&(Zt+=Ct*$,Et+=(qe.linewidth||0)/2),(yt||vt)&&(Zt+=(qe.linewidth||0)/2,Et+=3),Wt&&"top"===At&&(Et-=Ct*(1-$)),(yt||it)&&(Zt=-Zt),"bottom"!==At&&"right"!==At||(Et=-Et),[gt?Zt:0,Wt?Et:0]}(Me),Se=Ee[0],je=Ee[1];return"x"===Me._id.charAt(0)?function(qe){return r(Se+Me._offset+Me.l2p(tt(qe)),je)}:function(qe){return r(je,Se+Me._offset+Me.l2p(tt(qe)))}},U.makeTickPath=function(Me,Ee,Se,je){je||(je={});var qe=je.minor;if(qe&&!Me.minor)return"";var Je=void 0!==je.len?je.len:qe?Me.minor.ticklen:Me.ticklen,at=Me._id.charAt(0),it=(Me.linewidth||1)/2;return"x"===at?"M0,"+(Ee+it*Se)+"v"+Je*Se:"M"+(Ee+it*Se)+",0h"+Je*Se},U.makeLabelFns=function(Me,Ee,Se){var je=Me.ticklabelposition||"",qe=function(gn){return-1!==je.indexOf(gn)},Je=qe("top"),at=qe("left"),it=qe("right"),yt=qe("bottom")||at||Je||it,vt=qe("inside"),Ut="inside"===je&&"inside"===Me.ticks||!vt&&"outside"===Me.ticks&&"boundaries"!==Me.tickson,Wt=0,gt=0,At=Ut?Me.ticklen:0;if(vt?At*=-1:yt&&(At=0),Ut&&(Wt+=At,Se)){var Zt=e.deg2rad(Se);Wt=At*Math.cos(Zt)+1,gt=At*Math.sin(Zt)}Me.showticklabels&&(Ut||Me.showline)&&(Wt+=.2*Me.tickfont.size);var Et,Ct,Ne,et,dt,Mt={labelStandoff:Wt+=(Me.linewidth||1)/2*(vt?-1:1),labelShift:gt},zt=0,Xt=Me.side,un=Me._id.charAt(0),Qt=Me.tickangle;if("x"===un)et=(dt=!vt&&"bottom"===Xt||vt&&"top"===Xt)?1:-1,vt&&(et*=-1),Et=gt*et,Ct=Ee+Wt*et,Ne=dt?1:-.2,90===Math.abs(Qt)&&(vt?Ne+=X:Ne=-90===Qt&&"bottom"===Xt?$:90===Qt&&"top"===Xt?X:.5,zt=X/2*(Qt/90)),Mt.xFn=function(gn){return gn.dx+Et+zt*gn.fontSize},Mt.yFn=function(gn){return gn.dy+Ct+gn.fontSize*Ne},Mt.anchorFn=function(gn,sn){if(yt){if(at)return"end";if(it)return"start"}return m(sn)&&0!==sn&&180!==sn?sn*et<0!==vt?"end":"start":"middle"},Mt.heightFn=function(gn,sn,vn){return sn<-60||sn>60?-.5*vn:"top"===Me.side!==vt?-vn:0};else if("y"===un){if(et=(dt=!vt&&"left"===Xt||vt&&"right"===Xt)?1:-1,vt&&(et*=-1),Et=Wt,Ct=gt*et,Ne=0,vt||90!==Math.abs(Qt)||(Ne=-90===Qt&&"left"===Xt||90===Qt&&"right"===Xt?$:.5),vt){var kn=m(Qt)?+Qt:0;if(0!==kn){var qn=e.deg2rad(kn);zt=Math.abs(Math.sin(qn))*$*et,Ne=0}}Mt.xFn=function(gn){return gn.dx+Ee-(Et+gn.fontSize*Ne)*et+zt*gn.fontSize},Mt.yFn=function(gn){return gn.dy+Ct+gn.fontSize*X},Mt.anchorFn=function(gn,sn){return m(sn)&&90===Math.abs(sn)?"middle":dt?"end":"start"},Mt.heightFn=function(gn,sn,vn){return"right"===Me.side&&(sn*=-1),sn<-30?-vn:sn<30?-.5*vn:0}}return Mt},U.drawTicks=function(Me,Ee,Se){Se=Se||{};var je=Ee._id+"tick",qe=[].concat(Ee.minor&&Ee.minor.ticks?Se.vals.filter(function(at){return at.minor&&!at.noTick}):[]).concat(Ee.ticks?Se.vals.filter(function(at){return!at.minor&&!at.noTick}):[]),Je=Se.layer.selectAll("path."+je).data(qe,ut);Je.exit().remove(),Je.enter().append("path").classed(je,1).classed("ticks",1).classed("crisp",!1!==Se.crisp).each(function(at){return t.stroke(g.select(this),at.minor?Ee.minor.tickcolor:Ee.tickcolor)}).style("stroke-width",function(at){return p.crispRound(Me,at.minor?Ee.minor.tickwidth:Ee.tickwidth,1)+"px"}).attr("d",Se.path).style("display",null),nn(Ee,[Y]),Je.attr("transform",Se.transFn)},U.drawGrid=function(Me,Ee,Se){Se=Se||{};var je=Ee._id+"grid",qe=Ee.minor&&Ee.minor.showgrid,Je=qe?Se.vals.filter(function(Ne){return Ne.minor}):[],at=Ee.showgrid?Se.vals.filter(function(Ne){return!Ne.minor}):[],it=Se.counterAxis;if(it&&U.shouldShowZeroLine(Me,Ee,it))for(var yt="array"===Ee.tickmode,vt=0;vt<at.length;vt++){var Ut=at[vt].x;if(yt?!Ut:Math.abs(Ut)<Ee.dtick/100){if(at=at.slice(0,vt).concat(at.slice(vt+1)),!yt)break;vt--}}Ee._gw=p.crispRound(Me,Ee.gridwidth,1);for(var Wt=qe?p.crispRound(Me,Ee.minor.gridwidth,1):0,gt=Se.layer,At=Se.minorLayer,Zt=1;Zt>=0;Zt--){var Et=Zt?gt:At;if(Et){var Ct=Et.selectAll("path."+je).data(Zt?at:Je,ut);Ct.exit().remove(),Ct.enter().append("path").classed(je,1).classed("crisp",!1!==Se.crisp),Ct.attr("transform",Se.transFn).attr("d",Se.path).each(function(Ne){return t.stroke(g.select(this),Ne.minor?Ee.minor.gridcolor:Ee.gridcolor||"#ddd")}).style("stroke-dasharray",function(Ne){return p.dashStyle(Ne.minor?Ee.minor.griddash:Ee.griddash,Ne.minor?Ee.minor.gridwidth:Ee.gridwidth)}).style("stroke-width",function(Ne){return(Ne.minor?Wt:Ee._gw)+"px"}).style("display",null),"function"==typeof Se.path&&Ct.attr("d",Se.path)}}nn(Ee,[j,W])},U.drawZeroLine=function(Me,Ee,Se){var je=Ee._id+"zl",qe=U.shouldShowZeroLine(Me,Ee,(Se=Se||Se).counterAxis),Je=Se.layer.selectAll("path."+je).data(qe?[{x:0,id:Ee._id}]:[]);Je.exit().remove(),Je.enter().append("path").classed(je,1).classed("zl",1).classed("crisp",!1!==Se.crisp).each(function(){Se.layer.selectAll("path").sort(function(at,it){return q(at.id,it.id)})}),Je.attr("transform",Se.transFn).attr("d",Se.path).call(t.stroke,Ee.zerolinecolor||t.defaultLine).style("stroke-width",p.crispRound(Me,Ee.zerolinewidth,Ee._gw||1)+"px").style("display",null),nn(Ee,[B])},U.drawLabels=function(Me,Ee,Se){Se=Se||{};var je=Me._fullLayout,qe=Ee._id,Je=qe.charAt(0),at=Se.cls||qe+"tick",it=Se.vals.filter(function(et){return et.text}),yt=Se.labelFns,vt=Se.secondary?0:Ee.tickangle,Ut=(Ee._prevTickAngles||{})[at],Wt=Se.layer.selectAll("g."+at).data(Ee.showticklabels?it:[],ut),gt=[];function At(et,dt){et.each(function(Mt){var zt=g.select(this),Xt=zt.select(".text-math-group"),un=yt.anchorFn(Mt,dt),Qt=Se.transFn.call(zt.node(),Mt)+(m(dt)&&0!=+dt?" rotate("+dt+","+yt.xFn(Mt)+","+(yt.yFn(Mt)-Mt.fontSize/2)+")":""),kn=n.lineCount(zt),qn=re*Mt.fontSize,gn=yt.heightFn(Mt,m(dt)?+dt:0,(kn-1)*qn);if(gn&&(Qt+=r(0,gn)),Xt.empty()){var sn=zt.select("text");sn.attr({transform:Qt,"text-anchor":un}),sn.style("opacity",1),Ee._adjustTickLabelsOverflow&&Ee._adjustTickLabelsOverflow()}else{var vn=p.bBox(Xt.node()).width*{end:-.5,start:.5}[un];Xt.attr("transform",Qt+r(vn,0))}})}Wt.enter().append("g").classed(at,1).append("text").attr("text-anchor","middle").each(function(et){var dt=g.select(this),Mt=Me._promises.length;dt.call(n.positionText,yt.xFn(et),yt.yFn(et)).call(p.font,et.font,et.fontSize,et.fontColor).text(et.text).call(n.convertToTspans,Me),Me._promises[Mt]?gt.push(Me._promises.pop().then(function(){At(dt,vt)})):At(dt,vt)}),nn(Ee,[Q]),Wt.exit().remove(),Se.repositionOnUpdate&&Wt.each(function(et){g.select(this).select("text").call(n.positionText,yt.xFn(et),yt.yFn(et))}),Ee._adjustTickLabelsOverflow=function(){var et=Ee.ticklabeloverflow;if(et&&"allow"!==et){var dt=-1!==et.indexOf("hide"),Mt="x"===Ee._id.charAt(0),zt=0,Xt=Mt?Me._fullLayout.width:Me._fullLayout.height;if(-1!==et.indexOf("domain")){var un=e.simpleMap(Ee.range,Ee.r2l);zt=Ee.l2p(un[0])+Ee._offset,Xt=Ee.l2p(un[1])+Ee._offset}var Qt=Math.min(zt,Xt),kn=Math.max(zt,Xt),qn=Ee.side,gn=1/0,sn=-1/0;for(var vn in Wt.each(function(Rn){var Xn=g.select(this);if(Xn.select(".text-math-group").empty()){var Hn=p.bBox(Xn.node()),rr=0;Mt?(Hn.right>kn||Hn.left<Qt)&&(rr=1):(Hn.bottom>kn||Hn.top+(Ee.tickangle?0:Rn.fontSize/4)<Qt)&&(rr=1);var er=Xn.select("text");rr?dt&&er.style("opacity",0):(er.style("opacity",1),gn="bottom"===qn||"right"===qn?Math.min(gn,Mt?Hn.top:Hn.left):-1/0,sn="top"===qn||"left"===qn?Math.max(sn,Mt?Hn.bottom:Hn.right):1/0)}}),je._plots){var pn=je._plots[vn];if(Ee._id===pn.xaxis._id||Ee._id===pn.yaxis._id){var Mn=Mt?pn.yaxis:pn.xaxis;Mn&&(Mn["_visibleLabelMin_"+Ee._id]=gn,Mn["_visibleLabelMax_"+Ee._id]=sn)}}}},Ee._hideCounterAxisInsideTickLabels=function(et){var dt="x"===Ee._id.charAt(0),Mt=[];for(var zt in je._plots){var Xt=je._plots[zt];Ee._id!==Xt.xaxis._id&&Ee._id!==Xt.yaxis._id||Mt.push(dt?Xt.yaxis:Xt.xaxis)}Mt.forEach(function(un,Qt){un&&Tn(un)&&(et||[B,W,j,Y,Q]).forEach(function(kn){var qn="tick"===kn.K&&"text"===kn.L&&"period"===Ee.ticklabelmode,gn=je._plots[Ee._mainSubplot];(kn.K===B.K?gn.zerolinelayer.selectAll("."+Ee._id+"zl"):kn.K===W.K?gn.minorGridlayer.selectAll("."+Ee._id):kn.K===j.K?gn.gridlayer.selectAll("."+Ee._id):gn[Ee._id.charAt(0)+"axislayer"]).each(function(){var sn=g.select(this);kn.L&&(sn=sn.selectAll(kn.L)),sn.each(function(vn){var pn=Ee.l2p(qn?tt(vn):vn.x)+Ee._offset,Mn=g.select(this);pn<Ee["_visibleLabelMax_"+un._id]&&pn>Ee["_visibleLabelMin_"+un._id]?Mn.style("display","none"):"tick"!==kn.K||Qt||Mn.style("display",null)})})})})},At(Wt,Ut+1?Ut:vt);var Zt=null;Ee._selections&&(Ee._selections[at]=Wt);var Et=[function(){return gt.length&&Promise.all(gt)}];Ee.automargin&&je._redrawFromAutoMarginCount&&90===Ut?(Zt=90,Et.push(function(){At(Wt,Ut)})):Et.push(function(){if(At(Wt,vt),it.length&&"x"===Je&&!m(vt)&&("log"!==Ee.type||"D"!==String(Ee.dtick).charAt(0))){Zt=0;var et,dt=0,Mt=[];if(Wt.each(function(Xn){dt=Math.max(dt,Xn.fontSize);var Hn=Ee.l2p(Xn.x),rr=Bt(this),er=p.bBox(rr.node());Mt.push({top:0,bottom:10,height:10,left:Hn-er.width/2,right:Hn+er.width/2+2,width:er.width+2})}),"boundaries"!==Ee.tickson&&!Ee.showdividers||Se.secondary){var zt=it.length,Xt=Math.abs((it[zt-1].x-it[0].x)*Ee._m)/(zt-1),un=Ee.ticklabelposition||"",Qt=function(Xn){return-1!==un.indexOf(Xn)},kn=Qt("top"),qn=Qt("left"),gn=Qt("right"),sn=Qt("bottom")||qn||kn||gn?(Ee.tickwidth||0)+6:0,vn=Xt<2.5*dt||"multicategory"===Ee.type||"realaxis"===Ee._name;for(et=0;et<Mt.length-1;et++)if(e.bBoxIntersect(Mt[et],Mt[et+1],sn)){Zt=vn?90:30;break}}else{var pn=2;for(Ee.ticks&&(pn+=Ee.tickwidth/2),et=0;et<Mt.length;et++){var Mn=it[et].xbnd,Rn=Mt[et];if(null!==Mn[0]&&Rn.left-Ee.l2p(Mn[0])<pn||null!==Mn[1]&&Ee.l2p(Mn[1])-Rn.right<pn){Zt=90;break}}}Zt&&At(Wt,Zt)}}),Ee._tickAngles&&Et.push(function(){Ee._tickAngles[at]=null===Zt?m(vt)?vt:0:Zt});var Ct=Ee._anchorAxis;Ct&&Ct.autorange&&Tn(Ee)&&!ee(je,Ee._id)&&(je._insideTickLabelsAutorange||(je._insideTickLabelsAutorange={}),je._insideTickLabelsAutorange[Ct._name+".autorange"]=Ct.autorange,Et.push(function(){Wt.each(function(et,dt){var Mt=Bt(this);Mt.select(".text-math-group").empty()&&(Ee._vals[dt].bb=p.bBox(Mt.node()))})}));var Ne=e.syncOrAsync(Et);return Ne&&Ne.then&&Me._promises.push(Ne),Ne},U.getPxPosition=function(Me,Ee){var Se,je=Me._fullLayout._size,qe=Ee._id.charAt(0),Je=Ee.side;return"free"!==Ee.anchor?Se=Ee._anchorAxis:"x"===qe?Se={_offset:je.t+(1-(Ee.position||0))*je.h,_length:0}:"y"===qe&&(Se={_offset:je.l+(Ee.position||0)*je.w,_length:0}),"top"===Je||"left"===Je?Se._offset:"bottom"===Je||"right"===Je?Se._offset+Se._length:void 0},U.shouldShowZeroLine=function(Me,Ee,Se){var je=e.simpleMap(Ee.range,Ee.r2l);return je[0]*je[1]<=0&&Ee.zeroline&&("linear"===Ee.type||"-"===Ee.type)&&!(Ee.rangebreaks&&Ee.maskBreaks(0)===L)&&(kt(Ee,0)||!function(qe,Je,at,it){var yt=at._mainAxis;if(yt){var vt=qe._fullLayout,Ut=Je._id.charAt(0),Wt=U.counterLetter(Je._id),gt=Je._offset+(Math.abs(it[0])<Math.abs(it[1])==("x"===Ut)?0:Je._length),Zt=vt._plots[at._mainSubplot];if(!(Zt.mainplotinfo||Zt).overlays.length)return At(at);for(var Et=U.list(qe,Wt),Ct=0;Ct<Et.length;Ct++){var Ne=Et[Ct];if(Ne._mainAxis===yt&&At(Ne))return!0}}function At(et){if(!et.showline||!et.linewidth)return!1;var dt=Math.max((et.linewidth+Je.zerolinewidth)/2,1);function Mt(un){return"number"==typeof un&&Math.abs(un-gt)<dt}if(Mt(et._mainLinePosition)||Mt(et._mainMirrorPosition))return!0;var zt=et._linepositions||{};for(var Xt in zt)if(Mt(zt[Xt][0])||Mt(zt[Xt][1]))return!0}}(Me,Ee,Se,je)||function(qe,Je){for(var at=qe._fullData,it=Je._mainSubplot,yt=Je._id.charAt(0),vt=0;vt<at.length;vt++){var Ut=at[vt];if(!0===Ut.visible&&Ut.xaxis+Ut.yaxis===it&&(y.traceIs(Ut,"bar-like")&&Ut.orientation==={x:"h",y:"v"}[yt]||Ut.fill&&Ut.fill.charAt(Ut.fill.length-1)===yt))return!0}return!1}(Me,Ee))},U.clipEnds=function(Me,Ee){return Ee.filter(function(Se){return kt(Me,Se.x)})},U.allowAutoMargin=function(Me){for(var Ee=U.list(Me,"",!0),Se=0;Se<Ee.length;Se++){var je=Ee[Se];je.automargin&&(w.allowAutoMargin(Me,Rt(je)),je.mirror&&w.allowAutoMargin(Me,ft(je))),y.getComponentMethod("rangeslider","isVisible")(je)&&w.allowAutoMargin(Me,lt(je))}},U.swap=function(Me,Ee){for(var Se=function(qe,Je){var at,it,yt=[];for(at=0;at<Je.length;at++){var vt=[],Ut=qe._fullData[Je[at]].xaxis,Wt=qe._fullData[Je[at]].yaxis;if(Ut&&Wt){for(it=0;it<yt.length;it++)-1===yt[it].x.indexOf(Ut)&&-1===yt[it].y.indexOf(Wt)||vt.push(it);if(vt.length){var gt,At=yt[vt[0]];if(vt.length>1)for(it=1;it<vt.length;it++)Ft(At.x,(gt=yt[vt[it]]).x),Ft(At.y,gt.y);Ft(At.x,[Ut]),Ft(At.y,[Wt])}else yt.push({x:[Ut],y:[Wt]})}}return yt}(Me,Ee),je=0;je<Se.length;je++)Jt(Me,Se[je].x,Se[je].y)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib"),w=x("../../constants/numerical").BADNUM,y=m.isArrayOrTypedArray,e=m.isDateTime,r=m.cleanNumber,n=Math.round;function a(p,u){return u?g(p):"number"==typeof p}function t(p){return Math.max(1,(p-1)/1e3)}oe.exports=function(p,u,i){var _,c=p,f=i.noMultiCategory;if(y(c)&&!c.length)return"-";if(!f&&y((_=c)[0])&&y(_[1]))return"multicategory";if(f&&Array.isArray(c[0])){for(var l=[],h=0;h<c.length;h++)if(y(c[h]))for(var d=0;d<c[h].length;d++)l.push(c[h][d]);c=l}if(function(_,s){for(var k=_.length,M=t(k),A=0,E=0,I={},C=0;C<k;C+=M){var O=_[n(C)],D=String(O);I[D]||(I[D]=1,e(O,s)&&A++,g(O)&&E++)}return A>2*E}(c,u))return"date";var o="strict"!==i.autotypenumbers;return function(_,s){for(var k=_.length,M=t(k),A=0,E=0,I={},C=0;C<k;C+=M){var O=_[n(C)],D=String(O);if(!I[D]){I[D]=1;var L=typeof O;"boolean"===L?E++:(s?r(O)!==w:"number"===L)?A++:"string"===L&&E++}}return E>2*A}(c,o)?"category":function(_,s){for(var k=_.length,M=0;M<k;M++)if(a(_[M],s))return!0;return!1}(c,o)?"linear":"-"}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../registry"),w=x("../../lib"),y=x("../../plot_api/plot_template"),e=x("../array_container_defaults"),r=x("./layout_attributes"),n=x("./tick_value_defaults"),a=x("./tick_mark_defaults"),t=x("./tick_label_defaults"),p=x("./prefix_suffix_defaults"),u=x("./category_order_defaults"),i=x("./line_grid_defaults"),c=x("./set_convert"),f=x("./constants").WEEKDAY_PATTERN,l=x("./constants").HOUR_PATTERN;function h(_,s,k){function M(L,B){return w.coerce(_,s,r.rangebreaks,L,B)}if(M("enabled")){var A=M("bounds");if(A&&A.length>=2){var E,I,C="";if(2===A.length)for(E=0;E<2;E++)if(I=o(A[E])){C=f;break}var R=M("pattern",C);if(R===f)for(E=0;E<2;E++)(I=o(A[E]))&&(s.bounds[E]=A[E]=I-1);if(R)for(E=0;E<2;E++)switch(I=A[E],R){case f:if(!g(I)||(I=+I)!==Math.floor(I)||I<0||I>=7)return void(s.enabled=!1);s.bounds[E]=A[E]=I;break;case l:if(!g(I)||(I=+I)<0||I>24)return void(s.enabled=!1);s.bounds[E]=A[E]=I}if(!1===k.autorange){var O=k.range;if(O[0]<O[1]){if(A[0]<O[0]&&A[1]>O[1])return void(s.enabled=!1)}else if(A[0]>O[0]&&A[1]<O[1])return void(s.enabled=!1)}}else{var D=M("values");if(!D||!D.length)return void(s.enabled=!1);M("dvalue")}}}oe.exports=function(_,s,k,M,A){var E,I=M.letter,C=M.font||{},R=M.splomStash||{},O=k("visible",!M.visibleDflt),L=s.type||(s._template||{}).type||"-";"date"===L&&(m.getComponentMethod("calendars","handleDefaults")(_,s,"calendar",M.calendar),M.noTicklabelmode||(E=k("ticklabelmode")));var B="";M.noTicklabelposition&&"multicategory"!==L||(B=w.coerce(_,s,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===E?["outside","inside"]:"x"===I?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),M.noTicklabeloverflow||k("ticklabeloverflow",-1!==B.indexOf("inside")?"hide past domain":"category"===L||"multicategory"===L?"allow":"hide past div"),c(s,A);var j=!s.isValidRange(_.range);j&&M.reverseDflt&&(j="reversed"),!k("autorange",j)||"linear"!==L&&"-"!==L||k("rangemode"),k("range"),s.cleanRange(),u(_,s,k,M),"category"===L||M.noHover||k("hoverformat");var W=k("color"),Y=W!==r.color.dflt?W:C.color,Q=R.label||A._dfltTitle[I];if(p(_,s,k,L,M),!O)return s;k("title.text",Q),w.coerceFont(k,"title.font",{family:C.family,size:w.bigFont(C.size),color:Y}),n(_,s,k,L);var ne=M.hasMinor;if(ne&&(y.newContainer(s,"minor"),n(_,s,k,L,{isMinor:!0})),t(_,s,k,L,M),a(_,s,k,M),ne){var X=M.isMinor;M.isMinor=!0,a(_,s,k,M),M.isMinor=X}i(_,s,k,{dfltColor:W,bgColor:M.bgColor,showGrid:M.showGrid,hasMinor:ne,attributes:r}),!ne||s.minor.ticks||s.minor.showgrid||delete s.minor,(s.showline||s.ticks)&&k("mirror"),M.automargin&&k("automargin");var $,re="multicategory"===L;if(M.noTickson||"category"!==L&&!re||!s.ticks&&!s.showgrid||(re&&($="boundaries"),"boundaries"===k("tickson",$)&&delete s.ticklabelposition),re&&k("showdividers")&&(k("dividercolor"),k("dividerwidth")),"date"===L)if(e(_,s,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:h}),s.rangebreaks.length){for(var H=0;H<s.rangebreaks.length;H++)if(s.rangebreaks[H].pattern===f){s._hasDayOfWeekBreaks=!0;break}if(c(s,A),A._has("scattergl")||A._has("splom"))for(var U=0;U<M.data.length;U++){var G=M.data[U];"scattergl"!==G.type&&"splom"!==G.type||(G.visible=!1,w.warn(G.type+" traces do not work on axes with rangebreaks. Setting trace "+G.index+" to `visible: false`."))}}else delete s.rangebreaks;return s};var d={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function o(_){if("string"==typeof _)return d[_.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(x,oe,ae){"use strict";var g=x("../../constants/docs"),m=g.FORMAT_LINK,w=g.DATE_FORMAT_LINK;function y(r,n){return["Sets the "+r+" formatting rule"+(n?"for `"+n+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+m+"."].join(" ")}function e(r,n){return y(r,n)+[" And for dates see: "+w+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}oe.exports={axisHoverFormat:function(r,n){return{valType:"string",dflt:"",editType:"none",description:(n?y:e)("hover text",r)+["By default the values are formatted using "+(n?"generic number format":"`"+r+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:y,descriptionWithDates:e}},{"../../constants/docs":474}],558:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("./constants");function w(y,e){if(e&&e.length)for(var r=0;r<e.length;r++)if(e[r][y])return!0;return!1}ae.id2name=function(y){if("string"==typeof y&&y.match(m.AX_ID_PATTERN)){var e=y.split(" ")[0].substr(1);return"1"===e&&(e=""),y.charAt(0)+"axis"+e}},ae.name2id=function(y){if(y.match(m.AX_NAME_PATTERN)){var e=y.substr(5);return"1"===e&&(e=""),y.charAt(0)+e}},ae.cleanId=function(y,e,r){var n=/( domain)$/.test(y);if("string"==typeof y&&y.match(m.AX_ID_PATTERN)&&(!e||y.charAt(0)===e)&&(!n||r)){var a=y.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===a&&(a=""),y.charAt(0)+a+(n&&r?" domain":"")}},ae.list=function(y,e,r){var n=y._fullLayout;if(!n)return[];var a,t=ae.listIds(y,e),p=new Array(t.length);for(a=0;a<t.length;a++){var u=t[a];p[a]=n[u.charAt(0)+"axis"+u.substr(1)]}if(!r){var i=n._subplots.gl3d||[];for(a=0;a<i.length;a++){var c=n[i[a]];e?p.push(c[e+"axis"]):p.push(c.xaxis,c.yaxis,c.zaxis)}}return p},ae.listIds=function(y,e){var r=y._fullLayout;if(!r)return[];var n=r._subplots;return e?n[e+"axis"]:n.xaxis.concat(n.yaxis)},ae.getFromId=function(y,e,r){var n=y._fullLayout;return e=void 0===e||"string"!=typeof e?e:e.replace(" domain",""),"x"===r?e=e.replace(/y[0-9]*/,""):"y"===r&&(e=e.replace(/x[0-9]*/,"")),n[ae.id2name(e)]},ae.getFromTrace=function(y,e,r){var n=y._fullLayout,a=null;if(g.traceIs(e,"gl3d")){var t=e.scene;"scene"===t.substr(0,5)&&(a=n[t][r+"axis"])}else a=ae.getFromId(y,e[r+"axis"]||r);return a},ae.idSort=function(y,e){var r=y.charAt(0),n=e.charAt(0);return r!==n?r>n?1:-1:+(y.substr(1)||1)-+(e.substr(1)||1)},ae.ref2id=function(y){return!!/^[xyz]/.test(y)&&y.split(" ")[0]},ae.isLinked=function(y,e){return w(e,y._axisMatchGroups)||w(e,y._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w,y){if("category"===m.type){var e,r=g.categoryarray,n=Array.isArray(r)&&r.length>0;n&&(e="array");var a,t=w("categoryorder",e);"array"===t&&(a=w("categoryarray")),n||"array"!==t||(t=m.categoryorder="trace"),"trace"===t?m._initialCategories=[]:"array"===t?m._initialCategories=a.slice():(a=function(p,u){var i,c,f,l=u.dataAttr||p._id.charAt(0),h={};if(u.axData)i=u.axData;else for(i=[],c=0;c<u.data.length;c++){var d=u.data[c];d[l+"axis"]===p._id&&i.push(d)}for(c=0;c<i.length;c++){var o=i[c][l];for(f=0;f<o.length;f++){var _=o[f];null!=_&&(h[_]=1)}}return Object.keys(h)}(m,y).sort(),"category ascending"===t?m._initialCategories=a:"category descending"===t&&(m._initialCategories=a.reverse()))}}},{}],560:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib"),w=x("../../constants/numerical"),y=w.ONEDAY,e=w.ONEWEEK;ae.dtick=function(r,n){var a="log"===n,t="date"===n,p="category"===n,u=t?y:1;if(!r)return u;if(g(r))return(r=Number(r))<=0?u:p?Math.max(1,Math.round(r)):t?Math.max(.1,r):r;if("string"!=typeof r||!t&&!a)return u;var i=r.charAt(0),c=r.substr(1);return(c=g(c)?Number(c):0)<=0||!(t&&"M"===i&&c===Math.round(c)||a&&"L"===i||a&&"D"===i&&(1===c||2===c))?u:r},ae.tick0=function(r,n,a,t){return"date"===n?m.cleanDate(r,m.dateTick0(a,t%e==0?1:0)):"D1"!==t&&"D2"!==t?g(r)?Number(r):0:void 0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(x,oe,ae){"use strict";var g=x("../../lib/regex").counter;oe.exports={idRegex:{x:g("x","( domain)?"),y:g("y","( domain)?")},attrRegex:g("[xy]axis"),xAxisMatch:g("xaxis"),yAxisMatch:g("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./autorange"),w=x("./axis_ids").id2name,y=x("./layout_attributes"),e=x("./scale_zoom"),r=x("./set_convert"),n=x("../../constants/numerical").ALMOST_EQUAL,a=x("../../constants/alignment").FROM_BL;function t(h,d,o){var _=o.axIds,s=o.layoutOut,k=o.hasImage,M=s._axisConstraintGroups,A=s._axisMatchGroups,E=d._id,I=E.charAt(0),C=((s._splomAxes||{})[I]||{})[E]||{},R=d._id,O="x"===R.charAt(0);function D(ie,q){return g.coerce(h,d,y,ie,q)}d._matchGroup=null,d._constraintGroup=null,D("constrain",k?"domain":"range"),g.coerce(h,d,{constraintoward:{valType:"enumerated",values:O?["left","center","right"]:["bottom","middle","top"],dflt:O?"center":"middle"}},"constraintoward");var L,B,j=d.type,W=[];for(L=0;L<_.length;L++)(B=_[L])!==R&&s[w(B)].type===j&&W.push(B);var Y=u(M,R);if(Y){var Q=[];for(L=0;L<W.length;L++)Y[B=W[L]]||Q.push(B);W=Q}var ne,X,$=W.length;$&&(h.matches||C.matches)&&(ne=g.coerce(h,d,{matches:{valType:"enumerated",values:W,dflt:-1!==W.indexOf(C.matches)?C.matches:void 0}},"matches"));var re=k&&!O?d.anchor:void 0;if($&&!ne&&(h.scaleanchor||re)&&(X=g.coerce(h,d,{scaleanchor:{valType:"enumerated",values:W}},"scaleanchor",re)),ne){d._matchGroup=i(A,R,ne,1);var H=s[w(ne)],U=p(s,d)/p(s,H);O!==("x"===ne.charAt(0))&&(U=(O?"x":"y")+U),i(M,R,ne,U)}else h.matches&&-1!==_.indexOf(h.matches)&&g.warn("ignored "+d._name+'.matches: "'+h.matches+'" to avoid an infinite loop');if(X){var G=D("scaleratio");G||(G=d.scaleratio=1),i(M,R,X,G)}else h.scaleanchor&&-1!==_.indexOf(h.scaleanchor)&&g.warn("ignored "+d._name+'.scaleanchor: "'+h.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function p(h,d){var o=d.domain;return o||(o=h[w(d.overlaying)].domain),o[1]-o[0]}function u(h,d){for(var o=0;o<h.length;o++)if(h[o][d])return h[o];return null}function i(h,d,o,_){var s,k,M,A,E,I=u(h,d);null===I?((I={})[d]=1,E=h.length,h.push(I)):E=h.indexOf(I);var C=Object.keys(I);for(s=0;s<h.length;s++)if(M=h[s],s!==E&&M[o]){var R=M[o];for(k=0;k<C.length;k++)M[A=C[k]]=c(R,c(_,I[A]));return void h.splice(E,1)}if(1!==_)for(k=0;k<C.length;k++){var O=C[k];I[O]=c(_,I[O])}I[o]=1}function c(h,d){var o,_,s="",k="";"string"==typeof h&&(o=(s=h.match(/^[xy]*/)[0]).length,h=+h.substr(o)),"string"==typeof d&&(_=(k=d.match(/^[xy]*/)[0]).length,d=+d.substr(_));var M=h*d;return o||_?o&&_&&s.charAt(0)!==k.charAt(0)?o===_?M:(o>_?s.substr(_):k.substr(o))+M:s+k+h*d:M}function f(h,d){for(var o=d._size,_=o.h/o.w,s={},k=Object.keys(h),M=0;M<k.length;M++){var A=k[M],E=h[A];if("string"==typeof E){var I=E.match(/^[xy]*/)[0],C=I.length;E=+E.substr(C);for(var R="y"===I.charAt(0)?_:1/_,O=0;O<C;O++)E*=R}s[A]=E}return s}function l(h,d){var o=h._inputDomain,s=o[0]+(o[1]-o[0])*a[h.constraintoward];h.domain=h._input.domain=[s+(o[0]-s)/d,s+(o[1]-s)/d],h.setScale()}ae.handleDefaults=function(h,d,o){var _,s,k,M,A,E,I,C,R=o.axIds,O=o.axHasImage,D=d._axisConstraintGroups=[],L=d._axisMatchGroups=[];for(_=0;_<R.length;_++)t(A=h[M=w(R[_])],E=d[M],{axIds:R,layoutOut:d,hasImage:O[M]});function B(H,U){for(_=0;_<H.length;_++)for(k in s=H[_])d[w(k)][U]=s}for(B(L,"_matchGroup"),_=0;_<D.length;_++)for(k in s=D[_])if((E=d[w(k)]).fixedrange){for(var j in s){var W=w(j);!1===(h[W]||{}).fixedrange&&g.warn("fixedrange was specified as false for axis "+W+" but was overridden because another axis in its constraint group has fixedrange true"),d[W].fixedrange=!0}break}for(_=0;_<D.length;){for(k in s=D[_]){(E=d[w(k)])._matchGroup&&Object.keys(E._matchGroup).length===Object.keys(s).length&&(D.splice(_,1),_--);break}_++}B(D,"_constraintGroup");var Y=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],Q=!1,ne=!1;function X(){C=E[I],"rangebreaks"===I&&(ne=E._hasDayOfWeekBreaks)}for(_=0;_<L.length;_++){s=L[_];for(var $=0;$<Y.length;$++){var re;for(k in I=Y[$],C=null,s)if(A=h[M=w(k)],I in(E=d[M])){if(!E.matches&&(re=E,I in A)){X();break}null===C&&I in A&&X()}if("range"===I&&C&&(Q=!0),"autorange"===I&&null===C&&Q&&(C=!1),null===C&&I in re&&(C=re[I]),null!==C)for(k in s)(E=d[w(k)])[I]="range"===I?C.slice():C,"rangebreaks"===I&&(E._hasDayOfWeekBreaks=ne,r(E,d))}}},ae.enforce=function(h){var d,o,_,s,k,M,A,E,I=h._fullLayout,C=I._axisConstraintGroups||[];for(d=0;d<C.length;d++){_=f(C[d],I);var R=Object.keys(_),O=1/0,D=0,L=1/0,B={},j={},W=!1;for(o=0;o<R.length;o++)j[s=R[o]]=k=I[w(s)],k._inputDomain?k.domain=k._inputDomain.slice():k._inputDomain=k.domain.slice(),k._inputRange||(k._inputRange=k.range.slice()),k.setScale(),B[s]=M=Math.abs(k._m)/_[s],O=Math.min(O,M),"domain"!==k.constrain&&k._constraintShrinkable||(L=Math.min(L,M)),delete k._constraintShrinkable,D=Math.max(D,M),"domain"===k.constrain&&(W=!0);if(!(O>n*D)||W)for(o=0;o<R.length;o++)if(M=B[s=R[o]],A=(k=j[s]).constrain,M!==L||"domain"===A)if(E=M/L,"range"===A)e(k,E);else{var Y=k._inputDomain,Q=(k.domain[1]-k.domain[0])/(Y[1]-Y[0]),ne=(k.r2l(k.range[1])-k.r2l(k.range[0]))/(k.r2l(k._inputRange[1])-k.r2l(k._inputRange[0]));if((E/=Q)*ne<1){k.domain=k._input.domain=Y.slice(),e(k,E);continue}if(ne<1&&(k.range=k._input.range=k._inputRange.slice(),E*=ne),k.autorange){var X=k.r2l(k.range[0]),$=k.r2l(k.range[1]),re=(X+$)/2,H=re,U=re,G=Math.abs($-re),ie=re-G*E*1.0001,q=re+G*E*1.0001,ee=m.makePadFn(I,k,0),te=m.makePadFn(I,k,1);l(k,E);var se,ue,de=Math.abs(k._m),he=m.concatExtremes(h,k),xe=he.min,ge=he.max;for(ue=0;ue<xe.length;ue++)(se=xe[ue].val-ee(xe[ue])/de)>ie&&se<H&&(H=se);for(ue=0;ue<ge.length;ue++)(se=ge[ue].val+te(ge[ue])/de)<q&&se>U&&(U=se);E/=(U-H)/(2*G),H=k.l2r(H),U=k.l2r(U),k.range=k._input.range=X<$?[H,U]:[U,H]}l(k,E)}}},ae.getAxisGroup=function(h,d){for(var o=h._axisMatchGroups,_=0;_<o.length;_++)if(o[_][d])return"g"+_;return d},ae.clean=function(h,d){if(d._inputDomain){for(var o=!1,_=d._id,s=h._fullLayout._axisConstraintGroups,k=0;k<s.length;k++)if(s[k][_]){o=!0;break}o&&"domain"===d.constrain||(d._input.domain=d.domain=d._inputDomain,delete d._inputDomain)}}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=m.numberFormat,y=x("tinycolor2"),e=x("has-passive-events"),r=x("../../registry"),n=m.strTranslate,a=x("../../lib/svg_text_utils"),t=x("../../components/color"),p=x("../../components/drawing"),u=x("../../components/fx"),i=x("./axes"),c=x("../../lib/setcursor"),f=x("../../components/dragelement"),l=x("../../components/dragelement/helpers"),h=l.selectingOrDrawing,d=l.freeMode,o=x("../../constants/alignment").FROM_TL,_=x("../../lib/clear_gl_canvases"),s=x("../../plot_api/subroutines").redrawReglTraces,k=x("../plots"),M=x("./axis_ids").getFromId,A=x("./select").prepSelect,E=x("./select").clearSelect,I=x("./select").selectOnClick,C=x("./scale_zoom"),R=x("./constants"),O=R.MINDRAG,D=R.MINZOOM,L=!0;function B(se,ue,de,he){var xe=m.ensureSingle(se.draglayer,ue,de,function(ge){ge.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",se.id)});return xe.call(c,he),xe.node()}function j(se,ue,de,he,xe,ge,_e){var Ce=B(se,"rect",ue,de);return g.select(Ce).call(p.setRect,he,xe,ge,_e),Ce}function W(se,ue){for(var de=0;de<se.length;de++)if(!se[de].fixedrange)return ue;return""}function Y(se,ue,de,he,xe){for(var ge=0;ge<se.length;ge++){var _e=se[ge];if(!_e.fixedrange)if(_e.rangebreaks){var Ce="y"===_e._id.charAt(0),Ie=Ce?1-de:de;he[_e._name+".range[0]"]=_e.l2r(_e.p2l((Ce?1-ue:ue)*_e._length)),he[_e._name+".range[1]"]=_e.l2r(_e.p2l(Ie*_e._length))}else{var Be=_e._rl[0],ve=_e._rl[1]-Be;he[_e._name+".range[0]"]=_e.l2r(Be+ve*ue),he[_e._name+".range[1]"]=_e.l2r(Be+ve*de)}}if(xe&&xe.length){var Te=(ue+(1-de))/2;Y(xe,Te,1-Te,he,[])}}function Q(se,ue){for(var de=0;de<se.length;de++){var he=se[de];if(!he.fixedrange)if(he.rangebreaks){var xe=he._length,ge=(he.p2l(0+ue)-he.p2l(0)+(he.p2l(xe+ue)-he.p2l(xe)))/2;he.range=[he.l2r(he._rl[0]-ge),he.l2r(he._rl[1]-ge)]}else he.range=[he.l2r(he._rl[0]-ue/he._m),he.l2r(he._rl[1]-ue/he._m)]}}function ne(se){return 1-(se>=0?Math.min(se,.9):1/(1/Math.max(se,-.3)+3.222))}function X(se,ue,de,he,xe){return se.append("path").attr("class","zoombox").style({fill:ue>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",n(de,he)).attr("d",xe+"Z")}function $(se,ue,de){return se.append("path").attr("class","zoombox-corners").style({fill:t.background,stroke:t.defaultLine,"stroke-width":1,opacity:0}).attr("transform",n(ue,de)).attr("d","M0,0Z")}function re(se,ue,de,he,xe,ge){se.attr("d",he+"M"+de.l+","+de.t+"v"+de.h+"h"+de.w+"v-"+de.h+"h-"+de.w+"Z"),H(se,ue,xe,ge)}function H(se,ue,de,he){de||(se.transition().style("fill",he>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ue.transition().style("opacity",1).duration(200))}function U(se){g.select(se).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function G(se){L&&se.data&&se._context.showTips&&(m.notifier(m._(se,"Double-click to zoom back out"),"long"),L=!1)}function ie(se){var ue=Math.floor(Math.min(se.b-se.t,se.r-se.l,D)/2);return"M"+(se.l-3.5)+","+(se.t-.5+ue)+"h3v"+-ue+"h"+ue+"v-3h-"+(ue+3)+"ZM"+(se.r+3.5)+","+(se.t-.5+ue)+"h-3v"+-ue+"h"+-ue+"v-3h"+(ue+3)+"ZM"+(se.r+3.5)+","+(se.b+.5-ue)+"h-3v"+ue+"h"+-ue+"v3h"+(ue+3)+"ZM"+(se.l-3.5)+","+(se.b+.5-ue)+"h3v"+ue+"h"+ue+"v3h-"+(ue+3)+"Z"}function q(se,ue,de,he,xe){for(var ge,_e,Ce,Le,Ie=!1,Be={},ve={},Te=(xe||{}).xaHash,Pe=(xe||{}).yaHash,De=0;De<ue.length;De++){var Fe=ue[De];for(ge in de)if(Fe[ge]){for(Ce in Fe)xe&&(Te[Ce]||Pe[Ce])||("x"===Ce.charAt(0)?de:he)[Ce]||(Be[Ce]=ge);for(_e in he)xe&&(Te[_e]||Pe[_e])||!Fe[_e]||(Ie=!0)}for(_e in he)if(Fe[_e])for(Le in Fe)xe&&(Te[Le]||Pe[Le])||("x"===Le.charAt(0)?de:he)[Le]||(ve[Le]=_e)}Ie&&(m.extendFlat(Be,ve),ve={});var Ue={},He=[];for(Ce in Be){var Ke=M(se,Ce);He.push(Ke),Ue[Ke._id]=Ke}var st={},Ve=[];for(Le in ve){var $e=M(se,Le);Ve.push($e),st[$e._id]=$e}return{xaHash:Ue,yaHash:st,xaxes:He,yaxes:Ve,xLinks:Be,yLinks:ve,isSubplotConstrained:Ie}}function ee(se,ue){if(e){var de=void 0!==se.onwheel?"wheel":"mousewheel";se._onwheel&&se.removeEventListener(de,se._onwheel),se._onwheel=ue,se.addEventListener(de,ue,{passive:!1})}else void 0!==se.onwheel?se.onwheel=ue:void 0!==se.onmousewheel?se.onmousewheel=ue:se.isAddedWheelEvent||(se.isAddedWheelEvent=!0,se.addEventListener("wheel",ue,{passive:!1}))}function te(se){var ue=[];for(var de in se)ue.push(se[de]);return ue}oe.exports={makeDragBox:function(se,ue,de,he,xe,ge,_e,Ce){var Le,Ie,Be,ve,Te,Pe,De,Fe,Ue,He,Ke,st,Ve,$e,Qe,tt,ut,xt,kt,Bt,Rt,ft,lt,Ft=se._fullLayout._zoomlayer,Jt=_e+Ce==="nsew",ln=1===(_e+Ce).length;function dn(){if(Ue=(Le=ue.xaxis)._length,He=(Ie=ue.yaxis)._length,De=Le._offset,Fe=Ie._offset,(Be={})[Le._id]=Le,(ve={})[Ie._id]=Ie,_e&&Ce)for(var sn=ue.overlays,vn=0;vn<sn.length;vn++){var pn=sn[vn].xaxis;Be[pn._id]=pn;var Mn=sn[vn].yaxis;ve[Mn._id]=Mn}Te=te(Be),Pe=te(ve),Ve=W(Te,Ce),$e=W(Pe,_e),Qe=!$e&&!Ve,st=q(se,se._fullLayout._axisMatchGroups,Be,ve);var Rn=(Ke=q(se,se._fullLayout._axisConstraintGroups,Be,ve,st)).isSubplotConstrained||st.isSubplotConstrained;tt=Ce||Rn,ut=_e||Rn;var Xn=se._fullLayout;xt=Xn._has("scattergl"),kt=Xn._has("splom"),Bt=Xn._has("svg")}dn();var sn,cn=(sn=$e+Ve)?"nsew"===sn?Jt?"":"pan"===se._fullLayout.dragmode?"move":"crosshair":sn.toLowerCase()+"-resize":"pointer",Tn=j(ue,_e+Ce+"drag",cn,de,he,xe,ge);if(Qe&&!Jt)return Tn.onmousedown=null,Tn.style.pointerEvents="none",Tn;var nn,Me,Ee,Se,je,qe,Je,at,it,yt,vt={element:Tn,gd:se,plotinfo:ue};function Ut(){vt.plotinfo.selection=!1,E(se)}function Wt(sn,vn){var Or,ni,Br,Dr,Rr,pn=vt.gd;if(pn._fullLayout._activeShapeIndex>=0)pn._fullLayout._deactivateShape(pn);else{var Mn=pn._fullLayout.clickmode;if(U(pn),2!==sn||ln||function Xt(){if(!se._transitioningWithDuration){var sn=se._context.doubleClick,vn=[];Ve&&(vn=vn.concat(Te)),$e&&(vn=vn.concat(Pe)),st.xaxes&&(vn=vn.concat(st.xaxes)),st.yaxes&&(vn=vn.concat(st.yaxes));var pn,Mn,Rn,Xn={};if("reset+autosize"===sn)for(sn="autosize",Mn=0;Mn<vn.length;Mn++)if((pn=vn[Mn])._rangeInitial&&(pn.range[0]!==pn._rangeInitial[0]||pn.range[1]!==pn._rangeInitial[1])||!pn._rangeInitial&&!pn.autorange){sn="reset";break}if("autosize"===sn)for(Mn=0;Mn<vn.length;Mn++)(pn=vn[Mn]).fixedrange||(Xn[pn._name+".autorange"]=!0);else if("reset"===sn)for((Ve||Ke.isSubplotConstrained)&&(vn=vn.concat(Ke.xaxes)),$e&&!Ke.isSubplotConstrained&&(vn=vn.concat(Ke.yaxes)),Ke.isSubplotConstrained&&(Ve?$e||(vn=vn.concat(Pe)):vn=vn.concat(Te)),Mn=0;Mn<vn.length;Mn++)(pn=vn[Mn]).fixedrange||(pn._rangeInitial?(Xn[pn._name+".range[0]"]=(Rn=pn._rangeInitial)[0],Xn[pn._name+".range[1]"]=Rn[1]):Xn[pn._name+".autorange"]=!0);se.emit("plotly_doubleclick",null),r.call("_guiRelayout",se,Xn)}}(),Jt)Mn.indexOf("select")>-1&&I(vn,pn,Te,Pe,ue.id,vt),Mn.indexOf("event")>-1&&u.click(pn,vn,ue.id);else if(1===sn&&ln){var Rn=_e?Ie:Le,Xn="s"===_e||"w"===Ce?0:1,Hn=Rn._name+".range["+Xn+"]",rr=(Dr=(Or=Rn).range[ni=Xn],Rr=Math.abs(Dr-Or.range[1-ni]),"date"===Or.type?Dr:"log"===Or.type?(Br=Math.ceil(Math.max(0,-Math.log(Rr)/Math.LN10))+3,w("."+Br+"g")(Math.pow(10,Dr))):(Br=Math.floor(Math.log(Math.abs(Dr))/Math.LN10)-Math.floor(Math.log(Rr)/Math.LN10)+4,w("."+String(Br)+"g")(Dr))),er="left",Ir="middle";if(Rn.fixedrange)return;_e?(Ir="n"===_e?"top":"bottom","right"===Rn.side&&(er="right")):"e"===Ce&&(er="right"),pn._context.showAxisRangeEntryBoxes&&g.select(Tn).call(a.makeEditable,{gd:pn,immediate:!0,background:pn._fullLayout.paper_bgcolor,text:String(rr),fill:Rn.tickfont?Rn.tickfont.color:"#444",horizontalAlign:er,verticalAlign:Ir}).on("edit",function(Or){var ni=Rn.d2r(Or);void 0!==ni&&r.call("_guiRelayout",pn,Hn,ni)})}}}function gt(sn,vn){if(se._transitioningWithDuration)return!1;var Ir,Or,pn=Math.max(0,Math.min(Ue,ft*sn+nn)),Mn=Math.max(0,Math.min(He,lt*vn+Me)),Rn=Math.abs(pn-nn),Xn=Math.abs(Mn-Me);function Hn(){Je="",Ee.r=Ee.l,Ee.t=Ee.b,it.attr("d","M0,0Z")}if(Ee.l=Math.min(nn,pn),Ee.r=Math.max(nn,pn),Ee.t=Math.min(Me,Mn),Ee.b=Math.max(Me,Mn),Ke.isSubplotConstrained)Rn>D||Xn>D?(Je="xy",Rn/Ue>Xn/He?(Xn=Rn*He/Ue,Me>Mn?Ee.t=Me-Xn:Ee.b=Me+Xn):(Rn=Xn*Ue/He,nn>pn?Ee.l=nn-Rn:Ee.r=nn+Rn),it.attr("d",ie(Ee))):Hn();else if(st.isSubplotConstrained)if(Rn>D||Xn>D){Je="xy";var rr=Math.min(Ee.l/Ue,(He-Ee.b)/He),er=Math.max(Ee.r/Ue,(He-Ee.t)/He);Ee.l=rr*Ue,Ee.r=er*Ue,Ee.b=(1-rr)*He,Ee.t=(1-er)*He,it.attr("d",ie(Ee))}else Hn();else!$e||Xn<Math.min(Math.max(.6*Rn,O),D)?Rn<O||!Ve?Hn():(Ee.t=0,Ee.b=He,Je="x",it.attr("d","M"+((Ir=Ee).l-.5)+","+((Or=Me)-D-.5)+"h-3v"+(2*D+1)+"h3ZM"+(Ir.r+.5)+","+(Or-D-.5)+"h3v"+(2*D+1)+"h-3Z")):!Ve||Rn<Math.min(.6*Xn,D)?(Ee.l=0,Ee.r=Ue,Je="y",it.attr("d",function(Ir,Or){return"M"+(Or-D-.5)+","+(Ir.t-.5)+"v-3h"+(2*D+1)+"v3ZM"+(Or-D-.5)+","+(Ir.b+.5)+"v3h"+(2*D+1)+"v-3Z"}(Ee,nn))):(Je="xy",it.attr("d",ie(Ee)));Ee.w=Ee.r-Ee.l,Ee.h=Ee.b-Ee.t,Je&&(yt=!0),se._dragged=yt,re(at,it,Ee,je,qe,Se),At(),se.emit("plotly_relayouting",Rt),qe=!0}function At(){Rt={},"xy"!==Je&&"x"!==Je||(Y(Te,Ee.l/Ue,Ee.r/Ue,Rt,Ke.xaxes),Mt("x",Rt)),"xy"!==Je&&"y"!==Je||(Y(Pe,(He-Ee.b)/He,(He-Ee.t)/He,Rt,Ke.yaxes),Mt("y",Rt))}function Zt(){At(),U(se),un(),G(se)}vt.prepFn=function(sn,vn,pn){var Mn=vt.dragmode,Rn=se._fullLayout.dragmode;Rn!==Mn&&(vt.dragmode=Rn),dn(),ft=se._fullLayout._invScaleX,lt=se._fullLayout._invScaleY,Qe||(Jt?sn.shiftKey?"pan"===Rn?Rn="zoom":h(Rn)||(Rn="pan"):sn.ctrlKey&&(Rn="pan"):Rn="pan"),vt.minDrag=d(Rn)?1:void 0,h(Rn)?(vt.xaxes=Te,vt.yaxes=Pe,A(sn,vn,pn,vt,Rn)):(vt.clickFn=Wt,h(Mn)&&Ut(),Qe||("zoom"===Rn?(vt.moveFn=gt,vt.doneFn=Zt,vt.minDrag=1,function(Xn,Hn,rr){var er=Tn.getBoundingClientRect();nn=Hn-er.left,Me=rr-er.top,se._fullLayout._calcInverseTransform(se);var Ir=m.apply3DTransform(se._fullLayout._invTransform)(nn,Me);Ee={l:nn=Ir[0],r:nn,w:0,t:Me=Ir[1],b:Me,h:0},Se=se._hmpixcount?se._hmlumcount/se._hmpixcount:y(se._fullLayout.plot_bgcolor).getLuminance(),qe=!1,Je="xy",yt=!1,at=X(Ft,Se,De,Fe,je="M0,0H"+Ue+"V"+He+"H0V0"),it=$(Ft,De,Fe)}(0,vn,pn)):"pan"===Rn&&(vt.moveFn=dt,vt.doneFn=un))),se._fullLayout._redrag=function(){var Xn=se._dragdata;Xn&&Xn.element===Tn&&(h(se._fullLayout.dragmode)||(dn(),Qt([0,0,Ue,He]),vt.moveFn(Xn.dx,Xn.dy)))}},f.init(vt);var Et=[0,0,Ue,He],Ct=null,Ne=R.REDRAWDELAY,et=ue.mainplot?se._fullLayout._plots[ue.mainplot]:ue;function dt(sn,vn){if(sn*=ft,vn*=lt,!se._transitioningWithDuration){if(se._fullLayout._replotting=!0,"ew"===Ve||"ns"===$e){var pn=Ve?-sn:0,Mn=$e?-vn:0;if(st.isSubplotConstrained){if(Ve&&$e){var Rn=(sn/Ue-vn/He)/2;pn=-(sn=Rn*Ue),Mn=-(vn=-Rn*He)}$e?pn=-Mn*Ue/He:Mn=-pn*He/Ue}return Ve&&(Q(Te,sn),Mt("x")),$e&&(Q(Pe,vn),Mt("y")),Qt([pn,Mn,Ue,He]),zt(),void se.emit("plotly_relayouting",Rt)}var Xn,Hn,rr="w"===Ve==("n"===$e)?1:-1;if(Ve&&$e&&(Ke.isSubplotConstrained||st.isSubplotConstrained)){var er=(sn/Ue+rr*vn/He)/2;sn=er*Ue,vn=rr*er*He}if("w"===Ve?sn=Br(Te,0,sn):"e"===Ve?sn=Br(Te,1,-sn):Ve||(sn=0),"n"===$e?vn=Br(Pe,1,vn):"s"===$e?vn=Br(Pe,0,-vn):$e||(vn=0),Xn="w"===Ve?sn:0,Hn="n"===$e?vn:0,Ke.isSubplotConstrained&&!st.isSubplotConstrained||st.isSubplotConstrained&&Ve&&$e&&rr>0){var Ir;if(st.isSubplotConstrained||!Ve&&1===$e.length){for(Ir=0;Ir<Te.length;Ir++)Te[Ir].range=Te[Ir]._r.slice(),C(Te[Ir],1-vn/He);Xn=(sn=vn*Ue/He)/2}if(st.isSubplotConstrained||!$e&&1===Ve.length){for(Ir=0;Ir<Pe.length;Ir++)Pe[Ir].range=Pe[Ir]._r.slice(),C(Pe[Ir],1-sn/Ue);Hn=(vn=sn*He/Ue)/2}}st.isSubplotConstrained&&$e||Mt("x"),st.isSubplotConstrained&&Ve||Mt("y");var Or=Ue-sn,ni=He-vn;!st.isSubplotConstrained||Ve&&$e||(Ve?(Hn=Xn?0:sn*He/Ue,ni=Or*He/Ue):(Xn=Hn?0:vn*Ue/He,Or=ni*Ue/He)),Qt([Xn,Hn,Or,ni]),zt(),se.emit("plotly_relayouting",Rt)}function Br(Dr,Rr,yi){for(var $n,Mr,br=1-Rr,ar=0;ar<Dr.length;ar++){var si=Dr[ar];if(!si.fixedrange){$n=si,Mr=si._rl[br]+(si._rl[Rr]-si._rl[br])/ne(yi/si._length);var ri=si.l2r(Mr);!1!==ri&&void 0!==ri&&(si.range[Rr]=ri)}}return $n._length*($n._rl[Rr]-Mr)/($n._rl[Rr]-$n._rl[br])}}function Mt(sn,vn){for(var pn=st.isSubplotConstrained?{x:Pe,y:Te}[sn]:st[sn+"axes"],Mn=st.isSubplotConstrained?{x:Te,y:Pe}[sn]:[],Rn=0;Rn<pn.length;Rn++){var Xn=pn[Rn],Hn=Xn._id,rr=st.xLinks[Hn]||st.yLinks[Hn],er=Mn[0]||Be[rr]||ve[rr];er&&(vn?(vn[Xn._name+".range[0]"]=vn[er._name+".range[0]"],vn[Xn._name+".range[1]"]=vn[er._name+".range[1]"]):Xn.range=er.range.slice())}}function zt(){var sn,vn=[];function pn(Xn){for(sn=0;sn<Xn.length;sn++)Xn[sn].fixedrange||vn.push(Xn[sn]._id)}for(tt&&(pn(Te),pn(Ke.xaxes),pn(st.xaxes)),ut&&(pn(Pe),pn(Ke.yaxes),pn(st.yaxes)),Rt={},sn=0;sn<vn.length;sn++){var Rn=M(se,vn[sn]);i.drawOne(se,Rn,{skipTitle:!0}),Rt[Rn._name+".range[0]"]=Rn.range[0],Rt[Rn._name+".range[1]"]=Rn.range[1]}i.redrawComponents(se,vn)}function un(){Qt([0,0,Ue,He]),m.syncOrAsync([k.previousPromises,function(){se._fullLayout._replotting=!1,r.call("_guiRelayout",se,Rt)}],se)}function Qt(sn){var vn,pn,Mn,Rn,Xn=se._fullLayout,Hn=Xn._plots,rr=Xn._subplots.cartesian;if(kt&&r.subplotsRegistry.splom.drag(se),xt)for(vn=0;vn<rr.length;vn++)if(Mn=(pn=Hn[rr[vn]]).xaxis,Rn=pn.yaxis,pn._scene){var er=m.simpleMap(Mn.range,Mn.r2l),Ir=m.simpleMap(Rn.range,Rn.r2l);pn._scene.update({range:[er[0],Ir[0],er[1],Ir[1]]})}if((kt||xt)&&(_(se),s(se)),Bt){var Or=sn[2]/Le._length,ni=sn[3]/Ie._length;for(vn=0;vn<rr.length;vn++){Mn=(pn=Hn[rr[vn]]).xaxis,Rn=pn.yaxis;var Br,Dr,Rr,yi,Mr=(ut||st.isSubplotConstrained)&&!Rn.fixedrange&&ve[Rn._id];if((tt||st.isSubplotConstrained)&&!Mn.fixedrange&&Be[Mn._id]?(Br=Or,Rr=Ce||st.isSubplotConstrained?sn[0]:gn(Mn,Br)):st.xaHash[Mn._id]?(Br=Or,Rr=sn[0]*Mn._length/Le._length):st.yaHash[Mn._id]?(Br=ni,Rr="ns"===$e?-sn[1]*Mn._length/Ie._length:gn(Mn,Br,{n:"top",s:"bottom"}[$e])):Rr=qn(Mn,Br=kn(Mn,Or,ni)),Mr?(Dr=ni,yi=_e||st.isSubplotConstrained?sn[1]:gn(Rn,Dr)):st.yaHash[Rn._id]?(Dr=ni,yi=sn[1]*Rn._length/Ie._length):st.xaHash[Rn._id]?(Dr=Or,yi="ew"===Ve?-sn[0]*Rn._length/Le._length:gn(Rn,Dr,{e:"right",w:"left"}[Ve])):yi=qn(Rn,Dr=kn(Rn,Or,ni)),Br||Dr){Br||(Br=1),Dr||(Dr=1);var br=Mn._offset-Rr/Br,ar=Rn._offset-yi/Dr;pn.clipRect.call(p.setTranslate,Rr,yi).call(p.setScale,Br,Dr),pn.plot.call(p.setTranslate,br,ar).call(p.setScale,1/Br,1/Dr),Br===pn.xScaleFactor&&Dr===pn.yScaleFactor||(p.setPointGroupScale(pn.zoomScalePts,Br,Dr),p.setTextPointsScale(pn.zoomScaleTxt,Br,Dr)),p.hideOutsideRangePoints(pn.clipOnAxisFalseTraces,pn),pn.xScaleFactor=Br,pn.yScaleFactor=Dr}}}}function kn(sn,vn,pn){return sn.fixedrange?0:tt&&Ke.xaHash[sn._id]?vn:ut&&(Ke.isSubplotConstrained?Ke.xaHash:Ke.yaHash)[sn._id]?pn:0}function qn(sn,vn){return vn?(sn.range=sn._r.slice(),C(sn,vn),gn(sn,vn)):0}function gn(sn,vn,pn){return sn._length*(1-vn)*o[pn||sn.constraintoward||"middle"]}return _e.length*Ce.length!=1&&ee(Tn,function(sn){if(se._context._scrollZoom.cartesian||se._fullLayout._enablescrollzoom){if(Ut(),se._transitioningWithDuration)return sn.preventDefault(),void sn.stopPropagation();dn(),clearTimeout(Ct);var vn=-sn.deltaY;if(isFinite(vn)||(vn=sn.wheelDelta/10),isFinite(vn)){var pn,Mn=Math.exp(-Math.min(Math.max(vn,-20),20)/200),Rn=et.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Xn=(sn.clientX-Rn.left)/Rn.width,Hn=(Rn.bottom-sn.clientY)/Rn.height;if(tt){for(Ce||(Xn=.5),pn=0;pn<Te.length;pn++)rr(Te[pn],Xn,Mn);Mt("x"),Et[2]*=Mn,Et[0]+=Et[2]*Xn*(1/Mn-1)}if(ut){for(_e||(Hn=.5),pn=0;pn<Pe.length;pn++)rr(Pe[pn],Hn,Mn);Mt("y"),Et[3]*=Mn,Et[1]+=Et[3]*(1-Hn)*(1/Mn-1)}Qt(Et),zt(),se.emit("plotly_relayouting",Rt),Ct=setTimeout(function(){se._fullLayout&&(Et=[0,0,Ue,He],un())},Ne),sn.preventDefault()}else m.log("Did not find wheel motion attributes: ",sn)}function rr(er,Ir,Or){if(!er.fixedrange){var ni=m.simpleMap(er.range,er.r2l),Br=ni[0]+(ni[1]-ni[0])*Ir;er.range=ni.map(function(Dr){return er.l2r(Br+(Dr-Br)*Or)})}}}),Tn},makeDragger:B,makeRectDragger:j,makeZoombox:X,makeCorners:$,updateZoombox:re,xyCorners:ie,transitionZoombox:H,removeZoombox:U,showDoubleClickNotifier:G,attachWheelEventHandler:ee}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/fx"),w=x("../../components/dragelement"),y=x("../../lib/setcursor"),e=x("./dragbox").makeDragBox,r=x("./constants").DRAGGERSIZE;ae.initInteractions=function(n){var a=n._fullLayout;if(n._context.staticPlot)g.select(n).selectAll(".drag").remove();else if(a._has("cartesian")||a._has("splom")){Object.keys(a._plots||{}).sort(function(p,u){if((a._plots[p].mainplot&&!0)===(a._plots[u].mainplot&&!0)){var i=p.split("y"),c=u.split("y");return i[0]===c[0]?Number(i[1]||1)-Number(c[1]||1):Number(i[0]||1)-Number(c[0]||1)}return a._plots[p].mainplot?1:-1}).forEach(function(p){var u=a._plots[p],i=u.xaxis,c=u.yaxis;if(!u.mainplot){var f=e(n,u,i._offset,c._offset,i._length,c._length,"ns","ew");f.onmousemove=function(d){n._fullLayout._rehover=function(){n._fullLayout._hoversubplot===p&&n._fullLayout._plots[p]&&m.hover(n,d,p)},m.hover(n,d,p),n._fullLayout._lasthover=f,n._fullLayout._hoversubplot=p},f.onmouseout=function(d){n._dragging||(n._fullLayout._hoversubplot=null,w.unhover(n,d))},n._context.showAxisDragHandles&&(e(n,u,i._offset-r,c._offset-r,r,r,"n","w"),e(n,u,i._offset+i._length,c._offset-r,r,r,"n","e"),e(n,u,i._offset-r,c._offset+c._length,r,r,"s","w"),e(n,u,i._offset+i._length,c._offset+c._length,r,r,"s","e"))}if(n._context.showAxisDragHandles){if(p===i._mainSubplot){var l=i._mainLinePosition;"top"===i.side&&(l-=r),e(n,u,i._offset+.1*i._length,l,.8*i._length,r,"","ew"),e(n,u,i._offset,l,.1*i._length,r,"","w"),e(n,u,i._offset+.9*i._length,l,.1*i._length,r,"","e")}if(p===c._mainSubplot){var h=c._mainLinePosition;"right"!==c.side&&(h-=r),e(n,u,h,c._offset+.1*c._length,r,.8*c._length,"ns",""),e(n,u,h,c._offset+.9*c._length,r,.1*c._length,"s",""),e(n,u,h,c._offset,r,.1*c._length,"n","")}}});var t=a._hoverlayer.node();t.onmousemove=function(p){p.target=n._fullLayout._lasthover,m.hover(n,p,a._hoversubplot)},t.onclick=function(p){p.target=n._fullLayout._lasthover,m.click(n,p)},t.onmousedown=function(p){n._fullLayout._lasthover.onmousedown(p)},ae.updateFx(n)}},ae.updateFx=function(n){var a=n._fullLayout;y(a._draggers,"pan"===a.dragmode?"move":"crosshair")}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(x,oe,ae){"use strict";oe.exports={clearOutlineControllers:function(g){var m=g._fullLayout._zoomlayer;m&&m.selectAll(".outline-controllers").remove()},clearSelect:function(g){var m=g._fullLayout._zoomlayer;m&&m.selectAll(".select-outline").remove(),g._fullLayout._drawing=!1}}},{}],566:[function(x,oe,ae){"use strict";var g=x("../../lib").strTranslate;function m(w,y){switch(w.type){case"log":return w.p2d(y);case"date":return w.p2r(y,0,w.calendar);default:return w.p2r(y)}}oe.exports={p2r:m,r2p:function(w,y){switch(w.type){case"log":return w.d2p(y);case"date":return w.r2p(y,0,w.calendar);default:return w.r2p(y)}},axValue:function(w){var y="y"===w._id.charAt(0)?1:0;return function(e){return m(w,e[y])}},getTransform:function(w){return g(w.xaxis._offset,w.yaxis._offset)}}},{"../../lib":503}],567:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../lib"),w=x("./axis_ids");oe.exports=function(y){return function(e,r){var n=e[y];if(Array.isArray(n))for(var a=g.subplotsRegistry.cartesian,t=a.idRegex,p=r._subplots,u=p.xaxis,i=p.yaxis,c=p.cartesian,f=r._has("cartesian")||r._has("gl2d"),l=0;l<n.length;l++){var h=n[l];if(m.isPlainObject(h)){var d=w.cleanId(h.xref,"x",!1),o=w.cleanId(h.yref,"y",!1),_=t.x.test(d),s=t.y.test(o);if(_||s){f||m.pushUnique(r._basePlotModules,a);var k=!1;_&&-1===u.indexOf(d)&&(u.push(d),k=!0),s&&-1===i.indexOf(o)&&(i.push(o),k=!0),k&&_&&s&&c.push(d+o)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../registry"),w=x("../../lib"),y=x("../plots"),e=x("../../components/drawing"),r=x("../get_data").getModuleCalcData,n=x("./axis_ids"),a=x("./constants"),t=x("../../constants/xmlns_namespaces"),p=w.ensureSingle;function u(h,d,o){return w.ensureSingle(h,d,o,function(_){_.datum(o)})}function i(h,d,o,_,s){for(var k,M,A,E=a.traceLayerClasses,I=h._fullLayout,C=I._modules,R=[],O=[],D=0;D<C.length;D++){var L=(k=C[D]).name,B=m.modules[L].categories;if(B.svg){var j=k.layerName||L+"layer",W=k.plot;A=(M=r(o,W))[0],o=M[1],A.length&&R.push({i:E.indexOf(j),className:j,plotMethod:W,cdModule:A}),B.zoomScale&&O.push("."+j)}}R.sort(function(ne,X){return ne.i-X.i});var Y=d.plot.selectAll("g.mlayer").data(R,function(ne){return ne.className});if(Y.enter().append("g").attr("class",function(ne){return ne.className}).classed("mlayer",!0).classed("rangeplot",d.isRangePlot),Y.exit().remove(),Y.order(),Y.each(function(ne){var X=g.select(this),$=ne.className;ne.plotMethod(h,d,ne.cdModule,X,_,s),-1===a.clipOnAxisFalseQuery.indexOf("."+$)&&e.setClipUrl(X,d.layerClipId,h)}),I._has("scattergl")&&(k=m.getModule("scattergl"),A=r(o,k)[0],k.plot(h,d,A)),!h._context.staticPlot&&(d._hasClipOnAxisFalse&&(d.clipOnAxisFalseTraces=d.plot.selectAll(a.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),O.length)){var Q=d.plot.selectAll(O.join(",")).selectAll(".trace");d.zoomScalePts=Q.selectAll("path.point"),d.zoomScaleTxt=Q.selectAll(".textpoint")}}function c(h,d){var o=d.plotgroup,_=d.id,s=a.layerValue2layerClass[d.xaxis.layer],k=a.layerValue2layerClass[d.yaxis.layer],M=h._fullLayout._hasOnlyLargeSploms;if(d.mainplot){var A=d.mainplotinfo,E=A.plotgroup,I=_+"-x",C=_+"-y";d.minorGridlayer=A.minorGridlayer,d.gridlayer=A.gridlayer,d.zerolinelayer=A.zerolinelayer,p(A.overlinesBelow,"path",I),p(A.overlinesBelow,"path",C),p(A.overaxesBelow,"g",I),p(A.overaxesBelow,"g",C),d.plot=p(A.overplot,"g",_),p(A.overlinesAbove,"path",I),p(A.overlinesAbove,"path",C),p(A.overaxesAbove,"g",I),p(A.overaxesAbove,"g",C),d.xlines=E.select(".overlines-"+s).select("."+I),d.ylines=E.select(".overlines-"+k).select("."+C),d.xaxislayer=E.select(".overaxes-"+s).select("."+I),d.yaxislayer=E.select(".overaxes-"+k).select("."+C)}else if(M)d.xlines=p(o,"path","xlines-above"),d.ylines=p(o,"path","ylines-above"),d.xaxislayer=p(o,"g","xaxislayer-above"),d.yaxislayer=p(o,"g","yaxislayer-above");else{var R=p(o,"g","layer-subplot");d.shapelayer=p(R,"g","shapelayer"),d.imagelayer=p(R,"g","imagelayer"),d.minorGridlayer=p(o,"g","minor-gridlayer"),d.gridlayer=p(o,"g","gridlayer"),d.zerolinelayer=p(o,"g","zerolinelayer"),p(o,"path","xlines-below"),p(o,"path","ylines-below"),d.overlinesBelow=p(o,"g","overlines-below"),p(o,"g","xaxislayer-below"),p(o,"g","yaxislayer-below"),d.overaxesBelow=p(o,"g","overaxes-below"),d.plot=p(o,"g","plot"),d.overplot=p(o,"g","overplot"),d.xlines=p(o,"path","xlines-above"),d.ylines=p(o,"path","ylines-above"),d.overlinesAbove=p(o,"g","overlines-above"),p(o,"g","xaxislayer-above"),p(o,"g","yaxislayer-above"),d.overaxesAbove=p(o,"g","overaxes-above"),d.xlines=o.select(".xlines-"+s),d.ylines=o.select(".ylines-"+k),d.xaxislayer=o.select(".xaxislayer-"+s),d.yaxislayer=o.select(".yaxislayer-"+k)}M||(u(d.minorGridlayer,"g",d.xaxis._id),u(d.minorGridlayer,"g",d.yaxis._id),d.minorGridlayer.selectAll("g").map(function(O){return O[0]}).sort(n.idSort),u(d.gridlayer,"g",d.xaxis._id),u(d.gridlayer,"g",d.yaxis._id),d.gridlayer.selectAll("g").map(function(O){return O[0]}).sort(n.idSort)),d.xlines.style("fill","none").classed("crisp",!0),d.ylines.style("fill","none").classed("crisp",!0)}function f(h,d){if(h){var o={};for(var _ in h.each(function(A){var E=A[0];g.select(this).remove(),l(E,d),o[E]=!0}),d._plots)for(var s=d._plots[_].overlays||[],k=0;k<s.length;k++){var M=s[k];o[M.id]&&M.plot.selectAll(".trace").remove()}}}function l(h,d){d._draggers.selectAll("g."+h).remove(),d._defs.select("#clip"+d._uid+h+"plot").remove()}ae.name="cartesian",ae.attr=["xaxis","yaxis"],ae.idRoot=["x","y"],ae.idRegex=a.idRegex,ae.attrRegex=a.attrRegex,ae.attributes=x("./attributes"),ae.layoutAttributes=x("./layout_attributes"),ae.supplyLayoutDefaults=x("./layout_defaults"),ae.transitionAxes=x("./transition_axes"),ae.finalizeSubplots=function(h,d){var o,_,s,k=d._subplots,M=k.xaxis,A=k.yaxis,E=k.cartesian,I=E.concat(k.gl2d||[]),C={},R={};for(o=0;o<I.length;o++){var O=I[o].split("y");C[O[0]]=1,R["y"+O[1]]=1}for(o=0;o<M.length;o++)C[_=M[o]]||(s=(h[n.id2name(_)]||{}).anchor,a.idRegex.y.test(s)||(s="y"),E.push(_+s),I.push(_+s),R[s]||(R[s]=1,w.pushUnique(A,s)));for(o=0;o<A.length;o++)R[s=A[o]]||(_=(h[n.id2name(s)]||{}).anchor,a.idRegex.x.test(_)||(_="x"),E.push(_+s),I.push(_+s),C[_]||(C[_]=1,w.pushUnique(M,_)));if(!I.length){for(var D in _="",s="",h)a.attrRegex.test(D)&&("x"===D.charAt(0)?(!_||+D.substr(5)<+_.substr(5))&&(_=D):(!s||+D.substr(5)<+s.substr(5))&&(s=D));_=_?n.name2id(_):"x",s=s?n.name2id(s):"y",M.push(_),A.push(s),E.push(_+s)}},ae.plot=function(h,d,o,_){var s,k=h._fullLayout,M=k._subplots.cartesian,A=h.calcdata;if(!Array.isArray(d))for(d=[],s=0;s<A.length;s++)d.push(s);for(s=0;s<M.length;s++){for(var E,I=M[s],C=k._plots[I],R=[],O=0;O<A.length;O++){var D=A[O],L=D[0].trace;L.xaxis+L.yaxis===I&&((-1!==d.indexOf(L.index)||L.carpet)&&(E&&E[0].trace.xaxis+E[0].trace.yaxis===I&&-1!==["tonextx","tonexty","tonext"].indexOf(L.fill)&&-1===R.indexOf(E)&&R.push(E),R.push(D)),E=D)}i(h,C,R,o,_)}},ae.clean=function(h,d,o,_){var s,k,M,A=_._plots||{},E=d._plots||{},I=_._subplots||{};if(_._hasOnlyLargeSploms&&!d._hasOnlyLargeSploms)for(M in A)(s=A[M]).plotgroup&&s.plotgroup.remove();var C=_._has&&_._has("gl"),R=d._has&&d._has("gl");if(C&&!R)for(M in A)(s=A[M])._scene&&s._scene.destroy();if(I.xaxis&&I.yaxis){var O=n.listIds({_fullLayout:_});for(k=0;k<O.length;k++){var D=O[k];d[n.id2name(D)]||_._infolayer.selectAll(".g-"+D+"title").remove()}}var L=_._has&&_._has("cartesian"),B=d._has&&d._has("cartesian");if(L&&!B)f(_._cartesianlayer.selectAll(".subplot"),_),_._defs.selectAll(".axesclip").remove(),delete _._axisConstraintGroups,delete _._axisMatchGroups;else if(I.cartesian)for(k=0;k<I.cartesian.length;k++){var j=I.cartesian[k];E[j]||(_._cartesianlayer.selectAll("."+j+",."+j+"-x,."+j+"-y").remove(),l(j,_))}},ae.drawFramework=function(h){var d=h._fullLayout,o=function(s){var k,M,A,E,I,C,R=s._fullLayout,O=R._subplots.cartesian,D=O.length,L=[],B=[];for(k=0;k<D;k++){var Y=(I=(E=R._plots[A=O[k]]).xaxis)._mainAxis._id+(C=E.yaxis)._mainAxis._id,Q=R._plots[Y];E.overlays=[],Y!==A&&Q?(E.mainplot=Y,E.mainplotinfo=Q,B.push(A)):(E.mainplot=void 0,E.mainplotinfo=void 0,L.push(A))}for(k=0;k<B.length;k++)(E=R._plots[A=B[k]]).mainplotinfo.overlays.push(E);var ne=L.concat(B),X=new Array(D);for(k=0;k<D;k++){var $=[A=ne[k],(I=(E=R._plots[A]).xaxis).layer,(C=E.yaxis).layer,I.overlaying||"",C.overlaying||""];for(M=0;M<E.overlays.length;M++)$.push(E.overlays[M].id);X[k]=$}return X}(h),_=d._cartesianlayer.selectAll(".subplot").data(o,String);_.enter().append("g").attr("class",function(s){return"subplot "+s[0]}),_.order(),_.exit().call(f,d),_.each(function(s){var k=s[0],M=d._plots[k];M.plotgroup=g.select(this),c(h,M),M.draglayer=p(d._draggers,"g",k)})},ae.rangePlot=function(h,d,o){c(h,d),i(h,d,o),y.style(h)},ae.toSVG=function(h){var d=h._fullLayout._glimages,o=g.select(h).selectAll(".svg-container");o.filter(function(_,s){return s===o.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var _=this.toDataURL("image/png");d.append("svg:image").attr({xmlns:t.svg,"xlink:href":_,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},ae.updateFx=x("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(x,oe,ae){"use strict";var g=x("../font_attributes"),m=x("../../components/color/attributes"),w=x("../../components/drawing/attributes").dash,y=x("../../lib/extend").extendFlat,e=x("../../plot_api/plot_template").templatedArray,r=x("../../plots/cartesian/axis_format_attributes").descriptionWithDates,n=x("../../constants/numerical").ONEDAY,a=x("./constants"),t=a.HOUR_PATTERN,p=a.WEEKDAY_PATTERN,u={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function i(E){return{valType:"integer",min:0,dflt:E?5:0,editType:"ticks"}}var c={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},f={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},l={valType:"data_array",editType:"ticks"},h={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function d(E){var I={valType:"number",min:0,editType:"ticks"};return E||(I.dflt=5),I}function o(E){var I={valType:"number",min:0,editType:"ticks"};return E||(I.dflt=1),I}var _={valType:"color",dflt:m.defaultLine,editType:"ticks"},s={valType:"color",dflt:m.lightLine,editType:"ticks"};function k(E){var I={valType:"number",min:0,editType:"ticks"};return E||(I.dflt=1),I}var M=y({},w,{editType:"ticks"}),A={valType:"boolean",editType:"ticks"};oe.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:m.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:g({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[p,t,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:n},editType:"calc"}),tickmode:u,nticks:i(),tick0:c,dtick:f,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:l,ticktext:{valType:"data_array",editType:"ticks"},ticks:h,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:d(),tickwidth:o(),tickcolor:_,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:y({},w,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:g({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:r("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:r("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:m.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:A,gridcolor:s,gridwidth:k(),griddash:M,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:m.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:m.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},minor:{tickmode:u,nticks:i("minor"),tick0:c,dtick:f,tickvals:l,ticks:h,ticklen:d("minor"),tickwidth:o("minor"),tickcolor:_,gridcolor:s,gridwidth:k("minor"),griddash:M,showgrid:A,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:g({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/color"),w=x("../../components/fx/helpers").isUnifiedHover,y=x("../../components/fx/hovermode_defaults"),e=x("../../plot_api/plot_template"),r=x("../layout_attributes"),n=x("./layout_attributes"),a=x("./type_defaults"),t=x("./axis_defaults"),p=x("./constraints"),u=x("./position_defaults"),i=x("./axis_ids"),c=i.id2name,f=i.name2id,l=x("./constants").AX_ID_PATTERN,h=x("../../registry"),d=h.traceIs,o=h.getComponentMethod;function _(s,k,M){Array.isArray(s[k])?s[k].push(M):s[k]=[M]}oe.exports=function(s,k,M){var A,E,I=k.autotypenumbers,C={},R={},O={},D={},L={},B={},j={},W={},Y={},Q={};for(A=0;A<M.length;A++){var ne=M[A];if(d(ne,"cartesian")||d(ne,"gl2d")){var X,$;if(ne.xaxis)X=c(ne.xaxis),_(C,X,ne);else if(ne.xaxes)for(E=0;E<ne.xaxes.length;E++)_(C,c(ne.xaxes[E]),ne);if(ne.yaxis)$=c(ne.yaxis),_(C,$,ne);else if(ne.yaxes)for(E=0;E<ne.yaxes.length;E++)_(C,c(ne.yaxes[E]),ne);"funnel"===ne.type?"h"===ne.orientation?(X&&(R[X]=!0),$&&(j[$]=!0)):$&&(O[$]=!0):"image"===ne.type?($&&(W[$]=!0),X&&(W[X]=!0)):($&&(L[$]=!0,B[$]=!0),d(ne,"carpet")&&("carpet"!==ne.type||ne._cheater)||X&&(D[X]=!0)),"carpet"===ne.type&&ne._cheater&&X&&(R[X]=!0),d(ne,"2dMap")&&(Y[X]=!0,Y[$]=!0),d(ne,"oriented")&&(Q["h"===ne.orientation?$:X]=!0)}}var re=k._subplots,H=re.xaxis,U=re.yaxis,G=g.simpleMap(H,c),ie=g.simpleMap(U,c),q=G.concat(ie),ee=m.background;H.length&&U.length&&(ee=g.coerce(s,k,r,"plot_bgcolor"));var te,se,ue,de,he,xe=m.combine(ee,k.paper_bgcolor);function ge(){he._traceIndices=(C[te]||[]).map(function(Ft){return Ft._expandedIndex}),he._annIndices=[],he._shapeIndices=[],he._imgIndices=[],he._subplotsWith=[],he._counterAxes=[],he._name=he._attr=te,he._id=se}function _e(lt,Ft){return g.coerce(de,he,n,lt,Ft)}function Ce(lt,Ft){return g.coerce2(de,he,n,lt,Ft)}function Le(lt){return"x"===lt?U:H}function Ie(lt,Ft){for(var Jt="x"===lt?G:ie,ln=[],dn=0;dn<Jt.length;dn++){var cn=Jt[dn];cn===Ft||(s[cn]||{}).overlaying||ln.push(f(cn))}return ln}var Be={x:Le("x"),y:Le("y")},ve=Be.x.concat(Be.y),Te={},Pe=[];function De(){var lt=de.matches;l.test(lt)&&-1===ve.indexOf(lt)&&(Te[lt]=de.type,Pe=Object.keys(Te))}var Fe=y(s,k),Ue=w(Fe);for(A=0;A<q.length;A++){se=f(te=q[A]),ue=te.charAt(0),g.isPlainObject(s[te])||(s[te]={}),de=s[te],he=e.newContainer(k,te,ue+"axis"),ge();var st={hasMinor:!0,letter:ue,font:k.font,outerTicks:Y[te],showGrid:!Q[te],data:C[te]||[],bgColor:xe,calendar:k.calendar,automargin:!0,visibleDflt:"x"===ue&&!D[te]&&R[te]||"y"===ue&&!L[te]&&O[te],reverseDflt:"y"===ue&&(!B[te]&&j[te]||W[te]),autotypenumbersDflt:I,splomStash:((k._splomAxes||{})[ue]||{})[se]};_e("uirevision",k.uirevision),a(de,he,_e,st),t(de,he,_e,st,k);var Ve=Ue&&ue===Fe.charAt(0),$e=Ce("spikecolor",Ue?he.color:void 0),Qe=Ce("spikethickness",Ue?1.5:void 0),tt=Ce("spikedash",Ue?"dot":void 0),ut=Ce("spikemode",Ue?"across":void 0),xt=Ce("spikesnap");_e("showspikes",!!(Ve||$e||Qe||tt||ut||xt))||(delete he.spikecolor,delete he.spikethickness,delete he.spikedash,delete he.spikemode,delete he.spikesnap),u(de,he,_e,{letter:ue,counterAxes:Be[ue],overlayableAxes:Ie(ue,te),grid:k.grid}),_e("title.standoff"),De(),he._input=de}for(A=0;A<Pe.length;){se=Pe[A++],ue=(te=c(se)).charAt(0),g.isPlainObject(s[te])||(s[te]={}),de=s[te],he=e.newContainer(k,te,ue+"axis"),ge();var kt={letter:ue,font:k.font,outerTicks:Y[te],showGrid:!Q[te],data:[],bgColor:xe,calendar:k.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:I,splomStash:((k._splomAxes||{})[ue]||{})[se]};_e("uirevision",k.uirevision),he.type=Te[se]||"linear",t(de,he,_e,kt,k),u(de,he,_e,{letter:ue,counterAxes:Be[ue],overlayableAxes:Ie(ue,te),grid:k.grid}),_e("fixedrange"),De(),he._input=de}var Bt=o("rangeslider","handleDefaults"),Rt=o("rangeselector","handleDefaults");for(A=0;A<G.length;A++)de=s[te=G[A]],he=k[te],Bt(s,k,te),"date"===he.type&&Rt(de,he,k,ie,he.calendar),_e("fixedrange");for(A=0;A<ie.length;A++){de=s[te=ie[A]];var ft=k[c((he=k[te]).anchor)];_e("fixedrange",o("rangeslider","isVisible")(ft))}p.handleDefaults(s,k,{axIds:ve.concat(Pe).sort(i.idSort),axHasImage:W})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(x,oe,ae){"use strict";var g=x("tinycolor2").mix,m=x("../../components/color/attributes"),w=x("../../lib");oe.exports=function(y,e,r,n){var a=(n=n||{}).dfltColor;function t(s,k){return w.coerce2(y,e,n.attributes,s,k)}var p=t("linecolor",a),u=t("linewidth");r("showline",n.showLine||!!p||!!u)||(delete e.linecolor,delete e.linewidth);var i=t("gridcolor",g(a,n.bgColor,n.blend||m.lightFraction).toRgbString()),c=t("gridwidth"),f=t("griddash");if(r("showgrid",n.showGrid||!!i||!!c||!!f)||(delete e.gridcolor,delete e.gridwidth,delete e.griddash),n.hasMinor){var l=t("minor.gridcolor",g(e.gridcolor,n.bgColor,67).toRgbString()),h=t("minor.gridwidth",e.gridwidth||1),d=t("minor.griddash",e.griddash||"solid");r("minor.showgrid",!!l||!!h||!!d)||(delete e.minor.gridcolor,delete e.minor.gridwidth,delete e.minor.griddash)}if(!n.noZeroLine){var o=t("zerolinecolor",a),_=t("zerolinewidth");r("zeroline",n.showGrid||!!o||!!_)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib");oe.exports=function(w,y,e,r){var n,a,t,p,u=r.counterAxes||[],i=r.overlayableAxes||[],c=r.letter,f=r.grid;f&&(n=f._anchors[y._id],(a=f._domains[c][f._axisMap[y._id]])&&(t=f[c+"side"].split(" ")[0],p=f.domain[c]["right"===t||"top"===t?1:0])),a=a||[0,1],n=n||(g(w.position)?"free":u[0]||"free"),t=t||("x"===c?"bottom":"left"),p=p||0,"free"===m.coerce(w,y,{anchor:{valType:"enumerated",values:["free"].concat(u),dflt:n}},"anchor")&&e("position",p),m.coerce(w,y,{side:{valType:"enumerated",values:"x"===c?["bottom","top"]:["left","right"],dflt:t}},"side");var l=!1;if(i.length&&(l=m.coerce(w,y,{overlaying:{valType:"enumerated",values:[!1].concat(i),dflt:!1}},"overlaying")),!l){var h=e("domain",a);h[0]>h[1]-1/4096&&(y.domain=a),m.noneOrAll(w.domain,y.domain,a)}return e("layer"),y}},{"../../lib":503,"fast-isnumeric":190}],573:[function(x,oe,ae){"use strict";var g=x("./show_dflt");oe.exports=function(m,w,y,e,r){r||(r={});var n=r.tickSuffixDflt,a=g(m);y("tickprefix")&&y("showtickprefix",a),y("ticksuffix",n)&&y("showticksuffix",a)}},{"./show_dflt":577}],574:[function(x,oe,ae){"use strict";var g=x("../../constants/alignment").FROM_BL;oe.exports=function(m,w,y){void 0===y&&(y=g[m.constraintoward||"center"]);var e=[m.r2l(m.range[0]),m.r2l(m.range[1])],r=e[0]+(e[1]-e[0])*y;m.range=m._input.range=[m.l2r(r+(e[0]-r)*w),m.l2r(r+(e[1]-r)*w)],m.setScale()}},{"../../constants/alignment":471}],575:[function(x,oe,ae){"use strict";var g=x("polybooljs"),m=x("../../registry"),w=x("../../components/drawing").dashStyle,y=x("../../components/color"),e=x("../../components/fx"),r=x("../../components/fx/helpers").makeEventData,n=x("../../components/dragelement/helpers"),a=n.freeMode,t=n.rectMode,p=n.drawMode,u=n.openMode,i=n.selectMode,c=x("../../components/shapes/draw_newshape/display_outlines"),f=x("../../components/shapes/draw_newshape/helpers").handleEllipse,l=x("../../components/shapes/draw_newshape/newshapes"),h=x("../../lib"),d=x("../../lib/polygon"),o=x("../../lib/throttle"),_=x("./axis_ids").getFromId,s=x("../../lib/clear_gl_canvases"),k=x("../../plot_api/subroutines").redrawReglTraces,M=x("./constants"),A=M.MINSELECT,E=d.filter,I=d.tester,C=x("./handle_outline").clearSelect,R=x("./helpers"),O=R.p2r,D=R.axValue,L=R.getTransform;function B(G,ie,q,ee,te,se,ue){var de,he,xe,ge,_e,Ce,Le,Ie,Be,Ke,ve=ie._hoverdata,Te=ie._fullLayout.clickmode.indexOf("event")>-1,Pe=[];if((Ke=ve)&&Array.isArray(Ke)&&!0!==Ke[0].hoverOnBox){Q(G,ie,se);var De=function(Ke,st){var Ve,$e,Qe=Ke[0],tt=-1,ut=[];for($e=0;$e<st.length;$e++)if(Qe.fullData._expandedIndex===(Ve=st[$e]).cd[0].trace._expandedIndex){if(!0===Qe.hoverOnBox)break;void 0!==Qe.pointNumber?tt=Qe.pointNumber:void 0!==Qe.binNumber&&(tt=Qe.binNumber,ut=Qe.pointNumbers);break}return{pointNumber:tt,pointNumbers:ut,searchInfo:Ve}}(ve,de=X(ie,q,ee,te));if(De.pointNumbers.length>0?function(Ke,st){var Ve,$e,Qe,tt=[];for(Qe=0;Qe<Ke.length;Qe++)(Ve=Ke[Qe]).cd[0].trace.selectedpoints&&Ve.cd[0].trace.selectedpoints.length>0&&tt.push(Ve);if(1===tt.length&&tt[0]===st.searchInfo&&($e=st.searchInfo.cd[0].trace).selectedpoints.length===st.pointNumbers.length){for(Qe=0;Qe<st.pointNumbers.length;Qe++)if($e.selectedpoints.indexOf(st.pointNumbers[Qe])<0)return!1;return!0}return!1}(de,De):function(Ke){var Ve,$e,Qe=0;for($e=0;$e<Ke.length;$e++)if((Ve=Ke[$e].cd[0].trace).selectedpoints&&(Ve.selectedpoints.length>1||(Qe+=Ve.selectedpoints.length)>1))return!1;return 1===Qe}(de)&&(Ce=$(De))){for(ue&&ue.remove(),Be=0;Be<de.length;Be++)(he=de[Be])._module.selectPoints(he,!1);re(ie,de),ne(se),Te&&ie.emit("plotly_deselect",null)}else{for(Le=G.shiftKey&&(void 0!==Ce?Ce:$(De)),xe=function(Ke,st,Ve){return{pointNumber:Ke,searchInfo:st,subtract:Ve}}(De.pointNumber,De.searchInfo,Le),ge=Y(se.selectionDefs.concat([xe])),Be=0;Be<de.length;Be++)if(_e=H(de[Be]._module.selectPoints(de[Be],ge),de[Be]),Pe.length)for(var Fe=0;Fe<_e.length;Fe++)Pe.push(_e[Fe]);else Pe=_e;if(re(ie,de,Ie={points:Pe}),xe&&se&&se.selectionDefs.push(xe),ue){var Ue=se.mergedPolygons,He=u(se.dragmode);c(U(Ue,He),ue,se)}Te&&ie.emit("plotly_selected",Ie)}}}function j(G){return"pointNumber"in G&&"searchInfo"in G}function W(G){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ie,q,ee,te){return te.cd[0].trace._expandedIndex===G.searchInfo.cd[0].trace._expandedIndex&&ee===G.pointNumber},isRect:!1,degenerate:!1,subtract:G.subtract}}function Y(G){for(var ie=[],q=j(G[0])?0:G[0][0][0],ee=q,te=j(G[0])?0:G[0][0][1],se=te,ue=0;ue<G.length;ue++)if(j(G[ue]))ie.push(W(G[ue]));else{var de=d.tester(G[ue]);de.subtract=G[ue].subtract,ie.push(de),q=Math.min(q,de.xmin),ee=Math.max(ee,de.xmax),te=Math.min(te,de.ymin),se=Math.max(se,de.ymax)}return{xmin:q,xmax:ee,ymin:te,ymax:se,pts:[],contains:function(he,xe,ge,_e){for(var Ce=!1,Le=0;Le<ie.length;Le++)ie[Le].contains(he,xe,ge,_e)&&(Ce=!1===ie[Le].subtract);return Ce},isRect:!1,degenerate:!1}}function Q(G,ie,q){ie._fullLayout._drawing=!1;var ee=ie._fullLayout,te=q.plotinfo,se=q.dragmode,ue=ee._lastSelectedSubplot&&ee._lastSelectedSubplot===te.id,de=(G.shiftKey||G.altKey)&&!(p(se)&&u(se));ue&&de&&te.selection&&te.selection.selectionDefs&&!q.selectionDefs?(q.selectionDefs=te.selection.selectionDefs,q.mergedPolygons=te.selection.mergedPolygons):de&&te.selection||ne(q),ue||(C(ie),ee._lastSelectedSubplot=te.id)}function ne(G){var ie=G.dragmode,q=G.plotinfo,ee=G.gd;if(ee._fullLayout._activeShapeIndex>=0&&ee._fullLayout._deactivateShape(ee),p(ie)){var te=ee._fullLayout._zoomlayer.selectAll(".select-outline-"+q.id);if(te&&ee._fullLayout._drawing){var se=l(te,G);se&&m.call("_guiRelayout",ee,{shapes:se}),ee._fullLayout._drawing=!1}}q.selection={},q.selection.selectionDefs=G.selectionDefs=[],q.selection.mergedPolygons=G.mergedPolygons=[]}function X(G,ie,q,ee){var te,se,ue,de=[],he=ie.map(function(Le){return Le._id}),xe=q.map(function(Le){return Le._id});for(ue=0;ue<G.calcdata.length;ue++)if(!0===(se=(te=G.calcdata[ue])[0].trace).visible&&se._module&&se._module.selectPoints)if(!ee||se.subplot!==ee&&se.geo!==ee)if("splom"===se.type&&se._xaxes[he[0]]&&se._yaxes[xe[0]]){var ge=Ce(se._module,te,ie[0],q[0]);ge.scene=G._fullLayout._splomScenes[se.uid],de.push(ge)}else if("sankey"===se.type){var _e=Ce(se._module,te,ie[0],q[0]);de.push(_e)}else{if(-1===he.indexOf(se.xaxis)||-1===xe.indexOf(se.yaxis))continue;de.push(Ce(se._module,te,_(G,se.xaxis),_(G,se.yaxis)))}else de.push(Ce(se._module,te,ie[0],q[0]));return de;function Ce(Le,Ie,Be,ve){return{_module:Le,cd:Ie,xaxis:Be,yaxis:ve}}}function $(G){var ie=G.searchInfo.cd[0].trace,ee=G.pointNumbers;return!!ie.selectedpoints&&ie.selectedpoints.indexOf(ee.length>0?ee[0]:G.pointNumber)>-1}function re(G,ie,q){var ee,te,se,ue;for(ee=0;ee<ie.length;ee++){var de=ie[ee].cd[0].trace._fullInput,he=G._fullLayout._tracePreGUI[de.uid]||{};void 0===he.selectedpoints&&(he.selectedpoints=de._input.selectedpoints||null)}if(q){var xe=q.points||[];for(ee=0;ee<ie.length;ee++)(ue=ie[ee].cd[0].trace)._input.selectedpoints=ue._fullInput.selectedpoints=[],ue._fullInput!==ue&&(ue.selectedpoints=[]);for(ee=0;ee<xe.length;ee++){var ge=xe[ee],_e=ge.data,Ce=ge.fullData;ge.pointIndices?([].push.apply(_e.selectedpoints,ge.pointIndices),ue._fullInput!==ue&&[].push.apply(Ce.selectedpoints,ge.pointIndices)):(_e.selectedpoints.push(ge.pointIndex),ue._fullInput!==ue&&Ce.selectedpoints.push(ge.pointIndex))}}else for(ee=0;ee<ie.length;ee++)delete(ue=ie[ee].cd[0].trace).selectedpoints,delete ue._input.selectedpoints,ue._fullInput!==ue&&delete ue._fullInput.selectedpoints;var Le=!1;for(ee=0;ee<ie.length;ee++){ue=(se=(te=ie[ee]).cd)[0].trace,m.traceIs(ue,"regl")&&(Le=!0);var Ie=te._module,Be=Ie.styleOnSelect||Ie.style;Be&&(Be(G,se,se[0].node3),se[0].nodeRangePlot3&&Be(G,se,se[0].nodeRangePlot3))}Le&&(s(G),k(G))}function H(G,ie){if(Array.isArray(G))for(var q=ie.cd,ee=ie.cd[0].trace,te=0;te<G.length;te++)G[te]=r(G[te],ee,q);return G}function U(G,ie){for(var q=[],ee=0;ee<G.length;ee++){q[ee]=[];for(var te=0;te<G[ee].length;te++){q[ee][te]=[],q[ee][te][0]=te?"L":"M";for(var se=0;se<G[ee][te].length;se++)q[ee][te].push(G[ee][te][se])}ie||q[ee].push(["Z",q[ee][0][1],q[ee][0][2]])}return q}oe.exports={prepSelect:function(G,ie,q,ee,te){var se=a(te),ue=t(te),de=u(te),he=p(te),xe=i(te),ge="drawcircle"===te,_e="drawline"===te||ge,Ce=ee.gd,Le=Ce._fullLayout,Ie=Le._zoomlayer,Be=ee.element.getBoundingClientRect(),ve=ee.plotinfo,Te=L(ve),Pe=ie-Be.left,De=q-Be.top;Le._calcInverseTransform(Ce);var Ue,He,Ke,st,Ve,$e,Qe,Fe=h.apply3DTransform(Le._invTransform)(Pe,De),tt=Le._invScaleX,ut=Le._invScaleY,xt=Pe=Fe[0],kt=De=Fe[1],Bt="M"+Pe+","+De,Rt=ee.xaxes[0]._length,ft=ee.yaxes[0]._length,lt=ee.xaxes.concat(ee.yaxes),Ft=G.altKey&&!(p(te)&&de);Q(G,Ce,ee),se&&(Ue=E([[Pe,De]],M.BENDPX));var Jt=Ie.selectAll("path.select-outline-"+ve.id).data(he?[0]:[1,2]),ln=Le.newshape;Jt.enter().append("path").attr("class",function(Se){return"select-outline select-outline-"+Se+" select-outline-"+ve.id}).style(he?{opacity:ln.opacity/2,fill:de?void 0:ln.fillcolor,stroke:ln.line.color,"stroke-dasharray":w(ln.line.dash,ln.line.width),"stroke-width":ln.line.width+"px"}:{}).attr("fill-rule",ln.fillrule).classed("cursor-move",!!he).attr("transform",Te).attr("d",Bt+"Z");var dn,cn=Ie.append("path").attr("class","zoombox-corners").style({fill:y.background,stroke:y.defaultLine,"stroke-width":1}).attr("transform",Te).attr("d","M0,0Z"),Tn=Le._uid+M.SELECTID,nn=[],Me=X(Ce,ee.xaxes,ee.yaxes,ee.subplot);function Ee(Se,je){return Se-je}dn=ve.fillRangeItems?ve.fillRangeItems:ue?function(Se,je){var qe=Se.range={};for(Ve=0;Ve<lt.length;Ve++){var Je=lt[Ve],at=Je._id.charAt(0);qe[Je._id]=[O(Je,je[at+"min"]),O(Je,je[at+"max"])].sort(Ee)}}:function(Se,je,qe){var Je=Se.lassoPoints={};for(Ve=0;Ve<lt.length;Ve++){var at=lt[Ve];Je[at._id]=qe.filtered.map(D(at))}},ee.moveFn=function(Se,je){xt=Math.max(0,Math.min(Rt,tt*Se+Pe)),kt=Math.max(0,Math.min(ft,ut*je+De));var Ut,Wt,qe=Math.abs(xt-Pe),Je=Math.abs(kt-De);if(ue){var at,it,yt;if(xe){var vt=Le.selectdirection;switch(at="any"===vt?Je<Math.min(.6*qe,A)?"h":qe<Math.min(.6*Je,A)?"v":"d":vt){case"h":it=ge?ft/2:0,yt=ft;break;case"v":it=ge?Rt/2:0,yt=Rt}}if(he)switch(Le.newshape.drawdirection){case"vertical":at="h",it=ge?ft/2:0,yt=ft;break;case"horizontal":at="v",it=ge?Rt/2:0,yt=Rt;break;case"ortho":qe<Je?(at="h",it=De,yt=kt):(at="v",it=Pe,yt=xt);break;default:at="d"}"h"===at?((st=_e?f(ge,[xt,it],[xt,yt]):[[Pe,it],[Pe,yt],[xt,yt],[xt,it]]).xmin=_e?xt:Math.min(Pe,xt),st.xmax=_e?xt:Math.max(Pe,xt),st.ymin=Math.min(it,yt),st.ymax=Math.max(it,yt),cn.attr("d","M"+st.xmin+","+(De-A)+"h-4v"+2*A+"h4ZM"+(st.xmax-1)+","+(De-A)+"h4v"+2*A+"h-4Z")):"v"===at?((st=_e?f(ge,[it,kt],[yt,kt]):[[it,De],[it,kt],[yt,kt],[yt,De]]).xmin=Math.min(it,yt),st.xmax=Math.max(it,yt),st.ymin=_e?kt:Math.min(De,kt),st.ymax=_e?kt:Math.max(De,kt),cn.attr("d","M"+(Pe-A)+","+st.ymin+"v-4h"+2*A+"v4ZM"+(Pe-A)+","+(st.ymax-1)+"v4h"+2*A+"v-4Z")):"d"===at&&((st=_e?f(ge,[Pe,De],[xt,kt]):[[Pe,De],[Pe,kt],[xt,kt],[xt,De]]).xmin=Math.min(Pe,xt),st.xmax=Math.max(Pe,xt),st.ymin=Math.min(De,kt),st.ymax=Math.max(De,kt),cn.attr("d","M0,0Z"))}else se&&(Ue.addPt([xt,kt]),st=Ue.filtered);ee.selectionDefs&&ee.selectionDefs.length?(Ut=ee.mergedPolygons,Wt=st,Ke=Ft?g.difference({regions:Ut,inverted:!1},{regions:[Wt],inverted:!1}).regions:g.union({regions:Ut,inverted:!1},{regions:[Wt],inverted:!1}).regions,st.subtract=Ft,He=Y(ee.selectionDefs.concat([st]))):(Ke=[st],He=I(st)),c(U(Ke,de),Jt,ee),xe&&o.throttle(Tn,M.SELECTDELAY,function(){var Ut;nn=[];var Wt,gt=[];for(Ve=0;Ve<Me.length;Ve++)if(Wt=($e=Me[Ve])._module.selectPoints($e,He),gt.push(Wt),Ut=H(Wt,$e),nn.length)for(var At=0;At<Ut.length;At++)nn.push(Ut[At]);else nn=Ut;re(Ce,Me,Qe={points:nn}),dn(Qe,st,Ue),ee.gd.emit("plotly_selecting",Qe)})},ee.clickFn=function(Se,je){if(cn.remove(),Ce._fullLayout._activeShapeIndex>=0)Ce._fullLayout._deactivateShape(Ce);else if(!he){var qe=Le.clickmode;o.done(Tn).then(function(){if(o.clear(Tn),2===Se){for(Jt.remove(),Ve=0;Ve<Me.length;Ve++)($e=Me[Ve])._module.selectPoints($e,!1);re(Ce,Me),ne(ee),Ce.emit("plotly_deselect",null)}else qe.indexOf("select")>-1&&B(je,Ce,ee.xaxes,ee.yaxes,ee.subplot,ee,Jt),"event"===qe&&Ce.emit("plotly_selected",void 0);e.click(Ce,je)}).catch(h.error)}},ee.doneFn=function(){cn.remove(),o.done(Tn).then(function(){o.clear(Tn),ee.gd.emit("plotly_selected",Qe),st&&ee.selectionDefs&&(st.subtract=Ft,ee.selectionDefs.push(st),ee.mergedPolygons.length=0,[].push.apply(ee.mergedPolygons,Ke)),ee.doneFnCompleted&&ee.doneFnCompleted(nn)}).catch(h.error),he&&ne(ee)}},clearSelect:C,clearSelectionsCache:ne,selectOnClick:B}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("d3-time-format").utcFormat,w=x("../../lib"),y=w.numberFormat,e=x("fast-isnumeric"),r=w.cleanNumber,n=w.ms2DateTime,a=w.dateTime2ms,t=w.ensureNumber,p=w.isArrayOrTypedArray,u=x("../../constants/numerical"),i=u.FP_SAFE,c=u.BADNUM,f=u.LOG_CLIP,l=u.ONEWEEK,h=u.ONEDAY,d=u.ONEHOUR,o=u.ONEMIN,_=u.ONESEC,s=x("./axis_ids"),k=x("./constants"),M=k.HOUR_PATTERN,A=k.WEEKDAY_PATTERN;function E(C){return Math.pow(10,C)}function I(C){return null!=C}oe.exports=function(C,R){R=R||{};var O=C._id||"x",D=O.charAt(0);function L(q,ee){if(q>0)return Math.log(q)/Math.LN10;if(q<=0&&ee&&C.range&&2===C.range.length){var te=C.range[0],se=C.range[1];return.5*(te+se-2*f*Math.abs(te-se))}return c}function B(q,ee,te,se){if((se||{}).msUTC&&e(q))return+q;var ue=a(q,te||C.calendar);if(ue===c){if(!e(q))return c;q=+q;var de=Math.floor(10*w.mod(q+.05,1)),he=Math.round(q-de/10);ue=a(new Date(he))+de/10}return ue}function j(q,ee,te){return n(q,ee,te||C.calendar)}function W(q){return C._categories[Math.round(q)]}function Y(q){if(I(q)){if(void 0===C._categoriesMap&&(C._categoriesMap={}),void 0!==C._categoriesMap[q])return C._categoriesMap[q];C._categories.push("number"==typeof q?String(q):q);var ee=C._categories.length-1;return C._categoriesMap[q]=ee,ee}return c}function Q(q){if(C._categoriesMap)return C._categoriesMap[q]}function ne(q){var ee=Q(q);return void 0!==ee?ee:e(q)?+q:void 0}function X(q){return e(q)?+q:Q(q)}function $(q,ee,te){return g.round(te+ee*q,2)}function re(q,ee,te){return(q-te)/ee}var H=function(q){return e(q)?$(q,C._m,C._b):c},U=function(q){return re(q,C._m,C._b)};if(C.rangebreaks){var G="y"===D;H=function(q){if(!e(q))return c;var ee=C._rangebreaks.length;if(!ee)return $(q,C._m,C._b);var te=G;C.range[0]>C.range[1]&&(te=!te);for(var se=te?-1:1,ue=se*q,de=0,he=0;he<ee;he++){var xe=se*C._rangebreaks[he].min,ge=se*C._rangebreaks[he].max;if(ue<xe)break;if(!(ue>ge)){de=ue<(xe+ge)/2?he:he+1;break}de=he+1}var _e=C._B[de]||0;return isFinite(_e)?$(q,C._m2,_e):0},U=function(q){var ee=C._rangebreaks.length;if(!ee)return re(q,C._m,C._b);for(var te=0,se=0;se<ee&&!(q<C._rangebreaks[se].pmin);se++)q>C._rangebreaks[se].pmax&&(te=se+1);return re(q,C._m2,C._B[te])}}C.c2l="log"===C.type?L:t,C.l2c="log"===C.type?E:t,C.l2p=H,C.p2l=U,C.c2p="log"===C.type?function(q,ee){return H(L(q,ee))}:H,C.p2c="log"===C.type?function(q){return E(U(q))}:U,-1!==["linear","-"].indexOf(C.type)?(C.d2r=C.r2d=C.d2c=C.r2c=C.d2l=C.r2l=r,C.c2d=C.c2r=C.l2d=C.l2r=t,C.d2p=C.r2p=function(q){return C.l2p(r(q))},C.p2d=C.p2r=U,C.cleanPos=t):"log"===C.type?(C.d2r=C.d2l=function(q,ee){return L(r(q),ee)},C.r2d=C.r2c=function(q){return E(r(q))},C.d2c=C.r2l=r,C.c2d=C.l2r=t,C.c2r=L,C.l2d=E,C.d2p=function(q,ee){return C.l2p(C.d2r(q,ee))},C.p2d=function(q){return E(U(q))},C.r2p=function(q){return C.l2p(r(q))},C.p2r=U,C.cleanPos=t):"date"===C.type?(C.d2r=C.r2d=w.identity,C.d2c=C.r2c=C.d2l=C.r2l=B,C.c2d=C.c2r=C.l2d=C.l2r=j,C.d2p=C.r2p=function(q,ee,te){return C.l2p(B(q,0,te))},C.p2d=C.p2r=function(q,ee,te){return j(U(q),ee,te)},C.cleanPos=function(q){return w.cleanDate(q,c,C.calendar)}):"category"===C.type?(C.d2c=C.d2l=Y,C.r2d=C.c2d=C.l2d=W,C.d2r=C.d2l_noadd=ne,C.r2c=function(q){var ee=X(q);return void 0!==ee?ee:C.fraction2r(.5)},C.l2r=C.c2r=t,C.r2l=X,C.d2p=function(q){return C.l2p(C.r2c(q))},C.p2d=function(q){return W(U(q))},C.r2p=C.d2p,C.p2r=U,C.cleanPos=function(q){return"string"==typeof q&&""!==q?q:t(q)}):"multicategory"===C.type&&(C.r2d=C.c2d=C.l2d=W,C.d2r=C.d2l_noadd=ne,C.r2c=function(q){var ee=ne(q);return void 0!==ee?ee:C.fraction2r(.5)},C.r2c_just_indices=Q,C.l2r=C.c2r=t,C.r2l=ne,C.d2p=function(q){return C.l2p(C.r2c(q))},C.p2d=function(q){return W(U(q))},C.r2p=C.d2p,C.p2r=U,C.cleanPos=function(q){return Array.isArray(q)||"string"==typeof q&&""!==q?q:t(q)},C.setupMultiCategory=function(q){var ee,te,se=C._traceIndices,ue=C._matchGroup;if(ue&&0===C._categories.length)for(var de in ue)if(de!==O){var he=R[s.id2name(de)];se=se.concat(he._traceIndices)}var xe=[[0,{}],[0,{}]],ge=[];for(ee=0;ee<se.length;ee++){var _e=q[se[ee]];if(D in _e){var Ce=_e[D],Le=_e._length||w.minRowLength(Ce);if(p(Ce[0])&&p(Ce[1]))for(te=0;te<Le;te++){var Ie=Ce[0][te],Be=Ce[1][te];I(Ie)&&I(Be)&&(ge.push([Ie,Be]),Ie in xe[0][1]||(xe[0][1][Ie]=xe[0][0]++),Be in xe[1][1]||(xe[1][1][Be]=xe[1][0]++))}}}for(ge.sort(function(ve,Te){var Pe=xe[0][1],De=Pe[ve[0]]-Pe[Te[0]];if(De)return De;var Fe=xe[1][1];return Fe[ve[1]]-Fe[Te[1]]}),ee=0;ee<ge.length;ee++)Y(ge[ee])}),C.fraction2r=function(q){var ee=C.r2l(C.range[0]),te=C.r2l(C.range[1]);return C.l2r(ee+q*(te-ee))},C.r2fraction=function(q){var ee=C.r2l(C.range[0]),te=C.r2l(C.range[1]);return(C.r2l(q)-ee)/(te-ee)},C.cleanRange=function(q,ee){ee||(ee={}),q||(q="range");var te,se,ue=w.nestedProperty(C,q).get();if(se=(se="date"===C.type?w.dfltRange(C.calendar):"y"===D?k.DFLTRANGEY:"realaxis"===C._name?[0,1]:ee.dfltRange||k.DFLTRANGEX).slice(),"tozero"!==C.rangemode&&"nonnegative"!==C.rangemode||(se[0]=0),ue&&2===ue.length)for("date"!==C.type||C.autorange||(ue[0]=w.cleanDate(ue[0],c,C.calendar),ue[1]=w.cleanDate(ue[1],c,C.calendar)),te=0;te<2;te++)if("date"===C.type){if(!w.isDateTime(ue[te],C.calendar)){C[q]=se;break}if(C.r2l(ue[0])===C.r2l(ue[1])){var de=w.constrain(C.r2l(ue[0]),w.MIN_MS+1e3,w.MAX_MS-1e3);ue[0]=C.l2r(de-1e3),ue[1]=C.l2r(de+1e3);break}}else{if(!e(ue[te])){if(!e(ue[1-te])){C[q]=se;break}ue[te]=ue[1-te]*(te?10:.1)}if(ue[te]<-i?ue[te]=-i:ue[te]>i&&(ue[te]=i),ue[0]===ue[1]){var he=Math.max(1,Math.abs(1e-6*ue[0]));ue[0]-=he,ue[1]+=he}}else w.nestedProperty(C,q).set(se)},C.setScale=function(q){var ee=R._size;if(C.overlaying){var te=s.getFromId({_fullLayout:R},C.overlaying);C.domain=te.domain}var se=q&&C._r?"_r":"range",ue=C.calendar;C.cleanRange(se);var de,he,xe=C.r2l(C[se][0],ue),ge=C.r2l(C[se][1],ue),_e="y"===D;if(_e?(C._offset=ee.t+(1-C.domain[1])*ee.h,C._length=ee.h*(C.domain[1]-C.domain[0]),C._m=C._length/(xe-ge),C._b=-C._m*ge):(C._offset=ee.l+C.domain[0]*ee.w,C._length=ee.w*(C.domain[1]-C.domain[0]),C._m=C._length/(ge-xe),C._b=-C._m*xe),C._rangebreaks=[],C._lBreaks=0,C._m2=0,C._B=[],C.rangebreaks&&(C._rangebreaks=C.locateBreaks(Math.min(xe,ge),Math.max(xe,ge)),C._rangebreaks.length)){for(de=0;de<C._rangebreaks.length;de++)he=C._rangebreaks[de],C._lBreaks+=Math.abs(he.max-he.min);var Ce=_e;xe>ge&&(Ce=!Ce),Ce&&C._rangebreaks.reverse();var Le=Ce?-1:1;for(C._m2=Le*C._length/(Math.abs(ge-xe)-C._lBreaks),C._B.push(-C._m2*(_e?ge:xe)),de=0;de<C._rangebreaks.length;de++)C._B.push(C._B[C._B.length-1]-Le*C._m2*((he=C._rangebreaks[de]).max-he.min));for(de=0;de<C._rangebreaks.length;de++)(he=C._rangebreaks[de]).pmin=H(he.min),he.pmax=H(he.max)}if(!isFinite(C._m)||!isFinite(C._b)||C._length<0)throw R._replotting=!1,new Error("Something went wrong with axis scaling")},C.maskBreaks=function(q){var ee,te,se,ue,de,he=C.rangebreaks||[];he._cachedPatterns||(he._cachedPatterns=he.map(function(Ie){return Ie.enabled&&Ie.bounds?w.simpleMap(Ie.bounds,Ie.pattern?r:C.d2c):null})),he._cachedValues||(he._cachedValues=he.map(function(Ie){return Ie.enabled&&Ie.values?w.simpleMap(Ie.values,C.d2c).sort(w.sorterAsc):null}));for(var xe=0;xe<he.length;xe++){var ge=he[xe];if(ge.enabled)if(ge.bounds){switch(te=(ee=he._cachedPatterns[xe])[0],se=ee[1],ge.pattern){case A:ue=(de=new Date(q)).getUTCDay(),te>se&&(se+=7,ue<te&&(ue+=7));break;case M:ue=(de=new Date(q)).getUTCHours()+(de.getUTCMinutes()/60+de.getUTCSeconds()/3600+de.getUTCMilliseconds()/36e5),te>se&&(se+=24,ue<te&&(ue+=24));break;case"":ue=q}if(ue>=te&&ue<se)return c}else for(var Ce=he._cachedValues[xe],Le=0;Le<Ce.length;Le++)if(se=(te=Ce[Le])+ge.dvalue,q>=te&&q<se)return c}return q},C.locateBreaks=function(q,ee){var te,se,ue,de,he=[];if(!C.rangebreaks)return he;var xe=C.rangebreaks.slice().sort(function(Fe,Ue){return Fe.pattern===A&&Ue.pattern===M?-1:Ue.pattern===A&&Fe.pattern===M?1:0}),ge=function(Fe,Ue){if((Fe=w.constrain(Fe,q,ee))!==(Ue=w.constrain(Ue,q,ee))){for(var He=!0,Ke=0;Ke<he.length;Ke++){var st=he[Ke];Fe<st.max&&Ue>=st.min&&(Fe<st.min&&(st.min=Fe),Ue>st.max&&(st.max=Ue),He=!1)}He&&he.push({min:Fe,max:Ue})}};for(te=0;te<xe.length;te++){var _e=xe[te];if(_e.enabled)if(_e.bounds){var Ce=q,Le=ee;_e.pattern&&(Ce=Math.floor(Ce)),ue=(se=w.simpleMap(_e.bounds,_e.pattern?r:C.r2l))[0],de=se[1];var Ie,Be,ve=new Date(Ce);switch(_e.pattern){case A:Be=l,Ie=(de-ue+(de<ue?7:0))*h,Ce+=ue*h-(ve.getUTCDay()*h+ve.getUTCHours()*d+ve.getUTCMinutes()*o+ve.getUTCSeconds()*_+ve.getUTCMilliseconds());break;case M:Be=h,Ie=(de-ue+(de<ue?24:0))*d,Ce+=ue*d-(ve.getUTCHours()*d+ve.getUTCMinutes()*o+ve.getUTCSeconds()*_+ve.getUTCMilliseconds());break;default:Ce=Math.min(se[0],se[1]),Ie=Be=(Le=Math.max(se[0],se[1]))-Ce}for(var Te=Ce;Te<Le;Te+=Be)ge(Te,Te+Ie)}else for(var Pe=w.simpleMap(_e.values,C.d2c),De=0;De<Pe.length;De++)ge(ue=Pe[De],de=ue+_e.dvalue)}return he.sort(function(Fe,Ue){return Fe.min-Ue.min}),he},C.makeCalcdata=function(q,ee,te){var se,ue,de,he,xe=C.type,ge="date"===xe&&q[ee+"calendar"];if(ee in q){if(se=q[ee],he=q._length||w.minRowLength(se),w.isTypedArray(se)&&("linear"===xe||"log"===xe)){if(he===se.length)return se;if(se.subarray)return se.subarray(0,he)}if("multicategory"===xe)return function(Le,Ie){for(var Be=new Array(Ie),ve=0;ve<Ie;ve++)Be[ve]=Q([(Le[0]||[])[ve],(Le[1]||[])[ve]]);return Be}(se,he);for(ue=new Array(he),de=0;de<he;de++)ue[de]=C.d2c(se[de],0,ge,te)}else{var _e=ee+"0"in q?C.d2c(q[ee+"0"],0,ge):0,Ce=q["d"+ee]?Number(q["d"+ee]):1;for(se=q[{x:"y",y:"x"}[ee]],he=q._length||se.length,ue=new Array(he),de=0;de<he;de++)ue[de]=_e+de*Ce}if(C.rangebreaks)for(de=0;de<he;de++)ue[de]=C.maskBreaks(ue[de]);return ue},C.isValidRange=function(q){return Array.isArray(q)&&2===q.length&&e(C.r2l(q[0]))&&e(C.r2l(q[1]))},C.isPtWithinRange=function(q,ee){var te=C.c2l(q[D],null,ee),se=C.r2l(C.range[0]),ue=C.r2l(C.range[1]);return se<ue?se<=te&&te<=ue:ue<=te&&te<=se},C._emptyCategories=function(){C._categories=[],C._categoriesMap={}},C.clearCalc=function(){var q=C._matchGroup;if(q){var ee=null,te=null;for(var se in q){var ue=R[s.id2name(se)];if(ue._categories){ee=ue._categories,te=ue._categoriesMap;break}}ee&&te?(C._categories=ee,C._categoriesMap=te):C._emptyCategories()}else C._emptyCategories();if(C._initialCategories)for(var de=0;de<C._initialCategories.length;de++)Y(C._initialCategories[de])},C.sortByInitialCategories=function(){var q=[];if(C._emptyCategories(),C._initialCategories)for(var ee=0;ee<C._initialCategories.length;ee++)Y(C._initialCategories[ee]);q=q.concat(C._traceIndices);var te=C._matchGroup;for(var se in te)if(O!==se){var ue=R[s.id2name(se)];ue._categories=C._categories,ue._categoriesMap=C._categoriesMap,q=q.concat(ue._traceIndices)}return q};var ie=R._d3locale;"date"===C.type&&(C._dateFormat=ie?ie.timeFormat:m,C._extraFormat=R._extraFormat),C._separators=R.separators,C._numFormat=ie?ie.numberFormat:y,delete C._minDtick,delete C._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(x,oe,ae){"use strict";oe.exports=function(g){var m=["showexponent","showtickprefix","showticksuffix"].filter(function(w){return void 0!==g[w]});if(m.every(function(w){return g[w]===g[m[0]]})||1===m.length)return g[m[0]]}},{}],578:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/color").contrast,w=x("./layout_attributes"),y=x("./show_dflt"),e=x("../array_container_defaults");function r(n,a){function t(p,u){return g.coerce(n,a,w.tickformatstops,p,u)}t("enabled")&&(t("dtickrange"),t("value"))}oe.exports=function(n,a,t,p,u){u||(u={});var i=y(n);if(t("showticklabels")){var c=u.font||{},f=a.color,l=-1!==(a.ticklabelposition||"").indexOf("inside")?m(u.bgColor):f&&f!==w.color.dflt?f:c.color;if(g.coerceFont(t,"tickfont",{family:c.family,size:c.size,color:l}),u.noTicklabelstep||"multicategory"===p||"log"===p||t("ticklabelstep"),u.noAng||t("tickangle"),"category"!==p){var h=t("tickformat");e(n,a,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:r}),a.tickformatstops.length||delete a.tickformatstops,u.noExp||h||"date"===p||(t("showexponent",i),t("exponentformat"),t("minexponent"),t("separatethousands"))}}}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./layout_attributes");oe.exports=function(w,y,e,r){var n=r.isMinor,a=n?w.minor||{}:w,t=n?y.minor:y,p=n?m.minor:m,u=n?"minor.":"",i=g.coerce2(a,t,p,"ticklen",n?.6*(y.ticklen||5):void 0),c=g.coerce2(a,t,p,"tickwidth",n?y.tickwidth||1:void 0),f=g.coerce2(a,t,p,"tickcolor",(n?y.tickcolor:void 0)||t.color);e(u+"ticks",!n&&r.outerTicks||i||c||f?"outside":"")||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(x,oe,ae){"use strict";var g=x("./clean_ticks"),m=x("../../lib").isArrayOrTypedArray;oe.exports=function(w,y,e,r,n){n||(n={});var a=n.isMinor,t=a?w.minor||{}:w,p=a?y.minor:y,u=a?"minor.":"";function i(o){var _=t[o];return void 0!==_?_:(p._template||{})[o]}var c=i("tick0"),f=i("dtick"),l=i("tickvals"),h=e(u+"tickmode",m(l)?"array":f?"linear":"auto");if("auto"===h)e(u+"nticks");else if("linear"===h){var d=p.dtick=g.dtick(f,r);p.tick0=g.tick0(c,r,y.calendar,d)}else"multicategory"!==r&&(void 0===e(u+"tickvals")?p.tickmode="auto":a||e("ticktext"))}},{"../../lib":503,"./clean_ticks":560}],581:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../registry"),w=x("../../lib"),y=x("../../components/drawing"),e=x("./axes");oe.exports=function(r,n,a,t){var p=r._fullLayout;if(0!==n.length){var u,i,c,f;t&&(u=t());var l=g.ease(a.easing);return r._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(f),f=null,function(){for(var o={},_=0;_<n.length;_++){var s=n[_],M=s.plotinfo.yaxis;s.xr0&&(o[s.plotinfo.xaxis._name+".range"]=s.xr0.slice()),s.yr0&&(o[M._name+".range"]=s.yr0.slice())}return m.call("relayout",r,o).then(function(){for(var A=0;A<n.length;A++)h(n[A].plotinfo)})}()}),i=Date.now(),f=window.requestAnimationFrame(function o(){c=Date.now();for(var _=Math.min(1,(c-i)/a.duration),s=l(_),k=0;k<n.length;k++)d(n[k],s);c-i>a.duration?(function(){for(var M={},A=0;A<n.length;A++){var E=n[A],C=E.plotinfo.yaxis;E.xr1&&(M[E.plotinfo.xaxis._name+".range"]=E.xr1.slice()),E.yr1&&(M[C._name+".range"]=E.yr1.slice())}u&&u(),m.call("relayout",r,M).then(function(){for(var R=0;R<n.length;R++)h(n[R].plotinfo)})}(),f=window.cancelAnimationFrame(o)):f=window.requestAnimationFrame(o)}),Promise.resolve()}function h(o){var _=o.xaxis,s=o.yaxis;p._defs.select("#"+o.clipId+"> rect").call(y.setTranslate,0,0).call(y.setScale,1,1),o.plot.call(y.setTranslate,_._offset,s._offset).call(y.setScale,1,1);var k=o.plot.selectAll(".scatterlayer .trace");k.selectAll(".point").call(y.setPointGroupScale,1,1),k.selectAll(".textpoint").call(y.setTextPointsScale,1,1),k.call(y.hideOutsideRangePoints,o)}function d(o,_){var s=o.plotinfo,k=s.xaxis,M=s.yaxis,A=k._length,E=M._length,I=!!o.xr1,C=!!o.yr1,R=[];if(I){var O=w.simpleMap(o.xr0,k.r2l),D=w.simpleMap(o.xr1,k.r2l),L=O[1]-O[0],B=D[1]-D[0];R[0]=(O[0]*(1-_)+_*D[0]-O[0])/(O[1]-O[0])*A,R[2]=A*(1-_+_*B/L),k.range[0]=k.l2r(O[0]*(1-_)+_*D[0]),k.range[1]=k.l2r(O[1]*(1-_)+_*D[1])}else R[0]=0,R[2]=A;if(C){var j=w.simpleMap(o.yr0,M.r2l),W=w.simpleMap(o.yr1,M.r2l),Y=j[1]-j[0],Q=W[1]-W[0];R[1]=(j[1]*(1-_)+_*W[1]-j[1])/(j[0]-j[1])*E,R[3]=E*(1-_+_*Q/Y),M.range[0]=k.l2r(j[0]*(1-_)+_*W[0]),M.range[1]=M.l2r(j[1]*(1-_)+_*W[1])}else R[1]=0,R[3]=E;e.drawOne(r,k,{skipTitle:!0}),e.drawOne(r,M,{skipTitle:!0}),e.redrawComponents(r,[k._id,M._id]);var ne=I?A/R[2]:1,X=C?E/R[3]:1,G=k._offset-(I?R[0]/R[2]*A:0),ie=M._offset-(C?R[1]/R[3]*E:0);s.clipRect.call(y.setTranslate,I?R[0]:0,C?R[1]:0).call(y.setScale,1/ne,1/X),s.plot.call(y.setTranslate,G,ie).call(y.setScale,ne,X),y.setPointGroupScale(s.zoomScalePts,1/ne,1/X),y.setTextPointsScale(s.zoomScaleTxt,1/ne,1/X)}e.redrawComponents(r)}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(x,oe,ae){"use strict";var g=x("../../registry").traceIs,m=x("./axis_autotype");function w(e){return{v:"x",h:"y"}[e.orientation||"v"]}function y(e,r){var n=w(e),a=g(e,"box-violin"),t=g(e._fullInput||{},"candlestick");return a&&!t&&r===n&&void 0===e[n]&&void 0===e[n+"0"]}oe.exports=function(e,r,n,a){n("autotypenumbers",a.autotypenumbersDflt),"-"===n("type",(a.splomStash||{}).type)&&(function(t,p){if("-"===t.type){var u,i=t._id,c=i.charAt(0);-1!==i.indexOf("scene")&&(i=c);var f=function(M,A,E){for(var I=0;I<M.length;I++){var C=M[I];if("splom"===C.type&&C._length>0&&(C["_"+E+"axes"]||{})[A]||(C[E+"axis"]||E)===A&&(y(C,E)||(C[E]||[]).length||C[E+"0"]))return C}}(p,i,c);if(f){if("histogram"===f.type&&c==={v:"y",h:"x"}[f.orientation||"v"])return void(t.type="linear");var l=c+"calendar",h=f[l],d={noMultiCategory:!g(f,"cartesian")||g(f,"noMultiCategory")};if("box"===f.type&&f._hasPreCompStats&&c==={h:"x",v:"y"}[f.orientation||"v"]&&(d.noMultiCategory=!0),d.autotypenumbers=t.autotypenumbers,y(f,c)){var o=w(f),_=[];for(u=0;u<p.length;u++){var s=p[u];g(s,"box-violin")&&(s[c+"axis"]||c)===i&&(_.push(void 0!==s[o]?s[o][0]:void 0!==s.name?s.name:"text"),s[l]!==h&&(h=void 0))}t.type=m(_,h,d)}else if("splom"===f.type){var k=f.dimensions[f._axesDim[i]];k.visible&&(t.type=m(k.values,h,d))}else t.type=m(f[c]||[f[c+"0"]],h,d)}}}(r,a.data),"-"===r.type?r.type="linear":e.type=r.type)}},{"../../registry":638,"./axis_autotype":555}],583:[function(x,oe,ae){"use strict";var g=x("../registry"),m=x("../lib");function w(n,a,t){var p,u,i,c=!1;if("data"===a.type)p=n._fullData[null!==a.traces?a.traces[0]:0];else{if("layout"!==a.type)return!1;p=n._fullLayout}return u=m.nestedProperty(p,a.prop).get(),(i=t[a.type]=t[a.type]||{}).hasOwnProperty(a.prop)&&i[a.prop]!==u&&(c=!0),i[a.prop]=u,{changed:c,value:u}}function y(n,a){var t=[],p=a[0],u={};if("string"==typeof p)u[p]=a[1];else{if(!m.isPlainObject(p))return t;u=p}return r(u,function(i,c,f){t.push({type:"layout",prop:i,value:f})},"",0),t}function e(n,a){var t,p,u,i,c=[];if(u=a[1],t=a[2],i={},"string"==typeof(p=a[0]))i[p]=u;else{if(!m.isPlainObject(p))return c;i=p,void 0===t&&(t=u)}return void 0===t&&(t=null),r(i,function(f,l,h){var d,o;if(Array.isArray(h)){o=h.slice();var _=Math.min(o.length,n.data.length);t&&(_=Math.min(_,t.length)),d=[];for(var s=0;s<_;s++)d[s]=t?t[s]:s}else o=h,d=t?t.slice():null;if(null===d)Array.isArray(o)&&(o=o[0]);else if(Array.isArray(d)){if(!Array.isArray(o)){var k=o;o=[];for(var M=0;M<d.length;M++)o[M]=k}o.length=Math.min(d.length,o.length)}c.push({type:"data",prop:f,traces:d,value:o})},"",0),c}function r(n,a,t,p){Object.keys(n).forEach(function(u){var i=n[u];if("_"!==u[0]){var c=t+(p>0?".":"")+u;m.isPlainObject(i)?r(i,a,c,p+1):a(c,u,i)}})}ae.manageCommandObserver=function(n,a,t,p){var u={},i=!0;a&&a._commandObserver&&(u=a._commandObserver),u.cache||(u.cache={}),u.lookupTable={};var c=ae.hasSimpleAPICommandBindings(n,t,u.lookupTable);if(a&&a._commandObserver){if(c)return u;if(a._commandObserver.remove)return a._commandObserver.remove(),a._commandObserver=null,u}if(c){w(n,c,u.cache),u.check=function(){if(i){var h=w(n,c,u.cache);return h.changed&&p&&void 0!==u.lookupTable[h.value]&&(u.disable(),Promise.resolve(p({value:h.value,type:c.type,prop:c.prop,traces:c.traces,index:u.lookupTable[h.value]})).then(u.enable,u.enable)),h.changed}};for(var f=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<f.length;l++)n._internalOn(f[l],u.check);u.remove=function(){for(var h=0;h<f.length;h++)n._removeInternalListener(f[h],u.check)}}else m.log("Unable to automatically bind plot updates to API command"),u.lookupTable={},u.remove=function(){};return u.disable=function(){i=!1},u.enable=function(){i=!0},a&&(a._commandObserver=u),u},ae.hasSimpleAPICommandBindings=function(n,a,t){var p,u,i=a.length;for(p=0;p<i;p++){var c,f=a[p],l=f.method,h=f.args;if(Array.isArray(h)||(h=[]),!l)return!1;var d=ae.computeAPICommandBindings(n,l,h);if(1!==d.length)return!1;if(u){if((c=d[0]).type!==u.type||c.prop!==u.prop)return!1;if(Array.isArray(u.traces)){if(!Array.isArray(c.traces))return!1;c.traces.sort();for(var o=0;o<u.traces.length;o++)if(u.traces[o]!==c.traces[o])return!1}else if(c.prop!==u.prop)return!1}else u=d[0],Array.isArray(u.traces)&&u.traces.sort();var _=(c=d[0]).value;if(Array.isArray(_)){if(1!==_.length)return!1;_=_[0]}t&&(t[_]=p)}return u},ae.executeAPICommand=function(n,a,t){if("skip"===a)return Promise.resolve();var p=g.apiMethodRegistry[a],u=[n];Array.isArray(t)||(t=[]);for(var i=0;i<t.length;i++)u.push(t[i]);return p.apply(null,u).catch(function(c){return m.warn("API call to Plotly."+a+" rejected.",c),Promise.reject(c)})},ae.computeAPICommandBindings=function(n,a,t){var p,i;switch(Array.isArray(t)||(t=[]),a){case"restyle":p=e(n,t);break;case"relayout":p=y(0,t);break;case"update":p=e(n,[t[0],t[2]]).concat(y(0,[t[1]]));break;case"animate":i=t,p=Array.isArray(i[0])&&1===i[0].length&&-1!==["string","number"].indexOf(typeof i[0][0])?[{type:"layout",prop:"_currentFrame",value:i[0][0].toString()}]:[];break;default:p=[]}return p}},{"../lib":503,"../registry":638}],584:[function(x,oe,ae){"use strict";var g=x("../lib/extend").extendFlat;ae.attributes=function(m,w){w=w||{};var y={valType:"info_array",editType:(m=m||{}).editType,items:[{valType:"number",min:0,max:1,editType:m.editType},{valType:"number",min:0,max:1,editType:m.editType}],dflt:[0,1]},e={x:g({},y,{}),y:g({},y,{}),editType:m.editType};return m.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:m.editType},e.column={valType:"integer",min:0,dflt:0,editType:m.editType}),e},ae.defaults=function(m,w,y,e){var r=e&&e.x||[0,1],n=e&&e.y||[0,1],a=w.grid;if(a){var t=y("domain.column");void 0!==t&&(t<a.columns?r=a._domains.x[t]:delete m.domain.column);var p=y("domain.row");void 0!==p&&(p<a.rows?n=a._domains.y[p]:delete m.domain.row)}var u=y("domain.x",r),i=y("domain.y",n);u[0]<u[1]||(m.domain.x=r.slice()),i[0]<i[1]||(m.domain.y=n.slice())}},{"../lib/extend":493}],585:[function(x,oe,ae){"use strict";oe.exports=function(g){var m=g.editType,w=g.colorEditType;void 0===w&&(w=m);var y={family:{valType:"string",noBlank:!0,strict:!0,editType:m},size:{valType:"number",min:1,editType:m},color:{valType:"color",editType:w},editType:m};return g.autoSize&&(y.size.dflt="auto"),g.autoColor&&(y.color.dflt="auto"),g.arrayOk&&(y.family.arrayOk=!0,y.size.arrayOk=!0,y.color.arrayOk=!0),y}},{}],586:[function(x,oe,ae){"use strict";oe.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(x,oe,ae){"use strict";ae.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},ae.axesNames=["lonaxis","lataxis"],ae.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},ae.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},ae.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},ae.clipPad=.001,ae.precision=.1,ae.landColor="#F0DC82",ae.waterColor="#3399FF",ae.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},ae.sphereSVG={type:"Sphere"},ae.fillLayers={ocean:1,land:1,lakes:1},ae.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},ae.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],ae.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],ae.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("d3-geo"),w=m.geoPath,y=m.geoDistance,e=x("d3-geo-projection"),r=x("../../registry"),n=x("../../lib"),a=n.strTranslate,t=x("../../components/color"),p=x("../../components/drawing"),u=x("../../components/fx"),i=x("../plots"),c=x("../cartesian/axes"),f=x("../cartesian/autorange").getAutoRange,l=x("../../components/dragelement"),h=x("../cartesian/select").prepSelect,d=x("../cartesian/select").clearSelect,o=x("../cartesian/select").selectOnClick,_=x("./zoom"),s=x("./constants"),k=x("../../lib/geo_location_utils"),M=x("../../lib/topojson_utils"),A=x("topojson-client").feature;function E(R){this.id=R.id,this.graphDiv=R.graphDiv,this.container=R.container,this.topojsonURL=R.topojsonURL,this.isStatic=R.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var I=E.prototype;function C(R,O){var D=s.clipPad,L=R[0]+D,B=R[1]-D,j=O[0]+D,W=O[1]-D;L>0&&B<0&&(B+=360);var Y=(B-L)/4;return{type:"Polygon",coordinates:[[[L,j],[L,W],[L+Y,W],[L+2*Y,W],[L+3*Y,W],[B,W],[B,j],[B-Y,j],[B-2*Y,j],[B-3*Y,j],[L,j]]]}}oe.exports=function(R){return new E(R)},I.plot=function(R,O,D){var L=this,B=O[this.id],j=[],W=!1;for(var Y in s.layerNameToAdjective)if("frame"!==Y&&B["show"+Y]){W=!0;break}for(var Q=0;Q<R.length;Q++)if(R[0][0].trace.locationmode){W=!0;break}if(W){var ne=M.getTopojsonName(B);null!==L.topojson&&ne===L.topojsonName||(L.topojsonName=ne,void 0===PlotlyGeoAssets.topojson[L.topojsonName]&&j.push(L.fetchTopojson()))}j=j.concat(k.fetchTraceGeoData(R)),D.push(new Promise(function(X,$){Promise.all(j).then(function(){L.topojson=PlotlyGeoAssets.topojson[L.topojsonName],L.update(R,O),X()}).catch($)}))},I.fetchTopojson=function(){var R=this,O=M.getTopojsonPath(R.topojsonURL,R.topojsonName);return new Promise(function(D,L){g.json(O,function(B,j){if(B)return L(404===B.status?new Error(["plotly.js could not find topojson file at",O+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",O].join(" ")));PlotlyGeoAssets.topojson[R.topojsonName]=j,D()})})},I.update=function(R,O){var D=O[this.id];this.hasChoropleth=!1;for(var L=0;L<R.length;L++){var B=R[L],j=B[0].trace;"choropleth"===j.type&&(this.hasChoropleth=!0),!0===j.visible&&j._length>0&&j._module.calcGeoJSON(B,O)}if(!this.updateProjection(R,O)){this.viewInitial&&this.scope===D.scope||this.saveViewInitial(D),this.scope=D.scope,this.updateBaseLayers(O,D),this.updateDims(O,D),this.updateFx(O,D),i.generalUpdatePerTraceModule(this.graphDiv,this,R,D);var W=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=W.selectAll(".point"),this.dataPoints.text=W.selectAll("text"),this.dataPaths.line=W.selectAll(".js-line");var Y=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Y.selectAll("path"),this.render()}},I.updateProjection=function(R,O){var D=this.graphDiv,L=O[this.id],B=O._size,j=L.domain,W=L.projection,Y=L.lonaxis,Q=L.lataxis,ne=Y._ax,X=Q._ax,$=this.projection=function(ve){var Te=ve.projection,Pe=Te.type,De=s.projNames[Pe];De="geo"+n.titleCase(De);for(var Fe=(m[De]||e[De])(),Ue=ve._isSatellite?180*Math.acos(1/Te.distance)/Math.PI:ve._isClipped?s.lonaxisSpan[Pe]/2:null,He=["center","rotate","parallels","clipExtent"],Ke=function($e){return $e?Fe:[]},st=0;st<He.length;st++){var Ve=He[st];"function"!=typeof Fe[Ve]&&(Fe[Ve]=Ke)}return Fe.isLonLatOverEdges=function($e){if(null===Fe($e))return!0;if(Ue){var Qe=Fe.rotate();return y($e,[-Qe[0],-Qe[1]])>Ue*Math.PI/180}return!1},Fe.getPath=function(){return w().projection(Fe)},Fe.getBounds=function($e){return Fe.getPath().bounds($e)},Fe.precision(s.precision),ve._isSatellite&&Fe.tilt(Te.tilt).distance(Te.distance),Ue&&Fe.clipAngle(Ue-s.clipPad),Fe}(L),re=[[B.l+B.w*j.x[0],B.t+B.h*(1-j.y[1])],[B.l+B.w*j.x[1],B.t+B.h*(1-j.y[0])]],H=L.center||{},U=W.rotation||{},G=Y.range||[],ie=Q.range||[];if(L.fitbounds){ne._length=re[1][0]-re[0][0],X._length=re[1][1]-re[0][1],ne.range=f(D,ne),X.range=f(D,X);var q=(ne.range[0]+ne.range[1])/2,ee=(X.range[0]+X.range[1])/2;if(L._isScoped)H={lon:q,lat:ee};else if(L._isClipped){H={lon:q,lat:ee},U={lon:q,lat:ee,roll:U.roll};var te=W.type,se=s.lonaxisSpan[te]/2||180,ue=s.lataxisSpan[te]/2||90;G=[q-se,q+se],ie=[ee-ue,ee+ue]}else H={lon:q,lat:ee},U={lon:q,lat:U.lat,roll:U.roll}}$.center([H.lon-U.lon,H.lat-U.lat]).rotate([-U.lon,-U.lat,U.roll]).parallels(W.parallels);var de=C(G,ie);$.fitExtent(re,de);var he=this.bounds=$.getBounds(de),xe=this.fitScale=$.scale(),ge=$.translate();if(L.fitbounds){var _e=$.getBounds(C(ne.range,X.range)),Ce=Math.min((he[1][0]-he[0][0])/(_e[1][0]-_e[0][0]),(he[1][1]-he[0][1])/(_e[1][1]-_e[0][1]));isFinite(Ce)?$.scale(Ce*xe):n.warn("Something went wrong during"+this.id+"fitbounds computations.")}else $.scale(W.scale*xe);var Le=this.midPt=[(he[0][0]+he[1][0])/2,(he[0][1]+he[1][1])/2];if($.translate([ge[0]+(Le[0]-ge[0]),ge[1]+(Le[1]-ge[1])]).clipExtent(he),L._isAlbersUsa){var Ie=$([H.lon,H.lat]),Be=$.translate();$.translate([Be[0]-(Ie[0]-Be[0]),Be[1]-(Ie[1]-Be[1])])}},I.updateBaseLayers=function(R,O){var D=this,L=D.topojson,B=D.layers,j=D.basePaths;function W($){return"lonaxis"===$||"lataxis"===$}function Y($){return Boolean(s.lineLayers[$])}function Q($){return Boolean(s.fillLayers[$])}var ne=(this.hasChoropleth?s.layersForChoropleth:s.layers).filter(function($){return Y($)||Q($)?O["show"+$]:!W($)||O[$].showgrid}),X=D.framework.selectAll(".layer").data(ne,String);X.exit().each(function($){delete B[$],delete j[$],g.select(this).remove()}),X.enter().append("g").attr("class",function($){return"layer "+$}).each(function($){var re=B[$]=g.select(this);"bg"===$?D.bgRect=re.append("rect").style("pointer-events","all"):W($)?j[$]=re.append("path").style("fill","none"):"backplot"===$?re.append("g").classed("choroplethlayer",!0):"frontplot"===$?re.append("g").classed("scatterlayer",!0):Y($)?j[$]=re.append("path").style("fill","none").style("stroke-miterlimit",2):Q($)&&(j[$]=re.append("path").style("stroke","none"))}),X.order(),X.each(function($){var re=j[$],H=s.layerNameToAdjective[$];"frame"===$?re.datum(s.sphereSVG):Y($)||Q($)?re.datum(A(L,L.objects[$])):W($)&&re.datum(function(U,G,ie){var q,ee,te,se=G[U],ue=s.scopeDefaults[G.scope];"lonaxis"===U?(q=ue.lonaxisRange,ee=ue.lataxisRange,te=function(Be,ve){return[Be,ve]}):"lataxis"===U&&(q=ue.lataxisRange,ee=ue.lonaxisRange,te=function(Be,ve){return[ve,Be]});var de={type:"linear",range:[q[0],q[1]-1e-6],tick0:se.tick0,dtick:se.dtick};c.setConvert(de,ie);var he=c.calcTicks(de);G.isScoped||"lonaxis"!==U||he.pop();for(var xe=he.length,ge=new Array(xe),_e=0;_e<xe;_e++)for(var Ce=he[_e].x,Le=ge[_e]=[],Ie=ee[0];Ie<ee[1]+2.5;Ie+=2.5)Le.push(te(Ce,Ie));return{type:"MultiLineString",coordinates:ge}}($,O,R)).call(t.stroke,O[$].gridcolor).call(p.dashLine,O[$].griddash,O[$].gridwidth),Y($)?re.call(t.stroke,O[H+"color"]).call(p.dashLine,"",O[H+"width"]):Q($)&&re.call(t.fill,O[H+"color"])})},I.updateDims=function(R,O){var D=this.bounds,L=(O.framewidth||0)/2,B=D[0][0]-L,j=D[0][1]-L,W=D[1][0]-B+L,Y=D[1][1]-j+L;p.setRect(this.clipRect,B,j,W,Y),this.bgRect.call(p.setRect,B,j,W,Y).call(t.fill,O.bgcolor),this.xaxis._offset=B,this.xaxis._length=W,this.yaxis._offset=j,this.yaxis._length=Y},I.updateFx=function(R,O){var D=this,L=D.graphDiv,B=D.bgRect,j=R.dragmode,W=R.clickmode;if(!D.isStatic){var Y;"select"===j?Y=function(X,$){(X.range={})[D.id]=[ne([$.xmin,$.ymin]),ne([$.xmax,$.ymax])]}:"lasso"===j&&(Y=function(X,$,re){(X.lassoPoints={})[D.id]=re.filtered.map(ne)});var Q={element:D.bgRect.node(),gd:L,plotinfo:{id:D.id,xaxis:D.xaxis,yaxis:D.yaxis,fillRangeItems:Y},xaxes:[D.xaxis],yaxes:[D.yaxis],subplot:D.id,clickFn:function(X){2===X&&d(L)}};"pan"===j?(B.node().onmousedown=null,B.call(_(D,O)),B.on("dblclick.zoom",function(){var X=D.viewInitial,$={};for(var re in X)$[D.id+"."+re]=X[re];r.call("_guiRelayout",L,$),L.emit("plotly_doubleclick",null)}),L._context._scrollZoom.geo||B.on("wheel.zoom",null)):"select"!==j&&"lasso"!==j||(B.on(".zoom",null),Q.prepFn=function(X,$,re){h(X,$,re,Q,j)},l.init(Q)),B.on("mousemove",function(){var X=D.projection.invert(n.getPositionFromD3Event());if(!X)return l.unhover(L,g.event);D.xaxis.p2c=function(){return X[0]},D.yaxis.p2c=function(){return X[1]},u.hover(L,g.event,D.id)}),B.on("mouseout",function(){L._dragging||l.unhover(L,g.event)}),B.on("click",function(){"select"!==j&&"lasso"!==j&&(W.indexOf("select")>-1&&o(g.event,L,[D.xaxis],[D.yaxis],D.id,Q),W.indexOf("event")>-1&&u.click(L,g.event))})}function ne(X){return D.projection.invert([X[0]+D.xaxis._offset,X[1]+D.yaxis._offset])}},I.makeFramework=function(){var R=this,O=R.graphDiv,D=O._fullLayout,L="clip"+D._uid+R.id;R.clipDef=D._clips.append("clipPath").attr("id",L),R.clipRect=R.clipDef.append("rect"),R.framework=g.select(R.container).append("g").attr("class","geo "+R.id).call(p.setClipUrl,L,O),R.project=function(B){var j=R.projection(B);return j?[j[0]-R.xaxis._offset,j[1]-R.yaxis._offset]:[null,null]},R.xaxis={_id:"x",c2p:function(B){return R.project(B)[0]}},R.yaxis={_id:"y",c2p:function(B){return R.project(B)[1]}},R.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},c.setConvert(R.mockAxis,D)},I.saveViewInitial=function(R){var D=R.center||{},L=R.projection,B=L.rotation||{};this.viewInitial={fitbounds:R.fitbounds,"projection.scale":L.scale},n.extendFlat(this.viewInitial,R._isScoped?{"center.lon":D.lon,"center.lat":D.lat}:R._isClipped?{"projection.rotation.lon":B.lon,"projection.rotation.lat":B.lat}:{"center.lon":D.lon,"center.lat":D.lat,"projection.rotation.lon":B.lon})},I.render=function(){var R,O=this.projection,D=O.getPath();function L(j){var W=O(j.lonlat);return W?a(W[0],W[1]):null}function B(j){return O.isLonLatOverEdges(j.lonlat)?"none":null}for(R in this.basePaths)this.basePaths[R].attr("d",D);for(R in this.dataPaths)this.dataPaths[R].attr("d",function(j){return D(j.geojson)});for(R in this.dataPoints)this.dataPoints[R].attr("display",B).attr("transform",L)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(x,oe,ae){"use strict";var g=x("../../plots/get_data").getSubplotCalcData,m=x("../../lib").counterRegex,w=x("./geo"),y="geo",e=m(y),r={};r.geo={valType:"subplotid",dflt:y,editType:"calc"},oe.exports={attr:y,name:y,idRoot:y,idRegex:e,attrRegex:e,attributes:r,layoutAttributes:x("./layout_attributes"),supplyLayoutDefaults:x("./layout_defaults"),plot:function(n){for(var a=n._fullLayout,t=n.calcdata,p=a._subplots.geo,u=0;u<p.length;u++){var i=p[u],c=g(t,y,i),f=a[i]._subplot;f||(f=w({id:i,graphDiv:n,container:a._geolayer.node(),topojsonURL:n._context.topojsonURL,staticPlot:n._context.staticPlot}),a[i]._subplot=f),f.plot(c,a,n._promises)}},updateFx:function(n){for(var a=n._fullLayout,t=a._subplots.geo,p=0;p<t.length;p++){var u=a[t[p]];u._subplot.updateFx(a,u)}},clean:function(n,a,t,p){for(var u=p._subplots.geo||[],i=0;i<u.length;i++){var c=u[i],f=p[c]._subplot;!a[c]&&f&&(f.framework.remove(),f.clipDef.remove())}}}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(x,oe,ae){"use strict";var g=x("../../components/color/attributes"),m=x("../domain").attributes,w=x("../../components/drawing/attributes").dash,y=x("./constants"),e=x("../../plot_api/edit_types").overrideAll,r=x("../../lib/sort_object_keys"),n={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:g.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:w};(oe.exports=e({domain:m({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:r(y.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:r(y.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:g.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:y.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:y.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:y.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:y.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:g.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:g.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:g.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:g.background},lonaxis:n,lataxis:n},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../subplot_defaults"),w=x("../get_data").getSubplotData,y=x("./constants"),e=x("./layout_attributes"),r=y.axesNames;function n(a,t,p,u){var i=w(u.fullData,"geo",u.id).map(function(U){return U._expandedIndex}),c=p("resolution"),f=p("scope"),l=y.scopeDefaults[f],h=p("projection.type",l.projType),d=t._isAlbersUsa="albers usa"===h;d&&(f=t.scope="usa");var o=t._isScoped="world"!==f,_=t._isSatellite="satellite"===h,s=t._isConic=-1!==h.indexOf("conic")||"albers"===h,k=t._isClipped=!!y.lonaxisSpan[h];if(!1===a.visible){var M=g.extendDeep({},t._template);M.showcoastlines=!1,M.showcountries=!1,M.showframe=!1,M.showlakes=!1,M.showland=!1,M.showocean=!1,M.showrivers=!1,M.showsubunits=!1,M.lonaxis&&(M.lonaxis.showgrid=!1),M.lataxis&&(M.lataxis.showgrid=!1),t._template=M}for(var A=p("visible"),E=0;E<r.length;E++){var I,C=r[E],R=[30,10][E];if(o)I=l[C+"Range"];else{var O=y[C+"Span"],D=(O[h]||O["*"])/2,L=p("projection.rotation."+C.substr(0,3),l.projRotate[E]);I=[L-D,L+D]}var B=p(C+".range",I);p(C+".tick0"),p(C+".dtick",R),p(C+".showgrid",!!A&&void 0)&&(p(C+".gridcolor"),p(C+".gridwidth"),p(C+".griddash")),t[C]._ax={type:"linear",_id:C.slice(0,3),_traceIndices:i,setScale:g.identity,c2l:g.identity,r2l:g.identity,autorange:!0,range:B.slice(),_m:1,_input:{}}}var j=t.lonaxis.range,W=t.lataxis.range,Y=j[0],Q=j[1];Y>0&&Q<0&&(Q+=360);var ne,X,$,re=(Y+Q)/2;if(!d){var H=o?l.projRotate:[re,0,0];ne=p("projection.rotation.lon",H[0]),p("projection.rotation.lat",H[1]),p("projection.rotation.roll",H[2]),p("showcoastlines",!o&&A)&&(p("coastlinecolor"),p("coastlinewidth")),p("showocean",!!A&&void 0)&&p("oceancolor")}d?(X=-96.6,$=38.7):(X=o?re:ne,$=(W[0]+W[1])/2),p("center.lon",X),p("center.lat",$),_&&(p("projection.tilt"),p("projection.distance")),s&&p("projection.parallels",l.projParallels||[0,60]),p("projection.scale"),p("showland",!!A&&void 0)&&p("landcolor"),p("showlakes",!!A&&void 0)&&p("lakecolor"),p("showrivers",!!A&&void 0)&&(p("rivercolor"),p("riverwidth")),p("showcountries",o&&"usa"!==f&&A)&&(p("countrycolor"),p("countrywidth")),("usa"===f||"north america"===f&&50===c)&&(p("showsubunits",A),p("subunitcolor"),p("subunitwidth")),o||p("showframe",A)&&(p("framecolor"),p("framewidth")),p("bgcolor"),p("fitbounds")&&(delete t.projection.scale,o?(delete t.center.lon,delete t.center.lat):k?(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon,delete t.projection.rotation.lat,delete t.lonaxis.range,delete t.lataxis.range):(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon))}oe.exports=function(a,t,p){m(a,t,p,{type:"geo",attributes:e,handleDefaults:n,fullData:p,partition:"y"})}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=x("../../registry"),y=Math.PI/180,e=180/Math.PI,r={cursor:"pointer"},n={cursor:"auto"};function a(A,E){return g.behavior.zoom().translate(E.translate()).scale(E.scale())}function t(A,E,I){var C=A.id,R=A.graphDiv,O=R.layout,D=O[C],L=R._fullLayout,B=L[C],j={},W={};function Y(Q,ne){j[C+"."+Q]=m.nestedProperty(D,Q).get(),w.call("_storeDirectGUIEdit",O,L._preGUI,j);var X=m.nestedProperty(B,Q);X.get()!==ne&&(X.set(ne),m.nestedProperty(D,Q).set(ne),W[C+"."+Q]=ne)}I(Y),Y("projection.scale",E.scale()/A.fitScale),Y("fitbounds",!1),R.emit("plotly_relayout",W)}function p(A,E){var I=a(0,E);function C(R){var O=E.invert(A.midPt);R("center.lon",O[0]),R("center.lat",O[1])}return I.on("zoomstart",function(){g.select(this).style(r)}).on("zoom",function(){E.scale(g.event.scale).translate(g.event.translate),A.render();var R=E.invert(A.midPt);A.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/A.fitScale,"geo.center.lon":R[0],"geo.center.lat":R[1]})}).on("zoomend",function(){g.select(this).style(n),t(A,E,C)}),I}function u(A,E){var I,C,R,O,D,L,B,j,W,Y=a(0,E);function Q(X){return E.invert(X)}function ne(X){var $=E.rotate(),re=E.invert(A.midPt);X("projection.rotation.lon",-$[0]),X("center.lon",re[0]),X("center.lat",re[1])}return Y.on("zoomstart",function(){g.select(this).style(r),I=g.mouse(this),C=E.rotate(),R=E.translate(),O=C,D=Q(I)}).on("zoom",function(){if(L=g.mouse(this),function(re){var H=Q(re);if(!H)return!0;var U=E(H);return Math.abs(U[0]-re[0])>2||Math.abs(U[1]-re[1])>2}(I))return Y.scale(E.scale()),void Y.translate(E.translate());E.scale(g.event.scale),E.translate([R[0],g.event.translate[1]]),D?Q(L)&&(j=Q(L),E.rotate(B=[O[0]+(j[0]-D[0]),C[1],C[2]]),O=B):D=Q(I=L),W=!0,A.render();var X=E.rotate(),$=E.invert(A.midPt);A.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/A.fitScale,"geo.center.lon":$[0],"geo.center.lat":$[1],"geo.projection.rotation.lon":-X[0]})}).on("zoomend",function(){g.select(this).style(n),W&&t(A,E,ne)}),Y}function i(A,E){var I,C={r:E.rotate(),k:E.scale()},R=a(0,E),O=function(Q){for(var ne=0,X=arguments.length,$=[];++ne<X;)$.push(arguments[ne]);var re=g.dispatch.apply(null,$);return re.of=function(H,U){return function(G){var ie;try{ie=G.sourceEvent=g.event,G.target=Q,g.event=G,re[G.type].apply(H,U)}finally{g.event=ie}}},re}(R,"zoomstart","zoom","zoomend"),D=0,L=R.on;function B(Q){D++||Q({type:"zoomstart"})}function j(Q){Q({type:"zoom"})}function W(Q){--D||Q({type:"zoomend"})}function Y(Q){var ne=E.rotate();Q("projection.rotation.lon",-ne[0]),Q("projection.rotation.lat",-ne[1])}return R.on("zoomstart",function(){g.select(this).style(r);var Q=g.mouse(this),ne=E.rotate(),X=ne,$=E.translate(),re=f(ne);I=c(E,Q),L.call(R,"zoom",function(){var H=g.mouse(this);if(E.scale(C.k=g.event.scale),I){if(c(E,H)){E.rotate(ne).translate($);var U=c(E,H),G=h(I,U),ie=k(l(re,G)),q=C.r=d(ie,I,X);isFinite(q[0])&&isFinite(q[1])&&isFinite(q[2])||(q=X),E.rotate(q),X=q}}else I=c(E,Q=H);j(O.of(this,arguments))}),B(O.of(this,arguments))}).on("zoomend",function(){g.select(this).style(n),L.call(R,"zoom",null),W(O.of(this,arguments)),t(A,E,Y)}).on("zoom.redraw",function(){A.render();var Q=E.rotate();A.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/A.fitScale,"geo.projection.rotation.lon":-Q[0],"geo.projection.rotation.lat":-Q[1]})}),g.rebind(R,O,"on")}function c(A,E){var C,R,O,D,I=A.invert(E);return I&&isFinite(I[0])&&isFinite(I[1])&&(R=(C=I)[0]*y,O=C[1]*y,[(D=Math.cos(O))*Math.cos(R),D*Math.sin(R),Math.sin(O)])}function f(A){var E=.5*A[0]*y,I=.5*A[1]*y,C=.5*A[2]*y,R=Math.sin(E),O=Math.cos(E),D=Math.sin(I),L=Math.cos(I),B=Math.sin(C),j=Math.cos(C);return[O*L*j+R*D*B,R*L*j-O*D*B,O*D*j+R*L*B,O*L*B-R*D*j]}function l(A,E){var I=A[0],C=A[1],R=A[2],O=A[3],D=E[0],L=E[1],B=E[2],j=E[3];return[I*D-C*L-R*B-O*j,I*L+C*D+R*j-O*B,I*B-C*j+R*D+O*L,I*j+C*B-R*L+O*D]}function h(A,E){if(A&&E){var I=[(D=A)[1]*(L=E)[2]-D[2]*L[1],D[2]*L[0]-D[0]*L[2],D[0]*L[1]-D[1]*L[0]],C=Math.sqrt(M(I,I)),R=.5*Math.acos(Math.max(-1,Math.min(1,M(A,E)))),O=Math.sin(R)/C;return C&&[Math.cos(R),I[2]*O,-I[1]*O,I[0]*O]}var D,L}function d(A,E,I){var C=s(E,2,A[0]);C=s(C,1,A[1]),C=s(C,0,A[2]-I[2]);var R,O,D=E[0],L=E[1],B=E[2],j=C[0],W=C[1],Y=C[2],Q=Math.atan2(L,D)*e,ne=Math.sqrt(D*D+L*L);Math.abs(W)>ne?(O=(W>0?90:-90)-Q,R=0):(O=Math.asin(W/ne)*e-Q,R=Math.sqrt(ne*ne-W*W));var X=180-O-2*Q,$=(Math.atan2(Y,j)-Math.atan2(B,R))*e,re=(Math.atan2(Y,j)-Math.atan2(B,-R))*e;return o(I[0],I[1],O,$)<=o(I[0],I[1],X,re)?[O,$,I[2]]:[X,re,I[2]]}function o(A,E,I,C){var R=_(I-A),O=_(C-E);return Math.sqrt(R*R+O*O)}function _(A){return(A%360+540)%360-180}function s(A,E,I){var C=I*y,R=A.slice(),O=0===E?1:0,D=2===E?1:2,L=Math.cos(C),B=Math.sin(C);return R[O]=A[O]*L-A[D]*B,R[D]=A[D]*L+A[O]*B,R}function k(A){return[Math.atan2(2*(A[0]*A[1]+A[2]*A[3]),1-2*(A[1]*A[1]+A[2]*A[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(A[0]*A[2]-A[3]*A[1]))))*e,Math.atan2(2*(A[0]*A[3]+A[1]*A[2]),1-2*(A[2]*A[2]+A[3]*A[3]))*e]}function M(A,E){for(var I=0,C=0,R=A.length;C<R;++C)I+=A[C]*E[C];return I}oe.exports=function(A,E){return(E._isScoped?p:E._isClipped?i:u)(A,A.projection)}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(x,oe,ae){"use strict";var g=x("../registry"),m=x("./cartesian/constants").SUBPLOT_PATTERN;ae.getSubplotCalcData=function(w,y,e){var r=g.subplotsRegistry[y];if(!r)return[];for(var n=r.attr,a=[],t=0;t<w.length;t++){var p=w[t];p[0].trace[n]===e&&a.push(p)}return a},ae.getModuleCalcData=function(w,y){var e,r=[],n=[];if(!(e="string"==typeof y?g.getModule(y).plot:"function"==typeof y?y:y.plot))return[r,w];for(var a=0;a<w.length;a++){var t=w[a],p=t[0].trace;!0===p.visible&&0!==p._length&&(p._module.plot===e?r.push(t):n.push(t))}return[r,n]},ae.getSubplotData=function(w,y,e){if(!g.subplotsRegistry[y])return[];var r,n,a,t=g.subplotsRegistry[y].attr,p=[];if("gl2d"===y){var u=e.match(m);n="x"+u[1],a="y"+u[2]}for(var i=0;i<w.length;i++)r=w[i],"gl2d"===y&&g.traceIs(r,"gl2d")?r[t[0]]===n&&r[t[1]]===a&&p.push(r):r[t]===e&&p.push(r);return p}},{"../registry":638,"./cartesian/constants":561}],594:[function(x,oe,ae){"use strict";var g=x("mouse-change"),m=x("mouse-wheel"),w=x("mouse-event-offset"),y=x("../cartesian/constants"),e=x("has-passive-events");function r(n,a){this.element=n,this.plot=a,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}oe.exports=function(n){var a=n.mouseContainer,t=n.glplot,p=new r(a,t);function u(){n.xaxis.autorange=!1,n.yaxis.autorange=!1}function i(c,f,l){var h,d,o=n.calcDataBox(),_=t.viewBox,s=p.lastPos[0],k=p.lastPos[1],M=y.MINDRAG*t.pixelRatio,A=y.MINZOOM*t.pixelRatio;function E(L,B,j){var W=Math.min(B,j),Y=Math.max(B,j);W!==Y?(o[L]=W,o[L+2]=Y,p.dataBox=o,n.setRanges(o)):(n.selectBox.selectBox=[0,0,1,1],n.glplot.setDirty())}switch(f*=t.pixelRatio,l=_[3]-_[1]-(l*=t.pixelRatio),n.fullLayout.dragmode){case"zoom":if(c){var I=f/(_[2]-_[0])*(o[2]-o[0])+o[0],C=l/(_[3]-_[1])*(o[3]-o[1])+o[1];p.boxInited||(p.boxStart[0]=I,p.boxStart[1]=C,p.dragStart[0]=f,p.dragStart[1]=l),p.boxEnd[0]=I,p.boxEnd[1]=C,p.boxInited=!0,p.boxEnabled||p.boxStart[0]===p.boxEnd[0]&&p.boxStart[1]===p.boxEnd[1]||(p.boxEnabled=!0);var R=Math.abs(p.dragStart[0]-f)<A,O=Math.abs(p.dragStart[1]-l)<A;if(!function(){for(var L=n.graphDiv._fullLayout._axisConstraintGroups,B=n.xaxis._id,j=n.yaxis._id,W=0;W<L.length;W++)if(-1!==L[W][B]){if(-1!==L[W][j])return!0;break}return!1}()||R&&O)R&&(p.boxEnd[0]=p.boxStart[0]),O&&(p.boxEnd[1]=p.boxStart[1]);else{h=p.boxEnd[0]-p.boxStart[0],d=p.boxEnd[1]-p.boxStart[1];var D=(o[3]-o[1])/(o[2]-o[0]);Math.abs(h*D)>Math.abs(d)?(p.boxEnd[1]=p.boxStart[1]+Math.abs(h)*D*(d>=0?1:-1),p.boxEnd[1]<o[1]?(p.boxEnd[1]=o[1],p.boxEnd[0]=p.boxStart[0]+(o[1]-p.boxStart[1])/Math.abs(D)):p.boxEnd[1]>o[3]&&(p.boxEnd[1]=o[3],p.boxEnd[0]=p.boxStart[0]+(o[3]-p.boxStart[1])/Math.abs(D))):(p.boxEnd[0]=p.boxStart[0]+Math.abs(d)/D*(h>=0?1:-1),p.boxEnd[0]<o[0]?(p.boxEnd[0]=o[0],p.boxEnd[1]=p.boxStart[1]+(o[0]-p.boxStart[0])*Math.abs(D)):p.boxEnd[0]>o[2]&&(p.boxEnd[0]=o[2],p.boxEnd[1]=p.boxStart[1]+(o[2]-p.boxStart[0])*Math.abs(D)))}}else p.boxEnabled?(d=p.boxStart[1]!==p.boxEnd[1],(h=p.boxStart[0]!==p.boxEnd[0])||d?(h&&(E(0,p.boxStart[0],p.boxEnd[0]),n.xaxis.autorange=!1),d&&(E(1,p.boxStart[1],p.boxEnd[1]),n.yaxis.autorange=!1),n.relayoutCallback()):n.glplot.setDirty(),p.boxEnabled=!1,p.boxInited=!1):p.boxInited&&(p.boxInited=!1);break;case"pan":p.boxEnabled=!1,p.boxInited=!1,c?(p.panning||(p.dragStart[0]=f,p.dragStart[1]=l),Math.abs(p.dragStart[0]-f)<M&&(f=p.dragStart[0]),Math.abs(p.dragStart[1]-l)<M&&(l=p.dragStart[1]),d=(k-l)*(o[3]-o[1])/(t.viewBox[3]-t.viewBox[1]),o[0]+=h=(s-f)*(o[2]-o[0])/(t.viewBox[2]-t.viewBox[0]),o[2]+=h,o[1]+=d,o[3]+=d,n.setRanges(o),p.panning=!0,p.lastInputTime=Date.now(),u(),n.cameraChanged(),n.handleAnnotations()):p.panning&&(p.panning=!1,n.relayoutCallback())}p.lastPos[0]=f,p.lastPos[1]=l}return p.mouseListener=g(a,i),a.addEventListener("touchstart",function(c){var f=w(c.changedTouches[0],a);i(0,f[0],f[1]),i(1,f[0],f[1]),c.preventDefault()},!!e&&{passive:!1}),a.addEventListener("touchmove",function(c){c.preventDefault();var f=w(c.changedTouches[0],a);i(1,f[0],f[1]),c.preventDefault()},!!e&&{passive:!1}),a.addEventListener("touchend",function(c){i(0,p.lastPos[0],p.lastPos[1]),c.preventDefault()},!!e&&{passive:!1}),p.wheelListener=m(a,function(c,f){if(!n.scrollZoom)return!1;var l=n.calcDataBox(),h=t.viewBox,d=p.lastPos[0],o=p.lastPos[1],_=Math.exp(5*f/(h[3]-h[1])),s=d/(h[2]-h[0])*(l[2]-l[0])+l[0],k=o/(h[3]-h[1])*(l[3]-l[1])+l[1];return l[0]=(l[0]-s)*_+s,l[2]=(l[2]-s)*_+s,l[1]=(l[1]-k)*_+k,l[3]=(l[3]-k)*_+k,n.setRanges(l),p.lastInputTime=Date.now(),u(),n.cameraChanged(),n.handleAnnotations(),n.relayoutCallback(),!0},!0),p}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(x,oe,ae){"use strict";var g=x("../cartesian/axes"),m=x("../../lib/str2rgbarray");function w(r){this.scene=r,this.gl=r.gl,this.pixelRatio=r.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var y=w.prototype,e=["xaxis","yaxis"];y.merge=function(r){var n,a,t,p,u,i,c,f,l,h,d;for(this.titleEnable=!1,this.backgroundColor=m(r.plot_bgcolor),h=0;h<2;++h){var o=(n=e[h]).charAt(0);for(t=(a=r[this.scene[n]._name]).title.text===this.scene.fullLayout._dfltTitle[o]?"":a.title.text,d=0;d<=2;d+=2)this.labelEnable[h+d]=!1,this.labels[h+d]=t,this.labelColor[h+d]=m(a.title.font.color),this.labelFont[h+d]=a.title.font.family,this.labelSize[h+d]=a.title.font.size,this.labelPad[h+d]=this.getLabelPad(n,a),this.tickEnable[h+d]=!1,this.tickColor[h+d]=m((a.tickfont||{}).color),this.tickAngle[h+d]="auto"===a.tickangle?0:Math.PI*-a.tickangle/180,this.tickPad[h+d]=this.getTickPad(a),this.tickMarkLength[h+d]=0,this.tickMarkWidth[h+d]=a.tickwidth||0,this.tickMarkColor[h+d]=m(a.tickcolor),this.borderLineEnable[h+d]=!1,this.borderLineColor[h+d]=m(a.linecolor),this.borderLineWidth[h+d]=a.linewidth||0;c=this.hasSharedAxis(a),u=this.hasAxisInDfltPos(n,a)&&!c,i=this.hasAxisInAltrPos(n,a)&&!c,p=a.mirror||!1,f=c?-1!==String(p).indexOf("all"):!!p,l=c?"allticks"===p:-1!==String(p).indexOf("ticks"),u?this.labelEnable[h]=!0:i&&(this.labelEnable[h+2]=!0),u?this.tickEnable[h]=a.showticklabels:i&&(this.tickEnable[h+2]=a.showticklabels),(u||f)&&(this.borderLineEnable[h]=a.showline),(i||f)&&(this.borderLineEnable[h+2]=a.showline),(u||l)&&(this.tickMarkLength[h]=this.getTickMarkLength(a)),(i||l)&&(this.tickMarkLength[h+2]=this.getTickMarkLength(a)),this.gridLineEnable[h]=a.showgrid,this.gridLineColor[h]=m(a.gridcolor),this.gridLineWidth[h]=a.gridwidth,this.zeroLineEnable[h]=a.zeroline,this.zeroLineColor[h]=m(a.zerolinecolor),this.zeroLineWidth[h]=a.zerolinewidth}},y.hasSharedAxis=function(r){var n=this.scene;return 0!==g.findSubplotsWithAxis(n.fullLayout._subplots.gl2d,r).indexOf(n.id)},y.hasAxisInDfltPos=function(r,n){var a=n.side;return"xaxis"===r?"bottom"===a:"yaxis"===r?"left"===a:void 0},y.hasAxisInAltrPos=function(r,n){var a=n.side;return"xaxis"===r?"top"===a:"yaxis"===r?"right"===a:void 0},y.getLabelPad=function(r,n){var a=n.title.font.size,t=n.showticklabels;return"xaxis"===r?"top"===n.side?a*(1.5+(t?1:0))-10:a*(1.5+(t?.5:0))-10:"yaxis"===r?"right"===n.side?10+a*(1.5+(t?1:.5)):10+a*(1.5+(t?.5:0)):void 0},y.getTickPad=function(r){return"outside"===r.ticks?10+r.ticklen:15},y.getTickMarkLength=function(r){if(!r.ticks)return 0;var n=r.ticklen;return"inside"===r.ticks?-n:n},oe.exports=function(r){return new w(r)}},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(x,oe,ae){"use strict";var g=x("../../plot_api/edit_types").overrideAll,m=x("./scene2d"),w=x("../layout_attributes"),y=x("../../constants/xmlns_namespaces"),e=x("../cartesian/constants"),r=x("../cartesian"),n=x("../../components/fx/layout_attributes"),a=x("../get_data").getSubplotData;ae.name="gl2d",ae.attr=["xaxis","yaxis"],ae.idRoot=["x","y"],ae.idRegex=e.idRegex,ae.attrRegex=e.attrRegex,ae.attributes=x("../cartesian/attributes"),ae.supplyLayoutDefaults=function(t,p,u){p._has("cartesian")||r.supplyLayoutDefaults(t,p,u)},ae.layoutAttrOverrides=g(r.layoutAttributes,"plot","from-root"),ae.baseLayoutAttrOverrides=g({plot_bgcolor:w.plot_bgcolor,hoverlabel:n.hoverlabel},"plot","nested"),ae.plot=function(t){for(var p=t._fullLayout,u=t._fullData,i=p._subplots.gl2d,c=0;c<i.length;c++){var f=i[c],l=p._plots[f],h=a(u,"gl2d",f),d=l._scene2d;void 0===d&&(d=new m({id:f,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio},p),l._scene2d=d),d.plot(h,t.calcdata,p,t.layout)}},ae.clean=function(t,p,u,i){for(var c=i._subplots.gl2d||[],f=0;f<c.length;f++){var l=c[f],h=i._plots[l];h._scene2d&&0===a(t,"gl2d",l).length&&(h._scene2d.destroy(),delete i._plots[l])}r.clean.apply(this,arguments)},ae.drawFramework=function(t){t._context.staticPlot||r.drawFramework(t)},ae.toSVG=function(t){for(var p=t._fullLayout,u=p._subplots.gl2d,i=0;i<u.length;i++){var c=p._plots[u[i]]._scene2d,f=c.toImage("png");p._glimages.append("svg:image").attr({xmlns:y.svg,"xlink:href":f,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),c.destroy()}},ae.updateFx=function(t){for(var p=t._fullLayout,u=p._subplots.gl2d,i=0;i<u.length;i++)p._plots[u[i]]._scene2d.updateFx(p.dragmode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(x,oe,ae){"use strict";var g,m,w=x("../../registry"),y=x("../../plots/cartesian/axes"),e=x("../../components/fx"),r=x("../../../stackgl_modules").gl_plot2d,n=x("../../../stackgl_modules").gl_spikes2d,a=x("../../../stackgl_modules").gl_select_box,t=x("webgl-context"),p=x("./convert"),u=x("./camera"),i=x("../../lib/show_no_webgl_msg"),c=x("../cartesian/constraints"),f=c.enforce,l=c.clean,h=x("../cartesian/autorange").doAutoRange,d=x("../../components/dragelement/helpers"),o=d.drawMode,_=d.selectMode,s=["xaxis","yaxis"],k=x("../cartesian/constants").SUBPLOT_PATTERN;function M(E,I){this.container=E.container,this.graphDiv=E.graphDiv,this.pixelRatio=E.plotGlPixelRatio||window.devicePixelRatio,this.id=E.id,this.staticPlot=!!E.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(I),this.makeFramework(),this.stopped||(this.glplotOptions=p(this),this.glplotOptions.merge(I),this.glplot=r(this.glplotOptions),this.camera=u(this),this.traces={},this.spikes=n(this.glplot),this.selectBox=a(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}oe.exports=M;var A=M.prototype;A.makeFramework=function(){if(this.staticPlot){if(!(m||(g=document.createElement("canvas"),m=t({canvas:g,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=g,this.gl=m}else{var E=this.container.querySelector(".gl-canvas-focus"),I=t({canvas:E,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!I)return i(this),void(this.stopped=!0);this.canvas=E,this.gl=I}var C=this.canvas;C.style.width="100%",C.style.height="100%",C.style.position="absolute",C.style.top="0px",C.style.left="0px",C.style["pointer-events"]="none",this.updateSize(C);var R=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none";var O=this.mouseContainer=document.createElement("div");O.style.position="absolute",O.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var D=this.container;D.appendChild(R),D.appendChild(O);var L=this;O.addEventListener("mouseout",function(){L.isMouseOver=!1,L.unhover()}),O.addEventListener("mouseover",function(){L.isMouseOver=!0})},A.toImage=function(E){E||(E="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(g),this.updateSize(this.canvas);var I=this.glplot.gl,C=I.drawingBufferWidth,R=I.drawingBufferHeight;I.clearColor(1,1,1,0),I.clear(I.COLOR_BUFFER_BIT|I.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),I.bindFramebuffer(I.FRAMEBUFFER,null);var O=new Uint8Array(C*R*4);I.readPixels(0,0,C,R,I.RGBA,I.UNSIGNED_BYTE,O);for(var D=0,L=R-1;D<L;++D,--L)for(var B=0;B<C;++B)for(var j=0;j<4;++j){var W=O[4*(C*D+B)+j];O[4*(C*D+B)+j]=O[4*(C*L+B)+j],O[4*(C*L+B)+j]=W}var Y=document.createElement("canvas");Y.width=C,Y.height=R;var Q,ne=Y.getContext("2d",{willReadFrequently:!0}),X=ne.createImageData(C,R);switch(X.data.set(O),ne.putImageData(X,0,0),E){case"jpeg":Q=Y.toDataURL("image/jpeg");break;case"webp":Q=Y.toDataURL("image/webp");break;default:Q=Y.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(g),Q},A.updateSize=function(E){E||(E=this.canvas);var I=this.pixelRatio,C=this.fullLayout,O=C.height,D=0|Math.ceil(I*C.width),L=0|Math.ceil(I*O);return E.width===D&&E.height===L||(E.width=D,E.height=L),E},A.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var E=[y.calcTicks(this.xaxis),y.calcTicks(this.yaxis)],I=0;I<2;++I)for(var C=0;C<E[I].length;++C)E[I][C].text=E[I][C].text+"";return E},A.updateRefs=function(E){this.fullLayout=E;var I=this.id.match(k),R="yaxis"+I[2];this.xaxis=this.fullLayout["xaxis"+I[1]],this.yaxis=this.fullLayout[R]},A.relayoutCallback=function(){var E=this.graphDiv,I=this.xaxis,C=this.yaxis,R=E.layout,O={},D=O[I._name+".range"]=I.range.slice(),L=O[C._name+".range"]=C.range.slice();O[I._name+".autorange"]=I.autorange,O[C._name+".autorange"]=C.autorange,w.call("_storeDirectGUIEdit",E.layout,E._fullLayout._preGUI,O);var B=R[I._name];B.range=D,B.autorange=I.autorange;var j=R[C._name];j.range=L,j.autorange=C.autorange,O.lastInputTime=this.camera.lastInputTime,E.emit("plotly_relayout",O)},A.cameraChanged=function(){var E=this.camera;this.glplot.setDataBox(this.calcDataBox());var I=this.computeTickMarks();(function(C,R){for(var O=0;O<2;++O){var D=C[O],L=R[O];if(D.length!==L.length)return!0;for(var B=0;B<D.length;++B)if(D[B].x!==L[B].x)return!0}return!1})(I,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=I,this.glplotOptions.dataBox=E.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},A.handleAnnotations=function(){for(var E=this.graphDiv,I=this.fullLayout.annotations,C=0;C<I.length;C++){var R=I[C];R.xref===this.xaxis._id&&R.yref===this.yaxis._id&&w.getComponentMethod("annotations","drawOne")(E,C)}},A.destroy=function(){if(this.glplot){var E=this.traces;E&&Object.keys(E).map(function(I){E[I].dispose(),delete E[I]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},A.plot=function(E,I,C){var R=this.glplot;this.updateRefs(C),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(E,I),this.updateFx(C.dragmode);var O=C.width,D=C.height;this.updateSize(this.canvas);var L=this.glplotOptions;L.merge(C),L.screenBox=[0,0,O,D];var B={_fullLayout:{_axisConstraintGroups:C._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:C._size}};l(B,this.xaxis),l(B,this.yaxis);var j,W,Y=C._size,Q=this.xaxis.domain,ne=this.yaxis.domain;for(L.viewBox=[Y.l+Q[0]*Y.w,Y.b+ne[0]*Y.h,O-Y.r-(1-Q[1])*Y.w,D-Y.t-(1-ne[1])*Y.h],this.mouseContainer.style.width=Y.w*(Q[1]-Q[0])+"px",this.mouseContainer.style.height=Y.h*(ne[1]-ne[0])+"px",this.mouseContainer.height=Y.h*(ne[1]-ne[0]),this.mouseContainer.style.left=Y.l+Q[0]*Y.w+"px",this.mouseContainer.style.top=Y.t+(1-ne[1])*Y.h+"px",W=0;W<2;++W)(j=this[s[W]])._length=L.viewBox[W+2]-L.viewBox[W],h(this.graphDiv,j),j.setScale();f(B),L.ticks=this.computeTickMarks(),L.dataBox=this.calcDataBox(),L.merge(C),R.update(L),this.glplot.draw()},A.calcDataBox=function(){var E=this.xaxis,I=this.yaxis,C=E.range,R=I.range,O=E.r2l,D=I.r2l;return[O(C[0]),D(R[0]),O(C[1]),D(R[1])]},A.setRanges=function(E){var I=this.xaxis,C=this.yaxis,R=I.l2r,O=C.l2r;I.range=[R(E[0]),R(E[2])],C.range=[O(E[1]),O(E[3])]},A.updateTraces=function(E,I){var C,R,O,D=Object.keys(this.traces);this.fullData=E;e:for(C=0;C<D.length;C++){var L=D[C],B=this.traces[L];for(R=0;R<E.length;R++)if((O=E[R]).uid===L&&O.type===B.type)continue e;B.dispose(),delete this.traces[L]}for(C=0;C<E.length;C++){var j=I[C],W=this.traces[(O=E[C]).uid];W?W.update(O,j):(W=O._module.plot(this,O,j),this.traces[O.uid]=W)}this.glplot.objects.sort(function(Y,Q){return Y._trace.index-Q._trace.index})},A.updateFx=function(E){_(E)||o(E)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===E?"move":"zoom"===E?"crosshair":null},A.emitPointAction=function(E,I){for(var C,R=E.trace.uid,O=E.pointIndex,D=0;D<this.fullData.length;D++)this.fullData[D].uid===R&&(C=this.fullData[D]);var L={x:E.traceCoord[0],y:E.traceCoord[1],curveNumber:C.index,pointNumber:O,data:C._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(L,C,O),this.graphDiv.emit(I,{points:[L]})},A.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var E=this.glplot,I=this.camera,C=I.mouseListener,R=1===this.lastButtonState&&0===C.buttons,O=this.fullLayout;this.lastButtonState=C.buttons,this.cameraChanged();var D,L=C.x*E.pixelRatio,B=this.canvas.height-E.pixelRatio*C.y;if(I.boxEnabled&&"zoom"===O.dragmode){this.selectBox.enabled=!0;for(var j=this.selectBox.selectBox=[Math.min(I.boxStart[0],I.boxEnd[0]),Math.min(I.boxStart[1],I.boxEnd[1]),Math.max(I.boxStart[0],I.boxEnd[0]),Math.max(I.boxStart[1],I.boxEnd[1])],W=0;W<2;W++)I.boxStart[W]===I.boxEnd[W]&&(j[W]=E.dataBox[W],j[W+2]=E.dataBox[W+2]);E.setDirty()}else if(!I.panning&&this.isMouseOver){this.selectBox.enabled=!1;var Y=O._size,X=(D=E.pick(L/E.pixelRatio+Y.l+this.xaxis.domain[0]*Y.w,B/E.pixelRatio-(Y.t+(1-this.yaxis.domain[1])*Y.h)))&&D.object._trace.handlePick(D);if(X&&R&&this.emitPointAction(X,"plotly_click"),D&&"skip"!==D.object._trace.hoverinfo&&O.hovermode&&X&&(!this.lastPickResult||this.lastPickResult.traceUid!==X.trace.uid||this.lastPickResult.dataCoord[0]!==X.dataCoord[0]||this.lastPickResult.dataCoord[1]!==X.dataCoord[1])){var $=X;this.lastPickResult={traceUid:X.trace?X.trace.uid:null,dataCoord:X.dataCoord.slice()},this.spikes.update({center:D.dataCoord}),$.screenCoord=[((E.viewBox[2]-E.viewBox[0])*(D.dataCoord[0]-E.dataBox[0])/(E.dataBox[2]-E.dataBox[0])+E.viewBox[0])/E.pixelRatio,(this.canvas.height-(E.viewBox[3]-E.viewBox[1])*(D.dataCoord[1]-E.dataBox[1])/(E.dataBox[3]-E.dataBox[1])-E.viewBox[1])/E.pixelRatio],this.emitPointAction(X,"plotly_hover");var re=this.fullData[$.trace.index]||{},H=$.pointIndex,U=e.castHoverinfo(re,O,H);if(U&&"all"!==U){var G=U.split("+");-1===G.indexOf("x")&&($.traceCoord[0]=void 0),-1===G.indexOf("y")&&($.traceCoord[1]=void 0),-1===G.indexOf("z")&&($.traceCoord[2]=void 0),-1===G.indexOf("text")&&($.textLabel=void 0),-1===G.indexOf("name")&&($.name=void 0)}e.loneHover({x:$.screenCoord[0],y:$.screenCoord[1],xLabel:this.hoverFormatter("xaxis",$.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",$.traceCoord[1]),zLabel:$.traceCoord[2],text:$.textLabel,name:$.name,color:e.castHoverOption(re,H,"bgcolor")||$.color,borderColor:e.castHoverOption(re,H,"bordercolor"),fontFamily:e.castHoverOption(re,H,"font.family"),fontSize:e.castHoverOption(re,H,"font.size"),fontColor:e.castHoverOption(re,H,"font.color"),nameLength:e.castHoverOption(re,H,"namelength"),textAlign:e.castHoverOption(re,H,"align")},{container:this.svgContainer,gd:this.graphDiv})}}D||this.unhover(),E.draw()}},A.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),e.loneUnhover(this.svgContainer))},A.hoverFormatter=function(E,I){if(void 0!==I){var C=this[E];return y.tickText(C,C.c2l(I),"hover").text}}},{"../../../stackgl_modules":1124,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(x,oe,ae){"use strict";var g=x("../../plot_api/edit_types").overrideAll,m=x("../../components/fx/layout_attributes"),w=x("./scene"),y=x("../get_data").getSubplotData,e=x("../../lib"),r=x("../../constants/xmlns_namespaces");ae.name="gl3d",ae.attr="scene",ae.idRoot="scene",ae.idRegex=ae.attrRegex=e.counterRegex("scene"),ae.attributes=x("./layout/attributes"),ae.layoutAttributes=x("./layout/layout_attributes"),ae.baseLayoutAttrOverrides=g({hoverlabel:m.hoverlabel},"plot","nested"),ae.supplyLayoutDefaults=x("./layout/defaults"),ae.plot=function(n){for(var a=n._fullLayout,t=n._fullData,p=a._subplots.gl3d,u=0;u<p.length;u++){var i=p[u],c=y(t,"gl3d",i),f=a[i],l=f.camera,h=f._scene;h||(h=new w({id:i,graphDiv:n,container:n.querySelector(".gl-container"),staticPlot:n._context.staticPlot,plotGlPixelRatio:n._context.plotGlPixelRatio,camera:l},a),f._scene=h),h.viewInitial||(h.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),h.plot(c,a,n.layout)}},ae.clean=function(n,a,t,p){for(var u=p._subplots.gl3d||[],i=0;i<u.length;i++){var c=u[i];!a[c]&&p[c]._scene&&(p[c]._scene.destroy(),p._infolayer&&p._infolayer.selectAll(".annotation-"+c).remove())}},ae.toSVG=function(n){for(var a=n._fullLayout,t=a._subplots.gl3d,p=a._size,u=0;u<t.length;u++){var i=a[t[u]],c=i.domain,f=i._scene,l=f.toImage("png");a._glimages.append("svg:image").attr({xmlns:r.svg,"xlink:href":l,x:p.l+p.w*c.x[0],y:p.t+p.h*(1-c.y[1]),width:p.w*(c.x[1]-c.x[0]),height:p.h*(c.y[1]-c.y[0]),preserveAspectRatio:"none"}),f.destroy()}},ae.cleanId=function(n){if(n.match(/^scene[0-9]*$/)){var a=n.substr(5);return"1"===a&&(a=""),"scene"+a}},ae.updateFx=function(n){for(var a=n._fullLayout,t=a._subplots.gl3d,p=0;p<t.length;p++)a[t[p]]._scene.updateFx(a.dragmode,a.hovermode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(x,oe,ae){"use strict";oe.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(x,oe,ae){"use strict";var g=x("../../../components/color"),m=x("../../cartesian/layout_attributes"),w=x("../../../lib/extend").extendFlat,y=x("../../../plot_api/edit_types").overrideAll;oe.exports=y({visible:m.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:g.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:m.color,categoryorder:m.categoryorder,categoryarray:m.categoryarray,title:{text:m.title.text,font:m.title.font},type:w({},m.type,{values:["-","linear","log","date","category"]}),autotypenumbers:m.autotypenumbers,autorange:m.autorange,rangemode:m.rangemode,range:w({},m.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,mirror:m.mirror,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,showticklabels:m.showticklabels,tickfont:m.tickfont,tickangle:m.tickangle,tickprefix:m.tickprefix,showtickprefix:m.showtickprefix,ticksuffix:m.ticksuffix,showticksuffix:m.showticksuffix,showexponent:m.showexponent,exponentformat:m.exponentformat,minexponent:m.minexponent,separatethousands:m.separatethousands,tickformat:m.tickformat,tickformatstops:m.tickformatstops,hoverformat:m.hoverformat,showline:m.showline,linecolor:m.linecolor,linewidth:m.linewidth,showgrid:m.showgrid,gridcolor:w({},m.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:m.gridwidth,zeroline:m.zeroline,zerolinecolor:m.zerolinecolor,zerolinewidth:m.zerolinewidth,_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(x,oe,ae){"use strict";var g=x("tinycolor2").mix,m=x("../../../lib"),w=x("../../../plot_api/plot_template"),y=x("./axis_attributes"),e=x("../../cartesian/type_defaults"),r=x("../../cartesian/axis_defaults"),n=["xaxis","yaxis","zaxis"];oe.exports=function(a,t,p){var u,i;function c(h,d){return m.coerce(u,i,y,h,d)}for(var f=0;f<n.length;f++){var l=n[f];u=a[l]||{},(i=w.newContainer(t,l))._id=l[0]+p.scene,i._name=l,e(u,i,c,p),r(u,i,c,{font:p.font,letter:l[0],data:p.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:p.bgColor,calendar:p.calendar},p.fullLayout),c("gridcolor",g(i.color,p.bgColor,13600/187).toRgbString()),c("title.text",l[0]),i.setScale=m.noop,c("showspikes")&&(c("spikesides"),c("spikethickness"),c("spikecolor",i.color)),c("showaxeslabels"),c("showbackground")&&c("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(x,oe,ae){"use strict";var g=x("../../../lib/str2rgbarray"),m=x("../../../lib"),w=["xaxis","yaxis","zaxis"];function y(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}y.prototype.merge=function(e,r){for(var n=0;n<3;++n){var a=r[w[n]];a.visible?(this.labels[n]=e._meta?m.templateString(a.title.text,e._meta):a.title.text,"font"in a.title&&(a.title.font.color&&(this.labelColor[n]=g(a.title.font.color)),a.title.font.family&&(this.labelFont[n]=a.title.font.family),a.title.font.size&&(this.labelSize[n]=a.title.font.size)),"showline"in a&&(this.lineEnable[n]=a.showline),"linecolor"in a&&(this.lineColor[n]=g(a.linecolor)),"linewidth"in a&&(this.lineWidth[n]=a.linewidth),"showgrid"in a&&(this.gridEnable[n]=a.showgrid),"gridcolor"in a&&(this.gridColor[n]=g(a.gridcolor)),"gridwidth"in a&&(this.gridWidth[n]=a.gridwidth),"log"===a.type?this.zeroEnable[n]=!1:"zeroline"in a&&(this.zeroEnable[n]=a.zeroline),"zerolinecolor"in a&&(this.zeroLineColor[n]=g(a.zerolinecolor)),"zerolinewidth"in a&&(this.zeroLineWidth[n]=a.zerolinewidth),this.lineTickEnable[n]=!(!("ticks"in a)||!a.ticks),"ticklen"in a&&(this.lineTickLength[n]=this._defaultLineTickLength[n]=a.ticklen),"tickcolor"in a&&(this.lineTickColor[n]=g(a.tickcolor)),"tickwidth"in a&&(this.lineTickWidth[n]=a.tickwidth),"tickangle"in a&&(this.tickAngle[n]="auto"===a.tickangle?-3600:Math.PI*-a.tickangle/180),"showticklabels"in a&&(this.tickEnable[n]=a.showticklabels),"tickfont"in a&&(a.tickfont.color&&(this.tickColor[n]=g(a.tickfont.color)),a.tickfont.family&&(this.tickFont[n]=a.tickfont.family),a.tickfont.size&&(this.tickSize[n]=a.tickfont.size)),"mirror"in a?-1!==["ticks","all","allticks"].indexOf(a.mirror)?(this.lineTickMirror[n]=!0,this.lineMirror[n]=!0):!0===a.mirror?(this.lineTickMirror[n]=!1,this.lineMirror[n]=!0):(this.lineTickMirror[n]=!1,this.lineMirror[n]=!1):this.lineMirror[n]=!1,"showbackground"in a&&!1!==a.showbackground?(this.backgroundEnable[n]=!0,this.backgroundColor[n]=g(a.backgroundcolor)):this.backgroundEnable[n]=!1):(this.tickEnable[n]=!1,this.labelEnable[n]=!1,this.lineEnable[n]=!1,this.lineTickEnable[n]=!1,this.gridEnable[n]=!1,this.zeroEnable[n]=!1,this.backgroundEnable[n]=!1)}},oe.exports=function(e,r){var n=new y;return n.merge(e,r),n}},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(x,oe,ae){"use strict";var g=x("../../../lib"),m=x("../../../components/color"),w=x("../../../registry"),y=x("../../subplot_defaults"),e=x("./axis_defaults"),r=x("./layout_attributes"),n=x("../../get_data").getSubplotData;function a(t,p,u,i){for(var c=u("bgcolor"),f=m.combine(c,i.paper_bgcolor),l=["up","center","eye"],h=0;h<l.length;h++)u("camera."+l[h]+".x"),u("camera."+l[h]+".y"),u("camera."+l[h]+".z");u("camera.projection.type");var d=!!u("aspectratio.x")&&!!u("aspectratio.y")&&!!u("aspectratio.z"),o=u("aspectmode",d?"manual":"auto");d||(t.aspectratio=p.aspectratio={x:1,y:1,z:1},"manual"===o&&(p.aspectmode="auto"),t.aspectmode=p.aspectmode);var _=n(i.fullData,"gl3d",i.id);e(t,p,{font:i.font,scene:i.id,data:_,bgColor:f,calendar:i.calendar,autotypenumbersDflt:i.autotypenumbersDflt,fullLayout:i.fullLayout}),w.getComponentMethod("annotations3d","handleDefaults")(t,p,i);var s=i.getDfltFromLayout("dragmode");if(!1!==s&&!s)if(s="orbit",t.camera&&t.camera.up){var k=t.camera.up.x,M=t.camera.up.y,A=t.camera.up.z;0!==A&&(k&&M&&A?A/Math.sqrt(k*k+M*M+A*A)>.999&&(s="turntable"):s="turntable")}else s="turntable";u("dragmode",s),u("hovermode",i.getDfltFromLayout("hovermode"))}oe.exports=function(t,p,u){var i=p._basePlotModules.length>1;y(t,p,u,{type:"gl3d",attributes:r,handleDefaults:a,fullLayout:p,font:p.font,fullData:u,getDfltFromLayout:function(c){if(!i)return g.validate(t[c],r[c])?t[c]:void 0},autotypenumbersDflt:p.autotypenumbers,paper_bgcolor:p.paper_bgcolor,calendar:p.calendar})}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(x,oe,ae){"use strict";var g=x("./axis_attributes"),m=x("../../domain").attributes,w=x("../../../lib/extend").extendFlat,y=x("../../../lib").counterRegex;function e(r,n,a){return{x:{valType:"number",dflt:r,editType:"camera"},y:{valType:"number",dflt:n,editType:"camera"},z:{valType:"number",dflt:a,editType:"camera"},editType:"camera"}}oe.exports={_arrayAttrRegexps:[y("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:w(e(0,0,1),{}),center:w(e(0,0,0),{}),eye:w(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:m({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:g,yaxis:g,zaxis:g,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(x,oe,ae){"use strict";var g=x("../../../lib/str2rgbarray"),m=["xaxis","yaxis","zaxis"];function w(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}w.prototype.merge=function(y){for(var e=0;e<3;++e){var r=y[m[e]];r.visible?(this.enabled[e]=r.showspikes,this.colors[e]=g(r.spikecolor),this.drawSides[e]=r.spikesides,this.lineWidth[e]=r.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},oe.exports=function(y){var e=new w;return e.merge(y),e}},{"../../../lib/str2rgbarray":528}],606:[function(x,oe,ae){"use strict";oe.exports=function(e){for(var r=e.axesOptions,n=e.glplot.axesPixels,a=e.fullSceneLayout,t=[[],[],[]],p=0;p<3;++p){var u=a[w[p]];if(u._length=(n[p].hi-n[p].lo)*n[p].pixelsPerDataUnit/e.dataScale[p],Math.abs(u._length)===1/0||isNaN(u._length))t[p]=[];else{u._input_range=u.range.slice(),u.range[0]=n[p].lo/e.dataScale[p],u.range[1]=n[p].hi/e.dataScale[p],u._m=1/(e.dataScale[p]*n[p].pixelsPerDataUnit),u.range[0]===u.range[1]&&(u.range[0]-=1,u.range[1]+=1);var i=u.tickmode;if("auto"===u.tickmode){u.tickmode="linear";var c=u.nticks||m.constrain(u._length/40,4,9);g.autoTicks(u,Math.abs(u.range[1]-u.range[0])/c)}for(var f=g.calcTicks(u,{msUTC:!0}),l=0;l<f.length;++l)f[l].x=f[l].x*e.dataScale[p],"date"===u.type&&(f[l].text=f[l].text.replace(/\<br\>/g," "));t[p]=f,u.tickmode=i}}for(r.ticks=t,p=0;p<3;++p)for(y[p]=.5*(e.glplot.bounds[0][p]+e.glplot.bounds[1][p]),l=0;l<2;++l)r.bounds[l][p]=e.glplot.bounds[l][p];e.contourLevels=function(h){for(var d=new Array(3),o=0;o<3;++o){for(var _=h[o],s=new Array(_.length),k=0;k<_.length;++k)s[k]=_[k].x;d[o]=s}return d}(t)};var g=x("../../cartesian/axes"),m=x("../../../lib"),w=["xaxis","yaxis","zaxis"],y=[0,0,0]},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(x,oe,ae){"use strict";function g(m,w){var y,e,r=[0,0,0,0];for(y=0;y<4;++y)for(e=0;e<4;++e)r[e]+=m[4*y+e]*w[y];return r}oe.exports=function(m,w){return g(m.projection,g(m.view,g(m.model,[w[0],w[1],w[2],1])))}},{}],608:[function(x,oe,ae){"use strict";var g,m,w=x("../../../stackgl_modules").gl_plot3d,y=w.createCamera,e=w.createScene,r=x("webgl-context"),n=x("has-passive-events"),a=x("../../registry"),t=x("../../lib"),p=t.preserveDrawingBuffer(),u=x("../../plots/cartesian/axes"),i=x("../../components/fx"),c=x("../../lib/str2rgbarray"),f=x("../../lib/show_no_webgl_msg"),l=x("./project"),h=x("./layout/convert"),d=x("./layout/spikes"),o=x("./layout/tick_marks");function _(E,I){var C=document.createElement("div"),R=E.container;this.graphDiv=E.graphDiv;var O=document.createElementNS("http://www.w3.org/2000/svg","svg");O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",O.style["z-index"]=20,O.style["pointer-events"]="none",C.appendChild(O),this.svgContainer=O,C.id=E.id,C.style.position="absolute",C.style.top=C.style.left="0px",C.style.width=C.style.height="100%",R.appendChild(C),this.fullLayout=I,this.id=E.id||"scene",this.fullSceneLayout=I[this.id],this.plotArgs=[[],{},{}],this.axesOptions=h(I,I[this.id]),this.spikeOptions=d(I[this.id]),this.container=C,this.staticMode=!!E.staticPlot,this.pixelRatio=this.pixelRatio||E.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=a.getComponentMethod("annotations3d","convert"),this.drawAnnotations=a.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var s=_.prototype;s.prepareOptions=function(){var E={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:p,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(m||(g=document.createElement("canvas"),m=r({canvas:g,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");E.gl=m,E.canvas=g}return E};var k=!0;s.tryCreatePlot=function(){var E=this.prepareOptions(),I=!0;try{this.glplot=e(E)}catch(C){if(this.staticMode||!k||p)I=!1;else{t.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{p=E.glOptions.preserveDrawingBuffer=!0,this.glplot=e(E)}catch(R){p=E.glOptions.preserveDrawingBuffer=!1,I=!1}}}return k=!1,I},s.initializeGLCamera=function(){var E=this.fullSceneLayout.camera;this.camera=y(this.container,{center:[E.center.x,E.center.y,E.center.z],eye:[E.eye.x,E.eye.y,E.eye.z],up:[E.up.x,E.up.y,E.up.z],_ortho:"orthographic"===E.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},s.initializeGLPlot=function(){var E=this;if(E.initializeGLCamera(),!E.tryCreatePlot())return f(E);E.traces={},E.make4thDimension();var I=E.graphDiv,C=I.layout,R=function(){var D={};return E.isCameraChanged(C)&&(D[E.id+".camera"]=E.getCamera()),E.isAspectChanged(C)&&(D[E.id+".aspectratio"]=E.glplot.getAspectratio(),"manual"!==C[E.id].aspectmode&&(E.fullSceneLayout.aspectmode=C[E.id].aspectmode=D[E.id+".aspectmode"]="manual")),D},O=function(D){if(!1!==D.fullSceneLayout.dragmode){var L=R();D.saveLayout(C),D.graphDiv.emit("plotly_relayout",L)}};return E.glplot.canvas&&(E.glplot.canvas.addEventListener("mouseup",function(){O(E)}),E.glplot.canvas.addEventListener("wheel",function(D){if(I._context._scrollZoom.gl3d){if(E.camera._ortho){var L=D.deltaX>D.deltaY?1.1:1/1.1,B=E.glplot.getAspectratio();E.glplot.setAspectratio({x:L*B.x,y:L*B.y,z:L*B.z})}O(E)}},!!n&&{passive:!1}),E.glplot.canvas.addEventListener("mousemove",function(){if(!1!==E.fullSceneLayout.dragmode&&0!==E.camera.mouseListener.buttons){var D=R();E.graphDiv.emit("plotly_relayouting",D)}}),E.staticMode||E.glplot.canvas.addEventListener("webglcontextlost",function(D){I&&I.emit&&I.emit("plotly_webglcontextlost",{event:D,layer:E.id})},!1)),E.glplot.oncontextloss=function(){E.recoverContext()},E.glplot.onrender=function(){E.render()},!0},s.render=function(){var E,I=this,C=I.graphDiv,R=I.svgContainer,O=I.container.getBoundingClientRect();C._fullLayout._calcInverseTransform(C);var B=O.width*C._fullLayout._invScaleX,j=O.height*C._fullLayout._invScaleY;R.setAttributeNS(null,"viewBox","0 0 "+B+" "+j),R.setAttributeNS(null,"width",B),R.setAttributeNS(null,"height",j),o(I),I.glplot.axes.update(I.axesOptions);for(var W=Object.keys(I.traces),Y=null,Q=I.glplot.selection,ne=0;ne<W.length;++ne)"skip"!==(E=I.traces[W[ne]]).data.hoverinfo&&E.handlePick(Q)&&(Y=E),E.setContourLevels&&E.setContourLevels();function X(he,xe,ge){var _e=I.fullSceneLayout[he+"axis"];return"log"!==_e.type&&(xe=_e.d2l(xe)),u.hoverLabelText(_e,xe,ge)}if(null!==Y){var re,$=l(I.glplot.cameraParams,Q.dataCoordinate),H=C._fullData[(E=Y.data).index],U=Q.index,G={xLabel:X("x",Q.traceCoordinate[0],E.xhoverformat),yLabel:X("y",Q.traceCoordinate[1],E.yhoverformat),zLabel:X("z",Q.traceCoordinate[2],E.zhoverformat)},ie=i.castHoverinfo(H,I.fullLayout,U),q=(ie||"").split("+"),ee=ie&&"all"===ie;H.hovertemplate||ee||(-1===q.indexOf("x")&&(G.xLabel=void 0),-1===q.indexOf("y")&&(G.yLabel=void 0),-1===q.indexOf("z")&&(G.zLabel=void 0),-1===q.indexOf("text")&&(Q.textLabel=void 0),-1===q.indexOf("name")&&(Y.name=void 0));var te=[];"cone"===E.type||"streamtube"===E.type?(G.uLabel=X("x",Q.traceCoordinate[3],E.uhoverformat),(ee||-1!==q.indexOf("u"))&&te.push("u: "+G.uLabel),G.vLabel=X("y",Q.traceCoordinate[4],E.vhoverformat),(ee||-1!==q.indexOf("v"))&&te.push("v: "+G.vLabel),G.wLabel=X("z",Q.traceCoordinate[5],E.whoverformat),(ee||-1!==q.indexOf("w"))&&te.push("w: "+G.wLabel),G.normLabel=Q.traceCoordinate[6].toPrecision(3),(ee||-1!==q.indexOf("norm"))&&te.push("norm: "+G.normLabel),"streamtube"===E.type&&(G.divergenceLabel=Q.traceCoordinate[7].toPrecision(3),(ee||-1!==q.indexOf("divergence"))&&te.push("divergence: "+G.divergenceLabel)),Q.textLabel&&te.push(Q.textLabel),re=te.join("<br>")):"isosurface"===E.type||"volume"===E.type?(G.valueLabel=u.hoverLabelText(I._mockAxis,I._mockAxis.d2l(Q.traceCoordinate[3]),E.valuehoverformat),te.push("value: "+G.valueLabel),Q.textLabel&&te.push(Q.textLabel),re=te.join("<br>")):re=Q.textLabel;var se={x:Q.traceCoordinate[0],y:Q.traceCoordinate[1],z:Q.traceCoordinate[2],data:H._input,fullData:H,curveNumber:H.index,pointNumber:U};i.appendArrayPointValue(se,H,U),E._module.eventData&&(se=H._module.eventData(se,Q,H,{},U));var ue={points:[se]};if(I.fullSceneLayout.hovermode){var de=[];i.loneHover({trace:H,x:(.5+.5*$[0]/$[3])*B,y:(.5-.5*$[1]/$[3])*j,xLabel:G.xLabel,yLabel:G.yLabel,zLabel:G.zLabel,text:re,name:Y.name,color:i.castHoverOption(H,U,"bgcolor")||Y.color,borderColor:i.castHoverOption(H,U,"bordercolor"),fontFamily:i.castHoverOption(H,U,"font.family"),fontSize:i.castHoverOption(H,U,"font.size"),fontColor:i.castHoverOption(H,U,"font.color"),nameLength:i.castHoverOption(H,U,"namelength"),textAlign:i.castHoverOption(H,U,"align"),hovertemplate:t.castOption(H,U,"hovertemplate"),hovertemplateLabels:t.extendFlat({},se,G),eventData:[se]},{container:R,gd:C,inOut_bbox:de}),se.bbox=de[0]}C.emit(Q.buttons&&Q.distance<5?"plotly_click":"plotly_hover",ue),this.oldEventData=ue}else i.loneUnhover(R),this.oldEventData&&C.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;I.drawAnnotations(I)},s.recoverContext=function(){var E=this;E.glplot.dispose();var I=function(){E.glplot.gl.isContextLost()?requestAnimationFrame(I):E.initializeGLPlot()?E.plot.apply(E,E.plotArgs):t.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(I)};var M=["xaxis","yaxis","zaxis"];function A(E,I,C){for(var R=E.fullSceneLayout,O=0;O<3;O++){var D=M[O],L=D.charAt(0),B=R[D],j=I[L],W=I[L+"calendar"],Y=I["_"+L+"length"];if(t.isArrayOrTypedArray(j))for(var Q,ne=0;ne<(Y||j.length);ne++)if(t.isArrayOrTypedArray(j[ne]))for(var X=0;X<j[ne].length;++X)Q=B.d2l(j[ne][X],0,W),!isNaN(Q)&&isFinite(Q)&&(C[0][O]=Math.min(C[0][O],Q),C[1][O]=Math.max(C[1][O],Q));else Q=B.d2l(j[ne],0,W),!isNaN(Q)&&isFinite(Q)&&(C[0][O]=Math.min(C[0][O],Q),C[1][O]=Math.max(C[1][O],Q));else C[0][O]=Math.min(C[0][O],0),C[1][O]=Math.max(C[1][O],Y-1)}}s.plot=function(E,I,C){if(this.plotArgs=[E,I,C],!this.glplot.contextLost){var R,O,D,L,B,j,W=I[this.id],Y=C[this.id];this.fullLayout=I,this.fullSceneLayout=W,this.axesOptions.merge(I,W),this.spikeOptions.merge(W),this.setViewport(W),this.updateFx(W.dragmode,W.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(c(W.bgcolor)),this.setConvert(B),E?Array.isArray(E)||(E=[E]):E=[];var Q=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(D=0;D<E.length;++D)!0===(R=E[D]).visible&&0!==R._length&&A(this,R,Q);!function(Pe,De){for(var Fe=Pe.fullSceneLayout,Ue=Fe.annotations||[],He=0;He<3;He++)for(var Ke=M[He],st=Ke.charAt(0),Ve=Fe[Ke],$e=0;$e<Ue.length;$e++){var Qe=Ue[$e];if(Qe.visible){var tt=Ve.r2l(Qe[st]);!isNaN(tt)&&isFinite(tt)&&(De[0][He]=Math.min(De[0][He],tt),De[1][He]=Math.max(De[1][He],tt))}}}(this,Q);var ne=[1,1,1];for(L=0;L<3;++L)ne[L]=Q[1][L]===Q[0][L]?1:1/(Q[1][L]-Q[0][L]);for(this.dataScale=ne,this.convertAnnotations(this),D=0;D<E.length;++D)!0===(R=E[D]).visible&&0!==R._length&&((O=this.traces[R.uid])?O.data.type===R.type?O.update(R):(O.dispose(),O=R._module.plot(this,R),this.traces[R.uid]=O):(O=R._module.plot(this,R),this.traces[R.uid]=O),O.name=R.name);var X=Object.keys(this.traces);e:for(D=0;D<X.length;++D){for(L=0;L<E.length;++L)if(E[L].uid===X[D]&&!0===E[L].visible&&0!==E[L]._length)continue e;(O=this.traces[X[D]]).dispose(),delete this.traces[X[D]]}this.glplot.objects.sort(function(Pe,De){return Pe._trace.data.index-De._trace.data.index});var $,re=[[0,0,0],[0,0,0]],H=[],U={};for(D=0;D<3;++D){if((j=(B=W[M[D]]).type)in U?(U[j].acc*=ne[D],U[j].count+=1):U[j]={acc:ne[D],count:1},B.autorange){re[0][D]=1/0,re[1][D]=-1/0;var G=this.glplot.objects,ie=this.fullSceneLayout.annotations||[],q=B._name.charAt(0);for(L=0;L<G.length;L++){var ee=G[L],te=ee.bounds,se=ee._trace.data._pad||0;re[0][D]="ErrorBars"===ee.constructor.name&&B._lowerLogErrorBound?Math.min(re[0][D],B._lowerLogErrorBound):Math.min(re[0][D],te[0][D]/ne[D]-se),re[1][D]=Math.max(re[1][D],te[1][D]/ne[D]+se)}for(L=0;L<ie.length;L++){var ue=ie[L];if(ue.visible){var de=B.r2l(ue[q]);re[0][D]=Math.min(re[0][D],de),re[1][D]=Math.max(re[1][D],de)}}if("rangemode"in B&&"tozero"===B.rangemode&&(re[0][D]=Math.min(re[0][D],0),re[1][D]=Math.max(re[1][D],0)),re[0][D]>re[1][D])re[0][D]=-1,re[1][D]=1;else{var he=re[1][D]-re[0][D];re[0][D]-=he/32,re[1][D]+=he/32}if("reversed"===B.autorange){var xe=re[0][D];re[0][D]=re[1][D],re[1][D]=xe}}else{var ge=B.range;re[0][D]=B.r2l(ge[0]),re[1][D]=B.r2l(ge[1])}re[0][D]===re[1][D]&&(re[0][D]-=1,re[1][D]+=1),H[D]=re[1][D]-re[0][D],this.glplot.setBounds(D,{min:re[0][D]*ne[D],max:re[1][D]*ne[D]})}var _e=W.aspectmode;if("cube"===_e)$=[1,1,1];else if("manual"===_e){var Ce=W.aspectratio;$=[Ce.x,Ce.y,Ce.z]}else{if("auto"!==_e&&"data"!==_e)throw new Error("scene.js aspectRatio was not one of the enumerated types");var Le=[1,1,1];for(D=0;D<3;++D){var Ie=U[j=(B=W[M[D]]).type];Le[D]=Math.pow(Ie.acc,1/Ie.count)/ne[D]}$="data"===_e||Math.max.apply(null,Le)/Math.min.apply(null,Le)<=4?Le:[1,1,1]}W.aspectratio.x=Y.aspectratio.x=$[0],W.aspectratio.y=Y.aspectratio.y=$[1],W.aspectratio.z=Y.aspectratio.z=$[2],this.glplot.setAspectratio(W.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:W.aspectratio.x,y:W.aspectratio.y,z:W.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=W.aspectmode);var Be=W.domain||null,ve=I._size||null;if(Be&&ve){var Te=this.container.style;Te.position="absolute",Te.left=ve.l+Be.x[0]*ve.w+"px",Te.top=ve.t+(1-Be.y[1])*ve.h+"px",Te.width=ve.w*(Be.x[1]-Be.x[0])+"px",Te.height=ve.h*(Be.y[1]-Be.y[0])+"px"}this.glplot.redraw()}},s.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},s.getCamera=function(){var E;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(E=this.camera).up[0],y:E.up[1],z:E.up[2]},center:{x:E.center[0],y:E.center[1],z:E.center[2]},eye:{x:E.eye[0],y:E.eye[1],z:E.eye[2]},projection:{type:!0===E._ortho?"orthographic":"perspective"}}},s.setViewport=function(E){var I,C=E.camera;this.camera.lookAt.apply(this,[[(I=C).eye.x,I.eye.y,I.eye.z],[I.center.x,I.center.y,I.center.z],[I.up.x,I.up.y,I.up.z]]),this.glplot.setAspectratio(E.aspectratio),"orthographic"===C.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},s.isCameraChanged=function(E){var I=this.getCamera(),C=t.nestedProperty(E,this.id+".camera").get();var B,j,W,Y,Q,ne,O=!1;if(void 0===C)O=!0;else{for(var D=0;D<3;D++)for(var L=0;L<3;L++)if(B=I,Y=L,Q=void 0,ne=void 0,ne=["x","y","z"],!(j=C)[(Q=["up","center","eye"])[W=D]]||B[Q[W]][ne[Y]]!==j[Q[W]][ne[Y]]){O=!0;break}(!C.projection||I.projection&&I.projection.type!==C.projection.type)&&(O=!0)}return O},s.isAspectChanged=function(E){var I=this.glplot.getAspectratio(),C=t.nestedProperty(E,this.id+".aspectratio").get();return void 0===C||C.x!==I.x||C.y!==I.y||C.z!==I.z},s.saveLayout=function(E){var I,C,R,O,D,L,B=this.fullLayout,j=this.isCameraChanged(E),W=this.isAspectChanged(E),Y=j||W;if(Y){var Q={};j&&(I=this.getCamera(),R=(C=t.nestedProperty(E,this.id+".camera")).get(),Q[this.id+".camera"]=R),W&&(O=this.glplot.getAspectratio(),L=(D=t.nestedProperty(E,this.id+".aspectratio")).get(),Q[this.id+".aspectratio"]=L),a.call("_storeDirectGUIEdit",E,B._preGUI,Q),j&&(C.set(I),t.nestedProperty(B,this.id+".camera").set(I)),W&&(D.set(O),t.nestedProperty(B,this.id+".aspectratio").set(O),this.glplot.redraw())}return Y},s.updateFx=function(E,I){var C=this.camera;if(C)if("orbit"===E)C.mode="orbit",C.keyBindingMode="rotate";else if("turntable"===E){C.up=[0,0,1],C.mode="turntable",C.keyBindingMode="rotate";var R=this.graphDiv,O=R._fullLayout,D=this.fullSceneLayout.camera,L=D.up.x,B=D.up.y,j=D.up.z;if(j/Math.sqrt(L*L+B*B+j*j)<.999){var W=this.id+".camera.up",Y={x:0,y:0,z:1},Q={};Q[W]=Y;var ne=R.layout;a.call("_storeDirectGUIEdit",ne,O._preGUI,Q),D.up=Y,t.nestedProperty(ne,W).set(Y)}}else C.keyBindingMode=E;this.fullSceneLayout.hovermode=I},s.toImage=function(E){E||(E="png"),this.staticMode&&this.container.appendChild(g),this.glplot.redraw();var I=this.glplot.gl,C=I.drawingBufferWidth,R=I.drawingBufferHeight;I.bindFramebuffer(I.FRAMEBUFFER,null);var O=new Uint8Array(C*R*4);I.readPixels(0,0,C,R,I.RGBA,I.UNSIGNED_BYTE,O),function(W,Y,Q){for(var ne=0,X=Q-1;ne<X;++ne,--X)for(var $=0;$<Y;++$)for(var re=0;re<4;++re){var H=4*(Y*ne+$)+re,U=4*(Y*X+$)+re,G=W[H];W[H]=W[U],W[U]=G}}(O,C,R),function(W,Y,Q){for(var ne=0;ne<Q;++ne)for(var X=0;X<Y;++X){var $=4*(Y*ne+X),re=W[$+3];if(re>0)for(var H=255/re,U=0;U<3;++U)W[$+U]=Math.min(H*W[$+U],255)}}(O,C,R);var D=document.createElement("canvas");D.width=C,D.height=R;var L,B=D.getContext("2d",{willReadFrequently:!0}),j=B.createImageData(C,R);switch(j.data.set(O),B.putImageData(j,0,0),E){case"jpeg":L=D.toDataURL("image/jpeg");break;case"webp":L=D.toDataURL("image/webp");break;default:L=D.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(g),L},s.setConvert=function(){for(var E=0;E<3;E++){var I=this.fullSceneLayout[M[E]];u.setConvert(I,this.fullLayout),I.setScale=t.noop}},s.make4thDimension=function(){var E=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},u.setConvert(this._mockAxis,E)},oe.exports=_},{"../../../stackgl_modules":1124,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w,y){y=y||g.length;for(var e=new Array(y),r=0;r<y;r++)e[r]=[g[r],m[r],w[r]];return e}},{}],610:[function(x,oe,ae){"use strict";var g=x("./font_attributes"),m=x("./animation_attributes"),w=x("../components/color/attributes"),y=x("../components/shapes/draw_newshape/attributes"),e=x("./pad_attributes"),r=x("../lib/extend").extendFlat,n=g({editType:"calc"});n.family.dflt='"Open Sans", verdana, arial, sans-serif',n.size.dflt=12,n.color.dflt=w.defaultLine,oe.exports={font:n,title:{text:{valType:"string",editType:"layoutstyle"},font:g({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:r(e({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:w.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:w.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:w.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:y.newshape,activeshape:y.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:r({},m.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:g({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(x,oe,ae){"use strict";var g=x("../../lib/sort_object_keys"),m='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',w=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',m].join(" "),y=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),e={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:m,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:w,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:w,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:y,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:y,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},r=g(e);oe.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:e,styleValuesNonMapbox:r,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",r.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},{"../../lib/sort_object_keys":526}],612:[function(x,oe,ae){"use strict";var g=x("../../lib");oe.exports=function(m,w){var y=m.split(" "),e=y[0],r=y[1],n=g.isArrayOrTypedArray(w)?g.mean(w):w,a=.5+n/100,t=1.5+n/100,p=["",""],u=[0,0];switch(e){case"top":p[0]="top",u[1]=-t;break;case"bottom":p[0]="bottom",u[1]=t}switch(r){case"left":p[1]="right",u[0]=-a;break;case"right":p[1]="left",u[0]=a}return{anchor:p[0]&&p[1]?p.join("-"):p[0]?p[0]:p[1]?p[1]:"center",offset:u}}},{"../../lib":503}],613:[function(x,oe,ae){"use strict";var g=x("mapbox-gl/dist/mapbox-gl-unminified"),m=x("../../lib"),w=m.strTranslate,y=m.strScale,e=x("../../plots/get_data").getSubplotCalcData,r=x("../../constants/xmlns_namespaces"),n=x("@plotly/d3"),a=x("../../components/drawing"),t=x("../../lib/svg_text_utils"),p=x("./mapbox"),u=ae.constants=x("./constants");function i(c){return"string"==typeof c&&(-1!==u.styleValuesMapbox.indexOf(c)||0===c.indexOf("mapbox://"))}ae.name="mapbox",ae.attr="subplot",ae.idRoot="mapbox",ae.idRegex=ae.attrRegex=m.counterRegex("mapbox"),ae.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},ae.layoutAttributes=x("./layout_attributes"),ae.supplyLayoutDefaults=x("./layout_defaults"),ae.plot=function(c){var f=c._fullLayout,l=c.calcdata,h=f._subplots.mapbox;if(g.version!==u.requiredVersion)throw new Error(u.wrongVersionErrorMsg);var d=function(A,E){var I=A._fullLayout;if(""===A._context.mapboxAccessToken)return"";for(var C=[],R=[],O=!1,D=!1,L=0;L<E.length;L++){var B=I[E[L]],j=B.accesstoken;i(B.style)&&(j?m.pushUnique(C,j):(i(B._input.style)&&(m.error("Uses Mapbox map style, but did not set an access token."),O=!0),D=!0)),j&&m.pushUnique(R,j)}if(D){var W=O?u.noAccessTokenErrorMsg:u.missingStyleErrorMsg;throw m.error(W),new Error(W)}return C.length?(C.length>1&&m.warn(u.multipleTokensErrorMsg),C[0]):(R.length&&m.log(["Listed mapbox access token(s)",R.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(c,h);g.accessToken=d;for(var o=0;o<h.length;o++){var _=h[o],s=e(l,"mapbox",_),k=f[_],M=k._subplot;M||(M=new p(c,_),f[_]._subplot=M),M.viewInitial||(M.viewInitial={center:m.extendFlat({},k.center),zoom:k.zoom,bearing:k.bearing,pitch:k.pitch}),M.plot(s,f,c._promises)}},ae.clean=function(c,f,l,h){for(var d=h._subplots.mapbox||[],o=0;o<d.length;o++){var _=d[o];!f[_]&&h[_]._subplot&&h[_]._subplot.destroy()}},ae.toSVG=function(c){for(var f=c._fullLayout,l=f._subplots.mapbox,h=f._size,d=0;d<l.length;d++){var o=f[l[d]],_=o.domain,s=o._subplot.toImage("png");f._glimages.append("svg:image").attr({xmlns:r.svg,"xlink:href":s,x:h.l+h.w*_.x[0],y:h.t+h.h*(1-_.y[1]),width:h.w*(_.x[1]-_.x[0]),height:h.h*(_.y[1]-_.y[0]),preserveAspectRatio:"none"});var k=n.select(o._subplot.div);if(null!==k.select(".mapboxgl-ctrl-logo").node().offsetParent){var M=f._glimages.append("g");M.attr("transform",w(h.l+h.w*_.x[0]+10,h.t+h.h*(1-_.y[0])-31)),M.append("path").attr("d",u.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),M.append("path").attr("d",u.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),M.append("path").attr("d",u.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),M.append("polygon").attr("points",u.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var A=k.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),E=f._glimages.append("g"),I=E.append("text");I.text(A).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":A});var C=a.bBox(I.node()),R=h.w*(_.x[1]-_.x[0]);if(C.width>R/2){var O=A.split("|").join("<br>");I.text(O).attr("data-unformatted",O).call(t.convertToTspans,c),C=a.bBox(I.node())}I.attr("transform",w(-3,8-C.height)),E.insert("rect",".static-attribution").attr({x:-C.width-6,y:-C.height-3,width:C.width+6,height:C.height+3,fill:"rgba(255, 255, 255, 0.75)"});var D=1;C.width+6>R&&(D=R/(C.width+6));var L=[h.l+h.w*_.x[1],h.t+h.h*(1-_.y[0])];E.attr("transform",w(L[0],L[1])+y(D))}},ae.updateFx=function(c){for(var f=c._fullLayout,l=f._subplots.mapbox,h=0;h<l.length;h++)f[l[h]]._subplot.updateFx(f)}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../lib/svg_text_utils").sanitizeHTML,w=x("./convert_text_opts"),y=x("./constants");function e(t,p){this.subplot=t,this.uid=t.uid+"-"+p,this.index=p,this.idSource="source-"+this.uid,this.idLayer=y.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var r=e.prototype;function n(t){if(!t.visible)return!1;var p=t.source;if(Array.isArray(p)&&p.length>0){for(var u=0;u<p.length;u++)if("string"!=typeof p[u]||0===p[u].length)return!1;return!0}return g.isPlainObject(p)||"string"==typeof p&&p.length>0}function a(t){var p={},u={};switch(t.type){case"circle":g.extendFlat(u,{"circle-radius":t.circle.radius,"circle-color":t.color,"circle-opacity":t.opacity});break;case"line":g.extendFlat(u,{"line-width":t.line.width,"line-color":t.color,"line-opacity":t.opacity,"line-dasharray":t.line.dash});break;case"fill":g.extendFlat(u,{"fill-color":t.color,"fill-outline-color":t.fill.outlinecolor,"fill-opacity":t.opacity});break;case"symbol":var i=t.symbol,c=w(i.textposition,i.iconsize);g.extendFlat(p,{"icon-image":i.icon+"-15","icon-size":i.iconsize/10,"text-field":i.text,"text-size":i.textfont.size,"text-anchor":c.anchor,"text-offset":c.offset,"symbol-placement":i.placement}),g.extendFlat(u,{"icon-color":t.color,"text-color":i.textfont.color,"text-opacity":t.opacity});break;case"raster":g.extendFlat(u,{"raster-fade-duration":0,"raster-opacity":t.opacity})}return{layout:p,paint:u}}r.update=function(t){this.visible?this.needsNewImage(t)?this.updateImage(t):this.needsNewSource(t)?(this.removeLayer(),this.updateSource(t),this.updateLayer(t)):this.needsNewLayer(t)?this.updateLayer(t):this.updateStyle(t):(this.updateSource(t),this.updateLayer(t)),this.visible=n(t)},r.needsNewImage=function(t){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===t.sourcetype&&(this.source!==t.source||JSON.stringify(this.coordinates)!==JSON.stringify(t.coordinates))},r.needsNewSource=function(t){return this.sourceType!==t.sourcetype||JSON.stringify(this.source)!==JSON.stringify(t.source)||this.layerType!==t.type},r.needsNewLayer=function(t){return this.layerType!==t.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},r.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},r.updateImage=function(t){this.subplot.map.getSource(this.idSource).updateImage({url:t.source,coordinates:t.coordinates});var p=this.findFollowingMapboxLayerId(this.lookupBelow());null!==p&&this.subplot.map.moveLayer(this.idLayer,p)},r.updateSource=function(t){var i,c,f,l,h,p=this.subplot.map;if(p.getSource(this.idSource)&&p.removeSource(this.idSource),this.sourceType=t.sourcetype,this.source=t.source,n(t)){var u=(l=(i=t).source,h={type:f=i.sourcetype},"geojson"===f?c="data":"vector"===f?c="string"==typeof l?"url":"tiles":"raster"===f?(c="tiles",h.tileSize=256):"image"===f&&(c="url",h.coordinates=i.coordinates),h[c]=l,i.sourceattribution&&(h.attribution=m(i.sourceattribution)),h);p.addSource(this.idSource,u)}},r.findFollowingMapboxLayerId=function(t){if("traces"===t)for(var p=this.subplot.getMapLayers(),u=0;u<p.length;u++){var i=p[u].id;if("string"==typeof i&&0===i.indexOf(y.traceLayerPrefix)){t=i;break}}return t},r.updateLayer=function(t){var p=this.subplot,u=a(t),i=this.lookupBelow(),c=this.findFollowingMapboxLayerId(i);this.removeLayer(),n(t)&&p.addLayer({id:this.idLayer,source:this.idSource,"source-layer":t.sourcelayer||"",type:t.type,minzoom:t.minzoom,maxzoom:t.maxzoom,layout:u.layout,paint:u.paint},c),this.layerType=t.type,this.below=i},r.updateStyle=function(t){if(n(t)){var p=a(t);this.subplot.setOptions(this.idLayer,"setLayoutProperty",p.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",p.paint)}},r.removeLayer=function(){var t=this.subplot.map;t.getLayer(this.idLayer)&&t.removeLayer(this.idLayer)},r.dispose=function(){var t=this.subplot.map;t.getLayer(this.idLayer)&&t.removeLayer(this.idLayer),t.getSource(this.idSource)&&t.removeSource(this.idSource)},oe.exports=function(t,p,u){var i=new e(t,p);return i.update(u),i}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/color").defaultLine,w=x("../domain").attributes,y=x("../font_attributes"),e=x("../../traces/scatter/attributes").textposition,r=x("../../plot_api/edit_types").overrideAll,n=x("../../plot_api/plot_template").templatedArray,a=x("./constants"),t=y({});t.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(oe.exports=r({_arrayAttrRegexps:[g.counterRegex("mapbox",".layers",!0)],domain:w({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:a.styleValuesMapbox.concat(a.styleValuesNonMapbox),dflt:a.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:n("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:m},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:m}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:t,textposition:g.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":927,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../subplot_defaults"),w=x("../array_container_defaults"),y=x("./layout_attributes");function e(n,a,t,p){t("accesstoken",p.accessToken),t("style"),t("center.lon"),t("center.lat"),t("zoom"),t("bearing"),t("pitch"),w(n,a,{name:"layers",handleItemDefaults:r}),a._input=n}function r(n,a){function t(f,l){return g.coerce(n,a,y.layers,f,l)}if(t("visible")){var p,u=t("sourcetype"),i="raster"===u||"image"===u;t("source"),t("sourceattribution"),"vector"===u&&t("sourcelayer"),"image"===u&&t("coordinates"),i&&(p="raster");var c=t("type",p);i&&"raster"!==c&&(c=a.type="raster",g.log("Source types *raster* and *image* must drawn *raster* layer type.")),t("below"),t("color"),t("opacity"),t("minzoom"),t("maxzoom"),"circle"===c&&t("circle.radius"),"line"===c&&(t("line.width"),t("line.dash")),"fill"===c&&t("fill.outlinecolor"),"symbol"===c&&(t("symbol.icon"),t("symbol.iconsize"),t("symbol.text"),g.coerceFont(t,"symbol.textfont"),t("symbol.textposition"),t("symbol.placement"))}}oe.exports=function(n,a,t){m(n,a,t,{type:"mapbox",attributes:y,handleDefaults:e,partition:"y",accessToken:a._mapboxAccessToken})}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(x,oe,ae){"use strict";var g=x("mapbox-gl/dist/mapbox-gl-unminified"),m=x("../../lib"),w=x("../../lib/geo_location_utils"),y=x("../../registry"),e=x("../cartesian/axes"),r=x("../../components/dragelement"),n=x("../../components/fx"),a=x("../../components/dragelement/helpers"),t=a.rectMode,p=a.drawMode,u=a.selectMode,i=x("../cartesian/select").prepSelect,c=x("../cartesian/select").clearSelect,f=x("../cartesian/select").clearSelectionsCache,l=x("../cartesian/select").selectOnClick,h=x("./constants"),d=x("./layers");function o(E,I){this.id=I,this.gd=E;var C=E._fullLayout,R=E._context;this.container=C._glcontainer.node(),this.isStatic=R.staticPlot,this.uid=C._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(C),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var _=o.prototype;_.plot=function(E,I,C){var R,O=this;O.map&&I[O.id].accesstoken!==O.accessToken&&(O.map.remove(),O.map=null,O.styleObj=null,O.traceHash={},O.layerList=[]),R=new Promise(O.map?function(L,B){O.updateMap(E,I,L,B)}:function(L,B){O.createMap(E,I,L,B)}),C.push(R)},_.createMap=function(E,I,C,R){var O=this,D=I[O.id],L=O.styleObj=k(D.style);O.accessToken=D.accesstoken;var B=O.map=new g.Map({container:O.div,style:L.style,center:A(D.center),zoom:D.zoom,bearing:D.bearing,pitch:D.pitch,interactive:!O.isStatic,preserveDrawingBuffer:O.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new g.AttributionControl({compact:!0}));B._canvas.style.left="0px",B._canvas.style.top="0px",O.rejectOnError(R),O.isStatic||O.initFx(E,I);var j=[];j.push(new Promise(function(W){B.once("load",W)})),j=j.concat(w.fetchTraceGeoData(E)),Promise.all(j).then(function(){O.fillBelowLookup(E,I),O.updateData(E),O.updateLayout(I),O.resolveOnRender(C)}).catch(R)},_.updateMap=function(E,I,C,R){var O=this,D=O.map,L=I[this.id];O.rejectOnError(R);var B=[],j=k(L.style);JSON.stringify(O.styleObj)!==JSON.stringify(j)&&(O.styleObj=j,D.setStyle(j.style),O.traceHash={},B.push(new Promise(function(W){D.once("styledata",W)}))),B=B.concat(w.fetchTraceGeoData(E)),Promise.all(B).then(function(){O.fillBelowLookup(E,I),O.updateData(E),O.updateLayout(I),O.resolveOnRender(C)}).catch(R)},_.fillBelowLookup=function(E,I){var C,R,O=I[this.id].layers,D=this.belowLookup={},L=!1;for(C=0;C<E.length;C++){var B=E[C][0].trace,j=B._module;"string"==typeof B.below?R=B.below:j.getBelow&&(R=j.getBelow(B,this)),""===R&&(L=!0),D["trace-"+B.uid]=R||""}for(C=0;C<O.length;C++){var W=O[C];D["layout-"+C]=R="string"==typeof W.below?W.below:L?"traces":""}var Y,Q,ne={};for(Y in D)ne[R=D[Y]]?ne[R].push(Y):ne[R]=[Y];for(R in ne){var X=ne[R];if(X.length>1)for(C=0;C<X.length;C++)0===(Y=X[C]).indexOf("trace-")?(Q=Y.split("trace-")[1],this.traceHash[Q]&&(this.traceHash[Q].below=null)):0===Y.indexOf("layout-")&&(Q=Y.split("layout-")[1],this.layerList[Q]&&(this.layerList[Q].below=null))}};var s={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function k(E){var I={};return m.isPlainObject(E)?(I.id=E.id,I.style=E):"string"==typeof E?(I.id=E,I.style=-1!==h.styleValuesMapbox.indexOf(E)?M(E):h.stylesNonMapbox[E]?h.stylesNonMapbox[E]:E):(I.id=h.styleValueDflt,I.style=M(h.styleValueDflt)),I.transition={duration:0,delay:0},I}function M(E){return h.styleUrlPrefix+E+"-"+h.styleUrlSuffix}function A(E){return[E.lon,E.lat]}_.updateData=function(E){var I,C,R,O,D=this.traceHash,L=E.slice().sort(function(Q,ne){return s[Q[0].trace.type]-s[ne[0].trace.type]});for(R=0;R<L.length;R++){var B=L[R],j=!1;(I=D[(C=B[0].trace).uid])&&(I.type===C.type?(I.update(B),j=!0):I.dispose()),!j&&C._module&&(D[C.uid]=C._module.plot(this,B))}var W=Object.keys(D);e:for(R=0;R<W.length;R++){var Y=W[R];for(O=0;O<E.length;O++)if(Y===(C=E[O][0].trace).uid)continue e;(I=D[Y]).dispose(),delete D[Y]}},_.updateLayout=function(E){var I=this.map,C=E[this.id];this.dragging||this.wheeling||(I.setCenter(A(C.center)),I.setZoom(C.zoom),I.setBearing(C.bearing),I.setPitch(C.pitch)),this.updateLayers(E),this.updateFramework(E),this.updateFx(E),this.map.resize(),this.gd._context._scrollZoom.mapbox?I.scrollZoom.enable():I.scrollZoom.disable()},_.resolveOnRender=function(E){var I=this.map;I.on("render",function C(){I.loaded()&&(I.off("render",C),setTimeout(E,10))})},_.rejectOnError=function(E){var I=this.map;function C(){E(new Error(h.mapOnErrorMsg))}I.once("error",C),I.once("style.error",C),I.once("source.error",C),I.once("tile.error",C),I.once("layer.error",C)},_.createFramework=function(E){var I=this,C=I.div=document.createElement("div");C.id=I.uid,C.style.position="absolute",I.container.appendChild(C),I.xaxis={_id:"x",c2p:function(R){return I.project(R).x}},I.yaxis={_id:"y",c2p:function(R){return I.project(R).y}},I.updateFramework(E),I.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(I.mockAxis,E)},_.initFx=function(E,I){var C=this,R=C.gd,O=C.map;function D(){n.loneUnhover(I._hoverlayer)}function L(){var B=C.getView();R.emit("plotly_relayouting",C.getViewEditsWithDerived(B))}O.on("moveend",function(B){if(C.map){var j=R._fullLayout;if(B.originalEvent||C.wheeling){var W=j[C.id];y.call("_storeDirectGUIEdit",R.layout,j._preGUI,C.getViewEdits(W));var Y=C.getView();W._input.center=W.center=Y.center,W._input.zoom=W.zoom=Y.zoom,W._input.bearing=W.bearing=Y.bearing,W._input.pitch=W.pitch=Y.pitch,R.emit("plotly_relayout",C.getViewEditsWithDerived(Y))}B.originalEvent&&"mouseup"===B.originalEvent.type?C.dragging=!1:C.wheeling&&(C.wheeling=!1),j._rehover&&j._rehover()}}),O.on("wheel",function(){C.wheeling=!0}),O.on("mousemove",function(B){var j=C.div.getBoundingClientRect(),W=[B.originalEvent.offsetX,B.originalEvent.offsetY];B.target.getBoundingClientRect=function(){return j},C.xaxis.p2c=function(){return O.unproject(W).lng},C.yaxis.p2c=function(){return O.unproject(W).lat},R._fullLayout._rehover=function(){R._fullLayout._hoversubplot===C.id&&R._fullLayout[C.id]&&n.hover(R,B,C.id)},n.hover(R,B,C.id),R._fullLayout._hoversubplot=C.id}),O.on("dragstart",function(){C.dragging=!0,D()}),O.on("zoomstart",D),O.on("mouseout",function(){R._fullLayout._hoversubplot=null}),O.on("drag",L),O.on("zoom",L),O.on("dblclick",function(){var B=R._fullLayout[C.id];y.call("_storeDirectGUIEdit",R.layout,R._fullLayout._preGUI,C.getViewEdits(B));var j=C.viewInitial;O.setCenter(A(j.center)),O.setZoom(j.zoom),O.setBearing(j.bearing),O.setPitch(j.pitch);var W=C.getView();B._input.center=B.center=W.center,B._input.zoom=B.zoom=W.zoom,B._input.bearing=B.bearing=W.bearing,B._input.pitch=B.pitch=W.pitch,R.emit("plotly_doubleclick",null),R.emit("plotly_relayout",C.getViewEditsWithDerived(W))}),C.clearSelect=function(){f(C.dragOptions),c(C.dragOptions.gd)},C.onClickInPanFn=function(B){return function(j){var W=R._fullLayout.clickmode;W.indexOf("select")>-1&&l(j.originalEvent,R,[C.xaxis],[C.yaxis],C.id,B),W.indexOf("event")>-1&&n.click(R,j.originalEvent)}}},_.updateFx=function(E){var I=this,C=I.map,R=I.gd;if(!I.isStatic){var O,D=E.dragmode;O=t(D)?function(j,W){(j.range={})[I.id]=[B([W.xmin,W.ymin]),B([W.xmax,W.ymax])]}:function(j,W,Y){(j.lassoPoints={})[I.id]=Y.filtered.map(B)},I.dragOptions=m.extendDeep(I.dragOptions||{},{dragmode:E.dragmode,element:I.div,gd:R,plotinfo:{id:I.id,domain:E[I.id].domain,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:O},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id}),C.off("click",I.onClickInPanHandler),u(D)||p(D)?(C.dragPan.disable(),C.on("zoomstart",I.clearSelect),I.dragOptions.prepFn=function(j,W,Y){i(j,W,Y,I.dragOptions,D)},r.init(I.dragOptions)):(C.dragPan.enable(),C.off("zoomstart",I.clearSelect),I.div.onmousedown=null,I.onClickInPanHandler=I.onClickInPanFn(I.dragOptions),C.on("click",I.onClickInPanHandler))}function B(j){var W=I.map.unproject(j);return[W.lng,W.lat]}},_.updateFramework=function(E){var I=E[this.id].domain,C=E._size,R=this.div.style;R.width=C.w*(I.x[1]-I.x[0])+"px",R.height=C.h*(I.y[1]-I.y[0])+"px",R.left=C.l+I.x[0]*C.w+"px",R.top=C.t+(1-I.y[1])*C.h+"px",this.xaxis._offset=C.l+I.x[0]*C.w,this.xaxis._length=C.w*(I.x[1]-I.x[0]),this.yaxis._offset=C.t+(1-I.y[1])*C.h,this.yaxis._length=C.h*(I.y[1]-I.y[0])},_.updateLayers=function(E){var I,C=E[this.id].layers,R=this.layerList;if(C.length!==R.length){for(I=0;I<R.length;I++)R[I].dispose();for(R=this.layerList=[],I=0;I<C.length;I++)R.push(d(this,I,C[I]))}else for(I=0;I<C.length;I++)R[I].update(C[I])},_.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},_.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},_.setOptions=function(E,I,C){for(var R in C)this.map[I](E,R,C[R])},_.getMapLayers=function(){return this.map.getStyle().layers},_.addLayer=function(E,I){var C=this.map;if("string"==typeof I){if(""===I)return void C.addLayer(E,I);for(var R=this.getMapLayers(),O=0;O<R.length;O++)if(I===R[O].id)return void C.addLayer(E,I);m.warn(["Trying to add layer with *below* value",I,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}C.addLayer(E)},_.project=function(E){return this.map.project(new g.LngLat(E[0],E[1]))},_.getView=function(){var E=this.map,I=E.getCenter(),C={lon:I.lng,lat:I.lat},R=E.getCanvas(),O=parseInt(R.style.width),D=parseInt(R.style.height);return{center:C,zoom:E.getZoom(),bearing:E.getBearing(),pitch:E.getPitch(),_derived:{coordinates:[E.unproject([0,0]).toArray(),E.unproject([O,0]).toArray(),E.unproject([O,D]).toArray(),E.unproject([0,D]).toArray()]}}},_.getViewEdits=function(E){for(var I=this.id,C=["center","zoom","bearing","pitch"],R={},O=0;O<C.length;O++){var D=C[O];R[I+"."+D]=E[D]}return R},_.getViewEditsWithDerived=function(E){var I=this.id,C=this.getViewEdits(E);return C[I+"._derived"]=E._derived,C},oe.exports=o},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(x,oe,ae){"use strict";oe.exports=function(g){var m=g.editType;return{t:{valType:"number",dflt:0,editType:m},r:{valType:"number",dflt:0,editType:m},b:{valType:"number",dflt:0,editType:m},l:{valType:"number",dflt:0,editType:m},editType:m}}},{}],619:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("d3-time-format").timeFormatLocale,w=x("d3-format").formatLocale,y=x("fast-isnumeric"),e=x("../registry"),r=x("../plot_api/plot_schema"),n=x("../plot_api/plot_template"),a=x("../lib"),t=x("../components/color"),p=x("../constants/numerical").BADNUM,u=x("./cartesian/axis_ids"),i=x("./cartesian/handle_outline").clearSelect,c=x("./animation_attributes"),f=x("./frame_attributes"),l=x("../plots/get_data").getModuleCalcData,h=a.relinkPrivateKeys,d=a._,o=oe.exports={};a.extendFlat(o,e),o.attributes=x("./attributes"),o.attributes.type.values=o.allTypes,o.fontAttrs=x("./font_attributes"),o.layoutAttributes=x("./layout_attributes"),o.fontWeight="normal";var _=o.transformsRegistry,s=x("./command");o.executeAPICommand=s.executeAPICommand,o.computeAPICommandBindings=s.computeAPICommandBindings,o.manageCommandObserver=s.manageCommandObserver,o.hasSimpleAPICommandBindings=s.hasSimpleAPICommandBindings,o.redrawText=function(Y){return Y=a.getGraphDiv(Y),new Promise(function(Q){setTimeout(function(){Y._fullLayout&&(e.getComponentMethod("annotations","draw")(Y),e.getComponentMethod("legend","draw")(Y),e.getComponentMethod("colorbar","draw")(Y),Q(o.previousPromises(Y)))},300)})},o.resize=function(Y){var Q;Y=a.getGraphDiv(Y);var ne=new Promise(function(X,$){Y&&!a.isHidden(Y)||$(new Error("Resize must be passed a displayed plot div element.")),Y._redrawTimer&&clearTimeout(Y._redrawTimer),Y._resolveResize&&(Q=Y._resolveResize),Y._resolveResize=X,Y._redrawTimer=setTimeout(function(){if(!Y.layout||Y.layout.width&&Y.layout.height||a.isHidden(Y))X(Y);else{delete Y.layout.width,delete Y.layout.height;var re=Y.changed;Y.autoplay=!0,e.call("relayout",Y,{autosize:!0}).then(function(){Y.changed=re,Y._resolveResize===X&&(delete Y._resolveResize,X(Y))})}},100)});return Q&&Q(ne),ne},o.previousPromises=function(Y){if((Y._promises||[]).length)return Promise.all(Y._promises).then(function(){Y._promises=[]})},o.addLinks=function(Y){if(Y._context.showLink||Y._context.showSources){var Q=Y._fullLayout,ne=a.ensureSingle(Q._paper,"text","js-plot-link-container",function(G){G.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:t.defaultLine,"pointer-events":"all"}).each(function(){var ie=g.select(this);ie.append("tspan").classed("js-link-to-tool",!0),ie.append("tspan").classed("js-link-spacer",!0),ie.append("tspan").classed("js-sourcelinks",!0)})}),X=ne.node(),$={y:Q._paper.attr("height")-9};document.body.contains(X)&&X.getComputedTextLength()>=Q.width-20?($["text-anchor"]="start",$.x=5):($["text-anchor"]="end",$.x=Q._paper.attr("width")-7),ne.attr($);var re=ne.select(".js-link-to-tool"),H=ne.select(".js-link-spacer"),U=ne.select(".js-sourcelinks");Y._context.showSources&&Y._context.showSources(Y),Y._context.showLink&&function(G,ie){ie.text("");var q=ie.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(G._context.linkText+" "+String.fromCharCode(187));if(G._context.sendData)q.on("click",function(){o.sendDataToCloud(G)});else{var ee=window.location.pathname.split("/"),te=window.location.search;q.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+ee[2].split(".")[0]+"/"+ee[1]+te})}}(Y,re),H.text(re.text()&&U.text()?" - ":"")}},o.sendDataToCloud=function(Y){var Q=(window.PLOTLYENV||{}).BASE_URL||Y._context.plotlyServerURL;if(Q){Y.emit("plotly_beforeexport");var ne=g.select(Y).append("div").attr("id","hiddenform").style("display","none"),X=ne.append("form").attr({action:Q+"/external",method:"post",target:"_blank"});return X.append("input").attr({type:"text",name:"data"}).node().value=o.graphJson(Y,!1,"keepdata"),X.node().submit(),ne.remove(),Y.emit("plotly_afterexport"),!1}};var k=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],M=["year","month","dayMonth","dayMonthYear"];function A(Y,Q){var ne=Y._context.locale;ne||(ne="en-US");var X=!1,$={};function re(ee){for(var te=!0,se=0;se<Q.length;se++){var ue=Q[se];$[ue]||(ee[ue]?$[ue]=ee[ue]:te=!1)}te&&(X=!0)}for(var H=0;H<2;H++){for(var U=Y._context.locales,G=0;G<2;G++){var ie=(U[ne]||{}).format;if(ie&&(re(ie),X))break;U=e.localeRegistry}var q=ne.split("-")[0];if(X||q===ne)break;ne=q}return X||re(e.localeRegistry.en.format),$}function E(Y,Q){var ne={_fullLayout:Q},X="x"===Y._id.charAt(0),$=Y._mainAxis._anchorAxis,re="",H="",U="";if($&&(U=$._mainAxis._id,re=X?Y._id+U:U+Y._id),!re||!Q._plots[re]){re="";for(var G=Y._counterAxes,ie=0;ie<G.length;ie++){var q=G[ie],ee=X?Y._id+q:q+Y._id;H||(H=ee);var te=u.getFromId(ne,q);if(U&&te.overlaying===U){re=ee;break}}}return re||H}function I(Y){var Q=Y.transforms;if(Array.isArray(Q)&&Q.length)for(var ne=0;ne<Q.length;ne++){var X=Q[ne],$=X._module||_[X.type];if($&&$.makesData)return!0}return!1}function C(Y,Q,ne,X){for(var $=Y.transforms,re=[Y],H=0;H<$.length;H++){var U=$[H],G=_[U.type];G&&G.transform&&(re=G.transform(re,{transform:U,fullTrace:Y,fullData:Q,layout:ne,fullLayout:X,transformIndex:H}))}return re}function R(Y){return"string"==typeof Y&&"px"===Y.substr(Y.length-2)&&parseFloat(Y)}function O(Y){var Q=Y.margin;if(!Y._size){var ne=Y._size={l:Math.round(Q.l),r:Math.round(Q.r),t:Math.round(Q.t),b:Math.round(Q.b),p:Math.round(Q.pad)};ne.w=Math.round(Y.width)-ne.l-ne.r,ne.h=Math.round(Y.height)-ne.t-ne.b}Y._pushmargin||(Y._pushmargin={}),Y._pushmarginIds||(Y._pushmarginIds={})}o.supplyDefaults=function(Y,Q){var $e,Qe,ne=Q&&Q.skipUpdateCalc,X=Y._fullLayout||{};if(X._skipDefaults)delete X._skipDefaults;else{var $,re=Y._fullLayout={},H=Y.layout||{},U=Y._fullData||[],G=Y._fullData=[],ie=Y.data||[],q=Y.calcdata||[],ee=Y._context||{};Y._transitionData||o.createTransitionData(Y),re._dfltTitle={plot:d(Y,"Click to enter Plot title"),x:d(Y,"Click to enter X axis title"),y:d(Y,"Click to enter Y axis title"),colorbar:d(Y,"Click to enter Colorscale title"),annotation:d(Y,"new text")},re._traceWord=d(Y,"trace");var te=A(Y,k);if(re._mapboxAccessToken=ee.mapboxAccessToken,X._initialAutoSizeIsDone){var se=X.width,ue=X.height;o.supplyLayoutGlobalDefaults(H,re,te),H.width||(re.width=se),H.height||(re.height=ue),o.sanitizeMargins(re)}else{o.supplyLayoutGlobalDefaults(H,re,te);var de=!H.width||!H.height,he=re.autosize;de&&(he||ee.autosizable)?o.plotAutoSize(Y,H,re):de&&o.sanitizeMargins(re),!he&&de&&(H.width=re.width,H.height=re.height)}re._d3locale=(($e=te).decimal=(Qe=re.separators).charAt(0),$e.thousands=Qe.charAt(1),{numberFormat:function(tt){try{tt=w($e).format(a.adjustFormat(tt))}catch(ut){return a.warnBadFormat(tt),a.noFormat}return tt},timeFormat:m($e).utcFormat}),re._extraFormat=A(Y,M),re._initialAutoSizeIsDone=!0,re._dataLength=ie.length,re._modules=[],re._visibleModules=[],re._basePlotModules=[];var ge=re._subplots=function(){var $e,Qe,tt=e.collectableSubplotTypes,ut={};if(!tt){tt=[];var xt=e.subplotsRegistry;for(var kt in xt){var Bt=xt[kt].attr;if(Bt&&(tt.push(kt),Array.isArray(Bt)))for(Qe=0;Qe<Bt.length;Qe++)a.pushUnique(tt,Bt[Qe])}}for($e=0;$e<tt.length;$e++)ut[tt[$e]]=[];return ut}(),_e=re._splomAxes={x:{},y:{}},Ce=re._splomSubplots={};re._splomGridDflt={},re._scatterStackOpts={},re._firstScatter={},re._alignmentOpts={},re._colorAxes={},re._requestRangeslider={},re._traceUids=function($e,Qe){var tt,ut,xt=Qe.length,kt=[];for(tt=0;tt<$e.length;tt++){var Bt=$e[tt]._fullInput;Bt!==ut&&kt.push(Bt),ut=Bt}var Rt=kt.length,ft=new Array(xt),lt={};function Ft(dn,cn){ft[cn]=dn,lt[dn]=1}function Jt(dn,cn){if(dn&&"string"==typeof dn&&!lt[dn])return Ft(dn,cn),!0}for(tt=0;tt<xt;tt++){var ln=Qe[tt].uid;"number"==typeof ln&&(ln=String(ln)),Jt(ln,tt)||tt<Rt&&Jt(kt[tt].uid,tt)||Ft(a.randstr(lt),tt)}return ft}(U,ie),re._globalTransforms=(Y._context||{}).globalTransforms,o.supplyDataDefaults(ie,G,H,re);var Le=Object.keys(_e.x),Ie=Object.keys(_e.y);if(Le.length>1&&Ie.length>1){for(e.getComponentMethod("grid","sizeDefaults")(H,re),$=0;$<Le.length;$++)a.pushUnique(ge.xaxis,Le[$]);for($=0;$<Ie.length;$++)a.pushUnique(ge.yaxis,Ie[$]);for(var Be in Ce)a.pushUnique(ge.cartesian,Be)}if(re._has=o._hasPlotType.bind(re),U.length===G.length)for($=0;$<G.length;$++)h(G[$],U[$]);o.supplyLayoutModuleDefaults(H,re,G,Y._transitionData);var ve=re._visibleModules,Te=[];for($=0;$<ve.length;$++){var Pe=ve[$].crossTraceDefaults;Pe&&a.pushUnique(Te,Pe)}for($=0;$<Te.length;$++)Te[$](G,re);re._hasOnlyLargeSploms=1===re._basePlotModules.length&&"splom"===re._basePlotModules[0].name&&Le.length>15&&Ie.length>15&&0===re.shapes.length&&0===re.images.length,o.linkSubplots(G,re,U,X),o.cleanPlot(G,re,U,X);var De=!(!X._has||!X._has("gl2d")),Fe=!(!re._has||!re._has("gl2d")),Ue=!(!X._has||!X._has("cartesian"))||De,He=!(!re._has||!re._has("cartesian"))||Fe;Ue&&!He?X._bgLayer.remove():He&&!Ue&&(re._shouldCreateBgLayer=!0),X._zoomlayer&&!Y._dragging&&i({_fullLayout:X}),function($e,Qe){var tt,ut=[];Qe.meta&&(tt=Qe._meta={meta:Qe.meta,layout:{meta:Qe.meta}});for(var xt=0;xt<$e.length;xt++){var kt=$e[xt];kt.meta?ut[kt.index]=kt._meta={meta:kt.meta}:Qe.meta&&(kt._meta={meta:Qe.meta}),Qe.meta&&(kt._meta.layout={meta:Qe.meta})}ut.length&&(tt||(tt=Qe._meta={}),tt.data=ut)}(G,re),h(re,X),e.getComponentMethod("colorscale","crossTraceDefaults")(G,re),re._preGUI||(re._preGUI={}),re._tracePreGUI||(re._tracePreGUI={});var Ke,st=re._tracePreGUI,Ve={};for(Ke in st)Ve[Ke]="old";for($=0;$<G.length;$++)Ve[Ke=G[$]._fullInput.uid]||(st[Ke]={}),Ve[Ke]="new";for(Ke in Ve)"old"===Ve[Ke]&&delete st[Ke];O(re),e.getComponentMethod("rangeslider","makeData")(re),ne||q.length!==G.length||o.supplyDefaultsUpdateCalc(q,G)}},o.supplyDefaultsUpdateCalc=function(Y,Q){for(var ne=0;ne<Q.length;ne++){var X=Q[ne],$=(Y[ne]||[])[0];if($&&$.trace){var re=$.trace;if(re._hasCalcTransform){var H,U,G,ie=re._arrayAttrs;for(H=0;H<ie.length;H++)G=a.nestedProperty(re,U=ie[H]).get().slice(),a.nestedProperty(X,U).set(G)}$.trace=X}}},o.createTransitionData=function(Y){Y._transitionData||(Y._transitionData={}),Y._transitionData._frames||(Y._transitionData._frames=[]),Y._transitionData._frameHash||(Y._transitionData._frameHash={}),Y._transitionData._counter||(Y._transitionData._counter=0),Y._transitionData._interruptCallbacks||(Y._transitionData._interruptCallbacks=[])},o._hasPlotType=function(Y){var Q,ne=this._basePlotModules||[];for(Q=0;Q<ne.length;Q++)if(ne[Q].name===Y)return!0;var X=this._modules||[];for(Q=0;Q<X.length;Q++){var $=X[Q].name;if($===Y)return!0;var re=e.modules[$];if(re&&re.categories[Y])return!0}return!1},o.cleanPlot=function(Y,Q,ne,X){var $,re,H=X._basePlotModules||[];for($=0;$<H.length;$++){var U=H[$];U.clean&&U.clean(Y,Q,ne,X)}var G=X._has&&X._has("gl"),ie=Q._has&&Q._has("gl");G&&!ie&&void 0!==X._glcontainer&&(X._glcontainer.selectAll(".gl-canvas").remove(),X._glcontainer.selectAll(".no-webgl").remove(),X._glcanvas=null);var q=!!X._infolayer;e:for($=0;$<ne.length;$++){var ee=ne[$].uid;for(re=0;re<Y.length;re++)if(ee===Y[re].uid)continue e;q&&X._infolayer.select(".cb"+ee).remove()}},o.linkSubplots=function(Y,Q,ne,X){var $,re,H=X._plots||{},U=Q._plots={},G=Q._subplots,ie={_fullData:Y,_fullLayout:Q},q=G.cartesian.concat(G.gl2d||[]);for($=0;$<q.length;$++){var ee,te=q[$],se=H[te],ue=u.getFromId(ie,te,"x"),de=u.getFromId(ie,te,"y");for(se?ee=U[te]=se:(ee=U[te]={}).id=te,ue._counterAxes.push(de._id),de._counterAxes.push(ue._id),ue._subplotsWith.push(te),de._subplotsWith.push(te),ee.xaxis=ue,ee.yaxis=de,ee._hasClipOnAxisFalse=!1,re=0;re<Y.length;re++){var he=Y[re];if(he.xaxis===ee.xaxis._id&&he.yaxis===ee.yaxis._id&&!1===he.cliponaxis){ee._hasClipOnAxisFalse=!0;break}}}var xe,ge=u.list(ie,null,!0);for($=0;$<ge.length;$++){var _e=null;(xe=ge[$]).overlaying&&(_e=u.getFromId(ie,xe.overlaying))&&_e.overlaying&&(xe.overlaying=!1,_e=null),xe._mainAxis=_e||xe,_e&&(xe.domain=_e.domain.slice()),xe._anchorAxis="free"===xe.anchor?null:u.getFromId(ie,xe.anchor)}for($=0;$<ge.length;$++)if((xe=ge[$])._counterAxes.sort(u.idSort),xe._subplotsWith.sort(a.subplotSort),xe._mainSubplot=E(xe,Q),xe._counterAxes.length&&(xe.spikemode&&-1!==xe.spikemode.indexOf("across")||xe.automargin&&xe.mirror&&"free"!==xe.anchor||e.getComponentMethod("rangeslider","isVisible")(xe))){var Ce=1,Le=0;for(re=0;re<xe._counterAxes.length;re++){var Ie=u.getFromId(ie,xe._counterAxes[re]);Ce=Math.min(Ce,Ie.domain[0]),Le=Math.max(Le,Ie.domain[1])}Ce<Le&&(xe._counterDomainMin=Ce,xe._counterDomainMax=Le)}},o.clearExpandedTraceDefaultColors=function(Y){var Q,ne,X;for(ne=[],(Q=Y._module._colorAttrs)||(Y._module._colorAttrs=Q=[],r.crawl(Y._module.attributes,function($,re,H,U){ne[U]=re,ne.length=U+1,"color"===$.valType&&void 0===$.dflt&&Q.push(ne.join("."))})),X=0;X<Q.length;X++)a.nestedProperty(Y,"_input."+Q[X]).get()||a.nestedProperty(Y,Q[X]).set(null)},o.supplyDataDefaults=function(Y,Q,ne,X){var $,re,H,U=X._modules,G=X._visibleModules,ie=X._basePlotModules,q=0,ee=0;function te(Be){Q.push(Be);var ve=Be._module;ve&&(a.pushUnique(U,ve),!0===Be.visible&&a.pushUnique(G,ve),a.pushUnique(ie,Be._module.basePlotModule),q++,!1!==Be._input.visible&&ee++)}X._transformModules=[];var se={},ue=[],he=n.traceTemplater((ne.template||{}).data||{});for($=0;$<Y.length;$++){if((re=he.newTrace(H=Y[$])).uid=X._traceUids[$],o.supplyTraceDefaults(H,re,ee,X,$),re.index=$,re._input=H,re._expandedIndex=q,re.transforms&&re.transforms.length)for(var xe=!1!==H.visible&&!1===re.visible,ge=C(re,Q,ne,X),_e=0;_e<ge.length;_e++){var Ce=ge[_e],Le={_template:re._template,type:re.type,uid:re.uid+_e};xe&&!1===Ce.visible&&delete Ce.visible,o.supplyTraceDefaults(Ce,Le,q,X,$),h(Le,Ce),Le.index=$,Le._input=H,Le._fullInput=re,Le._expandedIndex=q,Le._expandedInput=Ce,te(Le)}else re._fullInput=re,re._expandedInput=re,te(re);e.traceIs(re,"carpetAxis")&&(se[re.carpet]=re),e.traceIs(re,"carpetDependent")&&ue.push($)}for($=0;$<ue.length;$++)if((re=Q[ue[$]]).visible){var Ie=se[re.carpet];re._carpet=Ie,Ie&&Ie.visible?(re.xaxis=Ie.xaxis,re.yaxis=Ie.yaxis):re.visible=!1}},o.supplyAnimationDefaults=function(Y){var Q;Y=Y||{};var ne={};function X($,re){return a.coerce(Y||{},ne,c,$,re)}if(X("mode"),X("direction"),X("fromcurrent"),Array.isArray(Y.frame))for(ne.frame=[],Q=0;Q<Y.frame.length;Q++)ne.frame[Q]=o.supplyAnimationFrameDefaults(Y.frame[Q]||{});else ne.frame=o.supplyAnimationFrameDefaults(Y.frame||{});if(Array.isArray(Y.transition))for(ne.transition=[],Q=0;Q<Y.transition.length;Q++)ne.transition[Q]=o.supplyAnimationTransitionDefaults(Y.transition[Q]||{});else ne.transition=o.supplyAnimationTransitionDefaults(Y.transition||{});return ne},o.supplyAnimationFrameDefaults=function(Y){var Q={};function ne(X,$){return a.coerce(Y||{},Q,c.frame,X,$)}return ne("duration"),ne("redraw"),Q},o.supplyAnimationTransitionDefaults=function(Y){var Q={};function ne(X,$){return a.coerce(Y||{},Q,c.transition,X,$)}return ne("duration"),ne("easing"),Q},o.supplyFrameDefaults=function(Y){var Q={};function ne(X,$){return a.coerce(Y,Q,f,X,$)}return ne("group"),ne("name"),ne("traces"),ne("baseframe"),ne("data"),ne("layout"),Q},o.supplyTraceDefaults=function(Y,Q,ne,X,$){var re,H=X.colorway||t.defaults,U=H[ne%H.length];function G(ge,_e){return a.coerce(Y,Q,o.attributes,ge,_e)}var ie=G("visible");G("type"),G("name",X._traceWord+" "+$),G("uirevision",X.uirevision);var q=o.getModule(Q);if(Q._module=q,q){var ee=q.basePlotModule,te=ee.attr,se=ee.attributes;if(te&&se){var ue=X._subplots,de="";if(ie||"gl2d"!==ee.name){if(Array.isArray(te))for(re=0;re<te.length;re++){var he=te[re],xe=a.coerce(Y,Q,se,he);ue[he]&&a.pushUnique(ue[he],xe),de+=xe}else de=a.coerce(Y,Q,se,te);ue[ee.name]&&a.pushUnique(ue[ee.name],de)}}}return ie&&(G("customdata"),G("ids"),G("meta"),e.traceIs(Q,"showLegend")?(a.coerce(Y,Q,q.attributes.showlegend?q.attributes:o.attributes,"showlegend"),G("legendgroup"),G("legendgrouptitle.text"),G("legendrank"),Q._dfltShowLegend=!0):Q._dfltShowLegend=!1,q&&q.supplyDefaults(Y,Q,U,X),e.traceIs(Q,"noOpacity")||G("opacity"),e.traceIs(Q,"notLegendIsolatable")&&(Q.visible=!!Q.visible),e.traceIs(Q,"noHover")||(Q.hovertemplate||a.coerceHoverinfo(Y,Q,X),"parcats"!==Q.type&&e.getComponentMethod("fx","supplyDefaults")(Y,Q,U,X)),q&&q.selectPoints&&G("selectedpoints"),o.supplyTransformDefaults(Y,Q,X)),Q},o.hasMakesDataTransform=I,o.supplyTransformDefaults=function(Y,Q,ne){if(Q._length||I(Y)){var X=ne._globalTransforms||[],$=ne._transformModules||[];if(Array.isArray(Y.transforms)||0!==X.length)for(var H=X.concat(Y.transforms||[]),U=Q.transforms=[],G=0;G<H.length;G++){var ie,q=H[G],ee=q.type,te=_[ee],se=!(q._module&&q._module===te),ue=te&&"function"==typeof te.transform;te||a.warn("Unrecognized transform type "+ee+"."),te&&te.supplyDefaults&&(se||ue)?((ie=te.supplyDefaults(q,Q,ne,Y)).type=ee,ie._module=te,a.pushUnique($,te)):ie=a.extendFlat({},q),U.push(ie)}}},o.supplyLayoutGlobalDefaults=function(Y,Q,ne){function X(G,ie){return a.coerce(Y,Q,o.layoutAttributes,G,ie)}var $=Y.template;a.isPlainObject($)&&(Q.template=$,Q._template=$.layout,Q._dataTemplate=$.data),X("autotypenumbers");var re=a.coerceFont(X,"font");a.coerceFont(X,"title.font",a.extendFlat({},re,{size:Math.round(1.4*re.size)})),X("title.text",Q._dfltTitle.plot),X("title.xref"),X("title.yref"),X("title.x"),X("title.y"),X("title.xanchor"),X("title.yanchor"),X("title.pad.t"),X("title.pad.r"),X("title.pad.b"),X("title.pad.l"),X("uniformtext.mode")&&X("uniformtext.minsize"),X("autosize",!(Y.width&&Y.height)),X("width"),X("height"),X("margin.l"),X("margin.r"),X("margin.t"),X("margin.b"),X("margin.pad"),X("margin.autoexpand"),Y.width&&Y.height&&o.sanitizeMargins(Q),e.getComponentMethod("grid","sizeDefaults")(Y,Q),X("paper_bgcolor"),X("separators",ne.decimal+ne.thousands),X("hidesources"),X("colorway"),X("datarevision");var U=X("uirevision");X("editrevision",U),X("selectionrevision",U),e.getComponentMethod("modebar","supplyLayoutDefaults")(Y,Q),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(Y,Q,X),X("meta"),a.isPlainObject(Y.transition)&&(X("transition.duration"),X("transition.easing"),X("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(Y,Q,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(Y,Q,X)},o.plotAutoSize=function(Y,Q,ne){var X,$,re=Y._context||{},H=re.frameMargins,U=a.isPlotDiv(Y);if(U&&Y.emit("plotly_autosize"),re.fillFrame)X=window.innerWidth,$=window.innerHeight,document.body.style.overflow="hidden";else{var G=U?window.getComputedStyle(Y):{};if(X=R(G.width)||R(G.maxWidth)||ne.width,$=R(G.height)||R(G.maxHeight)||ne.height,y(H)&&H>0){var ie=1-2*H;X=Math.round(ie*X),$=Math.round(ie*$)}}var q=o.layoutAttributes.width.min,ee=o.layoutAttributes.height.min;X<q&&(X=q),$<ee&&($=ee);var te=!Q.width&&Math.abs(ne.width-X)>1,se=!Q.height&&Math.abs(ne.height-$)>1;(se||te)&&(te&&(ne.width=X),se&&(ne.height=$)),Y._initialAutoSize||(Y._initialAutoSize={width:X,height:$}),o.sanitizeMargins(ne)},o.supplyLayoutModuleDefaults=function(Y,Q,ne,X){var $,re,H,U=e.componentsRegistry,G=Q._basePlotModules,ie=e.subplotsRegistry.cartesian;for($ in U)(H=U[$]).includeBasePlot&&H.includeBasePlot(Y,Q);for(var q in G.length||G.push(ie),Q._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(Y,Q),ie.finalizeSubplots(Y,Q)),Q._subplots)Q._subplots[q].sort(a.subplotSort);for(re=0;re<G.length;re++)(H=G[re]).supplyLayoutDefaults&&H.supplyLayoutDefaults(Y,Q,ne);var ee=Q._modules;for(re=0;re<ee.length;re++)(H=ee[re]).supplyLayoutDefaults&&H.supplyLayoutDefaults(Y,Q,ne);var te=Q._transformModules;for(re=0;re<te.length;re++)(H=te[re]).supplyLayoutDefaults&&H.supplyLayoutDefaults(Y,Q,ne,X);for($ in U)(H=U[$]).supplyLayoutDefaults&&H.supplyLayoutDefaults(Y,Q,ne)},o.purge=function(Y){var Q=Y._fullLayout||{};void 0!==Q._glcontainer&&(Q._glcontainer.selectAll(".gl-canvas").remove(),Q._glcontainer.remove(),Q._glcanvas=null),Q._modeBar&&Q._modeBar.destroy(),Y._transitionData&&(Y._transitionData._interruptCallbacks&&(Y._transitionData._interruptCallbacks.length=0),Y._transitionData._animationRaf&&window.cancelAnimationFrame(Y._transitionData._animationRaf)),a.clearThrottle(),a.clearResponsive(Y),delete Y.data,delete Y.layout,delete Y._fullData,delete Y._fullLayout,delete Y.calcdata,delete Y.empty,delete Y.fid,delete Y.undoqueue,delete Y.undonum,delete Y.autoplay,delete Y.changed,delete Y._promises,delete Y._redrawTimer,delete Y._hmlumcount,delete Y._hmpixcount,delete Y._transitionData,delete Y._transitioning,delete Y._initialAutoSize,delete Y._transitioningWithDuration,delete Y._dragging,delete Y._dragged,delete Y._dragdata,delete Y._hoverdata,delete Y._snapshotInProgress,delete Y._editing,delete Y._mouseDownTime,delete Y._legendMouseDownTime,Y.removeAllListeners&&Y.removeAllListeners()},o.style=function(Y){var Q,ne=Y._fullLayout._visibleModules,X=[];for(Q=0;Q<ne.length;Q++){var $=ne[Q];$.style&&a.pushUnique(X,$.style)}for(Q=0;Q<X.length;Q++)X[Q](Y)},o.sanitizeMargins=function(Y){if(Y&&Y.margin){var Q,ne=Y.width,X=Y.height,$=Y.margin,H=X-($.t+$.b);ne-($.l+$.r)<0&&(Q=(ne-1)/($.l+$.r),$.l=Math.floor(Q*$.l),$.r=Math.floor(Q*$.r)),H<0&&(Q=(X-1)/($.t+$.b),$.t=Math.floor(Q*$.t),$.b=Math.floor(Q*$.b))}},o.clearAutoMarginIds=function(Y){Y._fullLayout._pushmarginIds={}},o.allowAutoMargin=function(Y,Q){Y._fullLayout._pushmarginIds[Q]=1},o.autoMargin=function(Y,Q,ne){var X=Y._fullLayout,$=X.width,re=X.height,H=X.margin,U=a.constrain($-H.l-H.r,2,64),G=a.constrain(re-H.t-H.b,2,64),ie=Math.max(0,$-U),q=Math.max(0,re-G),ee=X._pushmargin,te=X._pushmarginIds;if(!1!==H.autoexpand){if(ne){var se=ne.pad;if(void 0===se&&(se=Math.min(12,H.l,H.r,H.t,H.b)),ie){var ue=(ne.l+ne.r)/ie;ue>1&&(ne.l/=ue,ne.r/=ue)}if(q){var de=(ne.t+ne.b)/q;de>1&&(ne.t/=de,ne.b/=de)}ee[Q]={l:{val:void 0!==ne.xl?ne.xl:ne.x,size:ne.l+se},r:{val:void 0!==ne.xr?ne.xr:ne.x,size:ne.r+se},b:{val:void 0!==ne.yb?ne.yb:ne.y,size:ne.b+se},t:{val:void 0!==ne.yt?ne.yt:ne.y,size:ne.t+se}},te[Q]=1}else delete ee[Q],delete te[Q];if(!X._replotting)return o.doAutoMargin(Y)}},o.doAutoMargin=function(Y){var Q=Y._fullLayout,ne=Q.width,X=Q.height;Q._size||(Q._size={}),O(Q);var $=Q._size,re=Q.margin,H=a.extendFlat({},$),U=re.l,G=re.r,ie=re.t,q=re.b,ee=Q._pushmargin,te=Q._pushmarginIds;if(!1!==Q.margin.autoexpand){for(var se in ee)te[se]||delete ee[se];for(var ue in ee.base={l:{val:0,size:U},r:{val:1,size:G},t:{val:1,size:ie},b:{val:0,size:q}},ee){var de=ee[ue].l||{},he=ee[ue].b||{},xe=de.val,ge=de.size,_e=he.val,Ce=he.size;for(var Le in ee){if(y(ge)&&ee[Le].r){var Ie=ee[Le].r.val,Be=ee[Le].r.size;if(Ie>xe){var ve=(ge*Ie+(Be-ne)*xe)/(Ie-xe),Te=(Be*(1-xe)+(ge-ne)*(1-Ie))/(Ie-xe);ve+Te>U+G&&(U=ve,G=Te)}}if(y(Ce)&&ee[Le].t){var Pe=ee[Le].t.val,De=ee[Le].t.size;if(Pe>_e){var Fe=(Ce*Pe+(De-X)*_e)/(Pe-_e),Ue=(De*(1-_e)+(Ce-X)*(1-Pe))/(Pe-_e);Fe+Ue>q+ie&&(q=Fe,ie=Ue)}}}}}var xt,He=a.constrain(ne-re.l-re.r,2,64),Ke=a.constrain(X-re.t-re.b,2,64),st=Math.max(0,ne-He),Ve=Math.max(0,X-Ke);if(st){var $e=(U+G)/st;$e>1&&(U/=$e,G/=$e)}if(Ve){var Qe=(q+ie)/Ve;Qe>1&&(q/=Qe,ie/=Qe)}if($.l=Math.round(U),$.r=Math.round(G),$.t=Math.round(ie),$.b=Math.round(q),$.p=Math.round(re.pad),$.w=Math.round(ne)-$.l-$.r,$.h=Math.round(X)-$.t-$.b,!Q._replotting&&o.didMarginChange(H,$)){"_redrawFromAutoMarginCount"in Q?Q._redrawFromAutoMarginCount++:Q._redrawFromAutoMarginCount=1;var tt=3*(1+Object.keys(te).length);if(Q._redrawFromAutoMarginCount<tt)return e.call("_doPlot",Y);Q._size=H,a.warn("Too many auto-margin redraws.")}xt=u.list(Y,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(kt){for(var Bt=0;Bt<xt.length;Bt++){var Rt=xt[Bt][kt];Rt&&Rt()}})};var D=["l","r","t","b","p","w","h"];function L(Y,Q,ne){var X=!1,re=a.syncOrAsync([o.previousPromises,function(){if(Y._transitionData)return Y._transitioning=!1,function(H){var U=Promise.resolve();if(!H)return U;for(;H.length;)U=U.then(H.shift());return U}(Y._transitionData._interruptCallbacks)},ne.prepareFn,o.rehover,function(){return Y.emit("plotly_transitioning",[]),new Promise(function(H){Y._transitioning=!0,Q.duration>0&&(Y._transitioningWithDuration=!0),Y._transitionData._interruptCallbacks.push(function(){X=!0}),ne.redraw&&Y._transitionData._interruptCallbacks.push(function(){return e.call("redraw",Y)}),Y._transitionData._interruptCallbacks.push(function(){Y.emit("plotly_transitioninterrupted",[])});var U=0,G=0;function ie(){return U++,function(){var q;G++,X||G!==U||(q=H,!Y._transitionData||(function(ee){if(ee)for(;ee.length;)ee.shift()}(Y._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(ne.redraw)return e.call("redraw",Y)}).then(function(){Y._transitioning=!1,Y._transitioningWithDuration=!1,Y.emit("plotly_transitioned",[])}).then(q)))}}ne.runFn(ie),setTimeout(ie())})}],Y);return re&&re.then||(re=Promise.resolve()),re.then(function(){return Y})}o.didMarginChange=function(Y,Q){for(var ne=0;ne<D.length;ne++){var X=D[ne],$=Y[X],re=Q[X];if(!y($)||Math.abs(re-$)>1)return!0}return!1},o.graphJson=function(Y,Q,ne,X,$,re){($&&Q&&!Y._fullData||$&&!Q&&!Y._fullLayout)&&o.supplyDefaults(Y);var U=$?Y._fullLayout:Y.layout,G=(Y._transitionData||{})._frames;function ie(te,se){if("function"==typeof te)return se?"_function_":null;if(a.isPlainObject(te)){var ue,de={};return Object.keys(te).sort().forEach(function(he){if(-1===["_","["].indexOf(he.charAt(0)))if("function"!=typeof te[he]){if("keepdata"===ne){if("src"===he.substr(he.length-3))return}else if("keepstream"===ne){if("string"==typeof(ue=te[he+"src"])&&ue.indexOf(":")>0&&!a.isPlainObject(te.stream))return}else if("keepall"!==ne&&"string"==typeof(ue=te[he+"src"])&&ue.indexOf(":")>0)return;de[he]=ie(te[he],se)}else se&&(de[he]="_function")}),de}return Array.isArray(te)?te.map(function(he){return ie(he,se)}):a.isTypedArray(te)?a.simpleMap(te,a.identity):a.isJSDate(te)?a.ms2DateTimeLocal(+te):te}var q={data:(($?Y._fullData:Y.data)||[]).map(function(te){var se=ie(te);return Q&&delete se.fit,se})};if(!Q&&(q.layout=ie(U),$)){var ee=U._size;q.layout.computed={margin:{b:ee.b,l:ee.l,r:ee.r,t:ee.t}}}return G&&(q.frames=ie(G)),re&&(q.config=ie(Y._context,!0)),"object"===X?q:JSON.stringify(q)},o.modifyFrames=function(Y,Q){var ne,X,$,re=Y._transitionData._frames,H=Y._transitionData._frameHash;for(ne=0;ne<Q.length;ne++)switch((X=Q[ne]).type){case"replace":var U=(re[X.index]||{}).name,G=($=X.value).name;re[X.index]=H[G]=$,G!==U&&(delete H[U],H[G]=$);break;case"insert":H[($=X.value).name]=$,re.splice(X.index,0,$);break;case"delete":delete H[($=re[X.index]).name],re.splice(X.index,1)}return Promise.resolve()},o.computeFrame=function(Y,Q){var ne,X,$,re,H=Y._transitionData._frameHash;if(!Q)throw new Error("computeFrame must be given a string frame name");var U=H[Q.toString()];if(!U)return!1;for(var G=[U],ie=[U.name];U.baseframe&&(U=H[U.baseframe.toString()])&&-1===ie.indexOf(U.name);)G.push(U),ie.push(U.name);for(var q={};U=G.pop();)if(U.layout&&(q.layout=o.extendLayout(q.layout,U.layout)),U.data){if(q.data||(q.data=[]),!(X=U.traces))for(X=[],ne=0;ne<U.data.length;ne++)X[ne]=ne;for(q.traces||(q.traces=[]),ne=0;ne<U.data.length;ne++)null!=($=X[ne])&&(-1===(re=q.traces.indexOf($))&&(q.traces[re=q.data.length]=$),q.data[re]=o.extendTrace(q.data[re],U.data[ne]))}return q},o.recomputeFrameHash=function(Y){for(var Q=Y._transitionData._frameHash={},ne=Y._transitionData._frames,X=0;X<ne.length;X++){var $=ne[X];$&&$.name&&(Q[$.name]=$)}},o.extendObjectWithContainers=function(Y,Q,ne){var X,$,re,H,U,G,ie,q=a.extendDeepNoArrays({},Q||{}),ee=a.expandObjectPaths(q),te={};if(ne&&ne.length)for(re=0;re<ne.length;re++)void 0===($=(X=a.nestedProperty(ee,ne[re])).get())?a.nestedProperty(te,ne[re]).set(null):(X.set(null),a.nestedProperty(te,ne[re]).set($));if(Y=a.extendDeepNoArrays(Y||{},ee),ne&&ne.length)for(re=0;re<ne.length;re++)if(G=a.nestedProperty(te,ne[re]).get()){for(ie=(U=a.nestedProperty(Y,ne[re])).get(),Array.isArray(ie)||U.set(ie=[]),H=0;H<G.length;H++){var se=G[H];ie[H]=null===se?null:o.extendObjectWithContainers(ie[H],se)}U.set(ie)}return Y},o.dataArrayContainers=["transforms","dimensions"],o.layoutArrayContainers=e.layoutArrayContainers,o.extendTrace=function(Y,Q){return o.extendObjectWithContainers(Y,Q,o.dataArrayContainers)},o.extendLayout=function(Y,Q){return o.extendObjectWithContainers(Y,Q,o.layoutArrayContainers)},o.transition=function(Y,Q,ne,X,$,re){var H={redraw:$.redraw},U={},G=[];return H.prepareFn=function(){for(var ie=Array.isArray(Q)?Q.length:0,q=X.slice(0,ie),ee=0;ee<q.length;ee++){var te=q[ee],se=Y._fullData[te]._module;if(se){if(se.animatable){var ue=se.basePlotModule.name;U[ue]||(U[ue]=[]),U[ue].push(te)}Y.data[q[ee]]=o.extendTrace(Y.data[q[ee]],Q[ee])}}var de=a.expandObjectPaths(a.extendDeepNoArrays({},ne)),he=/^[xy]axis[0-9]*$/;for(var xe in de)he.test(xe)&&delete de[xe].range;o.extendLayout(Y.layout,de),delete Y.calcdata,o.supplyDefaults(Y),o.doCalcdata(Y);var ge=a.expandObjectPaths(ne);if(ge){var _e=Y._fullLayout._plots;for(var Ce in _e){var Le=_e[Ce],Ie=Le.xaxis,Be=Le.yaxis,ve=Ie.range.slice(),Te=Be.range.slice(),Pe=null,De=null,Fe=null,Ue=null;Array.isArray(ge[Ie._name+".range"])?Pe=ge[Ie._name+".range"].slice():Array.isArray((ge[Ie._name]||{}).range)&&(Pe=ge[Ie._name].range.slice()),Array.isArray(ge[Be._name+".range"])?De=ge[Be._name+".range"].slice():Array.isArray((ge[Be._name]||{}).range)&&(De=ge[Be._name].range.slice()),ve&&Pe&&(Ie.r2l(ve[0])!==Ie.r2l(Pe[0])||Ie.r2l(ve[1])!==Ie.r2l(Pe[1]))&&(Fe={xr0:ve,xr1:Pe}),Te&&De&&(Be.r2l(Te[0])!==Be.r2l(De[0])||Be.r2l(Te[1])!==Be.r2l(De[1]))&&(Ue={yr0:Te,yr1:De}),(Fe||Ue)&&G.push(a.extendFlat({plotinfo:Le},Fe,Ue))}}return Promise.resolve()},H.runFn=function(ie){var q,ee,te=Y._fullLayout._basePlotModules,se=G.length;if(ne)for(ee=0;ee<te.length;ee++)te[ee].transitionAxes&&te[ee].transitionAxes(Y,G,re,ie);for(var ue in se?((q=a.extendFlat({},re)).duration=0,delete U.cartesian):q=re,U){var de=U[ue];Y._fullData[de[0]]._module.basePlotModule.plot(Y,de,q,ie)}},L(Y,re,H)},o.transitionFromReact=function(Y,Q,ne,X){var $=Y._fullLayout,re=$.transition,H={},U=[];return H.prepareFn=function(){var G=$._plots;for(var ie in H.redraw=!1,"some"===Q.anim&&(H.redraw=!0),"some"===ne.anim&&(H.redraw=!0),G){var q=G[ie],ee=q.xaxis,te=q.yaxis,se=X[ee._name].range.slice(),ue=X[te._name].range.slice(),de=ee.range.slice(),he=te.range.slice();ee.setScale(),te.setScale();var xe=null,ge=null;ee.r2l(se[0])===ee.r2l(de[0])&&ee.r2l(se[1])===ee.r2l(de[1])||(xe={xr0:se,xr1:de}),te.r2l(ue[0])===te.r2l(he[0])&&te.r2l(ue[1])===te.r2l(he[1])||(ge={yr0:ue,yr1:he}),(xe||ge)&&U.push(a.extendFlat({plotinfo:q},xe,ge))}return Promise.resolve()},H.runFn=function(G){for(var ie,q,ee,te=Y._fullData,se=Y._fullLayout._basePlotModules,ue=[],de=0;de<te.length;de++)ue.push(de);function he(){if(Y._fullLayout)for(var ge=0;ge<se.length;ge++)se[ge].transitionAxes&&se[ge].transitionAxes(Y,U,ie,G)}function xe(){if(Y._fullLayout)for(var ge=0;ge<se.length;ge++)se[ge].plot(Y,ee,q,G)}U.length&&Q.anim?"traces first"===re.ordering?(ie=a.extendFlat({},re,{duration:0}),ee=ue,q=re,setTimeout(he,re.duration),xe()):(ie=re,ee=null,q=a.extendFlat({},re,{duration:0}),setTimeout(xe,ie.duration),he()):U.length?(ie=re,he()):Q.anim&&(ee=ue,q=re,xe())},L(Y,re,H)},o.doCalcdata=function(Y,Q){var ne,X,$,re,H=u.list(Y),U=Y._fullData,G=Y._fullLayout,ie=new Array(U.length),q=(Y.calcdata||[]).slice();for(Y.calcdata=ie,G._numBoxes=0,G._numViolins=0,G._violinScaleGroupStats={},Y._hmpixcount=0,Y._hmlumcount=0,G._piecolormap={},G._sunburstcolormap={},G._treemapcolormap={},G._iciclecolormap={},G._funnelareacolormap={},$=0;$<U.length;$++)Array.isArray(Q)&&-1===Q.indexOf($)&&(ie[$]=q[$]);for($=0;$<U.length;$++)(ne=U[$])._arrayAttrs=r.findArrayAttributes(ne),ne._extremes={};var ee=G._subplots.polar||[];for($=0;$<ee.length;$++)H.push(G[ee[$]].radialaxis,G[ee[$]].angularaxis);for(var te in G._colorAxes){var se=G[te];!1!==se.cauto&&(delete se.cmin,delete se.cmax)}var ue=!1;function de(ge){if(X=(ne=U[ge])._module,!0===ne.visible&&ne.transforms){if(X&&X.calc){var _e=X.calc(Y,ne);_e[0]&&_e[0].t&&_e[0].t._scene&&delete _e[0].t._scene.dirty}for(re=0;re<ne.transforms.length;re++){var Ce=ne.transforms[re];(X=_[Ce.type])&&X.calcTransform&&(ne._hasCalcTransform=!0,ue=!0,X.calcTransform(Y,ne,Ce))}}}function he(ge,_e){if(!!(X=(ne=U[ge])._module).isContainer===_e){var Ce=[];if(!0===ne.visible&&0!==ne._length){delete ne._indexToPoints;var Le=ne.transforms||[];for(re=Le.length-1;re>=0;re--)if(Le[re].enabled){ne._indexToPoints=Le[re]._indexToPoints;break}X&&X.calc&&(Ce=X.calc(Y,ne))}Array.isArray(Ce)&&Ce[0]||(Ce=[{x:p,y:p}]),Ce[0].t||(Ce[0].t={}),Ce[0].trace=ne,ie[ge]=Ce}}for(j(H,U,G),$=0;$<U.length;$++)he($,!0);for($=0;$<U.length;$++)de($);for(ue&&j(H,U,G),$=0;$<U.length;$++)he($,!0);for($=0;$<U.length;$++)he($,!1);W(Y);var xe=function(ge,_e){var Ce,Le,Ie,Be,ve,Te=[];function Pe(nn,Me,Ee){var Se=Me._id.charAt(0);if("histogram2dcontour"===nn){var je=Me._counterAxes[0],qe=u.getFromId(_e,je),Je="x"===Se||"x"===je&&"category"===qe.type,at="y"===Se||"y"===je&&"category"===qe.type;return function(it,yt){return 0===it||0===yt||Je&&it===Ee[yt].length-1||at&&yt===Ee.length-1?-1:("y"===Se?yt:it)-1}}return function(it,yt){return"y"===Se?yt:it}}var De={min:function(nn){return a.aggNums(Math.min,null,nn)},max:function(nn){return a.aggNums(Math.max,null,nn)},sum:function(nn){return a.aggNums(function(Me,Ee){return Me+Ee},null,nn)},total:function(nn){return a.aggNums(function(Me,Ee){return Me+Ee},null,nn)},mean:function(nn){return a.mean(nn)},median:function(nn){return a.median(nn)}};for(Ce=0;Ce<ge.length;Ce++){var Fe=ge[Ce];if("category"===Fe.type){var Ue=Fe.categoryorder.match(B);if(Ue){var He=Ue[1],Ke=Ue[2],st=Fe._id.charAt(0),Ve="x"===st,$e=[];for(Le=0;Le<Fe._categories.length;Le++)$e.push([Fe._categories[Le],[]]);for(Le=0;Le<Fe._traceIndices.length;Le++){var Qe=Fe._traceIndices[Le],tt=_e._fullData[Qe];if(!0===tt.visible){var ut=tt.type;e.traceIs(tt,"histogram")&&(delete tt._xautoBinFinished,delete tt._yautoBinFinished);var xt="splom"===ut,kt="scattergl"===ut,Bt=_e.calcdata[Qe];for(Ie=0;Ie<Bt.length;Ie++){var Rt,ft,lt=Bt[Ie];if(xt){var Ft=tt._axesDim[Fe._id];if(!Ve){var Jt=tt._diag[Ft][0];Jt&&(Fe=_e._fullLayout[u.id2name(Jt)])}var ln=lt.trace.dimensions[Ft].values;for(Be=0;Be<ln.length;Be++)for(Rt=Fe._categoriesMap[ln[Be]],ve=0;ve<lt.trace.dimensions.length;ve++)ve!==Ft&&$e[Rt][1].push(lt.trace.dimensions[ve].values[Be])}else if(kt){for(Be=0;Be<lt.t.x.length;Be++)Ve?(Rt=lt.t.x[Be],ft=lt.t.y[Be]):(Rt=lt.t.y[Be],ft=lt.t.x[Be]),$e[Rt][1].push(ft);lt.t&&lt.t._scene&&delete lt.t._scene.dirty}else if(lt.hasOwnProperty("z")){var cn=Pe(tt.type,Fe,ft=lt.z);for(Be=0;Be<ft.length;Be++)for(ve=0;ve<ft[Be].length;ve++)(Rt=cn(ve,Be))+1&&$e[Rt][1].push(ft[Be][ve])}else for(void 0===(Rt=lt.p)&&(Rt=lt[st]),void 0===(ft=lt.s)&&(ft=lt.v),void 0===ft&&(ft=Ve?lt.y:lt.x),Array.isArray(ft)||(ft=void 0===ft?[]:[ft]),Be=0;Be<ft.length;Be++)$e[Rt][1].push(ft[Be])}}}Fe._categoriesValue=$e;var Tn=[];for(Le=0;Le<$e.length;Le++)Tn.push([$e[Le][0],De[He]($e[Le][1])]);Tn.sort(function(nn,Me){return nn[1]-Me[1]}),Fe._categoriesAggregatedValue=Tn,Fe._initialCategories=Tn.map(function(nn){return nn[0]}),"descending"===Ke&&Fe._initialCategories.reverse(),Te=Te.concat(Fe.sortByInitialCategories())}}}return Te}(H,Y);if(xe.length){for(G._numBoxes=0,G._numViolins=0,$=0;$<xe.length;$++)he(xe[$],!0);for($=0;$<xe.length;$++)he(xe[$],!1);W(Y)}e.getComponentMethod("fx","calc")(Y),e.getComponentMethod("errorbars","calc")(Y)};var B=/(total|sum|min|max|mean|median) (ascending|descending)/;function j(Y,Q,ne){var X={};function $(G){G.clearCalc(),"multicategory"===G.type&&G.setupMultiCategory(Q),X[G._id]=1}a.simpleMap(Y,$);for(var re=ne._axisMatchGroups||[],H=0;H<re.length;H++)for(var U in re[H])X[U]||$(ne[u.id2name(U)])}function W(Y){var Q,ne,X,$=Y._fullLayout,re=$._visibleModules,H={};for(ne=0;ne<re.length;ne++){var U=re[ne],G=U.crossTraceCalc;if(G){var ie=U.basePlotModule.name;H[ie]?a.pushUnique(H[ie],G):H[ie]=[G]}}for(X in H){var q=H[X],ee=$._subplots[X];if(Array.isArray(ee))for(Q=0;Q<ee.length;Q++){var te=ee[Q],se="cartesian"===X?$._plots[te]:$[te];for(ne=0;ne<q.length;ne++)q[ne](Y,se,te)}else for(ne=0;ne<q.length;ne++)q[ne](Y)}}o.rehover=function(Y){Y._fullLayout._rehover&&Y._fullLayout._rehover()},o.redrag=function(Y){Y._fullLayout._redrag&&Y._fullLayout._redrag()},o.generalUpdatePerTraceModule=function(Y,Q,ne,X){var $,re=Q.traceHash,H={};for($=0;$<ne.length;$++){var U=ne[$],G=U[0].trace;G.visible&&(H[G.type]=H[G.type]||[],H[G.type].push(U))}for(var ie in re)if(!H[ie]){var q=re[ie][0];q[0].trace.visible=!1,H[ie]=[q]}for(var ee in H){var te=H[ee];te[0][0].trace._module.plot(Y,Q,a.filterVisible(te),X)}Q.traceHash=H},o.plotBasePlot=function(Y,Q,ne,X,$){var re=e.getModule(Y),H=l(Q.calcdata,re)[0];re.plot(Q,H,X,$)},o.cleanBasePlot=function(Y,Q,ne,X,$){var re=$._has&&$._has(Y),H=ne._has&&ne._has(Y);re&&!H&&$["_"+Y+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(x,oe,ae){"use strict";oe.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../lib/polygon").tester,w=g.findIndexOfMin,y=g.isAngleInsideSector,e=g.angleDelta,r=g.angleDist;function n(u,i,c,f){var l,h,d=f[0],o=f[1],_=t(Math.sin(i)-Math.sin(u)),s=t(Math.cos(i)-Math.cos(u)),k=Math.tan(c),M=t(1/k),A=_/s,E=o-A*d;return M?_&&s?h=k*(l=E/(k-A)):s?(l=o*M,h=o):(l=d,h=d*k):_&&s?(l=0,h=E):s?(l=0,h=o):l=h=NaN,[l,h]}function a(u,i,c,f){return g.isFullCircle([i,c])?function(l,h){var d,o=h.length,_=new Array(o+1);for(d=0;d<o;d++){var s=h[d];_[d]=[l*Math.cos(s),l*Math.sin(s)]}return _[d]=_[0].slice(),_}(u,f):function(l,h,d,o){var _,s,k=o.length,M=[];function A(j){return[l*Math.cos(j),l*Math.sin(j)]}function E(j,W,Y){return n(j,W,Y,A(j))}function I(j){return g.mod(j,k)}function C(j){return y(j,[h,d])}var R=w(o,function(j){return C(j)?r(j,h):1/0}),O=E(o[R],o[I(R-1)],h);for(M.push(O),_=R,s=0;s<k;_++,s++){var D=o[I(_)];if(!C(D))break;M.push(A(D))}var L=w(o,function(j){return C(j)?r(j,d):1/0}),B=E(o[L],o[I(L+1)],d);return M.push(B),M.push([0,0]),M.push(M[0].slice()),M}(u,i,c,f)}function t(u){return Math.abs(u)>1e-10?u:0}function p(u,i,c){i=i||0,c=c||0;for(var f=u.length,l=new Array(f),h=0;h<f;h++){var d=u[h];l[h]=[i+d[0],c-d[1]]}return l}oe.exports={isPtInsidePolygon:function(u,i,c,f,l){if(!y(i,f))return!1;var h,d;c[0]<c[1]?(h=c[0],d=c[1]):(h=c[1],d=c[0]);var o=m(a(h,f[0],f[1],l)),_=m(a(d,f[0],f[1],l)),s=[u*Math.cos(i),u*Math.sin(i)];return _.contains(s)&&!o.contains(s)},findPolygonOffset:function(u,i,c,f){for(var l=1/0,h=1/0,d=a(u,i,c,f),o=0;o<d.length;o++){var _=d[o];l=Math.min(l,_[0]),h=Math.min(h,-_[1])}return[l,h]},findEnclosingVertexAngles:function(u,i){var c=w(i,function(l){var h=e(l,u);return h>0?h:1/0}),f=g.mod(c+1,i.length);return[i[c],i[f]]},findIntersectionXY:n,findXYatLength:function(u,i,c,f){var l=-i*c,h=i*i+1,d=2*(i*l-c),_=Math.sqrt(d*d-4*h*(l*l+c*c-u*u)),s=(-d+_)/(2*h),k=(-d-_)/(2*h);return[[s,i*s+l+f],[k,i*k+l+f]]},clampTiny:t,pathPolygon:function(u,i,c,f,l,h){return"M"+p(a(u,i,c,f),l,h).join("L")},pathPolygonAnnulus:function(u,i,c,f,l,h,d){var o,_;u<i?(o=u,_=i):(o=i,_=u);var s=p(a(o,c,f,l),h,d);return"M"+p(a(_,c,f,l),h,d).reverse().join("L")+"M"+s.join("L")}}},{"../../lib":503,"../../lib/polygon":515}],622:[function(x,oe,ae){"use strict";var g=x("../get_data").getSubplotCalcData,m=x("../../lib").counterRegex,w=x("./polar"),y=x("./constants"),e=y.attr,r=y.name,n=m(r),a={};a[e]={valType:"subplotid",dflt:r,editType:"calc"},oe.exports={attr:e,name:r,idRoot:r,idRegex:n,attrRegex:n,attributes:a,layoutAttributes:x("./layout_attributes"),supplyLayoutDefaults:x("./layout_defaults"),plot:function(t){for(var p=t._fullLayout,u=t.calcdata,i=p._subplots[r],c=0;c<i.length;c++){var f=i[c],l=g(u,r,f),h=p[f]._subplot;h||(h=w(t,f),p[f]._subplot=h),h.plot(l,p,t._promises)}},clean:function(t,p,u,i){for(var c=i._subplots[r]||[],f=i._has&&i._has("gl"),l=p._has&&p._has("gl"),h=f&&!l,d=0;d<c.length;d++){var o=c[d],_=i[o]._subplot;if(!p[o]&&_)for(var s in _.framework.remove(),_.layers["radial-axis-title"].remove(),_.clipPaths)_.clipPaths[s].remove();h&&_._scene&&(_._scene.destroy(),_._scene=null)}},toSVG:x("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(x,oe,ae){"use strict";var g=x("../../components/color/attributes"),m=x("../cartesian/layout_attributes"),w=x("../domain").attributes,y=x("../../lib").extendFlat,e=x("../../plot_api/edit_types").overrideAll,r=e({color:m.color,showline:y({},m.showline,{dflt:!0}),linecolor:m.linecolor,linewidth:m.linewidth,showgrid:y({},m.showgrid,{dflt:!0}),gridcolor:m.gridcolor,gridwidth:m.gridwidth,griddash:m.griddash},"plot","from-root"),n=e({tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,ticklabelstep:m.ticklabelstep,showticklabels:m.showticklabels,showtickprefix:m.showtickprefix,tickprefix:m.tickprefix,showticksuffix:m.showticksuffix,ticksuffix:m.ticksuffix,showexponent:m.showexponent,exponentformat:m.exponentformat,minexponent:m.minexponent,separatethousands:m.separatethousands,tickfont:m.tickfont,tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,layer:m.layer},"plot","from-root"),a={visible:y({},m.visible,{dflt:!0}),type:y({},m.type,{values:["-","linear","log","date","category"]}),autotypenumbers:m.autotypenumbers,autorange:y({},m.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:y({},m.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:m.categoryorder,categoryarray:m.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:y({},m.title.text,{editType:"plot",dflt:""}),font:y({},m.title.font,{editType:"plot"}),editType:"plot"},hoverformat:m.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}};y(a,r,n);var t={visible:y({},m.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:m.autotypenumbers,categoryorder:m.categoryorder,categoryarray:m.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:m.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};y(t,r,n),oe.exports={domain:w({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:g.background},radialaxis:a,angularaxis:t,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/color"),w=x("../../plot_api/plot_template"),y=x("../subplot_defaults"),e=x("../get_data").getSubplotData,r=x("../cartesian/tick_value_defaults"),n=x("../cartesian/tick_mark_defaults"),a=x("../cartesian/tick_label_defaults"),t=x("../cartesian/prefix_suffix_defaults"),p=x("../cartesian/category_order_defaults"),u=x("../cartesian/line_grid_defaults"),i=x("../cartesian/axis_autotype"),c=x("./layout_attributes"),f=x("./set_convert"),l=x("./constants"),h=l.axisNames;function d(_,s,k,M){var A=k("bgcolor");M.bgColor=m.combine(A,M.paper_bgcolor);var E=k("sector");k("hole");var I,C=e(M.fullData,l.name,M.id),R=M.layoutOut;function O(ie,q){return k(I+"."+ie,q)}for(var D=0;D<h.length;D++){g.isPlainObject(_[I=h[D]])||(_[I]={});var L=_[I],B=w.newContainer(s,I);B._id=B._name=I,B._attr=M.id+"."+I,B._traceIndices=C.map(function(ie){return ie._expandedIndex});var j=l.axisName2dataArray[I],W=o(L,B,O,C,j,M);p(L,B,O,{axData:C,dataAttr:j});var Y=O("visible");switch(f(B,s,R),O("uirevision",s.uirevision),B._m=1,I){case"radialaxis":var Q=O("autorange",!B.isValidRange(L.range));L.autorange=Q,!Q||"linear"!==W&&"-"!==W||O("rangemode"),"reversed"===Q&&(B._m=-1),O("range"),B.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===W){g.log("Polar plots do not support date angular axes yet.");for(var ne=0;ne<C.length;ne++)C[ne].visible=!1;W=L.type=B.type="linear"}O("linear"===W?"thetaunit":"period");var X=O("direction");O("rotation",{counterclockwise:0,clockwise:90}[X])}if(t(L,B,O,B.type,{tickSuffixDflt:"degrees"===B.thetaunit?"\xb0":void 0}),Y){var $,re,H,U,G=M.font||{};re=($=O("color"))===L.color?$:G.color,H=G.size,U=G.family,r(L,B,O,B.type),a(L,B,O,B.type,{font:{color:re,size:H,family:U}}),n(L,B,O,{outerTicks:!0}),u(L,B,O,{dfltColor:$,bgColor:M.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c[I]}),O("layer"),"radialaxis"===I&&(O("side"),O("angle",E[0]),O("title.text"),g.coerceFont(O,"title.font",{color:re,size:g.bigFont(H),family:U}))}"category"!==W&&O("hoverformat"),B._input=L}"category"===s.angularaxis.type&&k("gridshape")}function o(_,s,k,M,A,E){var I=k("autotypenumbers",E.autotypenumbersDflt);if("-"===k("type")){for(var C,R=0;R<M.length;R++)if(M[R].visible){C=M[R];break}C&&C[A]&&(s.type=i(C[A],"gregorian",{noMultiCategory:!0,autotypenumbers:I})),"-"===s.type?s.type="linear":_.type=s.type}return s.type}oe.exports=function(_,s,k){y(_,s,k,{type:l.name,attributes:c,handleDefaults:d,font:s.font,autotypenumbersDflt:s.autotypenumbers,paper_bgcolor:s.paper_bgcolor,fullData:k,layoutOut:s})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("tinycolor2"),w=x("../../registry"),y=x("../../lib"),e=y.strRotate,r=y.strTranslate,n=x("../../components/color"),a=x("../../components/drawing"),t=x("../plots"),p=x("../../plots/cartesian/axes"),u=x("../cartesian/set_convert"),i=x("./set_convert"),c=x("../cartesian/autorange").doAutoRange,f=x("../cartesian/dragbox"),l=x("../../components/dragelement"),h=x("../../components/fx"),d=x("../../components/titles"),o=x("../cartesian/select").prepSelect,_=x("../cartesian/select").selectOnClick,s=x("../cartesian/select").clearSelect,k=x("../../lib/setcursor"),M=x("../../lib/clear_gl_canvases"),A=x("../../plot_api/subroutines").redrawReglTraces,E=x("../../constants/alignment").MID_SHIFT,I=x("./constants"),C=x("./helpers"),R=x("../smith/helpers"),O=R.smith,D=R.reactanceArc,L=R.resistanceArc,B=R.smithTransform,j=y._,W=y.mod,Y=y.deg2rad,Q=y.rad2deg;function ne(U,G,ie){this.isSmith=ie||!1,this.id=G,this.gd=U,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var q=U._fullLayout;this.clipIds.forTraces="clip"+q._uid+G+"-for-traces",this.clipPaths.forTraces=q._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=q["_"+(ie?"smith":"polar")+"layer"].append("g").attr("class",G),this.getHole=function(te){return this.isSmith?0:te.hole},this.getSector=function(te){return this.isSmith?[0,360]:te.sector},this.getRadial=function(te){return this.isSmith?te.realaxis:te.radialaxis},this.getAngular=function(te){return this.isSmith?te.imaginaryaxis:te.angularaxis},ie||(this.radialTickLayout=null,this.angularTickLayout=null)}var X=ne.prototype;function $(U){var G=U.ticks+String(U.ticklen)+String(U.showticklabels);return"side"in U&&(G+=U.side),G}function re(U,G){return G[y.findIndexOfMin(G,function(ie){return y.angleDist(U,ie)})]}function H(U,G,ie){return G?(U.attr("display",null),U.attr(ie)):U&&U.attr("display","none"),U}oe.exports=function(U,G,ie){return new ne(U,G,ie)},X.plot=function(U,G){for(var ie=G[this.id],q=!1,ee=0;ee<U.length;ee++)if(!1===U[ee][0].trace.cliponaxis){q=!0;break}this._hasClipOnAxisFalse=q,this.updateLayers(G,ie),this.updateLayout(G,ie),t.generalUpdatePerTraceModule(this.gd,this,U,ie),this.updateFx(G,ie),this.isSmith&&(delete ie.realaxis.range,delete ie.imaginaryaxis.range)},X.updateLayers=function(U,G){var ie=this.isSmith,q=this.layers,ee=this.getRadial(G),te=this.getAngular(G),se=I.layerNames,ue=se.indexOf("frontplot"),de=se.slice(0,ue),he="below traces"===te.layer,xe="below traces"===ee.layer;he&&de.push("angular-line"),xe&&de.push("radial-line"),he&&de.push("angular-axis"),xe&&de.push("radial-axis"),de.push("frontplot"),he||de.push("angular-line"),xe||de.push("radial-line"),he||de.push("angular-axis"),xe||de.push("radial-axis");var ge=(ie?"smith":"polar")+"sublayer",_e=this.framework.selectAll("."+ge).data(de,String);_e.enter().append("g").attr("class",function(Ce){return ge+" "+Ce}).each(function(Ce){var Le=q[Ce]=g.select(this);switch(Ce){case"frontplot":ie||Le.append("g").classed("barlayer",!0),Le.append("g").classed("scatterlayer",!0);break;case"backplot":Le.append("g").classed("maplayer",!0);break;case"plotbg":q.bg=Le.append("path");break;case"radial-grid":case"angular-grid":Le.style("fill","none");break;case"radial-line":Le.append("line").style("fill","none");break;case"angular-line":Le.append("path").style("fill","none")}}),_e.order()},X.updateLayout=function(U,G){var ie=this.layers,q=U._size,ee=this.getRadial(G),te=this.getAngular(G),se=G.domain.x,ue=G.domain.y;this.xOffset=q.l+q.w*se[0],this.yOffset=q.t+q.h*(1-ue[1]);var de=this.xLength=q.w*(se[1]-se[0]),he=this.yLength=q.h*(ue[1]-ue[0]),xe=this.getSector(G);this.sectorInRad=xe.map(Y);var ge,_e,Ce,Le,Ie,kt,lt,Ft,Jt,ln,dn,cn,Tn,nn,Me,Be=this.sectorBBox=(Jt=(kt=xe)[1]-(Ft=kt[0]),dn=(ln=W(Ft,360))+Jt,cn=Math.cos(Y(ln)),Tn=Math.sin(Y(ln)),nn=Math.cos(Y(dn)),Me=Math.sin(Y(dn)),lt=ln<=90&&dn>=90||ln>90&&dn>=450?1:Tn<=0&&Me<=0?0:Math.max(Tn,Me),[ln<=180&&dn>=180||ln>180&&dn>=540?-1:cn>=0&&nn>=0?0:Math.min(cn,nn),ln<=270&&dn>=270||ln>270&&dn>=630?-1:Tn>=0&&Me>=0?0:Math.min(Tn,Me),dn>=360?1:cn<=0&&nn<=0?0:Math.max(cn,nn),lt]),ve=Be[2]-Be[0],Pe=he/de,De=Math.abs((Be[3]-Be[1])/ve);Pe>De?(ge=de,Ie=(he-(_e=de*De))/q.h/2,Ce=[se[0],se[1]],Le=[ue[0]+Ie,ue[1]-Ie]):(_e=he,Ie=(de-(ge=he/De))/q.w/2,Ce=[se[0]+Ie,se[1]-Ie],Le=[ue[0],ue[1]]),this.xLength2=ge,this.yLength2=_e,this.xDomain2=Ce,this.yDomain2=Le;var Fe,Ue=this.xOffset2=q.l+q.w*Ce[0],He=this.yOffset2=q.t+q.h*(1-Le[1]),Ke=this.radius=ge/ve,st=this.innerRadius=this.getHole(G)*Ke,Ve=this.cx=Ue-Ke*Be[0],$e=this.cy=He+Ke*Be[3],Qe=this.cxx=Ve-Ue,tt=this.cyy=$e-He,ut=ee.side;"counterclockwise"===ut?(Fe=ut,ut="top"):"clockwise"===ut&&(Fe=ut,ut="bottom"),this.radialAxis=this.mockAxis(U,G,ee,{_id:"x",side:ut,_trueSide:Fe,domain:[st/q.w,Ke/q.w]}),this.angularAxis=this.mockAxis(U,G,te,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(U,G),this.updateAngularAxis(U,G),this.updateRadialAxis(U,G),this.updateRadialAxisTitle(U,G),this.xaxis=this.mockCartesianAxis(U,G,{_id:"x",domain:Ce}),this.yaxis=this.mockCartesianAxis(U,G,{_id:"y",domain:Le});var xt=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",xt).attr("transform",r(Qe,tt)),ie.frontplot.attr("transform",r(Ue,He)).call(a.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),ie.bg.attr("d",xt).attr("transform",r(Ve,$e)).call(n.fill,G.bgcolor)},X.mockAxis=function(U,G,ie,q){var ee=y.extendFlat({},ie,q);return i(ee,G,U),ee},X.mockCartesianAxis=function(U,G,ie){var q=this,ee=q.isSmith,te=ie._id,se=y.extendFlat({type:"linear"},ie);u(se,U);var ue={x:[0,2],y:[1,3]};return se.setRange=function(){var de=q.sectorBBox,he=ue[te],xe=q.radialAxis._rl,ge=(xe[1]-xe[0])/(1-q.getHole(G));se.range=[de[he[0]]*ge,de[he[1]]*ge]},se.isPtWithinRange="x"!==te||ee?function(){return!0}:function(de){return q.isPtInside(de)},se.setRange(),se.setScale(),se},X.doAutoRange=function(U,G){var ie=this.gd,q=this.radialAxis,ee=this.getRadial(G);c(ie,q);var te=q.range;ee.range=te.slice(),ee._input.range=te.slice(),q._rl=[q.r2l(te[0],null,"gregorian"),q.r2l(te[1],null,"gregorian")]},X.updateRadialAxis=function(U,G){var ie=this,q=ie.gd,ee=ie.layers,te=ie.radius,se=ie.innerRadius,ue=ie.cx,de=ie.cy,he=ie.getRadial(G),xe=W(ie.getSector(G)[0],360),ge=ie.radialAxis,_e=se<te,Ce=ie.isSmith;Ce||(ie.fillViewInitialKey("radialaxis.angle",he.angle),ie.fillViewInitialKey("radialaxis.range",ge.range.slice()),ge.setGeometry()),"auto"===ge.tickangle&&xe>90&&xe<=270&&(ge.tickangle=180);var Le=Ce?function(Ke){var st=B(ie,O([Ke.x,0]));return r(st[0]-ue,st[1]-de)}:function(Ke){return r(ge.l2p(Ke.x)+se,0)},Ie=Ce?function(Ke){return L(ie,Ke.x,-1/0,1/0)}:function(Ke){return ie.pathArc(ge.r2p(Ke.x)+se)},Be=$(he);if(ie.radialTickLayout!==Be&&(ee["radial-axis"].selectAll(".xtick").remove(),ie.radialTickLayout=Be),_e){ge.setScale();var ve=0,Te=Ce?(ge.tickvals||[]).filter(function(Ke){return Ke>=0}).map(function(Ke){return p.tickText(ge,Ke,!0,!1)}):p.calcTicks(ge),Pe=Ce?Te:p.clipEnds(ge,Te),De=p.getTickSigns(ge)[2];Ce&&(("top"===ge.ticks&&"bottom"===ge.side||"bottom"===ge.ticks&&"top"===ge.side)&&(De=-De),"top"===ge.ticks&&"top"===ge.side&&(ve=-ge.ticklen),"bottom"===ge.ticks&&"bottom"===ge.side&&(ve=ge.ticklen)),p.drawTicks(q,ge,{vals:Te,layer:ee["radial-axis"],path:p.makeTickPath(ge,0,De),transFn:Le,crisp:!1}),p.drawGrid(q,ge,{vals:Pe,layer:ee["radial-grid"],path:Ie,transFn:y.noop,crisp:!1}),p.drawLabels(q,ge,{vals:Te,layer:ee["radial-axis"],transFn:Le,labelFns:p.makeLabelFns(ge,ve)})}var Fe=ie.radialAxisAngle=ie.vangles?Q(re(Y(he.angle),ie.vangles)):he.angle,Ue=r(ue,de),He=Ue+e(-Fe);H(ee["radial-axis"],_e&&(he.showticklabels||he.ticks),{transform:He}),H(ee["radial-grid"],_e&&he.showgrid,{transform:Ce?"":Ue}),H(ee["radial-line"].select("line"),_e&&he.showline,{x1:Ce?-te:se,y1:0,x2:te,y2:0,transform:He}).attr("stroke-width",he.linewidth).call(n.stroke,he.linecolor)},X.updateRadialAxisTitle=function(U,G,ie){if(!this.isSmith){var q=this.gd,ee=this.radius,te=this.cx,se=this.cy,ue=this.getRadial(G),de=this.id+"title",he=0;if(ue.title){var xe=a.bBox(this.layers["radial-axis"].node()).height,ge=ue.title.font.size,_e=ue.side;he="top"===_e?ge:"counterclockwise"===_e?-(xe+.4*ge):xe+.8*ge}var Ce=void 0!==ie?ie:this.radialAxisAngle,Le=Y(Ce),Ie=Math.cos(Le),Be=Math.sin(Le),ve=te+ee/2*Ie+he*Be,Te=se-ee/2*Be+he*Ie;this.layers["radial-axis-title"]=d.draw(q,de,{propContainer:ue,propName:this.id+".radialaxis.title",placeholder:j(q,"Click to enter radial axis title"),attributes:{x:ve,y:Te,"text-anchor":"middle"},transform:{rotate:-Ce}})}},X.updateAngularAxis=function(U,G){var ie=this,q=ie.gd,ee=ie.layers,te=ie.radius,se=ie.innerRadius,ue=ie.cx,de=ie.cy,he=ie.getAngular(G),xe=ie.angularAxis,ge=ie.isSmith;ge||(ie.fillViewInitialKey("angularaxis.rotation",he.rotation),xe.setGeometry(),xe.setScale());var _e=ge?function(Ke){var st=B(ie,O([0,Ke.x]));return Math.atan2(st[0]-ue,st[1]-de)-Math.PI/2}:function(Ke){return xe.t2g(Ke.x)};"linear"===xe.type&&"radians"===xe.thetaunit&&(xe.tick0=Q(xe.tick0),xe.dtick=Q(xe.dtick));var Ce=function(Ke){return r(ue+te*Math.cos(Ke),de-te*Math.sin(Ke))},Le=ge?function(Ke){var st=B(ie,O([0,Ke.x]));return r(st[0],st[1])}:function(Ke){return Ce(_e(Ke))},Ie=ge?function(Ke){var st=B(ie,O([0,Ke.x])),Ve=Math.atan2(st[0]-ue,st[1]-de)-Math.PI/2;return r(st[0],st[1])+e(-Q(Ve))}:function(Ke){var st=_e(Ke);return Ce(st)+e(-Q(st))},Be=ge?function(Ke){return D(ie,Ke.x,0,1/0)}:function(Ke){var st=_e(Ke),Ve=Math.cos(st),$e=Math.sin(st);return"M"+[ue+se*Ve,de-se*$e]+"L"+[ue+te*Ve,de-te*$e]},ve=p.makeLabelFns(xe,0).labelStandoff,Te={xFn:function(Ke){var st=_e(Ke);return Math.cos(st)*ve},yFn:function(Ke){var st=_e(Ke),Ve=Math.sin(st)>0?.2:1;return-Math.sin(st)*(ve+Ke.fontSize*Ve)+Math.abs(Math.cos(st))*(Ke.fontSize*E)},anchorFn:function(Ke){var st=_e(Ke),Ve=Math.cos(st);return Math.abs(Ve)<.1?"middle":Ve>0?"start":"end"},heightFn:function(Ke,st,Ve){var $e=_e(Ke);return-.5*(1+Math.sin($e))*Ve}},Pe=$(he);ie.angularTickLayout!==Pe&&(ee["angular-axis"].selectAll("."+xe._id+"tick").remove(),ie.angularTickLayout=Pe);var De,Fe=ge?[1/0].concat(xe.tickvals||[]).map(function(Ke){return p.tickText(xe,Ke,!0,!1)}):p.calcTicks(xe);if(ge&&(Fe[0].text="\u221e",Fe[0].fontSize*=1.75),"linear"===G.gridshape?(De=Fe.map(_e),y.angleDelta(De[0],De[1])<0&&(De=De.slice().reverse())):De=null,ie.vangles=De,"category"===xe.type&&(Fe=Fe.filter(function(Ke){return y.isAngleInsideSector(_e(Ke),ie.sectorInRad)})),xe.visible){var Ue="inside"===xe.ticks?-1:1;p.drawTicks(q,xe,{vals:Fe,layer:ee["angular-axis"],path:"M"+Ue*((xe.linewidth||1)/2)+",0h"+Ue*xe.ticklen,transFn:Ie,crisp:!1}),p.drawGrid(q,xe,{vals:Fe,layer:ee["angular-grid"],path:Be,transFn:y.noop,crisp:!1}),p.drawLabels(q,xe,{vals:Fe,layer:ee["angular-axis"],repositionOnUpdate:!0,transFn:Le,labelFns:Te})}H(ee["angular-line"].select("path"),he.showline,{d:ie.pathSubplot(),transform:r(ue,de)}).attr("stroke-width",he.linewidth).call(n.stroke,he.linecolor)},X.updateFx=function(U,G){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(U),this.updateRadialDrag(U,G,0),this.updateRadialDrag(U,G,1)),this.updateHoverAndMainDrag(U))},X.updateHoverAndMainDrag=function(U){var G,ie,q=this,ee=q.isSmith,te=q.gd,ue=U._zoomlayer,de=I.MINZOOM,he=I.OFFEDGE,xe=q.radius,ge=q.innerRadius,_e=q.cx,Ce=q.cy,Le=q.cxx,Ie=q.cyy,Be=q.sectorInRad,ve=q.vangles,Te=q.radialAxis,Pe=C.clampTiny,De=C.findXYatLength,Fe=C.findEnclosingVertexAngles,Ue=I.cornerHalfWidth,He=I.cornerLen/2,Ke=f.makeDragger(q.layers,"path","maindrag",!1===U.dragmode?"none":"crosshair");g.select(Ke).attr("d",q.pathSubplot()).attr("transform",r(_e,Ce)),Ke.onmousemove=function(Je){h.hover(te,Je,q.id),te._fullLayout._lasthover=Ke,te._fullLayout._hoversubplot=q.id},Ke.onmouseout=function(Je){te._dragging||l.unhover(te,Je)};var st,Ve,$e,Qe,tt,ut,xt,kt,Bt,Rt={element:Ke,gd:te,subplot:q.id,plotinfo:{id:q.id,xaxis:q.xaxis,yaxis:q.yaxis},xaxes:[q.xaxis],yaxes:[q.yaxis]};function ft(Je,at){return Math.sqrt(Je*Je+at*at)}function lt(Je,at){return ft(Je-Le,at-Ie)}function Ft(Je,at){return Math.atan2(Ie-at,Je-Le)}function Jt(Je,at){return[Je*Math.cos(at),Je*Math.sin(-at)]}function ln(Je,at){if(0===Je)return q.pathSector(2*Ue);var it=He/Je,yt=at-it,vt=at+it,Ut=Math.max(0,Math.min(Je,xe)),Wt=Ut-Ue,gt=Ut+Ue;return"M"+Jt(Wt,yt)+"A"+[Wt,Wt]+" 0,0,0 "+Jt(Wt,vt)+"L"+Jt(gt,vt)+"A"+[gt,gt]+" 0,0,1 "+Jt(gt,yt)+"Z"}function dn(Je,at,it){if(0===Je)return q.pathSector(2*Ue);var yt,vt,Ut=Jt(Je,at),Wt=Jt(Je,it),gt=Pe((Ut[0]+Wt[0])/2),At=Pe((Ut[1]+Wt[1])/2);if(gt&&At){var Zt=At/gt,Et=-1/Zt,Ct=De(Ue,Zt,gt,At);yt=De(He,Et,Ct[0][0],Ct[0][1]),vt=De(He,Et,Ct[1][0],Ct[1][1])}else{var Ne,et;At?(Ne=He,et=Ue):(Ne=Ue,et=He),yt=[[gt-Ne,At-et],[gt+Ne,At-et]],vt=[[gt-Ne,At+et],[gt+Ne,At+et]]}return"M"+yt.join("L")+"L"+vt.reverse().join("L")+"Z"}function cn(Je,at){return at=Math.max(Math.min(at,xe),ge),Je<he?Je=0:xe-Je<he?Je=xe:at<he?at=0:xe-at<he&&(at=xe),Math.abs(at-Je)>de?(Je<at?($e=Je,Qe=at):($e=at,Qe=Je),!0):($e=null,Qe=null,!1)}function Tn(Je,at){at=at||"M0,0Z",kt.attr("d",Je=Je||tt),Bt.attr("d",at),f.transitionZoombox(kt,Bt,ut,xt),ut=!0;var it={};je(it),te.emit("plotly_relayouting",it)}function nn(Je,at){var it,yt,vt=st+(Je*=G),Ut=Ve+(at*=ie),Wt=lt(st,Ve),gt=Math.min(lt(vt,Ut),xe),At=Ft(st,Ve);cn(Wt,gt)&&(it=tt+q.pathSector(Qe),$e&&(it+=q.pathSector($e)),yt=ln($e,At)+ln(Qe,At)),Tn(it,yt)}function Me(Je,at,it,yt){var vt=C.findIntersectionXY(it,yt,it,[Je-Le,Ie-at]);return ft(vt[0],vt[1])}function Ee(Je,at){var it,yt,vt=st+Je,Ut=Ve+at,Wt=Ft(st,Ve),gt=Ft(vt,Ut),At=Fe(Wt,ve),Zt=Fe(gt,ve);cn(Me(st,Ve,At[0],At[1]),Math.min(Me(vt,Ut,Zt[0],Zt[1]),xe))&&(it=tt+q.pathSector(Qe),$e&&(it+=q.pathSector($e)),yt=[dn($e,At[0],At[1]),dn(Qe,At[0],At[1])].join(" ")),Tn(it,yt)}function Se(){if(f.removeZoombox(te),null!==$e&&null!==Qe){var Je={};je(Je),f.showDoubleClickNotifier(te),w.call("_guiRelayout",te,Je)}}function je(Je){var at=Te._rl,it=(at[1]-at[0])/(1-ge/xe)/xe;Je[q.id+".radialaxis.range"]=[at[0]+($e-ge)*it,at[0]+(Qe-ge)*it]}function qe(Je,at){var it=te._fullLayout.clickmode;if(f.removeZoombox(te),2===Je){var yt={};for(var vt in q.viewInitial)yt[q.id+"."+vt]=q.viewInitial[vt];te.emit("plotly_doubleclick",null),w.call("_guiRelayout",te,yt)}it.indexOf("select")>-1&&1===Je&&_(at,te,[q.xaxis],[q.yaxis],q.id,Rt),it.indexOf("event")>-1&&h.click(te,at,q.id)}Rt.prepFn=function(Je,at,it){var yt=te._fullLayout.dragmode,vt=Ke.getBoundingClientRect();te._fullLayout._calcInverseTransform(te),G=te._fullLayout._invScaleX,ie=te._fullLayout._invScaleY;var Wt=y.apply3DTransform(te._fullLayout._invTransform)(at-vt.left,it-vt.top);if(st=Wt[0],Ve=Wt[1],ve){var gt=C.findPolygonOffset(xe,Be[0],Be[1],ve);st+=Le+gt[0],Ve+=Ie+gt[1]}switch(yt){case"zoom":Rt.clickFn=qe,ee||(Rt.moveFn=ve?Ee:nn,Rt.doneFn=Se,$e=null,Qe=null,tt=q.pathSubplot(),ut=!1,xt=m(te._fullLayout[q.id].bgcolor).getLuminance(),(kt=f.makeZoombox(ue,xt,_e,Ce,tt)).attr("fill-rule","evenodd"),Bt=f.makeCorners(ue,_e,Ce),s(te));break;case"select":case"lasso":o(Je,at,it,Rt,yt)}},l.init(Rt)},X.updateRadialDrag=function(U,G,ie){var q=this,ee=q.gd,te=q.layers,se=q.radius,ue=q.innerRadius,de=q.cx,he=q.cy,xe=q.radialAxis,ge=I.radialDragBoxSize,_e=ge/2;if(xe.visible){var Ce,Le,Ie,Be=Y(q.radialAxisAngle),ve=xe._rl,Te=ve[0],Pe=ve[1],De=ve[ie],Fe=.75*(ve[1]-ve[0])/(1-q.getHole(G))/se;ie?(Ce=de+(se+_e)*Math.cos(Be),Le=he-(se+_e)*Math.sin(Be),Ie="radialdrag"):(Ce=de+(ue-_e)*Math.cos(Be),Le=he-(ue-_e)*Math.sin(Be),Ie="radialdrag-inner");var Ue,He,Ke,st=f.makeRectDragger(te,Ie,"crosshair",-_e,-_e,ge,ge),Ve={element:st,gd:ee};!1===U.dragmode&&(Ve.dragmode=!1),H(g.select(st),xe.visible&&ue<se,{transform:r(Ce,Le)}),Ve.prepFn=function(){Ue=null,He=null,Ke=null,Ve.moveFn=$e,Ve.doneFn=Qe,s(ee)},Ve.clampFn=function(xt,kt){return Math.sqrt(xt*xt+kt*kt)<I.MINDRAG&&(xt=0,kt=0),[xt,kt]},l.init(Ve)}function $e(xt,kt){if(Ue)Ue(xt,kt);else{var Bt=[xt,-kt],Rt=[Math.cos(Be),Math.sin(Be)],ft=Math.abs(y.dot(Bt,Rt)/Math.sqrt(y.dot(Bt,Bt)));isNaN(ft)||(Ue=ft<.5?tt:ut)}var Ft,lt={};Ft=lt,null!==He?Ft[q.id+".radialaxis.angle"]=He:null!==Ke&&(Ft[q.id+".radialaxis.range["+ie+"]"]=Ke),ee.emit("plotly_relayouting",lt)}function Qe(){null!==He?w.call("_guiRelayout",ee,q.id+".radialaxis.angle",He):null!==Ke&&w.call("_guiRelayout",ee,q.id+".radialaxis.range["+ie+"]",Ke)}function tt(xt,kt){if(0!==ie){He=Math.atan2(he-(Le+kt),Ce+xt-de),q.vangles&&(He=re(He,q.vangles)),He=Q(He);var ft=r(de,he)+e(-He);te["radial-axis"].attr("transform",ft),te["radial-line"].select("line").attr("transform",ft);var lt=q.gd._fullLayout;q.updateRadialAxisTitle(lt,lt[q.id],He)}}function ut(xt,kt){var Bt=y.dot([xt,-kt],[Math.cos(Be),Math.sin(Be)]);if(Ke=De-Fe*Bt,Fe>0==(ie?Ke>Te:Ke<Pe)){var Rt=ee._fullLayout,ft=Rt[q.id];xe.range[ie]=Ke,xe._rl[ie]=Ke,q.updateRadialAxis(Rt,ft),q.xaxis.setRange(),q.xaxis.setScale(),q.yaxis.setRange(),q.yaxis.setScale();var lt=!1;for(var Ft in q.traceHash){var Jt=q.traceHash[Ft],ln=y.filterVisible(Jt);Jt[0][0].trace._module.plot(ee,q,ln,ft),w.traceIs(Ft,"gl")&&ln.length&&(lt=!0)}lt&&(M(ee),A(ee))}else Ke=null}},X.updateAngularDrag=function(U){var G=this,ie=G.gd,q=G.layers,ee=G.radius,te=G.angularAxis,se=G.cx,ue=G.cy,de=G.cxx,he=G.cyy,xe=I.angularDragBoxSize,ge=f.makeDragger(q,"path","angulardrag",!1===U.dragmode?"none":"move"),_e={element:ge,gd:ie};function Ce(Ve,$e){return Math.atan2(he+xe-$e,Ve-de-xe)}!1===U.dragmode?_e.dragmode=!1:g.select(ge).attr("d",G.pathAnnulus(ee,ee+xe)).attr("transform",r(se,ue)).call(k,"move");var Le,Ie,Be,ve,Te,Pe,De=q.frontplot.select(".scatterlayer").selectAll(".trace"),Fe=De.selectAll(".point"),Ue=De.selectAll(".textpoint");function He(Ve,$e){var Qe=G.gd._fullLayout,tt=Qe[G.id],ut=Ce(Le+Ve*U._invScaleX,Ie+$e*U._invScaleY),xt=Q(ut-Pe);if(ve=Be+xt,q.frontplot.attr("transform",r(G.xOffset2,G.yOffset2)+e([-xt,de,he])),G.vangles){Te=G.radialAxisAngle+xt;var kt=r(se,ue)+e(-xt),Bt=r(se,ue)+e(-Te);q.bg.attr("transform",kt),q["radial-grid"].attr("transform",kt),q["radial-axis"].attr("transform",Bt),q["radial-line"].select("line").attr("transform",Bt),G.updateRadialAxisTitle(Qe,tt,Te)}else G.clipPaths.forTraces.select("path").attr("transform",r(de,he)+e(xt));Fe.each(function(){var ln=g.select(this),dn=a.getTranslate(ln);ln.attr("transform",r(dn.x,dn.y)+e([xt]))}),Ue.each(function(){var ln=g.select(this),dn=ln.select("text"),cn=a.getTranslate(ln);ln.attr("transform",e([xt,dn.attr("x"),dn.attr("y")])+r(cn.x,cn.y))}),te.rotation=y.modHalf(ve,360),G.updateAngularAxis(Qe,tt),G._hasClipOnAxisFalse&&!y.isFullCircle(G.sectorInRad)&&De.call(a.hideOutsideRangePoints,G);var Rt=!1;for(var ft in G.traceHash)if(w.traceIs(ft,"gl")){var lt=G.traceHash[ft],Ft=y.filterVisible(lt);lt[0][0].trace._module.plot(ie,G,Ft,tt),Ft.length&&(Rt=!0)}Rt&&(M(ie),A(ie));var Jt={};Ke(Jt),ie.emit("plotly_relayouting",Jt)}function Ke(Ve){Ve[G.id+".angularaxis.rotation"]=ve,G.vangles&&(Ve[G.id+".radialaxis.angle"]=Te)}function st(){Ue.select("text").attr("transform",null);var Ve={};Ke(Ve),w.call("_guiRelayout",ie,Ve)}_e.prepFn=function(Ve,$e,Qe){Be=U[G.id].angularaxis.rotation;var ut=ge.getBoundingClientRect();Le=$e-ut.left,Ie=Qe-ut.top,ie._fullLayout._calcInverseTransform(ie);var xt=y.apply3DTransform(U._invTransform)(Le,Ie);Pe=Ce(Le=xt[0],Ie=xt[1]),_e.moveFn=He,_e.doneFn=st,s(ie)},G.vangles&&!y.isFullCircle(G.sectorInRad)&&(_e.prepFn=y.noop,k(g.select(ge),null)),l.init(_e)},X.isPtInside=function(U){if(this.isSmith)return!0;var G=this.sectorInRad,ie=this.vangles,q=this.angularAxis.c2g(U.theta),ee=this.radialAxis,te=ee.c2l(U.r);return(ie?C.isPtInsidePolygon:y.isPtInsideSector)(te,q,ee._rl,G,ie)},X.pathArc=function(U){var G=this.sectorInRad,ie=this.vangles;return(ie?C.pathPolygon:y.pathArc)(U,G[0],G[1],ie)},X.pathSector=function(U){var G=this.sectorInRad,ie=this.vangles;return(ie?C.pathPolygon:y.pathSector)(U,G[0],G[1],ie)},X.pathAnnulus=function(U,G){var ie=this.sectorInRad,q=this.vangles;return(q?C.pathPolygonAnnulus:y.pathAnnulus)(U,G,ie[0],ie[1],q)},X.pathSubplot=function(){var U=this.innerRadius,G=this.radius;return U?this.pathAnnulus(U,G):this.pathSector(G)},X.fillViewInitialKey=function(U,G){U in this.viewInitial||(this.viewInitial[U]=G)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../cartesian/set_convert"),w=g.deg2rad,y=g.rad2deg;oe.exports=function(e,r,n){switch(m(e,n),e._id){case"x":case"radialaxis":p=r._subplot,(a=e).setGeometry=function(){var u=a._rl[0],i=a._rl[1],c=p.innerRadius,f=(p.radius-c)/(i-u),l=c/f,h=u>i?function(d){return d<=0}:function(d){return d>=0};a.c2g=function(d){var o=a.c2l(d)-u;return(h(o)?o:0)+l},a.g2c=function(d){return a.l2c(d+u-l)},a.g2p=function(d){return d*f},a.c2p=function(d){return a.g2p(a.c2g(d))}};break;case"angularaxis":!function(a,t){var p=a.type;if("linear"===p){var u=a.d2c,i=a.c2d;a.d2c=function(c,f){return l=u(c),"degrees"===f?w(l):l;var l},a.c2d=function(c,f){return i((l=c,"degrees"===f?y(l):l));var l}}a.makeCalcdata=function(c,f){var l,h,d=c[f],o=c._length,_=function(E){return a.d2c(E,c.thetaunit)};if(d){if(g.isTypedArray(d)&&"linear"===p){if(o===d.length)return d;if(d.subarray)return d.subarray(0,o)}for(l=new Array(o),h=0;h<o;h++)l[h]=_(d[h])}else{var s=f+"0",k="d"+f,M=s in c?_(c[s]):0,A=c[k]?_(c[k]):(a.period||2*Math.PI)/o;for(l=new Array(o),h=0;h<o;h++)l[h]=M+h*A}return l},a.setGeometry=function(){var c,f,l,h,d=t.sector,o=d.map(w),_={clockwise:-1,counterclockwise:1}[a.direction],s=w(a.rotation),k=function(I){return _*I+s},M=function(I){return(I-s)/_};switch(p){case"linear":f=c=g.identity,h=w,l=y,a.range=g.isFullCircle(o)?[d[0],d[0]+360]:o.map(M).map(y);break;case"category":var A=a._categories.length,E=a.period?Math.max(a.period,A):A;0===E&&(E=1),f=h=function(I){return 2*I*Math.PI/E},c=l=function(I){return I*E/Math.PI/2},a.range=[0,E]}a.c2g=function(I){return k(f(I))},a.g2c=function(I){return c(M(I))},a.t2g=function(I){return k(h(I))},a.g2t=function(I){return l(M(I))}}}(e,r)}var a,p}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(x,oe,ae){"use strict";oe.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(x,oe,ae){"use strict";function g(e){return e<0?-1:e>0?1:0}function m(e){var r=e[0],n=e[1];if(!isFinite(r)||!isFinite(n))return[1,0];var a=(r+1)*(r+1)+n*n;return[(r*r+n*n-1)/a,2*n/a]}function w(e,r){return[r[0]*e.radius+e.cx,-r[1]*e.radius+e.cy]}function y(e,r){return r*e.radius}oe.exports={smith:m,reactanceArc:function(e,r,n,a){var t=w(e,m([n,r])),p=t[0],u=t[1],i=w(e,m([a,r])),c=i[0],f=i[1];if(0===r)return["M"+p+","+u,"L"+c+","+f].join(" ");var l=y(e,1/Math.abs(r));return["M"+p+","+u,"A"+l+","+l+" 0 0,"+(r<0?1:0)+" "+c+","+f].join(" ")},resistanceArc:function(e,r,n,a){var t=y(e,1/(r+1)),p=w(e,m([r,n])),u=p[0],i=p[1],c=w(e,m([r,a])),f=c[0],l=c[1];if(g(n)!==g(a)){var h=w(e,m([r,0]));return["M"+u+","+i,"A"+t+","+t+" 0 0,"+(0<n?0:1)+" "+h[0]+","+h[1],"A"+t+","+t+" 0 0,"+(a<0?0:1)+f+","+l].join(" ")}return["M"+u+","+i,"A"+t+","+t+" 0 0,"+(a<n?0:1)+" "+f+","+l].join(" ")},smithTransform:w}},{}],629:[function(x,oe,ae){"use strict";var g=x("../get_data").getSubplotCalcData,m=x("../../lib").counterRegex,w=x("../polar/polar"),y=x("./constants"),e=y.attr,r=y.name,n=m(r),a={};a[e]={valType:"subplotid",dflt:r,editType:"calc"},oe.exports={attr:e,name:r,idRoot:r,idRegex:n,attrRegex:n,attributes:a,layoutAttributes:x("./layout_attributes"),supplyLayoutDefaults:x("./layout_defaults"),plot:function(t){for(var p=t._fullLayout,u=t.calcdata,i=p._subplots[r],c=0;c<i.length;c++){var f=i[c],l=g(u,r,f),h=p[f]._subplot;h||(h=w(t,f,!0),p[f]._subplot=h),h.plot(l,p,t._promises)}},clean:function(t,p,u,i){for(var c=i._subplots[r]||[],f=0;f<c.length;f++){var l=c[f],h=i[l]._subplot;if(!p[l]&&h)for(var d in h.framework.remove(),h.clipPaths)h.clipPaths[d].remove()}},toSVG:x("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(x,oe,ae){"use strict";var g=x("../../components/color/attributes"),m=x("../cartesian/layout_attributes"),w=x("../domain").attributes,y=x("../../lib").extendFlat,e=x("../../plot_api/edit_types").overrideAll,r=e({color:m.color,showline:y({},m.showline,{dflt:!0}),linecolor:m.linecolor,linewidth:m.linewidth,showgrid:y({},m.showgrid,{dflt:!0}),gridcolor:m.gridcolor,gridwidth:m.gridwidth,griddash:m.griddash},"plot","from-root"),n=e({ticklen:m.ticklen,tickwidth:y({},m.tickwidth,{dflt:2}),tickcolor:m.tickcolor,showticklabels:m.showticklabels,showtickprefix:m.showtickprefix,tickprefix:m.tickprefix,showticksuffix:m.showticksuffix,ticksuffix:m.ticksuffix,tickfont:m.tickfont,tickformat:m.tickformat,hoverformat:m.hoverformat,layer:m.layer},"plot","from-root"),a=y({visible:y({},m.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:y({},m.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},r,n),t=y({visible:y({},m.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:m.ticks,editType:"calc"},r,n);oe.exports={domain:w({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:g.background},realaxis:a,imaginaryaxis:t,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(x,oe,ae){"use strict";var g,m,w,y=x("../../lib"),e=x("../../components/color"),r=x("../../plot_api/plot_template"),n=x("../subplot_defaults"),a=x("../get_data").getSubplotData,t=x("../cartesian/prefix_suffix_defaults"),p=x("../cartesian/tick_label_defaults"),u=x("../cartesian/line_grid_defaults"),i=x("../cartesian/set_convert"),c=x("./layout_attributes"),f=x("./constants"),l=f.axisNames,h=(g=function(o){return o.slice().reverse().map(function(_){return-_}).concat([0]).concat(o)},m=String,w={},function(o){var _=m?m(o):o;if(_ in w)return w[_];var s=g(o);return w[_]=s,s});function d(o,_,s,k){var M=s("bgcolor");k.bgColor=e.combine(M,k.paper_bgcolor);var A,E=a(k.fullData,f.name,k.id),I=k.layoutOut;function C(X,$){return s(A+"."+X,$)}for(var R=0;R<l.length;R++){y.isPlainObject(o[A=l[R]])||(o[A]={});var O=o[A],D=r.newContainer(_,A);D._id=D._name=A,D._attr=k.id+"."+A,D._traceIndices=E.map(function(X){return X._expandedIndex});var L=C("visible");if(D.type="linear",i(D,I),t(O,D,C,D.type),L){var B,j,W,Y,Q="realaxis"===A;Q&&C("side"),Q?C("tickvals"):C("tickvals",h(_.realaxis.tickvals||c.realaxis.tickvals.dflt));var ne=k.font||{};L&&(j=(B=C("color"))===O.color?B:ne.color,W=ne.size,Y=ne.family),p(O,D,C,D.type,{noTicklabelstep:!0,noAng:!Q,noExp:!0,font:{color:j,size:W,family:Y}}),y.coerce2(o,_,c,A+".ticklen"),y.coerce2(o,_,c,A+".tickwidth"),y.coerce2(o,_,c,A+".tickcolor",_.color),C("ticks")||(delete _[A].ticklen,delete _[A].tickwidth,delete _[A].tickcolor),u(O,D,C,{dfltColor:B,bgColor:k.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c[A]}),C("layer")}C("hoverformat"),delete D.type,D._input=O}}oe.exports=function(o,_,s){n(o,_,s,{noUirevision:!0,type:f.name,attributes:c,handleDefaults:d,font:_.font,paper_bgcolor:_.paper_bgcolor,fullData:s,layoutOut:_})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(x,oe,ae){"use strict";var g=x("../lib"),m=x("../plot_api/plot_template"),w=x("./domain").defaults;oe.exports=function(y,e,r,n){var a,t,u=n.attributes,i=n.handleDefaults,c=n.partition||"x",f=e._subplots[n.type],l=f.length,h=l&&f[0].replace(/\d+$/,"");function d(k,M){return g.coerce(a,t,u,k,M)}for(var o=0;o<l;o++){var _=f[o];a=y[_]?y[_]:y[_]={},t=m.newContainer(e,_,h),n.noUirevision||d("uirevision",e.uirevision);var s={};s[c]=[o/l,(o+1)/l],w(t,e,d,s),n.id=_,i(a,t,d,n)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(x,oe,ae){"use strict";function m(w){var y=w.description?" "+w.description:"",e=w.keys||[];if(e.length>0){for(var r=[],n=0;n<e.length;n++)r[n]="`"+e[n]+"`";y+="Finally, the template string has access to ",y=1===e.length?"variable "+r[0]:"variables "+r.slice(0,-1).join(", ")+" and "+r.slice(-1)+"."}return y}x("../constants/docs"),ae.hovertemplateAttrs=function(w,y){w=w||{},m(y=y||{});var e={valType:"string",dflt:"",editType:w.editType||"none"};return!1!==w.arrayOk&&(e.arrayOk=!0),e},ae.texttemplateAttrs=function(w,y){w=w||{},m(y=y||{});var e={valType:"string",dflt:"",editType:w.editType||"calc"};return!1!==w.arrayOk&&(e.arrayOk=!0),e}},{"../constants/docs":474}],634:[function(x,oe,ae){"use strict";var g=x("./ternary"),m=x("../../plots/get_data").getSubplotCalcData,w=x("../../lib").counterRegex;ae.name="ternary";var y=ae.attr="subplot";ae.idRoot="ternary",ae.idRegex=ae.attrRegex=w("ternary"),(ae.attributes={})[y]={valType:"subplotid",dflt:"ternary",editType:"calc"},ae.layoutAttributes=x("./layout_attributes"),ae.supplyLayoutDefaults=x("./layout_defaults"),ae.plot=function(e){for(var r=e._fullLayout,n=e.calcdata,a=r._subplots.ternary,t=0;t<a.length;t++){var p=a[t],u=m(n,"ternary",p),i=r[p]._subplot;i||(i=new g({id:p,graphDiv:e,container:r._ternarylayer.node()},r),r[p]._subplot=i),i.plot(u,r,e._promises)}},ae.clean=function(e,r,n,a){for(var t=a._subplots.ternary||[],p=0;p<t.length;p++){var u=t[p],i=a[u]._subplot;!r[u]&&i&&(i.plotContainer.remove(),i.clipDef.remove(),i.clipDefRelative.remove(),i.layers["a-title"].remove(),i.layers["b-title"].remove(),i.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(x,oe,ae){"use strict";var g=x("../../components/color/attributes"),m=x("../domain").attributes,w=x("../cartesian/layout_attributes"),y=x("../../plot_api/edit_types").overrideAll,e=x("../../lib/extend").extendFlat,r={title:{text:w.title.text,font:w.title.font},color:w.color,tickmode:w.tickmode,nticks:e({},w.nticks,{dflt:6,min:1}),tick0:w.tick0,dtick:w.dtick,tickvals:w.tickvals,ticktext:w.ticktext,ticks:w.ticks,ticklen:w.ticklen,tickwidth:w.tickwidth,tickcolor:w.tickcolor,ticklabelstep:w.ticklabelstep,showticklabels:w.showticklabels,showtickprefix:w.showtickprefix,tickprefix:w.tickprefix,showticksuffix:w.showticksuffix,ticksuffix:w.ticksuffix,showexponent:w.showexponent,exponentformat:w.exponentformat,minexponent:w.minexponent,separatethousands:w.separatethousands,tickfont:w.tickfont,tickangle:w.tickangle,tickformat:w.tickformat,tickformatstops:w.tickformatstops,hoverformat:w.hoverformat,showline:e({},w.showline,{dflt:!0}),linecolor:w.linecolor,linewidth:w.linewidth,showgrid:e({},w.showgrid,{dflt:!0}),gridcolor:w.gridcolor,gridwidth:w.gridwidth,griddash:w.griddash,layer:w.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:w._deprecated.title,titlefont:w._deprecated.titlefont}},n=oe.exports=y({domain:m({name:"ternary"}),bgcolor:{valType:"color",dflt:g.background},sum:{valType:"number",dflt:1,min:0},aaxis:r,baxis:r,caxis:r},"plot","from-root");n.uirevision={valType:"any",editType:"none"},n.aaxis.uirevision=n.baxis.uirevision=n.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(x,oe,ae){"use strict";var g=x("../../components/color"),m=x("../../plot_api/plot_template"),w=x("../../lib"),y=x("../subplot_defaults"),e=x("../cartesian/tick_label_defaults"),r=x("../cartesian/prefix_suffix_defaults"),n=x("../cartesian/tick_mark_defaults"),a=x("../cartesian/tick_value_defaults"),t=x("../cartesian/line_grid_defaults"),p=x("./layout_attributes"),u=["aaxis","baxis","caxis"];function i(f,l,h,d){var o,_,s,k=h("bgcolor"),M=h("sum");d.bgColor=g.combine(k,d.paper_bgcolor);for(var A=0;A<u.length;A++)_=f[o=u[A]]||{},(s=m.newContainer(l,o))._name=o,c(_,s,d,l);var E=l.aaxis,I=l.baxis,C=l.caxis;E.min+I.min+C.min>=M&&(E.min=0,I.min=0,C.min=0,f.aaxis&&delete f.aaxis.min,f.baxis&&delete f.baxis.min,f.caxis&&delete f.caxis.min)}function c(f,l,h,d){var o=p[l._name];function _(I,C){return w.coerce(f,l,o,I,C)}_("uirevision",d.uirevision),l.type="linear";var s=_("color"),k=s!==o.color.dflt?s:h.font.color,M=l._name.charAt(0).toUpperCase(),A="Component "+M,E=_("title.text",A);l._hovertitle=E===A?E:M,w.coerceFont(_,"title.font",{family:h.font.family,size:w.bigFont(h.font.size),color:k}),_("min"),a(f,l,_,"linear"),r(f,l,_,"linear"),e(f,l,_,"linear"),n(f,l,_,{outerTicks:!0}),_("showticklabels")&&(w.coerceFont(_,"tickfont",{family:h.font.family,size:h.font.size,color:k}),_("tickangle"),_("tickformat")),t(f,l,_,{dfltColor:s,bgColor:h.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:o}),_("hoverformat"),_("layer")}oe.exports=function(f,l,h){y(f,l,h,{type:"ternary",attributes:p,handleDefaults:i,font:l.font,paper_bgcolor:l.paper_bgcolor})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("tinycolor2"),w=x("../../registry"),y=x("../../lib"),e=y.strTranslate,r=y._,n=x("../../components/color"),a=x("../../components/drawing"),t=x("../cartesian/set_convert"),p=x("../../lib/extend").extendFlat,u=x("../plots"),i=x("../cartesian/axes"),c=x("../../components/dragelement"),f=x("../../components/fx"),l=x("../../components/dragelement/helpers"),h=l.freeMode,d=l.rectMode,o=x("../../components/titles"),_=x("../cartesian/select").prepSelect,s=x("../cartesian/select").selectOnClick,k=x("../cartesian/select").clearSelect,M=x("../cartesian/select").clearSelectionsCache,A=x("../cartesian/constants");function E(W,Y){this.id=W.id,this.graphDiv=W.graphDiv,this.init(Y),this.makeFramework(Y),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}oe.exports=E;var I=E.prototype;I.init=function(W){this.container=W._ternarylayer,this.defs=W._defs,this.layoutId=W._uid,this.traceHash={},this.layers={}},I.plot=function(W,Y){var Q=Y[this.id],ne=Y._size;this._hasClipOnAxisFalse=!1;for(var X=0;X<W.length;X++)if(!1===W[X][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(Q),this.adjustLayout(Q,ne),u.generalUpdatePerTraceModule(this.graphDiv,this,W,Q),this.layers.plotbg.select("path").call(n.fill,Q.bgcolor)},I.makeFramework=function(W){var Y=this.graphDiv,Q=W[this.id],ne=this.clipId="clip"+this.layoutId+this.id,X=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=y.ensureSingleById(W._clips,"clipPath",ne,function($){$.append("path").attr("d","M0,0Z")}),this.clipDefRelative=y.ensureSingleById(W._clips,"clipPath",X,function($){$.append("path").attr("d","M0,0Z")}),this.plotContainer=y.ensureSingle(this.container,"g",this.id),this.updateLayers(Q),a.setClipUrl(this.layers.backplot,ne,Y),a.setClipUrl(this.layers.grids,ne,Y)},I.updateLayers=function(W){var Y=this.layers,Q=["draglayer","plotbg","backplot","grids"];"below traces"===W.aaxis.layer&&Q.push("aaxis","aline"),"below traces"===W.baxis.layer&&Q.push("baxis","bline"),"below traces"===W.caxis.layer&&Q.push("caxis","cline"),Q.push("frontplot"),"above traces"===W.aaxis.layer&&Q.push("aaxis","aline"),"above traces"===W.baxis.layer&&Q.push("baxis","bline"),"above traces"===W.caxis.layer&&Q.push("caxis","cline");var ne=this.plotContainer.selectAll("g.toplevel").data(Q,String),X=["agrid","bgrid","cgrid"];ne.enter().append("g").attr("class",function($){return"toplevel "+$}).each(function($){var re=g.select(this);Y[$]=re,"frontplot"===$?re.append("g").classed("scatterlayer",!0):"backplot"===$?re.append("g").classed("maplayer",!0):"plotbg"===$?re.append("path").attr("d","M0,0Z"):"aline"===$||"bline"===$||"cline"===$?re.append("path"):"grids"===$&&X.forEach(function(H){Y[H]=re.append("g").classed("grid "+H,!0)})}),ne.order()};var C=Math.sqrt(4/3);I.adjustLayout=function(W,Y){var Q,ne,X,$,re,H,U=this,G=W.domain,ie=(G.x[0]+G.x[1])/2,q=(G.y[0]+G.y[1])/2,ee=G.x[1]-G.x[0],te=G.y[1]-G.y[0],se=ee*Y.w,ue=te*Y.h,de=W.sum,he=W.aaxis.min,xe=W.baxis.min,ge=W.caxis.min;se>C*ue?X=($=ue)*C:$=(X=se)/C,re=ee*X/se,H=te*$/ue,ne=Y.t+Y.h*(1-q)-$/2,U.x0=Q=Y.l+Y.w*ie-X/2,U.y0=ne,U.w=X,U.h=$,U.sum=de,U.xaxis={type:"linear",range:[he+2*ge-de,de-he-2*xe],domain:[ie-re/2,ie+re/2],_id:"x"},t(U.xaxis,U.graphDiv._fullLayout),U.xaxis.setScale(),U.xaxis.isPtWithinRange=function(Ue){return Ue.a>=U.aaxis.range[0]&&Ue.a<=U.aaxis.range[1]&&Ue.b>=U.baxis.range[1]&&Ue.b<=U.baxis.range[0]&&Ue.c>=U.caxis.range[1]&&Ue.c<=U.caxis.range[0]},U.yaxis={type:"linear",range:[he,de-xe-ge],domain:[q-H/2,q+H/2],_id:"y"},t(U.yaxis,U.graphDiv._fullLayout),U.yaxis.setScale(),U.yaxis.isPtWithinRange=function(){return!0};var _e=U.yaxis.domain[0],Ce=U.aaxis=p({},W.aaxis,{range:[he,de-xe-ge],side:"left",tickangle:(+W.aaxis.tickangle||0)-30,domain:[_e,_e+H*C],anchor:"free",position:0,_id:"y",_length:X});t(Ce,U.graphDiv._fullLayout),Ce.setScale();var Le=U.baxis=p({},W.baxis,{range:[de-he-ge,xe],side:"bottom",domain:U.xaxis.domain,anchor:"free",position:0,_id:"x",_length:X});t(Le,U.graphDiv._fullLayout),Le.setScale();var Ie=U.caxis=p({},W.caxis,{range:[de-he-xe,ge],side:"right",tickangle:(+W.caxis.tickangle||0)+30,domain:[_e,_e+H*C],anchor:"free",position:0,_id:"y",_length:X});t(Ie,U.graphDiv._fullLayout),Ie.setScale();var Be="M"+Q+","+(ne+$)+"h"+X+"l-"+X/2+",-"+$+"Z";U.clipDef.select("path").attr("d",Be),U.layers.plotbg.select("path").attr("d",Be);var ve="M0,"+$+"h"+X+"l-"+X/2+",-"+$+"Z";U.clipDefRelative.select("path").attr("d",ve);var Te=e(Q,ne);U.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Te),U.clipDefRelative.select("path").attr("transform",null);var Pe=e(Q-Le._offset,ne+$);U.layers.baxis.attr("transform",Pe),U.layers.bgrid.attr("transform",Pe);var De=e(Q+X/2,ne)+"rotate(30)"+e(0,-Ce._offset);U.layers.aaxis.attr("transform",De),U.layers.agrid.attr("transform",De);var Fe=e(Q+X/2,ne)+"rotate(-30)"+e(0,-Ie._offset);U.layers.caxis.attr("transform",Fe),U.layers.cgrid.attr("transform",Fe),U.drawAxes(!0),U.layers.aline.select("path").attr("d",Ce.showline?"M"+Q+","+(ne+$)+"l"+X/2+",-"+$:"M0,0").call(n.stroke,Ce.linecolor||"#000").style("stroke-width",(Ce.linewidth||0)+"px"),U.layers.bline.select("path").attr("d",Le.showline?"M"+Q+","+(ne+$)+"h"+X:"M0,0").call(n.stroke,Le.linecolor||"#000").style("stroke-width",(Le.linewidth||0)+"px"),U.layers.cline.select("path").attr("d",Ie.showline?"M"+(Q+X/2)+","+ne+"l"+X/2+","+$:"M0,0").call(n.stroke,Ie.linecolor||"#000").style("stroke-width",(Ie.linewidth||0)+"px"),U.graphDiv._context.staticPlot||U.initInteractions(),a.setClipUrl(U.layers.frontplot,U._hasClipOnAxisFalse?null:U.clipId,U.graphDiv)},I.drawAxes=function(W){var Y=this.graphDiv,Q=this.id.substr(7)+"title",ne=this.layers,X=this.aaxis,$=this.baxis,re=this.caxis;if(this.drawAx(X),this.drawAx($),this.drawAx(re),W){var H=Math.max(X.showticklabels?X.tickfont.size/2:0,(re.showticklabels?.75*re.tickfont.size:0)+("outside"===re.ticks?.87*re.ticklen:0)),U=($.showticklabels?$.tickfont.size:0)+("outside"===$.ticks?$.ticklen:0)+3;ne["a-title"]=o.draw(Y,"a"+Q,{propContainer:X,propName:this.id+".aaxis.title",placeholder:r(Y,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-X.title.font.size/3-H,"text-anchor":"middle"}}),ne["b-title"]=o.draw(Y,"b"+Q,{propContainer:$,propName:this.id+".baxis.title",placeholder:r(Y,"Click to enter Component B title"),attributes:{x:this.x0-U,y:this.y0+this.h+.83*$.title.font.size+U,"text-anchor":"middle"}}),ne["c-title"]=o.draw(Y,"c"+Q,{propContainer:re,propName:this.id+".caxis.title",placeholder:r(Y,"Click to enter Component C title"),attributes:{x:this.x0+this.w+U,y:this.y0+this.h+.83*re.title.font.size+U,"text-anchor":"middle"}})}},I.drawAx=function(W){var Y,Q=this.graphDiv,ne=W._name,X=ne.charAt(0),$=W._id,re=this.layers[ne],H=X+"tickLayout",U=(Y=W).ticks+String(Y.ticklen)+String(Y.showticklabels);this[H]!==U&&(re.selectAll("."+$+"tick").remove(),this[H]=U),W.setScale();var G=i.calcTicks(W),ie=i.clipEnds(W,G),q=i.makeTransTickFn(W),ee=i.getTickSigns(W)[2],te=y.deg2rad(30),se=ee*(W.linewidth||1)/2,ue=ee*W.ticklen,de=this.w,he=this.h,xe="b"===X?"M0,"+se+"l"+Math.sin(te)*ue+","+Math.cos(te)*ue:"M"+se+",0l"+Math.cos(te)*ue+","+-Math.sin(te)*ue,ge={a:"M0,0l"+he+",-"+de/2,b:"M0,0l-"+de/2+",-"+he,c:"M0,0l-"+he+","+de/2}[X];i.drawTicks(Q,W,{vals:"inside"===W.ticks?ie:G,layer:re,path:xe,transFn:q,crisp:!1}),i.drawGrid(Q,W,{vals:ie,layer:this.layers[X+"grid"],path:ge,transFn:q,crisp:!1}),i.drawLabels(Q,W,{vals:G,layer:re,transFn:q,labelFns:i.makeLabelFns(W,0,30)})};var R=A.MINZOOM/2+.87,O="m-0.87,.5h"+R+"v3h-"+(R+5.2)+"l"+(R/2+2.6)+",-"+(.87*R+4.5)+"l2.6,1.5l-"+R/2+","+.87*R+"Z",D="m0.87,.5h-"+R+"v3h"+(R+5.2)+"l-"+(R/2+2.6)+",-"+(.87*R+4.5)+"l-2.6,1.5l"+R/2+","+.87*R+"Z",L="m0,1l"+R/2+","+.87*R+"l2.6,-1.5l-"+(R/2+2.6)+",-"+(.87*R+4.5)+"l-"+(R/2+2.6)+","+(.87*R+4.5)+"l2.6,1.5l"+R/2+",-"+.87*R+"Z",B=!0;function j(W){g.select(W).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}I.clearSelect=function(){M(this.dragOptions),k(this.dragOptions.gd)},I.initInteractions=function(){var W,Y,Q,ne,X,$,re,H,U,G,ie,q,ee=this,te=ee.layers.plotbg.select("path").node(),se=ee.graphDiv,ue=se._fullLayout._zoomlayer;function de(ve){var Te={};return Te[ee.id+".aaxis.min"]=ve.a,Te[ee.id+".baxis.min"]=ve.b,Te[ee.id+".caxis.min"]=ve.c,Te}function he(ve,Te){var Pe=se._fullLayout.clickmode;j(se),2===ve&&(se.emit("plotly_doubleclick",null),w.call("_guiRelayout",se,de({a:0,b:0,c:0}))),Pe.indexOf("select")>-1&&1===ve&&s(Te,se,[ee.xaxis],[ee.yaxis],ee.id,ee.dragOptions),Pe.indexOf("event")>-1&&f.click(se,Te,ee.id)}function xe(ve,Te){return 1-Te/ee.h}function ge(ve,Te){return 1-(ve+(ee.h-Te)/Math.sqrt(3))/ee.w}function _e(ve,Te){return(ve-(ee.h-Te)/Math.sqrt(3))/ee.w}function Ce(ve,Te){var Pe=Q+ve*W,De=ne+Te*Y,Fe=Math.max(0,Math.min(1,xe(0,ne),xe(0,De))),Ue=Math.max(0,Math.min(1,ge(Q,ne),ge(Pe,De))),He=Math.max(0,Math.min(1,_e(Q,ne),_e(Pe,De))),Ke=(Fe/2+He)*ee.w,st=(1-Fe/2-Ue)*ee.w,Ve=(Ke+st)/2,$e=st-Ke,Qe=(1-Fe)*ee.h,tt=Qe-$e/C;$e<A.MINZOOM?(re=X,ie.attr("d",U),q.attr("d","M0,0Z")):(re={a:X.a+Fe*$,b:X.b+Ue*$,c:X.c+He*$},ie.attr("d",U+"M"+Ke+","+Qe+"H"+st+"L"+Ve+","+tt+"L"+Ke+","+Qe+"Z"),q.attr("d","M"+Q+","+ne+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Ke+","+Qe+O+"M"+st+","+Qe+D+"M"+Ve+","+tt+L)),G||(ie.transition().style("fill",H>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),q.transition().style("opacity",1).duration(200),G=!0),se.emit("plotly_relayouting",de(re))}function Le(){j(se),re!==X&&(w.call("_guiRelayout",se,de(re)),B&&se.data&&se._context.showTips&&(y.notifier(r(se,"Double-click to zoom back out"),"long"),B=!1))}function Ie(ve,Te){var Pe=ve/ee.xaxis._m,De=Te/ee.yaxis._m,Fe=[(re={a:X.a-De,b:X.b+(Pe+De)/2,c:X.c-(Pe-De)/2}).a,re.b,re.c].sort(y.sorterAsc),Ue=Fe.indexOf(re.a),He=Fe.indexOf(re.b),Ke=Fe.indexOf(re.c);Fe[0]<0&&(Fe[1]+Fe[0]/2<0?(Fe[2]+=Fe[0]+Fe[1],Fe[0]=Fe[1]=0):(Fe[2]+=Fe[0]/2,Fe[1]+=Fe[0]/2,Fe[0]=0),Te=(X.a-(re={a:Fe[Ue],b:Fe[He],c:Fe[Ke]}).a)*ee.yaxis._m,ve=(X.c-re.c-X.b+re.b)*ee.xaxis._m);var st=e(ee.x0+ve,ee.y0+Te);ee.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",st);var Ve=e(-ve,-Te);ee.clipDefRelative.select("path").attr("transform",Ve),ee.aaxis.range=[re.a,ee.sum-re.b-re.c],ee.baxis.range=[ee.sum-re.a-re.c,re.b],ee.caxis.range=[ee.sum-re.a-re.b,re.c],ee.drawAxes(!1),ee._hasClipOnAxisFalse&&ee.plotContainer.select(".scatterlayer").selectAll(".trace").call(a.hideOutsideRangePoints,ee),se.emit("plotly_relayouting",de(re))}function Be(){w.call("_guiRelayout",se,de(re))}this.dragOptions={element:te,gd:se,plotinfo:{id:ee.id,domain:se._fullLayout[ee.id].domain,xaxis:ee.xaxis,yaxis:ee.yaxis},subplot:ee.id,prepFn:function(ve,Te,Pe){ee.dragOptions.xaxes=[ee.xaxis],ee.dragOptions.yaxes=[ee.yaxis],W=se._fullLayout._invScaleX,Y=se._fullLayout._invScaleY;var De=ee.dragOptions.dragmode=se._fullLayout.dragmode;ee.dragOptions.minDrag=h(De)?1:void 0,"zoom"===De?(ee.dragOptions.moveFn=Ce,ee.dragOptions.clickFn=he,ee.dragOptions.doneFn=Le,function(Fe,Ue,He){var Ke=te.getBoundingClientRect();Q=Ue-Ke.left,ne=He-Ke.top,se._fullLayout._calcInverseTransform(se);var Ve=y.apply3DTransform(se._fullLayout._invTransform)(Q,ne);Q=Ve[0],ne=Ve[1],re=X={a:ee.aaxis.range[0],b:ee.baxis.range[1],c:ee.caxis.range[1]},$=ee.aaxis.range[1]-X.a,H=m(ee.graphDiv._fullLayout[ee.id].bgcolor).getLuminance(),U="M0,"+ee.h+"L"+ee.w/2+", 0L"+ee.w+","+ee.h+"Z",G=!1,ie=ue.append("path").attr("class","zoombox").attr("transform",e(ee.x0,ee.y0)).style({fill:H>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",U),q=ue.append("path").attr("class","zoombox-corners").attr("transform",e(ee.x0,ee.y0)).style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ee.clearSelect(se)}(0,Te,Pe)):"pan"===De?(ee.dragOptions.moveFn=Ie,ee.dragOptions.clickFn=he,ee.dragOptions.doneFn=Be,re=X={a:ee.aaxis.range[0],b:ee.baxis.range[1],c:ee.caxis.range[1]},ee.clearSelect(se)):(d(De)||h(De))&&_(ve,Te,Pe,ee.dragOptions,De)}},te.onmousemove=function(ve){f.hover(se,ve,ee.id),se._fullLayout._lasthover=te,se._fullLayout._hoversubplot=ee.id},te.onmouseout=function(ve){se._dragging||c.unhover(se,ve)},c.init(this.dragOptions)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(x,oe,ae){"use strict";var g=x("./lib/loggers"),m=x("./lib/noop"),w=x("./lib/push_unique"),y=x("./lib/is_plain_object"),e=x("./lib/dom").addStyleRule,r=x("./lib/extend"),n=x("./plots/attributes"),a=x("./plots/layout_attributes"),t=r.extendFlat,p=r.extendDeepAll;function u(s){var k=s.name,M=s.categories,A=s.meta;if(ae.modules[k])g.log("Type "+k+" already registered");else{ae.subplotsRegistry[s.basePlotModule.name]||function(B){var j=B.name;if(ae.subplotsRegistry[j])g.log("Plot type "+j+" already registered.");else for(var W in l(B),ae.subplotsRegistry[j]=B,ae.componentsRegistry)o(W,B.name)}(s.basePlotModule);for(var E={},I=0;I<M.length;I++)E[M[I]]=!0,ae.allCategories[M[I]]=!0;for(var C in ae.modules[k]={_module:s,categories:E},A&&Object.keys(A).length&&(ae.modules[k].meta=A),ae.allTypes.push(k),ae.componentsRegistry)h(C,k);s.layoutAttributes&&t(ae.traceLayoutAttributes,s.layoutAttributes);var R=s.basePlotModule,O=R.name;if("mapbox"===O){var D=R.constants.styleRules;for(var L in D)e(".js-plotly-plot .plotly .mapboxgl-"+L,D[L])}"geo"!==O&&"mapbox"!==O||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function i(s){if("string"!=typeof s.name)throw new Error("Component module *name* must be a string.");var k=s.name;for(var M in ae.componentsRegistry[k]=s,s.layoutAttributes&&(s.layoutAttributes._isLinkedToArray&&w(ae.layoutArrayContainers,k),l(s)),ae.modules)h(k,M);for(var A in ae.subplotsRegistry)o(k,A);for(var E in ae.transformsRegistry)d(k,E);s.schema&&s.schema.layout&&p(a,s.schema.layout)}function c(s){if("string"!=typeof s.name)throw new Error("Transform module *name* must be a string.");var k="Transform module "+s.name,M="function"==typeof s.transform,A="function"==typeof s.calcTransform;if(!M&&!A)throw new Error(k+" is missing a *transform* or *calcTransform* method.");for(var E in M&&A&&g.log([k+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),y(s.attributes)||g.log(k+" registered without an *attributes* object."),"function"!=typeof s.supplyDefaults&&g.log(k+" registered without a *supplyDefaults* method."),ae.transformsRegistry[s.name]=s,ae.componentsRegistry)d(E,s.name)}function f(s){var k=s.name,M=k.split("-")[0],A=s.dictionary,E=s.format,I=A&&Object.keys(A).length,C=E&&Object.keys(E).length,R=ae.localeRegistry,O=R[k];if(O||(R[k]=O={}),M!==k){var D=R[M];D||(R[M]=D={}),I&&D.dictionary===O.dictionary&&(D.dictionary=A),C&&D.format===O.format&&(D.format=E)}I&&(O.dictionary=A),C&&(O.format=E)}function l(s){if(s.layoutAttributes){var k=s.layoutAttributes._arrayAttrRegexps;if(k)for(var M=0;M<k.length;M++)w(ae.layoutArrayRegexes,k[M])}}function h(s,k){var M=ae.componentsRegistry[s].schema;if(M&&M.traces){var A=M.traces[k];A&&p(ae.modules[k]._module.attributes,A)}}function d(s,k){var M=ae.componentsRegistry[s].schema;if(M&&M.transforms){var A=M.transforms[k];A&&p(ae.transformsRegistry[k].attributes,A)}}function o(s,k){var M=ae.componentsRegistry[s].schema;if(M&&M.subplots){var A=ae.subplotsRegistry[k],E=A.layoutAttributes,I="subplot"===A.attr?A.name:A.attr;Array.isArray(I)&&(I=I[0]);var C=M.subplots[I];E&&C&&p(E,C)}}function _(s){return"object"==typeof s&&(s=s.type),s}ae.modules={},ae.allCategories={},ae.allTypes=[],ae.subplotsRegistry={},ae.transformsRegistry={},ae.componentsRegistry={},ae.layoutArrayContainers=[],ae.layoutArrayRegexes=[],ae.traceLayoutAttributes={},ae.localeRegistry={},ae.apiMethodRegistry={},ae.collectableSubplotTypes=null,ae.register=function(s){if(ae.collectableSubplotTypes=null,!s)throw new Error("No argument passed to Plotly.register.");s&&!Array.isArray(s)&&(s=[s]);for(var k=0;k<s.length;k++){var M=s[k];if(!M)throw new Error("Invalid module was attempted to be registered!");switch(M.moduleType){case"trace":u(M);break;case"transform":c(M);break;case"component":i(M);break;case"locale":f(M);break;case"apiMethod":ae.apiMethodRegistry[M.name]=M.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},ae.getModule=function(s){var k=ae.modules[_(s)];return!!k&&k._module},ae.traceIs=function(s,k){if("various"===(s=_(s)))return!1;var M=ae.modules[s];return M||(s&&g.log("Unrecognized trace type "+s+"."),M=ae.modules[n.type.dflt]),!!M.categories[k]},ae.getTransformIndices=function(s,k){for(var M=[],A=s.transforms||[],E=0;E<A.length;E++)A[E].type===k&&M.push(E);return M},ae.hasTransform=function(s,k){for(var M=s.transforms||[],A=0;A<M.length;A++)if(M[A].type===k)return!0;return!1},ae.getComponentMethod=function(s,k){var M=ae.componentsRegistry[s];return M&&M[k]||m},ae.call=function(){var s=arguments[0],k=[].slice.call(arguments,1);return ae.apiMethodRegistry[s].apply(null,k)}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(x,oe,ae){"use strict";var g=x("../registry"),m=x("../lib"),w=m.extendFlat,y=m.extendDeep;function e(r){var n;switch(r){case"themes__thumb":n={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":n={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:n={}}return n}oe.exports=function(r,n){var a,u=r.layout,i=y([],r.data),c=y({},u,e(n.tileClass)),f=r._context||{};if(n.width&&(c.width=n.width),n.height&&(c.height=n.height),"thumbnail"===n.tileClass||"themes__thumb"===n.tileClass){c.annotations=[];var l=Object.keys(c);for(a=0;a<l.length;a++)["xaxis","yaxis","zaxis"].indexOf(l[a].slice(0,5))>-1&&(c[l[a]].title={text:""});for(a=0;a<i.length;a++){var h=i[a];h.showscale=!1,h.marker&&(h.marker.showscale=!1),g.traceIs(h,"pie-like")&&(h.textposition="none")}}if(Array.isArray(n.annotations))for(a=0;a<n.annotations.length;a++)c.annotations.push(n.annotations[a]);var d=Object.keys(c).filter(function(M){return M.match(/^scene\d*$/)});if(d.length){var o={};for("thumbnail"===n.tileClass&&(o={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),a=0;a<d.length;a++){var _=c[d[a]];_.xaxis||(_.xaxis={}),_.yaxis||(_.yaxis={}),_.zaxis||(_.zaxis={}),w(_.xaxis,o),w(_.yaxis,o),w(_.zaxis,o),_._scene=null}}var s=document.createElement("div");n.tileClass&&(s.className=n.tileClass);var k={gd:s,td:s,layout:c,data:i,config:{staticPlot:void 0===n.staticPlot||n.staticPlot,plotGlPixelRatio:void 0===n.plotGlPixelRatio?2:n.plotGlPixelRatio,displaylogo:n.displaylogo||!1,showLink:n.showLink||!1,showTips:n.showTips||!1,mapboxAccessToken:f.mapboxAccessToken}};return"transparent"!==n.setBackground&&(k.config.setBackground=n.setBackground||"opaque"),k.gd.defaultLayout=e(n.tileClass),k}},{"../lib":503,"../registry":638}],640:[function(x,oe,ae){"use strict";var g=x("../lib"),m=x("../plot_api/to_image"),w=x("./filesaver"),y=x("./helpers");oe.exports=function(e,r){var n;return g.isPlainObject(e)||(n=g.getGraphDiv(e)),(r=r||{}).format=r.format||"png",r.width=r.width||null,r.height=r.height||null,r.imageDataOnly=!0,new Promise(function(a,t){n&&n._snapshotInProgress&&t(new Error("Snapshotting already in progress.")),g.isIE()&&"svg"!==r.format&&t(new Error(y.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var p=m(e,r),u=r.filename||e.fn||"newplot";u+="."+r.format.replace("-","."),p.then(function(i){return n&&(n._snapshotInProgress=!1),w(i,u,r.format)}).then(function(i){a(i)}).catch(function(i){n&&(n._snapshotInProgress=!1),t(i)})})}},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(x,oe,ae){"use strict";var g=x("../lib"),m=x("./helpers");oe.exports=function(w,y,e){var r=document.createElement("a"),n="download"in r;return new Promise(function(a,t){var p,u;return g.isIE()?(p=m.createBlob(w,"svg"),window.navigator.msSaveBlob(p,y),p=null,a(y)):n?(p=m.createBlob(w,e),u=m.createObjectURL(p),r.href=u,r.download=y,document.body.appendChild(r),r.click(),document.body.removeChild(r),m.revokeObjectURL(u),p=null,a(y)):g.isSafari()?(m.octetStream(("svg"===e?",":";base64,")+encodeURIComponent(w)),a(y)):void t(new Error("download error"))})}},{"../lib":503,"./helpers":642}],642:[function(x,oe,ae){"use strict";var g=x("../registry");ae.getDelay=function(w){return w._has&&(w._has("gl3d")||w._has("gl2d")||w._has("mapbox"))?500:0},ae.getRedrawFunc=function(w){return function(){g.getComponentMethod("colorbar","draw")(w)}},ae.encodeSVG=function(w){return"data:image/svg+xml,"+encodeURIComponent(w)},ae.encodeJSON=function(w){return"data:application/json,"+encodeURIComponent(w)};var m=window.URL||window.webkitURL;ae.createObjectURL=function(w){return m.createObjectURL(w)},ae.revokeObjectURL=function(w){return m.revokeObjectURL(w)},ae.createBlob=function(w,y){if("svg"===y)return new window.Blob([w],{type:"image/svg+xml;charset=utf-8"});if("full-json"===y)return new window.Blob([w],{type:"application/json;charset=utf-8"});var e=function(r){for(var n=r.length,a=new ArrayBuffer(n),t=new Uint8Array(a),p=0;p<n;p++)t[p]=r.charCodeAt(p);return a}(window.atob(w));return new window.Blob([e],{type:"image/"+y})},ae.octetStream=function(w){document.location.href="data:application/octet-stream"+w},ae.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,ae.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(x,oe,ae){"use strict";var g=x("./helpers"),m={getDelay:g.getDelay,getRedrawFunc:g.getRedrawFunc,clone:x("./cloneplot"),toSVG:x("./tosvg"),svgToImg:x("./svgtoimg"),toImage:x("./toimage"),downloadImage:x("./download")};oe.exports=m},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(x,oe,ae){"use strict";var g=x("../lib"),m=x("events").EventEmitter,w=x("./helpers");oe.exports=function(y){var e=y.emitter||new m,r=new Promise(function(n,a){var t=window.Image,p=y.svg,u=y.format||"png";if(g.isIE()&&"svg"!==u){var i=new Error(w.MSG_IE_BAD_FORMAT);return a(i),y.promise?r:e.emit("error",i)}var c,f,l=y.canvas,h=y.scale||1,_=h*(y.width||300),s=h*(y.height||150),k=l.getContext("2d",{willReadFrequently:!0}),M=new t;"svg"===u||g.isSafari()?f=w.encodeSVG(p):(c=w.createBlob(p,"svg"),f=w.createObjectURL(c)),l.width=_,l.height=s,M.onload=function(){var A;switch(c=null,w.revokeObjectURL(f),"svg"!==u&&k.drawImage(M,0,0,_,s),u){case"jpeg":A=l.toDataURL("image/jpeg");break;case"png":A=l.toDataURL("image/png");break;case"webp":A=l.toDataURL("image/webp");break;case"svg":A=f;break;default:var E="Image format is not jpeg, png, svg or webp.";if(a(new Error(E)),!y.promise)return e.emit("error",E)}n(A),y.promise||e.emit("success",A)},M.onerror=function(A){if(c=null,w.revokeObjectURL(f),a(A),!y.promise)return e.emit("error",A)},M.src=f});return y.promise?r:e}},{"../lib":503,"./helpers":642,events:84}],645:[function(x,oe,ae){"use strict";var g=x("events").EventEmitter,m=x("../registry"),w=x("../lib"),y=x("./helpers"),e=x("./cloneplot"),r=x("./tosvg"),n=x("./svgtoimg");oe.exports=function(a,t){var p=new g,u=e(a,{format:"png"}),i=u.gd;i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i);var c=y.getRedrawFunc(i);return m.call("_doPlot",i,u.data,u.layout,u.config).then(c).then(function(){var f=y.getDelay(i._fullLayout);setTimeout(function(){var l=r(i),h=document.createElement("canvas");h.id=w.randstr(),(p=n({format:t.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:h,emitter:p,svg:l})).clean=function(){i&&document.body.removeChild(i)}},f)}).catch(function(f){p.emit("error",f)}),p}},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../lib"),w=x("../components/drawing"),y=x("../components/color"),e=x("../constants/xmlns_namespaces"),r=/"/g,n=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");oe.exports=function(a,t,p){var u,i=a._fullLayout,c=i._paper,f=i._toppaper,l=i.width,h=i.height;c.insert("rect",":first-child").call(w.setRect,0,0,l,h).call(y.fill,i.paper_bgcolor);var d=i._basePlotModules||[];for(u=0;u<d.length;u++){var o=d[u];o.toSVG&&o.toSVG(a)}if(f){var _=f.node().childNodes,s=Array.prototype.slice.call(_);for(u=0;u<s.length;u++){var k=s[u];k.childNodes.length&&c.node().appendChild(k)}}i._draggers&&i._draggers.remove(),c.node().style.background="",c.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var A=g.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){A.style({visibility:null,display:null});var E=this.style.fontFamily;E&&-1!==E.indexOf('"')&&A.style("font-family",E.replace(r,"TOBESTRIPPED"))}else A.remove()}),c.selectAll(".gradient_filled,.pattern_filled").each(function(){var A=g.select(this),E=this.style.fill;E&&-1!==E.indexOf("url(")&&A.style("fill",E.replace(r,"TOBESTRIPPED"));var I=this.style.stroke;I&&-1!==I.indexOf("url(")&&A.style("stroke",I.replace(r,"TOBESTRIPPED"))}),"pdf"!==t&&"eps"!==t||c.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),c.node().setAttributeNS(e.xmlns,"xmlns",e.svg),c.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),"svg"===t&&p&&(c.attr("width",p*l),c.attr("height",p*h),c.attr("viewBox","0 0 "+l+" "+h));var A,E,I,M=(new window.XMLSerializer).serializeToString(c.node());return A=M,E=g.select("body").append("div").style({display:"none"}).html(""),I=A.replace(/(&[^;]*;)/gi,function(C){return"&lt;"===C?"&#60;":"&rt;"===C?"&#62;":-1!==C.indexOf("<")||-1!==C.indexOf(">")?"":E.html(C).text()}),E.remove(),M=(M=(M=I).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(n,"'"),m.isIE()&&(M=(M=(M=M.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),M}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(x,oe,ae){"use strict";var g=x("../../lib");oe.exports=function(m,w){for(var y=0;y<m.length;y++)m[y].i=y;g.mergeArray(w.text,m,"tx"),g.mergeArray(w.hovertext,m,"htx");var e=w.marker;if(e){g.mergeArray(e.opacity,m,"mo",!0),g.mergeArray(e.color,m,"mc");var r=e.line;r&&(g.mergeArray(r.color,m,"mlc"),g.mergeArrayCastPositive(r.width,m,"mlw"))}}},{"../../lib":503}],648:[function(x,oe,ae){"use strict";var g=x("../scatter/attributes"),m=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../../plots/template_attributes").texttemplateAttrs,e=x("../../components/colorscale/attributes"),r=x("../../plots/font_attributes"),n=x("./constants"),a=x("../../components/drawing/attributes").pattern,t=x("../../lib/extend").extendFlat,p=r({editType:"calc",arrayOk:!0,colorEditType:"style"}),u=t({},g.marker.line.width,{dflt:0}),i=t({width:u,editType:"calc"},e("marker.line")),c=t({line:i,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:a});oe.exports={x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),text:g.text,texttemplate:y({editType:"plot"},{keys:n.eventDataKeys}),hovertext:g.hovertext,hovertemplate:w({},{keys:n.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:t({},p,{}),insidetextfont:t({},p,{}),outsidetextfont:t({},p,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:t({},g.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:c,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:g.selected.marker.opacity,color:g.selected.marker.color,editType:"style"},textfont:g.selected.textfont,editType:"style"},unselected:{marker:{opacity:g.unselected.marker.opacity,color:g.unselected.marker.color,editType:"style"},textfont:g.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":927,"./constants":650}],649:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes"),m=x("../../plots/cartesian/align_period"),w=x("../../components/colorscale/helpers").hasColorscale,y=x("../../components/colorscale/calc"),e=x("./arrays_to_calcdata"),r=x("../scatter/calc_selection");oe.exports=function(n,a){var t,p,u,i,c,f,l=g.getFromId(n,a.xaxis||"x"),h=g.getFromId(n,a.yaxis||"y"),d={msUTC:!(!a.base&&0!==a.base)};"h"===a.orientation?(t=l.makeCalcdata(a,"x",d),u=h.makeCalcdata(a,"y"),i=m(a,h,"y",u),c=!!a.yperiodalignment,f="y"):(t=h.makeCalcdata(a,"y",d),u=l.makeCalcdata(a,"x"),i=m(a,l,"x",u),c=!!a.xperiodalignment,f="x"),p=i.vals;for(var o=Math.min(p.length,t.length),_=new Array(o),s=0;s<o;s++)_[s]={p:p[s],s:t[s]},c&&(_[s].orig_p=u[s],_[s][f+"End"]=i.ends[s],_[s][f+"Start"]=i.starts[s]),a.ids&&(_[s].id=String(a.ids[s]));return w(a,"marker")&&y(n,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),w(a,"marker.line")&&y(n,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(_,a),r(_,a),_}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929,"./arrays_to_calcdata":647}],650:[function(x,oe,ae){"use strict";oe.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib").isArrayOrTypedArray,w=x("../../constants/numerical").BADNUM,y=x("../../registry"),e=x("../../plots/cartesian/axes"),r=x("../../plots/cartesian/constraints").getAxisGroup,n=x("./sieve.js");function a(o,_,s,k,M){if(k.length){var A,E,I,C;switch(function(R,O){var D,L;for(D=0;D<O.length;D++){var B,j=O[D],W=j[0].trace,Y="funnel"===W.type?W._base:W.base,Q="h"===W.orientation?W.xcalendar:W.ycalendar,ne="category"===R.type||"multicategory"===R.type?function(){return null}:R.d2c;if(m(Y)){for(L=0;L<Math.min(Y.length,j.length);L++)B=ne(Y[L],0,Q),g(B)?(j[L].b=+B,j[L].hasB=1):j[L].b=0;for(;L<j.length;L++)j[L].b=0}else{B=ne(Y,0,Q);var X=g(B);for(B=X?B:0,L=0;L<j.length;L++)j[L].b=B,X&&(j[L].hasB=1)}}}(s,k),M.mode){case"overlay":t(_,s,k,M);break;case"group":for(A=[],E=[],I=0;I<k.length;I++)void 0===(C=k[I])[0].trace.offset?E.push(C):A.push(C);E.length&&(R=o,D=s,j=new n(E,{posAxis:O=_,sepNegVal:!1,overlapNoMerge:!(B=M).norm}),function(W,Y,Q,ne){for(var X=W._fullLayout,H=Q.minDiff,U=Q.traces,G=U.length,ie=Q.positions.length!==Q.distinctPositions.length,q=H*(1-ne.gap),ee=r(X,Y._id)+U[0][0].trace.orientation,te=X._alignmentOpts[ee]||{},se=0;se<G;se++){var ue,de,he=U[se],xe=he[0].trace,_e=Object.keys((te[xe.alignmentgroup]||{}).offsetGroups||{}).length,Ce=(ue=_e?q/_e:ie?q/G:q)*(1-(ne.groupgap||0));de=_e?((2*xe._offsetIndex+1-_e)*ue-Ce)/2:ie?((2*se+1-G)*ue-Ce)/2:-Ce/2;var Le=he[0].t;Le.barwidth=Ce,Le.poffset=de,Le.bargroupwidth=q,Le.bardelta=H}Q.binWidth=U[0][0].t.barwidth/100,u(Q),i(Y,Q),c(Y,Q,ie)}(R,O,j,B),function(W,Y){for(var Q=W.traces,ne=0;ne<Q.length;ne++){var X=Q[ne];if(void 0===X[0].trace.base)for(var $=new n([X],{posAxis:Y,sepNegVal:!0,overlapNoMerge:!0}),re=0;re<X.length;re++){var H=X[re];if(H.p!==w){var U=$.put(H.p,H.b+H.s);U&&(H.b=U)}}}}(j,O),B.norm?(l(j),h(D,j,B)):f(D,j)),A.length&&t(_,s,A,M);break;case"stack":case"relative":for(A=[],E=[],I=0;I<k.length;I++)void 0===(C=k[I])[0].trace.base?E.push(C):A.push(C);E.length&&function(R,O,D,L,B){var j=new n(L,{posAxis:O,sepNegVal:"relative"===B.mode,overlapNoMerge:!(B.norm||"stack"===B.mode||"relative"===B.mode)});p(O,j,B),function(X,$,re){var H,U,G,ie,q,ee,te=d(X),se=$.traces;for(ie=0;ie<se.length;ie++)if("funnel"===(U=(H=se[ie])[0].trace).type)for(q=0;q<H.length;q++)(ee=H[q]).s!==w&&$.put(ee.p,-.5*ee.s);for(ie=0;ie<se.length;ie++){G="funnel"===(U=(H=se[ie])[0].trace).type;var ue=[];for(q=0;q<H.length;q++)if((ee=H[q]).s!==w){var de,he=$.put(ee.p,de=G?ee.s:ee.s+ee.b),xe=he+de;ee.b=he,ee[te]=xe,re.norm||(ue.push(xe),ee.hasB&&ue.push(he))}re.norm||(U._extremes[X._id]=e.findExtremes(X,ue,{tozero:!0,padded:!0}))}}(D,j,B);for(var W=0;W<L.length;W++)for(var Y=L[W],Q=0;Q<Y.length;Q++){var ne=Y[Q];ne.s!==w&&ne.b+ne.s===j.get(ne.p,ne.s)&&(ne._outmost=!0)}B.norm&&h(D,j,B)}(0,_,s,E,M),A.length&&t(_,s,A,M)}!function(R,O){var D,L,B,j=d(O),W={},Y=1/0,Q=-1/0;for(D=0;D<R.length;D++)for(B=R[D],L=0;L<B.length;L++){var ne=B[L].p;g(ne)&&(Y=Math.min(Y,ne),Q=Math.max(Q,ne))}var X=1e4/(Q-Y),$=W.round=function(ee){return String(Math.round(X*(ee-Y)))};for(D=0;D<R.length;D++){(B=R[D])[0].t.extents=W;var re=B[0].t.poffset,H=Array.isArray(re);for(L=0;L<B.length;L++){var U=B[L],G=U[j]-U.w/2;if(g(G)){var ie=U[j]+U.w/2,q=$(U.p);W[q]=W[q]?[Math.min(G,W[q][0]),Math.max(ie,W[q][1])]:[G,ie]}U.p0=U.p+(H?re[L]:re),U.p1=U.p0+U.w,U.s0=U.b,U.s1=U.s0+U.s}}}(k,_)}var R,O,D,B,j}function t(o,_,s,k){for(var M=0;M<s.length;M++){var E=new n([s[M]],{posAxis:o,sepNegVal:!1,overlapNoMerge:!k.norm});p(o,E,k),k.norm?(l(E),h(_,E,k)):f(_,E)}}function p(o,_,s){for(var k=_.minDiff,M=_.traces,A=k*(1-s.gap),E=A*(1-(s.groupgap||0)),I=-E/2,C=0;C<M.length;C++){var R=M[C][0].t;R.barwidth=E,R.poffset=I,R.bargroupwidth=A,R.bardelta=k}_.binWidth=M[0][0].t.barwidth/100,u(_),i(o,_),c(o,_)}function u(o){var _,s,k=o.traces;for(_=0;_<k.length;_++){var M,A=k[_],E=A[0],I=E.trace,C=E.t,R=I._offset||I.offset,O=C.poffset;if(m(R)){for(M=Array.prototype.slice.call(R,0,A.length),s=0;s<M.length;s++)g(M[s])||(M[s]=O);for(s=M.length;s<A.length;s++)M.push(O);C.poffset=M}else void 0!==R&&(C.poffset=R);var D=I._width||I.width,L=C.barwidth;if(m(D)){var B=Array.prototype.slice.call(D,0,A.length);for(s=0;s<B.length;s++)g(B[s])||(B[s]=L);for(s=B.length;s<A.length;s++)B.push(L);if(C.barwidth=B,void 0===R){for(M=[],s=0;s<A.length;s++)M.push(O+(L-B[s])/2);C.poffset=M}}else void 0!==D&&(C.barwidth=D,void 0===R&&(C.poffset=O+(L-D)/2))}}function i(o,_){for(var s=_.traces,k=d(o),M=0;M<s.length;M++)for(var A=s[M],E=A[0].t,I=E.poffset,C=Array.isArray(I),R=E.barwidth,O=Array.isArray(R),D=0;D<A.length;D++){var L=A[D],B=L.w=O?R[D]:R;L[k]=L.p+(C?I[D]:I)+B/2}}function c(o,_,s){var k=_.traces,M=_.minDiff/2;e.minDtick(o,_.minDiff,_.distinctPositions[0],s);for(var A=0;A<k.length;A++){var E,I,C,R,O=k[A],D=O[0],L=D.trace,B=[];for(R=0;R<O.length;R++)I=(E=O[R]).p-M,B.push(I,C=E.p+M);if(L.width||L.offset){var j=D.t,W=j.poffset,Y=j.barwidth,Q=Array.isArray(W),ne=Array.isArray(Y);for(R=0;R<O.length;R++)C=(I=(E=O[R]).p+(Q?W[R]:W))+(ne?Y[R]:Y),B.push(I,C)}L._extremes[o._id]=e.findExtremes(o,B,{padded:!1})}}function f(o,_){for(var s=_.traces,k=d(o),M=0;M<s.length;M++){for(var A=s[M],E=A[0].trace,I=[],C=!1,R=0;R<A.length;R++){var O=A[R],D=O.b,L=D+O.s;O[k]=L,I.push(L),O.hasB&&I.push(D),O.hasB&&O.b||(C=!0)}E._extremes[o._id]=e.findExtremes(o,I,{tozero:C,padded:!0})}}function l(o){for(var _=o.traces,s=0;s<_.length;s++)for(var k=_[s],M=0;M<k.length;M++){var A=k[M];A.s!==w&&o.put(A.p,A.b+A.s)}}function h(o,_,s){var k=_.traces,M=d(o),A="fraction"===s.norm?1:100,E=A/1e9,I=o.l2c(o.c2l(0)),C="stack"===s.mode?A:I;function R(re){return g(o.c2l(re))&&(re<I-E||re>C+E||!g(I))}for(var O=0;O<k.length;O++){for(var D=k[O],L=D[0].trace,B=[],j=!1,W=!1,Y=0;Y<D.length;Y++){var Q=D[Y];if(Q.s!==w){var ne=Math.abs(A/_.get(Q.p,Q.s));Q.b*=ne,Q.s*=ne;var X=Q.b,$=X+Q.s;Q[M]=$,B.push($),W=W||R($),Q.hasB&&(B.push(X),W=W||R(X)),Q.hasB&&Q.b||(j=!0)}}L._extremes[o._id]=e.findExtremes(o,B,{tozero:j,padded:W})}}function d(o){return o._id.charAt(0)}oe.exports={crossTraceCalc:function(o,_){for(var s=_.xaxis,k=_.yaxis,M=o._fullLayout,A=o._fullData,E=o.calcdata,I=[],C=[],R=0;R<A.length;R++){var O=A[R];if(!0===O.visible&&y.traceIs(O,"bar")&&O.xaxis===s._id&&O.yaxis===k._id&&("h"===O.orientation?I.push(E[R]):C.push(E[R]),O._computePh))for(var D=o.calcdata[R],L=0;L<D.length;L++)"function"==typeof D[L].ph0&&(D[L].ph0=D[L].ph0()),"function"==typeof D[L].ph1&&(D[L].ph1=D[L].ph1())}var B={xCat:"category"===s.type||"multicategory"===s.type,yCat:"category"===k.type||"multicategory"===k.type,mode:M.barmode,norm:M.barnorm,gap:M.bargap,groupgap:M.bargroupgap};a(o,s,k,C,B),a(o,k,s,I,B)},setGroupPositions:a}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/color"),w=x("../../registry"),y=x("../scatter/xy_defaults"),e=x("../scatter/period_defaults"),r=x("./style_defaults"),n=x("../../plots/cartesian/constraints").getAxisGroup,a=x("./attributes"),t=g.coerceFont;function p(i,c,f,l){var h=c.orientation,o=n(f,c[{v:"x",h:"y"}[h]+"axis"])+h,_=f._alignmentOpts||{},s=l("alignmentgroup"),k=_[o];k||(k=_[o]={});var M=k[s];M?M.traces.push(c):M=k[s]={traces:[c],alignmentIndex:Object.keys(k).length,offsetGroups:{}};var A=l("offsetgroup"),E=M.offsetGroups,I=E[A];A&&(I||(I=E[A]={offsetIndex:Object.keys(E).length}),c._offsetIndex=I.offsetIndex)}function u(i,c,f,l,h,d){var o=!1!==(d=d||{}).moduleHasSelected,_=!1!==d.moduleHasUnselected,s=!1!==d.moduleHasConstrain,k=!1!==d.moduleHasCliponaxis,M=!1!==d.moduleHasTextangle,A=!1!==d.moduleHasInsideanchor,E=!!d.hasPathbar,I=Array.isArray(h)||"auto"===h,C=I||"inside"===h,R=I||"outside"===h;if(C||R){var O=t(l,"textfont",f.font),D=g.extendFlat({},O),L=!(i.textfont&&i.textfont.color);if(L&&delete D.color,t(l,"insidetextfont",D),E){var B=g.extendFlat({},O);L&&delete B.color,t(l,"pathbar.textfont",B)}R&&t(l,"outsidetextfont",O),o&&l("selected.textfont.color"),_&&l("unselected.textfont.color"),s&&l("constraintext"),k&&l("cliponaxis"),M&&l("textangle"),l("texttemplate")}C&&A&&l("insidetextanchor")}oe.exports={supplyDefaults:function(i,c,f,l){function h(s,k){return g.coerce(i,c,a,s,k)}if(y(i,c,l,h)){e(i,c,l,h),h("xhoverformat"),h("yhoverformat"),h("orientation",c.x&&!c.y?"h":"v"),h("base"),h("offset"),h("width"),h("text"),h("hovertext"),h("hovertemplate");var d=h("textposition");u(i,0,l,h,d,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),r(i,c,h,f,l);var o=(c.marker.line||{}).color,_=w.getComponentMethod("errorbars","supplyDefaults");_(i,c,o||m.defaultLine,{axis:"y"}),_(i,c,o||m.defaultLine,{axis:"x",inherit:"y"}),g.coerceSelectionMarkerOpacity(c,h)}else c.visible=!1},crossTraceDefaults:function(i,c){var f;function l(d){return g.coerce(f._input,f,a,d)}if("group"===c.barmode)for(var h=0;h<i.length;h++)"bar"===(f=i[h]).type&&p(0,f,c,l)},handleGroupingDefaults:p,handleText:u}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":648,"./style_defaults":663}],653:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w){return g.x="xVal"in m?m.xVal:m.x,g.y="yVal"in m?m.yVal:m.y,m.xa&&(g.xaxis=m.xa),m.ya&&(g.yaxis=m.ya),"h"===w.orientation?(g.label=g.y,g.value=g.x):(g.label=g.x,g.value=g.y),g}},{}],654:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("tinycolor2"),w=x("../../lib").isArrayOrTypedArray;ae.coerceString=function(y,e,r){if("string"==typeof e){if(e||!y.noBlank)return e}else if(("number"==typeof e||!0===e)&&!y.strict)return String(e);return void 0!==r?r:y.dflt},ae.coerceNumber=function(y,e,r){if(g(e)){e=+e;var n=y.min,a=y.max;if(!(void 0!==n&&e<n||void 0!==a&&e>a))return e}return void 0!==r?r:y.dflt},ae.coerceColor=function(y,e,r){return m(e).isValid()?e:void 0!==r?r:y.dflt},ae.coerceEnumerated=function(y,e,r){return y.coerceNumber&&(e=+e),-1!==y.values.indexOf(e)?e:void 0!==r?r:y.dflt},ae.getValue=function(y,e){var r;return Array.isArray(y)?e<y.length&&(r=y[e]):r=y,r},ae.getLineWidth=function(y,e){return 0<e.mlw?e.mlw:w(y.marker.line.width)?0:y.marker.line.width}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(x,oe,ae){"use strict";var g=x("../../components/fx"),m=x("../../registry"),w=x("../../components/color"),y=x("../../lib").fillText,e=x("./helpers").getLineWidth,r=x("../../plots/cartesian/axes").hoverLabelText,n=x("../../constants/numerical").BADNUM;function a(p,u,i,c,f){var l,h,d,o,_,s,k,M=p.cd,A=M[0].trace,E=M[0].t,I="closest"===c,C="waterfall"===A.type,R=p.maxHoverDistance,O=p.maxSpikeDistance;"h"===A.orientation?(l=i,h=u,d="y",o="x",_=H,s=$):(l=u,h=i,d="x",o="y",s=H,_=$);var D=A[d+"period"],L=I||D;function B(ue){return W(ue,-1)}function j(ue){return W(ue,1)}function W(ue,de){return ue[d]+de*ue.w/2}function Y(ue){return ue[d+"End"]-ue[d+"Start"]}var Q=I?B:D?function(ue){return ue.p-Y(ue)/2}:function(ue){return Math.min(B(ue),ue.p-E.bardelta/2)},ne=I?j:D?function(ue){return ue.p+Y(ue)/2}:function(ue){return Math.max(j(ue),ue.p+E.bardelta/2)};function X(ue,de,he){return f.finiteRange&&(he=0),g.inbox(ue-l,de-l,he+Math.min(1,Math.abs(de-ue)/k)-1)}function $(ue){return X(Q(ue),ne(ue),R)}function re(ue){var de=ue[o];if(C){var he=Math.abs(ue.rawS)||0;h>0?de+=he:h<0&&(de-=he)}return de}function H(ue){var de=h,he=ue.b,xe=re(ue);return g.inbox(he-de,xe-de,R+(xe-de)/(xe-he)-1)}var U=p[d+"a"],G=p[o+"a"];k=Math.abs(U.r2c(U.range[1])-U.r2c(U.range[0]));var ue,de,he,xe,ie=g.getDistanceFunction(c,_,s,function(ue){return(_(ue)+s(ue))/2});if(g.getClosest(M,ie,p),!1!==p.index&&M[p.index].p!==n){L||(Q=function(ue){return Math.min(B(ue),ue.p-E.bargroupwidth/2)},ne=function(ue){return Math.max(j(ue),ue.p+E.bargroupwidth/2)});var q=M[p.index],ee=A.base?q.b+q.s:q.s;p[o+"0"]=p[o+"1"]=G.c2p(q[o],!0),p[o+"LabelVal"]=ee;var te=E.extents[E.extents.round(q.p)];return p[d+"0"]=U.c2p(I?Q(q):te[0],!0),p[d+"1"]=U.c2p(I?ne(q):te[1],!0),p[d+"LabelVal"]=void 0!==q.orig_p?q.orig_p:q.p,p.labelLabel=r(U,p[d+"LabelVal"],A[d+"hoverformat"]),p.valueLabel=r(G,p[o+"LabelVal"],A[o+"hoverformat"]),p.baseLabel=r(G,q.b,A[o+"hoverformat"]),p.spikeDistance=(de=h,he=(ue=q).b,xe=re(ue),(g.inbox(he-de,xe-de,O+(xe-de)/(xe-he)-1)+function(ue){return X(B(ue),j(ue),O)}(q))/2),p[d+"Spike"]=U.c2p(q.p,!0),y(q,A,p),p.hovertemplate=A.hovertemplate,p}}function t(p,u){var i=u.mcc||p.marker.color,c=u.mlcc||p.marker.line.color,f=e(p,u);return w.opacity(i)?i:w.opacity(c)&&f?c:void 0}oe.exports={hoverPoints:function(p,u,i,c,f){var l=a(p,u,i,c,f);if(l){var h=l.cd,d=h[0].trace,o=h[l.index];return l.color=t(d,o),m.getComponentMethod("errorbars","hoverInfo")(o,d,l),[l]}},hoverOnBars:a,getTraceColor:t}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults").supplyDefaults,crossTraceDefaults:x("./defaults").crossTraceDefaults,supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc"),crossTraceCalc:x("./cross_trace_calc").crossTraceCalc,colorbar:x("../scatter/marker_colorbar"),arraysToCalcdata:x("./arrays_to_calcdata"),plot:x("./plot").plot,style:x("./style").style,styleOnSelect:x("./style").styleOnSelect,hoverPoints:x("./hover").hoverPoints,eventData:x("./event_data"),selectPoints:x("./select"),moduleType:"trace",name:"bar",basePlotModule:x("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":945,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(x,oe,ae){"use strict";oe.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../plots/cartesian/axes"),w=x("../../lib"),y=x("./layout_attributes");oe.exports=function(e,r,n){function a(d,o){return w.coerce(e,r,y,d,o)}for(var t=!1,p=!1,u=!1,i={},c=a("barmode"),f=0;f<n.length;f++){var l=n[f];if(g.traceIs(l,"bar")&&l.visible){if(t=!0,"group"===c){var h=l.xaxis+l.yaxis;i[h]&&(u=!0),i[h]=!0}l.visible&&"histogram"===l.type&&"category"!==m.getFromId({_fullLayout:r},l["v"===l.orientation?"xaxis":"yaxis"]).type&&(p=!0)}}t?("overlay"!==c&&a("barnorm"),a("bargap",p&&!u?0:.2),a("bargroupgap")):delete r.barmode}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("fast-isnumeric"),w=x("../../lib"),y=x("../../lib/svg_text_utils"),e=x("../../components/color"),r=x("../../components/drawing"),n=x("../../registry"),a=x("../../plots/cartesian/axes").tickText,t=x("./uniform_text"),p=t.recordMinTextSize,u=t.clearMinTextSize,i=x("./style"),c=x("./helpers"),f=x("./constants"),l=x("./attributes"),h=l.text,d=l.textposition,o=x("../../components/fx/helpers").appendArrayPointValue,_=f.TEXTPAD;function s(O){return O.id}function M(O,D){return O<D?1:-1}function A(O,D,L,B){var j;return!D.uniformtext.mode&&E(L)?(B&&(j=B()),O.transition().duration(L.duration).ease(L.easing).each("end",function(){j&&j()}).each("interrupt",function(){j&&j()})):O}function E(O){return O&&O.duration>0}function I(O){return"auto"===O?0:O}function C(O,D){var L=Math.PI/180*D,B=Math.abs(Math.sin(L)),j=Math.abs(Math.cos(L));return{x:O.width*j+O.height*B,y:O.width*B+O.height*j}}function R(O,D,L,B,j,W){var Y=!!W.isHorizontal,Q=!!W.constrained,ne=W.angle||0,X=W.anchor||"end",$="end"===X,re="start"===X,H=((W.leftToRight||0)+1)/2,U=1-H,G=j.width,ie=j.height,q=Math.abs(D-O),ee=Math.abs(B-L),te=q>2*_&&ee>2*_?_:0;q-=2*te,ee-=2*te;var se=I(ne);"auto"!==ne||G<=q&&ie<=ee||!(G>q||ie>ee)||(G>ee||ie>q)&&G<ie==q<ee||(se+=90);var ue=C(j,se),de=1;Q&&(de=Math.min(1,q/ue.x,ee/ue.y));var he=j.left*U+j.right*H,xe=(j.top+j.bottom)/2,ge=(O+_)*U+(D-_)*H,_e=(L+B)/2,Ce=0,Le=0;if(re||$){var Ie=(Y?ue.x:ue.y)/2,Be=Y?M(O,D):M(L,B);Y?re?(ge=O+Be*te,Ce=-Be*Ie):(ge=D-Be*te,Ce=Be*Ie):re?(_e=L+Be*te,Le=-Be*Ie):(_e=B-Be*te,Le=Be*Ie)}return{textX:he,textY:xe,targetX:ge,targetY:_e,anchorX:Ce,anchorY:Le,scale:de,rotate:se}}oe.exports={plot:function(O,D,L,B,j,W){var Y=D.xaxis,Q=D.yaxis,ne=O._fullLayout;j||(j={mode:ne.barmode,norm:ne.barmode,gap:ne.bargap,groupgap:ne.bargroupgap},u("bar",ne));var X=w.makeTraceGroups(B,L,"trace bars").each(function($){var re=g.select(this),H=$[0].trace,ie="bar"===H.type||"funnel"===H.type,q=0;"waterfall"===H.type&&H.connector.visible&&"between"===H.connector.mode&&(q=H.connector.line.width/2);var ee="h"===H.orientation,te=E(j),se=w.ensureSingle(re,"g","points"),ue=function k(O){if(O.ids)return s}(H),de=se.selectAll("g.point").data(w.identity,ue);de.enter().append("g").classed("point",!0),de.exit().remove(),de.each(function(xe,ge){var _e,Ce,Ve,$e,Qe,tt,ut,xt,kt,Bt,Le=g.select(this),Ie=($e=Y,Qe=Q,xt=[],Bt=(tt=ee)?Qe:$e,(ut=[])[0]=(kt=tt?$e:Qe).c2p((Ve=xe).s0,!0),xt[0]=Bt.c2p(Ve.p0,!0),ut[1]=kt.c2p(Ve.s1,!0),xt[1]=Bt.c2p(Ve.p1,!0),tt?[ut,xt]:[xt,ut]),Be=Ie[0][0],ve=Ie[0][1],Te=Ie[1][0],Pe=Ie[1][1],De=0==(ee?ve-Be:Pe-Te);if(De&&ie&&c.getLineWidth(H,xe)&&(De=!1),De||(De=!(m(Be)&&m(ve)&&m(Te)&&m(Pe))),xe.isBlank=De,De&&(ee?ve=Be:Pe=Te),q&&!De&&(ee?(Be-=M(Be,ve)*q,ve+=M(Be,ve)*q):(Te-=M(Te,Pe)*q,Pe+=M(Te,Pe)*q)),"waterfall"===H.type){if(!De){var Fe=H[xe.dir].marker;_e=Fe.line.width,Ce=Fe.color}}else _e=c.getLineWidth(H,xe),Ce=xe.mc||H.marker.color;function Ue(Ve){var $e=g.round(_e/2%1,2);return 0===j.gap&&0===j.groupgap?g.round(Math.round(Ve)-$e,2):Ve}if(!O._context.staticPlot){var He=e.opacity(Ce)<1||_e>.01?Ue:function(Ve,$e,Qe){return Qe&&Ve===$e?Ve:Math.abs(Ve-$e)>=2?Ue(Ve):Ve>$e?Math.ceil(Ve):Math.floor(Ve)};Be=He(Be,ve,ee),ve=He(ve,Be,ee),Te=He(Te,Pe,!ee),Pe=He(Pe,Te,!ee)}var Ke=A(w.ensureSingle(Le,"path"),ne,j,W);if(Ke.style("vector-effect","non-scaling-stroke").attr("d",isNaN((ve-Be)*(Pe-Te))||De&&O._context.staticPlot?"M0,0Z":"M"+Be+","+Te+"V"+Pe+"H"+ve+"V"+Te+"Z").call(r.setClipUrl,D.layerClipId,O),!ne.uniformtext.mode&&te){var st=r.makePointStyleFns(H);r.singlePointStyle(xe,Ke,H,st,O)}(function(Ve,$e,Qe,tt,ut,xt,kt,Bt,Rt,ft,lt){var Ft,Jt=$e.xaxis,ln=$e.yaxis,dn=Ve._fullLayout;function cn(un,Qt,kn){return w.ensureSingle(un,"text").text(Qt).attr({class:"bartext bartext-"+Ft,"text-anchor":"middle","data-notex":1}).call(r.font,kn).call(y.convertToTspans,Ve)}var Qt,kn,qn,gn,sn,vn,Tn=tt[0].trace,nn="h"===Tn.orientation,Me=(kn=ut,qn=Jt,gn=ln,sn=(vn=(Qt=tt)[0].trace).texttemplate?function(pn,Mn,Rn,Xn,Hn){var rr=Mn[0].trace,er=w.castOption(rr,Rn,"texttemplate");if(!er)return"";var Ir,Or,ni,Br,Dr="histogram"===rr.type,Rr="waterfall"===rr.type,yi="funnel"===rr.type,$n="h"===rr.orientation;function Mr(vr){return a(Br,Br.c2l(vr),!0).text}$n?(Ir="y",Or=Hn,ni="x",Br=Xn):(Ir="x",Or=Xn,ni="y",Br=Hn);var br=Mn[Rn],ar={};ar.label=br.p,ar.labelLabel=ar[Ir+"Label"]=a(Or,Or.c2l(br.p),!0).text;var ri=w.castOption(rr,br.i,"text");(0===ri||ri)&&(ar.text=ri),ar.value=br.s,ar.valueLabel=ar[ni+"Label"]=Mr(br.s);var Cr={};o(Cr,rr,br.i),(Dr||void 0===Cr.x)&&(Cr.x=$n?ar.value:ar.label),(Dr||void 0===Cr.y)&&(Cr.y=$n?ar.label:ar.value),(Dr||void 0===Cr.xLabel)&&(Cr.xLabel=$n?ar.valueLabel:ar.labelLabel),(Dr||void 0===Cr.yLabel)&&(Cr.yLabel=$n?ar.labelLabel:ar.valueLabel),Rr&&(ar.delta=+br.rawS||br.s,ar.deltaLabel=Mr(ar.delta),ar.final=br.v,ar.finalLabel=Mr(ar.final),ar.initial=ar.final-ar.delta,ar.initialLabel=Mr(ar.initial)),yi&&(ar.value=br.s,ar.valueLabel=Mr(ar.value),ar.percentInitial=br.begR,ar.percentInitialLabel=w.formatPercent(br.begR),ar.percentPrevious=br.difR,ar.percentPreviousLabel=w.formatPercent(br.difR),ar.percentTotal=br.sumR,ar.percenTotalLabel=w.formatPercent(br.sumR));var Pr=w.castOption(rr,br.i,"customdata");return Pr&&(ar.customdata=Pr),w.texttemplateString(er,ar,pn._d3locale,Cr,ar,rr._meta||{})}(dn,Qt,kn,qn,gn):vn.textinfo?function(pn,Mn,Rn,Xn){var Hn=pn[0].trace,rr="h"===Hn.orientation,er="waterfall"===Hn.type,Ir="funnel"===Hn.type;function Or(Pr){return a(rr?Rn:Xn,+Pr,!0).text}var ni,Dr=pn[Mn],Rr=Hn.textinfo.split("+"),yi=[],$n=function(Pr){return-1!==Rr.indexOf(Pr)};if($n("label")&&yi.push(a(rr?Xn:Rn,pn[Mn].p,!0).text),$n("text")&&(0===(ni=w.castOption(Hn,Dr.i,"text"))||ni)&&yi.push(ni),er){var br=+Dr.rawS||Dr.s,ar=Dr.v,si=ar-br;$n("initial")&&yi.push(Or(si)),$n("delta")&&yi.push(Or(br)),$n("final")&&yi.push(Or(ar))}if(Ir){$n("value")&&yi.push(Or(Dr.s));var ri=0;$n("percent initial")&&ri++,$n("percent previous")&&ri++,$n("percent total")&&ri++;var Cr=ri>1;$n("percent initial")&&(ni=w.formatPercent(Dr.begR),Cr&&(ni+=" of initial"),yi.push(ni)),$n("percent previous")&&(ni=w.formatPercent(Dr.difR),Cr&&(ni+=" of previous"),yi.push(ni)),$n("percent total")&&(ni=w.formatPercent(Dr.sumR),Cr&&(ni+=" of total"),yi.push(ni))}return yi.join("<br>")}(Qt,kn,qn,gn):c.getValue(vn.text,kn),c.coerceString(h,sn));Ft=function(un,Qt){var kn=c.getValue(un.textposition,Qt);return c.coerceEnumerated(d,kn)}(Tn,ut);var Se=tt[ut],je=!("stack"===ft.mode||"relative"===ft.mode)||Se._outmost;if(Me&&"none"!==Ft&&(!Se.isBlank&&xt!==kt&&Bt!==Rt||"auto"!==Ft&&"inside"!==Ft)){var qe=dn.font,Je=i.getBarColor(tt[ut],Tn),at=i.getInsideTextFont(Tn,ut,qe,Je),it=i.getOutsideTextFont(Tn,ut,qe),yt=Qe.datum();nn?"log"===Jt.type&&yt.s0<=0&&(xt=Jt.range[0]<Jt.range[1]?0:Jt._length):"log"===ln.type&&yt.s0<=0&&(Bt=ln.range[0]<ln.range[1]?ln._length:0);var vt,Ut,Wt,gt,At,Zt=Math.abs(kt-xt)-2*_,Et=Math.abs(Rt-Bt)-2*_;if("outside"===Ft&&(je||Se.hasB||(Ft="inside")),"auto"===Ft&&(je?(Ft="inside",vt=cn(Qe,Me,At=w.ensureUniformFontSize(Ve,at)),gt=(Ut=r.bBox(vt.node())).height,(Wt=Ut.width)>0&&gt>0&&(Wt<=Zt&&gt<=Et||Wt<=Et&&gt<=Zt||(nn?Zt>=Wt*(Et/gt):Et>=gt*(Zt/Wt)))?Ft="inside":(Ft="outside",vt.remove(),vt=null)):Ft="inside"),!vt){var dt=(vt=cn(Qe,Me,At=w.ensureUniformFontSize(Ve,"outside"===Ft?it:at))).attr("transform");if(vt.attr("transform",""),Wt=(Ut=r.bBox(vt.node())).width,gt=Ut.height,vt.attr("transform",dt),Wt<=0||gt<=0)return void vt.remove()}var Mt,Xt=Tn.textangle;Mt="outside"===Ft?function(un,Qt,kn,qn,gn,sn){var vn,pn=!!sn.isHorizontal,Mn=!!sn.constrained,Rn=sn.angle||0,Xn=gn.width,Hn=gn.height,rr=Math.abs(Qt-un),er=Math.abs(qn-kn);vn=pn?er>2*_?_:0:rr>2*_?_:0;var Ir=1;Mn&&(Ir=pn?Math.min(1,er/Hn):Math.min(1,rr/Xn));var Or=I(Rn),ni=C(gn,Or),Br=(pn?ni.x:ni.y)/2,Dr=(gn.left+gn.right)/2,Rr=(gn.top+gn.bottom)/2,yi=(un+Qt)/2,$n=(kn+qn)/2,Mr=0,br=0,ar=pn?M(Qt,un):M(kn,qn);return pn?(yi=Qt-ar*vn,Mr=ar*Br):($n=qn+ar*vn,br=-ar*Br),{textX:Dr,textY:Rr,targetX:yi,targetY:$n,anchorX:Mr,anchorY:br,scale:Ir,rotate:Or}}(xt,kt,Bt,Rt,Ut,{isHorizontal:nn,constrained:"both"===Tn.constraintext||"outside"===Tn.constraintext,angle:Xt}):R(xt,kt,Bt,Rt,Ut,{isHorizontal:nn,constrained:"both"===Tn.constraintext||"inside"===Tn.constraintext,angle:Xt,anchor:Tn.insidetextanchor}),Mt.fontSize=At.size,p("histogram"===Tn.type?"bar":Tn.type,Mt,dn),Se.transform=Mt,A(vt,dn,ft,lt).attr("transform",w.getTextTransform(Mt))}else Qe.select("text").remove()})(O,D,Le,$,ge,Be,ve,Te,Pe,j,W),D.layerClipId&&r.hideOutsideRangePoint(xe,Le.select("text"),Y,Q,H.xcalendar,H.ycalendar)}),r.setClipUrl(re,!1===H.cliponaxis?null:D.layerClipId,O)});n.getComponentMethod("errorbars","plot")(O,X,D,j)},toMoveInsideBar:R}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(x,oe,ae){"use strict";function g(m,w,y,e,r){var n=w.c2p(e?m.s0:m.p0,!0),a=w.c2p(e?m.s1:m.p1,!0),t=y.c2p(e?m.p0:m.s0,!0),p=y.c2p(e?m.p1:m.s1,!0);return r?[(n+a)/2,(t+p)/2]:e?[a,(t+p)/2]:[(n+a)/2,p]}oe.exports=function(m,w){var y,e=m.cd,r=m.xaxis,n=m.yaxis,a=e[0].trace,t="funnel"===a.type,p="h"===a.orientation,u=[];if(!1===w)for(y=0;y<e.length;y++)e[y].selected=0;else for(y=0;y<e.length;y++){var i=e[y],c="ct"in i?i.ct:g(i,r,n,p,t);w.contains(c,!1,y,m)?(u.push({pointNumber:y,x:r.c2d(i.x),y:n.c2d(i.y)}),i.selected=1):i.selected=0}return u}},{}],661:[function(x,oe,ae){"use strict";oe.exports=w;var g=x("../../lib").distinctVals,m=x("../../constants/numerical").BADNUM;function w(y,e){this.traces=y,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var r=1/0,n=[],a=0;a<y.length;a++){for(var t=y[a],p=0;p<t.length;p++){var u=t[p];u.p!==m&&n.push(u.p)}t[0]&&t[0].width1&&(r=Math.min(t[0].width1,r))}this.positions=n;var i=g(n);this.distinctPositions=i.vals,this.minDiff=1===i.vals.length&&r!==1/0?r:Math.min(i.minDiff,r);var c=(e.posAxis||{}).type;"category"!==c&&"multicategory"!==c||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}w.prototype.put=function(y,e){var r=this.getLabel(y,e),n=this.bins[r]||0;return this.bins[r]=n+e,n},w.prototype.get=function(y,e){var r=this.getLabel(y,e);return this.bins[r]||0},w.prototype.getLabel=function(y,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?y:Math.round(y/this.binWidth))}},{"../../constants/numerical":479,"../../lib":503}],662:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/color"),w=x("../../components/drawing"),y=x("../../lib"),e=x("../../registry"),r=x("./uniform_text").resizeText,n=x("./attributes"),a=n.textfont,t=n.insidetextfont,p=n.outsidetextfont,u=x("./helpers");function i(s,k,M){w.pointStyle(s.selectAll("path"),k,M),c(s,k,M)}function c(s,k,M){s.selectAll("text").each(function(A){var E=g.select(this),I=y.ensureUniformFontSize(M,f(E,A,k,M));w.font(E,I)})}function f(s,k,M,A){var E=A._fullLayout.font,I=M.textfont;if(s.classed("bartext-inside")){var C=_(k,M);I=h(M,k.i,E,C)}else s.classed("bartext-outside")&&(I=d(M,k.i,E));return I}function l(s,k,M){return o(a,s.textfont,k,M)}function h(s,k,M,A){var E=l(s,k,M);return(void 0===s._input.textfont||void 0===s._input.textfont.color||Array.isArray(s.textfont.color)&&void 0===s.textfont.color[k])&&(E={color:m.contrast(A),family:E.family,size:E.size}),o(t,s.insidetextfont,k,E)}function d(s,k,M){var A=l(s,k,M);return o(p,s.outsidetextfont,k,A)}function o(s,k,M,A){var E=u.getValue((k=k||{}).family,M),I=u.getValue(k.size,M),C=u.getValue(k.color,M);return{family:u.coerceString(s.family,E,A.family),size:u.coerceNumber(s.size,I,A.size),color:u.coerceColor(s.color,C,A.color)}}function _(s,k){return"waterfall"===k.type?k[s.dir].marker.color:s.mcc||s.mc||k.marker.color}oe.exports={style:function(s){var k=g.select(s).selectAll("g.barlayer").selectAll("g.trace");r(s,k,"bar");var M=k.size(),A=s._fullLayout;k.style("opacity",function(E){return E[0].trace.opacity}).each(function(E){("stack"===A.barmode&&M>1||0===A.bargap&&0===A.bargroupgap&&!E[0].trace.marker.line.width)&&g.select(this).attr("shape-rendering","crispEdges")}),k.selectAll("g.points").each(function(E){i(g.select(this),E[0].trace,s)}),e.getComponentMethod("errorbars","style")(k)},styleTextPoints:c,styleOnSelect:function(s,k,M){var E,I,C,R,O,D,A=k[0].trace;A.selectedpoints?(I=A,C=s,w.selectedPointStyle((E=M).selectAll("path"),I),R=E.selectAll("text"),O=I,D=C,R.each(function(L){var B,j=g.select(this);if(L.selected){B=y.ensureUniformFontSize(D,f(j,L,O,D));var W=O.selected.textfont&&O.selected.textfont.color;W&&(B.color=W),w.font(j,B)}else w.selectedTextStyle(j,O)})):(i(M,A,s),e.getComponentMethod("errorbars","style")(M))},getInsideTextFont:h,getOutsideTextFont:d,getBarColor:_,resizeText:r}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(x,oe,ae){"use strict";var g=x("../../components/color"),m=x("../../components/colorscale/helpers").hasColorscale,w=x("../../components/colorscale/defaults"),y=x("../../lib").coercePattern;oe.exports=function(e,r,n,a,t){var p=n("marker.color",a),u=m(e,"marker");u&&w(e,r,t,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",g.defaultLine),m(e,"marker.line")&&w(e,r,t,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),y(n,"marker.pattern",p,u),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib");function w(y){return"_"+y+"Text_minsize"}oe.exports={recordMinTextSize:function(y,e,r){if(r.uniformtext.mode){var n=w(y),a=r.uniformtext.minsize,t=e.scale*e.fontSize;e.hide=t<a,r[n]=r[n]||1/0,e.hide||(r[n]=Math.min(r[n],Math.max(t,a)))}},clearMinTextSize:function(y,e){e[w(y)]=void 0},resizeText:function(y,e,r){var n=y._fullLayout,a=n["_"+r+"Text_minsize"];if(a){var t,p="hide"===n.uniformtext.mode;switch(r){case"funnelarea":case"pie":case"sunburst":t="g.slice";break;case"treemap":case"icicle":t="g.slice, g.pathbar";break;default:t="g.points > g.point"}e.selectAll(t).each(function(u){var i=u.transform;i&&(i.scale=p&&i.hide?0:a/i.fontSize,g.select(this).select("text").attr("transform",m.getTextTransform(i)))})}}}},{"../../lib":503,"@plotly/d3":58}],665:[function(x,oe,ae){"use strict";var g=x("../../plots/template_attributes").hovertemplateAttrs,m=x("../../lib/extend").extendFlat,w=x("../scatterpolar/attributes"),y=x("../bar/attributes");oe.exports={r:w.r,theta:w.theta,r0:w.r0,dr:w.dr,theta0:w.theta0,dtheta:w.dtheta,thetaunit:w.thetaunit,base:m({},y.base,{}),offset:m({},y.offset,{}),width:m({},y.width,{}),text:m({},y.text,{}),hovertext:m({},y.hovertext,{}),marker:y.marker,hoverinfo:w.hoverinfo,hovertemplate:g(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1002}],666:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale/helpers").hasColorscale,m=x("../../components/colorscale/calc"),w=x("../bar/arrays_to_calcdata"),y=x("../bar/cross_trace_calc").setGroupPositions,e=x("../scatter/calc_selection"),r=x("../../registry").traceIs,n=x("../../lib").extendFlat;oe.exports={calc:function(a,t){for(var p=a._fullLayout,u=t.subplot,c=p[u].angularaxis,f=p[u].radialaxis.makeCalcdata(t,"r"),l=c.makeCalcdata(t,"theta"),h=t._length,d=new Array(h),o=f,_=l,s=0;s<h;s++)d[s]={p:_[s],s:o[s]};function k(M){var A=t[M];void 0!==A&&(t["_"+M]=Array.isArray(A)?c.makeCalcdata(t,M):c.d2c(A,t.thetaunit))}return"linear"===c.type&&(k("width"),k("offset")),g(t,"marker")&&m(a,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),g(t,"marker.line")&&m(a,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),w(d,t),e(d,t),d},crossTraceCalc:function(a,t,p){for(var u=a.calcdata,i=[],c=0;c<u.length;c++){var f=u[c],l=f[0].trace;!0===l.visible&&r(l,"bar")&&l.subplot===p&&i.push(f)}var h=n({},t.radialaxis,{_id:"x"});y(a,t.angularaxis,h,i,{mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap})}}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":929}],667:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../scatterpolar/defaults").handleRThetaDefaults,w=x("../bar/style_defaults"),y=x("./attributes");oe.exports=function(e,r,n,a){function t(p,u){return g.coerce(e,r,y,p,u)}m(e,r,a,t)?(t("thetaunit"),t("base"),t("offset"),t("width"),t("text"),t("hovertext"),t("hovertemplate"),w(e,r,t,n,a),g.coerceSelectionMarkerOpacity(r,t)):r.visible=!1}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1004,"./attributes":665}],668:[function(x,oe,ae){"use strict";var g=x("../../components/fx"),m=x("../../lib"),w=x("../bar/hover").getTraceColor,y=m.fillText,e=x("../scatterpolar/hover").makeHoverPointText,r=x("../../plots/polar/helpers").isPtInsidePolygon;oe.exports=function(n,a,t){var p=n.cd,u=p[0].trace,i=n.subplot,c=i.radialAxis,l=i.vangles,h=l?r:m.isPtInsideSector,d=n.maxHoverDistance,o=i.angularAxis._period||2*Math.PI,_=Math.abs(c.g2p(Math.sqrt(a*a+t*t))),s=Math.atan2(t,a);if(c.range[0]>c.range[1]&&(s+=Math.PI),g.getClosest(p,function(A){return h(_,s,[A.rp0,A.rp1],[A.thetag0,A.thetag1],l)?d+Math.min(1,Math.abs(A.thetag1-A.thetag0)/o)-1+(A.rp1-_)/(A.rp1-A.rp0)-1:1/0},n),!1!==n.index){var k=p[n.index];n.x0=n.x1=k.ct[0],n.y0=n.y1=k.ct[1];var M=m.extendFlat({},k,{r:k.s,theta:k.p});return y(k,u,n),e(M,u,i,n),n.hovertemplate=u.hovertemplate,n.color=w(u,k),n.xLabelVal=n.yLabelVal=void 0,k.s<0&&(n.idealAlign="left"),[n]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1006}],669:[function(x,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"barpolar",basePlotModule:x("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("../scatterpolar/format_labels"),style:x("../bar/style").style,styleOnSelect:x("../bar/style").styleOnSelect,hoverPoints:x("./hover"),selectPoints:x("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":945,"../scatterpolar/format_labels":1005,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(x,oe,ae){"use strict";oe.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./layout_attributes");oe.exports=function(w,y,e){var r,n={};function a(u,i){return g.coerce(w[r]||{},y[r],m,u,i)}for(var t=0;t<e.length;t++){var p=e[t];"barpolar"===p.type&&!0===p.visible&&(n[r=p.subplot]||(a("barmode"),a("bargap"),n[r]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("fast-isnumeric"),w=x("../../lib"),y=x("../../components/drawing"),e=x("../../plots/polar/helpers");oe.exports=function(r,n,a){var l,h,d,t=n.xaxis,p=n.yaxis,u=n.radialAxis,i=n.angularAxis,c=(h=(l=n).cxx,d=l.cyy,l.vangles?function(o,_,s,k){var M,A;w.angleDelta(s,k)>0?(M=s,A=k):(M=k,A=s);var E=[e.findEnclosingVertexAngles(M,l.vangles)[0],(M+A)/2,e.findEnclosingVertexAngles(A,l.vangles)[1]];return e.pathPolygonAnnulus(o,_,M,A,E,h,d)}:function(o,_,s,k){return w.pathAnnulus(o,_,s,k,h,d)}),f=n.layers.frontplot.select("g.barlayer");w.makeTraceGroups(f,a,"trace bars").each(function(){var l=g.select(this),h=w.ensureSingle(l,"g","points").selectAll("g.point").data(w.identity);h.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),h.exit().remove(),h.each(function(d){var o,_=g.select(this),s=d.rp0=u.c2p(d.s0),k=d.rp1=u.c2p(d.s1),M=d.thetag0=i.c2g(d.p0),A=d.thetag1=i.c2g(d.p1);if(m(s)&&m(k)&&m(M)&&m(A)&&s!==k&&M!==A){var E=u.c2g(d.s1),I=(M+A)/2;d.ct=[t.c2p(E*Math.cos(I)),p.c2p(E*Math.sin(I))],o=c(s,k,M,A)}else o="M0,0Z";w.ensureSingle(_,"path").attr("d",o)}),y.setClipUrl(l,n._hasClipOnAxisFalse?n.clipIds.forTraces:null,r)})}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(x,oe,ae){"use strict";var g=x("../scatter/attributes"),m=x("../bar/attributes"),w=x("../../components/color/attributes"),y=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=x("../../plots/template_attributes").hovertemplateAttrs,r=x("../../lib/extend").extendFlat,n=g.marker,a=n.line;oe.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:y("x"),yhoverformat:y("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:r({},n.symbol,{arrayOk:!1,editType:"plot"}),opacity:r({},n.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:r({},n.size,{arrayOk:!1,editType:"calc"}),color:r({},n.color,{arrayOk:!1,editType:"style"}),line:{color:r({},a.color,{arrayOk:!1,dflt:w.defaultLine,editType:"style"}),width:r({},a.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:g.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:{marker:g.selected.marker,editType:"style"},unselected:{marker:g.unselected.marker,editType:"style"},text:r({},g.text,{}),hovertext:r({},g.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927}],674:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../plots/cartesian/axes"),w=x("../../plots/cartesian/align_period"),y=x("../../lib"),e=x("../../constants/numerical").BADNUM,r=y._;oe.exports=function(h,d){var o,_,s,k,M,A,E,I=h._fullLayout,C=m.getFromId(h,d.xaxis||"x"),R=m.getFromId(h,d.yaxis||"y"),O=[],D="violin"===d.type?"_numViolins":"_numBoxes";"h"===d.orientation?(s=C,k="x",M=R,A="y",E=!!d.yperiodalignment):(s=R,k="y",M=C,A="x",E=!!d.xperiodalignment);var L,B,j,W,Y,Q,ne=function(Qe,tt,ut,xt){var kt,Bt=tt+"0"in Qe;if(tt in Qe||Bt&&"d"+tt in Qe){var ft=ut.makeCalcdata(Qe,tt);return[w(Qe,ut,tt,ft).vals,ft]}kt=Bt?Qe[tt+"0"]:"name"in Qe&&("category"===ut.type||g(Qe.name)&&-1!==["linear","log"].indexOf(ut.type)||y.isDateTime(Qe.name)&&"date"===ut.type)?Qe.name:xt;for(var lt="multicategory"===ut.type?ut.r2c_just_indices(kt):ut.d2c(kt,0,Qe[tt+"calendar"]),Ft=Qe._length,Jt=new Array(Ft),ln=0;ln<Ft;ln++)Jt[ln]=lt;return[Jt]}(d,A,M,I[D]),X=ne[0],$=ne[1],re=y.distinctVals(X,M),H=re.vals,U=re.minDiff/2,G="all"===(d.boxpoints||d.points)?y.identity:function(Qe){return Qe.v<L.lf||Qe.v>L.uf};if(d._hasPreCompStats){var ie=d[k],q=function(Qe){return s.d2c((d[Qe]||[])[o])},ee=1/0,te=-1/0;for(o=0;o<d._length;o++){var se=X[o];if(g(se)){if((L={}).pos=L[A]=se,E&&$&&(L.orig_p=$[o]),L.q1=q("q1"),L.med=q("median"),L.q3=q("q3"),B=[],ie&&y.isArrayOrTypedArray(ie[o]))for(_=0;_<ie[o].length;_++)(Q=s.d2c(ie[o][_]))!==e&&(a(Y={v:Q,i:[o,_]},d,[o,_]),B.push(Y));if(L.pts=B.sort(t),W=(j=L[k]=B.map(p)).length,L.med!==e&&L.q1!==e&&L.q3!==e&&L.med>=L.q1&&L.q3>=L.med){var ue=q("lowerfence");L.lf=ue!==e&&ue<=L.q1?ue:u(L,j,W);var de=q("upperfence");L.uf=de!==e&&de>=L.q3?de:i(L,j,W);var he=q("mean");L.mean=he!==e?he:W?y.mean(j,W):(L.q1+L.q3)/2;var xe=q("sd");L.sd=he!==e&&xe>=0?xe:W?y.stdev(j,W,L.mean):L.q3-L.q1,L.lo=c(L),L.uo=f(L);var ge=q("notchspan");ge=ge!==e&&ge>0?ge:l(L,W),L.ln=L.med-ge,L.un=L.med+ge;var _e=L.lf,Ce=L.uf;d.boxpoints&&j.length&&(_e=Math.min(_e,j[0]),Ce=Math.max(Ce,j[W-1])),d.notched&&(_e=Math.min(_e,L.ln),Ce=Math.max(Ce,L.un)),L.min=_e,L.max=Ce}else{var Le;y.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+L.q1,"median = "+L.med,"q3 = "+L.q3].join("\n")),L.med=Le=L.med!==e?L.med:L.q1!==e?L.q3!==e?(L.q1+L.q3)/2:L.q1:L.q3!==e?L.q3:0,L.q1=L.q3=Le,L.lf=L.uf=Le,L.mean=L.sd=Le,L.ln=L.un=Le,L.min=L.max=Le}ee=Math.min(ee,L.min),te=Math.max(te,L.max),L.pts2=B.filter(G),O.push(L)}}d._extremes[s._id]=m.findExtremes(s,[ee,te],{padded:!0})}else{var Ie=s.makeCalcdata(d,k),Be=function(Qe,tt){for(var ut=Qe.length,xt=new Array(ut+1),kt=0;kt<ut;kt++)xt[kt]=Qe[kt]-tt;return xt[ut]=Qe[ut-1]+tt,xt}(H,U),ve=H.length,Te=function(Qe){for(var tt=new Array(Qe),ut=0;ut<Qe;ut++)tt[ut]=[];return tt}(ve);for(o=0;o<d._length;o++)if(g(Q=Ie[o])){var Pe=y.findBin(X[o],Be);Pe>=0&&Pe<ve&&(a(Y={v:Q,i:o},d,o),Te[Pe].push(Y))}var De=1/0,Fe=-1/0,Ue=d.quartilemethod,He="exclusive"===Ue,Ke="inclusive"===Ue;for(o=0;o<ve;o++)if(Te[o].length>0){var st,Ve;(L={}).pos=L[A]=H[o],B=L.pts=Te[o].sort(t),W=(j=L[k]=B.map(p)).length,L.min=j[0],L.max=j[W-1],L.mean=y.mean(j,W),L.sd=y.stdev(j,W,L.mean),L.med=y.interp(j,.5),W%2&&(He||Ke)?(He?(st=j.slice(0,W/2),Ve=j.slice(W/2+1)):Ke&&(st=j.slice(0,W/2+1),Ve=j.slice(W/2)),L.q1=y.interp(st,.5),L.q3=y.interp(Ve,.5)):(L.q1=y.interp(j,.25),L.q3=y.interp(j,.75)),L.lf=u(L,j,W),L.uf=i(L,j,W),L.lo=c(L),L.uo=f(L);var $e=l(L,W);L.ln=L.med-$e,L.un=L.med+$e,De=Math.min(De,L.ln),Fe=Math.max(Fe,L.un),L.pts2=B.filter(G),O.push(L)}d._extremes[s._id]=m.findExtremes(s,d.notched?Ie.concat([De,Fe]):Ie,{padded:!0})}return function(Qe,tt){if(y.isArrayOrTypedArray(tt.selectedpoints))for(var ut=0;ut<Qe.length;ut++){for(var xt=Qe[ut].pts||[],kt={},Bt=0;Bt<xt.length;Bt++)kt[xt[Bt].i]=Bt;y.tagSelected(xt,tt,kt)}}(O,d),O.length>0?(O[0].t={num:I[D],dPos:U,posLetter:A,valLetter:k,labels:{med:r(h,"median:"),min:r(h,"min:"),q1:r(h,"q1:"),q3:r(h,"q3:"),max:r(h,"max:"),mean:r(h,"sd"===d.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:r(h,"lower fence:"),uf:r(h,"upper fence:")}},I[D]++,O):[{t:{empty:!0}}]};var n={text:"tx",hovertext:"htx"};function a(h,d,o){for(var _ in n)y.isArrayOrTypedArray(d[_])&&(Array.isArray(o)?y.isArrayOrTypedArray(d[_][o[0]])&&(h[n[_]]=d[_][o[0]][o[1]]):h[n[_]]=d[_][o])}function t(h,d){return h.v-d.v}function p(h){return h.v}function u(h,d,o){return 0===o?h.q1:Math.min(h.q1,d[Math.min(y.findBin(2.5*h.q1-1.5*h.q3,d,!0)+1,o-1)])}function i(h,d,o){return 0===o?h.q3:Math.max(h.q3,d[Math.max(y.findBin(2.5*h.q3-1.5*h.q1,d),0)])}function c(h){return 4*h.q1-3*h.q3}function f(h){return 4*h.q3-3*h.q1}function l(h,d){return 0===d?0:1.57*(h.q3-h.q1)/Math.sqrt(d)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes"),m=x("../../lib"),w=x("../../plots/cartesian/constraints").getAxisGroup,y=["v","h"];function e(r,n,a,t){var p,u,i,c=n.calcdata,f=n._fullLayout,l=t._id,h=l.charAt(0),d=[],o=0;for(p=0;p<a.length;p++)for(i=c[a[p]],u=0;u<i.length;u++)d.push(t.c2l(i[u].pos,!0)),o+=(i[u].pts2||[]).length;if(d.length){var _=m.distinctVals(d);"category"!==t.type&&"multicategory"!==t.type||(_.minDiff=1);var s=_.minDiff/2;g.minDtick(t,_.minDiff,_.vals[0],!0);var k=f["violin"===r?"_numViolins":"_numBoxes"],M="group"===f[r+"mode"]&&k>1,A=1-f[r+"gap"],E=1-f[r+"groupgap"];for(p=0;p<a.length;p++){var I,C,R,O,D,L,B=(i=c[a[p]])[0].trace,j=i[0].t,W=B.width,Y=B.side;if(W)I=C=O=W/2,R=0;else if(I=s,M){var Q=w(f,t._id)+B.orientation,X=Object.keys(((f._alignmentOpts[Q]||{})[B.alignmentgroup]||{}).offsetGroups||{}).length,$=X||k;C=I*A*E/$,R=2*I*(((X?B._offsetIndex:j.num)+.5)/$-.5)*A,O=I*A/$}else C=I*A*E,R=0,O=I;j.dPos=I,j.bPos=R,j.bdPos=C,j.wHover=O;var re,H,U,G,ie,q,ee=R+C,te=Boolean(W);if("positive"===Y?(D=I*(W?1:.5),re=ee,L=re=R):"negative"===Y?(D=re=R,L=I*(W?1:.5),H=ee):(D=L=I,re=H=ee),(B.boxpoints||B.points)&&o>0){var se=B.pointpos,ue=B.jitter,de=B.marker.size/2,he=0;se+ue>=0&&((he=ee*(se+ue))>D?(te=!0,ie=de,U=he):he>re&&(ie=de,U=D)),he<=D&&(U=D);var xe=0;se-ue<=0&&((xe=-ee*(se-ue))>L?(te=!0,q=de,G=xe):xe>H&&(q=de,G=L)),xe<=L&&(G=L)}else U=D,G=L;var ge=new Array(i.length);for(u=0;u<i.length;u++)ge[u]=i[u].pos;B._extremes[l]=g.findExtremes(t,ge,{padded:te,vpadminus:G,vpadplus:U,vpadLinearized:!0,ppadminus:{x:q,y:ie}[h],ppadplus:{x:ie,y:q}[h]})}}}oe.exports={crossTraceCalc:function(r,n){for(var a=r.calcdata,t=n.xaxis,p=n.yaxis,u=0;u<y.length;u++){for(var i=y[u],c="h"===i?p:t,f=[],l=0;l<a.length;l++){var h=a[l],o=h[0].trace;!0!==o.visible||"box"!==o.type&&"candlestick"!==o.type||h[0].t.empty||(o.orientation||"v")!==i||o.xaxis!==t._id||o.yaxis!==p._id||f.push(l)}e("box",r,f,c)}},setPositionOffset:e}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../registry"),w=x("../../components/color"),y=x("../scatter/period_defaults"),e=x("../bar/defaults").handleGroupingDefaults,r=x("../../plots/cartesian/axis_autotype"),n=x("./attributes");function a(p,u,i,c){function f(Y){var Q=0;return Y&&Y.length&&(Q+=1,g.isArrayOrTypedArray(Y[0])&&Y[0].length&&(Q+=1)),Q}function l(Y){return g.validate(p[Y],n[Y])}var h,d=i("y"),o=i("x");if("box"===u.type){var _=i("q1"),s=i("median"),k=i("q3");u._hasPreCompStats=_&&_.length&&s&&s.length&&k&&k.length,h=Math.min(g.minRowLength(_),g.minRowLength(s),g.minRowLength(k))}var M,A,E=f(d),I=f(o),C=E&&g.minRowLength(d),R=I&&g.minRowLength(o),O=c.calendar,D={autotypenumbers:c.autotypenumbers};if(u._hasPreCompStats)switch(String(I)+String(E)){case"00":var L=l("x0")||l("dx");M=!l("y0")&&!l("dy")||L?"v":"h",A=h;break;case"10":M="v",A=Math.min(h,R);break;case"20":M="h",A=Math.min(h,o.length);break;case"01":M="h",A=Math.min(h,C);break;case"02":M="v",A=Math.min(h,d.length);break;case"12":M="v",A=Math.min(h,R,d.length);break;case"21":M="h",A=Math.min(h,o.length,C);break;case"11":A=0;break;case"22":var B,j=!1;for(B=0;B<o.length;B++)if("category"===r(o[B],O,D)){j=!0;break}if(j)M="v",A=Math.min(h,R,d.length);else{for(B=0;B<d.length;B++)if("category"===r(d[B],O,D)){j=!0;break}j?(M="h",A=Math.min(h,o.length,C)):(M="v",A=Math.min(h,R,d.length))}}else E>0?(M="v",A=I>0?Math.min(R,C):Math.min(C)):I>0?(M="h",A=Math.min(R)):A=0;if(A){u._length=A;var W=i("orientation",M);u._hasPreCompStats?"v"===W&&0===I?(i("x0",0),i("dx",1)):"h"===W&&0===E&&(i("y0",0),i("dy",1)):"v"===W&&0===I?i("x0"):"h"===W&&0===E&&i("y0"),m.getComponentMethod("calendars","handleTraceDefaults")(p,u,["x","y"],c)}else u.visible=!1}function t(p,u,i,c){var f=c.prefix,l=g.coerce2(p,u,n,"marker.outliercolor"),h=i("marker.line.outliercolor"),d="outliers";u._hasPreCompStats?d="all":(l||h)&&(d="suspectedoutliers");var o=i(f+"points",d);o?(i("jitter","all"===o?.3:0),i("pointpos","all"===o?-1.5:0),i("marker.symbol"),i("marker.opacity"),i("marker.size"),i("marker.color",u.line.color),i("marker.line.color"),i("marker.line.width"),"suspectedoutliers"===o&&(i("marker.line.outliercolor",u.marker.color),i("marker.line.outlierwidth")),i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size"),i("text"),i("hovertext")):delete u.marker;var _=i("hoveron");"all"!==_&&-1===_.indexOf("points")||i("hovertemplate"),g.coerceSelectionMarkerOpacity(u,i)}oe.exports={supplyDefaults:function(p,u,i,c){function f(k,M){return g.coerce(p,u,n,k,M)}if(a(p,u,f,c),!1!==u.visible){y(p,u,c,f),f("xhoverformat"),f("yhoverformat");var l=u._hasPreCompStats;l&&(f("lowerfence"),f("upperfence")),f("line.color",(p.marker||{}).color||i),f("line.width"),f("fillcolor",w.addOpacity(u.line.color,.5));var h=!1;if(l){var d=f("mean"),o=f("sd");d&&d.length&&(h=!0,o&&o.length&&(h="sd"))}f("boxmean",h),f("whiskerwidth"),f("width"),f("quartilemethod");var _=!1;if(l){var s=f("notchspan");s&&s.length&&(_=!0)}else g.validate(p.notchwidth,n.notchwidth)&&(_=!0);f("notched",_)&&f("notchwidth"),t(p,u,f,{prefix:"box"})}},crossTraceDefaults:function(p,u){var c;function f(d){return g.coerce(c._input,c,n,d)}for(var l=0;l<p.length;l++){var h=(c=p[l]).type;"box"!==h&&"violin"!==h||"group"===u[h+"mode"]&&e(c._input,c,u,f)}},handleSampleDefaults:a,handlePointsDefaults:t}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":947,"./attributes":673}],677:[function(x,oe,ae){"use strict";oe.exports=function(g,m){return m.hoverOnBox&&(g.hoverOnBox=m.hoverOnBox),"xVal"in m&&(g.x=m.xVal),"yVal"in m&&(g.y=m.yVal),m.xa&&(g.xaxis=m.xa),m.ya&&(g.yaxis=m.ya),g}},{}],678:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes"),m=x("../../lib"),w=x("../../components/fx"),y=x("../../components/color"),e=m.fillText;function r(a,t,p,u){var i,c,f,l,h,d,o,_,s,k,M,A,E,I,C=a.cd,R=a.xa,O=a.ya,D=C[0].trace,L=C[0].t,B="violin"===D.type,j=[],W=L.bdPos,Y=L.wHover,Q=function(he){return f.c2l(he.pos)+L.bPos-f.c2l(d)};B&&"both"!==D.side?("positive"===D.side&&(s=function(he){var xe=Q(he);return w.inbox(xe,xe+Y,k)},A=W,E=0),"negative"===D.side&&(s=function(he){var xe=Q(he);return w.inbox(xe-Y,xe,k)},A=0,E=W)):(s=function(he){var xe=Q(he);return w.inbox(xe-Y,xe+Y,k)},A=E=W),I=B?function(he){return w.inbox(he.span[0]-h,he.span[1]-h,k)}:function(he){return w.inbox(he.min-h,he.max-h,k)},"h"===D.orientation?(h=t,d=p,o=I,_=s,i="y",f=O,c="x",l=R):(h=p,d=t,o=s,_=I,i="x",f=R,c="y",l=O);var ne=Math.min(1,W/Math.abs(f.r2c(f.range[1])-f.r2c(f.range[0])));function X(he){return(o(he)+_(he))/2}k=a.maxHoverDistance-ne,M=a.maxSpikeDistance-ne;var $=w.getDistanceFunction(u,o,_,X);if(w.getClosest(C,$,a),!1===a.index)return[];var re=C[a.index],H=D.line.color,U=(D.marker||{}).color;a.color=y.opacity(H)&&D.line.width?H:y.opacity(U)&&D.boxpoints?U:D.fillcolor,a[i+"0"]=f.c2p(re.pos+L.bPos-E,!0),a[i+"1"]=f.c2p(re.pos+L.bPos+A,!0),a[i+"LabelVal"]=void 0!==re.orig_p?re.orig_p:re.pos;var G=i+"Spike";a.spikeDistance=X(re)*M/k,a[G]=f.c2p(re.pos,!0);var ie={},q=["med","q1","q3","min","max"];(D.boxmean||(D.meanline||{}).visible)&&q.push("mean"),(D.boxpoints||D.points)&&q.push("lf","uf");for(var ee=0;ee<q.length;ee++){var te=q[ee];if(te in re&&!(re[te]in ie)){ie[re[te]]=!0;var se=re[te],ue=l.c2p(se,!0),de=m.extendFlat({},a);de.attr=te,de[c+"0"]=de[c+"1"]=ue,de[c+"LabelVal"]=se,de[c+"Label"]=(L.labels?L.labels[te]+" ":"")+g.hoverLabelText(l,se,D[c+"hoverformat"]),de.hoverOnBox=!0,"mean"===te&&"sd"in re&&"sd"===D.boxmean&&(de[c+"err"]=re.sd),a.name="",a.spikeDistance=void 0,a[G]=void 0,de.hovertemplate=!1,j.push(de)}}return j}function n(a,t,p){for(var u,i,c,f=a.cd,l=a.xa,h=a.ya,d=f[0].trace,o=l.c2p(t),_=h.c2p(p),s=w.quadrature(function(B){var j=Math.max(3,B.mrc||0);return Math.max(Math.abs(l.c2p(B.x)-o)-j,1-3/j)},function(B){var j=Math.max(3,B.mrc||0);return Math.max(Math.abs(h.c2p(B.y)-_)-j,1-3/j)}),k=!1,M=0;M<f.length;M++){i=f[M];for(var A=0;A<(i.pts||[]).length;A++){var E=s(c=i.pts[A]);E<=a.distance&&(a.distance=E,k=[M,A])}}if(!k)return!1;c=(i=f[k[0]]).pts[k[1]];var I=l.c2p(c.x,!0),C=h.c2p(c.y,!0),R=c.mrc||1;u=m.extendFlat({},a,{index:c.i,color:(d.marker||{}).color,name:d.name,x0:I-R,x1:I+R,y0:C-R,y1:C+R,spikeDistance:a.distance,hovertemplate:d.hovertemplate});var O,D=i.orig_p,L=void 0!==D?D:i.pos;return"h"===d.orientation?(O=h,u.xLabelVal=c.x,u.yLabelVal=L):(O=l,u.xLabelVal=L,u.yLabelVal=c.y),u[O._id.charAt(0)+"Spike"]=O.c2p(i.pos,!0),e(c,d,u),u}oe.exports={hoverPoints:function(a,t,p,u){var i,c=a.cd[0].trace.hoveron,f=[];return-1!==c.indexOf("boxes")&&(f=f.concat(r(a,t,p,u))),-1!==c.indexOf("points")&&(i=n(a,t,p)),"closest"===u?i?[i]:f:(i&&f.push(i),f)},hoverOnBoxes:r,hoverOnPoints:n}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults").supplyDefaults,crossTraceDefaults:x("./defaults").crossTraceDefaults,supplyLayoutDefaults:x("./layout_defaults").supplyLayoutDefaults,calc:x("./calc"),crossTraceCalc:x("./cross_trace_calc").crossTraceCalc,plot:x("./plot").plot,style:x("./style").style,styleOnSelect:x("./style").styleOnSelect,hoverPoints:x("./hover").hoverPoints,eventData:x("./event_data"),selectPoints:x("./select"),moduleType:"trace",name:"box",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(x,oe,ae){"use strict";oe.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../lib"),w=x("./layout_attributes");function y(e,r,n,a,t){for(var p=t+"Layout",u=!1,i=0;i<n.length;i++)if(g.traceIs(n[i],p)){u=!0;break}u&&(a(t+"mode"),a(t+"gap"),a(t+"groupgap"))}oe.exports={supplyLayoutDefaults:function(e,r,n){y(0,0,n,function(a,t){return m.coerce(e,r,w,a,t)},"box")},_supply:y}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=x("../../components/drawing");function y(n,a,t,p){var u,i,c="h"===t.orientation,f=a.val,l=a.pos,h=!!l.rangebreaks,d=p.bPos,o=p.wdPos||0,_=p.bPosPxOffset||0,s=t.whiskerwidth||0,k=t.notched||!1,M=k?1-2*t.notchwidth:1;Array.isArray(p.bdPos)?(u=p.bdPos[0],i=p.bdPos[1]):(u=p.bdPos,i=p.bdPos);var A=n.selectAll("path.box").data("violin"!==t.type||t.box.visible?m.identity:[]);A.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),A.exit().remove(),A.each(function(E){if(E.empty)return"M0,0Z";var I=l.c2l(E.pos+d,!0),C=l.l2p(I-u)+_,R=l.l2p(I+i)+_,O=h?(C+R)/2:l.l2p(I)+_,D=t.whiskerwidth,L=h?C*D+(1-D)*O:l.l2p(I-o)+_,B=h?R*D+(1-D)*O:l.l2p(I+o)+_,j=l.l2p(I-u*M)+_,W=l.l2p(I+i*M)+_,Y=f.c2p(E.q1,!0),Q=f.c2p(E.q3,!0),ne=m.constrain(f.c2p(E.med,!0),Math.min(Y,Q)+1,Math.max(Y,Q)-1),X=void 0===E.lf||!1===t.boxpoints,$=f.c2p(X?E.min:E.lf,!0),re=f.c2p(X?E.max:E.uf,!0),H=f.c2p(E.ln,!0),U=f.c2p(E.un,!0);c?g.select(this).attr("d","M"+ne+","+j+"V"+W+"M"+Y+","+C+"V"+R+(k?"H"+H+"L"+ne+","+W+"L"+U+","+R:"")+"H"+Q+"V"+C+(k?"H"+U+"L"+ne+","+j+"L"+H+","+C:"")+"ZM"+Y+","+O+"H"+$+"M"+Q+","+O+"H"+re+(0===s?"":"M"+$+","+L+"V"+B+"M"+re+","+L+"V"+B)):g.select(this).attr("d","M"+j+","+ne+"H"+W+"M"+C+","+Y+"H"+R+(k?"V"+H+"L"+W+","+ne+"L"+R+","+U:"")+"V"+Q+"H"+C+(k?"V"+U+"L"+j+","+ne+"L"+C+","+H:"")+"ZM"+O+","+Y+"V"+$+"M"+O+","+Q+"V"+re+(0===s?"":"M"+L+","+$+"H"+B+"M"+L+","+re+"H"+B))})}function e(n,a,t,p){var u=a.x,i=a.y,c=p.bdPos,f=p.bPos,l=t.boxpoints||t.points;m.seedPseudoRandom();var h=n.selectAll("g.points").data(l?function(o){return o.forEach(function(_){_.t=p,_.trace=t}),o}:[]);h.enter().append("g").attr("class","points"),h.exit().remove();var d=h.selectAll("path").data(function(o){var _,s,k=o.pts2,M=Math.max((o.max-o.min)/10,o.q3-o.q1),A=1e-9*M,E=.01*M,I=[],C=0;if(t.jitter){if(0===M)for(C=1,I=new Array(k.length),_=0;_<k.length;_++)I[_]=1;else for(_=0;_<k.length;_++){var R=Math.max(0,_-5),O=k[R].v,D=Math.min(k.length-1,_+5),L=k[D].v;"all"!==l&&(k[_].v<o.lf?L=Math.min(L,o.lf):O=Math.max(O,o.uf));var B=Math.sqrt(E*(D-R)/(L-O+A))||0;B=m.constrain(Math.abs(B),0,1),I.push(B),C=Math.max(B,C)}s=2*t.jitter/(C||1)}for(_=0;_<k.length;_++){var j=k[_],W=j.v,Y=t.jitter?s*I[_]*(m.pseudoRandom()-.5):0,Q=o.pos+f+c*(t.pointpos+Y);"h"===t.orientation?(j.y=Q,j.x=W):(j.x=Q,j.y=W),"suspectedoutliers"===l&&W<o.uo&&W>o.lo&&(j.so=!0)}return k});d.enter().append("path").classed("point",!0),d.exit().remove(),d.call(w.translatePoints,u,i)}function r(n,a,t,p){var u,i,c=a.val,f=a.pos,l=!!f.rangebreaks,h=p.bPos,d=p.bPosPxOffset||0,o=t.boxmean||(t.meanline||{}).visible;Array.isArray(p.bdPos)?(u=p.bdPos[0],i=p.bdPos[1]):(u=p.bdPos,i=p.bdPos);var _=n.selectAll("path.mean").data("box"===t.type&&t.boxmean||"violin"===t.type&&t.box.visible&&t.meanline.visible?m.identity:[]);_.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),_.exit().remove(),_.each(function(s){var k=f.c2l(s.pos+h,!0),M=f.l2p(k-u)+d,A=f.l2p(k+i)+d,E=l?(M+A)/2:f.l2p(k)+d,I=c.c2p(s.mean,!0),C=c.c2p(s.mean-s.sd,!0),R=c.c2p(s.mean+s.sd,!0);"h"===t.orientation?g.select(this).attr("d","M"+I+","+M+"V"+A+("sd"===o?"m0,0L"+C+","+E+"L"+I+","+M+"L"+R+","+E+"Z":"")):g.select(this).attr("d","M"+M+","+I+"H"+A+("sd"===o?"m0,0L"+E+","+C+"L"+M+","+I+"L"+E+","+R+"Z":""))})}oe.exports={plot:function(n,a,t,p){var u=a.xaxis,i=a.yaxis;m.makeTraceGroups(p,t,"trace boxes").each(function(c){var f,l,h=g.select(this),d=c[0],o=d.t,_=d.trace;o.wdPos=o.bdPos*_.whiskerwidth,!0!==_.visible||o.empty?h.remove():("h"===_.orientation?(f=i,l=u):(f=u,l=i),y(h,{pos:f,val:l},_,o),e(h,{x:u,y:i},_,o),r(h,{pos:f,val:l},_,o))})},plotBoxAndWhiskers:y,plotPoints:e,plotBoxMean:r}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(x,oe,ae){"use strict";oe.exports=function(g,m){var w,y,e=g.cd,r=g.xaxis,n=g.yaxis,a=[];if(!1===m)for(w=0;w<e.length;w++)for(y=0;y<(e[w].pts||[]).length;y++)e[w].pts[y].selected=0;else for(w=0;w<e.length;w++)for(y=0;y<(e[w].pts||[]).length;y++){var t=e[w].pts[y],p=r.c2p(t.x),u=n.c2p(t.y);m.contains([p,u],null,t.i,g)?(a.push({pointNumber:t.i,x:r.c2d(t.x),y:n.c2d(t.y)}),t.selected=1):t.selected=0}return a}},{}],684:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/color"),w=x("../../components/drawing");oe.exports={style:function(y,e,r){var n=r||g.select(y).selectAll("g.trace.boxes");n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var t=g.select(this),p=a[0].trace,u=p.line.width;function i(l,h,d,o){l.style("stroke-width",h+"px").call(m.stroke,d).call(m.fill,o)}var c=t.selectAll("path.box");if("candlestick"===p.type)c.each(function(l){if(!l.empty){var h=g.select(this),d=p[l.dir];i(h,d.line.width,d.line.color,d.fillcolor),h.style("opacity",p.selectedpoints&&!l.selected?.3:1)}});else{i(c,u,p.line.color,p.fillcolor),t.selectAll("path.mean").style({"stroke-width":u,"stroke-dasharray":2*u+"px,"+u+"px"}).call(m.stroke,p.line.color);var f=t.selectAll("path.point");w.pointStyle(f,p,y)}})},styleOnSelect:function(y,e,r){var n=e[0].trace,a=r.selectAll("path.point");n.selectedpoints?w.selectedPointStyle(a,n):w.pointStyle(a,n,y)}}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(x,oe,ae){"use strict";var g=x("../../lib").extendFlat,m=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=x("../ohlc/attributes"),y=x("../box/attributes");function e(r){return{line:{color:g({},y.line.color,{dflt:r}),width:y.line.width,editType:"style"},fillcolor:y.fillcolor,editType:"style"}}oe.exports={xperiod:w.xperiod,xperiod0:w.xperiod0,xperiodalignment:w.xperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),x:w.x,open:w.open,high:w.high,low:w.low,close:w.close,line:{width:g({},y.line.width,{}),editType:"style"},increasing:e(w.increasing.line.color.dflt),decreasing:e(w.decreasing.line.color.dflt),text:w.text,hovertext:w.hovertext,whiskerwidth:g({},y.whiskerwidth,{dflt:0}),hoverlabel:w.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/cartesian/axes"),w=x("../../plots/cartesian/align_period"),y=x("../ohlc/calc").calcCommon;function e(r,n,a,t){return{min:a,q1:Math.min(r,t),med:t,q3:Math.max(r,t),max:n}}oe.exports=function(r,n){var a=r._fullLayout,t=m.getFromId(r,n.xaxis),p=m.getFromId(r,n.yaxis),u=t.makeCalcdata(n,"x"),i=w(n,t,"x",u).vals,c=y(r,n,u,i,p,e);return c.length?(g.extendFlat(c[0].t,{num:a._numBoxes,dPos:g.distinctVals(i).minDiff/2,posLetter:"x",valLetter:"y"}),a._numBoxes++,c):[{t:{empty:!0}}]}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/color"),w=x("../ohlc/ohlc_defaults"),y=x("../scatter/period_defaults"),e=x("./attributes");function r(n,a,t,p){var u=t(p+".line.color");t(p+".line.width",a.line.width),t(p+".fillcolor",m.addOpacity(u,.5))}oe.exports=function(n,a,t,p){function u(i,c){return g.coerce(n,a,e,i,c)}w(n,a,u,p)?(y(n,a,p,u,{x:!0}),u("xhoverformat"),u("yhoverformat"),u("line.width"),r(0,a,u,"increasing"),r(0,a,u,"decreasing"),u("text"),u("hovertext"),u("whiskerwidth"),p._requestRangeslider[a.xaxis]=!0):a.visible=!1}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":947,"./attributes":685}],688:[function(x,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"candlestick",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:x("./attributes"),layoutAttributes:x("../box/layout_attributes"),supplyLayoutDefaults:x("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:x("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("../box/plot").plot,layerName:"boxlayer",style:x("../box/style").style,hoverPoints:x("../ohlc/hover").hoverPoints,selectPoints:x("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(x,oe,ae){"use strict";var g=x("./axis_defaults"),m=x("../../plot_api/plot_template");oe.exports=function(w,y,e,r,n){var a,t,p,u;r("a")||(r("da"),r("a0")),r("b")||(r("db"),r("b0")),a=w,t=y,p=e,u=n,["aaxis","baxis"].forEach(function(i){var c=i.charAt(0),f=a[i]||{},l=m.newContainer(t,i);g(f,l,{noTicklabelstep:!0,tickfont:"x",id:c+"axis",letter:c,font:t.font,name:i,data:a[c],calendar:t.calendar,dfltColor:u,bgColor:p.paper_bgcolor,autotypenumbersDflt:p.autotypenumbers,fullLayout:p}),l._categories=l._categories||[],a[i]||"-"===f.type||(a[i]={type:f.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(x,oe,ae){"use strict";var g=x("../../lib").isArrayOrTypedArray;oe.exports=function(m){return function w(y,e){if(!g(y)||e>=10)return null;for(var r=1/0,n=-1/0,a=y.length,t=0;t<a;t++){var p=y[t];if(g(p)){var u=w(p,e+1);u&&(r=Math.min(u[0],r),n=Math.max(u[1],n))}else r=Math.min(p,r),n=Math.max(p,n)}return[r,n]}(m,0)}},{"../../lib":503}],691:[function(x,oe,ae){"use strict";var g=x("../../plots/font_attributes"),m=x("./axis_attributes"),w=x("../../components/color/attributes"),y=g({editType:"calc"});y.family.dflt='"Open Sans", verdana, arial, sans-serif',y.size.dflt=12,y.color.dflt=w.defaultLine,oe.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:m,baxis:m,font:y,color:{valType:"color",dflt:w.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(x,oe,ae){"use strict";var g=x("../../lib").isArrayOrTypedArray;oe.exports=function(m,w,y,e){var r,n,a,t,p,u,i,c,f,l,h,d,o,_=g(y)?"a":"b",s=("a"===_?m.aaxis:m.baxis).smoothing,k="a"===_?m.a2i:m.b2j,M="a"===_?y:e,A="a"===_?e:y,E="a"===_?w.a.length:w.b.length,I="a"===_?w.b.length:w.a.length,C=Math.floor("a"===_?m.b2j(A):m.a2i(A)),R="a"===_?function(re){return m.evalxy([],re,C)}:function(re){return m.evalxy([],C,re)};s&&(a=Math.max(0,Math.min(I-2,C)),t=C-a,n="a"===_?function(re,H){return m.dxydi([],re,a,H,t)}:function(re,H){return m.dxydj([],a,re,t,H)});var O=k(M[0]),D=k(M[1]),L=O<D?1:-1,B=1e-8*(D-O),j=L>0?Math.floor:Math.ceil,W=L>0?Math.ceil:Math.floor,Y=L>0?Math.min:Math.max,Q=L>0?Math.max:Math.min,ne=j(O+B),X=W(D-B),$=[[i=R(O)]];for(r=ne;r*L<X*L;r+=L)p=[],h=Q(O,r),o=(d=Y(D,r+L))-h,u=Math.max(0,Math.min(E-2,Math.floor(.5*(h+d)))),c=R(d),s&&(f=n(u,h-u),l=n(u,d-u),p.push([i[0]+f[0]/3*o,i[1]+f[1]/3*o]),p.push([c[0]-l[0]/3*o,c[1]-l[1]/3*o])),p.push(c),$.push(p),i=c;return $}},{"../../lib":503}],693:[function(x,oe,ae){"use strict";var g=x("../../plots/font_attributes"),m=x("../../components/color/attributes"),w=x("../../plots/cartesian/layout_attributes"),y=x("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=x("../../plot_api/edit_types").overrideAll,r=x("../../components/drawing/attributes").dash,n=x("../../lib/extend").extendFlat;oe.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:g({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:w.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:g({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:y("tick label")},tickformatstops:e(w.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:m.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:n({},r,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:n({},r,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:m.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:g({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(x,oe,ae){"use strict";var g=x("./attributes"),m=x("../../components/color").addOpacity,w=x("../../registry"),y=x("../../lib"),e=x("../../plots/cartesian/tick_value_defaults"),r=x("../../plots/cartesian/tick_label_defaults"),n=x("../../plots/cartesian/prefix_suffix_defaults"),a=x("../../plots/cartesian/category_order_defaults"),t=x("../../plots/cartesian/set_convert"),p=x("../../plots/cartesian/axis_autotype");oe.exports=function(u,i,c){var f=c.letter,l=c.font||{},h=g[f+"axis"];function d(L,B){return y.coerce(u,i,h,L,B)}function o(L,B){return y.coerce2(u,i,h,L,B)}c.name&&(i._name=c.name,i._id=c.name),d("autotypenumbers",c.autotypenumbersDflt);var _=d("type");"-"===_&&(c.data&&function(L,B){if("-"===L.type){var j=L._id.charAt(0);L.type=p(B,L[j+"calendar"],{autotypenumbers:L.autotypenumbers})}}(i,c.data),"-"===i.type?i.type="linear":_=u.type=i.type),d("smoothing"),d("cheatertype"),d("showticklabels"),d("labelprefix",f+" = "),d("labelsuffix"),d("showtickprefix"),d("showticksuffix"),d("separatethousands"),d("tickformat"),d("exponentformat"),d("minexponent"),d("showexponent"),d("categoryorder"),d("tickmode"),d("tickvals"),d("ticktext"),d("tick0"),d("dtick"),"array"===i.tickmode&&(d("arraytick0"),d("arraydtick")),d("labelpadding"),i._hovertitle=f,"date"===_&&w.getComponentMethod("calendars","handleDefaults")(u,i,"calendar",c.calendar),t(i,c.fullLayout),i.c2p=y.identity;var s=d("color",c.dfltColor),k=s===u.color?s:l.color;d("title.text")&&(y.coerceFont(d,"title.font",{family:l.family,size:y.bigFont(l.size),color:k}),d("title.offset")),d("tickangle"),d("autorange",!i.isValidRange(u.range))&&d("rangemode"),d("range"),i.cleanRange(),d("fixedrange"),e(u,i,d,_),n(u,i,d,_,c),r(u,i,d,_,c),a(u,i,d,{data:c.data,dataAttr:f});var M=o("gridcolor",m(s,.3)),A=o("gridwidth"),E=o("griddash"),I=d("showgrid");I||(delete i.gridcolor,delete i.gridwidth,delete i.griddash);var C=o("startlinecolor",s),R=o("startlinewidth",A);d("startline",i.showgrid||!!C||!!R)||(delete i.startlinecolor,delete i.startlinewidth);var O=o("endlinecolor",s),D=o("endlinewidth",A);return d("endline",i.showgrid||!!O||!!D)||(delete i.endlinecolor,delete i.endlinewidth),I?(d("minorgridcount"),d("minorgridwidth",A),d("minorgriddash",E),d("minorgridcolor",m(M,.06)),i.minorgridcount||(delete i.minorgridwidth,delete i.minorgriddash,delete i.minorgridcolor)):(delete i.gridcolor,delete i.gridwidth,delete i.griddash),"none"===i.showticklabels&&(delete i.tickfont,delete i.tickangle,delete i.showexponent,delete i.exponentformat,delete i.minexponent,delete i.tickformat,delete i.showticksuffix,delete i.showtickprefix),i.showticksuffix||delete i.ticksuffix,i.showtickprefix||delete i.tickprefix,d("tickmode"),i}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes"),m=x("../../lib").isArray1D,w=x("./cheater_basis"),y=x("./array_minmax"),e=x("./calc_gridlines"),r=x("./calc_labels"),n=x("./calc_clippath"),a=x("../heatmap/clean_2d_array"),t=x("./smooth_fill_2d_array"),p=x("../heatmap/convert_column_xyz"),u=x("./set_convert");oe.exports=function(i,c){var f=g.getFromId(i,c.xaxis),l=g.getFromId(i,c.yaxis),h=c.aaxis,d=c.baxis,o=c.x,_=c.y,s=[];o&&m(o)&&s.push("x"),_&&m(_)&&s.push("y"),s.length&&p(c,h,d,"a","b",s);var k=c._a=c._a||c.a,M=c._b=c._b||c.b;o=c._x||c.x,_=c._y||c.y;var A={};c._cheater&&(o=w("index"===h.cheatertype?k.length:k,"index"===d.cheatertype?M.length:M,c.cheaterslope)),c._x=o=a(o),c._y=_=a(_),t(o,k,M),t(_,k,M),u(c),c.setScale();var C=y(o),R=y(_),O=.5*(C[1]-C[0]),D=.5*(C[1]+C[0]),L=.5*(R[1]-R[0]),B=.5*(R[1]+R[0]);return R=[B-1.3*L,B+1.3*L],c._extremes[f._id]=g.findExtremes(f,C=[D-1.3*O,D+1.3*O],{padded:!0}),c._extremes[l._id]=g.findExtremes(l,R,{padded:!0}),e(c,"a","b"),e(c,"b","a"),r(c,h),r(c,d),A.clipsegments=n(c._xctrl,c._yctrl,h,d),A.x=o,A.y=_,A.a=k,A.b=M,[A]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w,y){var e,r,n,a=[],t=!!w.smoothing,p=!!y.smoothing,u=g[0].length-1,i=g.length-1;for(e=0,r=[],n=[];e<=u;e++)r[e]=g[0][e],n[e]=m[0][e];for(a.push({x:r,y:n,bicubic:t}),e=0,r=[],n=[];e<=i;e++)r[e]=g[e][u],n[e]=m[e][u];for(a.push({x:r,y:n,bicubic:p}),e=u,r=[],n=[];e>=0;e--)r[u-e]=g[i][e],n[u-e]=m[i][e];for(a.push({x:r,y:n,bicubic:t}),e=i,r=[],n=[];e>=0;e--)r[i-e]=g[e][0],n[i-e]=m[e][0];return a.push({x:r,y:n,bicubic:p}),a}},{}],697:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes"),m=x("../../lib/extend").extendFlat;oe.exports=function(w,y,e){var r,n,a,t,p,u,i,c,f,l,h,d,o,_,s=w["_"+y],k=w[y+"axis"],M=k._gridlines=[],A=k._minorgridlines=[],E=k._boundarylines=[],I=w["_"+e],C=w[e+"axis"];"array"===k.tickmode&&(k.tickvals=s.slice());var R=w._xctrl,O=w._yctrl,D=R[0].length,L=R.length,B=w._a.length,j=w._b.length;g.prepTicks(k),"array"===k.tickmode&&delete k.tickvals;var W=k.smoothing?3:1;function Y(ne){var X,$,re,H,U,G,ie,q,ee,te,se,ue,de=[],he=[],xe={};if("b"===y)for($=w.b2j(ne),re=Math.floor(Math.max(0,Math.min(j-2,$))),H=$-re,xe.length=j,xe.crossLength=B,xe.xy=function(ge){return w.evalxy([],ge,$)},xe.dxy=function(ge,_e){return w.dxydi([],ge,re,_e,H)},X=0;X<B;X++)G=Math.min(B-2,X),ie=X-G,q=w.evalxy([],X,$),C.smoothing&&X>0&&(ee=w.dxydi([],X-1,re,0,H),de.push(U[0]+ee[0]/3),he.push(U[1]+ee[1]/3),te=w.dxydi([],X-1,re,1,H),de.push(q[0]-te[0]/3),he.push(q[1]-te[1]/3)),de.push(q[0]),he.push(q[1]),U=q;else for(X=w.a2i(ne),G=Math.floor(Math.max(0,Math.min(B-2,X))),ie=X-G,xe.length=B,xe.crossLength=j,xe.xy=function(ge){return w.evalxy([],X,ge)},xe.dxy=function(ge,_e){return w.dxydj([],G,ge,ie,_e)},$=0;$<j;$++)re=Math.min(j-2,$),H=$-re,q=w.evalxy([],X,$),C.smoothing&&$>0&&(se=w.dxydj([],G,$-1,ie,0),de.push(U[0]+se[0]/3),he.push(U[1]+se[1]/3),ue=w.dxydj([],G,$-1,ie,1),de.push(q[0]-ue[0]/3),he.push(q[1]-ue[1]/3)),de.push(q[0]),he.push(q[1]),U=q;return xe.axisLetter=y,xe.axis=k,xe.crossAxis=C,xe.value=ne,xe.constvar=e,xe.index=c,xe.x=de,xe.y=he,xe.smoothing=C.smoothing,xe}function Q(ne){var X,$,re,H,U,G=[],ie=[],q={};if(q.length=s.length,q.crossLength=I.length,"b"===y)for(re=Math.max(0,Math.min(j-2,ne)),U=Math.min(1,Math.max(0,ne-re)),q.xy=function(ee){return w.evalxy([],ee,ne)},q.dxy=function(ee,te){return w.dxydi([],ee,re,te,U)},X=0;X<D;X++)G[X]=R[ne*W][X],ie[X]=O[ne*W][X];else for($=Math.max(0,Math.min(B-2,ne)),H=Math.min(1,Math.max(0,ne-$)),q.xy=function(ee){return w.evalxy([],ne,ee)},q.dxy=function(ee,te){return w.dxydj([],$,ee,H,te)},X=0;X<L;X++)G[X]=R[X][ne*W],ie[X]=O[X][ne*W];return q.axisLetter=y,q.axis=k,q.crossAxis=C,q.value=s[ne],q.constvar=e,q.index=ne,q.x=G,q.y=ie,q.smoothing=C.smoothing,q}if("array"===k.tickmode){for(t=5e-15,u=(p=[Math.floor((s.length-1-k.arraytick0)/k.arraydtick*(1+t)),Math.ceil(-k.arraytick0/k.arraydtick/(1+t))].sort(function(ne,X){return ne-X}))[0]-1,i=p[1]+1,c=u;c<i;c++)(n=k.arraytick0+k.arraydtick*c)<0||n>s.length-1||M.push(m(Q(n),{color:k.gridcolor,width:k.gridwidth,dash:k.griddash}));for(c=u;c<i;c++)if(a=k.arraytick0+k.arraydtick*c,h=Math.min(a+k.arraydtick,s.length-1),!(a<0||a>s.length-1||h<0||h>s.length-1))for(d=s[a],o=s[h],r=0;r<k.minorgridcount;r++)(_=h-a)<=0||(l=d+(o-d)*(r+1)/(k.minorgridcount+1)*(k.arraydtick/_))<s[0]||l>s[s.length-1]||A.push(m(Y(l),{color:k.minorgridcolor,width:k.minorgridwidth,dash:k.minorgriddash}));k.startline&&E.push(m(Q(0),{color:k.startlinecolor,width:k.startlinewidth})),k.endline&&E.push(m(Q(s.length-1),{color:k.endlinecolor,width:k.endlinewidth}))}else{for(t=5e-15,u=(p=[Math.floor((s[s.length-1]-k.tick0)/k.dtick*(1+t)),Math.ceil((s[0]-k.tick0)/k.dtick/(1+t))].sort(function(ne,X){return ne-X}))[0],i=p[1],c=u;c<=i;c++)M.push(m(Y(f=k.tick0+k.dtick*c),{color:k.gridcolor,width:k.gridwidth,dash:k.griddash}));for(c=u-1;c<i+1;c++)for(f=k.tick0+k.dtick*c,r=0;r<k.minorgridcount;r++)(l=f+k.dtick*(r+1)/(k.minorgridcount+1))<s[0]||l>s[s.length-1]||A.push(m(Y(l),{color:k.minorgridcolor,width:k.minorgridwidth,dash:k.minorgriddash}));k.startline&&E.push(m(Y(s[0]),{color:k.startlinecolor,width:k.startlinewidth})),k.endline&&E.push(m(Y(s[s.length-1]),{color:k.endlinecolor,width:k.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes"),m=x("../../lib/extend").extendFlat;oe.exports=function(w,y){var e,r,n,a=y._labels=[],t=y._gridlines;for(e=0;e<t.length;e++)n=t[e],-1!==["start","both"].indexOf(y.showticklabels)&&(r=g.tickText(y,n.value),m(r,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:n.xy(0),dxy:n.dxy(0,0),axis:n.axis,length:n.crossAxis.length,font:n.axis.tickfont,isFirst:0===e,isLast:e===t.length-1}),a.push(r)),-1!==["end","both"].indexOf(y.showticklabels)&&(r=g.tickText(y,n.value),m(r,{endAnchor:!1,xy:n.xy(n.crossLength-1),dxy:n.dxy(n.crossLength-2,1),axis:n.axis,length:n.crossAxis.length,font:n.axis.tickfont,isFirst:0===e,isLast:e===t.length-1}),a.push(r))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w,y){var e=g[0]-m[0],r=g[1]-m[1],n=w[0]-m[0],a=w[1]-m[1],t=Math.pow(e*e+r*r,.25),p=Math.pow(n*n+a*a,.25),u=(p*p*e-t*t*n)*y,i=(p*p*r-t*t*a)*y,c=p*(t+p)*3,f=t*(t+p)*3;return[[m[0]+(c&&u/c),m[1]+(c&&i/c)],[m[0]-(f&&u/f),m[1]-(f&&i/f)]]}},{}],700:[function(x,oe,ae){"use strict";var g=x("../../lib").isArrayOrTypedArray;oe.exports=function(m,w,y){var e,r,n,a,t,p,u=[],i=g(m)?m.length:m,c=g(w)?w.length:w,f=g(m)?m:null,l=g(w)?w:null;f&&(n=(f.length-1)/(f[f.length-1]-f[0])/(i-1)),l&&(a=(l.length-1)/(l[l.length-1]-l[0])/(c-1));var h=1/0,d=-1/0;for(r=0;r<c;r++)for(u[r]=[],t=l?(l[r]-l[0])*a:r/(c-1),e=0;e<i;e++)p=(f?(f[e]-f[0])*n:e/(i-1))-t*y,h=Math.min(p,h),d=Math.max(p,d),u[r][e]=p;var o=1/(d-h),_=-h*o;for(r=0;r<c;r++)for(e=0;e<i;e++)u[r][e]=o*u[r][e]+_;return u}},{"../../lib":503}],701:[function(x,oe,ae){"use strict";var g=x("./catmull_rom"),m=x("../../lib").ensureArray;function w(y,e,r){return[(2*(-.5*r[0]+1.5*e[0])+y[0])/3,(2*(-.5*r[1]+1.5*e[1])+y[1])/3]}oe.exports=function(y,e,r,n,a,t){var p,u,i,c,f,l,h,d,o,_,s=r[0].length,k=r.length,M=a?3*s-2:s,A=t?3*k-2:k;for(y=m(y,A),e=m(e,A),i=0;i<A;i++)y[i]=m(y[i],M),e[i]=m(e[i],M);for(u=0,c=0;u<k;u++,c+=t?3:1)for(f=y[c],l=e[c],h=r[u],d=n[u],p=0,i=0;p<s;p++,i+=a?3:1)f[i]=h[p],l[i]=d[p];if(a)for(u=0,c=0;u<k;u++,c+=t?3:1){for(p=1,i=3;p<s-1;p++,i+=3)o=g([r[u][p-1],n[u][p-1]],[r[u][p],n[u][p]],[r[u][p+1],n[u][p+1]],a),y[c][i-1]=o[0][0],e[c][i-1]=o[0][1],y[c][i+1]=o[1][0],e[c][i+1]=o[1][1];_=w([y[c][0],e[c][0]],[y[c][2],e[c][2]],[y[c][3],e[c][3]]),y[c][1]=_[0],e[c][1]=_[1],_=w([y[c][M-1],e[c][M-1]],[y[c][M-3],e[c][M-3]],[y[c][M-4],e[c][M-4]]),y[c][M-2]=_[0],e[c][M-2]=_[1]}if(t)for(i=0;i<M;i++){for(c=3;c<A-3;c+=3)o=g([y[c-3][i],e[c-3][i]],[y[c][i],e[c][i]],[y[c+3][i],e[c+3][i]],t),y[c-1][i]=o[0][0],e[c-1][i]=o[0][1],y[c+1][i]=o[1][0],e[c+1][i]=o[1][1];_=w([y[0][i],e[0][i]],[y[2][i],e[2][i]],[y[3][i],e[3][i]]),y[1][i]=_[0],e[1][i]=_[1],_=w([y[A-1][i],e[A-1][i]],[y[A-3][i],e[A-3][i]],[y[A-4][i],e[A-4][i]]),y[A-2][i]=_[0],e[A-2][i]=_[1]}if(a&&t)for(c=1;c<A;c+=(c+1)%3==0?2:1){for(i=3;i<M-3;i+=3)o=g([y[c][i-3],e[c][i-3]],[y[c][i],e[c][i]],[y[c][i+3],e[c][i+3]],a),y[c][i-1]=.5*(y[c][i-1]+o[0][0]),e[c][i-1]=.5*(e[c][i-1]+o[0][1]),y[c][i+1]=.5*(y[c][i+1]+o[1][0]),e[c][i+1]=.5*(e[c][i+1]+o[1][1]);_=w([y[c][0],e[c][0]],[y[c][2],e[c][2]],[y[c][3],e[c][3]]),y[c][1]=.5*(y[c][1]+_[0]),e[c][1]=.5*(e[c][1]+_[1]),_=w([y[c][M-1],e[c][M-1]],[y[c][M-3],e[c][M-3]],[y[c][M-4],e[c][M-4]]),y[c][M-2]=.5*(y[c][M-2]+_[0]),e[c][M-2]=.5*(e[c][M-2]+_[1])}return[y,e]}},{"../../lib":503,"./catmull_rom":699}],702:[function(x,oe,ae){"use strict";oe.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w){return m&&w?function(y,e,r,n,a){var t,c,f;y||(y=[]),e*=3,r*=3;var l=n*n,h=1-n,d=h*h,o=h*n*2,_=-3*d,s=3*(d-o),k=3*(o-l),M=3*l,A=a*a,E=A*a,I=1-a,C=I*I,R=C*I;for(f=0;f<g.length;f++)t=_*(c=g[f])[r][e]+s*c[r][e+1]+k*c[r][e+2]+M*c[r][e+3],y[f]=R*t+3*(C*a*(_*c[r+1][e]+s*c[r+1][e+1]+k*c[r+1][e+2]+M*c[r+1][e+3])+I*A*(_*c[r+2][e]+s*c[r+2][e+1]+k*c[r+2][e+2]+M*c[r+2][e+3]))+E*(_*c[r+3][e]+s*c[r+3][e+1]+k*c[r+3][e+2]+M*c[r+3][e+3]);return y}:m?function(y,e,r,n,a){var t,u,i;y||(y=[]),e*=3;var c=n*n,f=1-n,l=f*f,h=f*n*2,d=-3*l,o=3*(l-h),_=3*(h-c),s=3*c,k=1-a;for(u=0;u<g.length;u++)t=d*(i=g[u])[r][e]+o*i[r][e+1]+_*i[r][e+2]+s*i[r][e+3],y[u]=k*t+a*(d*i[r+1][e]+o*i[r+1][e+1]+_*i[r+1][e+2]+s*i[r+1][e+3]);return y}:w?function(y,e,r,n,a){var t,c,f;y||(y=[]),r*=3;var l=a*a,h=l*a,d=1-a,o=d*d,_=o*d;for(c=0;c<g.length;c++)t=(f=g[c])[r][e+1]-f[r][e],y[c]=_*t+3*(o*a*(f[r+1][e+1]-f[r+1][e])+d*l*(f[r+2][e+1]-f[r+2][e]))+h*(f[r+3][e+1]-f[r+3][e]);return y}:function(y,e,r,n,a){var t,u,i;y||(y=[]);var c=1-a;for(u=0;u<g.length;u++)t=(i=g[u])[r][e+1]-i[r][e],y[u]=c*t+a*(i[r+1][e+1]-i[r+1][e]);return y}}},{}],704:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w){return m&&w?function(y,e,r,n,a){var t,c,f;y||(y=[]),e*=3,r*=3;var l=n*n,h=l*n,d=1-n,o=d*d,_=o*d,s=a*a,k=1-a,M=k*k,A=k*a*2,E=-3*M,I=3*(M-A),C=3*(A-s),R=3*s;for(f=0;f<g.length;f++)t=E*(c=g[f])[r][e]+I*c[r+1][e]+C*c[r+2][e]+R*c[r+3][e],y[f]=_*t+3*(o*n*(E*c[r][e+1]+I*c[r+1][e+1]+C*c[r+2][e+1]+R*c[r+3][e+1])+d*l*(E*c[r][e+2]+I*c[r+1][e+2]+C*c[r+2][e+2]+R*c[r+3][e+2]))+h*(E*c[r][e+3]+I*c[r+1][e+3]+C*c[r+2][e+3]+R*c[r+3][e+3]);return y}:m?function(y,e,r,n,a){var t,c,f;y||(y=[]),e*=3;var l=a*a,h=l*a,d=1-a,o=d*d,_=o*d;for(c=0;c<g.length;c++)t=(f=g[c])[r+1][e]-f[r][e],y[c]=_*t+3*(o*a*(f[r+1][e+1]-f[r][e+1])+d*l*(f[r+1][e+2]-f[r][e+2]))+h*(f[r+1][e+3]-f[r][e+3]);return y}:w?function(y,e,r,n,a){var t,u,i;y||(y=[]),r*=3;var c=1-n,f=a*a,l=1-a,h=l*l,d=l*a*2,o=-3*h,_=3*(h-d),s=3*(d-f),k=3*f;for(u=0;u<g.length;u++)t=o*(i=g[u])[r][e]+_*i[r+1][e]+s*i[r+2][e]+k*i[r+3][e],y[u]=c*t+n*(o*i[r][e+1]+_*i[r+1][e+1]+s*i[r+2][e+1]+k*i[r+3][e+1]);return y}:function(y,e,r,n,a){var t,u,i;y||(y=[]);var c=1-n;for(u=0;u<g.length;u++)t=(i=g[u])[r+1][e]-i[r][e],y[u]=c*t+n*(i[r+1][e+1]-i[r][e+1]);return y}}},{}],705:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w,y,e){var r=m-2,n=w-2;return y&&e?function(a,t,p){var u,l,h;a||(a=[]);var d=Math.max(0,Math.min(Math.floor(t),r)),o=Math.max(0,Math.min(Math.floor(p),n)),_=Math.max(0,Math.min(1,t-d)),s=Math.max(0,Math.min(1,p-o));d*=3,o*=3;var k=_*_,M=k*_,A=1-_,E=A*A,I=E*A,C=s*s,R=C*s,O=1-s,D=O*O,L=D*O;for(h=0;h<g.length;h++)u=I*(l=g[h])[o][d]+3*(E*_*l[o][d+1]+A*k*l[o][d+2])+M*l[o][d+3],a[h]=L*u+3*(D*s*(I*l[o+1][d]+3*(E*_*l[o+1][d+1]+A*k*l[o+1][d+2])+M*l[o+1][d+3])+O*C*(I*l[o+2][d]+3*(E*_*l[o+2][d+1]+A*k*l[o+2][d+2])+M*l[o+2][d+3]))+R*(I*l[o+3][d]+3*(E*_*l[o+3][d+1]+A*k*l[o+3][d+2])+M*l[o+3][d+3]);return a}:y?function(a,t,p){a||(a=[]);var u,l,h,d=Math.max(0,Math.min(Math.floor(t),r)),o=Math.max(0,Math.min(Math.floor(p),n)),_=Math.max(0,Math.min(1,t-d)),s=Math.max(0,Math.min(1,p-o));d*=3;var k=_*_,M=k*_,A=1-_,E=A*A,I=E*A,C=1-s;for(l=0;l<g.length;l++)u=C*(h=g[l])[o][d]+s*h[o+1][d],a[l]=I*u+3*(E*_*(C*h[o][d+1]+s*h[o+1][d+1])+A*k*(C*h[o][d+2]+s*h[o+1][d+1]))+M*(C*h[o][d+3]+s*h[o+1][d+1]);return a}:e?function(a,t,p){a||(a=[]);var u,l,h,d=Math.max(0,Math.min(Math.floor(t),r)),o=Math.max(0,Math.min(Math.floor(p),n)),_=Math.max(0,Math.min(1,t-d)),s=Math.max(0,Math.min(1,p-o));o*=3;var k=s*s,M=k*s,A=1-s,E=A*A,I=E*A,C=1-_;for(l=0;l<g.length;l++)u=C*(h=g[l])[o][d]+_*h[o][d+1],a[l]=I*u+3*(E*s*(C*h[o+1][d]+_*h[o+1][d+1])+A*k*(C*h[o+2][d]+_*h[o+2][d+1]))+M*(C*h[o+3][d]+_*h[o+3][d+1]);return a}:function(a,t,p){a||(a=[]);var u,c,f,l=Math.max(0,Math.min(Math.floor(t),r)),h=Math.max(0,Math.min(Math.floor(p),n)),d=Math.max(0,Math.min(1,t-l)),o=Math.max(0,Math.min(1,p-h)),_=1-o,s=1-d;for(c=0;c<g.length;c++)u=s*(f=g[c])[h][l]+d*f[h][l+1],a[c]=_*u+o*(s*f[h+1][l]+d*f[h+1][l+1]);return a}}},{}],706:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./xy_defaults"),w=x("./ab_defaults"),y=x("./attributes"),e=x("../../components/color/attributes");oe.exports=function(r,n,a,t){function p(i,c){return g.coerce(r,n,y,i,c)}n._clipPathId="clip"+n.uid+"carpet";var u=p("color",e.defaultLine);g.coerceFont(p,"font"),p("carpet"),w(r,n,t,p,u),n.a&&n.b?(n.a.length<3&&(n.aaxis.smoothing=0),n.b.length<3&&(n.baxis.smoothing=0),m(r,n,p)||(n.visible=!1),n._cheater&&p("cheaterslope")):n.visible=!1}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),plot:x("./plot"),calc:x("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(x,oe,ae){"use strict";oe.exports=function(g,m){for(var w,y=g._fullData.length,e=0;e<y;e++){var r=g._fullData[e];if(r.index!==m.index&&"carpet"===r.type&&(w||(w=r),r.carpet===m.carpet))return r}return w}},{}],709:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w){if(0===g.length)return"";var y,e=[],r=w?3:1;for(y=0;y<g.length;y+=r)e.push(g[y]+","+m[y]),w&&y<g.length-r&&(e.push("C"),e.push([g[y+1]+","+m[y+1],g[y+2]+","+m[y+2]+" "].join(" ")));return e.join(w?"":"L")}},{}],710:[function(x,oe,ae){"use strict";var g=x("../../lib").isArrayOrTypedArray;oe.exports=function(m,w,y){var e;for(g(m)?m.length>w.length&&(m=m.slice(0,w.length)):m=[],e=0;e<w.length;e++)m[e]=y(w[e]);return m}},{"../../lib":503}],711:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w,y,e,r){var n=e[0]*g.dpdx(m),a=e[1]*g.dpdy(w),t=1,p=1;if(r){var u=Math.sqrt(e[0]*e[0]+e[1]*e[1]),i=Math.sqrt(r[0]*r[0]+r[1]*r[1]);p=Math.max(0,(e[0]*r[0]+e[1]*r[1])/u/i)}var f=180*Math.atan2(a,n)/Math.PI;return f<-90?(f+=180,t=-t):f>90&&(f-=180,t=-t),{angle:f,flip:t,p:g.c2p(y,m,w),offsetMultplier:p}}},{}],712:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/drawing"),w=x("./map_1d_array"),y=x("./makepath"),e=x("./orient_text"),r=x("../../lib/svg_text_utils"),n=x("../../lib"),a=n.strRotate,t=n.strTranslate,p=x("../../constants/alignment");function u(h,d,o,_,s,k){var M="const-"+s+"-lines",A=o.selectAll("."+M).data(k);A.enter().append("path").classed(M,!0).style("vector-effect","non-scaling-stroke"),A.each(function(E){var I=E,R=I.y,O=w([],I.x,h.c2p),D=w([],R,d.c2p),L="M"+y(O,D,I.smoothing);g.select(this).attr("d",L).style("stroke-width",I.width).style("stroke",I.color).style("stroke-dasharray",m.dashStyle(I.dash,I.width)).style("fill","none")}),A.exit().remove()}function i(h,d,o,_,s,k,M,A){var E=k.selectAll("text."+A).data(M);E.enter().append("text").classed(A,!0);var I=0,C={};return E.each(function(R,O){var D;if("auto"===R.axis.tickangle)D=e(_,d,o,R.xy,R.dxy);else{var L=(R.axis.tickangle+180)*Math.PI/180;D=e(_,d,o,R.xy,[Math.cos(L),Math.sin(L)])}O||(C={angle:D.angle,flip:D.flip});var B=(R.endAnchor?-1:1)*D.flip,j=g.select(this).attr({"text-anchor":B>0?"start":"end","data-notex":1}).call(m.font,R.font).text(R.text).call(r.convertToTspans,h),W=m.bBox(this);j.attr("transform",t(D.p[0],D.p[1])+a(D.angle)+t(R.axis.labelpadding*B,.3*W.height)),I=Math.max(I,W.width+R.axis.labelpadding)}),E.exit().remove(),C.maxExtent=I,C}oe.exports=function(h,d,o,_){var s=d.xaxis,k=d.yaxis,M=h._fullLayout._clips;n.makeTraceGroups(_,o,"trace").each(function(A){var E=g.select(this),I=A[0],C=I.trace,R=C.aaxis,O=C.baxis,D=n.ensureSingle(E,"g","minorlayer"),L=n.ensureSingle(E,"g","majorlayer"),B=n.ensureSingle(E,"g","boundarylayer"),j=n.ensureSingle(E,"g","labellayer");E.style("opacity",C.opacity),u(s,k,L,0,"a",R._gridlines),u(s,k,L,0,"b",O._gridlines),u(s,k,D,0,"a",R._minorgridlines),u(s,k,D,0,"b",O._minorgridlines),u(s,k,B,0,"a-boundary",R._boundarylines),u(s,k,B,0,"b-boundary",O._boundarylines);var Q,ne,X,re,H,U,G,ie,q,ee,te,se,ue,de,he,W=i(h,s,k,C,0,j,R._labels,"a-label"),Y=i(h,s,k,C,0,j,O._labels,"b-label");Q=h,ne=j,X=C,re=s,H=k,U=W,G=Y,se=n.aggNums(Math.min,null,X.a),ue=n.aggNums(Math.max,null,X.a),de=n.aggNums(Math.min,null,X.b),he=n.aggNums(Math.max,null,X.b),ee=X.ab2xy(ie=.5*(se+ue),q=de,!0),te=X.dxyda_rough(ie,q),void 0===U.angle&&n.extendFlat(U,e(X,re,H,ee,X.dxydb_rough(ie,q))),l(Q,ne,X,0,ee,te,X.aaxis,re,H,U,"a-title"),ee=X.ab2xy(ie=se,q=.5*(de+he),!0),te=X.dxydb_rough(ie,q),void 0===G.angle&&n.extendFlat(G,e(X,re,H,ee,X.dxyda_rough(ie,q))),l(Q,ne,X,0,ee,te,X.baxis,re,H,G,"b-title"),function(Q,ne,X,$,re){var H,U,G,ie,q=X.select("#"+Q._clipPathId);q.size()||(q=X.append("clipPath").classed("carpetclip",!0));var ee=n.ensureSingle(q,"path","carpetboundary"),te=ne.clipsegments,se=[];for(ie=0;ie<te.length;ie++)U=w([],(H=te[ie]).x,$.c2p),G=w([],H.y,re.c2p),se.push(y(U,G,H.bicubic));var ue="M"+se.join("L")+"Z";q.attr("id",Q._clipPathId),ee.attr("d",ue)}(C,I,M,s,k)})};var c=p.LINE_SPACING,f=(1-p.MID_SHIFT)/c+1;function l(h,d,o,_,s,k,M,A,E,I,C){var R=[];M.title.text&&R.push(M.title.text);var O=d.selectAll("text."+C).data(R),D=I.maxExtent;O.enter().append("text").classed(C,!0),O.each(function(){var L=e(o,A,E,s,k);-1===["start","both"].indexOf(M.showticklabels)&&(D=0);var B=M.title.font.size;D+=B+M.title.offset;var j=(I.angle+(I.flip<0?180:0)-L.angle+450)%360,W=j>90&&j<270,Y=g.select(this);Y.text(M.title.text).call(r.convertToTspans,h),W&&(D=(-r.lineCount(Y)+f)*c*B-D),Y.attr("transform",t(L.p[0],L.p[1])+a(L.angle)+t(0,D)).attr("text-anchor","middle").call(m.font,M.title.font)}),O.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(x,oe,ae){"use strict";var g=x("./constants"),m=x("../../lib/search").findBin,w=x("./compute_control_points"),y=x("./create_spline_evaluator"),e=x("./create_i_derivative_evaluator"),r=x("./create_j_derivative_evaluator");oe.exports=function(n){var a=n._a,t=n._b,p=a.length,u=t.length,i=n.aaxis,c=n.baxis,f=a[0],l=a[p-1],h=t[0],d=t[u-1],o=a[a.length-1]-a[0],_=t[t.length-1]-t[0],s=o*g.RELATIVE_CULL_TOLERANCE,k=_*g.RELATIVE_CULL_TOLERANCE;f-=s,l+=s,h-=k,d+=k,n.isVisible=function(M,A){return M>f&&M<l&&A>h&&A<d},n.isOccluded=function(M,A){return M<f||M>l||A<h||A>d},n.setScale=function(){var E=w(n._xctrl,n._yctrl,n._x,n._y,i.smoothing,c.smoothing);n._xctrl=E[0],n._yctrl=E[1],n.evalxy=y([n._xctrl,n._yctrl],p,u,i.smoothing,c.smoothing),n.dxydi=e([n._xctrl,n._yctrl],i.smoothing,c.smoothing),n.dxydj=r([n._xctrl,n._yctrl],i.smoothing,c.smoothing)},n.i2a=function(M){var A=Math.max(0,Math.floor(M[0]),p-2),E=M[0]-A;return(1-E)*a[A]+E*a[A+1]},n.j2b=function(M){var A=Math.max(0,Math.floor(M[1]),p-2),E=M[1]-A;return(1-E)*t[A]+E*t[A+1]},n.ij2ab=function(M){return[n.i2a(M[0]),n.j2b(M[1])]},n.a2i=function(M){var A=Math.max(0,Math.min(m(M,a),p-2)),E=a[A];return Math.max(0,Math.min(p-1,A+(M-E)/(a[A+1]-E)))},n.b2j=function(M){var A=Math.max(0,Math.min(m(M,t),u-2)),E=t[A];return Math.max(0,Math.min(u-1,A+(M-E)/(t[A+1]-E)))},n.ab2ij=function(M){return[n.a2i(M[0]),n.b2j(M[1])]},n.i2c=function(M,A){return n.evalxy([],M,A)},n.ab2xy=function(M,A,E){if(!E&&(M<a[0]||M>a[p-1]|A<t[0]||A>t[u-1]))return[!1,!1];var I=n.a2i(M),C=n.b2j(A),R=n.evalxy([],I,C);if(E){var O,D,L,B,j=0,W=0,Y=[];M<a[0]?(O=0,D=0,j=(M-a[0])/(a[1]-a[0])):M>a[p-1]?(O=p-2,D=1,j=(M-a[p-1])/(a[p-1]-a[p-2])):D=I-(O=Math.max(0,Math.min(p-2,Math.floor(I)))),A<t[0]?(L=0,B=0,W=(A-t[0])/(t[1]-t[0])):A>t[u-1]?(L=u-2,B=1,W=(A-t[u-1])/(t[u-1]-t[u-2])):B=C-(L=Math.max(0,Math.min(u-2,Math.floor(C)))),j&&(n.dxydi(Y,O,L,D,B),R[0]+=Y[0]*j,R[1]+=Y[1]*j),W&&(n.dxydj(Y,O,L,D,B),R[0]+=Y[0]*W,R[1]+=Y[1]*W)}return R},n.c2p=function(M,A,E){return[A.c2p(M[0]),E.c2p(M[1])]},n.p2x=function(M,A,E){return[A.p2c(M[0]),E.p2c(M[1])]},n.dadi=function(M){var A=Math.max(0,Math.min(a.length-2,M));return a[A+1]-a[A]},n.dbdj=function(M){var A=Math.max(0,Math.min(t.length-2,M));return t[A+1]-t[A]},n.dxyda=function(M,A,E,I){var C=n.dxydi(null,M,A,E,I),R=n.dadi(M,E);return[C[0]/R,C[1]/R]},n.dxydb=function(M,A,E,I){var C=n.dxydj(null,M,A,E,I),R=n.dbdj(A,I);return[C[0]/R,C[1]/R]},n.dxyda_rough=function(M,A,E){var I=o*(E||.1),C=n.ab2xy(M+I,A,!0),R=n.ab2xy(M-I,A,!0);return[.5*(C[0]-R[0])/I,.5*(C[1]-R[1])/I]},n.dxydb_rough=function(M,A,E){var I=_*(E||.1),C=n.ab2xy(M,A+I,!0),R=n.ab2xy(M,A-I,!0);return[.5*(C[0]-R[0])/I,.5*(C[1]-R[1])/I]},n.dpdx=function(M){return M._m},n.dpdy=function(M){return M._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(x,oe,ae){"use strict";var g=x("../../lib");oe.exports=function(m,w,y){var e,r,n,a=[],t=[],p=m[0].length,u=m.length;var c,f,l,h,d,o,_,s,k,M,ne,X,$,re,H,E=0;for(e=0;e<p;e++)for(r=0;r<u;r++)void 0===m[r][e]&&(a.push(e),t.push(r),m[r][e]=(X=r,$=void 0,re=void 0,H=void 0,re=0,H=0,(ne=e)>0&&void 0!==($=m[X][ne-1])&&(H++,re+=$),ne<p-1&&void 0!==($=m[X][ne+1])&&(H++,re+=$),X>0&&void 0!==($=m[X-1][ne])&&(H++,re+=$),X<u-1&&void 0!==($=m[X+1][ne])&&(H++,re+=$),re/Math.max(1,H))),E=Math.max(E,Math.abs(m[r][e]));if(!a.length)return m;var I=0,C=0,R=a.length;do{for(I=0,n=0;n<R;n++){r=t[n];var D,L,B,j,W,Y=0,Q=0;0===(e=a[n])?(L=w[j=Math.min(p-1,2)],Q+=(D=m[r][1])+(D-m[r][j])*(w[0]-(B=w[1]))/(B-L),Y++):e===p-1&&(L=w[j=Math.max(0,p-3)],Q+=(D=m[r][p-2])+(D-m[r][j])*(w[p-1]-(B=w[p-2]))/(B-L),Y++),(0===e||e===p-1)&&r>0&&r<u-1&&(Q+=((f=y[r]-y[r-1])*m[r+1][e]+(c=y[r+1]-y[r])*m[r-1][e])/(f+c),Y++),0===r?(L=y[W=Math.min(u-1,2)],Q+=(D=m[1][e])+(D-m[W][e])*(y[0]-(B=y[1]))/(B-L),Y++):r===u-1&&(L=y[W=Math.max(0,u-3)],Q+=(D=m[u-2][e])+(D-m[W][e])*(y[u-1]-(B=y[u-2]))/(B-L),Y++),(0===r||r===u-1)&&e>0&&e<p-1&&(Q+=((f=w[e]-w[e-1])*m[r][e+1]+(c=w[e+1]-w[e])*m[r][e-1])/(f+c),Y++),Y?Q/=Y:(s=(d=y[r+1]-y[r])*(o=y[r]-y[r-1])*(d+o),Q=((_=(l=w[e+1]-w[e])*(h=w[e]-w[e-1])*(l+h))*(o*m[r+1][e]+d*m[r-1][e])+s*(h*m[r][e+1]+l*m[r][e-1]))/(s*(h+l)+_*(o+d))),I+=(M=(k=Q-m[r][e])/E)*M,m[r][e]+=k*(1+(Y?0:.85))}I=Math.sqrt(I)}while(C++<100&&I>1e-5);return g.log("Smoother converged to",I,"after",C,"iterations"),m}},{"../../lib":503}],715:[function(x,oe,ae){"use strict";var g=x("../../lib").isArray1D;oe.exports=function(m,w,y){var e=y("x"),r=e&&e.length,n=y("y"),a=n&&n.length;if(!r&&!a)return!1;if(w._cheater=!e,r&&!g(e)||a&&!g(n))w._length=null;else{var t=r?e.length:1/0;a&&(t=Math.min(t,n.length)),w.a&&w.a.length&&(t=Math.min(t,w.a.length)),w.b&&w.b.length&&(t=Math.min(t,w.b.length)),w._length=t}return!0}},{"../../lib":503}],716:[function(x,oe,ae){"use strict";var g=x("../../plots/template_attributes").hovertemplateAttrs,m=x("../scattergeo/attributes"),w=x("../../components/colorscale/attributes"),y=x("../../plots/attributes"),e=x("../../components/color/attributes").defaultLine,r=x("../../lib/extend").extendFlat,n=m.marker.line;oe.exports=r({locations:{valType:"data_array",editType:"calc"},locationmode:m.locationmode,z:{valType:"data_array",editType:"calc"},geojson:r({},m.geojson,{}),featureidkey:m.featureidkey,text:r({},m.text,{}),hovertext:r({},m.hovertext,{}),marker:{line:{color:r({},n.color,{dflt:e}),width:r({},n.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:m.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:m.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:r({},y.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:g(),showlegend:r({},y.showlegend,{dflt:!1})},w("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":969}],717:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../constants/numerical").BADNUM,w=x("../../components/colorscale/calc"),y=x("../scatter/arrays_to_calcdata"),e=x("../scatter/calc_selection");function r(n){return n&&"string"==typeof n}oe.exports=function(n,a){var t,p=a._length,u=new Array(p);t=a.geojson?function(h){return r(h)||g(h)}:r;for(var i=0;i<p;i++){var c=u[i]={},f=a.locations[i],l=a.z[i];t(f)&&g(l)?(c.loc=f,c.z=l):(c.loc=null,c.z=m),c.index=i}return y(u,a),w(n,a,{vals:a.z,containerStr:"",cLetter:"z"}),e(u,a),u}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":926,"../scatter/calc_selection":929,"fast-isnumeric":190}],718:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/colorscale/defaults"),w=x("./attributes");oe.exports=function(y,e,r,n){function a(c,f){return g.coerce(y,e,w,c,f)}var t=a("locations"),p=a("z");if(t&&t.length&&g.isArrayOrTypedArray(p)&&p.length){e._length=Math.min(t.length,p.length);var u,i=a("geojson");("string"==typeof i&&""!==i||g.isPlainObject(i))&&(u="geojson-id"),"geojson-id"===a("locationmode",u)&&a("featureidkey"),a("text"),a("hovertext"),a("hovertemplate"),a("marker.line.width")&&a("marker.line.color"),a("marker.opacity"),m(y,e,n,a,{prefix:"",cLetter:"z"}),g.coerceSelectionMarkerOpacity(e,a)}else e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w,y,e){g.location=m.location,g.z=m.z;var r=y[e];return r.fIn&&r.fIn.properties&&(g.properties=r.fIn.properties),g.ct=r.ct,g}},{}],720:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes"),m=x("./attributes"),w=x("../../lib").fillText;oe.exports=function(y,e,r){var n,a,t,p,u=y.cd,i=u[0].trace,c=y.subplot,f=[e,r],l=[e+360,r];for(a=0;a<u.length;a++)if(p=!1,(n=u[a])._polygons){for(t=0;t<n._polygons.length;t++)n._polygons[t].contains(f)&&(p=!p),n._polygons[t].contains(l)&&(p=!p);if(p)break}if(p&&n)return y.x0=y.x1=y.xa.c2p(n.ct),y.y0=y.y1=y.ya.c2p(n.ct),y.index=n.index,y.location=n.loc,y.z=n.z,y.zLabel=g.tickText(c.mockAxis,c.mockAxis.c2l(n.z),"hover").text,y.hovertemplate=n.hovertemplate,function(h,d,o){if(!d.hovertemplate){var _=o.hi||d.hoverinfo,s=String(o.loc),k="all"===_?m.hoverinfo.flags:_.split("+"),M=-1!==k.indexOf("name"),A=-1!==k.indexOf("location"),E=-1!==k.indexOf("z"),I=-1!==k.indexOf("text"),C=[];!M&&A?h.nameOverride=s:(M&&(h.nameOverride=d.name),A&&C.push(s)),E&&C.push(h.zLabel),I&&w(o,d,C),h.extraText=C.join("<br>")}}(y,i,n),[y]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../heatmap/colorbar"),calc:x("./calc"),calcGeoJSON:x("./plot").calcGeoJSON,plot:x("./plot").plot,style:x("./style").style,styleOnSelect:x("./style").styleOnSelect,hoverPoints:x("./hover"),eventData:x("./event_data"),selectPoints:x("./select"),moduleType:"trace",name:"choropleth",basePlotModule:x("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=x("../../lib/geo_location_utils"),y=x("../../lib/topojson_utils").getTopojsonFeatures,e=x("../../plots/cartesian/autorange").findExtremes,r=x("./style").style;oe.exports={calcGeoJSON:function(n,a){for(var t=n[0].trace,p=a[t.geo],u=p._subplot,i=t.locationmode,c=t._length,f="geojson-id"===i?w.extractTraceFeature(n):y(t,u.topojson),l=[],h=[],d=0;d<c;d++){var o=n[d],_="geojson-id"===i?o.fOut:w.locationToFeature(i,o.loc,f);if(_){o.geojson=_,o.ct=_.properties.ct,o._polygons=w.feature2polygons(_);var s=w.computeBbox(_);l.push(s[0],s[2]),h.push(s[1],s[3])}else o.geojson=null}if("geojson"===p.fitbounds&&"geojson-id"===i){var k=w.computeBbox(w.getTraceGeojson(t));l=[k[0],k[2]],h=[k[1],k[3]]}var M={padded:!0};t._extremes.lon=e(p.lonaxis._ax,l,M),t._extremes.lat=e(p.lataxis._ax,h,M)},plot:function(n,a,t){var p=a.layers.backplot.select(".choroplethlayer");m.makeTraceGroups(p,t,"trace choropleth").each(function(u){var i=g.select(this).selectAll("path.choroplethlocation").data(m.identity);i.enter().append("path").classed("choroplethlocation",!0),i.exit().remove(),r(n,u)})}}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(x,oe,ae){"use strict";oe.exports=function(g,m){var w,y,e,r,n,a=g.cd,t=g.xaxis,p=g.yaxis,u=[];if(!1===m)for(w=0;w<a.length;w++)a[w].selected=0;else for(w=0;w<a.length;w++)(e=(y=a[w]).ct)&&(r=t.c2p(e),n=p.c2p(e),m.contains([r,n],null,w,g)?(u.push({pointNumber:w,lon:e[0],lat:e[1]}),y.selected=1):y.selected=0);return u}},{}],724:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/color"),w=x("../../components/drawing"),y=x("../../components/colorscale");function e(r,n){var a=n[0].trace,t=n[0].node3.selectAll(".choroplethlocation"),p=a.marker||{},u=p.line||{},i=y.makeColorScaleFuncFromTrace(a);t.each(function(c){g.select(this).attr("fill",i(c.z)).call(m.stroke,c.mlc||u.color).call(w.dashLine,"",c.mlw||u.width||0).style("opacity",p.opacity)}),w.selectedPointStyle(t,a,r)}oe.exports={style:function(r,n){n&&e(r,n)},styleOnSelect:function(r,n){var t=n[0].trace;t.selectedpoints?w.selectedPointStyle(n[0].node3.selectAll(".choroplethlocation"),t,r):e(r,n)}}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(x,oe,ae){"use strict";var g=x("../choropleth/attributes"),m=x("../../components/colorscale/attributes"),w=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../../plots/attributes"),e=x("../../lib/extend").extendFlat;oe.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},g.featureidkey,{}),below:{valType:"string",editType:"plot"},text:g.text,hovertext:g.hovertext,marker:{line:{color:e({},g.marker.line.color,{editType:"plot"}),width:e({},g.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},g.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},g.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},g.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:g.hoverinfo,hovertemplate:w({},{keys:["properties"]}),showlegend:e({},y.showlegend,{dflt:!1})},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib"),w=x("../../components/colorscale"),y=x("../../components/drawing"),e=x("../../lib/geojson_utils").makeBlank,r=x("../../lib/geo_location_utils");function n(a){var t,p=a[0].trace,u=p._opts;if(p.selectedpoints){for(var i=y.makeSelectedPointStyleFns(p),c=0;c<a.length;c++){var f=a[c];f.fOut&&(f.fOut.properties.mo2=i.selectedOpacityFn(f))}t={type:"identity",property:"mo2"}}else t=m.isArrayOrTypedArray(p.marker.opacity)?{type:"identity",property:"mo"}:p.marker.opacity;return m.extendFlat(u.fill.paint,{"fill-opacity":t}),m.extendFlat(u.line.paint,{"line-opacity":t}),u}oe.exports={convert:function(a){var t=a[0].trace,p=!0===t.visible&&0!==t._length,u={layout:{visibility:"none"},paint:{}},i={layout:{visibility:"none"},paint:{}},c=t._opts={fill:u,line:i,geojson:e()};if(!p)return c;var f=r.extractTraceFeature(a);if(!f)return c;var l,h,d,o=w.makeColorScaleFuncFromTrace(t),_=t.marker,s=_.line||{};m.isArrayOrTypedArray(_.opacity)&&(l=function(C){var R=C.mo;return g(R)?+m.constrain(R,0,1):0}),m.isArrayOrTypedArray(s.color)&&(h=function(C){return C.mlc}),m.isArrayOrTypedArray(s.width)&&(d=function(C){return C.mlw});for(var k=0;k<a.length;k++){var M=a[k],A=M.fOut;if(A){var E=A.properties;E.fc=o(M.z),l&&(E.mo=l(M)),h&&(E.mlc=h(M)),d&&(E.mlw=d(M)),M.ct=E.ct,M._polygons=r.feature2polygons(A)}}var I=l?{type:"identity",property:"mo"}:_.opacity;return m.extendFlat(u.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":I}),m.extendFlat(i.paint,{"line-color":h?{type:"identity",property:"mlc"}:s.color,"line-width":d?{type:"identity",property:"mlw"}:s.width,"line-opacity":I}),u.layout.visibility="visible",i.layout.visibility="visible",c.geojson={type:"FeatureCollection",features:f},n(a),c},convertOnSelect:n}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/colorscale/defaults"),w=x("./attributes");oe.exports=function(y,e,r,n){function a(i,c){return g.coerce(y,e,w,i,c)}var t=a("locations"),p=a("z"),u=a("geojson");g.isArrayOrTypedArray(t)&&t.length&&g.isArrayOrTypedArray(p)&&p.length&&("string"==typeof u&&""!==u||g.isPlainObject(u))?(a("featureidkey"),e._length=Math.min(t.length,p.length),a("below"),a("text"),a("hovertext"),a("hovertemplate"),a("marker.line.width")&&a("marker.line.color"),a("marker.opacity"),m(y,e,n,a,{prefix:"",cLetter:"z"}),g.coerceSelectionMarkerOpacity(e,a)):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../heatmap/colorbar"),calc:x("../choropleth/calc"),plot:x("./plot"),hoverPoints:x("../choropleth/hover"),eventData:x("../choropleth/event_data"),selectPoints:x("../choropleth/select"),styleOnSelect:function(g,m){m&&m[0].trace._glTrace.updateOnSelect(m)},getBelow:function(g,m){for(var w=m.getMapLayers(),y=w.length-2;y>=0;y--){var e=w[y].id;if("string"==typeof e&&0===e.indexOf("water"))for(var r=y+1;r<w.length;r++)if("string"==typeof(e=w[r].id)&&-1===e.indexOf("plotly-"))return e}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:x("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(x,oe,ae){"use strict";var g=x("./convert").convert,m=x("./convert").convertOnSelect,w=x("../../plots/mapbox/constants").traceLayerPrefix;function y(r,n){this.type="choroplethmapbox",this.subplot=r,this.uid=n,this.sourceId="source-"+n,this.layerList=[["fill",w+n+"-fill"],["line",w+n+"-line"]],this.below=null}var e=y.prototype;e.update=function(r){this._update(g(r))},e.updateOnSelect=function(r){this._update(m(r))},e._update=function(r){var n=this.subplot,a=this.layerList,t=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(r.geojson),t!==this.below&&(this._removeLayers(),this._addLayers(r,t),this.below=t);for(var p=0;p<a.length;p++){var u=a[p],c=u[1],f=r[u[0]];n.setOptions(c,"setLayoutProperty",f.layout),"visible"===f.layout.visibility&&n.setOptions(c,"setPaintProperty",f.paint)}},e._addLayers=function(r,n){for(var a=this.subplot,t=this.layerList,p=this.sourceId,u=0;u<t.length;u++){var i=t[u],c=i[0],f=r[c];a.addLayer({type:c,id:i[1],source:p,layout:f.layout,paint:f.paint},n)}},e._removeLayers=function(){for(var r=this.subplot.map,n=this.layerList,a=n.length-1;a>=0;a--)r.removeLayer(n[a][1])},e.dispose=function(){var r=this.subplot.map;this._removeLayers(),r.removeSource(this.sourceId)},oe.exports=function(r,n){var a=n[0].trace,t=new y(r,a.uid),p=t.sourceId,u=g(n),i=t.below=r.belowLookup["trace-"+a.uid];return r.map.addSource(p,{type:"geojson",data:u.geojson}),t._addLayers(u,i),n[0].trace._glTrace=t,t}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale/attributes"),m=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../mesh3d/attributes"),e=x("../../plots/attributes"),r=x("../../lib/extend").extendFlat,n={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:w({editType:"calc"},{keys:["norm"]}),uhoverformat:m("u",1),vhoverformat:m("v",1),whoverformat:m("w",1),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),showlegend:r({},e.showlegend,{dflt:!1})};r(n,g("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(a){n[a]=y[a]}),n.hoverinfo=r({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),n.transforms=void 0,oe.exports=n},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale/calc");oe.exports=function(m,w){for(var y=w.u,e=w.v,r=w.w,n=Math.min(w.x.length,w.y.length,w.z.length,y.length,e.length,r.length),a=-1/0,t=1/0,p=0;p<n;p++){var u=y[p],i=e[p],c=r[p],f=Math.sqrt(u*u+i*i+c*c);a=Math.max(a,f),t=Math.min(t,f)}w._len=n,w._normMax=a,g(m,w,{vals:[t,a],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(x,oe,ae){"use strict";var g=x("../../../stackgl_modules").gl_cone3d,m=x("../../../stackgl_modules").gl_cone3d.createConeMesh,w=x("../../lib").simpleMap,y=x("../../lib/gl_format_color").parseColorScale,e=x("../../components/colorscale").extractOpts,r=x("../../plots/gl3d/zip3");function n(c,f){this.scene=c,this.uid=f,this.mesh=null,this.data=null}var a=n.prototype;a.handlePick=function(c){if(c.object===this.mesh){var f=c.index=c.data.index,o=this.data.u[f],_=this.data.v[f],s=this.data.w[f];c.traceCoordinate=[this.data.x[f],this.data.y[f],this.data.z[f],o,_,s,Math.sqrt(o*o+_*_+s*s)];var k=this.data.hovertext||this.data.text;return Array.isArray(k)&&void 0!==k[f]?c.textLabel=k[f]:k&&(c.textLabel=k),!0}};var t={xaxis:0,yaxis:1,zaxis:2},p={tip:1,tail:0,cm:.25,center:.5},u={tip:1,tail:1,cm:.75,center:.5};function i(c,f){var l=c.fullSceneLayout,h=c.dataScale,d={};function o(M,A){var E=l[A],I=h[t[A]];return w(M,function(C){return E.d2l(C)*I})}d.vectors=r(o(f.u,"xaxis"),o(f.v,"yaxis"),o(f.w,"zaxis"),f._len),d.positions=r(o(f.x,"xaxis"),o(f.y,"yaxis"),o(f.z,"zaxis"),f._len);var _=e(f);d.colormap=y(f),d.vertexIntensityBounds=[_.min/f._normMax,_.max/f._normMax],d.coneOffset=p[f.anchor],d.coneSize="scaled"===f.sizemode?f.sizeref||.5:f.sizeref&&f._normMax?f.sizeref/f._normMax:.5;var s=g(d),k=f.lightposition;return s.lightPosition=[k.x,k.y,k.z],s.ambient=f.lighting.ambient,s.diffuse=f.lighting.diffuse,s.specular=f.lighting.specular,s.roughness=f.lighting.roughness,s.fresnel=f.lighting.fresnel,s.opacity=f.opacity,f._pad=u[f.anchor]*s.vectorScale*s.coneScale*f._normMax,s}a.update=function(c){this.data=c;var f=i(this.scene,c);this.mesh.update(f)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},oe.exports=function(c,f){var l=c.glplot.gl,h=i(c,f),d=m(l,h),o=new n(c,f.uid);return o.mesh=d,o.data=f,d._trace=o,c.glplot.add(d),o}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/colorscale/defaults"),w=x("./attributes");oe.exports=function(y,e,r,n){function a(l,h){return g.coerce(y,e,w,l,h)}var t=a("u"),p=a("v"),u=a("w"),i=a("x"),c=a("y"),f=a("z");t&&t.length&&p&&p.length&&u&&u.length&&i&&i.length&&c&&c.length&&f&&f.length?(a("sizeref"),a("sizemode"),a("anchor"),a("lighting.ambient"),a("lighting.diffuse"),a("lighting.specular"),a("lighting.roughness"),a("lighting.fresnel"),a("lightposition.x"),a("lightposition.y"),a("lightposition.z"),m(y,e,n,a,{prefix:"",cLetter:"c"}),a("text"),a("hovertext"),a("hovertemplate"),a("uhoverformat"),a("vhoverformat"),a("whoverformat"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(x,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"cone",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:x("./calc"),plot:x("./convert"),eventData:function(g,m){return g.norm=m.traceCoordinate[6],g},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(x,oe,ae){"use strict";var g=x("../heatmap/attributes"),m=x("../scatter/attributes"),w=x("../../plots/cartesian/axis_format_attributes"),y=w.axisHoverFormat,e=w.descriptionOnlyNumbers,r=x("../../components/colorscale/attributes"),n=x("../../components/drawing/attributes").dash,a=x("../../plots/font_attributes"),t=x("../../lib/extend").extendFlat,p=x("../../constants/filter_ops"),u=p.COMPARISON_OPS2,i=p.INTERVAL_OPS,c=m.line;oe.exports=t({z:g.z,x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,text:g.text,hovertext:g.hovertext,transpose:g.transpose,xtype:g.xtype,ytype:g.ytype,xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:g.hovertemplate,texttemplate:t({},g.texttemplate,{}),textfont:t({},g.textfont,{}),hoverongaps:g.hoverongaps,connectgaps:t({},g.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:a({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(u).concat(i),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:t({},c.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:n,smoothing:t({},c.smoothing,{}),editType:"plot"}},r("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":927}],736:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale"),m=x("../heatmap/calc"),w=x("./set_contours"),y=x("./end_plus");oe.exports=function(e,r){var n=m(e,r),a=n[0].z;w(r,a);var t,p=r.contours,u=g.extractOpts(r);if("heatmap"===p.coloring&&u.auto&&!1===r.autocontour){var i=p.start,c=y(p),f=p.size||1,l=Math.floor((c-i)/f)+1;isFinite(f)||(f=1,l=1);var h=i-f/2;t=[h,h+l*f]}else t=a;return g.calc(e,r,{vals:t,cLetter:"z"}),n}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(x,oe,ae){"use strict";oe.exports=function(g,m){var w,y=g[0],e=y.z;switch(m.type){case"levels":var r=Math.min(e[0][0],e[0][1]);for(w=0;w<g.length;w++){var n=g[w];n.prefixBoundary=!n.edgepaths.length&&(r>n.level||n.starts.length&&r===n.level)}break;case"constraint":if(y.prefixBoundary=!1,y.edgepaths.length)return;var a=y.x.length,t=y.y.length,p=-1/0,u=1/0;for(w=0;w<t;w++)u=Math.min(u,e[w][0]),u=Math.min(u,e[w][a-1]),p=Math.max(p,e[w][0]),p=Math.max(p,e[w][a-1]);for(w=1;w<a-1;w++)u=Math.min(u,e[0][w]),u=Math.min(u,e[t-1][w]),p=Math.max(p,e[0][w]),p=Math.max(p,e[t-1][w]);var i,c,f=m.value;switch(m._operation){case">":f>p&&(y.prefixBoundary=!0);break;case"<":(f<u||y.starts.length&&f===u)&&(y.prefixBoundary=!0);break;case"[]":i=Math.min(f[0],f[1]),((c=Math.max(f[0],f[1]))<u||i>p||y.starts.length&&c===u)&&(y.prefixBoundary=!0);break;case"][":i=Math.min(f[0],f[1]),c=Math.max(f[0],f[1]),i<u&&c>p&&(y.prefixBoundary=!0)}}}},{}],738:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale"),m=x("./make_color_map"),w=x("./end_plus");oe.exports={min:"zmin",max:"zmax",calc:function(y,e,r){var n=e.contours,a=e.line,t=n.size||1,p=n.coloring,u=m(e,{isColorbar:!0});if("heatmap"===p){var i=g.extractOpts(e);r._fillgradient=i.reversescale?g.flipScale(i.colorscale):i.colorscale,r._zrange=[i.min,i.max]}else"fill"===p&&(r._fillcolor=u);r._line={color:"lines"===p?u:a.color,width:!1!==n.showlines?a.width:0,dash:a.dash},r._levels={start:n.start,end:w(n),size:t}}}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(x,oe,ae){"use strict";oe.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("./label_defaults"),w=x("../../components/color"),y=w.addOpacity,e=w.opacity,r=x("../../constants/filter_ops"),n=r.CONSTRAINT_REDUCTION,a=r.COMPARISON_OPS2;oe.exports=function(t,p,u,i,c,f){var l,h,d,s,k,M,o=p.contours,_=u("contours.operation");o._operation=n[_],s=u,-1===a.indexOf((k=o).operation)?(s("contours.value",[0,1]),Array.isArray(k.value)?k.value.length>2?k.value=k.value.slice(2):0===k.length?k.value=[0,1]:k.length<2?(M=parseFloat(k.value[0]),k.value=[M,M+1]):k.value=[parseFloat(k.value[0]),parseFloat(k.value[1])]:g(k.value)&&(M=parseFloat(k.value),k.value=[M,M+1])):(s("contours.value",0),g(k.value)||(k.value=Array.isArray(k.value)?parseFloat(k.value[0]):0)),"="===_?l=o.showlines=!0:(l=u("contours.showlines"),d=u("fillcolor",y((t.line||{}).color||c,.5))),l&&(h=u("line.color",d&&e(d)?y(p.fillcolor,1):c),u("line.width",2),u("line.dash")),u("line.smoothing"),m(u,i,h,f)}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(x,oe,ae){"use strict";var g=x("../../constants/filter_ops"),m=x("fast-isnumeric");function w(r,n){var a,t=Array.isArray(n);function p(u){return m(u)?+u:null}return-1!==g.COMPARISON_OPS2.indexOf(r)?a=p(t?n[0]:n):-1!==g.INTERVAL_OPS.indexOf(r)?a=t?[p(n[0]),p(n[1])]:[p(n),p(n)]:-1!==g.SET_OPS.indexOf(r)&&(a=t?n.map(p):[p(n)]),a}function y(r){return function(n){n=w(r,n);var a=Math.min(n[0],n[1]),t=Math.max(n[0],n[1]);return{start:a,end:t,size:t-a}}}function e(r){return function(n){return{start:n=w(r,n),end:1/0,size:1/0}}}oe.exports={"[]":y("[]"),"][":y("]["),">":e(">"),"<":e("<"),"=":e("=")}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w,y){var e=y("contours.start"),r=y("contours.end"),n=!1===e||!1===r,a=w("contours.size");!(n?m.autocontour=!0:w("autocontour",!1))&&a||w("ncontours")}},{}],743:[function(x,oe,ae){"use strict";var g=x("../../lib");function m(w){return g.extendFlat({},w,{edgepaths:g.extendDeep([],w.edgepaths),paths:g.extendDeep([],w.paths),starts:g.extendDeep([],w.starts)})}oe.exports=function(w,y){var e,r,n,a=function(u){return u.reverse()},t=function(u){return u};switch(y){case"=":case"<":return w;case">":for(1!==w.length&&g.warn("Contour data invalid for the specified inequality operation."),r=w[0],e=0;e<r.edgepaths.length;e++)r.edgepaths[e]=a(r.edgepaths[e]);for(e=0;e<r.paths.length;e++)r.paths[e]=a(r.paths[e]);for(e=0;e<r.starts.length;e++)r.starts[e]=a(r.starts[e]);return w;case"][":var p=a;a=t,t=p;case"[]":for(2!==w.length&&g.warn("Contour data invalid for the specified inequality range operation."),r=m(w[0]),n=m(w[1]),e=0;e<r.edgepaths.length;e++)r.edgepaths[e]=a(r.edgepaths[e]);for(e=0;e<r.paths.length;e++)r.paths[e]=a(r.paths[e]);for(e=0;e<r.starts.length;e++)r.starts[e]=a(r.starts[e]);for(;n.edgepaths.length;)r.edgepaths.push(t(n.edgepaths.shift()));for(;n.paths.length;)r.paths.push(t(n.paths.shift()));for(;n.starts.length;)r.starts.push(t(n.starts.shift()));return[r]}}},{"../../lib":503}],744:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../heatmap/xyz_defaults"),w=x("../scatter/period_defaults"),y=x("./constraint_defaults"),e=x("./contours_defaults"),r=x("./style_defaults"),n=x("../heatmap/label_defaults"),a=x("./attributes");oe.exports=function(t,p,u,i){function c(l,h){return g.coerce(t,p,a,l,h)}if(m(t,p,c,i)){w(t,p,i,c),c("xhoverformat"),c("yhoverformat"),c("text"),c("hovertext"),c("hoverongaps"),c("hovertemplate");var f="constraint"===c("contours.type");c("connectgaps",g.isArray1D(p.z)),f?y(t,p,c,i,u):(e(t,p,c,function(l){return g.coerce2(t,p,a,l)}),r(t,p,c,i)),p.contours&&"heatmap"===p.contours.coloring&&n(c,i)}else p.visible=!1}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":947,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./constraint_mapping"),w=x("./end_plus");oe.exports=function(y,e,r){for(var n="constraint"===y.type?m[y._operation](y.value):y,a=n.size,t=[],p=w(n),u=r.trace._carpetTrace,i=u?{xaxis:u.aaxis,yaxis:u.baxis,x:r.a,y:r.b}:{xaxis:e.xaxis,yaxis:e.yaxis,x:r.x,y:r.y},c=n.start;c<p;c+=a)if(t.push(g.extendFlat({level:c,crossings:{},starts:[],edgepaths:[],paths:[],z:r.z,smoothing:r.trace.line.smoothing},i)),t.length>1e3){g.warn("Too many contours, clipping at 1000",y);break}return t}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(x,oe,ae){"use strict";oe.exports=function(g){return g.end+g.size/1e6}},{}],747:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./constants");function w(r,n,a,t){return Math.abs(r[0]-n[0])<a&&Math.abs(r[1]-n[1])<t}function y(r,n,a,t,p){var u,ee,se,ue,de,i=n.join(","),c=r.crossings[i],f=(se=n,ue=0,de=0,(ee=c)>20&&a?208===ee||1114===ee?ue=0===se[0]?1:-1:de=0===se[1]?1:-1:-1!==m.BOTTOMSTART.indexOf(ee)?de=1:-1!==m.LEFTSTART.indexOf(ee)?ue=1:-1!==m.TOPSTART.indexOf(ee)?de=-1:ue=-1,[ue,de]),l=[e(r,n,[-f[0],-f[1]])],h=r.z.length,d=r.z[0].length,o=n.slice(),_=f.slice();for(u=0;u<1e4;u++){if(c>20?r.crossings[i]=m.SADDLEREMAINDER[c=m.CHOOSESADDLE[c][(f[0]||f[1])<0?0:1]]:delete r.crossings[i],!(f=m.NEWDELTA[c])){g.log("Found bad marching index:",c,n,r.level);break}if(l.push(e(r,n,f)),n[0]+=f[0],n[1]+=f[1],i=n.join(","),w(l[l.length-1],l[l.length-2],t,p)&&l.pop(),n[0]===o[0]&&n[1]===o[1]&&f[0]===_[0]&&f[1]===_[1]||a&&(f[0]&&(n[0]<0||n[0]>d-2)||f[1]&&(n[1]<0||n[1]>h-2)))break;c=r.crossings[i]}1e4===u&&g.log("Infinite loop in contour?");var k,M,A,E,I,C,R,O,D,L,B,j,W,Y,Q,ne=w(l[0],l[l.length-1],t,p),X=0,$=.2*r.smoothing,re=[],H=0;for(u=1;u<l.length;u++)void 0,void 0,Y=(j=l[u])[2]-(W=l[u-1])[2],Q=j[3]-W[3],X+=R=Math.sqrt(Y*Y+Q*Q),re.push(R);var U=X/re.length*$;function G(ee){return l[ee%l.length]}for(u=l.length-2;u>=H;u--)if((k=re[u])<U){for(A=0,M=u-1;M>=H&&k+re[M]<U;M--)k+=re[M];if(ne&&u===l.length-2)for(A=0;A<M&&k+re[A]<U;A++)k+=re[A];I=u-M+A+1,C=Math.floor((u+M+A+2)/2),E=ne||u!==l.length-2?ne||-1!==M?I%2?G(C):[(G(C)[0]+G(C+1)[0])/2,(G(C)[1]+G(C+1)[1])/2]:l[0]:l[l.length-1],l.splice(M+1,u-M+1,E),u=M+1,A&&(H=A),ne&&(u===l.length-2?l[A]=l[l.length-1]:0===u&&(l[l.length-1]=l[0]))}for(l.splice(0,H),u=0;u<l.length;u++)l[u].length=2;if(!(l.length<2))if(ne)l.pop(),r.paths.push(l);else{a||g.log("Unclosed interior contour?",r.level,o.join(","),l.join("L"));var ie=!1;for(O=0;O<r.edgepaths.length;O++)if(L=r.edgepaths[O],!ie&&w(L[0],l[l.length-1],t,p)){l.pop(),ie=!0;var q=!1;for(D=0;D<r.edgepaths.length;D++)if(w((B=r.edgepaths[D])[B.length-1],l[0],t,p)){q=!0,l.shift(),r.edgepaths.splice(O,1),D===O?r.paths.push(l.concat(B)):(D>O&&D--,r.edgepaths[D]=B.concat(l,L));break}q||(r.edgepaths[O]=l.concat(L))}for(O=0;O<r.edgepaths.length&&!ie;O++)w((L=r.edgepaths[O])[L.length-1],l[0],t,p)&&(l.shift(),r.edgepaths[O]=L.concat(l),ie=!0);ie||r.edgepaths.push(l)}}function e(r,n,a){var t=n[0]+Math.max(a[0],0),p=n[1]+Math.max(a[1],0),u=r.z[p][t],i=r.xaxis,c=r.yaxis;if(a[1]){var f=(r.level-u)/(r.z[p][t+1]-u),l=(1!==f?(1-f)*i.c2l(r.x[t]):0)+(0!==f?f*i.c2l(r.x[t+1]):0);return[i.c2p(i.l2c(l),!0),c.c2p(r.y[p],!0),t+f,p]}var h=(r.level-u)/(r.z[p+1][t]-u),d=(1!==h?(1-h)*c.c2l(r.y[p]):0)+(0!==h?h*c.c2l(r.y[p+1]):0);return[i.c2p(r.x[t],!0),c.c2p(c.l2c(d),!0),t,p+h]}oe.exports=function(r,n,a){var t,p,u,i;for(n=n||.01,a=a||.01,p=0;p<r.length;p++){for(u=r[p],i=0;i<u.starts.length;i++)y(u,u.starts[i],"edge",n,a);for(t=0;Object.keys(u.crossings).length&&t<1e4;)t++,y(u,Object.keys(u.crossings)[0].split(",").map(Number),void 0,n,a);1e4===t&&g.log("Infinite loop in contour?")}}},{"../../lib":503,"./constants":739}],748:[function(x,oe,ae){"use strict";var g=x("../../components/color"),m=x("../heatmap/hover");oe.exports=function(w,y,e,r,n){n||(n={}),n.isContour=!0;var a=m(w,y,e,r,n);return a&&a.forEach(function(t){var p=t.trace;"constraint"===p.contours.type&&(p.fillcolor&&g.opacity(p.fillcolor)?t.color=g.addOpacity(p.fillcolor,1):p.contours.showlines&&g.opacity(p.line.color)&&(t.color=g.addOpacity(p.line.color,1)))}),a}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot").plot,style:x("./style"),colorbar:x("./colorbar"),hoverPoints:x("./hover"),moduleType:"trace",name:"contour",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(x,oe,ae){"use strict";var g=x("../../lib");oe.exports=function(m,w,y,e){if(e||(e={}),m("contours.showlabels")){var r=w.font;g.coerceFont(m,"contours.labelfont",{family:r.family,size:r.size,color:y}),m("contours.labelformat")}!1!==e.hasHover&&m("zhoverformat")}},{"../../lib":503}],751:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/colorscale"),w=x("./end_plus");oe.exports=function(y){var e=y.contours,r=e.start,n=w(e),a=e.size||1,t=Math.floor((n-r)/a)+1,p="lines"===e.coloring?0:1,u=m.extractOpts(y);isFinite(a)||(a=1,t=1);var i,c,f=u.reversescale?m.flipScale(u.colorscale):u.colorscale,l=f.length,h=new Array(l),d=new Array(l);if("heatmap"===e.coloring){var o=u.min,_=u.max;for(c=0;c<l;c++)h[c]=(i=f[c])[0]*(_-o)+o,d[c]=i[1];var s=g.extent([o,_,e.start,e.start+a*(t-1)]),k=s[o<_?0:1],M=s[o<_?1:0];k!==o&&(h.splice(0,0,k),d.splice(0,0,d[0])),M!==_&&(h.push(M),d.push(d[d.length-1]))}else for(c=0;c<l;c++)h[c]=((i=f[c])[0]*(t+p-1)-p/2)*a+r,d[c]=i[1];return m.makeColorScaleFunc({domain:h,range:d},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(x,oe,ae){"use strict";var g=x("./constants");function m(w,y){var e=(y[0][0]>w?0:1)+(y[0][1]>w?0:2)+(y[1][1]>w?0:4)+(y[1][0]>w?0:8);return 5===e||10===e?w>(y[0][0]+y[0][1]+y[1][0]+y[1][1])/4?5===e?713:1114:5===e?104:208:15===e?0:e}oe.exports=function(w){var y,e,r,n,a,t,p,u,i,c=w[0].z,f=c.length,l=c[0].length,h=2===f||2===l;for(e=0;e<f-1;e++)for(n=[],0===e&&(n=n.concat(g.BOTTOMSTART)),e===f-2&&(n=n.concat(g.TOPSTART)),y=0;y<l-1;y++)for(r=n.slice(),0===y&&(r=r.concat(g.LEFTSTART)),y===l-2&&(r=r.concat(g.RIGHTSTART)),a=y+","+e,t=[[c[e][y],c[e][y+1]],[c[e+1][y],c[e+1][y+1]]],i=0;i<w.length;i++)(p=m((u=w[i]).level,t))&&(u.crossings[a]=p,-1!==r.indexOf(p)&&(u.starts.push([y,e]),h&&-1!==r.indexOf(p,r.indexOf(p)+1)&&u.starts.push([y,e])))}},{"./constants":739}],753:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=x("../../components/drawing"),y=x("../../components/colorscale"),e=x("../../lib/svg_text_utils"),r=x("../../plots/cartesian/axes"),n=x("../../plots/cartesian/set_convert"),a=x("../heatmap/plot"),t=x("./make_crossings"),p=x("./find_all_paths"),u=x("./empty_pathinfo"),i=x("./convert_to_constraints"),c=x("./close_boundaries"),f=x("./constants"),l=f.LABELOPTIMIZER;function h(_,s){var k,M,A,E,I,C,O="",D=0,L=_.edgepaths.map(function(ne,X){return X}),B=!0;function j(ne){return Math.abs(ne[1]-s[2][1])<.01}function Y(ne){return Math.abs(ne[0]-s[2][0])<.01}for(;L.length;){for(C=w.smoothopen(_.edgepaths[D],_.smoothing),O+=B?C:C.replace(/^M/,"L"),L.splice(L.indexOf(D),1),k=_.edgepaths[D][_.edgepaths[D].length-1],E=-1,A=0;A<4;A++){if(!k){m.log("Missing end?",D,_);break}for(Math.abs(k[1]-s[0][1])<.01&&!Y(k)?M=s[1]:Math.abs(k[0]-s[0][0])<.01?M=s[0]:j(k)?M=s[3]:Y(k)&&(M=s[2]),I=0;I<_.edgepaths.length;I++){var Q=_.edgepaths[I][0];Math.abs(k[0]-M[0])<.01?Math.abs(k[0]-Q[0])<.01&&(Q[1]-k[1])*(M[1]-Q[1])>=0&&(M=Q,E=I):Math.abs(k[1]-M[1])<.01?Math.abs(k[1]-Q[1])<.01&&(Q[0]-k[0])*(M[0]-Q[0])>=0&&(M=Q,E=I):m.log("endpt to newendpt is not vert. or horz.",k,M,Q)}if(k=M,E>=0)break;O+="L"+M}if(E===_.edgepaths.length){m.log("unclosed perimeter path");break}(B=-1===L.indexOf(D=E))&&(D=L[0],O+="Z")}for(D=0;D<_.paths.length;D++)O+=w.smoothclosed(_.paths[D],_.smoothing);return O}function d(_,s,k,M){var A=s.width/2,E=s.height/2,I=_.x,C=_.y,R=_.theta,O=Math.cos(R)*A,D=Math.sin(R)*A,L=(I>M.center?M.right-I:I-M.left)/(O+Math.abs(Math.sin(R)*E)),B=(C>M.middle?M.bottom-C:C-M.top)/(Math.abs(D)+Math.cos(R)*E);if(L<1||B<1)return 1/0;var j=l.EDGECOST*(1/(L-1)+1/(B-1));j+=l.ANGLECOST*R*R;for(var W=I-O,Y=C-D,Q=I+O,ne=C+D,X=0;X<k.length;X++){var $=k[X],re=Math.cos($.theta)*$.width/2,H=Math.sin($.theta)*$.width/2,U=2*m.segmentDistance(W,Y,Q,ne,$.x-re,$.y-H,$.x+re,$.y+H)/(s.height+$.height),G=$.level===s.level,ie=G?l.SAMELEVELDISTANCE:1;if(U<=ie)return 1/0;j+=l.NEIGHBORCOST*(G?l.SAMELEVELFACTOR:1)/(U-ie)}return j}function o(_){var s,k,M=_.trace._emptypoints,A=[],E=_.z.length,I=_.z[0].length,C=[];for(s=0;s<I;s++)C.push(1);for(s=0;s<E;s++)A.push(C.slice());for(s=0;s<M.length;s++)A[(k=M[s])[0]][k[1]]=0;return _.zmask=A,A}ae.plot=function(_,s,k,M){var A=s.xaxis,E=s.yaxis;m.makeTraceGroups(M,k,"contour").each(function(I){var C=g.select(this),R=I[0],D=R.x,L=R.y,B=R.trace.contours,j=u(B,s,R),W=m.ensureSingle(C,"g","heatmapcoloring"),Y=[];"heatmap"===B.coloring&&(Y=[I]),a(_,s,Y,W),t(j),p(j);var G,ie,q,Q=A.c2p(D[0],!0),ne=A.c2p(D[D.length-1],!0),X=E.c2p(L[0],!0),$=E.c2p(L[L.length-1],!0),re=[[Q,$],[ne,$],[ne,X],[Q,X]],H=j;"constraint"===B.type&&(H=i(j,B._operation)),G=re,ie=B,(q=m.ensureSingle(C,"g","contourbg").selectAll("path").data("fill"===ie.coloring?[0]:[])).enter().append("path"),q.exit().remove(),q.attr("d","M"+G.join("L")+"Z").style("stroke","none"),function(U,G,ie,q){var ee="fill"===q.coloring||"constraint"===q.type&&"="!==q._operation,te="M"+ie.join("L")+"Z";ee&&c(G,q);var se=m.ensureSingle(U,"g","contourfill").selectAll("path").data(ee?G:[]);se.enter().append("path"),se.exit().remove(),se.each(function(ue){var de=(ue.prefixBoundary?te:"")+h(ue,ie);de?g.select(this).attr("d",de).style("stroke","none"):g.select(this).remove()})}(C,H,re,B),function(U,G,ie,q,ee){var te=m.ensureSingle(U,"g","contourlines"),se=!1!==ee.showlines,ue=ee.showlabels,de=se&&ue,he=ae.createLines(te,se||ue,G),xe=ae.createLineClip(te,de,ie,q.trace.uid),ge=U.selectAll("g.contourlabels").data(ue?[0]:[]);if(ge.exit().remove(),ge.enter().append("g").classed("contourlabels",!0),ue){var _e=[],Ce=[];m.clearLocationCache();var Le=ae.labelFormatter(ie,q),Ie=w.tester.append("text").attr("data-notex",1).call(w.font,ee.labelfont),Be=G[0].xaxis,ve=G[0].yaxis,Te=Be._length,Pe=ve._length,De=Be.range,Fe=ve.range,Ue=m.aggNums(Math.min,null,q.x),He=m.aggNums(Math.max,null,q.x),Ke=m.aggNums(Math.min,null,q.y),st=m.aggNums(Math.max,null,q.y),Ve=Math.max(Be.c2p(Ue,!0),0),$e=Math.min(Be.c2p(He,!0),Te),Qe=Math.max(ve.c2p(st,!0),0),tt=Math.min(ve.c2p(Ke,!0),Pe),ut={};De[0]<De[1]?(ut.left=Ve,ut.right=$e):(ut.left=$e,ut.right=Ve),Fe[0]<Fe[1]?(ut.top=Qe,ut.bottom=tt):(ut.top=tt,ut.bottom=Qe),ut.middle=(ut.top+ut.bottom)/2,ut.center=(ut.left+ut.right)/2,_e.push([[ut.left,ut.top],[ut.right,ut.top],[ut.right,ut.bottom],[ut.left,ut.bottom]]);var xt=Math.sqrt(Te*Te+Pe*Pe),kt=f.LABELDISTANCE*xt/Math.max(1,G.length/f.LABELINCREASE);he.each(function(Bt){var Rt=ae.calcTextOpts(Bt.level,Le,Ie,ie);g.select(this).selectAll("path").each(function(){var ft=m.getVisibleSegment(this,ut,Rt.height/2);if(ft&&!(ft.len<(Rt.width+Rt.height)*f.LABELMIN))for(var lt=Math.min(Math.ceil(ft.len/kt),f.LABELMAX),Ft=0;Ft<lt;Ft++){var Jt=ae.findBestTextLocation(this,ft,Rt,Ce,ut);if(!Jt)break;ae.addLabelData(Jt,Rt,Ce,_e)}})}),Ie.remove(),ae.drawLabels(ge,Ce,ie,xe,de?_e:null)}ue&&!se&&he.remove()}(C,j,_,R,B),function(U,G,ie,q,ee){var te=q.trace,ue="clip"+te.uid,de=ie._fullLayout._clips.selectAll("#"+ue).data(te.connectgaps?[]:[0]);if(de.enter().append("clipPath").classed("contourclip",!0).attr("id",ue),de.exit().remove(),!1===te.connectgaps){var he={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:G.xaxis,yaxis:G.yaxis,x:q.x,y:q.y,z:o(q),smoothing:0};t([he]),p([he]),c([he],{type:"levels"}),m.ensureSingle(de,"path","").attr("d",(he.prefixBoundary?"M"+ee.join("L")+"Z":"")+h(he,ee))}else ue=null;w.setClipUrl(U,ue,ie)}(C,s,_,R,re)})},ae.createLines=function(_,s,k){var M=k[0].smoothing,A=_.selectAll("g.contourlevel").data(s?k:[]);if(A.exit().remove(),A.enter().append("g").classed("contourlevel",!0),s){var E=A.selectAll("path.openline").data(function(C){return C.pedgepaths||C.edgepaths});E.exit().remove(),E.enter().append("path").classed("openline",!0),E.attr("d",function(C){return w.smoothopen(C,M)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var I=A.selectAll("path.closedline").data(function(C){return C.ppaths||C.paths});I.exit().remove(),I.enter().append("path").classed("closedline",!0),I.attr("d",function(C){return w.smoothclosed(C,M)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return A},ae.createLineClip=function(_,s,k,M){var A=s?"clipline"+M:null,E=k._fullLayout._clips.selectAll("#"+A).data(s?[0]:[]);return E.exit().remove(),E.enter().append("clipPath").classed("contourlineclip",!0).attr("id",A),w.setClipUrl(_,A,k),E},ae.labelFormatter=function(_,s){var k=_._fullLayout,M=s.trace,A=M.contours,E={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(A.labelformat)E.tickformat=A.labelformat,n(E,k);else{var I=y.extractOpts(M);if(I&&I.colorbar&&I.colorbar._axis)E=I.colorbar._axis;else{if("constraint"===A.type){var C=A.value;E.range=Array.isArray(C)?[C[0],C[C.length-1]]:[C,C]}else E.range=[A.start,A.end],E.nticks=(A.end-A.start)/A.size;E.range[0]===E.range[1]&&(E.range[1]+=E.range[0]||1),E.nticks||(E.nticks=1e3),n(E,k),r.prepTicks(E),E._tmin=null,E._tmax=null}}return function(R){return r.tickText(E,R).text}},ae.calcTextOpts=function(_,s,k,M){var A=s(_);k.text(A).call(e.convertToTspans,M);var E=k.node(),I=w.bBox(E,!0);return{text:A,width:I.width,height:I.height,fontSize:+E.style["font-size"].replace("px",""),level:_,dy:(I.top+I.bottom)/2}},ae.findBestTextLocation=function(_,s,k,M,A){var E,I,C,R,O,D=k.width;s.isClosed?(E=s.min+(I=s.len/l.INITIALSEARCHPOINTS)/2,C=s.max):(E=s.min+(I=(s.len-D)/(l.INITIALSEARCHPOINTS+1))+D/2,C=s.max-(I+D)/2);for(var L=1/0,B=0;B<l.ITERATIONS;B++){for(var j=E;j<C;j+=I){var W=m.getTextLocation(_,s.total,j,D),Y=d(W,k,M,A);Y<L&&(L=Y,O=W,R=j)}if(L>2*l.MAXCOST)break;B&&(I/=2),C=(E=R-I/2)+1.5*I}if(L<=l.MAXCOST)return O},ae.addLabelData=function(_,s,k,M){var A=s.fontSize,E=s.width+A/3,I=Math.max(0,s.height-A/3),C=_.x,R=_.y,O=_.theta,D=Math.sin(O),L=Math.cos(O),B=function(W,Y){return[C+W*L-Y*D,R+W*D+Y*L]},j=[B(-E/2,-I/2),B(-E/2,I/2),B(E/2,I/2),B(E/2,-I/2)];k.push({text:s.text,x:C,y:R,dy:s.dy,theta:O,level:s.level,width:E,height:I}),M.push(j)},ae.drawLabels=function(_,s,k,M,A){var E=_.selectAll("text").data(s,function(R){return R.text+","+R.x+","+R.y+","+R.theta});if(E.exit().remove(),E.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(R){var O=R.x+Math.sin(R.theta)*R.dy,D=R.y-Math.cos(R.theta)*R.dy;g.select(this).text(R.text).attr({x:O,y:D,transform:"rotate("+180*R.theta/Math.PI+" "+O+" "+D+")"}).call(e.convertToTspans,k)}),A){for(var I="",C=0;C<A.length;C++)I+="M"+A[C].join("L")+"Z";m.ensureSingle(M,"path","").attr("d",I)}}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes"),m=x("../../lib");function w(y,e,r){var n={type:"linear",range:[y,e]};return g.autoTicks(n,(e-y)/(r||15)),n}oe.exports=function(y,e){var r=y.contours;if(y.autocontour){var n=y.zmin,a=y.zmax;(y.zauto||void 0===n)&&(n=m.aggNums(Math.min,null,e)),(y.zauto||void 0===a)&&(a=m.aggNums(Math.max,null,e));var t=w(n,a,y.ncontours);r.size=t.dtick,r.start=g.tickFirst(t),t.range.reverse(),r.end=g.tickFirst(t),r.start===n&&(r.start+=r.size),r.end===a&&(r.end-=r.size),r.start>r.end&&(r.start=r.end=(r.start+r.end)/2),y._input.contours||(y._input.contours={}),m.extendFlat(y._input.contours,{start:r.start,end:r.end,size:r.size}),y._input.autocontour=!0}else if("constraint"!==r.type){var p,u=r.start,i=r.end,c=y._input.contours;u>i&&(r.start=c.start=i,i=r.end=c.end=u,u=r.start),!(r.size>0)&&(p=u===i?1:w(u,i,y.ncontours).dtick,c.size=r.size=p)}}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/drawing"),w=x("../heatmap/style"),y=x("./make_color_map");oe.exports=function(e){var r=g.select(e).selectAll("g.contour");r.style("opacity",function(n){return n[0].trace.opacity}),r.each(function(n){var a=g.select(this),t=n[0].trace,p=t.contours,u=t.line,i=p.size||1,c=p.start,f="constraint"===p.type,l=!f&&"lines"===p.coloring,h=!f&&"fill"===p.coloring,d=l||h?y(t):null;a.selectAll("g.contourlevel").each(function(s){g.select(this).selectAll("path").call(m.lineGroupStyle,u.width,l?d(s.level):u.color,u.dash)});var o=p.labelfont;if(a.selectAll("g.contourlabels text").each(function(s){m.font(g.select(this),{family:o.family,size:o.size,color:o.color||(l?d(s.level):u.color)})}),f)a.selectAll("g.contourfill path").style("fill",t.fillcolor);else if(h){var _;a.selectAll("g.contourfill path").style("fill",function(s){return void 0===_&&(_=s.level),d(s.level+.5*i)}),void 0===_&&(_=c),a.selectAll("g.contourbg path").style("fill",d(_-.5*i))}}),w(e)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale/defaults"),m=x("./label_defaults");oe.exports=function(w,y,e,r,n){var a,t=e("contours.coloring"),p="";"fill"===t&&(a=e("contours.showlines")),!1!==a&&("lines"!==t&&(p=e("line.color","#000")),e("line.width",.5),e("line.dash")),"none"!==t&&(!0!==w.showlegend&&(y.showlegend=!1),y._dfltShowLegend=!1,g(w,y,r,e,{prefix:"",cLetter:"z"})),e("line.smoothing"),m(e,r,p,n)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(x,oe,ae){"use strict";var g=x("../heatmap/attributes"),m=x("../contour/attributes"),w=x("../../components/colorscale/attributes"),y=x("../../lib/extend").extendFlat,e=m.contours;oe.exports=y({carpet:{valType:"string",editType:"calc"},z:g.z,a:g.x,a0:g.x0,da:g.dx,b:g.y,b0:g.y0,db:g.dy,text:g.text,hovertext:g.hovertext,transpose:g.transpose,atype:g.xtype,btype:g.ytype,fillcolor:m.fillcolor,autocontour:m.autocontour,ncontours:m.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:m.line.color,width:m.line.width,dash:m.line.dash,smoothing:m.line.smoothing,editType:"plot"},transforms:void 0},w("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale/calc"),m=x("../../lib"),w=x("../heatmap/convert_column_xyz"),y=x("../heatmap/clean_2d_array"),e=x("../heatmap/interp2d"),r=x("../heatmap/find_empties"),n=x("../heatmap/make_bound_array"),a=x("./defaults"),t=x("../carpet/lookup_carpetid"),p=x("../contour/set_contours");oe.exports=function(u,i){var c=i._carpetTrace=t(u,i);if(c&&c.visible&&"legendonly"!==c.visible){if(!i.a||!i.b){var f=u.data[c.index],l=u.data[i.index];l.a||(l.a=f.a),l.b||(l.b=f.b),a(l,i,i._defaultColor,u._fullLayout)}var h=function(d,o){var _,s,k,M,A,E,I,C=o._carpetTrace,R=C.aaxis,O=C.baxis;R._minDtick=0,O._minDtick=0,m.isArray1D(o.z)&&w(o,R,O,"a","b",["z"]),_=o._a=o._a||o.a,M=o._b=o._b||o.b,_=_?R.makeCalcdata(o,"_a"):[],M=M?O.makeCalcdata(o,"_b"):[],s=o.a0||0,k=o.da||1,A=o.b0||0,E=o.db||1,I=o._z=y(o._z||o.z,o.transpose),o._emptypoints=r(I),e(I,o._emptypoints);var D=m.maxRowLength(I),Y={a:n(o,"scaled"===o.xtype?"":_,s,k,D,R),b:n(o,"scaled"===o.ytype?"":M,A,E,I.length,O),z:I};return"levels"===o.contours.type&&"none"!==o.contours.coloring&&g(d,o,{vals:I,containerStr:"",cLetter:"z"}),[Y]}(u,i);return p(i,i._z),h}}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../heatmap/xyz_defaults"),w=x("./attributes"),y=x("../contour/constraint_defaults"),e=x("../contour/contours_defaults"),r=x("../contour/style_defaults");oe.exports=function(n,a,t,p){function u(i,c){return g.coerce(n,a,w,i,c)}if(u("carpet"),n.a&&n.b){if(!m(n,a,u,p,"a","b"))return void(a.visible=!1);u("text"),"constraint"===u("contours.type")?y(n,a,u,p,t,{hasHover:!1}):(e(n,a,u,function(i){return g.coerce2(n,a,w,i)}),r(n,a,u,p,{hasHover:!1}))}else a._defaultColor=t,a._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../contour/colorbar"),calc:x("./calc"),plot:x("./plot"),style:x("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../carpet/map_1d_array"),w=x("../carpet/makepath"),y=x("../../components/drawing"),e=x("../../lib"),r=x("../contour/make_crossings"),n=x("../contour/find_all_paths"),a=x("../contour/plot"),t=x("../contour/constants"),p=x("../contour/convert_to_constraints"),u=x("../contour/empty_pathinfo"),i=x("../contour/close_boundaries"),c=x("../carpet/lookup_carpetid"),f=x("../carpet/axis_aligned_line");function l(o,_,s){var k=o.getPointAtLength(_),M=o.getPointAtLength(s),A=M.x-k.x,E=M.y-k.y,I=Math.sqrt(A*A+E*E);return[A/I,E/I]}function h(o){var _=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return[o[0]/_,o[1]/_]}function d(o,_){var s=Math.abs(o[0]*_[0]+o[1]*_[1]);return Math.sqrt(1-s*s)/s}oe.exports=function(o,_,s,k){var M=_.xaxis,A=_.yaxis;e.makeTraceGroups(k,s,"contour").each(function(E){var I=g.select(this),C=E[0],R=C.trace,O=R._carpetTrace=c(o,R),D=o.calcdata[O.index][0];if(O.visible&&"legendonly"!==O.visible){var L=C.a,B=C.b,j=R.contours,W=u(j,_,C),Y="constraint"===j.type,Q=j._operation,ne=Y?"="===Q?"lines":"fill":j.coloring,X=[[L[0],B[B.length-1]],[L[L.length-1],B[B.length-1]],[L[L.length-1],B[0]],[L[0],B[0]]];r(W),n(W,1e-8*(L[L.length-1]-L[0]),1e-8*(B[B.length-1]-B[0]));var H,U,G,ie,q=W;"constraint"===j.type&&(q=p(W,Q)),function(ue,de){var he,xe,ge,_e,Ce,Le,Ie,Be,ve;for(he=0;he<ue.length;he++){for(Ce=(_e=ue[he]).pedgepaths=[],Le=_e.ppaths=[],xe=0;xe<_e.edgepaths.length;xe++){for(ve=_e.edgepaths[xe],Ie=[],ge=0;ge<ve.length;ge++)Ie[ge]=de(ve[ge]);Ce.push(Ie)}for(xe=0;xe<_e.paths.length;xe++){for(ve=_e.paths[xe],Be=[],ge=0;ge<ve.length;ge++)Be[ge]=de(ve[ge]);Le.push(Be)}}}(W,se);var ee=[];for(ie=D.clipsegments.length-1;ie>=0;ie--)U=m([],(H=D.clipsegments[ie]).x,M.c2p),G=m([],H.y,A.c2p),U.reverse(),G.reverse(),ee.push(w(U,G,H.bicubic));var te="M"+ee.join("L")+"Z";(function(ue,de,he,xe,ge,_e){var Ce,Le,Ie,Be,ve=e.ensureSingle(ue,"g","contourbg").selectAll("path").data("fill"!==_e||ge?[]:[0]);ve.enter().append("path"),ve.exit().remove();var Te=[];for(Be=0;Be<de.length;Be++)Le=m([],(Ce=de[Be]).x,he.c2p),Ie=m([],Ce.y,xe.c2p),Te.push(w(Le,Ie,Ce.bicubic));ve.attr("d","M"+Te.join("L")+"Z").style("stroke","none")})(I,D.clipsegments,M,A,Y,ne),function(ue,de,he,xe,ge,_e,Ce,Le,Ie,Be,ve){var Te="fill"===Be;Te&&i(ge,ue.contours);var Pe=e.ensureSingle(de,"g","contourfill").selectAll("path").data(Te?ge:[]);Pe.enter().append("path"),Pe.exit().remove(),Pe.each(function(De){var Fe=(De.prefixBoundary?ve:"")+function(Ue,He,Ke,st,Ve,$e,Qe,tt){var ut,xt,kt,Bt,Rt,ft,lt,Ft="",Jt=He.edgepaths.map(function(Je,at){return at}),ln=!0,dn=1e-4*Math.abs(Ke[0][0]-Ke[2][0]),cn=1e-4*Math.abs(Ke[0][1]-Ke[2][1]);function Tn(Je){return Math.abs(Je[1]-Ke[0][1])<cn}function nn(Je){return Math.abs(Je[1]-Ke[2][1])<cn}function Me(Je){return Math.abs(Je[0]-Ke[0][0])<dn}function Ee(Je){return Math.abs(Je[0]-Ke[2][0])<dn}function Se(Je,at){var it,yt,vt,Ut,Wt="";for(Tn(Je)&&!Ee(Je)||nn(Je)&&!Me(Je)?(Ut=Ve.aaxis,vt=f(Ve,$e,[Je[0],at[0]],.5*(Je[1]+at[1]))):(Ut=Ve.baxis,vt=f(Ve,$e,.5*(Je[0]+at[0]),[Je[1],at[1]])),it=1;it<vt.length;it++)for(Wt+=Ut.smoothing?"C":"L",yt=0;yt<vt[it].length;yt++){var gt=vt[it][yt];Wt+=[Qe.c2p(gt[0]),tt.c2p(gt[1])]+" "}return Wt}for(ut=0,xt=null;Jt.length;){for(xt&&(Ft+=Se(xt,He.edgepaths[ut][0])),lt=y.smoothopen(He.edgepaths[ut].map(st),He.smoothing),Ft+=ln?lt:lt.replace(/^M/,"L"),Jt.splice(Jt.indexOf(ut),1),xt=He.edgepaths[ut][He.edgepaths[ut].length-1],Rt=-1,Bt=0;Bt<4;Bt++){if(!xt){e.log("Missing end?",ut,He);break}for(Tn(xt)&&!Ee(xt)?kt=Ke[1]:Me(xt)?kt=Ke[0]:nn(xt)?kt=Ke[3]:Ee(xt)&&(kt=Ke[2]),ft=0;ft<He.edgepaths.length;ft++){var qe=He.edgepaths[ft][0];Math.abs(xt[0]-kt[0])<dn?Math.abs(xt[0]-qe[0])<dn&&(qe[1]-xt[1])*(kt[1]-qe[1])>=0&&(kt=qe,Rt=ft):Math.abs(xt[1]-kt[1])<cn?Math.abs(xt[1]-qe[1])<cn&&(qe[0]-xt[0])*(kt[0]-qe[0])>=0&&(kt=qe,Rt=ft):e.log("endpt to newendpt is not vert. or horz.",xt,kt,qe)}if(Rt>=0)break;Ft+=Se(xt,kt),xt=kt}if(Rt===He.edgepaths.length){e.log("unclosed perimeter path");break}(ln=-1===Jt.indexOf(ut=Rt))&&(ut=Jt[0],Ft+=Se(xt,kt)+"Z",xt=null)}for(ut=0;ut<He.paths.length;ut++)Ft+=y.smoothclosed(He.paths[ut].map(st),He.smoothing);return Ft}(0,De,_e,Ce,Le,Ie,he,xe);Fe?g.select(this).attr("d",Fe).style("stroke","none"):g.select(this).remove()})}(R,I,M,A,q,X,se,O,D,ne,te),function(ue,de,he,xe,ge,_e,Ce){var Le=e.ensureSingle(ue,"g","contourlines"),Ie=!1!==ge.showlines,Be=ge.showlabels,ve=Ie&&Be,Te=a.createLines(Le,Ie||Be,de),Pe=a.createLineClip(Le,ve,he,xe.trace.uid),De=ue.selectAll("g.contourlabels").data(Be?[0]:[]);if(De.exit().remove(),De.enter().append("g").classed("contourlabels",!0),Be){var He=_e.xaxis._length,Ke=_e.yaxis._length,st=[[[0,0],[He,0],[He,Ke],[0,Ke]]],Ve=[];e.clearLocationCache();var $e=a.labelFormatter(he,xe),Qe=y.tester.append("text").attr("data-notex",1).call(y.font,ge.labelfont),tt={left:0,right:He,center:He/2,top:0,bottom:Ke,middle:Ke/2},ut=Math.sqrt(He*He+Ke*Ke),xt=t.LABELDISTANCE*ut/Math.max(1,de.length/t.LABELINCREASE);Te.each(function(kt){var Bt=a.calcTextOpts(kt.level,$e,Qe,he);g.select(this).selectAll("path").each(function(Rt){var ft=e.getVisibleSegment(this,tt,Bt.height/2);if(ft&&(function(ln,dn,cn,Tn,nn,Me){for(var Ee,Se=0;Se<cn.pedgepaths.length;Se++)dn===cn.pedgepaths[Se]&&(Ee=cn.edgepaths[Se]);if(Ee){var je=nn.a[0],qe=nn.a[nn.a.length-1],Je=nn.b[0],at=nn.b[nn.b.length-1],yt=l(ln,0,1),vt=l(ln,Tn.total,Tn.total-1),Ut=it(Ee[0],yt),Wt=Tn.total-it(Ee[Ee.length-1],vt);Tn.min<Ut&&(Tn.min=Ut),Tn.max>Wt&&(Tn.max=Wt),Tn.len=Tn.max-Tn.min}function it(gt,At){var Zt,Et=0;return(Math.abs(gt[0]-je)<.1||Math.abs(gt[0]-qe)<.1)&&(Zt=h(nn.dxydb_rough(gt[0],gt[1],.1)),Et=Math.max(Et,Me*d(At,Zt)/2)),(Math.abs(gt[1]-Je)<.1||Math.abs(gt[1]-at)<.1)&&(Zt=h(nn.dxyda_rough(gt[0],gt[1],.1)),Et=Math.max(Et,Me*d(At,Zt)/2)),Et}}(this,Rt,kt,ft,Ce,Bt.height),!(ft.len<(Bt.width+Bt.height)*t.LABELMIN)))for(var lt=Math.min(Math.ceil(ft.len/xt),t.LABELMAX),Ft=0;Ft<lt;Ft++){var Jt=a.findBestTextLocation(this,ft,Bt,Ve,tt);if(!Jt)break;a.addLabelData(Jt,Bt,Ve,st)}})}),Qe.remove(),a.drawLabels(De,Ve,he,Pe,ve?st:null)}Be&&!Ie&&Te.remove()}(I,W,o,C,j,_,O),y.setClipUrl(I,O._clipPathId,o)}function se(ue){var de=O.ab2xy(ue[0],ue[1],!0);return[M.c2p(de[0]),A.c2p(de[1])]}})}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale/attributes"),m=x("../../plots/template_attributes").hovertemplateAttrs,w=x("../../plots/attributes"),y=x("../scattermapbox/attributes"),e=x("../../lib/extend").extendFlat;oe.exports=e({lon:y.lon,lat:y.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:y.text,hovertext:y.hovertext,hoverinfo:e({},w.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:m(),showlegend:e({},w.showlegend,{dflt:!1})},g("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":993}],763:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib").isArrayOrTypedArray,w=x("../../constants/numerical").BADNUM,y=x("../../components/colorscale/calc"),e=x("../../lib")._;oe.exports=function(r,n){for(var a=n._length,t=new Array(a),p=n.z,u=m(p)&&p.length,i=0;i<a;i++){var c=t[i]={},f=n.lon[i],l=n.lat[i];if(c.lonlat=g(f)&&g(l)?[+f,+l]:[w,w],u){var h=p[i];c.z=g(h)?h:w}}return y(r,n,{vals:u?p:[0,1],containerStr:"",cLetter:"z"}),a&&(t[0].t={labels:{lat:e(r,"lat:")+" ",lon:e(r,"lon:")+" "}}),t}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib"),w=x("../../components/color"),y=x("../../components/colorscale"),e=x("../../constants/numerical").BADNUM,r=x("../../lib/geojson_utils").makeBlank;oe.exports=function(n){var a=n[0].trace,t=!0===a.visible&&0!==a._length,p=a._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:r()};if(!t)return p;var u,i=[],c=a.z,f=a.radius,l=m.isArrayOrTypedArray(c)&&c.length,h=m.isArrayOrTypedArray(f);for(u=0;u<n.length;u++){var d=n[u],o=d.lonlat;if(o[0]!==e){var _={};if(l){var s=d.z;_.z=s!==e?s:0}h&&(_.r=g(f[u])&&f[u]>0?+f[u]:0),i.push({type:"Feature",geometry:{type:"Point",coordinates:o},properties:_})}}var k=y.extractOpts(a),M=k.reversescale?y.flipScale(k.colorscale):k.colorscale,A=M[0][1],E=["interpolate",["linear"],["heatmap-density"],0,w.opacity(A)<1?A:w.addOpacity(A,0)];for(u=1;u<M.length;u++)E.push(M[u][0],M[u][1]);return m.extendFlat(p.heatmap.paint,{"heatmap-weight":l?["interpolate",["linear"],["get","z"],k.min,0,k.max,1]:1/(k.max-k.min),"heatmap-color":E,"heatmap-radius":h?{type:"identity",property:"r"}:a.radius,"heatmap-opacity":a.opacity}),p.geojson={type:"FeatureCollection",features:i},p.heatmap.layout.visibility="visible",p}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/colorscale/defaults"),w=x("./attributes");oe.exports=function(y,e,r,n){function a(i,c){return g.coerce(y,e,w,i,c)}var t=a("lon")||[],p=a("lat")||[],u=Math.min(t.length,p.length);u?(e._length=u,a("z"),a("radius"),a("below"),a("text"),a("hovertext"),a("hovertemplate"),m(y,e,n,a,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(x,oe,ae){"use strict";oe.exports=function(g,m){return g.lon=m.lon,g.lat=m.lat,g.z=m.z,g}},{}],767:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes"),m=x("../scattermapbox/hover").hoverPoints,w=x("../scattermapbox/hover").getExtraText;oe.exports=function(y,e,r){var n=m(y,e,r);if(n){var a=n[0],t=a.cd,p=t[0].trace,u=t[a.index];if(delete a.color,"z"in u){var i=a.subplot.mockAxis;a.z=u.z,a.zLabel=g.tickText(i,i.c2l(u.z),"hover").text}return a.extraText=w(p,u,t[0].t.labels),[a]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":998}],768:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../heatmap/colorbar"),formatLabels:x("../scattermapbox/format_labels"),calc:x("./calc"),plot:x("./plot"),hoverPoints:x("./hover"),eventData:x("./event_data"),getBelow:function(g,m){for(var w=m.getMapLayers(),y=0;y<w.length;y++){var e=w[y],r=e.id;if("symbol"===e.type&&"string"==typeof r&&-1===r.indexOf("plotly-"))return r}},moduleType:"trace",name:"densitymapbox",basePlotModule:x("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":997,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(x,oe,ae){"use strict";var g=x("./convert"),m=x("../../plots/mapbox/constants").traceLayerPrefix;function w(e,r){this.type="densitymapbox",this.subplot=e,this.uid=r,this.sourceId="source-"+r,this.layerList=[["heatmap",m+r+"-heatmap"]],this.below=null}var y=w.prototype;y.update=function(e){var r=this.subplot,n=this.layerList,a=g(e),t=r.belowLookup["trace-"+this.uid];r.map.getSource(this.sourceId).setData(a.geojson),t!==this.below&&(this._removeLayers(),this._addLayers(a,t),this.below=t);for(var p=0;p<n.length;p++){var u=n[p],c=u[1],f=a[u[0]];r.setOptions(c,"setLayoutProperty",f.layout),"visible"===f.layout.visibility&&r.setOptions(c,"setPaintProperty",f.paint)}},y._addLayers=function(e,r){for(var n=this.subplot,a=this.layerList,t=this.sourceId,p=0;p<a.length;p++){var u=a[p],i=u[0],c=e[i];n.addLayer({type:i,id:u[1],source:t,layout:c.layout,paint:c.paint},r)}},y._removeLayers=function(){for(var e=this.subplot.map,r=this.layerList,n=r.length-1;n>=0;n--)e.removeLayer(r[n][1])},y.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},oe.exports=function(e,r){var n=r[0].trace,a=new w(e,n.uid),t=a.sourceId,p=g(r),u=a.below=e.belowLookup["trace-"+n.uid];return e.map.addSource(t,{type:"geojson",data:p.geojson}),a._addLayers(p,u),a}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(x,oe,ae){"use strict";var g=x("../../lib");oe.exports=function(m,w){for(var y=0;y<m.length;y++)m[y].i=y;g.mergeArray(w.text,m,"tx"),g.mergeArray(w.hovertext,m,"htx");var e=w.marker;if(e){g.mergeArray(e.opacity,m,"mo"),g.mergeArray(e.color,m,"mc");var r=e.line;r&&(g.mergeArray(r.color,m,"mlc"),g.mergeArrayCastPositive(r.width,m,"mlw"))}}},{"../../lib":503}],771:[function(x,oe,ae){"use strict";var g,m=x("../bar/attributes"),w=x("../scatter/attributes").line,y=x("../../plots/attributes"),e=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,r=x("../../plots/template_attributes").hovertemplateAttrs,n=x("../../plots/template_attributes").texttemplateAttrs,a=x("./constants"),t=x("../../lib/extend").extendFlat,p=x("../../components/color");oe.exports={x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:e("x"),yhoverformat:e("y"),hovertext:m.hovertext,hovertemplate:r({},{keys:a.eventDataKeys}),hoverinfo:t({},y.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:n({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:m.text,textposition:m.textposition,insidetextanchor:t({},m.insidetextanchor,{dflt:"middle"}),textangle:t({},m.textangle,{dflt:0}),textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:m.outsidetextfont,constraintext:m.constraintext,cliponaxis:m.cliponaxis,orientation:t({},m.orientation,{}),offset:t({},m.offset,{arrayOk:!1}),width:t({},m.width,{arrayOk:!1}),marker:(g=t({},m.marker),delete g.pattern,g),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:t({},w.color,{dflt:p.defaultLine}),width:t({},w.width,{dflt:0,editType:"plot"}),dash:w.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927,"./constants":773}],772:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes"),m=x("../../plots/cartesian/align_period"),w=x("./arrays_to_calcdata"),y=x("../scatter/calc_selection"),e=x("../../constants/numerical").BADNUM;function r(n){return n===e?0:n}oe.exports=function(n,a){var t,p,u,i,c,f,l,h,d=g.getFromId(n,a.xaxis||"x"),o=g.getFromId(n,a.yaxis||"y");"h"===a.orientation?(t=d.makeCalcdata(a,"x"),u=o.makeCalcdata(a,"y"),i=m(a,o,"y",u),c=!!a.yperiodalignment,f="y"):(t=o.makeCalcdata(a,"y"),u=d.makeCalcdata(a,"x"),i=m(a,d,"x",u),c=!!a.xperiodalignment,f="x"),p=i.vals;var _,s=Math.min(p.length,t.length),k=new Array(s);for(a._base=[],l=0;l<s;l++){t[l]<0&&(t[l]=e);var M=!1;t[l]!==e&&l+1<s&&t[l+1]!==e&&(M=!0),h=k[l]={p:p[l],s:t[l],cNext:M},a._base[l]=-.5*h.s,c&&(k[l].orig_p=u[l],k[l][f+"End"]=i.ends[l],k[l][f+"Start"]=i.starts[l]),a.ids&&(h.id=String(a.ids[l])),0===l&&(k[0].vTotal=0),k[0].vTotal+=r(h.s),h.begR=r(h.s)/r(k[0].s)}for(l=0;l<s;l++)(h=k[l]).s!==e&&(h.sumR=h.s/k[0].vTotal,h.difR=void 0!==_?h.s/_:1,_=h.s);return w(k,a),y(k,a),k}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929,"./arrays_to_calcdata":770}],773:[function(x,oe,ae){"use strict";oe.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(x,oe,ae){"use strict";var g=x("../bar/cross_trace_calc").setGroupPositions;oe.exports=function(m,w){var y,e,r=m._fullLayout,n=m._fullData,a=m.calcdata,t=w.xaxis,p=w.yaxis,u=[],i=[],c=[];for(e=0;e<n.length;e++){var f=n[e];!0===f.visible&&f.xaxis===t._id&&f.yaxis===p._id&&"funnel"===f.type&&(y=a[e],"h"===f.orientation?c.push(y):i.push(y),u.push(y))}var h={mode:r.funnelmode,norm:r.funnelnorm,gap:r.funnelgap,groupgap:r.funnelgroupgap};for(g(m,t,p,i,h),g(m,p,t,c,h),e=0;e<u.length;e++){y=u[e];for(var d=0;d<y.length;d++)d+1<y.length&&(y[d].nextP0=y[d+1].p0,y[d].nextS0=y[d+1].s0,y[d].nextP1=y[d+1].p1,y[d].nextS1=y[d+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../bar/defaults").handleGroupingDefaults,w=x("../bar/defaults").handleText,y=x("../scatter/xy_defaults"),e=x("../scatter/period_defaults"),r=x("./attributes"),n=x("../../components/color");oe.exports={supplyDefaults:function(a,t,p,u){function i(h,d){return g.coerce(a,t,r,h,d)}if(y(a,t,u,i)){e(a,t,u,i),i("xhoverformat"),i("yhoverformat"),i("orientation",t.y&&!t.x?"v":"h"),i("offset"),i("width");var c=i("text");i("hovertext"),i("hovertemplate");var f=i("textposition");w(a,t,u,i,f,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===t.textposition||t.texttemplate||i("textinfo",Array.isArray(c)?"text+value":"value");var l=i("marker.color",p);i("marker.line.color",n.defaultLine),i("marker.line.width"),i("connector.visible")&&(i("connector.fillcolor",(d=g.isArrayOrTypedArray(h=l)?"#000":h,n.addOpacity(d,.5*n.opacity(d)))),i("connector.line.width")&&(i("connector.line.color"),i("connector.line.dash")))}else t.visible=!1;var h,d},crossTraceDefaults:function(a,t){var p,u;function i(f){return g.coerce(u._input,u,r,f)}if("group"===t.funnelmode)for(var c=0;c<a.length;c++)p=(u=a[c])._input,m(p,u,t,i)}}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":771}],776:[function(x,oe,ae){"use strict";oe.exports=function(g,m){return g.x="xVal"in m?m.xVal:m.x,g.y="yVal"in m?m.yVal:m.y,"percentInitial"in m&&(g.percentInitial=m.percentInitial),"percentPrevious"in m&&(g.percentPrevious=m.percentPrevious),"percentTotal"in m&&(g.percentTotal=m.percentTotal),m.xa&&(g.xaxis=m.xa),m.ya&&(g.yaxis=m.ya),g}},{}],777:[function(x,oe,ae){"use strict";var g=x("../../components/color").opacity,m=x("../bar/hover").hoverOnBars,w=x("../../lib").formatPercent;oe.exports=function(y,e,r,n,a){var s,k,M,A,E,t=m(y,e,r,n,a);if(t){var p=t.cd,u=p[0].trace,c=p[t.index];t[("h"===u.orientation?"x":"y")+"LabelVal"]=c.s,t.percentInitial=c.begR,t.percentInitialLabel=w(c.begR,1),t.percentPrevious=c.difR,t.percentPreviousLabel=w(c.difR,1),t.percentTotal=c.sumR,t.percentTotalLabel=w(c.sumR,1);var f=c.hi||u.hoverinfo,l=[];if(f&&"none"!==f&&"skip"!==f){var h="all"===f,d=f.split("+"),o=function(_){return h||-1!==d.indexOf(_)};o("percent initial")&&l.push(t.percentInitialLabel+" of initial"),o("percent previous")&&l.push(t.percentPreviousLabel+" of previous"),o("percent total")&&l.push(t.percentTotalLabel+" of total")}return t.extraText=l.join("<br>"),t.color=(k=u.marker,A=(s=c).mlc||k.line.color,E=s.mlw||k.line.width,g(M=s.mc||k.color)?M:g(A)&&E?A:void 0),[t]}}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults").supplyDefaults,crossTraceDefaults:x("./defaults").crossTraceDefaults,supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc"),crossTraceCalc:x("./cross_trace_calc"),plot:x("./plot"),style:x("./style").style,hoverPoints:x("./hover"),eventData:x("./event_data"),selectPoints:x("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:x("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(x,oe,ae){"use strict";oe.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./layout_attributes");oe.exports=function(w,y,e){var r=!1;function n(p,u){return g.coerce(w,y,m,p,u)}for(var a=0;a<e.length;a++){var t=e[a];if(t.visible&&"funnel"===t.type){r=!0;break}}r&&(n("funnelmode"),n("funnelgap",.2),n("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=x("../../components/drawing"),y=x("../../constants/numerical").BADNUM,e=x("../bar/plot"),r=x("../bar/uniform_text").clearMinTextSize;function n(a,t,p,u){var i=[],c=[],f=u?t:p,l=u?p:t;return i[0]=f.c2p(a.s0,!0),c[0]=l.c2p(a.p0,!0),i[1]=f.c2p(a.s1,!0),c[1]=l.c2p(a.p1,!0),i[2]=f.c2p(a.nextS0,!0),c[2]=l.c2p(a.nextP0,!0),i[3]=f.c2p(a.nextS1,!0),c[3]=l.c2p(a.nextP1,!0),u?[i,c]:[c,i]}oe.exports=function(a,t,p,u){var c,f,d,o,i=a._fullLayout;r("funnel",i),c=a,d=(f=t).xaxis,o=f.yaxis,m.makeTraceGroups(u,p,"trace bars").each(function(_){var s=g.select(this),k=_[0].trace,M=m.ensureSingle(s,"g","regions");if(k.connector&&k.connector.visible){var A="h"===k.orientation,E=M.selectAll("g.region").data(m.identity);E.enter().append("g").classed("region",!0),E.exit().remove();var I=E.size();E.each(function(C,R){if(R===I-1||C.cNext){var O=n(C,d,o,A),D=O[0],L=O[1],B="";D[0]!==y&&L[0]!==y&&D[1]!==y&&L[1]!==y&&D[2]!==y&&L[2]!==y&&D[3]!==y&&L[3]!==y&&(B+=A?"M"+D[0]+","+L[1]+"L"+D[2]+","+L[2]+"H"+D[3]+"L"+D[1]+","+L[1]+"Z":"M"+D[1]+","+L[1]+"L"+D[2]+","+L[3]+"V"+L[2]+"L"+D[1]+","+L[0]+"Z"),""===B&&(B="M0,0Z"),m.ensureSingle(g.select(this),"path").attr("d",B).call(w.setClipUrl,f.layerClipId,c)}})}else M.remove()}),function(c,f,l,h){var d=f.xaxis,o=f.yaxis;m.makeTraceGroups(h,l,"trace bars").each(function(_){var s=g.select(this),k=_[0].trace,M=m.ensureSingle(s,"g","lines");if(k.connector&&k.connector.visible&&k.connector.line.width){var A="h"===k.orientation,E=M.selectAll("g.line").data(m.identity);E.enter().append("g").classed("line",!0),E.exit().remove();var I=E.size();E.each(function(C,R){if(R===I-1||C.cNext){var O=n(C,d,o,A),D=O[0],L=O[1],B="";void 0!==D[3]&&void 0!==L[3]&&(A?(B+="M"+D[0]+","+L[1]+"L"+D[2]+","+L[2],B+="M"+D[1]+","+L[1]+"L"+D[3]+","+L[2]):(B+="M"+D[1]+","+L[1]+"L"+D[2]+","+L[3],B+="M"+D[1]+","+L[0]+"L"+D[2]+","+L[2])),""===B&&(B="M0,0Z"),m.ensureSingle(g.select(this),"path").attr("d",B).call(w.setClipUrl,f.layerClipId,c)}})}else M.remove()})}(a,t,p,u),e.plot(a,t,p,u,{mode:i.funnelmode,norm:i.funnelmode,gap:i.funnelgap,groupgap:i.funnelgroupgap})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/drawing"),w=x("../../components/color"),y=x("../../constants/interactions").DESELECTDIM,e=x("../bar/style"),r=x("../bar/uniform_text").resizeText,n=e.styleTextPoints;oe.exports={style:function(a,t,p){var u=p||g.select(a).selectAll("g.funnellayer").selectAll("g.trace");r(a,u,"funnel"),u.style("opacity",function(i){return i[0].trace.opacity}),u.each(function(i){var c=g.select(this),f=i[0].trace;c.selectAll(".point > path").each(function(l){if(!l.isBlank){var h=f.marker;g.select(this).call(w.fill,l.mc||h.color).call(w.stroke,l.mlc||h.line.color).call(m.dashLine,h.line.dash,l.mlw||h.line.width).style("opacity",f.selectedpoints&&!l.selected?y:1)}}),n(c,f,a),c.selectAll(".regions").each(function(){g.select(this).selectAll("path").style("stroke-width",0).call(w.fill,f.connector.fillcolor)}),c.selectAll(".lines").each(function(){var l=f.connector.line;m.lineGroupStyle(g.select(this).selectAll("path"),l.width,l.color,l.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(x,oe,ae){"use strict";var g=x("../pie/attributes"),m=x("../../plots/attributes"),w=x("../../plots/domain").attributes,y=x("../../plots/template_attributes").hovertemplateAttrs,e=x("../../plots/template_attributes").texttemplateAttrs,r=x("../../lib/extend").extendFlat;oe.exports={labels:g.labels,label0:g.label0,dlabel:g.dlabel,values:g.values,marker:{colors:g.marker.colors,line:{color:r({},g.marker.line.color,{dflt:null}),width:r({},g.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:g.text,hovertext:g.hovertext,scalegroup:r({},g.scalegroup,{}),textinfo:r({},g.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:r({},m.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:y({},{keys:["label","color","value","text","percent"]}),textposition:r({},g.textposition,{values:["inside","none"],dflt:"inside"}),textfont:g.textfont,insidetextfont:g.insidetextfont,title:{text:g.title.text,font:g.title.font,position:r({},g.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:w({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901}],784:[function(x,oe,ae){"use strict";var g=x("../../plots/plots");ae.name="funnelarea",ae.plot=function(m,w,y,e){g.plotBasePlot(ae.name,m,w,y,e)},ae.clean=function(m,w,y,e){g.cleanBasePlot(ae.name,m,w,y,e)}},{"../../plots/plots":619}],785:[function(x,oe,ae){"use strict";var g=x("../pie/calc");oe.exports={calc:function(m,w){return g.calc(m,w)},crossTraceCalc:function(m){g.crossTraceCalc(m,{type:"funnelarea"})}}},{"../pie/calc":903}],786:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./attributes"),w=x("../../plots/domain").defaults,y=x("../bar/defaults").handleText,e=x("../pie/defaults").handleLabelsAndValues;oe.exports=function(r,n,a,t){function p(_,s){return g.coerce(r,n,m,_,s)}var u=p("labels"),i=p("values"),c=e(u,i),f=c.len;if(n._hasLabels=c.hasLabels,n._hasValues=c.hasValues,!n._hasLabels&&n._hasValues&&(p("label0"),p("dlabel")),f){n._length=f,p("marker.line.width")&&p("marker.line.color",t.paper_bgcolor),p("marker.colors"),p("scalegroup");var l,h=p("text"),d=p("texttemplate");if(d||(l=p("textinfo",Array.isArray(h)?"text+percent":"percent")),p("hovertext"),p("hovertemplate"),d||l&&"none"!==l){var o=p("textposition");y(r,n,t,p,o,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}w(n,t,p),p("title.text")&&(p("title.position"),g.coerceFont(p,"title.font",t.font)),p("aspectratio"),p("baseratio")}else n.visible=!1}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":904,"./attributes":783}],787:[function(x,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"funnelarea",basePlotModule:x("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot"),style:x("./style"),styleOne:x("../pie/style_one"),meta:{}}},{"../pie/style_one":912,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(x,oe,ae){"use strict";var g=x("../pie/layout_attributes").hiddenlabels;oe.exports={hiddenlabels:g,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":908}],789:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./layout_attributes");oe.exports=function(w,y){function e(r,n){return g.coerce(w,y,m,r,n)}e("hiddenlabels"),e("funnelareacolorway",y.colorway),e("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/drawing"),w=x("../../lib"),y=w.strScale,e=w.strTranslate,r=x("../../lib/svg_text_utils"),n=x("../bar/plot").toMoveInsideBar,a=x("../bar/uniform_text"),t=a.recordMinTextSize,p=a.clearMinTextSize,u=x("../pie/helpers"),i=x("../pie/plot"),c=i.attachFxHandlers,f=i.determineInsideTextFont,l=i.layoutAreas,h=i.prerenderTitles,d=i.positionTitleOutside,o=i.formatSliceLabel;function _(s,k){return"l"+(k[0]-s[0])+","+(k[1]-s[1])}oe.exports=function(s,k){var M=s._fullLayout;p("funnelarea",M),h(k,s),l(k,M._size),w.makeTraceGroups(M._funnelarealayer,k,"trace").each(function(A){var E=g.select(this),I=A[0],C=I.trace;(function(R){if(R.length){var O=R[0],D=O.trace,L=D.aspectratio,B=D.baseratio;B>.999&&(B=.999);var j,$,re,W=Math.pow(B,2),Y=O.vTotal,Q=Y,ne=Y*W/(1-W)/Y,H=[];for(H.push(X()),$=R.length-1;$>-1;$--)(re=R[$]).hidden||(ne+=re.v/Q,H.push(X()));var G=1/0,ie=-1/0;for($=0;$<H.length;$++)j=H[$],G=Math.min(G,j[1]),ie=Math.max(ie,j[1]);for($=0;$<H.length;$++)H[$][1]-=(ie+G)/2;var ee=O.r,te=(ie-G)/2,se=ee/H[H.length-1][0],ue=ee/te*L;for(O.r=ue*te,$=0;$<H.length;$++)H[$][0]*=se,H[$][1]*=ue;var Ce,Le,de=[-(j=H[0])[0],j[1]],he=[j[0],j[1]],xe=0;for($=R.length-1;$>-1;$--)if(!(re=R[$]).hidden){var ge=H[xe+=1][0],_e=H[xe][1];re.TL=[-ge,_e],re.TR=[ge,_e],re.BL=de,re.BR=he,re.pxmid=[.5*((Ce=re.TR)[0]+(Le=re.BR)[0]),.5*(Ce[1]+Le[1])],de=re.TL,he=re.TR}}function X(){var Ie,Be={x:Ie=Math.sqrt(ne),y:-Ie};return[Be.x,Be.y]}})(A),E.each(function(){var R=g.select(this).selectAll("g.slice").data(A);R.enter().append("g").classed("slice",!0),R.exit().remove(),R.each(function(D,L){if(D.hidden)g.select(this).selectAll("path,g").remove();else{D.pointNumber=D.i,D.curveNumber=C.index;var B=I.cx,j=I.cy,W=g.select(this),Y=W.selectAll("path.surface").data([D]);Y.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),W.call(c,s,A);var Q="M"+(B+D.TR[0])+","+(j+D.TR[1])+_(D.TR,D.BR)+_(D.BR,D.BL)+_(D.BL,D.TL)+"Z";Y.attr("d",Q),o(s,D,I);var ne=u.castOption(C.textposition,D.pts),X=W.selectAll("g.slicetext").data(D.text&&"none"!==ne?[0]:[]);X.enter().append("g").classed("slicetext",!0),X.exit().remove(),X.each(function(){var $=w.ensureSingle(g.select(this),"text","",function(te){te.attr("data-notex",1)}),re=w.ensureUniformFontSize(s,f(C,D,M.font));$.text(D.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(m.font,re).call(r.convertToTspans,s);var H,U,G,ie=m.bBox($.node()),q=Math.min(D.BL[1],D.BR[1])+j,ee=Math.max(D.TL[1],D.TR[1])+j;U=Math.max(D.TL[0],D.BL[0])+B,G=Math.min(D.TR[0],D.BR[0])+B,(H=n(U,G,q,ee,ie,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=re.size,t(C.type,H,M),A[L].transform=H,$.attr("transform",w.getTextTransform(H))})}});var O=g.select(this).selectAll("g.titletext").data(C.title.text?[0]:[]);O.enter().append("g").classed("titletext",!0),O.exit().remove(),O.each(function(){var D=w.ensureSingle(g.select(this),"text","",function(j){j.attr("data-notex",1)}),L=C.title.text;C._meta&&(L=w.templateString(L,C._meta)),D.text(L).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(m.font,C.title.font).call(r.convertToTspans,s);var B=d(I,M._size);D.attr("transform",e(B.x,B.y)+y(Math.min(1,B.scale))+e(B.tx,B.ty))})})})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":906,"../pie/plot":910,"@plotly/d3":58}],791:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../pie/style_one"),w=x("../bar/uniform_text").resizeText;oe.exports=function(y){var e=y._fullLayout._funnelarealayer.selectAll(".trace");w(y,e,"funnelarea"),e.each(function(r){var n=r[0].trace,a=g.select(this);a.style({opacity:n.opacity}),a.selectAll("path.surface").each(function(t){g.select(this).call(m,t,n)})})}},{"../bar/uniform_text":664,"../pie/style_one":912,"@plotly/d3":58}],792:[function(x,oe,ae){"use strict";var g=x("../scatter/attributes"),m=x("../../plots/attributes"),w=x("../../plots/font_attributes"),y=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=x("../../plots/template_attributes").hovertemplateAttrs,r=x("../../plots/template_attributes").texttemplateAttrs,n=x("../../components/colorscale/attributes"),a=x("../../lib/extend").extendFlat;oe.exports=a({z:{valType:"data_array",editType:"calc"},x:a({},g.x,{impliedEdits:{xtype:"array"}}),x0:a({},g.x0,{impliedEdits:{xtype:"scaled"}}),dx:a({},g.dx,{impliedEdits:{xtype:"scaled"}}),y:a({},g.y,{impliedEdits:{ytype:"array"}}),y0:a({},g.y0,{impliedEdits:{ytype:"scaled"}}),dy:a({},g.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:a({},g.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:a({},g.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:a({},g.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:a({},g.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:a({},g.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:a({},g.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:e(),texttemplate:r({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:w({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:a({},m.showlegend,{dflt:!1})},{transforms:void 0},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":927}],793:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../lib"),w=x("../../plots/cartesian/axes"),y=x("../../plots/cartesian/align_period"),e=x("../histogram2d/calc"),r=x("../../components/colorscale/calc"),n=x("./convert_column_xyz"),a=x("./clean_2d_array"),t=x("./interp2d"),p=x("./find_empties"),u=x("./make_bound_array"),i=x("../../constants/numerical").BADNUM;function c(f){for(var l=[],h=f.length,d=0;d<h;d++){var o=f[d];o!==i&&l.push(o)}return l}oe.exports=function(f,l){var h,d,o,_,s,k,M,A,E,I,C,R=w.getFromId(f,l.xaxis||"x"),O=w.getFromId(f,l.yaxis||"y"),D=g.traceIs(l,"contour"),L=g.traceIs(l,"histogram"),B=g.traceIs(l,"gl2d"),j=D?"best":l.zsmooth;if(R._minDtick=0,O._minDtick=0,L)_=(C=e(f,l)).orig_x,h=C.x,d=C.x0,o=C.dx,A=C.orig_y,s=C.y,k=C.y0,M=C.dy,E=C.z;else{var W=l.z;m.isArray1D(W)?(n(l,R,O,"x","y",["z"]),h=l._x,s=l._y,W=l._z):(_=l.x?R.makeCalcdata(l,"x"):[],A=l.y?O.makeCalcdata(l,"y"):[],h=y(l,R,"x",_).vals,s=y(l,O,"y",A).vals,l._x=h,l._y=s),d=l.x0,o=l.dx,k=l.y0,M=l.dy,E=a(W,l,R,O)}function Y(te){j=l._input.zsmooth=l.zsmooth=!1,m.warn('cannot use zsmooth: "fast": '+te)}if((R.rangebreaks||O.rangebreaks)&&(E=function(te,se,ue){for(var de=[],he=-1,xe=0;xe<ue.length;xe++)if(se[xe]!==i){de[++he]=[];for(var ge=0;ge<ue[xe].length;ge++)te[ge]!==i&&de[he].push(ue[xe][ge])}return de}(h,s,E),L||(h=c(h),s=c(s),l._x=h,l._y=s)),L||!D&&!l.connectgaps||(l._emptypoints=p(E),t(E,l._emptypoints)),"fast"===j)if("log"===R.type||"log"===O.type)Y("log axis found");else if(!L){if(h.length){var Q=(h[h.length-1]-h[0])/(h.length-1),ne=Math.abs(Q/100);for(I=0;I<h.length-1;I++)if(Math.abs(h[I+1]-h[I]-Q)>ne){Y("x scale is not linear");break}}if(s.length&&"fast"===j){var X=(s[s.length-1]-s[0])/(s.length-1),$=Math.abs(X/100);for(I=0;I<s.length-1;I++)if(Math.abs(s[I+1]-s[I]-X)>$){Y("y scale is not linear");break}}}var re=m.maxRowLength(E),H="scaled"===l.xtype?"":h,U=u(l,H,d,o,re,R),G="scaled"===l.ytype?"":s,ie=u(l,G,k,M,E.length,O);B||(l._extremes[R._id]=w.findExtremes(R,U),l._extremes[O._id]=w.findExtremes(O,ie));var q={x:U,y:ie,z:E,text:l._text||l.text,hovertext:l._hovertext||l.hovertext};if(l.xperiodalignment&&_&&(q.orig_x=_),l.yperiodalignment&&A&&(q.orig_y=A),H&&H.length===U.length-1&&(q.xCenter=H),G&&G.length===ie.length-1&&(q.yCenter=G),L&&(q.xRanges=C.xRanges,q.yRanges=C.yRanges,q.pts=C.pts),D||r(f,l,{vals:E,cLetter:"z"}),D&&l.contours&&"heatmap"===l.contours.coloring){var ee={type:"contour"===l.type?"heatmap":"histogram2d",xcalendar:l.xcalendar,ycalendar:l.ycalendar};q.xfill=u(ee,H,d,o,re,R),q.yfill=u(ee,G,k,M,E.length,O)}return[q]}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib"),w=x("../../constants/numerical").BADNUM;oe.exports=function(y,e,r,n){var a,t,p,u,i,c;function f(s){if(g(s))return+s}if(e&&e.transpose){for(a=0,i=0;i<y.length;i++)a=Math.max(a,y[i].length);if(0===a)return!1;p=function(s){return s.length},u=function(s,k,M){return(s[M]||[])[k]}}else a=y.length,p=function(s,k){return s[k].length},u=function(s,k,M){return(s[k]||[])[M]};function h(s){if(e&&"carpet"!==e.type&&"contourcarpet"!==e.type&&s&&"category"===s.type&&e["_"+s._id.charAt(0)].length){var k=s._id.charAt(0),M={},A=e["_"+k+"CategoryMap"]||e[k];for(i=0;i<A.length;i++)M[A[i]]=i;return function(E){var I=M[s._categories[E]];return I+1?I:w}}return m.identity}var d=h(r),o=h(n);n&&"category"===n.type&&(a=n._categories.length);var s,k,M,_=new Array(a);for(i=0;i<a;i++)for(t=r&&"category"===r.type?r._categories.length:p(y,i),_[i]=new Array(t),c=0;c<t;c++)_[i][c]=f((s=y,k=o(i),M=d(c),k===w||M===w?w:u(s,k,M)));return _}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(x,oe,ae){"use strict";oe.exports={min:"zmin",max:"zmax"}},{}],796:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../constants/numerical").BADNUM,w=x("../../plots/cartesian/align_period");oe.exports=function(y,e,r,n,a,t){var p=y._length,u=e.makeCalcdata(y,n),i=r.makeCalcdata(y,a);u=w(y,e,n,u).vals,i=w(y,r,a,i).vals;var c,f,l,h,d=y.text,o=void 0!==d&&g.isArray1D(d),_=y.hovertext,s=void 0!==_&&g.isArray1D(_),k=g.distinctVals(u),M=k.vals,A=g.distinctVals(i),E=A.vals,I=[],C=E.length,R=M.length;for(c=0;c<t.length;c++)I[c]=g.init2dArray(C,R);o&&(l=g.init2dArray(C,R)),s&&(h=g.init2dArray(C,R));var O=g.init2dArray(C,R);for(c=0;c<p;c++)if(u[c]!==m&&i[c]!==m){var D=g.findBin(u[c]+k.minDiff/2,M),L=g.findBin(i[c]+A.minDiff/2,E);for(f=0;f<t.length;f++)I[f][L][D]=y[t[f]][c],O[L][D]=c;o&&(l[L][D]=d[c]),s&&(h[L][D]=_[c])}for(y["_"+n]=M,y["_"+a]=E,f=0;f<t.length;f++)y["_"+t[f]]=I[f];o&&(y._text=l),s&&(y._hovertext=h),e&&"category"===e.type&&(y["_"+n+"CategoryMap"]=M.map(function(j){return e._categories[j]})),r&&"category"===r.type&&(y["_"+a+"CategoryMap"]=E.map(function(j){return r._categories[j]})),y._after2before=O}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./xyz_defaults"),w=x("./label_defaults"),y=x("../scatter/period_defaults"),e=x("./style_defaults"),r=x("../../components/colorscale/defaults"),n=x("./attributes");oe.exports=function(a,t,p,u){function i(c,f){return g.coerce(a,t,n,c,f)}m(a,t,i,u)?(y(a,t,u,i),i("xhoverformat"),i("yhoverformat"),i("text"),i("hovertext"),i("hovertemplate"),w(i,u),e(a,t,i,u),i("hoverongaps"),i("connectgaps",g.isArray1D(t.z)&&!1!==t.zsmooth),r(a,t,u,i,{prefix:"",cLetter:"z"})):t.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":947,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(x,oe,ae){"use strict";var g=x("../../lib").maxRowLength;oe.exports=function(m){var w,y,e,r,n,a,t,p,u=[],i={},c=[],f=m[0],l=[],h=[0,0,0],d=g(m);for(y=0;y<m.length;y++)for(w=l,l=f,f=m[y+1]||[],e=0;e<d;e++)void 0===l[e]&&((a=(void 0!==l[e-1]?1:0)+(void 0!==l[e+1]?1:0)+(void 0!==w[e]?1:0)+(void 0!==f[e]?1:0))?(0===y&&a++,0===e&&a++,y===m.length-1&&a++,e===l.length-1&&a++,a<4&&(i[[y,e]]=[y,e,a]),u.push([y,e,a])):c.push([y,e]));for(;c.length;){for(t={},p=!1,n=c.length-1;n>=0;n--)(a=((i[[(y=(r=c[n])[0])-1,e=r[1]]]||h)[2]+(i[[y+1,e]]||h)[2]+(i[[y,e-1]]||h)[2]+(i[[y,e+1]]||h)[2])/20)&&(t[r]=[y,e,a],c.splice(n,1),p=!0);if(!p)throw"findEmpties iterated with no new neighbors";for(r in t)i[r]=t[r],u.push(t[r])}return u.sort(function(o,_){return _[2]-o[2]})}},{"../../lib":503}],799:[function(x,oe,ae){"use strict";var g=x("../../components/fx"),m=x("../../lib"),w=x("../../plots/cartesian/axes"),y=x("../../components/colorscale").extractOpts;oe.exports=function(e,r,n,a,t){t||(t={});var p,u,i,c,f=t.isContour,l=e.cd[0],h=l.trace,d=e.xa,o=e.ya,_=l.x,s=l.y,k=l.z,M=l.xCenter,A=l.yCenter,E=l.zmask,I=h.zhoverformat,C=_,R=s;if(!1!==e.index){try{i=Math.round(e.index[1]),c=Math.round(e.index[0])}catch(H){return void m.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(i<0||i>=k[0].length||c<0||c>k.length)return}else{if(g.inbox(r-_[0],r-_[_.length-1],0)>0||g.inbox(n-s[0],n-s[s.length-1],0)>0)return;if(f){var O;for(C=[2*_[0]-_[1]],O=1;O<_.length;O++)C.push((_[O]+_[O-1])/2);for(C.push([2*_[_.length-1]-_[_.length-2]]),R=[2*s[0]-s[1]],O=1;O<s.length;O++)R.push((s[O]+s[O-1])/2);R.push([2*s[s.length-1]-s[s.length-2]])}i=Math.max(0,Math.min(C.length-2,m.findBin(r,C))),c=Math.max(0,Math.min(R.length-2,m.findBin(n,R)))}var D,L,B=d.c2p(_[i]),j=d.c2p(_[i+1]),W=o.c2p(s[c]),Y=o.c2p(s[c+1]);f?(j=B,p=(D=l.orig_x||_)[i],Y=W,u=(L=l.orig_y||s)[c]):(D=l.orig_x||M||_,L=l.orig_y||A||s,p=M?D[i]:(D[i]+D[i+1])/2,u=A?L[c]:(L[c]+L[c+1])/2,d&&"category"===d.type&&(p=_[i]),o&&"category"===o.type&&(u=s[c]),h.zsmooth&&(B=j=d.c2p(p),W=Y=o.c2p(u)));var Q=k[c][i];if(E&&!E[c][i]&&(Q=void 0),void 0!==Q||h.hoverongaps){var ne;Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[c])?ne=l.hovertext[c][i]:Array.isArray(l.text)&&Array.isArray(l.text[c])&&(ne=l.text[c][i]);var X=y(h),re=w.tickText({type:"linear",range:[X.min,X.max],hoverformat:I,_separators:d._separators,_numFormat:d._numFormat},Q,"hover").text;return[m.extendFlat(e,{index:h._after2before?h._after2before[c][i]:[c,i],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:B,x1:j,y0:W,y1:Y,xLabelVal:p,yLabelVal:u,zLabelVal:Q,zLabel:re,text:ne})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot"),colorbar:x("./colorbar"),style:x("./style"),hoverPoints:x("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=[[-1,0],[1,0],[0,-1],[0,1]];function w(e){return.5-.25*Math.min(1,.5*e)}function y(e,r,n){var a,t,p,u,i,c,f,l,h,d,o,_,s,k=0;for(u=0;u<r.length;u++){for(o=e[t=(a=r[u])[0]][p=a[1]],d=0,h=0,i=0;i<4;i++)(f=e[t+(c=m[i])[0]])&&void 0!==(l=f[p+c[1]])&&(0===d?_=s=l:(_=Math.min(_,l),s=Math.max(s,l)),h++,d+=l);if(0===h)throw"iterateInterp2d order is wrong: no defined neighbors";e[t][p]=d/h,void 0===o?h<4&&(k=1):(e[t][p]=(1+n)*e[t][p]-n*o,s>_&&(k=Math.max(k,Math.abs(e[t][p]-o)/(s-_))))}return k}oe.exports=function(e,r){var n,a=1;for(y(e,r),n=0;n<r.length&&!(r[n][2]<4);n++);for(r=r.slice(n),n=0;n<100&&a>.01;n++)a=y(e,r,w(a));return a>.01&&g.log("interp2d didn't converge quickly",a),e}},{"../../lib":503}],802:[function(x,oe,ae){"use strict";var g=x("../../lib");oe.exports=function(m,w){m("texttemplate");var y=g.extendFlat({},w.font,{color:"auto",size:"auto"});g.coerceFont(m,"textfont",y)}},{"../../lib":503}],803:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../lib").isArrayOrTypedArray;oe.exports=function(w,y,e,r,n,a){var t,p,u,i=[],c=g.traceIs(w,"contour"),f=g.traceIs(w,"histogram"),l=g.traceIs(w,"gl2d");if(m(y)&&y.length>1&&!f&&"category"!==a.type){var h=y.length;if(!(h<=n))return y.slice(0,c?n:n+1);if(c||l)i=y.slice(0,n);else if(1===n)i=[y[0]-.5,y[0]+.5];else{for(i=[1.5*y[0]-.5*y[1]],u=1;u<h;u++)i.push(.5*(y[u-1]+y[u]));i.push(1.5*y[h-1]-.5*y[h-2])}if(h<n){var d=i[i.length-1],o=d-i[i.length-2];for(u=h;u<n;u++)i.push(d+=o)}}else{var _=w[a._id.charAt(0)+"calendar"];for(t=f?a.r2c(e,0,_):m(y)&&1===y.length?y[0]:void 0===e?0:("log"===a.type?a.d2c:a.r2c)(e,0,_),p=r||1,u=c||l?0:-.5;u<n;u++)i.push(t+p*u)}return i}},{"../../lib":503,"../../registry":638}],804:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("tinycolor2"),w=x("../../registry"),y=x("../../components/drawing"),e=x("../../plots/cartesian/axes"),r=x("../../lib"),n=x("../../lib/svg_text_utils"),a=x("../scatter/format_labels"),t=x("../../components/color"),p=x("../../components/colorscale").extractOpts,u=x("../../components/colorscale").makeColorScaleFuncFromTrace,i=x("../../constants/xmlns_namespaces"),c=x("../../constants/alignment").LINE_SPACING;function f(_){return _.selectAll("g.heatmap-label")}function l(_){f(_).remove()}function h(_,s){var k=s.length-2,M=r.constrain(r.findBin(_,s),0,k),A=s[M],I=r.constrain(M+(_-A)/(s[M+1]-A)-.5,0,k),C=Math.round(I),R=Math.abs(I-C);return I&&I!==k&&R?{bin0:C,frac:R,bin1:Math.round(C+R/(I-C))}:{bin0:C,bin1:C,frac:0}}function d(_,s){var k=s.length-1,M=r.constrain(r.findBin(_,s),0,k),A=s[M],E=(_-A)/(s[M+1]-A)||0;return E<=0?{bin0:M,bin1:M,frac:0}:E<.5?{bin0:M,bin1:M+1,frac:E}:{bin0:M+1,bin1:M,frac:1-E}}function o(_,s,k){_[s]=k[0],_[s+1]=k[1],_[s+2]=k[2],_[s+3]=Math.round(255*k[3])}oe.exports=function(_,s,k,M){var A=s.xaxis,E=s.yaxis;r.makeTraceGroups(M,k,"hm").each(function(I){var C,R,O,D,L,B,j,W,Y=g.select(this),Q=I[0],ne=Q.trace,X=ne.xgap||0,$=ne.ygap||0,re=Q.z,H=Q.x,U=Q.y,G=Q.xCenter,ie=Q.yCenter,q=w.traceIs(ne,"contour"),ee=q?"best":ne.zsmooth,te=re.length,se=r.maxRowLength(re),ue=!1,de=!1;for(B=0;void 0===C&&B<H.length-1;)C=A.c2p(H[B]),B++;for(B=H.length-1;void 0===R&&B>0;)R=A.c2p(H[B]),B--;for(R<C&&(O=R,R=C,C=O,ue=!0),B=0;void 0===D&&B<U.length-1;)D=E.c2p(U[B]),B++;for(B=U.length-1;void 0===L&&B>0;)L=E.c2p(U[B]),B--;if(L<D&&(O=D,D=L,L=O,de=!0),q&&(G=H,ie=U,H=Q.xfill,U=Q.yfill),"fast"!==ee){var he="best"===ee?0:.5;C=Math.max(-he*A._length,C),R=Math.min((1+he)*A._length,R),D=Math.max(-he*E._length,D),L=Math.min((1+he)*E._length,L)}var xe,ge,_e=Math.round(R-C),Ce=Math.round(L-D);if(_e<=0||Ce<=0)return Y.selectAll("image").data([]).exit().remove(),void l(Y);"fast"===ee?(xe=se,ge=te):(xe=_e,ge=Ce);var Le=document.createElement("canvas");Le.width=xe,Le.height=ge;var Ie,Be,ve=Le.getContext("2d"),Te=u(ne,{noNumericCheck:!0,returnArray:!0});"fast"===ee?(Ie=ue?function(Br){return se-1-Br}:r.identity,Be=de?function(Br){return te-1-Br}:r.identity):(Ie=function(Br){return r.constrain(Math.round(A.c2p(H[Br])-C),0,_e)},Be=function(Br){return r.constrain(Math.round(E.c2p(U[Br])-D),0,Ce)});var Pe,De,Fe,Ue,He=Be(0),Ke=[He,He],st=ue?0:1,Ve=de?0:1,$e=0,Qe=0,tt=0,ut=0;function xt(Br,Dr){if(void 0!==Br){var Rr=Te(Br);return Rr[0]=Math.round(Rr[0]),Rr[1]=Math.round(Rr[1]),Rr[2]=Math.round(Rr[2]),$e+=Dr,Qe+=Rr[0]*Dr,tt+=Rr[1]*Dr,ut+=Rr[2]*Dr,Rr}return[0,0,0,0]}function kt(Br,Dr,Rr,yi){var $n=Br[Rr.bin0];if(void 0===$n)return xt(void 0,1);var br=Br[Rr.bin1],ar=Dr[Rr.bin0],si=Dr[Rr.bin1];return xt($n+Rr.frac*(br-$n||0)+yi.frac*((ar-$n||0)+Rr.frac*(void 0===br?void 0===si?0:void 0===ar?2*(si-$n):2*(2*si-ar-$n)/3:void 0===si?void 0===ar?0:2*(2*$n-br-ar)/3:void 0===ar?2*(2*si-br-$n)/3:si+$n-br-ar)))}if(ee){var Bt,Rt=0;try{Bt=new Uint8Array(_e*Ce*4)}catch(Br){Bt=new Array(_e*Ce*4)}if("best"===ee){var ft,lt,Ft,Jt=G||H,ln=ie||U,dn=new Array(Jt.length),cn=new Array(ln.length),Tn=new Array(_e),nn=G?d:h,Me=ie?d:h;for(B=0;B<Jt.length;B++)dn[B]=Math.round(A.c2p(Jt[B])-C);for(B=0;B<ln.length;B++)cn[B]=Math.round(E.c2p(ln[B])-D);for(B=0;B<_e;B++)Tn[B]=nn(B,dn);for(j=0;j<Ce;j++)for(lt=re[(ft=Me(j,cn)).bin0],Ft=re[ft.bin1],B=0;B<_e;B++,Rt+=4)o(Bt,Rt,Ue=kt(lt,Ft,Tn[B],ft))}else for(j=0;j<te;j++)for(Fe=re[j],Ke=Be(j),B=0;B<_e;B++)Ue=xt(Fe[B],1),o(Bt,Rt=4*(Ke*_e+Ie(B)),Ue);var Ee=ve.createImageData(_e,Ce);try{Ee.data.set(Bt)}catch(Br){var Se=Ee.data,je=Se.length;for(j=0;j<je;j++)Se[j]=Bt[j]}ve.putImageData(Ee,0,0)}else{var qe=Math.floor(X/2),Je=Math.floor($/2);for(j=0;j<te;j++)if(Fe=re[j],Ke.reverse(),Ke[Ve]=Be(j+1),Ke[0]!==Ke[1]&&void 0!==Ke[0]&&void 0!==Ke[1])for(Pe=[De=Ie(0),De],B=0;B<se;B++)Pe.reverse(),Pe[st]=Ie(B+1),Pe[0]!==Pe[1]&&void 0!==Pe[0]&&void 0!==Pe[1]&&(Ue=xt(Fe[B],(Pe[1]-Pe[0])*(Ke[1]-Ke[0])),ve.fillStyle="rgba("+Ue.join(",")+")",ve.fillRect(Pe[0]+qe,Ke[0]+Je,Pe[1]-Pe[0]-X,Ke[1]-Ke[0]-$))}Qe=Math.round(Qe/$e),tt=Math.round(tt/$e),ut=Math.round(ut/$e);var at=m("rgb("+Qe+","+tt+","+ut+")");_._hmpixcount=(_._hmpixcount||0)+$e,_._hmlumcount=(_._hmlumcount||0)+$e*at.getLuminance();var it=Y.selectAll("image").data(I);it.enter().append("svg:image").attr({xmlns:i.svg,preserveAspectRatio:"none"}),it.attr({height:Ce,width:_e,x:C,y:D,"xlink:href":Le.toDataURL("image/png")}),l(Y);var yt=ne.texttemplate;if(yt){var vt=p(ne),Ut={type:"linear",range:[vt.min,vt.max],_separators:A._separators,_numFormat:A._numFormat},Wt="histogram2dcontour"===ne.type,gt="contour"===ne.type,At=gt?te-1:te,Zt=gt?1:0,Et=gt?se-1:se,Ct=[];for(B=gt?1:0;B<At;B++){var Ne;if(gt)Ne=Q.y[B];else if(Wt){if(0===B||B===te-1)continue;Ne=Q.y[B]}else if(Q.yCenter)Ne=Q.yCenter[B];else{if(B+1===te&&void 0===Q.y[B+1])continue;Ne=(Q.y[B]+Q.y[B+1])/2}var et=Math.round(E.c2p(Ne));if(!(0>et||et>E._length))for(j=Zt;j<Et;j++){var dt;if(gt)dt=Q.x[j];else if(Wt){if(0===j||j===se-1)continue;dt=Q.x[j]}else if(Q.xCenter)dt=Q.xCenter[j];else{if(j+1===se&&void 0===Q.x[j+1])continue;dt=(Q.x[j]+Q.x[j+1])/2}var Mt=Math.round(A.c2p(dt));if(!(0>Mt||Mt>A._length)){var zt=a({x:dt,y:Ne},ne,_._fullLayout);zt.x=dt,zt.y=Ne;var Xt=Q.z[B][j];void 0===Xt?(zt.z="",zt.zLabel=""):(zt.z=Xt,zt.zLabel=e.tickText(Ut,Xt,"hover").text);var un=Q.text&&Q.text[B]&&Q.text[B][j];void 0!==un&&!1!==un||(un=""),zt.text=un;var Qt=r.texttemplateString(yt,zt,_._fullLayout._d3locale,zt,ne._meta||{});if(Qt){var kn=Qt.split("<br>"),qn=kn.length,gn=0;for(W=0;W<qn;W++)gn=Math.max(gn,kn[W].length);Ct.push({l:qn,c:gn,t:Qt,x:Mt,y:et,z:Xt})}}}}var sn=ne.textfont,vn=sn.family,pn=sn.size,Mn=_._fullLayout.font.size;if(!pn||"auto"===pn){var Rn=1/0,Xn=1/0,Hn=0,rr=0;for(W=0;W<Ct.length;W++){var er=Ct[W];if(Hn=Math.max(Hn,er.l),rr=Math.max(rr,er.c),W<Ct.length-1){var Ir=Ct[W+1],Or=Math.abs(Ir.x-er.x),ni=Math.abs(Ir.y-er.y);Or&&(Rn=Math.min(Rn,Or)),ni&&(Xn=Math.min(Xn,ni))}}isFinite(Rn)&&isFinite(Xn)?(Rn-=X,Xn-=$,Rn/=rr,Xn/=Hn,Rn/=c/2,Xn/=c,pn=Math.min(Math.floor(Rn),Math.floor(Xn),Mn)):pn=Mn}if(pn<=0||!isFinite(pn))return;f(Y).data(Ct).enter().append("g").classed("heatmap-label",1).append("text").attr("text-anchor","middle").each(function(Br){var yi,Dr=g.select(this),Rr=sn.color;Rr&&"auto"!==Rr||(Rr=t.contrast("rgba("+Te(Br.z).join()+")")),Dr.attr("data-notex",1).call(n.positionText,(yi=Br,yi.x),function(yi){return yi.y-pn*(yi.l*c/2-1)}(Br)).call(y.font,vn,pn,Rr).text(Br.t).call(n.convertToTspans,_)})}})}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":936,"@plotly/d3":58,tinycolor2:312}],805:[function(x,oe,ae){"use strict";var g=x("@plotly/d3");oe.exports=function(m){g.select(m).selectAll(".hm image").style("opacity",function(w){return w.trace.opacity})}},{"@plotly/d3":58}],806:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w){!1===w("zsmooth")&&(w("xgap"),w("ygap")),w("zhoverformat")}},{}],807:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib"),w=x("../../registry");function y(e,r){var n=r(e);return"scaled"===(n?r(e+"type","array"):"scaled")&&(r(e+"0"),r("d"+e)),n}oe.exports=function(e,r,n,a,t,p){var u,i,c=n("z");if(t=t||"x",p=p||"y",void 0===c||!c.length)return 0;if(m.isArray1D(e.z)){u=n(t),i=n(p);var f=m.minRowLength(u),l=m.minRowLength(i);if(0===f||0===l)return 0;r._length=Math.min(f,l,c.length)}else{if(u=y(t,n),i=y(p,n),!function(h){for(var d,o=!0,_=!1,s=!1,k=0;k<h.length;k++){if(!m.isArrayOrTypedArray(d=h[k])){o=!1;break}d.length>0&&(_=!0);for(var M=0;M<d.length;M++)if(g(d[M])){s=!0;break}}return o&&_&&s}(c))return 0;n("transpose"),r._length=null}return"heatmapgl"===e.type||w.getComponentMethod("calendars","handleTraceDefaults")(e,r,[t,p],a),!0}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(x,oe,ae){"use strict";for(var g=x("../heatmap/attributes"),m=x("../../components/colorscale/attributes"),w=x("../../lib/extend").extendFlat,y=x("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],r={},n=0;n<e.length;n++){var a=e[n];r[a]=g[a]}r.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},w(r,m("",{cLetter:"z",autoColorDflt:!1})),oe.exports=y(r,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(x,oe,ae){"use strict";var g=x("../../../stackgl_modules").gl_heatmap2d,m=x("../../plots/cartesian/axes"),w=x("../../lib/str2rgbarray");function y(r,n){this.scene=r,this.uid=n,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=g(r.glplot,this.options),this.heatmap._trace=this}var e=y.prototype;e.handlePick=function(r){var n=this.options,a=n.shape,t=r.pointId,p=t%a[0],u=Math.floor(t/a[0]);return{trace:this,dataCoord:r.dataCoord,traceCoord:[n.x[p],n.y[u],n.z[t]],textLabel:this.textLabels[t],name:this.name,pointIndex:[u,p],hoverinfo:this.hoverinfo}},e.update=function(r,n){var a=n[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var t=a.z;this.options.z=[].concat.apply([],t),this.options.shape=[t[0].length,t.length],this.options.x=a.x,this.options.y=a.y,this.options.zsmooth=r.zsmooth;var i=function(d){for(var o=d.colorscale,_=d.zmin,s=d.zmax,k=o.length,M=new Array(k),A=new Array(4*k),E=0;E<k;E++){var I=o[E],C=w(I[1]);M[E]=_+I[0]*(s-_);for(var R=0;R<4;R++)A[4*E+R]=C[R]}return{colorLevels:M,colorValues:A}}(r);this.options.colorLevels=i.colorLevels,this.options.colorValues=i.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var c,f,l=this.scene.xaxis,h=this.scene.yaxis;!1===r.zsmooth&&(c={ppad:a.x[1]-a.x[0]},f={ppad:a.y[1]-a.y[0]}),r._extremes[l._id]=m.findExtremes(l,a.x,c),r._extremes[h._id]=m.findExtremes(h,a.y,f)},e.dispose=function(){this.heatmap.dispose()},oe.exports=function(r,n,a){var t=new y(r,n.uid);return t.update(n,a),t}},{"../../../stackgl_modules":1124,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../heatmap/xyz_defaults"),w=x("../../components/colorscale/defaults"),y=x("./attributes");oe.exports=function(e,r,n,a){function t(p,u){return g.coerce(e,r,y,p,u)}m(e,r,t,a)?(t("text"),t("zsmooth"),w(e,r,a,t,{prefix:"",cLetter:"z"})):r.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(x,oe,ae){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../heatmap/colorbar"),calc:x("../heatmap/calc"),plot:x("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:x("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(x,oe,ae){"use strict";var g=x("../bar/attributes"),m=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../../plots/template_attributes").texttemplateAttrs,e=x("../../plots/font_attributes"),r=x("./bin_attributes"),n=x("./constants"),a=x("../../lib/extend").extendFlat;oe.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:m("x"),yhoverformat:m("y"),text:a({},g.text,{}),hovertext:a({},g.hovertext,{}),orientation:g.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:r("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:r("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:w({},{keys:n.eventDataKeys}),texttemplate:y({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:a({},g.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:g.insidetextanchor,textangle:g.textangle,cliponaxis:g.cliponaxis,constraintext:g.constraintext,marker:g.marker,offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup,selected:g.selected,unselected:g.unselected,_deprecated:{bardir:g._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(x,oe,ae){"use strict";oe.exports=function(g,m){for(var w=g.length,y=0,e=0;e<w;e++)m[e]?(g[e]/=m[e],y+=g[e]):g[e]=null;return y}},{}],814:[function(x,oe,ae){"use strict";oe.exports=function(g,m){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric");oe.exports={count:function(m,w,y){return y[m]++,1},sum:function(m,w,y,e){var r=e[w];return g(r)?(r=Number(r),y[m]+=r,r):0},avg:function(m,w,y,e,r){var n=e[w];return g(n)&&(n=Number(n),y[m]+=n,r[m]++),0},min:function(m,w,y,e){var r=e[w];if(g(r)){if(r=Number(r),!g(y[m]))return y[m]=r,r;if(y[m]>r){var n=r-y[m];return y[m]=r,n}}return 0},max:function(m,w,y,e){var r=e[w];if(g(r)){if(r=Number(r),!g(y[m]))return y[m]=r,r;if(y[m]<r){var n=r-y[m];return y[m]=r,n}}return 0}}},{"fast-isnumeric":190}],816:[function(x,oe,ae){"use strict";var g=x("../../constants/numerical"),m=g.ONEAVGYEAR,w=g.ONEAVGMONTH,y=g.ONEDAY,e=g.ONEHOUR,r=g.ONEMIN,n=g.ONESEC,a=x("../../plots/cartesian/axes").tickIncrement;function t(c,f,l,h){if(c*f<=0)return 1/0;for(var d=Math.abs(f-c),o="date"===l.type,_=p(d,o),s=0;s<10;s++){var k=p(80*_,o);if(_===k||!u(k,c,f,o,l,h))break;_=k}return _}function p(c,f){return f&&c>n?c>y?c>1.1*m?m:c>1.1*w?w:y:c>e?e:c>r?r:n:Math.pow(10,Math.floor(Math.log(c)/Math.LN10))}function u(c,f,l,h,d,o){if(h&&c>y){var _=i(f,d,o),s=i(l,d,o),k=c===m?0:1;return _[k]!==s[k]}return Math.floor(l/c)-Math.floor(f/c)>.1}function i(c,f,l){var h=f.c2d(c,m,l).split("-");return""===h[0]&&(h.unshift(),h[0]="-"+h[0]),h}oe.exports=function(c,f,l,h,d){var o,_,s=-1.1*f,k=-.1*f,M=c-k,A=l[0],E=l[1],I=Math.min(t(A+k,A+M,h,d),t(E+k,E+M,h,d)),C=Math.min(t(A+s,A+k,h,d),t(E+s,E+k,h,d));if(I>C&&C<Math.abs(E-A)/4e3?(o=I,_=!1):(o=Math.min(I,C),_=!0),"date"===h.type&&o>y){var R=o===m?1:6,O=o===m?"M12":"M1";return function(D,L){var B=h.c2d(D,m,d),j=B.indexOf("-",R);j>0&&(B=B.substr(0,j));var W=h.d2c(B,0,d);if(W<D){var Y=a(W,O,!1,d);(W+Y)/2<D+c&&(W=Y)}return L&&_?a(W,O,!0,d):W}}return function(D,L){var B=o*Math.round(D/o);return B+o/10<D&&B+.9*o<D+c&&(B+=o),L&&_&&(B-=o),B}}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib"),w=x("../../registry"),y=x("../../plots/cartesian/axes"),e=x("../bar/arrays_to_calcdata"),r=x("./bin_functions"),n=x("./norm_functions"),a=x("./average"),t=x("./bin_label_vals");function p(u,i,c,f,l){var h,d,o,_,s,k,M,A=f+"bins",E=u._fullLayout,C=E._histogramBinOpts[i["_"+f+"bingroup"]],R="overlay"===E.barmode,O=function(ge){return c.r2c(ge,0,_)},D=function(ge){return c.c2r(ge,0,_)},L="date"===c.type?function(ge){return ge||0===ge?m.cleanDate(ge,null,_):null}:function(ge){return g(ge)?Number(ge):null};function B(ge,_e,Ce){_e[ge+"Found"]?(_e[ge]=L(_e[ge]),null===_e[ge]&&(_e[ge]=Ce[ge])):(k[ge]=_e[ge]=Ce[ge],m.nestedProperty(d[0],A+"."+ge).set(Ce[ge]))}if(i["_"+f+"autoBinFinished"])delete i["_"+f+"autoBinFinished"];else{d=C.traces;var j=[],W=!0,Y=!1,Q=!1;for(h=0;h<d.length;h++)if((o=d[h]).visible){var ne=C.dirs[h];s=o["_"+ne+"pos0"]=c.makeCalcdata(o,ne),j=m.concat(j,s),delete o["_"+f+"autoBinFinished"],!0===i.visible&&(W?W=!1:(delete o._autoBin,o["_"+f+"autoBinFinished"]=1),w.traceIs(o,"2dMap")&&(Y=!0),"histogram2dcontour"===o.type&&(Q=!0))}var X=y.autoBin(j,c,C.nbins,Y,_=d[0][f+"calendar"],C.sizeFound&&C.size),$=d[0]._autoBin={};if(k=$[C.dirs[0]]={},Q&&(C.size||(X.start=D(y.tickIncrement(O(X.start),X.size,!0,_))),void 0===C.end&&(X.end=D(y.tickIncrement(O(X.end),X.size,!1,_)))),R&&!w.traceIs(i,"2dMap")&&0===X._dataSpan&&"category"!==c.type&&"multicategory"!==c.type){if(l)return[X,s,!0];X=function(ge,_e,Ce,Le,Ie){var Be,ve,Te,Pe=ge._fullLayout,De=function(kt,Bt){for(var Rt=Bt.xaxis,ft=Bt.yaxis,lt=Bt.orientation,Ft=[],Jt=kt._fullData,ln=0;ln<Jt.length;ln++){var dn=Jt[ln];"histogram"===dn.type&&!0===dn.visible&&dn.orientation===lt&&dn.xaxis===Rt&&dn.yaxis===ft&&Ft.push(dn)}return Ft}(ge,_e),Fe=!1,Ue=1/0,He=[_e];for(Be=0;Be<De.length;Be++)if((ve=De[Be])===_e)Fe=!0;else if(Fe){var Ke=p(ge,ve,Ce,Le,!0),st=Ke[0],Ve=Ke[2];ve["_"+Le+"autoBinFinished"]=1,ve["_"+Le+"pos0"]=Ke[1],Ve?He.push(ve):Ue=Math.min(Ue,st.size)}else Te=Pe._histogramBinOpts[ve["_"+Le+"bingroup"]],Ue=Math.min(Ue,Te.size||ve[Ie].size);var $e=new Array(He.length);for(Be=0;Be<He.length;Be++)for(var Qe=He[Be]["_"+Le+"pos0"],tt=0;tt<Qe.length;tt++)if(void 0!==Qe[tt]){$e[Be]=Qe[tt];break}for(isFinite(Ue)||(Ue=m.distinctVals($e).minDiff),Be=0;Be<He.length;Be++){var ut=(ve=He[Be])[Le+"calendar"],xt={start:Ce.c2r($e[Be]-Ue/2,0,ut),end:Ce.c2r($e[Be]+Ue/2,0,ut),size:Ue};ve._input[Ie]=ve[Ie]=xt,(Te=Pe._histogramBinOpts[ve["_"+Le+"bingroup"]])&&m.extendFlat(Te,xt)}return _e[Ie]}(u,i,c,f,A)}(M=o.cumulative||{}).enabled&&"include"!==M.currentbin&&("decreasing"===M.direction?X.start=D(y.tickIncrement(O(X.start),X.size,!0,_)):X.end=D(y.tickIncrement(O(X.end),X.size,!1,_))),C.size=X.size,C.sizeFound||(k.size=X.size,m.nestedProperty(d[0],A+".size").set(X.size)),B("start",C,X),B("end",C,X)}s=i["_"+f+"pos0"],delete i["_"+f+"pos0"];var re=i._input[A]||{},H=m.extendFlat({},C),U=C.start,G=c.r2l(re.start),ie=void 0!==G;if((C.startFound||ie)&&G!==c.r2l(U)){var q=ie?G:m.aggNums(Math.min,null,s),ee={type:"category"===c.type||"multicategory"===c.type?"linear":c.type,r2l:c.r2l,dtick:C.size,tick0:U,calendar:_,range:[q,y.tickIncrement(q,C.size,!1,_)].map(c.l2r)},te=y.tickFirst(ee);te>c.r2l(q)&&(te=y.tickIncrement(te,C.size,!0,_)),H.start=c.l2r(te),ie||m.nestedProperty(i,A+".start").set(H.start)}var se=C.end,ue=c.r2l(re.end),de=void 0!==ue;if((C.endFound||de)&&ue!==c.r2l(se)){var he=de?ue:m.aggNums(Math.max,null,s);H.end=c.l2r(he),de||m.nestedProperty(i,A+".start").set(H.end)}var xe="autobin"+f;return!1===i._input[xe]&&(i._input[A]=m.extendFlat({},i[A]||{}),delete i._input[xe],delete i[xe]),[H,s]}oe.exports={calc:function(u,i){var c,f,l,h,d=[],o=[],_="h"===i.orientation,s=y.getFromId(u,_?i.yaxis:i.xaxis),k=_?"y":"x",M={x:"y",y:"x"}[k],A=i[k+"calendar"],E=i.cumulative,I=p(u,i,s,k),C=I[0],R=I[1],O="string"==typeof C.size,D=[],L=O?D:C,B=[],j=[],W=[],Y=0,Q=i.histnorm,ne=i.histfunc,X=-1!==Q.indexOf("density");E.enabled&&X&&(Q=Q.replace(/ ?density$/,""),X=!1);var $,re="max"===ne||"min"===ne?null:0,H=r.count,U=n[Q],G=!1,ie=function(ve){return s.r2c(ve,0,A)};for(m.isArrayOrTypedArray(i[M])&&"count"!==ne&&($=i[M],G="avg"===ne,H=r[ne]),c=ie(C.start),l=ie(C.end)+(c-y.tickIncrement(c,C.size,!1,A))/1e6;c<l&&d.length<1e6&&(f=y.tickIncrement(c,C.size,!1,A),d.push((c+f)/2),o.push(re),W.push([]),D.push(c),X&&B.push(1/(f-c)),G&&j.push(0),!(f<=c));)c=f;D.push(c),O||"date"!==s.type||(L={start:ie(L.start),end:ie(L.end),size:L.size}),u._fullLayout._roundFnOpts||(u._fullLayout._roundFnOpts={});var q=i["_"+k+"bingroup"],ee={leftGap:1/0,rightGap:1/0};q&&(u._fullLayout._roundFnOpts[q]||(u._fullLayout._roundFnOpts[q]=ee),ee=u._fullLayout._roundFnOpts[q]);var te,se=o.length,ue=!0,de=ee.leftGap,he=ee.rightGap,xe={};for(c=0;c<R.length;c++){var ge=R[c];(h=m.findBin(ge,L))>=0&&h<se&&(Y+=H(h,c,o,$,j),ue&&W[h].length&&ge!==R[W[h][0]]&&(ue=!1),W[h].push(c),xe[c]=h,de=Math.min(de,ge-D[h]),he=Math.min(he,D[h+1]-ge))}ee.leftGap=de,ee.rightGap=he,ue||(te=function(ve,Te){return function(){var Pe=u._fullLayout._roundFnOpts[q];return t(Pe.leftGap,Pe.rightGap,D,s,A)(ve,Te)}}),G&&(Y=a(o,j)),U&&U(o,Y,B),E.enabled&&function(ve,Te,Pe){var De,Fe,Ue;function He(st){Ue=ve[st],ve[st]/=2}function Ke(st){ve[st]=Ue+(Fe=ve[st])/2,Ue+=Fe}if("half"===Pe)if("increasing"===Te)for(He(0),De=1;De<ve.length;De++)Ke(De);else for(He(ve.length-1),De=ve.length-2;De>=0;De--)Ke(De);else if("increasing"===Te){for(De=1;De<ve.length;De++)ve[De]+=ve[De-1];"exclude"===Pe&&(ve.unshift(0),ve.pop())}else{for(De=ve.length-2;De>=0;De--)ve[De]+=ve[De+1];"exclude"===Pe&&(ve.push(0),ve.shift())}}(o,E.direction,E.currentbin);var _e=Math.min(d.length,o.length),Ce=[],Le=0,Ie=_e-1;for(c=0;c<_e;c++)if(o[c]){Le=c;break}for(c=_e-1;c>=Le;c--)if(o[c]){Ie=c;break}for(c=Le;c<=Ie;c++)if(g(d[c])&&g(o[c])){var Be={p:d[c],s:o[c],b:0};E.enabled||(Be.pts=W[c],ue?Be.ph0=Be.ph1=W[c].length?R[W[c][0]]:d[c]:(i._computePh=!0,Be.ph0=te(D[c]),Be.ph1=te(D[c+1],!0))),Ce.push(Be)}return 1===Ce.length&&(Ce[0].width1=y.tickIncrement(Ce[0].p,C.size,!1,A)-Ce[0].p),e(Ce,i),m.isArrayOrTypedArray(i.selectedpoints)&&m.tagSelected(Ce,i,xe),Ce},calcAllAutoBins:p}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(x,oe,ae){"use strict";oe.exports={eventDataKeys:["binNumber"]}},{}],819:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/cartesian/axis_ids"),w=x("../../registry").traceIs,y=x("../bar/defaults").handleGroupingDefaults,e=g.nestedProperty,r=x("../../plots/cartesian/constraints").getAxisGroup,n=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],a=["x","y"];oe.exports=function(t,p){var u,i,c,f,l,h,d,o=p._histogramBinOpts={},_=[],s={},k=[];function M(X,$){return g.coerce(u._input,u,u._module.attributes,X,$)}function A(X){return"v"===X.orientation?"x":"y"}function E(X,$,re){var H=X.uid+"__"+re;$||($=H);var U=m.getFromTrace({_fullLayout:p},X,re).type,G=X[re+"calendar"]||"",ie=o[$],q=!0;ie&&(U===ie.axType&&G===ie.calendar?(q=!1,ie.traces.push(X),ie.dirs.push(re)):($=H,U!==ie.axType&&g.warn(["Attempted to group the bins of trace",X.index,"set on a","type:"+U,"axis","with bins on","type:"+ie.axType,"axis."].join(" ")),G!==ie.calendar&&g.warn(["Attempted to group the bins of trace",X.index,"set with a",G,"calendar","with bins",ie.calendar?"on a "+ie.calendar+" calendar":"w/o a set calendar"].join(" ")))),q&&(o[$]={traces:[X],dirs:[re],axType:U,calendar:X[re+"calendar"]||""}),X["_"+re+"bingroup"]=$}for(l=0;l<t.length;l++)w(u=t[l],"histogram")&&(_.push(u),delete u._xautoBinFinished,delete u._yautoBinFinished,w(u,"2dMap")||y(u._input,u,p,M));var I=p._alignmentOpts||{};for(l=0;l<_.length;l++){if(c="",!w(u=_[l],"2dMap")){if(f=A(u),"group"===p.barmode&&u.alignmentgroup){var R=r(p,u[f+"axis"])+u.orientation;(I[R]||{})[u.alignmentgroup]&&(c=R)}c||"overlay"===p.barmode||(c=r(p,u.xaxis)+r(p,u.yaxis)+A(u))}c?(s[c]||(s[c]=[]),s[c].push(u)):k.push(u)}for(c in s)if(1!==(i=s[c]).length){var O=!1;for(i.length&&(u=i[0],O=M("bingroup")),c=O||c,l=0;l<i.length;l++){var D=(u=i[l])._input.bingroup;D&&D!==c&&g.warn(["Trace",u.index,"must match","within bingroup",c+".","Ignoring its bingroup:",D,"setting."].join(" ")),u.bingroup=c,E(u,c,A(u))}}else k.push(i[0]);for(l=0;l<k.length;l++){u=k[l];var L=M("bingroup");if(w(u,"2dMap"))for(d=0;d<2;d++){var B=M((f=a[d])+"bingroup",L?L+"__"+f:null);E(u,B,f)}else E(u,L,A(u))}for(c in o){var j=o[c];for(i=j.traces,h=0;h<n.length;h++){var W,Y,Q=n[h],ne=Q.name;if("nbins"!==ne||!j.sizeFound){for(l=0;l<i.length;l++){if(void 0!==e((u=i[l])._input,W=Q.aStr[f=j.dirs[l]]).get()){j[ne]=M(W),j[ne+"Found"]=!0;break}(Y=(u._autoBin||{})[f]||{})[ne]&&e(u,W).set(Y[ne])}if("start"===ne||"end"===ne)for(;l<i.length;l++)(u=i[l])["_"+f+"bingroup"]&&M(W,(Y=(u._autoBin||{})[f]||{})[ne]);"nbins"!==ne||j.sizeFound||j.nbinsFound||(u=i[0],j[ne]=M(W))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../lib"),w=x("../../components/color"),y=x("../bar/defaults").handleText,e=x("../bar/style_defaults"),r=x("./attributes");oe.exports=function(n,a,t,p){function u(k,M){return m.coerce(n,a,r,k,M)}var i=u("x"),c=u("y");u("cumulative.enabled")&&(u("cumulative.direction"),u("cumulative.currentbin")),u("text");var f=u("textposition");y(n,a,p,u,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat");var l=u("orientation",c&&!i?"h":"v"),h="v"===l?"x":"y",d="v"===l?"y":"x",o=i&&c?Math.min(m.minRowLength(i)&&m.minRowLength(c)):m.minRowLength(a[h]||[]);if(o){a._length=o,g.getComponentMethod("calendars","handleTraceDefaults")(n,a,["x","y"],p),a[d]&&u("histfunc"),u("histnorm"),u("autobin"+h),e(n,a,u,t,p),m.coerceSelectionMarkerOpacity(a,u);var _=(a.marker.line||{}).color,s=g.getComponentMethod("errorbars","supplyDefaults");s(n,a,_||w.defaultLine,{axis:"y"}),s(n,a,_||w.defaultLine,{axis:"x",inherit:"y"})}else a.visible=!1}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w,y,e){if(g.x="xVal"in m?m.xVal:m.x,g.y="yVal"in m?m.yVal:m.y,"zLabelVal"in m&&(g.z=m.zLabelVal),m.xa&&(g.xaxis=m.xa),m.ya&&(g.yaxis=m.ya),!(w.cumulative||{}).enabled){var r,n=Array.isArray(e)?y[0].pts[e[0]][e[1]]:y[e].pts;if(g.pointNumbers=n,g.binNumber=g.pointNumber,delete g.pointNumber,delete g.pointIndex,w._indexToPoints){r=[];for(var a=0;a<n.length;a++)r=r.concat(w._indexToPoints[n[a]])}else r=n;g.pointIndices=r}return g}},{}],822:[function(x,oe,ae){"use strict";var g=x("../bar/hover").hoverPoints,m=x("../../plots/cartesian/axes").hoverLabelText;oe.exports=function(w,y,e,r,n){var a=g(w,y,e,r,n);if(a){var t=(w=a[0]).cd[w.index],p=w.cd[0].trace;if(!p.cumulative.enabled){var u="h"===p.orientation?"y":"x";w[u+"Label"]=m(w[u+"a"],[t.ph0,t.ph1],p[u+"hoverformat"])}return a}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),layoutAttributes:x("../bar/layout_attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("./cross_trace_defaults"),supplyLayoutDefaults:x("../bar/layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("../bar/cross_trace_calc").crossTraceCalc,plot:x("../bar/plot").plot,layerName:"barlayer",style:x("../bar/style").style,styleOnSelect:x("../bar/style").styleOnSelect,colorbar:x("../scatter/marker_colorbar"),hoverPoints:x("./hover"),selectPoints:x("../bar/select"),eventData:x("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:x("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":945,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(x,oe,ae){"use strict";oe.exports={percent:function(g,m){for(var w=g.length,y=100/m,e=0;e<w;e++)g[e]*=y},probability:function(g,m){for(var w=g.length,y=0;y<w;y++)g[y]/=m},density:function(g,m,w,y){var e=g.length;y=y||1;for(var r=0;r<e;r++)g[r]*=w[r]*y},"probability density":function(g,m,w,y){var e=g.length;y&&(m/=y);for(var r=0;r<e;r++)g[r]*=w[r]/m}}},{}],825:[function(x,oe,ae){"use strict";var g=x("../histogram/attributes"),m=x("../histogram/bin_attributes"),w=x("../heatmap/attributes"),y=x("../../plots/attributes"),e=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,r=x("../../plots/template_attributes").hovertemplateAttrs,n=x("../../plots/template_attributes").texttemplateAttrs,a=x("../../components/colorscale/attributes"),t=x("../../lib/extend").extendFlat;oe.exports=t({x:g.x,y:g.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:g.histnorm,histfunc:g.histfunc,nbinsx:g.nbinsx,xbins:m("x"),nbinsy:g.nbinsy,ybins:m("y"),autobinx:g.autobinx,autobiny:g.autobiny,bingroup:t({},g.bingroup,{}),xbingroup:t({},g.bingroup,{}),ybingroup:t({},g.bingroup,{}),xgap:w.xgap,ygap:w.ygap,zsmooth:w.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:r({},{keys:"z"}),texttemplate:n({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:w.textfont,showlegend:t({},y.showlegend,{dflt:!1})},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/cartesian/axes"),w=x("../histogram/bin_functions"),y=x("../histogram/norm_functions"),e=x("../histogram/average"),r=x("../histogram/bin_label_vals"),n=x("../histogram/calc").calcAllAutoBins;function a(u,i,c,f){var l,h=new Array(u);if(f)for(l=0;l<u;l++)h[l]=1/(i[l+1]-i[l]);else{var d=1/c;for(l=0;l<u;l++)h[l]=d}return h}function t(u,i){return{start:u(i.start),end:u(i.end),size:i.size}}function p(u,i,c,f,l,h){var d,o=u.length-1,_=new Array(o),s=r(c,f,u,l,h);for(d=0;d<o;d++){var k=(i||[])[d];_[d]=void 0===k?[s(u[d]),s(u[d+1],!0)]:[k,k]}return _}oe.exports=function(u,i){var c,f,l,h,d=m.getFromId(u,i.xaxis),o=m.getFromId(u,i.yaxis),_=i.xcalendar,s=i.ycalendar,k=function(ft){return d.r2c(ft,0,_)},M=function(ft){return o.r2c(ft,0,s)},A=n(u,i,d,"x"),E=A[0],I=A[1],C=n(u,i,o,"y"),R=C[0],O=C[1],D=i._length;I.length>D&&I.splice(D,I.length-D),O.length>D&&O.splice(D,O.length-D);var L=[],B=[],j=[],W="string"==typeof E.size,Y="string"==typeof R.size,Q=[],ne=[],X=W?Q:E,$=Y?ne:R,re=0,H=[],U=[],G=i.histnorm,ie=i.histfunc,q=-1!==G.indexOf("density"),ee="max"===ie||"min"===ie?null:0,te=w.count,se=y[G],ue=!1,de=[],he=[],xe="z"in i?i.z:"marker"in i&&Array.isArray(i.marker.color)?i.marker.color:"";xe&&"count"!==ie&&(ue="avg"===ie,te=w[ie]);var ge=E.size,_e=k(E.start),Ce=k(E.end)+(_e-m.tickIncrement(_e,ge,!1,_))/1e6;for(c=_e;c<Ce;c=m.tickIncrement(c,ge,!1,_))B.push(ee),Q.push(c),ue&&j.push(0);Q.push(c);var Ie=B.length,Be=(c-_e)/Ie,ve=d.c2r(_e+Be/2,0,_),Te=R.size,Pe=M(R.start),De=M(R.end)+(Pe-m.tickIncrement(Pe,Te,!1,s))/1e6;for(c=Pe;c<De;c=m.tickIncrement(c,Te,!1,s)){L.push(B.slice()),ne.push(c);var Fe=new Array(Ie);for(f=0;f<Ie;f++)Fe[f]=[];U.push(Fe),ue&&H.push(j.slice())}ne.push(c);var Ue=L.length,He=(c-Pe)/Ue,Ke=o.c2r(Pe+He/2,0,s);q&&(de=a(B.length,X,Be,W),he=a(L.length,$,He,Y)),W||"date"!==d.type||(X=t(k,X)),Y||"date"!==o.type||($=t(M,$));var st=!0,Ve=!0,$e=new Array(Ie),Qe=new Array(Ue),tt=1/0,ut=1/0,xt=1/0,kt=1/0;for(c=0;c<D;c++){var Bt=I[c],Rt=O[c];l=g.findBin(Bt,X),h=g.findBin(Rt,$),l>=0&&l<Ie&&h>=0&&h<Ue&&(re+=te(l,c,L[h],xe,H[h]),U[h][l].push(c),st&&(void 0===$e[l]?$e[l]=Bt:$e[l]!==Bt&&(st=!1)),Ve&&(void 0===Qe[h]?Qe[h]=Rt:Qe[h]!==Rt&&(Ve=!1)),tt=Math.min(tt,Bt-Q[l]),ut=Math.min(ut,Q[l+1]-Bt),xt=Math.min(xt,Rt-ne[h]),kt=Math.min(kt,ne[h+1]-Rt))}if(ue)for(h=0;h<Ue;h++)re+=e(L[h],H[h]);if(se)for(h=0;h<Ue;h++)se(L[h],re,de,he[h]);return{x:I,xRanges:p(Q,st&&$e,tt,ut,d,_),x0:ve,dx:Be,y:O,yRanges:p(ne,Ve&&Qe,xt,kt,o,s),y0:Ke,dy:He,z:L,pts:U}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./sample_defaults"),w=x("../heatmap/style_defaults"),y=x("../../components/colorscale/defaults"),e=x("../heatmap/label_defaults"),r=x("./attributes");oe.exports=function(n,a,t,p){function u(i,c){return g.coerce(n,a,r,i,c)}m(n,a,u,p),!1!==a.visible&&(w(n,a,u,p),y(n,a,p,u,{prefix:"",cLetter:"z"}),u("hovertemplate"),e(u,p),u("xhoverformat"),u("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(x,oe,ae){"use strict";var g=x("../heatmap/hover"),m=x("../../plots/cartesian/axes").hoverLabelText;oe.exports=function(w,y,e,r,n){var a=g(w,y,e,r,n);if(a){var t=(w=a[0]).index,i=w.cd[0],c=i.trace,f=i.xRanges[t[1]],l=i.yRanges[t[0]];return w.xLabel=m(w.xa,[f[0],f[1]],c.xhoverformat),w.yLabel=m(w.ya,[l[0],l[1]],c.yhoverformat),a}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("../histogram/cross_trace_defaults"),calc:x("../heatmap/calc"),plot:x("../heatmap/plot"),layerName:"heatmaplayer",colorbar:x("../heatmap/colorbar"),style:x("../heatmap/style"),hoverPoints:x("./hover"),eventData:x("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../lib");oe.exports=function(w,y,e,r){var n=e("x"),a=e("y"),t=m.minRowLength(n),p=m.minRowLength(a);t&&p?(y._length=Math.min(t,p),g.getComponentMethod("calendars","handleTraceDefaults")(w,y,["x","y"],r),(e("z")||e("marker.color"))&&e("histfunc"),e("histnorm"),e("autobinx"),e("autobiny")):y.visible=!1}},{"../../lib":503,"../../registry":638}],831:[function(x,oe,ae){"use strict";var g=x("../histogram2d/attributes"),m=x("../contour/attributes"),w=x("../../components/colorscale/attributes"),y=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=x("../../lib/extend").extendFlat;oe.exports=e({x:g.x,y:g.y,z:g.z,marker:g.marker,histnorm:g.histnorm,histfunc:g.histfunc,nbinsx:g.nbinsx,xbins:g.xbins,nbinsy:g.nbinsy,ybins:g.ybins,autobinx:g.autobinx,autobiny:g.autobiny,bingroup:g.bingroup,xbingroup:g.xbingroup,ybingroup:g.ybingroup,autocontour:m.autocontour,ncontours:m.ncontours,contours:m.contours,line:{color:m.line.color,width:e({},m.line.width,{dflt:.5}),dash:m.line.dash,smoothing:m.line.smoothing,editType:"plot"},xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:g.hovertemplate,texttemplate:m.texttemplate,textfont:m.textfont},w("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../histogram2d/sample_defaults"),w=x("../contour/contours_defaults"),y=x("../contour/style_defaults"),e=x("../heatmap/label_defaults"),r=x("./attributes");oe.exports=function(n,a,t,p){function u(i,c){return g.coerce(n,a,r,i,c)}m(n,a,u,p),!1!==a.visible&&(w(n,a,u,function(i){return g.coerce2(n,a,r,i)}),y(n,a,u,p),u("xhoverformat"),u("yhoverformat"),u("hovertemplate"),a.contours&&"heatmap"===a.contours.coloring&&e(u,p))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("../histogram/cross_trace_defaults"),calc:x("../contour/calc"),plot:x("../contour/plot").plot,layerName:"contourlayer",style:x("../contour/style"),colorbar:x("../contour/colorbar"),hoverPoints:x("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(x,oe,ae){"use strict";var g=x("../../plots/template_attributes").hovertemplateAttrs,m=x("../../plots/template_attributes").texttemplateAttrs,w=x("../../components/colorscale/attributes"),y=x("../../plots/domain").attributes,e=x("../pie/attributes"),r=x("../sunburst/attributes"),n=x("../treemap/attributes"),a=x("../treemap/constants"),t=x("../../lib/extend").extendFlat;oe.exports={labels:r.labels,parents:r.parents,values:r.values,branchvalues:r.branchvalues,count:r.count,level:r.level,maxdepth:r.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:n.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:t({colors:r.marker.colors,line:r.marker.line,editType:"calc"},w("marker",{colorAttr:"colors",anim:!1})),leaf:r.leaf,pathbar:n.pathbar,text:e.text,textinfo:r.textinfo,texttemplate:m({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:r.hoverinfo,hovertemplate:g({},{keys:a.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:n.outsidetextfont,textposition:n.textposition,sort:e.sort,root:r.root,domain:y({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"../sunburst/attributes":1049,"../treemap/attributes":1075,"../treemap/constants":1078}],835:[function(x,oe,ae){"use strict";var g=x("../../plots/plots");ae.name="icicle",ae.plot=function(m,w,y,e){g.plotBasePlot(ae.name,m,w,y,e)},ae.clean=function(m,w,y,e){g.cleanBasePlot(ae.name,m,w,y,e)}},{"../../plots/plots":619}],836:[function(x,oe,ae){"use strict";var g=x("../sunburst/calc");ae.calc=function(m,w){return g.calc(m,w)},ae.crossTraceCalc=function(m){return g._runCrossTraceCalc("icicle",m)}},{"../sunburst/calc":1051}],837:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./attributes"),w=x("../../components/color"),y=x("../../plots/domain").defaults,e=x("../bar/defaults").handleText,r=x("../bar/constants").TEXTPAD,n=x("../../components/colorscale"),a=n.hasColorscale,t=n.handleDefaults;oe.exports=function(p,u,i,c){function f(k,M){return g.coerce(p,u,m,k,M)}var l=f("labels"),h=f("parents");if(l&&l.length&&h&&h.length){var d=f("values");f(d&&d.length?"branchvalues":"count"),f("level"),f("maxdepth"),f("tiling.orientation"),f("tiling.flip"),f("tiling.pad");var o=f("text");f("texttemplate"),u.texttemplate||f("textinfo",Array.isArray(o)?"text+label":"label"),f("hovertext"),f("hovertemplate");var _=f("pathbar.visible");e(p,u,c,f,"auto",{hasPathbar:_,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("textposition"),f("marker.line.width")&&f("marker.line.color",c.paper_bgcolor),f("marker.colors");var s=u._hasColorscale=a(p,"marker","colors")||(p.marker||{}).coloraxis;s&&t(p,u,c,f,{prefix:"marker.",cLetter:"c"}),f("leaf.opacity",s?1:.7),u._hovered={marker:{line:{width:2,color:w.contrast(c.paper_bgcolor)}}},_&&(f("pathbar.thickness",u.pathbar.textfont.size+2*r),f("pathbar.side"),f("pathbar.edgeshape")),f("sort"),f("root.color"),y(u,c,f),u._length=null}else u.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=x("../../components/drawing"),y=x("../../lib/svg_text_utils"),e=x("./partition"),r=x("./style").styleOne,n=x("../treemap/constants"),a=x("../sunburst/helpers"),t=x("../sunburst/fx"),p=x("../sunburst/plot").formatSliceLabel;oe.exports=function(u,i,c,f,l){var h=l.width,d=l.height,o=l.viewX,_=l.viewY,s=l.pathSlice,k=l.toMoveInsideSlice,M=l.strTransform,A=l.hasTransition,E=l.handleSlicesExit,I=l.makeUpdateSliceInterpolator,C=l.makeUpdateTextInterpolator,R=l.prevEntry,O=u._fullLayout,D=i[0].trace,L=-1!==D.textposition.indexOf("left"),B=-1!==D.textposition.indexOf("right"),j=-1!==D.textposition.indexOf("bottom"),W=e(c,[h,d],{flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1,orientation:D.tiling.orientation,pad:{inner:D.tiling.pad},maxDepth:D._maxDepth}).descendants(),Y=1/0,Q=-1/0;W.forEach(function(H){var U=H.depth;U>=D._maxDepth?(H.x0=H.x1=(H.x0+H.x1)/2,H.y0=H.y1=(H.y0+H.y1)/2):(Y=Math.min(Y,U),Q=Math.max(Q,U))}),f=f.data(W,a.getPtId),D._maxVisibleLayers=isFinite(Q)?Q-Y+1:0,f.enter().append("g").classed("slice",!0),E(f,!1,{},[h,d],s),f.order();var ne=null;if(A&&R){var X=a.getPtId(R);f.each(function(H){null===ne&&a.getPtId(H)===X&&(ne={x0:H.x0,x1:H.x1,y0:H.y0,y1:H.y1})})}var $=function(){return ne||{x0:0,x1:h,y0:0,y1:d}},re=f;return A&&(re=re.transition().each("end",function(){var H=g.select(this);a.setSliceCursor(H,u,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),re.each(function(H){H._x0=o(H.x0),H._x1=o(H.x1),H._y0=_(H.y0),H._y1=_(H.y1),H._hoverX=o(H.x1-D.tiling.pad),H._hoverY=_(j?H.y1-D.tiling.pad/2:H.y0+D.tiling.pad/2);var U=g.select(this),G=m.ensureSingle(U,"path","surface",function(te){te.style("pointer-events","all")});A?G.transition().attrTween("d",function(te){var se=I(te,!1,$(),[h,d],{orientation:D.tiling.orientation,flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1});return function(ue){return s(se(ue))}}):G.attr("d",s),U.call(t,c,u,i,{styleOne:r,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,u,{isTransitioning:u._transitioning}),G.call(r,H,D,{hovered:!1}),H._text=H.x0===H.x1||H.y0===H.y1?"":p(H,c,D,i,O)||"";var ie=m.ensureSingle(U,"g","slicetext"),q=m.ensureSingle(ie,"text","",function(te){te.attr("data-notex",1)}),ee=m.ensureUniformFontSize(u,a.determineTextFont(D,H,O.font));q.text(H._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":L?"start":"middle").call(w.font,ee).call(y.convertToTspans,u),H.textBB=w.bBox(q.node()),H.transform=k(H,{fontSize:ee.size}),H.transform.fontSize=ee.size,A?q.transition().attrTween("transform",function(te){var se=C(te,!1,$(),[h,d]);return function(ue){return M(se(ue))}}):q.attr("transform",M(H))}),ne}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"../sunburst/plot":1059,"../treemap/constants":1078,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(x,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"icicle",basePlotModule:x("./base_plot"),categories:[],animatable:!0,attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot"),style:x("./style").style,colorbar:x("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(x,oe,ae){"use strict";oe.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./layout_attributes");oe.exports=function(w,y){function e(r,n){return g.coerce(w,y,m,r,n)}e("iciclecolorway",y.colorway),e("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(x,oe,ae){"use strict";var g=x("d3-hierarchy"),m=x("../treemap/flip_tree");oe.exports=function(w,y,e){var r=e.flipX,n=e.flipY,a="h"===e.orientation,t=e.maxDepth,p=y[0],u=y[1];t&&(p=(w.height+1)*y[0]/Math.min(w.height+1,t),u=(w.height+1)*y[1]/Math.min(w.height+1,t));var i=g.partition().padding(e.pad.inner).size(a?[y[1],p]:[y[0],u])(w);return(a||r||n)&&m(i,y,{swapXY:a,flipX:r,flipY:n}),i}},{"../treemap/flip_tree":1083,"d3-hierarchy":115}],843:[function(x,oe,ae){"use strict";var g=x("../treemap/draw"),m=x("./draw_descendants");oe.exports=function(w,y,e,r){return g(w,y,e,r,{type:"icicle",drawDescendants:m})}},{"../treemap/draw":1080,"./draw_descendants":838}],844:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/color"),w=x("../../lib"),y=x("../bar/uniform_text").resizeText;function e(r,n,a){var t=n.data.data,p=!n.children,u=t.i,i=w.castOption(a,u,"marker.line.color")||m.defaultLine,c=w.castOption(a,u,"marker.line.width")||0;r.style("stroke-width",c).call(m.fill,t.color).call(m.stroke,i).style("opacity",p?a.leaf.opacity:null)}oe.exports={style:function(r){var n=r._fullLayout._iciclelayer.selectAll(".trace");y(r,n,"icicle"),n.each(function(a){var t=g.select(this),p=a[0].trace;t.style("opacity",p.opacity),t.selectAll("path.surface").each(function(u){g.select(this).call(e,u,p)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(x,oe,ae){"use strict";for(var g=x("../../plots/attributes"),m=x("../../plots/template_attributes").hovertemplateAttrs,w=x("../../lib/extend").extendFlat,y=x("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],r=[],n=[],a=0;a<e.length;a++){var t=y[e[a]];r.push("For the `"+e[a]+"` colormodel, it is ["+(t.zminDflt||t.min).join(", ")+"]."),n.push("For the `"+e[a]+"` colormodel, it is ["+(t.zmaxDflt||t.max).join(", ")+"].")}oe.exports=w({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:w({},g.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:m({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./constants"),w=x("fast-isnumeric"),y=x("../../plots/cartesian/axes"),e=x("../../lib").maxRowLength,r=x("./helpers").getImageSize;function n(t,p,u,i){return function(c){return g.constrain((c-t)*p,u,i)}}function a(t,p){return function(u){return g.constrain(u,t,p)}}oe.exports=function(t,p){var u,i;if(p._hasZ)u=p.z.length,i=e(p.z);else if(p._hasSource){var c=r(p.source);u=c.height,i=c.width}var f,l=y.getFromId(t,p.xaxis||"x"),h=y.getFromId(t,p.yaxis||"y"),d=l.d2c(p.x0)-p.dx/2,o=h.d2c(p.y0)-p.dy/2,_=[d,d+i*p.dx],s=[o,o+u*p.dy];if(l&&"log"===l.type)for(f=0;f<i;f++)_.push(d+f*p.dx);if(h&&"log"===h.type)for(f=0;f<u;f++)s.push(o+f*p.dy);return p._extremes[l._id]=y.findExtremes(l,_),p._extremes[h._id]=y.findExtremes(h,s),p._scaler=function(k){var M=m.colormodel[k.colormodel],A=(M.colormodel||k.colormodel).length;k._sArray=[];for(var E=0;E<A;E++)k._sArray.push(M.min[E]!==k.zmin[E]||M.max[E]!==k.zmax[E]?n(k.zmin[E],(M.max[E]-M.min[E])/(k.zmax[E]-k.zmin[E]),M.min[E],M.max[E]):a(M.min[E],M.max[E]));return function(I){for(var C=I.slice(0,A),R=0;R<A;R++){var O=C[R];if(!w(O))return!1;C[R]=k._sArray[R](O)}return C}}(p),[{x0:d,y0:o,z:p.z,w:i,h:u}]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(x,oe,ae){"use strict";oe.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(g){return g.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(g){return g.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(g){return g.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(g){var m=g.slice(0,3);return m[1]=m[1]+"%",m[2]=m[2]+"%",m},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(g){var m=g.slice(0,4);return m[1]=m[1]+"%",m[2]=m[2]+"%",m},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./attributes"),w=x("./constants"),y=x("../../snapshot/helpers").IMAGE_URL_PREFIX;oe.exports=function(e,r){function n(p,u){return g.coerce(e,r,m,p,u)}n("source"),r.source&&!r.source.match(y)&&delete r.source,r._hasSource=!!r.source;var a,t=n("z");r._hasZ=!(void 0===t||!t.length||!t[0]||!t[0].length),r._hasZ||r._hasSource?(n("x0"),n("y0"),n("dx"),n("dy"),r._hasZ?(n("colormodel","rgb"),n("zmin",(a=w.colormodel[r.colormodel]).zminDflt||a.min),n("zmax",a.zmaxDflt||a.max)):r._hasSource&&(r.colormodel="rgba256",r.zmin=(a=w.colormodel[r.colormodel]).zminDflt,r.zmax=a.zmaxDflt),n("zsmooth"),n("text"),n("hovertext"),n("hovertemplate"),r._length=null):r.visible=!1}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(x,oe,ae){"use strict";oe.exports=function(g,m){return"xVal"in m&&(g.x=m.xVal),"yVal"in m&&(g.y=m.yVal),m.xa&&(g.xaxis=m.xa),m.ya&&(g.yaxis=m.ya),g.color=m.color,g.colormodel=m.trace.colormodel,g.z||(g.z=m.color),g}},{}],850:[function(x,oe,ae){"use strict";var g=x("probe-image-size/sync"),m=x("../../snapshot/helpers").IMAGE_URL_PREFIX,w=x("buffer/").Buffer;ae.getImageSize=function(y){var e=y.replace(m,""),r=new w(e,"base64");return g(r)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(x,oe,ae){"use strict";var g=x("../../components/fx"),m=x("../../lib"),w=x("./constants");oe.exports=function(y,e,r){var n=y.cd[0],a=n.trace,t=y.xa,p=y.ya;if(!(g.inbox(e-n.x0,e-(n.x0+n.w*a.dx),0)>0||g.inbox(r-n.y0,r-(n.y0+n.h*a.dy),0)>0)){var u,i=Math.floor((e-n.x0)/a.dx),c=Math.floor(Math.abs(r-n.y0)/a.dy);if(a._hasZ?u=n.z[c][i]:a._hasSource&&(u=a._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(i,c,1,1).data),u){var f,l=n.hi||a.hoverinfo;if(l){var h=l.split("+");-1!==h.indexOf("all")&&(h=["color"]),-1!==h.indexOf("color")&&(f=!0)}var d,o=w.colormodel[a.colormodel],_=o.colormodel||a.colormodel,s=_.length,k=a._scaler(u),M=o.suffix,A=[];(a.hovertemplate||f)&&(A.push("["+[k[0]+M[0],k[1]+M[1],k[2]+M[2]].join(", ")),4===s&&A.push(", "+k[3]+M[3]),A.push("]"),A=A.join(""),y.extraText=_.toUpperCase()+": "+A),Array.isArray(a.hovertext)&&Array.isArray(a.hovertext[c])?d=a.hovertext[c][i]:Array.isArray(a.text)&&Array.isArray(a.text[c])&&(d=a.text[c][i]);var E=p.c2p(n.y0+(c+.5)*a.dy),I=n.x0+(i+.5)*a.dx,C=n.y0+(c+.5)*a.dy,R="["+u.slice(0,a.colormodel.length).join(", ")+"]";return[m.extendFlat(y,{index:[c,i],x0:t.c2p(n.x0+i*a.dx),x1:t.c2p(n.x0+(i+1)*a.dx),y0:E,y1:E,color:k,xVal:I,xLabelVal:I,yVal:C,yLabelVal:C,zLabelVal:R,text:d,hovertemplateLabels:{zLabel:R,colorLabel:A,"color[0]Label":k[0]+M[0],"color[1]Label":k[1]+M[1],"color[2]Label":k[2]+M[2],"color[3]Label":k[3]+M[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot"),style:x("./style"),hoverPoints:x("./hover"),eventData:x("./event_data"),moduleType:"trace",name:"image",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=m.strTranslate,y=x("../../constants/xmlns_namespaces"),e=x("./constants"),r=m.isIOS()||m.isSafari()||m.isIE();oe.exports=function(n,a,t,p){var u=a.xaxis,i=a.yaxis,c=!(r||n._context._exportedPlot);m.makeTraceGroups(p,t,"im").each(function(f){var l=g.select(this),h=f[0],d=h.trace,o=("fast"===d.zsmooth||!1===d.zsmooth&&c)&&!d._hasZ&&d._hasSource&&"linear"===u.type&&"linear"===i.type;d._realImage=o;var _,s,k,M,A,E,I=h.z,C=h.x0,R=h.y0,O=h.w,D=h.h,L=d.dx,B=d.dy;for(E=0;void 0===_&&E<O;)_=u.c2p(C+E*L),E++;for(E=O;void 0===s&&E>0;)s=u.c2p(C+E*L),E--;for(E=0;void 0===M&&E<D;)M=i.c2p(R+E*B),E++;for(E=D;void 0===A&&E>0;)A=i.c2p(R+E*B),E--;s<_&&(k=s,s=_,_=k),A<M&&(k=M,M=A,A=k),!o&&(_=Math.max(-.5*u._length,_),s=Math.min(1.5*u._length,s),M=Math.max(-.5*i._length,M),A=Math.min(1.5*i._length,A));var j=Math.round(s-_),W=Math.round(A-M);if(j<=0||W<=0)l.selectAll("image").data([]).exit().remove();else{var Y=l.selectAll("image").data([f]);Y.enter().append("svg:image").attr({xmlns:y.svg,preserveAspectRatio:"none"}),Y.exit().remove();var Q=!1===d.zsmooth?e.pixelatedStyle:"";if(o){var ne=m.simpleMap(u.range,u.r2l),X=m.simpleMap(i.range,i.r2l),$=ne[1]<ne[0],re=X[1]>X[0];if($||re){var H=_+j/2,U=M+W/2;Q+="transform:"+w(H+"px",U+"px")+"scale("+($?-1:1)+","+(re?-1:1)+")"+w(-H+"px",-U+"px")+";"}}Y.attr("style",Q);var G=new Promise(function(q){if(d._hasZ)q();else if(d._hasSource)if(d._canvas&&d._canvas.el.width===O&&d._canvas.el.height===D&&d._canvas.source===d.source)q();else{var ee=document.createElement("canvas");ee.width=O,ee.height=D;var te=ee.getContext("2d",{willReadFrequently:!0});d._image=d._image||new Image;var se=d._image;se.onload=function(){te.drawImage(se,0,0),d._canvas={el:ee,source:d.source},q()},se.setAttribute("src",d.source)}}).then(function(){var q;if(d._hasZ)q=ie(function(te,se){return I[se][te]}).toDataURL("image/png");else if(d._hasSource)if(o)q=d.source;else{var ee=d._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,O,D).data;q=ie(function(te,se){var ue=4*(se*O+te);return[ee[ue],ee[ue+1],ee[ue+2],ee[ue+3]]}).toDataURL("image/png")}Y.attr({"xlink:href":q,height:W,width:j,x:_,y:M})});n._promises.push(G)}function ie(q){var ee=document.createElement("canvas");ee.width=j,ee.height=W;var te,se=ee.getContext("2d",{willReadFrequently:!0}),ue=function(ve){return m.constrain(Math.round(u.c2p(C+ve*L)-_),0,j)},de=function(ve){return m.constrain(Math.round(i.c2p(R+ve*B)-M),0,W)},he=e.colormodel[d.colormodel],xe=he.colormodel||d.colormodel,ge=he.fmt;for(E=0;E<h.w;E++){var _e=ue(E),Ce=ue(E+1);if(Ce!==_e&&!isNaN(Ce)&&!isNaN(_e))for(var Le=0;Le<h.h;Le++){var Ie=de(Le),Be=de(Le+1);Be===Ie||isNaN(Be)||isNaN(Ie)||!q(E,Le)||(te=d._scaler(q(E,Le)),se.fillStyle=te?xe+"("+ge(te).join(",")+")":"rgba(0,0,0,0)",se.fillRect(_e,Ie,Ce-_e,Be-Ie))}}return ee}})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(x,oe,ae){"use strict";var g=x("@plotly/d3");oe.exports=function(m){g.select(m).selectAll(".im image").style("opacity",function(w){return w[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(x,oe,ae){"use strict";var g=x("../../lib/extend").extendFlat,m=x("../../lib/extend").extendDeep,w=x("../../plot_api/edit_types").overrideAll,y=x("../../plots/font_attributes"),e=x("../../components/color/attributes"),r=x("../../plots/domain").attributes,n=x("../../plots/cartesian/layout_attributes"),a=x("../../plot_api/plot_template").templatedArray,t=x("../../constants/delta.js"),p=x("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,u=y({editType:"plot",colorEditType:"plot"}),i={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},c={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},f=a("step",m({},i,{range:c}));oe.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:r({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:g({},u,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:p("value")},font:g({},u,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:p("value")},increasing:{symbol:{valType:"string",dflt:t.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:t.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:g({},u,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:m({},i,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:w({range:c,visible:g({},n.visible,{dflt:!0}),tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:g({},n.ticks,{dflt:"outside"}),ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,ticklabelstep:n.ticklabelstep,showticklabels:n.showticklabels,tickfont:y({}),tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,separatethousands:n.separatethousands,exponentformat:n.exponentformat,minexponent:n.minexponent,showexponent:n.showexponent,editType:"plot"},"plot"),steps:f,threshold:{line:{color:g({},i.line.color,{}),width:g({},i.line.width,{dflt:1}),editType:"plot"},thickness:g({},i.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(x,oe,ae){"use strict";var g=x("../../plots/plots");ae.name="indicator",ae.plot=function(m,w,y,e){g.plotBasePlot(ae.name,m,w,y,e)},ae.clean=function(m,w,y,e){g.cleanBasePlot(ae.name,m,w,y,e)}},{"../../plots/plots":619}],857:[function(x,oe,ae){"use strict";oe.exports={calc:function(g,m){var w=[],y=m.value;"number"!=typeof m._lastValue&&(m._lastValue=m.value);var e=m._lastValue,r=e;return m._hasDelta&&"number"==typeof m.delta.reference&&(r=m.delta.reference),w[0]={y,lastY:e,delta:y-r,relativeDelta:(y-r)/r},w}}},{}],858:[function(x,oe,ae){"use strict";oe.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./attributes"),w=x("../../plots/domain").defaults,y=x("../../plot_api/plot_template"),e=x("../../plots/array_container_defaults"),r=x("./constants.js"),n=x("../../plots/cartesian/tick_value_defaults"),a=x("../../plots/cartesian/tick_mark_defaults"),t=x("../../plots/cartesian/tick_label_defaults"),p=x("../../plots/cartesian/prefix_suffix_defaults");function u(i,c){function f(l,h){return g.coerce(i,c,m.gauge.steps,l,h)}f("color"),f("line.color"),f("line.width"),f("range"),f("thickness")}oe.exports={supplyDefaults:function(i,c,f,l){function h(O,D){return g.coerce(i,c,m,O,D)}w(c,l,h),h("mode"),c._hasNumber=-1!==c.mode.indexOf("number"),c._hasDelta=-1!==c.mode.indexOf("delta"),c._hasGauge=-1!==c.mode.indexOf("gauge");var d=h("value");c._range=[0,"number"==typeof d?1.5*d:1];var o,_,s,k,M,A,E=new Array(2);function I(O,D){return g.coerce(s,k,m.gauge,O,D)}function C(O,D){return g.coerce(M,A,m.gauge.axis,O,D)}if(c._hasNumber&&(h("number.valueformat"),h("number.font.color",l.font.color),h("number.font.family",l.font.family),h("number.font.size"),void 0===c.number.font.size&&(c.number.font.size=r.defaultNumberFontSize,E[0]=!0),h("number.prefix"),h("number.suffix"),o=c.number.font.size),c._hasDelta&&(h("delta.font.color",l.font.color),h("delta.font.family",l.font.family),h("delta.font.size"),void 0===c.delta.font.size&&(c.delta.font.size=(c._hasNumber?.5:1)*(o||r.defaultNumberFontSize),E[1]=!0),h("delta.reference",c.value),h("delta.relative"),h("delta.valueformat",c.delta.relative?"2%":""),h("delta.increasing.symbol"),h("delta.increasing.color"),h("delta.decreasing.symbol"),h("delta.decreasing.color"),h("delta.position"),_=c.delta.font.size),c._scaleNumbers=(!c._hasNumber||E[0])&&(!c._hasDelta||E[1])||!1,h("title.font.color",l.font.color),h("title.font.family",l.font.family),h("title.font.size",.25*(o||_||r.defaultNumberFontSize)),h("title.text"),c._hasGauge){(s=i.gauge)||(s={}),k=y.newContainer(c,"gauge"),I("shape"),(c._isBullet="bullet"===c.gauge.shape)||h("title.align","center"),(c._isAngular="angular"===c.gauge.shape)||h("align","center"),I("bgcolor",l.paper_bgcolor),I("borderwidth"),I("bordercolor"),I("bar.color"),I("bar.line.color"),I("bar.line.width"),I("bar.thickness",r.valueThickness*("bullet"===c.gauge.shape?.5:1)),e(s,k,{name:"steps",handleItemDefaults:u}),I("threshold.value"),I("threshold.thickness"),I("threshold.line.width"),I("threshold.line.color"),M={},s&&(M=s.axis||{}),A=y.newContainer(k,"axis"),C("visible"),c._range=C("range",c._range);var R={outerTicks:!0};n(M,A,C,"linear"),p(M,A,C,"linear",R),t(M,A,C,"linear",R),a(M,A,C,R)}else h("title.align","center"),h("align","center"),c._isAngular=c._isBullet=!1;c._length=null}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(x,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"indicator",basePlotModule:x("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:x("./attributes"),supplyDefaults:x("./defaults").supplyDefaults,calc:x("./calc").calc,plot:x("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("d3-interpolate").interpolate,w=x("d3-interpolate").interpolateNumber,y=x("../../lib"),e=y.strScale,r=y.strTranslate,n=y.rad2deg,a=x("../../constants/alignment").MID_SHIFT,t=x("../../components/drawing"),p=x("./constants"),u=x("../../lib/svg_text_utils"),i=x("../../plots/cartesian/axes"),c=x("../../plots/cartesian/axis_defaults"),f=x("../../plots/cartesian/position_defaults"),l=x("../../plots/cartesian/layout_attributes"),h=x("../../components/color"),d={left:"start",center:"middle",right:"end"},o={left:0,center:.5,right:1},_=/[yzafpn\xb5mkMGTPEZY]/;function s(C){return C&&C.duration>0}function k(C){C.each(function(R){h.stroke(g.select(this),R.line.color)}).each(function(R){h.fill(g.select(this),R.color)}).style("stroke-width",function(R){return R.line.width})}function M(C,R,O){var D=C._fullLayout,L=y.extendFlat({type:"linear",ticks:"outside",range:O,showline:!0},R),B={type:"linear",_id:"x"+R._id},j={letter:"x",font:D.font,noHover:!0,noTickson:!0};function W(Y,Q){return y.coerce(L,B,l,Y,Q)}return c(L,B,W,j,D),f(L,B,W,j),B}function A(C,R,O){return[Math.min(R/C.width,O/C.height),C,R+"x"+O]}function E(C,R,O,D){var L=document.createElementNS("http://www.w3.org/2000/svg","text"),B=g.select(L);return B.text(C).attr("x",0).attr("y",0).attr("text-anchor",O).attr("data-unformatted",C).call(u.convertToTspans,D).call(t.font,R),t.bBox(B.node())}function I(C,R,O,D,L,B){var j="_cache"+R;C[j]&&C[j].key===L||(C[j]={key:L,value:O});var W=y.aggNums(B,null,[C[j].value,D],2);return C[j].value=W,W}oe.exports=function(C,R,O,D){var L,B=C._fullLayout;s(O)&&D&&(L=D()),y.makeTraceGroups(B._indicatorlayer,R,"trace").each(function(j){var W,Y,Q,ne,X,$=j[0].trace,re=g.select(this),H=$._hasGauge,U=$._isAngular,G=$._isBullet,ie=$.domain,q={w:B._size.w*(ie.x[1]-ie.x[0]),h:B._size.h*(ie.y[1]-ie.y[0]),l:B._size.l+B._size.w*ie.x[0],r:B._size.r+B._size.w*(1-ie.x[1]),t:B._size.t+B._size.h*(1-ie.y[1]),b:B._size.b+B._size.h*ie.y[0]},ee=q.l+q.w/2,te=q.t+q.h/2,se=Math.min(q.w/2,q.h),ue=p.innerRadius*se,de=$.align||"center";if(Y=te,H){if(U&&(W=ee,Y=te+se/2,Q=function(Be){return ve=Be,[(Te=.9*ue)/Math.sqrt(ve.width/2*(ve.width/2)+ve.height*ve.height),ve,Te];var ve,Te}),G){var he=p.bulletPadding,xe=1-p.bulletNumberDomainSize+he;W=q.l+(xe+(1-xe)*o[de])*q.w,Q=function(Be){return A(Be,(p.bulletNumberDomainSize-he)*q.w,q.h)}}}else W=q.l+o[de]*q.w,Q=function(Be){return A(Be,q.w,q.h)};(function(Be,ve,Te,Pe){var De,Fe,Ue,He=Te[0].trace,Ke=Pe.numbersX,st=Pe.numbersY,Ve=He.align||"center",$e=d[Ve],Qe=Pe.transitionOpts,tt=Pe.onComplete,ut=y.ensureSingle(ve,"g","numbers"),xt=[];He._hasNumber&&xt.push("number"),He._hasDelta&&(xt.push("delta"),"left"===He.delta.position&&xt.reverse());var kt=ut.selectAll("text").data(xt);function Bt(cn,Tn,nn,Me){if(!cn.match("s")||nn>=0==Me>=0||Tn(nn).slice(-1).match(_)||Tn(Me).slice(-1).match(_))return Tn;var Ee=cn.slice().replace("s","f").replace(/\d+/,function(je){return parseInt(je)-1}),Se=M(Be,{tickformat:Ee});return function(je){return Math.abs(je)<1?i.tickText(Se,je).text:Tn(je)}}kt.enter().append("text"),kt.attr("text-anchor",function(){return $e}).attr("class",function(cn){return cn}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),kt.exit().remove();var Rt,ft=He.mode+He.align;if(He._hasDelta&&(Rt=function(){var cn=M(Be,{tickformat:He.delta.valueformat},He._range);cn.setScale(),i.prepTicks(cn);var Tn=function(qe){return i.tickText(cn,qe).text},nn=function(qe){return He.delta.relative?qe.relativeDelta:qe.delta},Me=function(qe,Je){return 0===qe||"number"!=typeof qe||isNaN(qe)?"-":(qe>0?He.delta.increasing.symbol:He.delta.decreasing.symbol)+Je(qe)},Ee=function(qe){return qe.delta>=0?He.delta.increasing.color:He.delta.decreasing.color};void 0===He._deltaLastValue&&(He._deltaLastValue=nn(Te[0]));var Se=ut.select("text.delta");function je(){Se.text(Me(nn(Te[0]),Tn)).call(h.fill,Ee(Te[0])).call(u.convertToTspans,Be)}return Se.call(t.font,He.delta.font).call(h.fill,Ee({delta:He._deltaLastValue})),s(Qe)?Se.transition().duration(Qe.duration).ease(Qe.easing).tween("text",function(){var qe=g.select(this),Je=nn(Te[0]),at=He._deltaLastValue,it=Bt(He.delta.valueformat,Tn,at,Je),yt=w(at,Je);return He._deltaLastValue=Je,function(vt){qe.text(Me(yt(vt),it)),qe.call(h.fill,Ee({delta:yt(vt)}))}}).each("end",function(){je(),tt&&tt()}).each("interrupt",function(){je(),tt&&tt()}):je(),Fe=E(Me(nn(Te[0]),Tn),He.delta.font,$e,Be),Se}(),ft+=He.delta.position+He.delta.font.size+He.delta.font.family+He.delta.valueformat,ft+=He.delta.increasing.symbol+He.delta.decreasing.symbol,Ue=Fe),He._hasNumber&&(function(){var cn=M(Be,{tickformat:He.number.valueformat},He._range);cn.setScale(),i.prepTicks(cn);var Tn=function(je){return i.tickText(cn,je).text},nn=He.number.suffix,Me=He.number.prefix,Ee=ut.select("text.number");function Se(){var je="number"==typeof Te[0].y?Me+Tn(Te[0].y)+nn:"-";Ee.text(je).call(t.font,He.number.font).call(u.convertToTspans,Be)}s(Qe)?Ee.transition().duration(Qe.duration).ease(Qe.easing).each("end",function(){Se(),tt&&tt()}).each("interrupt",function(){Se(),tt&&tt()}).attrTween("text",function(){var je=g.select(this),qe=w(Te[0].lastY,Te[0].y);He._lastValue=Te[0].y;var Je=Bt(He.number.valueformat,Tn,Te[0].lastY,Te[0].y);return function(at){je.text(Me+Je(qe(at))+nn)}}):Se(),De=E(Me+Tn(Te[0].y)+nn,He.number.font,$e,Be)}(),ft+=He.number.font.size+He.number.font.family+He.number.valueformat+He.number.suffix+He.number.prefix,Ue=De),He._hasDelta&&He._hasNumber){var lt,Ft,Jt=[(De.left+De.right)/2,(De.top+De.bottom)/2],ln=[(Fe.left+Fe.right)/2,(Fe.top+Fe.bottom)/2],dn=.75*He.delta.font.size;"left"===He.delta.position&&(lt=I(He,"deltaPos",0,-1*(De.width*o[He.align]+Fe.width*(1-o[He.align])+dn),ft,Math.min),Ft=Jt[1]-ln[1],Ue={width:De.width+Fe.width+dn,height:Math.max(De.height,Fe.height),left:Fe.left+lt,right:De.right,top:Math.min(De.top,Fe.top+Ft),bottom:Math.max(De.bottom,Fe.bottom+Ft)}),"right"===He.delta.position&&(lt=I(He,"deltaPos",0,De.width*(1-o[He.align])+Fe.width*o[He.align]+dn,ft,Math.max),Ft=Jt[1]-ln[1],Ue={width:De.width+Fe.width+dn,height:Math.max(De.height,Fe.height),left:De.left,right:Fe.right+lt,top:Math.min(De.top,Fe.top+Ft),bottom:Math.max(De.bottom,Fe.bottom+Ft)}),"bottom"===He.delta.position&&(lt=null,Ft=Fe.height,Ue={width:Math.max(De.width,Fe.width),height:De.height+Fe.height,left:Math.min(De.left,Fe.left),right:Math.max(De.right,Fe.right),top:De.bottom-De.height,bottom:De.bottom+Fe.height}),"top"===He.delta.position&&(lt=null,Ft=De.top,Ue={width:Math.max(De.width,Fe.width),height:De.height+Fe.height,left:Math.min(De.left,Fe.left),right:Math.max(De.right,Fe.right),top:De.bottom-De.height-Fe.height,bottom:De.bottom}),Rt.attr({dx:lt,dy:Ft})}(He._hasNumber||He._hasDelta)&&ut.attr("transform",function(){var Tn,cn=Pe.numbersScaler(Ue),nn=I(He,"numbersScale",1,cn[0],ft+=cn[2],Math.min);He._scaleNumbers||(nn=1),He._numbersTop=nn*Ue.top+(Tn=He._isAngular?st-nn*Ue.bottom:st-nn*(Ue.top+Ue.bottom)/2);var Me=Ue[Ve];"center"===Ve&&(Me=(Ue.left+Ue.right)/2);var Ee=Ke-nn*Me;return Ee=I(He,"numbersTranslate",0,Ee,ft,Math.max),r(Ee,Tn)+e(nn)})})(C,re,j,{numbersX:W,numbersY:Y,numbersScaler:Q,transitionOpts:O,onComplete:L}),H&&(ne={range:$.gauge.axis.range,color:$.gauge.bgcolor,line:{color:$.gauge.bordercolor,width:0},thickness:1},X={range:$.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:$.gauge.bordercolor,width:$.gauge.borderwidth},thickness:1});var ge=re.selectAll("g.angular").data(U?j:[]);ge.exit().remove();var _e=re.selectAll("g.angularaxis").data(U?j:[]);_e.exit().remove(),U&&function(Be,ve,Te,Pe){var De,Fe,Ue,He,Ke=Te[0].trace,st=Pe.size,Ve=Pe.radius,$e=Pe.innerRadius,Qe=Pe.gaugeBg,tt=Pe.gaugeOutline,ut=[st.l+st.w/2,st.t+st.h/2+Ve/2],xt=Pe.gauge,kt=Pe.layer,Bt=Pe.transitionOpts,Rt=Pe.onComplete,ft=Math.PI/2;function lt(Wt){var gt=Ke.gauge.axis.range[0],At=(Wt-gt)/(Ke.gauge.axis.range[1]-gt)*Math.PI-ft;return At<-ft?-ft:At>ft?ft:At}function Ft(Wt){return g.svg.arc().innerRadius(($e+Ve)/2-Wt/2*(Ve-$e)).outerRadius(($e+Ve)/2+Wt/2*(Ve-$e)).startAngle(-ft)}function Jt(Wt){Wt.attr("d",function(gt){return Ft(gt.thickness).startAngle(lt(gt.range[0])).endAngle(lt(gt.range[1]))()})}xt.enter().append("g").classed("angular",!0),xt.attr("transform",r(ut[0],ut[1])),kt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),kt.selectAll("g.xangularaxistick,path,text").remove(),(De=M(Be,Ke.gauge.axis)).type="linear",De.range=Ke.gauge.axis.range,De._id="xangularaxis",De.ticklabeloverflow="allow",De.setScale();var ln=function(Wt){return(De.range[0]-Wt.x)/(De.range[1]-De.range[0])*Math.PI+Math.PI},dn={},cn=i.makeLabelFns(De,0).labelStandoff;dn.xFn=function(Wt){var gt=ln(Wt);return Math.cos(gt)*cn},dn.yFn=function(Wt){var gt=ln(Wt),At=Math.sin(gt)>0?.2:1;return-Math.sin(gt)*(cn+Wt.fontSize*At)+Math.abs(Math.cos(gt))*(Wt.fontSize*a)},dn.anchorFn=function(Wt){var gt=ln(Wt),At=Math.cos(gt);return Math.abs(At)<.1?"middle":At>0?"start":"end"},dn.heightFn=function(Wt,gt,At){var Zt=ln(Wt);return-.5*(1+Math.sin(Zt))*At};var Tn=function(Wt){return r(ut[0]+Ve*Math.cos(Wt),ut[1]-Ve*Math.sin(Wt))};Ue=function(Wt){return Tn(ln(Wt))},Fe=i.calcTicks(De),He=i.getTickSigns(De)[2],De.visible&&(i.drawTicks(Be,De,{vals:Fe,layer:kt,path:"M"+(He="inside"===De.ticks?-1:1)*((De.linewidth||1)/2)+",0h"+He*De.ticklen,transFn:function(Wt){var gt=ln(Wt);return Tn(gt)+"rotate("+-n(gt)+")"}}),i.drawLabels(Be,De,{vals:Fe,layer:kt,transFn:Ue,labelFns:dn}));var Me=[Qe].concat(Ke.gauge.steps),Ee=xt.selectAll("g.bg-arc").data(Me);Ee.enter().append("g").classed("bg-arc",!0).append("path"),Ee.select("path").call(Jt).call(k),Ee.exit().remove();var Se=Ft(Ke.gauge.bar.thickness),je=xt.selectAll("g.value-arc").data([Ke.gauge.bar]);je.enter().append("g").classed("value-arc",!0).append("path");var Je,at,it,qe=je.select("path");s(Bt)?(qe.transition().duration(Bt.duration).ease(Bt.easing).each("end",function(){Rt&&Rt()}).each("interrupt",function(){Rt&&Rt()}).attrTween("d",(Je=Se,at=lt(Te[0].lastY),it=lt(Te[0].y),function(){var Wt=m(at,it);return function(gt){return Je.endAngle(Wt(gt))()}})),Ke._lastValue=Te[0].y):qe.attr("d","number"==typeof Te[0].y?Se.endAngle(lt(Te[0].y)):"M0,0Z"),qe.call(k),je.exit().remove(),Me=[];var yt=Ke.gauge.threshold.value;(yt||0===yt)&&Me.push({range:[yt,yt],color:Ke.gauge.threshold.color,line:{color:Ke.gauge.threshold.line.color,width:Ke.gauge.threshold.line.width},thickness:Ke.gauge.threshold.thickness});var vt=xt.selectAll("g.threshold-arc").data(Me);vt.enter().append("g").classed("threshold-arc",!0).append("path"),vt.select("path").call(Jt).call(k),vt.exit().remove();var Ut=xt.selectAll("g.gauge-outline").data([tt]);Ut.enter().append("g").classed("gauge-outline",!0).append("path"),Ut.select("path").call(Jt).call(k),Ut.exit().remove()}(C,0,j,{radius:se,innerRadius:ue,gauge:ge,layer:_e,size:q,gaugeBg:ne,gaugeOutline:X,transitionOpts:O,onComplete:L});var Ce=re.selectAll("g.bullet").data(G?j:[]);Ce.exit().remove();var Le=re.selectAll("g.bulletaxis").data(G?j:[]);Le.exit().remove(),G&&function(Be,ve,Te,Pe){var De,Fe,Ue,He,Ke,st=Te[0].trace,Ve=Pe.gauge,$e=Pe.layer,Qe=Pe.gaugeBg,tt=Pe.gaugeOutline,ut=Pe.size,xt=st.domain,kt=Pe.transitionOpts,Bt=Pe.onComplete;Ve.enter().append("g").classed("bullet",!0),Ve.attr("transform",r(ut.l,ut.t)),$e.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),$e.selectAll("g.xbulletaxistick,path,text").remove();var Rt=ut.h,ft=st.gauge.bar.thickness*Rt,lt=xt.x[0],Ft=xt.x[0]+(xt.x[1]-xt.x[0])*(st._hasNumber||st._hasDelta?1-p.bulletNumberDomainSize:1);function Jt(Ee){Ee.attr("width",function(Se){return Math.max(0,De.c2p(Se.range[1])-De.c2p(Se.range[0]))}).attr("x",function(Se){return De.c2p(Se.range[0])}).attr("y",function(Se){return.5*(1-Se.thickness)*Rt}).attr("height",function(Se){return Se.thickness*Rt})}(De=M(Be,st.gauge.axis))._id="xbulletaxis",De.domain=[lt,Ft],De.setScale(),Fe=i.calcTicks(De),Ue=i.makeTransTickFn(De),He=i.getTickSigns(De)[2],Ke=ut.t+ut.h,De.visible&&(i.drawTicks(Be,De,{vals:"inside"===De.ticks?i.clipEnds(De,Fe):Fe,layer:$e,path:i.makeTickPath(De,Ke,He),transFn:Ue}),i.drawLabels(Be,De,{vals:Fe,layer:$e,transFn:Ue,labelFns:i.makeLabelFns(De,Ke)}));var ln=[Qe].concat(st.gauge.steps),dn=Ve.selectAll("g.bg-bullet").data(ln);dn.enter().append("g").classed("bg-bullet",!0).append("rect"),dn.select("rect").call(Jt).call(k),dn.exit().remove();var cn=Ve.selectAll("g.value-bullet").data([st.gauge.bar]);cn.enter().append("g").classed("value-bullet",!0).append("rect"),cn.select("rect").attr("height",ft).attr("y",(Rt-ft)/2).call(k),s(kt)?cn.select("rect").transition().duration(kt.duration).ease(kt.easing).each("end",function(){Bt&&Bt()}).each("interrupt",function(){Bt&&Bt()}).attr("width",Math.max(0,De.c2p(Math.min(st.gauge.axis.range[1],Te[0].y)))):cn.select("rect").attr("width","number"==typeof Te[0].y?Math.max(0,De.c2p(Math.min(st.gauge.axis.range[1],Te[0].y))):0),cn.exit().remove();var Tn=Te.filter(function(){return st.gauge.threshold.value||0===st.gauge.threshold.value}),nn=Ve.selectAll("g.threshold-bullet").data(Tn);nn.enter().append("g").classed("threshold-bullet",!0).append("line"),nn.select("line").attr("x1",De.c2p(st.gauge.threshold.value)).attr("x2",De.c2p(st.gauge.threshold.value)).attr("y1",(1-st.gauge.threshold.thickness)/2*Rt).attr("y2",(1-(1-st.gauge.threshold.thickness)/2)*Rt).call(h.stroke,st.gauge.threshold.line.color).style("stroke-width",st.gauge.threshold.line.width),nn.exit().remove();var Me=Ve.selectAll("g.gauge-outline").data([tt]);Me.enter().append("g").classed("gauge-outline",!0).append("rect"),Me.select("rect").call(Jt).call(k),Me.exit().remove()}(C,0,j,{gauge:Ce,layer:Le,size:q,gaugeBg:ne,gaugeOutline:X,transitionOpts:O,onComplete:L});var Ie=re.selectAll("text.title").data(j);Ie.exit().remove(),Ie.enter().append("text").classed("title",!0),Ie.attr("text-anchor",function(){return G?d.right:d[$.title.align]}).text($.title.text).call(t.font,$.title.font).call(u.convertToTspans,C),Ie.attr("transform",function(){var Be,ve=q.l+q.w*o[$.title.align],Te=p.titlePadding,Pe=t.bBox(Ie.node());return H?(U&&(Be=$.gauge.axis.visible?t.bBox(_e.node()).top-Te-Pe.bottom:q.t+q.h/2-se/2-Pe.bottom-Te),G&&(Be=Y-(Pe.top+Pe.bottom)/2,ve=q.l-p.bulletPadding*q.w)):Be=$._numbersTop-Te-Pe.bottom,r(ve,Be)})})}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale/attributes"),m=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../mesh3d/attributes"),e=x("../../plots/attributes"),r=x("../../lib/extend").extendFlat,n=x("../../plot_api/edit_types").overrideAll,a=oe.exports=n(r({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:w(),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),valuehoverformat:m("value",1),showlegend:r({},e.showlegend,{dflt:!1})},g("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:y.opacity,lightposition:y.lightposition,lighting:y.lighting,flatshading:y.flatshading,contour:y.contour,hoverinfo:r({},e.hoverinfo)}),"calc","nested");a.flatshading.dflt=!0,a.lighting.facenormalsepsilon.dflt=0,a.x.editType=a.y.editType=a.z.editType=a.value.editType="calc+clearAxisTypes",a.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale/calc"),m=x("../streamtube/calc").processGrid,w=x("../streamtube/calc").filter;oe.exports=function(y,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=w(e.x,e._len),e._y=w(e.y,e._len),e._z=w(e.z,e._len),e._value=w(e.value,e._len);var r=m(e);e._gridFill=r.fill,e._Xs=r.Xs,e._Ys=r.Ys,e._Zs=r.Zs,e._len=r.len;for(var n=1/0,a=-1/0,t=0;t<e._len;t++){var p=e._value[t];n=Math.min(n,p),a=Math.max(a,p)}e._minValues=n,e._maxValues=a,e._vMin=null==e.isomin?n:e.isomin,e._vMax=void 0===e.isomax||null===e.isomin?a:e.isomax,g(y,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1045}],864:[function(x,oe,ae){"use strict";var g=x("../../../stackgl_modules").gl_mesh3d,m=x("../../lib/gl_format_color").parseColorScale,w=x("../../lib/str2rgbarray"),y=x("../../components/colorscale").extractOpts,e=x("../../plots/gl3d/zip3"),r=function(u,i){for(var c=i.length-1;c>0;c--){var f=Math.min(i[c],i[c-1]),l=Math.max(i[c],i[c-1]);if(l>f&&f<u&&u<=l)return{id:c,distRatio:(l-u)/(l-f)}}return{id:0,distRatio:0}};function n(u,i,c){this.scene=u,this.uid=c,this.mesh=i,this.name="",this.data=null,this.showContour=!1}var a=n.prototype;a.handlePick=function(u){if(u.object===this.mesh){var i=u.data.index,f=this.data._meshY[i],l=this.data._meshZ[i],h=this.data._Ys.length,d=this.data._Zs.length,o=r(this.data._meshX[i],this.data._Xs).id,_=r(f,this.data._Ys).id,s=r(l,this.data._Zs).id,k=u.index=s+d*_+d*h*o;u.traceCoordinate=[this.data._meshX[k],this.data._meshY[k],this.data._meshZ[k],this.data._value[k]];var M=this.data.hovertext||this.data.text;return Array.isArray(M)&&void 0!==M[k]?u.textLabel=M[k]:M&&(u.textLabel=M),!0}},a.update=function(u){var i=this.scene,c=i.fullSceneLayout;function f(d,o,_,s){return o.map(function(k){return d.d2l(k,0,s)*_})}this.data=p(u);var l={positions:e(f(c.xaxis,u._meshX,i.dataScale[0],u.xcalendar),f(c.yaxis,u._meshY,i.dataScale[1],u.ycalendar),f(c.zaxis,u._meshZ,i.dataScale[2],u.zcalendar)),cells:e(u._meshI,u._meshJ,u._meshK),lightPosition:[u.lightposition.x,u.lightposition.y,u.lightposition.z],ambient:u.lighting.ambient,diffuse:u.lighting.diffuse,specular:u.lighting.specular,roughness:u.lighting.roughness,fresnel:u.lighting.fresnel,vertexNormalsEpsilon:u.lighting.vertexnormalsepsilon,faceNormalsEpsilon:u.lighting.facenormalsepsilon,opacity:u.opacity,contourEnable:u.contour.show,contourColor:w(u.contour.color).slice(0,3),contourWidth:u.contour.width,useFacetNormals:u.flatshading},h=y(u);l.vertexIntensity=u._meshIntensity,l.vertexIntensityBounds=[h.min,h.max],l.colormap=m(u),this.mesh.update(l)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var t=["xyz","xzy","yxz","yzx","zxy","zyx"];function p(u){u._meshI=[],u._meshJ=[],u._meshK=[];var i,c,f,l,h,d,o,_=u.surface.show,s=u.spaceframe.show,k=u.surface.fill,M=u.spaceframe.fill,A=!1,E=!1,I=0,C=u._Xs,R=u._Ys,O=u._Zs,D=C.length,L=R.length,B=O.length,j=t.indexOf(u._gridFill.replace(/-/g,"").replace(/\+/g,"")),W=function(Ve,$e,Qe){switch(j){case 5:return Qe+B*$e+B*L*Ve;case 4:return Qe+B*Ve+B*D*$e;case 3:return $e+L*Qe+L*B*Ve;case 2:return $e+L*Ve+L*D*Qe;case 1:return Ve+D*Qe+D*B*$e;default:return Ve+D*$e+D*L*Qe}},Y=u._minValues,Q=u._maxValues,ne=u._vMin,X=u._vMax;function $(Ve,$e,Qe){for(var tt=d.length,ut=c;ut<tt;ut++)if(Ve===f[ut]&&$e===l[ut]&&Qe===h[ut])return ut;return-1}function re(){c=i}function H(){f=[],l=[],h=[],d=[],i=0,re()}function U(Ve,$e,Qe,tt){return f.push(Ve),l.push($e),h.push(Qe),d.push(tt),++i-1}function G(Ve,$e,Qe){for(var tt=[],ut=0;ut<Ve.length;ut++)tt[ut]=Ve[ut]*(1-Qe)+Qe*$e[ut];return tt}function ie(Ve){o=Ve}function q(Ve,$e){return"all"===Ve||null===Ve||Ve.indexOf($e)>-1}function ee(Ve,$e){return null===Ve?$e:Ve}function te(Ve,$e,Qe){re();var ut,xt,nn,Me,Ee,Se,je,qe,Je,at,it,yt,vt,Ut,Wt,kt=[$e],Bt=[Qe];if(o>=1)kt=[$e],Bt=[Qe];else if(o>0){var Rt=(Me=Qe,at=G(qe=function(gt,At,Zt){for(var Et=[],Ct=0;Ct<gt.length;Ct++)Et[Ct]=(gt[Ct]+At[Ct]+Zt[Ct])/3;return Et}(Ee=(nn=$e)[0],Se=nn[1],je=nn[2]),Ee,Je=Math.sqrt(1-o)),{xyzv:[[Ee,Se,it=G(qe,Se,Je)],[it,at,Ee],[Se,je,yt=G(qe,je,Je)],[yt,it,Se],[je,Ee,at],[at,yt,je]],abc:[[vt=Me[0],Ut=Me[1],-1],[-1,-1,vt],[Ut,Wt=Me[2],-1],[-1,-1,Ut],[Wt,vt,-1],[-1,-1,Wt]]});kt=Rt.xyzv,Bt=Rt.abc}for(var ft=0;ft<kt.length;ft++){$e=kt[ft],Qe=Bt[ft];for(var lt=[],Ft=0;Ft<3;Ft++){var Jt=$e[Ft][0],ln=$e[Ft][1],dn=$e[Ft][2],cn=$e[Ft][3],Tn=Qe[Ft]>-1?Qe[Ft]:$(Jt,ln,dn);lt[Ft]=Tn>-1?Tn:U(Jt,ln,dn,ee(Ve,cn))}ut=lt[1],xt=lt[2],u._meshI.push(lt[0]),u._meshJ.push(ut),u._meshK.push(xt),++I}}function se(Ve,$e,Qe,tt){var ut=Ve[3];ut<Qe&&(ut=Qe),ut>tt&&(ut=tt);for(var xt=(Ve[3]-ut)/(Ve[3]-$e[3]+1e-9),kt=[],Bt=0;Bt<4;Bt++)kt[Bt]=(1-xt)*Ve[Bt]+xt*$e[Bt];return kt}function ue(Ve,$e,Qe){return Ve>=$e&&Ve<=Qe}function de(Ve){var $e=.001*(X-ne);return Ve>=ne-$e&&Ve<=X+$e}function he(Ve){for(var $e=[],Qe=0;Qe<4;Qe++){var tt=Ve[Qe];$e.push([u._x[tt],u._y[tt],u._z[tt],u._value[tt]])}return $e}function xe(Ve,$e,Qe,tt,ut,xt){xt||(xt=1),Qe=[-1,-1,-1];var kt=!1,Bt=[ue($e[0][3],tt,ut),ue($e[1][3],tt,ut),ue($e[2][3],tt,ut)];if(!Bt[0]&&!Bt[1]&&!Bt[2])return!1;var Rt=function(lt,Ft,Jt){return de(Ft[0][3])&&de(Ft[1][3])&&de(Ft[2][3])?(te(lt,Ft,Jt),!0):xt<3&&xe(lt,Ft,Jt,ne,X,++xt)};if(Bt[0]&&Bt[1]&&Bt[2])return Rt(Ve,$e,Qe)||kt;var ft=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(lt){if(Bt[lt[0]]&&Bt[lt[1]]&&!Bt[lt[2]]){var Ft=$e[lt[0]],Jt=$e[lt[1]],ln=$e[lt[2]],dn=se(ln,Ft,tt,ut),cn=se(ln,Jt,tt,ut);kt=Rt(Ve,[cn,dn,Ft],[-1,-1,Qe[lt[0]]])||kt,kt=Rt(Ve,[Ft,Jt,cn],[Qe[lt[0]],Qe[lt[1]],-1])||kt,ft=!0}}),ft||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(lt){if(Bt[lt[0]]&&!Bt[lt[1]]&&!Bt[lt[2]]){var Ft=$e[lt[0]],ln=$e[lt[2]],dn=se($e[lt[1]],Ft,tt,ut),cn=se(ln,Ft,tt,ut);kt=Rt(Ve,[cn,dn,Ft],[-1,-1,Qe[lt[0]]])||kt,ft=!0}}),kt}function ge(Ve,$e,Qe,tt){var Rt,ft,lt,Ft,ut=!1,xt=he($e),kt=[ue(xt[0][3],Qe,tt),ue(xt[1][3],Qe,tt),ue(xt[2][3],Qe,tt),ue(xt[3][3],Qe,tt)];if(!(kt[0]||kt[1]||kt[2]||kt[3]))return ut;if(kt[0]&&kt[1]&&kt[2]&&kt[3])return E&&(Rt=Ve,ft=xt,lt=$e,(Ft=function(Jt,ln,dn){te(Rt,[ft[Jt],ft[ln],ft[dn]],[lt[Jt],lt[ln],lt[dn]])})(0,1,2),Ft(3,0,1),Ft(2,3,0),ut=void Ft(1,2,3)||ut),ut;var Bt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Rt){if(kt[Rt[0]]&&kt[Rt[1]]&&kt[Rt[2]]&&!kt[Rt[3]]){var ft=xt[Rt[0]],lt=xt[Rt[1]],Ft=xt[Rt[2]],Jt=xt[Rt[3]];if(E)ut=te(Ve,[ft,lt,Ft],[$e[Rt[0]],$e[Rt[1]],$e[Rt[2]]])||ut;else{var ln=se(Jt,ft,Qe,tt),dn=se(Jt,lt,Qe,tt),cn=se(Jt,Ft,Qe,tt);ut=te(null,[ln,dn,cn],[-1,-1,-1])||ut}Bt=!0}}),Bt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Rt){if(kt[Rt[0]]&&kt[Rt[1]]&&!kt[Rt[2]]&&!kt[Rt[3]]){var ft=xt[Rt[0]],lt=xt[Rt[1]],Ft=xt[Rt[2]],Jt=xt[Rt[3]],ln=se(Ft,ft,Qe,tt),dn=se(Ft,lt,Qe,tt),cn=se(Jt,lt,Qe,tt),Tn=se(Jt,ft,Qe,tt);E?(ut=te(Ve,[ft,Tn,ln],[$e[Rt[0]],-1,-1])||ut,ut=te(Ve,[lt,dn,cn],[$e[Rt[1]],-1,-1])||ut):(null,Me=[ln,dn,cn,Tn],Ee=[-1,-1,-1,-1],(Se=function(je,qe,Je){te(null,[Me[je],Me[qe],Me[Je]],[Ee[je],Ee[qe],Ee[Je]])})(0,1,2),ut=void Se(2,3,0)||ut),Bt=!0}var Me,Ee,Se}),Bt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Rt){if(kt[Rt[0]]&&!kt[Rt[1]]&&!kt[Rt[2]]&&!kt[Rt[3]]){var ft=xt[Rt[0]],Ft=xt[Rt[2]],Jt=xt[Rt[3]],ln=se(xt[Rt[1]],ft,Qe,tt),dn=se(Ft,ft,Qe,tt),cn=se(Jt,ft,Qe,tt);E?(ut=te(Ve,[ft,ln,dn],[$e[Rt[0]],-1,-1])||ut,ut=te(Ve,[ft,dn,cn],[$e[Rt[0]],-1,-1])||ut,ut=te(Ve,[ft,cn,ln],[$e[Rt[0]],-1,-1])||ut):ut=te(null,[ln,dn,cn],[-1,-1,-1])||ut,Bt=!0}})),ut}function _e(Ve,$e,Qe,tt,ut,xt,kt,Bt,Rt,ft,lt){var Ft=!1;return A&&(q(Ve,"A")&&(Ft=ge(null,[$e,Qe,tt,xt],ft,lt)||Ft),q(Ve,"B")&&(Ft=ge(null,[Qe,tt,ut,Rt],ft,lt)||Ft),q(Ve,"C")&&(Ft=ge(null,[Qe,xt,kt,Rt],ft,lt)||Ft),q(Ve,"D")&&(Ft=ge(null,[tt,xt,Bt,Rt],ft,lt)||Ft),q(Ve,"E")&&(Ft=ge(null,[Qe,tt,xt,Rt],ft,lt)||Ft)),E&&(Ft=ge(Ve,[Qe,tt,xt,Rt],ft,lt)||Ft),Ft}function Ce(Ve,$e,Qe,tt,ut,xt,kt,Bt){return[!0===Bt[0]||xe(Ve,he([$e,Qe,tt]),[$e,Qe,tt],xt,kt),!0===Bt[1]||xe(Ve,he([tt,ut,$e]),[tt,ut,$e],xt,kt)]}function Le(Ve,$e,Qe,tt,ut,xt,kt,Bt,Rt){return Bt?Ce(Ve,$e,Qe,ut,tt,xt,kt,Rt):Ce(Ve,Qe,ut,tt,$e,xt,kt,Rt)}function Ie(Ve,$e,Qe,tt,ut,xt,kt){var Bt,Rt,ft,lt,Ft=!1,Jt=function(){Ft=xe(Ve,[Bt,Rt,ft],[-1,-1,-1],ut,xt)||Ft,Ft=xe(Ve,[ft,lt,Bt],[-1,-1,-1],ut,xt)||Ft},ln=kt[0],dn=kt[1],cn=kt[2];return ln&&(Bt=G(he([W($e,Qe-0,tt-0)])[0],he([W($e-1,Qe-0,tt-0)])[0],ln),Rt=G(he([W($e,Qe-0,tt-1)])[0],he([W($e-1,Qe-0,tt-1)])[0],ln),ft=G(he([W($e,Qe-1,tt-1)])[0],he([W($e-1,Qe-1,tt-1)])[0],ln),lt=G(he([W($e,Qe-1,tt-0)])[0],he([W($e-1,Qe-1,tt-0)])[0],ln),Jt()),dn&&(Bt=G(he([W($e-0,Qe,tt-0)])[0],he([W($e-0,Qe-1,tt-0)])[0],dn),Rt=G(he([W($e-0,Qe,tt-1)])[0],he([W($e-0,Qe-1,tt-1)])[0],dn),ft=G(he([W($e-1,Qe,tt-1)])[0],he([W($e-1,Qe-1,tt-1)])[0],dn),lt=G(he([W($e-1,Qe,tt-0)])[0],he([W($e-1,Qe-1,tt-0)])[0],dn),Jt()),cn&&(Bt=G(he([W($e-0,Qe-0,tt)])[0],he([W($e-0,Qe-0,tt-1)])[0],cn),Rt=G(he([W($e-0,Qe-1,tt)])[0],he([W($e-0,Qe-1,tt-1)])[0],cn),ft=G(he([W($e-1,Qe-1,tt)])[0],he([W($e-1,Qe-1,tt-1)])[0],cn),lt=G(he([W($e-1,Qe-0,tt)])[0],he([W($e-1,Qe-0,tt-1)])[0],cn),Jt()),Ft}function Be(Ve,$e,Qe,tt,ut,xt,kt,Bt,Rt,ft,lt,Ft){var Jt=Ve;return Ft?(A&&"even"===Ve&&(Jt=null),_e(Jt,$e,Qe,tt,ut,xt,kt,Bt,Rt,ft,lt)):(A&&"odd"===Ve&&(Jt=null),_e(Jt,Rt,Bt,kt,xt,ut,tt,Qe,$e,ft,lt))}function ve(Ve,$e,Qe,tt,ut){for(var xt=[],kt=0,Bt=0;Bt<$e.length;Bt++)for(var Rt=$e[Bt],ft=1;ft<B;ft++)for(var lt=1;lt<L;lt++)xt.push(Le(Ve,W(Rt,lt-1,ft-1),W(Rt,lt-1,ft),W(Rt,lt,ft-1),W(Rt,lt,ft),Qe,tt,(Rt+lt+ft)%2,ut&&ut[kt]?ut[kt]:[])),kt++;return xt}function Te(Ve,$e,Qe,tt,ut){for(var xt=[],kt=0,Bt=0;Bt<$e.length;Bt++)for(var Rt=$e[Bt],ft=1;ft<D;ft++)for(var lt=1;lt<B;lt++)xt.push(Le(Ve,W(ft-1,Rt,lt-1),W(ft,Rt,lt-1),W(ft-1,Rt,lt),W(ft,Rt,lt),Qe,tt,(ft+Rt+lt)%2,ut&&ut[kt]?ut[kt]:[])),kt++;return xt}function Pe(Ve,$e,Qe,tt,ut){for(var xt=[],kt=0,Bt=0;Bt<$e.length;Bt++)for(var Rt=$e[Bt],ft=1;ft<L;ft++)for(var lt=1;lt<D;lt++)xt.push(Le(Ve,W(lt-1,ft-1,Rt),W(lt-1,ft,Rt),W(lt,ft-1,Rt),W(lt,ft,Rt),Qe,tt,(lt+ft+Rt)%2,ut&&ut[kt]?ut[kt]:[])),kt++;return xt}function De(Ve,$e,Qe){for(var tt=1;tt<B;tt++)for(var ut=1;ut<L;ut++)for(var xt=1;xt<D;xt++)Be(Ve,W(xt-1,ut-1,tt-1),W(xt-1,ut-1,tt),W(xt-1,ut,tt-1),W(xt-1,ut,tt),W(xt,ut-1,tt-1),W(xt,ut-1,tt),W(xt,ut,tt-1),W(xt,ut,tt),$e,Qe,(xt+ut+tt)%2)}function Fe(Ve,$e,Qe){A=!0,De(Ve,$e,Qe),A=!1}function Ue(Ve,$e,Qe,tt,ut,xt){for(var kt=[],Rt=0;Rt<$e.length;Rt++)for(var ft=$e[Rt],lt=1;lt<B;lt++)for(var Ft=1;Ft<L;Ft++)kt.push(Ie(Ve,ft,Ft,lt,Qe,tt,ut[Rt]));return kt}function He(Ve,$e,Qe,tt,ut,xt){for(var kt=[],Rt=0;Rt<$e.length;Rt++)for(var ft=$e[Rt],lt=1;lt<D;lt++)for(var Ft=1;Ft<B;Ft++)kt.push(Ie(Ve,lt,ft,Ft,Qe,tt,ut[Rt]));return kt}function Ke(Ve,$e,Qe,tt,ut,xt){for(var kt=[],Rt=0;Rt<$e.length;Rt++)for(var ft=$e[Rt],lt=1;lt<L;lt++)for(var Ft=1;Ft<D;Ft++)kt.push(Ie(Ve,Ft,lt,ft,Qe,tt,ut[Rt]));return kt}function st(Ve,$e){for(var Qe=[],tt=Ve;tt<$e;tt++)Qe.push(tt);return Qe}return function(){if(H(),function(){for(var Bt=0;Bt<D;Bt++)for(var Rt=0;Rt<L;Rt++)for(var ft=0;ft<B;ft++){var lt=W(Bt,Rt,ft);U(u._x[lt],u._y[lt],u._z[lt],u._value[lt])}}(),s&&M&&(ie(M),E=!0,De(null,ne,X),E=!1),_&&k){ie(k);for(var Ve=u.surface.pattern,$e=u.surface.count,Qe=0;Qe<$e;Qe++){var tt=1===$e?.5:Qe/($e-1),ut=(1-tt)*ne+tt*X,xt=Math.abs(ut-Y)>Math.abs(ut-Q)?[Y,ut]:[ut,Q];Fe(Ve,xt[0],xt[1])}}var kt=[[Math.min(ne,Q),Math.max(ne,Q)],[Math.min(Y,X),Math.max(Y,X)]];["x","y","z"].forEach(function(Bt){for(var Rt=[],ft=0;ft<kt.length;ft++){var lt=0,Ft=kt[ft][0],Jt=kt[ft][1],ln=u.slices[Bt];if(ln.show&&ln.fill){ie(ln.fill);var dn=[],cn=[],Tn=[];if(ln.locations.length)for(var nn=0;nn<ln.locations.length;nn++){var Me=r(ln.locations[nn],"x"===Bt?C:"y"===Bt?R:O);0===Me.distRatio?dn.push(Me.id):Me.id>0&&(cn.push(Me.id),Tn.push("x"===Bt?[Me.distRatio,0,0]:"y"===Bt?[0,Me.distRatio,0]:[0,0,Me.distRatio]))}else dn=st(1,"x"===Bt?D-1:"y"===Bt?L-1:B-1);cn.length>0&&(Rt[lt]="x"===Bt?Ue(null,cn,Ft,Jt,Tn):"y"===Bt?He(null,cn,Ft,Jt,Tn):Ke(null,cn,Ft,Jt,Tn),lt++),dn.length>0&&(Rt[lt]="x"===Bt?ve(null,dn,Ft,Jt,Rt[lt]):"y"===Bt?Te(null,dn,Ft,Jt,Rt[lt]):Pe(null,dn,Ft,Jt,Rt[lt]),lt++)}var Ee=u.caps[Bt];Ee.show&&Ee.fill&&(ie(Ee.fill),Rt[lt]="x"===Bt?ve(null,[0,D-1],Ft,Jt,Rt[lt]):"y"===Bt?Te(null,[0,L-1],Ft,Jt,Rt[lt]):Pe(null,[0,B-1],Ft,Jt,Rt[lt]),lt++)}}),0===I&&H(),u._meshX=f,u._meshY=l,u._meshZ=h,u._meshIntensity=d,u._Xs=C,u._Ys=R,u._Zs=O}(),u}oe.exports={findNearestOnAxis:r,generateIsoMeshes:p,createIsosurfaceTrace:function(u,i){var f=g({gl:u.glplot.gl}),l=new n(u,f,i.uid);return f._trace=l,l.update(i),u.glplot.add(f),l}}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../registry"),w=x("./attributes"),y=x("../../components/colorscale/defaults");function e(r,n,a,t,p){var u=p("isomin"),i=p("isomax");null!=i&&null!=u&&u>i&&(n.isomin=null,n.isomax=null);var c=p("x"),f=p("y"),l=p("z"),h=p("value");c&&c.length&&f&&f.length&&l&&l.length&&h&&h.length?(m.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y","z"],t),p("valuehoverformat"),["x","y","z"].forEach(function(d){p(d+"hoverformat");var o="caps."+d;p(o+".show")&&p(o+".fill");var _="slices."+d;p(_+".show")&&(p(_+".fill"),p(_+".locations"))}),p("spaceframe.show")&&p("spaceframe.fill"),p("surface.show")&&(p("surface.count"),p("surface.fill"),p("surface.pattern")),p("contour.show")&&(p("contour.color"),p("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(d){p(d)}),y(r,n,t,p,{prefix:"",cLetter:"c"}),n._length=null):n.visible=!1}oe.exports={supplyDefaults:function(r,n,a,t){e(r,n,0,t,function(p,u){return g.coerce(r,n,w,p,u)})},supplyIsoDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults").supplyDefaults,calc:x("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:x("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale/attributes"),m=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../surface/attributes"),e=x("../../plots/attributes"),r=x("../../lib/extend").extendFlat;oe.exports=r({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:w({editType:"calc"}),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},g("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:y.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:r({},y.contours.x.show,{}),color:y.contours.x.color,width:y.contours.x.width,editType:"calc"},lightposition:{x:r({},y.lightposition.x,{dflt:1e5}),y:r({},y.lightposition.y,{dflt:1e5}),z:r({},y.lightposition.z,{dflt:0}),editType:"calc"},lighting:r({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},y.lighting),hoverinfo:r({},e.hoverinfo,{editType:"calc"}),showlegend:r({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1061}],868:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale/calc");oe.exports=function(m,w){w.intensity&&g(m,w,{vals:w.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(x,oe,ae){"use strict";var g=x("../../../stackgl_modules").gl_mesh3d,m=x("../../../stackgl_modules").delaunay_triangulate,w=x("../../../stackgl_modules").alpha_shape,y=x("../../../stackgl_modules").convex_hull,e=x("../../lib/gl_format_color").parseColorScale,r=x("../../lib/str2rgbarray"),n=x("../../components/colorscale").extractOpts,a=x("../../plots/gl3d/zip3");function t(l,h,d){this.scene=l,this.uid=d,this.mesh=h,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var p=t.prototype;function u(l){for(var h=[],d=l.length,o=0;o<d;o++)h[o]=r(l[o]);return h}function i(l,h,d,o){for(var _=[],s=h.length,k=0;k<s;k++)_[k]=l.d2l(h[k],0,o)*d;return _}function c(l){for(var h=[],d=l.length,o=0;o<d;o++)h[o]=Math.round(l[o]);return h}function f(l,h){for(var d=l.length,o=0;o<d;o++)if(l[o]<=-.5||l[o]>=h-.5)return!1;return!0}p.handlePick=function(l){if(l.object===this.mesh){var h=l.index=l.data.index;l.traceCoordinate=l.data._cellCenter?l.data.dataCoordinate:[this.data.x[h],this.data.y[h],this.data.z[h]];var d=this.data.hovertext||this.data.text;return Array.isArray(d)&&void 0!==d[h]?l.textLabel=d[h]:d&&(l.textLabel=d),!0}},p.update=function(l){var h=this.scene,d=h.fullSceneLayout;this.data=l;var o,_=l.x.length,s=a(i(d.xaxis,l.x,h.dataScale[0],l.xcalendar),i(d.yaxis,l.y,h.dataScale[1],l.ycalendar),i(d.zaxis,l.z,h.dataScale[2],l.zcalendar));if(l.i&&l.j&&l.k){if(l.i.length!==l.j.length||l.j.length!==l.k.length||!f(l.i,_)||!f(l.j,_)||!f(l.k,_))return;o=a(c(l.i),c(l.j),c(l.k))}else o=0===l.alphahull?y(s):l.alphahull>0?w(l.alphahull,s):function(E,I){for(var C=["x","y","z"].indexOf(E),R=[],O=I.length,D=0;D<O;D++)R[D]=[I[D][(C+1)%3],I[D][(C+2)%3]];return m(R)}(l.delaunayaxis,s);var k={positions:s,cells:o,lightPosition:[l.lightposition.x,l.lightposition.y,l.lightposition.z],ambient:l.lighting.ambient,diffuse:l.lighting.diffuse,specular:l.lighting.specular,roughness:l.lighting.roughness,fresnel:l.lighting.fresnel,vertexNormalsEpsilon:l.lighting.vertexnormalsepsilon,faceNormalsEpsilon:l.lighting.facenormalsepsilon,opacity:l.opacity,contourEnable:l.contour.show,contourColor:r(l.contour.color).slice(0,3),contourWidth:l.contour.width,useFacetNormals:l.flatshading};if(l.intensity){var M=n(l);this.color="#fff";var A=l.intensitymode;k[A+"Intensity"]=l.intensity,k[A+"IntensityBounds"]=[M.min,M.max],k.colormap=e(l)}else l.vertexcolor?(this.color=l.vertexcolor[0],k.vertexColors=u(l.vertexcolor)):l.facecolor?(this.color=l.facecolor[0],k.cellColors=u(l.facecolor)):(this.color=l.color,k.meshColor=r(l.color));this.mesh.update(k)},p.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},oe.exports=function(l,h){var o=g({gl:l.glplot.gl}),_=new t(l,o,h.uid);return o._trace=_,_.update(h),l.glplot.add(o),_}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../lib"),w=x("../../components/colorscale/defaults"),y=x("./attributes");oe.exports=function(e,r,n,a){function t(u,i){return m.coerce(e,r,y,u,i)}function p(u){var i=u.map(function(c){var f=t(c);return f&&m.isArrayOrTypedArray(f)?f:null});return i.every(function(c){return c&&c.length===i[0].length})&&i}p(["x","y","z"])?(p(["i","j","k"]),(!r.i||r.j&&r.k)&&(!r.j||r.k&&r.i)&&(!r.k||r.i&&r.j)?(g.getComponentMethod("calendars","handleTraceDefaults")(e,r,["x","y","z"],a),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(u){t(u)}),t("contour.show")&&(t("contour.color"),t("contour.width")),"intensity"in e?(t("intensity"),t("intensitymode"),w(e,r,a,t,{prefix:"",cLetter:"c"})):(r.showscale=!1,"facecolor"in e?t("facecolor"):"vertexcolor"in e?t("vertexcolor"):t("color",n)),t("text"),t("hovertext"),t("hovertemplate"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),r._length=null):r.visible=!1):r.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:x("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(x,oe,ae){"use strict";var g=x("../../lib").extendFlat,m=x("../scatter/attributes"),w=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=x("../../components/drawing/attributes").dash,e=x("../../components/fx/attributes"),r=x("../../constants/delta.js"),n=r.INCREASING.COLOR,a=r.DECREASING.COLOR,t=m.line;function p(u){return{line:{color:g({},t.color,{dflt:u}),width:t.width,dash:y,editType:"style"},editType:"style"}}oe.exports={xperiod:m.xperiod,xperiod0:m.xperiod0,xperiodalignment:m.xperiodalignment,xhoverformat:w("x"),yhoverformat:w("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:g({},t.width,{}),dash:g({},y,{}),editType:"style"},increasing:p(n),decreasing:p(a),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:g({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":927}],873:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=g._,w=x("../../plots/cartesian/axes"),y=x("../../plots/cartesian/align_period"),e=x("../../constants/numerical").BADNUM;function r(a,t,p,u){return{o:a,h:t,l:p,c:u}}function n(a,t,p,u,i,c){for(var f=i.makeCalcdata(t,"open"),l=i.makeCalcdata(t,"high"),h=i.makeCalcdata(t,"low"),d=i.makeCalcdata(t,"close"),o=Array.isArray(t.text),_=Array.isArray(t.hovertext),s=!0,k=null,M=!!t.xperiodalignment,A=[],E=0;E<u.length;E++){var I=u[E],C=f[E],R=l[E],O=h[E],D=d[E];if(I!==e&&C!==e&&R!==e&&O!==e&&D!==e){D===C?null!==k&&D!==k&&(s=D>k):s=D>C,k=D;var L=c(C,R,O,D);L.pos=I,L.yc=(C+D)/2,L.i=E,L.dir=s?"increasing":"decreasing",L.x=L.pos,L.y=[O,R],M&&(L.orig_p=p[E]),o&&(L.tx=t.text[E]),_&&(L.htx=t.hovertext[E]),A.push(L)}else A.push({pos:I,empty:!0})}return t._extremes[i._id]=w.findExtremes(i,g.concat(h,l),{padded:!0}),A.length&&(A[0].t={labels:{open:m(a,"open:")+" ",high:m(a,"high:")+" ",low:m(a,"low:")+" ",close:m(a,"close:")+" "}}),A}oe.exports={calc:function(a,t){var p=w.getFromId(a,t.xaxis),u=w.getFromId(a,t.yaxis),i=function(d,o,_){var s=_._minDiff;if(!s){var k,M=d._fullData,A=[];for(s=1/0,k=0;k<M.length;k++){var E=M[k];if("ohlc"===E.type&&!0===E.visible&&E.xaxis===o._id){A.push(E);var I=o.makeCalcdata(E,"x");E._origX=I;var C=y(_,o,"x",I).vals;E._xcalc=C;var R=g.distinctVals(C).minDiff;R&&isFinite(R)&&(s=Math.min(s,R))}}for(s===1/0&&(s=1),k=0;k<A.length;k++)A[k]._minDiff=s}return s*_.tickwidth}(a,p,t),c=t._minDiff;t._minDiff=null;var f=t._origX;t._origX=null;var l=t._xcalc;t._xcalc=null;var h=n(a,t,f,l,u,r);return t._extremes[p._id]=w.findExtremes(p,l,{vpad:c/2}),h.length?(g.extendFlat(h[0].t,{wHover:c/2,tickLen:i}),h):[{t:{empty:!0}}]},calcCommon:n}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./ohlc_defaults"),w=x("../scatter/period_defaults"),y=x("./attributes");function e(r,n,a,t){a(t+".line.color"),a(t+".line.width",n.line.width),a(t+".line.dash",n.line.dash)}oe.exports=function(r,n,a,t){function p(u,i){return g.coerce(r,n,y,u,i)}m(r,n,p,t)?(w(r,n,t,p,{x:!0}),p("xhoverformat"),p("yhoverformat"),p("line.width"),p("line.dash"),e(0,n,p,"increasing"),e(0,n,p,"decreasing"),p("text"),p("hovertext"),p("tickwidth"),t._requestRangeslider[n.xaxis]=!0):n.visible=!1}},{"../../lib":503,"../scatter/period_defaults":947,"./attributes":872,"./ohlc_defaults":877}],875:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes"),m=x("../../lib"),w=x("../../components/fx"),y=x("../../components/color"),e=x("../../lib").fillText,r=x("../../constants/delta.js"),n={increasing:r.INCREASING.SYMBOL,decreasing:r.DECREASING.SYMBOL};function a(u,i,c,f){var l,h,d=u.cd,o=u.xa,_=d[0].trace,s=d[0].t,k=_.type,M="ohlc"===k?"l":"min",A="ohlc"===k?"h":"max",E=s.bPos||0,I=s.bdPos||s.tickLen,C=s.wHover,R=Math.min(1,I/Math.abs(o.r2c(o.range[1])-o.r2c(o.range[0])));function O(Q){var ne=Q.pos+E-i;return w.inbox(ne-C,ne+C,l)}function D(Q){var ne=Q[M],X=Q[A];return ne===X||w.inbox(ne-c,X-c,l)}function L(Q){return(O(Q)+D(Q))/2}l=u.maxHoverDistance-R,h=u.maxSpikeDistance-R;var B=w.getDistanceFunction(f,O,D,L);if(w.getClosest(d,B,u),!1===u.index)return null;var j=d[u.index];if(j.empty)return null;var W=_[j.dir],Y=W.line.color;return u.color=y.opacity(Y)&&W.line.width?Y:W.fillcolor,u.x0=o.c2p(j.pos+E-I,!0),u.x1=o.c2p(j.pos+E+I,!0),u.xLabelVal=void 0!==j.orig_p?j.orig_p:j.pos,u.spikeDistance=L(j)*h/l,u.xSpike=o.c2p(j.pos,!0),u}function t(u,i,c,f){var l=u.cd,h=u.ya,d=l[0].trace,o=l[0].t,_=[],s=a(u,i,c,f);if(!s)return[];var k=l[s.index].hi||d.hoverinfo,M=k.split("+");if("all"!==k&&-1===M.indexOf("y"))return[];for(var A=["high","open","close","low"],E={},I=0;I<A.length;I++){var C,R=A[I],O=d[R][s.index],D=h.c2p(O,!0);O in E?(C=E[O]).yLabel+="<br>"+o.labels[R]+g.hoverLabelText(h,O,d.yhoverformat):((C=m.extendFlat({},s)).y0=C.y1=D,C.yLabelVal=O,C.yLabel=o.labels[R]+g.hoverLabelText(h,O,d.yhoverformat),C.name="",_.push(C),E[O]=C)}return _}function p(u,i,c,f){var l=u.cd,h=u.ya,d=l[0].trace,o=l[0].t,_=a(u,i,c,f);if(!_)return[];var s=l[_.index],k=_.index=s.i,M=s.dir;function A(L){return o.labels[L]+g.hoverLabelText(h,d[L][k],d.yhoverformat)}var E=s.hi||d.hoverinfo,I=E.split("+"),C="all"===E,R=C||-1!==I.indexOf("y"),O=C||-1!==I.indexOf("text"),D=R?[A("open"),A("high"),A("low"),A("close")+"  "+n[M]]:[];return O&&e(s,d,D),_.extraText=D.join("<br>"),_.y0=_.y1=h.c2p(s.yc,!0),[_]}oe.exports={hoverPoints:function(u,i,c,f){return u.cd[0].trace.hoverlabel.split?t(u,i,c,f):p(u,i,c,f)},hoverSplit:t,hoverOnPoints:p}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(x,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"ohlc",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc").calc,plot:x("./plot"),style:x("./style"),hoverPoints:x("./hover").hoverPoints,selectPoints:x("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../lib");oe.exports=function(w,y,e,r){var n=e("x"),a=e("open"),t=e("high"),p=e("low"),u=e("close");if(e("hoverlabel.split"),g.getComponentMethod("calendars","handleTraceDefaults")(w,y,["x"],r),a&&t&&p&&u){var i=Math.min(a.length,t.length,p.length,u.length);return n&&(i=Math.min(i,m.minRowLength(n))),y._length=i,i}}},{"../../lib":503,"../../registry":638}],878:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib");oe.exports=function(w,y,e,r){var n=y.yaxis,a=y.xaxis,t=!!a.rangebreaks;m.makeTraceGroups(r,e,"trace ohlc").each(function(p){var u=g.select(this),i=p[0],c=i.t;if(!0!==i.trace.visible||c.empty)u.remove();else{var f=c.tickLen,l=u.selectAll("path").data(m.identity);l.enter().append("path"),l.exit().remove(),l.attr("d",function(h){if(h.empty)return"M0,0Z";var d=a.c2p(h.pos-f,!0),o=a.c2p(h.pos+f,!0),_=t?(d+o)/2:a.c2p(h.pos,!0);return"M"+d+","+n.c2p(h.o,!0)+"H"+_+"M"+_+","+n.c2p(h.h,!0)+"V"+n.c2p(h.l,!0)+"M"+o+","+n.c2p(h.c,!0)+"H"+_})}})}},{"../../lib":503,"@plotly/d3":58}],879:[function(x,oe,ae){"use strict";oe.exports=function(g,m){var w,y=g.cd,e=g.xaxis,r=g.yaxis,n=[],a=y[0].t.bPos||0;if(!1===m)for(w=0;w<y.length;w++)y[w].selected=0;else for(w=0;w<y.length;w++){var t=y[w];m.contains([e.c2p(t.pos+a),r.c2p(t.yc)],null,t.i,g)?(n.push({pointNumber:t.i,x:e.c2d(t.pos),y:r.c2d(t.yc)}),t.selected=1):t.selected=0}return n}},{}],880:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/drawing"),w=x("../../components/color");oe.exports=function(y,e,r){var n=r||g.select(y).selectAll("g.ohlclayer").selectAll("g.trace");n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var t=a[0].trace;g.select(this).selectAll("path").each(function(p){if(!p.empty){var u=t[p.dir].line;g.select(this).style("fill","none").call(w.stroke,u.color).call(m.dashLine,u.dash,u.width).style("opacity",t.selectedpoints&&!p.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(x,oe,ae){"use strict";var g=x("../../lib/extend").extendFlat,m=x("../../plots/attributes"),w=x("../../plots/font_attributes"),y=x("../../components/colorscale/attributes"),e=x("../../plots/template_attributes").hovertemplateAttrs,r=x("../../plots/domain").attributes,n=g({editType:"calc"},y("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});oe.exports={domain:r({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:g({},m.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:w({editType:"calc"}),tickfont:w({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:n,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(x,oe,ae){"use strict";var g=x("../../plots/get_data").getModuleCalcData,m=x("./plot");ae.name="parcats",ae.plot=function(w,y,e,r){var n=g(w.calcdata,"parcats");n.length&&m(w,n[0],e,r)},ae.clean=function(w,y,e,r){var n=r._has&&r._has("parcats"),a=y._has&&y._has("parcats");n&&!a&&r._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(x,oe,ae){"use strict";var g=x("../../lib/gup").wrap,m=x("../../components/colorscale/helpers").hasColorscale,w=x("../../components/colorscale/calc"),y=x("../../lib/filter_unique.js"),e=x("../../components/drawing"),r=x("../../lib"),n=x("fast-isnumeric");function a(u,i,c){u.valueInds.push(i),u.count+=c}function t(u,i,c){return{categoryInds:u,color:i,rawColor:c,valueInds:[],count:0}}function p(u,i,c){u.valueInds.push(i),u.count+=c}oe.exports=function(u,i){var c=r.filterVisible(i.dimensions);if(0===c.length)return[];var f,l,h,d=c.map(function($){var re;if("trace"===$.categoryorder)re=null;else if("array"===$.categoryorder)re=$.categoryarray;else{re=y($.values);for(var H=!0,U=0;U<re.length;U++)if(!n(re[U])){H=!1;break}re.sort(H?r.sorterAsc:void 0),"category descending"===$.categoryorder&&(re=re.reverse())}return function(G,ie){ie=null==ie?[]:ie.map(function(xe){return xe});var q={},ee={},te=[];ie.forEach(function(xe,ge){q[xe]=0,ee[xe]=ge});for(var se=0;se<G.length;se++){var ue,de=G[se];void 0===q[de]?(q[de]=1,ue=ie.push(de)-1,ee[de]=ue):(q[de]++,ue=ee[de]),te.push(ue)}var he=ie.map(function(xe){return q[xe]});return{uniqueValues:ie,uniqueCounts:he,inds:te}}($.values,re)});f=r.isArrayOrTypedArray(i.counts)?i.counts:[i.counts],function($){var re;if(function(H){for(var U=new Array(H.length),G=0;G<H.length;G++){if(H[G]<0||H[G]>=H.length||void 0!==U[H[G]])return!1;U[H[G]]=!0}return!0}($.map(function(H){return H.displayindex})))for(re=0;re<$.length;re++)$[re]._displayindex=$[re].displayindex;else for(re=0;re<$.length;re++)$[re]._displayindex=re}(c),c.forEach(function($,re){!function(H,U){H._categoryarray=U.uniqueValues,H._ticktext=null==H.ticktext?[]:H.ticktext.slice();for(var G=H._ticktext.length;G<U.uniqueValues.length;G++)H._ticktext.push(U.uniqueValues[G])}($,d[re])});var o,_=i.line;_?(m(i,"line")&&w(u,i,{vals:i.line.color,containerStr:"line",cLetter:"c"}),o=e.tryColorscale(_)):o=r.identity;var s,k,M,A,E,I=c[0].values.length,C={},R=d.map(function($){return $.inds});for(h=0,s=0;s<I;s++){var O=[];for(k=0;k<R.length;k++)O.push(R[k][s]);h+=l=f[s%f.length];var D=(M=s,A=void 0,E=void 0,r.isArrayOrTypedArray(_.color)?E=A=_.color[M%_.color.length]:A=_.color,{color:o(A),rawColor:E}),L=O+"-"+D.rawColor;void 0===C[L]&&(C[L]=t(O,D.color,D.rawColor)),p(C[L],s,l)}var B,$,re,H,U,j=c.map(function($,re){return{dimensionInd:re,containerInd:$._index,displayInd:$._displayindex,dimensionLabel:$.label,count:h,categories:[],dragX:null}});for(s=0;s<I;s++)for(l=f[s%f.length],k=0;k<j.length;k++){var W=j[k].containerInd,Y=d[k].inds[s],Q=j[k].categories;void 0===Q[Y]&&(Q[Y]={dimensionInd:k,categoryInd:B=Y,categoryValue:i.dimensions[W]._categoryarray[Y],displayInd:B,categoryLabel:i.dimensions[W]._ticktext[Y],valueInds:[],count:0,dragY:null}),a(Q[Y],s,l)}return g((re=C,H=h,U=($=j).map(function(G){return G.categories.length}).reduce(function(G,ie){return Math.max(G,ie)}),{dimensions:$,paths:re,trace:void 0,maxCats:U,count:H}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/colorscale/helpers").hasColorscale,w=x("../../components/colorscale/defaults"),y=x("../../plots/domain").defaults,e=x("../../plots/array_container_defaults"),r=x("./attributes"),n=x("../parcoords/merge_length");function a(t,p){function u(o,_){return g.coerce(t,p,r.dimensions,o,_)}var i=u("values"),c=u("visible");if(i&&i.length||(c=p.visible=!1),c){u("label"),u("displayindex",p._index);var f,l=t.categoryarray,h=Array.isArray(l)&&l.length>0;h&&(f="array");var d=u("categoryorder",f);"array"===d?(u("categoryarray"),u("ticktext")):(delete t.categoryarray,delete t.ticktext),h||"array"!==d||(p.categoryorder="trace")}}oe.exports=function(t,p,u,i){function c(o,_){return g.coerce(t,p,r,o,_)}var f=e(t,p,{name:"dimensions",handleItemDefaults:a}),l=function(o,_,s,k,M){M("line.shape"),M("line.hovertemplate");var A=M("line.color",k.colorway[0]);if(m(o,"line")&&g.isArrayOrTypedArray(A)){if(A.length)return M("line.colorscale"),w(o,_,k,M,{prefix:"line.",cLetter:"c"}),A.length;_.line.color=s}return 1/0}(t,p,u,i,c);y(p,i,c),Array.isArray(f)&&f.length||(p.visible=!1),n(p,f,"values",l),c("hoveron"),c("hovertemplate"),c("arrangement"),c("bundlecolors"),c("sortpaths"),c("counts");var h={family:i.font.family,size:Math.round(i.font.size),color:i.font.color};g.coerceFont(c,"labelfont",h);var d={family:i.font.family,size:Math.round(i.font.size/1.2),color:i.font.color};g.coerceFont(c,"tickfont",d)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":898,"./attributes":881}],885:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:x("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("d3-interpolate").interpolateNumber,w=x("../../plot_api/plot_api"),y=x("../../components/fx"),e=x("../../lib"),r=e.strTranslate,n=x("../../components/drawing"),a=x("tinycolor2"),t=x("../../lib/svg_text_utils");function p(H,U,G,ie){var q=H.map(Q.bind(0,U,G)),ee=ie.selectAll("g.parcatslayer").data([null]);ee.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var te=ee.selectAll("g.trace.parcats").data(q,u),se=te.enter().append("g").attr("class","trace parcats");te.attr("transform",function(Ie){return r(Ie.x,Ie.y)}),se.append("g").attr("class","paths");var ue=te.select("g.paths").selectAll("path.path").data(function(Ie){return Ie.paths},u);ue.attr("fill",function(Ie){return Ie.model.color});var de=ue.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Ie){return Ie.model.color}).attr("fill-opacity",0);_(de),ue.attr("d",function(Ie){return Ie.svgD}),de.empty()||ue.sort(c),ue.exit().remove(),ue.on("mouseover",f).on("mouseout",l).on("click",o),se.append("g").attr("class","dimensions");var he=te.select("g.dimensions").selectAll("g.dimension").data(function(Ie){return Ie.dimensions},u);he.enter().append("g").attr("class","dimension"),he.attr("transform",function(Ie){return r(Ie.x,0)}),he.exit().remove();var xe=he.selectAll("g.category").data(function(Ie){return Ie.categories},u),ge=xe.enter().append("g").attr("class","category");xe.attr("transform",function(Ie){return r(0,Ie.y)}),ge.append("rect").attr("class","catrect").attr("pointer-events","none"),xe.select("rect.catrect").attr("fill","none").attr("width",function(Ie){return Ie.width}).attr("height",function(Ie){return Ie.height}),k(ge);var _e=xe.selectAll("rect.bandrect").data(function(Ie){return Ie.bands},u);_e.each(function(){e.raiseToTop(this)}),_e.attr("fill",function(Ie){return Ie.color});var Ce=_e.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Ie){return Ie.color}).attr("fill-opacity",0);_e.attr("fill",function(Ie){return Ie.color}).attr("width",function(Ie){return Ie.width}).attr("height",function(Ie){return Ie.height}).attr("y",function(Ie){return Ie.y}).attr("cursor",function(Ie){return"fixed"===Ie.parcatsViewModel.arrangement?"default":"perpendicular"===Ie.parcatsViewModel.arrangement?"ns-resize":"move"}),M(Ce),_e.exit().remove(),ge.append("text").attr("class","catlabel").attr("pointer-events","none");var Le=U._fullLayout.paper_bgcolor;xe.select("text.catlabel").attr("text-anchor",function(Ie){return i(Ie)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",t.makeTextShadow(Le)).style("fill","rgb(0, 0, 0)").attr("x",function(Ie){return i(Ie)?Ie.width+5:-5}).attr("y",function(Ie){return Ie.height/2}).text(function(Ie){return Ie.model.categoryLabel}).each(function(Ie){n.font(g.select(this),Ie.parcatsViewModel.categorylabelfont),t.convertToTspans(g.select(this),U)}),ge.append("text").attr("class","dimlabel"),xe.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Ie){return"fixed"===Ie.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(Ie){return Ie.width/2}).attr("y",-5).text(function(Ie,Be){return 0===Be?Ie.parcatsViewModel.model.dimensions[Ie.model.dimensionInd].dimensionLabel:null}).each(function(Ie){n.font(g.select(this),Ie.parcatsViewModel.labelfont)}),xe.selectAll("rect.bandrect").on("mouseover",R).on("mouseout",O),xe.exit().remove(),he.call(g.behavior.drag().origin(function(Ie){return{x:Ie.x,y:0}}).on("dragstart",D).on("drag",L).on("dragend",B)),te.each(function(Ie){Ie.traceSelection=g.select(this),Ie.pathSelection=g.select(this).selectAll("g.paths").selectAll("path.path"),Ie.dimensionSelection=g.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),te.exit().remove()}function u(H){return H.key}function i(H){return H.model.dimensionInd===H.parcatsViewModel.dimensions[H.parcatsViewModel.dimensions.length-1].model.dimensionInd}function c(H,U){return H.model.rawColor>U.model.rawColor?1:H.model.rawColor<U.model.rawColor?-1:0}function f(H){if(!H.parcatsViewModel.dragDimension&&-1===H.parcatsViewModel.hoverinfoItems.indexOf("skip")){e.raiseToTop(this),s(g.select(this));var U=h(H),G=d(H);if(H.parcatsViewModel.graphDiv.emit("plotly_hover",{points:U,event:g.event,constraints:G}),-1===H.parcatsViewModel.hoverinfoItems.indexOf("none")){var ie,q,ee,te=g.mouse(this)[0],se=H.parcatsViewModel.graphDiv,ue=H.parcatsViewModel.trace,de=se._fullLayout,he=de._paperdiv.node().getBoundingClientRect(),xe=H.parcatsViewModel.graphDiv.getBoundingClientRect();for(ee=0;ee<H.leftXs.length-1;ee++)if(H.leftXs[ee]+H.dimWidths[ee]-2<=te&&te<=H.leftXs[ee+1]+2){var ge=H.parcatsViewModel.dimensions[ee];ie=(ge.x+ge.width+H.parcatsViewModel.dimensions[ee+1].x)/2,q=(H.topYs[ee]+H.topYs[ee+1]+H.height)/2;break}var Ce=H.parcatsViewModel.x+ie,Le=H.parcatsViewModel.y+q,Ie=a.mostReadable(H.model.color,["black","white"]),Be=H.model.count,ve=Be/H.parcatsViewModel.model.count,Te={countLabel:Be,probabilityLabel:ve.toFixed(3)},Pe=[];-1!==H.parcatsViewModel.hoverinfoItems.indexOf("count")&&Pe.push(["Count:",Te.countLabel].join(" ")),-1!==H.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Pe.push(["P:",Te.probabilityLabel].join(" "));var De=Pe.join("<br>"),Fe=g.mouse(se)[0];y.loneHover({trace:ue,x:Ce-he.left+xe.left,y:Le-he.top+xe.top,text:De,color:H.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Ie,idealAlign:Fe<Ce?"right":"left",hovertemplate:(ue.line||{}).hovertemplate,hovertemplateLabels:Te,eventData:[{data:ue._input,fullData:ue,count:Be,probability:ve}]},{container:de._hoverlayer.node(),outerContainer:de._paper.node(),gd:se})}}}function l(H){if(!H.parcatsViewModel.dragDimension&&(_(g.select(this)),y.loneUnhover(H.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),H.parcatsViewModel.pathSelection.sort(c),-1===H.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var U=h(H),G=d(H);H.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:U,event:g.event,constraints:G})}}function h(H){for(var U=[],G=j(H.parcatsViewModel),ie=0;ie<H.model.valueInds.length;ie++)U.push({curveNumber:G,pointNumber:H.model.valueInds[ie]});return U}function d(H){for(var U={},G=H.parcatsViewModel.model.dimensions,ie=0;ie<G.length;ie++){var q=G[ie];U[q.containerInd]=q.categories[H.model.categoryInds[ie]].categoryValue}return void 0!==H.model.rawColor&&(U.color=H.model.rawColor),U}function o(H){if(-1===H.parcatsViewModel.hoverinfoItems.indexOf("skip")){var U=h(H),G=d(H);H.parcatsViewModel.graphDiv.emit("plotly_click",{points:U,event:g.event,constraints:G})}}function _(H){H.attr("fill",function(U){return U.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function s(H){H.attr("fill-opacity",.8).attr("stroke",function(U){return a.mostReadable(U.model.color,["black","white"])}).attr("stroke-width",.3)}function k(H){H.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function M(H){H.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function A(H){var G=H.categoryViewModel.model.dimensionInd,ie=H.categoryViewModel.model.categoryInd;return H.parcatsViewModel.pathSelection.filter(function(q){return q.model.categoryInds[G]===ie&&q.model.color===H.color})}function E(H,U,G){var ie=g.select(H).datum(),q=ie.categoryViewModel.model,ee=ie.parcatsViewModel.graphDiv,te=g.select(H.parentNode).selectAll("rect.bandrect"),se=[];te.each(function(de){A(de).each(function(he){Array.prototype.push.apply(se,h(he))})});var ue={};ue[q.dimensionInd]=q.categoryValue,ee.emit(U,{points:se,event:G,constraints:ue})}function I(H,U,G){var ie=g.select(H).datum(),q=ie.categoryViewModel.model,ee=ie.parcatsViewModel.graphDiv,te=A(ie),se=[];te.each(function(de){Array.prototype.push.apply(se,h(de))});var ue={};ue[q.dimensionInd]=q.categoryValue,void 0!==ie.rawColor&&(ue.color=ie.rawColor),ee.emit(U,{points:se,event:G,constraints:ue})}function C(H,U,G){H._fullLayout._calcInverseTransform(H);var ie,q,ee=H._fullLayout._invScaleX,te=H._fullLayout._invScaleY,se=g.select(G.parentNode).select("rect.catrect"),ue=se.node().getBoundingClientRect(),de=se.datum(),he=de.parcatsViewModel,ge=he.trace,_e=ue.top+ue.height/2;he.dimensions.length>1&&he.model.dimensions[de.model.dimensionInd].displayInd===he.dimensions.length-1?(ie=ue.left,q="left"):(ie=ue.left+ue.width,q="right");var Ce=de.model.count,Le=de.model.categoryLabel,Ie=Ce/de.parcatsViewModel.model.count,Be={countLabel:Ce,categoryLabel:Le,probabilityLabel:Ie.toFixed(3)},ve=[];-1!==de.parcatsViewModel.hoverinfoItems.indexOf("count")&&ve.push(["Count:",Be.countLabel].join(" ")),-1!==de.parcatsViewModel.hoverinfoItems.indexOf("probability")&&ve.push(["P("+Be.categoryLabel+"):",Be.probabilityLabel].join(" "));var Te=ve.join("<br>");return{trace:ge,x:ee*(ie-U.left),y:te*(_e-U.top),text:Te,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:q,hovertemplate:ge.hovertemplate,hovertemplateLabels:Be,eventData:[{data:ge._input,fullData:ge,count:Ce,category:Le,probability:Ie}]}}function R(H){if(!H.parcatsViewModel.dragDimension&&-1===H.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(g.mouse(this)[1]<-1)return;var U,G=H.parcatsViewModel.graphDiv,ie=G._fullLayout,q=ie._paperdiv.node().getBoundingClientRect(),ee=H.parcatsViewModel.hoveron;"color"===ee?(s(ue=A(se=g.select(this).datum())),ue.each(function(){e.raiseToTop(this)}),g.select(this.parentNode).selectAll("rect.bandrect").filter(function(de){return de.color===se.color}).each(function(){e.raiseToTop(this),g.select(this).attr("stroke","black").attr("stroke-width",1.5)}),I(this,"plotly_hover",g.event)):(function(te){g.select(te.parentNode).selectAll("rect.bandrect").each(function(se){var ue=A(se);s(ue),ue.each(function(){e.raiseToTop(this)})}),g.select(te.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(this),E(this,"plotly_hover",g.event)),-1===H.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===ee?U=C(G,q,this):"color"===ee?U=function(te,se,ue){te._fullLayout._calcInverseTransform(te);var de,he,xe=te._fullLayout._invScaleX,ge=te._fullLayout._invScaleY,_e=ue.getBoundingClientRect(),Ce=g.select(ue).datum(),Le=Ce.categoryViewModel,Ie=Le.parcatsViewModel,ve=Ie.trace,Te=_e.y+_e.height/2;Ie.dimensions.length>1&&Ie.model.dimensions[Le.model.dimensionInd].displayInd===Ie.dimensions.length-1?(de=_e.left,he="left"):(de=_e.left+_e.width,he="right");var Pe=Le.model.categoryLabel,De=Ce.parcatsViewModel.model.count,Fe=0;Ce.categoryViewModel.bands.forEach(function(xt){xt.color===Ce.color&&(Fe+=xt.count)});var Ue=Le.model.count,He=0;Ie.pathSelection.each(function(xt){xt.model.color===Ce.color&&(He+=xt.model.count)});var Ke=Fe/De,st=Fe/He,Ve=Fe/Ue,$e={countLabel:De,categoryLabel:Pe,probabilityLabel:Ke.toFixed(3)},Qe=[];-1!==Le.parcatsViewModel.hoverinfoItems.indexOf("count")&&Qe.push(["Count:",$e.countLabel].join(" ")),-1!==Le.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(Qe.push("P(color \u2229 "+Pe+"): "+$e.probabilityLabel),Qe.push("P("+Pe+" | color): "+st.toFixed(3)),Qe.push("P(color | "+Pe+"): "+Ve.toFixed(3)));var tt=Qe.join("<br>"),ut=a.mostReadable(Ce.color,["black","white"]);return{trace:ve,x:xe*(de-se.left),y:ge*(Te-se.top),text:tt,color:Ce.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:ut,fontSize:10,idealAlign:he,hovertemplate:ve.hovertemplate,hovertemplateLabels:$e,eventData:[{data:ve._input,fullData:ve,category:Pe,count:De,probability:Ke,categorycount:Ue,colorcount:He,bandcolorcount:Fe}]}}(G,q,this):"dimension"===ee&&(U=function(te,se,ue){var de=[];return g.select(ue.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){de.push(C(te,se,this))}),de}(G,q,this)),U&&y.loneHover(U,{container:ie._hoverlayer.node(),outerContainer:ie._paper.node(),gd:G}))}var se,ue}function O(H){var U=H.parcatsViewModel;!U.dragDimension&&(_(U.pathSelection),k(U.dimensionSelection.selectAll("g.category")),M(U.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),y.loneUnhover(U.graphDiv._fullLayout._hoverlayer.node()),U.pathSelection.sort(c),-1===U.hoverinfoItems.indexOf("skip"))&&("color"===H.parcatsViewModel.hoveron?I(this,"plotly_unhover",g.event):E(this,"plotly_unhover",g.event))}function D(H){"fixed"!==H.parcatsViewModel.arrangement&&(H.dragDimensionDisplayInd=H.model.displayInd,H.initialDragDimensionDisplayInds=H.parcatsViewModel.model.dimensions.map(function(U){return U.displayInd}),H.dragHasMoved=!1,H.dragCategoryDisplayInd=null,g.select(this).selectAll("g.category").select("rect.catrect").each(function(U){var G=g.mouse(this)[0],ie=g.mouse(this)[1];-2<=G&&G<=U.width+2&&-2<=ie&&ie<=U.height+2&&(H.dragCategoryDisplayInd=U.model.displayInd,H.initialDragCategoryDisplayInds=H.model.categories.map(function(q){return q.displayInd}),U.model.dragY=U.y,e.raiseToTop(this.parentNode),g.select(this.parentNode).selectAll("rect.bandrect").each(function(q){q.y<ie&&ie<=q.y+q.height&&(H.potentialClickBand=this)}))}),H.parcatsViewModel.dragDimension=H,y.loneUnhover(H.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function L(H){if("fixed"!==H.parcatsViewModel.arrangement&&(H.dragHasMoved=!0,null!==H.dragDimensionDisplayInd)){var U=H.dragDimensionDisplayInd,G=U-1,ie=U+1,q=H.parcatsViewModel.dimensions[U];if(null!==H.dragCategoryDisplayInd){var ee=q.categories[H.dragCategoryDisplayInd];ee.model.dragY+=g.event.dy;var te=ee.model.dragY,se=ee.model.displayInd,ue=q.categories,de=ue[se-1],he=ue[se+1];void 0!==de&&te<de.y+de.height/2&&(ee.model.displayInd=de.model.displayInd,de.model.displayInd=se),void 0!==he&&te+ee.height>he.y+he.height/2&&(ee.model.displayInd=he.model.displayInd,he.model.displayInd=se),H.dragCategoryDisplayInd=ee.model.displayInd}if(null===H.dragCategoryDisplayInd||"freeform"===H.parcatsViewModel.arrangement){q.model.dragX=g.event.x;var xe=H.parcatsViewModel.dimensions[G],ge=H.parcatsViewModel.dimensions[ie];void 0!==xe&&q.model.dragX<xe.x+xe.width&&(q.model.displayInd=xe.model.displayInd,xe.model.displayInd=U),void 0!==ge&&q.model.dragX+q.width>ge.x&&(q.model.displayInd=ge.model.displayInd,ge.model.displayInd=H.dragDimensionDisplayInd),H.dragDimensionDisplayInd=q.model.displayInd}$(H.parcatsViewModel),X(H.parcatsViewModel),Y(H.parcatsViewModel),W(H.parcatsViewModel)}}function B(H){if("fixed"!==H.parcatsViewModel.arrangement&&null!==H.dragDimensionDisplayInd){g.select(this).selectAll("text").attr("font-weight","normal");var U={},G=j(H.parcatsViewModel),ie=H.parcatsViewModel.model.dimensions.map(function(he){return he.displayInd}),q=H.initialDragDimensionDisplayInds.some(function(he,xe){return he!==ie[xe]});q&&ie.forEach(function(he,xe){U["dimensions["+H.parcatsViewModel.model.dimensions[xe].containerInd+"].displayindex"]=he});var ee=!1;if(null!==H.dragCategoryDisplayInd){var te=H.model.categories.map(function(he){return he.displayInd});if(ee=H.initialDragCategoryDisplayInds.some(function(he,xe){return he!==te[xe]})){var se=H.model.categories.slice().sort(function(he,xe){return he.displayInd-xe.displayInd}),ue=se.map(function(he){return he.categoryValue}),de=se.map(function(he){return he.categoryLabel});U["dimensions["+H.model.containerInd+"].categoryarray"]=[ue],U["dimensions["+H.model.containerInd+"].ticktext"]=[de],U["dimensions["+H.model.containerInd+"].categoryorder"]="array"}}-1===H.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!H.dragHasMoved&&H.potentialClickBand&&("color"===H.parcatsViewModel.hoveron?I(H.potentialClickBand,"plotly_click",g.event.sourceEvent):E(H.potentialClickBand,"plotly_click",g.event.sourceEvent)),H.model.dragX=null,null!==H.dragCategoryDisplayInd&&(H.parcatsViewModel.dimensions[H.dragDimensionDisplayInd].categories[H.dragCategoryDisplayInd].model.dragY=null,H.dragCategoryDisplayInd=null),H.dragDimensionDisplayInd=null,H.parcatsViewModel.dragDimension=null,H.dragHasMoved=null,H.potentialClickBand=null,$(H.parcatsViewModel),X(H.parcatsViewModel),g.transition().duration(300).ease("cubic-in-out").each(function(){Y(H.parcatsViewModel,!0),W(H.parcatsViewModel,!0)}).each("end",function(){(q||ee)&&w.restyle(H.parcatsViewModel.graphDiv,U,[G])})}}function j(H){for(var U,G=H.graphDiv._fullData,ie=0;ie<G.length;ie++)if(H.key===G[ie].uid){U=ie;break}return U}function W(H,U){var G;void 0===U&&(U=!1),H.pathSelection.data(function(ie){return ie.paths},u),(G=H.pathSelection,U?G.transition():G).attr("d",function(ie){return ie.svgD})}function Y(H,U){function G(te){return U?te.transition():te}void 0===U&&(U=!1),H.dimensionSelection.data(function(te){return te.dimensions},u);var ie=H.dimensionSelection.selectAll("g.category").data(function(te){return te.categories},u);G(H.dimensionSelection).attr("transform",function(te){return r(te.x,0)}),G(ie).attr("transform",function(te){return r(0,te.y)}),ie.select(".dimlabel").text(function(te,se){return 0===se?te.parcatsViewModel.model.dimensions[te.model.dimensionInd].dimensionLabel:null}),ie.select(".catlabel").attr("text-anchor",function(te){return i(te)?"start":"end"}).attr("x",function(te){return i(te)?te.width+5:-5}).each(function(te){var se,ue;i(te)?(se=te.width+5,ue="start"):(se=-5,ue="end"),g.select(this).selectAll("tspan").attr("x",se).attr("text-anchor",ue)});var q=ie.selectAll("rect.bandrect").data(function(te){return te.bands},u),ee=q.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(te){return te.color}).attr("fill-opacity",0);q.attr("fill",function(te){return te.color}).attr("width",function(te){return te.width}).attr("height",function(te){return te.height}).attr("y",function(te){return te.y}),M(ee),q.each(function(){e.raiseToTop(this)}),q.exit().remove()}function Q(H,U,G){var ie,q=G[0],ee=U.margin||{l:80,r:80,t:100,b:80},te=q.trace,se=te.domain,ue=U.width,de=U.height,he=Math.floor(ue*(se.x[1]-se.x[0])),xe=Math.floor(de*(se.y[1]-se.y[0])),ge=se.x[0]*ue+ee.l,_e=U.height-se.y[1]*U.height+ee.t,Ce=te.line.shape;ie="all"===te.hoverinfo?["count","probability"]:(te.hoverinfo||"").split("+");var Le={trace:te,key:te.uid,model:q,x:ge,y:_e,width:he,height:xe,hoveron:te.hoveron,hoverinfoItems:ie,arrangement:te.arrangement,bundlecolors:te.bundlecolors,sortpaths:te.sortpaths,labelfont:te.labelfont,categorylabelfont:te.tickfont,pathShape:Ce,dragDimension:null,margin:ee,paths:[],dimensions:[],graphDiv:H,traceSelection:null,pathSelection:null,dimensionSelection:null};return q.dimensions&&($(Le),X(Le)),Le}function ne(H,U,G,ie,q){var ee,te,se=[],ue=[];for(te=0;te<G.length-1;te++)ee=m(G[te]+H[te],H[te+1]),se.push(ee(q)),ue.push(ee(1-q));var de="M "+H[0]+","+U[0];for(de+="l"+G[0]+",0 ",te=1;te<G.length;te++)de+="C"+se[te-1]+","+U[te-1]+" "+ue[te-1]+","+U[te]+" "+H[te]+","+U[te],de+="l"+G[te]+",0 ";for(de+="l0,"+ie+" ",de+="l -"+G[G.length-1]+",0 ",te=G.length-2;te>=0;te--)de+="C"+ue[te]+","+(U[te+1]+ie)+" "+se[te]+","+(U[te]+ie)+" "+(H[te]+G[te])+","+(U[te]+ie),de+="l-"+G[te]+",0 ";return de+"Z"}function X(H){var U=H.dimensions,G=H.model,ie=U.map(function(Qe){return Qe.categories.map(function(tt){return tt.y})}),q=H.model.dimensions.map(function(Qe){return Qe.categories.map(function(tt){return tt.displayInd})}),ee=H.model.dimensions.map(function(Qe){return Qe.displayInd}),te=H.dimensions.map(function(Qe){return Qe.model.dimensionInd}),se=U.map(function(Qe){return Qe.x}),ue=U.map(function(Qe){return Qe.width}),de=[];for(var he in G.paths)G.paths.hasOwnProperty(he)&&de.push(G.paths[he]);function xe(Qe){var tt=Qe.categoryInds.map(function(ut,xt){return q[xt][ut]});return te.map(function(ut){return tt[ut]})}de.sort(function(Qe,tt){var ut=xe(Qe),xt=xe(tt);return"backward"===H.sortpaths&&(ut.reverse(),xt.reverse()),ut.push(Qe.valueInds[0]),xt.push(tt.valueInds[0]),H.bundlecolors&&(ut.unshift(Qe.rawColor),xt.unshift(tt.rawColor)),ut<xt?-1:ut>xt?1:0});for(var ge=new Array(de.length),_e=U[0].model.count,Ce=U[0].categories.map(function(Qe){return Qe.height}).reduce(function(Qe,tt){return Qe+tt}),Le=0;Le<de.length;Le++){var Ie,Be=de[Le];Ie=_e>0?Ce*(Be.count/_e):0;for(var ve,Te=new Array(ie.length),Pe=0;Pe<Be.categoryInds.length;Pe++){var Fe=q[Pe][Be.categoryInds[Pe]],Ue=ee[Pe];Te[Ue]=ie[Ue][Fe],ie[Ue][Fe]+=Ie;var He=H.dimensions[Ue].categories[Fe],Ke=He.bands.length,st=He.bands[Ke-1];if(void 0===st||Be.rawColor!==st.rawColor){var Ve=void 0===st?0:st.y+st.height;He.bands.push({key:Ve,color:Be.color,rawColor:Be.rawColor,height:Ie,width:He.width,count:Be.count,y:Ve,categoryViewModel:He,parcatsViewModel:H})}else{var $e=He.bands[Ke-1];$e.height+=Ie,$e.count+=Be.count}}ve=ne(se,Te,ue,Ie,"hspline"===H.pathShape?.5:0),ge[Le]={key:Be.valueInds[0],model:Be,height:Ie,leftXs:se,topYs:Te,dimWidths:ue,svgD:ve,parcatsViewModel:H}}H.paths=ge}function $(H){var U=H.model.dimensions.map(function(te){return{displayInd:te.displayInd,dimensionInd:te.dimensionInd}});U.sort(function(te,se){return te.displayInd-se.displayInd});var G=[];for(var ie in U)G.push(re(H,H.model.dimensions[U[ie].dimensionInd]));H.dimensions=G}function re(H,U){var G,ie=H.model.dimensions.length;G=40+(ie>1?(H.width-80-16)/(ie-1):0)*U.displayInd;var ee,te,se,de,he=[],xe=H.model.maxCats,ge=U.categories.length,_e=U.count,Ce=H.height-8*(xe-1),Le=8*(xe-ge)/2,Ie=U.categories.map(function(Be){return{displayInd:Be.displayInd,categoryInd:Be.categoryInd}});for(Ie.sort(function(Be,ve){return Be.displayInd-ve.displayInd}),de=0;de<ge;de++)se={key:(te=U.categories[Ie[de].categoryInd]).valueInds[0],model:te,width:16,height:ee=_e>0?te.count/_e*Ce:0,y:null!==te.dragY?te.dragY:Le,bands:[],parcatsViewModel:H},Le=Le+ee+8,he.push(se);return{key:U.dimensionInd,x:null!==U.dragX?U.dragX:G,y:0,width:16,model:U,categories:he,parcatsViewModel:H,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}oe.exports=function(H,U,G,ie){p(G,H,ie,U)}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(x,oe,ae){"use strict";var g=x("./parcats");oe.exports=function(m,w,y,e){var r=m._fullLayout,a=r._size;g(m,r._paper,w,{width:a.w,height:a.h,margin:{t:a.t,r:a.r,b:a.b,l:a.l}},y,e)}},{"./parcats":886}],888:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale/attributes"),m=x("../../plots/cartesian/layout_attributes"),w=x("../../plots/font_attributes"),y=x("../../plots/domain").attributes,e=x("../../lib/extend").extendFlat,r=x("../../plot_api/plot_template").templatedArray;oe.exports={domain:y({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:w({editType:"plot"}),tickfont:w({editType:"plot"}),rangefont:w({editType:"plot"}),dimensions:r("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},m.tickvals,{editType:"plot"}),ticktext:e({},m.ticktext,{editType:"plot"}),tickformat:e({},m.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},g("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(x,oe,ae){"use strict";var g=x("./constants"),m=x("@plotly/d3"),w=x("../../lib/gup").keyFun,y=x("../../lib/gup").repeat,e=x("../../lib").sorterAsc,r=x("../../lib").strTranslate,n=g.bar.snapRatio;function a(C,R){return C*(1-n)+R*n}var t=g.bar.snapClose;function p(C,R){return C*(1-t)+R*t}function u(C,R,O,D){if(function(re,H){for(var U=0;U<H.length;U++)if(re>=H[U][0]&&re<=H[U][1])return!0;return!1}(O,D))return O;var L=C?-1:1,B=0,j=R.length-1;if(L<0){var W=B;B=j,j=W}for(var Y=R[B],Q=Y,ne=B;L*ne<L*j;ne+=L){var X=ne+L,$=R[X];if(L*O<L*p(Y,$))return a(Y,Q);if(L*O<L*$||X===j)return a($,Y);Q=Y,Y=$}}function i(C){C.attr("x",-g.bar.captureWidth/2).attr("width",g.bar.captureWidth)}function c(C){C.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function f(C){if(!C.brush.filterSpecified)return"0,"+C.height;for(var R,O,D,L=l(C.brush.filter.getConsolidated(),C.height),B=[0],j=L.length?L[0][0]:null,W=0;W<L.length;W++)O=(R=L[W])[1]-R[0],B.push(j),B.push(O),(D=W+1)<L.length&&(j=L[D][0]-R[1]);return B.push(C.height),B}function l(C,R){return C.map(function(O){return O.map(function(D){return Math.max(0,D*R)}).sort(e)})}function h(){m.select(document.body).style("cursor",null)}function d(C){C.attr("stroke-dasharray",f)}function o(C,R){var O=m.select(C).selectAll(".highlight, .highlight-shadow");d(R?O.transition().duration(g.bar.snapDuration).each("end",R):O)}function _(C,R){var O,D=C.brush,L=NaN,B={};if(D.filterSpecified){var j=C.height,W=D.filter.getConsolidated(),Y=l(W,j),Q=NaN,ne=NaN,X=NaN;for(O=0;O<=Y.length;O++){var $=Y[O];if($&&$[0]<=R&&R<=$[1]){Q=O;break}if(ne=O?O-1:NaN,$&&$[0]>R){X=O;break}}if(L=Q,isNaN(L)&&(L=isNaN(ne)||isNaN(X)?isNaN(ne)?X:ne:R-Y[ne][1]<Y[X][0]-R?ne:X),!isNaN(L)){var re=Y[L],H=function(q,ee){var te=g.bar.handleHeight;if(!(ee>q[1]+te||ee<q[0]-te))return ee>=.9*q[1]+.1*q[0]?"n":ee<=.9*q[0]+.1*q[1]?"s":"ns"}(re,R);H&&(B.interval=W[L],B.intervalPix=re,B.region=H)}}if(C.ordinal&&!B.region){var U=C.unitTickvals,G=C.unitToPaddedPx.invert(R);for(O=0;O<U.length;O++){var ie=[.25*U[Math.max(O-1,0)]+.75*U[O],.25*U[Math.min(O+1,U.length-1)]+.75*U[O]];if(G>=ie[0]&&G<=ie[1]){B.clickableOrdinalRange=ie;break}}}return B}function s(C,R){m.event.sourceEvent.stopPropagation();var O=R.height-m.mouse(C)[1]-2*g.verticalPadding,D=R.brush.svgBrush;D.wasDragged=!0,D._dragging=!0,D.newExtent=D.grabbingBar?[O-D.grabPoint,O+D.barLength-D.grabPoint].map(R.unitToPaddedPx.invert):[D.startExtent,R.unitToPaddedPx.invert(O)].sort(e),R.brush.filterSpecified=!0,D.extent=D.stayingIntervals.concat([D.newExtent]),D.brushCallback(R),o(C.parentNode)}function k(C,R){var O=_(R,R.height-m.mouse(C)[1]-2*g.verticalPadding),D="crosshair";O.clickableOrdinalRange?D="pointer":O.region&&(D=O.region+"-resize"),m.select(document.body).style("cursor",D)}function M(C){C.on("mousemove",function(R){m.event.preventDefault(),R.parent.inBrushDrag||k(this,R)}).on("mouseleave",function(R){R.parent.inBrushDrag||h()}).call(m.behavior.drag().on("dragstart",function(R){!function(O,D){m.event.sourceEvent.stopPropagation();var L=D.height-m.mouse(O)[1]-2*g.verticalPadding,B=D.unitToPaddedPx.invert(L),j=D.brush,W=_(D,L),Y=W.interval,Q=j.svgBrush;if(Q.wasDragged=!1,Q.grabbingBar="ns"===W.region,Q.grabbingBar){var ne=Y.map(D.unitToPaddedPx);Q.grabPoint=L-ne[0]-g.verticalPadding,Q.barLength=ne[1]-ne[0]}Q.clickableOrdinalRange=W.clickableOrdinalRange,Q.stayingIntervals=D.multiselect&&j.filterSpecified?j.filter.getConsolidated():[],Y&&(Q.stayingIntervals=Q.stayingIntervals.filter(function(X){return X[0]!==Y[0]&&X[1]!==Y[1]})),Q.startExtent=W.region?Y["s"===W.region?1:0]:B,D.parent.inBrushDrag=!0,Q.brushStartCallback()}(this,R)}).on("drag",function(R){s(this,R)}).on("dragend",function(R){!function(O,D){var L=D.brush,B=L.filter,j=L.svgBrush;j._dragging||(k(O,D),s(O,D),D.brush.svgBrush.wasDragged=!1),j._dragging=!1,m.event.sourceEvent.stopPropagation();var W=j.grabbingBar;if(j.grabbingBar=!1,j.grabLocation=void 0,D.parent.inBrushDrag=!1,h(),!j.wasDragged)return j.wasDragged=void 0,j.clickableOrdinalRange?L.filterSpecified&&D.multiselect?j.extent.push(j.clickableOrdinalRange):(j.extent=[j.clickableOrdinalRange],L.filterSpecified=!0):W?(j.extent=j.stayingIntervals,0===j.extent.length&&E(L)):E(L),j.brushCallback(D),o(O.parentNode),void j.brushEndCallback(L.filterSpecified?B.getConsolidated():[]);var Y=function(){B.set(B.getConsolidated())};if(D.ordinal){var Q=D.unitTickvals;Q[Q.length-1]<Q[0]&&Q.reverse(),j.newExtent=[u(0,Q,j.newExtent[0],j.stayingIntervals),u(1,Q,j.newExtent[1],j.stayingIntervals)];var ne=j.newExtent[1]>j.newExtent[0];j.extent=j.stayingIntervals.concat(ne?[j.newExtent]:[]),j.extent.length||E(L),j.brushCallback(D),ne?o(O.parentNode,Y):(Y(),o(O.parentNode))}else Y();j.brushEndCallback(L.filterSpecified?B.getConsolidated():[])}(this,R)}))}function A(C,R){return C[0]-R[0]}function E(C){C.filterSpecified=!1,C.svgBrush.extent=[[-1/0,1/0]]}function I(C){for(var R,O=C.slice(),D=[],L=O.shift();L;){for(R=L.slice();(L=O.shift())&&L[0]<=R[1];)R[1]=Math.max(R[1],L[1]);D.push(R)}return 1===D.length&&D[0][0]>D[0][1]&&(D=[]),D}oe.exports={makeBrush:function(C,R,O,D,L,B){var j,Y,Q,ne,W=(ne=[],{set:function(X){1===(ne=X.map(function($){return $.slice().sort(e)}).sort(A)).length&&ne[0][0]===-1/0&&ne[0][1]===1/0&&(ne=[[0,-1]]),Y=I(ne),Q=ne.reduce(function($,re){return[Math.min($[0],re[0]),Math.max($[1],re[1])]},[1/0,-1/0])},get:function(){return ne.slice()},getConsolidated:function(){return Y},getBounds:function(){return Q}});return W.set(O),{filter:W,filterSpecified:R,svgBrush:{extent:[],brushStartCallback:D,brushCallback:(j=L,function(Y){var X,Q=Y.brush,ne=(X=Q,X.svgBrush.extent.map(function($){return $.slice()})).slice();Q.filter.set(ne),j()}),brushEndCallback:B}}},ensureAxisBrush:function(C,R){var O=C.selectAll("."+g.cn.axisBrush).data(y,w);O.enter().append("g").classed(g.cn.axisBrush,!0),function(D,L){var B=D.selectAll(".background").data(y);B.enter().append("rect").classed("background",!0).call(i).call(c).style("pointer-events","auto").attr("transform",r(0,g.verticalPadding)),B.call(M).attr("height",function(Y){return Y.height-g.verticalPadding});var j=D.selectAll(".highlight-shadow").data(y);j.enter().append("line").classed("highlight-shadow",!0).attr("x",-g.bar.width/2).attr("stroke-width",g.bar.width+g.bar.strokeWidth).attr("stroke",L).attr("opacity",g.bar.strokeOpacity).attr("stroke-linecap","butt"),j.attr("y1",function(Y){return Y.height}).call(d);var W=D.selectAll(".highlight").data(y);W.enter().append("line").classed("highlight",!0).attr("x",-g.bar.width/2).attr("stroke-width",g.bar.width-g.bar.strokeWidth).attr("stroke",g.bar.fillColor).attr("opacity",g.bar.fillOpacity).attr("stroke-linecap","butt"),W.attr("y1",function(Y){return Y.height}).call(d)}(O,R)},cleanRanges:function(C,R){if(Array.isArray(C[0])?(C=C.map(function(D){return D.sort(e)}),C=R.multiselect?I(C.sort(A)):[C[0]]):C=[C.sort(e)],R.tickvals){var O=R.tickvals.slice().sort(e);if(!(C=C.map(function(D){var L=[u(0,O,D[0],[]),u(1,O,D[1],[])];if(L[1]>L[0])return L}).filter(function(D){return D})).length)return}return C.length>1?C:C[0]}}},{"../../lib":503,"../../lib/gup":500,"./constants":893,"@plotly/d3":58}],890:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:x("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":891,"./calc":892,"./defaults":894}],891:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../plots/get_data").getModuleCalcData,w=x("./plot"),y=x("../../constants/xmlns_namespaces");ae.name="parcoords",ae.plot=function(e){var r=m(e.calcdata,"parcoords")[0];r.length&&w(e,r)},ae.clean=function(e,r,n,a){var t=a._has&&a._has("parcoords"),p=r._has&&r._has("parcoords");t&&!p&&(a._paperdiv.selectAll(".parcoords").remove(),a._glimages.selectAll("*").remove())},ae.toSVG=function(e){var r=e._fullLayout._glimages,n=g.select(e).selectAll(".svg-container");n.filter(function(a,t){return t===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var a=this.toDataURL("image/png");r.append("svg:image").attr({xmlns:y.svg,"xlink:href":a,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){g.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":900,"@plotly/d3":58}],892:[function(x,oe,ae){"use strict";var g=x("../../lib").isArrayOrTypedArray,m=x("../../components/colorscale"),w=x("../../lib/gup").wrap;oe.exports=function(y,e){var r,n;return m.hasColorscale(e,"line")&&g(e.line.color)?(r=e.line.color,n=m.extractOpts(e.line).colorscale,m.calc(y,e,{vals:r,containerStr:"line",cLetter:"c"})):(r=function(a){for(var t=new Array(a),p=0;p<a;p++)t[p]=.5;return t}(e._length),n=[[0,e.line.color],[1,e.line.color]]),w({lineColor:r,cscale:n})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],893:[function(x,oe,ae){"use strict";oe.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],894:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/colorscale/helpers").hasColorscale,w=x("../../components/colorscale/defaults"),y=x("../../plots/domain").defaults,e=x("../../plots/array_container_defaults"),r=x("../../plots/cartesian/axes"),n=x("./attributes"),a=x("./axisbrush"),t=x("./constants").maxDimensionCount,p=x("./merge_length");function u(i,c,f,l){function h(k,M){return g.coerce(i,c,n.dimensions,k,M)}var d=h("values"),o=h("visible");if(d&&d.length||(o=c.visible=!1),o){h("label"),h("tickvals"),h("ticktext"),h("tickformat");var _=h("range");c._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:_},r.setConvert(c._ax,l.layout),h("multiselect");var s=h("constraintrange");s&&(c.constraintrange=a.cleanRanges(s,c))}}oe.exports=function(i,c,f,l){function h(k,M){return g.coerce(i,c,n,k,M)}var d=i.dimensions;Array.isArray(d)&&d.length>t&&(g.log("parcoords traces support up to "+t+" dimensions at the moment"),d.splice(t));var o=e(i,c,{name:"dimensions",layout:l,handleItemDefaults:u}),_=function(k,M,A,E,I){var C=I("line.color",A);if(m(k,"line")&&g.isArrayOrTypedArray(C)){if(C.length)return I("line.colorscale"),w(k,M,E,I,{prefix:"line.",cLetter:"c"}),C.length;M.line.color=A}return 1/0}(i,c,f,l,h);y(c,l,h),Array.isArray(o)&&o.length||(c.visible=!1),p(c,o,"values",_);var s={family:l.font.family,size:Math.round(l.font.size/1.2),color:l.font.color};g.coerceFont(h,"labelfont",s),g.coerceFont(h,"tickfont",s),g.coerceFont(h,"rangefont",s),h("labelangle"),h("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":893,"./merge_length":898}],895:[function(x,oe,ae){"use strict";var g=x("../../lib").isTypedArray;ae.convertTypedArray=function(m){return g(m)?Array.prototype.slice.call(m):m},ae.isOrdinal=function(m){return!!m.tickvals},ae.isVisible=function(m){return m.visible||!("visible"in m)}},{"../../lib":503}],896:[function(x,oe,ae){"use strict";var g=x("./base_index");g.plot=x("./plot"),oe.exports=g},{"./base_index":890,"./plot":900}],897:[function(x,oe,ae){"use strict";var g=x("glslify"),m=g(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),w=g(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),y=x("./constants").maxDimensionCount,e=x("../../lib"),r=new Uint8Array(4),n=new Uint8Array(4),a={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function t(o,_,s,k,M){var A=o._gl;A.enable(A.SCISSOR_TEST),A.scissor(_,s,k,M),o.clear({color:[0,0,0,0],depth:1})}function p(o,_,s,k,M,A){var E=A.key;s.drawCompleted||(o.read({x:0,y:0,width:1,height:1,data:r}),s.drawCompleted=!0),function I(C){var R=Math.min(k,M-C*k);0===C&&(window.cancelAnimationFrame(s.currentRafs[E]),delete s.currentRafs[E],t(o,A.scissorX,A.scissorY,A.scissorWidth,A.viewBoxSize[1])),s.clearOnly||(A.count=2*R,A.offset=2*C*k,_(A),C*k+R<M&&(s.currentRafs[E]=window.requestAnimationFrame(function(){I(C+1)})),s.drawCompleted=!1)}(0)}function u(o,_){for(var s=new Array(256),k=0;k<256;k++)s[k]=o(k/255).concat(_);return s}function i(o,_){return(o>>>8*_)%256/255}function c(o,_,s){for(var k=new Array(8*_),M=0,A=0;A<_;A++)for(var E=0;E<2;E++)for(var I=0;I<4;I++){var C=4*o+I,R=s[64*A+C];63===C&&0===E&&(R*=-1),k[M++]=R}return k}function f(o){var _="0"+o;return _.substr(_.length-2)}function l(o){return o<y?"p"+f(o+1)+"_"+f(o+4):"colors"}function h(o,_,s,k,M,A,E,I,C,R,O,D,L,B){for(var j=[[],[]],W=0;W<64;W++)j[0][W]=W===M?1:0,j[1][W]=W===A?1:0;var Y=o.lines.canvasOverdrag*B,Q=o.domain,ne=o.canvasWidth*B,X=o.canvasHeight*B,$=o.pad.l*B,re=o.pad.b*B,H=o.layoutHeight*B,U=o.layoutWidth*B,G=o.deselectedLines.color;return e.extendFlat({key:O,resolution:[ne,X],viewBoxPos:[(E*=B)+Y,I*=B],viewBoxSize:[C*=B,R*=B],i0:M,i1:A,dim0A:j[0].slice(0,16),dim0B:j[0].slice(16,32),dim0C:j[0].slice(32,48),dim0D:j[0].slice(48,64),dim1A:j[1].slice(0,16),dim1B:j[1].slice(16,32),dim1C:j[1].slice(32,48),dim1D:j[1].slice(48,64),drwLayer:D,contextColor:[G[0]/255,G[1]/255,G[2]/255,G[3]<1?G[3]:Math.max(1/255,Math.pow(1/o.lines.color.length,1/3))],scissorX:(k===_?0:E+Y)+($-Y)+U*Q.x[0],scissorWidth:(k===s?ne-E+Y:C+.5)+(k===_?E+Y:0),scissorY:I+re+H*Q.y[0],scissorHeight:R,viewportX:$-Y+U*Q.x[0],viewportY:re+H*Q.y[0],viewportWidth:ne,viewportHeight:X},L)}function d(o){var _=Math.max(0,Math.floor(2047*o[0]),0),s=Math.min(2047,Math.ceil(2047*o[1]),2047);return[Math.min(_,s),Math.max(_,s)]}oe.exports=function(o,_){var s,M,A,E,I=_.context,C=_.pick,R=_.regl,O=R._gl,D=O.getParameter(O.ALIASED_LINE_WIDTH_RANGE),L=Math.max(D[0],Math.min(D[1],_.viewModel.plotGlPixelRatio)),B={currentRafs:{},drawCompleted:!0,clearOnly:!1},j=function(X){for(var $={},re=0;re<=y;re+=4)$[l(re)]=X.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return $}(R),W=R.texture(a),Y=[];ne(_);var Q=R({profile:!1,blend:{enable:I,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!I,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:R.prop("scissorX"),y:R.prop("scissorY"),width:R.prop("scissorWidth"),height:R.prop("scissorHeight")}},viewport:{x:R.prop("viewportX"),y:R.prop("viewportY"),width:R.prop("viewportWidth"),height:R.prop("viewportHeight")},dither:!1,vert:m,frag:w,primitive:"lines",lineWidth:L,attributes:j,uniforms:{resolution:R.prop("resolution"),viewBoxPos:R.prop("viewBoxPos"),viewBoxSize:R.prop("viewBoxSize"),dim0A:R.prop("dim0A"),dim1A:R.prop("dim1A"),dim0B:R.prop("dim0B"),dim1B:R.prop("dim1B"),dim0C:R.prop("dim0C"),dim1C:R.prop("dim1C"),dim0D:R.prop("dim0D"),dim1D:R.prop("dim1D"),loA:R.prop("loA"),hiA:R.prop("hiA"),loB:R.prop("loB"),hiB:R.prop("hiB"),loC:R.prop("loC"),hiC:R.prop("hiC"),loD:R.prop("loD"),hiD:R.prop("hiD"),palette:W,contextColor:R.prop("contextColor"),maskTexture:R.prop("maskTexture"),drwLayer:R.prop("drwLayer"),maskHeight:R.prop("maskHeight")},offset:R.prop("offset"),count:R.prop("count")});function ne(X){s=X.model,M=X.viewModel.dimensions.slice(),A=M[0]?M[0].values.length:0;var $=s.lines,re=C?$.color.map(function(U,G){return G/$.color.length}):$.color,H=function(U,G,ie){for(var ee=new Array(U*(y+4)),te=0,se=0;se<U;se++){for(var ue=0;ue<y;ue++)ee[te++]=ue<G.length?G[ue].paddedUnitValues[se]:.5;ee[te++]=i(se,2),ee[te++]=i(se,1),ee[te++]=i(se,0),ee[te++]=Math.max(1e-6,Math.min(.999999,ie[se]))}return ee}(A,M,re);(function(U,G,ie){for(var q=0;q<=y;q+=4)U[l(q)](c(q/4,G,ie))})(j,A,H),I||C||(W=R.texture(e.extendFlat({data:u(s.unitToColor,255)},a)))}return{render:function(X,$,re){var H,U,G,ie=X.length,q=1/0,ee=-1/0;for(H=0;H<ie;H++)X[H].dim0.canvasX<q&&(q=X[H].dim0.canvasX,U=H),X[H].dim1.canvasX>ee&&(ee=X[H].dim1.canvasX,G=H);0===ie&&t(R,0,0,s.canvasWidth,s.canvasHeight);var te=function(Ie){var Be,ve,Te,Pe=[[],[]];for(Te=0;Te<64;Te++){var De=!Ie&&Te<M.length?M[Te].brush.filter.getBounds():[-1/0,1/0];Pe[0][Te]=De[0],Pe[1][Te]=De[1]}var Fe=new Array(16384);for(Be=0;Be<16384;Be++)Fe[Be]=255;if(!Ie)for(Be=0;Be<M.length;Be++){var Ue=Be%8,He=(Be-Ue)/8,Ke=Math.pow(2,Ue),st=M[Be].brush.filter.get();if(!(st.length<2)){var Ve=d(st[0])[1];for(ve=1;ve<st.length;ve++){var $e=d(st[ve]);for(Te=Ve+1;Te<$e[0];Te++)Fe[8*Te+He]&=~Ke;Ve=Math.max(Ve,$e[1])}}}var Qe={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Fe};return E?E(Qe):E=R.texture(Qe),{maskTexture:E,maskHeight:2048,loA:Pe[0].slice(0,16),loB:Pe[0].slice(16,32),loC:Pe[0].slice(32,48),loD:Pe[0].slice(48,64),hiA:Pe[1].slice(0,16),hiB:Pe[1].slice(16,32),hiC:Pe[1].slice(32,48),hiD:Pe[1].slice(48,64)}}(I);for(H=0;H<ie;H++){var se=X[H],ue=se.dim0.crossfilterDimensionIndex,de=se.dim1.crossfilterDimensionIndex,he=se.canvasX,xe=se.canvasY,ge=he+se.panelSizeX,_e=se.plotGlPixelRatio;if($||!Y[ue]||Y[ue][0]!==he||Y[ue][1]!==ge){Y[ue]=[he,ge];var Ce=h(s,U,G,H,ue,de,he,xe,se.panelSizeX,se.panelSizeY,se.dim0.crossfilterDimensionIndex,I?0:C?2:1,te,_e);B.clearOnly=re,p(R,Q,B,$?s.lines.blockLineCount:A,A,Ce)}}},readPixel:function(X,$){return R.read({x:X,y:$,width:1,height:1,data:n}),n},readPixels:function(X,$,re,H){var U=new Uint8Array(4*re*H);return R.read({x:X,y:$,width:re,height:H,data:U}),U},destroy:function(){for(var X in o.style["pointer-events"]="none",W.destroy(),E&&E.destroy(),j)j[X].destroy()},update:ne}}},{"../../lib":503,"./constants":893,glslify:227}],898:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w,y){var e,r;for(y||(y=1/0),e=0;e<m.length;e++)(r=m[e]).visible&&(y=Math.min(y,r[w].length));for(y===1/0&&(y=0),g._length=y,e=0;e<m.length;e++)(r=m[e]).visible&&(r._length=y);return y}},{}],899:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=m.numberFormat,y=x("color-rgba"),e=x("../../plots/cartesian/axes"),r=m.strRotate,n=m.strTranslate,a=x("../../lib/svg_text_utils"),t=x("../../components/drawing"),p=x("../../components/colorscale"),u=x("../../lib/gup"),i=u.keyFun,c=u.repeat,f=u.unwrap,l=x("./helpers"),h=x("./constants"),d=x("./axisbrush"),o=x("./lines");function _(Y,Q,ne){return m.aggNums(Y,null,Q,ne)}function s(Y,Q){return M(_(Math.min,Y,Q),_(Math.max,Y,Q))}function k(Y){var Q=Y.range;return Q?M(Q[0],Q[1]):s(Y.values,Y._length)}function M(Y,Q){return!isNaN(Y)&&isFinite(Y)||(Y=0),!isNaN(Q)&&isFinite(Q)||(Q=0),Y===Q&&(0===Y?(Y-=1,Q+=1):(Y*=.9,Q*=1.1)),[Y,Q]}function A(Y,Q,ne,X,$){var re,H,U=k(ne);return X?g.scale.ordinal().domain(X.map((re=w(ne.tickformat),H=$,H?function(G,ie){var q=H[ie];return null==q?re(G):q}:re))).range(X.map(function(G){return Y-Q+(G-U[0])/(U[1]-U[0])*(2*Q-Y)})):g.scale.linear().domain(U).range([Y-Q,Q])}function E(Y){if(Y.tickvals){var Q=k(Y);return g.scale.ordinal().domain(Y.tickvals).range(Y.tickvals.map(function(ne){return(ne-Q[0])/(Q[1]-Q[0])}))}}function I(Y){var Q=Y.map(function($){return $[0]}),ne=Y.map(function($){var re=y($[1]);return g.rgb("rgb("+re[0]+","+re[1]+","+re[2]+")")}),X="rgb".split("").map(function($){return g.scale.linear().clamp(!0).domain(Q).range(ne.map((re=$,function(H){return H[re]})));var re});return function($){return X.map(function(re){return re($)})}}function C(Y){return Y.dimensions.some(function(Q){return Q.brush.filterSpecified})}function R(Y,Q,ne){var X=f(Q),$=X.trace,re=l.convertTypedArray(X.lineColor),H=$.line,U={color:y(h.deselectedLineColor)},G=p.extractOpts(H),ie=G.reversescale?p.flipScale(X.cscale):X.cscale,q=$.domain,ee=$.dimensions,te=Y.width,se=$.labelangle,ue=$.labelside,de=$.labelfont,he=$.tickfont,xe=$.rangefont,ge=m.extendDeepNoArrays({},H,{color:re.map(g.scale.linear().domain(k({values:re,range:[G.min,G.max],_length:$._length}))),blockLineCount:h.blockLineCount,canvasOverdrag:h.overdrag*h.canvasPixelRatio}),_e=Math.floor(te*(q.x[1]-q.x[0])),Ce=Math.floor(Y.height*(q.y[1]-q.y[0])),Le=Y.margin||{l:80,r:80,t:100,b:80},Ie=_e,Be=Ce;return{key:ne,colCount:ee.filter(l.isVisible).length,dimensions:ee,tickDistance:h.tickDistance,unitToColor:I(ie),lines:ge,deselectedLines:U,labelAngle:se,labelSide:ue,labelFont:de,tickFont:he,rangeFont:xe,layoutWidth:te,layoutHeight:Y.height,domain:q,translateX:q.x[0]*te,translateY:Y.height-q.y[1]*Y.height,pad:Le,canvasWidth:Ie*h.canvasPixelRatio+2*ge.canvasOverdrag,canvasHeight:Be*h.canvasPixelRatio,width:Ie,height:Be,canvasPixelRatio:h.canvasPixelRatio}}function O(Y,Q,ne){var te,se,X=ne.width,$=ne.height,re=ne.dimensions,H=ne.canvasPixelRatio,U=function(te){return X*te/Math.max(1,ne.colCount-1)},G=h.verticalPadding/$,ie=(te=$,se=h.verticalPadding,g.scale.linear().range([se,te-se])),q={key:ne.key,xScale:U,model:ne,inBrushDrag:!1},ee={};return q.dimensions=re.filter(l.isVisible).map(function(te,se){var Fe,Ue,ue=(Fe=te,Ue=G,g.scale.linear().domain(k(Fe)).range([Ue,1-Ue])),de=ee[te.label];ee[te.label]=(de||0)+1;var he=te.label+(de?"__"+de:""),xe=te.constraintrange,ge=xe&&xe.length;ge&&!Array.isArray(xe[0])&&(xe=[xe]);var _e=ge?xe.map(function(Fe){return Fe.map(ue)}):[[-1/0,1/0]],Ce=te.values;Ce.length>te._length&&(Ce=Ce.slice(0,te._length));var Le,Ie=te.tickvals;function Be(Fe,Ue){return{val:Fe,text:Le[Ue]}}function ve(Fe,Ue){return Fe.val-Ue.val}if(Array.isArray(Ie)&&Ie.length){Le=te.ticktext,Array.isArray(Le)&&Le.length?Le.length>Ie.length?Le=Le.slice(0,Ie.length):Ie.length>Le.length&&(Ie=Ie.slice(0,Le.length)):Le=Ie.map(w(te.tickformat));for(var Te=1;Te<Ie.length;Te++)if(Ie[Te]<Ie[Te-1]){for(var Pe=Ie.map(Be).sort(ve),De=0;De<Ie.length;De++)Ie[De]=Pe[De].val,Le[De]=Pe[De].text;break}}else Ie=void 0;return Ce=l.convertTypedArray(Ce),{key:he,label:te.label,tickFormat:te.tickformat,tickvals:Ie,ticktext:Le,ordinal:l.isOrdinal(te),multiselect:te.multiselect,xIndex:se,crossfilterDimensionIndex:se,visibleIndex:te._index,height:$,values:Ce,paddedUnitValues:Ce.map(ue),unitTickvals:Ie&&Ie.map(ue),xScale:U,x:U(se),canvasX:U(se)*H,unitToPaddedPx:ie,domainScale:A($,h.verticalPadding,te,Ie,Le),ordinalScale:E(te),parent:q,model:ne,brush:d.makeBrush(Y,ge,_e,function(){Y.linePickActive(!1)},function(){var Fe=q;Fe.focusLayer&&Fe.focusLayer.render(Fe.panels,!0);var Ue=C(Fe);!Y.contextShown()&&Ue?(Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!0),Y.contextShown(!0)):Y.contextShown()&&!Ue&&(Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!0,!0),Y.contextShown(!1))},function(Fe){if(q.focusLayer.render(q.panels,!0),q.pickLayer&&q.pickLayer.render(q.panels,!0),Y.linePickActive(!0),Q&&Q.filterChanged){var Ue=ue.invert,He=Fe.map(function(Ke){return Ke.map(Ue).sort(m.sorterAsc)}).sort(function(Ke,st){return Ke[0]-st[0]});Q.filterChanged(q.key,te._index,He)}})}}),q}function D(Y){Y.classed(h.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function L(Y,Q){var X=Y*Math.PI/180;return{dir:"top"===Q?1:-1,dx:Math.sin(X),dy:Math.cos(X),degrees:Y}}function B(Y,Q,ne){for(var X=Q.panels||(Q.panels=[]),$=Y.data(),re=0;re<$.length-1;re++){var H=X[re]||(X[re]={}),U=$[re],G=$[re+1];H.dim0=U,H.dim1=G,H.canvasX=U.canvasX,H.panelSizeX=G.canvasX-U.canvasX,H.panelSizeY=Q.model.canvasHeight,H.y=0,H.canvasY=0,H.plotGlPixelRatio=ne}}function j(Y,Q){return e.tickText(Y._ax,Q,!1).text}function W(Y,Q){if(Y.ordinal)return"";var ne=Y.domainScale.domain();return j(Y.model.dimensions[Y.visibleIndex],ne[Q?ne.length-1:0])}oe.exports=function(Y,Q,ne,X){var $=Y._fullLayout,re=$._toppaper,H=$._glcontainer,U=Y._context.plotGlPixelRatio,G=Y._fullLayout.paper_bgcolor;!function(De){for(var Fe=0;Fe<De.length;Fe++)for(var Ue=0;Ue<De[Fe].length;Ue++)for(var He=De[Fe][Ue].trace,Ke=He.dimensions,st=0;st<Ke.length;st++){var Ve=Ke[st].values,$e=Ke[st]._ax;$e&&($e.range=$e.range?M($e.range[0],$e.range[1]):s(Ve,He._length),$e.dtick||($e.dtick=.01*(Math.abs($e.range[1]-$e.range[0])||1)),$e.tickformat=Ke[st].tickformat,e.calcTicks($e),$e.cleanRange())}}(Q);var ie,q,ee=(ie=!0,q=!1,{linePickActive:function(De){return arguments.length?ie=!!De:ie},contextShown:function(De){return arguments.length?q=!!De:q}}),te=Q.filter(function(De){return f(De).trace.visible}).map(R.bind(0,ne)).map(O.bind(0,ee,X));H.each(function(De,Fe){return m.extendFlat(De,te[Fe])});var se=H.selectAll(".gl-canvas").each(function(De){De.viewModel=te[0],De.viewModel.plotGlPixelRatio=U,De.viewModel.paperColor=G,De.model=De.viewModel?De.viewModel.model:null}),ue=null;se.filter(function(De){return De.pick}).style("pointer-events","auto").on("mousemove",function(De){if(ee.linePickActive()&&De.lineLayer&&X&&X.hover){var Fe=g.event,Ue=this.width,He=this.height,Ke=g.mouse(this),st=Ke[0],Ve=Ke[1];if(st<0||Ve<0||st>=Ue||Ve>=He)return;var $e=De.lineLayer.readPixel(st,He-1-Ve),Qe=0!==$e[3],tt=Qe?$e[2]+256*($e[1]+256*$e[0]):null,ut={x:st,y:Ve,clientX:Fe.clientX,clientY:Fe.clientY,dataIndex:De.model.key,curveNumber:tt};tt!==ue&&(Qe?X.hover(ut):X.unhover&&X.unhover(ut),ue=tt)}}),se.style("opacity",function(De){return De.pick?0:1}),re.style("background","rgba(255, 255, 255, 0)");var de=re.selectAll("."+h.cn.parcoords).data(te,i);de.exit().remove(),de.enter().append("g").classed(h.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),de.attr("transform",function(De){return n(De.model.translateX,De.model.translateY)});var he=de.selectAll("."+h.cn.parcoordsControlView).data(c,i);he.enter().append("g").classed(h.cn.parcoordsControlView,!0),he.attr("transform",function(De){return n(De.model.pad.l,De.model.pad.t)});var xe=he.selectAll("."+h.cn.yAxis).data(function(De){return De.dimensions},i);xe.enter().append("g").classed(h.cn.yAxis,!0),he.each(function(De){B(xe,De,U)}),se.each(function(De){De.viewModel&&(!De.lineLayer||X?De.lineLayer=o(this,De):De.lineLayer.update(De),(De.key||0===De.key)&&(De.viewModel[De.key]=De.lineLayer),De.lineLayer.render(De.viewModel.panels,!De.context||X))}),xe.attr("transform",function(De){return n(De.xScale(De.xIndex),0)}),xe.call(g.behavior.drag().origin(function(De){return De}).on("drag",function(De){var Fe=De.parent;ee.linePickActive(!1),De.x=Math.max(-h.overdrag,Math.min(De.model.width+h.overdrag,g.event.x)),De.canvasX=De.x*De.model.canvasPixelRatio,xe.sort(function(Ue,He){return Ue.x-He.x}).each(function(Ue,He){Ue.xIndex=He,Ue.x=De===Ue?Ue.x:Ue.xScale(Ue.xIndex),Ue.canvasX=Ue.x*Ue.model.canvasPixelRatio}),B(xe,Fe,U),xe.filter(function(Ue){return 0!==Math.abs(De.xIndex-Ue.xIndex)}).attr("transform",function(Ue){return n(Ue.xScale(Ue.xIndex),0)}),g.select(this).attr("transform",n(De.x,0)),xe.each(function(Ue,He,Ke){Ke===De.parent.key&&(Fe.dimensions[He]=Ue)}),Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!1,!C(Fe)),Fe.focusLayer.render&&Fe.focusLayer.render(Fe.panels)}).on("dragend",function(De){var Fe=De.parent;De.x=De.xScale(De.xIndex),De.canvasX=De.x*De.model.canvasPixelRatio,B(xe,Fe,U),g.select(this).attr("transform",function(Ue){return n(Ue.x,0)}),Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!1,!C(Fe)),Fe.focusLayer&&Fe.focusLayer.render(Fe.panels),Fe.pickLayer&&Fe.pickLayer.render(Fe.panels,!0),ee.linePickActive(!0),X&&X.axesMoved&&X.axesMoved(Fe.key,Fe.dimensions.map(function(Ue){return Ue.crossfilterDimensionIndex}))})),xe.exit().remove();var ge=xe.selectAll("."+h.cn.axisOverlays).data(c,i);ge.enter().append("g").classed(h.cn.axisOverlays,!0),ge.selectAll("."+h.cn.axis).remove();var _e=ge.selectAll("."+h.cn.axis).data(c,i);_e.enter().append("g").classed(h.cn.axis,!0),_e.each(function(De){var Fe=De.model.height/De.model.tickDistance,Ue=De.domainScale,He=Ue.domain();g.select(this).call(g.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Fe,De.tickFormat).tickValues(De.ordinal?He:null).tickFormat(function(Ke){return l.isOrdinal(De)?Ke:j(De.model.dimensions[De.visibleIndex],Ke)}).scale(Ue)),t.font(_e.selectAll("text"),De.model.tickFont)}),_e.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),_e.selectAll("text").style("text-shadow",a.makeTextShadow(G)).style("cursor","default");var Ce=ge.selectAll("."+h.cn.axisHeading).data(c,i);Ce.enter().append("g").classed(h.cn.axisHeading,!0);var Le=Ce.selectAll("."+h.cn.axisTitle).data(c,i);Le.enter().append("text").classed(h.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),Le.text(function(De){return De.label}).each(function(De){var Fe=g.select(this);t.font(Fe,De.model.labelFont),a.convertToTspans(Fe,Y)}).attr("transform",function(De){var Fe=L(De.model.labelAngle,De.model.labelSide),Ue=h.axisTitleOffset;return(Fe.dir>0?"":n(0,2*Ue+De.model.height))+r(Fe.degrees)+n(-Ue*Fe.dx,-Ue*Fe.dy)}).attr("text-anchor",function(De){var Fe=L(De.model.labelAngle,De.model.labelSide);return 2*Math.abs(Fe.dx)>Math.abs(Fe.dy)?Fe.dir*Fe.dx<0?"start":"end":"middle"});var Ie=ge.selectAll("."+h.cn.axisExtent).data(c,i);Ie.enter().append("g").classed(h.cn.axisExtent,!0);var Be=Ie.selectAll("."+h.cn.axisExtentTop).data(c,i);Be.enter().append("g").classed(h.cn.axisExtentTop,!0),Be.attr("transform",n(0,-h.axisExtentOffset));var ve=Be.selectAll("."+h.cn.axisExtentTopText).data(c,i);ve.enter().append("text").classed(h.cn.axisExtentTopText,!0).call(D),ve.text(function(De){return W(De,!0)}).each(function(De){t.font(g.select(this),De.model.rangeFont)});var Te=Ie.selectAll("."+h.cn.axisExtentBottom).data(c,i);Te.enter().append("g").classed(h.cn.axisExtentBottom,!0),Te.attr("transform",function(De){return n(0,De.model.height+h.axisExtentOffset)});var Pe=Te.selectAll("."+h.cn.axisExtentBottomText).data(c,i);Pe.enter().append("text").classed(h.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(D),Pe.text(function(De){return W(De,!1)}).each(function(De){t.font(g.select(this),De.model.rangeFont)}),d.ensureAxisBrush(ge,G)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":893,"./helpers":895,"./lines":897,"@plotly/d3":58,"color-rgba":91}],900:[function(x,oe,ae){"use strict";var g=x("./parcoords"),m=x("../../lib/prepare_regl"),w=x("./helpers").isVisible,y={};function e(r,n,a){var t=n.indexOf(a),p=r.indexOf(t);return-1===p&&(p+=n.length),p}(oe.exports=function(r,n){var a=r._fullLayout;if(m(r,[],y)){var t={},p={},u={},i={},c=a._size;n.forEach(function(f,l){var h=f[0].trace;u[l]=h.index;var d=i[l]=h._fullInput.index;t[l]=r.data[d].dimensions,p[l]=r.data[d].dimensions.slice()}),g(r,n,{width:c.w,height:c.h,margin:{t:c.t,r:c.r,b:c.b,l:c.l}},{filterChanged:function(f,l,h){var d=p[f][l],o=h.map(function(E){return E.slice()}),_="dimensions["+l+"].constraintrange",s=a._tracePreGUI[r._fullData[u[f]]._fullInput.uid];void 0===s[_]&&(s[_]=d.constraintrange||null);var M=r._fullData[u[f]].dimensions[l];o.length?(1===o.length&&(o=o[0]),d.constraintrange=o,M.constraintrange=o.slice(),o=[o]):(delete d.constraintrange,delete M.constraintrange,o=null);var A={};A[_]=o,r.emit("plotly_restyle",[A,[i[f]]])},hover:function(f){r.emit("plotly_hover",f)},unhover:function(f){r.emit("plotly_unhover",f)},axesMoved:function(f,l){var d,o,h=(d=l,o=p[f].filter(w),function(_,s){return e(d,o,_)-e(d,o,s)});t[f].sort(h),p[f].filter(function(d){return!w(d)}).sort(function(d){return p[f].indexOf(d)}).forEach(function(d){t[f].splice(t[f].indexOf(d),1),t[f].splice(p[f].indexOf(d),0,d)}),r.emit("plotly_restyle",[{dimensions:[t[f]]},[i[f]]])}})}}).reglPrecompiled=y},{"../../lib/prepare_regl":516,"./helpers":895,"./parcoords":899}],901:[function(x,oe,ae){"use strict";var g=x("../../plots/attributes"),m=x("../../plots/domain").attributes,w=x("../../plots/font_attributes"),y=x("../../components/color/attributes"),e=x("../../plots/template_attributes").hovertemplateAttrs,r=x("../../plots/template_attributes").texttemplateAttrs,n=x("../../lib/extend").extendFlat,a=w({editType:"plot",arrayOk:!0,colorEditType:"plot"});oe.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:y.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:n({},g.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:r({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:n({},a,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:n({},a,{}),outsidetextfont:n({},a,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:n({},a,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:m({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:n({},a,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],902:[function(x,oe,ae){"use strict";var g=x("../../plots/plots");ae.name="pie",ae.plot=function(m,w,y,e){g.plotBasePlot(ae.name,m,w,y,e)},ae.clean=function(m,w,y,e){g.cleanBasePlot(ae.name,m,w,y,e)}},{"../../plots/plots":619}],903:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("tinycolor2"),w=x("../../components/color"),y={};function e(n){return function(a,t){return!!a&&!!(a=m(a)).isValid()&&(a=w.addOpacity(a,a.getAlpha()),n[t]||(n[t]=a),a)}}function r(n,a){var t,p=JSON.stringify(n),u=a[p];if(!u){for(u=n.slice(),t=0;t<n.length;t++)u.push(m(n[t]).lighten(20).toHexString());for(t=0;t<n.length;t++)u.push(m(n[t]).darken(20).toHexString());a[p]=u}return u}oe.exports={calc:function(n,a){var t,p,u=[],i=n._fullLayout,c=i.hiddenlabels||[],f=a.labels,l=a.marker.colors||[],h=a.values,d=a._length,o=a._hasValues&&d;if(a.dlabel)for(f=new Array(d),t=0;t<d;t++)f[t]=String(a.label0+t*a.dlabel);var _={},s=e(i["_"+a.type+"colormap"]),k=0,M=!1;for(t=0;t<d;t++){var A,E,I;if(o){if(!g(A=h[t]))continue;A=+A}else A=1;void 0!==(E=f[t])&&""!==E||(E=t);var C=_[E=String(E)];void 0===C?(_[E]=u.length,(I=-1!==c.indexOf(E))||(k+=A),u.push({v:A,label:E,color:s(l[t],E),i:t,pts:[t],hidden:I})):(M=!0,(p=u[C]).v+=A,p.pts.push(t),p.hidden||(k+=A),!1===p.color&&l[t]&&(p.color=s(l[t],E)))}return u=u.filter(function(R){return R.v>=0}),("funnelarea"===a.type?M:a.sort)&&u.sort(function(R,O){return O.v-R.v}),u[0]&&(u[0].vTotal=k),u},crossTraceCalc:function(n,a){var t=(a||{}).type;t||(t="pie");var p=n._fullLayout,u=n.calcdata,i=p[t+"colorway"],c=p["_"+t+"colormap"];p["extend"+t+"colors"]&&(i=r(i,y));for(var f=0,l=0;l<u.length;l++){var h=u[l];if(h[0].trace.type===t)for(var d=0;d<h.length;d++){var o=h[d];!1===o.color&&(c[o.label]?o.color=c[o.label]:(c[o.label]=o.color=i[f%i.length],f++))}}},makePullColorFn:e,generateExtendedColors:r}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],904:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib"),w=x("./attributes"),y=x("../../plots/domain").defaults,e=x("../bar/defaults").handleText;function r(n,a){var t=Array.isArray(n),p=m.isArrayOrTypedArray(a),u=Math.min(t?n.length:1/0,p?a.length:1/0);if(isFinite(u)||(u=0),u&&p){for(var i,c=0;c<u;c++){var f=a[c];if(g(f)&&f>0){i=!0;break}}i||(u=0)}return{hasLabels:t,hasValues:p,len:u}}oe.exports={handleLabelsAndValues:r,supplyDefaults:function(n,a,t,p){function u(s,k){return m.coerce(n,a,w,s,k)}var i=r(u("labels"),u("values")),c=i.len;if(a._hasLabels=i.hasLabels,a._hasValues=i.hasValues,!a._hasLabels&&a._hasValues&&(u("label0"),u("dlabel")),c){a._length=c,u("marker.line.width")&&u("marker.line.color"),u("marker.colors"),u("scalegroup");var f,l=u("text"),h=u("texttemplate");if(h||(f=u("textinfo",Array.isArray(l)?"text+percent":"percent")),u("hovertext"),u("hovertemplate"),h||f&&"none"!==f){var d=u("textposition");e(n,a,p,u,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(d)||"auto"===d||"outside"===d)&&u("automargin"),("inside"===d||"auto"===d||Array.isArray(d))&&u("insidetextorientation")}y(a,p,u);var o=u("hole");if(u("title.text")){var _=u("title.position",o?"middle center":"top center");o||"middle center"!==_||(a.title.position="top center"),m.coerceFont(u,"title.font",p.font)}u("sort"),u("direction"),u("rotation"),u("pull")}else a.visible=!1}}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":901,"fast-isnumeric":190}],905:[function(x,oe,ae){"use strict";var g=x("../../components/fx/helpers").appendArrayMultiPointValues;oe.exports=function(m,w){var y={curveNumber:w.index,pointNumbers:m.pts,data:w._input,fullData:w,label:m.label,color:m.color,value:m.v,percent:m.percent,text:m.text,bbox:m.bbox,v:m.v};return 1===m.pts.length&&(y.pointNumber=y.i=m.pts[0]),g(y,w,m.pts),"funnelarea"===w.type&&(delete y.v,delete y.i),y}},{"../../components/fx/helpers":402}],906:[function(x,oe,ae){"use strict";var g=x("../../lib");function m(w){return-1!==w.indexOf("e")?w.replace(/[.]?0+e/,"e"):-1!==w.indexOf(".")?w.replace(/[.]?0+$/,""):w}ae.formatPiePercent=function(w,y){var e=m((100*w).toPrecision(3));return g.numSeparate(e,y)+"%"},ae.formatPieValue=function(w,y){var e=m(w.toPrecision(10));return g.numSeparate(e,y)},ae.getFirstFilled=function(w,y){if(Array.isArray(w))for(var e=0;e<y.length;e++){var r=w[y[e]];if(r||0===r||""===r)return r}},ae.castOption=function(w,y){return Array.isArray(w)?ae.getFirstFilled(w,y):w||void 0},ae.getRotationAngle=function(w){return("auto"===w?0:w)*Math.PI/180}},{"../../lib":503}],907:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults").supplyDefaults,supplyLayoutDefaults:x("./layout_defaults"),layoutAttributes:x("./layout_attributes"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot").plot,style:x("./style"),styleOne:x("./style_one"),moduleType:"trace",name:"pie",basePlotModule:x("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":901,"./base_plot":902,"./calc":903,"./defaults":904,"./layout_attributes":908,"./layout_defaults":909,"./plot":910,"./style":911,"./style_one":912}],908:[function(x,oe,ae){"use strict";oe.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],909:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./layout_attributes");oe.exports=function(w,y){function e(r,n){return g.coerce(w,y,m,r,n)}e("hiddenlabels"),e("piecolorway",y.colorway),e("extendpiecolors")}},{"../../lib":503,"./layout_attributes":908}],910:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../plots/plots"),w=x("../../components/fx"),y=x("../../components/color"),e=x("../../components/drawing"),r=x("../../lib"),n=r.strScale,a=r.strTranslate,t=x("../../lib/svg_text_utils"),p=x("../bar/uniform_text"),u=p.recordMinTextSize,i=p.clearMinTextSize,c=x("../bar/constants").TEXTPAD,f=x("./helpers"),l=x("./event_data"),h=x("../../lib").isValidTextValue;function d(Q,ne,X){var $=X[0],re=$.cx,H=$.cy,U=$.trace,G="funnelarea"===U.type;"_hasHoverLabel"in U||(U._hasHoverLabel=!1),"_hasHoverEvent"in U||(U._hasHoverEvent=!1),Q.on("mouseover",function(ie){var q=ne._fullLayout,ee=ne._fullData[U.index];if(!ne._dragging&&!1!==q.hovermode){var te=ee.hoverinfo;if(Array.isArray(te)&&(te=w.castHoverinfo({hoverinfo:[f.castOption(te,ie.pts)],_module:U._module},q,0)),"all"===te&&(te="label+text+value+percent+name"),ee.hovertemplate||"none"!==te&&"skip"!==te&&te){var se=ie.rInscribed||0,ue=re+ie.pxmid[0]*(1-se),de=H+ie.pxmid[1]*(1-se),he=q.separators,xe=[];if(te&&-1!==te.indexOf("label")&&xe.push(ie.label),ie.text=f.castOption(ee.hovertext||ee.text,ie.pts),te&&-1!==te.indexOf("text")){var ge=ie.text;r.isValidTextValue(ge)&&xe.push(ge)}ie.value=ie.v,ie.valueLabel=f.formatPieValue(ie.v,he),te&&-1!==te.indexOf("value")&&xe.push(ie.valueLabel),ie.percent=ie.v/$.vTotal,ie.percentLabel=f.formatPiePercent(ie.percent,he),te&&-1!==te.indexOf("percent")&&xe.push(ie.percentLabel);var _e=ee.hoverlabel,Ce=_e.font,Le=[];w.loneHover({trace:U,x0:ue-se*$.r,x1:ue+se*$.r,y:de,_x0:G?re+ie.TL[0]:ue-se*$.r,_x1:G?re+ie.TR[0]:ue+se*$.r,_y0:G?H+ie.TL[1]:de-se*$.r,_y1:G?H+ie.BL[1]:de+se*$.r,text:xe.join("<br>"),name:ee.hovertemplate||-1!==te.indexOf("name")?ee.name:void 0,idealAlign:ie.pxmid[0]<0?"left":"right",color:f.castOption(_e.bgcolor,ie.pts)||ie.color,borderColor:f.castOption(_e.bordercolor,ie.pts),fontFamily:f.castOption(Ce.family,ie.pts),fontSize:f.castOption(Ce.size,ie.pts),fontColor:f.castOption(Ce.color,ie.pts),nameLength:f.castOption(_e.namelength,ie.pts),textAlign:f.castOption(_e.align,ie.pts),hovertemplate:f.castOption(ee.hovertemplate,ie.pts),hovertemplateLabels:ie,eventData:[l(ie,ee)]},{container:q._hoverlayer.node(),outerContainer:q._paper.node(),gd:ne,inOut_bbox:Le}),ie.bbox=Le[0],U._hasHoverLabel=!0}U._hasHoverEvent=!0,ne.emit("plotly_hover",{points:[l(ie,ee)],event:g.event})}}),Q.on("mouseout",function(ie){var q=ne._fullLayout,ee=ne._fullData[U.index],te=g.select(this).datum();U._hasHoverEvent&&(ie.originalEvent=g.event,ne.emit("plotly_unhover",{points:[l(te,ee)],event:g.event}),U._hasHoverEvent=!1),U._hasHoverLabel&&(w.loneUnhover(q._hoverlayer.node()),U._hasHoverLabel=!1)}),Q.on("click",function(ie){ne._dragging||!1===ne._fullLayout.hovermode||(ne._hoverdata=[l(ie,ne._fullData[U.index])],w.click(ne,g.event))})}function o(Q,ne,X){var $=f.castOption(Q.insidetextfont.color,ne.pts);!$&&Q._input.textfont&&($=f.castOption(Q._input.textfont.color,ne.pts));var re=f.castOption(Q.insidetextfont.family,ne.pts)||f.castOption(Q.textfont.family,ne.pts)||X.family,H=f.castOption(Q.insidetextfont.size,ne.pts)||f.castOption(Q.textfont.size,ne.pts)||X.size;return{color:$||y.contrast(ne.color),family:re,size:H}}function _(Q,ne){for(var X,$,re=0;re<Q.length;re++)if(($=(X=Q[re][0]).trace).title.text){var H=$.title.text;$._meta&&(H=r.templateString(H,$._meta));var U=e.tester.append("text").attr("data-notex",1).text(H).call(e.font,$.title.font).call(t.convertToTspans,ne),G=e.bBox(U.node(),!0);X.titleBox={width:G.width,height:G.height},U.remove()}}function s(Q,ne,X){var $=X.r||ne.rpx1,re=ne.rInscribed;if(ne.startangle===ne.stopangle)return{rCenter:1-re,scale:0,rotate:0,textPosAngle:0};var H,U=ne.ring,G=1===U&&Math.abs(ne.startangle-ne.stopangle)===2*Math.PI,ie=ne.halfangle,q=ne.midangle,ee=X.trace.insidetextorientation,te="horizontal"===ee,se="tangential"===ee,ue="radial"===ee,de="auto"===ee,he=[];if(!de){var xe,ge=function(ve,Te){if(st=(Ue=ne).stopangle,(Ke=Ue.startangle)>(He=ve)&&He>st||Ke<He&&He<st){var Pe=Math.abs(ve-ne.startangle),De=Math.abs(ve-ne.stopangle),Fe=Pe<De?Pe:De;(H="tan"===Te?M(Q,$,U,Fe,0):k(Q,$,U,Fe,Math.PI/2)).textPosAngle=ve,he.push(H)}var Ue,He,Ke,st};if(te||se){for(xe=4;xe>=-4;xe-=2)ge(Math.PI*xe,"tan");for(xe=4;xe>=-4;xe-=2)ge(Math.PI*(xe+1),"tan")}if(te||ue){for(xe=4;xe>=-4;xe-=2)ge(Math.PI*(xe+1.5),"rad");for(xe=4;xe>=-4;xe-=2)ge(Math.PI*(xe+.5),"rad")}}if(G||de||te){var _e=Math.sqrt(Q.width*Q.width+Q.height*Q.height);if((H={scale:re*$*2/_e,rCenter:1-re,rotate:0}).textPosAngle=(ne.startangle+ne.stopangle)/2,H.scale>=1)return H;he.push(H)}(de||ue)&&((H=k(Q,$,U,ie,q)).textPosAngle=(ne.startangle+ne.stopangle)/2,he.push(H)),(de||se)&&((H=M(Q,$,U,ie,q)).textPosAngle=(ne.startangle+ne.stopangle)/2,he.push(H));for(var Ce=0,Le=0,Ie=0;Ie<he.length;Ie++){var Be=he[Ie].scale;if(Le<Be&&(Le=Be,Ce=Ie),!de&&Le>=1)break}return he[Ce]}function k(Q,ne,X,$,re){ne=Math.max(0,ne-2*c);var H=Q.width/Q.height,U=I(H,$,ne,X);return{scale:2*U/Q.height,rCenter:A(H,U/ne),rotate:E(re)}}function M(Q,ne,X,$,re){ne=Math.max(0,ne-2*c);var H=Q.height/Q.width,U=I(H,$,ne,X);return{scale:2*U/Q.width,rCenter:A(H,U/ne),rotate:E(re+Math.PI/2)}}function A(Q,ne){return Math.cos(ne)-Q*ne}function E(Q){return(180/Math.PI*Q+720)%180-90}function I(Q,ne,X,$){var re=Q+1/(2*Math.tan(ne));return X*Math.min(1/(Math.sqrt(re*re+.5)+re),$/(Math.sqrt(Q*Q+$/2)+Q))}function C(Q,ne){return Q.v!==ne.vTotal||ne.trace.hole?Math.min(1/(1+1/Math.sin(Q.halfangle)),Q.ring/2):1}function R(Q,ne){var X=ne.pxmid[0],$=ne.pxmid[1],re=Q.width/2,H=Q.height/2;return X<0&&(re*=-1),$<0&&(H*=-1),{scale:1,rCenter:1,rotate:0,x:re+Math.abs(H)*(re>0?1:-1)/2,y:H/(1+X*X/($*$)),outside:!0}}function O(Q,ne){var X,$,re,H=Q.trace,U={x:Q.cx,y:Q.cy},G={tx:0,ty:0};G.ty+=H.title.font.size,re=L(H),-1!==H.title.position.indexOf("top")?(U.y-=(1+re)*Q.r,G.ty-=Q.titleBox.height):-1!==H.title.position.indexOf("bottom")&&(U.y+=(1+re)*Q.r);var q,ee=Q.r/(void 0===(q=Q.trace.aspectratio)?1:q),te=ne.w*(H.domain.x[1]-H.domain.x[0])/2;return-1!==H.title.position.indexOf("left")?(te+=ee,U.x-=(1+re)*ee,G.tx+=Q.titleBox.width/2):-1!==H.title.position.indexOf("center")?te*=2:-1!==H.title.position.indexOf("right")&&(te+=ee,U.x+=(1+re)*ee,G.tx-=Q.titleBox.width/2),X=te/Q.titleBox.width,$=D(Q,ne)/Q.titleBox.height,{x:U.x,y:U.y,scale:Math.min(X,$),tx:G.tx,ty:G.ty}}function D(Q,ne){var X=Q.trace;return Math.min(Q.titleBox.height,ne.h*(X.domain.y[1]-X.domain.y[0])/2)}function L(Q){var ne,X=Q.pull;if(!X)return 0;if(Array.isArray(X))for(X=0,ne=0;ne<Q.pull.length;ne++)Q.pull[ne]>X&&(X=Q.pull[ne]);return X}function B(Q,ne){for(var X=[],$=0;$<Q.length;$++){var re=Q[$][0],H=re.trace,U=H.domain,G=ne.w*(U.x[1]-U.x[0]),ie=ne.h*(U.y[1]-U.y[0]);H.title.text&&"middle center"!==H.title.position&&(ie-=D(re,ne));var ee=ie/2;"funnelarea"!==H.type||H.scalegroup||(ee/=H.aspectratio),re.r=Math.min(G/2,ee)/(1+L(H)),re.cx=ne.l+ne.w*(H.domain.x[1]+H.domain.x[0])/2,re.cy=ne.t+ne.h*(1-H.domain.y[0])-ie/2,H.title.text&&-1!==H.title.position.indexOf("bottom")&&(re.cy-=D(re,ne)),H.scalegroup&&-1===X.indexOf(H.scalegroup)&&X.push(H.scalegroup)}!function(te,se){for(var ue,de,he,xe=0;xe<se.length;xe++){var ge=1/0,_e=se[xe];for(de=0;de<te.length;de++)if((he=(ue=te[de][0]).trace).scalegroup===_e){var Ce;if("pie"===he.type)Ce=ue.r*ue.r;else if("funnelarea"===he.type){var Le,Ie;he.aspectratio>1?Ie=(Le=ue.r)/he.aspectratio:Le=(Ie=ue.r)*he.aspectratio,Ce=(Le*=(1+he.baseratio)/2)*Ie}ge=Math.min(ge,Ce/ue.vTotal)}for(de=0;de<te.length;de++)if((he=(ue=te[de][0]).trace).scalegroup===_e){var Be=ge*ue.vTotal;"funnelarea"===he.type&&(Be/=(1+he.baseratio)/2,Be/=he.aspectratio),ue.r=Math.sqrt(Be)}}}(Q,X)}function j(Q,ne){return[Q*Math.sin(ne),-Q*Math.cos(ne)]}function W(Q,ne,X){var Ce,$=Q._fullLayout,re=X.trace,H=re.texttemplate,U=re.textinfo;if(!H&&U&&"none"!==U){var G,ie=U.split("+"),q=function(Ce){return-1!==ie.indexOf(Ce)},ee=q("label"),te=q("text"),se=q("value"),ue=q("percent"),de=$.separators;if(G=ee?[ne.label]:[],te){var he=f.getFirstFilled(re.text,ne.pts);h(he)&&G.push(he)}se&&G.push(f.formatPieValue(ne.v,de)),ue&&G.push(f.formatPiePercent(ne.v/X.vTotal,de)),ne.text=G.join("<br>")}if(H){var xe=r.castOption(re,ne.i,"texttemplate");if(xe){var ge={label:(Ce=ne).label,value:Ce.v,valueLabel:f.formatPieValue(Ce.v,$.separators),percent:Ce.v/X.vTotal,percentLabel:f.formatPiePercent(Ce.v/X.vTotal,$.separators),color:Ce.color,text:Ce.text,customdata:r.castOption(re,Ce.i,"customdata")},_e=f.getFirstFilled(re.text,ne.pts);(h(_e)||""===_e)&&(ge.text=_e),ne.text=r.texttemplateString(xe,ge,Q._fullLayout._d3locale,ge,re._meta||{})}else ne.text=""}}function Y(Q,ne){var X=Q.rotate*Math.PI/180,$=Math.cos(X),re=Math.sin(X),H=(ne.left+ne.right)/2,U=(ne.top+ne.bottom)/2;Q.textX=H*$-U*re,Q.textY=H*re+U*$,Q.noCenter=!0}oe.exports={plot:function(Q,ne){var X=Q._fullLayout,$=X._size;i("pie",X),_(ne,Q),B(ne,$);var re=r.makeTraceGroups(X._pielayer,ne,"trace").each(function(H){var U=g.select(this),G=H[0],ie=G.trace;(function(q){var ee,te,se,ue=q[0],de=ue.r,he=ue.trace,xe=f.getRotationAngle(he.rotation),ge=2*Math.PI/ue.vTotal,_e="px0",Ce="px1";if("counterclockwise"===he.direction){for(ee=0;ee<q.length&&q[ee].hidden;ee++);if(ee===q.length)return;xe+=ge*q[ee].v,ge*=-1,_e="px1",Ce="px0"}for(se=j(de,xe),ee=0;ee<q.length;ee++)(te=q[ee]).hidden||(te[_e]=se,te.startangle=xe,te.pxmid=j(de,xe+=ge*te.v/2),te.midangle=xe,se=j(de,xe+=ge*te.v/2),te.stopangle=xe,te[Ce]=se,te.largeArc=te.v>ue.vTotal/2?1:0,te.halfangle=Math.PI*Math.min(te.v/ue.vTotal,.5),te.ring=1-he.hole,te.rInscribed=C(te,ue))})(H),U.attr("stroke-linejoin","round"),U.each(function(){var q=g.select(this).selectAll("g.slice").data(H);q.enter().append("g").classed("slice",!0),q.exit().remove();var ee=[[[],[]],[[],[]]],te=!1;q.each(function(Ce,Le){if(Ce.hidden)g.select(this).selectAll("path,g").remove();else{Ce.pointNumber=Ce.i,Ce.curveNumber=ie.index,ee[Ce.pxmid[1]<0?0:1][Ce.pxmid[0]<0?0:1].push(Ce);var Ie=G.cx,Be=G.cy,ve=g.select(this),Te=ve.selectAll("path.surface").data([Ce]);if(Te.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),ve.call(d,Q,H),ie.pull){var Pe=+f.castOption(ie.pull,Ce.pts)||0;Pe>0&&(Ie+=Pe*Ce.pxmid[0],Be+=Pe*Ce.pxmid[1])}Ce.cxFinal=Ie,Ce.cyFinal=Be;var De=ie.hole;if(Ce.v===G.vTotal){var Fe="M"+(Ie+Ce.px0[0])+","+(Be+Ce.px0[1])+Ve(Ce.px0,Ce.pxmid,!0,1)+Ve(Ce.pxmid,Ce.px0,!0,1)+"Z";Te.attr("d",De?"M"+(Ie+De*Ce.px0[0])+","+(Be+De*Ce.px0[1])+Ve(Ce.px0,Ce.pxmid,!1,De)+Ve(Ce.pxmid,Ce.px0,!1,De)+"Z"+Fe:Fe)}else{var Ue=Ve(Ce.px0,Ce.px1,!0,1);if(De){var He=1-De;Te.attr("d","M"+(Ie+De*Ce.px1[0])+","+(Be+De*Ce.px1[1])+Ve(Ce.px1,Ce.px0,!1,De)+"l"+He*Ce.px0[0]+","+He*Ce.px0[1]+Ue+"Z")}else Te.attr("d","M"+Ie+","+Be+"l"+Ce.px0[0]+","+Ce.px0[1]+Ue+"Z")}W(Q,Ce,G);var Ke=f.castOption(ie.textposition,Ce.pts),st=ve.selectAll("g.slicetext").data(Ce.text&&"none"!==Ke?[0]:[]);st.enter().append("g").classed("slicetext",!0),st.exit().remove(),st.each(function(){var ft,lt,Ft,$e=r.ensureSingle(g.select(this),"text","",function(ft){ft.attr("data-notex",1)}),Qe=r.ensureUniformFontSize(Q,"outside"===Ke?(Ft=X.font,{color:f.castOption((ft=ie).outsidetextfont.color,(lt=Ce).pts)||f.castOption(ft.textfont.color,lt.pts)||Ft.color,family:f.castOption(ft.outsidetextfont.family,lt.pts)||f.castOption(ft.textfont.family,lt.pts)||Ft.family,size:f.castOption(ft.outsidetextfont.size,lt.pts)||f.castOption(ft.textfont.size,lt.pts)||Ft.size}):o(ie,Ce,X.font));$e.text(Ce.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,Qe).call(t.convertToTspans,Q);var tt,ut=e.bBox($e.node());if("outside"===Ke)tt=R(ut,Ce);else if(tt=s(ut,Ce,G),"auto"===Ke&&tt.scale<1){var xt=r.ensureUniformFontSize(Q,ie.outsidetextfont);$e.call(e.font,xt),tt=R(ut=e.bBox($e.node()),Ce)}var kt=tt.textPosAngle,Bt=void 0===kt?Ce.pxmid:j(G.r,kt);if(tt.targetX=Ie+Bt[0]*tt.rCenter+(tt.x||0),tt.targetY=Be+Bt[1]*tt.rCenter+(tt.y||0),Y(tt,ut),tt.outside){var Rt=tt.targetY;Ce.yLabelMin=Rt-ut.height/2,Ce.yLabelMid=Rt,Ce.yLabelMax=Rt+ut.height/2,Ce.labelExtraX=0,Ce.labelExtraY=0,te=!0}tt.fontSize=Qe.size,u(ie.type,tt,X),H[Le].transform=tt,$e.attr("transform",r.getTextTransform(tt))})}function Ve($e,Qe,tt,ut){return"a"+ut*G.r+","+ut*G.r+" 0 "+Ce.largeArc+(tt?" 1 ":" 0 ")+ut*(Qe[0]-$e[0])+","+ut*(Qe[1]-$e[1])}});var Le,se=g.select(this).selectAll("g.titletext").data(ie.title.text?[0]:[]);if(se.enter().append("g").classed("titletext",!0),se.exit().remove(),se.each(function(){var Ce,Be,ve,Le=r.ensureSingle(g.select(this),"text","",function(Be){Be.attr("data-notex",1)}),Ie=ie.title.text;ie._meta&&(Ie=r.templateString(Ie,ie._meta)),Le.text(Ie).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,ie.title.font).call(t.convertToTspans,Q),Ce="middle center"===ie.title.position?(Be=G,ve=Math.sqrt(Be.titleBox.width*Be.titleBox.width+Be.titleBox.height*Be.titleBox.height),{x:Be.cx,y:Be.cy,scale:Be.trace.hole*Be.r*2/ve,tx:0,ty:-Be.titleBox.height/2+Be.trace.title.font.size}):O(G,$),Le.attr("transform",a(Ce.x,Ce.y)+n(Math.min(1,Ce.scale))+a(Ce.tx,Ce.ty))}),te&&function(Ce,Le){var Ie,Be,ve,Te,Pe,De,Fe,Ue,He,Ke,st,Ve,$e;function Qe(kt,Bt){return kt.pxmid[1]-Bt.pxmid[1]}function tt(kt,Bt){return Bt.pxmid[1]-kt.pxmid[1]}function ut(kt,Bt){Bt||(Bt={});var Rt,ft,lt,Ft,Jt=Bt.labelExtraY+(Be?Bt.yLabelMax:Bt.yLabelMin),ln=Be?kt.yLabelMin:kt.yLabelMax,dn=Be?kt.yLabelMax:kt.yLabelMin,cn=kt.cyFinal+Pe(kt.px0[1],kt.px1[1]),Tn=Jt-ln;if(Tn*Fe>0&&(kt.labelExtraY=Tn),Array.isArray(Le.pull))for(ft=0;ft<Ke.length;ft++)(lt=Ke[ft])===kt||(f.castOption(Le.pull,kt.pts)||0)>=(f.castOption(Le.pull,lt.pts)||0)||((kt.pxmid[1]-lt.pxmid[1])*Fe>0?(Tn=lt.cyFinal+Pe(lt.px0[1],lt.px1[1])-ln-kt.labelExtraY)*Fe>0&&(kt.labelExtraY+=Tn):(dn+kt.labelExtraY-cn)*Fe>0&&(Rt=3*De*Math.abs(ft-Ke.indexOf(kt)),(Ft=lt.cxFinal+Te(lt.px0[0],lt.px1[0])+Rt-(kt.cxFinal+kt.pxmid[0])-kt.labelExtraX)*De>0&&(kt.labelExtraX+=Ft)))}for(Be=0;Be<2;Be++)for(ve=Be?Qe:tt,Pe=Be?Math.max:Math.min,Fe=Be?1:-1,Ie=0;Ie<2;Ie++){for(Te=Ie?Math.max:Math.min,De=Ie?1:-1,(Ue=Ce[Be][Ie]).sort(ve),Ke=(He=Ce[1-Be][Ie]).concat(Ue),Ve=[],st=0;st<Ue.length;st++)void 0!==Ue[st].yLabelMid&&Ve.push(Ue[st]);for($e=!1,st=0;Be&&st<He.length;st++)if(void 0!==He[st].yLabelMid){$e=He[st];break}for(st=0;st<Ve.length;st++){var xt=st&&Ve[st-1];$e&&!st&&(xt=$e),ut(Ve[st],xt)}}}(ee,ie),Le=ie,q.each(function(Ie){var Be=g.select(this);if(Ie.labelExtraX||Ie.labelExtraY){var ve=Be.select("g.slicetext text");Ie.transform.targetX+=Ie.labelExtraX,Ie.transform.targetY+=Ie.labelExtraY,ve.attr("transform",r.getTextTransform(Ie.transform));var Te=Ie.cxFinal+Ie.pxmid[0],Pe="M"+Te+","+(Ie.cyFinal+Ie.pxmid[1]),De=(Ie.yLabelMax-Ie.yLabelMin)*(Ie.pxmid[0]<0?-1:1)/4;if(Ie.labelExtraX){var Fe=Ie.labelExtraX*Ie.pxmid[1]/Ie.pxmid[0],Ue=Ie.yLabelMid+Ie.labelExtraY-(Ie.cyFinal+Ie.pxmid[1]);Math.abs(Fe)>Math.abs(Ue)?Pe+="l"+Ue*Ie.pxmid[0]/Ie.pxmid[1]+","+Ue+"H"+(Te+Ie.labelExtraX+De):Pe+="l"+Ie.labelExtraX+","+Fe+"v"+(Ue-Fe)+"h"+De}else Pe+="V"+(Ie.yLabelMid+Ie.labelExtraY)+"h"+De;r.ensureSingle(Be,"path","textline").call(y.stroke,Le.outsidetextfont.color).attr({"stroke-width":Math.min(2,Le.outsidetextfont.size/8),d:Pe,fill:"none"})}else Be.select("path.textline").remove()}),te&&ie.automargin){var ue=e.bBox(U.node()),de=ie.domain,ge=($.w*(de.x[1]-de.x[0])*.5-G.r)/$.w,_e=($.h*(de.y[1]-de.y[0])*.5-G.r)/$.h;m.autoMargin(Q,"pie."+ie.uid+".automargin",{xl:de.x[0]-ge,xr:de.x[1]+ge,yb:de.y[0]-_e,yt:de.y[1]+_e,l:Math.max(G.cx-G.r-ue.left,0),r:Math.max(ue.right-(G.cx+G.r),0),b:Math.max(ue.bottom-(G.cy+G.r),0),t:Math.max(G.cy-G.r-ue.top,0),pad:5})}})});setTimeout(function(){re.selectAll("tspan").each(function(){var H=g.select(this);H.attr("dy")&&H.attr("dy",H.attr("dy"))})},0)},formatSliceLabel:W,transformInsideText:s,determineInsideTextFont:o,positionTitleOutside:O,prerenderTitles:_,layoutAreas:B,attachFxHandlers:d,computeTransform:Y}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":905,"./helpers":906,"@plotly/d3":58}],911:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("./style_one"),w=x("../bar/uniform_text").resizeText;oe.exports=function(y){var e=y._fullLayout._pielayer.selectAll(".trace");w(y,e,"pie"),e.each(function(r){var n=r[0].trace,a=g.select(this);a.style({opacity:n.opacity}),a.selectAll("path.surface").each(function(t){g.select(this).call(m,t,n)})})}},{"../bar/uniform_text":664,"./style_one":912,"@plotly/d3":58}],912:[function(x,oe,ae){"use strict";var g=x("../../components/color"),m=x("./helpers").castOption;oe.exports=function(w,y,e){var r=e.marker.line,n=m(r.color,y.pts)||g.defaultLine,a=m(r.width,y.pts)||0;w.style("stroke-width",a).call(g.fill,y.color).call(g.stroke,n)}},{"../../components/color":366,"./helpers":906}],913:[function(x,oe,ae){"use strict";var g=x("../scatter/attributes");oe.exports={x:g.x,y:g.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:g.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":927}],914:[function(x,oe,ae){"use strict";var g=x("../../../stackgl_modules").gl_pointcloud2d,m=x("../../lib/str2rgbarray"),w=x("../../plots/cartesian/autorange").findExtremes,y=x("../scatter/get_trace_color");function e(n,a){this.scene=n,this.uid=a,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=g(n.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var r=e.prototype;r.handlePick=function(n){var a=this.idToIndex[n.pointId];return{trace:this,dataCoord:n.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*a],this.pickXYData[2*a+1]]:[this.pickXData[a],this.pickYData[a]],textLabel:Array.isArray(this.textLabels)?this.textLabels[a]:this.textLabels,color:this.color,name:this.name,pointIndex:a,hoverinfo:this.hoverinfo}},r.update=function(n){this.index=n.index,this.textLabels=n.text,this.name=n.name,this.hoverinfo=n.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(n),this.color=y(n,{})},r.updateFast=function(n){var a,t,p,u,i,c,f=this.xData=this.pickXData=n.x,l=this.yData=this.pickYData=n.y,h=this.pickXYData=n.xy,o=n.indices,_=this.bounds;if(h){if(p=h,a=h.length>>>1,n.xbounds&&n.ybounds)_[0]=n.xbounds[0],_[2]=n.xbounds[1],_[1]=n.ybounds[0],_[3]=n.ybounds[1];else for(c=0;c<a;c++)i=p[2*c+1],(u=p[2*c])<_[0]&&(_[0]=u),u>_[2]&&(_[2]=u),i<_[1]&&(_[1]=i),i>_[3]&&(_[3]=i);if(o)t=o;else for(t=new Int32Array(a),c=0;c<a;c++)t[c]=c}else for(a=f.length,p=new Float32Array(2*a),t=new Int32Array(a),c=0;c<a;c++)u=f[c],i=l[c],t[c]=c,p[2*c]=u,p[2*c+1]=i,u<_[0]&&(_[0]=u),u>_[2]&&(_[2]=u),i<_[1]&&(_[1]=i),i>_[3]&&(_[3]=i);this.idToIndex=t,this.pointcloudOptions.idToIndex=t,this.pointcloudOptions.positions=p;var s=m(n.marker.color),k=m(n.marker.border.color),M=n.opacity*n.marker.opacity;s[3]*=M,this.pointcloudOptions.color=s;var A=n.marker.blend;null===A&&(A=f.length<100||l.length<100),this.pointcloudOptions.blend=A,k[3]*=M,this.pointcloudOptions.borderColor=k;var E=n.marker.sizemin,I=Math.max(n.marker.sizemax,n.marker.sizemin);this.pointcloudOptions.sizeMin=E,this.pointcloudOptions.sizeMax=I,this.pointcloudOptions.areaRatio=n.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var C=this.scene.xaxis,R=this.scene.yaxis,O=I/2||.5;n._extremes[C._id]=w(C,[_[0],_[2]],{ppad:O}),n._extremes[R._id]=w(R,[_[1],_[3]],{ppad:O})},r.dispose=function(){this.pointcloud.dispose()},oe.exports=function(n,a){var t=new e(n,a.uid);return t.update(a),t}},{"../../../stackgl_modules":1124,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":937}],915:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./attributes");oe.exports=function(w,y,e){function r(n,a){return g.coerce(w,y,m,n,a)}r("x"),r("y"),r("xbounds"),r("ybounds"),w.xy&&w.xy instanceof Float32Array&&(y.xy=w.xy),w.indices&&w.indices instanceof Int32Array&&(y.indices=w.indices),r("text"),r("marker.color",e),r("marker.opacity"),r("marker.blend"),r("marker.sizemin"),r("marker.sizemax"),r("marker.border.color",e),r("marker.border.arearatio"),y._length=null}},{"../../lib":503,"./attributes":913}],916:[function(x,oe,ae){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("../scatter3d/calc"),plot:x("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:x("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":956,"./attributes":913,"./convert":914,"./defaults":915}],917:[function(x,oe,ae){"use strict";var g=x("../../plots/font_attributes"),m=x("../../plots/attributes"),w=x("../../components/color/attributes"),y=x("../../components/fx/attributes"),e=x("../../plots/domain").attributes,r=x("../../plots/template_attributes").hovertemplateAttrs,n=x("../../components/colorscale/attributes"),a=x("../../plot_api/plot_template").templatedArray,t=x("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,p=x("../../lib/extend").extendFlat,u=x("../../plot_api/edit_types").overrideAll;(oe.exports=u({hoverinfo:p({},m.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:y.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:t("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:g({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:w.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:y.hoverlabel,hovertemplate:r({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:w.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:y.hoverlabel,hovertemplate:r({},{keys:["value","label"]}),colorscales:a("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:p(n().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],918:[function(x,oe,ae){"use strict";var g=x("../../plot_api/edit_types").overrideAll,m=x("../../plots/get_data").getModuleCalcData,w=x("./plot"),y=x("../../components/fx/layout_attributes"),e=x("../../lib/setcursor"),r=x("../../components/dragelement"),n=x("../../plots/cartesian/select").prepSelect,a=x("../../lib"),t=x("../../registry");function p(u,i){var c=u._fullData[i],f=u._fullLayout,l=f.dragmode,d=c._bgRect;if("pan"!==l&&"zoom"!==l){e(d,"pan"===f.dragmode?"move":"crosshair");var o={_id:"x",c2p:a.identity,_offset:c._sankey.translateX,_length:c._sankey.width},_={_id:"y",c2p:a.identity,_offset:c._sankey.translateY,_length:c._sankey.height},s={gd:u,element:d.node(),plotinfo:{id:i,xaxis:o,yaxis:_,fillRangeItems:a.noop},subplot:i,xaxes:[o],yaxes:[_],doneFnCompleted:function(k){var M,A=u._fullData[i],E=A.node.groups.slice(),I=[];function C(L){for(var B=A._sankey.graph.nodes,j=0;j<B.length;j++)if(B[j].pointNumber===L)return B[j]}for(var R=0;R<k.length;R++){var O=C(k[R].pointNumber);if(O)if(O.group){for(var D=0;D<O.childrenNodes.length;D++)I.push(O.childrenNodes[D].pointNumber);E[O.pointNumber-A.node._count]=!1}else I.push(O.pointNumber)}M=E.filter(Boolean).concat([I]),t.call("_guiRestyle",u,{"node.groups":[M]},i)},prepFn:function(k,M,A){n(k,M,A,s,l)}};r.init(s)}}ae.name="sankey",ae.baseLayoutAttrOverrides=g({hoverlabel:y.hoverlabel},"plot","nested"),ae.plot=function(u){var i=m(u.calcdata,"sankey")[0];w(u,i),ae.updateFx(u)},ae.clean=function(u,i,c,f){var l=f._has&&f._has("sankey"),h=i._has&&i._has("sankey");l&&!h&&(f._paperdiv.selectAll(".sankey").remove(),f._paperdiv.selectAll(".bgsankey").remove())},ae.updateFx=function(u){for(var i=0;i<u._fullData.length;i++)p(u,i)}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":923}],919:[function(x,oe,ae){"use strict";var g=x("strongly-connected-components"),m=x("../../lib"),w=x("../../lib/gup").wrap,y=m.isArrayOrTypedArray,e=m.isIndex,r=x("../../components/colorscale");oe.exports=function(a,t){var p=function n(a){var t,p=a.node,u=a.link,i=[],c=y(u.color),f=y(u.customdata),l={},h={},d=u.colorscales.length;for(t=0;t<d;t++){var o=u.colorscales[t],_=r.extractScale(o,{cLetter:"c"}),s=r.makeColorScaleFunc(_);h[o.label]=s}var k=0;for(t=0;t<u.value.length;t++)u.source[t]>k&&(k=u.source[t]),u.target[t]>k&&(k=u.target[t]);var M,A=k+1;a.node._count=A;var E=a.node.groups,I={};for(t=0;t<E.length;t++){var C=E[t];for(M=0;M<C.length;M++){var R=C[M],O=A+t;I.hasOwnProperty(R)?m.warn("Node "+R+" is already part of a group."):I[R]=O}}var D={source:[],target:[]};for(t=0;t<u.value.length;t++){var L=u.value[t],B=u.source[t],j=u.target[t];if(L>0&&e(B,A)&&e(j,A)&&(!I.hasOwnProperty(B)||!I.hasOwnProperty(j)||I[B]!==I[j])){I.hasOwnProperty(j)&&(j=I[j]),I.hasOwnProperty(B)&&(B=I[B]),l[B=+B]=l[j=+j]=!0;var W="";u.label&&u.label[t]&&(W=u.label[t]);var Y=null;W&&h.hasOwnProperty(W)&&(Y=h[W]),i.push({pointNumber:t,label:W,color:c?u.color[t]:u.color,customdata:f?u.customdata[t]:u.customdata,concentrationscale:Y,source:B,target:j,value:+L}),D.source.push(B),D.target.push(j)}}var Q=A+E.length,ne=y(p.color),X=y(p.customdata),$=[];for(t=0;t<Q;t++)l[t]&&$.push({group:t>A-1,childrenNodes:[],pointNumber:t,label:p.label[t],color:ne?p.color[t]:p.color,customdata:X?p.customdata[t]:p.customdata});var H=!1;return function(U,G,ie){for(var q=m.init2dArray(U,0),ee=0;ee<Math.min(G.length,ie.length);ee++)if(m.isIndex(G[ee],U)&&m.isIndex(ie[ee],U)){if(G[ee]===ie[ee])return!0;q[G[ee]].push(ie[ee])}return g(q).components.some(function(te){return te.length>1})}(Q,D.source,D.target)&&(H=!0),{circular:H,links:i,nodes:$,groups:E,groupLookup:I}}(t);return w({circular:p.circular,_nodes:p.nodes,_links:p.links,_groups:p.groups,_groupLookup:p.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],920:[function(x,oe,ae){"use strict";oe.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],921:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./attributes"),w=x("../../components/color"),y=x("tinycolor2"),e=x("../../plots/domain").defaults,r=x("../../components/fx/hoverlabel_defaults"),n=x("../../plot_api/plot_template"),a=x("../../plots/array_container_defaults");function t(p,u){function i(c,f){return g.coerce(p,u,m.link.colorscales,c,f)}i("label"),i("cmin"),i("cmax"),i("colorscale")}oe.exports=function(p,u,i,c){function f(I,C){return g.coerce(p,u,m,I,C)}var l=g.extendDeep(c.hoverlabel,p.hoverlabel),h=p.node,d=n.newContainer(u,"node");function o(I,C){return g.coerce(h,d,m.node,I,C)}o("label"),o("groups"),o("x"),o("y"),o("pad"),o("thickness"),o("line.color"),o("line.width"),o("hoverinfo",p.hoverinfo),r(h,d,o,l),o("hovertemplate");var _=c.colorway;o("color",d.label.map(function(I,C){return w.addOpacity(_[C%_.length],.8)})),o("customdata");var s=p.link||{},k=n.newContainer(u,"link");function M(I,C){return g.coerce(s,k,m.link,I,C)}M("label"),M("source"),M("target"),M("value"),M("line.color"),M("line.width"),M("hoverinfo",p.hoverinfo),r(s,k,M,l),M("hovertemplate");var A,E=y(c.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";M("color",g.repeat(E,k.value.length)),M("customdata"),a(s,k,{name:"colorscales",handleItemDefaults:t}),e(u,c,f),f("orientation"),f("valueformat"),f("valuesuffix"),d.x.length&&d.y.length&&(A="freeform"),f("arrangement",A),g.coerceFont(f,"textfont",g.extendFlat({},c.font)),u._length=null}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":917,tinycolor2:312}],922:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot"),moduleType:"trace",name:"sankey",basePlotModule:x("./base_plot"),selectPoints:x("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":917,"./base_plot":918,"./calc":919,"./defaults":921,"./plot":923,"./select.js":925}],923:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=m.numberFormat,y=x("./render"),e=x("../../components/fx"),r=x("../../components/color"),n=x("./constants").cn,a=m._;function t(s){return""!==s}function p(s,k){return s.filter(function(M){return M.key===k.traceId})}function u(s,k){g.select(s).select("path").style("fill-opacity",k),g.select(s).select("rect").style("fill-opacity",k)}function i(s){g.select(s).select("text.name").style("fill","black")}function c(s){return function(k){return-1!==s.node.sourceLinks.indexOf(k.link)||-1!==s.node.targetLinks.indexOf(k.link)}}function f(s){return function(k){return-1!==k.node.sourceLinks.indexOf(s.link)||-1!==k.node.targetLinks.indexOf(s.link)}}function l(s,k,M){k&&M&&p(M,k).selectAll("."+n.sankeyLink).filter(c(k)).call(d.bind(0,k,M,!1))}function h(s,k,M){k&&M&&p(M,k).selectAll("."+n.sankeyLink).filter(c(k)).call(o.bind(0,k,M,!1))}function d(s,k,M,A){var E=A.datum().link.label;A.style("fill-opacity",function(I){if(!I.link.concentrationscale)return.4}),E&&p(k,s).selectAll("."+n.sankeyLink).filter(function(I){return I.link.label===E}).style("fill-opacity",function(I){if(!I.link.concentrationscale)return.4}),M&&p(k,s).selectAll("."+n.sankeyNode).filter(f(s)).call(l)}function o(s,k,M,A){var E=A.datum().link.label;A.style("fill-opacity",function(I){return I.tinyColorAlpha}),E&&p(k,s).selectAll("."+n.sankeyLink).filter(function(I){return I.link.label===E}).style("fill-opacity",function(I){return I.tinyColorAlpha}),M&&p(k,s).selectAll(n.sankeyNode).filter(f(s)).call(h)}function _(s,k){var A=m.nestedProperty(s.hoverlabel||{},k).get();return!Array.isArray(A)&&A}oe.exports=function(s,k){for(var M=s._fullLayout,A=M._paper,E=M._size,I=0;I<s._fullData.length;I++)if(s._fullData[I].visible&&s._fullData[I].type===n.sankey&&!s._fullData[I]._viewInitial){var C=s._fullData[I].node;s._fullData[I]._viewInitial={node:{groups:C.groups.slice(),x:C.x.slice(),y:C.y.slice()}}}var R=a(s,"source:")+" ",O=a(s,"target:")+" ",D=a(s,"concentration:")+" ",L=a(s,"incoming flow count:")+" ",B=a(s,"outgoing flow count:")+" ";y(s,A,k,{width:E.w,height:E.h,margin:{t:E.t,r:E.r,b:E.b,l:E.l}},{linkEvents:{hover:function(j,W,Y){!1!==s._fullLayout.hovermode&&(g.select(j).call(d.bind(0,W,Y,!0)),"skip"!==W.link.trace.link.hoverinfo&&(W.link.fullData=W.link.trace,s.emit("plotly_hover",{event:g.event,points:[W.link]})))},follow:function(j,W){if(!1!==s._fullLayout.hovermode){var Y=W.link.trace.link;if("none"!==Y.hoverinfo&&"skip"!==Y.hoverinfo){for(var Q=[],ne=0,X=0;X<W.flow.links.length;X++){var $=W.flow.links[X];if("closest"!==s._fullLayout.hovermode||W.link.pointNumber===$.pointNumber){W.link.pointNumber===$.pointNumber&&(ne=X),$.fullData=$.trace,Y=W.link.trace.link;var re=U($),H={valueLabel:w(W.valueFormat)($.value)+W.valueSuffix};Q.push({x:re[0],y:re[1],name:H.valueLabel,text:[$.label||"",R+$.source.label,O+$.target.label,$.concentrationscale?D+w("%0.2f")($.flow.labelConcentration):""].filter(t).join("<br>"),color:_(Y,"bgcolor")||r.addOpacity($.color,1),borderColor:_(Y,"bordercolor"),fontFamily:_(Y,"font.family"),fontSize:_(Y,"font.size"),fontColor:_(Y,"font.color"),nameLength:_(Y,"namelength"),textAlign:_(Y,"align"),idealAlign:g.event.x<re[0]?"right":"left",hovertemplate:Y.hovertemplate,hovertemplateLabels:H,eventData:[$]})}}e.loneHover(Q,{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:s,anchorIndex:ne}).each(function(){W.link.concentrationscale||u(this,.65),i(this)})}}function U(G){var ie,q;G.circular?(ie=(G.circularPathData.leftInnerExtent+G.circularPathData.rightInnerExtent)/2,q=G.circularPathData.verticalFullExtent):(ie=(G.source.x1+G.target.x0)/2,q=(G.y0+G.y1)/2);var ee=[ie,q];return"v"===G.trace.orientation&&ee.reverse(),ee[0]+=W.parent.translateX,ee[1]+=W.parent.translateY,ee}},unhover:function(j,W,Y){!1!==s._fullLayout.hovermode&&(g.select(j).call(o.bind(0,W,Y,!0)),"skip"!==W.link.trace.link.hoverinfo&&(W.link.fullData=W.link.trace,s.emit("plotly_unhover",{event:g.event,points:[W.link]})),e.loneUnhover(M._hoverlayer.node()))},select:function(j,W){var Y=W.link;Y.originalEvent=g.event,s._hoverdata=[Y],e.click(s,{target:!0})}},nodeEvents:{hover:function(j,W,Y){!1!==s._fullLayout.hovermode&&(g.select(j).call(l,W,Y),"skip"!==W.node.trace.node.hoverinfo&&(W.node.fullData=W.node.trace,s.emit("plotly_hover",{event:g.event,points:[W.node]})))},follow:function(j,W){if(!1!==s._fullLayout.hovermode){var Y=W.node.trace.node;if("none"!==Y.hoverinfo&&"skip"!==Y.hoverinfo){var Q=g.select(j).select("."+n.nodeRect),ne=s._fullLayout._paperdiv.node().getBoundingClientRect(),X=Q.node().getBoundingClientRect(),$=X.left-2-ne.left,re=X.right+2-ne.left,H=X.top+X.height/4-ne.top,U={valueLabel:w(W.valueFormat)(W.node.value)+W.valueSuffix};W.node.fullData=W.node.trace,s._fullLayout._calcInverseTransform(s);var G=s._fullLayout._invScaleX,q=e.loneHover({x0:G*$,x1:G*re,y:s._fullLayout._invScaleY*H,name:w(W.valueFormat)(W.node.value)+W.valueSuffix,text:[W.node.label,L+W.node.targetLinks.length,B+W.node.sourceLinks.length].filter(t).join("<br>"),color:_(Y,"bgcolor")||W.tinyColorHue,borderColor:_(Y,"bordercolor"),fontFamily:_(Y,"font.family"),fontSize:_(Y,"font.size"),fontColor:_(Y,"font.color"),nameLength:_(Y,"namelength"),textAlign:_(Y,"align"),idealAlign:"left",hovertemplate:Y.hovertemplate,hovertemplateLabels:U,eventData:[W.node]},{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:s});u(q,.85),i(q)}}},unhover:function(j,W,Y){!1!==s._fullLayout.hovermode&&(g.select(j).call(h,W,Y),"skip"!==W.node.trace.node.hoverinfo&&(W.node.fullData=W.node.trace,s.emit("plotly_unhover",{event:g.event,points:[W.node]})),e.loneUnhover(M._hoverlayer.node()))},select:function(j,W,Y){var Q=W.node;Q.originalEvent=g.event,s._hoverdata=[Q],g.select(j).call(h,W,Y),e.click(s,{target:!0})}}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":920,"./render":924,"@plotly/d3":58}],924:[function(x,oe,ae){"use strict";var g=x("d3-force"),m=x("d3-interpolate").interpolateNumber,w=x("@plotly/d3"),y=x("@plotly/d3-sankey"),e=x("@plotly/d3-sankey-circular"),r=x("./constants"),n=x("tinycolor2"),a=x("../../components/color"),t=x("../../components/drawing"),p=x("../../lib"),u=p.strTranslate,i=p.strRotate,c=x("../../lib/gup"),f=c.keyFun,l=c.repeat,h=c.unwrap,d=x("../../lib/svg_text_utils"),o=x("../../registry"),_=x("../../constants/alignment"),s=_.CAP_SHIFT,k=_.LINE_SPACING;function M(X,$,re){var H,U=h($),G=U.trace,ie=G.domain,q="h"===G.orientation,ee=G.node.pad,te=G.node.thickness,se=X.width*(ie.x[1]-ie.x[0]),ue=X.height*(ie.y[1]-ie.y[0]),de=U._nodes,he=U._links,xe=U.circular;(H=xe?e.sankeyCircular().circularLinkGap(0):y.sankey()).iterations(r.sankeyIterations).size(q?[se,ue]:[ue,se]).nodeWidth(te).nodePadding(ee).nodeId(function(Fe){return Fe.pointNumber}).nodes(de).links(he);var ge,_e,Ce,Le=H();for(var Ie in H.nodePadding()<ee&&p.warn("node.pad was reduced to ",H.nodePadding()," to fit within the figure."),U._groupLookup){var Be,ve=parseInt(U._groupLookup[Ie]);for(ge=0;ge<Le.nodes.length;ge++)if(Le.nodes[ge].pointNumber===ve){Be=Le.nodes[ge];break}if(Be){var Te={pointNumber:parseInt(Ie),x0:Be.x0,x1:Be.x1,y0:Be.y0,y1:Be.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Le.nodes.unshift(Te),Be.childrenNodes.unshift(Te)}}if(function(){for(ge=0;ge<Le.nodes.length;ge++){var Fe,Ue,He=Le.nodes[ge],Ke={};for(_e=0;_e<He.targetLinks.length;_e++)Fe=(Ue=He.targetLinks[_e]).source.pointNumber+":"+Ue.target.pointNumber,Ke.hasOwnProperty(Fe)||(Ke[Fe]=[]),Ke[Fe].push(Ue);var st=Object.keys(Ke);for(_e=0;_e<st.length;_e++){var Ve=Ke[Fe=st[_e]],$e=0,Qe={};for(Ce=0;Ce<Ve.length;Ce++)Qe[(Ue=Ve[Ce]).label]||(Qe[Ue.label]=0),Qe[Ue.label]+=Ue.value,$e+=Ue.value;for(Ce=0;Ce<Ve.length;Ce++)(Ue=Ve[Ce]).flow={value:$e,labelConcentration:Qe[Ue.label]/$e,concentration:Ue.value/$e,links:Ve},Ue.concentrationscale&&(Ue.color=n(Ue.concentrationscale(Ue.flow.labelConcentration)))}var tt=0;for(_e=0;_e<He.sourceLinks.length;_e++)tt+=He.sourceLinks[_e].value;for(_e=0;_e<He.sourceLinks.length;_e++)(Ue=He.sourceLinks[_e]).concentrationOut=Ue.value/tt;var ut=0;for(_e=0;_e<He.targetLinks.length;_e++)ut+=He.targetLinks[_e].value;for(_e=0;_e<He.targetLinks.length;_e++)(Ue=He.targetLinks[_e]).concenrationIn=Ue.value/ut}}(),G.node.x.length&&G.node.y.length){for(ge=0;ge<Math.min(G.node.x.length,G.node.y.length,Le.nodes.length);ge++)if(G.node.x[ge]&&G.node.y[ge]){var Pe=[G.node.x[ge]*se,G.node.y[ge]*ue];Le.nodes[ge].x0=Pe[0]-te/2,Le.nodes[ge].x1=Pe[0]+te/2;var De=Le.nodes[ge].y1-Le.nodes[ge].y0;Le.nodes[ge].y0=Pe[1]-De/2,Le.nodes[ge].y1=Pe[1]+De/2}"snap"===G.arrangement&&function(Fe){var Ue,He,Ke=Fe.map(function(tt,ut){return{x0:tt.x0,index:ut}}).sort(function(tt,ut){return tt.x0-ut.x0}),st=[],Ve=-1,$e=-1/0;for(ge=0;ge<Ke.length;ge++){var Qe=Fe[Ke[ge].index];Qe.x0>$e+te&&(Ve+=1,Ue=Qe.x0),$e=Qe.x0,st[Ve]||(st[Ve]=[]),st[Ve].push(Qe),Qe.x0+=He=Ue-Qe.x0,Qe.x1+=He}return st}(de=Le.nodes).forEach(function(Ue){var He,Ke,st,Ve=0,$e=Ue.length;for(Ue.sort(function(Qe,tt){return Qe.y0-tt.y0}),st=0;st<$e;++st)(He=Ue[st]).y0>=Ve||(Ke=Ve-He.y0)>1e-6&&(He.y0+=Ke,He.y1+=Ke),Ve=He.y1+ee}),H.update(Le)}return{circular:xe,key:re,trace:G,guid:p.randstr(),horizontal:q,width:se,height:ue,nodePad:G.node.pad,nodeLineColor:G.node.line.color,nodeLineWidth:G.node.line.width,linkLineColor:G.link.line.color,linkLineWidth:G.link.line.width,valueFormat:G.valueformat,valueSuffix:G.valuesuffix,textFont:G.textfont,translateX:ie.x[0]*X.width+X.margin.l,translateY:X.height-ie.y[1]*X.height+X.margin.t,dragParallel:q?ue:se,dragPerpendicular:q?se:ue,arrangement:G.arrangement,sankey:H,graph:Le,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function A(X,$,re){var H=n($.color),U=$.source.label+"|"+$.target.label+"__"+re;return $.trace=X.trace,$.curveNumber=X.trace.index,{circular:X.circular,key:U,traceId:X.key,pointNumber:$.pointNumber,link:$,tinyColorHue:a.tinyRGB(H),tinyColorAlpha:H.getAlpha(),linkPath:E,linkLineColor:X.linkLineColor,linkLineWidth:X.linkLineWidth,valueFormat:X.valueFormat,valueSuffix:X.valueSuffix,sankey:X.sankey,parent:X,interactionState:X.interactionState,flow:$.flow}}function E(){return function(X){if(X.link.circular)return re=($=X.link).width/2,H=$.circularPathData,"top"===$.circularLinkType?"M "+H.targetX+" "+(H.targetY+re)+" L"+H.rightInnerExtent+" "+(H.targetY+re)+"A"+(H.rightLargeArcRadius+re)+" "+(H.rightSmallArcRadius+re)+" 0 0 1 "+(H.rightFullExtent-re)+" "+(H.targetY-H.rightSmallArcRadius)+"L"+(H.rightFullExtent-re)+" "+H.verticalRightInnerExtent+"A"+(H.rightLargeArcRadius+re)+" "+(H.rightLargeArcRadius+re)+" 0 0 1 "+H.rightInnerExtent+" "+(H.verticalFullExtent-re)+"L"+H.leftInnerExtent+" "+(H.verticalFullExtent-re)+"A"+(H.leftLargeArcRadius+re)+" "+(H.leftLargeArcRadius+re)+" 0 0 1 "+(H.leftFullExtent+re)+" "+H.verticalLeftInnerExtent+"L"+(H.leftFullExtent+re)+" "+(H.sourceY-H.leftSmallArcRadius)+"A"+(H.leftLargeArcRadius+re)+" "+(H.leftSmallArcRadius+re)+" 0 0 1 "+H.leftInnerExtent+" "+(H.sourceY+re)+"L"+H.sourceX+" "+(H.sourceY+re)+"L"+H.sourceX+" "+(H.sourceY-re)+"L"+H.leftInnerExtent+" "+(H.sourceY-re)+"A"+(H.leftLargeArcRadius-re)+" "+(H.leftSmallArcRadius-re)+" 0 0 0 "+(H.leftFullExtent-re)+" "+(H.sourceY-H.leftSmallArcRadius)+"L"+(H.leftFullExtent-re)+" "+H.verticalLeftInnerExtent+"A"+(H.leftLargeArcRadius-re)+" "+(H.leftLargeArcRadius-re)+" 0 0 0 "+H.leftInnerExtent+" "+(H.verticalFullExtent+re)+"L"+H.rightInnerExtent+" "+(H.verticalFullExtent+re)+"A"+(H.rightLargeArcRadius-re)+" "+(H.rightLargeArcRadius-re)+" 0 0 0 "+(H.rightFullExtent+re)+" "+H.verticalRightInnerExtent+"L"+(H.rightFullExtent+re)+" "+(H.targetY-H.rightSmallArcRadius)+"A"+(H.rightLargeArcRadius-re)+" "+(H.rightSmallArcRadius-re)+" 0 0 0 "+H.rightInnerExtent+" "+(H.targetY-re)+"L"+H.targetX+" "+(H.targetY-re)+"Z":"M "+H.targetX+" "+(H.targetY-re)+" L"+H.rightInnerExtent+" "+(H.targetY-re)+"A"+(H.rightLargeArcRadius+re)+" "+(H.rightSmallArcRadius+re)+" 0 0 0 "+(H.rightFullExtent-re)+" "+(H.targetY+H.rightSmallArcRadius)+"L"+(H.rightFullExtent-re)+" "+H.verticalRightInnerExtent+"A"+(H.rightLargeArcRadius+re)+" "+(H.rightLargeArcRadius+re)+" 0 0 0 "+H.rightInnerExtent+" "+(H.verticalFullExtent+re)+"L"+H.leftInnerExtent+" "+(H.verticalFullExtent+re)+"A"+(H.leftLargeArcRadius+re)+" "+(H.leftLargeArcRadius+re)+" 0 0 0 "+(H.leftFullExtent+re)+" "+H.verticalLeftInnerExtent+"L"+(H.leftFullExtent+re)+" "+(H.sourceY+H.leftSmallArcRadius)+"A"+(H.leftLargeArcRadius+re)+" "+(H.leftSmallArcRadius+re)+" 0 0 0 "+H.leftInnerExtent+" "+(H.sourceY-re)+"L"+H.sourceX+" "+(H.sourceY-re)+"L"+H.sourceX+" "+(H.sourceY+re)+"L"+H.leftInnerExtent+" "+(H.sourceY+re)+"A"+(H.leftLargeArcRadius-re)+" "+(H.leftSmallArcRadius-re)+" 0 0 1 "+(H.leftFullExtent-re)+" "+(H.sourceY+H.leftSmallArcRadius)+"L"+(H.leftFullExtent-re)+" "+H.verticalLeftInnerExtent+"A"+(H.leftLargeArcRadius-re)+" "+(H.leftLargeArcRadius-re)+" 0 0 1 "+H.leftInnerExtent+" "+(H.verticalFullExtent-re)+"L"+H.rightInnerExtent+" "+(H.verticalFullExtent-re)+"A"+(H.rightLargeArcRadius-re)+" "+(H.rightLargeArcRadius-re)+" 0 0 1 "+(H.rightFullExtent+re)+" "+H.verticalRightInnerExtent+"L"+(H.rightFullExtent+re)+" "+(H.targetY+H.rightSmallArcRadius)+"A"+(H.rightLargeArcRadius-re)+" "+(H.rightSmallArcRadius-re)+" 0 0 1 "+H.rightInnerExtent+" "+(H.targetY+re)+"L"+H.targetX+" "+(H.targetY+re)+"Z";var $,re,H,U=X.link.source.x1,G=X.link.target.x0,ie=m(U,G),q=ie(.5),ee=ie(.5),te=X.link.y0-X.link.width/2,se=X.link.y0+X.link.width/2,ue=X.link.y1-X.link.width/2,de=X.link.y1+X.link.width/2;return"M"+U+","+te+"C"+q+","+te+" "+ee+","+ue+" "+G+","+ue+"L"+G+","+de+"C"+ee+","+de+" "+q+","+se+" "+U+","+se+"Z"}}function I(X,$){var re=n($.color),H=r.nodePadAcross,U=X.nodePad/2;$.dx=$.x1-$.x0,$.dy=$.y1-$.y0;var G=$.dx,ie=Math.max(.5,$.dy),q="node_"+$.pointNumber;return $.group&&(q=p.randstr()),$.trace=X.trace,$.curveNumber=X.trace.index,{index:$.pointNumber,key:q,partOfGroup:$.partOfGroup||!1,group:$.group,traceId:X.key,trace:X.trace,node:$,nodePad:X.nodePad,nodeLineColor:X.nodeLineColor,nodeLineWidth:X.nodeLineWidth,textFont:X.textFont,size:X.horizontal?X.height:X.width,visibleWidth:Math.ceil(G),visibleHeight:ie,zoneX:-H,zoneY:-U,zoneWidth:G+2*H,zoneHeight:ie+2*U,labelY:X.horizontal?$.dy/2+1:$.dx/2+1,left:1===$.originalLayer,sizeAcross:X.width,forceLayouts:X.forceLayouts,horizontal:X.horizontal,darkBackground:re.getBrightness()<=128,tinyColorHue:a.tinyRGB(re),tinyColorAlpha:re.getAlpha(),valueFormat:X.valueFormat,valueSuffix:X.valueSuffix,sankey:X.sankey,graph:X.graph,arrangement:X.arrangement,uniqueNodeLabelPathId:[X.guid,X.key,q].join("_"),interactionState:X.interactionState,figure:X}}function C(X){X.attr("transform",function($){return u($.node.x0.toFixed(3),$.node.y0.toFixed(3))})}function R(X){X.call(C)}function O(X,$){X.call(R),$.attr("d",E())}function D(X){X.attr("width",function($){return $.node.x1-$.node.x0}).attr("height",function($){return $.visibleHeight})}function L(X){return X.link.width>1||X.linkLineWidth>0}function B(X){return u(X.translateX,X.translateY)+(X.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function j(X,$,re){X.on(".basic",null).on("mouseover.basic",function(H){H.interactionState.dragInProgress||H.partOfGroup||(re.hover(this,H,$),H.interactionState.hovered=[this,H])}).on("mousemove.basic",function(H){H.interactionState.dragInProgress||H.partOfGroup||(re.follow(this,H),H.interactionState.hovered=[this,H])}).on("mouseout.basic",function(H){H.interactionState.dragInProgress||H.partOfGroup||(re.unhover(this,H,$),H.interactionState.hovered=!1)}).on("click.basic",function(H){H.interactionState.hovered&&(re.unhover(this,H,$),H.interactionState.hovered=!1),H.interactionState.dragInProgress||H.partOfGroup||re.select(this,H,$)})}function W(X,$,re,H){var U=w.behavior.drag().origin(function(G){return{x:G.node.x0+G.visibleWidth/2,y:G.node.y0+G.visibleHeight/2}}).on("dragstart",function(G){if("fixed"!==G.arrangement&&(p.ensureSingle(H._fullLayout._infolayer,"g","dragcover",function(q){H._fullLayout._dragCover=q}),p.raiseToTop(this),G.interactionState.dragInProgress=G.node,Q(G.node),G.interactionState.hovered&&(re.nodeEvents.unhover.apply(0,G.interactionState.hovered),G.interactionState.hovered=!1),"snap"===G.arrangement)){var ie=G.traceId+"|"+G.key;G.forceLayouts[ie]?G.forceLayouts[ie].alpha(1):function(q,ee,te,se){!function(de){for(var he=0;he<de.length;he++)de[he].y=(de[he].y0+de[he].y1)/2,de[he].x=(de[he].x0+de[he].x1)/2}(te.graph.nodes);var he,xe,ge,ue=te.graph.nodes.filter(function(de){return de.originalX===te.node.originalX}).filter(function(de){return!de.partOfGroup});te.forceLayouts[ee]=g.forceSimulation(ue).alphaDecay(0).force("collide",g.forceCollide().radius(function(de){return de.dy/2+te.nodePad/2}).strength(1).iterations(r.forceIterations)).force("constrain",(he=ee,xe=ue,ge=te,function(){for(var _e=0,Ce=0;Ce<xe.length;Ce++){var Le=xe[Ce];Le===ge.interactionState.dragInProgress?(Le.x=Le.lastDraggedX,Le.y=Le.lastDraggedY):(Le.vx=(Le.originalX-Le.x)/r.forceTicksPerFrame,Le.y=Math.min(ge.size-Le.dy/2,Math.max(Le.dy/2,Le.y))),_e=Math.max(_e,Math.abs(Le.vx),Math.abs(Le.vy))}!ge.interactionState.dragInProgress&&_e<.1&&ge.forceLayouts[he].alpha()>0&&ge.forceLayouts[he].alpha(0)})).stop()}(0,ie,G),q=X,ee=$,te=G,se=ie,ue=H,window.requestAnimationFrame(function de(){var he;for(he=0;he<r.forceTicksPerFrame;he++)te.forceLayouts[se].tick();if(function(ge){for(var _e=0;_e<ge.length;_e++)ge[_e].y0=ge[_e].y-ge[_e].dy/2,ge[_e].y1=ge[_e].y0+ge[_e].dy,ge[_e].x0=ge[_e].x-ge[_e].dx/2,ge[_e].x1=ge[_e].x0+ge[_e].dx}(te.graph.nodes),te.sankey.update(te.graph),O(q.filter(ne(te)),ee),te.forceLayouts[se].alpha()>0)window.requestAnimationFrame(de);else{var xe=te.node.originalX;te.node.x0=xe-te.visibleWidth/2,te.node.x1=xe+te.visibleWidth/2,Y(te,ue)}})}var q,ee,te,se,ue}).on("drag",function(G){if("fixed"!==G.arrangement){var ie=w.event.x,q=w.event.y;"snap"===G.arrangement?(G.node.x0=ie-G.visibleWidth/2,G.node.x1=ie+G.visibleWidth/2,G.node.y0=q-G.visibleHeight/2,G.node.y1=q+G.visibleHeight/2):("freeform"===G.arrangement&&(G.node.x0=ie-G.visibleWidth/2,G.node.x1=ie+G.visibleWidth/2),q=Math.max(0,Math.min(G.size-G.visibleHeight/2,q)),G.node.y0=q-G.visibleHeight/2,G.node.y1=q+G.visibleHeight/2),Q(G.node),"snap"!==G.arrangement&&(G.sankey.update(G.graph),O(X.filter(ne(G)),$))}}).on("dragend",function(G){if("fixed"!==G.arrangement){G.interactionState.dragInProgress=!1;for(var ie=0;ie<G.node.childrenNodes.length;ie++)G.node.childrenNodes[ie].x=G.node.x,G.node.childrenNodes[ie].y=G.node.y;"snap"!==G.arrangement&&Y(G,H)}});X.on(".drag",null).call(U)}function Y(X,$){for(var re=[],H=[],U=0;U<X.graph.nodes.length;U++){var ie=(X.graph.nodes[U].y0+X.graph.nodes[U].y1)/2;re.push((X.graph.nodes[U].x0+X.graph.nodes[U].x1)/2/X.figure.width),H.push(ie/X.figure.height)}o.call("_guiRestyle",$,{"node.x":[re],"node.y":[H]},X.trace.index).then(function(){$._fullLayout._dragCover&&$._fullLayout._dragCover.remove()})}function Q(X){X.lastDraggedX=X.x0+X.dx/2,X.lastDraggedY=X.y0+X.dy/2}function ne(X){return function($){return $.node.originalX===X.node.originalX}}oe.exports=function(X,$,re,H,U){var G=!1;p.ensureSingle(X._fullLayout._infolayer,"g","first-render",function(){G=!0});var ie=X._fullLayout._dragCover,q=re.filter(function(ge){return h(ge).trace.visible}).map(M.bind(null,H)),ee=$.selectAll("."+r.cn.sankey).data(q,f);ee.exit().remove(),ee.enter().append("g").classed(r.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",B),ee.each(function(ge,_e){X._fullData[_e]._sankey=ge;var Ce="bgsankey-"+ge.trace.uid+"-"+_e;p.ensureSingle(X._fullLayout._draggers,"rect",Ce),X._fullData[_e]._bgRect=w.select("."+Ce),X._fullData[_e]._bgRect.style("pointer-events","all").attr("width",ge.width).attr("height",ge.height).attr("x",ge.translateX).attr("y",ge.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ee.transition().ease(r.ease).duration(r.duration).attr("transform",B);var te=ee.selectAll("."+r.cn.sankeyLinks).data(l,f);te.enter().append("g").classed(r.cn.sankeyLinks,!0).style("fill","none");var se=te.selectAll("."+r.cn.sankeyLink).data(function(ge){return ge.graph.links.filter(function(_e){return _e.value}).map(A.bind(null,ge))},f);se.enter().append("path").classed(r.cn.sankeyLink,!0).call(j,ee,U.linkEvents),se.style("stroke",function(ge){return L(ge)?a.tinyRGB(n(ge.linkLineColor)):ge.tinyColorHue}).style("stroke-opacity",function(ge){return L(ge)?a.opacity(ge.linkLineColor):ge.tinyColorAlpha}).style("fill",function(ge){return ge.tinyColorHue}).style("fill-opacity",function(ge){return ge.tinyColorAlpha}).style("stroke-width",function(ge){return L(ge)?ge.linkLineWidth:1}).attr("d",E()),se.style("opacity",function(){return X._context.staticPlot||G||ie?1:0}).transition().ease(r.ease).duration(r.duration).style("opacity",1),se.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var ue=ee.selectAll("."+r.cn.sankeyNodeSet).data(l,f);ue.enter().append("g").classed(r.cn.sankeyNodeSet,!0),ue.style("cursor",function(ge){switch(ge.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var de=ue.selectAll("."+r.cn.sankeyNode).data(function(ge){var _e=ge.graph.nodes;return function(Ce){var Le,Ie=[];for(Le=0;Le<Ce.length;Le++)Ce[Le].originalX=(Ce[Le].x0+Ce[Le].x1)/2,Ce[Le].originalY=(Ce[Le].y0+Ce[Le].y1)/2,-1===Ie.indexOf(Ce[Le].originalX)&&Ie.push(Ce[Le].originalX);for(Ie.sort(function(Be,ve){return Be-ve}),Le=0;Le<Ce.length;Le++)Ce[Le].originalLayerIndex=Ie.indexOf(Ce[Le].originalX),Ce[Le].originalLayer=Ce[Le].originalLayerIndex/(Ie.length-1)}(_e),_e.map(I.bind(null,ge))},f);de.enter().append("g").classed(r.cn.sankeyNode,!0).call(C).style("opacity",function(ge){return!X._context.staticPlot&&!G||ge.partOfGroup?0:1}),de.call(j,ee,U.nodeEvents).call(W,se,U,X),de.transition().ease(r.ease).duration(r.duration).call(C).style("opacity",function(ge){return ge.partOfGroup?0:1}),de.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var he=de.selectAll("."+r.cn.nodeRect).data(l);he.enter().append("rect").classed(r.cn.nodeRect,!0).call(D),he.style("stroke-width",function(ge){return ge.nodeLineWidth}).style("stroke",function(ge){return a.tinyRGB(n(ge.nodeLineColor))}).style("stroke-opacity",function(ge){return a.opacity(ge.nodeLineColor)}).style("fill",function(ge){return ge.tinyColorHue}).style("fill-opacity",function(ge){return ge.tinyColorAlpha}),he.transition().ease(r.ease).duration(r.duration).call(D);var xe=de.selectAll("."+r.cn.nodeLabel).data(l);xe.enter().append("text").classed(r.cn.nodeLabel,!0).style("cursor","default"),xe.attr("data-notex",1).text(function(ge){return ge.node.label}).each(function(ge){var _e=w.select(this);t.font(_e,ge.textFont),d.convertToTspans(_e,X)}).style("text-shadow",d.makeTextShadow(X._fullLayout.paper_bgcolor)).attr("text-anchor",function(ge){return ge.horizontal&&ge.left?"end":"start"}).attr("transform",function(ge){var _e=w.select(this),Ce=d.lineCount(_e),Ie=ge.nodeLineWidth/2+3,Be=((ge.horizontal?ge.visibleHeight:ge.visibleWidth)-ge.textFont.size*((Ce-1)*k-s))/2;ge.horizontal&&(ge.left?Ie=-Ie:Ie+=ge.visibleWidth);var ve=ge.horizontal?"":"scale(-1,1)"+i(90);return u(ge.horizontal?Ie:Be,ge.horizontal?Be:Ie)+ve}),xe.transition().ease(r.ease).duration(r.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":920,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],925:[function(x,oe,ae){"use strict";oe.exports=function(g,m){for(var w=[],y=g.cd[0].trace,e=y._sankey.graph.nodes,r=0;r<e.length;r++){var n=e[r];if(!n.partOfGroup){var a=[(n.x0+n.x1)/2,(n.y0+n.y1)/2];"v"===y.orientation&&a.reverse(),m&&m.contains(a,!1,r,g)&&w.push({pointNumber:n.pointNumber})}}return w}},{}],926:[function(x,oe,ae){"use strict";var g=x("../../lib");oe.exports=function(m,w){for(var y=0;y<m.length;y++)m[y].i=y;g.mergeArray(w.text,m,"tx"),g.mergeArray(w.texttemplate,m,"txt"),g.mergeArray(w.hovertext,m,"htx"),g.mergeArray(w.customdata,m,"data"),g.mergeArray(w.textposition,m,"tp"),w.textfont&&(g.mergeArrayCastPositive(w.textfont.size,m,"ts"),g.mergeArray(w.textfont.color,m,"tc"),g.mergeArray(w.textfont.family,m,"tf"));var e=w.marker;if(e){g.mergeArrayCastPositive(e.size,m,"ms"),g.mergeArrayCastPositive(e.opacity,m,"mo"),g.mergeArray(e.symbol,m,"mx"),g.mergeArray(e.color,m,"mc");var r=e.line;e.line&&(g.mergeArray(r.color,m,"mlc"),g.mergeArrayCastPositive(r.width,m,"mlw"));var n=e.gradient;n&&"none"!==n.type&&(g.mergeArray(n.type,m,"mgt"),g.mergeArray(n.color,m,"mgc"))}}},{"../../lib":503}],927:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=x("../../plots/template_attributes").texttemplateAttrs,w=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../../components/colorscale/attributes"),e=x("../../plots/font_attributes"),r=x("../../components/drawing/attributes").dash,n=x("../../components/drawing/attributes").pattern,a=x("../../components/drawing"),t=x("./constants"),p=x("../../lib/extend").extendFlat;oe.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:g("x"),yhoverformat:g("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:m({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:w({},{keys:t.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:p({},r,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:n,marker:p({symbol:{valType:"enumerated",values:a.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:p({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},y("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},y("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":931}],928:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib"),w=x("../../plots/cartesian/axes"),y=x("../../plots/cartesian/align_period"),e=x("../../constants/numerical").BADNUM,r=x("./subtypes"),n=x("./colorscale_calc"),a=x("./arrays_to_calcdata"),t=x("./calc_selection");function p(l,h,d,o,_,s,k){var M=h._length,A=l._fullLayout,E=d._id,I=o._id,C=A._firstScatter[c(h)]===h.uid,R=(f(h,A,d,o)||{}).orientation,O=h.fill;d._minDtick=0,o._minDtick=0;var D={padded:!0},L={padded:!0};k&&(D.ppad=L.ppad=k);var B=M<2||_[0]!==_[M-1]||s[0]!==s[M-1];B&&("tozerox"===O||"tonextx"===O&&(C||"h"===R))?D.tozero=!0:(h.error_y||{}).visible||"tonexty"!==O&&"tozeroy"!==O&&(r.hasMarkers(h)||r.hasText(h))||(D.padded=!1,D.ppad=0),B&&("tozeroy"===O||"tonexty"===O&&(C||"v"===R))?L.tozero=!0:"tonextx"!==O&&"tozerox"!==O||(L.padded=!1),E&&(h._extremes[E]=w.findExtremes(d,_,D)),I&&(h._extremes[I]=w.findExtremes(o,s,L))}function u(l,h){if(r.hasMarkers(l)){var d,o=l.marker,_=1.6*(l.marker.sizeref||1);if(d="area"===l.marker.sizemode?function(E){return Math.max(Math.sqrt((E||0)/_),3)}:function(E){return Math.max((E||0)/_,3)},m.isArrayOrTypedArray(o.size)){var s={type:"linear"};w.setConvert(s);for(var k=s.makeCalcdata(l.marker,"size"),M=new Array(h),A=0;A<h;A++)M[A]=d(k[A]);return M}return d(o.size)}}function i(l,h){var d=c(h),o=l._firstScatter;o[d]||(o[d]=h.uid)}function c(l){var h=l.stackgroup;return l.xaxis+l.yaxis+l.type+(h?"-"+h:"")}function f(l,h,d,o){var _=l.stackgroup;if(_){var s=h._scatterStackOpts[d._id+o._id][_],k="v"===s.orientation?o:d;return"linear"===k.type||"log"===k.type?s:void 0}}oe.exports={calc:function(l,h){var d,o,_,s,k,M,A=l._fullLayout,E=w.getFromId(l,h.xaxis||"x"),I=w.getFromId(l,h.yaxis||"y"),C=E.makeCalcdata(h,"x"),R=I.makeCalcdata(h,"y"),O=y(h,E,"x",C),D=y(h,I,"y",R),L=O.vals,B=D.vals,j=h._length,W=new Array(j),Y=h.ids,Q=f(h,A,E,I),ne=!1;i(A,h);var X,$="x",re="y";Q?(m.pushUnique(Q.traceIndices,h._expandedIndex),(d="v"===Q.orientation)?(re="s",X="x"):($="s",X="y"),k="interpolate"===Q.stackgaps):p(l,h,E,I,L,B,u(h,j));var H=!!h.xperiodalignment,U=!!h.yperiodalignment;for(o=0;o<j;o++){var G=W[o]={},ie=g(L[o]),q=g(B[o]);ie&&q?(G[$]=L[o],G[re]=B[o],H&&(G.orig_x=C[o],G.xEnd=O.ends[o],G.xStart=O.starts[o]),U&&(G.orig_y=R[o],G.yEnd=D.ends[o],G.yStart=D.starts[o])):Q&&(d?ie:q)?(G[X]=d?L[o]:B[o],G.gap=!0,k?(G.s=e,ne=!0):G.s=0):G[$]=G[re]=e,Y&&(G.id=String(Y[o]))}if(a(W,h),n(l,h),t(W,h),Q){for(o=0;o<W.length;)W[o][X]===e?W.splice(o,1):o++;if(m.sort(W,function(ue,de){return ue[X]-de[X]||ue.i-de.i}),ne){for(o=0;o<W.length-1&&W[o].gap;)o++;for((M=W[o].s)||(M=W[o].s=0),_=0;_<o;_++)W[_].s=M;for(s=W.length-1;s>o&&W[s].gap;)s--;for(M=W[s].s,_=W.length-1;_>s;_--)W[_].s=M;for(;o<s;)if(W[++o].gap){for(_=o+1;W[_].gap;)_++;for(var ee=W[o-1][X],te=W[o-1].s,se=(W[_].s-te)/(W[_][X]-ee);o<_;)W[o].s=te+(W[o][X]-ee)*se,o++}}}return W},calcMarkerSize:u,calcAxisExpansion:p,setFirstScatter:i,getStackOpts:f}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":926,"./calc_selection":929,"./colorscale_calc":930,"./subtypes":952,"fast-isnumeric":190}],929:[function(x,oe,ae){"use strict";var g=x("../../lib");oe.exports=function(m,w){g.isArrayOrTypedArray(w.selectedpoints)&&g.tagSelected(m,w)}},{"../../lib":503}],930:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale/helpers").hasColorscale,m=x("../../components/colorscale/calc"),w=x("./subtypes");oe.exports=function(y,e){w.hasLines(e)&&g(e,"line")&&m(y,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),w.hasMarkers(e)&&(g(e,"marker")&&m(y,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),g(e,"marker.line")&&m(y,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":952}],931:[function(x,oe,ae){"use strict";oe.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],932:[function(x,oe,ae){"use strict";var g=x("./calc");function m(w,y,e,r,n,a,t){n[r]=!0;var i,c,l,h,d,p={i:null,gap:!0,s:0};if(p[t]=e,w.splice(y,0,p),y&&e===w[y-1][t]){var u=w[y-1];p.s=u.s,p.i=u.i,p.gap=u.gap}else a&&(p.s=(l=t,h=(i=w)[(c=y)-1],(d=i[c+1])?h?h.s+(d.s-h.s)*(e-h[l])/(d[l]-h[l]):d.s:h.s));y||(w[0].t=w[1].t,w[0].trace=w[1].trace,delete w[1].t,delete w[1].trace)}oe.exports=function(w,y){var e=y.xaxis,r=y.yaxis,a=w._fullLayout._scatterStackOpts[e._id+r._id];if(a){var t,p,u,i,c,f,l,h,d,o,_,s,k,M,A,E=w.calcdata;for(var I in a){var C=(o=a[I]).traceIndices;if(C.length){for(_="interpolate"===o.stackgaps,s=o.groupnorm,"v"===o.orientation?(k="x",M="y"):(k="y",M="x"),A=new Array(C.length),t=0;t<A.length;t++)A[t]=!1;f=E[C[0]];var R=new Array(f.length);for(t=0;t<f.length;t++)R[t]=f[t][k];for(t=1;t<C.length;t++){for(c=E[C[t]],p=u=0;p<c.length;p++){for(l=c[p][k];l>R[u]&&u<R.length;u++)m(c,p,R[u],t,A,_,k),p++;if(l!==R[u]){for(i=0;i<t;i++)m(E[C[i]],u,l,i,A,_,k);R.splice(u,0,l)}u++}for(;u<R.length;u++)m(c,p,R[u],t,A,_,k),p++}var O=R.length;for(p=0;p<f.length;p++){for(h=f[p][M]=f[p].s,t=1;t<C.length;t++)(c=E[C[t]])[0].trace._rawLength=c[0].trace._length,c[0].trace._length=O,c[p][M]=h+=c[p].s;if(s)for(d=("fraction"===s?h:h/100)||1,t=0;t<C.length;t++){var D=E[C[t]][p];D[M]/=d,D.sNorm=D.s/d}}for(t=0;t<C.length;t++){var L=(c=E[C[t]])[0].trace,B=g.calcMarkerSize(L,L._rawLength),j=Array.isArray(B);if(B&&A[t]||j){var W=B;for(B=new Array(O),p=0;p<O;p++)B[p]=c[p].gap?0:j?W[c[p].i]:W}var Y=new Array(O),Q=new Array(O);for(p=0;p<O;p++)Y[p]=c[p].x,Q[p]=c[p].y;g.calcAxisExpansion(w,L,e,r,Y,Q,B),c[0].t.orientation=o.orientation}}}}}},{"./calc":928}],933:[function(x,oe,ae){"use strict";oe.exports=function(g){for(var m=0;m<g.length;m++){var w=g[m];if("scatter"===w.type){var y=w.fill;if("none"!==y&&"toself"!==y&&(w.opacity=void 0,"tonexty"===y||"tonextx"===y))for(var e=m-1;e>=0;e--){var r=g[e];if("scatter"===r.type&&r.xaxis===w.xaxis&&r.yaxis===w.yaxis){r.opacity=void 0;break}}}}}},{}],934:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../registry"),w=x("./attributes"),y=x("./constants"),e=x("./subtypes"),r=x("./xy_defaults"),n=x("./period_defaults"),a=x("./stack_defaults"),t=x("./marker_defaults"),p=x("./line_defaults"),u=x("./line_shape_defaults"),i=x("./text_defaults"),c=x("./fillcolor_defaults"),f=x("../../lib").coercePattern;oe.exports=function(l,h,d,o){function _(R,O){return g.coerce(l,h,w,R,O)}var s=r(l,h,o,_);if(s||(h.visible=!1),h.visible){n(l,h,o,_),_("xhoverformat"),_("yhoverformat");var k=a(l,h,o,_),M=!k&&s<y.PTS_LINESONLY?"lines+markers":"lines";_("text"),_("hovertext"),_("mode",M),e.hasLines(h)&&(p(l,h,d,o,_),u(l,h,_),_("connectgaps"),_("line.simplify")),e.hasMarkers(h)&&t(l,h,d,o,_,{gradient:!0}),e.hasText(h)&&(_("texttemplate"),i(l,h,o,_));var A=[];(e.hasMarkers(h)||e.hasText(h))&&(_("cliponaxis"),_("marker.maxdisplayed"),A.push("points")),_("fill",k?k.fillDflt:"none"),"none"!==h.fill&&(c(l,h,d,_),e.hasLines(h)||u(l,h,_),f(_,"fillpattern",h.fillcolor,!1));var E=(h.line||{}).color,I=(h.marker||{}).color;"tonext"!==h.fill&&"toself"!==h.fill||A.push("fills"),_("hoveron",A.join("+")||"points"),"fills"!==h.hoveron&&_("hovertemplate");var C=m.getComponentMethod("errorbars","supplyDefaults");C(l,h,E||I||d,{axis:"y"}),C(l,h,E||I||d,{axis:"x",inherit:"y"}),g.coerceSelectionMarkerOpacity(h,_)}}},{"../../lib":503,"../../registry":638,"./attributes":927,"./constants":931,"./fillcolor_defaults":935,"./line_defaults":940,"./line_shape_defaults":942,"./marker_defaults":946,"./period_defaults":947,"./stack_defaults":950,"./subtypes":952,"./text_defaults":953,"./xy_defaults":954}],935:[function(x,oe,ae){"use strict";var g=x("../../components/color"),m=x("../../lib").isArrayOrTypedArray;oe.exports=function(w,y,e,r){var n=!1;if(y.marker){var a=y.marker.color,t=(y.marker.line||{}).color;a&&!m(a)?n=a:t&&!m(t)&&(n=t)}r("fillcolor",g.addOpacity((y.line||{}).color||n||e,.5))}},{"../../components/color":366,"../../lib":503}],936:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes");oe.exports=function(m,w,y){var e={},r={_fullLayout:y},n=g.getFromTrace(r,w,"x"),a=g.getFromTrace(r,w,"y");return e.xLabel=g.tickText(n,n.c2l(m.x),!0).text,e.yLabel=g.tickText(a,a.c2l(m.y),!0).text,e}},{"../../plots/cartesian/axes":554}],937:[function(x,oe,ae){"use strict";var g=x("../../components/color"),m=x("./subtypes");oe.exports=function(w,y){var e,r;if("lines"===w.mode)return(e=w.line.color)&&g.opacity(e)?e:w.fillcolor;if("none"===w.mode)return w.fill?w.fillcolor:"";var n=y.mcc||(w.marker||{}).color,a=y.mlcc||((w.marker||{}).line||{}).color;return(r=n&&g.opacity(n)?n:a&&g.opacity(a)&&(y.mlw||((w.marker||{}).line||{}).width)?a:"")?g.opacity(r)<.3?g.addOpacity(r,.3):r:(e=(w.line||{}).color)&&g.opacity(e)&&m.hasLines(w)&&w.line.width?e:w.fillcolor}},{"../../components/color":366,"./subtypes":952}],938:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/fx"),w=x("../../registry"),y=x("./get_trace_color"),e=x("../../components/color"),r=g.fillText;oe.exports=function(n,a,t,p){var u=n.cd,i=u[0].trace,c=n.xa,f=n.ya,l=c.c2p(a),h=f.c2p(t),d=[l,h],o=i.hoveron||"",_=-1!==i.mode.indexOf("markers")?3:.5,s=!!i.xperiodalignment,k=!!i.yperiodalignment;if(-1!==o.indexOf("points")){var M=function(he){var xe=Math.max(_,he.mrc||0),ge=c.c2p(he.x)-l,_e=f.c2p(he.y)-h;return Math.max(Math.sqrt(ge*ge+_e*_e)-xe,1-_/xe)},A=m.getDistanceFunction(p,function(he){if(s){var xe=c.c2p(he.xStart),ge=c.c2p(he.xEnd);return l>=Math.min(xe,ge)&&l<=Math.max(xe,ge)?0:1/0}var _e=Math.max(3,he.mrc||0),Ce=1-1/_e,Le=Math.abs(c.c2p(he.x)-l);return Le<_e?Ce*Le/_e:Le-_e+Ce},function(he){if(k){var xe=f.c2p(he.yStart),ge=f.c2p(he.yEnd);return h>=Math.min(xe,ge)&&h<=Math.max(xe,ge)?0:1/0}var _e=Math.max(3,he.mrc||0),Ce=1-1/_e,Le=Math.abs(f.c2p(he.y)-h);return Le<_e?Ce*Le/_e:Le-_e+Ce},M);if(m.getClosest(u,A,n),!1!==n.index){var E=u[n.index],I=c.c2p(E.x,!0),C=f.c2p(E.y,!0),R=E.mrc||1;n.index=E.i;var O=u[0].t.orientation,D=O&&(E.sNorm||E.s),L="h"===O?D:void 0!==E.orig_x?E.orig_x:E.x,B="v"===O?D:void 0!==E.orig_y?E.orig_y:E.y;return g.extendFlat(n,{color:y(i,E),x0:I-R,x1:I+R,xLabelVal:L,y0:C-R,y1:C+R,yLabelVal:B,spikeDistance:M(E),hovertemplate:i.hovertemplate}),r(E,i,n),w.getComponentMethod("errorbars","hoverInfo")(E,i,n),[n]}}if(-1!==o.indexOf("fills")&&i._polygons){var j,W,Y,Q,ne,X,re,H,U=i._polygons,G=[],ie=!1,q=1/0,ee=-1/0,te=1/0,se=-1/0;for(j=0;j<U.length;j++)(Y=U[j]).contains(d)&&(ie=!ie,G.push(Y),te=Math.min(te,Y.ymin),se=Math.max(se,Y.ymax));if(ie){var ue=((te=Math.max(te,0))+(se=Math.min(se,f._length)))/2;for(j=0;j<G.length;j++)for(Q=G[j].pts,W=1;W<Q.length;W++)(re=Q[W-1][1])>ue!=(H=Q[W][1])>=ue&&(X=Q[W-1][0],H-re&&(ne=X+(Q[W][0]-X)*(ue-re)/(H-re),q=Math.min(q,ne),ee=Math.max(ee,ne)));q=Math.max(q,0),ee=Math.min(ee,c._length);var de=e.defaultLine;return e.opacity(i.fillcolor)?de=i.fillcolor:e.opacity((i.line||{}).color)&&(de=i.line.color),g.extendFlat(n,{distance:n.maxHoverDistance,x0:q,x1:ee,y0:ue,y1:ue,color:de,hovertemplate:!1}),delete n.index,n.text=i.text&&!Array.isArray(i.text)?String(i.text):i.name,[n]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":937}],939:[function(x,oe,ae){"use strict";var g=x("./subtypes");oe.exports={hasLines:g.hasLines,hasMarkers:g.hasMarkers,hasText:g.hasText,isBubble:g.isBubble,attributes:x("./attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("./cross_trace_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./cross_trace_calc"),arraysToCalcdata:x("./arrays_to_calcdata"),plot:x("./plot"),colorbar:x("./marker_colorbar"),formatLabels:x("./format_labels"),style:x("./style").style,styleOnSelect:x("./style").styleOnSelect,hoverPoints:x("./hover"),selectPoints:x("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":926,"./attributes":927,"./calc":928,"./cross_trace_calc":932,"./cross_trace_defaults":933,"./defaults":934,"./format_labels":936,"./hover":938,"./marker_colorbar":945,"./plot":948,"./select":949,"./style":951,"./subtypes":952}],940:[function(x,oe,ae){"use strict";var g=x("../../lib").isArrayOrTypedArray,m=x("../../components/colorscale/helpers").hasColorscale,w=x("../../components/colorscale/defaults");oe.exports=function(y,e,r,n,a,t){var p=(y.marker||{}).color;a("line.color",r),m(y,"line")?w(y,e,n,a,{prefix:"line.",cLetter:"c"}):a("line.color",!g(p)&&p||r),a("line.width"),(t||{}).noDash||a("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],941:[function(x,oe,ae){"use strict";var g=x("../../constants/numerical"),m=g.BADNUM,w=g.LOG_CLIP,y=w+.5,e=w-.5,r=x("../../lib"),n=r.segmentsIntersect,a=r.constrain,t=x("./constants");oe.exports=function(p,u){var i,c,f,l,h,d,o,_,s,k,M,A,E,I,C,R,O,D,L=u.xaxis,B=u.yaxis,j="log"===L.type,W="log"===B.type,Y=L._length,Q=B._length,ne=u.connectGaps,X=u.baseTolerance,$=u.shape,re="linear"===$,H=u.fill&&"none"!==u.fill,U=[],G=t.minTolerance,ie=p.length,q=new Array(ie),ee=0;function te(tt){var ut=p[tt];if(!ut)return!1;var xt=u.linearized?L.l2p(ut.x):L.c2p(ut.x),kt=u.linearized?B.l2p(ut.y):B.c2p(ut.y);if(xt===m){if(j&&(xt=L.c2p(ut.x,!0)),xt===m)return!1;W&&kt===m&&(xt*=Math.abs(L._m*Q*(L._m>0?y:e)/(B._m*Y*(B._m>0?y:e)))),xt*=1e3}if(kt===m){if(W&&(kt=B.c2p(ut.y,!0)),kt===m)return!1;kt*=1e3}return[xt,kt]}function se(tt,ut,xt,kt){var Bt=xt-tt,Rt=kt-ut,ft=.5-tt,lt=.5-ut,Ft=Bt*Bt+Rt*Rt,Jt=Bt*ft+Rt*lt;if(Jt>0&&Jt<Ft){var ln=ft*Rt-lt*Bt;if(ln*ln<Ft)return!0}}function ue(tt,ut){var xt=tt[0]/Y,kt=tt[1]/Q,Bt=Math.max(0,-xt,xt-1,-kt,kt-1);return Bt&&void 0!==O&&se(xt,kt,O,D)&&(Bt=0),Bt&&ut&&se(xt,kt,ut[0]/Y,ut[1]/Q)&&(Bt=0),(1+t.toleranceGrowth*Bt)*X}function de(tt,ut){var xt=tt[0]-ut[0],kt=tt[1]-ut[1];return Math.sqrt(xt*xt+kt*kt)}var he,xe,ge,_e,Ce,Le,Ie,Be=t.maxScreensAway,ve=-Y*Be,Te=Y*(1+Be),Pe=-Q*Be,De=Q*(1+Be),Fe=[[ve,Pe,Te,Pe],[Te,Pe,Te,De],[Te,De,ve,De],[ve,De,ve,Pe]];function Ue(tt){if(tt[0]<ve||tt[0]>Te||tt[1]<Pe||tt[1]>De)return[a(tt[0],ve,Te),a(tt[1],Pe,De)]}function He(tt,ut){return tt[0]===ut[0]&&(tt[0]===ve||tt[0]===Te)||tt[1]===ut[1]&&(tt[1]===Pe||tt[1]===De)||void 0}function Ke(tt,ut,xt){return function(kt,Bt){var Rt=Ue(kt),ft=Ue(Bt),lt=[];if(Rt&&ft&&He(Rt,ft))return lt;Rt&&lt.push(Rt),ft&&lt.push(ft);var Ft=2*r.constrain((kt[tt]+Bt[tt])/2,ut,xt)-((Rt||kt)[tt]+(ft||Bt)[tt]);return Ft&&((Rt&&ft?Ft>0==Rt[tt]>ft[tt]?Rt:ft:Rt||ft)[tt]+=Ft),lt}}function st(tt){var ut=tt[0],xt=tt[1],kt=ut===q[ee-1][0],Bt=xt===q[ee-1][1];if(!kt||!Bt)if(ee>1){var Rt=ut===q[ee-2][0],ft=xt===q[ee-2][1];kt&&(ut===ve||ut===Te)&&Rt?ft?ee--:q[ee-1]=tt:Bt&&(xt===Pe||xt===De)&&ft?Rt?ee--:q[ee-1]=tt:q[ee++]=tt}else q[ee++]=tt}function Ve(tt){q[ee-1][0]!==tt[0]&&q[ee-1][1]!==tt[1]&&st([ge,_e]),st(tt),Ce=null,ge=_e=0}function $e(tt){if(O=tt[0]/Y,D=tt[1]/Q,xe=tt[1]<Pe?Pe:tt[1]>De?De:0,(he=tt[0]<ve?ve:tt[0]>Te?Te:0)||xe){if(ee)if(Ce){var ut=Ie(Ce,tt);ut.length>1&&(Ve(ut[0]),q[ee++]=ut[1])}else Le=Ie(q[ee-1],tt)[0],q[ee++]=Le;else q[ee++]=[he||tt[0],xe||tt[1]];var xt=q[ee-1];he&&xe&&(xt[0]!==he||xt[1]!==xe)?(Ce&&(ge!==he&&_e!==xe?st(ge&&_e?(Rt=(Bt=tt)[0]-(kt=Ce)[0],ft=(Bt[1]-kt[1])/Rt,(kt[1]*Bt[0]-Bt[1]*kt[0])/Rt>0?[ft>0?ve:Te,De]:[ft>0?Te:ve,Pe]):[ge||he,_e||xe]):ge&&_e&&st([ge,_e])),st([he,xe])):ge-he&&_e-xe&&st([he||ge,xe||_e]),Ce=tt,ge=he,_e=xe}else Ce&&Ve(Ie(Ce,tt)[0]),q[ee++]=tt;var kt,Bt,Rt,ft}for("linear"===$||"spline"===$?Ie=function(tt,ut){for(var xt=[],kt=0,Bt=0;Bt<4;Bt++){var Rt=Fe[Bt],ft=n(tt[0],tt[1],ut[0],ut[1],Rt[0],Rt[1],Rt[2],Rt[3]);ft&&(!kt||Math.abs(ft.x-xt[0][0])>1||Math.abs(ft.y-xt[0][1])>1)&&(ft=[ft.x,ft.y],kt&&de(ft,tt)<de(xt[0],tt)?xt.unshift(ft):xt.push(ft),kt++)}return xt}:"hv"===$||"vh"===$?Ie=function(tt,ut){var xt=[],kt=Ue(tt),Bt=Ue(ut);return kt&&Bt&&He(kt,Bt)||(kt&&xt.push(kt),Bt&&xt.push(Bt)),xt}:"hvh"===$?Ie=Ke(0,ve,Te):"vhv"===$&&(Ie=Ke(1,Pe,De)),i=0;i<ie;i++)if(c=te(i)){for(ee=0,Ce=null,$e(c),i++;i<ie;i++){if(!(l=te(i))){if(ne)continue;break}if(re&&u.simplify){var Qe=te(i+1);if(k=de(l,c),H&&(0===ee||ee===ie-1)||!(k<ue(l,Qe)*G)){for(_=[(l[0]-c[0])/k,(l[1]-c[1])/k],h=c,M=k,A=I=C=0,o=!1,f=l,i++;i<p.length;i++){if(d=Qe,Qe=te(i+1),!d){if(ne)continue;break}if(R=(s=[d[0]-c[0],d[1]-c[1]])[0]*_[1]-s[1]*_[0],I=Math.min(I,R),(C=Math.max(C,R))-I>ue(d,Qe))break;f=d,(E=s[0]*_[0]+s[1]*_[1])>M?(M=E,l=d,o=!1):E<A&&(A=E,h=d,o=!0)}if(o?($e(l),f!==h&&$e(h)):(h!==c&&$e(h),f!==l&&$e(l)),$e(f),i>=p.length||!d)break;$e(d),c=d}}else $e(l)}Ce&&st([ge||Ce[0],_e||Ce[1]]),U.push(q.slice(0,ee))}return U}},{"../../constants/numerical":479,"../../lib":503,"./constants":931}],942:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w){"spline"===w("line.shape")&&w("line.smoothing")}},{}],943:[function(x,oe,ae){"use strict";var g={tonextx:1,tonexty:1,tonext:1};oe.exports=function(m,w,y){var e,r,n,a,t,p={},u=!1,i=-1,c=0,f=-1;for(r=0;r<y.length;r++)(n=(e=y[r][0].trace).stackgroup||"")?n in p?t=p[n]:(t=p[n]=c,c++):e.fill in g&&f>=0?t=f:(t=f=c,c++),t<i&&(u=!0),e._groupIndex=i=t;var l=y.slice();u&&l.sort(function(d,o){var _=d[0].trace,s=o[0].trace;return _._groupIndex-s._groupIndex||_.index-s.index});var h={};for(r=0;r<l.length;r++)n=(e=l[r][0].trace).stackgroup||"",!0===e.visible?(e._nexttrace=null,e.fill in g&&(e._prevtrace=(a=h[n])||null,a&&(a._nexttrace=e)),e._ownfill=e.fill&&("tozero"===e.fill.substr(0,6)||"toself"===e.fill||"to"===e.fill.substr(0,2)&&!e._prevtrace),h[n]=e):e._prevtrace=e._nexttrace=e._ownfill=null;return l}},{}],944:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric");oe.exports=function(m,w){w||(w=2);var y=m.marker,e=y.sizeref||1,r=y.sizemin||0,n="area"===y.sizemode?function(a){return Math.sqrt(a/e)}:function(a){return a/e};return function(a){var t=n(a/w);return g(t)&&t>0?Math.max(t,r):0}}},{"fast-isnumeric":190}],945:[function(x,oe,ae){"use strict";oe.exports={container:"marker",min:"cmin",max:"cmax"}},{}],946:[function(x,oe,ae){"use strict";var g=x("../../components/color"),m=x("../../components/colorscale/helpers").hasColorscale,w=x("../../components/colorscale/defaults"),y=x("./subtypes");oe.exports=function(e,r,n,a,t,p){var u=y.isBubble(e),i=(e.line||{}).color;p=p||{},i&&(n=i),t("marker.symbol"),t("marker.opacity",u?.7:1),t("marker.size"),t("marker.color",n),m(e,"marker")&&w(e,r,a,t,{prefix:"marker.",cLetter:"c"}),p.noSelect||(t("selected.marker.color"),t("unselected.marker.color"),t("selected.marker.size"),t("unselected.marker.size")),p.noLine||(t("marker.line.color",i&&!Array.isArray(i)&&r.marker.color!==i?i:u?g.background:g.defaultLine),m(e,"marker.line")&&w(e,r,a,t,{prefix:"marker.line.",cLetter:"c"}),t("marker.line.width",u?1:0)),u&&(t("marker.sizeref"),t("marker.sizemin"),t("marker.sizemode")),p.gradient&&"none"!==t("marker.gradient.type")&&t("marker.gradient.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":952}],947:[function(x,oe,ae){"use strict";var g=x("../../lib").dateTick0,m=x("../../constants/numerical").ONEWEEK;function w(y,e){return g(e,y%m==0?1:0)}oe.exports=function(y,e,r,n,a){if(a||(a={x:!0,y:!0}),a.x){var t=n("xperiod");t&&(n("xperiod0",w(t,e.xcalendar)),n("xperiodalignment"))}if(a.y){var p=n("yperiod");p&&(n("yperiod0",w(p,e.ycalendar)),n("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],948:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../registry"),w=x("../../lib"),y=w.ensureSingle,e=w.identity,r=x("../../components/drawing"),n=x("./subtypes"),a=x("./line_points"),t=x("./link_traces"),p=x("../../lib/polygon").tester;function u(i,c,f,l,h,d,o){var _;!function(Te,Pe,De,Fe,Ue){var He=De.xaxis,Ke=De.yaxis,st=g.extent(w.simpleMap(He.range,He.r2c)),Ve=g.extent(w.simpleMap(Ke.range,Ke.r2c)),$e=Fe[0].trace;if(n.hasMarkers($e)){var Qe=$e.marker.maxdisplayed;if(0!==Qe){var tt=Fe.filter(function(Bt){return Bt.x>=st[0]&&Bt.x<=st[1]&&Bt.y>=Ve[0]&&Bt.y<=Ve[1]}),ut=Math.ceil(tt.length/Qe),xt=0;Ue.forEach(function(Bt,Rt){var ft=Bt[0].trace;n.hasMarkers(ft)&&ft.marker.maxdisplayed>0&&Rt<Pe&&xt++});var kt=Math.round(xt*ut/3+Math.floor(xt/3)*ut/7.1);Fe.forEach(function(Bt){delete Bt.vis}),tt.forEach(function(Bt,Rt){0===Math.round((Rt+kt)%ut)&&(Bt.vis=!0)})}}}(0,c,f,l,h);var s=!!o&&o.duration>0;function k(Te){return s?Te.transition():Te}var M=f.xaxis,A=f.yaxis,E=l[0].trace,I=E.line,C=g.select(d),R=y(C,"g","errorbars"),O=y(C,"g","lines"),D=y(C,"g","points"),L=y(C,"g","text");if(m.getComponentMethod("errorbars","plot")(i,R,f,o),!0===E.visible){var B,j;k(C).style("opacity",E.opacity);var W=E.fill.charAt(E.fill.length-1);"x"!==W&&"y"!==W&&(W=""),l[0][f.isRangePlot?"nodeRangePlot3":"node3"]=C;var Y,Q,ne="",X=[],$=E._prevtrace;$&&(ne=$._prevRevpath||"",j=$._nextFill,X=$._polygons);var re,H,U,G,ie,q,ee,te="",se="",ue=[],de=w.noop;if(B=E._ownFill,n.hasLines(E)||"none"!==E.fill){for(j&&j.datum(l),-1!==["hv","vh","hvh","vhv"].indexOf(I.shape)?(re=r.steps(I.shape),H=r.steps(I.shape.split("").reverse().join(""))):re=H="spline"===I.shape?function(Te){var Pe=Te[Te.length-1];return Te.length>1&&Te[0][0]===Pe[0]&&Te[0][1]===Pe[1]?r.smoothclosed(Te.slice(1),I.smoothing):r.smoothopen(Te,I.smoothing)}:function(Te){return"M"+Te.join("L")},U=function(Te){return H(Te.reverse())},ue=a(l,{xaxis:M,yaxis:A,connectGaps:E.connectgaps,baseTolerance:Math.max(I.width||1,3)/4,shape:I.shape,simplify:I.simplify,fill:E.fill}),ee=E._polygons=new Array(ue.length),_=0;_<ue.length;_++)E._polygons[_]=p(ue[_]);ue.length&&(G=ue[0][0],q=(ie=ue[ue.length-1])[ie.length-1]),de=function(Te){return function(Pe){if(Y=re(Pe),Q=U(Pe),te?W?(te+="L"+Y.substr(1),se=Q+"L"+se.substr(1)):(te+="Z"+Y,se=Q+"Z"+se):(te=Y,se=Q),n.hasLines(E)&&Pe.length>1){var De=g.select(this);if(De.datum(l),Te)k(De.style("opacity",0).attr("d",Y).call(r.lineGroupStyle)).style("opacity",1);else{var Fe=k(De);Fe.attr("d",Y),r.singleLineStyle(l,Fe)}}}}}var he=O.selectAll(".js-line").data(ue);k(he.exit()).style("opacity",0).remove(),he.each(de(!1)),he.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(r.lineGroupStyle).each(de(!0)),r.setClipUrl(he,f.layerClipId,i),ue.length?(B?(B.datum(l),G&&q&&(W?("y"===W?G[1]=q[1]=A.c2p(0,!0):"x"===W&&(G[0]=q[0]=M.c2p(0,!0)),k(B).attr("d","M"+q+"L"+G+"L"+te.substr(1)).call(r.singleFillStyle,i)):k(B).attr("d",te+"Z").call(r.singleFillStyle,i))):j&&("tonext"===E.fill.substr(0,6)&&te&&ne?("tonext"===E.fill?k(j).attr("d",te+"Z"+ne+"Z").call(r.singleFillStyle,i):k(j).attr("d",te+"L"+ne.substr(1)+"Z").call(r.singleFillStyle,i),E._polygons=E._polygons.concat(X)):(ge(j),E._polygons=null)),E._prevRevpath=se,E._prevPolygons=ee):(B?ge(B):j&&ge(j),E._polygons=E._prevRevpath=E._prevPolygons=null),D.datum(l),L.datum(l),function(Te,Pe,De){var Fe,Ue=De[0].trace,He=n.hasMarkers(Ue),Ke=n.hasText(Ue),st=function Be(Te){if(Te.ids)return Ie}(Ue),Ve=ve,$e=ve;if(He||Ke){var Qe=e,tt=Ue.stackgroup,ut=tt&&"infer zero"===i._fullLayout._scatterStackOpts[M._id+A._id][tt].stackgaps;Ue.marker.maxdisplayed||Ue._needsCull?Qe=ut?Ce:_e:tt&&!ut&&(Qe=Le),He&&(Ve=Qe),Ke&&($e=Qe)}var xt,kt=(Fe=Te.selectAll("path.point").data(Ve,st)).enter().append("path").classed("point",!0);s&&kt.call(r.pointStyle,Ue,i).call(r.translatePoints,M,A).style("opacity",0).transition().style("opacity",1),Fe.order(),He&&(xt=r.makePointStyleFns(Ue)),Fe.each(function(Bt){var Rt=g.select(this),ft=k(Rt);r.translatePoint(Bt,ft,M,A)?(r.singlePointStyle(Bt,ft,Ue,xt,i),f.layerClipId&&r.hideOutsideRangePoint(Bt,ft,M,A,Ue.xcalendar,Ue.ycalendar),Ue.customdata&&Rt.classed("plotly-customdata",null!=Bt.data)):ft.remove()}),s?Fe.exit().transition().style("opacity",0).remove():Fe.exit().remove(),(Fe=Pe.selectAll("g").data($e,st)).enter().append("g").classed("textpoint",!0).append("text"),Fe.order(),Fe.each(function(Bt){var Rt=g.select(this),ft=k(Rt.select("text"));r.translatePoint(Bt,ft,M,A)?f.layerClipId&&r.hideOutsideRangePoint(Bt,Rt,M,A,Ue.xcalendar,Ue.ycalendar):Rt.remove()}),Fe.selectAll("text").call(r.textPointStyle,Ue,i).each(function(Bt){var Rt=M.c2p(Bt.x),ft=A.c2p(Bt.y);g.select(this).selectAll("tspan.line").each(function(){k(g.select(this)).attr({x:Rt,y:ft})})}),Fe.exit().remove()}(D,L,l);var xe=!1===E.cliponaxis?null:f.layerClipId;r.setClipUrl(D,xe,i),r.setClipUrl(L,xe,i)}function ge(Te){k(Te).attr("d","M0,0Z")}function _e(Te){return Te.filter(function(Pe){return!Pe.gap&&Pe.vis})}function Ce(Te){return Te.filter(function(Pe){return Pe.vis})}function Le(Te){return Te.filter(function(Pe){return!Pe.gap})}function Ie(Te){return Te.id}function ve(){return!1}}oe.exports=function(i,c,f,l,h,d){var o,_,A,I,s=!h,k=!!h&&h.duration>0,M=t(i,c,f);(o=l.selectAll("g.trace").data(M,function(A){return A[0].trace.uid})).enter().append("g").attr("class",function(A){return"trace scatter trace"+A[0].trace.uid}).style("stroke-miterlimit",2),o.order(),A=i,I=c,o.each(function(C){var R=y(g.select(this),"g","fills");r.setClipUrl(R,I.layerClipId,A);var O=C[0].trace,D=[];O._ownfill&&D.push("_ownFill"),O._nexttrace&&D.push("_nextFill");var L=R.selectAll("g").data(D,e);L.enter().append("g"),L.exit().each(function(B){O[B]=null}).remove(),L.order().each(function(B){O[B]=y(g.select(this),"path","js-fill")})}),k?(d&&(_=d()),g.transition().duration(h.duration).ease(h.easing).each("end",function(){_&&_()}).each("interrupt",function(){_&&_()}).each(function(){l.selectAll("g.trace").each(function(A,E){u(i,E,c,A,M,this,h)})})):o.each(function(A,E){u(i,E,c,A,M,this,h)}),s&&o.exit().remove(),l.selectAll("path:not([d])").remove()}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":941,"./link_traces":943,"./subtypes":952,"@plotly/d3":58}],949:[function(x,oe,ae){"use strict";var g=x("./subtypes");oe.exports=function(m,w){var y,e,r,n,a=m.cd,t=m.xaxis,p=m.yaxis,u=[],i=a[0].trace;if(!g.hasMarkers(i)&&!g.hasText(i))return[];if(!1===w)for(y=0;y<a.length;y++)a[y].selected=0;else for(y=0;y<a.length;y++)r=t.c2p((e=a[y]).x),n=p.c2p(e.y),null!==e.i&&w.contains([r,n],!1,y,m)?(u.push({pointNumber:e.i,x:t.c2d(e.x),y:p.c2d(e.y)}),e.selected=1):e.selected=0;return u}},{"./subtypes":952}],950:[function(x,oe,ae){"use strict";var g=["orientation","groupnorm","stackgaps"];oe.exports=function(m,w,y,e){var r=y._scatterStackOpts,n=e("stackgroup");if(n){var a=w.xaxis+w.yaxis,t=r[a];t||(t=r[a]={});var p=t[n],u=!1;p?p.traces.push(w):(p=t[n]={traceIndices:[],traces:[w]},u=!0);for(var i={orientation:w.x&&!w.y?"h":"v"},c=0;c<g.length;c++){var f=g[c],l=f+"Found";if(!p[l]){var h=void 0!==m[f],d="orientation"===f;if((h||u)&&(p[f]=e(f,i[f]),d&&(p.fillDflt="h"===p[f]?"tonextx":"tonexty"),h&&(p[l]=!0,!u&&(delete p.traces[0][f],d))))for(var o=0;o<p.traces.length-1;o++){var _=p.traces[o];_._input.fill!==_.fill&&(_.fill=p.fillDflt)}}}return p}}},{}],951:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/drawing"),w=x("../../registry");function y(r,n,a){m.pointStyle(r.selectAll("path.point"),n,a)}function e(r,n,a){m.textPointStyle(r.selectAll("text"),n,a)}oe.exports={style:function(r){var n=g.select(r).selectAll("g.trace.scatter");n.style("opacity",function(a){return a[0].trace.opacity}),n.selectAll("g.points").each(function(a){y(g.select(this),a.trace||a[0].trace,r)}),n.selectAll("g.text").each(function(a){e(g.select(this),a.trace||a[0].trace,r)}),n.selectAll("g.trace path.js-line").call(m.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(m.fillGroupStyle,r),w.getComponentMethod("errorbars","style")(n)},stylePoints:y,styleText:e,styleOnSelect:function(r,n,a){var t=n[0].trace;t.selectedpoints?(m.selectedPointStyle(a.selectAll("path.point"),t),m.selectedTextStyle(a.selectAll("text"),t)):(y(a,t,r),e(a,t,r))}}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],952:[function(x,oe,ae){"use strict";var g=x("../../lib");oe.exports={hasLines:function(m){return m.visible&&m.mode&&-1!==m.mode.indexOf("lines")},hasMarkers:function(m){return m.visible&&(m.mode&&-1!==m.mode.indexOf("markers")||"splom"===m.type)},hasText:function(m){return m.visible&&m.mode&&-1!==m.mode.indexOf("text")},isBubble:function(m){return g.isPlainObject(m.marker)&&g.isArrayOrTypedArray(m.marker.size)}}},{"../../lib":503}],953:[function(x,oe,ae){"use strict";var g=x("../../lib");oe.exports=function(m,w,y,e,r){r=r||{},e("textposition"),g.coerceFont(e,"textfont",y.font),r.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":503}],954:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../registry");oe.exports=function(w,y,e,r){var n,a=r("x"),t=r("y");if(m.getComponentMethod("calendars","handleTraceDefaults")(w,y,["x","y"],e),a){var p=g.minRowLength(a);t?n=Math.min(p,g.minRowLength(t)):(n=p,r("y0"),r("dy"))}else{if(!t)return 0;n=g.minRowLength(t),r("x0"),r("dx")}return y._length=n,n}},{"../../lib":503,"../../registry":638}],955:[function(x,oe,ae){"use strict";var g=x("../scatter/attributes"),m=x("../../components/colorscale/attributes"),w=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=x("../../plots/template_attributes").hovertemplateAttrs,e=x("../../plots/template_attributes").texttemplateAttrs,r=x("../../plots/attributes"),n=x("../../constants/gl3d_dashes"),a=x("../../constants/gl3d_markers"),t=x("../../lib/extend").extendFlat,p=x("../../plot_api/edit_types").overrideAll,u=x("../../lib/sort_object_keys"),c=g.marker,f=c.line,l=t({width:g.line.width,dash:{valType:"enumerated",values:u(n),dflt:"solid"}},m("line")),h=oe.exports=p({x:g.x,y:g.y,z:{valType:"data_array"},text:t({},g.text,{}),texttemplate:e({},{}),hovertext:t({},g.hovertext,{}),hovertemplate:y(),xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z"),mode:t({},g.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:g.connectgaps,line:l,marker:t({symbol:{valType:"enumerated",values:u(a),dflt:"circle",arrayOk:!0},size:t({},c.size,{dflt:8}),sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,opacity:t({},c.opacity,{arrayOk:!1}),colorbar:c.colorbar,line:t({width:t({},f.width,{arrayOk:!1})},m("marker.line"))},m("marker")),textposition:t({},g.textposition,{dflt:"top center"}),textfont:{color:g.textfont.color,size:g.textfont.size,family:t({},g.textfont.family,{arrayOk:!1})},opacity:r.opacity,hoverinfo:t({},r.hoverinfo)},"calc","nested");h.x.editType=h.y.editType=h.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":927}],956:[function(x,oe,ae){"use strict";var g=x("../scatter/arrays_to_calcdata"),m=x("../scatter/colorscale_calc");oe.exports=function(w,y){var e=[{x:!1,y:!1,trace:y,t:{}}];return g(e,y),m(w,y),e}},{"../scatter/arrays_to_calcdata":926,"../scatter/colorscale_calc":930}],957:[function(x,oe,ae){"use strict";var g=x("../../registry");function m(w,y,e,r){if(!y||!y.visible)return null;for(var n=g.getComponentMethod("errorbars","makeComputeError")(y),a=new Array(w.length),t=0;t<w.length;t++){var p=n(+w[t],t);if("log"===r.type){var u=r.c2l(w[t]),i=w[t]-p[0],c=w[t]+p[1];if(a[t]=[(r.c2l(i,!0)-u)*e,(r.c2l(c,!0)-u)*e],i>0){var f=r.c2l(i);r._lowerLogErrorBound||(r._lowerLogErrorBound=f),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,f)}}else a[t]=[-p[0]*e,p[1]*e]}return a}oe.exports=function(w,y,e){var r=[m(w.x,w.error_x,y[0],e.xaxis),m(w.y,w.error_y,y[1],e.yaxis),m(w.z,w.error_z,y[2],e.zaxis)],n=function(c){for(var f=0;f<c.length;f++)if(c[f])return c[f].length;return 0}(r);if(0===n)return null;for(var a=new Array(n),t=0;t<n;t++){for(var p=[[0,0,0],[0,0,0]],u=0;u<3;u++)if(r[u])for(var i=0;i<2;i++)p[i][u]=r[u][t][i];a[t]=p}return a}},{"../../registry":638}],958:[function(x,oe,ae){"use strict";var g=x("../../../stackgl_modules").gl_line3d,m=x("../../../stackgl_modules").gl_scatter3d,w=x("../../../stackgl_modules").gl_error3d,y=x("../../../stackgl_modules").gl_mesh3d,e=x("../../../stackgl_modules").delaunay_triangulate,r=x("../../lib"),n=x("../../lib/str2rgbarray"),a=x("../../lib/gl_format_color").formatColor,t=x("../scatter/make_bubble_size_func"),p=x("../../constants/gl3d_dashes"),u=x("../../constants/gl3d_markers"),i=x("../../plots/cartesian/axes"),c=x("../../components/fx/helpers").appendArrayPointValue,f=x("./calc_errors");function l(I,C){this.scene=I,this.uid=C,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var h=l.prototype;function d(I){return null==I?0:I.indexOf("left")>-1?-1:I.indexOf("right")>-1?1:0}function o(I){return null==I?0:I.indexOf("top")>-1?-1:I.indexOf("bottom")>-1?1:0}function _(I,C){return C(4*I)}function s(I){return u[I]}function k(I,C,R,O,D){var L=null;if(r.isArrayOrTypedArray(I)){L=[];for(var B=0;B<C;B++)L[B]=void 0===I[B]?O:R(I[B],D)}else L=R(I,r.identity);return L}function A(I){if(r.isArrayOrTypedArray(I)){var C=I[0];return r.isArrayOrTypedArray(C)&&(I=C),"rgb("+I.slice(0,3).map(function(R){return Math.round(255*R)})+")"}return null}function E(I){return r.isArrayOrTypedArray(I)?4===I.length&&"number"==typeof I[0]?A(I):I.map(A):null}h.handlePick=function(I){if(I.object&&(I.object===this.linePlot||I.object===this.delaunayMesh||I.object===this.textMarkers||I.object===this.scatterPlot)){var C=I.index=I.data.index;return I.object.highlight&&I.object.highlight(null),this.scatterPlot&&(I.object=this.scatterPlot,this.scatterPlot.highlight(I.data)),I.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[C]||0===this.textLabels[C])&&(I.textLabel=this.textLabels[C]):I.textLabel=this.textLabels),I.traceCoordinate=[this.data.x[C],this.data.y[C],this.data.z[C]],!0}},h.update=function(I){var C,R,O,D,L=this.scene.glplot.gl,B=p.solid;this.data=I;var j=function M(I,C){var R,O,D,L,B,j,W=[],Y=I.fullSceneLayout,Q=I.dataScale,ne=Y.xaxis,X=Y.yaxis,$=Y.zaxis,re=C.marker,H=C.line,U=C.x||[],G=C.y||[],ie=C.z||[],q=U.length,ee=C.xcalendar,te=C.ycalendar,se=C.zcalendar;for(B=0;B<q;B++)R=ne.d2l(U[B],0,ee)*Q[0],O=X.d2l(G[B],0,te)*Q[1],D=$.d2l(ie[B],0,se)*Q[2],W[B]=[R,O,D];if(Array.isArray(C.text))j=C.text;else if(void 0!==C.text)for(j=new Array(q),B=0;B<q;B++)j[B]=C.text;function ue(Fe,Ue){var He=Y[Fe];return i.tickText(He,He.d2l(Ue),!0).text}var de=C.texttemplate;if(de){var he=I.fullLayout._d3locale,xe=Array.isArray(de),ge=xe?Math.min(de.length,q):q,_e=xe?function(Fe){return de[Fe]}:function(){return de};for(j=new Array(ge),B=0;B<ge;B++){var Ce={x:U[B],y:G[B],z:ie[B]},Le={xLabel:ue("xaxis",U[B]),yLabel:ue("yaxis",G[B]),zLabel:ue("zaxis",ie[B])},Ie={};c(Ie,C,B);var Be=C._meta||{};j[B]=r.texttemplateString(_e(B),Le,he,Ie,Ce,Be)}}if(L={position:W,mode:C.mode,text:j},"line"in C&&(L.lineColor=a(H,1,q),L.lineWidth=H.width,L.lineDashes=H.dash),"marker"in C){var ve=t(C);L.scatterColor=a(re,1,q),L.scatterSize=k(re.size,q,_,20,ve),L.scatterMarker=k(re.symbol,q,s,"\u25cf"),L.scatterLineWidth=re.line.width,L.scatterLineColor=a(re.line,1,q),L.scatterAngle=0}"textposition"in C&&(L.textOffset=function(Fe){var Ue=[0,0];if(Array.isArray(Fe))for(var He=0;He<Fe.length;He++)Ue[He]=[0,0],Fe[He]&&(Ue[He][0]=d(Fe[He]),Ue[He][1]=o(Fe[He]));else Ue[0]=d(Fe),Ue[1]=o(Fe);return Ue}(C.textposition),L.textColor=a(C.textfont,1,q),L.textSize=k(C.textfont.size,q,r.identity,12),L.textFont=C.textfont.family,L.textAngle=0);var Te=["x","y","z"];for(L.project=[!1,!1,!1],L.projectScale=[1,1,1],L.projectOpacity=[1,1,1],B=0;B<3;++B){var Pe=C.projection[Te[B]];(L.project[B]=Pe.show)&&(L.projectOpacity[B]=Pe.opacity,L.projectScale[B]=Pe.scale)}L.errorBounds=f(C,Q,Y);var De=function(Fe){for(var Ue=[0,0,0],He=[[0,0,0],[0,0,0],[0,0,0]],Ke=[1,1,1],st=0;st<3;st++){var Ve=Fe[st];Ve&&!1!==Ve.copy_zstyle&&!1!==Fe[2].visible&&(Ve=Fe[2]),Ve&&Ve.visible&&(Ue[st]=Ve.width/2,He[st]=n(Ve.color),Ke[st]=Ve.thickness)}return{capSize:Ue,color:He,lineWidth:Ke}}([C.error_x,C.error_y,C.error_z]);return L.errorColor=De.color,L.errorLineWidth=De.lineWidth,L.errorCapSize=De.capSize,L.delaunayAxis=C.surfaceaxis,L.delaunayColor=n(C.surfacecolor),L}(this.scene,I);"mode"in j&&(this.mode=j.mode),"lineDashes"in j&&j.lineDashes in p&&(B=p[j.lineDashes]),this.color=E(j.scatterColor)||E(j.lineColor),this.dataPoints=j.position,C={gl:this.scene.glplot.gl,position:j.position,color:j.lineColor,lineWidth:j.lineWidth||1,dashes:B[0],dashScale:B[1],opacity:I.opacity,connectGaps:I.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(C):(this.linePlot=g(C),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var W=I.opacity;if(I.marker&&I.marker.opacity&&(W*=I.marker.opacity),R={gl:this.scene.glplot.gl,position:j.position,color:j.scatterColor,size:j.scatterSize,glyph:j.scatterMarker,opacity:W,orthographic:!0,lineWidth:j.scatterLineWidth,lineColor:j.scatterLineColor,project:j.project,projectScale:j.projectScale,projectOpacity:j.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(R):(this.scatterPlot=m(R),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),D={gl:this.scene.glplot.gl,position:j.position,glyph:j.text,color:j.textColor,size:j.textSize,angle:j.textAngle,alignment:j.textOffset,font:j.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:I.opacity},this.textLabels=I.hovertext||I.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(D):(this.textMarkers=m(D),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),O={gl:this.scene.glplot.gl,position:j.position,color:j.errorColor,error:j.errorBounds,lineWidth:j.errorLineWidth,capSize:j.errorCapSize,opacity:I.opacity},this.errorBars?j.errorBounds?this.errorBars.update(O):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):j.errorBounds&&(this.errorBars=w(O),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),j.delaunayAxis>=0){var Y=function(Q,ne,X){var $,re=(X+1)%3,H=(X+2)%3,U=[],G=[];for($=0;$<Q.length;++$){var ie=Q[$];!isNaN(ie[re])&&isFinite(ie[re])&&!isNaN(ie[H])&&isFinite(ie[H])&&(U.push([ie[re],ie[H]]),G.push($))}var q=e(U);for($=0;$<q.length;++$)for(var ee=q[$],te=0;te<ee.length;++te)ee[te]=G[ee[te]];return{positions:Q,cells:q,meshColor:ne}}(j.position,j.delaunayColor,j.delaunayAxis);Y.opacity=I.opacity,this.delaunayMesh?this.delaunayMesh.update(Y):(Y.gl=L,this.delaunayMesh=y(Y),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},h.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},oe.exports=function(I,C){var R=new l(I,C.uid);return R.update(C),R}},{"../../../stackgl_modules":1124,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":944,"./calc_errors":957}],959:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../lib"),w=x("../scatter/subtypes"),y=x("../scatter/marker_defaults"),e=x("../scatter/line_defaults"),r=x("../scatter/text_defaults"),n=x("./attributes");oe.exports=function(a,t,p,u){function i(_,s){return m.coerce(a,t,n,_,s)}if(_=a,s=t,M=u,A=0,E=(k=i)("x"),I=k("y"),C=k("z"),g.getComponentMethod("calendars","handleTraceDefaults")(_,s,["x","y","z"],M),E&&I&&C&&(A=Math.min(E.length,I.length,C.length),s._length=s._xlength=s._ylength=s._zlength=A),A){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),i("mode"),w.hasLines(t)&&(i("connectgaps"),e(a,t,p,u,i)),w.hasMarkers(t)&&y(a,t,p,u,i,{noSelect:!0}),w.hasText(t)&&(i("texttemplate"),r(a,t,u,i,{noSelect:!0}));var c=(t.line||{}).color,f=(t.marker||{}).color;i("surfaceaxis")>=0&&i("surfacecolor",c||f);for(var l=["x","y","z"],h=0;h<3;++h){var d="projection."+l[h];i(d+".show")&&(i(d+".opacity"),i(d+".scale"))}var o=g.getComponentMethod("errorbars","supplyDefaults");o(a,t,c||f||p,{axis:"z"}),o(a,t,c||f||p,{axis:"y",inherit:"z"}),o(a,t,c||f||p,{axis:"x",inherit:"z"})}else t.visible=!1;var _,s,k,M,A,E,I,C}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":955}],960:[function(x,oe,ae){"use strict";oe.exports={plot:x("./convert"),attributes:x("./attributes"),markerSymbols:x("../../constants/gl3d_markers"),supplyDefaults:x("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:x("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":955,"./calc":956,"./convert":958,"./defaults":959}],961:[function(x,oe,ae){"use strict";var g=x("../scatter/attributes"),m=x("../../plots/attributes"),w=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../../plots/template_attributes").texttemplateAttrs,e=x("../../components/colorscale/attributes"),r=x("../../lib/extend").extendFlat,n=g.marker,a=g.line,t=n.line;oe.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:r({},g.mode,{dflt:"markers"}),text:r({},g.text,{}),texttemplate:y({editType:"plot"},{keys:["a","b","text"]}),hovertext:r({},g.hovertext,{}),line:{color:a.color,width:a.width,dash:a.dash,shape:r({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:g.connectgaps,fill:r({},g.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:g.fillcolor,marker:r({symbol:n.symbol,opacity:n.opacity,maxdisplayed:n.maxdisplayed,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:r({width:t.width,editType:"calc"},e("marker.line")),gradient:n.gradient,editType:"calc"},e("marker")),textfont:g.textfont,textposition:g.textposition,selected:g.selected,unselected:g.unselected,hoverinfo:r({},m.hoverinfo,{flags:["a","b","text","name"]}),hoveron:g.hoveron,hovertemplate:w()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],962:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../scatter/colorscale_calc"),w=x("../scatter/arrays_to_calcdata"),y=x("../scatter/calc_selection"),e=x("../scatter/calc").calcMarkerSize,r=x("../carpet/lookup_carpetid");oe.exports=function(n,a){var t=a._carpetTrace=r(n,a);if(t&&t.visible&&"legendonly"!==t.visible){var p;a.xaxis=t.xaxis,a.yaxis=t.yaxis;var u,i,c=a._length,f=new Array(c),l=!1;for(p=0;p<c;p++)if(i=a.b[p],g(u=a.a[p])&&g(i)){var h=t.ab2xy(+u,+i,!0),d=t.isVisible(+u,+i);d||(l=!0),f[p]={x:h[0],y:h[1],a:u,b:i,vis:d}}else f[p]={x:!1,y:!1};return a._needsCull=l,f[0].carpet=t,f[0].trace=a,e(a,c),m(n,a),w(f,a),y(f,a),f}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],963:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../scatter/constants"),w=x("../scatter/subtypes"),y=x("../scatter/marker_defaults"),e=x("../scatter/line_defaults"),r=x("../scatter/line_shape_defaults"),n=x("../scatter/text_defaults"),a=x("../scatter/fillcolor_defaults"),t=x("./attributes");oe.exports=function(p,u,i,c){function f(_,s){return g.coerce(p,u,t,_,s)}f("carpet"),u.xaxis="x",u.yaxis="y";var l=f("a"),h=f("b"),d=Math.min(l.length,h.length);if(d){u._length=d,f("text"),f("texttemplate"),f("hovertext"),f("mode",d<m.PTS_LINESONLY?"lines+markers":"lines"),w.hasLines(u)&&(e(p,u,i,c,f),r(p,u,f),f("connectgaps")),w.hasMarkers(u)&&y(p,u,i,c,f,{gradient:!0}),w.hasText(u)&&n(p,u,c,f);var o=[];(w.hasMarkers(u)||w.hasText(u))&&(f("marker.maxdisplayed"),o.push("points")),f("fill"),"none"!==u.fill&&(a(p,u,i,f),w.hasLines(u)||r(p,u,f)),"tonext"!==u.fill&&"toself"!==u.fill||o.push("fills"),"fills"!==f("hoveron",o.join("+")||"points")&&f("hovertemplate"),g.coerceSelectionMarkerOpacity(u,f)}else u.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":961}],964:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w,y,e){var r=y[e];return g.a=r.a,g.b=r.b,g.y=r.y,g}},{}],965:[function(x,oe,ae){"use strict";oe.exports=function(g,m){var w={},y=m._carpet,e=y.ab2ij([g.a,g.b]),r=Math.floor(e[0]),n=e[0]-r,a=Math.floor(e[1]),p=y.evalxy([],r,a,n,e[1]-a);return w.yLabel=p[1].toFixed(3),w}},{}],966:[function(x,oe,ae){"use strict";var g=x("../scatter/hover"),m=x("../../lib").fillText;oe.exports=function(w,y,e,r){var n=g(w,y,e,r);if(n&&!1!==n[0].index){var a=n[0];if(void 0===a.index){var p=w.xa._length,u=p*(1-a.y0/w.ya._length)/2,i=p-u;return a.x0=Math.max(Math.min(a.x0,i),u),a.x1=Math.max(Math.min(a.x1,i),u),n}var c=a.cd[a.index];a.a=c.a,a.b=c.b,a.xLabelVal=void 0,a.yLabelVal=void 0;var f=a.trace,l=f._carpet,h=f._module.formatLabels(c,f);a.yLabel=h.yLabel,delete a.text;var d=[];if(!f.hovertemplate){var o=(c.hi||f.hoverinfo).split("+");-1!==o.indexOf("all")&&(o=["a","b","text"]),-1!==o.indexOf("a")&&_(l.aaxis,c.a),-1!==o.indexOf("b")&&_(l.baxis,c.b),d.push("y: "+a.yLabel),-1!==o.indexOf("text")&&m(c,f,d),a.extraText=d.join("<br>")}return n}function _(s,k){var M;M=s.labelprefix&&s.labelprefix.length>0?s.labelprefix.replace(/ = $/,""):s._hovertitle,d.push(M+": "+k.toFixed(3)+s.labelsuffix)}}},{"../../lib":503,"../scatter/hover":938}],967:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),plot:x("./plot"),style:x("../scatter/style").style,styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover"),selectPoints:x("../scatter/select"),eventData:x("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:x("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":961,"./calc":962,"./defaults":963,"./event_data":964,"./format_labels":965,"./hover":966,"./plot":968}],968:[function(x,oe,ae){"use strict";var g=x("../scatter/plot"),m=x("../../plots/cartesian/axes"),w=x("../../components/drawing");oe.exports=function(y,e,r,n){var a,p,u=r[0][0].carpet,i={xaxis:m.getFromId(y,u.xaxis||"x"),yaxis:m.getFromId(y,u.yaxis||"y"),plot:e.plot};for(g(y,i,r,n),a=0;a<r.length;a++)p=n.selectAll("g.trace"+r[a][0].trace.uid+" .js-line"),w.setClipUrl(p,r[a][0].carpet._clipPathId,y)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":948}],969:[function(x,oe,ae){"use strict";var g=x("../../plots/template_attributes").hovertemplateAttrs,m=x("../../plots/template_attributes").texttemplateAttrs,w=x("../scatter/attributes"),y=x("../../plots/attributes"),e=x("../../components/colorscale/attributes"),r=x("../../components/drawing/attributes").dash,n=x("../../lib/extend").extendFlat,a=x("../../plot_api/edit_types").overrideAll,t=w.marker,p=w.line,u=t.line;oe.exports=a({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:n({},w.mode,{dflt:"markers"}),text:n({},w.text,{}),texttemplate:m({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:n({},w.hovertext,{}),textfont:w.textfont,textposition:w.textposition,line:{color:p.color,width:p.width,dash:r},connectgaps:w.connectgaps,marker:n({symbol:t.symbol,opacity:t.opacity,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,colorbar:t.colorbar,line:n({width:u.width},e("marker.line")),gradient:t.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:w.fillcolor,selected:w.selected,unselected:w.unselected,hoverinfo:n({},y.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:g()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],970:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../constants/numerical").BADNUM,w=x("../scatter/colorscale_calc"),y=x("../scatter/arrays_to_calcdata"),e=x("../scatter/calc_selection"),r=x("../../lib")._;function n(a){return a&&"string"==typeof a}oe.exports=function(a,t){var p,u=Array.isArray(t.locations),i=u?t.locations.length:t._length,c=new Array(i);p=t.geojson?function(_){return n(_)||g(_)}:n;for(var f=0;f<i;f++){var l=c[f]={};if(u){var h=t.locations[f];l.loc=p(h)?h:null}else{var d=t.lon[f],o=t.lat[f];l.lonlat=g(d)&&g(o)?[+d,+o]:[m,m]}}return y(c,t),w(a,t),e(c,t),i&&(c[0].t={labels:{lat:r(a,"lat:")+" ",lon:r(a,"lon:")+" "}}),c}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":926,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],971:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../scatter/subtypes"),w=x("../scatter/marker_defaults"),y=x("../scatter/line_defaults"),e=x("../scatter/text_defaults"),r=x("../scatter/fillcolor_defaults"),n=x("./attributes");oe.exports=function(a,t,p,u){function i(_,s){return g.coerce(a,t,n,_,s)}var c,f=i("locations");if(f&&f.length){var l,h=i("geojson");("string"==typeof h&&""!==h||g.isPlainObject(h))&&(l="geojson-id"),"geojson-id"===i("locationmode",l)&&i("featureidkey"),c=f.length}else{var d=i("lon")||[],o=i("lat")||[];c=Math.min(d.length,o.length)}c?(t._length=c,i("text"),i("hovertext"),i("hovertemplate"),i("mode"),m.hasLines(t)&&(y(a,t,p,u,i),i("connectgaps")),m.hasMarkers(t)&&w(a,t,p,u,i,{gradient:!0}),m.hasText(t)&&(i("texttemplate"),e(a,t,u,i)),i("fill"),"none"!==t.fill&&r(a,t,p,i),g.coerceSelectionMarkerOpacity(t,i)):t.visible=!1}},{"../../lib":503,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":969}],972:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w,y,e){g.lon=m.lon,g.lat=m.lat,g.location=m.loc?m.loc:null;var r=y[e];return r.fIn&&r.fIn.properties&&(g.properties=r.fIn.properties),g}},{}],973:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes");oe.exports=function(m,w,y){var e={},r=y[w.geo]._subplot.mockAxis,n=m.lonlat;return e.lonLabel=g.tickText(r,r.c2l(n[0]),!0).text,e.latLabel=g.tickText(r,r.c2l(n[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],974:[function(x,oe,ae){"use strict";var g=x("../../components/fx"),m=x("../../constants/numerical").BADNUM,w=x("../scatter/get_trace_color"),y=x("../../lib").fillText,e=x("./attributes");oe.exports=function(r,n,a){var t=r.cd,p=t[0].trace,u=r.xa,i=r.ya,c=r.subplot,f=c.projection.isLonLatOverEdges,l=c.project;if(g.getClosest(t,function(M){var A=M.lonlat;if(A[0]===m||f(A))return 1/0;var E=l(A),I=l([n,a]),C=Math.abs(E[0]-I[0]),R=Math.abs(E[1]-I[1]),O=Math.max(3,M.mrc||0);return Math.max(Math.sqrt(C*C+R*R)-O,1-3/O)},r),!1!==r.index){var h=t[r.index],d=h.lonlat,o=[u.c2p(d),i.c2p(d)],_=h.mrc||1;r.x0=o[0]-_,r.x1=o[0]+_,r.y0=o[1]-_,r.y1=o[1]+_,r.loc=h.loc,r.lon=d[0],r.lat=d[1];var s={};s[p.geo]={_subplot:c};var k=p._module.formatLabels(h,p,s);return r.lonLabel=k.lonLabel,r.latLabel=k.latLabel,r.color=w(p,h),r.extraText=function(M,A,E,I){if(!M.hovertemplate){var C=A.hi||M.hoverinfo,R="all"===C?e.hoverinfo.flags:C.split("+"),O=-1!==R.indexOf("location")&&Array.isArray(M.locations),D=-1!==R.indexOf("lon"),L=-1!==R.indexOf("lat"),B=-1!==R.indexOf("text"),j=[];return O?j.push(A.loc):D&&L?j.push("("+W(E.latLabel)+", "+W(E.lonLabel)+")"):D?j.push(I.lon+W(E.lonLabel)):L&&j.push(I.lat+W(E.latLabel)),B&&y(A,M,j),j.join("<br>")}function W(Y){return Y+"\xb0"}}(p,h,r,t[0].t.labels),r.hovertemplate=p.hovertemplate,[r]}}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":937,"./attributes":969}],975:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),calcGeoJSON:x("./plot").calcGeoJSON,plot:x("./plot").plot,style:x("./style"),styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover"),eventData:x("./event_data"),selectPoints:x("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:x("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":945,"../scatter/style":951,"./attributes":969,"./calc":970,"./defaults":971,"./event_data":972,"./format_labels":973,"./hover":974,"./plot":976,"./select":977,"./style":978}],976:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=x("../../lib/topojson_utils").getTopojsonFeatures,y=x("../../lib/geojson_utils"),e=x("../../lib/geo_location_utils"),r=x("../../plots/cartesian/autorange").findExtremes,n=x("../../constants/numerical").BADNUM,a=x("../scatter/calc").calcMarkerSize,t=x("../scatter/subtypes"),p=x("./style");oe.exports={calcGeoJSON:function(u,i){var c,f,l=u[0].trace,h=i[l.geo],d=h._subplot,o=l._length;if(Array.isArray(l.locations)){var _=l.locationmode,s="geojson-id"===_?e.extractTraceFeature(u):w(l,d.topojson);for(c=0;c<o;c++){f=u[c];var k="geojson-id"===_?f.fOut:e.locationToFeature(_,f.loc,s);f.lonlat=k?k.properties.ct:[n,n]}}var M,A,E={padded:!0};if("geojson"===h.fitbounds&&"geojson-id"===l.locationmode){var I=e.computeBbox(e.getTraceGeojson(l));M=[I[0],I[2]],A=[I[1],I[3]]}else{for(M=new Array(o),A=new Array(o),c=0;c<o;c++)M[c]=(f=u[c]).lonlat[0],A[c]=f.lonlat[1];E.ppad=a(l,o)}l._extremes.lon=r(h.lonaxis._ax,M,E),l._extremes.lat=r(h.lataxis._ax,A,E)},plot:function(u,i,c){var f=i.layers.frontplot.select(".scatterlayer"),l=m.makeTraceGroups(f,c,"trace scattergeo");function h(d,o){d.lonlat[0]===n&&g.select(o).remove()}l.selectAll("*").remove(),l.each(function(d){var o=g.select(this),_=d[0].trace;if(t.hasLines(_)||"none"!==_.fill){var s=y.calcTraceToLineCoords(d),k="none"!==_.fill?y.makePolygon(s):y.makeLine(s);o.selectAll("path.js-line").data([{geojson:k,trace:_}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}t.hasMarkers(_)&&o.selectAll("path.point").data(m.identity).enter().append("path").classed("point",!0).each(function(M){h(M,this)}),t.hasText(_)&&o.selectAll("g").data(m.identity).enter().append("g").append("text").each(function(M){h(M,this)}),p(u,d)})}}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":928,"../scatter/subtypes":952,"./style":978,"@plotly/d3":58}],977:[function(x,oe,ae){"use strict";var g=x("../scatter/subtypes"),m=x("../../constants/numerical").BADNUM;oe.exports=function(w,y){var e,r,n,a,t,p=w.cd,u=w.xaxis,i=w.yaxis,c=[],f=p[0].trace;if(!g.hasMarkers(f)&&!g.hasText(f))return[];if(!1===y)for(t=0;t<p.length;t++)p[t].selected=0;else for(t=0;t<p.length;t++)(r=(e=p[t]).lonlat)[0]!==m&&(n=u.c2p(r),a=i.c2p(r),y.contains([n,a],null,t,w)?(c.push({pointNumber:t,lon:r[0],lat:r[1]}),e.selected=1):e.selected=0);return c}},{"../../constants/numerical":479,"../scatter/subtypes":952}],978:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/drawing"),w=x("../../components/color"),y=x("../scatter/style"),e=y.stylePoints,r=y.styleText;oe.exports=function(n,a){var t,p,u,i;a&&(t=n,u=(p=a)[0].trace,(i=p[0].node3).style("opacity",p[0].trace.opacity),e(i,u,t),r(i,u,t),i.selectAll("path.js-line").style("fill","none").each(function(c){var f=g.select(this),l=c.trace,h=l.line||{};f.call(w.stroke,h.color).call(m.dashLine,h.dash||"",h.width||0),"none"!==l.fill&&f.call(w.fill,l.fillcolor)}))}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":951,"@plotly/d3":58}],979:[function(x,oe,ae){"use strict";var g=x("../../plots/attributes"),m=x("../scatter/attributes"),w=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=x("../../components/colorscale/attributes"),e=x("../../lib/sort_object_keys"),r=x("../../lib/extend").extendFlat,n=x("../../plot_api/edit_types").overrideAll,a=x("./constants").DASHES,t=m.line,p=m.marker,u=p.line,i=oe.exports=n({x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:w("x"),yhoverformat:w("y"),text:m.text,hovertext:m.hovertext,textposition:m.textposition,textfont:m.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:t.color,width:t.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(a),dflt:"solid"}},marker:r({},y("marker"),{symbol:p.symbol,size:p.size,sizeref:p.sizeref,sizemin:p.sizemin,sizemode:p.sizemode,opacity:p.opacity,colorbar:p.colorbar,line:r({},y("marker.line"),{width:u.width})}),connectgaps:m.connectgaps,fill:r({},m.fill,{dflt:"none"}),fillcolor:m.fillcolor,selected:{marker:m.selected.marker,textfont:m.selected.textfont},unselected:{marker:m.unselected.marker,textfont:m.unselected.textfont},opacity:g.opacity},"calc","nested");i.x.editType=i.y.editType=i.x0.editType=i.y0.editType="calc+clearAxisTypes",i.hovertemplate=m.hovertemplate,i.texttemplate=m.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":927,"./constants":982}],980:[function(x,oe,ae){"use strict";var g=x("./hover");oe.exports={moduleType:"trace",name:"scattergl",basePlotModule:x("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("../scatter/cross_trace_defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),hoverPoints:g.hoverPoints,selectPoints:x("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":933,"../scatter/marker_colorbar":945,"./attributes":979,"./calc":981,"./defaults":984,"./format_labels":986,"./hover":988,"./select":992}],981:[function(x,oe,ae){"use strict";var g=x("@plotly/point-cluster"),m=x("../../lib"),w=x("../../plots/cartesian/axis_ids"),y=x("../../plots/cartesian/autorange").findExtremes,e=x("../../plots/cartesian/align_period"),r=x("../scatter/calc"),n=r.calcMarkerSize,a=r.calcAxisExpansion,t=r.setFirstScatter,p=x("../scatter/colorscale_calc"),u=x("./convert"),i=x("./scene_update"),c=x("../../constants/numerical").BADNUM,f=x("./constants").TOO_MANY_POINTS;function l(h,d,o){var _=h._extremes[d._id],s=y(d,o._bnds,{padded:!0});_.min=_.min.concat(s.min),_.max=_.max.concat(s.max)}oe.exports=function(h,d){var o,_=h._fullLayout,s=w.getFromId(h,d.xaxis),k=w.getFromId(h,d.yaxis),M=_._plots[d.xaxis+d.yaxis],A=d._length,E=A>=f,I=2*A,C={},R=s.makeCalcdata(d,"x"),O=k.makeCalcdata(d,"y"),D=e(d,s,"x",R),L=e(d,k,"y",O),B=D.vals,j=L.vals;d._x=B,d._y=j,d.xperiodalignment&&(d._origX=R,d._xStarts=D.starts,d._xEnds=D.ends),d.yperiodalignment&&(d._origY=O,d._yStarts=L.starts,d._yEnds=L.ends);var W=new Array(I),Y=new Array(A);for(o=0;o<A;o++)W[2*o]=B[o]===c?NaN:B[o],W[2*o+1]=j[o]===c?NaN:j[o],Y[o]=o;if("log"===s.type)for(o=0;o<I;o+=2)W[o]=s.c2l(W[o]);if("log"===k.type)for(o=1;o<I;o+=2)W[o]=k.c2l(W[o]);E&&"log"!==s.type&&"log"!==k.type?C.tree=g(W):C.ids=Y,p(h,d);var Q,ne=function($,re,H,U,G,ie){var q=u.style($,H);if(q.marker&&(q.marker.positions=U),q.line&&U.length>1&&m.extendFlat(q.line,u.linePositions($,H,U)),q.errorX||q.errorY){var ee=u.errorBarPositions($,H,U,G,ie);q.errorX&&m.extendFlat(q.errorX,ee.x),q.errorY&&m.extendFlat(q.errorY,ee.y)}return q.text&&(m.extendFlat(q.text,{positions:U},u.textPosition($,H,q.text,q.marker)),m.extendFlat(q.textSel,{positions:U},u.textPosition($,H,q.text,q.markerSel)),m.extendFlat(q.textUnsel,{positions:U},u.textPosition($,H,q.text,q.markerUnsel))),q}(h,0,d,W,B,j),X=i(h,M);return t(_,d),E?ne.marker&&(Q=ne.marker.sizeAvg||Math.max(ne.marker.size,3)):Q=n(d,A),a(h,d,s,k,B,j,Q),ne.errorX&&l(d,s,ne.errorX),ne.errorY&&l(d,k,ne.errorY),ne.fill&&!X.fill2d&&(X.fill2d=!0),ne.marker&&!X.scatter2d&&(X.scatter2d=!0),ne.line&&!X.line2d&&(X.line2d=!0),!ne.errorX&&!ne.errorY||X.error2d||(X.error2d=!0),ne.text&&!X.glText&&(X.glText=!0),ne.marker&&(ne.marker.snap=A),X.lineOptions.push(ne.line),X.errorXOptions.push(ne.errorX),X.errorYOptions.push(ne.errorY),X.fillOptions.push(ne.fill),X.markerOptions.push(ne.marker),X.markerSelectedOptions.push(ne.markerSel),X.markerUnselectedOptions.push(ne.markerUnsel),X.textOptions.push(ne.text),X.textSelectedOptions.push(ne.textSel),X.textUnselectedOptions.push(ne.textUnsel),X.selectBatch.push([]),X.unselectBatch.push([]),C._scene=X,C.index=X.count,C.x=B,C.y=j,C.positions=W,X.count++,[{x:!1,y:!1,t:C,trace:d}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":928,"../scatter/colorscale_calc":930,"./constants":982,"./convert":983,"./scene_update":991,"@plotly/point-cluster":59}],982:[function(x,oe,ae){"use strict";oe.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],983:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("svg-path-sdf"),w=x("color-normalize"),y=x("../../registry"),e=x("../../lib"),r=x("../../components/drawing"),n=x("../../plots/cartesian/axis_ids"),a=x("../../lib/gl_format_color").formatColor,t=x("../scatter/subtypes"),p=x("../scatter/make_bubble_size_func"),u=x("./helpers"),i=x("./constants"),c=x("../../constants/interactions").DESELECTDIM,f={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},l=x("../../components/fx/helpers").appendArrayPointValue;function h(R,O){var D,L=R._fullLayout,B=O._length,j=O.textfont,W=O.textposition,Y=Array.isArray(W)?W:[W],Q=j.color,ne=j.size,X=j.family,$={},re=R._context.plotGlPixelRatio,H=O.texttemplate;if(H){$.text=[];var U=L._d3locale,G=Array.isArray(H),ie=G?Math.min(H.length,B):B,q=G?function(xe){return H[xe]}:function(){return H};for(D=0;D<ie;D++){var ee={i:D},te=O._module.formatLabels(ee,O,L),se={};l(se,O,D);var ue=O._meta||{};$.text.push(e.texttemplateString(q(D),te,U,se,ee,ue))}}else $.text=Array.isArray(O.text)&&O.text.length<B?O.text.slice():O.text;if(Array.isArray($.text))for(D=$.text.length;D<B;D++)$.text[D]="";for($.opacity=O.opacity,$.font={},$.align=[],$.baseline=[],D=0;D<Y.length;D++){var de=Y[D].split(/\s+/);switch(de[1]){case"left":$.align.push("right");break;case"right":$.align.push("left");break;default:$.align.push(de[1])}switch(de[0]){case"top":$.baseline.push("bottom");break;case"bottom":$.baseline.push("top");break;default:$.baseline.push(de[0])}}if(Array.isArray(Q))for($.color=new Array(B),D=0;D<B;D++)$.color[D]=Q[D];else $.color=Q;if(e.isArrayOrTypedArray(ne)||Array.isArray(X))for($.font=new Array(B),D=0;D<B;D++){var he=$.font[D]={};he.size=(e.isTypedArray(ne)?ne[D]:Array.isArray(ne)?g(ne[D])?ne[D]:0:ne)*re,he.family=Array.isArray(X)?X[D]:X}else $.font={size:ne*re,family:X};return $}function d(R){var O,D,L=R._length,B=R.marker,j={},W=e.isArrayOrTypedArray(B.symbol),Y=e.isArrayOrTypedArray(B.color),Q=e.isArrayOrTypedArray(B.line.color),ne=e.isArrayOrTypedArray(B.opacity),X=e.isArrayOrTypedArray(B.size),$=e.isArrayOrTypedArray(B.line.width);if(W||(D=u.isOpenSymbol(B.symbol)),W||Y||Q||ne){j.colors=new Array(L),j.borderColors=new Array(L);var re=a(B,B.opacity,L),H=a(B.line,B.opacity,L);if(!Array.isArray(H[0])){var U=H;for(H=Array(L),O=0;O<L;O++)H[O]=U}if(!Array.isArray(re[0])){var G=re;for(re=Array(L),O=0;O<L;O++)re[O]=G}for(j.colors=re,j.borderColors=H,O=0;O<L;O++)W&&(D=u.isOpenSymbol(B.symbol[O])),D&&(H[O]=re[O].slice(),re[O]=re[O].slice(),re[O][3]=0);j.opacity=R.opacity}else D?(j.color=w(B.color,"uint8"),j.color[3]=0,j.borderColor=w(B.color,"uint8")):(j.color=w(B.color,"uint8"),j.borderColor=w(B.line.color,"uint8")),j.opacity=R.opacity*B.opacity;if(W)for(j.markers=new Array(L),O=0;O<L;O++)j.markers[O]=C(B.symbol[O]);else j.marker=C(B.symbol);var q,ee=p(R,1);if(X||$){var te,se=j.sizes=new Array(L),ue=j.borderSizes=new Array(L),de=0;if(X){for(O=0;O<L;O++)se[O]=ee(B.size[O]),de+=se[O];te=de/L}else for(q=ee(B.size),O=0;O<L;O++)se[O]=q;if($)for(O=0;O<L;O++)ue[O]=B.line.width[O];else for(q=B.line.width,O=0;O<L;O++)ue[O]=q;j.sizeAvg=te}else j.size=ee(B&&B.size||10),j.borderSizes=ee(B.line.width);return j}function o(R,O){var L={};return O&&(O.marker&&O.marker.symbol?L=d(e.extendFlat({},R.marker,O.marker)):O.marker&&(O.marker.size&&(L.size=O.marker.size),O.marker.color&&(L.colors=O.marker.color),void 0!==O.marker.opacity&&(L.opacity=O.marker.opacity))),L}function _(R,O,D){var L={};if(!D)return L;if(D.textfont){var B={opacity:1,text:O.text,texttemplate:O.texttemplate,textposition:O.textposition,textfont:e.extendFlat({},O.textfont)};D.textfont&&e.extendFlat(B.textfont,D.textfont),L=h(R,B)}return L}function s(R,O,D){var L={capSize:2*O.width*D,lineWidth:O.thickness*D,color:O.color};return O.copy_ystyle&&(L=R.error_y),L}var k=i.SYMBOL_SDF_SIZE,M=i.SYMBOL_SIZE,A=i.SYMBOL_STROKE,E={},I=r.symbolFuncs[0](.05*M);function C(R){if("circle"===R)return null;var O,D,L=r.symbolNumber(R),B=r.symbolFuncs[L%100],j=!!r.symbolNoDot[L%100],W=!!r.symbolNoFill[L%100],Y=u.isDotSymbol(R);return E[R]?E[R]:(O=Y&&!j?B(1.1*M)+I:B(M),D=m(O,{w:k,h:k,viewBox:[-M,-M,M,M],stroke:W?A:-A}),E[R]=D,D||null)}oe.exports={style:function(R,O){var D,L={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},B=R._context.plotGlPixelRatio;if(!0!==O.visible)return L;if(t.hasText(O)&&(L.text=h(R,O),L.textSel=_(R,O,O.selected),L.textUnsel=_(R,O,O.unselected)),t.hasMarkers(O)&&(L.marker=d(O),L.markerSel=o(O,O.selected),L.markerUnsel=o(O,O.unselected),!O.unselected&&e.isArrayOrTypedArray(O.marker.opacity))){var j=O.marker.opacity;for(L.markerUnsel.opacity=new Array(j.length),D=0;D<j.length;D++)L.markerUnsel.opacity[D]=c*j[D]}if(t.hasLines(O)){L.line={overlay:!0,thickness:O.line.width*B,color:O.line.color,opacity:O.opacity};var W=(i.DASHES[O.line.dash]||[1]).slice();for(D=0;D<W.length;++D)W[D]*=O.line.width*B;L.line.dashes=W}return O.error_x&&O.error_x.visible&&(L.errorX=s(O,O.error_x,B)),O.error_y&&O.error_y.visible&&(L.errorY=s(O,O.error_y,B)),O.fill&&"none"!==O.fill&&(L.fill={closed:!0,fill:O.fillcolor,thickness:0}),L},markerStyle:d,markerSelection:o,linePositions:function(R,O,D){var L,B,j=D.length,W=j/2;if(t.hasLines(O)&&W)if("hv"===O.line.shape){for(L=[],B=0;B<W-1;B++)isNaN(D[2*B])||isNaN(D[2*B+1])?L.push(NaN,NaN,NaN,NaN):(L.push(D[2*B],D[2*B+1]),isNaN(D[2*B+2])||isNaN(D[2*B+3])?L.push(NaN,NaN):L.push(D[2*B+2],D[2*B+1]));L.push(D[j-2],D[j-1])}else if("hvh"===O.line.shape){for(L=[],B=0;B<W-1;B++)if(isNaN(D[2*B])||isNaN(D[2*B+1])||isNaN(D[2*B+2])||isNaN(D[2*B+3]))isNaN(D[2*B])||isNaN(D[2*B+1])?L.push(NaN,NaN):L.push(D[2*B],D[2*B+1]),L.push(NaN,NaN);else{var Y=(D[2*B]+D[2*B+2])/2;L.push(D[2*B],D[2*B+1],Y,D[2*B+1],Y,D[2*B+3])}L.push(D[j-2],D[j-1])}else if("vhv"===O.line.shape){for(L=[],B=0;B<W-1;B++)if(isNaN(D[2*B])||isNaN(D[2*B+1])||isNaN(D[2*B+2])||isNaN(D[2*B+3]))isNaN(D[2*B])||isNaN(D[2*B+1])?L.push(NaN,NaN):L.push(D[2*B],D[2*B+1]),L.push(NaN,NaN);else{var Q=(D[2*B+1]+D[2*B+3])/2;L.push(D[2*B],D[2*B+1],D[2*B],Q,D[2*B+2],Q)}L.push(D[j-2],D[j-1])}else if("vh"===O.line.shape){for(L=[],B=0;B<W-1;B++)isNaN(D[2*B])||isNaN(D[2*B+1])?L.push(NaN,NaN,NaN,NaN):(L.push(D[2*B],D[2*B+1]),isNaN(D[2*B+2])||isNaN(D[2*B+3])?L.push(NaN,NaN):L.push(D[2*B],D[2*B+3]));L.push(D[j-2],D[j-1])}else L=D;var ne=!1;for(B=0;B<L.length;B++)if(isNaN(L[B])){ne=!0;break}var X=ne||L.length>i.TOO_MANY_POINTS||t.hasMarkers(O)?"rect":"round";if(ne&&O.connectgaps){var $=L[0],re=L[1];for(B=0;B<L.length;B+=2)isNaN(L[B])||isNaN(L[B+1])?(L[B]=$,L[B+1]=re):($=L[B],re=L[B+1])}return{join:X,positions:L}},errorBarPositions:function(R,O,D,L,B){var j=y.getComponentMethod("errorbars","makeComputeError"),W=n.getFromId(R,O.xaxis),Y=n.getFromId(R,O.yaxis),Q=D.length/2,ne={};function X($,re){var H=re._id.charAt(0),U=O["error_"+H];if(U&&U.visible&&("linear"===re.type||"log"===re.type)){for(var G=j(U),ie={x:0,y:1}[H],q={x:[0,1,2,3],y:[2,3,0,1]}[H],ee=new Float64Array(4*Q),te=1/0,se=-1/0,ue=0,de=0;ue<Q;ue++,de+=4){var he=$[ue];if(g(he)){var xe=D[2*ue+ie],ge=G(he,ue),_e=ge[0],Ce=ge[1];if(g(_e)&&g(Ce)){var Ie=he+Ce;ee[de+q[0]]=xe-re.c2l(he-_e),ee[de+q[1]]=re.c2l(Ie)-xe,ee[de+q[2]]=0,ee[de+q[3]]=0,te=Math.min(te,he-_e),se=Math.max(se,he+Ce)}}}ne[H]={positions:D,errors:ee,_bnds:[te,se]}}}return X(L,W),X(B,Y),ne},textPosition:function(R,O,D,L){var B,j=O._length,W={};if(t.hasMarkers(O)){var Y=D.font,Q=D.align,ne=D.baseline;for(W.offset=new Array(j),B=0;B<j;B++){var X=L.sizes?L.sizes[B]:L.size,$=Array.isArray(Y)?Y[B].size:Y.size,re=Array.isArray(Q)?Q.length>1?Q[B]:Q[0]:Q,H=Array.isArray(ne)?ne.length>1?ne[B]:ne[0]:ne,G=f[H],ie=X?X/.8+1:0;W.offset[B]=[f[re]*ie/$,(-G*ie-.5*G)/$]}}return W}}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":944,"../scatter/subtypes":952,"./constants":982,"./helpers":987,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],984:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../registry"),w=x("./helpers"),y=x("./attributes"),e=x("../scatter/constants"),r=x("../scatter/subtypes"),n=x("../scatter/xy_defaults"),a=x("../scatter/period_defaults"),t=x("../scatter/marker_defaults"),p=x("../scatter/line_defaults"),u=x("../scatter/fillcolor_defaults"),i=x("../scatter/text_defaults");oe.exports=function(c,f,l,h){function d(I,C){return g.coerce(c,f,y,I,C)}var o=!!c.marker&&w.isOpenSymbol(c.marker.symbol),_=r.isBubble(c),s=n(c,f,h,d);if(s){a(c,f,h,d),d("xhoverformat"),d("yhoverformat");var k=s<e.PTS_LINESONLY?"lines+markers":"lines";d("text"),d("hovertext"),d("hovertemplate"),d("mode",k),r.hasLines(f)&&(d("connectgaps"),p(c,f,l,h,d),d("line.shape")),r.hasMarkers(f)&&(t(c,f,l,h,d),d("marker.line.width",o||_?1:0)),r.hasText(f)&&(d("texttemplate"),i(c,f,h,d));var M=(f.line||{}).color,A=(f.marker||{}).color;d("fill"),"none"!==f.fill&&u(c,f,l,d);var E=m.getComponentMethod("errorbars","supplyDefaults");E(c,f,M||A||l,{axis:"y"}),E(c,f,M||A||l,{axis:"x",inherit:"y"}),g.coerceSelectionMarkerOpacity(f,d)}else f.visible=!1}},{"../../lib":503,"../../registry":638,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/period_defaults":947,"../scatter/subtypes":952,"../scatter/text_defaults":953,"../scatter/xy_defaults":954,"./attributes":979,"./helpers":987}],985:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/color"),w=x("../../constants/interactions").DESELECTDIM;oe.exports={styleTextSelection:function(y){var e,r,n=y[0],a=n.trace,t=n.t,p=t._scene,u=t.index,i=p.selectBatch[u],c=p.unselectBatch[u],f=p.textOptions[u],l=p.textSelectedOptions[u]||{},h=p.textUnselectedOptions[u]||{},d=g.extendFlat({},f);if(i.length||c.length){var o=l.color,_=h.color,s=f.color,k=Array.isArray(s);for(d.color=new Array(a._length),e=0;e<i.length;e++)d.color[r=i[e]]=o||(k?s[r]:s);for(e=0;e<c.length;e++){r=c[e];var M=k?s[r]:s;d.color[r]=_||(o?M:m.addOpacity(M,w))}}p.glText[u].update(d)}}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],986:[function(x,oe,ae){"use strict";var g=x("../scatter/format_labels");oe.exports=function(m,w,y){var e=m.i;return"x"in m||(m.x=w._x[e]),"y"in m||(m.y=w._y[e]),g(m,w,y)}},{"../scatter/format_labels":936}],987:[function(x,oe,ae){"use strict";var g=x("./constants");ae.isOpenSymbol=function(m){return"string"==typeof m?g.OPEN_RE.test(m):m%200>100},ae.isDotSymbol=function(m){return"string"==typeof m?g.DOT_RE.test(m):m>200}},{"./constants":982}],988:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../lib"),w=x("../scatter/get_trace_color");function y(e,r,n,a){var t=e.xa,p=e.ya,u=e.distance,i=e.dxy,c=e.index,f={pointNumber:c,x:r[c],y:n[c]};f.tx=Array.isArray(a.text)?a.text[c]:a.text,f.htx=Array.isArray(a.hovertext)?a.hovertext[c]:a.hovertext,f.data=Array.isArray(a.customdata)?a.customdata[c]:a.customdata,f.tp=Array.isArray(a.textposition)?a.textposition[c]:a.textposition;var l=a.textfont;l&&(f.ts=m.isArrayOrTypedArray(l.size)?l.size[c]:l.size,f.tc=Array.isArray(l.color)?l.color[c]:l.color,f.tf=Array.isArray(l.family)?l.family[c]:l.family);var h=a.marker;h&&(f.ms=m.isArrayOrTypedArray(h.size)?h.size[c]:h.size,f.mo=m.isArrayOrTypedArray(h.opacity)?h.opacity[c]:h.opacity,f.mx=m.isArrayOrTypedArray(h.symbol)?h.symbol[c]:h.symbol,f.mc=m.isArrayOrTypedArray(h.color)?h.color[c]:h.color);var d=h&&h.line;d&&(f.mlc=Array.isArray(d.color)?d.color[c]:d.color,f.mlw=m.isArrayOrTypedArray(d.width)?d.width[c]:d.width);var o=h&&h.gradient;o&&"none"!==o.type&&(f.mgt=Array.isArray(o.type)?o.type[c]:o.type,f.mgc=Array.isArray(o.color)?o.color[c]:o.color);var _=t.c2p(f.x,!0),s=p.c2p(f.y,!0),k=f.mrc||1,M=a.hoverlabel;M&&(f.hbg=Array.isArray(M.bgcolor)?M.bgcolor[c]:M.bgcolor,f.hbc=Array.isArray(M.bordercolor)?M.bordercolor[c]:M.bordercolor,f.hts=m.isArrayOrTypedArray(M.font.size)?M.font.size[c]:M.font.size,f.htc=Array.isArray(M.font.color)?M.font.color[c]:M.font.color,f.htf=Array.isArray(M.font.family)?M.font.family[c]:M.font.family,f.hnl=m.isArrayOrTypedArray(M.namelength)?M.namelength[c]:M.namelength);var A=a.hoverinfo;A&&(f.hi=Array.isArray(A)?A[c]:A);var E=a.hovertemplate;E&&(f.ht=Array.isArray(E)?E[c]:E);var I={};I[e.index]=f;var C=a._origX,R=a._origY,O=m.extendFlat({},e,{color:w(a,f),x0:_-k,x1:_+k,xLabelVal:C?C[c]:f.x,y0:s-k,y1:s+k,yLabelVal:R?R[c]:f.y,cd:I,distance:u,spikeDistance:i,hovertemplate:f.ht});return f.htx?O.text=f.htx:f.tx?O.text=f.tx:a.text&&(O.text=a.text),m.fillText(f,a,O),g.getComponentMethod("errorbars","hoverInfo")(f,a,O),O}oe.exports={hoverPoints:function(e,r,n,a){var t,p,u,i,c,f,l,h,d,o,_=e.cd,s=_[0].t,k=_[0].trace,M=e.xa,A=e.ya,E=s.x,I=s.y,C=M.c2p(r),R=A.c2p(n),O=e.distance;if(s.tree){var D=M.p2c(C-O),L=M.p2c(C+O),B=A.p2c(R-O),j=A.p2c(R+O);t="x"===a?s.tree.range(Math.min(D,L),Math.min(A._rl[0],A._rl[1]),Math.max(D,L),Math.max(A._rl[0],A._rl[1])):s.tree.range(Math.min(D,L),Math.min(B,j),Math.max(D,L),Math.max(B,j))}else t=s.ids;var W=O;if("x"===a){var Y=!!k.xperiodalignment,Q=!!k.yperiodalignment;for(f=0;f<t.length;f++){if(i=E[p=t[f]],l=Math.abs(M.c2p(i)-C),Y){var ne=M.c2p(k._xStarts[p]),X=M.c2p(k._xEnds[p]);l=C>=Math.min(ne,X)&&C<=Math.max(ne,X)?0:1/0}if(l<W){if(W=l,h=A.c2p(c=I[p])-R,Q){var $=A.c2p(k._yStarts[p]),re=A.c2p(k._yEnds[p]);h=R>=Math.min($,re)&&R<=Math.max($,re)?0:1/0}o=Math.sqrt(l*l+h*h),u=t[f]}}}else for(f=t.length-1;f>-1;f--)i=E[p=t[f]],c=I[p],l=M.c2p(i)-C,h=A.c2p(c)-R,(d=Math.sqrt(l*l+h*h))<W&&(W=o=d,u=p);return e.index=u,e.distance=W,e.dxy=o,void 0===u?[e]:[y(e,E,I,k)]},calcHover:y}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":937}],989:[function(x,oe,ae){arguments[4][896][0].apply(ae,arguments)},{"./base_index":980,"./plot":990,dup:896}],990:[function(x,oe,ae){"use strict";var g=x("regl-scatter2d"),m=x("regl-line2d"),w=x("regl-error2d"),y=x("gl-text"),e=x("../../lib"),r=x("../../components/dragelement/helpers").selectMode,n=x("../../lib/prepare_regl"),a=x("../scatter/subtypes"),t=x("../scatter/link_traces"),p=x("./edit_style").styleTextSelection,u={};function i(c,f,l,h){var d=c._size,E=d.w*h,I=d.h*h;return[d.l*h+f.domain[0]*E,d.b*h+l.domain[0]*I,c.width*h-d.r*h-(1-f.domain[1])*E,c.height*h-d.t*h-(1-l.domain[1])*I]}(oe.exports=function(c,f,l){if(l.length){var h,d,o=c._fullLayout,_=f._scene,s=f.xaxis,k=f.yaxis;if(_)if(n(c,["ANGLE_instanced_arrays","OES_element_index_uint"],u)){var M=_.count,A=o._glcanvas.data()[0].regl;if(t(c,f,l),_.dirty){if(!0===_.error2d&&(_.error2d=w(A)),!0===_.line2d&&(_.line2d=m(A)),!0===_.scatter2d&&(_.scatter2d=g(A)),!0===_.fill2d&&(_.fill2d=m(A)),!0===_.glText)for(_.glText=new Array(M),h=0;h<M;h++)_.glText[h]=new y(A);if(_.glText){if(M>_.glText.length){var E=M-_.glText.length;for(h=0;h<E;h++)_.glText.push(new y(A))}else M<_.glText.length&&_.glText.splice(M,_.glText.length-M).forEach(function(ee){ee.destroy()});for(h=0;h<M;h++)_.glText[h].update(_.textOptions[h])}if(_.line2d&&(_.line2d.update(_.lineOptions),_.lineOptions=_.lineOptions.map(function(ee){if(ee&&ee.positions){for(var te=ee.positions,se=0;se<te.length&&(isNaN(te[se])||isNaN(te[se+1]));)se+=2;for(var ue=te.length-2;ue>se&&(isNaN(te[ue])||isNaN(te[ue+1]));)ue-=2;ee.positions=te.slice(se,ue+2)}return ee}),_.line2d.update(_.lineOptions)),_.error2d){var C=(_.errorXOptions||[]).concat(_.errorYOptions||[]);_.error2d.update(C)}_.scatter2d&&_.scatter2d.update(_.markerOptions),_.fillOrder=e.repeat(null,M),_.fill2d&&(_.fillOptions=_.fillOptions.map(function(ee,te){var se=l[te];if(ee&&se&&se[0]&&se[0].trace){var ue,de,he=se[0],xe=he.trace,ge=he.t,_e=_.lineOptions[te],Ce=[];xe._ownfill&&Ce.push(te),xe._nexttrace&&Ce.push(te+1),Ce.length&&(_.fillOrder[te]=Ce);var Le,Ie,Be=[],ve=_e&&_e.positions||ge.positions;if("tozeroy"===xe.fill){for(Le=0;Le<ve.length&&isNaN(ve[Le+1]);)Le+=2;for(Ie=ve.length-2;Ie>Le&&isNaN(ve[Ie+1]);)Ie-=2;0!==ve[Le+1]&&(Be=[ve[Le],0]),Be=Be.concat(ve.slice(Le,Ie+2)),0!==ve[Ie+1]&&(Be=Be.concat([ve[Ie],0]))}else if("tozerox"===xe.fill){for(Le=0;Le<ve.length&&isNaN(ve[Le]);)Le+=2;for(Ie=ve.length-2;Ie>Le&&isNaN(ve[Ie]);)Ie-=2;0!==ve[Le]&&(Be=[0,ve[Le+1]]),Be=Be.concat(ve.slice(Le,Ie+2)),0!==ve[Ie]&&(Be=Be.concat([0,ve[Ie+1]]))}else if("toself"===xe.fill||"tonext"===xe.fill){for(Be=[],ue=0,ee.splitNull=!0,de=0;de<ve.length;de+=2)(isNaN(ve[de])||isNaN(ve[de+1]))&&((Be=Be.concat(ve.slice(ue,de))).push(ve[ue],ve[ue+1]),Be.push(null,null),ue=de+2);Be=Be.concat(ve.slice(ue)),ue&&Be.push(ve[ue],ve[ue+1])}else{var Te=xe._nexttrace;if(Te){var Pe=_.lineOptions[te+1];if(Pe){var De=Pe.positions;if("tonexty"===xe.fill){for(Be=ve.slice(),te=Math.floor(De.length/2);te--;){var Fe=De[2*te],Ue=De[2*te+1];isNaN(Fe)||isNaN(Ue)||Be.push(Fe,Ue)}ee.fill=Te.fillcolor}}}}if(xe._prevtrace&&"tonext"===xe._prevtrace.fill){var He=_.lineOptions[te-1].positions,Ke=Be.length/2,st=[ue=Ke];for(de=0;de<He.length;de+=2)(isNaN(He[de])||isNaN(He[de+1]))&&(st.push(de/2+Ke+1),ue=de+2);Be=Be.concat(He),ee.hole=st}return ee.fillmode=xe.fill,ee.opacity=xe.opacity,ee.positions=Be,ee}}),_.fill2d.update(_.fillOptions))}var O=r(o.dragmode),D=o.clickmode.indexOf("select")>-1;for(h=0;h<M;h++){var L=l[h][0],B=L.trace,j=L.t,W=j.index,Y=B._length,Q=j.x,ne=j.y;if(B.selectedpoints||O||D){if(O||(O=!0),B.selectedpoints){var X=_.selectBatch[W]=e.selIndices2selPoints(B),$={};for(d=0;d<X.length;d++)$[X[d]]=1;var re=[];for(d=0;d<Y;d++)$[d]||re.push(d);_.unselectBatch[W]=re}var H=j.xpx=new Array(Y),U=j.ypx=new Array(Y);for(d=0;d<Y;d++)H[d]=s.c2p(Q[d]),U[d]=k.c2p(ne[d])}else j.xpx=j.ypx=null}if(O){if(_.select2d||(_.select2d=g(o._glcanvas.data()[1].regl)),_.scatter2d){var G=new Array(M);for(h=0;h<M;h++)G[h]=_.selectBatch[h].length||_.unselectBatch[h].length?_.markerUnselectedOptions[h]:{};_.scatter2d.update(G)}_.select2d&&(_.select2d.update(_.markerOptions),_.select2d.update(_.markerSelectedOptions)),_.glText&&l.forEach(function(ee){a.hasText(((ee||[])[0]||{}).trace||{})&&p(ee)})}else _.scatter2d&&_.scatter2d.update(_.markerOptions);var ie={viewport:i(o,s,k,c._context.plotGlPixelRatio),range:[(s._rl||s.range)[0],(k._rl||k.range)[0],(s._rl||s.range)[1],(k._rl||k.range)[1]]},q=e.repeat(ie,_.count);_.fill2d&&_.fill2d.update(q),_.line2d&&_.line2d.update(q),_.error2d&&_.error2d.update(q.concat(q)),_.scatter2d&&_.scatter2d.update(q),_.select2d&&_.select2d.update(q),_.glText&&_.glText.forEach(function(ee){ee.update(ie)})}else _.init()}}).reglPrecompiled=u},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":943,"../scatter/subtypes":952,"./edit_style":985,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],991:[function(x,oe,ae){"use strict";var g=x("../../lib");oe.exports=function(m,w){var y=w._scene,e={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},r={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return w._scene||((y=w._scene={}).init=function(){g.extendFlat(y,r,e)},y.init(),y.update=function(n){var a=g.repeat(n,y.count);if(y.fill2d&&y.fill2d.update(a),y.scatter2d&&y.scatter2d.update(a),y.line2d&&y.line2d.update(a),y.error2d&&y.error2d.update(a.concat(a)),y.select2d&&y.select2d.update(a),y.glText)for(var t=0;t<y.count;t++)y.glText[t].update(n)},y.draw=function(){for(var n=y.count,a=y.fill2d,t=y.error2d,p=y.line2d,u=y.scatter2d,i=y.glText,c=y.select2d,f=y.selectBatch,l=y.unselectBatch,h=0;h<n;h++){if(a&&y.fillOrder[h]&&a.draw(y.fillOrder[h]),p&&y.lineOptions[h]&&p.draw(h),t&&(y.errorXOptions[h]&&t.draw(h),y.errorYOptions[h]&&t.draw(h+n)),u&&y.markerOptions[h])if(l[h].length){var d=g.repeat([],y.count);d[h]=l[h],u.draw(d)}else f[h].length||u.draw(h);i[h]&&y.textOptions[h]&&i[h].render()}c&&c.draw(f),y.dirty=!1},y.destroy=function(){y.fill2d&&y.fill2d.destroy&&y.fill2d.destroy(),y.scatter2d&&y.scatter2d.destroy&&y.scatter2d.destroy(),y.error2d&&y.error2d.destroy&&y.error2d.destroy(),y.line2d&&y.line2d.destroy&&y.line2d.destroy(),y.select2d&&y.select2d.destroy&&y.select2d.destroy(),y.glText&&y.glText.forEach(function(n){n.destroy&&n.destroy()}),y.lineOptions=null,y.fillOptions=null,y.markerOptions=null,y.markerSelectedOptions=null,y.markerUnselectedOptions=null,y.errorXOptions=null,y.errorYOptions=null,y.textOptions=null,y.textSelectedOptions=null,y.textUnselectedOptions=null,y.selectBatch=null,y.unselectBatch=null,w._scene=null}),y.dirty||g.extendFlat(y,e),y}},{"../../lib":503}],992:[function(x,oe,ae){"use strict";var g=x("../scatter/subtypes"),m=x("./edit_style").styleTextSelection;oe.exports=function(w,y){var e=w.cd,r=w.xaxis,n=w.yaxis,a=[],t=e[0].trace,p=e[0].t,u=t._length,i=p.x,c=p.y,f=p._scene,l=p.index;if(!f)return a;var h=g.hasText(t),d=g.hasMarkers(t);if(!0!==t.visible||!d&&!h)return a;var _=[],s=[];if(!1!==y&&!y.degenerate)for(var k=0;k<u;k++)y.contains([p.xpx[k],p.ypx[k]],!1,k,w)?(_.push(k),a.push({pointNumber:k,x:r.c2d(i[k]),y:n.c2d(c[k])})):s.push(k);if(d){var M=f.scatter2d;if(_.length||s.length){if(!f.selectBatch[l].length&&!f.unselectBatch[l].length){var A=new Array(f.count);A[l]=f.markerUnselectedOptions[l],M.update.apply(M,A)}}else{var E=new Array(f.count);E[l]=f.markerOptions[l],M.update.apply(M,E)}}return f.selectBatch[l]=_,f.unselectBatch[l]=s,h&&m(e),a}},{"../scatter/subtypes":952,"./edit_style":985}],993:[function(x,oe,ae){"use strict";var g=x("../../plots/template_attributes").hovertemplateAttrs,m=x("../../plots/template_attributes").texttemplateAttrs,w=x("../scattergeo/attributes"),y=x("../scatter/attributes"),e=x("../../plots/mapbox/layout_attributes"),r=x("../../plots/attributes"),n=x("../../components/colorscale/attributes"),a=x("../../lib/extend").extendFlat,t=x("../../plot_api/edit_types").overrideAll,p=w.line,u=w.marker;oe.exports=t({lon:w.lon,lat:w.lat,mode:a({},y.mode,{dflt:"markers"}),text:a({},y.text,{}),texttemplate:m({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:a({},y.hovertext,{}),line:{color:p.color,width:p.width},connectgaps:y.connectgaps,marker:a({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:u.opacity,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode},n("marker")),fill:w.fill,fillcolor:y.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:y.selected.marker},unselected:{marker:y.unselected.marker},hoverinfo:a({},r.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:g()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":927,"../scattergeo/attributes":969}],994:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../lib"),w=x("../../constants/numerical").BADNUM,y=x("../../lib/geojson_utils"),e=x("../../components/colorscale"),r=x("../../components/drawing"),n=x("../scatter/make_bubble_size_func"),a=x("../scatter/subtypes"),t=x("../../plots/mapbox/convert_text_opts"),p=x("../../components/fx/helpers").appendArrayPointValue,u=x("../../lib/svg_text_utils").NEWLINES,i=x("../../lib/svg_text_utils").BR_TAG_ALL;function c(){return{geojson:y.makeBlank(),layout:{visibility:"none"},paint:{}}}function f(d,o){return m.isArrayOrTypedArray(d)?o?function(_){return g(d[_])?+d[_]:0}:function(_){return d[_]}:d?function(){return d}:l}function l(){return""}function h(d){return d[0]===w}oe.exports=function(d,o){var _,s=o[0].trace,k=!0===s.visible&&0!==s._length,M="none"!==s.fill,A=a.hasLines(s),E=a.hasMarkers(s),I=a.hasText(s),C=E&&"circle"===s.marker.symbol,R=E&&"circle"!==s.marker.symbol,O=c(),D=c(),L=c(),B=c(),j={fill:O,line:D,circle:L,symbol:B};if(!k)return j;if((M||A)&&(_=y.calcTraceToLineCoords(o)),M&&(O.geojson=y.makePolygon(_),O.layout.visibility="visible",m.extendFlat(O.paint,{"fill-color":s.fillcolor})),A&&(D.geojson=y.makeLine(_),D.layout.visibility="visible",m.extendFlat(D.paint,{"line-width":s.line.width,"line-color":s.line.color,"line-opacity":s.opacity})),C){var W=function(ne){var X,$,re,H,U=ne[0].trace,G=U.marker,ie=U.selectedpoints,q=m.isArrayOrTypedArray(G.color),ee=m.isArrayOrTypedArray(G.size),te=m.isArrayOrTypedArray(G.opacity);function se(Le){return U.opacity*Le}q&&($=e.hasColorscale(U,"marker")?e.makeColorScaleFuncFromTrace(G):m.identity),ee&&(re=n(U)),te&&(H=function(Le){return se(g(Le)?+m.constrain(Le,0,1):0)});var ue,Ce,de=[];for(X=0;X<ne.length;X++){var he=ne[X],xe=he.lonlat;if(!h(xe)){var ge={};$&&(ge.mcc=he.mcc=$(he.mc)),re&&(ge.mrc=he.mrc=re(he.ms)),H&&(ge.mo=H(he.mo)),ie&&(ge.selected=he.selected||0),de.push({type:"Feature",geometry:{type:"Point",coordinates:xe},properties:ge})}}if(ie)for(ue=r.makeSelectedPointStyleFns(U),X=0;X<de.length;X++){var _e=de[X].properties;ue.selectedOpacityFn&&(_e.mo=se(ue.selectedOpacityFn(_e))),ue.selectedColorFn&&(_e.mcc=ue.selectedColorFn(_e)),ue.selectedSizeFn&&(_e.mrc=ue.selectedSizeFn(_e))}return{geojson:{type:"FeatureCollection",features:de},mcc:q||ue&&ue.selectedColorFn?{type:"identity",property:"mcc"}:G.color,mrc:ee||ue&&ue.selectedSizeFn?{type:"identity",property:"mrc"}:(Ce=G.size,Ce/2),mo:te||ue&&ue.selectedOpacityFn?{type:"identity",property:"mo"}:se(G.opacity)}}(o);L.geojson=W.geojson,L.layout.visibility="visible",m.extendFlat(L.paint,{"circle-color":W.mcc,"circle-radius":W.mrc,"circle-opacity":W.mo})}if((R||I)&&(B.geojson=function(ne,X){for(var $=X._fullLayout,re=ne[0].trace,H=re.marker||{},U=H.symbol,G=H.angle,ie="circle"!==U?f(U):l,q="auto"!==G?f(G,!0):l,ee=a.hasText(re)?f(re.text):l,te=[],se=0;se<ne.length;se++){var ue=ne[se];if(!h(ue.lonlat)){var de,he=re.texttemplate;if(he){var xe=Array.isArray(he)?he[se]||"":he,ge=re._module.formatLabels(ue,re,$),_e={};p(_e,re,ue.i),de=m.texttemplateString(xe,ge,$._d3locale,_e,ue,re._meta||{})}else de=ee(se);de&&(de=de.replace(u,"").replace(i,"\n")),te.push({type:"Feature",geometry:{type:"Point",coordinates:ue.lonlat},properties:{symbol:ie(se),angle:q(se),text:de}})}}return{type:"FeatureCollection",features:te}}(o,d),m.extendFlat(B.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),R&&(m.extendFlat(B.layout,{"icon-size":s.marker.size/10}),"angle"in s.marker&&"auto"!==s.marker.angle&&m.extendFlat(B.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),B.layout["icon-allow-overlap"]=s.marker.allowoverlap,m.extendFlat(B.paint,{"icon-opacity":s.opacity*s.marker.opacity,"icon-color":s.marker.color})),I)){var Q=t(s.textposition,(s.marker||{}).size);m.extendFlat(B.layout,{"text-size":s.textfont.size,"text-anchor":Q.anchor,"text-offset":Q.offset}),m.extendFlat(B.paint,{"text-color":s.textfont.color,"text-opacity":s.opacity})}return j}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":944,"../scatter/subtypes":952,"fast-isnumeric":190}],995:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../scatter/subtypes"),w=x("../scatter/marker_defaults"),y=x("../scatter/line_defaults"),e=x("../scatter/text_defaults"),r=x("../scatter/fillcolor_defaults"),n=x("./attributes");oe.exports=function(a,t,p,u){function i(f,l){return g.coerce(a,t,n,f,l)}if(l=t,d=(h=i)("lon")||[],o=h("lat")||[],_=Math.min(d.length,o.length),l._length=_,_){if(i("text"),i("texttemplate"),i("hovertext"),i("hovertemplate"),i("mode"),i("below"),m.hasLines(t)&&(y(a,t,p,u,i,{noDash:!0}),i("connectgaps")),m.hasMarkers(t)){w(a,t,p,u,i,{noLine:!0}),i("marker.allowoverlap"),i("marker.angle");var c=t.marker;"circle"!==c.symbol&&(g.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),g.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}m.hasText(t)&&e(a,t,u,i,{noSelect:!0}),i("fill"),"none"!==t.fill&&r(a,t,p,i),g.coerceSelectionMarkerOpacity(t,i)}else t.visible=!1;var l,h,d,o,_}},{"../../lib":503,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":993}],996:[function(x,oe,ae){"use strict";oe.exports=function(g,m){return g.lon=m.lon,g.lat=m.lat,g}},{}],997:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes");oe.exports=function(m,w,y){var e={},r=y[w.subplot]._subplot.mockAxis,n=m.lonlat;return e.lonLabel=g.tickText(r,r.c2l(n[0]),!0).text,e.latLabel=g.tickText(r,r.c2l(n[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],998:[function(x,oe,ae){"use strict";var g=x("../../components/fx"),m=x("../../lib"),w=x("../scatter/get_trace_color"),y=m.fillText,e=x("../../constants/numerical").BADNUM;function r(n,a,t){if(!n.hovertemplate){var p=(a.hi||n.hoverinfo).split("+"),u=-1!==p.indexOf("all"),i=-1!==p.indexOf("lon"),c=-1!==p.indexOf("lat"),f=a.lonlat,l=[];return u||i&&c?l.push("("+h(f[1])+", "+h(f[0])+")"):i?l.push(t.lon+h(f[0])):c&&l.push(t.lat+h(f[1])),(u||-1!==p.indexOf("text"))&&y(a,n,l),l.join("<br>")}function h(d){return d+"\xb0"}}oe.exports={hoverPoints:function(n,a,t){var p=n.cd,u=p[0].trace,i=n.xa,c=n.ya,f=n.subplot,l=360*(a>=0?Math.floor((a+180)/360):Math.ceil((a-180)/360)),h=a-l;if(g.getClosest(p,function(I){var C=I.lonlat;if(C[0]===e)return 1/0;var R=m.modHalf(C[0],360),O=C[1],D=f.project([R,O]),L=D.x-i.c2p([h,O]),B=D.y-c.c2p([R,t]),j=Math.max(3,I.mrc||0);return Math.max(Math.sqrt(L*L+B*B)-j,1-3/j)},n),!1!==n.index){var d=p[n.index],o=d.lonlat,_=[m.modHalf(o[0],360)+l,o[1]],s=i.c2p(_),k=c.c2p(_),M=d.mrc||1;n.x0=s-M,n.x1=s+M,n.y0=k-M,n.y1=k+M;var A={};A[u.subplot]={_subplot:f};var E=u._module.formatLabels(d,u,A);return n.lonLabel=E.lonLabel,n.latLabel=E.latLabel,n.color=w(u,d),n.extraText=r(u,d,p[0].t.labels),n.hovertemplate=u.hovertemplate,[n]}},getExtraText:r}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":937}],999:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("../scattergeo/calc"),plot:x("./plot"),hoverPoints:x("./hover").hoverPoints,eventData:x("./event_data"),selectPoints:x("./select"),styleOnSelect:function(g,m){m&&m[0].trace._glTrace.update(m)},moduleType:"trace",name:"scattermapbox",basePlotModule:x("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":945,"../scattergeo/calc":970,"./attributes":993,"./defaults":995,"./event_data":996,"./format_labels":997,"./hover":998,"./plot":1e3,"./select":1001}],1e3:[function(x,oe,ae){"use strict";var g=x("./convert"),m=x("../../plots/mapbox/constants").traceLayerPrefix,w=["fill","line","circle","symbol"];function y(r,n){this.type="scattermapbox",this.subplot=r,this.uid=n,this.sourceIds={fill:"source-"+n+"-fill",line:"source-"+n+"-line",circle:"source-"+n+"-circle",symbol:"source-"+n+"-symbol"},this.layerIds={fill:m+n+"-fill",line:m+n+"-line",circle:m+n+"-circle",symbol:m+n+"-symbol"},this.below=null}var e=y.prototype;e.addSource=function(r,n){this.subplot.map.addSource(this.sourceIds[r],{type:"geojson",data:n.geojson})},e.setSourceData=function(r,n){this.subplot.map.getSource(this.sourceIds[r]).setData(n.geojson)},e.addLayer=function(r,n,a){this.subplot.addLayer({type:r,id:this.layerIds[r],source:this.sourceIds[r],layout:n.layout,paint:n.paint},a)},e.update=function(r){var n,a,t,p=this.subplot,u=p.map,i=g(p.gd,r),c=p.belowLookup["trace-"+this.uid];if(c!==this.below){for(n=w.length-1;n>=0;n--)u.removeLayer(this.layerIds[a=w[n]]);for(n=0;n<w.length;n++)t=i[a=w[n]],this.addLayer(a,t,c);this.below=c}for(n=0;n<w.length;n++)t=i[a=w[n]],p.setOptions(this.layerIds[a],"setLayoutProperty",t.layout),"visible"===t.layout.visibility&&(this.setSourceData(a,t),p.setOptions(this.layerIds[a],"setPaintProperty",t.paint));r[0].trace._glTrace=this},e.dispose=function(){for(var r=this.subplot.map,n=w.length-1;n>=0;n--){var a=w[n];r.removeLayer(this.layerIds[a]),r.removeSource(this.sourceIds[a])}},oe.exports=function(r,n){for(var a=n[0].trace,t=new y(r,a.uid),p=g(r.gd,n),u=t.below=r.belowLookup["trace-"+a.uid],i=0;i<w.length;i++){var c=w[i],f=p[c];t.addSource(c,f),t.addLayer(c,f,u)}return n[0].trace._glTrace=t,t}},{"../../plots/mapbox/constants":611,"./convert":994}],1001:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../scatter/subtypes"),w=x("../../constants/numerical").BADNUM;oe.exports=function(y,e){var r,n=y.cd,a=y.xaxis,t=y.yaxis,p=[];if(!m.hasMarkers(n[0].trace))return[];if(!1===e)for(r=0;r<n.length;r++)n[r].selected=0;else for(r=0;r<n.length;r++){var i=n[r],c=i.lonlat;if(c[0]!==w){var f=[g.modHalf(c[0],360),c[1]],l=[a.c2p(f),t.c2p(f)];e.contains(l,null,r,y)?(p.push({pointNumber:r,lon:c[0],lat:c[1]}),i.selected=1):i.selected=0}}return p}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":952}],1002:[function(x,oe,ae){"use strict";var g=x("../../plots/template_attributes").hovertemplateAttrs,m=x("../../plots/template_attributes").texttemplateAttrs,w=x("../../lib/extend").extendFlat,y=x("../scatter/attributes"),e=x("../../plots/attributes"),r=y.line;oe.exports={mode:y.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:y.text,texttemplate:m({editType:"plot"},{keys:["r","theta","text"]}),hovertext:y.hovertext,line:{color:r.color,width:r.width,dash:r.dash,shape:w({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:y.connectgaps,marker:y.marker,cliponaxis:w({},y.cliponaxis,{dflt:!1}),textposition:y.textposition,textfont:y.textfont,fill:w({},y.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:y.fillcolor,hoverinfo:w({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:y.hoveron,hovertemplate:g(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1003:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../constants/numerical").BADNUM,w=x("../../plots/cartesian/axes"),y=x("../scatter/colorscale_calc"),e=x("../scatter/arrays_to_calcdata"),r=x("../scatter/calc_selection"),n=x("../scatter/calc").calcMarkerSize;oe.exports=function(a,t){for(var p=a._fullLayout,u=t.subplot,i=p[u].radialaxis,c=p[u].angularaxis,f=i.makeCalcdata(t,"r"),l=c.makeCalcdata(t,"theta"),h=t._length,d=new Array(h),o=0;o<h;o++){var _=f[o],s=l[o],k=d[o]={};g(_)&&g(s)?(k.r=_,k.theta=s):k.r=m}var M=n(t,h);return t._extremes.x=w.findExtremes(i,f,{ppad:M}),y(a,t),e(d,t),r(d,t),d}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1004:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../scatter/subtypes"),w=x("../scatter/marker_defaults"),y=x("../scatter/line_defaults"),e=x("../scatter/line_shape_defaults"),r=x("../scatter/text_defaults"),n=x("../scatter/fillcolor_defaults"),a=x("../scatter/constants").PTS_LINESONLY,t=x("./attributes");function p(u,i,c,f){var l,h=f("r"),d=f("theta");if(h)d?l=Math.min(h.length,d.length):(l=h.length,f("theta0"),f("dtheta"));else{if(!d)return 0;l=i.theta.length,f("r0"),f("dr")}return i._length=l,l}oe.exports={handleRThetaDefaults:p,supplyDefaults:function(u,i,c,f){function l(o,_){return g.coerce(u,i,t,o,_)}var h=p(0,i,0,l);if(h){l("thetaunit"),l("mode",h<a?"lines+markers":"lines"),l("text"),l("hovertext"),"fills"!==i.hoveron&&l("hovertemplate"),m.hasLines(i)&&(y(u,i,c,f,l),e(u,i,l),l("connectgaps")),m.hasMarkers(i)&&w(u,i,c,f,l,{gradient:!0}),m.hasText(i)&&(l("texttemplate"),r(u,i,f,l));var d=[];(m.hasMarkers(i)||m.hasText(i))&&(l("cliponaxis"),l("marker.maxdisplayed"),d.push("points")),l("fill"),"none"!==i.fill&&(n(u,i,c,l),m.hasLines(i)||e(u,i,l)),"tonext"!==i.fill&&"toself"!==i.fill||d.push("fills"),l("hoveron",d.join("+")||"points"),g.coerceSelectionMarkerOpacity(i,l)}else i.visible=!1}}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1002}],1005:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/cartesian/axes");oe.exports=function(w,y,e){var r,n,a={},t=e[y.subplot]._subplot;t?(r=t.radialAxis,n=t.angularAxis):(r=(t=e[y.subplot]).radialaxis,n=t.angularaxis);var p=r.c2l(w.r);a.rLabel=m.tickText(r,p,!0).text;var u="degrees"===n.thetaunit?g.rad2deg(w.theta):w.theta;return a.thetaLabel=m.tickText(n,u,!0).text,a}},{"../../lib":503,"../../plots/cartesian/axes":554}],1006:[function(x,oe,ae){"use strict";var g=x("../scatter/hover");function m(w,y,e,r){var n=e.radialAxis,a=e.angularAxis;n._hovertitle="r",a._hovertitle="\u03b8";var t={};t[y.subplot]={_subplot:e};var p=y._module.formatLabels(w,y,t);r.rLabel=p.rLabel,r.thetaLabel=p.thetaLabel;var i=[];function c(l,h){i.push(l._hovertitle+": "+h)}if(!y.hovertemplate){var f=(w.hi||y.hoverinfo).split("+");-1!==f.indexOf("all")&&(f=["r","theta","text"]),-1!==f.indexOf("r")&&c(n,r.rLabel),-1!==f.indexOf("theta")&&c(a,r.thetaLabel),-1!==f.indexOf("text")&&r.text&&(i.push(r.text),delete r.text),r.extraText=i.join("<br>")}}oe.exports={hoverPoints:function(w,y,e,r){var n=g(w,y,e,r);if(n&&!1!==n[0].index){var a=n[0];if(void 0===a.index)return n;var t=w.subplot,p=a.cd[a.index],u=a.trace;if(t.isPtInside(p))return a.xLabelVal=void 0,a.yLabelVal=void 0,m(p,u,t,a),a.hovertemplate=u.hovertemplate,n}},makeHoverPointText:m}},{"../scatter/hover":938}],1007:[function(x,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:x("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:x("./attributes"),supplyDefaults:x("./defaults").supplyDefaults,colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),plot:x("./plot"),style:x("../scatter/style").style,styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover").hoverPoints,selectPoints:x("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1002,"./calc":1003,"./defaults":1004,"./format_labels":1005,"./hover":1006,"./plot":1008}],1008:[function(x,oe,ae){"use strict";var g=x("../scatter/plot"),m=x("../../constants/numerical").BADNUM;oe.exports=function(w,y,e){for(var r=y.layers.frontplot.select("g.scatterlayer"),n={xaxis:y.xaxis,yaxis:y.yaxis,plot:y.framework,layerClipId:y._hasClipOnAxisFalse?y.clipIds.forTraces:null},a=y.radialAxis,t=y.angularAxis,p=0;p<e.length;p++)for(var u=e[p],i=0;i<u.length;i++){var c=u[i],f=c.r;if(f===m)c.x=c.y=m;else{var l=a.c2g(f),h=t.c2g(c.theta);c.x=l*Math.cos(h),c.y=l*Math.sin(h)}}g(w,n,e,r)}},{"../../constants/numerical":479,"../scatter/plot":948}],1009:[function(x,oe,ae){"use strict";var g=x("../scatterpolar/attributes"),m=x("../scattergl/attributes"),w=x("../../plots/template_attributes").texttemplateAttrs;oe.exports={mode:g.mode,r:g.r,theta:g.theta,r0:g.r0,dr:g.dr,theta0:g.theta0,dtheta:g.dtheta,thetaunit:g.thetaunit,text:g.text,texttemplate:w({editType:"plot"},{keys:["r","theta","text"]}),hovertext:g.hovertext,hovertemplate:g.hovertemplate,line:m.line,connectgaps:m.connectgaps,marker:m.marker,fill:m.fill,fillcolor:m.fillcolor,textposition:m.textposition,textfont:m.textfont,hoverinfo:g.hoverinfo,selected:g.selected,unselected:g.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":979,"../scatterpolar/attributes":1002}],1010:[function(x,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:x("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),hoverPoints:x("./hover").hoverPoints,selectPoints:x("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":945,"../scattergl/select":992,"./attributes":1009,"./calc":1011,"./defaults":1012,"./format_labels":1013,"./hover":1014}],1011:[function(x,oe,ae){"use strict";var g=x("../scatter/colorscale_calc"),m=x("../scatter/calc").calcMarkerSize,w=x("../scattergl/convert"),y=x("../../plots/cartesian/axes"),e=x("../scattergl/constants").TOO_MANY_POINTS;oe.exports=function(r,n){var a=r._fullLayout,t=n.subplot,p=a[t].radialaxis,u=a[t].angularaxis,i=n._r=p.makeCalcdata(n,"r"),c=n._theta=u.makeCalcdata(n,"theta"),f=n._length,l={};f<i.length&&(i=i.slice(0,f)),f<c.length&&(c=c.slice(0,f)),l.r=i,l.theta=c,g(r,n);var h,d=l.opts=w.style(r,n);return f<e?h=m(n,f):d.marker&&(h=2*(d.marker.sizeAvg||Math.max(d.marker.size,3))),n._extremes.x=y.findExtremes(p,i,{ppad:h}),[{x:!1,y:!1,t:l,trace:n}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":928,"../scatter/colorscale_calc":930,"../scattergl/constants":982,"../scattergl/convert":983}],1012:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../scatter/subtypes"),w=x("../scatterpolar/defaults").handleRThetaDefaults,y=x("../scatter/marker_defaults"),e=x("../scatter/line_defaults"),r=x("../scatter/text_defaults"),n=x("../scatter/fillcolor_defaults"),a=x("../scatter/constants").PTS_LINESONLY,t=x("./attributes");oe.exports=function(p,u,i,c){function f(h,d){return g.coerce(p,u,t,h,d)}var l=w(p,u,c,f);l?(f("thetaunit"),f("mode",l<a?"lines+markers":"lines"),f("text"),f("hovertext"),"fills"!==u.hoveron&&f("hovertemplate"),m.hasLines(u)&&(e(p,u,i,c,f),f("connectgaps")),m.hasMarkers(u)&&y(p,u,i,c,f),m.hasText(u)&&(f("texttemplate"),r(p,u,c,f)),f("fill"),"none"!==u.fill&&n(p,u,i,f),g.coerceSelectionMarkerOpacity(u,f)):u.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"../scatterpolar/defaults":1004,"./attributes":1009}],1013:[function(x,oe,ae){"use strict";var g=x("../scatterpolar/format_labels");oe.exports=function(m,w,y){var e=m.i;return"r"in m||(m.r=w._r[e]),"theta"in m||(m.theta=w._theta[e]),g(m,w,y)}},{"../scatterpolar/format_labels":1005}],1014:[function(x,oe,ae){"use strict";var g=x("../scattergl/hover"),m=x("../scatterpolar/hover").makeHoverPointText;oe.exports={hoverPoints:function(w,y,e,r){var n=w.cd[0].t,a=n.r,t=n.theta,p=g.hoverPoints(w,y,e,r);if(p&&!1!==p[0].index){var u=p[0];if(void 0===u.index)return p;var i=w.subplot,c=u.cd[u.index],f=u.trace;if(c.r=a[u.index],c.theta=t[u.index],i.isPtInside(c))return u.xLabelVal=void 0,u.yLabelVal=void 0,m(c,f,i,u),p}}}},{"../scattergl/hover":988,"../scatterpolar/hover":1006}],1015:[function(x,oe,ae){arguments[4][896][0].apply(ae,arguments)},{"./base_index":1010,"./plot":1016,dup:896}],1016:[function(x,oe,ae){"use strict";var g=x("@plotly/point-cluster"),m=x("fast-isnumeric"),w=x("../scattergl/plot"),y=x("../scattergl/scene_update"),e=x("../scattergl/convert"),r=x("../../lib"),n=x("../scattergl/constants").TOO_MANY_POINTS;oe.exports=function(a,t,p){if(p.length){var u=t.radialAxis,i=t.angularAxis,c=y(a,t);return p.forEach(function(f){if(f&&f[0]&&f[0].trace){var l,h=f[0],d=h.trace,o=h.t,_=d._length,s=o.r,k=o.theta,M=o.opts,A=s.slice(),E=k.slice();for(l=0;l<s.length;l++)t.isPtInside({r:s[l],theta:k[l]})||(A[l]=NaN,E[l]=NaN);var I=new Array(2*_),C=Array(_),R=Array(_);for(l=0;l<_;l++){var O,D,L=A[l];if(m(L)){var B=u.c2g(L),j=i.c2g(E[l],d.thetaunit);O=B*Math.cos(j),D=B*Math.sin(j)}else O=D=NaN;C[l]=I[2*l]=O,R[l]=I[2*l+1]=D}o.tree=g(I),M.marker&&_>=n&&(M.marker.cluster=o.tree),M.marker&&(M.markerSel.positions=M.markerUnsel.positions=M.marker.positions=I),M.line&&I.length>1&&r.extendFlat(M.line,e.linePositions(a,d,I)),M.text&&(r.extendFlat(M.text,{positions:I},e.textPosition(a,d,M.text,M.marker)),r.extendFlat(M.textSel,{positions:I},e.textPosition(a,d,M.text,M.markerSel)),r.extendFlat(M.textUnsel,{positions:I},e.textPosition(a,d,M.text,M.markerUnsel))),M.fill&&!c.fill2d&&(c.fill2d=!0),M.marker&&!c.scatter2d&&(c.scatter2d=!0),M.line&&!c.line2d&&(c.line2d=!0),M.text&&!c.glText&&(c.glText=!0),c.lineOptions.push(M.line),c.fillOptions.push(M.fill),c.markerOptions.push(M.marker),c.markerSelectedOptions.push(M.markerSel),c.markerUnselectedOptions.push(M.markerUnsel),c.textOptions.push(M.text),c.textSelectedOptions.push(M.textSel),c.textUnselectedOptions.push(M.textUnsel),c.selectBatch.push([]),c.unselectBatch.push([]),o.x=C,o.y=R,o.rawx=C,o.rawy=R,o.r=s,o.theta=k,o.positions=I,o._scene=c,o.index=c.count,c.count++}}),w(a,t,p)}},oe.exports.reglPrecompiled={}},{"../../lib":503,"../scattergl/constants":982,"../scattergl/convert":983,"../scattergl/plot":990,"../scattergl/scene_update":991,"@plotly/point-cluster":59,"fast-isnumeric":190}],1017:[function(x,oe,ae){"use strict";var g=x("../../plots/template_attributes").hovertemplateAttrs,m=x("../../plots/template_attributes").texttemplateAttrs,w=x("../../lib/extend").extendFlat,y=x("../scatter/attributes"),e=x("../../plots/attributes"),r=y.line;oe.exports={mode:y.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:y.text,texttemplate:m({editType:"plot"},{keys:["real","imag","text"]}),hovertext:y.hovertext,line:{color:r.color,width:r.width,dash:r.dash,shape:w({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:y.connectgaps,marker:y.marker,cliponaxis:w({},y.cliponaxis,{dflt:!1}),textposition:y.textposition,textfont:y.textfont,fill:w({},y.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:y.fillcolor,hoverinfo:w({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:y.hoveron,hovertemplate:g(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1018:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../../constants/numerical").BADNUM,w=x("../scatter/colorscale_calc"),y=x("../scatter/arrays_to_calcdata"),e=x("../scatter/calc_selection"),r=x("../scatter/calc").calcMarkerSize;oe.exports=function(n,a){for(var t=n._fullLayout,p=a.subplot,i=t[p].imaginaryaxis,c=t[p].realaxis.makeCalcdata(a,"real"),f=i.makeCalcdata(a,"imag"),l=a._length,h=new Array(l),d=0;d<l;d++){var o=c[d],_=f[d],s=h[d]={};g(o)&&g(_)?(s.real=o,s.imag=_):s.real=m}return r(a,l),w(n,a),y(h,a),e(h,a),h}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1019:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../scatter/subtypes"),w=x("../scatter/marker_defaults"),y=x("../scatter/line_defaults"),e=x("../scatter/line_shape_defaults"),r=x("../scatter/text_defaults"),n=x("../scatter/fillcolor_defaults"),a=x("../scatter/constants").PTS_LINESONLY,t=x("./attributes");oe.exports=function(p,u,i,c){function f(d,o){return g.coerce(p,u,t,d,o)}var o,s,k,M,A,l=(o=u,M=(s=f)("real"),A=s("imag"),M&&A&&(k=Math.min(M.length,A.length)),o._length=k,k);if(l){f("mode",l<a?"lines+markers":"lines"),f("text"),f("hovertext"),"fills"!==u.hoveron&&f("hovertemplate"),m.hasLines(u)&&(y(p,u,i,c,f),e(p,u,f),f("connectgaps")),m.hasMarkers(u)&&w(p,u,i,c,f,{gradient:!0}),m.hasText(u)&&(f("texttemplate"),r(p,u,c,f));var h=[];(m.hasMarkers(u)||m.hasText(u))&&(f("cliponaxis"),f("marker.maxdisplayed"),h.push("points")),f("fill"),"none"!==u.fill&&(n(p,u,i,f),m.hasLines(u)||e(p,u,f)),"tonext"!==u.fill&&"toself"!==u.fill||h.push("fills"),f("hoveron",h.join("+")||"points"),g.coerceSelectionMarkerOpacity(u,f)}else u.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1017}],1020:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes");oe.exports=function(m,w,y){var e={},r=y[w.subplot]._subplot;return e.realLabel=g.tickText(r.radialAxis,m.real,!0).text,e.imagLabel=g.tickText(r.angularAxis,m.imag,!0).text,e}},{"../../plots/cartesian/axes":554}],1021:[function(x,oe,ae){"use strict";var g=x("../scatter/hover");function m(w,y,e,r){var n=e.radialAxis,a=e.angularAxis;n._hovertitle="real",a._hovertitle="imag";var t={};t[y.subplot]={_subplot:e};var p=y._module.formatLabels(w,y,t);r.realLabel=p.realLabel,r.imagLabel=p.imagLabel;var i=[];function c(l,h){i.push(l._hovertitle+": "+h)}if(!y.hovertemplate){var f=(w.hi||y.hoverinfo).split("+");-1!==f.indexOf("all")&&(f=["real","imag","text"]),-1!==f.indexOf("real")&&c(n,r.realLabel),-1!==f.indexOf("imag")&&c(a,r.imagLabel),-1!==f.indexOf("text")&&r.text&&(i.push(r.text),delete r.text),r.extraText=i.join("<br>")}}oe.exports={hoverPoints:function(w,y,e,r){var n=g(w,y,e,r);if(n&&!1!==n[0].index){var a=n[0];if(void 0===a.index)return n;var t=w.subplot,p=a.cd[a.index],u=a.trace;if(t.isPtInside(p))return a.xLabelVal=void 0,a.yLabelVal=void 0,m(p,u,t,a),a.hovertemplate=u.hovertemplate,n}},makeHoverPointText:m}},{"../scatter/hover":938}],1022:[function(x,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"scattersmith",basePlotModule:x("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),plot:x("./plot"),style:x("../scatter/style").style,styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover").hoverPoints,selectPoints:x("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1017,"./calc":1018,"./defaults":1019,"./format_labels":1020,"./hover":1021,"./plot":1023}],1023:[function(x,oe,ae){"use strict";var g=x("../scatter/plot"),m=x("../../constants/numerical").BADNUM,w=x("../../plots/smith/helpers").smith;oe.exports=function(y,e,r){for(var n=e.layers.frontplot.select("g.scatterlayer"),a={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},t=0;t<r.length;t++)for(var p=r[t],u=0;u<p.length;u++){var i=p[u],c=i.real;if(c===m)i.x=i.y=m;else{var f=w([c,i.imag]);i.x=f[0],i.y=f[1]}}g(y,a,r,n)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":948}],1024:[function(x,oe,ae){"use strict";var g=x("../../plots/template_attributes").hovertemplateAttrs,m=x("../../plots/template_attributes").texttemplateAttrs,w=x("../scatter/attributes"),y=x("../../plots/attributes"),e=x("../../components/colorscale/attributes"),r=x("../../components/drawing/attributes").dash,n=x("../../lib/extend").extendFlat,a=w.marker,t=w.line,p=a.line;oe.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:n({},w.mode,{dflt:"markers"}),text:n({},w.text,{}),texttemplate:m({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:n({},w.hovertext,{}),line:{color:t.color,width:t.width,dash:r,shape:n({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:w.connectgaps,cliponaxis:w.cliponaxis,fill:n({},w.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:w.fillcolor,marker:n({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:n({width:p.width,editType:"calc"},e("marker.line")),gradient:a.gradient,editType:"calc"},e("marker")),textfont:w.textfont,textposition:w.textposition,selected:w.selected,unselected:w.unselected,hoverinfo:n({},y.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:w.hoveron,hovertemplate:g()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1025:[function(x,oe,ae){"use strict";var g=x("fast-isnumeric"),m=x("../scatter/colorscale_calc"),w=x("../scatter/arrays_to_calcdata"),y=x("../scatter/calc_selection"),e=x("../scatter/calc").calcMarkerSize,r=["a","b","c"],n={a:["b","c"],b:["a","c"],c:["a","b"]};oe.exports=function(a,t){var p,u,i,c,f,l,h=a._fullLayout[t.subplot].sum,d=t.sum||h,o={a:t.a,b:t.b,c:t.c};for(p=0;p<r.length;p++)if(!o[i=r[p]]){for(f=o[n[i][0]],l=o[n[i][1]],c=new Array(f.length),u=0;u<f.length;u++)c[u]=d-f[u]-l[u];o[i]=c}var _,s,k,M,I=t._length,C=new Array(I);for(p=0;p<I;p++)s=o.b[p],k=o.c[p],g(_=o.a[p])&&g(s)&&g(k)?(1!=(M=h/((_=+_)+(s=+s)+(k=+k)))&&(_*=M,s*=M,k*=M),C[p]={x:k-s,y:_,a:_,b:s,c:k}):C[p]={x:!1,y:!1};return e(t,I),m(a,t),w(C,t),y(C,t),C}},{"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1026:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../scatter/constants"),w=x("../scatter/subtypes"),y=x("../scatter/marker_defaults"),e=x("../scatter/line_defaults"),r=x("../scatter/line_shape_defaults"),n=x("../scatter/text_defaults"),a=x("../scatter/fillcolor_defaults"),t=x("./attributes");oe.exports=function(p,u,i,c){function f(s,k){return g.coerce(p,u,t,s,k)}var l,h=f("a"),d=f("b"),o=f("c");if(h?(l=h.length,d?(l=Math.min(l,d.length),o&&(l=Math.min(l,o.length))):l=o?Math.min(l,o.length):0):d&&o&&(l=Math.min(d.length,o.length)),l){u._length=l,f("sum"),f("text"),f("hovertext"),"fills"!==u.hoveron&&f("hovertemplate"),f("mode",l<m.PTS_LINESONLY?"lines+markers":"lines"),w.hasLines(u)&&(e(p,u,i,c,f),r(p,u,f),f("connectgaps")),w.hasMarkers(u)&&y(p,u,i,c,f,{gradient:!0}),w.hasText(u)&&(f("texttemplate"),n(p,u,c,f));var _=[];(w.hasMarkers(u)||w.hasText(u))&&(f("cliponaxis"),f("marker.maxdisplayed"),_.push("points")),f("fill"),"none"!==u.fill&&(a(p,u,i,f),w.hasLines(u)||r(p,u,f)),"tonext"!==u.fill&&"toself"!==u.fill||_.push("fills"),f("hoveron",_.join("+")||"points"),g.coerceSelectionMarkerOpacity(u,f)}else u.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1024}],1027:[function(x,oe,ae){"use strict";oe.exports=function(g,m,w,y,e){if(m.xa&&(g.xaxis=m.xa),m.ya&&(g.yaxis=m.ya),y[e]){var r=y[e];g.a=r.a,g.b=r.b,g.c=r.c}else g.a=m.a,g.b=m.b,g.c=m.c;return g}},{}],1028:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes");oe.exports=function(m,w,y){var e={},r=y[w.subplot]._subplot;return e.aLabel=g.tickText(r.aaxis,m.a,!0).text,e.bLabel=g.tickText(r.baxis,m.b,!0).text,e.cLabel=g.tickText(r.caxis,m.c,!0).text,e}},{"../../plots/cartesian/axes":554}],1029:[function(x,oe,ae){"use strict";var g=x("../scatter/hover");oe.exports=function(m,w,y,e){var r=g(m,w,y,e);if(r&&!1!==r[0].index){var n=r[0];if(void 0===n.index){var t=m.xa._length,p=t*(1-n.y0/m.ya._length)/2,u=t-p;return n.x0=Math.max(Math.min(n.x0,u),p),n.x1=Math.max(Math.min(n.x1,u),p),r}var i=n.cd[n.index],c=n.trace,f=n.subplot;n.a=i.a,n.b=i.b,n.c=i.c,n.xLabelVal=void 0,n.yLabelVal=void 0;var l={};l[c.subplot]={_subplot:f};var h=c._module.formatLabels(i,c,l);n.aLabel=h.aLabel,n.bLabel=h.bLabel,n.cLabel=h.cLabel;var o=[];if(!c.hovertemplate){var _=(i.hi||c.hoverinfo).split("+");-1!==_.indexOf("all")&&(_=["a","b","c"]),-1!==_.indexOf("a")&&s(f.aaxis,n.aLabel),-1!==_.indexOf("b")&&s(f.baxis,n.bLabel),-1!==_.indexOf("c")&&s(f.caxis,n.cLabel)}return n.extraText=o.join("<br>"),n.hovertemplate=c.hovertemplate,r}function s(k,M){o.push(k._hovertitle+": "+M)}}},{"../scatter/hover":938}],1030:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),plot:x("./plot"),style:x("../scatter/style").style,styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover"),selectPoints:x("../scatter/select"),eventData:x("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:x("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1024,"./calc":1025,"./defaults":1026,"./event_data":1027,"./format_labels":1028,"./hover":1029,"./plot":1031}],1031:[function(x,oe,ae){"use strict";var g=x("../scatter/plot");oe.exports=function(m,w,y){var e=w.plotContainer;e.select(".scatterlayer").selectAll("*").remove();var r={xaxis:w.xaxis,yaxis:w.yaxis,plot:e,layerClipId:w._hasClipOnAxisFalse?w.clipIdRelative:null},n=w.layers.frontplot.select("g.scatterlayer");g(m,r,y,n)}},{"../scatter/plot":948}],1032:[function(x,oe,ae){"use strict";var g=x("../scatter/attributes"),m=x("../../components/colorscale/attributes"),w=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=x("../../plots/template_attributes").hovertemplateAttrs,e=x("../scattergl/attributes"),r=x("../../plots/cartesian/constants").idRegex,n=x("../../plot_api/plot_template").templatedArray,a=x("../../lib/extend").extendFlat,t=g.marker,p=t.line,u=a(m("marker.line",{editTypeOverride:"calc"}),{width:a({},p.width,{editType:"calc"}),editType:"calc"}),i=a(m("marker"),{symbol:t.symbol,size:a({},t.size,{editType:"markerSize"}),sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,opacity:t.opacity,colorbar:t.colorbar,line:u,editType:"calc"});function c(f){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:r[f],editType:"plot"}}}i.color.editType=i.cmin.editType=i.cmax.editType="style",oe.exports={dimensions:n("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:a({},e.text,{}),hovertext:a({},e.hovertext,{}),hovertemplate:y(),xhoverformat:w("x"),yhoverformat:w("y"),marker:i,xaxes:c("x"),yaxes:c("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":927,"../scattergl/attributes":979}],1033:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../components/grid");oe.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),calc:x("./calc"),plot:x("./plot"),hoverPoints:x("./hover").hoverPoints,selectPoints:x("./select"),editStyle:x("./edit_style"),meta:{}},g.register(m)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":945,"./attributes":1032,"./calc":1035,"./defaults":1036,"./edit_style":1037,"./hover":1039,"./plot":1041,"./select":1043}],1034:[function(x,oe,ae){"use strict";var g=x("regl-line2d"),m=x("../../registry"),w=x("../../lib/prepare_regl"),y=x("../../plots/get_data").getModuleCalcData,e=x("../../plots/cartesian"),r=x("../../plots/cartesian/axis_ids").getFromId,n=x("../../plots/cartesian/axes").shouldShowZeroLine,a={};function t(u,i,c){for(var l=i._visibleDims,h=c.viewOpts.ranges=new Array(c.matrixOptions.data.length),d=0;d<l.length;d++){var o=l[d],_=h[d]=new Array(4),s=r(u,i._diag[o][0]);s&&(_[0]=s.r2l(s.range[0]),_[2]=s.r2l(s.range[1]));var k=r(u,i._diag[o][1]);k&&(_[1]=k.r2l(k.range[0]),_[3]=k.r2l(k.range[1]))}c.selectBatch.length||c.unselectBatch.length?c.matrix.update({ranges:h},{ranges:h}):c.matrix.update({ranges:h})}function p(u){var i=u._fullLayout,c=i._glcanvas.data()[0].regl,f=i._splomGrid;f||(f=i._splomGrid=g(c)),f.update(function(l){var h,d=l._context.plotGlPixelRatio,o=l._fullLayout,_=o._size,s=[0,0,o.width*d,o.height*d],k={};function M(X,$,re,H,U,G){re*=d,H*=d,U*=d,G*=d;var ie=$[X+"color"],q=$[X+"width"],ee=String(ie+q);ee in k?k[ee].data.push(NaN,NaN,re,H,U,G):k[ee]={data:[re,H,U,G],join:"rect",thickness:q*d,color:ie,viewport:s,range:s,overlay:!1}}for(h in o._splomSubplots){var A,E,I=o._plots[h],C=I.xaxis,R=I.yaxis,O=C._gridVals,D=R._gridVals,L=C._offset,B=C._length,j=R._length,W=_.b+R.domain[0]*_.h,Y=-R._m,Q=-Y*R.r2l(R.range[0],R.calendar);if(C.showgrid)for(h=0;h<O.length;h++)A=L+C.l2p(O[h].x),M("grid",C,A,W,A,W+j);if(R.showgrid)for(h=0;h<D.length;h++)M("grid",R,L,E=W+Q+Y*D[h].x,L+B,E);n(l,C,R)&&(A=L+C.l2p(0),M("zeroline",C,A,W,A,W+j)),n(l,R,C)&&M("zeroline",R,L,E=W+Q+0,L+B,E)}var ne=[];for(h in k)ne.push(k[h]);return ne}(u))}oe.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(u){var i=u._fullLayout,c=m.getModule("splom"),f=y(u.calcdata,c)[0];w(u,["ANGLE_instanced_arrays","OES_element_index_uint"],a)&&(i._hasOnlyLargeSploms&&p(u),c.plot(u,{},f))},drag:function(u){var i=u.calcdata,c=u._fullLayout;c._hasOnlyLargeSploms&&p(u);for(var f=0;f<i.length;f++){var l=i[f][0].trace,h=c._splomScenes[l.uid];"splom"===l.type&&h&&h.matrix&&t(u,l,h)}},updateGrid:p,clean:function(u,i,c,f){var l,h={};if(f._splomScenes){for(l=0;l<u.length;l++){var d=u[l];"splom"===d.type&&(h[d.uid]=1)}for(l=0;l<c.length;l++){var o=c[l];if(!h[o.uid]){var _=f._splomScenes[o.uid];_&&_.destroy&&_.destroy(),f._splomScenes[o.uid]=null,delete f._splomScenes[o.uid]}}}0===Object.keys(f._splomScenes||{}).length&&delete f._splomScenes,f._splomGrid&&!i._hasOnlyLargeSploms&&f._hasOnlyLargeSploms&&(f._splomGrid.destroy(),f._splomGrid=null,delete f._splomGrid),e.clean(u,i,c,f)},updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:a}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1035:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/cartesian/axis_ids"),w=x("../scatter/calc").calcMarkerSize,y=x("../scatter/calc").calcAxisExpansion,e=x("../scatter/colorscale_calc"),r=x("../scattergl/convert").markerSelection,n=x("../scattergl/convert").markerStyle,a=x("./scene_update"),t=x("../../constants/numerical").BADNUM,p=x("../scattergl/constants").TOO_MANY_POINTS;oe.exports=function(u,i){var c,f,l,h,d,o,_=i.dimensions,s=i._length,k={},M=k.cdata=[],A=k.data=[],E=i._visibleDims=[];function I(R,O){for(var D=R.makeCalcdata({v:O.values,vcalendar:i.calendar},"v"),L=0;L<D.length;L++)D[L]=D[L]===t?NaN:D[L];M.push(D),A.push("log"===R.type?g.simpleMap(D,R.c2l):D)}for(c=0;c<_.length;c++)if((l=_[c]).visible){if(h=m.getFromId(u,i._diag[c][0]),d=m.getFromId(u,i._diag[c][1]),h&&d&&h.type!==d.type){g.log("Skipping splom dimension "+c+" with conflicting axis types");continue}h?(I(h,l),d&&"category"===d.type&&(d._categories=h._categories.slice())):I(d,l),E.push(c)}for(e(u,i),g.extendFlat(k,n(i)),o=M.length*s>p?k.sizeAvg||Math.max(k.size,3):w(i,s),f=0;f<E.length;f++)l=_[c=E[f]],h=m.getFromId(u,i._diag[c][0])||{},d=m.getFromId(u,i._diag[c][1])||{},y(u,i,h,d,M[f],M[f],o);var C=a(u,i);return C.matrix||(C.matrix=!0),C.matrixOptions=k,C.selectedOptions=r(i,i.selected),C.unselectedOptions=r(i,i.unselected),[{x:!1,y:!1,t:{},trace:i}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":928,"../scatter/colorscale_calc":930,"../scattergl/constants":982,"../scattergl/convert":983,"./scene_update":1042}],1036:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/array_container_defaults"),w=x("./attributes"),y=x("../scatter/subtypes"),e=x("../scatter/marker_defaults"),r=x("../parcoords/merge_length"),n=x("../scattergl/helpers").isOpenSymbol;function a(t,p){function u(c,f){return g.coerce(t,p,w.dimensions,c,f)}u("label");var i=u("values");i&&i.length?u("visible"):p.visible=!1,u("axis.type"),u("axis.matches")}oe.exports=function(t,p,u,i){function c(s,k){return g.coerce(t,p,w,s,k)}var f=m(t,p,{name:"dimensions",handleItemDefaults:a}),l=c("diagonal.visible"),h=c("showupperhalf"),d=c("showlowerhalf");if(r(p,f,"values")&&(l||h||d)){c("text"),c("hovertext"),c("hovertemplate"),c("xhoverformat"),c("yhoverformat"),e(t,p,u,i,c);var o=n(p.marker.symbol),_=y.isBubble(p);c("marker.line.width",o||_?1:0),function(s,k,M,A){var E,I,C=k.dimensions,R=C.length,O=k.showupperhalf,D=k.showlowerhalf,L=k.diagonal.visible,B=new Array(R),j=new Array(R);for(E=0;E<R;E++){var W=E?E+1:"";B[E]="x"+W,j[E]="y"+W}var Y=A("xaxes",B),Q=A("yaxes",j),ne=k._diag=new Array(R);k._xaxes={},k._yaxes={};var X=[],$=[];function re(ue,de,he,xe){if(ue){var ge=ue.charAt(0),_e=M._splomAxes[ge];if(k["_"+ge+"axes"][ue]=1,xe.push(ue),!(ue in _e)){var Ce=_e[ue]={};he&&(Ce.label=he.label||"",he.visible&&he.axis&&(he.axis.type&&(Ce.type=he.axis.type),he.axis.matches&&(Ce.matches=de)))}}}var H=!L&&!D,U=!L&&!O;for(k._axesDim={},E=0;E<R;E++){var G=C[E],ie=0===E,q=E===R-1,ee=ie&&H||q&&U?void 0:Y[E],te=ie&&U||q&&H?void 0:Q[E];re(ee,te,G,X),re(te,ee,G,$),ne[E]=[ee,te],k._axesDim[ee]=E,k._axesDim[te]=E}for(E=0;E<X.length;E++)for(I=0;I<$.length;I++){var se=X[E]+$[I];E>I&&O||E<I&&D?M._splomSubplots[se]=1:E!==I||!L&&D&&O||(M._splomSubplots[se]=1)}(!D||!L&&O&&D)&&(M._splomGridDflt.xside="bottom",M._splomGridDflt.yside="left")}(0,p,i,c),g.coerceSelectionMarkerOpacity(p,c)}else p.visible=!1}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":898,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scattergl/helpers":987,"./attributes":1032}],1037:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../scatter/colorscale_calc"),w=x("../scattergl/convert").markerStyle;oe.exports=function(y,e){var r=e.trace,n=y._fullLayout._splomScenes[r.uid];if(n){m(y,r),g.extendFlat(n.matrixOptions,w(r));var a=g.extendFlat({},n.matrixOptions,n.viewOpts);n.matrix.update(a,null)}}},{"../../lib":503,"../scatter/colorscale_calc":930,"../scattergl/convert":983}],1038:[function(x,oe,ae){"use strict";ae.getDimIndex=function(g,m){for(var w=m._id,y={x:0,y:1}[w.charAt(0)],e=g._visibleDims,r=0;r<e.length;r++)if(g._diag[e[r]][y]===w)return r;return!1}},{}],1039:[function(x,oe,ae){"use strict";var g=x("./helpers"),m=x("../scattergl/hover").calcHover;oe.exports={hoverPoints:function(w,y,e){var r=w.cd[0].trace,n=w.scene.matrixOptions.cdata,a=w.xa,t=w.ya,p=a.c2p(y),u=t.c2p(e),i=w.distance,c=g.getDimIndex(r,a),f=g.getDimIndex(r,t);if(!1===c||!1===f)return[w];for(var l,h,d=n[c],o=n[f],_=i,s=0;s<d.length;s++){var M=o[s],A=a.c2p(d[s])-p,E=t.c2p(M)-u,I=Math.sqrt(A*A+E*E);I<_&&(_=h=I,l=s)}return w.index=l,w.distance=_,w.dxy=h,void 0===l?[w]:[m(w,d,o,r)]}}},{"../scattergl/hover":988,"./helpers":1038}],1040:[function(x,oe,ae){"use strict";var g=x("./base_index");g.basePlotModule=x("./base_plot"),oe.exports=g},{"./base_index":1033,"./base_plot":1034}],1041:[function(x,oe,ae){"use strict";var g=x("regl-splom"),m=x("../../lib"),w=x("../../plots/cartesian/axis_ids"),y=x("../../components/dragelement/helpers").selectMode;function e(r,n){var a,t,p,u,i,c=r._fullLayout,f=c._size,l=n.trace,h=n.t,d=c._splomScenes[l.uid],o=d.matrixOptions,_=o.cdata,s=c._glcanvas.data()[0].regl,k=c.dragmode;if(0!==_.length){o.lower=l.showupperhalf,o.upper=l.showlowerhalf,o.diagonal=l.diagonal.visible;var M=l._visibleDims,A=_.length,E=d.viewOpts={};for(E.ranges=new Array(A),E.domains=new Array(A),i=0;i<M.length;i++){p=M[i];var I=E.ranges[i]=new Array(4),C=E.domains[i]=new Array(4);(a=w.getFromId(r,l._diag[p][0]))&&(I[0]=a._rl[0],I[2]=a._rl[1],C[0]=a.domain[0],C[2]=a.domain[1]),(t=w.getFromId(r,l._diag[p][1]))&&(I[1]=t._rl[0],I[3]=t._rl[1],C[1]=t.domain[0],C[3]=t.domain[1])}var R=r._context.plotGlPixelRatio,O=f.l*R,D=f.b*R;E.viewport=[O,D,f.w*R+O,f.h*R+D],!0===d.matrix&&(d.matrix=g(s));var j=c.clickmode.indexOf("select")>-1,W=!0;if(y(k)||l.selectedpoints||j){var Y=l._length;if(l.selectedpoints){d.selectBatch=l.selectedpoints;var Q=l.selectedpoints,ne={};for(p=0;p<Q.length;p++)ne[Q[p]]=!0;var X=[];for(p=0;p<Y;p++)ne[p]||X.push(p);d.unselectBatch=X}var $=h.xpx=new Array(A),re=h.ypx=new Array(A);for(i=0;i<M.length;i++){if(a=w.getFromId(r,l._diag[p=M[i]][0]))for($[i]=new Array(Y),u=0;u<Y;u++)$[i][u]=a.c2p(_[i][u]);if(t=w.getFromId(r,l._diag[p][1]))for(re[i]=new Array(Y),u=0;u<Y;u++)re[i][u]=t.c2p(_[i][u])}if(d.selectBatch.length||d.unselectBatch.length){var H=m.extendFlat({},o,d.unselectedOptions,E),U=m.extendFlat({},o,d.selectedOptions,E);d.matrix.update(H,U),W=!1}}else h.xpx=h.ypx=null;if(W){var G=m.extendFlat({},o,E);d.matrix.update(G,null)}}}oe.exports=function(r,n,a){if(a.length)for(var t=0;t<a.length;t++)e(r,a[t][0])}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1042:[function(x,oe,ae){"use strict";var g=x("../../lib");oe.exports=function(m,w){var y=m._fullLayout,e=w.uid,r=y._splomScenes;r||(r=y._splomScenes={});var n={dirty:!0,selectBatch:[],unselectBatch:[]},a=r[w.uid];return a||((a=r[e]=g.extendFlat({},n,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){a.matrix&&a.matrix.draw&&(a.selectBatch.length||a.unselectBatch.length?a.matrix.draw(a.unselectBatch,a.selectBatch):a.matrix.draw()),a.dirty=!1},a.destroy=function(){a.matrix&&a.matrix.destroy&&a.matrix.destroy(),a.matrixOptions=null,a.selectBatch=null,a.unselectBatch=null,a=null}),a.dirty||g.extendFlat(a,n),a}},{"../../lib":503}],1043:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../scatter/subtypes"),w=x("./helpers");oe.exports=function(y,e){var r=y.cd,n=r[0].trace,a=r[0].t,t=y.scene,p=t.matrixOptions.cdata,u=y.xaxis,i=y.yaxis,c=[];if(!t)return c;var f=!m.hasMarkers(n)&&!m.hasText(n);if(!0!==n.visible||f)return c;var l=w.getDimIndex(n,u),h=w.getDimIndex(n,i);if(!1===l||!1===h)return c;var d=a.xpx[l],o=a.ypx[h],_=p[l],s=p[h],k=[],M=[];if(!1!==e&&!e.degenerate)for(var A=0;A<_.length;A++)e.contains([d[A],o[A]],null,A,y)?(k.push(A),c.push({pointNumber:A,x:_[A],y:s[A]})):M.push(A);var E=t.matrixOptions;return k.length||M.length?t.selectBatch.length||t.unselectBatch.length||t.matrix.update(t.unselectedOptions,g.extendFlat({},E,t.selectedOptions,t.viewOpts)):t.matrix.update(E,null),t.selectBatch=k,t.unselectBatch=M,c}},{"../../lib":503,"../scatter/subtypes":952,"./helpers":1038}],1044:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale/attributes"),m=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../mesh3d/attributes"),e=x("../../plots/attributes"),r=x("../../lib/extend").extendFlat,n={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:w({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:m("u",1),vhoverformat:m("v",1),whoverformat:m("w",1),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),showlegend:r({},e.showlegend,{dflt:!1})};r(n,g("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(a){n[a]=y[a]}),n.hoverinfo=r({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),n.transforms=void 0,oe.exports=n},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1045:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/colorscale/calc");function w(r){var n,a,t,p,u,i,c,f,l,h,d,o,_=r._x,s=r._y,k=r._z,M=r._len,A=-1/0,E=1/0,I=-1/0,C=1/0,R=-1/0,O=1/0,D="";for(M&&(c=_[0],l=s[0],d=k[0]),M>1&&(f=_[M-1],h=s[M-1],o=k[M-1]),n=0;n<M;n++)A=Math.max(A,_[n]),E=Math.min(E,_[n]),I=Math.max(I,s[n]),C=Math.min(C,s[n]),R=Math.max(R,k[n]),O=Math.min(O,k[n]),p||_[n]===c||(p=!0,D+="x"),u||s[n]===l||(u=!0,D+="y"),i||k[n]===d||(i=!0,D+="z");p||(D+="x"),u||(D+="y"),i||(D+="z");var L=y(r._x),B=y(r._y),j=y(r._z);D=(D=(D=D.replace("x",(c>f?"-":"+")+"x")).replace("y",(l>h?"-":"+")+"y")).replace("z",(d>o?"-":"+")+"z");var W=function(){M=0,L=[],B=[],j=[]};(!M||M<L.length*B.length*j.length)&&W();var Y=function(ge){return"x"===ge?_:"y"===ge?s:k},Q=function(ge){return"x"===ge?L:"y"===ge?B:j},ne=function(ge){return ge[M-1]<ge[0]?-1:1},X=Y(D[1]),$=Y(D[3]),re=Y(D[5]),H=Q(D[1]).length,U=Q(D[3]).length,G=Q(D[5]).length,ie=!1,q=function(ge,_e,Ce){return H*(U*ge+_e)+Ce},ee=ne(Y(D[1])),te=ne(Y(D[3])),se=ne(Y(D[5]));for(n=0;n<G-1;n++){for(a=0;a<U-1;a++){for(t=0;t<H-1;t++){var ue=q(n,a,t),de=q(n,a,t+1),he=q(n,a+1,t),xe=q(n+1,a,t);if(X[ue]*ee<X[de]*ee&&$[ue]*te<$[he]*te&&re[ue]*se<re[xe]*se||(ie=!0),ie)break}if(ie)break}if(ie)break}return ie&&(g.warn("Encountered arbitrary coordinates! Unable to input data grid."),W()),{xMin:E,yMin:C,zMin:O,xMax:A,yMax:I,zMax:R,Xs:L,Ys:B,Zs:j,len:M,fill:D}}function y(r){return g.distinctVals(r).vals}function e(r,n){if(void 0===n&&(n=r.length),g.isTypedArray(r))return r.subarray(0,n);for(var a=[],t=0;t<n;t++)a[t]=+r[t];return a}oe.exports={calc:function(r,n){n._len=Math.min(n.u.length,n.v.length,n.w.length,n.x.length,n.y.length,n.z.length),n._u=e(n.u,n._len),n._v=e(n.v,n._len),n._w=e(n.w,n._len),n._x=e(n.x,n._len),n._y=e(n.y,n._len),n._z=e(n.z,n._len);var a=w(n);n._gridFill=a.fill,n._Xs=a.Xs,n._Ys=a.Ys,n._Zs=a.Zs,n._len=a.len;var t,p,u,i=0;n.starts&&(t=e(n.starts.x||[]),p=e(n.starts.y||[]),u=e(n.starts.z||[]),i=Math.min(t.length,p.length,u.length)),n._startsX=t||[],n._startsY=p||[],n._startsZ=u||[];var c,f=0,l=1/0;for(c=0;c<n._len;c++){var h=n._u[c],d=n._v[c],o=n._w[c],_=Math.sqrt(h*h+d*d+o*o);f=Math.max(f,_),l=Math.min(l,_)}for(m(r,n,{vals:[l,f],containerStr:"",cLetter:"c"}),c=0;c<i;c++){var s=t[c];a.xMax=Math.max(a.xMax,s),a.xMin=Math.min(a.xMin,s);var k=p[c];a.yMax=Math.max(a.yMax,k),a.yMin=Math.min(a.yMin,k);var M=u[c];a.zMax=Math.max(a.zMax,M),a.zMin=Math.min(a.zMin,M)}n._slen=i,n._normMax=f,n._xbnds=[a.xMin,a.xMax],n._ybnds=[a.yMin,a.yMax],n._zbnds=[a.zMin,a.zMax]},filter:e,processGrid:w}},{"../../components/colorscale/calc":374,"../../lib":503}],1046:[function(x,oe,ae){"use strict";var g=x("../../../stackgl_modules").gl_streamtube3d,m=g.createTubeMesh,w=x("../../lib"),y=x("../../lib/gl_format_color").parseColorScale,e=x("../../components/colorscale").extractOpts,r=x("../../plots/gl3d/zip3"),n={xaxis:0,yaxis:1,zaxis:2};function a(c,f){this.scene=c,this.uid=f,this.mesh=null,this.data=null}var t=a.prototype;function p(c){var f=c.length;return f>2?c.slice(1,f-1):2===f?[(c[0]+c[1])/2]:c}function u(c){var f=c.length;return 1===f?[.5,.5]:[c[1]-c[0],c[f-1]-c[f-2]]}function i(c,f){var l=c.fullSceneLayout,h=c.dataScale,d=f._len,o={};function _(H,U){var G=l[U],ie=h[n[U]];return w.simpleMap(H,function(q){return G.d2l(q)*ie})}if(o.vectors=r(_(f._u,"xaxis"),_(f._v,"yaxis"),_(f._w,"zaxis"),d),!d)return{positions:[],cells:[]};var s=_(f._Xs,"xaxis"),k=_(f._Ys,"yaxis"),M=_(f._Zs,"zaxis");if(o.meshgrid=[s,k,M],o.gridFill=f._gridFill,f._slen)o.startingPositions=r(_(f._startsX,"xaxis"),_(f._startsY,"yaxis"),_(f._startsZ,"zaxis"));else{for(var A=k[0],E=p(s),I=p(M),C=new Array(E.length*I.length),R=0,O=0;O<E.length;O++)for(var D=0;D<I.length;D++)C[R++]=[E[O],A,I[D]];o.startingPositions=C}o.colormap=y(f),o.tubeSize=f.sizeref,o.maxLength=f.maxdisplayed;var L=_(f._xbnds,"xaxis"),B=_(f._ybnds,"yaxis"),j=_(f._zbnds,"zaxis"),W=u(s),Y=u(k),Q=u(M),X=g(o,[[L[0]-W[0],B[0]-Y[0],j[0]-Q[0]],[L[1]+W[1],B[1]+Y[1],j[1]+Q[1]]]),$=e(f);X.vertexIntensityBounds=[$.min/f._normMax,$.max/f._normMax];var re=f.lightposition;return X.lightPosition=[re.x,re.y,re.z],X.ambient=f.lighting.ambient,X.diffuse=f.lighting.diffuse,X.specular=f.lighting.specular,X.roughness=f.lighting.roughness,X.fresnel=f.lighting.fresnel,X.opacity=f.opacity,f._pad=X.tubeScale*f.sizeref*2,X}t.handlePick=function(c){var f=this.scene.fullSceneLayout,l=this.scene.dataScale;function h(_,s){var M=l[n[s]];return f[s].l2c(_)/M}if(c.object===this.mesh){var d=c.data.position,o=c.data.velocity;return c.traceCoordinate=[h(d[0],"xaxis"),h(d[1],"yaxis"),h(d[2],"zaxis"),h(o[0],"xaxis"),h(o[1],"yaxis"),h(o[2],"zaxis"),c.data.intensity*this.data._normMax,c.data.divergence],c.textLabel=this.data.hovertext||this.data.text,!0}},t.update=function(c){this.data=c;var f=i(this.scene,c);this.mesh.update(f)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},oe.exports=function(c,f){var l=c.glplot.gl,h=i(c,f),d=m(l,h),o=new a(c,f.uid);return o.mesh=d,o.data=f,d._trace=o,c.glplot.add(d),o}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1047:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/colorscale/defaults"),w=x("./attributes");oe.exports=function(y,e,r,n){function a(l,h){return g.coerce(y,e,w,l,h)}var t=a("u"),p=a("v"),u=a("w"),i=a("x"),c=a("y"),f=a("z");t&&t.length&&p&&p.length&&u&&u.length&&i&&i.length&&c&&c.length&&f&&f.length?(a("starts.x"),a("starts.y"),a("starts.z"),a("maxdisplayed"),a("sizeref"),a("lighting.ambient"),a("lighting.diffuse"),a("lighting.specular"),a("lighting.roughness"),a("lighting.fresnel"),a("lightposition.x"),a("lightposition.y"),a("lightposition.z"),m(y,e,n,a,{prefix:"",cLetter:"c"}),a("text"),a("hovertext"),a("hovertemplate"),a("uhoverformat"),a("vhoverformat"),a("whoverformat"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1044}],1048:[function(x,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"streamtube",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:x("./calc").calc,plot:x("./convert"),eventData:function(g,m){return g.tubex=g.x,g.tubey=g.y,g.tubez=g.z,g.tubeu=m.traceCoordinate[3],g.tubev=m.traceCoordinate[4],g.tubew=m.traceCoordinate[5],g.norm=m.traceCoordinate[6],g.divergence=m.traceCoordinate[7],delete g.x,delete g.y,delete g.z,g},meta:{}}},{"../../plots/gl3d":598,"./attributes":1044,"./calc":1045,"./convert":1046,"./defaults":1047}],1049:[function(x,oe,ae){"use strict";var g=x("../../plots/attributes"),m=x("../../plots/template_attributes").hovertemplateAttrs,w=x("../../plots/template_attributes").texttemplateAttrs,y=x("../../components/colorscale/attributes"),e=x("../../plots/domain").attributes,r=x("../pie/attributes"),n=x("./constants"),a=x("../../lib/extend").extendFlat;oe.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:a({colors:{valType:"data_array",editType:"calc"},line:{color:a({},r.marker.line.color,{dflt:null}),width:a({},r.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},y("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:r.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:w({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:r.hovertext,hoverinfo:a({},g.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:m({},{keys:n.eventDataKeys}),textfont:r.textfont,insidetextorientation:r.insidetextorientation,insidetextfont:r.insidetextfont,outsidetextfont:a({},r.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:r.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"./constants":1052}],1050:[function(x,oe,ae){"use strict";var g=x("../../plots/plots");ae.name="sunburst",ae.plot=function(m,w,y,e){g.plotBasePlot(ae.name,m,w,y,e)},ae.clean=function(m,w,y,e){g.cleanBasePlot(ae.name,m,w,y,e)}},{"../../plots/plots":619}],1051:[function(x,oe,ae){"use strict";var g=x("d3-hierarchy"),m=x("fast-isnumeric"),w=x("../../lib"),y=x("../../components/colorscale").makeColorScaleFuncFromTrace,e=x("../pie/calc").makePullColorFn,r=x("../pie/calc").generateExtendedColors,n=x("../../components/colorscale").calc,a=x("../../constants/numerical").ALMOST_EQUAL,t={},p={},u={};ae.calc=function(i,c){var f,l,h,d,o,_,s=i._fullLayout,k=c.ids,M=w.isArrayOrTypedArray(k),A=c.labels,E=c.parents,I=c.values,C=w.isArrayOrTypedArray(I),R=[],O={},D={},L=function(te){return te||"number"==typeof te},B=function(te){return!C||m(I[te])&&I[te]>=0};M?(f=Math.min(k.length,E.length),l=function(te){return L(k[te])&&B(te)},h=function(te){return String(k[te])}):(f=Math.min(A.length,E.length),l=function(te){return L(A[te])&&B(te)},h=function(te){return String(A[te])}),C&&(f=Math.min(f,I.length));for(var j=0;j<f;j++)if(l(j)){var W=h(j),Y=L(E[j])?String(E[j]):"",Q={i:j,id:W,pid:Y,label:L(A[j])?String(A[j]):""};C&&(Q.v=+I[j]),R.push(Q),o=W,O[d=Y]?O[d].push(o):O[d]=[o],D[o]=1}if(O[""]){if(O[""].length>1){for(var ne=w.randstr(),X=0;X<R.length;X++)""===R[X].pid&&(R[X].pid=ne);R.unshift({hasMultipleRoots:!0,id:ne,pid:"",label:""})}}else{var $,re=[];for($ in O)D[$]||re.push($);if(1!==re.length)return w.warn(["Multiple implied roots, cannot build",c.type,"hierarchy of",c.name+".","These roots include:",re.join(", ")].join(" "));R.unshift({hasImpliedRoot:!0,id:$=re[0],pid:"",label:$})}try{_=g.stratify().id(function(te){return te.id}).parentId(function(te){return te.pid})(R)}catch(te){return w.warn(["Failed to build",c.type,"hierarchy of",c.name+".","Error:",te.message].join(" "))}var H=g.hierarchy(_),U=!1;if(C)switch(c.branchvalues){case"remainder":H.sum(function(te){return te.data.v});break;case"total":H.each(function(te){var se=te.data.data,ue=se.v;if(te.children){var de=te.children.reduce(function(he,xe){return he+xe.data.data.v},0);if((se.hasImpliedRoot||se.hasMultipleRoots)&&(ue=de),ue<de*a)return U=!0,w.warn(["Total value for node",te.data.data.id,"of",c.name,"is smaller than the sum of its children.","\nparent value =",ue,"\nchildren sum =",de].join(" "))}te.value=ue})}else!function te(se,ue,de){var he=0,xe=se.children;if(xe){for(var ge=xe.length,_e=0;_e<ge;_e++)he+=te(xe[_e],ue,de);de.branches&&he++}else de.leaves&&he++;return se.value=se.data.data.value=he,ue._values||(ue._values=[]),ue._values[se.data.data.i]=he,he}(H,c,{branches:-1!==c.count.indexOf("branches"),leaves:-1!==c.count.indexOf("leaves")});if(!U){var G,ie;c.sort&&H.sort(function(te,se){return se.value-te.value});var q=c.marker.colors||[];return c._hasColorscale?(!!q.length||(q=C?c.values:c._values),n(i,c,{vals:q,containerStr:"marker",cLetter:"c"}),ie=y(c.marker)):G=e(s["_"+c.type+"colormap"]),H.each(function(te){var se=te.data.data;se.color=c._hasColorscale?ie(q[se.i]):G(q[se.i],se.id)}),R[0].hierarchy=H,R}},ae._runCrossTraceCalc=function(i,c){var f=c._fullLayout,l=c.calcdata,h=f[i+"colorway"],d=f["_"+i+"colormap"];f["extend"+i+"colors"]&&(h=r(h,"icicle"===i?u:"treemap"===i?p:t));var o,_=0;function s(A){var E=A.data.data,I=E.id;!1===E.color&&(d[I]?E.color=d[I]:A.parent?A.parent.parent?E.color=A.parent.data.data.color:(d[I]=E.color=h[_%h.length],_++):E.color=o)}for(var k=0;k<l.length;k++){var M=l[k][0];M.trace.type===i&&M.hierarchy&&(o=M.trace.root.color,M.hierarchy.each(s))}},ae.crossTraceCalc=function(i){return ae._runCrossTraceCalc("sunburst",i)}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":903,"d3-hierarchy":115,"fast-isnumeric":190}],1052:[function(x,oe,ae){"use strict";oe.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1053:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./attributes"),w=x("../../plots/domain").defaults,y=x("../bar/defaults").handleText,e=x("../../components/colorscale"),r=e.hasColorscale,n=e.handleDefaults;oe.exports=function(a,t,p,u){function i(o,_){return g.coerce(a,t,m,o,_)}var c=i("labels"),f=i("parents");if(c&&c.length&&f&&f.length){var l=i("values");i(l&&l.length?"branchvalues":"count"),i("level"),i("maxdepth"),i("marker.line.width")&&i("marker.line.color",u.paper_bgcolor),i("marker.colors");var h=t._hasColorscale=r(a,"marker","colors")||(a.marker||{}).coloraxis;h&&n(a,t,u,i,{prefix:"marker.",cLetter:"c"}),i("leaf.opacity",h?1:.7);var d=i("text");i("texttemplate"),t.texttemplate||i("textinfo",Array.isArray(d)?"text+label":"label"),i("hovertext"),i("hovertemplate"),y(a,t,u,i,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),i("insidetextorientation"),i("sort"),i("rotation"),i("root.color"),w(t,u,i),t._length=null}else t.visible=!1}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1049}],1054:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../registry"),w=x("../../components/fx/helpers").appendArrayPointValue,y=x("../../components/fx"),e=x("../../lib"),r=x("../../lib/events"),n=x("./helpers"),a=x("../pie/helpers").formatPieValue;function t(p,u,i){for(var c=p.data.data,f={curveNumber:u.index,pointNumber:c.i,data:u._input,fullData:u},l=0;l<i.length;l++){var h=i[l];h in p&&(f[h]=p[h])}return"parentString"in p&&!n.isHierarchyRoot(p)&&(f.parent=p.parentString),w(f,u,c.i),f}oe.exports=function(p,u,i,c,f){var l=c[0],h=l.trace,d=l.hierarchy,o="sunburst"===h.type,_="treemap"===h.type||"icicle"===h.type;"_hasHoverLabel"in h||(h._hasHoverLabel=!1),"_hasHoverEvent"in h||(h._hasHoverEvent=!1),p.on("mouseover",function(s){var k=i._fullLayout;if(!i._dragging&&!1!==k.hovermode){var M,A=i._fullData[h.index],E=s.data.data,I=E.i,C=n.isHierarchyRoot(s),R=n.getParent(d,s),O=n.getValue(s),D=function(ee){return e.castOption(A,I,ee)},L=D("hovertemplate"),B=y.castHoverinfo(A,k,I),j=k.separators;if(L||B&&"none"!==B&&"skip"!==B){var W,Y;o&&(W=l.cx+s.pxmid[0]*(1-s.rInscribed),Y=l.cy+s.pxmid[1]*(1-s.rInscribed)),_&&(W=s._hoverX,Y=s._hoverY);var Q,ne={},X=[],$=[],re=function(ee){return-1!==X.indexOf(ee)};B&&(X="all"===B?A._module.attributes.hoverinfo.flags:B.split("+")),ne.label=E.label,re("label")&&ne.label&&$.push(ne.label),E.hasOwnProperty("v")&&(ne.value=E.v,ne.valueLabel=a(ne.value,j),re("value")&&$.push(ne.valueLabel)),ne.currentPath=s.currentPath=n.getPath(s.data),re("current path")&&!C&&$.push(ne.currentPath);var H=[],U=function(){-1===H.indexOf(Q)&&($.push(Q),H.push(Q))};ne.percentParent=s.percentParent=O/n.getValue(R),ne.parent=s.parentString=n.getPtLabel(R),re("percent parent")&&(Q=n.formatPercent(ne.percentParent,j)+" of "+ne.parent,U()),ne.percentEntry=s.percentEntry=O/n.getValue(u),ne.entry=s.entry=n.getPtLabel(u),!re("percent entry")||C||s.onPathbar||(Q=n.formatPercent(ne.percentEntry,j)+" of "+ne.entry,U()),ne.percentRoot=s.percentRoot=O/n.getValue(d),ne.root=s.root=n.getPtLabel(d),re("percent root")&&!C&&(Q=n.formatPercent(ne.percentRoot,j)+" of "+ne.root,U()),ne.text=D("hovertext")||D("text"),re("text")&&e.isValidTextValue(Q=ne.text)&&$.push(Q),M=[t(s,A,f.eventDataKeys)];var G={trace:A,y:Y,_x0:s._x0,_x1:s._x1,_y0:s._y0,_y1:s._y1,text:$.join("<br>"),name:L||re("name")?A.name:void 0,color:D("hoverlabel.bgcolor")||E.color,borderColor:D("hoverlabel.bordercolor"),fontFamily:D("hoverlabel.font.family"),fontSize:D("hoverlabel.font.size"),fontColor:D("hoverlabel.font.color"),nameLength:D("hoverlabel.namelength"),textAlign:D("hoverlabel.align"),hovertemplate:L,hovertemplateLabels:ne,eventData:M};o&&(G.x0=W-s.rInscribed*s.rpx1,G.x1=W+s.rInscribed*s.rpx1,G.idealAlign=s.pxmid[0]<0?"left":"right"),_&&(G.x=W,G.idealAlign=W<0?"left":"right");var ie=[];y.loneHover(G,{container:k._hoverlayer.node(),outerContainer:k._paper.node(),gd:i,inOut_bbox:ie}),M[0].bbox=ie[0],h._hasHoverLabel=!0}if(_){var q=p.select("path.surface");f.styleOne(q,s,A,{hovered:!0})}h._hasHoverEvent=!0,i.emit("plotly_hover",{points:M||[t(s,A,f.eventDataKeys)],event:g.event})}}),p.on("mouseout",function(s){var k=i._fullLayout,M=i._fullData[h.index],A=g.select(this).datum();if(h._hasHoverEvent&&(s.originalEvent=g.event,i.emit("plotly_unhover",{points:[t(A,M,f.eventDataKeys)],event:g.event}),h._hasHoverEvent=!1),h._hasHoverLabel&&(y.loneUnhover(k._hoverlayer.node()),h._hasHoverLabel=!1),_){var E=p.select("path.surface");f.styleOne(E,A,M,{hovered:!1})}}),p.on("click",function(s){var k=i._fullLayout,M=i._fullData[h.index],A=o&&(n.isHierarchyRoot(s)||n.isLeaf(s)),E=n.getPtId(s),I=n.isEntry(s)?n.findEntryWithChild(d,E):n.findEntryWithLevel(d,E),C=n.getPtId(I),R={points:[t(s,M,f.eventDataKeys)],event:g.event};A||(R.nextLevel=C);var O=r.triggerHandler(i,"plotly_"+h.type+"click",R);if(!1!==O&&k.hovermode&&(i._hoverdata=[t(s,M,f.eventDataKeys)],y.click(i,g.event)),!A&&!1!==O&&!i._dragging&&!i._transitioning){m.call("_storeDirectGUIEdit",M,k._tracePreGUI[M.uid],{level:M.level});var D={data:[{level:C}],traces:[h.index]},L={frame:{redraw:!1,duration:f.transitionTime},transition:{duration:f.transitionTime,easing:f.transitionEasing},mode:"immediate",fromcurrent:!0};y.loneUnhover(k._hoverlayer.node()),m.call("animate",i,D,L)}})}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":906,"./helpers":1055,"@plotly/d3":58}],1055:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/color"),w=x("../../lib/setcursor"),y=x("../pie/helpers");function e(r){return r.data.data.pid}ae.findEntryWithLevel=function(r,n){var a;return n&&r.eachAfter(function(t){if(ae.getPtId(t)===n)return a=t.copy()}),a||r},ae.findEntryWithChild=function(r,n){var a;return r.eachAfter(function(t){for(var p=t.children||[],u=0;u<p.length;u++)if(ae.getPtId(p[u])===n)return a=t.copy()}),a||r},ae.isEntry=function(r){return!r.parent},ae.isLeaf=function(r){return!r.children},ae.getPtId=function(r){return r.data.data.id},ae.getPtLabel=function(r){return r.data.data.label},ae.getValue=function(r){return r.value},ae.isHierarchyRoot=function(r){return""===e(r)},ae.setSliceCursor=function(r,n,a){var t=a.isTransitioning;if(!t){var p=r.datum();t=a.hideOnRoot&&ae.isHierarchyRoot(p)||a.hideOnLeaves&&ae.isLeaf(p)}w(r,t?null:"pointer")},ae.getInsideTextFontKey=function(r,n,a,t,p){var i=a.data.data.i;return g.castOption(n,i,((p||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+r)||g.castOption(n,i,"textfont."+r)||t.size},ae.getOutsideTextFontKey=function(r,n,a,t){var p=a.data.data.i;return g.castOption(n,p,"outsidetextfont."+r)||g.castOption(n,p,"textfont."+r)||t.size},ae.isOutsideText=function(r,n){return!r._hasColorscale&&ae.isHierarchyRoot(n)},ae.determineTextFont=function(r,n,a,t){return ae.isOutsideText(r,n)?{color:ae.getOutsideTextFontKey("color",p=r,u=n,i=a),family:ae.getOutsideTextFontKey("family",p,u,i),size:ae.getOutsideTextFontKey("size",p,u,i)}:function(p,u,i,c){var l=u.data.data,h=l.i,d=g.castOption(p,h,((c||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!d&&p._input.textfont&&(d=g.castOption(p._input,h,"textfont.color")),{color:d||m.contrast(l.color),family:ae.getInsideTextFontKey("family",p,u,i,c),size:ae.getInsideTextFontKey("size",p,u,i,c)}}(r,n,a,t);var p,u,i},ae.hasTransition=function(r){return!!(r&&r.duration>0)},ae.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},ae.isHeader=function(r,n){return!(ae.isLeaf(r)||r.depth===n._maxDepth-1)},ae.getParent=function(r,n){return ae.findEntryWithLevel(r,e(n))},ae.listPath=function(r,n){var a=r.parent;if(!a)return[];var t=n?[a.data[n]]:[a];return ae.listPath(a,n).concat(t)},ae.getPath=function(r){return ae.listPath(r,"label").join("/")+"/"},ae.formatValue=y.formatPieValue,ae.formatPercent=function(r,n){var a=g.formatPercent(r,0);return"0%"===a&&(a=y.formatPiePercent(r,n)),a}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":906}],1056:[function(x,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"sunburst",basePlotModule:x("./base_plot"),categories:[],animatable:!0,attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot").plot,style:x("./style").style,colorbar:x("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":1049,"./base_plot":1050,"./calc":1051,"./defaults":1053,"./layout_attributes":1057,"./layout_defaults":1058,"./plot":1059,"./style":1060}],1057:[function(x,oe,ae){"use strict";oe.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1058:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./layout_attributes");oe.exports=function(w,y){function e(r,n){return g.coerce(w,y,m,r,n)}e("sunburstcolorway",y.colorway),e("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1057}],1059:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("d3-hierarchy"),w=x("d3-interpolate").interpolate,y=x("../../components/drawing"),e=x("../../lib"),r=x("../../lib/svg_text_utils"),n=x("../bar/uniform_text"),a=n.recordMinTextSize,t=n.clearMinTextSize,p=x("../pie/plot"),u=x("../pie/helpers").getRotationAngle,i=p.computeTransform,c=p.transformInsideText,f=x("./style").styleOne,l=x("../bar/style").resizeText,h=x("./fx"),d=x("./constants"),o=x("./helpers");function _(k,M,A,E){var I=k._fullLayout,C=!I.uniformtext.mode&&o.hasTransition(E),R=g.select(A).selectAll("g.slice"),O=M[0],D=O.trace,B=o.findEntryWithLevel(O.hierarchy,D.level),j=o.getMaxDepth(D),W=I._size,Y=D.domain,ne=W.h*(Y.y[1]-Y.y[0]),X=.5*Math.min(W.w*(Y.x[1]-Y.x[0]),ne),$=O.cx=W.l+W.w*(Y.x[1]+Y.x[0])/2,re=O.cy=W.t+W.h*(1-Y.y[0])-ne/2;if(!B)return R.remove();var H=null,U={};C&&R.each(function(Be){U[o.getPtId(Be)]={rpx0:Be.rpx0,rpx1:Be.rpx1,x0:Be.x0,x1:Be.x1,transform:Be.transform},!H&&o.isEntry(Be)&&(H=Be)});var Be,G=(Be=B,m.partition().size([2*Math.PI,Be.height+1])(Be)).descendants(),ie=B.height+1,q=0,ee=j;O.hasMultipleRoots&&o.isHierarchyRoot(B)&&(G=G.slice(1),ie-=1,q=1,ee+=1),G=G.filter(function(Be){return Be.y1<=ee});var te=u(D.rotation);te&&G.forEach(function(Be){Be.x0+=te,Be.x1+=te});var se=Math.min(ie,j),ue=function(Be){return(Be-q)/se*X},de=function(Be,ve){return[Be*Math.cos(ve),-Be*Math.sin(ve)]},he=function(Be){return e.pathAnnulus(Be.rpx0,Be.rpx1,Be.x0,Be.x1,$,re)},xe=function(Be){return $+s(Be)[0]*(Be.transform.rCenter||0)+(Be.transform.x||0)},ge=function(Be){return re+s(Be)[1]*(Be.transform.rCenter||0)+(Be.transform.y||0)};(R=R.data(G,o.getPtId)).enter().append("g").classed("slice",!0),C?R.exit().transition().each(function(){var Be=g.select(this);Be.select("path.surface").transition().attrTween("d",function(ve){var Te=function(Pe){var De,Fe=o.getPtId(Pe),Ue=U[Fe],He=U[o.getPtId(B)];if(He){var Ke=(Pe.x1>He.x1?2*Math.PI:0)+te;De=Pe.rpx1<He.rpx1?{x0:Pe.x0,x1:Pe.x1,rpx0:0,rpx1:0}:{x0:Ke,x1:Ke,rpx0:Pe.rpx0,rpx1:Pe.rpx1}}else{var st,Ve=o.getPtId(Pe.parent);R.each(function(xt){if(o.getPtId(xt)===Ve)return st=xt});var $e,Qe=st.children;Qe.forEach(function(xt,kt){if(o.getPtId(xt)===Fe)return $e=kt});var tt=Qe.length,ut=w(st.x0,st.x1);De={rpx0:X,rpx1:X,x0:ut($e/tt),x1:ut(($e+1)/tt)}}return w(Ue,De)}(ve);return function(Pe){return he(Te(Pe))}}),Be.select("g.slicetext").attr("opacity",0)}).remove():R.exit().remove(),R.order();var _e=null;if(C&&H){var Ce=o.getPtId(H);R.each(function(Be){null===_e&&o.getPtId(Be)===Ce&&(_e=Be.x1)})}var Le=R;function Ie(Be){var ve=Be.parent,Te=U[o.getPtId(ve)],Pe={};if(Te){var De=ve.children,Fe=De.indexOf(Be),Ue=De.length,He=w(Te.x0,Te.x1);Pe.x0=He(Fe/Ue),Pe.x1=He(Fe/Ue)}else Pe.x0=Pe.x1=0;return Pe}C&&(Le=Le.transition().each("end",function(){var Be=g.select(this);o.setSliceCursor(Be,k,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Le.each(function(Be){var Ke,ve=g.select(this),Te=e.ensureSingle(ve,"path","surface",function(Ke){Ke.style("pointer-events","all")});Be.rpx0=ue(Be.y0),Be.rpx1=ue(Be.y1),Be.xmid=(Be.x0+Be.x1)/2,Be.pxmid=de(Be.rpx1,Be.xmid),Be.midangle=-(Be.xmid-Math.PI/2),Be.startangle=-(Be.x0-Math.PI/2),Be.stopangle=-(Be.x1-Math.PI/2),Be.halfangle=.5*Math.min(e.angleDelta(Be.x0,Be.x1)||Math.PI,Math.PI),Be.ring=1-Be.rpx0/Be.rpx1,Be.rInscribed=0===(Ke=Be).rpx0&&e.isFullCircle([Ke.x0,Ke.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(Ke.halfangle)),Ke.ring/2)),C?Te.transition().attrTween("d",function(Ke){var st=function(Ve){var $e,Qe=U[o.getPtId(Ve)],tt={x0:Ve.x0,x1:Ve.x1,rpx0:Ve.rpx0,rpx1:Ve.rpx1};if(Qe)$e=Qe;else if(H)if(Ve.parent)if(_e){var ut=(Ve.x1>_e?2*Math.PI:0)+te;$e={x0:ut,x1:ut}}else e.extendFlat($e={rpx0:X,rpx1:X},Ie(Ve));else $e={rpx0:0,rpx1:0};else $e={x0:te,x1:te};return w($e,tt)}(Ke);return function(Ve){return he(st(Ve))}}):Te.attr("d",he),ve.call(h,B,k,M,{eventDataKeys:d.eventDataKeys,transitionTime:d.CLICK_TRANSITION_TIME,transitionEasing:d.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,k,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:k._transitioning}),Te.call(f,Be,D);var Pe=e.ensureSingle(ve,"g","slicetext"),De=e.ensureSingle(Pe,"text","",function(Ke){Ke.attr("data-notex",1)}),Fe=e.ensureUniformFontSize(k,o.determineTextFont(D,Be,I.font));De.text(ae.formatSliceLabel(Be,B,D,M,I)).classed("slicetext",!0).attr("text-anchor","middle").call(y.font,Fe).call(r.convertToTspans,k);var Ue=y.bBox(De.node());Be.transform=c(Ue,Be,O),Be.transform.targetX=xe(Be),Be.transform.targetY=ge(Be);var He=function(Ke,st){var Ve=Ke.transform;return i(Ve,st),Ve.fontSize=Fe.size,a(D.type,Ve,I),e.getTextTransform(Ve)};C?De.transition().attrTween("transform",function(Ke){var st=function(Ve){var $e,Qe=U[o.getPtId(Ve)],tt=Ve.transform;if(Qe)$e=Qe;else if($e={rpx1:Ve.rpx1,transform:{textPosAngle:tt.textPosAngle,scale:0,rotate:tt.rotate,rCenter:tt.rCenter,x:tt.x,y:tt.y}},H)if(Ve.parent)if(_e){var ut=Ve.x1>_e?2*Math.PI:0;$e.x0=$e.x1=ut}else e.extendFlat($e,Ie(Ve));else $e.x0=$e.x1=te;else $e.x0=$e.x1=te;var xt=w($e.transform.textPosAngle,Ve.transform.textPosAngle),kt=w($e.rpx1,Ve.rpx1),Bt=w($e.x0,Ve.x0),Rt=w($e.x1,Ve.x1),ft=w($e.transform.scale,tt.scale),lt=w($e.transform.rotate,tt.rotate),Ft=0===tt.rCenter?3:0===$e.transform.rCenter?1/3:1,Jt=w($e.transform.rCenter,tt.rCenter);return function(ln){var dn=kt(ln),cn=Bt(ln),Tn=Rt(ln),nn=Jt(Math.pow(ln,Ft)),Me={pxmid:de(dn,(cn+Tn)/2),rpx1:dn,transform:{textPosAngle:xt(ln),rCenter:nn,x:tt.x,y:tt.y}};return a(D.type,tt,I),{transform:{targetX:xe(Me),targetY:ge(Me),scale:ft(ln),rotate:lt(ln),rCenter:nn}}}}(Ke);return function(Ve){return He(st(Ve),Ue)}}):De.attr("transform",He(Be,Ue))})}function s(k){return A=k.transform.textPosAngle,[(M=k.rpx1)*Math.sin(A),-M*Math.cos(A)];var M,A}ae.plot=function(k,M,A,E){var I,C,R=k._fullLayout,O=R._sunburstlayer,D=!A,L=!R.uniformtext.mode&&o.hasTransition(A);t("sunburst",R),(I=O.selectAll("g.trace.sunburst").data(M,function(B){return B[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),I.order(),L?(E&&(C=E()),g.transition().duration(A.duration).ease(A.easing).each("end",function(){C&&C()}).each("interrupt",function(){C&&C()}).each(function(){O.selectAll("g.trace").each(function(B){_(k,B,this,A)})})):(I.each(function(B){_(k,B,this,A)}),R.uniformtext.mode&&l(k,R._sunburstlayer.selectAll(".trace"),"sunburst")),D&&I.exit().remove()},ae.formatSliceLabel=function(k,M,A,E,I){var C=A.texttemplate,R=A.textinfo;if(!(C||R&&"none"!==R))return"";var O=I.separators,L=k.data.data,B=E[0].hierarchy,j=o.isHierarchyRoot(k),W=o.getParent(B,k),Y=o.getValue(k);if(!C){var Q,ne=R.split("+"),X=function(te){return-1!==ne.indexOf(te)},$=[];if(X("label")&&L.label&&$.push(L.label),L.hasOwnProperty("v")&&X("value")&&$.push(o.formatValue(L.v,O)),!j){X("current path")&&$.push(o.getPath(k.data));var re=0;X("percent parent")&&re++,X("percent entry")&&re++,X("percent root")&&re++;var H=re>1;if(re){var U,G=function(te){Q=o.formatPercent(U,O),H&&(Q+=" of "+te),$.push(Q)};X("percent parent")&&!j&&(U=Y/o.getValue(W),G("parent")),X("percent entry")&&(U=Y/o.getValue(M),G("entry")),X("percent root")&&(U=Y/o.getValue(B),G("root"))}}return X("text")&&(Q=e.castOption(A,L.i,"text"),e.isValidTextValue(Q)&&$.push(Q)),$.join("<br>")}var ie=e.castOption(A,L.i,"texttemplate");if(!ie)return"";var q={};L.label&&(q.label=L.label),L.hasOwnProperty("v")&&(q.value=L.v,q.valueLabel=o.formatValue(L.v,O)),q.currentPath=o.getPath(k.data),j||(q.percentParent=Y/o.getValue(W),q.percentParentLabel=o.formatPercent(q.percentParent,O),q.parent=o.getPtLabel(W)),q.percentEntry=Y/o.getValue(M),q.percentEntryLabel=o.formatPercent(q.percentEntry,O),q.entry=o.getPtLabel(M),q.percentRoot=Y/o.getValue(B),q.percentRootLabel=o.formatPercent(q.percentRoot,O),q.root=o.getPtLabel(B),L.hasOwnProperty("color")&&(q.color=L.color);var ee=e.castOption(A,L.i,"text");return(e.isValidTextValue(ee)||""===ee)&&(q.text=ee),q.customdata=e.castOption(A,L.i,"customdata"),e.texttemplateString(ie,q,I._d3locale,q,A._meta||{})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":906,"../pie/plot":910,"./constants":1052,"./fx":1054,"./helpers":1055,"./style":1060,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1060:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/color"),w=x("../../lib"),y=x("../bar/uniform_text").resizeText;function e(r,n,a){var t=n.data.data,p=!n.children,u=t.i,i=w.castOption(a,u,"marker.line.color")||m.defaultLine,c=w.castOption(a,u,"marker.line.width")||0;r.style("stroke-width",c).call(m.fill,t.color).call(m.stroke,i).style("opacity",p?a.leaf.opacity:null)}oe.exports={style:function(r){var n=r._fullLayout._sunburstlayer.selectAll(".trace");y(r,n,"sunburst"),n.each(function(a){var t=g.select(this),p=a[0].trace;t.style("opacity",p.opacity),t.selectAll("path.surface").each(function(u){g.select(this).call(e,u,p)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1061:[function(x,oe,ae){"use strict";var g=x("../../components/color"),m=x("../../components/colorscale/attributes"),w=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=x("../../plots/template_attributes").hovertemplateAttrs,e=x("../../plots/attributes"),r=x("../../lib/extend").extendFlat,n=x("../../plot_api/edit_types").overrideAll;function a(p){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:g.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:g.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var t=oe.exports=n(r({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:y(),xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},m("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:a(),y:a(),z:a()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:r({},m.zauto,{}),zmin:r({},m.zmin,{}),zmax:r({},m.zmax,{})},hoverinfo:r({},e.hoverinfo),showlegend:r({},e.showlegend,{dflt:!1})}),"calc","nested");t.x.editType=t.y.editType=t.z.editType="calc+clearAxisTypes",t.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1062:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale/calc");oe.exports=function(m,w){g(m,w,w.surfacecolor?{vals:w.surfacecolor,containerStr:"",cLetter:"c"}:{vals:w.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1063:[function(x,oe,ae){"use strict";var g=x("../../../stackgl_modules").gl_surface3d,m=x("../../../stackgl_modules").ndarray,w=x("../../../stackgl_modules").ndarray_linear_interpolate.d2,y=x("../heatmap/interp2d"),e=x("../heatmap/find_empties"),r=x("../../lib").isArrayOrTypedArray,n=x("../../lib/gl_format_color").parseColorScale,a=x("../../lib/str2rgbarray"),t=x("../../components/colorscale").extractOpts;function p(A,E,I){this.scene=A,this.uid=I,this.surface=E,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var u=p.prototype;u.getXat=function(A,E,I,C){var R=r(this.data.x)?r(this.data.x[0])?this.data.x[E][A]:this.data.x[A]:A;return void 0===I?R:C.d2l(R,0,I)},u.getYat=function(A,E,I,C){var R=r(this.data.y)?r(this.data.y[0])?this.data.y[E][A]:this.data.y[E]:E;return void 0===I?R:C.d2l(R,0,I)},u.getZat=function(A,E,I,C){var R=this.data.z[E][A];return null===R&&this.data.connectgaps&&this.data._interpolatedZ&&(R=this.data._interpolatedZ[E][A]),void 0===I?R:C.d2l(R,0,I)},u.handlePick=function(A){if(A.object===this.surface){var I=(A.data.index[1]-1)/this.dataScaleY-1,C=Math.max(Math.min(Math.round((A.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),R=Math.max(Math.min(Math.round(I),this.data._ylength-1),0);A.index=[C,R],A.traceCoordinate=[this.getXat(C,R),this.getYat(C,R),this.getZat(C,R)],A.dataCoordinate=[this.getXat(C,R,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(C,R,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(C,R,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var O=0;O<3;O++)null!=A.dataCoordinate[O]&&(A.dataCoordinate[O]*=this.scene.dataScale[O]);var L=this.data.hovertext||this.data.text;return A.textLabel=Array.isArray(L)&&L[R]&&void 0!==L[R][C]?L[R][C]:L||"",A.data.dataCoordinate=A.dataCoordinate.slice(),this.surface.highlight(A.data),this.scene.glplot.spikes.position=A.dataCoordinate,!0}};var i=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function c(A,E){if(A<E)return 0;for(var I=0;0===Math.floor(A%E);)A/=E,I++;return I}function f(A){for(var E=[],I=0;I<i.length;I++)E.push(c(A,i[I]));return E}function l(A){for(var E=f(A),I=A,C=0;C<i.length;C++)if(E[C]>0){I=i[C];break}return I}function h(A,E){if(!(A<1||E<1)){for(var I=f(A),C=f(E),R=1,O=0;O<i.length;O++)R*=Math.pow(i[O],Math.max(I[O],C[O]));return R}}u.calcXnums=function(A){var E,I=[];for(E=1;E<A;E++){var C=this.getXat(E-1,0),R=this.getXat(E,0);I[E-1]=R!==C&&null!=C&&null!=R?Math.abs(R-C):0}var O=0;for(E=1;E<A;E++)O+=I[E-1];for(E=1;E<A;E++)I[E-1]=0===I[E-1]?1:Math.round(O/I[E-1]);return I},u.calcYnums=function(A){var E,I=[];for(E=1;E<A;E++){var C=this.getYat(0,E-1),R=this.getYat(0,E);I[E-1]=R!==C&&null!=C&&null!=R?Math.abs(R-C):0}var O=0;for(E=1;E<A;E++)O+=I[E-1];for(E=1;E<A;E++)I[E-1]=0===I[E-1]?1:Math.round(O/I[E-1]);return I};var d=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],o=d[9],_=d[13];function s(A,E,I){var C=I[8]+I[2]*E[0]+I[5]*E[1];return A[0]=(I[6]+I[0]*E[0]+I[3]*E[1])/C,A[1]=(I[7]+I[1]*E[0]+I[4]*E[1])/C,A}function k(A,E,I){return function(C,R,O,D){for(var L=[0,0],B=C.shape[0],j=C.shape[1],W=0;W<B;W++)for(var Y=0;Y<j;Y++)O(L,[W,Y],D),C.set(W,Y,w(R,L[0],L[1]))}(A,E,s,I),A}function M(A,E){for(var I=!1,C=0;C<A.length;C++)if(E===A[C]){I=!0;break}!1===I&&A.push(E)}u.estimateScale=function(A,E){for(var I=1+function(R){if(0!==R.length){for(var O=1,D=0;D<R.length;D++)O=h(O,R[D]);return O}}(0===E?this.calcXnums(A):this.calcYnums(A));I<o;)I*=2;for(;I>_;)I--,I/=l(I),++I<o&&(I=_);var C=Math.round(I/A);return C>1?C:1},u.refineCoords=function(A){for(var E=this.dataScaleX,I=this.dataScaleY,C=A[0].shape[0],R=A[0].shape[1],O=0|Math.floor(A[0].shape[0]*E+1),D=0|Math.floor(A[0].shape[1]*I+1),L=1+C+1,B=1+R+1,j=m(new Float32Array(L*B),[L,B]),W=[1/E,0,0,0,1/I,0,0,0,1],Y=0;Y<A.length;++Y){this.surface.padField(j,A[Y]);var Q=m(new Float32Array(O*D),[O,D]);k(Q,j,W),A[Y]=Q}},u.setContourLevels=function(){var A,E,C=[[],[],[]],R=[!1,!1,!1],O=!1;for(A=0;A<3;++A)if(this.showContour[A]&&(O=!0,this.contourSize[A]>0&&null!==this.contourStart[A]&&null!==this.contourEnd[A]&&this.contourEnd[A]>this.contourStart[A]))for(R[A]=!0,E=this.contourStart[A];E<this.contourEnd[A];E+=this.contourSize[A])M(C[A],E*this.scene.dataScale[A]);if(O){var D=[[],[],[]];for(A=0;A<3;++A)this.showContour[A]&&(D[A]=R[A]?C[A]:this.scene.contourLevels[A]);this.surface.update({levels:D})}},u.update=function(A){var E,I,C,R,O=this.scene,D=O.fullSceneLayout,L=this.surface,B=n(A),j=O.dataScale,W=A.z[0].length,Y=A._ylength,Q=O.contourLevels;this.data=A;var ne=[];for(E=0;E<3;E++)for(ne[E]=[],I=0;I<W;I++)ne[E][I]=[];for(I=0;I<W;I++)for(C=0;C<Y;C++)ne[0][I][C]=this.getXat(I,C,A.xcalendar,D.xaxis),ne[1][I][C]=this.getYat(I,C,A.ycalendar,D.yaxis),ne[2][I][C]=this.getZat(I,C,A.zcalendar,D.zaxis);if(A.connectgaps)for(A._emptypoints=e(ne[2]),y(ne[2],A._emptypoints),A._interpolatedZ=[],I=0;I<W;I++)for(A._interpolatedZ[I]=[],C=0;C<Y;C++)A._interpolatedZ[I][C]=ne[2][I][C];for(E=0;E<3;E++)for(I=0;I<W;I++)for(C=0;C<Y;C++)null==(R=ne[E][I][C])?ne[E][I][C]=NaN:R=ne[E][I][C]*=j[E];for(E=0;E<3;E++)for(I=0;I<W;I++)for(C=0;C<Y;C++)null!=(R=ne[E][I][C])&&(this.minValues[E]>R&&(this.minValues[E]=R),this.maxValues[E]<R&&(this.maxValues[E]=R));for(E=0;E<3;E++)this.objectOffset[E]=.5*(this.minValues[E]+this.maxValues[E]);for(E=0;E<3;E++)for(I=0;I<W;I++)for(C=0;C<Y;C++)null!=(R=ne[E][I][C])&&(ne[E][I][C]-=this.objectOffset[E]);var X=[m(new Float32Array(W*Y),[W,Y]),m(new Float32Array(W*Y),[W,Y]),m(new Float32Array(W*Y),[W,Y])];for(E=0;E<3;E++)for(I=0;I<W;I++)for(C=0;C<Y;C++)X[E].set(I,C,ne[E][I][C]);ne=[];var $={colormap:B,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!A.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:A.opacityscale,opacity:A.opacity},re=t(A);if($.intensityBounds=[re.min,re.max],A.surfacecolor){var H=m(new Float32Array(W*Y),[W,Y]);for(I=0;I<W;I++)for(C=0;C<Y;C++)H.set(I,C,A.surfacecolor[C][I]);X.push(H)}else $.intensityBounds[0]*=j[2],$.intensityBounds[1]*=j[2];(_<X[0].shape[0]||_<X[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(X[0].shape[0],0),this.dataScaleY=this.estimateScale(X[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(X)),A.surfacecolor&&($.intensity=X.pop());var q,ee,te,U=[!0,!0,!0],G=["x","y","z"];for(E=0;E<3;++E){var ie=A.contours[G[E]];U[E]=ie.highlight,$.showContour[E]=ie.show||ie.highlight,$.showContour[E]&&($.contourProject[E]=[ie.project.x,ie.project.y,ie.project.z],ie.show?(this.showContour[E]=!0,$.levels[E]=Q[E],L.highlightColor[E]=$.contourColor[E]=a(ie.color),L.highlightTint[E]=$.contourTint[E]=ie.usecolormap?0:1,$.contourWidth[E]=ie.width,this.contourStart[E]=ie.start,this.contourEnd[E]=ie.end,this.contourSize[E]=ie.size):(this.showContour[E]=!1,this.contourStart[E]=null,this.contourEnd[E]=null,this.contourSize[E]=0),ie.highlight&&($.dynamicColor[E]=a(ie.highlightcolor),$.dynamicWidth[E]=ie.highlightwidth))}(ee=(q=B)[0].rgb)[0]===(te=q[q.length-1].rgb)[0]&&ee[1]===te[1]&&ee[2]===te[2]&&ee[3]===te[3]&&($.vertexColor=!0),$.objectOffset=this.objectOffset,$.coords=X,L.update($),L.visible=A.visible,L.enableDynamic=U,L.enableHighlight=U,L.snapToData=!0,"lighting"in A&&(L.ambientLight=A.lighting.ambient,L.diffuseLight=A.lighting.diffuse,L.specularLight=A.lighting.specular,L.roughness=A.lighting.roughness,L.fresnel=A.lighting.fresnel),"lightposition"in A&&(L.lightPosition=[A.lightposition.x,A.lightposition.y,A.lightposition.z])},u.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},oe.exports=function(A,E){var C=g({gl:A.glplot.gl}),R=new p(A,C,E.uid);return C._trace=R,R.update(E),A.glplot.add(C),R}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1064:[function(x,oe,ae){"use strict";var g=x("../../registry"),m=x("../../lib"),w=x("../../components/colorscale/defaults"),y=x("./attributes");function e(n,a,t,p){var u=p("opacityscale");"max"===u?a.opacityscale=[[0,.1],[1,1]]:"min"===u?a.opacityscale=[[0,1],[1,.1]]:"extremes"===u?a.opacityscale=function(i,c){for(var f=[],l=0;l<32;l++){var h=l/31,d=.1+.9*(1-Math.pow(Math.sin(1*h*Math.PI),2));f.push([h,Math.max(0,Math.min(1,d))])}return f}():function(i){var c=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||0!=+i[0][0]||1!=+i[i.length-1][0])return!1;for(var f=0;f<i.length;f++){var l=i[f];if(2!==l.length||+l[0]<c)return!1;c=+l[0]}return!0}(u)||(a.opacityscale=void 0)}function r(n,a,t){a in n&&!(t in n)&&(n[t]=n[a])}oe.exports={supplyDefaults:function(n,a,t,p){var u,i;function c(M,A){return m.coerce(n,a,y,M,A)}var f=c("x"),l=c("y"),h=c("z");if(!h||!h.length||f&&f.length<1||l&&l.length<1)a.visible=!1;else{a._xlength=Array.isArray(f)&&m.isArrayOrTypedArray(f[0])?h.length:h[0].length,a._ylength=h.length,g.getComponentMethod("calendars","handleTraceDefaults")(n,a,["x","y","z"],p),c("text"),c("hovertext"),c("hovertemplate"),c("xhoverformat"),c("yhoverformat"),c("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(M){c(M)});var d=c("surfacecolor"),o=["x","y","z"];for(u=0;u<3;++u){var _="contours."+o[u],s=c(_+".show"),k=c(_+".highlight");if(s||k)for(i=0;i<3;++i)c(_+".project."+o[i]);s&&(c(_+".color"),c(_+".width"),c(_+".usecolormap")),k&&(c(_+".highlightcolor"),c(_+".highlightwidth")),c(_+".start"),c(_+".end"),c(_+".size")}d||(r(n,"zmin","cmin"),r(n,"zmax","cmax"),r(n,"zauto","cauto")),w(n,a,p,c,{prefix:"",cLetter:"c"}),e(0,a,0,c),a._length=null}},opacityscaleDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1061}],1065:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:x("./calc"),plot:x("./convert"),moduleType:"trace",name:"surface",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1061,"./calc":1062,"./convert":1063,"./defaults":1064}],1066:[function(x,oe,ae){"use strict";var g=x("../../components/annotations/attributes"),m=x("../../lib/extend").extendFlat,w=x("../../plot_api/edit_types").overrideAll,y=x("../../plots/font_attributes"),e=x("../../plots/domain").attributes,r=x("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;(oe.exports=w({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:r("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:m({},g.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:m({},y({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:r("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:m({},g.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:m({},y({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1067:[function(x,oe,ae){"use strict";var g=x("../../plots/get_data").getModuleCalcData,m=x("./plot");ae.name="table",ae.plot=function(w){var y=g(w.calcdata,"table")[0];y.length&&m(w,y)},ae.clean=function(w,y,e,r){var n=r._has&&r._has("table"),a=y._has&&y._has("table");n&&!a&&r._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1074}],1068:[function(x,oe,ae){"use strict";var g=x("../../lib/gup").wrap;oe.exports=function(){return g({})}},{"../../lib/gup":500}],1069:[function(x,oe,ae){"use strict";oe.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1070:[function(x,oe,ae){"use strict";var g=x("./constants"),m=x("../../lib/extend").extendFlat,w=x("fast-isnumeric");function y(u){if(Array.isArray(u)){for(var i=0,c=0;c<u.length;c++)i=Math.max(i,y(u[c]));return i}return u}function e(u,i){return u+i}function r(u){var i,c=u.slice(),f=1/0,l=0;for(i=0;i<c.length;i++)Array.isArray(c[i])||(c[i]=[c[i]]),f=Math.min(f,c[i].length),l=Math.max(l,c[i].length);if(f!==l)for(i=0;i<c.length;i++){var h=l-c[i].length;h&&(c[i]=c[i].concat(n(h)))}return c}function n(u){for(var i=new Array(u),c=0;c<u;c++)i[c]="";return i}function a(u){return u.calcdata.columns.reduce(function(i,c){return c.xIndex<u.xIndex?i+c.columnWidth:i},0)}function t(u,i){return Object.keys(u).map(function(c){return m({},u[c],{auxiliaryBlocks:i})})}function p(u,i){for(var c,f={},l=0,h=0,d={firstRowIndex:null,lastRowIndex:null,rows:[]},o=0,_=0,s=0;s<u.length;s++)d.rows.push({rowIndex:s,rowHeight:c=u[s]}),((h+=c)>=i||s===u.length-1)&&(f[l]=d,d.key=_++,d.firstRowIndex=o,d.lastRowIndex=s,d={firstRowIndex:null,lastRowIndex:null,rows:[]},l+=h,o=s+1,h=0);return f}oe.exports=function(u,i){var c=r(i.cells.values),f=function(j){return j.slice(i.header.values.length,j.length)},l=r(i.header.values);l.length&&!l[0].length&&(l[0]=[""],l=r(l));var h=l.concat(f(c).map(function(){return n((l[0]||[""]).length)})),d=i.domain,o=Math.floor(u._fullLayout._size.w*(d.x[1]-d.x[0])),_=Math.floor(u._fullLayout._size.h*(d.y[1]-d.y[0])),s=i.header.values.length?h[0].map(function(){return i.header.height}):[g.emptyHeaderHeight],k=c.length?c[0].map(function(){return i.cells.height}):[],M=s.reduce(e,0),A=p(k,_-M+g.uplift),E=t(p(s,M),[]),I=t(A,E),C={},R=i._fullInput.columnorder.concat(f(c.map(function(j,W){return W}))),O=h.map(function(j,W){var Y=Array.isArray(i.columnwidth)?i.columnwidth[Math.min(W,i.columnwidth.length-1)]:i.columnwidth;return w(Y)?Number(Y):1}),D=O.reduce(e,0);O=O.map(function(j){return j/D*o});var L=Math.max(y(i.header.line.width),y(i.cells.line.width)),B={key:i.uid+u._context.staticPlot,translateX:d.x[0]*u._fullLayout._size.w,translateY:u._fullLayout._size.h*(1-d.y[1]),size:u._fullLayout._size,width:o,maxLineWidth:L,height:_,columnOrder:R,groupHeight:_,rowBlocks:I,headerRowBlocks:E,scrollY:0,cells:m({},i.cells,{values:c}),headerCells:m({},i.header,{values:h}),gdColumns:h.map(function(j){return j[0]}),gdColumnsOriginalOrder:h.map(function(j){return j[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:h.map(function(j,W){return C[j]=(C[j]||0)+1,{key:j+"__"+C[j],label:j,specIndex:W,xIndex:R[W],xScale:a,x:void 0,calcdata:void 0,columnWidth:O[W]}})};return B.columns.forEach(function(j){j.calcdata=B,j.x=a(j)}),B}},{"../../lib/extend":493,"./constants":1069,"fast-isnumeric":190}],1071:[function(x,oe,ae){"use strict";var g=x("../../lib/extend").extendFlat;ae.splitToPanels=function(m){var w=[0,0],y=g({},m,{key:"header",type:"header",page:0,prevPages:w,currentRepaint:[null,null],dragHandle:!0,values:m.calcdata.headerCells.values[m.specIndex],rowBlocks:m.calcdata.headerRowBlocks,calcdata:g({},m.calcdata,{cells:m.calcdata.headerCells})});return[g({},m,{key:"cells1",type:"cells",page:0,prevPages:w,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks}),g({},m,{key:"cells2",type:"cells",page:1,prevPages:w,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks}),y]},ae.splitToCells=function(m){var y,e,r,w=[r=(e=(y=m).rowBlocks[y.page])?e.rows[0].rowIndex:0,e?r+e.rows.length:0];return(m.values||[]).slice(w[0],w[1]).map(function(y,e){return{keyWithinBlock:e+("string"==typeof y&&y.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:w[0]+e,column:m,calcdata:m.calcdata,page:m.page,rowBlocks:m.rowBlocks,value:y}})}},{"../../lib/extend":493}],1072:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./attributes"),w=x("../../plots/domain").defaults;oe.exports=function(y,e,r,n){function a(t,p){return g.coerce(y,e,m,t,p)}w(e,n,a),a("columnwidth"),a("header.values"),a("header.format"),a("header.align"),a("header.prefix"),a("header.suffix"),a("header.height"),a("header.line.width"),a("header.line.color"),a("header.fill.color"),g.coerceFont(a,"header.font",g.extendFlat({},n.font)),function(t,p){for(var i=t.header.values.length,c=(t.columnorder||[]).slice(0,i),f=c.slice().sort(function(d,o){return d-o}),l=c.map(function(d){return f.indexOf(d)}),h=l.length;h<i;h++)l.push(h);p("columnorder",l)}(e,a),a("cells.values"),a("cells.format"),a("cells.align"),a("cells.prefix"),a("cells.suffix"),a("cells.height"),a("cells.line.width"),a("cells.line.color"),a("cells.fill.color"),g.coerceFont(a,"cells.font",g.extendFlat({},n.font)),e._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1066}],1073:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot"),moduleType:"trace",name:"table",basePlotModule:x("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1066,"./base_plot":1067,"./calc":1068,"./defaults":1072,"./plot":1074}],1074:[function(x,oe,ae){"use strict";var g=x("./constants"),m=x("@plotly/d3"),w=x("../../lib").numberFormat,y=x("../../lib/gup"),e=x("../../components/drawing"),r=x("../../lib/svg_text_utils"),n=x("../../lib").raiseToTop,a=x("../../lib").strTranslate,t=x("../../lib").cancelTransition,p=x("./data_preparation_helper"),u=x("./data_split_helpers"),i=x("../../components/color");function c(X){return Math.ceil(X.calcdata.maxLineWidth/2)}function f(X,$){return"clip"+X._fullLayout._uid+"_scrollAreaBottomClip_"+$.key}function l(X,$){return"clip"+X._fullLayout._uid+"_columnBoundaryClippath_"+$.calcdata.key+"_"+$.specIndex}function h(X){return[].concat.apply([],X.map(function($){return $})).map(function($){return $.__data__})}function d(X,$,re){var H=X.selectAll("."+g.cn.scrollbarKit).data(y.repeat,y.keyFun);H.enter().append("g").classed(g.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),H.each(function(ee){var ue,te=ee.scrollbarState;te.totalHeight=W(ue=ee.rowBlocks,ue.length-1)+(ue.length?Y(ue[ue.length-1],1/0):1),te.scrollableAreaHeight=ee.groupHeight-I(ee),te.currentlyVisibleHeight=Math.min(te.totalHeight,te.scrollableAreaHeight),te.ratio=te.currentlyVisibleHeight/te.totalHeight,te.barLength=Math.max(te.ratio*te.currentlyVisibleHeight,g.goldenRatio*g.scrollbarWidth),te.barWiggleRoom=te.currentlyVisibleHeight-te.barLength,te.wiggleRoom=Math.max(0,te.totalHeight-te.scrollableAreaHeight),te.topY=0===te.barWiggleRoom?0:ee.scrollY/te.wiggleRoom*te.barWiggleRoom,te.bottomY=te.topY+te.barLength,te.dragMultiplier=te.wiggleRoom/te.barWiggleRoom}).attr("transform",function(ee){return a(ee.width+g.scrollbarWidth/2+g.scrollbarOffset,I(ee))});var U=H.selectAll("."+g.cn.scrollbar).data(y.repeat,y.keyFun);U.enter().append("g").classed(g.cn.scrollbar,!0);var G=U.selectAll("."+g.cn.scrollbarSlider).data(y.repeat,y.keyFun);G.enter().append("g").classed(g.cn.scrollbarSlider,!0),G.attr("transform",function(ee){return a(0,ee.scrollbarState.topY||0)});var ie=G.selectAll("."+g.cn.scrollbarGlyph).data(y.repeat,y.keyFun);ie.enter().append("line").classed(g.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",g.scrollbarWidth).attr("stroke-linecap","round").attr("y1",g.scrollbarWidth/2),ie.attr("y2",function(ee){return ee.scrollbarState.barLength-g.scrollbarWidth/2}).attr("stroke-opacity",function(ee){return ee.columnDragInProgress||!ee.scrollbarState.barWiggleRoom||re?0:.4}),ie.transition().delay(0).duration(0),ie.transition().delay(g.scrollbarHideDelay).duration(g.scrollbarHideDuration).attr("stroke-opacity",0);var q=U.selectAll("."+g.cn.scrollbarCaptureZone).data(y.repeat,y.keyFun);q.enter().append("line").classed(g.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",g.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ee){var te=m.event.y,se=this.getBoundingClientRect(),ue=ee.scrollbarState,de=te-se.top,he=m.scale.linear().domain([0,ue.scrollableAreaHeight]).range([0,ue.totalHeight]).clamp(!0);ue.topY<=de&&de<=ue.bottomY||R($,X,null,he(de-ue.barLength/2))(ee)}).call(m.behavior.drag().origin(function(ee){return m.event.stopPropagation(),ee.scrollbarState.scrollbarScrollInProgress=!0,ee}).on("drag",R($,X)).on("dragend",function(){})),q.attr("y2",function(ee){return ee.scrollbarState.scrollableAreaHeight}),$._context.staticPlot&&(ie.remove(),q.remove())}function o(X,$,re,H){var q,U=function(ie){var q=ie.selectAll("."+g.cn.columnCell).data(u.splitToCells,function(ee){return ee.keyWithinBlock});return q.enter().append("g").classed(g.cn.columnCell,!0),q.exit().remove(),q}(((q=re.selectAll("."+g.cn.columnCells).data(y.repeat,y.keyFun)).enter().append("g").classed(g.cn.columnCells,!0),q.exit().remove(),q));U.each(function(q,ee){var te=q.calcdata.cells.font,se=q.column.specIndex,ue={size:k(te.size,se,ee),color:k(te.color,se,ee),family:k(te.family,se,ee)};q.rowNumber=q.key,q.align=k(q.calcdata.cells.align,se,ee),q.cellBorderWidth=k(q.calcdata.cells.line.width,se,ee),q.font=ue}),function(ie){ie.attr("width",function(q){return q.column.columnWidth}).attr("stroke-width",function(q){return q.cellBorderWidth}).each(function(q){var ee=m.select(this);i.stroke(ee,k(q.calcdata.cells.line.color,q.column.specIndex,q.rowNumber)),i.fill(ee,k(q.calcdata.cells.fill.color,q.column.specIndex,q.rowNumber))})}(function(ie){var q=ie.selectAll("."+g.cn.cellRect).data(y.repeat,function(ee){return ee.keyWithinBlock});return q.enter().append("rect").classed(g.cn.cellRect,!0),q}(U));var G=function(ie){var q=ie.selectAll("."+g.cn.cellText).data(y.repeat,function(ee){return ee.keyWithinBlock});return q.enter().append("text").classed(g.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){m.event.stopPropagation()}),q}(function(ie){var q=ie.selectAll("."+g.cn.cellTextHolder).data(y.repeat,function(ee){return ee.keyWithinBlock});return q.enter().append("g").classed(g.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),q}(U));(function(ie){ie.each(function(q){e.font(m.select(this),q.font)})})(G),_(G,$,H,X),j(U)}function _(X,$,re,H){X.text(function(U){var G=U.column.specIndex,ie=U.rowNumber,q=U.value,ee="string"==typeof q,te=ee&&q.match(/<br>/i),se=!ee||te;U.mayHaveMarkup=ee&&q.match(/[<&>]/);var ue,de="string"==typeof(ue=q)&&ue.match(g.latexCheck);U.latex=de;var he,xe,ge=de?"":k(U.calcdata.cells.prefix,G,ie)||"",_e=de?"":k(U.calcdata.cells.suffix,G,ie)||"",Ce=de?null:k(U.calcdata.cells.format,G,ie)||null,Le=ge+(Ce?w(Ce)(U.value):U.value)+_e;if(U.wrappingNeeded=!U.wrapped&&!se&&!de&&(he=s(Le)),U.cellHeightMayIncrease=te||de||U.mayHaveMarkup||(void 0===he?s(Le):he),U.needsConvertToTspans=U.mayHaveMarkup||U.wrappingNeeded||U.latex,U.wrappingNeeded){var Ie=(" "===g.wrapSplitCharacter?Le.replace(/<a href=/gi,"<a_href="):Le).split(g.wrapSplitCharacter),Be=" "===g.wrapSplitCharacter?Ie.map(function(ve){return ve.replace(/<a_href=/gi,"<a href=")}):Ie;U.fragments=Be.map(function(ve){return{text:ve,width:null}}),U.fragments.push({fragment:g.wrapSpacer,width:null}),xe=Be.join(g.lineBreaker)+g.lineBreaker+g.wrapSpacer}else delete U.fragments,xe=Le;return xe}).attr("dy",function(U){return U.needsConvertToTspans?0:"0.75em"}).each(function(U){var G=m.select(this);U.needsConvertToTspans?r.convertToTspans(G,H,(U.wrappingNeeded?D:L)(re,this,$,H,U)):m.select(this.parentNode).attr("transform",function(q){return a(B(q),g.cellPad)}).attr("text-anchor",function(q){return{left:"start",center:"middle",right:"end"}[q.align]})})}function s(X){return-1!==X.indexOf(g.wrapSplitCharacter)}function k(X,$,re){if(Array.isArray(X)){var H=X[Math.min($,X.length-1)];return Array.isArray(H)?H[Math.min(re,H.length-1)]:H}return X}function M(X,$,re){X.transition().ease(g.releaseTransitionEase).duration(g.releaseTransitionDuration).attr("transform",a($.x,re))}function A(X){return"cells"===X.type}function E(X){return"header"===X.type}function I(X){return(X.rowBlocks.length?X.rowBlocks[0].auxiliaryBlocks:[]).reduce(function($,re){return $+Y(re,1/0)},0)}function C(X,$,re){var H=h($)[0];if(void 0!==H){var U=H.rowBlocks,G=H.calcdata,ie=W(U,U.length),q=H.calcdata.groupHeight-I(H),ee=G.scrollY=Math.max(0,Math.min(ie-q,G.scrollY)),te=function(se,ue,de){for(var he=[],xe=0,ge=0;ge<se.length;ge++){for(var _e=se[ge],Ce=_e.rows,Le=0,Ie=0;Ie<Ce.length;Ie++)Le+=Ce[Ie].rowHeight;_e.allRowsHeight=Le,ue<xe+Le&&ue+de>xe&&he.push(ge),xe+=Le}return he}(U,ee,q);1===te.length&&(te[0]===U.length-1?te.unshift(te[0]-1):te.push(te[0]+1)),te[0]%2&&te.reverse(),$.each(function(se,ue){se.page=te[ue],se.scrollY=ee}),$.attr("transform",function(se){var ue=W(se.rowBlocks,se.page)-se.scrollY;return a(0,ue)}),X&&(O(X,re,$,te,H.prevPages,H,0),O(X,re,$,te,H.prevPages,H,1),d(re,X))}}function R(X,$,re,H){return function(U){var G=U.calcdata?U.calcdata:U,ie=$.filter(function(se){return G.key===se.key}),ee=G.scrollY;G.scrollY=void 0===H?G.scrollY+(re||G.scrollbarState.dragMultiplier)*m.event.dy:H;var te=ie.selectAll("."+g.cn.yColumn).selectAll("."+g.cn.columnBlock).filter(A);return C(X,te,ie),G.scrollY===ee}}function O(X,$,re,H,U,G,ie){H[ie]!==U[ie]&&(clearTimeout(G.currentRepaint[ie]),G.currentRepaint[ie]=setTimeout(function(){var q=re.filter(function(ee,te){return te===ie&&H[te]!==U[te]});o(X,$,q,re),U[ie]=H[ie]}))}function D(X,$,re,H){return function(){var U=m.select($.parentNode);U.each(function(G){var ie=G.fragments;U.selectAll("tspan.line").each(function(xe,ge){ie[ge].width=this.getComputedTextLength()});var q,ee,te=ie[ie.length-1].width,se=ie.slice(0,-1),ue=[],de=0,he=G.column.columnWidth-2*g.cellPad;for(G.value="";se.length;)de+(ee=(q=se.shift()).width+te)>he&&(G.value+=ue.join(g.wrapSpacer)+g.lineBreaker,ue=[],de=0),ue.push(q.text),de+=ee;de&&(G.value+=ue.join(g.wrapSpacer)),G.wrapped=!0}),U.selectAll("tspan.line").remove(),_(U.select("."+g.cn.cellText),re,X,H),m.select($.parentNode.parentNode).call(j)}}function L(X,$,re,H,U){return function(){if(!U.settledY){var G=m.select($.parentNode),ie=ne(U),q=U.key-ie.firstRowIndex,ee=ie.rows[q].rowHeight,te=U.cellHeightMayIncrease?$.parentNode.getBoundingClientRect().height+2*g.cellPad:ee,se=Math.max(te,ee);se-ie.rows[q].rowHeight&&(ie.rows[q].rowHeight=se,X.selectAll("."+g.cn.columnCell).call(j),C(null,X.filter(A),0),d(re,H,!0)),G.attr("transform",function(){var ue=this.parentNode.getBoundingClientRect(),de=m.select(this.parentNode).select("."+g.cn.cellRect).node().getBoundingClientRect(),he=this.transform.baseVal.consolidate(),xe=de.top-ue.top+(he?he.matrix.f:g.cellPad);return a(B(U,m.select(this.parentNode).select("."+g.cn.cellTextHolder).node().getBoundingClientRect().width),xe)}),U.settledY=!0}}}function B(X,$){switch(X.align){case"left":default:return g.cellPad;case"right":return X.column.columnWidth-($||0)-g.cellPad;case"center":return(X.column.columnWidth-($||0))/2}}function j(X){X.attr("transform",function($){var re=$.rowBlocks[0].auxiliaryBlocks.reduce(function(U,G){return U+Y(G,1/0)},0),H=Y(ne($),$.key);return a(0,H+re)}).selectAll("."+g.cn.cellRect).attr("height",function($){return(re=ne($),H=$.key,re.rows[H-re.firstRowIndex]).rowHeight;var re,H})}function W(X,$){for(var re=0,H=$-1;H>=0;H--)re+=Q(X[H]);return re}function Y(X,$){for(var re=0,H=0;H<X.rows.length&&X.rows[H].rowIndex<$;H++)re+=X.rows[H].rowHeight;return re}function Q(X){var $=X.allRowsHeight;if(void 0!==$)return $;for(var re=0,H=0;H<X.rows.length;H++)re+=X.rows[H].rowHeight;return X.allRowsHeight=re,re}function ne(X){return X.rowBlocks[X.page]}oe.exports=function(X,$){var re=!X._context.staticPlot,H=X._fullLayout._paper.selectAll("."+g.cn.table).data($.map(function(_e){var Ce=y.unwrap(_e).trace;return p(X,Ce)}),y.keyFun);H.exit().remove(),H.enter().append("g").classed(g.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),H.attr("width",function(_e){return _e.width+_e.size.l+_e.size.r}).attr("height",function(_e){return _e.height+_e.size.t+_e.size.b}).attr("transform",function(_e){return a(_e.translateX,_e.translateY)});var U=H.selectAll("."+g.cn.tableControlView).data(y.repeat,y.keyFun),G=U.enter().append("g").classed(g.cn.tableControlView,!0).style("box-sizing","content-box");if(re){var ie="onwheel"in document?"wheel":"mousewheel";G.on("mousemove",function(_e){U.filter(function(Ce){return _e===Ce}).call(d,X)}).on(ie,function(_e){_e.scrollbarState.wheeling||(_e.scrollbarState.wheeling=!0,R(X,U,null,_e.scrollY+m.event.deltaY)(_e)||(m.event.stopPropagation(),m.event.preventDefault()),_e.scrollbarState.wheeling=!1)}).call(d,X,!0)}U.attr("transform",function(_e){return a(_e.size.l,_e.size.t)});var q=U.selectAll("."+g.cn.scrollBackground).data(y.repeat,y.keyFun);q.enter().append("rect").classed(g.cn.scrollBackground,!0).attr("fill","none"),q.attr("width",function(_e){return _e.width}).attr("height",function(_e){return _e.height}),U.each(function(_e){e.setClipUrl(m.select(this),f(X,_e),X)});var ee=U.selectAll("."+g.cn.yColumn).data(function(_e){return _e.columns},y.keyFun);ee.enter().append("g").classed(g.cn.yColumn,!0),ee.exit().remove(),ee.attr("transform",function(_e){return a(_e.x,0)}),re&&ee.call(m.behavior.drag().origin(function(_e){return M(m.select(this),_e,-g.uplift),n(this),_e.calcdata.columnDragInProgress=!0,d(U.filter(function(Ce){return _e.calcdata.key===Ce.key}),X),_e}).on("drag",function(_e){var Ce=m.select(this),Le=function(Ie){return(_e===Ie?m.event.x:Ie.x)+Ie.columnWidth/2};_e.x=Math.max(-g.overdrag,Math.min(_e.calcdata.width+g.overdrag-_e.columnWidth,m.event.x)),h(ee).filter(function(Ie){return Ie.calcdata.key===_e.calcdata.key}).sort(function(Ie,Be){return Le(Ie)-Le(Be)}).forEach(function(Ie,Be){Ie.xIndex=Be,Ie.x=_e===Ie?Ie.x:Ie.xScale(Ie)}),ee.filter(function(Ie){return _e!==Ie}).transition().ease(g.transitionEase).duration(g.transitionDuration).attr("transform",function(Ie){return a(Ie.x,0)}),Ce.call(t).attr("transform",a(_e.x,-g.uplift))}).on("dragend",function(_e){var Ie,Be,ve,Te,Ce=m.select(this),Le=_e.calcdata;_e.x=_e.xScale(_e),_e.calcdata.columnDragInProgress=!1,M(Ce,_e,0),Ie=X,Be=Le,ve=Le.columns.map(function(Ie){return Ie.xIndex}),Te=Be.gdColumnsOriginalOrder,Be.gdColumns.sort(function(Pe,De){return ve[Te.indexOf(Pe)]-ve[Te.indexOf(De)]}),Be.columnorder=ve,Ie.emit("plotly_restyle")})),ee.each(function(_e){e.setClipUrl(m.select(this),l(X,_e),X)});var te=ee.selectAll("."+g.cn.columnBlock).data(u.splitToPanels,y.keyFun);te.enter().append("g").classed(g.cn.columnBlock,!0).attr("id",function(_e){return _e.key}),te.style("cursor",function(_e){return _e.dragHandle?"ew-resize":_e.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var se=te.filter(E),ue=te.filter(A);re&&ue.call(m.behavior.drag().origin(function(_e){return m.event.stopPropagation(),_e}).on("drag",R(X,U,-1)).on("dragend",function(){})),o(X,U,se,te),o(X,U,ue,te);var de=U.selectAll("."+g.cn.scrollAreaClip).data(y.repeat,y.keyFun);de.enter().append("clipPath").classed(g.cn.scrollAreaClip,!0).attr("id",function(_e){return f(X,_e)});var he=de.selectAll("."+g.cn.scrollAreaClipRect).data(y.repeat,y.keyFun);he.enter().append("rect").classed(g.cn.scrollAreaClipRect,!0).attr("x",-g.overdrag).attr("y",-g.uplift).attr("fill","none"),he.attr("width",function(_e){return _e.width+2*g.overdrag}).attr("height",function(_e){return _e.height+g.uplift}),ee.selectAll("."+g.cn.columnBoundary).data(y.repeat,y.keyFun).enter().append("g").classed(g.cn.columnBoundary,!0);var xe=ee.selectAll("."+g.cn.columnBoundaryClippath).data(y.repeat,y.keyFun);xe.enter().append("clipPath").classed(g.cn.columnBoundaryClippath,!0),xe.attr("id",function(_e){return l(X,_e)});var ge=xe.selectAll("."+g.cn.columnBoundaryRect).data(y.repeat,y.keyFun);ge.enter().append("rect").classed(g.cn.columnBoundaryRect,!0).attr("fill","none"),ge.attr("width",function(_e){return _e.columnWidth+2*c(_e)}).attr("height",function(_e){return _e.calcdata.height+2*c(_e)+g.uplift}).attr("x",function(_e){return-c(_e)}).attr("y",function(_e){return-c(_e)}),C(null,ue,U)}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1069,"./data_preparation_helper":1070,"./data_split_helpers":1071,"@plotly/d3":58}],1075:[function(x,oe,ae){"use strict";var g=x("../../plots/template_attributes").hovertemplateAttrs,m=x("../../plots/template_attributes").texttemplateAttrs,w=x("../../components/colorscale/attributes"),y=x("../../plots/domain").attributes,e=x("../pie/attributes"),r=x("../sunburst/attributes"),n=x("./constants"),a=x("../../lib/extend").extendFlat;oe.exports={labels:r.labels,parents:r.parents,values:r.values,branchvalues:r.branchvalues,count:r.count,level:r.level,maxdepth:r.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:a({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:r.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:r.marker.line,editType:"calc"},w("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:a({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:r.textinfo,texttemplate:m({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:r.hoverinfo,hovertemplate:g({},{keys:n.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:a({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:r.root,domain:y({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"../sunburst/attributes":1049,"./constants":1078}],1076:[function(x,oe,ae){"use strict";var g=x("../../plots/plots");ae.name="treemap",ae.plot=function(m,w,y,e){g.plotBasePlot(ae.name,m,w,y,e)},ae.clean=function(m,w,y,e){g.cleanBasePlot(ae.name,m,w,y,e)}},{"../../plots/plots":619}],1077:[function(x,oe,ae){"use strict";var g=x("../sunburst/calc");ae.calc=function(m,w){return g.calc(m,w)},ae.crossTraceCalc=function(m){return g._runCrossTraceCalc("treemap",m)}},{"../sunburst/calc":1051}],1078:[function(x,oe,ae){"use strict";oe.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1079:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./attributes"),w=x("../../components/color"),y=x("../../plots/domain").defaults,e=x("../bar/defaults").handleText,r=x("../bar/constants").TEXTPAD,n=x("../../components/colorscale"),a=n.hasColorscale,t=n.handleDefaults;oe.exports=function(p,u,i,c){function f(A,E){return g.coerce(p,u,m,A,E)}var l=f("labels"),h=f("parents");if(l&&l.length&&h&&h.length){var d=f("values");f(d&&d.length?"branchvalues":"count"),f("level"),f("maxdepth"),"squarify"===f("tiling.packing")&&f("tiling.squarifyratio"),f("tiling.flip"),f("tiling.pad");var o=f("text");f("texttemplate"),u.texttemplate||f("textinfo",Array.isArray(o)?"text+label":"label"),f("hovertext"),f("hovertemplate");var _=f("pathbar.visible");e(p,u,c,f,"auto",{hasPathbar:_,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("textposition");var s=-1!==u.textposition.indexOf("bottom");f("marker.line.width")&&f("marker.line.color",c.paper_bgcolor);var k=f("marker.colors");(u._hasColorscale=a(p,"marker","colors")||(p.marker||{}).coloraxis)?t(p,u,c,f,{prefix:"marker.",cLetter:"c"}):f("marker.depthfade",!(k||[]).length);var M=2*u.textfont.size;f("marker.pad.t",s?M/4:M),f("marker.pad.l",M/4),f("marker.pad.r",M/4),f("marker.pad.b",s?M:M/4),u._hovered={marker:{line:{width:2,color:w.contrast(c.paper_bgcolor)}}},_&&(f("pathbar.thickness",u.pathbar.textfont.size+2*r),f("pathbar.side"),f("pathbar.edgeshape")),f("sort"),f("root.color"),y(u,c,f),u._length=null}else u.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1075}],1080:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../sunburst/helpers"),w=x("../bar/uniform_text").clearMinTextSize,y=x("../bar/style").resizeText,e=x("./plot_one");oe.exports=function(r,n,a,t,p){var u,i,c=p.type,f=p.drawDescendants,l=r._fullLayout,h=l["_"+c+"layer"],d=!a;w(c,l),(u=h.selectAll("g.trace."+c).data(n,function(o){return o[0].trace.uid})).enter().append("g").classed("trace",!0).classed(c,!0),u.order(),!l.uniformtext.mode&&m.hasTransition(a)?(t&&(i=t()),g.transition().duration(a.duration).ease(a.easing).each("end",function(){i&&i()}).each("interrupt",function(){i&&i()}).each(function(){h.selectAll("g.trace").each(function(o){e(r,o,this,a,f)})})):(u.each(function(o){e(r,o,this,a,f)}),l.uniformtext.mode&&y(r,h.selectAll(".trace"),c)),d&&u.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1055,"./plot_one":1089,"@plotly/d3":58}],1081:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=x("../../components/drawing"),y=x("../../lib/svg_text_utils"),e=x("./partition"),r=x("./style").styleOne,n=x("./constants"),a=x("../sunburst/helpers"),t=x("../sunburst/fx");oe.exports=function(p,u,i,c,f){var l=f.barDifY,h=f.width,d=f.height,o=f.viewX,_=f.viewY,s=f.pathSlice,k=f.toMoveInsideSlice,M=f.strTransform,A=f.hasTransition,E=f.handleSlicesExit,I=f.makeUpdateSliceInterpolator,C=f.makeUpdateTextInterpolator,R={},O=p._fullLayout,D=u[0],L=D.trace,B=D.hierarchy,j=h/L._entryDepth,W=a.listPath(i.data,"id"),Y=e(B.copy(),[h,d],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(Y=Y.filter(function(ne){var X=W.indexOf(ne.data.id);return-1!==X&&(ne.x0=j*X,ne.x1=j*(X+1),ne.y0=l,ne.y1=l+d,ne.onPathbar=!0,!0)})).reverse(),(c=c.data(Y,a.getPtId)).enter().append("g").classed("pathbar",!0),E(c,!0,R,[h,d],s),c.order();var Q=c;A&&(Q=Q.transition().each("end",function(){var ne=g.select(this);a.setSliceCursor(ne,p,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),Q.each(function(ne){ne._x0=o(ne.x0),ne._x1=o(ne.x1),ne._y0=_(ne.y0),ne._y1=_(ne.y1),ne._hoverX=o(ne.x1-Math.min(h,d)/2),ne._hoverY=_(ne.y1-d/2);var X=g.select(this),$=m.ensureSingle(X,"path","surface",function(G){G.style("pointer-events","all")});A?$.transition().attrTween("d",function(G){var ie=I(G,!0,R,[h,d]);return function(q){return s(ie(q))}}):$.attr("d",s),X.call(t,i,p,u,{styleOne:r,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,p,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:p._transitioning}),$.call(r,ne,L,{hovered:!1}),ne._text=(a.getPtLabel(ne)||"").split("<br>").join(" ")||"";var re=m.ensureSingle(X,"g","slicetext"),H=m.ensureSingle(re,"text","",function(G){G.attr("data-notex",1)}),U=m.ensureUniformFontSize(p,a.determineTextFont(L,ne,O.font,{onPathbar:!0}));H.text(ne._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(w.font,U).call(y.convertToTspans,p),ne.textBB=w.bBox(H.node()),ne.transform=k(ne,{fontSize:U.size,onPathbar:!0}),ne.transform.fontSize=U.size,A?H.transition().attrTween("transform",function(G){var ie=C(G,!0,R,[h,d]);return function(q){return M(ie(q))}}):H.attr("transform",M(ne))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"./constants":1078,"./partition":1087,"./style":1090,"@plotly/d3":58}],1082:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=x("../../components/drawing"),y=x("../../lib/svg_text_utils"),e=x("./partition"),r=x("./style").styleOne,n=x("./constants"),a=x("../sunburst/helpers"),t=x("../sunburst/fx"),p=x("../sunburst/plot").formatSliceLabel;oe.exports=function(u,i,c,f,l){var h=l.width,d=l.height,o=l.viewX,_=l.viewY,s=l.pathSlice,k=l.toMoveInsideSlice,M=l.strTransform,A=l.hasTransition,E=l.handleSlicesExit,I=l.makeUpdateSliceInterpolator,C=l.makeUpdateTextInterpolator,R=l.prevEntry,O=u._fullLayout,D=i[0].trace,L=-1!==D.textposition.indexOf("left"),B=-1!==D.textposition.indexOf("right"),j=-1!==D.textposition.indexOf("bottom"),W=!j&&!D.marker.pad.t||j&&!D.marker.pad.b,Y=e(c,[h,d],{packing:D.tiling.packing,squarifyratio:D.tiling.squarifyratio,flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1,pad:{inner:D.tiling.pad,top:D.marker.pad.t,left:D.marker.pad.l,right:D.marker.pad.r,bottom:D.marker.pad.b}}).descendants(),Q=1/0,ne=-1/0;Y.forEach(function(U){var G=U.depth;G>=D._maxDepth?(U.x0=U.x1=(U.x0+U.x1)/2,U.y0=U.y1=(U.y0+U.y1)/2):(Q=Math.min(Q,G),ne=Math.max(ne,G))}),f=f.data(Y,a.getPtId),D._maxVisibleLayers=isFinite(ne)?ne-Q+1:0,f.enter().append("g").classed("slice",!0),E(f,!1,{},[h,d],s),f.order();var X=null;if(A&&R){var $=a.getPtId(R);f.each(function(U){null===X&&a.getPtId(U)===$&&(X={x0:U.x0,x1:U.x1,y0:U.y0,y1:U.y1})})}var re=function(){return X||{x0:0,x1:h,y0:0,y1:d}},H=f;return A&&(H=H.transition().each("end",function(){var U=g.select(this);a.setSliceCursor(U,u,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),H.each(function(U){var G=a.isHeader(U,D);U._x0=o(U.x0),U._x1=o(U.x1),U._y0=_(U.y0),U._y1=_(U.y1),U._hoverX=o(U.x1-D.marker.pad.r),U._hoverY=_(j?U.y1-D.marker.pad.b/2:U.y0+D.marker.pad.t/2);var ie=g.select(this),q=m.ensureSingle(ie,"path","surface",function(ue){ue.style("pointer-events","all")});A?q.transition().attrTween("d",function(ue){var de=I(ue,!1,re(),[h,d]);return function(he){return s(de(he))}}):q.attr("d",s),ie.call(t,c,u,i,{styleOne:r,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,u,{isTransitioning:u._transitioning}),q.call(r,U,D,{hovered:!1}),U._text=U.x0===U.x1||U.y0===U.y1?"":G?W?"":a.getPtLabel(U)||"":p(U,c,D,i,O)||"";var ee=m.ensureSingle(ie,"g","slicetext"),te=m.ensureSingle(ee,"text","",function(ue){ue.attr("data-notex",1)}),se=m.ensureUniformFontSize(u,a.determineTextFont(D,U,O.font));te.text(U._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":L||G?"start":"middle").call(w.font,se).call(y.convertToTspans,u),U.textBB=w.bBox(te.node()),U.transform=k(U,{fontSize:se.size,isHeader:G}),U.transform.fontSize=se.size,A?te.transition().attrTween("transform",function(ue){var de=C(ue,!1,re(),[h,d]);return function(he){return M(de(he))}}):te.attr("transform",M(U))}),X}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"../sunburst/plot":1059,"./constants":1078,"./partition":1087,"./style":1090,"@plotly/d3":58}],1083:[function(x,oe,ae){"use strict";oe.exports=function g(m,w,y){var e;y.swapXY&&(e=m.x0,m.x0=m.y0,m.y0=e,e=m.x1,m.x1=m.y1,m.y1=e),y.flipX&&(e=m.x0,m.x0=w[0]-m.x1,m.x1=w[0]-e),y.flipY&&(e=m.y0,m.y0=w[1]-m.y1,m.y1=w[1]-e);var r=m.children;if(r)for(var n=0;n<r.length;n++)g(r[n],w,y)}},{}],1084:[function(x,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"treemap",basePlotModule:x("./base_plot"),categories:[],animatable:!0,attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot"),style:x("./style").style,colorbar:x("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1079,"./layout_attributes":1085,"./layout_defaults":1086,"./plot":1088,"./style":1090}],1085:[function(x,oe,ae){"use strict";oe.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1086:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./layout_attributes");oe.exports=function(w,y){function e(r,n){return g.coerce(w,y,m,r,n)}e("treemapcolorway",y.colorway),e("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1085}],1087:[function(x,oe,ae){"use strict";var g=x("d3-hierarchy"),m=x("./flip_tree");oe.exports=function(w,y,e){var r,n=e.flipX,a=e.flipY,t="dice-slice"===e.packing,p=e.pad[a?"bottom":"top"],u=e.pad[n?"right":"left"],i=e.pad[n?"left":"right"],c=e.pad[a?"top":"bottom"];t&&(r=u,u=p,p=r,r=i,i=c,c=r);var f=g.treemap().tile(function(l,h){switch(l){case"squarify":return g.treemapSquarify.ratio(h);case"binary":return g.treemapBinary;case"dice":return g.treemapDice;case"slice":return g.treemapSlice;default:return g.treemapSliceDice}}(e.packing,e.squarifyratio)).paddingInner(e.pad.inner).paddingLeft(u).paddingRight(i).paddingTop(p).paddingBottom(c).size(t?[y[1],y[0]]:y)(w);return(t||n||a)&&m(f,y,{swapXY:t,flipX:n,flipY:a}),f}},{"./flip_tree":1083,"d3-hierarchy":115}],1088:[function(x,oe,ae){"use strict";var g=x("./draw"),m=x("./draw_descendants");oe.exports=function(w,y,e,r){return g(w,y,e,r,{type:"treemap",drawDescendants:m})}},{"./draw":1080,"./draw_descendants":1082}],1089:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("d3-interpolate").interpolate,w=x("../sunburst/helpers"),y=x("../../lib"),e=x("../bar/constants").TEXTPAD,r=x("../bar/plot").toMoveInsideBar,n=x("../bar/uniform_text").recordMinTextSize,a=x("./constants"),t=x("./draw_ancestors");function p(u){return w.isHierarchyRoot(u)?"":w.getPtId(u)}oe.exports=function(u,i,c,f,l){var h=u._fullLayout,d=i[0],o=d.trace,_="icicle"===o.type,s=d.hierarchy,k=w.findEntryWithLevel(s,o.level),M=g.select(c),A=M.selectAll("g.pathbar"),E=M.selectAll("g.slice");if(!k)return A.remove(),void E.remove();var I=w.isHierarchyRoot(k),C=!h.uniformtext.mode&&w.hasTransition(f),R=w.getMaxDepth(o),O=h._size,D=o.domain,L=O.w*(D.x[1]-D.x[0]),B=O.h*(D.y[1]-D.y[0]),j=L,W=o.pathbar.thickness,Y=o.marker.line.width+a.gapWithPathbar,Q=o.pathbar.visible?o.pathbar.side.indexOf("bottom")>-1?B+Y:-(W+Y):0,ne={x0:j,x1:j,y0:Q,y1:Q+W},X=function(Fe,Ue,He){var Ke=o.tiling.pad,st=function(tt){return tt-Ke<=Ue.x0},Ve=function(tt){return tt+Ke>=Ue.x1},$e=function(tt){return tt-Ke<=Ue.y0},Qe=function(tt){return tt+Ke>=Ue.y1};return Fe.x0===Ue.x0&&Fe.x1===Ue.x1&&Fe.y0===Ue.y0&&Fe.y1===Ue.y1?{x0:Fe.x0,x1:Fe.x1,y0:Fe.y0,y1:Fe.y1}:{x0:st(Fe.x0-Ke)?0:Ve(Fe.x0-Ke)?He[0]:Fe.x0,x1:st(Fe.x1+Ke)?0:Ve(Fe.x1+Ke)?He[0]:Fe.x1,y0:$e(Fe.y0-Ke)?0:Qe(Fe.y0-Ke)?He[1]:Fe.y0,y1:$e(Fe.y1+Ke)?0:Qe(Fe.y1+Ke)?He[1]:Fe.y1}},$=null,re={},H={},U=null,G=function(Fe,Ue){return Ue?re[p(Fe)]:H[p(Fe)]};d.hasMultipleRoots&&I&&R++,o._maxDepth=R,o._backgroundColor=h.paper_bgcolor,o._entryDepth=k.data.depth,o._atRootLevel=I;var q=-L/2+O.l+O.w*(D.x[1]+D.x[0])/2,ee=-B/2+O.t+O.h*(1-(D.y[1]+D.y[0])/2),te=function(Fe){return q+Fe},se=function(Fe){return ee+Fe},ue=se(0),de=te(0),he=function(Fe){return de+Fe},xe=function(Fe){return ue+Fe};function ge(Fe,Ue){return Fe+","+Ue}var _e=he(0),Ce=function(Fe){Fe.x=Math.max(_e,Fe.x)},Le=o.pathbar.edgeshape,Ie=function(Fe,Ue){var He=Fe.x0,Ke=Fe.x1,st=Fe.y0,Ve=Fe.y1,$e=Fe.textBB,Qe=function(Ft){return-1!==o.textposition.indexOf(Ft)},tt=Qe("bottom"),ut=Qe("top")||Ue.isHeader&&!tt?"start":tt?"end":"middle",xt=Qe("right"),kt=Qe("left")||Ue.onPathbar?-1:xt?1:0,Bt=o[_?"tiling":"marker"].pad;if(Ue.isHeader){if((He+=(_?Bt:Bt.l)-e)>=(Ke-=(_?Bt:Bt.r)-e)){var Rt=(He+Ke)/2;He=Rt,Ke=Rt}var ft;tt?st<(ft=Ve-(_?Bt:Bt.b))&&ft<Ve&&(st=ft):st<(ft=st+(_?Bt:Bt.t))&&ft<Ve&&(Ve=ft)}var lt=r(He,Ke,st,Ve,$e,{isHorizontal:!1,constrained:!0,angle:0,anchor:ut,leftToRight:kt});return lt.fontSize=Ue.fontSize,lt.targetX=te(lt.targetX),lt.targetY=se(lt.targetY),isNaN(lt.targetX)||isNaN(lt.targetY)?{}:(He!==Ke&&st!==Ve&&n(o.type,lt,h),{scale:lt.scale,rotate:lt.rotate,textX:lt.textX,textY:lt.textY,anchorX:lt.anchorX,anchorY:lt.anchorY,targetX:lt.targetX,targetY:lt.targetY})},Be=function(Fe,Ue){for(var He,Ke=0,st=Fe;!He&&Ke<R;)Ke++,(st=st.parent)?He=G(st,Ue):Ke=R;return He||{}},ve=function(Fe,Ue,He,Ke,st){var Ve,$e=G(Fe,Ue);if($e)Ve=$e;else if(Ue)Ve=ne;else if($)if(Fe.parent){var Qe=U||He;Qe&&!Ue?Ve=X(Fe,Qe,Ke):y.extendFlat(Ve={},Be(Fe,Ue))}else Ve=y.extendFlat({},Fe),_&&("h"===st.orientation?st.flipX?Ve.x0=Fe.x1:Ve.x1=0:st.flipY?Ve.y0=Fe.y1:Ve.y1=0);else Ve={};return m(Ve,{x0:Fe.x0,x1:Fe.x1,y0:Fe.y0,y1:Fe.y1})},Te=function(Fe,Ue,He,Ke){var st=G(Fe,Ue),Ve={},$e=function(Fe,Ue,He,Ke){return Ue?re[p(s)]||ne:Fe.data.depth-k.data.depth<R?X(Fe,H[o.level]||He,Ke):{}}(Fe,Ue,He,Ke);y.extendFlat(Ve,{transform:Ie({x0:$e.x0,x1:$e.x1,y0:$e.y0,y1:$e.y1,textBB:Fe.textBB,_text:Fe._text},{isHeader:w.isHeader(Fe,o)})}),st?Ve=st:Fe.parent&&y.extendFlat(Ve,Be(Fe,Ue));var Qe=Fe.transform;return Fe.x0!==Fe.x1&&Fe.y0!==Fe.y1&&n(o.type,Qe,h),m(Ve,{transform:{scale:Qe.scale,rotate:Qe.rotate,textX:Qe.textX,textY:Qe.textY,anchorX:Qe.anchorX,anchorY:Qe.anchorY,targetX:Qe.targetX,targetY:Qe.targetY}})},Pe=function(Fe,Ue,He,Ke,st){var Ve=Ke[0],$e=Ke[1];C?Fe.exit().transition().each(function(){var Qe=g.select(this);Qe.select("path.surface").transition().attrTween("d",function(tt){var ut=function(xt,kt,Bt,Rt){var ft,lt=G(xt,kt);if(kt)ft=ne;else{var Ft=G(k,kt);ft=Ft?X(xt,Ft,Rt):{}}return m(lt,ft)}(tt,Ue,0,[Ve,$e]);return function(xt){return st(ut(xt))}}),Qe.select("g.slicetext").attr("opacity",0)}).remove():Fe.exit().remove()},De=function(Fe){var Ue=Fe.transform;return Fe.x0!==Fe.x1&&Fe.y0!==Fe.y1&&n(o.type,Ue,h),y.getTextTransform({textX:Ue.textX,textY:Ue.textY,anchorX:Ue.anchorX,anchorY:Ue.anchorY,targetX:Ue.targetX,targetY:Ue.targetY,scale:Ue.scale,rotate:Ue.rotate})};C&&(A.each(function(Fe){re[p(Fe)]={x0:Fe.x0,x1:Fe.x1,y0:Fe.y0,y1:Fe.y1},Fe.transform&&(re[p(Fe)].transform={textX:Fe.transform.textX,textY:Fe.transform.textY,anchorX:Fe.transform.anchorX,anchorY:Fe.transform.anchorY,targetX:Fe.transform.targetX,targetY:Fe.transform.targetY,scale:Fe.transform.scale,rotate:Fe.transform.rotate})}),E.each(function(Fe){H[p(Fe)]={x0:Fe.x0,x1:Fe.x1,y0:Fe.y0,y1:Fe.y1},Fe.transform&&(H[p(Fe)].transform={textX:Fe.transform.textX,textY:Fe.transform.textY,anchorX:Fe.transform.anchorX,anchorY:Fe.transform.anchorY,targetX:Fe.transform.targetX,targetY:Fe.transform.targetY,scale:Fe.transform.scale,rotate:Fe.transform.rotate}),!$&&w.isEntry(Fe)&&($=Fe)})),U=l(u,i,k,E,{width:L,height:B,viewX:te,viewY:se,pathSlice:function(Fe){var Ue=te(Fe.x0),He=te(Fe.x1),Ke=se(Fe.y0),st=se(Fe.y1);return He-Ue&&st-Ke?"M"+ge(Ue,Ke+0)+"L"+ge(He-0,Ke)+"L"+ge(He,st-0)+"L"+ge(Ue+0,st)+"Z":""},toMoveInsideSlice:Ie,prevEntry:$,makeUpdateSliceInterpolator:ve,makeUpdateTextInterpolator:Te,handleSlicesExit:Pe,hasTransition:C,strTransform:De}),o.pathbar.visible?t(u,i,k,A,{barDifY:Q,width:j,height:W,viewX:he,viewY:xe,pathSlice:function(Fe){var Ue=he(Math.max(Math.min(Fe.x0,Fe.x0),0)),He=he(Math.min(Math.max(Fe.x1,Fe.x1),j)),Ke=xe(Fe.y0),st=xe(Fe.y1),Ve=W/2,$e={},Qe={};$e.x=Ue,Qe.x=He,$e.y=Qe.y=(Ke+st)/2;var tt={x:Ue,y:Ke},ut={x:He,y:Ke},xt={x:He,y:st},kt={x:Ue,y:st};return">"===Le?(tt.x-=Ve,ut.x-=Ve,xt.x-=Ve,kt.x-=Ve):"/"===Le?(xt.x-=Ve,kt.x-=Ve,$e.x-=Ve/2,Qe.x-=Ve/2):"\\"===Le?(tt.x-=Ve,ut.x-=Ve,$e.x-=Ve/2,Qe.x-=Ve/2):"<"===Le&&($e.x-=Ve,Qe.x-=Ve),Ce(tt),Ce(kt),Ce($e),Ce(ut),Ce(xt),Ce(Qe),"M"+ge(tt.x,tt.y)+"L"+ge(ut.x,ut.y)+"L"+ge(Qe.x,Qe.y)+"L"+ge(xt.x,xt.y)+"L"+ge(kt.x,kt.y)+"L"+ge($e.x,$e.y)+"Z"},toMoveInsideSlice:Ie,makeUpdateSliceInterpolator:ve,makeUpdateTextInterpolator:Te,handleSlicesExit:Pe,hasTransition:C,strTransform:De}):A.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1055,"./constants":1078,"./draw_ancestors":1081,"@plotly/d3":58,"d3-interpolate":116}],1090:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/color"),w=x("../../lib"),y=x("../sunburst/helpers"),e=x("../bar/uniform_text").resizeText;function r(n,a,t,p){var u,i,c=(p||{}).hovered,f=a.data.data,l=f.i,h=f.color,d=y.isHierarchyRoot(a),o=1;if(c)u=t._hovered.marker.line.color,i=t._hovered.marker.line.width;else if(d&&h===t.root.color)o=100,u="rgba(0,0,0,0)",i=0;else if(u=w.castOption(t,l,"marker.line.color")||m.defaultLine,i=w.castOption(t,l,"marker.line.width")||0,!t._hasColorscale&&!a.onPathbar){var _=t.marker.depthfade;if(_){var s,k=m.combine(m.addOpacity(t._backgroundColor,.75),h);if(!0===_){var M=y.getMaxDepth(t);s=isFinite(M)?y.isLeaf(a)?0:t._maxVisibleLayers-(a.data.depth-t._entryDepth):a.data.height+1}else s=a.data.depth-t._entryDepth,t._atRootLevel||s++;if(s>0)for(var A=0;A<s;A++)h=m.combine(m.addOpacity(k,.5*A/s),h)}}n.style("stroke-width",i).call(m.fill,h).call(m.stroke,u).style("opacity",o)}oe.exports={style:function(n){var a=n._fullLayout._treemaplayer.selectAll(".trace");e(n,a,"treemap"),a.each(function(t){var p=g.select(this),u=t[0].trace;p.style("opacity",u.opacity),p.selectAll("path.surface").each(function(i){g.select(this).call(r,i,u,{hovered:!1})})})},styleOne:r}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1055,"@plotly/d3":58}],1091:[function(x,oe,ae){"use strict";var g=x("../box/attributes"),m=x("../../lib/extend").extendFlat,w=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat;oe.exports={y:g.y,x:g.x,x0:g.x0,y0:g.y0,xhoverformat:w("x"),yhoverformat:w("y"),name:m({},g.name,{}),orientation:m({},g.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:g.fillcolor,points:m({},g.boxpoints,{}),jitter:m({},g.jitter,{}),pointpos:m({},g.pointpos,{}),width:m({},g.width,{}),marker:g.marker,text:g.text,hovertext:g.hovertext,hovertemplate:g.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup,selected:g.selected,unselected:g.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1092:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/cartesian/axes"),w=x("../box/calc"),y=x("./helpers"),e=x("../../constants/numerical").BADNUM;function r(a,t,p){var u=t.max-t.min;if(!u)return a.bandwidth?a.bandwidth:0;if(a.bandwidth)return Math.max(a.bandwidth,u/1e4);var f,i=p.length,c=g.stdev(p,i-1,t.mean);return Math.max((f=i,1.059*Math.min(c,(t.q3-t.q1)/1.349)*Math.pow(f,-.2)),u/100)}function n(a,t,p,u){var i,c=a.spanmode,f=a.span||[],h=[t.min-2*u,t.max+2*u];function d(_){var s=f[_],k="multicategory"===p.type?p.r2c(s):p.d2c(s,0,a[t.valLetter+"calendar"]);return k===e?h[_]:k}var o={type:"linear",range:i="soft"===c?h:"hard"===c?[t.min,t.max]:[d(0),d(1)]};return m.setConvert(o),o.cleanRange(),i}oe.exports=function(a,t){var p=w(a,t);if(p[0].t.empty)return p;for(var u=a._fullLayout,i=m.getFromId(a,t["h"===t.orientation?"xaxis":"yaxis"]),c=1/0,f=-1/0,l=0,h=0,d=0;d<p.length;d++){var o=p[d],_=o.pts.map(y.extractVal),s=o.bandwidth=r(t,o,_),k=o.span=n(t,o,i,s);if(o.min===o.max&&0===s)k=o.span=[o.min,o.max],o.density=[{v:1,t:k[0]}],o.bandwidth=s,l=Math.max(l,1);else{var M=k[1]-k[0],A=Math.ceil(M/(s/3)),E=M/A;if(!isFinite(E)||!isFinite(A))return g.error("Something went wrong with computing the violin span"),p[0].t.empty=!0,p;var I=y.makeKDE(o,t,_);o.density=new Array(A);for(var C=0,R=k[0];R<k[1]+E/2;C++,R+=E){var O=I(R);o.density[C]={v:O,t:R},l=Math.max(l,O)}}h=Math.max(h,_.length),c=Math.min(c,k[0]),f=Math.max(f,k[1])}var D=m.findExtremes(i,[c,f],{padded:!0});if(t._extremes[i._id]=D,t.width)p[0].t.maxKDE=l;else{var L=u._violinScaleGroupStats,B=t.scalegroup,j=L[B];j?(j.maxKDE=Math.max(j.maxKDE,l),j.maxCount=Math.max(j.maxCount,h)):L[B]={maxKDE:l,maxCount:h}}return p[0].t.labels.kde=g._(a,"kde:"),p}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1095}],1093:[function(x,oe,ae){"use strict";var g=x("../box/cross_trace_calc").setPositionOffset,m=["v","h"];oe.exports=function(w,y){for(var e=w.calcdata,r=y.xaxis,n=y.yaxis,a=0;a<m.length;a++){for(var t=m[a],p="h"===t?n:r,u=[],i=0;i<e.length;i++){var c=e[i],l=c[0].trace;!0!==l.visible||"violin"!==l.type||c[0].t.empty||l.orientation!==t||l.xaxis!==r._id||l.yaxis!==n._id||u.push(i)}g("violin",w,u,p)}}},{"../box/cross_trace_calc":675}],1094:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../components/color"),w=x("../box/defaults"),y=x("./attributes");oe.exports=function(e,r,n,a){function t(M,A){return g.coerce(e,r,y,M,A)}function p(M,A){return g.coerce2(e,r,y,M,A)}if(w.handleSampleDefaults(e,r,t,a),!1!==r.visible){t("bandwidth"),t("side"),t("width")||(t("scalegroup",r.name),t("scalemode"));var u,i=t("span");Array.isArray(i)&&(u="manual"),t("spanmode",u);var c=t("line.color",(e.marker||{}).color||n),f=t("line.width"),l=t("fillcolor",m.addOpacity(r.line.color,.5));w.handlePointsDefaults(e,r,t,{prefix:""});var h=p("box.width"),d=p("box.fillcolor",l),o=p("box.line.color",c),_=p("box.line.width",f);t("box.visible",Boolean(h||d||o||_))||(r.box={visible:!1});var s=p("meanline.color",c),k=p("meanline.width",f);t("meanline.visible",Boolean(s||k))||(r.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1091}],1095:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=function(w){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*w*w)};ae.makeKDE=function(w,y,e){var r=e.length,n=m,a=w.bandwidth,t=1/(r*a);return function(p){for(var u=0,i=0;i<r;i++)u+=n((p-e[i])/a);return t*u}},ae.getPositionOnKdePath=function(w,y,e){var r,n;"h"===y.orientation?(r="y",n="x"):(r="x",n="y");var a=g.findPointOnPath(w.path,e,n,{pathLength:w.pathLength}),t=w.posCenterPx,p=a[r];return[p,"both"===y.side?2*t-p:t]},ae.getKdeValue=function(w,y,e){var r=w.pts.map(ae.extractVal);return ae.makeKDE(w,y,r)(e)/w.posDensityScale},ae.extractVal=function(w){return w.v}},{"../../lib":503}],1096:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../../plots/cartesian/axes"),w=x("../box/hover"),y=x("./helpers");oe.exports=function(e,r,n,a,t){t||(t={});var p,u,i=t.hoverLayer,c=e.cd,f=c[0].trace,l=f.hoveron,h=-1!==l.indexOf("violins"),d=-1!==l.indexOf("kde"),o=[];if(h||d){var _=w.hoverOnBoxes(e,r,n,a);if(d&&_.length>0){var s,k,M,A,E,I=e.xa,C=e.ya;"h"===f.orientation?(E=r,s="y",M=C,k="x",A=I):(E=n,s="x",M=I,k="y",A=C);var R=c[e.index];if(E>=R.span[0]&&E<=R.span[1]){var O=g.extendFlat({},e),D=A.c2p(E,!0),L=y.getKdeValue(R,f,E),B=y.getPositionOnKdePath(R,f,D),j=M._offset,W=M._length;O[s+"0"]=B[0],O[s+"1"]=B[1],O[k+"0"]=O[k+"1"]=D,O[k+"Label"]=k+": "+m.hoverLabelText(A,E,f[k+"hoverformat"])+", "+c[0].t.labels.kde+" "+L.toFixed(3),O.spikeDistance=_[0].spikeDistance;var Y=s+"Spike";O[Y]=_[0][Y],_[0].spikeDistance=void 0,_[0][Y]=void 0,O.hovertemplate=!1,o.push(O),(u={stroke:e.color})[s+"1"]=g.constrain(j+B[0],j,j+W),u[s+"2"]=g.constrain(j+B[1],j,j+W),u[k+"1"]=u[k+"2"]=A._offset+D}}h&&(o=o.concat(_))}-1!==l.indexOf("points")&&(p=w.hoverOnPoints(e,r,n));var Q=i.selectAll(".violinline-"+f.uid).data(u?[0]:[]);return Q.enter().append("line").classed("violinline-"+f.uid,!0).attr("stroke-width",1.5),Q.exit().remove(),Q.attr(u),"closest"===a?p?[p]:o:(p&&o.push(p),o)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1095}],1097:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc"),crossTraceCalc:x("./cross_trace_calc"),plot:x("./plot"),style:x("./style"),styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover"),selectPoints:x("../box/select"),moduleType:"trace",name:"violin",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":951,"./attributes":1091,"./calc":1092,"./cross_trace_calc":1093,"./defaults":1094,"./hover":1096,"./layout_attributes":1098,"./layout_defaults":1099,"./plot":1100,"./style":1101}],1098:[function(x,oe,ae){"use strict";var g=x("../box/layout_attributes"),m=x("../../lib").extendFlat;oe.exports={violinmode:m({},g.boxmode,{}),violingap:m({},g.boxgap,{}),violingroupgap:m({},g.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1099:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./layout_attributes"),w=x("../box/layout_defaults");oe.exports=function(y,e,r){w._supply(y,e,r,function(n,a){return g.coerce(y,e,m,n,a)},"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1098}],1100:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=x("../../components/drawing"),y=x("../box/plot"),e=x("../scatter/line_points"),r=x("./helpers");oe.exports=function(n,a,t,p){var u=n._fullLayout,i=a.xaxis,c=a.yaxis;function f(l){var h=e(l,{xaxis:i,yaxis:c,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return w.smoothopen(h[0],1)}m.makeTraceGroups(p,t,"trace violins").each(function(l){var h=g.select(this),d=l[0],o=d.t,_=d.trace;if(!0!==_.visible||o.empty)h.remove();else{var s=o.bPos,k=o.bdPos,M=a[o.valLetter+"axis"],A=a[o.posLetter+"axis"],E="both"===_.side,I=E||"positive"===_.side,C=E||"negative"===_.side,R=h.selectAll("path.violin").data(m.identity);R.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),R.exit().remove(),R.each(function(Q){var ne,X,$,re,H,U,G,ie,q=g.select(this),ee=Q.density,te=ee.length,se=A.c2l(Q.pos+s,!0),ue=A.l2p(se);if(_.width)ne=o.maxKDE/k;else{var de=u._violinScaleGroupStats[_.scalegroup];ne="count"===_.scalemode?de.maxKDE/k*(de.maxCount/Q.pts.length):de.maxKDE/k}if(I){for(G=new Array(te),H=0;H<te;H++)(ie=G[H]={})[o.posLetter]=se+ee[H].v/ne,ie[o.valLetter]=M.c2l(ee[H].t,!0);X=f(G)}if(C){for(G=new Array(te),U=0,H=te-1;U<te;U++,H--)(ie=G[U]={})[o.posLetter]=se-ee[H].v/ne,ie[o.valLetter]=M.c2l(ee[H].t,!0);$=f(G)}if(E)re=X+"L"+$.substr(1)+"Z";else{var he=[ue,M.c2p(ee[0].t)],xe=[ue,M.c2p(ee[te-1].t)];"h"===_.orientation&&(he.reverse(),xe.reverse()),re=I?"M"+he+"L"+X.substr(1)+"L"+xe:"M"+xe+"L"+$.substr(1)+"L"+he}q.attr("d",re),Q.posCenterPx=ue,Q.posDensityScale=ne*k,Q.path=q.node(),Q.pathLength=Q.path.getTotalLength()/(E?2:1)});var O,D,L,B=_.box,j=B.width,W=(B.line||{}).width;E?(O=k*j,D=0):I?(O=[0,k*j/2],D=W*{x:1,y:-1}[o.posLetter]):(O=[k*j/2,0],D=W*{x:-1,y:1}[o.posLetter]),y.plotBoxAndWhiskers(h,{pos:A,val:M},_,{bPos:s,bdPos:O,bPosPxOffset:D}),y.plotBoxMean(h,{pos:A,val:M},_,{bPos:s,bdPos:O,bPosPxOffset:D}),!_.box.visible&&_.meanline.visible&&(L=m.identity);var Y=h.selectAll("path.meanline").data(L||[]);Y.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),Y.exit().remove(),Y.each(function(Q){var ne=M.c2p(Q.mean,!0),X=r.getPositionOnKdePath(Q,_,ne);g.select(this).attr("d","h"===_.orientation?"M"+ne+","+X[0]+"V"+X[1]:"M"+X[0]+","+ne+"H"+X[1])}),y.plotPoints(h,{x:i,y:c},_,o)}})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":941,"./helpers":1095,"@plotly/d3":58}],1101:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/color"),w=x("../scatter/style").stylePoints;oe.exports=function(y){var e=g.select(y).selectAll("g.trace.violins");e.style("opacity",function(r){return r[0].trace.opacity}),e.each(function(r){var n=r[0].trace,a=g.select(this),t=n.box||{},p=t.line||{},u=n.meanline||{},i=u.width;a.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(m.stroke,n.line.color).call(m.fill,n.fillcolor),a.selectAll("path.box").style("stroke-width",p.width+"px").call(m.stroke,p.color).call(m.fill,t.fillcolor);var c={"stroke-width":i+"px","stroke-dasharray":2*i+"px,"+i+"px"};a.selectAll("path.mean").style(c).call(m.stroke,u.color),a.selectAll("path.meanline").style(c).call(m.stroke,u.color),w(a,n,y)})}},{"../../components/color":366,"../scatter/style":951,"@plotly/d3":58}],1102:[function(x,oe,ae){"use strict";var g=x("../../components/colorscale/attributes"),m=x("../isosurface/attributes"),w=x("../surface/attributes"),y=x("../../plots/attributes"),e=x("../../lib/extend").extendFlat,r=x("../../plot_api/edit_types").overrideAll,n=oe.exports=r(e({x:m.x,y:m.y,z:m.z,value:m.value,isomin:m.isomin,isomax:m.isomax,surface:m.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:m.slices,caps:m.caps,text:m.text,hovertext:m.hovertext,xhoverformat:m.xhoverformat,yhoverformat:m.yhoverformat,zhoverformat:m.zhoverformat,valuehoverformat:m.valuehoverformat,hovertemplate:m.hovertemplate},g("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:m.colorbar,opacity:m.opacity,opacityscale:w.opacityscale,lightposition:m.lightposition,lighting:m.lighting,flatshading:m.flatshading,contour:m.contour,hoverinfo:e({},y.hoverinfo),showlegend:e({},y.showlegend,{dflt:!1})}),"calc","nested");n.x.editType=n.y.editType=n.z.editType=n.value.editType="calc+clearAxisTypes",n.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1061}],1103:[function(x,oe,ae){"use strict";var g=x("../../../stackgl_modules").gl_mesh3d,m=x("../../lib/gl_format_color").parseColorScale,w=x("../../lib/str2rgbarray"),y=x("../../components/colorscale").extractOpts,e=x("../../plots/gl3d/zip3"),r=x("../isosurface/convert").findNearestOnAxis,n=x("../isosurface/convert").generateIsoMeshes;function a(p,u,i){this.scene=p,this.uid=i,this.mesh=u,this.name="",this.data=null,this.showContour=!1}var t=a.prototype;t.handlePick=function(p){if(p.object===this.mesh){var u=p.data.index,c=this.data._meshY[u],f=this.data._meshZ[u],l=this.data._Ys.length,h=this.data._Zs.length,d=r(this.data._meshX[u],this.data._Xs).id,o=r(c,this.data._Ys).id,_=r(f,this.data._Zs).id,s=p.index=_+h*o+h*l*d;p.traceCoordinate=[this.data._meshX[s],this.data._meshY[s],this.data._meshZ[s],this.data._value[s]];var k=this.data.hovertext||this.data.text;return Array.isArray(k)&&void 0!==k[s]?p.textLabel=k[s]:k&&(p.textLabel=k),!0}},t.update=function(p){var u=this.scene,i=u.fullSceneLayout;function c(h,d,o,_){return d.map(function(s){return h.d2l(s,0,_)*o})}this.data=n(p);var f={positions:e(c(i.xaxis,p._meshX,u.dataScale[0],p.xcalendar),c(i.yaxis,p._meshY,u.dataScale[1],p.ycalendar),c(i.zaxis,p._meshZ,u.dataScale[2],p.zcalendar)),cells:e(p._meshI,p._meshJ,p._meshK),lightPosition:[p.lightposition.x,p.lightposition.y,p.lightposition.z],ambient:p.lighting.ambient,diffuse:p.lighting.diffuse,specular:p.lighting.specular,roughness:p.lighting.roughness,fresnel:p.lighting.fresnel,vertexNormalsEpsilon:p.lighting.vertexnormalsepsilon,faceNormalsEpsilon:p.lighting.facenormalsepsilon,opacity:p.opacity,opacityscale:p.opacityscale,contourEnable:p.contour.show,contourColor:w(p.contour.color).slice(0,3),contourWidth:p.contour.width,useFacetNormals:p.flatshading},l=y(p);f.vertexIntensity=p._meshIntensity,f.vertexIntensityBounds=[l.min,l.max],f.colormap=m(p),this.mesh.update(f)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},oe.exports=function(p,u){var c=g({gl:p.glplot.gl}),f=new a(p,c,u.uid);return c._trace=f,f.update(u),p.glplot.add(c),f}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1104:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./attributes"),w=x("../isosurface/defaults").supplyIsoDefaults,y=x("../surface/defaults").opacityscaleDefaults;oe.exports=function(e,r,n,a){function t(p,u){return g.coerce(e,r,m,p,u)}w(e,r,n,a,t),y(e,r,a,t)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1064,"./attributes":1102}],1105:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:x("./convert"),moduleType:"trace",name:"volume",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1102,"./convert":1103,"./defaults":1104}],1106:[function(x,oe,ae){"use strict";var g=x("../bar/attributes"),m=x("../scatter/attributes").line,w=x("../../plots/attributes"),y=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=x("../../plots/template_attributes").hovertemplateAttrs,r=x("../../plots/template_attributes").texttemplateAttrs,n=x("./constants"),a=x("../../lib/extend").extendFlat,t=x("../../components/color");function p(u){return{marker:{color:a({},g.marker.color,{arrayOk:!1,editType:"style"}),line:{color:a({},g.marker.line.color,{arrayOk:!1,editType:"style"}),width:a({},g.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}oe.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:y("x"),yhoverformat:y("y"),hovertext:g.hovertext,hovertemplate:e({},{keys:n.eventDataKeys}),hoverinfo:a({},w.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:r({editType:"plot"},{keys:n.eventDataKeys.concat(["label"])}),text:g.text,textposition:g.textposition,insidetextanchor:g.insidetextanchor,textangle:g.textangle,textfont:g.textfont,insidetextfont:g.insidetextfont,outsidetextfont:g.outsidetextfont,constraintext:g.constraintext,cliponaxis:g.cliponaxis,orientation:g.orientation,offset:g.offset,width:g.width,increasing:p(),decreasing:p(),totals:p(),connector:{line:{color:a({},m.color,{dflt:t.defaultLine}),width:a({},m.width,{editType:"plot"}),dash:m.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927,"./constants":1108}],1107:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes"),m=x("../../plots/cartesian/align_period"),w=x("../../lib").mergeArray,y=x("../scatter/calc_selection"),e=x("../../constants/numerical").BADNUM;function r(a){return"a"===a||"absolute"===a}function n(a){return"t"===a||"total"===a}oe.exports=function(a,t){var p,u,i,c,f,l,h=g.getFromId(a,t.xaxis||"x"),d=g.getFromId(a,t.yaxis||"y");"h"===t.orientation?(p=h.makeCalcdata(t,"x"),i=d.makeCalcdata(t,"y"),c=m(t,d,"y",i),f=!!t.yperiodalignment,l="y"):(p=d.makeCalcdata(t,"y"),i=h.makeCalcdata(t,"x"),c=m(t,h,"x",i),f=!!t.xperiodalignment,l="x"),u=c.vals;for(var o,_=Math.min(u.length,p.length),s=new Array(_),k=0,M=!1,A=0;A<_;A++){var E=p[A]||0,I=!1;(p[A]!==e||n(t.measure[A])||r(t.measure[A]))&&A+1<_&&(p[A+1]!==e||n(t.measure[A+1])||r(t.measure[A+1]))&&(I=!0);var C=s[A]={i:A,p:u[A],s:E,rawS:E,cNext:I};r(t.measure[A])?(k=C.s,C.isSum=!0,C.dir="totals",C.s=k):n(t.measure[A])?(C.isSum=!0,C.dir="totals",C.s=k):(C.isSum=!1,C.dir=C.rawS<0?"decreasing":"increasing",C.s=k+(o=C.s),k+=o),"totals"===C.dir&&(M=!0),f&&(s[A].orig_p=i[A],s[A][l+"End"]=c.ends[A],s[A][l+"Start"]=c.starts[A]),t.ids&&(C.id=String(t.ids[A])),C.v=(t.base||0)+k}return s.length&&(s[0].hasTotals=M),w(t.text,s,"tx"),w(t.hovertext,s,"htx"),y(s,t),s}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929}],1108:[function(x,oe,ae){"use strict";oe.exports={eventDataKeys:["initial","delta","final"]}},{}],1109:[function(x,oe,ae){"use strict";var g=x("../bar/cross_trace_calc").setGroupPositions;oe.exports=function(m,w){var y,e,r=m._fullLayout,n=m._fullData,a=m.calcdata,t=w.xaxis,p=w.yaxis,u=[],i=[],c=[];for(e=0;e<n.length;e++){var f=n[e];!0===f.visible&&f.xaxis===t._id&&f.yaxis===p._id&&"waterfall"===f.type&&(y=a[e],"h"===f.orientation?c.push(y):i.push(y),u.push(y))}var l={mode:r.waterfallmode,norm:r.waterfallnorm,gap:r.waterfallgap,groupgap:r.waterfallgroupgap};for(g(m,t,p,i,l),g(m,p,t,c,l),e=0;e<u.length;e++){y=u[e];for(var h=0;h<y.length;h++){var d=y[h];!1===d.isSum&&(d.s0+=0===h?0:y[h-1].s),h+1<y.length&&(y[h].nextP0=y[h+1].p0,y[h].nextS0=y[h+1].s0)}}}},{"../bar/cross_trace_calc":651}],1110:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("../bar/defaults").handleGroupingDefaults,w=x("../bar/defaults").handleText,y=x("../scatter/xy_defaults"),e=x("../scatter/period_defaults"),r=x("./attributes"),n=x("../../components/color"),a=x("../../constants/delta.js"),t=a.INCREASING.COLOR,p=a.DECREASING.COLOR;function u(i,c,f){i(c+".marker.color",f),i(c+".marker.line.color",n.defaultLine),i(c+".marker.line.width")}oe.exports={supplyDefaults:function(i,c,f,l){function h(o,_){return g.coerce(i,c,r,o,_)}if(y(i,c,l,h)){e(i,c,l,h),h("xhoverformat"),h("yhoverformat"),h("measure"),h("orientation",c.x&&!c.y?"h":"v"),h("base"),h("offset"),h("width"),h("text"),h("hovertext"),h("hovertemplate");var d=h("textposition");w(i,c,l,h,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==c.textposition&&(h("texttemplate"),c.texttemplate||h("textinfo")),u(h,"increasing",t),u(h,"decreasing",p),u(h,"totals","#4499FF"),h("connector.visible")&&(h("connector.mode"),h("connector.line.width")&&(h("connector.line.color"),h("connector.line.dash")))}else c.visible=!1},crossTraceDefaults:function(i,c){var f,l;function h(o){return g.coerce(l._input,l,r,o)}if("group"===c.waterfallmode)for(var d=0;d<i.length;d++)f=(l=i[d])._input,m(f,l,c,h)}}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":1106}],1111:[function(x,oe,ae){"use strict";oe.exports=function(g,m){return g.x="xVal"in m?m.xVal:m.x,g.y="yVal"in m?m.yVal:m.y,"initial"in m&&(g.initial=m.initial),"delta"in m&&(g.delta=m.delta),"final"in m&&(g.final=m.final),m.xa&&(g.xaxis=m.xa),m.ya&&(g.yaxis=m.ya),g}},{}],1112:[function(x,oe,ae){"use strict";var g=x("../../plots/cartesian/axes").hoverLabelText,m=x("../../components/color").opacity,w=x("../bar/hover").hoverOnBars,y=x("../../constants/delta.js"),e=y.INCREASING.SYMBOL,r=y.DECREASING.SYMBOL;oe.exports=function(n,a,t,p,u){var D,L,B,j,i=w(n,a,t,p,u);if(i){var c=i.cd,f=c[0].trace,l="h"===f.orientation,h=l?"x":"y",d=l?n.xa:n.ya,o=c[i.index],_=o.isSum?o.b+o.s:o.rawS;if(!o.isSum){i.initial=o.b+o.s-_,i.delta=_,i.final=i.initial+i.delta;var s=C(Math.abs(i.delta));i.deltaLabel=_<0?"("+s+")":s,i.finalLabel=C(i.final),i.initialLabel=C(i.initial)}var k=o.hi||f.hoverinfo,M=[];if(k&&"none"!==k&&"skip"!==k){var A="all"===k,E=k.split("+"),I=function(R){return A||-1!==E.indexOf(R)};o.isSum||(!I("final")||I(l?"x":"y")||M.push(i.finalLabel),I("delta")&&M.push(_<0?i.deltaLabel+" "+r:i.deltaLabel+" "+e),I("initial")&&M.push("Initial: "+i.initialLabel))}return M.length&&(i.extraText=M.join("<br>")),i.color=(B=(D=f[o.dir].marker).line.color,j=D.line.width,m(L=D.color)?L:m(B)&&j?B:void 0),[i]}function C(R){return g(d,R,f[h+"hoverformat"])}}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1113:[function(x,oe,ae){"use strict";oe.exports={attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults").supplyDefaults,crossTraceDefaults:x("./defaults").crossTraceDefaults,supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc"),crossTraceCalc:x("./cross_trace_calc"),plot:x("./plot"),style:x("./style").style,hoverPoints:x("./hover"),eventData:x("./event_data"),selectPoints:x("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:x("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1106,"./calc":1107,"./cross_trace_calc":1109,"./defaults":1110,"./event_data":1111,"./hover":1112,"./layout_attributes":1114,"./layout_defaults":1115,"./plot":1116,"./style":1117}],1114:[function(x,oe,ae){"use strict";oe.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1115:[function(x,oe,ae){"use strict";var g=x("../../lib"),m=x("./layout_attributes");oe.exports=function(w,y,e){var r=!1;function n(p,u){return g.coerce(w,y,m,p,u)}for(var a=0;a<e.length;a++){var t=e[a];if(t.visible&&"waterfall"===t.type){r=!0;break}}r&&(n("waterfallmode"),n("waterfallgap",.2),n("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1114}],1116:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../lib"),w=x("../../components/drawing"),y=x("../../constants/numerical").BADNUM,e=x("../bar/plot"),r=x("../bar/uniform_text").clearMinTextSize;oe.exports=function(n,a,t,p){var i,c,h,d,u=n._fullLayout;r("waterfall",u),e.plot(n,a,t,p,{mode:u.waterfallmode,norm:u.waterfallmode,gap:u.waterfallgap,groupgap:u.waterfallgroupgap}),i=n,h=(c=a).xaxis,d=c.yaxis,m.makeTraceGroups(p,t,"trace bars").each(function(o){var _=g.select(this),s=o[0].trace,k=m.ensureSingle(_,"g","lines");if(s.connector&&s.connector.visible){var M="h"===s.orientation,A=s.connector.mode,E=k.selectAll("g.line").data(m.identity);E.enter().append("g").classed("line",!0),E.exit().remove();var I=E.size();E.each(function(C,R){if(R===I-1||C.cNext){var O=(W=h,Y=d,X=[],re=(Q=M)?Y:W,(ne=[])[0]=($=Q?W:Y).c2p((j=C).s0,!0),X[0]=re.c2p(j.p0,!0),ne[1]=$.c2p(j.s1,!0),X[1]=re.c2p(j.p1,!0),ne[2]=$.c2p(j.nextS0,!0),X[2]=re.c2p(j.nextP0,!0),Q?[ne,X]:[X,ne]),D=O[0],L=O[1],B="";D[0]!==y&&L[0]!==y&&D[1]!==y&&L[1]!==y&&("spanning"===A&&!C.isSum&&R>0&&(B+=M?"M"+D[0]+","+L[1]+"V"+L[0]:"M"+D[1]+","+L[0]+"H"+D[0]),"between"!==A&&(C.isSum||R<I-1)&&(B+=M?"M"+D[1]+","+L[0]+"V"+L[1]:"M"+D[0]+","+L[1]+"H"+D[1]),D[2]!==y&&L[2]!==y&&(B+=M?"M"+D[1]+","+L[1]+"V"+L[2]:"M"+D[1]+","+L[1]+"H"+D[2])),""===B&&(B="M0,0Z"),m.ensureSingle(g.select(this),"path").attr("d",B).call(w.setClipUrl,c.layerClipId,i)}var j,W,Y,Q,ne,X,$,re})}else k.remove()})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1117:[function(x,oe,ae){"use strict";var g=x("@plotly/d3"),m=x("../../components/drawing"),w=x("../../components/color"),y=x("../../constants/interactions").DESELECTDIM,e=x("../bar/style"),r=x("../bar/uniform_text").resizeText,n=e.styleTextPoints;oe.exports={style:function(a,t,p){var u=p||g.select(a).selectAll("g.waterfalllayer").selectAll("g.trace");r(a,u,"waterfall"),u.style("opacity",function(i){return i[0].trace.opacity}),u.each(function(i){var c=g.select(this),f=i[0].trace;c.selectAll(".point > path").each(function(l){if(!l.isBlank){var h=f[l.dir].marker;g.select(this).call(w.fill,h.color).call(w.stroke,h.line.color).call(m.dashLine,h.line.dash,h.line.width).style("opacity",f.selectedpoints&&!l.selected?y:1)}}),n(c,f,a),c.selectAll(".lines").each(function(){var l=f.connector.line;m.lineGroupStyle(g.select(this).selectAll("path"),l.width,l.color,l.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1118:[function(x,oe,ae){"use strict";var g=x("../plots/cartesian/axes"),m=x("../lib"),w=x("../plot_api/plot_schema"),y=x("./helpers").pointsAccessorFunction,e=x("../constants/numerical").BADNUM;ae.moduleType="transform",ae.name="aggregate";var r=ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},n=r.aggregations;function a(i,c,f,l){if(l.enabled){for(var h=l.target,d=m.nestedProperty(c,h),o=d.get(),_=function(M,A){var I=A.d2c,C=A.c2d;switch(M.func){case"count":return t;case"first":return p;case"last":return u;case"sum":return function(R,O){for(var D=0,L=0;L<O.length;L++){var B=I(R[O[L]]);B!==e&&(D+=B)}return C(D)};case"avg":return function(R,O){for(var D=0,L=0,B=0;B<O.length;B++){var j=I(R[O[B]]);j!==e&&(D+=j,L++)}return L?C(D/L):e};case"min":return function(R,O){for(var D=1/0,L=0;L<O.length;L++){var B=I(R[O[L]]);B!==e&&(D=Math.min(D,B))}return D===1/0?e:C(D)};case"max":return function(R,O){for(var D=-1/0,L=0;L<O.length;L++){var B=I(R[O[L]]);B!==e&&(D=Math.max(D,B))}return D===-1/0?e:C(D)};case"range":return function(R,O){for(var D=1/0,L=-1/0,B=0;B<O.length;B++){var j=I(R[O[B]]);j!==e&&(D=Math.min(D,j),L=Math.max(L,j))}return L===-1/0||D===1/0?e:C(L-D)};case"change":return function(R,O){var D=I(R[O[0]]),L=I(R[O[O.length-1]]);return D===e||L===e?e:C(L-D)};case"median":return function(R,O){for(var D=[],L=0;L<O.length;L++){var B=I(R[O[L]]);B!==e&&D.push(B)}if(!D.length)return e;D.sort(m.sorterAsc);var j=(D.length-1)/2;return C((D[Math.floor(j)]+D[Math.ceil(j)])/2)};case"mode":return function(R,O){for(var D={},L=0,B=e,j=0;j<O.length;j++){var W=I(R[O[j]]);if(W!==e){var Y=D[W]=(D[W]||0)+1;Y>L&&(L=Y,B=W)}}return L?C(B):e};case"rms":return function(R,O){for(var D=0,L=0,B=0;B<O.length;B++){var j=I(R[O[B]]);j!==e&&(D+=j*j,L++)}return L?C(Math.sqrt(D/L)):e};case"stddev":return function(R,O){var D,L=0,B=0,j=1,W=e;for(D=0;D<O.length&&W===e;D++)W=I(R[O[D]]);if(W===e)return e;for(;D<O.length;D++){var Y=I(R[O[D]]);if(Y!==e){var Q=Y-W;L+=Q,B+=Q*Q,j++}}var ne="sample"===M.funcmode?j-1:j;return ne?Math.sqrt((B-L*L/j)/ne):0}}}(l,g.getDataConversions(i,c,h,o)),s=new Array(f.length),k=0;k<f.length;k++)s[k]=_(o,f[k]);d.set(s),"count"===l.func&&m.pushUnique(c._arrayAttrs,h)}}function t(i,c){return c.length}function p(i,c){return i[c[0]]}function u(i,c){return i[c[c.length-1]]}ae.supplyDefaults=function(i,c){var f,l={};function h(C,R){return m.coerce(i,l,r,C,R)}if(!h("enabled"))return l;var d=w.findArrayAttributes(c),o={};for(f=0;f<d.length;f++)o[d[f]]=1;var _=h("groups");if(!Array.isArray(_)){if(!o[_])return l.enabled=!1,l;o[_]=0}var s,k=i.aggregations||[],M=l.aggregations=new Array(k.length);function A(C,R){return m.coerce(k[f],s,n,C,R)}for(f=0;f<k.length;f++){s={_index:f};var E=A("target"),I=A("func");A("enabled")&&E&&(o[E]||"count"===I&&void 0===o[E])?("stddev"===I&&A("funcmode"),o[E]=0,M[f]=s):M[f]={enabled:!1,_index:f}}for(f=0;f<d.length;f++)o[d[f]]&&M.push({target:d[f],func:n.func.dflt,enabled:!0,_index:-1});return l},ae.calcTransform=function(i,c,f){if(f.enabled){var l=f.groups,h=m.getTargetArray(c,{target:l});if(h){var d,o,_,k={},M={},A=[],E=y(c.transforms,f),I=h.length;for(c._length&&(I=Math.min(I,c._length)),d=0;d<I;d++)void 0===(_=k[o=h[d]])?(k[o]=A.length,A.push([d]),M[k[o]]=E(d)):(A[_].push(d),M[k[o]]=(M[k[o]]||[]).concat(E(d)));f._indexToPoints=M;var C=f.aggregations;for(d=0;d<C.length;d++)a(i,c,A,C[d]);"string"==typeof l&&a(i,c,A,{target:l,func:"first",enabled:!0}),c._length=A.length}}}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1121}],1119:[function(x,oe,ae){"use strict";var g=x("../lib"),m=x("../registry"),w=x("../plots/cartesian/axes"),y=x("./helpers").pointsAccessorFunction,e=x("../constants/filter_ops"),r=e.COMPARISON_OPS,n=e.INTERVAL_OPS,a=e.SET_OPS;ae.moduleType="transform",ae.name="filter",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(r).concat(n).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},ae.supplyDefaults=function(t){var p={};function u(f,l){return g.coerce(t,p,ae.attributes,f,l)}if(u("enabled")){var i=u("target");if(g.isArrayOrTypedArray(i)&&0===i.length)return p.enabled=!1,p;u("preservegaps"),u("operation"),u("value");var c=m.getComponentMethod("calendars","handleDefaults");c(t,p,"valuecalendar",null),c(t,p,"targetcalendar",null)}return p},ae.calcTransform=function(t,p,u){if(u.enabled){var i=g.getTargetArray(p,u);if(i){var c=u.target,f=i.length;p._length&&(f=Math.min(f,p._length));var l=u.targetcalendar,h=p._arrayAttrs,d=u.preservegaps;if("string"==typeof c){var o=g.nestedProperty(p,c+"calendar").get();o&&(l=o)}var _,s,k=function(O,D,L){var B=O.operation,j=O.value,W=Array.isArray(j);function Y($){return-1!==$.indexOf(B)}var Q,ne=function($){return D($,0,O.valuecalendar)},X=function($){return D($,0,L)};switch(Y(r)?Q=ne(W?j[0]:j):Y(n)?Q=W?[ne(j[0]),ne(j[1])]:[ne(j),ne(j)]:Y(a)&&(Q=W?j.map(ne):[ne(j)]),B){case"=":return function($){return X($)===Q};case"!=":return function($){return X($)!==Q};case"<":return function($){return X($)<Q};case"<=":return function($){return X($)<=Q};case">":return function($){return X($)>Q};case">=":return function($){return X($)>=Q};case"[]":return function($){var re=X($);return re>=Q[0]&&re<=Q[1]};case"()":return function($){var re=X($);return re>Q[0]&&re<Q[1]};case"[)":return function($){var re=X($);return re>=Q[0]&&re<Q[1]};case"(]":return function($){var re=X($);return re>Q[0]&&re<=Q[1]};case"][":return function($){var re=X($);return re<=Q[0]||re>=Q[1]};case")(":return function($){var re=X($);return re<Q[0]||re>Q[1]};case"](":return function($){var re=X($);return re<=Q[0]||re>Q[1]};case")[":return function($){var re=X($);return re<Q[0]||re>=Q[1]};case"{}":return function($){return-1!==Q.indexOf(X($))};case"}{":return function($){return-1===Q.indexOf(X($))}}}(u,w.getDataToCoordFunc(t,p,c,i),l),M={},A={},E=0;d?(_=function(O){M[O.astr]=g.extendDeep([],O.get()),O.set(new Array(f))},s=function(O,D){var L=M[O.astr][D];O.get()[D]=L}):(_=function(O){M[O.astr]=g.extendDeep([],O.get()),O.set([])},s=function(O,D){var L=M[O.astr][D];O.get().push(L)}),R(_);for(var I=y(p.transforms,u),C=0;C<f;C++)k(i[C])?(R(s,C),A[E++]=I(C)):d&&E++;u._indexToPoints=A,p._length=E}}function R(O,D){for(var L=0;L<h.length;L++)O(g.nestedProperty(p,h[L]),D)}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1121}],1120:[function(x,oe,ae){"use strict";var g=x("../lib"),m=x("../plot_api/plot_schema"),w=x("../plots/plots"),y=x("./helpers").pointsAccessorFunction;function e(r,n){var a,t,p,u,i,c,f,l,h,d,o=n.transform,_=n.transformIndex,s=r.transforms[_].groups,k=y(r.transforms,o);if(!g.isArrayOrTypedArray(s)||0===s.length)return[r];var M=g.filterUnique(s),A=new Array(M.length),E=s.length,I=m.findArrayAttributes(r),C=o.styles||[],R={};for(a=0;a<C.length;a++)R[C[a].target]=C[a].value;o.styles&&(d=g.keyedContainer(o,"styles","target","value.name"));var O={},D={};for(a=0;a<M.length;a++){O[c=M[a]]=a,D[c]=0,(f=A[a]=g.extendDeepNoArrays({},r))._group=c,f.transforms[_]._indexToPoints={};var L=null;for(d&&(L=d.get(c)),f.name=L||""===L?L:g.templateString(o.nameformat,{trace:r.name,group:c}),l=f.transforms,f.transforms=[],t=0;t<l.length;t++)f.transforms[t]=g.extendDeepNoArrays({},l[t]);for(t=0;t<I.length;t++)g.nestedProperty(f,I[t]).set([])}for(p=0;p<I.length;p++){for(u=I[p],t=0,h=[];t<M.length;t++)h[t]=g.nestedProperty(A[t],u).get();for(i=g.nestedProperty(r,u).get(),t=0;t<E;t++)h[O[s[t]]].push(i[t])}for(t=0;t<E;t++)(f=A[O[s[t]]]).transforms[_]._indexToPoints[D[s[t]]]=k(t),D[s[t]]++;for(a=0;a<M.length;a++)c=M[a],w.clearExpandedTraceDefaultColors(f=A[a]),f=g.extendDeepNoArrays(f,R[c]||{});return A}ae.moduleType="transform",ae.name="groupby",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},ae.supplyDefaults=function(r,n,a){var t,p={};function u(h,d){return g.coerce(r,p,ae.attributes,h,d)}if(!u("enabled"))return p;u("groups"),u("nameformat",a._dataLength>1?"%{group} (%{trace})":"%{group}");var i=r.styles,c=p.styles=[];if(i)for(t=0;t<i.length;t++){var f=c[t]={};g.coerce(i[t],c[t],ae.attributes.styles,"target");var l=g.coerce(i[t],c[t],ae.attributes.styles,"value");g.isPlainObject(l)?f.value=g.extendDeep({},l):l&&delete f.value}return p},ae.transform=function(r,n){var a,t,p,u=[];for(t=0;t<r.length;t++)for(a=e(r[t],n),p=0;p<a.length;p++)u.push(a[p]);return u}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1121}],1121:[function(x,oe,ae){"use strict";ae.pointsAccessorFunction=function(g,m){for(var w,y,e=0;e<g.length&&(w=g[e])!==m;e++)w._indexToPoints&&!1!==w.enabled&&(y=w._indexToPoints);return y?function(r){return y[r]}:function(r){return[r]}}},{}],1122:[function(x,oe,ae){"use strict";var g=x("../lib"),m=x("../plots/cartesian/axes"),w=x("./helpers").pointsAccessorFunction,y=x("../constants/numerical").BADNUM;ae.moduleType="transform",ae.name="sort",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},ae.supplyDefaults=function(e){var r={};function n(a,t){return g.coerce(e,r,ae.attributes,a,t)}return n("enabled")&&(n("target"),n("order")),r},ae.calcTransform=function(e,r,n){if(n.enabled){var a=g.getTargetArray(r,n);if(a){var t=n.target,p=a.length;r._length&&(p=Math.min(p,r._length));var u,i,c=r._arrayAttrs,f=function(s,k,M,A){var E,I=new Array(A),C=new Array(A);for(E=0;E<A;E++)I[E]={v:k[E],i:E};for(I.sort(function(R,O){switch(R.order){case"ascending":return function(D,L){var B=O(D.v),j=O(L.v);return B===y?1:j===y?-1:B-j};case"descending":return function(D,L){var B=O(D.v),j=O(L.v);return B===y?1:j===y?-1:j-B}}}(s,M)),E=0;E<A;E++)C[E]=I[E].i;return C}(n,a,m.getDataToCoordFunc(e,r,t,a),p),l=w(r.transforms,n),h={};for(u=0;u<c.length;u++){var d=g.nestedProperty(r,c[u]),o=d.get(),_=new Array(p);for(i=0;i<p;i++)_[i]=o[f[i]];d.set(_)}for(i=0;i<p;i++)h[i]=l(f[i]);n._indexToPoints=h,r._length=p}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1121}],1123:[function(x,oe,ae){"use strict";ae.version="2.12.1"},{}],1124:[function(x,oe,ae){(function(g){(function(){!function(m){"object"==typeof ae&&void 0!==oe?oe.exports=m():("undefined"!=typeof window?window:void 0!==g?g:"undefined"!=typeof self?self:this).stackgl=m()}(function(){return function m(w,y,e){function r(t,p){if(!y[t]){if(!w[t]){var u="function"==typeof x&&x;if(!p&&u)return u(t,!0);if(n)return n(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var c=y[t]={exports:{}};w[t][0].call(c.exports,function(f){return r(w[t][1][f]||f)},c,c.exports,m,w,y,e)}return y[t].exports}for(var n="function"==typeof x&&x,a=0;a<e.length;a++)r(e[a]);return r}({1:[function(m,w,y){"use strict";y.byteLength=function(c){var f=u(c),h=f[1];return 3*(f[0]+h)/4-h},y.toByteArray=function(c){var f,l,E,h=u(c),d=h[0],o=h[1],_=new n(3*(d+(E=o))/4-E),s=0,k=o>0?d-4:d;for(l=0;l<k;l+=4)f=r[c.charCodeAt(l)]<<18|r[c.charCodeAt(l+1)]<<12|r[c.charCodeAt(l+2)]<<6|r[c.charCodeAt(l+3)],_[s++]=f>>16&255,_[s++]=f>>8&255,_[s++]=255&f;return 2===o&&(f=r[c.charCodeAt(l)]<<2|r[c.charCodeAt(l+1)]>>4,_[s++]=255&f),1===o&&(f=r[c.charCodeAt(l)]<<10|r[c.charCodeAt(l+1)]<<4|r[c.charCodeAt(l+2)]>>2,_[s++]=f>>8&255,_[s++]=255&f),_},y.fromByteArray=function(c){for(var f,l=c.length,h=l%3,d=[],o=0,_=l-h;o<_;o+=16383)d.push(i(c,o,o+16383>_?_:o+16383));return 1===h?d.push(e[(f=c[l-1])>>2]+e[f<<4&63]+"=="):2===h&&d.push(e[(f=(c[l-2]<<8)+c[l-1])>>10]+e[f>>4&63]+e[f<<2&63]+"="),d.join("")};for(var e=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,p=a.length;t<p;++t)e[t]=a[t],r[a.charCodeAt(t)]=t;function u(c){var f=c.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=c.indexOf("=");return-1===l&&(l=f),[l,l===f?0:4-l%4]}function i(c,f,l){for(var d,o=[],_=f;_<l;_+=3)o.push(e[(d=(c[_]<<16&16711680)+(c[_+1]<<8&65280)+(255&c[_+2]))>>18&63]+e[d>>12&63]+e[d>>6&63]+e[63&d]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],2:[function(m,w,y){},{}],3:[function(m,w,y){(function(e){(function(){"use strict";var r=m("base64-js"),n=m("ieee754");function a(q){if(q>2147483647)throw new RangeError('The value "'+q+'" is invalid for option "size"');var ee=new Uint8Array(q);return ee.__proto__=t.prototype,ee}function t(q,ee,te){if("number"==typeof q){if("string"==typeof ee)throw new TypeError('The "string" argument must be of type string. Received type number');return i(q)}return p(q,ee,te)}function p(q,ee,te){if("string"==typeof q)return function(de,he){if("string"==typeof he&&""!==he||(he="utf8"),!t.isEncoding(he))throw new TypeError("Unknown encoding: "+he);var xe=0|l(de,he),ge=a(xe),_e=ge.write(de,he);return _e!==xe&&(ge=ge.slice(0,_e)),ge}(q,ee);if(ArrayBuffer.isView(q))return c(q);if(null==q)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q);if(G(q,ArrayBuffer)||q&&G(q.buffer,ArrayBuffer))return function(de,he,xe){if(he<0||de.byteLength<he)throw new RangeError('"offset" is outside of buffer bounds');if(de.byteLength<he+(xe||0))throw new RangeError('"length" is outside of buffer bounds');var ge;return(ge=void 0===he&&void 0===xe?new Uint8Array(de):void 0===xe?new Uint8Array(de,he):new Uint8Array(de,he,xe)).__proto__=t.prototype,ge}(q,ee,te);if("number"==typeof q)throw new TypeError('The "value" argument must not be of type number. Received type number');var se=q.valueOf&&q.valueOf();if(null!=se&&se!==q)return t.from(se,ee,te);var ue=function(de){if(t.isBuffer(de)){var he=0|f(de.length),xe=a(he);return 0===xe.length||de.copy(xe,0,0,he),xe}return void 0!==de.length?"number"!=typeof de.length||ie(de.length)?a(0):c(de):"Buffer"===de.type&&Array.isArray(de.data)?c(de.data):void 0}(q);if(ue)return ue;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof q[Symbol.toPrimitive])return t.from(q[Symbol.toPrimitive]("string"),ee,te);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}function u(q){if("number"!=typeof q)throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function i(q){return u(q),a(q<0?0:0|f(q))}function c(q){for(var ee=q.length<0?0:0|f(q.length),te=a(ee),se=0;se<ee;se+=1)te[se]=255&q[se];return te}function f(q){if(q>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|q}function l(q,ee){if(t.isBuffer(q))return q.length;if(ArrayBuffer.isView(q)||G(q,ArrayBuffer))return q.byteLength;if("string"!=typeof q)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);var te=q.length,se=arguments.length>2&&!0===arguments[2];if(!se&&0===te)return 0;for(var ue=!1;;)switch(ee){case"ascii":case"latin1":case"binary":return te;case"utf8":case"utf-8":return re(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*te;case"hex":return te>>>1;case"base64":return H(q).length;default:if(ue)return se?-1:re(q).length;ee=(""+ee).toLowerCase(),ue=!0}}function h(q,ee,te){var se=!1;if((void 0===ee||ee<0)&&(ee=0),ee>this.length||((void 0===te||te>this.length)&&(te=this.length),te<=0)||(te>>>=0)<=(ee>>>=0))return"";for(q||(q="utf8");;)switch(q){case"hex":return L(this,ee,te);case"utf8":case"utf-8":return R(this,ee,te);case"ascii":return O(this,ee,te);case"latin1":case"binary":return D(this,ee,te);case"base64":return C(this,ee,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,ee,te);default:if(se)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),se=!0}}function d(q,ee,te){var se=q[ee];q[ee]=q[te],q[te]=se}function o(q,ee,te,se,ue){if(0===q.length)return-1;if("string"==typeof te?(se=te,te=0):te>2147483647?te=2147483647:te<-2147483648&&(te=-2147483648),ie(te=+te)&&(te=ue?0:q.length-1),te<0&&(te=q.length+te),te>=q.length){if(ue)return-1;te=q.length-1}else if(te<0){if(!ue)return-1;te=0}if("string"==typeof ee&&(ee=t.from(ee,se)),t.isBuffer(ee))return 0===ee.length?-1:_(q,ee,te,se,ue);if("number"==typeof ee)return ee&=255,"function"==typeof Uint8Array.prototype.indexOf?ue?Uint8Array.prototype.indexOf.call(q,ee,te):Uint8Array.prototype.lastIndexOf.call(q,ee,te):_(q,[ee],te,se,ue);throw new TypeError("val must be string, number or Buffer")}function _(q,ee,te,se,ue){var de,he=1,xe=q.length,ge=ee.length;if(void 0!==se&&("ucs2"===(se=String(se).toLowerCase())||"ucs-2"===se||"utf16le"===se||"utf-16le"===se)){if(q.length<2||ee.length<2)return-1;he=2,xe/=2,ge/=2,te/=2}function _e(Be,ve){return 1===he?Be[ve]:Be.readUInt16BE(ve*he)}if(ue){var Ce=-1;for(de=te;de<xe;de++)if(_e(q,de)===_e(ee,-1===Ce?0:de-Ce)){if(-1===Ce&&(Ce=de),de-Ce+1===ge)return Ce*he}else-1!==Ce&&(de-=de-Ce),Ce=-1}else for(te+ge>xe&&(te=xe-ge),de=te;de>=0;de--){for(var Le=!0,Ie=0;Ie<ge;Ie++)if(_e(q,de+Ie)!==_e(ee,Ie)){Le=!1;break}if(Le)return de}return-1}function s(q,ee,te,se){te=Number(te)||0;var ue=q.length-te;se?(se=Number(se))>ue&&(se=ue):se=ue;var de=ee.length;se>de/2&&(se=de/2);for(var he=0;he<se;++he){var xe=parseInt(ee.substr(2*he,2),16);if(ie(xe))return he;q[te+he]=xe}return he}function k(q,ee,te,se){return U(re(ee,q.length-te),q,te,se)}function M(q,ee,te,se){return U(function(ue){for(var de=[],he=0;he<ue.length;++he)de.push(255&ue.charCodeAt(he));return de}(ee),q,te,se)}function A(q,ee,te,se){return M(q,ee,te,se)}function E(q,ee,te,se){return U(H(ee),q,te,se)}function I(q,ee,te,se){return U(function(ue,de){for(var he,xe,_e=[],Ce=0;Ce<ue.length&&!((de-=2)<0);++Ce)xe=(he=ue.charCodeAt(Ce))>>8,_e.push(he%256),_e.push(xe);return _e}(ee,q.length-te),q,te,se)}function C(q,ee,te){return r.fromByteArray(0===ee&&te===q.length?q:q.slice(ee,te))}function R(q,ee,te){te=Math.min(q.length,te);for(var se=[],ue=ee;ue<te;){var de,he,xe,ge,_e=q[ue],Ce=null,Le=_e>239?4:_e>223?3:_e>191?2:1;if(ue+Le<=te)switch(Le){case 1:_e<128&&(Ce=_e);break;case 2:128==(192&(de=q[ue+1]))&&(ge=(31&_e)<<6|63&de)>127&&(Ce=ge);break;case 3:he=q[ue+2],128==(192&(de=q[ue+1]))&&128==(192&he)&&(ge=(15&_e)<<12|(63&de)<<6|63&he)>2047&&(ge<55296||ge>57343)&&(Ce=ge);break;case 4:he=q[ue+2],xe=q[ue+3],128==(192&(de=q[ue+1]))&&128==(192&he)&&128==(192&xe)&&(ge=(15&_e)<<18|(63&de)<<12|(63&he)<<6|63&xe)>65535&&ge<1114112&&(Ce=ge)}null===Ce?(Ce=65533,Le=1):Ce>65535&&(se.push((Ce-=65536)>>>10&1023|55296),Ce=56320|1023&Ce),se.push(Ce),ue+=Le}return function(Ie){var Be=Ie.length;if(Be<=4096)return String.fromCharCode.apply(String,Ie);for(var ve="",Te=0;Te<Be;)ve+=String.fromCharCode.apply(String,Ie.slice(Te,Te+=4096));return ve}(se)}function O(q,ee,te){var se="";te=Math.min(q.length,te);for(var ue=ee;ue<te;++ue)se+=String.fromCharCode(127&q[ue]);return se}function D(q,ee,te){var se="";te=Math.min(q.length,te);for(var ue=ee;ue<te;++ue)se+=String.fromCharCode(q[ue]);return se}function L(q,ee,te){var se=q.length;(!ee||ee<0)&&(ee=0),(!te||te<0||te>se)&&(te=se);for(var ue="",de=ee;de<te;++de)ue+=$(q[de]);return ue}function B(q,ee,te){for(var se=q.slice(ee,te),ue="",de=0;de<se.length;de+=2)ue+=String.fromCharCode(se[de]+256*se[de+1]);return ue}function j(q,ee,te){if(q%1!=0||q<0)throw new RangeError("offset is not uint");if(q+ee>te)throw new RangeError("Trying to access beyond buffer length")}function W(q,ee,te,se,ue,de){if(!t.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(ee>ue||ee<de)throw new RangeError('"value" argument is out of bounds');if(te+se>q.length)throw new RangeError("Index out of range")}function Y(q,ee,te,se,ue,de){if(te+se>q.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("Index out of range")}function Q(q,ee,te,se,ue){return ee=+ee,te>>>=0,ue||Y(q,0,te,4),n.write(q,ee,te,se,23,4),te+4}function ne(q,ee,te,se,ue){return ee=+ee,te>>>=0,ue||Y(q,0,te,8),n.write(q,ee,te,se,52,8),te+8}y.Buffer=t,y.SlowBuffer=function(q){return+q!=q&&(q=0),t.alloc(+q)},y.INSPECT_MAX_BYTES=50,y.kMaxLength=2147483647,(t.TYPED_ARRAY_SUPPORT=function(){try{var q=new Uint8Array(1);return q.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===q.foo()}catch(ee){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(q,ee,te){return p(q,ee,te)},t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,t.alloc=function(q,ee,te){return ue=ee,de=te,u(se=q),se<=0?a(se):void 0!==ue?"string"==typeof de?a(se).fill(ue,de):a(se).fill(ue):a(se);var se,ue,de},t.allocUnsafe=function(q){return i(q)},t.allocUnsafeSlow=function(q){return i(q)},t.isBuffer=function(q){return null!=q&&!0===q._isBuffer&&q!==t.prototype},t.compare=function(q,ee){if(G(q,Uint8Array)&&(q=t.from(q,q.offset,q.byteLength)),G(ee,Uint8Array)&&(ee=t.from(ee,ee.offset,ee.byteLength)),!t.isBuffer(q)||!t.isBuffer(ee))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(q===ee)return 0;for(var te=q.length,se=ee.length,ue=0,de=Math.min(te,se);ue<de;++ue)if(q[ue]!==ee[ue]){te=q[ue],se=ee[ue];break}return te<se?-1:se<te?1:0},t.isEncoding=function(q){switch(String(q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(q,ee){if(!Array.isArray(q))throw new TypeError('"list" argument must be an Array of Buffers');if(0===q.length)return t.alloc(0);var te;if(void 0===ee)for(ee=0,te=0;te<q.length;++te)ee+=q[te].length;var se=t.allocUnsafe(ee),ue=0;for(te=0;te<q.length;++te){var de=q[te];if(G(de,Uint8Array)&&(de=t.from(de)),!t.isBuffer(de))throw new TypeError('"list" argument must be an Array of Buffers');de.copy(se,ue),ue+=de.length}return se},t.byteLength=l,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var q=this.length;if(q%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ee=0;ee<q;ee+=2)d(this,ee,ee+1);return this},t.prototype.swap32=function(){var q=this.length;if(q%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ee=0;ee<q;ee+=4)d(this,ee,ee+3),d(this,ee+1,ee+2);return this},t.prototype.swap64=function(){var q=this.length;if(q%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ee=0;ee<q;ee+=8)d(this,ee,ee+7),d(this,ee+1,ee+6),d(this,ee+2,ee+5),d(this,ee+3,ee+4);return this},t.prototype.toLocaleString=t.prototype.toString=function(){var q=this.length;return 0===q?"":0===arguments.length?R(this,0,q):h.apply(this,arguments)},t.prototype.equals=function(q){if(!t.isBuffer(q))throw new TypeError("Argument must be a Buffer");return this===q||0===t.compare(this,q)},t.prototype.inspect=function(){var q="",ee=y.INSPECT_MAX_BYTES;return q=this.toString("hex",0,ee).replace(/(.{2})/g,"$1 ").trim(),this.length>ee&&(q+=" ... "),"<Buffer "+q+">"},t.prototype.compare=function(q,ee,te,se,ue){if(G(q,Uint8Array)&&(q=t.from(q,q.offset,q.byteLength)),!t.isBuffer(q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof q);if(void 0===ee&&(ee=0),void 0===te&&(te=q?q.length:0),void 0===se&&(se=0),void 0===ue&&(ue=this.length),ee<0||te>q.length||se<0||ue>this.length)throw new RangeError("out of range index");if(se>=ue&&ee>=te)return 0;if(se>=ue)return-1;if(ee>=te)return 1;if(this===q)return 0;for(var de=(ue>>>=0)-(se>>>=0),he=(te>>>=0)-(ee>>>=0),xe=Math.min(de,he),ge=this.slice(se,ue),_e=q.slice(ee,te),Ce=0;Ce<xe;++Ce)if(ge[Ce]!==_e[Ce]){de=ge[Ce],he=_e[Ce];break}return de<he?-1:he<de?1:0},t.prototype.includes=function(q,ee,te){return-1!==this.indexOf(q,ee,te)},t.prototype.indexOf=function(q,ee,te){return o(this,q,ee,te,!0)},t.prototype.lastIndexOf=function(q,ee,te){return o(this,q,ee,te,!1)},t.prototype.write=function(q,ee,te,se){if(void 0===ee)se="utf8",te=this.length,ee=0;else if(void 0===te&&"string"==typeof ee)se=ee,te=this.length,ee=0;else{if(!isFinite(ee))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ee>>>=0,isFinite(te)?(te>>>=0,void 0===se&&(se="utf8")):(se=te,te=void 0)}var ue=this.length-ee;if((void 0===te||te>ue)&&(te=ue),q.length>0&&(te<0||ee<0)||ee>this.length)throw new RangeError("Attempt to write outside buffer bounds");se||(se="utf8");for(var de=!1;;)switch(se){case"hex":return s(this,q,ee,te);case"utf8":case"utf-8":return k(this,q,ee,te);case"ascii":return M(this,q,ee,te);case"latin1":case"binary":return A(this,q,ee,te);case"base64":return E(this,q,ee,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,q,ee,te);default:if(de)throw new TypeError("Unknown encoding: "+se);se=(""+se).toLowerCase(),de=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},t.prototype.slice=function(q,ee){var te=this.length;(q=~~q)<0?(q+=te)<0&&(q=0):q>te&&(q=te),(ee=void 0===ee?te:~~ee)<0?(ee+=te)<0&&(ee=0):ee>te&&(ee=te),ee<q&&(ee=q);var se=this.subarray(q,ee);return se.__proto__=t.prototype,se},t.prototype.readUIntLE=function(q,ee,te){q>>>=0,ee>>>=0,te||j(q,ee,this.length);for(var se=this[q],ue=1,de=0;++de<ee&&(ue*=256);)se+=this[q+de]*ue;return se},t.prototype.readUIntBE=function(q,ee,te){q>>>=0,ee>>>=0,te||j(q,ee,this.length);for(var se=this[q+--ee],ue=1;ee>0&&(ue*=256);)se+=this[q+--ee]*ue;return se},t.prototype.readUInt8=function(q,ee){return q>>>=0,ee||j(q,1,this.length),this[q]},t.prototype.readUInt16LE=function(q,ee){return q>>>=0,ee||j(q,2,this.length),this[q]|this[q+1]<<8},t.prototype.readUInt16BE=function(q,ee){return q>>>=0,ee||j(q,2,this.length),this[q]<<8|this[q+1]},t.prototype.readUInt32LE=function(q,ee){return q>>>=0,ee||j(q,4,this.length),(this[q]|this[q+1]<<8|this[q+2]<<16)+16777216*this[q+3]},t.prototype.readUInt32BE=function(q,ee){return q>>>=0,ee||j(q,4,this.length),16777216*this[q]+(this[q+1]<<16|this[q+2]<<8|this[q+3])},t.prototype.readIntLE=function(q,ee,te){q>>>=0,ee>>>=0,te||j(q,ee,this.length);for(var se=this[q],ue=1,de=0;++de<ee&&(ue*=256);)se+=this[q+de]*ue;return se>=(ue*=128)&&(se-=Math.pow(2,8*ee)),se},t.prototype.readIntBE=function(q,ee,te){q>>>=0,ee>>>=0,te||j(q,ee,this.length);for(var se=ee,ue=1,de=this[q+--se];se>0&&(ue*=256);)de+=this[q+--se]*ue;return de>=(ue*=128)&&(de-=Math.pow(2,8*ee)),de},t.prototype.readInt8=function(q,ee){return q>>>=0,ee||j(q,1,this.length),128&this[q]?-1*(255-this[q]+1):this[q]},t.prototype.readInt16LE=function(q,ee){q>>>=0,ee||j(q,2,this.length);var te=this[q]|this[q+1]<<8;return 32768&te?4294901760|te:te},t.prototype.readInt16BE=function(q,ee){q>>>=0,ee||j(q,2,this.length);var te=this[q+1]|this[q]<<8;return 32768&te?4294901760|te:te},t.prototype.readInt32LE=function(q,ee){return q>>>=0,ee||j(q,4,this.length),this[q]|this[q+1]<<8|this[q+2]<<16|this[q+3]<<24},t.prototype.readInt32BE=function(q,ee){return q>>>=0,ee||j(q,4,this.length),this[q]<<24|this[q+1]<<16|this[q+2]<<8|this[q+3]},t.prototype.readFloatLE=function(q,ee){return q>>>=0,ee||j(q,4,this.length),n.read(this,q,!0,23,4)},t.prototype.readFloatBE=function(q,ee){return q>>>=0,ee||j(q,4,this.length),n.read(this,q,!1,23,4)},t.prototype.readDoubleLE=function(q,ee){return q>>>=0,ee||j(q,8,this.length),n.read(this,q,!0,52,8)},t.prototype.readDoubleBE=function(q,ee){return q>>>=0,ee||j(q,8,this.length),n.read(this,q,!1,52,8)},t.prototype.writeUIntLE=function(q,ee,te,se){q=+q,ee>>>=0,te>>>=0,se||W(this,q,ee,te,Math.pow(2,8*te)-1,0);var ue=1,de=0;for(this[ee]=255&q;++de<te&&(ue*=256);)this[ee+de]=q/ue&255;return ee+te},t.prototype.writeUIntBE=function(q,ee,te,se){q=+q,ee>>>=0,te>>>=0,se||W(this,q,ee,te,Math.pow(2,8*te)-1,0);var ue=te-1,de=1;for(this[ee+ue]=255&q;--ue>=0&&(de*=256);)this[ee+ue]=q/de&255;return ee+te},t.prototype.writeUInt8=function(q,ee,te){return q=+q,ee>>>=0,te||W(this,q,ee,1,255,0),this[ee]=255&q,ee+1},t.prototype.writeUInt16LE=function(q,ee,te){return q=+q,ee>>>=0,te||W(this,q,ee,2,65535,0),this[ee]=255&q,this[ee+1]=q>>>8,ee+2},t.prototype.writeUInt16BE=function(q,ee,te){return q=+q,ee>>>=0,te||W(this,q,ee,2,65535,0),this[ee]=q>>>8,this[ee+1]=255&q,ee+2},t.prototype.writeUInt32LE=function(q,ee,te){return q=+q,ee>>>=0,te||W(this,q,ee,4,4294967295,0),this[ee+3]=q>>>24,this[ee+2]=q>>>16,this[ee+1]=q>>>8,this[ee]=255&q,ee+4},t.prototype.writeUInt32BE=function(q,ee,te){return q=+q,ee>>>=0,te||W(this,q,ee,4,4294967295,0),this[ee]=q>>>24,this[ee+1]=q>>>16,this[ee+2]=q>>>8,this[ee+3]=255&q,ee+4},t.prototype.writeIntLE=function(q,ee,te,se){if(q=+q,ee>>>=0,!se){var ue=Math.pow(2,8*te-1);W(this,q,ee,te,ue-1,-ue)}var de=0,he=1,xe=0;for(this[ee]=255&q;++de<te&&(he*=256);)q<0&&0===xe&&0!==this[ee+de-1]&&(xe=1),this[ee+de]=(q/he>>0)-xe&255;return ee+te},t.prototype.writeIntBE=function(q,ee,te,se){if(q=+q,ee>>>=0,!se){var ue=Math.pow(2,8*te-1);W(this,q,ee,te,ue-1,-ue)}var de=te-1,he=1,xe=0;for(this[ee+de]=255&q;--de>=0&&(he*=256);)q<0&&0===xe&&0!==this[ee+de+1]&&(xe=1),this[ee+de]=(q/he>>0)-xe&255;return ee+te},t.prototype.writeInt8=function(q,ee,te){return q=+q,ee>>>=0,te||W(this,q,ee,1,127,-128),q<0&&(q=255+q+1),this[ee]=255&q,ee+1},t.prototype.writeInt16LE=function(q,ee,te){return q=+q,ee>>>=0,te||W(this,q,ee,2,32767,-32768),this[ee]=255&q,this[ee+1]=q>>>8,ee+2},t.prototype.writeInt16BE=function(q,ee,te){return q=+q,ee>>>=0,te||W(this,q,ee,2,32767,-32768),this[ee]=q>>>8,this[ee+1]=255&q,ee+2},t.prototype.writeInt32LE=function(q,ee,te){return q=+q,ee>>>=0,te||W(this,q,ee,4,2147483647,-2147483648),this[ee]=255&q,this[ee+1]=q>>>8,this[ee+2]=q>>>16,this[ee+3]=q>>>24,ee+4},t.prototype.writeInt32BE=function(q,ee,te){return q=+q,ee>>>=0,te||W(this,q,ee,4,2147483647,-2147483648),q<0&&(q=4294967295+q+1),this[ee]=q>>>24,this[ee+1]=q>>>16,this[ee+2]=q>>>8,this[ee+3]=255&q,ee+4},t.prototype.writeFloatLE=function(q,ee,te){return Q(this,q,ee,!0,te)},t.prototype.writeFloatBE=function(q,ee,te){return Q(this,q,ee,!1,te)},t.prototype.writeDoubleLE=function(q,ee,te){return ne(this,q,ee,!0,te)},t.prototype.writeDoubleBE=function(q,ee,te){return ne(this,q,ee,!1,te)},t.prototype.copy=function(q,ee,te,se){if(!t.isBuffer(q))throw new TypeError("argument should be a Buffer");if(te||(te=0),se||0===se||(se=this.length),ee>=q.length&&(ee=q.length),ee||(ee=0),se>0&&se<te&&(se=te),se===te||0===q.length||0===this.length)return 0;if(ee<0)throw new RangeError("targetStart out of bounds");if(te<0||te>=this.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("sourceEnd out of bounds");se>this.length&&(se=this.length),q.length-ee<se-te&&(se=q.length-ee+te);var ue=se-te;if(this===q&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(ee,te,se);else if(this===q&&te<ee&&ee<se)for(var de=ue-1;de>=0;--de)q[de+ee]=this[de+te];else Uint8Array.prototype.set.call(q,this.subarray(te,se),ee);return ue},t.prototype.fill=function(q,ee,te,se){if("string"==typeof q){if("string"==typeof ee?(se=ee,ee=0,te=this.length):"string"==typeof te&&(se=te,te=this.length),void 0!==se&&"string"!=typeof se)throw new TypeError("encoding must be a string");if("string"==typeof se&&!t.isEncoding(se))throw new TypeError("Unknown encoding: "+se);if(1===q.length){var ue=q.charCodeAt(0);("utf8"===se&&ue<128||"latin1"===se)&&(q=ue)}}else"number"==typeof q&&(q&=255);if(ee<0||this.length<ee||this.length<te)throw new RangeError("Out of range index");if(te<=ee)return this;var de;if(ee>>>=0,te=void 0===te?this.length:te>>>0,q||(q=0),"number"==typeof q)for(de=ee;de<te;++de)this[de]=q;else{var he=t.isBuffer(q)?q:t.from(q,se),xe=he.length;if(0===xe)throw new TypeError('The value "'+q+'" is invalid for argument "value"');for(de=0;de<te-ee;++de)this[de+ee]=he[de%xe]}return this};var X=/[^+/0-9A-Za-z-_]/g;function $(q){return q<16?"0"+q.toString(16):q.toString(16)}function re(q,ee){var te;ee=ee||1/0;for(var se=q.length,ue=null,de=[],he=0;he<se;++he){if((te=q.charCodeAt(he))>55295&&te<57344){if(!ue){if(te>56319){(ee-=3)>-1&&de.push(239,191,189);continue}if(he+1===se){(ee-=3)>-1&&de.push(239,191,189);continue}ue=te;continue}if(te<56320){(ee-=3)>-1&&de.push(239,191,189),ue=te;continue}te=65536+(ue-55296<<10|te-56320)}else ue&&(ee-=3)>-1&&de.push(239,191,189);if(ue=null,te<128){if((ee-=1)<0)break;de.push(te)}else if(te<2048){if((ee-=2)<0)break;de.push(te>>6|192,63&te|128)}else if(te<65536){if((ee-=3)<0)break;de.push(te>>12|224,te>>6&63|128,63&te|128)}else{if(!(te<1114112))throw new Error("Invalid code point");if((ee-=4)<0)break;de.push(te>>18|240,te>>12&63|128,te>>6&63|128,63&te|128)}}return de}function H(q){return r.toByteArray(function(ee){if((ee=(ee=ee.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;ee.length%4!=0;)ee+="=";return ee}(q))}function U(q,ee,te,se){for(var ue=0;ue<se&&!(ue+te>=ee.length||ue>=q.length);++ue)ee[ue+te]=q[ue];return ue}function G(q,ee){return q instanceof ee||null!=q&&null!=q.constructor&&null!=q.constructor.name&&q.constructor.name===ee.name}function ie(q){return q!=q}}).call(this)}).call(this,m("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(m,w,y){y.read=function(e,r,n,a,t){var p,u,i=8*t-a-1,c=(1<<i)-1,f=c>>1,l=-7,h=n?t-1:0,d=n?-1:1,o=e[r+h];for(h+=d,p=o&(1<<-l)-1,o>>=-l,l+=i;l>0;p=256*p+e[r+h],h+=d,l-=8);for(u=p&(1<<-l)-1,p>>=-l,l+=a;l>0;u=256*u+e[r+h],h+=d,l-=8);if(0===p)p=1-f;else{if(p===c)return u?NaN:1/0*(o?-1:1);u+=Math.pow(2,a),p-=f}return(o?-1:1)*u*Math.pow(2,p-a)},y.write=function(e,r,n,a,t,p){var u,i,c,f=8*p-t-1,l=(1<<f)-1,h=l>>1,d=23===t?Math.pow(2,-24)-Math.pow(2,-77):0,o=a?0:p-1,_=a?1:-1,s=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(i=isNaN(r)?1:0,u=l):(u=Math.floor(Math.log(r)/Math.LN2),r*(c=Math.pow(2,-u))<1&&(u--,c*=2),(r+=u+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(u++,c/=2),u+h>=l?(i=0,u=l):u+h>=1?(i=(r*c-1)*Math.pow(2,t),u+=h):(i=r*Math.pow(2,h-1)*Math.pow(2,t),u=0));t>=8;e[n+o]=255&i,o+=_,i/=256,t-=8);for(u=u<<t|i,f+=t;f>0;e[n+o]=255&u,o+=_,u/=256,f-=8);e[n+o-_]|=128*s}},{}],5:[function(m,w,y){var e,r,n=w.exports={};function a(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}function p(_){if(e===setTimeout)return setTimeout(_,0);if((e===a||!e)&&setTimeout)return e=setTimeout,setTimeout(_,0);try{return e(_,0)}catch(s){try{return e.call(null,_,0)}catch(k){return e.call(this,_,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:a}catch(_){e=a}try{r="function"==typeof clearTimeout?clearTimeout:t}catch(_){r=t}}();var u,i=[],c=!1,f=-1;function l(){c&&u&&(c=!1,u.length?i=u.concat(i):f=-1,i.length&&h())}function h(){if(!c){var _=p(l);c=!0;for(var s=i.length;s;){for(u=i,i=[];++f<s;)u&&u[f].run();f=-1,s=i.length}u=null,c=!1,function(k){if(r===clearTimeout)return clearTimeout(k);if((r===t||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(k);try{r(k)}catch(M){try{return r.call(null,k)}catch(A){return r.call(this,k)}}}(_)}}function d(_,s){this.fun=_,this.array=s}function o(){}n.nextTick=function(_){var s=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)s[k-1]=arguments[k];i.push(new d(_,s)),1!==i.length||c||p(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=o,n.addListener=o,n.once=o,n.off=o,n.removeListener=o,n.removeAllListeners=o,n.emit=o,n.prependListener=o,n.prependOnceListener=o,n.listeners=function(_){return[]},n.binding=function(_){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(_){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],6:[function(m,w,y){w.exports={alpha_shape:m("alpha-shape"),convex_hull:m("convex-hull"),delaunay_triangulate:m("delaunay-triangulate"),gl_cone3d:m("gl-cone3d"),gl_error3d:m("gl-error3d"),gl_heatmap2d:m("gl-heatmap2d"),gl_line3d:m("gl-line3d"),gl_mesh3d:m("gl-mesh3d"),gl_plot2d:m("gl-plot2d"),gl_plot3d:m("gl-plot3d"),gl_pointcloud2d:m("gl-pointcloud2d"),gl_scatter3d:m("gl-scatter3d"),gl_select_box:m("gl-select-box"),gl_spikes2d:m("gl-spikes2d"),gl_streamtube3d:m("gl-streamtube3d"),gl_surface3d:m("gl-surface3d"),ndarray:m("ndarray"),ndarray_linear_interpolate:m("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(m,w,y){"use strict";w.exports=function(p){var u=(p=p||{}).eye||[0,0,1],i=p.center||[0,0,0],c=p.up||[0,1,0],f=p.distanceLimits||[0,1/0],l=p.mode||"turntable",h=e(),d=r(),o=n();return h.setDistanceLimits(f[0],f[1]),h.lookAt(0,u,i,c),d.setDistanceLimits(f[0],f[1]),d.lookAt(0,u,i,c),o.setDistanceLimits(f[0],f[1]),o.lookAt(0,u,i,c),new a({turntable:h,orbit:d,matrix:o},l)};var e=m("turntable-camera-controller"),r=m("orbit-camera-controller"),n=m("matrix-camera-controller");function a(p,u){this._controllerNames=Object.keys(p),this._controllerList=this._controllerNames.map(function(i){return p[i]}),this._mode=u,this._active=p[u],this._active||(this._mode="turntable",this._active=p.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var t=a.prototype;t.flush=function(p){for(var u=this._controllerList,i=0;i<u.length;++i)u[i].flush(p)},t.idle=function(p){for(var u=this._controllerList,i=0;i<u.length;++i)u[i].idle(p)},t.lookAt=function(p,u,i,c){for(var f=this._controllerList,l=0;l<f.length;++l)f[l].lookAt(p,u,i,c)},t.rotate=function(p,u,i,c){for(var f=this._controllerList,l=0;l<f.length;++l)f[l].rotate(p,u,i,c)},t.pan=function(p,u,i,c){for(var f=this._controllerList,l=0;l<f.length;++l)f[l].pan(p,u,i,c)},t.translate=function(p,u,i,c){for(var f=this._controllerList,l=0;l<f.length;++l)f[l].translate(p,u,i,c)},t.setMatrix=function(p,u){for(var i=this._controllerList,c=0;c<i.length;++c)i[c].setMatrix(p,u)},t.setDistanceLimits=function(p,u){for(var i=this._controllerList,c=0;c<i.length;++c)i[c].setDistanceLimits(p,u)},t.setDistance=function(p,u){for(var i=this._controllerList,c=0;c<i.length;++c)i[c].setDistance(p,u)},t.recalcMatrix=function(p){this._active.recalcMatrix(p)},t.getDistance=function(p){return this._active.getDistance(p)},t.getDistanceLimits=function(p){return this._active.getDistanceLimits(p)},t.lastT=function(){return this._active.lastT()},t.setMode=function(p){if(p!==this._mode){var u=this._controllerNames.indexOf(p);if(!(u<0)){var i=this._active,c=this._controllerList[u],f=Math.max(i.lastT(),c.lastT());i.recalcMatrix(f),c.setMatrix(f,i.computedMatrix),this._active=c,this._mode=p,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},t.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(m,w,y){"use strict";var e="undefined"==typeof WeakMap?m("weak-map"):WeakMap,r=m("gl-buffer"),n=m("gl-vao"),a=new e;w.exports=function(t){var p=a.get(t),u=p&&(p._triangleBuffer.handle||p._triangleBuffer.buffer);if(!u||!t.isBuffer(u)){var i=r(t,new Float32Array([-1,-1,-1,4,4,-1]));(p=n(t,[{buffer:i,type:t.FLOAT,size:2}]))._triangleBuffer=i,a.set(t,p)}p.bind(),t.drawArrays(t.TRIANGLES,0,3),p.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(m,w,y){var e=m("pad-left");w.exports=function(r,n,a){n="number"==typeof n?n:1,a=a||": ";var t=r.split(/\r?\n/),p=String(t.length+n-1).length;return t.map(function(u,i){var c=i+n,f=String(c).length;return e(c,p-f)+a+u}).join("\n")}},{"pad-left":264}],10:[function(m,w,y){"use strict";w.exports=function(n){var a=n.length;if(0===a)return[];if(1===a)return[0];for(var t=n[0].length,p=[n[0]],u=[0],i=1;i<a;++i)if(p.push(n[i]),r(p,t)){if(u.push(i),u.length===t+1)return u}else p.pop();return u};var e=m("robust-orientation");function r(n,a){for(var t=new Array(a+1),p=0;p<n.length;++p)t[p]=n[p];for(p=0;p<=n.length;++p){for(var u=n.length;u<=a;++u){for(var i=new Array(a),c=0;c<a;++c)i[c]=Math.pow(u+1-p,c);t[u]=i}if(e.apply(void 0,t))return!0}return!1}},{"robust-orientation":284}],11:[function(m,w,y){"use strict";w.exports=function(n,a){return e(a).filter(function(t){for(var p=new Array(t.length),u=0;u<t.length;++u)p[u]=a[t[u]];return r(p)*n<1})};var e=m("delaunay-triangulate"),r=m("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(m,w,y){w.exports=function(n,a){return r(e(n,a))};var e=m("alpha-complex"),r=m("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(m,w,y){w.exports=function(e){return atob(e)}},{}],14:[function(m,w,y){"use strict";w.exports=function(n,a){for(var t=a.length,p=new Array(t+1),u=0;u<t;++u){for(var i=new Array(t+1),c=0;c<=t;++c)i[c]=n[c][u];p[u]=i}for(p[t]=new Array(t+1),u=0;u<=t;++u)p[t][u]=1;var f=new Array(t+1);for(u=0;u<t;++u)f[u]=a[u];f[t]=1;var l=e(p,f),h=r(l[t+1]);0===h&&(h=1);var d=new Array(t+1);for(u=0;u<=t;++u)d[u]=r(l[u])/h;return d};var e=m("robust-linear-solve");function r(n){for(var a=0,t=0;t<n.length;++t)a+=n[t];return a}},{"robust-linear-solve":283}],15:[function(m,w,y){"use strict";var e=m("./lib/rationalize");w.exports=function(r,n){return e(r[0].mul(n[1]).add(n[0].mul(r[1])),r[1].mul(n[1]))}},{"./lib/rationalize":25}],16:[function(m,w,y){"use strict";w.exports=function(e,r){return e[0].mul(r[1]).cmp(r[0].mul(e[1]))}},{}],17:[function(m,w,y){"use strict";var e=m("./lib/rationalize");w.exports=function(r,n){return e(r[0].mul(n[1]),r[1].mul(n[0]))}},{"./lib/rationalize":25}],18:[function(m,w,y){"use strict";var e=m("./is-rat"),r=m("./lib/is-bn"),n=m("./lib/num-to-bn"),a=m("./lib/str-to-bn"),t=m("./lib/rationalize"),p=m("./div");w.exports=function u(i,c){if(e(i))return c?p(i,u(c)):[i[0].clone(),i[1].clone()];var f,l,h=0;if(r(i))f=i.clone();else if("string"==typeof i)f=a(i);else{if(0===i)return[n(0),n(1)];if(i===Math.floor(i))f=n(i);else{for(;i!==Math.floor(i);)i*=Math.pow(2,256),h-=256;f=n(i)}}if(e(c))f.mul(c[1]),l=c[0].clone();else if(r(c))l=c.clone();else if("string"==typeof c)l=a(c);else if(c)if(c===Math.floor(c))l=n(c);else{for(;c!==Math.floor(c);)c*=Math.pow(2,256),h+=256;l=n(c)}else l=n(1);return h>0?f=f.ushln(h):h<0&&(l=l.ushln(-h)),t(f,l)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(m,w,y){"use strict";var e=m("./lib/is-bn");w.exports=function(r){return Array.isArray(r)&&2===r.length&&e(r[0])&&e(r[1])}},{"./lib/is-bn":23}],20:[function(m,w,y){"use strict";var e=m("bn.js");w.exports=function(r){return r.cmp(new e(0))}},{"bn.js":33}],21:[function(m,w,y){"use strict";var e=m("./bn-sign");w.exports=function(r){var n=r.length,a=r.words,t=0;if(1===n)t=a[0];else if(2===n)t=a[0]+67108864*a[1];else for(var p=0;p<n;p++)t+=a[p]*Math.pow(67108864,p);return e(r)*t}},{"./bn-sign":20}],22:[function(m,w,y){"use strict";var e=m("double-bits"),r=m("bit-twiddle").countTrailingZeros;w.exports=function(n){var a=r(e.lo(n));if(a<32)return a;var t=r(e.hi(n));return t>20?52:t+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(m,w,y){"use strict";m("bn.js"),w.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},{"bn.js":33}],24:[function(m,w,y){"use strict";var e=m("bn.js"),r=m("double-bits");w.exports=function(n){var a=r.exponent(n);return a<52?new e(n):new e(n*Math.pow(2,52-a)).ushln(a-52)}},{"bn.js":33,"double-bits":64}],25:[function(m,w,y){"use strict";var e=m("./num-to-bn"),r=m("./bn-sign");w.exports=function(n,a){var t=r(n),p=r(a);if(0===t)return[e(0),e(1)];if(0===p)return[e(0),e(0)];p<0&&(n=n.neg(),a=a.neg());var u=n.gcd(a);return u.cmpn(1)?[n.div(u),a.div(u)]:[n,a]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(m,w,y){"use strict";var e=m("bn.js");w.exports=function(r){return new e(r)}},{"bn.js":33}],27:[function(m,w,y){"use strict";var e=m("./lib/rationalize");w.exports=function(r,n){return e(r[0].mul(n[0]),r[1].mul(n[1]))}},{"./lib/rationalize":25}],28:[function(m,w,y){"use strict";var e=m("./lib/bn-sign");w.exports=function(r){return e(r[0])*e(r[1])}},{"./lib/bn-sign":20}],29:[function(m,w,y){"use strict";var e=m("./lib/rationalize");w.exports=function(r,n){return e(r[0].mul(n[1]).sub(r[1].mul(n[0])),r[1].mul(n[1]))}},{"./lib/rationalize":25}],30:[function(m,w,y){"use strict";var e=m("./lib/bn-to-num"),r=m("./lib/ctz");w.exports=function(n){var a=n[0],t=n[1];if(0===a.cmpn(0))return 0;var p=a.abs().divmod(t.abs()),i=e(p.div),c=p.mod,f=a.negative!==t.negative?-1:1;if(0===c.cmpn(0))return f*i;if(i){var l=r(i)+4,h=e(c.ushln(l).divRound(t));return f*(i+h*Math.pow(2,-l))}var d=t.bitLength()-c.bitLength()+53;return h=e(c.ushln(d).divRound(t)),d<1023?f*h*Math.pow(2,-d):f*(h*=Math.pow(2,-1023))*Math.pow(2,1023-d)}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(m,w,y){"use strict";function e(u,i,c,f,l){for(var h=l+1;f<=l;){var d=f+l>>>1,o=u[d];(void 0!==c?c(o,i):o-i)>=0?(h=d,l=d-1):f=d+1}return h}function r(u,i,c,f,l){for(var h=l+1;f<=l;){var d=f+l>>>1,o=u[d];(void 0!==c?c(o,i):o-i)>0?(h=d,l=d-1):f=d+1}return h}function n(u,i,c,f,l){for(var h=f-1;f<=l;){var d=f+l>>>1,o=u[d];(void 0!==c?c(o,i):o-i)<0?(h=d,f=d+1):l=d-1}return h}function a(u,i,c,f,l){for(var h=f-1;f<=l;){var d=f+l>>>1,o=u[d];(void 0!==c?c(o,i):o-i)<=0?(h=d,f=d+1):l=d-1}return h}function t(u,i,c,f,l){for(;f<=l;){var h=f+l>>>1,d=u[h],o=void 0!==c?c(d,i):d-i;if(0===o)return h;o<=0?f=h+1:l=h-1}return-1}function p(u,i,c,f,l,h){return"function"==typeof c?h(u,i,c,void 0===f?0:0|f,void 0===l?u.length-1:0|l):h(u,i,void 0,void 0===c?0:0|c,void 0===f?u.length-1:0|f)}w.exports={ge:function(u,i,c,f,l){return p(u,i,c,f,l,e)},gt:function(u,i,c,f,l){return p(u,i,c,f,l,r)},lt:function(u,i,c,f,l){return p(u,i,c,f,l,n)},le:function(u,i,c,f,l){return p(u,i,c,f,l,a)},eq:function(u,i,c,f,l){return p(u,i,c,f,l,t)}}},{}],32:[function(m,w,y){"use strict";function e(n){var a=32;return(n&=-n)&&a--,65535&n&&(a-=16),16711935&n&&(a-=8),252645135&n&&(a-=4),858993459&n&&(a-=2),1431655765&n&&(a-=1),a}y.INT_BITS=32,y.INT_MAX=2147483647,y.INT_MIN=-1<<31,y.sign=function(n){return(n>0)-(n<0)},y.abs=function(n){var a=n>>31;return(n^a)-a},y.min=function(n,a){return a^(n^a)&-(n<a)},y.max=function(n,a){return n^(n^a)&-(n<a)},y.isPow2=function(n){return!(n&n-1||!n)},y.log2=function(n){var a,t;return a=(n>65535)<<4,a|=t=((n>>>=a)>255)<<3,a|=t=((n>>>=t)>15)<<2,(a|=t=((n>>>=t)>3)<<1)|(n>>>=t)>>1},y.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},y.popCount=function(n){return 16843009*((n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)>>>24},y.countTrailingZeros=e,y.nextPow2=function(n){return n+=0===n,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,1+((n|=n>>>8)|n>>>16)},y.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)-(n>>>1)},y.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,27030>>>(n&=15)&1};var r=new Array(256);(function(n){for(var a=0;a<256;++a){var t=a,p=a,u=7;for(t>>>=1;t;t>>>=1)p<<=1,p|=1&t,--u;n[a]=p<<u&255}})(r),y.reverse=function(n){return r[255&n]<<24|r[n>>>8&255]<<16|r[n>>>16&255]<<8|r[n>>>24&255]},y.interleave2=function(n,a){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))<<1},y.deinterleave2=function(n,a){return(n=65535&((n=16711935&((n=252645135&((n=858993459&((n=n>>>a&1431655765)|n>>>1))|n>>>2))|n>>>4))|n>>>16))<<16>>16},y.interleave3=function(n,a,t){return n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2),(n|=(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<1)|(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<2},y.deinterleave3=function(n,a){return(n=1023&((n=4278190335&((n=251719695&((n=3272356035&((n=n>>>a&1227133513)|n>>>2))|n>>>4))|n>>>8))|n>>>16))<<22>>22},y.nextCombination=function(n){var a=n|n-1;return a+1|(~a&-~a)-1>>>e(n)+1}},{}],33:[function(m,w,y){!function(e,r){"use strict";function n(D,L){if(!D)throw new Error(L||"Assertion failed")}function a(D,L){D.super_=L;var B=function(){};B.prototype=L.prototype,D.prototype=new B,D.prototype.constructor=D}function t(D,L,B){if(t.isBN(D))return D;this.negative=0,this.words=null,this.length=0,this.red=null,null!==D&&("le"!==L&&"be"!==L||(B=L,L=10),this._init(D||0,L||10,B||"be"))}var p;"object"==typeof e?e.exports=t:r.BN=t,t.BN=t,t.wordSize=26;try{p="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:m("buffer").Buffer}catch(D){}function u(D,L){var B=D.charCodeAt(L);return B>=65&&B<=70?B-55:B>=97&&B<=102?B-87:B-48&15}function i(D,L,B){var j=u(D,B);return B-1>=L&&(j|=u(D,B-1)<<4),j}function c(D,L,B,j){for(var W=0,Y=Math.min(D.length,B),Q=L;Q<Y;Q++){var ne=D.charCodeAt(Q)-48;W*=j,W+=ne>=49?ne-49+10:ne>=17?ne-17+10:ne}return W}t.isBN=function(D){return D instanceof t||null!==D&&"object"==typeof D&&D.constructor.wordSize===t.wordSize&&Array.isArray(D.words)},t.max=function(D,L){return D.cmp(L)>0?D:L},t.min=function(D,L){return D.cmp(L)<0?D:L},t.prototype._init=function(D,L,B){if("number"==typeof D)return this._initNumber(D,L,B);if("object"==typeof D)return this._initArray(D,L,B);"hex"===L&&(L=16),n(L===(0|L)&&L>=2&&L<=36);var j=0;"-"===(D=D.toString().replace(/\s+/g,""))[0]&&(j++,this.negative=1),j<D.length&&(16===L?this._parseHex(D,j,B):(this._parseBase(D,L,j),"le"===B&&this._initArray(this.toArray(),L,B)))},t.prototype._initNumber=function(D,L,B){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[67108863&D],this.length=1):D<4503599627370496?(this.words=[67108863&D,D/67108864&67108863],this.length=2):(n(D<9007199254740992),this.words=[67108863&D,D/67108864&67108863,1],this.length=3),"le"===B&&this._initArray(this.toArray(),L,B)},t.prototype._initArray=function(D,L,B){if(n("number"==typeof D.length),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var j=0;j<this.length;j++)this.words[j]=0;var W,Y,Q=0;if("be"===B)for(j=D.length-1,W=0;j>=0;j-=3)this.words[W]|=(Y=D[j]|D[j-1]<<8|D[j-2]<<16)<<Q&67108863,this.words[W+1]=Y>>>26-Q&67108863,(Q+=24)>=26&&(Q-=26,W++);else if("le"===B)for(j=0,W=0;j<D.length;j+=3)this.words[W]|=(Y=D[j]|D[j+1]<<8|D[j+2]<<16)<<Q&67108863,this.words[W+1]=Y>>>26-Q&67108863,(Q+=24)>=26&&(Q-=26,W++);return this.strip()},t.prototype._parseHex=function(D,L,B){this.length=Math.ceil((D.length-L)/6),this.words=new Array(this.length);for(var j=0;j<this.length;j++)this.words[j]=0;var W,Y=0,Q=0;if("be"===B)for(j=D.length-1;j>=L;j-=2)W=i(D,L,j)<<Y,this.words[Q]|=67108863&W,Y>=18?(Y-=18,this.words[Q+=1]|=W>>>26):Y+=8;else for(j=(D.length-L)%2==0?L+1:L;j<D.length;j+=2)W=i(D,L,j)<<Y,this.words[Q]|=67108863&W,Y>=18?(Y-=18,this.words[Q+=1]|=W>>>26):Y+=8;this.strip()},t.prototype._parseBase=function(D,L,B){this.words=[0],this.length=1;for(var j=0,W=1;W<=67108863;W*=L)j++;j--,W=W/L|0;for(var Y=D.length-B,Q=Y%j,ne=Math.min(Y,Y-Q)+B,X=0,$=B;$<ne;$+=j)X=c(D,$,$+j,L),this.imuln(W),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(0!==Q){var re=1;for(X=c(D,$,D.length,L),$=0;$<Q;$++)re*=L;this.imuln(re),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this.strip()},t.prototype.copy=function(D){D.words=new Array(this.length);for(var L=0;L<this.length;L++)D.words[L]=this.words[L];D.length=this.length,D.negative=this.negative,D.red=this.red},t.prototype.clone=function(){var D=new t(null);return this.copy(D),D},t.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},t.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},t.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},t.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(D,L,B){B.negative=L.negative^D.negative;var j=D.length+L.length|0;B.length=j,j=j-1|0;var W=0|D.words[0],Y=0|L.words[0],Q=W*Y,X=Q/67108864|0;B.words[0]=67108863&Q;for(var $=1;$<j;$++){for(var re=X>>>26,H=67108863&X,U=Math.min($,L.length-1),G=Math.max(0,$-D.length+1);G<=U;G++)re+=(Q=(W=0|D.words[$-G|0])*(Y=0|L.words[G])+H)/67108864|0,H=67108863&Q;B.words[$]=0|H,X=0|re}return 0!==X?B.words[$]=0|X:B.length--,B.strip()}t.prototype.toString=function(D,L){var B;if(L=0|L||1,16===(D=D||10)||"hex"===D){B="";for(var j=0,W=0,Y=0;Y<this.length;Y++){var Q=this.words[Y],ne=(16777215&(Q<<j|W)).toString(16);B=0!=(W=Q>>>24-j&16777215)||Y!==this.length-1?f[6-ne.length]+ne+B:ne+B,(j+=2)>=26&&(j-=26,Y--)}for(0!==W&&(B=W.toString(16)+B);B.length%L!=0;)B="0"+B;return 0!==this.negative&&(B="-"+B),B}if(D===(0|D)&&D>=2&&D<=36){var X=l[D],$=h[D];B="";var re=this.clone();for(re.negative=0;!re.isZero();){var H=re.modn($).toString(D);B=(re=re.idivn($)).isZero()?H+B:f[X-H.length]+H+B}for(this.isZero()&&(B="0"+B);B.length%L!=0;)B="0"+B;return 0!==this.negative&&(B="-"+B),B}n(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var D=this.words[0];return 2===this.length?D+=67108864*this.words[1]:3===this.length&&1===this.words[2]?D+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-D:D},t.prototype.toJSON=function(){return this.toString(16)},t.prototype.toBuffer=function(D,L){return n(void 0!==p),this.toArrayLike(p,D,L)},t.prototype.toArray=function(D,L){return this.toArrayLike(Array,D,L)},t.prototype.toArrayLike=function(D,L,B){var j=this.byteLength(),W=B||Math.max(1,j);n(j<=W,"byte array longer than desired length"),n(W>0,"Requested array length <= 0"),this.strip();var Y,Q,ne="le"===L,X=new D(W),$=this.clone();if(ne){for(Q=0;!$.isZero();Q++)Y=$.andln(255),$.iushrn(8),X[Q]=Y;for(;Q<W;Q++)X[Q]=0}else{for(Q=0;Q<W-j;Q++)X[Q]=0;for(Q=0;!$.isZero();Q++)Y=$.andln(255),$.iushrn(8),X[W-Q-1]=Y}return X},t.prototype._countBits=Math.clz32?function(D){return 32-Math.clz32(D)}:function(D){var L=D,B=0;return L>=4096&&(B+=13,L>>>=13),L>=64&&(B+=7,L>>>=7),L>=8&&(B+=4,L>>>=4),L>=2&&(B+=2,L>>>=2),B+L},t.prototype._zeroBits=function(D){if(0===D)return 26;var L=D,B=0;return 0==(8191&L)&&(B+=13,L>>>=13),0==(127&L)&&(B+=7,L>>>=7),0==(15&L)&&(B+=4,L>>>=4),0==(3&L)&&(B+=2,L>>>=2),0==(1&L)&&B++,B},t.prototype.bitLength=function(){var L=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+L},t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,L=0;L<this.length;L++){var B=this._zeroBits(this.words[L]);if(D+=B,26!==B)break}return D},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(D){return 0!==this.negative?this.abs().inotn(D).iaddn(1):this.clone()},t.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return 0!==this.negative},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var L=0;L<D.length;L++)this.words[L]=this.words[L]|D.words[L];return this.strip()},t.prototype.ior=function(D){return n(0==(this.negative|D.negative)),this.iuor(D)},t.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},t.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},t.prototype.iuand=function(D){var L;L=this.length>D.length?D:this;for(var B=0;B<L.length;B++)this.words[B]=this.words[B]&D.words[B];return this.length=L.length,this.strip()},t.prototype.iand=function(D){return n(0==(this.negative|D.negative)),this.iuand(D)},t.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},t.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},t.prototype.iuxor=function(D){var L,B;this.length>D.length?(L=this,B=D):(L=D,B=this);for(var j=0;j<B.length;j++)this.words[j]=L.words[j]^B.words[j];if(this!==L)for(;j<L.length;j++)this.words[j]=L.words[j];return this.length=L.length,this.strip()},t.prototype.ixor=function(D){return n(0==(this.negative|D.negative)),this.iuxor(D)},t.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},t.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},t.prototype.inotn=function(D){n("number"==typeof D&&D>=0);var L=0|Math.ceil(D/26),B=D%26;this._expand(L),B>0&&L--;for(var j=0;j<L;j++)this.words[j]=67108863&~this.words[j];return B>0&&(this.words[j]=~this.words[j]&67108863>>26-B),this.strip()},t.prototype.notn=function(D){return this.clone().inotn(D)},t.prototype.setn=function(D,L){n("number"==typeof D&&D>=0);var B=D/26|0,j=D%26;return this._expand(B+1),this.words[B]=L?this.words[B]|1<<j:this.words[B]&~(1<<j),this.strip()},t.prototype.iadd=function(D){var L,B,j;if(0!==this.negative&&0===D.negative)return this.negative=0,L=this.isub(D),this.negative^=1,this._normSign();if(0===this.negative&&0!==D.negative)return D.negative=0,L=this.isub(D),D.negative=1,L._normSign();this.length>D.length?(B=this,j=D):(B=D,j=this);for(var W=0,Y=0;Y<j.length;Y++)this.words[Y]=67108863&(L=(0|B.words[Y])+(0|j.words[Y])+W),W=L>>>26;for(;0!==W&&Y<B.length;Y++)this.words[Y]=67108863&(L=(0|B.words[Y])+W),W=L>>>26;if(this.length=B.length,0!==W)this.words[this.length]=W,this.length++;else if(B!==this)for(;Y<B.length;Y++)this.words[Y]=B.words[Y];return this},t.prototype.add=function(D){var L;return 0!==D.negative&&0===this.negative?(D.negative=0,L=this.sub(D),D.negative^=1,L):0===D.negative&&0!==this.negative?(this.negative=0,L=D.sub(this),this.negative=1,L):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},t.prototype.isub=function(D){if(0!==D.negative){D.negative=0;var L=this.iadd(D);return D.negative=1,L._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var B,j,W=this.cmp(D);if(0===W)return this.negative=0,this.length=1,this.words[0]=0,this;W>0?(B=this,j=D):(B=D,j=this);for(var Y=0,Q=0;Q<j.length;Q++)Y=(L=(0|B.words[Q])-(0|j.words[Q])+Y)>>26,this.words[Q]=67108863&L;for(;0!==Y&&Q<B.length;Q++)Y=(L=(0|B.words[Q])+Y)>>26,this.words[Q]=67108863&L;if(0===Y&&Q<B.length&&B!==this)for(;Q<B.length;Q++)this.words[Q]=B.words[Q];return this.length=Math.max(this.length,Q),B!==this&&(this.negative=1),this.strip()},t.prototype.sub=function(D){return this.clone().isub(D)};var o=function(D,L,B){var j,W,Y,Q=D.words,ne=L.words,X=B.words,$=0,re=0|Q[0],H=8191&re,U=re>>>13,G=0|Q[1],ie=8191&G,q=G>>>13,ee=0|Q[2],te=8191&ee,se=ee>>>13,ue=0|Q[3],de=8191&ue,he=ue>>>13,xe=0|Q[4],ge=8191&xe,_e=xe>>>13,Ce=0|Q[5],Le=8191&Ce,Ie=Ce>>>13,Be=0|Q[6],ve=8191&Be,Te=Be>>>13,Pe=0|Q[7],De=8191&Pe,Fe=Pe>>>13,Ue=0|Q[8],He=8191&Ue,Ke=Ue>>>13,st=0|Q[9],Ve=8191&st,$e=st>>>13,Qe=0|ne[0],tt=8191&Qe,ut=Qe>>>13,xt=0|ne[1],kt=8191&xt,Bt=xt>>>13,Rt=0|ne[2],ft=8191&Rt,lt=Rt>>>13,Ft=0|ne[3],Jt=8191&Ft,ln=Ft>>>13,dn=0|ne[4],cn=8191&dn,Tn=dn>>>13,nn=0|ne[5],Me=8191&nn,Ee=nn>>>13,Se=0|ne[6],je=8191&Se,qe=Se>>>13,Je=0|ne[7],at=8191&Je,it=Je>>>13,yt=0|ne[8],vt=8191&yt,Ut=yt>>>13,Wt=0|ne[9],gt=8191&Wt,At=Wt>>>13;B.negative=D.negative^L.negative,B.length=19;var Zt=($+(j=Math.imul(H,tt))|0)+((8191&(W=(W=Math.imul(H,ut))+Math.imul(U,tt)|0))<<13)|0;$=((Y=Math.imul(U,ut))+(W>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,j=Math.imul(ie,tt),W=(W=Math.imul(ie,ut))+Math.imul(q,tt)|0,Y=Math.imul(q,ut);var Et=($+(j=j+Math.imul(H,kt)|0)|0)+((8191&(W=(W=W+Math.imul(H,Bt)|0)+Math.imul(U,kt)|0))<<13)|0;$=((Y=Y+Math.imul(U,Bt)|0)+(W>>>13)|0)+(Et>>>26)|0,Et&=67108863,j=Math.imul(te,tt),W=(W=Math.imul(te,ut))+Math.imul(se,tt)|0,Y=Math.imul(se,ut),j=j+Math.imul(ie,kt)|0,W=(W=W+Math.imul(ie,Bt)|0)+Math.imul(q,kt)|0,Y=Y+Math.imul(q,Bt)|0;var Ct=($+(j=j+Math.imul(H,ft)|0)|0)+((8191&(W=(W=W+Math.imul(H,lt)|0)+Math.imul(U,ft)|0))<<13)|0;$=((Y=Y+Math.imul(U,lt)|0)+(W>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,j=Math.imul(de,tt),W=(W=Math.imul(de,ut))+Math.imul(he,tt)|0,Y=Math.imul(he,ut),j=j+Math.imul(te,kt)|0,W=(W=W+Math.imul(te,Bt)|0)+Math.imul(se,kt)|0,Y=Y+Math.imul(se,Bt)|0,j=j+Math.imul(ie,ft)|0,W=(W=W+Math.imul(ie,lt)|0)+Math.imul(q,ft)|0,Y=Y+Math.imul(q,lt)|0;var Ne=($+(j=j+Math.imul(H,Jt)|0)|0)+((8191&(W=(W=W+Math.imul(H,ln)|0)+Math.imul(U,Jt)|0))<<13)|0;$=((Y=Y+Math.imul(U,ln)|0)+(W>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,j=Math.imul(ge,tt),W=(W=Math.imul(ge,ut))+Math.imul(_e,tt)|0,Y=Math.imul(_e,ut),j=j+Math.imul(de,kt)|0,W=(W=W+Math.imul(de,Bt)|0)+Math.imul(he,kt)|0,Y=Y+Math.imul(he,Bt)|0,j=j+Math.imul(te,ft)|0,W=(W=W+Math.imul(te,lt)|0)+Math.imul(se,ft)|0,Y=Y+Math.imul(se,lt)|0,j=j+Math.imul(ie,Jt)|0,W=(W=W+Math.imul(ie,ln)|0)+Math.imul(q,Jt)|0,Y=Y+Math.imul(q,ln)|0;var et=($+(j=j+Math.imul(H,cn)|0)|0)+((8191&(W=(W=W+Math.imul(H,Tn)|0)+Math.imul(U,cn)|0))<<13)|0;$=((Y=Y+Math.imul(U,Tn)|0)+(W>>>13)|0)+(et>>>26)|0,et&=67108863,j=Math.imul(Le,tt),W=(W=Math.imul(Le,ut))+Math.imul(Ie,tt)|0,Y=Math.imul(Ie,ut),j=j+Math.imul(ge,kt)|0,W=(W=W+Math.imul(ge,Bt)|0)+Math.imul(_e,kt)|0,Y=Y+Math.imul(_e,Bt)|0,j=j+Math.imul(de,ft)|0,W=(W=W+Math.imul(de,lt)|0)+Math.imul(he,ft)|0,Y=Y+Math.imul(he,lt)|0,j=j+Math.imul(te,Jt)|0,W=(W=W+Math.imul(te,ln)|0)+Math.imul(se,Jt)|0,Y=Y+Math.imul(se,ln)|0,j=j+Math.imul(ie,cn)|0,W=(W=W+Math.imul(ie,Tn)|0)+Math.imul(q,cn)|0,Y=Y+Math.imul(q,Tn)|0;var dt=($+(j=j+Math.imul(H,Me)|0)|0)+((8191&(W=(W=W+Math.imul(H,Ee)|0)+Math.imul(U,Me)|0))<<13)|0;$=((Y=Y+Math.imul(U,Ee)|0)+(W>>>13)|0)+(dt>>>26)|0,dt&=67108863,j=Math.imul(ve,tt),W=(W=Math.imul(ve,ut))+Math.imul(Te,tt)|0,Y=Math.imul(Te,ut),j=j+Math.imul(Le,kt)|0,W=(W=W+Math.imul(Le,Bt)|0)+Math.imul(Ie,kt)|0,Y=Y+Math.imul(Ie,Bt)|0,j=j+Math.imul(ge,ft)|0,W=(W=W+Math.imul(ge,lt)|0)+Math.imul(_e,ft)|0,Y=Y+Math.imul(_e,lt)|0,j=j+Math.imul(de,Jt)|0,W=(W=W+Math.imul(de,ln)|0)+Math.imul(he,Jt)|0,Y=Y+Math.imul(he,ln)|0,j=j+Math.imul(te,cn)|0,W=(W=W+Math.imul(te,Tn)|0)+Math.imul(se,cn)|0,Y=Y+Math.imul(se,Tn)|0,j=j+Math.imul(ie,Me)|0,W=(W=W+Math.imul(ie,Ee)|0)+Math.imul(q,Me)|0,Y=Y+Math.imul(q,Ee)|0;var Mt=($+(j=j+Math.imul(H,je)|0)|0)+((8191&(W=(W=W+Math.imul(H,qe)|0)+Math.imul(U,je)|0))<<13)|0;$=((Y=Y+Math.imul(U,qe)|0)+(W>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,j=Math.imul(De,tt),W=(W=Math.imul(De,ut))+Math.imul(Fe,tt)|0,Y=Math.imul(Fe,ut),j=j+Math.imul(ve,kt)|0,W=(W=W+Math.imul(ve,Bt)|0)+Math.imul(Te,kt)|0,Y=Y+Math.imul(Te,Bt)|0,j=j+Math.imul(Le,ft)|0,W=(W=W+Math.imul(Le,lt)|0)+Math.imul(Ie,ft)|0,Y=Y+Math.imul(Ie,lt)|0,j=j+Math.imul(ge,Jt)|0,W=(W=W+Math.imul(ge,ln)|0)+Math.imul(_e,Jt)|0,Y=Y+Math.imul(_e,ln)|0,j=j+Math.imul(de,cn)|0,W=(W=W+Math.imul(de,Tn)|0)+Math.imul(he,cn)|0,Y=Y+Math.imul(he,Tn)|0,j=j+Math.imul(te,Me)|0,W=(W=W+Math.imul(te,Ee)|0)+Math.imul(se,Me)|0,Y=Y+Math.imul(se,Ee)|0,j=j+Math.imul(ie,je)|0,W=(W=W+Math.imul(ie,qe)|0)+Math.imul(q,je)|0,Y=Y+Math.imul(q,qe)|0;var zt=($+(j=j+Math.imul(H,at)|0)|0)+((8191&(W=(W=W+Math.imul(H,it)|0)+Math.imul(U,at)|0))<<13)|0;$=((Y=Y+Math.imul(U,it)|0)+(W>>>13)|0)+(zt>>>26)|0,zt&=67108863,j=Math.imul(He,tt),W=(W=Math.imul(He,ut))+Math.imul(Ke,tt)|0,Y=Math.imul(Ke,ut),j=j+Math.imul(De,kt)|0,W=(W=W+Math.imul(De,Bt)|0)+Math.imul(Fe,kt)|0,Y=Y+Math.imul(Fe,Bt)|0,j=j+Math.imul(ve,ft)|0,W=(W=W+Math.imul(ve,lt)|0)+Math.imul(Te,ft)|0,Y=Y+Math.imul(Te,lt)|0,j=j+Math.imul(Le,Jt)|0,W=(W=W+Math.imul(Le,ln)|0)+Math.imul(Ie,Jt)|0,Y=Y+Math.imul(Ie,ln)|0,j=j+Math.imul(ge,cn)|0,W=(W=W+Math.imul(ge,Tn)|0)+Math.imul(_e,cn)|0,Y=Y+Math.imul(_e,Tn)|0,j=j+Math.imul(de,Me)|0,W=(W=W+Math.imul(de,Ee)|0)+Math.imul(he,Me)|0,Y=Y+Math.imul(he,Ee)|0,j=j+Math.imul(te,je)|0,W=(W=W+Math.imul(te,qe)|0)+Math.imul(se,je)|0,Y=Y+Math.imul(se,qe)|0,j=j+Math.imul(ie,at)|0,W=(W=W+Math.imul(ie,it)|0)+Math.imul(q,at)|0,Y=Y+Math.imul(q,it)|0;var Xt=($+(j=j+Math.imul(H,vt)|0)|0)+((8191&(W=(W=W+Math.imul(H,Ut)|0)+Math.imul(U,vt)|0))<<13)|0;$=((Y=Y+Math.imul(U,Ut)|0)+(W>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,j=Math.imul(Ve,tt),W=(W=Math.imul(Ve,ut))+Math.imul($e,tt)|0,Y=Math.imul($e,ut),j=j+Math.imul(He,kt)|0,W=(W=W+Math.imul(He,Bt)|0)+Math.imul(Ke,kt)|0,Y=Y+Math.imul(Ke,Bt)|0,j=j+Math.imul(De,ft)|0,W=(W=W+Math.imul(De,lt)|0)+Math.imul(Fe,ft)|0,Y=Y+Math.imul(Fe,lt)|0,j=j+Math.imul(ve,Jt)|0,W=(W=W+Math.imul(ve,ln)|0)+Math.imul(Te,Jt)|0,Y=Y+Math.imul(Te,ln)|0,j=j+Math.imul(Le,cn)|0,W=(W=W+Math.imul(Le,Tn)|0)+Math.imul(Ie,cn)|0,Y=Y+Math.imul(Ie,Tn)|0,j=j+Math.imul(ge,Me)|0,W=(W=W+Math.imul(ge,Ee)|0)+Math.imul(_e,Me)|0,Y=Y+Math.imul(_e,Ee)|0,j=j+Math.imul(de,je)|0,W=(W=W+Math.imul(de,qe)|0)+Math.imul(he,je)|0,Y=Y+Math.imul(he,qe)|0,j=j+Math.imul(te,at)|0,W=(W=W+Math.imul(te,it)|0)+Math.imul(se,at)|0,Y=Y+Math.imul(se,it)|0,j=j+Math.imul(ie,vt)|0,W=(W=W+Math.imul(ie,Ut)|0)+Math.imul(q,vt)|0,Y=Y+Math.imul(q,Ut)|0;var un=($+(j=j+Math.imul(H,gt)|0)|0)+((8191&(W=(W=W+Math.imul(H,At)|0)+Math.imul(U,gt)|0))<<13)|0;$=((Y=Y+Math.imul(U,At)|0)+(W>>>13)|0)+(un>>>26)|0,un&=67108863,j=Math.imul(Ve,kt),W=(W=Math.imul(Ve,Bt))+Math.imul($e,kt)|0,Y=Math.imul($e,Bt),j=j+Math.imul(He,ft)|0,W=(W=W+Math.imul(He,lt)|0)+Math.imul(Ke,ft)|0,Y=Y+Math.imul(Ke,lt)|0,j=j+Math.imul(De,Jt)|0,W=(W=W+Math.imul(De,ln)|0)+Math.imul(Fe,Jt)|0,Y=Y+Math.imul(Fe,ln)|0,j=j+Math.imul(ve,cn)|0,W=(W=W+Math.imul(ve,Tn)|0)+Math.imul(Te,cn)|0,Y=Y+Math.imul(Te,Tn)|0,j=j+Math.imul(Le,Me)|0,W=(W=W+Math.imul(Le,Ee)|0)+Math.imul(Ie,Me)|0,Y=Y+Math.imul(Ie,Ee)|0,j=j+Math.imul(ge,je)|0,W=(W=W+Math.imul(ge,qe)|0)+Math.imul(_e,je)|0,Y=Y+Math.imul(_e,qe)|0,j=j+Math.imul(de,at)|0,W=(W=W+Math.imul(de,it)|0)+Math.imul(he,at)|0,Y=Y+Math.imul(he,it)|0,j=j+Math.imul(te,vt)|0,W=(W=W+Math.imul(te,Ut)|0)+Math.imul(se,vt)|0,Y=Y+Math.imul(se,Ut)|0;var Qt=($+(j=j+Math.imul(ie,gt)|0)|0)+((8191&(W=(W=W+Math.imul(ie,At)|0)+Math.imul(q,gt)|0))<<13)|0;$=((Y=Y+Math.imul(q,At)|0)+(W>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,j=Math.imul(Ve,ft),W=(W=Math.imul(Ve,lt))+Math.imul($e,ft)|0,Y=Math.imul($e,lt),j=j+Math.imul(He,Jt)|0,W=(W=W+Math.imul(He,ln)|0)+Math.imul(Ke,Jt)|0,Y=Y+Math.imul(Ke,ln)|0,j=j+Math.imul(De,cn)|0,W=(W=W+Math.imul(De,Tn)|0)+Math.imul(Fe,cn)|0,Y=Y+Math.imul(Fe,Tn)|0,j=j+Math.imul(ve,Me)|0,W=(W=W+Math.imul(ve,Ee)|0)+Math.imul(Te,Me)|0,Y=Y+Math.imul(Te,Ee)|0,j=j+Math.imul(Le,je)|0,W=(W=W+Math.imul(Le,qe)|0)+Math.imul(Ie,je)|0,Y=Y+Math.imul(Ie,qe)|0,j=j+Math.imul(ge,at)|0,W=(W=W+Math.imul(ge,it)|0)+Math.imul(_e,at)|0,Y=Y+Math.imul(_e,it)|0,j=j+Math.imul(de,vt)|0,W=(W=W+Math.imul(de,Ut)|0)+Math.imul(he,vt)|0,Y=Y+Math.imul(he,Ut)|0;var kn=($+(j=j+Math.imul(te,gt)|0)|0)+((8191&(W=(W=W+Math.imul(te,At)|0)+Math.imul(se,gt)|0))<<13)|0;$=((Y=Y+Math.imul(se,At)|0)+(W>>>13)|0)+(kn>>>26)|0,kn&=67108863,j=Math.imul(Ve,Jt),W=(W=Math.imul(Ve,ln))+Math.imul($e,Jt)|0,Y=Math.imul($e,ln),j=j+Math.imul(He,cn)|0,W=(W=W+Math.imul(He,Tn)|0)+Math.imul(Ke,cn)|0,Y=Y+Math.imul(Ke,Tn)|0,j=j+Math.imul(De,Me)|0,W=(W=W+Math.imul(De,Ee)|0)+Math.imul(Fe,Me)|0,Y=Y+Math.imul(Fe,Ee)|0,j=j+Math.imul(ve,je)|0,W=(W=W+Math.imul(ve,qe)|0)+Math.imul(Te,je)|0,Y=Y+Math.imul(Te,qe)|0,j=j+Math.imul(Le,at)|0,W=(W=W+Math.imul(Le,it)|0)+Math.imul(Ie,at)|0,Y=Y+Math.imul(Ie,it)|0,j=j+Math.imul(ge,vt)|0,W=(W=W+Math.imul(ge,Ut)|0)+Math.imul(_e,vt)|0,Y=Y+Math.imul(_e,Ut)|0;var qn=($+(j=j+Math.imul(de,gt)|0)|0)+((8191&(W=(W=W+Math.imul(de,At)|0)+Math.imul(he,gt)|0))<<13)|0;$=((Y=Y+Math.imul(he,At)|0)+(W>>>13)|0)+(qn>>>26)|0,qn&=67108863,j=Math.imul(Ve,cn),W=(W=Math.imul(Ve,Tn))+Math.imul($e,cn)|0,Y=Math.imul($e,Tn),j=j+Math.imul(He,Me)|0,W=(W=W+Math.imul(He,Ee)|0)+Math.imul(Ke,Me)|0,Y=Y+Math.imul(Ke,Ee)|0,j=j+Math.imul(De,je)|0,W=(W=W+Math.imul(De,qe)|0)+Math.imul(Fe,je)|0,Y=Y+Math.imul(Fe,qe)|0,j=j+Math.imul(ve,at)|0,W=(W=W+Math.imul(ve,it)|0)+Math.imul(Te,at)|0,Y=Y+Math.imul(Te,it)|0,j=j+Math.imul(Le,vt)|0,W=(W=W+Math.imul(Le,Ut)|0)+Math.imul(Ie,vt)|0,Y=Y+Math.imul(Ie,Ut)|0;var gn=($+(j=j+Math.imul(ge,gt)|0)|0)+((8191&(W=(W=W+Math.imul(ge,At)|0)+Math.imul(_e,gt)|0))<<13)|0;$=((Y=Y+Math.imul(_e,At)|0)+(W>>>13)|0)+(gn>>>26)|0,gn&=67108863,j=Math.imul(Ve,Me),W=(W=Math.imul(Ve,Ee))+Math.imul($e,Me)|0,Y=Math.imul($e,Ee),j=j+Math.imul(He,je)|0,W=(W=W+Math.imul(He,qe)|0)+Math.imul(Ke,je)|0,Y=Y+Math.imul(Ke,qe)|0,j=j+Math.imul(De,at)|0,W=(W=W+Math.imul(De,it)|0)+Math.imul(Fe,at)|0,Y=Y+Math.imul(Fe,it)|0,j=j+Math.imul(ve,vt)|0,W=(W=W+Math.imul(ve,Ut)|0)+Math.imul(Te,vt)|0,Y=Y+Math.imul(Te,Ut)|0;var sn=($+(j=j+Math.imul(Le,gt)|0)|0)+((8191&(W=(W=W+Math.imul(Le,At)|0)+Math.imul(Ie,gt)|0))<<13)|0;$=((Y=Y+Math.imul(Ie,At)|0)+(W>>>13)|0)+(sn>>>26)|0,sn&=67108863,j=Math.imul(Ve,je),W=(W=Math.imul(Ve,qe))+Math.imul($e,je)|0,Y=Math.imul($e,qe),j=j+Math.imul(He,at)|0,W=(W=W+Math.imul(He,it)|0)+Math.imul(Ke,at)|0,Y=Y+Math.imul(Ke,it)|0,j=j+Math.imul(De,vt)|0,W=(W=W+Math.imul(De,Ut)|0)+Math.imul(Fe,vt)|0,Y=Y+Math.imul(Fe,Ut)|0;var vn=($+(j=j+Math.imul(ve,gt)|0)|0)+((8191&(W=(W=W+Math.imul(ve,At)|0)+Math.imul(Te,gt)|0))<<13)|0;$=((Y=Y+Math.imul(Te,At)|0)+(W>>>13)|0)+(vn>>>26)|0,vn&=67108863,j=Math.imul(Ve,at),W=(W=Math.imul(Ve,it))+Math.imul($e,at)|0,Y=Math.imul($e,it),j=j+Math.imul(He,vt)|0,W=(W=W+Math.imul(He,Ut)|0)+Math.imul(Ke,vt)|0,Y=Y+Math.imul(Ke,Ut)|0;var pn=($+(j=j+Math.imul(De,gt)|0)|0)+((8191&(W=(W=W+Math.imul(De,At)|0)+Math.imul(Fe,gt)|0))<<13)|0;$=((Y=Y+Math.imul(Fe,At)|0)+(W>>>13)|0)+(pn>>>26)|0,pn&=67108863,j=Math.imul(Ve,vt),W=(W=Math.imul(Ve,Ut))+Math.imul($e,vt)|0,Y=Math.imul($e,Ut);var Mn=($+(j=j+Math.imul(He,gt)|0)|0)+((8191&(W=(W=W+Math.imul(He,At)|0)+Math.imul(Ke,gt)|0))<<13)|0;$=((Y=Y+Math.imul(Ke,At)|0)+(W>>>13)|0)+(Mn>>>26)|0,Mn&=67108863;var Rn=($+(j=Math.imul(Ve,gt))|0)+((8191&(W=(W=Math.imul(Ve,At))+Math.imul($e,gt)|0))<<13)|0;return $=((Y=Math.imul($e,At))+(W>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,X[0]=Zt,X[1]=Et,X[2]=Ct,X[3]=Ne,X[4]=et,X[5]=dt,X[6]=Mt,X[7]=zt,X[8]=Xt,X[9]=un,X[10]=Qt,X[11]=kn,X[12]=qn,X[13]=gn,X[14]=sn,X[15]=vn,X[16]=pn,X[17]=Mn,X[18]=Rn,0!==$&&(X[19]=$,B.length++),B};function _(D,L,B){return(new s).mulp(D,L,B)}function s(D,L){this.x=D,this.y=L}Math.imul||(o=d),t.prototype.mulTo=function(D,L){var B=this.length+D.length;return 10===this.length&&10===D.length?o(this,D,L):B<63?d(this,D,L):B<1024?function(j,W,Y){Y.negative=W.negative^j.negative,Y.length=j.length+W.length;for(var Q=0,ne=0,X=0;X<Y.length-1;X++){var $=ne;ne=0;for(var re=67108863&Q,H=Math.min(X,W.length-1),U=Math.max(0,X-j.length+1);U<=H;U++){var ie=(0|j.words[X-U])*(0|W.words[U]),q=67108863&ie;re=67108863&(q=q+re|0),ne+=($=($=$+(ie/67108864|0)|0)+(q>>>26)|0)>>>26,$&=67108863}Y.words[X]=re,Q=$,$=ne}return 0!==Q?Y.words[X]=Q:Y.length--,Y.strip()}(this,D,L):_(this,D,L)},s.prototype.makeRBT=function(D){for(var L=new Array(D),B=t.prototype._countBits(D)-1,j=0;j<D;j++)L[j]=this.revBin(j,B,D);return L},s.prototype.revBin=function(D,L,B){if(0===D||D===B-1)return D;for(var j=0,W=0;W<L;W++)j|=(1&D)<<L-W-1,D>>=1;return j},s.prototype.permute=function(D,L,B,j,W,Y){for(var Q=0;Q<Y;Q++)j[Q]=L[D[Q]],W[Q]=B[D[Q]]},s.prototype.transform=function(D,L,B,j,W,Y){this.permute(Y,D,L,B,j,W);for(var Q=1;Q<W;Q<<=1)for(var ne=Q<<1,X=Math.cos(2*Math.PI/ne),$=Math.sin(2*Math.PI/ne),re=0;re<W;re+=ne)for(var H=X,U=$,G=0;G<Q;G++){var ie=B[re+G],q=j[re+G],ee=B[re+G+Q],te=j[re+G+Q],se=H*ee-U*te;te=H*te+U*ee,B[re+G]=ie+(ee=se),j[re+G]=q+te,B[re+G+Q]=ie-ee,j[re+G+Q]=q-te,G!==ne&&(se=X*H-$*U,U=X*U+$*H,H=se)}},s.prototype.guessLen13b=function(D,L){var B=1|Math.max(L,D),j=1&B,W=0;for(B=B/2|0;B;B>>>=1)W++;return 1<<W+1+j},s.prototype.conjugate=function(D,L,B){if(!(B<=1))for(var j=0;j<B/2;j++){var W=D[j];D[j]=D[B-j-1],D[B-j-1]=W,W=L[j],L[j]=-L[B-j-1],L[B-j-1]=-W}},s.prototype.normalize13b=function(D,L){for(var B=0,j=0;j<L/2;j++){var W=8192*Math.round(D[2*j+1]/L)+Math.round(D[2*j]/L)+B;D[j]=67108863&W,B=W<67108864?0:W/67108864|0}return D},s.prototype.convert13b=function(D,L,B,j){for(var W=0,Y=0;Y<L;Y++)B[2*Y]=8191&(W+=0|D[Y]),B[2*Y+1]=8191&(W>>>=13),W>>>=13;for(Y=2*L;Y<j;++Y)B[Y]=0;n(0===W),n(0==(-8192&W))},s.prototype.stub=function(D){for(var L=new Array(D),B=0;B<D;B++)L[B]=0;return L},s.prototype.mulp=function(D,L,B){var j=2*this.guessLen13b(D.length,L.length),W=this.makeRBT(j),Y=this.stub(j),Q=new Array(j),ne=new Array(j),X=new Array(j),$=new Array(j),re=new Array(j),H=new Array(j),U=B.words;U.length=j,this.convert13b(D.words,D.length,Q,j),this.convert13b(L.words,L.length,$,j),this.transform(Q,Y,ne,X,j,W),this.transform($,Y,re,H,j,W);for(var G=0;G<j;G++){var ie=ne[G]*re[G]-X[G]*H[G];X[G]=ne[G]*H[G]+X[G]*re[G],ne[G]=ie}return this.conjugate(ne,X,j),this.transform(ne,X,U,Y,j,W),this.conjugate(U,Y,j),this.normalize13b(U,j),B.negative=D.negative^L.negative,B.length=D.length+L.length,B.strip()},t.prototype.mul=function(D){var L=new t(null);return L.words=new Array(this.length+D.length),this.mulTo(D,L)},t.prototype.mulf=function(D){var L=new t(null);return L.words=new Array(this.length+D.length),_(this,D,L)},t.prototype.imul=function(D){return this.clone().mulTo(D,this)},t.prototype.imuln=function(D){n("number"==typeof D),n(D<67108864);for(var L=0,B=0;B<this.length;B++){var j=(0|this.words[B])*D,W=(67108863&j)+(67108863&L);L>>=26,L+=j/67108864|0,L+=W>>>26,this.words[B]=67108863&W}return 0!==L&&(this.words[B]=L,this.length++),this},t.prototype.muln=function(D){return this.clone().imuln(D)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(D){var L=function(Y){for(var Q=new Array(Y.bitLength()),ne=0;ne<Q.length;ne++){var $=ne%26;Q[ne]=(Y.words[ne/26|0]&1<<$)>>>$}return Q}(D);if(0===L.length)return new t(1);for(var B=this,j=0;j<L.length&&0===L[j];j++,B=B.sqr());if(++j<L.length)for(var W=B.sqr();j<L.length;j++,W=W.sqr())0!==L[j]&&(B=B.mul(W));return B},t.prototype.iushln=function(D){n("number"==typeof D&&D>=0);var L,B=D%26,j=(D-B)/26,W=67108863>>>26-B<<26-B;if(0!==B){var Y=0;for(L=0;L<this.length;L++){var Q=this.words[L]&W;this.words[L]=(0|this.words[L])-Q<<B|Y,Y=Q>>>26-B}Y&&(this.words[L]=Y,this.length++)}if(0!==j){for(L=this.length-1;L>=0;L--)this.words[L+j]=this.words[L];for(L=0;L<j;L++)this.words[L]=0;this.length+=j}return this.strip()},t.prototype.ishln=function(D){return n(0===this.negative),this.iushln(D)},t.prototype.iushrn=function(D,L,B){var j;n("number"==typeof D&&D>=0),j=L?(L-L%26)/26:0;var W=D%26,Y=Math.min((D-W)/26,this.length),Q=67108863^67108863>>>W<<W,ne=B;if(j-=Y,j=Math.max(0,j),ne){for(var X=0;X<Y;X++)ne.words[X]=this.words[X];ne.length=Y}if(0!==Y)if(this.length>Y)for(this.length-=Y,X=0;X<this.length;X++)this.words[X]=this.words[X+Y];else this.words[0]=0,this.length=1;var $=0;for(X=this.length-1;X>=0&&(0!==$||X>=j);X--){var re=0|this.words[X];this.words[X]=$<<26-W|re>>>W,$=re&Q}return ne&&0!==$&&(ne.words[ne.length++]=$),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},t.prototype.ishrn=function(D,L,B){return n(0===this.negative),this.iushrn(D,L,B)},t.prototype.shln=function(D){return this.clone().ishln(D)},t.prototype.ushln=function(D){return this.clone().iushln(D)},t.prototype.shrn=function(D){return this.clone().ishrn(D)},t.prototype.ushrn=function(D){return this.clone().iushrn(D)},t.prototype.testn=function(D){n("number"==typeof D&&D>=0);var L=D%26,B=(D-L)/26;return!(this.length<=B||!(this.words[B]&1<<L))},t.prototype.imaskn=function(D){n("number"==typeof D&&D>=0);var L=D%26,B=(D-L)/26;return n(0===this.negative,"imaskn works only with positive numbers"),this.length<=B?this:(0!==L&&B++,this.length=Math.min(B,this.length),0!==L&&(this.words[this.length-1]&=67108863^67108863>>>L<<L),this.strip())},t.prototype.maskn=function(D){return this.clone().imaskn(D)},t.prototype.iaddn=function(D){return n("number"==typeof D),n(D<67108864),D<0?this.isubn(-D):0!==this.negative?1===this.length&&(0|this.words[0])<D?(this.words[0]=D-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},t.prototype._iaddn=function(D){this.words[0]+=D;for(var L=0;L<this.length&&this.words[L]>=67108864;L++)this.words[L]-=67108864,L===this.length-1?this.words[L+1]=1:this.words[L+1]++;return this.length=Math.max(this.length,L+1),this},t.prototype.isubn=function(D){if(n("number"==typeof D),n(D<67108864),D<0)return this.iaddn(-D);if(0!==this.negative)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var L=0;L<this.length&&this.words[L]<0;L++)this.words[L]+=67108864,this.words[L+1]-=1;return this.strip()},t.prototype.addn=function(D){return this.clone().iaddn(D)},t.prototype.subn=function(D){return this.clone().isubn(D)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(D,L,B){var j,W;this._expand(D.length+B);var Q=0;for(j=0;j<D.length;j++){W=(0|this.words[j+B])+Q;var ne=(0|D.words[j])*L;Q=((W-=67108863&ne)>>26)-(ne/67108864|0),this.words[j+B]=67108863&W}for(;j<this.length-B;j++)Q=(W=(0|this.words[j+B])+Q)>>26,this.words[j+B]=67108863&W;if(0===Q)return this.strip();for(n(-1===Q),Q=0,j=0;j<this.length;j++)Q=(W=-(0|this.words[j])+Q)>>26,this.words[j]=67108863&W;return this.negative=1,this.strip()},t.prototype._wordDiv=function(D,L){var B,j=this.clone(),W=D,Y=0|W.words[W.length-1];0!=(B=26-this._countBits(Y))&&(W=W.ushln(B),j.iushln(B),Y=0|W.words[W.length-1]);var Q,ne=j.length-W.length;if("mod"!==L){(Q=new t(null)).length=ne+1,Q.words=new Array(Q.length);for(var X=0;X<Q.length;X++)Q.words[X]=0}var $=j.clone()._ishlnsubmul(W,1,ne);0===$.negative&&(j=$,Q&&(Q.words[ne]=1));for(var re=ne-1;re>=0;re--){var H=67108864*(0|j.words[W.length+re])+(0|j.words[W.length+re-1]);for(H=Math.min(H/Y|0,67108863),j._ishlnsubmul(W,H,re);0!==j.negative;)H--,j.negative=0,j._ishlnsubmul(W,1,re),j.isZero()||(j.negative^=1);Q&&(Q.words[re]=H)}return Q&&Q.strip(),j.strip(),"div"!==L&&0!==B&&j.iushrn(B),{div:Q||null,mod:j}},t.prototype.divmod=function(D,L,B){return n(!D.isZero()),this.isZero()?{div:new t(0),mod:new t(0)}:0!==this.negative&&0===D.negative?(Y=this.neg().divmod(D,L),"mod"!==L&&(j=Y.div.neg()),"div"!==L&&(W=Y.mod.neg(),B&&0!==W.negative&&W.iadd(D)),{div:j,mod:W}):0===this.negative&&0!==D.negative?(Y=this.divmod(D.neg(),L),"mod"!==L&&(j=Y.div.neg()),{div:j,mod:Y.mod}):0!=(this.negative&D.negative)?(Y=this.neg().divmod(D.neg(),L),"div"!==L&&(W=Y.mod.neg(),B&&0!==W.negative&&W.isub(D)),{div:Y.div,mod:W}):D.length>this.length||this.cmp(D)<0?{div:new t(0),mod:this}:1===D.length?"div"===L?{div:this.divn(D.words[0]),mod:null}:"mod"===L?{div:null,mod:new t(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new t(this.modn(D.words[0]))}:this._wordDiv(D,L);var j,W,Y},t.prototype.div=function(D){return this.divmod(D,"div",!1).div},t.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},t.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},t.prototype.divRound=function(D){var L=this.divmod(D);if(L.mod.isZero())return L.div;var B=0!==L.div.negative?L.mod.isub(D):L.mod,j=D.ushrn(1),W=D.andln(1),Y=B.cmp(j);return Y<0||1===W&&0===Y?L.div:0!==L.div.negative?L.div.isubn(1):L.div.iaddn(1)},t.prototype.modn=function(D){n(D<=67108863);for(var L=(1<<26)%D,B=0,j=this.length-1;j>=0;j--)B=(L*B+(0|this.words[j]))%D;return B},t.prototype.idivn=function(D){n(D<=67108863);for(var L=0,B=this.length-1;B>=0;B--){var j=(0|this.words[B])+67108864*L;this.words[B]=j/D|0,L=j%D}return this.strip()},t.prototype.divn=function(D){return this.clone().idivn(D)},t.prototype.egcd=function(D){n(0===D.negative),n(!D.isZero());var L=this,B=D.clone();L=0!==L.negative?L.umod(D):L.clone();for(var j=new t(1),W=new t(0),Y=new t(0),Q=new t(1),ne=0;L.isEven()&&B.isEven();)L.iushrn(1),B.iushrn(1),++ne;for(var X=B.clone(),$=L.clone();!L.isZero();){for(var re=0,H=1;0==(L.words[0]&H)&&re<26;++re,H<<=1);if(re>0)for(L.iushrn(re);re-- >0;)(j.isOdd()||W.isOdd())&&(j.iadd(X),W.isub($)),j.iushrn(1),W.iushrn(1);for(var U=0,G=1;0==(B.words[0]&G)&&U<26;++U,G<<=1);if(U>0)for(B.iushrn(U);U-- >0;)(Y.isOdd()||Q.isOdd())&&(Y.iadd(X),Q.isub($)),Y.iushrn(1),Q.iushrn(1);L.cmp(B)>=0?(L.isub(B),j.isub(Y),W.isub(Q)):(B.isub(L),Y.isub(j),Q.isub(W))}return{a:Y,b:Q,gcd:B.iushln(ne)}},t.prototype._invmp=function(D){n(0===D.negative),n(!D.isZero());var L=this,B=D.clone();L=0!==L.negative?L.umod(D):L.clone();for(var j,W=new t(1),Y=new t(0),Q=B.clone();L.cmpn(1)>0&&B.cmpn(1)>0;){for(var ne=0,X=1;0==(L.words[0]&X)&&ne<26;++ne,X<<=1);if(ne>0)for(L.iushrn(ne);ne-- >0;)W.isOdd()&&W.iadd(Q),W.iushrn(1);for(var $=0,re=1;0==(B.words[0]&re)&&$<26;++$,re<<=1);if($>0)for(B.iushrn($);$-- >0;)Y.isOdd()&&Y.iadd(Q),Y.iushrn(1);L.cmp(B)>=0?(L.isub(B),W.isub(Y)):(B.isub(L),Y.isub(W))}return(j=0===L.cmpn(1)?W:Y).cmpn(0)<0&&j.iadd(D),j},t.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var L=this.clone(),B=D.clone();L.negative=0,B.negative=0;for(var j=0;L.isEven()&&B.isEven();j++)L.iushrn(1),B.iushrn(1);for(;;){for(;L.isEven();)L.iushrn(1);for(;B.isEven();)B.iushrn(1);var W=L.cmp(B);if(W<0){var Y=L;L=B,B=Y}else if(0===W||0===B.cmpn(1))break;L.isub(B)}return B.iushln(j)},t.prototype.invm=function(D){return this.egcd(D).a.umod(D)},t.prototype.isEven=function(){return 0==(1&this.words[0])},t.prototype.isOdd=function(){return 1==(1&this.words[0])},t.prototype.andln=function(D){return this.words[0]&D},t.prototype.bincn=function(D){n("number"==typeof D);var L=D%26,B=(D-L)/26,j=1<<L;if(this.length<=B)return this._expand(B+1),this.words[B]|=j,this;for(var W=j,Y=B;0!==W&&Y<this.length;Y++){var Q=0|this.words[Y];W=(Q+=W)>>>26,this.words[Y]=Q&=67108863}return 0!==W&&(this.words[Y]=W,this.length++),this},t.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},t.prototype.cmpn=function(D){var L,B=D<0;if(0!==this.negative&&!B)return-1;if(0===this.negative&&B)return 1;if(this.strip(),this.length>1)L=1;else{B&&(D=-D),n(D<=67108863,"Number is too big");var j=0|this.words[0];L=j===D?0:j<D?-1:1}return 0!==this.negative?0|-L:L},t.prototype.cmp=function(D){if(0!==this.negative&&0===D.negative)return-1;if(0===this.negative&&0!==D.negative)return 1;var L=this.ucmp(D);return 0!==this.negative?0|-L:L},t.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var L=0,B=this.length-1;B>=0;B--){var j=0|this.words[B],W=0|D.words[B];if(j!==W){j<W?L=-1:j>W&&(L=1);break}}return L},t.prototype.gtn=function(D){return 1===this.cmpn(D)},t.prototype.gt=function(D){return 1===this.cmp(D)},t.prototype.gten=function(D){return this.cmpn(D)>=0},t.prototype.gte=function(D){return this.cmp(D)>=0},t.prototype.ltn=function(D){return-1===this.cmpn(D)},t.prototype.lt=function(D){return-1===this.cmp(D)},t.prototype.lten=function(D){return this.cmpn(D)<=0},t.prototype.lte=function(D){return this.cmp(D)<=0},t.prototype.eqn=function(D){return 0===this.cmpn(D)},t.prototype.eq=function(D){return 0===this.cmp(D)},t.red=function(D){return new R(D)},t.prototype.toRed=function(D){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),D.convertTo(this)._forceRed(D)},t.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(D){return this.red=D,this},t.prototype.forceRed=function(D){return n(!this.red,"Already a number in reduction context"),this._forceRed(D)},t.prototype.redAdd=function(D){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},t.prototype.redIAdd=function(D){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},t.prototype.redSub=function(D){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},t.prototype.redISub=function(D){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},t.prototype.redShl=function(D){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},t.prototype.redMul=function(D){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},t.prototype.redIMul=function(D){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},t.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(D){return n(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var k={k256:null,p224:null,p192:null,p25519:null};function M(D,L){this.name=D,this.p=new t(L,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function A(){M.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){M.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function I(){M.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function C(){M.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function R(D){if("string"==typeof D){var L=t._prime(D);this.m=L.p,this.prime=L}else n(D.gtn(1),"modulus must be greater than 1"),this.m=D,this.prime=null}function O(D){R.call(this,D),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}M.prototype._tmp=function(){var D=new t(null);return D.words=new Array(Math.ceil(this.n/13)),D},M.prototype.ireduce=function(D){var L,B=D;do{this.split(B,this.tmp),L=(B=(B=this.imulK(B)).iadd(this.tmp)).bitLength()}while(L>this.n);var j=L<this.n?-1:B.ucmp(this.p);return 0===j?(B.words[0]=0,B.length=1):j>0?B.isub(this.p):void 0!==B.strip?B.strip():B._strip(),B},M.prototype.split=function(D,L){D.iushrn(this.n,0,L)},M.prototype.imulK=function(D){return D.imul(this.k)},a(A,M),A.prototype.split=function(D,L){for(var B=Math.min(D.length,9),j=0;j<B;j++)L.words[j]=D.words[j];if(L.length=B,D.length<=9)return D.words[0]=0,void(D.length=1);var W=D.words[9];for(L.words[L.length++]=4194303&W,j=10;j<D.length;j++){var Y=0|D.words[j];D.words[j-10]=(4194303&Y)<<4|W>>>22,W=Y}D.words[j-10]=W>>>=22,D.length-=0===W&&D.length>10?10:9},A.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var L=0,B=0;B<D.length;B++){var j=0|D.words[B];D.words[B]=67108863&(L+=977*j),L=64*j+(L/67108864|0)}return 0===D.words[D.length-1]&&(D.length--,0===D.words[D.length-1]&&D.length--),D},a(E,M),a(I,M),a(C,M),C.prototype.imulK=function(D){for(var L=0,B=0;B<D.length;B++){var j=19*(0|D.words[B])+L,W=67108863&j;j>>>=26,D.words[B]=W,L=j}return 0!==L&&(D.words[D.length++]=L),D},t._prime=function(D){if(k[D])return k[D];var L;if("k256"===D)L=new A;else if("p224"===D)L=new E;else if("p192"===D)L=new I;else{if("p25519"!==D)throw new Error("Unknown prime "+D);L=new C}return k[D]=L,L},R.prototype._verify1=function(D){n(0===D.negative,"red works only with positives"),n(D.red,"red works only with red numbers")},R.prototype._verify2=function(D,L){n(0==(D.negative|L.negative),"red works only with positives"),n(D.red&&D.red===L.red,"red works only with red numbers")},R.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},R.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},R.prototype.add=function(D,L){this._verify2(D,L);var B=D.add(L);return B.cmp(this.m)>=0&&B.isub(this.m),B._forceRed(this)},R.prototype.iadd=function(D,L){this._verify2(D,L);var B=D.iadd(L);return B.cmp(this.m)>=0&&B.isub(this.m),B},R.prototype.sub=function(D,L){this._verify2(D,L);var B=D.sub(L);return B.cmpn(0)<0&&B.iadd(this.m),B._forceRed(this)},R.prototype.isub=function(D,L){this._verify2(D,L);var B=D.isub(L);return B.cmpn(0)<0&&B.iadd(this.m),B},R.prototype.shl=function(D,L){return this._verify1(D),this.imod(D.ushln(L))},R.prototype.imul=function(D,L){return this._verify2(D,L),this.imod(D.imul(L))},R.prototype.mul=function(D,L){return this._verify2(D,L),this.imod(D.mul(L))},R.prototype.isqr=function(D){return this.imul(D,D.clone())},R.prototype.sqr=function(D){return this.mul(D,D)},R.prototype.sqrt=function(D){if(D.isZero())return D.clone();var L=this.m.andln(3);if(n(L%2==1),3===L){var B=this.m.add(new t(1)).iushrn(2);return this.pow(D,B)}for(var j=this.m.subn(1),W=0;!j.isZero()&&0===j.andln(1);)W++,j.iushrn(1);n(!j.isZero());var Y=new t(1).toRed(this),Q=Y.redNeg(),ne=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new t(2*X*X).toRed(this);0!==this.pow(X,ne).cmp(Q);)X.redIAdd(Q);for(var $=this.pow(X,j),re=this.pow(D,j.addn(1).iushrn(1)),H=this.pow(D,j),U=W;0!==H.cmp(Y);){for(var G=H,ie=0;0!==G.cmp(Y);ie++)G=G.redSqr();n(ie<U);var q=this.pow($,new t(1).iushln(U-ie-1));re=re.redMul(q),$=q.redSqr(),H=H.redMul($),U=ie}return re},R.prototype.invm=function(D){var L=D._invmp(this.m);return 0!==L.negative?(L.negative=0,this.imod(L).redNeg()):this.imod(L)},R.prototype.pow=function(D,L){if(L.isZero())return new t(1).toRed(this);if(0===L.cmpn(1))return D.clone();var B=new Array(16);B[0]=new t(1).toRed(this),B[1]=D;for(var j=2;j<B.length;j++)B[j]=this.mul(B[j-1],D);var W=B[0],Y=0,Q=0,ne=L.bitLength()%26;for(0===ne&&(ne=26),j=L.length-1;j>=0;j--){for(var X=L.words[j],$=ne-1;$>=0;$--){var re=X>>$&1;W!==B[0]&&(W=this.sqr(W)),0!==re||0!==Y?(Y<<=1,Y|=re,(4==++Q||0===j&&0===$)&&(W=this.mul(W,B[Y]),Q=0,Y=0)):Q=0}ne=26}return W},R.prototype.convertTo=function(D){var L=D.umod(this.m);return L===D?L.clone():L},R.prototype.convertFrom=function(D){var L=D.clone();return L.red=null,L},t.mont=function(D){return new O(D)},a(O,R),O.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},O.prototype.convertFrom=function(D){var L=this.imod(D.mul(this.rinv));return L.red=null,L},O.prototype.imul=function(D,L){if(D.isZero()||L.isZero())return D.words[0]=0,D.length=1,D;var B=D.imul(L),j=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),W=B.isub(j).iushrn(this.shift),Y=W;return W.cmp(this.m)>=0?Y=W.isub(this.m):W.cmpn(0)<0&&(Y=W.iadd(this.m)),Y._forceRed(this)},O.prototype.mul=function(D,L){if(D.isZero()||L.isZero())return new t(0)._forceRed(this);var B=D.mul(L),j=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),W=B.isub(j).iushrn(this.shift),Y=W;return W.cmp(this.m)>=0?Y=W.isub(this.m):W.cmpn(0)<0&&(Y=W.iadd(this.m)),Y._forceRed(this)},O.prototype.invm=function(D){return this.imod(D._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===w||w,this)},{buffer:2}],34:[function(m,w,y){"use strict";w.exports=function(e){var r,n,a,t=e.length,p=0;for(r=0;r<t;++r)p+=e[r].length;var u=new Array(p),i=0;for(r=0;r<t;++r){var c=e[r],f=c.length;for(n=0;n<f;++n){var l=u[i++]=new Array(f-1),h=0;for(a=0;a<f;++a)a!==n&&(l[h++]=c[a]);if(1&n){var d=l[1];l[1]=l[0],l[0]=d}}}return u}},{}],35:[function(m,w,y){"use strict";w.exports=function(l,h,d){switch(arguments.length){case 1:return c(l);case 2:return"function"==typeof h?u(l,l,h,!0):f(l,h);case 3:return u(l,h,d,!1);default:throw new Error("box-intersect: Invalid arguments")}};var e,r=m("typedarray-pool"),n=m("./lib/sweep"),a=m("./lib/intersect");function t(l,h){for(var d=0;d<l;++d)if(!(h[d]<=h[d+l]))return!0;return!1}function p(l,h,d,o){for(var _=0,s=0,k=0,M=l.length;k<M;++k){var A=l[k];if(!t(h,A)){for(var E=0;E<2*h;++E)d[_++]=A[E];o[s++]=k}}return s}function u(l,h,d,o){var _=l.length,s=h.length;if(!(_<=0||s<=0)){var k=l[0].length>>>1;if(!(k<=0)){var M,A=r.mallocDouble(2*k*_),E=r.mallocInt32(_);if((_=p(l,k,A,E))>0){if(1===k&&o)n.init(_),M=n.sweepComplete(k,d,0,_,A,E,0,_,A,E);else{var I=r.mallocDouble(2*k*s),C=r.mallocInt32(s);(s=p(h,k,I,C))>0&&(n.init(_+s),M=1===k?n.sweepBipartite(k,d,0,_,A,E,0,s,I,C):a(k,d,o,_,A,E,s,I,C),r.free(I),r.free(C))}r.free(A),r.free(E)}return M}}}function i(l,h){e.push([l,h])}function c(l){return e=[],u(l,l,i,!0),e}function f(l,h){return e=[],u(l,h,i,!1),e}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(m,w,y){"use strict";function e(r){return r?function(n,a,t,p,u,i,c,f,l,h,d){return u-p>l-f?function(o,_,s,k,M,A,E,I,C,R,O){for(var D=2*o,L=k,B=D*k;L<M;++L,B+=D){var j=A[_+B],W=A[_+B+o],Y=E[L];e:for(var Q=I,ne=D*I;Q<C;++Q,ne+=D){var re=O[Q];if(!(R[_+ne+o]<j||W<R[_+ne])){for(var H=_+1;H<o;++H)if(A[H+o+B]<R[H+ne]||R[H+o+ne]<A[H+B])continue e;var ee=s(Y,re);if(void 0!==ee)return ee}}}}(n,a,t,p,u,i,c,f,l,h,d):function(o,_,s,k,M,A,E,I,C,R,O){for(var D=2*o,L=I,B=D*I;L<C;++L,B+=D){var j=R[_+B],W=R[_+B+o],Y=O[L];e:for(var Q=k,ne=D*k;Q<M;++Q,ne+=D){var re=E[Q];if(!(W<A[_+ne]||A[_+ne+o]<j)){for(var H=_+1;H<o;++H)if(A[H+o+ne]<R[H+B]||R[H+o+B]<A[H+ne])continue e;var ee=s(re,Y);if(void 0!==ee)return ee}}}}(n,a,t,p,u,i,c,f,l,h,d)}:function(n,a,t,p,u,i,c,f,l,h,d,o){return i-u>h-l?p?function(_,s,k,M,A,E,I,C,R,O,D){for(var L=2*_,B=M,j=L*M;B<A;++B,j+=L){var W=E[s+j],Y=E[s+j+_],Q=I[B];e:for(var ne=C,X=L*C;ne<R;++ne,X+=L){var $=O[s+X],re=D[ne];if(!($<=W||Y<$)){for(var H=s+1;H<_;++H)if(E[H+_+j]<O[H+X]||O[H+_+X]<E[H+j])continue e;var ee=k(re,Q);if(void 0!==ee)return ee}}}}(n,a,t,u,i,c,f,l,h,d,o):function(_,s,k,M,A,E,I,C,R,O,D){for(var L=2*_,B=M,j=L*M;B<A;++B,j+=L){var W=E[s+j],Y=E[s+j+_],Q=I[B];e:for(var ne=C,X=L*C;ne<R;++ne,X+=L){var $=O[s+X],re=D[ne];if(!($<W||Y<$)){for(var H=s+1;H<_;++H)if(E[H+_+j]<O[H+X]||O[H+_+X]<E[H+j])continue e;var ee=k(Q,re);if(void 0!==ee)return ee}}}}(n,a,t,u,i,c,f,l,h,d,o):p?function(_,s,k,M,A,E,I,C,R,O,D){for(var L=2*_,B=C,j=L*C;B<R;++B,j+=L){var W=O[s+j],Y=D[B];e:for(var Q=M,ne=L*M;Q<A;++Q,ne+=L){var re=I[Q];if(!(W<=E[s+ne]||E[s+ne+_]<W)){for(var H=s+1;H<_;++H)if(E[H+_+ne]<O[H+j]||O[H+_+j]<E[H+ne])continue e;var ee=k(Y,re);if(void 0!==ee)return ee}}}}(n,a,t,u,i,c,f,l,h,d,o):function(_,s,k,M,A,E,I,C,R,O,D){for(var L=2*_,B=C,j=L*C;B<R;++B,j+=L){var W=O[s+j],Y=D[B];e:for(var Q=M,ne=L*M;Q<A;++Q,ne+=L){var re=I[Q];if(!(W<E[s+ne]||E[s+ne+_]<W)){for(var H=s+1;H<_;++H)if(E[H+_+ne]<O[H+j]||O[H+_+j]<E[H+ne])continue e;var ee=k(re,Y);if(void 0!==ee)return ee}}}}(n,a,t,u,i,c,f,l,h,d,o)}}y.partial=e(!1),y.full=e(!0)},{}],37:[function(m,w,y){"use strict";w.exports=function(E,I,C,R,O,D,L,B,j){!function(Pe,De){var Fe=8*r.log2(De+1)*(Pe+1)|0,Ue=r.nextPow2(6*Fe);_.length<Ue&&(e.free(_),_=e.mallocInt32(Ue));var He=r.nextPow2(2*Fe);s.length<He&&(e.free(s),s=e.mallocDouble(He))}(E,R+L);var W,Y=0,Q=2*E;for(k(Y++,0,0,R,0,L,C?16:0,-1/0,1/0),C||k(Y++,0,0,L,0,R,1,-1/0,1/0);Y>0;){var ne=6*(Y-=1),X=_[ne],$=_[ne+1],re=_[ne+2],H=_[ne+3],U=_[ne+4],G=_[ne+5],ie=2*Y,q=s[ie],ee=s[ie+1],te=1&G,se=!!(16&G),ue=O,de=D,he=B,xe=j;if(te&&(ue=B,de=j,he=O,xe=D),!(2&G&&(re=l(E,X,$,re,ue,de,ee),$>=re)||4&G&&($=h(E,X,$,re,ue,de,q))>=re)){var ge=re-$,_e=U-H;if(se){if(E*ge*(ge+_e)<1<<22){if(void 0!==(W=p.scanComplete(E,X,I,$,re,ue,de,H,U,he,xe)))return W;continue}}else{if(E*Math.min(ge,_e)<128){if(void 0!==(W=a(E,X,I,te,$,re,ue,de,H,U,he,xe)))return W;continue}if(E*ge*_e<1<<22){if(void 0!==(W=p.scanBipartite(E,X,I,te,$,re,ue,de,H,U,he,xe)))return W;continue}}var Ce=c(E,X,$,re,ue,de,q,ee);if($<Ce)if(E*(Ce-$)<128){if(void 0!==(W=t(E,X+1,I,$,Ce,ue,de,H,U,he,xe)))return W}else if(X===E-2){if(void 0!==(W=te?p.sweepBipartite(E,I,H,U,he,xe,$,Ce,ue,de):p.sweepBipartite(E,I,$,Ce,ue,de,H,U,he,xe)))return W}else k(Y++,X+1,$,Ce,H,U,te,-1/0,1/0),k(Y++,X+1,H,U,$,Ce,1^te,-1/0,1/0);if(Ce<re){var Le=u(E,X,H,U,he,xe),Ie=he[Q*Le+X],Be=f(E,X,Le,U,he,xe,Ie);if(Be<U&&k(Y++,X,Ce,re,Be,U,(4|te)+(se?16:0),Ie,ee),H<Le&&k(Y++,X,Ce,re,H,Le,(2|te)+(se?16:0),q,Ie),Le+1===Be){if(void 0!==(W=se?A(E,X,I,Ce,re,ue,de,Le,he,xe[Le]):M(E,X,I,te,Ce,re,ue,de,Le,he,xe[Le])))return W}else if(Le<Be){var ve;if(se){if(Ce<(ve=d(E,X,Ce,re,ue,de,Ie))){var Te=f(E,X,Ce,ve,ue,de,Ie);if(X===E-2){if(Ce<Te&&void 0!==(W=p.sweepComplete(E,I,Ce,Te,ue,de,Le,Be,he,xe))||Te<ve&&void 0!==(W=p.sweepBipartite(E,I,Te,ve,ue,de,Le,Be,he,xe)))return W}else Ce<Te&&k(Y++,X+1,Ce,Te,Le,Be,16,-1/0,1/0),Te<ve&&(k(Y++,X+1,Te,ve,Le,Be,0,-1/0,1/0),k(Y++,X+1,Le,Be,Te,ve,1,-1/0,1/0))}}else Ce<(ve=te?o(E,X,Ce,re,ue,de,Ie):d(E,X,Ce,re,ue,de,Ie))&&(X===E-2?W=te?p.sweepBipartite(E,I,Le,Be,he,xe,Ce,ve,ue,de):p.sweepBipartite(E,I,Ce,ve,ue,de,Le,Be,he,xe):(k(Y++,X+1,Ce,ve,Le,Be,te,-1/0,1/0),k(Y++,X+1,Le,Be,Ce,ve,1^te,-1/0,1/0)))}}}}};var e=m("typedarray-pool"),r=m("bit-twiddle"),n=m("./brute"),a=n.partial,t=n.full,p=m("./sweep"),u=m("./median"),i=m("./partition"),c=i("!(lo>=p0)&&!(p1>=hi)"),f=i("lo===p0"),l=i("lo<p0"),h=i("hi<=p0"),d=i("lo<=p0&&p0<=hi"),o=i("lo<p0&&p0<=hi"),_=e.mallocInt32(1024),s=e.mallocDouble(1024);function k(E,I,C,R,O,D,L,B,j){var W=6*E;_[W]=I,_[W+1]=C,_[W+2]=R,_[W+3]=O,_[W+4]=D,_[W+5]=L;var Y=2*E;s[Y]=B,s[Y+1]=j}function M(E,I,C,R,O,D,L,B,j,W,Y){var Q=2*E,ne=j*Q,X=W[ne+I];e:for(var $=O,re=O*Q;$<D;++$,re+=Q){var H=L[re+I],U=L[re+I+E];if(!(X<H||U<X||R&&X===H)){for(var G,ie=B[$],q=I+1;q<E;++q)if(H=L[re+q],(U=L[re+q+E])<W[ne+q]||W[ne+q+E]<H)continue e;if(void 0!==(G=R?C(Y,ie):C(ie,Y)))return G}}}function A(E,I,C,R,O,D,L,B,j,W){var Y=2*E,Q=B*Y,ne=j[Q+I];e:for(var X=R,$=R*Y;X<O;++X,$+=Y){var re=L[X];if(re!==W){var H=D[$+I],U=D[$+I+E];if(!(ne<H||U<ne)){for(var G=I+1;G<E;++G)if(H=D[$+G],(U=D[$+G+E])<j[Q+G]||j[Q+G+E]<H)continue e;var ee=C(re,W);if(void 0!==ee)return ee}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(m,w,y){"use strict";w.exports=function(n,a,t,p,u,i){if(p<=t+1)return t;for(var c=t,f=p,l=p+t>>>1,h=2*n,d=l,o=u[h*l+a];c<f;){if(f-c<8){r(n,a,c,f,u,i),o=u[h*l+a];break}var _=f-c,s=Math.random()*_+c|0,k=u[h*s+a],M=Math.random()*_+c|0,A=u[h*M+a],E=Math.random()*_+c|0,I=u[h*E+a];k<=A?I>=A?(d=M,o=A):k>=I?(d=s,o=k):(d=E,o=I):A>=I?(d=M,o=A):I>=k?(d=s,o=k):(d=E,o=I);for(var C=h*(f-1),R=h*d,O=0;O<h;++O,++C,++R){var D=u[C];u[C]=u[R],u[R]=D}var L=i[f-1];for(i[f-1]=i[d],i[d]=L,C=h*(f-1),R=h*(d=e(n,a,c,f-1,u,i,o)),O=0;O<h;++O,++C,++R)D=u[C],u[C]=u[R],u[R]=D;if(L=i[f-1],i[f-1]=i[d],i[d]=L,l<d){for(f=d-1;c<f&&u[h*(f-1)+a]===o;)f-=1;f+=1}else{if(!(d<l))break;for(c=d+1;c<f&&u[h*c+a]===o;)c+=1}}return e(n,a,t,l,u,i,u[h*l+a])};var e=m("./partition")("lo<p0");function r(n,a,t,p,u,i){for(var c=2*n,f=c*(t+1)+a,l=t+1;l<p;++l,f+=c)for(var h=u[f],d=l,o=c*(l-1);d>t&&u[o+a]>h;--d,o-=c){for(var _=o,s=o+c,k=0;k<c;++k,++_,++s){var M=u[_];u[_]=u[s],u[s]=M}var A=i[d];i[d]=i[d-1],i[d-1]=A}}},{"./partition":39}],39:[function(m,w,y){"use strict";w.exports=function(r){return e[r]};var e={"lo===p0":function(r,n,a,t,p,u,i){for(var c=2*r,f=c*a,l=f,h=a,d=n,o=a;t>o;++o,f+=c)if(p[f+d]===i)if(h===o)h+=1,l+=c;else{for(var _=0;c>_;++_){var s=p[f+_];p[f+_]=p[l],p[l++]=s}var k=u[o];u[o]=u[h],u[h++]=k}return h},"lo<p0":function(r,n,a,t,p,u,i){for(var c=2*r,f=c*a,l=f,h=a,d=n,o=a;t>o;++o,f+=c)if(p[f+d]<i)if(h===o)h+=1,l+=c;else{for(var _=0;c>_;++_){var s=p[f+_];p[f+_]=p[l],p[l++]=s}var k=u[o];u[o]=u[h],u[h++]=k}return h},"lo<=p0":function(r,n,a,t,p,u,i){for(var c=2*r,f=c*a,l=f,h=a,d=r+n,o=a;t>o;++o,f+=c)if(p[f+d]<=i)if(h===o)h+=1,l+=c;else{for(var _=0;c>_;++_){var s=p[f+_];p[f+_]=p[l],p[l++]=s}var k=u[o];u[o]=u[h],u[h++]=k}return h},"hi<=p0":function(r,n,a,t,p,u,i){for(var c=2*r,f=c*a,l=f,h=a,d=r+n,o=a;t>o;++o,f+=c)if(p[f+d]<=i)if(h===o)h+=1,l+=c;else{for(var _=0;c>_;++_){var s=p[f+_];p[f+_]=p[l],p[l++]=s}var k=u[o];u[o]=u[h],u[h++]=k}return h},"lo<p0&&p0<=hi":function(r,n,a,t,p,u,i){for(var c=2*r,f=c*a,l=f,h=a,d=n,o=r+n,_=a;t>_;++_,f+=c)if(p[f+d]<i&&i<=p[f+o])if(h===_)h+=1,l+=c;else{for(var M=0;c>M;++M){var A=p[f+M];p[f+M]=p[l],p[l++]=A}var E=u[_];u[_]=u[h],u[h++]=E}return h},"lo<=p0&&p0<=hi":function(r,n,a,t,p,u,i){for(var c=2*r,f=c*a,l=f,h=a,d=n,o=r+n,_=a;t>_;++_,f+=c)if(p[f+d]<=i&&i<=p[f+o])if(h===_)h+=1,l+=c;else{for(var M=0;c>M;++M){var A=p[f+M];p[f+M]=p[l],p[l++]=A}var E=u[_];u[_]=u[h],u[h++]=E}return h},"!(lo>=p0)&&!(p1>=hi)":function(r,n,a,t,p,u,i,c){for(var f=2*r,l=f*a,h=l,d=a,o=n,_=r+n,s=a;t>s;++s,l+=f)if(!(p[l+o]>=i||c>=p[l+_]))if(d===s)d+=1,h+=f;else{for(var A=0;f>A;++A){var E=p[l+A];p[l+A]=p[h],p[h++]=E}var I=u[s];u[s]=u[d],u[d++]=I}return d}}},{}],40:[function(m,w,y){"use strict";function e(i,c,f){for(var l=2*(i+1),h=i+1;h<=c;++h){for(var d=f[l++],o=f[l++],_=h,s=l-2;_-- >i;){var k=f[s-2],M=f[s-1];if(k<d||k===d&&M<o)break;f[s]=k,f[s+1]=M,s-=2}f[s]=d,f[s+1]=o}}function r(i,c,f){var l=f[i*=2],h=f[i+1];f[i]=f[c*=2],f[i+1]=f[c+1],f[c]=l,f[c+1]=h}function n(i,c,f){f[i*=2]=f[c*=2],f[i+1]=f[c+1]}function a(i,c,f,l){f*=2;var h=l[i*=2],d=l[i+1];l[i]=l[c*=2],l[i+1]=l[c+1],l[c]=l[f],l[c+1]=l[f+1],l[f]=h,l[f+1]=d}function t(i,c,f,l,h){h[i*=2]=h[c*=2],h[c]=f,h[i+1]=h[c+1],h[c+1]=l}function p(i,c,f){var l=f[i*=2],h=f[c*=2];return!(l<h)&&(l!==h||f[i+1]>f[c+1])}function u(i,c,f,l){var h=l[i*=2];return h<c||h===c&&l[i+1]<f}w.exports=function(i,c){c<=128?e(0,c-1,i):function f(l,h,d){var o=(h-l+1)/6|0,_=l+o,s=h-o,k=l+h>>1,M=k-o,A=k+o,E=_,I=M,C=k,R=A,O=s,D=l+1,L=h-1,B=0;p(E,I,d)&&(B=E,E=I,I=B),p(R,O,d)&&(B=R,R=O,O=B),p(E,C,d)&&(B=E,E=C,C=B),p(I,C,d)&&(B=I,I=C,C=B),p(E,R,d)&&(B=E,E=R,R=B),p(C,R,d)&&(B=C,C=R,R=B),p(I,O,d)&&(B=I,I=O,O=B),p(I,C,d)&&(B=I,I=C,C=B),p(R,O,d)&&(B=R,R=O,O=B);for(var j=d[2*I],W=d[2*I+1],Y=d[2*R],Q=d[2*R+1],ne=2*E,X=2*C,$=2*O,re=2*_,H=2*k,U=2*s,G=0;G<2;++G){var q=d[X+G],ee=d[$+G];d[re+G]=d[ne+G],d[H+G]=q,d[U+G]=ee}n(M,l,d),n(A,h,d);for(var te=D;te<=L;++te)if(u(te,j,W,d))te!==D&&r(te,D,d),++D;else if(!u(te,Y,Q,d))for(;;){if(u(L,Y,Q,d)){u(L,j,W,d)?(a(te,D,L,d),++D,--L):(r(te,L,d),--L);break}if(--L<te)break}t(l,D-1,j,W,d),t(h,L+1,Y,Q,d),D-2-l<=32?e(l,D-2,d):f(l,D-2,d),h-(L+2)<=32?e(L+2,h,d):f(L+2,h,d),L-D<=32?e(D,L,d):f(D,L,d)}(0,c-1,i)}},{}],41:[function(m,w,y){"use strict";w.exports={init:function(d){var o=r.nextPow2(d);a.length<o&&(e.free(a),a=e.mallocInt32(o)),t.length<o&&(e.free(t),t=e.mallocInt32(o)),p.length<o&&(e.free(p),p=e.mallocInt32(o)),u.length<o&&(e.free(u),u=e.mallocInt32(o)),i.length<o&&(e.free(i),i=e.mallocInt32(o)),c.length<o&&(e.free(c),c=e.mallocInt32(o));var _=8*o;f.length<_&&(e.free(f),f=e.mallocDouble(_))},sweepBipartite:function(d,o,_,s,k,M,A,E,I,C){for(var R=0,O=2*d,D=d-1,L=O-1,B=_;B<s;++B){var j=M[B],W=O*B;f[R++]=k[W+D],f[R++]=-(j+1),f[R++]=k[W+L],f[R++]=j}for(B=A;B<E;++B){j=C[B]+(1<<28);var Y=O*B;f[R++]=I[Y+D],f[R++]=-j,f[R++]=I[Y+L],f[R++]=j}var Q=R>>>1;n(f,Q);var ne=0,X=0;for(B=0;B<Q;++B){var $=0|f[2*B+1];if($>=1<<28)l(p,u,X--,$=$-(1<<28)|0);else if($>=0)l(a,t,ne--,$);else if($<=-(1<<28)){$=-$-(1<<28)|0;for(var re=0;re<ne;++re)if(void 0!==(H=o(a[re],$)))return H;h(p,u,X++,$)}else{for($=-$-1|0,re=0;re<X;++re){var H;if(void 0!==(H=o($,p[re])))return H}h(a,t,ne++,$)}}},sweepComplete:function(d,o,_,s,k,M,A,E,I,C){for(var R=0,O=2*d,D=d-1,L=O-1,B=_;B<s;++B){var j=M[B]+1<<1,W=O*B;f[R++]=k[W+D],f[R++]=-j,f[R++]=k[W+L],f[R++]=j}for(B=A;B<E;++B){j=C[B]+1<<1;var Y=O*B;f[R++]=I[Y+D],f[R++]=1|-j,f[R++]=I[Y+L],f[R++]=1|j}var Q=R>>>1;n(f,Q);var ne=0,X=0,$=0;for(B=0;B<Q;++B){var re=0|f[2*B+1],H=1&re;if(B<Q-1&&re>>1==f[2*B+3]>>1&&(H=2,B+=1),re<0){for(var U=-(re>>1)-1,G=0;G<$;++G)if(void 0!==(ie=o(i[G],U)))return ie;if(0!==H)for(G=0;G<ne;++G)if(void 0!==(ie=o(a[G],U)))return ie;if(1!==H)for(G=0;G<X;++G){var ie;if(void 0!==(ie=o(p[G],U)))return ie}0===H?h(a,t,ne++,U):1===H?h(p,u,X++,U):2===H&&h(i,c,$++,U)}else U=(re>>1)-1,0===H?l(a,t,ne--,U):1===H?l(p,u,X--,U):2===H&&l(i,c,$--,U)}},scanBipartite:function(d,o,_,s,k,M,A,E,I,C,R,O){var D=0,L=2*d,B=o,j=o+d,W=1,Y=1;s?Y=1<<28:W=1<<28;for(var Q=k;Q<M;++Q){var ne=Q+W,X=L*Q;f[D++]=A[X+B],f[D++]=-ne,f[D++]=A[X+j],f[D++]=ne}for(Q=I;Q<C;++Q)ne=Q+Y,f[D++]=R[L*Q+B],f[D++]=-ne;var re=D>>>1;n(f,re);var H=0;for(Q=0;Q<re;++Q){var U=0|f[2*Q+1];if(U<0){var G=!1;if((ne=-U)>=1<<28?(G=!s,ne-=1<<28):(G=!!s,ne-=1),G)h(a,t,H++,ne);else{var ie=O[ne],q=L*ne,ee=R[q+o+1],te=R[q+o+1+d];e:for(var se=0;se<H;++se){var ue=a[se],de=L*ue;if(!(te<A[de+o+1]||A[de+o+1+d]<ee)){for(var he=o+2;he<d;++he)if(R[q+he+d]<A[de+he]||A[de+he+d]<R[q+he])continue e;var xe,ge=E[ue];if(void 0!==(xe=s?_(ie,ge):_(ge,ie)))return xe}}}}else l(a,t,H--,U-W)}},scanComplete:function(d,o,_,s,k,M,A,E,I,C,R){for(var O=0,D=2*d,L=o,B=o+d,j=s;j<k;++j){var W=j+(1<<28),Y=D*j;f[O++]=M[Y+L],f[O++]=-W,f[O++]=M[Y+B],f[O++]=W}for(j=E;j<I;++j)W=j+1,f[O++]=C[D*j+L],f[O++]=-W;var ne=O>>>1;n(f,ne);var X=0;for(j=0;j<ne;++j){var $=0|f[2*j+1];if($<0)if((W=-$)>=1<<28)a[X++]=W-(1<<28);else{var re=R[W-=1],H=D*W,U=C[H+o+1],G=C[H+o+1+d];e:for(var ie=0;ie<X;++ie){var q=a[ie],ee=A[q];if(ee===re)break;var te=D*q;if(!(G<M[te+o+1]||M[te+o+1+d]<U)){for(var se=o+2;se<d;++se)if(C[H+se+d]<M[te+se]||M[te+se+d]<C[H+se])continue e;var ue=_(ee,re);if(void 0!==ue)return ue}}}else{for(W=$-(1<<28),ie=X-1;ie>=0;--ie)if(a[ie]===W){for(se=ie+1;se<X;++se)a[se-1]=a[se];break}--X}}}};var e=m("typedarray-pool"),r=m("bit-twiddle"),n=m("./sort"),a=e.mallocInt32(1024),t=e.mallocInt32(1024),p=e.mallocInt32(1024),u=e.mallocInt32(1024),i=e.mallocInt32(1024),c=e.mallocInt32(1024),f=e.mallocDouble(8192);function l(d,o,_,s){var k=o[s],M=d[_-1];d[k]=M,o[M]=k}function h(d,o,_,s){d[_]=s,o[s]=_}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(m,w,y){"use strict";var e=m("./lib/monotone"),r=m("./lib/triangulation"),n=m("./lib/delaunay"),a=m("./lib/filter");function t(i){return[Math.min(i[0],i[1]),Math.max(i[0],i[1])]}function p(i,c){return i[0]-c[0]||i[1]-c[1]}function u(i,c,f){return c in i?i[c]:f}w.exports=function(i,c,f){Array.isArray(c)?(f=f||{},c=c||[]):(f=c||{},c=[]);var l=!!u(f,"delaunay",!0),h=!!u(f,"interior",!0),d=!!u(f,"exterior",!0),o=!!u(f,"infinity",!1);if(!h&&!d||0===i.length)return[];var _=e(i,c);if(l||h!==d||o){for(var s=r(i.length,c.map(t).sort(p)),k=0;k<_.length;++k){var M=_[k];s.addTriangle(M[0],M[1],M[2])}return l&&n(i,s),d?h?o?a(s,0,o):s.cells():a(s,1,o):a(s,-1)}return _}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(m,w,y){"use strict";var e=m("robust-in-sphere")[4];function r(n,a,t,p,u,i){var c=a.opposite(p,u);if(!(c<0)){if(u<p){var f=p;p=u,u=f,f=i,i=c,c=f}a.isConstraint(p,u)||e(n[p],n[u],n[i],n[c])<0&&t.push(p,u)}}m("binary-search-bounds"),w.exports=function(n,a){for(var t=[],p=n.length,u=a.stars,i=0;i<p;++i)for(var c=u[i],f=1;f<c.length;f+=2)if(!((o=c[f])<i||a.isConstraint(i,o))){for(var l=c[f-1],h=-1,d=1;d<c.length;d+=2)if(c[d-1]===o){h=c[d];break}h<0||e(n[i],n[o],n[l],n[h])<0&&t.push(i,o)}for(;t.length>0;){for(var o=t.pop(),_=(l=-1,h=-1,c=u[i=t.pop()],1);_<c.length;_+=2){var s=c[_-1],k=c[_];s===o?h=k:k===o&&(l=s)}l<0||h<0||e(n[i],n[o],n[l],n[h])>=0||(a.flip(i,o),r(n,a,t,l,i,h),r(n,a,t,i,h,l),r(n,a,t,h,o,l),r(n,a,t,o,l,h))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(m,w,y){"use strict";var e,r=m("binary-search-bounds");function n(t,p,u,i,c,f,l){this.cells=t,this.neighbor=p,this.flags=i,this.constraint=u,this.active=c,this.next=f,this.boundary=l}function a(t,p){return t[0]-p[0]||t[1]-p[1]||t[2]-p[2]}w.exports=function(t,p,u){var i=function(I,C){for(var R=I.cells(),O=R.length,D=0;D<O;++D){var L=(H=R[D])[0],B=H[1],j=H[2];B<j?B<L&&(H[0]=B,H[1]=j,H[2]=L):j<L&&(H[0]=j,H[1]=L,H[2]=B)}R.sort(a);var W=new Array(O);for(D=0;D<W.length;++D)W[D]=0;var Y=[],Q=[],ne=new Array(3*O),X=new Array(3*O),$=null;C&&($=[]);var re=new n(R,ne,X,W,Y,Q,$);for(D=0;D<O;++D)for(var H=R[D],U=0;U<3;++U){var G=ne[3*D+U]=re.locate(B=H[(U+1)%3],L=H[U],I.opposite(B,L)),ie=X[3*D+U]=I.isConstraint(L,B);G<0&&(ie?Q.push(D):(Y.push(D),W[D]=1),C&&$.push([B,L,-1]))}return re}(t,u);if(0===p)return u?i.cells.concat(i.boundary):i.cells;for(var c=1,f=i.active,l=i.next,h=i.flags,d=i.cells,o=i.constraint,_=i.neighbor;f.length>0||l.length>0;){for(;f.length>0;){var s=f.pop();if(h[s]!==-c){h[s]=c;for(var k=0;k<3;++k){var M=_[3*s+k];M>=0&&0===h[M]&&(o[3*s+k]?l.push(M):(f.push(M),h[M]=c))}}}var A=l;l=f,f=A,l.length=0,c=-c}var E=function(I,C,R){for(var O=0,D=0;D<I.length;++D)C[D]===R&&(I[O++]=I[D]);return I.length=O,I}(d,h,p);return u?E.concat(i.boundary):E},n.prototype.locate=(e=[0,0,0],function(t,p,u){var i=t,c=p,f=u;return p<u?p<t&&(i=p,c=u,f=t):u<t&&(i=u,c=t,f=p),i<0?-1:(e[0]=i,e[1]=c,e[2]=f,r.eq(this.cells,e,a))})},{"binary-search-bounds":31}],45:[function(m,w,y){"use strict";var e=m("binary-search-bounds"),r=m("robust-orientation")[3];function n(l,h,d,o,_){this.a=l,this.b=h,this.idx=d,this.lowerIds=o,this.upperIds=_}function a(l,h,d,o){this.a=l,this.b=h,this.type=d,this.idx=o}function t(l,h){var d=l.a[0]-h.a[0]||l.a[1]-h.a[1]||l.type-h.type;return d||(0!==l.type&&(d=r(l.a,l.b,h.b))?d:l.idx-h.idx)}function p(l,h){return r(l.a,l.b,h)}function u(l,h,d,o,_){for(var s=e.lt(h,o,p),k=e.gt(h,o,p),M=s;M<k;++M){for(var A=h[M],E=A.lowerIds,I=E.length;I>1&&r(d[E[I-2]],d[E[I-1]],o)>0;)l.push([E[I-1],E[I-2],_]),I-=1;E.length=I,E.push(_);var C=A.upperIds;for(I=C.length;I>1&&r(d[C[I-2]],d[C[I-1]],o)<0;)l.push([C[I-2],C[I-1],_]),I-=1;C.length=I,C.push(_)}}function i(l,h){var d;return(d=l.a[0]<h.a[0]?r(l.a,l.b,h.a):r(h.b,h.a,l.a))?d:(d=h.b[0]<l.b[0]?r(l.a,l.b,h.b):r(h.b,h.a,l.b))||l.idx-h.idx}function c(l,h,d){var o=e.le(l,d,i),_=l[o],s=_.upperIds,k=s[s.length-1];_.upperIds=[k],l.splice(o+1,0,new n(d.a,d.b,d.idx,[k],s))}function f(l,h,d){var o=d.a;d.a=d.b,d.b=o;var _=e.eq(l,d,i);l[_-1].upperIds=l[_].upperIds,l.splice(_,1)}w.exports=function(l,h){for(var d=l.length,o=h.length,_=[],s=0;s<d;++s)_.push(new a(l[s],null,0,s));for(s=0;s<o;++s){var k=h[s],M=l[k[0]],A=l[k[1]];M[0]<A[0]?_.push(new a(M,A,2,s),new a(A,M,1,s)):M[0]>A[0]&&_.push(new a(A,M,2,s),new a(M,A,1,s))}_.sort(t);for(var E=_[0].a[0]-(1+Math.abs(_[0].a[0]))*Math.pow(2,-52),I=[new n([E,1],[E,0],-1,[],[],[],[])],C=[],R=(s=0,_.length);s<R;++s){var O=_[s],D=O.type;0===D?u(C,I,l,O.a,O.idx):2===D?c(I,0,O):f(I,0,O)}return C}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(m,w,y){"use strict";var e=m("binary-search-bounds");function r(t,p){this.stars=t,this.edges=p}w.exports=function(t,p){for(var u=new Array(t),i=0;i<t;++i)u[i]=[];return new r(u,p)};var n=r.prototype;function a(t,p,u){for(var i=1,c=t.length;i<c;i+=2)if(t[i-1]===p&&t[i]===u)return t[i-1]=t[c-2],t[i]=t[c-1],void(t.length=c-2)}n.isConstraint=function(){var t=[0,0];function p(u,i){return u[0]-i[0]||u[1]-i[1]}return function(u,i){return t[0]=Math.min(u,i),t[1]=Math.max(u,i),e.eq(this.edges,t,p)>=0}}(),n.removeTriangle=function(t,p,u){var i=this.stars;a(i[t],p,u),a(i[p],u,t),a(i[u],t,p)},n.addTriangle=function(t,p,u){var i=this.stars;i[t].push(p,u),i[p].push(u,t),i[u].push(t,p)},n.opposite=function(t,p){for(var u=this.stars[p],i=1,c=u.length;i<c;i+=2)if(u[i]===t)return u[i-1];return-1},n.flip=function(t,p){var u=this.opposite(t,p),i=this.opposite(p,t);this.removeTriangle(t,p,u),this.removeTriangle(p,t,i),this.addTriangle(t,i,u),this.addTriangle(p,u,i)},n.edges=function(){for(var t=this.stars,p=[],u=0,i=t.length;u<i;++u)for(var c=t[u],f=0,l=c.length;f<l;f+=2)p.push([c[f],c[f+1]]);return p},n.cells=function(){for(var t=this.stars,p=[],u=0,i=t.length;u<i;++u)for(var c=t[u],f=0,l=c.length;f<l;f+=2){var h=c[f],d=c[f+1];u<Math.min(h,d)&&p.push([u,h,d])}return p}},{"binary-search-bounds":31}],47:[function(m,w,y){"use strict";w.exports=function(e){for(var r=1,n=1;n<e.length;++n)for(var a=0;a<n;++a)if(e[n]<e[a])r=-r;else if(e[a]===e[n])return 0;return r}},{}],48:[function(m,w,y){"use strict";var e=m("dup"),r=m("robust-linear-solve");function n(p,u){for(var i=0,c=p.length,f=0;f<c;++f)i+=p[f]*u[f];return i}function a(p){var u=p.length;if(0===u)return[];var i=e([p.length+1,p.length+1],1),c=e([p.length+1],1);i[u][u]=0;for(var f=0;f<u;++f){for(var l=0;l<=f;++l)i[l][f]=i[f][l]=2*n(p[f],p[l]);c[f]=n(p[f],p[f])}var h=r(i,c),d=0,o=h[u+1];for(f=0;f<o.length;++f)d+=o[f];var _=new Array(u);for(f=0;f<u;++f){o=h[f];var s=0;for(l=0;l<o.length;++l)s+=o[l];_[f]=s/d}return _}function t(p){if(0===p.length)return[];for(var u=p[0].length,i=e([u]),c=a(p),f=0;f<p.length;++f)for(var l=0;l<u;++l)i[l]+=p[f][l]*c[f];return i}t.barycenetric=a,w.exports=t},{dup:65,"robust-linear-solve":283}],49:[function(m,w,y){w.exports=function(r){for(var n=e(r),a=0,t=0;t<r.length;++t)for(var p=r[t],u=0;u<n.length;++u)a+=Math.pow(p[u]-n[u],2);return Math.sqrt(a/r.length)};var e=m("circumcenter")},{circumcenter:48}],50:[function(m,w,y){"use strict";w.exports=function(k,M,A){var E,D,B,j;if(A){E=M;for(var I=new Array(M.length),C=0;C<M.length;++C){var R=M[C];I[C]=[R[0],R[1],A[C]]}M=I}for(var O=(B=!!A,void 0,_(M,j=h(D=k,[],l(D)),B),!!j);s(k,M,!!A);)O=!0;if(A&&O)for(E.length=0,A.length=0,C=0;C<M.length;++C)E.push([(R=M[C])[0],R[1]]),A.push(R[2]);return O};var e=m("union-find"),r=m("box-intersect"),n=m("robust-segment-intersect"),a=m("big-rat"),t=m("big-rat/cmp"),p=m("big-rat/to-float"),u=m("rat-vec"),i=m("nextafter"),c=m("./lib/rat-seg-intersect");function f(k){var M=p(k);return[i(M,-1/0),i(M,1/0)]}function l(k){for(var M=new Array(k.length),A=0;A<k.length;++A){var E=k[A];M[A]=[i(E[0],-1/0),i(E[1],-1/0),i(E[0],1/0),i(E[1],1/0)]}return M}function h(k,M,A){for(var E=M.length,I=new e(E),C=[],R=0;R<M.length;++R){var O=M[R],D=f(O[0]),L=f(O[1]);C.push([i(D[0],-1/0),i(L[0],-1/0),i(D[1],1/0),i(L[1],1/0)])}r(C,function(Q,ne){I.link(Q,ne)});var B=!0,j=new Array(E);for(R=0;R<E;++R)(Y=I.find(R))!==R&&(B=!1,k[Y]=[Math.min(k[R][0],k[Y][0]),Math.min(k[R][1],k[Y][1])]);if(B)return null;var W=0;for(R=0;R<E;++R){var Y;(Y=I.find(R))===R?(j[R]=W,k[W++]=k[R]):j[R]=-1}for(k.length=W,R=0;R<E;++R)j[R]<0&&(j[R]=j[I.find(R)]);return j}function d(k,M){return k[0]-M[0]||k[1]-M[1]}function o(k,M){return k[0]-M[0]||k[1]-M[1]||(k[2]<M[2]?-1:k[2]>M[2]?1:0)}function _(k,M,A){if(0!==k.length){if(M)for(var E=0;E<k.length;++E){var I=M[(R=k[E])[0]],C=M[R[1]];R[0]=Math.min(I,C),R[1]=Math.max(I,C)}else for(E=0;E<k.length;++E){var R;I=(R=k[E])[0],C=R[1],R[0]=Math.min(I,C),R[1]=Math.max(I,C)}k.sort(A?o:d);var O=1;for(E=1;E<k.length;++E){var D=k[E-1],L=k[E];(L[0]!==D[0]||L[1]!==D[1]||A&&L[2]!==D[2])&&(k[O++]=L)}k.length=O}}function s(k,M,A){var D,L,j,E=function(D,L){for(var B=new Array(L.length),j=0;j<L.length;++j){var W=L[j],Y=D[W[0]],Q=D[W[1]];B[j]=[i(Math.min(Y[0],Q[0]),-1/0),i(Math.min(Y[1],Q[1]),-1/0),i(Math.max(Y[0],Q[0]),1/0),i(Math.max(Y[1],Q[1]),1/0)]}return B}(k,M),I=(D=k,L=M,j=[],r(E,function(W,Y){var Q=L[W],ne=L[Y];Q[0]!==ne[0]&&Q[0]!==ne[1]&&Q[1]!==ne[0]&&Q[1]!==ne[1]&&n(D[Q[0]],D[Q[1]],D[ne[0]],D[ne[1]])&&j.push([W,Y])}),j),R=function(D,L,B,j){var W=[];return r(B,j,function(Y,Q){var ne=L[Y];if(ne[0]!==Q&&ne[1]!==Q){var X=D[Q];n(D[ne[0]],D[ne[1]],X,X)&&W.push([Y,Q])}}),W}(k,M,E,l(k)),O=h(k,function(D,L,B,j,W){var Y,Q,ne=D.map(function(_e){return[a(_e[0]),a(_e[1])]});for(Y=0;Y<B.length;++Y){var X=B[Y],$=X[1],re=L[Q=X[0]],H=L[$],U=c(u(D[re[0]]),u(D[re[1]]),u(D[H[0]]),u(D[H[1]]));if(U){var G=D.length;D.push([p(U[0]),p(U[1])]),ne.push(U),j.push([Q,G],[$,G])}}for(j.sort(function(_e,Ce){if(_e[0]!==Ce[0])return _e[0]-Ce[0];var Le=ne[_e[1]],Ie=ne[Ce[1]];return t(Le[0],Ie[0])||t(Le[1],Ie[1])}),Y=j.length-1;Y>=0;--Y){var ie=L[Q=(xe=j[Y])[0]],q=ie[0],ee=ie[1],te=D[q],se=D[ee];if((te[0]-se[0]||te[1]-se[1])<0){var ue=q;q=ee,ee=ue}ie[0]=q;var de,he=ie[1]=xe[1];for(W&&(de=ie[2]);Y>0&&j[Y-1][0]===Q;){var xe,ge=(xe=j[--Y])[1];L.push(W?[he,ge,de]:[he,ge]),he=ge}L.push(W?[he,ee,de]:[he,ee])}return ne}(k,M,I,R,A));return _(M,O,A),!!O||I.length>0||R.length>0}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(m,w,y){"use strict";w.exports=function(c,f,l,h){var d=t(f,c),o=t(h,l),_=i(d,o);if(0===a(_))return null;var k=i(o,t(c,l)),M=r(k,_),A=u(d,M);return p(c,A)};var e=m("big-rat/mul"),r=m("big-rat/div"),n=m("big-rat/sub"),a=m("big-rat/sign"),t=m("rat-vec/sub"),p=m("rat-vec/add"),u=m("rat-vec/muls");function i(c,f){return n(e(c[0],f[1]),e(c[1],f[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(m,w,y){w.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(m,w,y){"use strict";var e=m("./colorScale"),r=m("lerp");function n(p){return[p[0]/255,p[1]/255,p[2]/255,p[3]]}function a(p){for(var u,i="#",c=0;c<3;++c)i+=("00"+(u=(u=p[c]).toString(16))).substr(u.length);return i}function t(p){return"rgba("+p.join(",")+")"}w.exports=function(p){var u,i,c,f,l,h,d,o,_,s;if(p||(p={}),o=(p.nshades||72)-1,d=p.format||"hex",(h=p.colormap)||(h="jet"),"string"==typeof h){if(h=h.toLowerCase(),!e[h])throw Error(h+" not a supported colorscale");l=e[h]}else{if(!Array.isArray(h))throw Error("unsupported colormap option",h);l=h.slice()}if(l.length>o+1)throw new Error(h+" map requires nshades to be at least size "+l.length);_=Array.isArray(p.alpha)?2!==p.alpha.length?[1,1]:p.alpha.slice():"number"==typeof p.alpha?[p.alpha,p.alpha]:[1,1],u=l.map(function(I){return Math.round(I.index*o)}),_[0]=Math.min(Math.max(_[0],0),1),_[1]=Math.min(Math.max(_[1],0),1);var k=l.map(function(I,C){var R=l[C].index,O=l[C].rgb.slice();return 4===O.length&&O[3]>=0&&O[3]<=1||(O[3]=_[0]+(_[1]-_[0])*R),O}),M=[];for(s=0;s<u.length-1;++s){f=u[s+1]-u[s],i=k[s],c=k[s+1];for(var A=0;A<f;A++){var E=A/f;M.push([Math.round(r(i[0],c[0],E)),Math.round(r(i[1],c[1],E)),Math.round(r(i[2],c[2],E)),r(i[3],c[3],E)])}}return M.push(l[l.length-1].rgb.concat(_[1])),"hex"===d?M=M.map(a):"rgbaString"===d?M=M.map(t):"float"===d&&(M=M.map(n)),M}},{"./colorScale":52,lerp:240}],54:[function(m,w,y){"use strict";w.exports=function(u,i,c,f){var l=e(i,c,f);if(0===l){var h=r(e(u,i,c)),d=r(e(u,i,f));if(h===d){if(0===h){var o=p(u,i,c);return o===p(u,i,f)?0:o?1:-1}return 0}return 0===d?h>0||p(u,i,f)?-1:1:0===h?d>0||p(u,i,c)?1:-1:r(d-h)}var s=e(u,i,c);return s>0?l>0&&e(u,i,f)>0?1:-1:s<0?l>0||e(u,i,f)>0?1:-1:e(u,i,f)>0||p(u,i,c)?1:-1};var e=m("robust-orientation"),r=m("signum"),n=m("two-sum"),a=m("robust-product"),t=m("robust-sum");function p(u,i,c){var f=n(u[0],-i[0]),l=n(u[1],-i[1]),h=n(c[0],-i[0]),d=n(c[1],-i[1]),o=t(a(f,h),a(l,d));return o[o.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(m,w,y){"use strict";w.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(m,w,y){w.exports=function(n,a){var t=n.length,p=n.length-a.length;if(p)return p;switch(t){case 0:return 0;case 1:return n[0]-a[0];case 2:return n[0]+n[1]-a[0]-a[1]||e(n[0],n[1])-e(a[0],a[1]);case 3:var u=n[0]+n[1],i=a[0]+a[1];if(p=u+n[2]-(i+a[2]))return p;var c=e(n[0],n[1]),f=e(a[0],a[1]);return e(c,n[2])-e(f,a[2])||e(c+n[2],u)-e(f+a[2],i);case 4:var l=n[0],h=n[1],d=n[2],o=n[3],_=a[0],s=a[1],k=a[2],M=a[3];return l+h+d+o-(_+s+k+M)||e(l,h,d,o)-e(_,s,k,M,_)||e(l+h,l+d,l+o,h+d,h+o,d+o)-e(_+s,_+k,_+M,s+k,s+M,k+M)||e(l+h+d,l+h+o,l+d+o,h+d+o)-e(_+s+k,_+s+M,_+k+M,s+k+M);default:for(var A=n.slice().sort(r),E=a.slice().sort(r),I=0;I<t;++I)if(p=A[I]-E[I])return p;return 0}};var e=Math.min;function r(n,a){return n-a}},{}],57:[function(m,w,y){"use strict";var e=m("compare-cell"),r=m("cell-orientation");w.exports=function(n,a){return e(n,a)||r(n)-r(a)}},{"cell-orientation":47,"compare-cell":56}],58:[function(m,w,y){"use strict";var e=m("./lib/ch1d"),r=m("./lib/ch2d"),n=m("./lib/chnd");w.exports=function(a){var t=a.length;if(0===t)return[];if(1===t)return[[0]];var p=a[0].length;return 0===p?[]:1===p?e(a):2===p?r(a):n(a,p)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(m,w,y){"use strict";w.exports=function(e){for(var r=0,n=0,a=1;a<e.length;++a)e[a][0]<e[r][0]&&(r=a),e[a][0]>e[n][0]&&(n=a);return r<n?[[r],[n]]:r>n?[[n],[r]]:[[r]]}},{}],60:[function(m,w,y){"use strict";w.exports=function(r){var n=e(r),a=n.length;if(a<=2)return[];for(var t=new Array(a),p=n[a-1],u=0;u<a;++u){var i=n[u];t[u]=[p,i],p=i}return t};var e=m("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(m,w,y){"use strict";w.exports=function(n,a){try{return e(n,!0)}catch(u){var t=r(n);if(t.length<=a)return[];var p=function(i,c){for(var f=i.length,l=new Array(f),h=0;h<c.length;++h)l[h]=i[c[h]];var d=c.length;for(h=0;h<f;++h)c.indexOf(h)<0&&(l[d++]=i[h]);return l}(n,t);return function(i,c){for(var f=i.length,l=c.length,h=0;h<f;++h)for(var d=i[h],o=0;o<d.length;++o){var _=d[o];if(_<l)d[o]=c[_];else{_-=l;for(var s=0;s<l;++s)_>=c[s]&&(_+=1);d[o]=_}}return i}(e(p,!0),t)}};var e=m("incremental-convex-hull"),r=m("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(m,w,y){"use strict";w.exports=function(e,r,n,a,t,p){var u=t-1,i=t*t,c=u*u,f=(1+2*t)*c,l=t*c,h=i*(3-2*t),d=i*u;if(e.length){p||(p=new Array(e.length));for(var o=e.length-1;o>=0;--o)p[o]=f*e[o]+l*r[o]+h*n[o]+d*a[o];return p}return f*e+l*r+h*n+d*a},w.exports.derivative=function(e,r,n,a,t,p){var u=6*t*t-6*t,i=3*t*t-4*t+1,c=-6*t*t+6*t,f=3*t*t-2*t;if(e.length){p||(p=new Array(e.length));for(var l=e.length-1;l>=0;--l)p[l]=u*e[l]+i*r[l]+c*n[l]+f*a[l];return p}return u*e+i*r+c*n[l]+f*a}},{}],63:[function(m,w,y){"use strict";var e=m("incremental-convex-hull"),r=m("uniq");function n(t,p){this.point=t,this.index=p}function a(t,p){for(var u=t.point,i=p.point,c=u.length,f=0;f<c;++f){var l=i[f]-u[f];if(l)return l}return 0}w.exports=function(t,p){var u=t.length;if(0===u)return[];var i=t[0].length;if(i<1)return[];if(1===i)return function(R,O,D){if(1===R)return D?[[-1,0]]:[];var L=O.map(function(Q,ne){return[Q[0],ne]});L.sort(function(Q,ne){return Q[0]-ne[0]});for(var B=new Array(R-1),j=1;j<R;++j)B[j-1]=[L[j-1][1],L[j][1]];return D&&B.push([-1,B[0][1]],[B[R-1][1],-1]),B}(u,t,p);for(var c=new Array(u),f=1,l=0;l<u;++l){for(var h=t[l],d=new Array(i+1),o=0,_=0;_<i;++_){var s=h[_];d[_]=s,o+=s*s}d[i]=o,c[l]=new n(d,l),f=Math.max(o,f)}r(c,a),u=c.length;var k=new Array(u+i+1),M=new Array(u+i+1),A=(i+1)*(i+1)*f,E=new Array(i+1);for(l=0;l<=i;++l)E[l]=0;for(E[i]=A,k[0]=E.slice(),M[0]=-1,l=0;l<=i;++l)(d=E.slice())[l]=1,k[l+1]=d,M[l+1]=-1;for(l=0;l<u;++l){var I=c[l];k[l+i+1]=I.point,M[l+i+1]=I.index}var C=e(k,!1);if(C=C.filter(p?function(R){for(var O=0,D=0;D<=i;++D){var L=M[R[D]];if(L<0&&++O>=2)return!1;R[D]=L}return!0}:function(R){for(var O=0;O<=i;++O){var D=M[R[O]];if(D<0)return!1;R[O]=D}return!0}),1&i)for(l=0;l<C.length;++l)d=(I=C[l])[0],I[0]=I[1],I[1]=d;return C}},{"incremental-convex-hull":233,uniq:310}],64:[function(m,w,y){(function(e){(function(){var r=!1;if("undefined"!=typeof Float64Array){var n=new Float64Array(1),a=new Uint32Array(n.buffer);n[0]=1,r=!0,1072693248===a[1]?(w.exports=function(p){return n[0]=p,[a[0],a[1]]},w.exports.pack=function(p,u){return a[0]=p,a[1]=u,n[0]},w.exports.lo=function(p){return n[0]=p,a[0]},w.exports.hi=function(p){return n[0]=p,a[1]}):1072693248===a[0]?(w.exports=function(p){return n[0]=p,[a[1],a[0]]},w.exports.pack=function(p,u){return a[1]=p,a[0]=u,n[0]},w.exports.lo=function(p){return n[0]=p,a[1]},w.exports.hi=function(p){return n[0]=p,a[0]}):r=!1}if(!r){var t=new e(8);w.exports=function(p){return t.writeDoubleLE(p,0,!0),[t.readUInt32LE(0,!0),t.readUInt32LE(4,!0)]},w.exports.pack=function(p,u){return t.writeUInt32LE(p,0,!0),t.writeUInt32LE(u,4,!0),t.readDoubleLE(0,!0)},w.exports.lo=function(p){return t.writeDoubleLE(p,0,!0),t.readUInt32LE(0,!0)},w.exports.hi=function(p){return t.writeDoubleLE(p,0,!0),t.readUInt32LE(4,!0)}}w.exports.sign=function(p){return w.exports.hi(p)>>>31},w.exports.exponent=function(p){return(w.exports.hi(p)<<1>>>21)-1023},w.exports.fraction=function(p){var u=w.exports.lo(p),i=w.exports.hi(p),c=1048575&i;return 2146435072&i&&(c+=1<<20),[u,c]},w.exports.denormalized=function(p){return!(2146435072&w.exports.hi(p))}}).call(this)}).call(this,m("buffer").Buffer)},{buffer:3}],65:[function(m,w,y){"use strict";w.exports=function(e,r){switch(void 0===r&&(r=0),typeof e){case"number":if(e>0)return function(n,a){var t,p;for(t=new Array(n),p=0;p<n;++p)t[p]=a;return t}(0|e,r);break;case"object":if("number"==typeof e.length)return function n(a,t,p){var u=0|a[p];if(u<=0)return[];var i,c=new Array(u);if(p===a.length-1)for(i=0;i<u;++i)c[i]=t;else for(i=0;i<u;++i)c[i]=n(a,t,p+1);return c}(e,r,0)}return[]}},{}],66:[function(m,w,y){"use strict";w.exports=function(r,n){var a=r.length;if("number"!=typeof n){n=0;for(var t=0;t<a;++t){var p=r[t];n=Math.max(n,p[0],p[1])}n=1+(0|n)}n|=0;var u=new Array(n);for(t=0;t<n;++t)u[t]=[];for(t=0;t<a;++t)u[(p=r[t])[0]].push(p[1]),u[p[1]].push(p[0]);for(var i=0;i<n;++i)e(u[i],function(c,f){return c-f});return u};var e=m("uniq")},{uniq:310}],67:[function(m,w,y){"use strict";w.exports=function(e,r,n){var a=r||0,t=n||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[a*e[12]+e[8],a*e[13]+e[9],a*e[14]+e[10],a*e[15]+e[11]],[t*e[12]-e[8],t*e[13]-e[9],t*e[14]-e[10],t*e[15]-e[11]]]}},{}],68:[function(m,w,y){"use strict";w.exports=function(u,i,c){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return"number"==typeof u?new a(f=p(u),f,0):new a(u,p(u.length),0);case 2:if("number"==typeof i){var f=p(u.length);return new a(u,f,+i)}c=0;case 3:if(u.length!==i.length)throw new Error("state and velocity lengths must match");return new a(u,i,c)}};var e=m("cubic-hermite"),r=m("binary-search-bounds");function n(u,i,c){return Math.min(i,Math.max(u,c))}function a(u,i,c){this.dimension=u.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var f=0;f<this.dimension;++f)this.bounds[0][f]=-1/0,this.bounds[1][f]=1/0;this._state=u.slice().reverse(),this._velocity=i.slice().reverse(),this._time=[c],this._scratch=[u.slice(),u.slice(),u.slice(),u.slice(),u.slice()]}var t=a.prototype;function p(u){for(var i=new Array(u),c=0;c<u;++c)i[c]=0;return i}t.flush=function(u){var i=r.gt(this._time,u)-1;i<=0||(this._time.splice(0,i),this._state.splice(0,i*this.dimension),this._velocity.splice(0,i*this.dimension))},t.curve=function(u){var i=this._time,c=i.length,f=r.le(i,u),l=this._scratch[0],h=this._state,d=this._velocity,o=this.dimension,_=this.bounds;if(f<0)for(var s=o-1,k=0;k<o;++k,--s)l[k]=h[s];else if(f>=c-1){s=h.length-1;var M=u-i[c-1];for(k=0;k<o;++k,--s)l[k]=h[s]+M*d[s]}else{s=o*(f+1)-1;var A=i[f],E=i[f+1]-A||1,I=this._scratch[1],C=this._scratch[2],R=this._scratch[3],O=this._scratch[4],D=!0;for(k=0;k<o;++k,--s)I[k]=h[s],R[k]=d[s]*E,C[k]=h[s+o],O[k]=d[s+o]*E,D=D&&I[k]===C[k]&&R[k]===O[k]&&0===R[k];if(D)for(k=0;k<o;++k)l[k]=I[k];else e(I,R,C,O,(u-A)/E,l)}var L=_[0],B=_[1];for(k=0;k<o;++k)l[k]=n(L[k],B[k],l[k]);return l},t.dcurve=function(u){var i=this._time,c=i.length,f=r.le(i,u),l=this._scratch[0],h=this._state,d=this._velocity,o=this.dimension;if(f>=c-1)for(var _=h.length-1,s=0;s<o;++s,--_)l[s]=d[_];else{_=o*(f+1)-1;var k=i[f],M=i[f+1]-k||1,A=this._scratch[1],E=this._scratch[2],I=this._scratch[3],C=this._scratch[4],R=!0;for(s=0;s<o;++s,--_)A[s]=h[_],I[s]=d[_]*M,E[s]=h[_+o],C[s]=d[_+o]*M,R=R&&A[s]===E[s]&&I[s]===C[s]&&0===I[s];if(R)for(s=0;s<o;++s)l[s]=0;else for(e.derivative(A,I,E,C,(u-k)/M,l),s=0;s<o;++s)l[s]/=M}return l},t.lastT=function(){var u=this._time;return u[u.length-1]},t.stable=function(){for(var u=this._velocity,i=u.length,c=this.dimension-1;c>=0;--c)if(u[--i])return!1;return!0},t.jump=function(u){var i=this.lastT(),c=this.dimension;if(!(u<i||arguments.length!==c+1)){var f=this._state,l=this._velocity,h=f.length-this.dimension,d=this.bounds,o=d[0],_=d[1];this._time.push(i,u);for(var s=0;s<2;++s)for(var k=0;k<c;++k)f.push(f[h++]),l.push(0);for(this._time.push(u),k=c;k>0;--k)f.push(n(o[k-1],_[k-1],arguments[k])),l.push(0)}},t.push=function(u){var i=this.lastT(),c=this.dimension;if(!(u<i||arguments.length!==c+1)){var f=this._state,l=this._velocity,h=f.length-this.dimension,d=u-i,o=this.bounds,_=o[0],s=o[1],k=d>1e-6?1/d:0;this._time.push(u);for(var M=c;M>0;--M){var A=n(_[M-1],s[M-1],arguments[M]);f.push(A),l.push((A-f[h++])*k)}}},t.set=function(u){var i=this.dimension;if(!(u<this.lastT()||arguments.length!==i+1)){var c=this._state,f=this._velocity,l=this.bounds,h=l[0],d=l[1];this._time.push(u);for(var o=i;o>0;--o)c.push(n(h[o-1],d[o-1],arguments[o])),f.push(0)}},t.move=function(u){var i=this.lastT(),c=this.dimension;if(!(u<=i||arguments.length!==c+1)){var f=this._state,l=this._velocity,h=f.length-this.dimension,d=this.bounds,o=d[0],_=d[1],s=u-i,k=s>1e-6?1/s:0;this._time.push(u);for(var M=c;M>0;--M){var A=arguments[M];f.push(n(o[M-1],_[M-1],f[h++]+A)),l.push(A*k)}}},t.idle=function(u){var i=this.lastT();if(!(u<i)){var c=this.dimension,f=this._state,l=this._velocity,h=f.length-c,d=this.bounds,o=d[0],_=d[1],s=u-i;this._time.push(u);for(var k=c-1;k>=0;--k)f.push(n(o[k],_[k],f[h]+s*l[h])),l.push(0),h+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(m,w,y){"use strict";function e(o,_,s,k,M,A){this._color=o,this.key=_,this.value=s,this.left=k,this.right=M,this._count=A}function r(o){return new e(o._color,o.key,o.value,o.left,o.right,o._count)}function n(o,_){return new e(o,_.key,_.value,_.left,_.right,_._count)}function a(o){o._count=1+(o.left?o.left._count:0)+(o.right?o.right._count:0)}function t(o,_){this._compare=o,this.root=_}w.exports=function(o){return new t(o||d,null)};var p=t.prototype;function u(o,_){var s;return _.left&&(s=u(o,_.left))?s:(s=o(_.key,_.value))||(_.right?u(o,_.right):void 0)}function i(o,_,s,k){var M;return _(o,k.key)<=0&&(k.left&&(M=i(o,_,s,k.left))||(M=s(k.key,k.value)))?M:k.right?i(o,_,s,k.right):void 0}function c(o,_,s,k,M){var A,E=s(o,M.key),I=s(_,M.key);return E<=0&&(M.left&&(A=c(o,_,s,k,M.left))||I>0&&(A=k(M.key,M.value)))?A:I>0&&M.right?c(o,_,s,k,M.right):void 0}function f(o,_){this.tree=o,this._stack=_}Object.defineProperty(p,"keys",{get:function(){var o=[];return this.forEach(function(_,s){o.push(_)}),o}}),Object.defineProperty(p,"values",{get:function(){var o=[];return this.forEach(function(_,s){o.push(s)}),o}}),Object.defineProperty(p,"length",{get:function(){return this.root?this.root._count:0}}),p.insert=function(o,_){for(var s=this._compare,k=this.root,M=[],A=[];k;){var E=s(o,k.key);M.push(k),A.push(E),k=E<=0?k.left:k.right}M.push(new e(0,o,_,null,null,1));for(var I=M.length-2;I>=0;--I)k=M[I],M[I]=A[I]<=0?new e(k._color,k.key,k.value,M[I+1],k.right,k._count+1):new e(k._color,k.key,k.value,k.left,M[I+1],k._count+1);for(I=M.length-1;I>1;--I){var C=M[I-1];if(k=M[I],1===C._color||1===k._color)break;var R=M[I-2];if(R.left===C)if(C.left===k){if(!(O=R.right)||0!==O._color){R._color=0,R.left=C.right,C._color=1,C.right=R,M[I-2]=C,M[I-1]=k,a(R),a(C),I>=3&&((D=M[I-3]).left===R?D.left=C:D.right=C);break}C._color=1,R.right=n(1,O),R._color=0,I-=1}else{if(!(O=R.right)||0!==O._color){C.right=k.left,R._color=0,R.left=k.right,k._color=1,k.left=C,k.right=R,M[I-2]=k,M[I-1]=C,a(R),a(C),a(k),I>=3&&((D=M[I-3]).left===R?D.left=k:D.right=k);break}C._color=1,R.right=n(1,O),R._color=0,I-=1}else if(C.right===k){if(!(O=R.left)||0!==O._color){R._color=0,R.right=C.left,C._color=1,C.left=R,M[I-2]=C,M[I-1]=k,a(R),a(C),I>=3&&((D=M[I-3]).right===R?D.right=C:D.left=C);break}C._color=1,R.left=n(1,O),R._color=0,I-=1}else{var O;if(!(O=R.left)||0!==O._color){var D;C.left=k.right,R._color=0,R.right=k.left,k._color=1,k.right=C,k.left=R,M[I-2]=k,M[I-1]=C,a(R),a(C),a(k),I>=3&&((D=M[I-3]).right===R?D.right=k:D.left=k);break}C._color=1,R.left=n(1,O),R._color=0,I-=1}}return M[0]._color=1,new t(s,M[0])},p.forEach=function(o,_,s){if(this.root)switch(arguments.length){case 1:return u(o,this.root);case 2:return i(_,this._compare,o,this.root);case 3:return this._compare(_,s)>=0?void 0:c(_,s,this._compare,o,this.root)}},Object.defineProperty(p,"begin",{get:function(){for(var o=[],_=this.root;_;)o.push(_),_=_.left;return new f(this,o)}}),Object.defineProperty(p,"end",{get:function(){for(var o=[],_=this.root;_;)o.push(_),_=_.right;return new f(this,o)}}),p.at=function(o){if(o<0)return new f(this,[]);for(var _=this.root,s=[];;){if(s.push(_),_.left){if(o<_.left._count){_=_.left;continue}o-=_.left._count}if(!o)return new f(this,s);if(o-=1,!_.right||o>=_.right._count)break;_=_.right}return new f(this,[])},p.ge=function(o){for(var _=this._compare,s=this.root,k=[],M=0;s;){var A=_(o,s.key);k.push(s),A<=0&&(M=k.length),s=A<=0?s.left:s.right}return k.length=M,new f(this,k)},p.gt=function(o){for(var _=this._compare,s=this.root,k=[],M=0;s;){var A=_(o,s.key);k.push(s),A<0&&(M=k.length),s=A<0?s.left:s.right}return k.length=M,new f(this,k)},p.lt=function(o){for(var _=this._compare,s=this.root,k=[],M=0;s;){var A=_(o,s.key);k.push(s),A>0&&(M=k.length),s=A<=0?s.left:s.right}return k.length=M,new f(this,k)},p.le=function(o){for(var _=this._compare,s=this.root,k=[],M=0;s;){var A=_(o,s.key);k.push(s),A>=0&&(M=k.length),s=A<0?s.left:s.right}return k.length=M,new f(this,k)},p.find=function(o){for(var _=this._compare,s=this.root,k=[];s;){var M=_(o,s.key);if(k.push(s),0===M)return new f(this,k);s=M<=0?s.left:s.right}return new f(this,[])},p.remove=function(o){var _=this.find(o);return _?_.remove():this},p.get=function(o){for(var _=this._compare,s=this.root;s;){var k=_(o,s.key);if(0===k)return s.value;s=k<=0?s.left:s.right}};var l=f.prototype;function h(o,_){o.key=_.key,o.value=_.value,o.left=_.left,o.right=_.right,o._color=_._color,o._count=_._count}function d(o,_){return o<_?-1:o>_?1:0}Object.defineProperty(l,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(l,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),l.clone=function(){return new f(this.tree,this._stack.slice())},l.remove=function(){var o=this._stack;if(0===o.length)return this.tree;var _=new Array(o.length),s=o[o.length-1];_[_.length-1]=new e(s._color,s.key,s.value,s.left,s.right,s._count);for(var k=o.length-2;k>=0;--k)_[k]=(s=o[k]).left===o[k+1]?new e(s._color,s.key,s.value,_[k+1],s.right,s._count):new e(s._color,s.key,s.value,s.left,_[k+1],s._count);if((s=_[_.length-1]).left&&s.right){var M=_.length;for(s=s.left;s.right;)_.push(s),s=s.right;var A=_[M-1];for(_.push(new e(s._color,A.key,A.value,s.left,s.right,s._count)),_[M-1].key=s.key,_[M-1].value=s.value,k=_.length-2;k>=M;--k)_[k]=new e((s=_[k])._color,s.key,s.value,s.left,_[k+1],s._count);_[M-1].left=_[M]}if(0===(s=_[_.length-1])._color){var E=_[_.length-2];for(E.left===s?E.left=null:E.right===s&&(E.right=null),_.pop(),k=0;k<_.length;++k)_[k]._count--;return new t(this.tree._compare,_[0])}if(s.left||s.right){for(s.left?h(s,s.left):s.right&&h(s,s.right),s._color=1,k=0;k<_.length-1;++k)_[k]._count--;return new t(this.tree._compare,_[0])}if(1===_.length)return new t(this.tree._compare,null);for(k=0;k<_.length;++k)_[k]._count--;var I=_[_.length-2];return function(C){for(var R,O,D,L,B=C.length-1;B>=0;--B){if(R=C[B],0===B)return void(R._color=1);if((O=C[B-1]).left===R){if((D=O.right).right&&0===D.right._color)return L=(D=O.right=r(D)).right=r(D.right),O.right=D.left,D.left=O,D.right=L,D._color=O._color,R._color=1,O._color=1,L._color=1,a(O),a(D),B>1&&((j=C[B-2]).left===O?j.left=D:j.right=D),void(C[B-1]=D);if(D.left&&0===D.left._color)return L=(D=O.right=r(D)).left=r(D.left),O.right=L.left,D.left=L.right,L.left=O,L.right=D,L._color=O._color,O._color=1,D._color=1,R._color=1,a(O),a(D),a(L),B>1&&((j=C[B-2]).left===O?j.left=L:j.right=L),void(C[B-1]=L);if(1===D._color){if(0===O._color)return O._color=1,void(O.right=n(0,D));O.right=n(0,D);continue}D=r(D),O.right=D.left,D.left=O,D._color=O._color,O._color=0,a(O),a(D),B>1&&((j=C[B-2]).left===O?j.left=D:j.right=D),C[B-1]=D,C[B]=O,B+1<C.length?C[B+1]=R:C.push(R),B+=2}else{if((D=O.left).left&&0===D.left._color)return L=(D=O.left=r(D)).left=r(D.left),O.left=D.right,D.right=O,D.left=L,D._color=O._color,R._color=1,O._color=1,L._color=1,a(O),a(D),B>1&&((j=C[B-2]).right===O?j.right=D:j.left=D),void(C[B-1]=D);if(D.right&&0===D.right._color)return L=(D=O.left=r(D)).right=r(D.right),O.left=L.right,D.right=L.left,L.right=O,L.left=D,L._color=O._color,O._color=1,D._color=1,R._color=1,a(O),a(D),a(L),B>1&&((j=C[B-2]).right===O?j.right=L:j.left=L),void(C[B-1]=L);if(1===D._color){if(0===O._color)return O._color=1,void(O.left=n(0,D));O.left=n(0,D);continue}var j;D=r(D),O.left=D.right,D.right=O,D._color=O._color,O._color=0,a(O),a(D),B>1&&((j=C[B-2]).right===O?j.right=D:j.left=D),C[B-1]=D,C[B]=O,B+1<C.length?C[B+1]=R:C.push(R),B+=2}}}(_),I.left===s?I.left=null:I.right=null,new t(this.tree._compare,_[0])},Object.defineProperty(l,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(l,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(l,"index",{get:function(){var o=0,_=this._stack;if(0===_.length){var s=this.tree.root;return s?s._count:0}_[_.length-1].left&&(o=_[_.length-1].left._count);for(var k=_.length-2;k>=0;--k)_[k+1]===_[k].right&&(++o,_[k].left&&(o+=_[k].left._count));return o},enumerable:!0}),l.next=function(){var o=this._stack;if(0!==o.length){var _=o[o.length-1];if(_.right)for(_=_.right;_;)o.push(_),_=_.left;else for(o.pop();o.length>0&&o[o.length-1].right===_;)_=o[o.length-1],o.pop()}},Object.defineProperty(l,"hasNext",{get:function(){var o=this._stack;if(0===o.length)return!1;if(o[o.length-1].right)return!0;for(var _=o.length-1;_>0;--_)if(o[_-1].left===o[_])return!0;return!1}}),l.update=function(o){var _=this._stack;if(0===_.length)throw new Error("Can't update empty node!");var s=new Array(_.length),k=_[_.length-1];s[s.length-1]=new e(k._color,k.key,o,k.left,k.right,k._count);for(var M=_.length-2;M>=0;--M)s[M]=(k=_[M]).left===_[M+1]?new e(k._color,k.key,k.value,s[M+1],k.right,k._count):new e(k._color,k.key,k.value,k.left,s[M+1],k._count);return new t(this.tree._compare,s[0])},l.prev=function(){var o=this._stack;if(0!==o.length){var _=o[o.length-1];if(_.left)for(_=_.left;_;)o.push(_),_=_.right;else for(o.pop();o.length>0&&o[o.length-1].left===_;)_=o[o.length-1],o.pop()}},Object.defineProperty(l,"hasPrev",{get:function(){var o=this._stack;if(0===o.length)return!1;if(o[o.length-1].left)return!0;for(var _=o.length-1;_>0;--_)if(o[_-1].right===o[_])return!0;return!1}})},{}],70:[function(m,w,y){"use strict";w.exports=function(M,A){var E=new i(M);return E.update(A),E};var e=m("./lib/text.js"),r=m("./lib/lines.js"),n=m("./lib/background.js"),a=m("./lib/cube.js"),t=m("./lib/ticks.js"),p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function u(M,A){return M[0]=A[0],M[1]=A[1],M[2]=A[2],M}function i(M){this.gl=M,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(M)}var c=i.prototype;function f(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}c.update=function(M){function A(Q,ne,X){if(X in M){var $,re=M[X],H=this[X];this[X]=$=(Q?Array.isArray(re)&&Array.isArray(re[0]):Array.isArray(re))?[ne(re[0]),ne(re[1]),ne(re[2])]:[ne(re),ne(re),ne(re)];for(var U=0;U<3;++U)if($[U]!==H[U])return!0}return!1}M=M||{};var E,I=A.bind(this,!1,Number),C=A.bind(this,!1,Boolean),R=A.bind(this,!1,String),O=A.bind(this,!0,function(Q){if(Array.isArray(Q)){if(3===Q.length)return[+Q[0],+Q[1],+Q[2],1];if(4===Q.length)return[+Q[0],+Q[1],+Q[2],+Q[3]]}return[0,0,0,1]}),D=!1,L=!1;if("bounds"in M)for(var B=M.bounds,j=0;j<2;++j)for(var W=0;W<3;++W)B[j][W]!==this.bounds[j][W]&&(L=!0),this.bounds[j][W]=B[j][W];if("ticks"in M)for(E=M.ticks,D=!0,this.autoTicks=!1,j=0;j<3;++j)this.tickSpacing[j]=0;else I("tickSpacing")&&(this.autoTicks=!0,L=!0);if(this._firstInit&&("ticks"in M||"tickSpacing"in M||(this.autoTicks=!0),L=!0,D=!0,this._firstInit=!1),L&&this.autoTicks&&(E=t.create(this.bounds,this.tickSpacing),D=!0),D){for(j=0;j<3;++j)E[j].sort(function(Q,ne){return Q.x-ne.x});t.equal(E,this.ticks)?D=!1:this.ticks=E}C("tickEnable"),R("tickFont")&&(D=!0),I("tickSize"),I("tickAngle"),I("tickPad"),O("tickColor");var Y=R("labels");R("labelFont")&&(Y=!0),C("labelEnable"),I("labelSize"),I("labelPad"),O("labelColor"),C("lineEnable"),C("lineMirror"),I("lineWidth"),O("lineColor"),C("lineTickEnable"),C("lineTickMirror"),I("lineTickLength"),I("lineTickWidth"),O("lineTickColor"),C("gridEnable"),I("gridWidth"),O("gridColor"),C("zeroEnable"),O("zeroLineColor"),I("zeroLineWidth"),C("backgroundEnable"),O("backgroundColor"),this._text?this._text&&(Y||D)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&D&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var l=[new f,new f,new f];function h(M,A,E,I,C){for(var R=M.primalOffset,O=M.primalMinor,D=M.mirrorOffset,L=M.mirrorMinor,B=I[A],j=0;j<3;++j)if(A!==j){var W=R,Y=D,Q=O,ne=L;B&1<<j&&(W=D,Y=R,Q=L,ne=O),W[j]=E[0][j],Y[j]=E[1][j],C[j]>0?(Q[j]=-1,ne[j]=0):(Q[j]=0,ne[j]=1)}}var d=[0,0,0],o={model:p,view:p,projection:p,_ortho:!1};c.isOpaque=function(){return!0},c.isTransparent=function(){return!1},c.drawTransparent=function(M){};var _=[0,0,0],s=[0,0,0],k=[0,0,0];c.draw=function(M){for(var A=this.gl,E=(M=M||o).model||p,I=M.view||p,C=M.projection||p,R=this.bounds,O=M._ortho||!1,D=a(E,I,C,R,O),L=D.cubeEdges,B=D.axis,ne=(O?2:1)*this.pixelRatio*(C[3]*I[12]+C[7]*I[13]+C[11]*I[14]+C[15]*I[15])/A.drawingBufferHeight,X=0;X<3;++X)this.lastCubeProps.cubeEdges[X]=L[X],this.lastCubeProps.axis[X]=B[X];var $=l;for(X=0;X<3;++X)h(l[X],X,this.bounds,L,B);A=this.gl;var re,de,he,Be,ve,Te,Pe,De,Fe,Ue,He,Ke,H=d;for(X=0;X<3;++X)H[X]=this.backgroundEnable[X]?B[X]:0;for(this._background.draw(E,I,C,R,H,this.backgroundColor),this._lines.bind(E,I,C,this),X=0;X<3;++X){var U=[0,0,0];U[X]=B[X]>0?R[1][X]:R[0][X];for(var G=0;G<2;++G){var ie=(X+1+G)%3,q=(X+1+(1^G))%3;this.gridEnable[ie]&&this._lines.drawGrid(ie,q,this.bounds,U,this.gridColor[ie],this.gridWidth[ie]*this.pixelRatio)}for(G=0;G<2;++G)ie=(X+1+G)%3,this.zeroEnable[q=(X+1+(1^G))%3]&&Math.min(R[0][q],R[1][q])<=0&&Math.max(R[0][q],R[1][q])>=0&&this._lines.drawZero(ie,q,this.bounds,U,this.zeroLineColor[q],this.zeroLineWidth[q]*this.pixelRatio)}for(X=0;X<3;++X){this.lineEnable[X]&&this._lines.drawAxisLine(X,this.bounds,$[X].primalOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio),this.lineMirror[X]&&this._lines.drawAxisLine(X,this.bounds,$[X].mirrorOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio);var ee=u(_,$[X].primalMinor),te=u(s,$[X].mirrorMinor),se=this.lineTickLength;for(G=0;G<3;++G){var ue=ne/E[5*G];ee[G]*=se[G]*ue,te[G]*=se[G]*ue}this.lineTickEnable[X]&&this._lines.drawAxisTicks(X,$[X].primalOffset,ee,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio),this.lineTickMirror[X]&&this._lines.drawAxisTicks(X,$[X].mirrorOffset,te,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio)}function xe(Be){(he=[0,0,0])[Be]=1}for(this._lines.unbind(),this._text.bind(E,I,C,this.pixelRatio),X=0;X<3;++X){var _e=$[X].primalMinor,Ce=$[X].mirrorMinor,Le=u(k,$[X].primalOffset);for(G=0;G<3;++G)this.lineTickEnable[X]&&(Le[G]+=ne*_e[G]*Math.max(this.lineTickLength[G],0)/E[5*G]);var Ie=[0,0,0];if(Ie[X]=1,this.tickEnable[X]){for(-3600===this.tickAngle[X]?(this.tickAngle[X]=0,this.tickAlign[X]="auto"):this.tickAlign[X]=-1,re[0]="auto"===(re=[this.tickAlign[X],.5,de=1])[0]?0:parseInt(""+re[0]),he=[0,0,0],Pe=void 0,De=void 0,Fe=void 0,Ue=void 0,He=void 0,Ke=void 0,Ue=(ve=_e)[De=((Be=X)+2)%3],He=(Te=Ce)[Pe=(Be+1)%3],Ke=Te[De],(Fe=ve[Pe])>0&&Ke>0||Fe>0&&Ke<0||Fe<0&&Ke>0||Fe<0&&Ke<0?xe(Pe):(Ue>0&&He>0||Ue>0&&He<0||Ue<0&&He>0||Ue<0&&He<0)&&xe(De),G=0;G<3;++G)Le[G]+=ne*_e[G]*this.tickPad[G]/E[5*G];this._text.drawTicks(X,this.tickSize[X],this.tickAngle[X],Le,this.tickColor[X],Ie,he,re)}if(this.labelEnable[X]){for(de=0,he=[0,0,0],this.labels[X].length>4&&(xe(X),de=1),re[0]="auto"===(re=[this.labelAlign[X],.5,de])[0]?0:parseInt(""+re[0]),G=0;G<3;++G)Le[G]+=ne*_e[G]*this.labelPad[G]/E[5*G];Le[X]+=.5*(R[0][X]+R[1][X]),this._text.drawLabel(X,this.labelSize[X],this.labelAngle[X],Le,this.labelColor[X],[0,0,0],he,re)}}this._text.unbind()},c.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(m,w,y){"use strict";w.exports=function(p){for(var u=[],i=[],c=0,f=0;f<3;++f)for(var l=(f+1)%3,h=(f+2)%3,d=[0,0,0],o=[0,0,0],_=-1;_<=1;_+=2){i.push(c,c+2,c+1,c+1,c+2,c+3),d[f]=_,o[f]=_;for(var s=-1;s<=1;s+=2){d[l]=s;for(var k=-1;k<=1;k+=2)d[h]=k,u.push(d[0],d[1],d[2],o[0],o[1],o[2]),c+=1}var M=l;l=h,h=M}var A=e(p,new Float32Array(u)),E=e(p,new Uint16Array(i),p.ELEMENT_ARRAY_BUFFER),I=r(p,[{buffer:A,type:p.FLOAT,size:3,offset:0,stride:24},{buffer:A,type:p.FLOAT,size:3,offset:12,stride:24}],E),C=n(p);return C.attributes.position.location=0,C.attributes.normal.location=1,new a(p,A,I,C)};var e=m("gl-buffer"),r=m("gl-vao"),n=m("./shaders").bg;function a(p,u,i,c){this.gl=p,this.buffer=u,this.vao=i,this.shader=c}var t=a.prototype;t.draw=function(p,u,i,c,f,l){for(var h=!1,d=0;d<3;++d)h=h||f[d];if(h){var o=this.gl;o.enable(o.POLYGON_OFFSET_FILL),o.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:p,view:u,projection:i,bounds:c,enable:f,colors:l},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),o.disable(o.POLYGON_OFFSET_FILL)}},t.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(m,w,y){"use strict";w.exports=function(s,k,M,A,E){r(t,k,s),r(t,M,t);for(var I=0,C=0;C<2;++C){i[2]=A[C][2];for(var R=0;R<2;++R){i[1]=A[R][1];for(var O=0;O<2;++O)i[0]=A[O][0],f(p[I],i,t),I+=1}}var D=-1;for(C=0;C<8;++C){for(var L=p[C][3],B=0;B<3;++B)u[C][B]=p[C][B]/L;E&&(u[C][2]*=-1),L<0&&(D<0||u[C][2]<u[D][2])&&(D=C)}if(D<0){D=0;for(var j=0;j<3;++j){for(var W=(j+2)%3,Y=(j+1)%3,Q=-1,ne=-1,X=0;X<2;++X){var $=(H=X<<j)+(X<<W)+(1-X<<Y),re=H+(1-X<<W)+(X<<Y);a(u[H],u[$],u[re],c)<0||(X?Q=1:ne=1)}if(Q<0||ne<0)ne>Q&&(D|=1<<j);else{for(X=0;X<2;++X){$=(H=X<<j)+(X<<W)+(1-X<<Y);var H,U=h([p[H],p[$],p[re=H+(1-X<<W)+(X<<Y)],p[H+(1<<W)+(1<<Y)]]);X?Q=U:ne=U}ne>Q&&(D|=1<<j)}}}var G=7^D,ie=-1;for(C=0;C<8;++C)C!==D&&C!==G&&(ie<0||u[ie][1]>u[C][1])&&(ie=C);var q=-1;for(C=0;C<3;++C)(te=ie^1<<C)!==D&&te!==G&&(q<0&&(q=te),(Y=u[te])[0]<u[q][0]&&(q=te));var ee=-1;for(C=0;C<3;++C){var te;(te=ie^1<<C)!==D&&te!==G&&te!==q&&(ee<0&&(ee=te),(Y=u[te])[0]>u[ee][0]&&(ee=te))}var se=d;se[0]=se[1]=se[2]=0,se[e.log2(q^ie)]=ie&q,se[e.log2(ie^ee)]=ie&ee;var ue=7^ee;ue===D||ue===G?se[e.log2(ee^(ue=7^q))]=ue&ee:se[e.log2(q^ue)]=ue&q;var de=o,he=D;for(j=0;j<3;++j)de[j]=he&1<<j?-1:1;return _};var e=m("bit-twiddle"),r=m("gl-mat4/multiply"),n=m("split-polygon"),a=m("robust-orientation"),t=new Array(16),p=new Array(8),u=new Array(8),i=new Array(3),c=[0,0,0];function f(s,k,M){for(var A=0;A<4;++A){s[A]=M[12+A];for(var E=0;E<3;++E)s[A]+=k[E]*M[4*E+A]}}!function(){for(var s=0;s<8;++s)p[s]=[1,1,1,1],u[s]=[1,1,1]}();var l=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function h(s){for(var k=0;k<l.length;++k)if((s=n.positive(s,l[k])).length<3)return 0;var M=s[0],A=M[0]/M[3],E=M[1]/M[3],I=0;for(k=1;k+1<s.length;++k){var C=s[k],R=s[k+1];I+=Math.abs((C[0]/C[3]-A)*(R[1]/R[3]-E)-(C[1]/C[3]-E)*(R[0]/R[3]-A))}return I}var d=[1,1,1],o=[0,0,0],_={cubeEdges:d,axis:o}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(m,w,y){"use strict";w.exports=function(d,o,_){var s=[],k=[0,0,0],M=[0,0,0],A=[0,0,0],E=[0,0,0];s.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var I=0;I<3;++I){for(var C=s.length/3|0,R=0;R<_[I].length;++R){var O=+_[I][R].x;s.push(O,0,1,O,1,1,O,0,-1,O,0,-1,O,1,1,O,1,-1)}var D=s.length/3|0;k[I]=C,M[I]=D-C,C=s.length/3|0;for(var L=0;L<_[I].length;++L)s.push(O=+_[I][L].x,0,1,O,1,1,O,0,-1,O,0,-1,O,1,1,O,1,-1);D=s.length/3|0,A[I]=C,E[I]=D-C}var B=e(d,new Float32Array(s)),j=r(d,[{buffer:B,type:d.FLOAT,size:3,stride:0,offset:0}]),W=n(d);return W.attributes.position.location=0,new l(d,B,j,W,M,k,E,A)};var e=m("gl-buffer"),r=m("gl-vao"),n=m("./shaders").line,a=[0,0,0],t=[0,0,0],p=[0,0,0],u=[0,0,0],i=[1,1];function c(d){return d[0]=d[1]=d[2]=0,d}function f(d,o){return d[0]=o[0],d[1]=o[1],d[2]=o[2],d}function l(d,o,_,s,k,M,A,E){this.gl=d,this.vertBuffer=o,this.vao=_,this.shader=s,this.tickCount=k,this.tickOffset=M,this.gridCount=A,this.gridOffset=E}var h=l.prototype;h.bind=function(d,o,_){this.shader.bind(),this.shader.uniforms.model=d,this.shader.uniforms.view=o,this.shader.uniforms.projection=_,i[0]=this.gl.drawingBufferWidth,i[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=i,this.vao.bind()},h.unbind=function(){this.vao.unbind()},h.drawAxisLine=function(d,o,_,s,k){var M=c(t);this.shader.uniforms.majorAxis=t,M[d]=o[1][d]-o[0][d],this.shader.uniforms.minorAxis=M;var A,E=f(u,_);E[d]+=o[0][d],this.shader.uniforms.offset=E,this.shader.uniforms.lineWidth=k,this.shader.uniforms.color=s,(A=c(p))[(d+2)%3]=1,this.shader.uniforms.screenAxis=A,this.vao.draw(this.gl.TRIANGLES,6),(A=c(p))[(d+1)%3]=1,this.shader.uniforms.screenAxis=A,this.vao.draw(this.gl.TRIANGLES,6)},h.drawAxisTicks=function(d,o,_,s,k){if(this.tickCount[d]){var M=c(a);M[d]=1,this.shader.uniforms.majorAxis=M,this.shader.uniforms.offset=o,this.shader.uniforms.minorAxis=_,this.shader.uniforms.color=s,this.shader.uniforms.lineWidth=k;var A=c(p);A[d]=1,this.shader.uniforms.screenAxis=A,this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d])}},h.drawGrid=function(d,o,_,s,k,M){if(this.gridCount[d]){var A=c(t);A[o]=_[1][o]-_[0][o],this.shader.uniforms.minorAxis=A;var E=f(u,s);E[o]+=_[0][o],this.shader.uniforms.offset=E;var I=c(a);I[d]=1,this.shader.uniforms.majorAxis=I;var C=c(p);C[d]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=k,this.vao.draw(this.gl.TRIANGLES,this.gridCount[d],this.gridOffset[d])}},h.drawZero=function(d,o,_,s,k,M){var A=c(t);this.shader.uniforms.majorAxis=A,A[d]=_[1][d]-_[0][d],this.shader.uniforms.minorAxis=A;var E=f(u,s);E[d]+=_[0][d],this.shader.uniforms.offset=E;var I=c(p);I[o]=1,this.shader.uniforms.screenAxis=I,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=k,this.vao.draw(this.gl.TRIANGLES,6)},h.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(m,w,y){"use strict";var e=m("glslify"),r=m("gl-shader"),n=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);y.line=function(c){return r(c,n,a,null,[{name:"position",type:"vec3"}])};var t=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),p=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);y.text=function(c){return r(c,t,p,null,[{name:"position",type:"vec3"}])};var u=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);y.bg=function(c){return r(c,u,i,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(m,w,y){(function(e){(function(){"use strict";w.exports=function(l,h,d,o,_,s){var k=r(l),M=n(l,[{buffer:k,size:3}]),A=t(l);A.attributes.position.location=0;var E=new i(l,A,k,M);return E.update(h,d,o,_,s),E};var r=m("gl-buffer"),n=m("gl-vao"),a=m("vectorize-text"),t=m("./shaders").text,p=window||e.global||{},u=p.__TEXT_CACHE||{};function i(l,h,d,o){this.gl=l,this.shader=h,this.buffer=d,this.vao=o,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}p.__TEXT_CACHE={};var c=i.prototype,f=[0,0];c.bind=function(l,h,d,o){this.vao.bind(),this.shader.bind();var _=this.shader.uniforms;_.model=l,_.view=h,_.projection=d,_.pixelScale=o,f[0]=this.gl.drawingBufferWidth,f[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=f},c.unbind=function(){this.vao.unbind()},c.update=function(l,h,d,o,_){var s=[];function k(D,L,B,j,W,Y){var Q=u[B];Q||(Q=u[B]={});var ne=Q[L];ne||(ne=Q[L]=function(ee,te){try{return a(ee,te)}catch(se){return console.warn('error vectorizing text:"'+ee+'" error:',se),{cells:[],positions:[]}}}(L,{triangles:!0,font:B,textAlign:"center",textBaseline:"middle",lineSpacing:W,styletags:Y}));for(var X=(j||12)/12,$=ne.positions,re=ne.cells,H=0,U=re.length;H<U;++H)for(var G=re[H],ie=2;ie>=0;--ie){var q=$[G[ie]];s.push(X*q[0],-X*q[1],D)}}for(var M=[0,0,0],A=[0,0,0],E=[0,0,0],I=[0,0,0],C={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},R=0;R<3;++R){E[R]=s.length/3|0,k(.5*(l[0][R]+l[1][R]),h[R],d[R],12,1.25,C),I[R]=(s.length/3|0)-E[R],M[R]=s.length/3|0;for(var O=0;O<o[R].length;++O)o[R][O].text&&k(o[R][O].x,o[R][O].text,o[R][O].font||_,o[R][O].fontSize||12,1.25,C);A[R]=(s.length/3|0)-M[R]}this.buffer.update(s),this.tickOffset=M,this.tickCount=A,this.labelOffset=E,this.labelCount=I},c.drawTicks=function(l,h,d,o,_,s,k,M){this.tickCount[l]&&(this.shader.uniforms.axis=s,this.shader.uniforms.color=_,this.shader.uniforms.angle=d,this.shader.uniforms.scale=h,this.shader.uniforms.offset=o,this.shader.uniforms.alignDir=k,this.shader.uniforms.alignOpt=M,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l]))},c.drawLabel=function(l,h,d,o,_,s,k,M){this.labelCount[l]&&(this.shader.uniforms.axis=s,this.shader.uniforms.color=_,this.shader.uniforms.angle=d,this.shader.uniforms.scale=h,this.shader.uniforms.offset=o,this.shader.uniforms.alignDir=k,this.shader.uniforms.alignOpt=M,this.vao.draw(this.gl.TRIANGLES,this.labelCount[l],this.labelOffset[l]))},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,m("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(m,w,y){"use strict";function e(r,n){var a=r+"",t=a.indexOf("."),p=0;t>=0&&(p=a.length-t-1);var u=Math.pow(10,p),i=Math.round(r*n*u),c=i+"";if(c.indexOf("e")>=0)return c;var f=i/u,l=i%u;i<0?(f=0|-Math.ceil(f),l=0|-l):(f=0|Math.floor(f),l|=0);var h=""+f;if(i<0&&(h="-"+h),p){for(var d=""+l;d.length<p;)d="0"+d;return h+"."+d}return h}y.create=function(r,n){for(var a=[],t=0;t<3;++t){for(var p=[],u=0;u*n[t]<=r[1][t];++u)p.push({x:u*n[t],text:e(n[t],u)});for(u=-1;u*n[t]>=r[0][t];--u)p.push({x:u*n[t],text:e(n[t],u)});a.push(p)}return a},y.equal=function(r,n){for(var a=0;a<3;++a){if(r[a].length!==n[a].length)return!1;for(var t=0;t<r[a].length;++t){var p=r[a][t],u=n[a][t];if(p.x!==u.x||p.text!==u.text||p.font!==u.font||p.fontColor!==u.fontColor||p.fontSize!==u.fontSize||p.dx!==u.dx||p.dy!==u.dy)return!1}}return!0}},{}],77:[function(m,w,y){"use strict";w.exports=function(_,s,k,M,A){var E=s.model||u,I=s.view||u,C=s.projection||u,R=s._ortho||!1,O=_.bounds,D=(A=A||n(E,I,C,O,R)).axis;a(i,I,E),a(i,C,i);for(var L=d,B=0;B<3;++B)L[B].lo=1/0,L[B].hi=-1/0,L[B].pixelsPerDataUnit=1/0;var j=e(t(i,i));t(i,i);for(var W=0;W<3;++W){var Y=(W+1)%3,Q=(W+2)%3,ne=o;e:for(B=0;B<2;++B){var X=[];if(D[W]<0!=!!B){ne[W]=O[B][W];for(var $=0;$<2;++$){ne[Y]=O[$^B][Y];for(var re=0;re<2;++re)ne[Q]=O[re^$^B][Q],X.push(ne.slice())}var H=R?5:4;for($=H;$===H;++$){if(0===X.length)continue e;X=r.positive(X,j[$])}for($=0;$<X.length;++$){var U=h(o,i,Q=X[$],k,M);for(re=0;re<3;++re)L[re].lo=Math.min(L[re].lo,Q[re]),L[re].hi=Math.max(L[re].hi,Q[re]),re!==W&&(L[re].pixelsPerDataUnit=Math.min(L[re].pixelsPerDataUnit,Math.abs(U[re])))}}}}return L};var e=m("extract-frustum-planes"),r=m("split-polygon"),n=m("./lib/cube.js"),a=m("gl-mat4/multiply"),t=m("gl-mat4/transpose"),p=m("gl-vec4/transformMat4"),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),i=new Float32Array(16);function c(_,s,k){this.lo=_,this.hi=s,this.pixelsPerDataUnit=k}var f=[0,0,0,1],l=[0,0,0,1];function h(_,s,k,M,A){for(var E=0;E<3;++E){for(var I=f,C=l,R=0;R<3;++R)C[R]=I[R]=k[R];C[3]=I[3]=1,C[E]+=1,p(C,C,s),C[3]<0&&(_[E]=1/0),I[E]-=1,p(I,I,s),I[3]<0&&(_[E]=1/0);var O=(I[0]/I[3]-C[0]/C[3])*M,D=(I[1]/I[3]-C[1]/C[3])*A;_[E]=.25*Math.sqrt(O*O+D*D)}return _}var d=[new c(1/0,-1/0,1/0),new c(1/0,-1/0,1/0),new c(1/0,-1/0,1/0)],o=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(m,w,y){"use strict";var e=m("typedarray-pool"),r=m("ndarray-ops"),n=m("ndarray"),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function t(c,f,l,h,d){this.gl=c,this.type=f,this.handle=l,this.length=h,this.usage=d}var p=t.prototype;function u(c,f,l,h,d,o){var _=d.length*d.BYTES_PER_ELEMENT;if(o<0)return c.bufferData(f,d,h),_;if(_+o>l)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return c.bufferSubData(f,o,d),l}p.bind=function(){this.gl.bindBuffer(this.type,this.handle)},p.unbind=function(){this.gl.bindBuffer(this.type,null)},p.dispose=function(){this.gl.deleteBuffer(this.handle)},p.update=function(c,f){if("number"!=typeof f&&(f=-1),this.bind(),"object"==typeof c&&void 0!==c.shape){var l=c.dtype;if(a.indexOf(l)<0&&(l="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(l=gl.getExtension("OES_element_index_uint")&&"uint16"!==l?"uint32":"uint16"),l===c.dtype&&function(_,s){for(var k=1,M=s.length-1;M>=0;--M){if(s[M]!==k)return!1;k*=_[M]}return!0}(c.shape,c.stride))this.length=u(this.gl,this.type,this.length,this.usage,0===c.offset&&c.data.length===c.shape[0]?c.data:c.data.subarray(c.offset,c.shape[0]),f);else{var h=e.malloc(c.size,l),d=n(h,c.shape);r.assign(d,c),this.length=u(this.gl,this.type,this.length,this.usage,f<0?h:h.subarray(0,c.size),f),e.free(h)}}else if(Array.isArray(c)){var o;o=function i(c,f){for(var l=e.malloc(c.length,f),h=c.length,d=0;d<h;++d)l[d]=c[d];return l}(c,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=u(this.gl,this.type,this.length,this.usage,f<0?o:o.subarray(0,c.length),f),e.free(o)}else if("object"==typeof c&&"number"==typeof c.length)this.length=u(this.gl,this.type,this.length,this.usage,c,f);else{if("number"!=typeof c&&void 0!==c)throw new Error("gl-buffer: Invalid data type");if(f>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(c|=0)<=0&&(c=1),this.gl.bufferData(this.type,0|c,this.usage),this.length=c}},w.exports=function(c,f,l,h){if(h=h||c.DYNAMIC_DRAW,(l=l||c.ARRAY_BUFFER)!==c.ARRAY_BUFFER&&l!==c.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(h!==c.DYNAMIC_DRAW&&h!==c.STATIC_DRAW&&h!==c.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var d=c.createBuffer(),o=new t(c,l,d,0,h);return o.update(f),o}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(m,w,y){"use strict";var e=m("gl-vec3");w.exports=function(n,a){var t=n.positions,p=n.vectors,u={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(0===n.positions.length)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),u;for(var i=0,c=1/0,f=-1/0,l=1/0,h=-1/0,d=1/0,o=-1/0,_=null,s=null,k=[],M=1/0,A=!1,E=0;E<t.length;E++){var I=t[E];c=Math.min(I[0],c),f=Math.max(I[0],f),l=Math.min(I[1],l),h=Math.max(I[1],h),d=Math.min(I[2],d),o=Math.max(I[2],o);var C=p[E];if(e.length(C)>i&&(i=e.length(C)),E){var R=2*e.distance(_,I)/(e.length(s)+e.length(C));R?(M=Math.min(M,R),A=!1):A=!0}A||(_=I,s=C),k.push(C)}var D=[f,h,o];a&&(a[0]=[c,l,d],a[1]=D),0===i&&(i=1);var L=1/i;isFinite(M)||(M=1),u.vectorScale=M;var B=n.coneSize||.5;n.absoluteConeSize&&(B=n.absoluteConeSize*L),u.coneScale=B,E=0;for(var j=0;E<t.length;E++)for(var W=(I=t[E])[0],Y=I[1],Q=I[2],ne=k[E],X=e.length(ne)*L,$=0;$<8;$++){u.positions.push([W,Y,Q,j++]),u.positions.push([W,Y,Q,j++]),u.positions.push([W,Y,Q,j++]),u.positions.push([W,Y,Q,j++]),u.positions.push([W,Y,Q,j++]),u.positions.push([W,Y,Q,j++]),u.vectors.push(ne),u.vectors.push(ne),u.vectors.push(ne),u.vectors.push(ne),u.vectors.push(ne),u.vectors.push(ne),u.vertexIntensity.push(X,X,X),u.vertexIntensity.push(X,X,X);var re=u.positions.length;u.cells.push([re-6,re-5,re-4],[re-3,re-2,re-1])}return u};var r=m("./lib/shaders");w.exports.createMesh=m("./create_mesh"),w.exports.createConeMesh=function(n,a){return w.exports.createMesh(n,a,{shaders:r,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(m,w,y){"use strict";var e=m("gl-shader"),r=m("gl-buffer"),n=m("gl-vao"),a=m("gl-texture2d"),t=m("gl-mat4/multiply"),p=m("gl-mat4/invert"),u=m("ndarray"),i=m("colormap"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function f(o,_,s,k,M,A,E,I,C,R,O){this.gl=o,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=_,this.dirty=!0,this.triShader=s,this.pickShader=k,this.trianglePositions=M,this.triangleVectors=A,this.triangleColors=I,this.triangleUVs=C,this.triangleIds=E,this.triangleVAO=R,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=O,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=c,this._view=c,this._projection=c,this._resolution=[1,1]}var l=f.prototype;function h(o,_){var s=e(o,_.meshShader.vertex,_.meshShader.fragment,null,_.meshShader.attributes);return s.attributes.position.location=0,s.attributes.color.location=2,s.attributes.uv.location=3,s.attributes.vector.location=4,s}function d(o,_){var s=e(o,_.pickShader.vertex,_.pickShader.fragment,null,_.pickShader.attributes);return s.attributes.position.location=0,s.attributes.id.location=1,s.attributes.vector.location=4,s}l.isOpaque=function(){return this.opacity>=1},l.isTransparent=function(){return this.opacity<1},l.pickSlots=1,l.setPickBase=function(o){this.pickId=o},l.update=function(o){o=o||{};var _=this.gl;this.dirty=!0,"lightPosition"in o&&(this.lightPosition=o.lightPosition),"opacity"in o&&(this.opacity=o.opacity),"ambient"in o&&(this.ambientLight=o.ambient),"diffuse"in o&&(this.diffuseLight=o.diffuse),"specular"in o&&(this.specularLight=o.specular),"roughness"in o&&(this.roughness=o.roughness),"fresnel"in o&&(this.fresnel=o.fresnel),void 0!==o.tubeScale&&(this.tubeScale=o.tubeScale),void 0!==o.vectorScale&&(this.vectorScale=o.vectorScale),void 0!==o.coneScale&&(this.coneScale=o.coneScale),void 0!==o.coneOffset&&(this.coneOffset=o.coneOffset),o.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=_.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=_.LINEAR,this.texture.setPixels(function(ie){for(var q=i({colormap:ie,nshades:256,format:"rgba"}),ee=new Uint8Array(1024),te=0;te<256;++te){for(var se=q[te],ue=0;ue<3;++ue)ee[4*te+ue]=se[ue];ee[4*te+3]=255*se[3]}return u(ee,[256,256,4],[4,0,1])}(o.colormap)),this.texture.generateMipmap());var s=o.cells,k=o.positions,M=o.vectors;if(k&&s&&M){var A=[],E=[],I=[],C=[],R=[];this.cells=s,this.positions=k,this.vectors=M;var O=o.meshColor||[1,1,1,1],D=o.vertexIntensity,L=1/0,B=-1/0;if(D)if(o.vertexIntensityBounds)L=+o.vertexIntensityBounds[0],B=+o.vertexIntensityBounds[1];else for(var j=0;j<D.length;++j){var W=D[j];L=Math.min(L,W),B=Math.max(B,W)}else for(j=0;j<k.length;++j)W=k[j][2],L=Math.min(L,W),B=Math.max(B,W);for(this.intensity=D||function(ie){for(var q=ie.length,ee=new Array(q),te=0;te<q;++te)ee[te]=ie[te][2];return ee}(k),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],j=0;j<k.length;++j)for(var Y=k[j],Q=0;Q<3;++Q)!isNaN(Y[Q])&&isFinite(Y[Q])&&(this.bounds[0][Q]=Math.min(this.bounds[0][Q],Y[Q]),this.bounds[1][Q]=Math.max(this.bounds[1][Q],Y[Q]));var ne=0;e:for(j=0;j<s.length;++j){var X=s[j];if(3===X.length){for(Q=0;Q<3;++Q){Y=k[re=X[Q]];for(var $=0;$<3;++$)if(isNaN(Y[$])||!isFinite(Y[$]))continue e}for(Q=0;Q<3;++Q){var re;Y=k[re=X[2-Q]],A.push(Y[0],Y[1],Y[2],Y[3]);var H=M[re];E.push(H[0],H[1],H[2],H[3]||0);var U;I.push(O[0],O[1],O[2],3===O.length?1:O[3]),C.push((U=D?[(D[re]-L)/(B-L),0]:[(Y[2]-L)/(B-L),0])[0],U[1]),R.push(j)}ne+=1}}this.triangleCount=ne,this.trianglePositions.update(A),this.triangleVectors.update(E),this.triangleColors.update(I),this.triangleUVs.update(C),this.triangleIds.update(new Uint32Array(R))}},l.drawTransparent=l.draw=function(o){for(var _=this.gl,s=(o=o||{}).model||c,k=o.view||c,M=o.projection||c,A=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)A[0][E]=Math.max(A[0][E],this.clipBounds[0][E]),A[1][E]=Math.min(A[1][E],this.clipBounds[1][E]);var I={model:s,view:k,projection:M,inverseModel:c.slice(),clipBounds:A,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};I.inverseModel=p(I.inverseModel,I.model),_.disable(_.CULL_FACE),this.texture.bind(0);var C=new Array(16);for(t(C,I.view,I.model),t(C,I.projection,C),p(C,C),E=0;E<3;++E)I.eyePosition[E]=C[12+E]/C[15];var R=C[15];for(E=0;E<3;++E)R+=this.lightPosition[E]*C[4*E+3];for(E=0;E<3;++E){for(var O=C[12+E],D=0;D<3;++D)O+=C[4*D+E]*this.lightPosition[D];I.lightPosition[E]=O/R}if(this.triangleCount>0){var L=this.triShader;L.bind(),L.uniforms=I,this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},l.drawPick=function(o){for(var _=this.gl,s=(o=o||{}).model||c,k=o.view||c,M=o.projection||c,A=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)A[0][E]=Math.max(A[0][E],this.clipBounds[0][E]),A[1][E]=Math.min(A[1][E],this.clipBounds[1][E]);this._model=[].slice.call(s),this._view=[].slice.call(k),this._projection=[].slice.call(M),this._resolution=[_.drawingBufferWidth,_.drawingBufferHeight];var I={model:s,view:k,projection:M,clipBounds:A,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},C=this.pickShader;C.bind(),C.uniforms=I,this.triangleCount>0&&(this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},l.pick=function(o){if(!o||o.id!==this.pickId)return null;var _=o.value[0]+256*o.value[1]+65536*o.value[2],s=this.cells[_],k=this.positions[s[1]].slice(0,3),M={position:k,dataCoordinate:k,index:Math.floor(s[1]/48)};return"cone"===this.traceType?M.index=Math.floor(s[1]/48):"streamtube"===this.traceType&&(M.intensity=this.intensity[s[1]],M.velocity=this.vectors[s[1]].slice(0,3),M.divergence=this.vectors[s[1]][3],M.index=_),M},l.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},w.exports=function(o,_,s){var k=s.shaders;1===arguments.length&&(o=(_=o).gl);var M=h(o,k),A=d(o,k),E=a(o,u(new Uint8Array([255,255,255,255]),[1,1,4]));E.generateMipmap(),E.minFilter=o.LINEAR_MIPMAP_LINEAR,E.magFilter=o.LINEAR;var I=r(o),C=r(o),R=r(o),O=r(o),D=r(o),B=new f(o,E,M,A,I,C,D,R,O,n(o,[{buffer:I,type:o.FLOAT,size:4},{buffer:D,type:o.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:R,type:o.FLOAT,size:4},{buffer:O,type:o.FLOAT,size:2},{buffer:C,type:o.FLOAT,size:4}]),s.traceType||"cone");return B.update(_),B}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(m,w,y){var e=m("glslify"),r=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),n=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),t=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);y.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},y.pickShader={vertex:a,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(m,w,y){w.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(m,w,y){var e=m("./1.0/numbers");w.exports=function(r){return e[r]}},{"./1.0/numbers":82}],84:[function(m,w,y){"use strict";w.exports=function(f){var l=f.gl,h=e(l),d=r(l,[{buffer:h,type:l.FLOAT,size:3,offset:0,stride:40},{buffer:h,type:l.FLOAT,size:4,offset:12,stride:40},{buffer:h,type:l.FLOAT,size:3,offset:28,stride:40}]),o=n(l);o.attributes.position.location=0,o.attributes.color.location=1,o.attributes.offset.location=2;var _=new t(l,h,d,o);return _.update(f),_};var e=m("gl-buffer"),r=m("gl-vao"),n=m("./shaders/index"),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(f,l,h,d){this.gl=f,this.shader=d,this.buffer=l,this.vao=h,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var p=t.prototype;function u(f,l){for(var h=0;h<3;++h)f[0][h]=Math.min(f[0][h],l[h]),f[1][h]=Math.max(f[1][h],l[h])}p.isOpaque=function(){return!this.hasAlpha},p.isTransparent=function(){return this.hasAlpha},p.drawTransparent=p.draw=function(f){var l=this.gl,h=this.shader.uniforms;this.shader.bind();var d=h.view=f.view||a,o=h.projection=f.projection||a;h.model=f.model||a,h.clipBounds=this.clipBounds,h.opacity=this.opacity;var A=(f._ortho?2:1)*this.pixelRatio*(o[3]*d[12]+o[7]*d[13]+o[11]*d[14]+o[15]*d[15])/l.drawingBufferHeight;this.vao.bind();for(var E=0;E<3;++E)l.lineWidth(this.lineWidth[E]*this.pixelRatio),h.capSize=this.capSize[E]*A,this.lineCount[E]&&l.drawArrays(l.LINES,this.lineOffset[E],this.lineCount[E]);this.vao.unbind()};var i=function(){for(var f=new Array(3),l=0;l<3;++l){for(var h=[],d=1;d<=2;++d)for(var o=-1;o<=1;o+=2){var _=[0,0,0];_[(d+l)%3]=o,h.push(_)}f[l]=h}return f}();function c(f,l,h,d){for(var o=i[d],_=0;_<o.length;++_){var s=o[_];f.push(l[0],l[1],l[2],h[0],h[1],h[2],h[3],s[0],s[1],s[2])}return o.length}p.update=function(f){"lineWidth"in(f=f||{})&&(this.lineWidth=f.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in f&&(this.capSize=f.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in f&&(this.opacity=+f.opacity,this.opacity<1&&(this.hasAlpha=!0));var l=f.color||[[0,0,0],[0,0,0],[0,0,0]],h=f.position,d=f.error;if(Array.isArray(l[0])||(l=[l,l,l]),h&&d){var o=[],_=h.length,s=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var k=0;k<3;++k){this.lineOffset[k]=s;e:for(var M=0;M<_;++M){for(var A=h[M],E=0;E<3;++E)if(isNaN(A[E])||!isFinite(A[E]))continue e;var R,I=d[M],C=l[k];Array.isArray(C[0])&&(C=l[M]),3===C.length?C=[C[0],C[1],C[2],1]:4===C.length&&(C=[C[0],C[1],C[2],C[3]],!this.hasAlpha&&C[3]<1&&(this.hasAlpha=!0)),isNaN(I[0][k])||isNaN(I[1][k])||(I[0][k]<0&&((R=A.slice())[k]+=I[0][k],o.push(A[0],A[1],A[2],C[0],C[1],C[2],C[3],0,0,0,R[0],R[1],R[2],C[0],C[1],C[2],C[3],0,0,0),u(this.bounds,R),s+=2+c(o,R,C,k)),I[1][k]>0&&((R=A.slice())[k]+=I[1][k],o.push(A[0],A[1],A[2],C[0],C[1],C[2],C[3],0,0,0,R[0],R[1],R[2],C[0],C[1],C[2],C[3],0,0,0),u(this.bounds,R),s+=2+c(o,R,C,k)))}this.lineCount[k]=s-this.lineOffset[k]}this.buffer.update(o)}},p.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(m,w,y){"use strict";var e=m("glslify"),r=m("gl-shader"),n=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);w.exports=function(t){return r(t,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(m,w,y){"use strict";var e=m("gl-texture2d");w.exports=function(_,s,k,M){r||(r=_.FRAMEBUFFER_UNSUPPORTED,n=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,t=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var A=_.getExtension("WEBGL_draw_buffers");if(!p&&A&&function(L,B){var j=L.getParameter(B.MAX_COLOR_ATTACHMENTS_WEBGL);p=new Array(j+1);for(var W=0;W<=j;++W){for(var Y=new Array(j),Q=0;Q<W;++Q)Y[Q]=L.COLOR_ATTACHMENT0+Q;for(Q=W;Q<j;++Q)Y[Q]=L.NONE;p[W]=Y}}(_,A),Array.isArray(s)&&(M=k,k=0|s[1],s=0|s[0]),"number"!=typeof s)throw new Error("gl-fbo: Missing shape parameter");var E=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(s<0||s>E||k<0||k>E)throw new Error("gl-fbo: Parameters are too large for FBO");var I=1;if("color"in(M=M||{})){if((I=Math.max(0|M.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(I>1){if(!A)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(I>_.getParameter(A.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+I+" draw buffers")}}var C=_.UNSIGNED_BYTE,R=_.getExtension("OES_texture_float");if(M.float&&I>0){if(!R)throw new Error("gl-fbo: Context does not support floating point textures");C=_.FLOAT}else M.preferFloat&&I>0&&R&&(C=_.FLOAT);var O=!0;"depth"in M&&(O=!!M.depth);var D=!1;return"stencil"in M&&(D=!!M.stencil),new h(_,s,k,C,I,O,D,A)};var r,n,a,t,p=null;function u(_){return[_.getParameter(_.FRAMEBUFFER_BINDING),_.getParameter(_.RENDERBUFFER_BINDING),_.getParameter(_.TEXTURE_BINDING_2D)]}function i(_,s){_.bindFramebuffer(_.FRAMEBUFFER,s[0]),_.bindRenderbuffer(_.RENDERBUFFER,s[1]),_.bindTexture(_.TEXTURE_2D,s[2])}function c(_){switch(_){case r:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case t:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function f(_,s,k,M,A,E){if(!M)return null;var I=e(_,s,k,A,M);return I.magFilter=_.NEAREST,I.minFilter=_.NEAREST,I.mipSamples=1,I.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,E,_.TEXTURE_2D,I.handle,0),I}function l(_,s,k,M,A){var E=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,E),_.renderbufferStorage(_.RENDERBUFFER,M,s,k),_.framebufferRenderbuffer(_.FRAMEBUFFER,A,_.RENDERBUFFER,E),E}function h(_,s,k,M,A,E,I,C){this.gl=_,this._shape=[0|s,0|k],this._destroyed=!1,this._ext=C,this.color=new Array(A);for(var R=0;R<A;++R)this.color[R]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=M,this._useDepth=E,this._useStencil=I;var O=this,D=[0|s,0|k];Object.defineProperties(D,{0:{get:function(){return O._shape[0]},set:function(L){return O.width=L}},1:{get:function(){return O._shape[1]},set:function(L){return O.height=L}}}),this._shapeVector=D,function(L){var B=u(L.gl),j=L.gl,W=L.handle=j.createFramebuffer(),Y=L._shape[0],Q=L._shape[1],ne=L.color.length,X=L._ext,$=L._useStencil,re=L._useDepth,H=L._colorType;j.bindFramebuffer(j.FRAMEBUFFER,W);for(var U=0;U<ne;++U)L.color[U]=f(j,Y,Q,H,j.RGBA,j.COLOR_ATTACHMENT0+U);0===ne?(L._color_rb=l(j,Y,Q,j.RGBA4,j.COLOR_ATTACHMENT0),X&&X.drawBuffersWEBGL(p[0])):ne>1&&X.drawBuffersWEBGL(p[ne]);var G=j.getExtension("WEBGL_depth_texture");G?$?L.depth=f(j,Y,Q,G.UNSIGNED_INT_24_8_WEBGL,j.DEPTH_STENCIL,j.DEPTH_STENCIL_ATTACHMENT):re&&(L.depth=f(j,Y,Q,j.UNSIGNED_SHORT,j.DEPTH_COMPONENT,j.DEPTH_ATTACHMENT)):re&&$?L._depth_rb=l(j,Y,Q,j.DEPTH_STENCIL,j.DEPTH_STENCIL_ATTACHMENT):re?L._depth_rb=l(j,Y,Q,j.DEPTH_COMPONENT16,j.DEPTH_ATTACHMENT):$&&(L._depth_rb=l(j,Y,Q,j.STENCIL_INDEX,j.STENCIL_ATTACHMENT));var ie=j.checkFramebufferStatus(j.FRAMEBUFFER);if(ie!==j.FRAMEBUFFER_COMPLETE){for(L._destroyed=!0,j.bindFramebuffer(j.FRAMEBUFFER,null),j.deleteFramebuffer(L.handle),L.handle=null,L.depth&&(L.depth.dispose(),L.depth=null),L._depth_rb&&(j.deleteRenderbuffer(L._depth_rb),L._depth_rb=null),U=0;U<L.color.length;++U)L.color[U].dispose(),L.color[U]=null;L._color_rb&&(j.deleteRenderbuffer(L._color_rb),L._color_rb=null),i(j,B),c(ie)}i(j,B)}(this)}var d=h.prototype;function o(_,s,k){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(_._shape[0]!==s||_._shape[1]!==k){var M=_.gl,A=M.getParameter(M.MAX_RENDERBUFFER_SIZE);if(s<0||s>A||k<0||k>A)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=s,_._shape[1]=k;for(var E=u(M),I=0;I<_.color.length;++I)_.color[I].shape=_._shape;_._color_rb&&(M.bindRenderbuffer(M.RENDERBUFFER,_._color_rb),M.renderbufferStorage(M.RENDERBUFFER,M.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(M.bindRenderbuffer(M.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&M.renderbufferStorage(M.RENDERBUFFER,M.STENCIL_INDEX,_._shape[0],_._shape[1])),M.bindFramebuffer(M.FRAMEBUFFER,_.handle);var C=M.checkFramebufferStatus(M.FRAMEBUFFER);C!==M.FRAMEBUFFER_COMPLETE&&(_.dispose(),i(M,E),c(C)),i(M,E)}}Object.defineProperties(d,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[0|_,0|_]),2!==_.length)throw new Error("gl-fbo: Shape vector must be length 2");var s=0|_[0],k=0|_[1];return o(this,s,k),[s,k]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return o(this,_|=0,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return o(this,this._shape[0],_|=0),_},enumerable:!1}}),d.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},d.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var s=0;s<this.color.length;++s)this.color[s].dispose(),this.color[s]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(m,w,y){var e=m("sprintf-js").sprintf,r=m("gl-constants/lookup"),n=m("glsl-shader-name"),a=m("add-line-numbers");w.exports=function(t,p,u){"use strict";var i=n(p)||"of unknown name (see npm glsl-shader-name)",c="unknown type";void 0!==u&&(c=u===r.FRAGMENT_SHADER?"fragment":"vertex");for(var f=e("Error compiling %s shader %s:\n",c,i),l=e("%s%s",f,t),h=t.split("\n"),d={},o=0;o<h.length;o++){var _=h[o];if(""!==_&&"\0"!==_){var s=parseInt(_.split(":")[2]);if(isNaN(s))throw new Error(e("Could not parse error: %s",_));d[s]=_}}var k=a(p).split("\n");for(o=0;o<k.length;o++)if((d[o+3]||d[o+2]||d[o+1])&&(f+=k[o]+"\n",d[o+1])){var A=d[o+1];A=A.substr(A.split(":",3).join(":").length+1).trim(),f+=e("^^^ %s\n\n",A)}return{long:f.trim(),short:l.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(m,w,y){"use strict";w.exports=function(l,h){var d=l.gl,E=new u(l,a(d,p.vertex,p.fragment),a(d,p.pickVertex,p.pickFragment),t(d),t(d),t(d),t(d));return E.update(h),l.addObject(E),E};var e=m("binary-search-bounds"),r=m("iota-array"),n=m("typedarray-pool"),a=m("gl-shader"),t=m("gl-buffer"),p=m("./lib/shaders");function u(l,h,d,o,_,s,k){this.plot=l,this.shader=h,this.pickShader=d,this.positionBuffer=o,this.weightBuffer=_,this.colorBuffer=s,this.idBuffer=k,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var i,l,h,c=u.prototype,f=[0,0,1,0,0,1,1,0,1,1,0,1];c.draw=(i=[1,0,0,0,1,0,0,0,1],function(){var l=this.plot,h=this.shader,d=this.bounds,o=this.numVertices;if(!(o<=0)){var _=l.gl,s=l.dataBox,M=d[3]-d[1],A=s[2]-s[0],E=s[3]-s[1];i[0]=2*(d[2]-d[0])/A,i[4]=2*M/E,i[6]=2*(d[0]-s[0])/A-1,i[7]=2*(d[1]-s[1])/E-1,h.bind();var I=h.uniforms;I.viewTransform=i,I.shape=this.shape;var C=h.attributes;this.positionBuffer.bind(),C.position.pointer(),this.weightBuffer.bind(),C.weight.pointer(_.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),C.color.pointer(_.UNSIGNED_BYTE,!0),_.drawArrays(_.TRIANGLES,0,o)}}),c.drawPick=(l=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0],function(d){var o=this.plot,_=this.pickShader,s=this.bounds,k=this.numVertices;if(!(k<=0)){var M=o.gl,A=o.dataBox,I=s[3]-s[1],C=A[2]-A[0],R=A[3]-A[1];l[0]=2*(s[2]-s[0])/C,l[4]=2*I/R,l[6]=2*(s[0]-A[0])/C-1,l[7]=2*(s[1]-A[1])/R-1;for(var O=0;O<4;++O)h[O]=d>>8*O&255;this.pickOffset=d,_.bind();var D=_.uniforms;D.viewTransform=l,D.pickOffset=h,D.shape=this.shape;var L=_.attributes;return this.positionBuffer.bind(),L.position.pointer(),this.weightBuffer.bind(),L.weight.pointer(M.UNSIGNED_BYTE,!1),this.idBuffer.bind(),L.pickId.pointer(M.UNSIGNED_BYTE,!1),M.drawArrays(M.TRIANGLES,0,k),d+this.shape[0]*this.shape[1]}}),c.pick=function(l,h,d){var o=this.pickOffset;if(d<o||d>=o+this.shape[0]*this.shape[1])return null;var s=d-o;return{object:this,pointId:s,dataCoord:[this.xData[s%this.shape[0]],this.yData[s/this.shape[0]|0]]}},c.update=function(l){var h=(l=l||{}).shape||[0,0],d=l.x||r(h[0]),o=l.y||r(h[1]),_=l.z||new Float32Array(h[0]*h[1]),s=!1!==l.zsmooth;this.xData=d,this.yData=o;var k,M,A,E,I=l.colorLevels||[0],C=l.colorValues||[0,0,0,1],R=I.length,O=this.bounds;s?(k=O[0]=d[0],M=O[1]=o[0],A=O[2]=d[d.length-1],E=O[3]=o[o.length-1]):(k=O[0]=d[0]+(d[1]-d[0])/2,M=O[1]=o[0]+(o[1]-o[0])/2,A=O[2]=d[d.length-1]+(d[d.length-1]-d[d.length-2])/2,E=O[3]=o[o.length-1]+(o[o.length-1]-o[o.length-2])/2);var D=1/(A-k),L=1/(E-M),B=h[0],j=h[1];this.shape=[B,j];var W=(s?(B-1)*(j-1):B*j)*(f.length>>>1);this.numVertices=W;for(var Y=n.mallocUint8(4*W),Q=n.mallocFloat32(2*W),ne=n.mallocUint8(2*W),X=n.mallocUint32(W),$=0,re=s?B-1:B,H=s?j-1:j,U=0;U<H;++U){var G,ie;s?(G=L*(o[U]-M),ie=L*(o[U+1]-M)):(G=U<j-1?L*(o[U]-(o[U+1]-o[U])/2-M):L*(o[U]-(o[U]-o[U-1])/2-M),ie=U<j-1?L*(o[U]+(o[U+1]-o[U])/2-M):L*(o[U]+(o[U]-o[U-1])/2-M));for(var q=0;q<re;++q){var ee,te;s?(ee=D*(d[q]-k),te=D*(d[q+1]-k)):(ee=q<B-1?D*(d[q]-(d[q+1]-d[q])/2-k):D*(d[q]-(d[q]-d[q-1])/2-k),te=q<B-1?D*(d[q]+(d[q+1]-d[q])/2-k):D*(d[q]+(d[q]-d[q-1])/2-k));for(var se=0;se<f.length;se+=2){var ue,de,he,xe,ge=f[se],_e=f[se+1],Ce=_[s?(U+_e)*B+(q+ge):U*B+q],Le=e.le(I,Ce);if(Le<0)ue=C[0],de=C[1],he=C[2],xe=C[3];else if(Le===R-1)ue=C[4*R-4],de=C[4*R-3],he=C[4*R-2],xe=C[4*R-1];else{var Ie=(Ce-I[Le])/(I[Le+1]-I[Le]),Be=1-Ie,ve=4*Le,Te=4*(Le+1);ue=Be*C[ve]+Ie*C[Te],de=Be*C[ve+1]+Ie*C[Te+1],he=Be*C[ve+2]+Ie*C[Te+2],xe=Be*C[ve+3]+Ie*C[Te+3]}Y[4*$]=255*ue,Y[4*$+1]=255*de,Y[4*$+2]=255*he,Y[4*$+3]=255*xe,Q[2*$]=.5*ee+.5*te,Q[2*$+1]=.5*G+.5*ie,ne[2*$]=ge,ne[2*$+1]=_e,X[$]=U*B+q,$+=1}}}this.positionBuffer.update(Q),this.weightBuffer.update(ne),this.colorBuffer.update(Y),this.idBuffer.update(X),n.free(Q),n.free(Y),n.free(ne),n.free(X)},c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(m,w,y){"use strict";var e=m("glslify");w.exports={fragment:e(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(m,w,y){var e=m("glslify"),r=m("gl-shader"),n=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),t=e(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),p=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];y.createShader=function(u){return r(u,n,a,null,p)},y.createPickShader=function(u){return r(u,n,t,null,p)}},{"gl-shader":132,glslify:231}],91:[function(m,w,y){"use strict";w.exports=function(k){var M=k.gl||k.scene&&k.scene.gl,A=c(M);A.attributes.position.location=0,A.attributes.nextPosition.location=1,A.attributes.arcLength.location=2,A.attributes.lineWidth.location=3,A.attributes.color.location=4;var E=f(M);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;for(var I=e(M),C=r(M,[{buffer:I,size:3,offset:0,stride:48},{buffer:I,size:3,offset:12,stride:48},{buffer:I,size:1,offset:24,stride:48},{buffer:I,size:1,offset:28,stride:48},{buffer:I,size:4,offset:32,stride:48}]),R=u(new Array(1024),[256,1,4]),O=0;O<1024;++O)R.data[O]=255;var D=n(M,R);D.wrap=M.REPEAT;var L=new _(M,A,E,I,C,D);return L.update(k),L};var e=m("gl-buffer"),r=m("gl-vao"),n=m("gl-texture2d"),a=new Uint8Array(4),t=new Float32Array(a.buffer),p=m("binary-search-bounds"),u=m("ndarray"),i=m("./lib/shaders"),c=i.createShader,f=i.createPickShader,l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(k,M){for(var A=0,E=0;E<3;++E){var I=k[E]-M[E];A+=I*I}return Math.sqrt(A)}function d(k){for(var M=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],A=0;A<3;++A)M[0][A]=Math.max(k[0][A],M[0][A]),M[1][A]=Math.min(k[1][A],M[1][A]);return M}function o(k,M,A,E){this.arcLength=k,this.position=M,this.index=A,this.dataCoordinate=E}function _(k,M,A,E,I,C){this.gl=k,this.shader=M,this.pickShader=A,this.buffer=E,this.vao=I,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=C,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var s=_.prototype;s.isTransparent=function(){return this.hasAlpha},s.isOpaque=function(){return!this.hasAlpha},s.pickSlots=1,s.setPickBase=function(k){this.pickId=k},s.drawTransparent=s.draw=function(k){if(this.vertexCount){var M=this.gl,A=this.shader,E=this.vao;A.bind(),A.uniforms={model:k.model||l,view:k.view||l,projection:k.projection||l,clipBounds:d(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[M.drawingBufferWidth,M.drawingBufferHeight],pixelRatio:this.pixelRatio},E.bind(),E.draw(M.TRIANGLE_STRIP,this.vertexCount),E.unbind()}},s.drawPick=function(k){if(this.vertexCount){var M=this.gl,A=this.pickShader,E=this.vao;A.bind(),A.uniforms={model:k.model||l,view:k.view||l,projection:k.projection||l,pickId:this.pickId,clipBounds:d(this.clipBounds),screenShape:[M.drawingBufferWidth,M.drawingBufferHeight],pixelRatio:this.pixelRatio},E.bind(),E.draw(M.TRIANGLE_STRIP,this.vertexCount),E.unbind()}},s.update=function(k){var M,A;this.dirty=!0;var E=!!k.connectGaps;"dashScale"in k&&(this.dashScale=k.dashScale),this.hasAlpha=!1,"opacity"in k&&(this.opacity=+k.opacity,this.opacity<1&&(this.hasAlpha=!0));var I=[],C=[],R=[],O=0,D=0,L=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],B=k.position||k.positions;if(B){var j=k.color||k.colors||[0,0,0,1],W=k.lineWidth||1,Y=!1;e:for(M=1;M<B.length;++M){var Q,ne,X,$=B[M-1],re=B[M];for(C.push(O),R.push($.slice()),A=0;A<3;++A){if(isNaN($[A])||isNaN(re[A])||!isFinite($[A])||!isFinite(re[A])){if(!E&&I.length>0){for(var H=0;H<24;++H)I.push(I[I.length-12]);D+=2,Y=!0}continue e}L[0][A]=Math.min(L[0][A],$[A],re[A]),L[1][A]=Math.max(L[1][A],$[A],re[A])}Array.isArray(j[0])?(Q=j.length>M-1?j[M-1]:j.length>0?j[j.length-1]:[0,0,0,1],ne=j.length>M?j[M]:j.length>0?j[j.length-1]:[0,0,0,1]):Q=ne=j,3===Q.length&&(Q=[Q[0],Q[1],Q[2],1]),3===ne.length&&(ne=[ne[0],ne[1],ne[2],1]),!this.hasAlpha&&Q[3]<1&&(this.hasAlpha=!0),X=Array.isArray(W)?W.length>M-1?W[M-1]:W.length>0?W[W.length-1]:[0,0,0,1]:W;var U=O;if(O+=h($,re),Y){for(A=0;A<2;++A)I.push($[0],$[1],$[2],re[0],re[1],re[2],U,X,Q[0],Q[1],Q[2],Q[3]);D+=2,Y=!1}I.push($[0],$[1],$[2],re[0],re[1],re[2],U,X,Q[0],Q[1],Q[2],Q[3],$[0],$[1],$[2],re[0],re[1],re[2],U,-X,Q[0],Q[1],Q[2],Q[3],re[0],re[1],re[2],$[0],$[1],$[2],O,-X,ne[0],ne[1],ne[2],ne[3],re[0],re[1],re[2],$[0],$[1],$[2],O,X,ne[0],ne[1],ne[2],ne[3]),D+=4}}if(this.buffer.update(I),C.push(O),R.push(B[B.length-1].slice()),this.bounds=L,this.vertexCount=D,this.points=R,this.arcLength=C,"dashes"in k){var G=k.dashes.slice();for(G.unshift(0),M=1;M<G.length;++M)G[M]=G[M-1]+G[M];var ie=u(new Array(1024),[256,1,4]);for(M=0;M<256;++M){for(A=0;A<4;++A)ie.set(M,0,A,0);1&p.le(G,G[G.length-1]*M/255)?ie.set(M,0,0,0):ie.set(M,0,0,255)}this.texture.setPixels(ie)}},s.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},s.pick=function(k){if(!k||k.id!==this.pickId)return null;var B,j,W,M=(B=k.value[0],j=k.value[1],W=k.value[2],a[0]=0,a[1]=W,a[2]=j,a[3]=B,t[0]),A=p.le(this.arcLength,M);if(A<0)return null;if(A===this.arcLength.length-1)return new o(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),A);for(var E=this.points[A],I=this.points[Math.min(A+1,this.points.length-1)],C=(M-this.arcLength[A])/(this.arcLength[A+1]-this.arcLength[A]),R=1-C,O=[0,0,0],D=0;D<3;++D)O[D]=R*E[D]+C*I[D];var L=Math.min(C<.5?A:A+1,this.points.length-1);return new o(M,O,L,this.points[L])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(m,w,y){w.exports=function(e){var r=new Float32Array(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}},{}],93:[function(m,w,y){w.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(m,w,y){w.exports=function(e){var r=e[0],n=e[1],a=e[2],t=e[3],p=e[4],u=e[5],i=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],o=e[12],_=e[13],s=e[14],k=e[15];return(r*u-n*p)*(h*k-d*s)-(r*i-a*p)*(l*k-d*_)+(r*c-t*p)*(l*s-h*_)+(n*i-a*u)*(f*k-d*o)-(n*c-t*u)*(f*s-h*o)+(a*c-t*i)*(f*_-l*o)}},{}],95:[function(m,w,y){w.exports=function(e,r){var n=r[0],a=r[1],t=r[2],p=r[3],u=n+n,i=a+a,c=t+t,f=n*u,l=a*u,h=a*i,d=t*u,o=t*i,_=t*c,s=p*u,k=p*i,M=p*c;return e[0]=1-h-_,e[1]=l+M,e[2]=d-k,e[3]=0,e[4]=l-M,e[5]=1-f-_,e[6]=o+s,e[7]=0,e[8]=d+k,e[9]=o-s,e[10]=1-f-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(m,w,y){w.exports=function(e,r,n){var a=r[0],t=r[1],p=r[2],u=r[3],i=a+a,c=t+t,f=p+p,l=a*i,h=a*c,d=a*f,o=t*c,_=t*f,s=p*f,k=u*i,M=u*c,A=u*f;return e[0]=1-(o+s),e[1]=h+A,e[2]=d-M,e[3]=0,e[4]=h-A,e[5]=1-(l+s),e[6]=_+k,e[7]=0,e[8]=d+M,e[9]=_-k,e[10]=1-(l+o),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},{}],97:[function(m,w,y){w.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(m,w,y){w.exports=function(e,r){var n=r[0],a=r[1],t=r[2],p=r[3],u=r[4],i=r[5],c=r[6],f=r[7],l=r[8],h=r[9],d=r[10],o=r[11],_=r[12],s=r[13],k=r[14],M=r[15],A=n*i-a*u,E=n*c-t*u,I=n*f-p*u,C=a*c-t*i,R=a*f-p*i,O=t*f-p*c,D=l*s-h*_,L=l*k-d*_,B=l*M-o*_,j=h*k-d*s,W=h*M-o*s,Y=d*M-o*k,Q=A*Y-E*W+I*j+C*B-R*L+O*D;return Q?(e[0]=(i*Y-c*W+f*j)*(Q=1/Q),e[1]=(t*W-a*Y-p*j)*Q,e[2]=(s*O-k*R+M*C)*Q,e[3]=(d*R-h*O-o*C)*Q,e[4]=(c*B-u*Y-f*L)*Q,e[5]=(n*Y-t*B+p*L)*Q,e[6]=(k*I-_*O-M*E)*Q,e[7]=(l*O-d*I+o*E)*Q,e[8]=(u*W-i*B+f*D)*Q,e[9]=(a*B-n*W-p*D)*Q,e[10]=(_*R-s*I+M*A)*Q,e[11]=(h*I-l*R-o*A)*Q,e[12]=(i*L-u*j-c*D)*Q,e[13]=(n*j-a*L+t*D)*Q,e[14]=(s*E-_*C-k*A)*Q,e[15]=(l*C-h*E+d*A)*Q,e):null}},{}],99:[function(m,w,y){var e=m("./identity");w.exports=function(r,n,a,t){var p,u,i,c,f,l,h,d,o,_,s=n[0],k=n[1],M=n[2],A=t[0],E=t[1],I=t[2],C=a[0],R=a[1],O=a[2];return Math.abs(s-C)<1e-6&&Math.abs(k-R)<1e-6&&Math.abs(M-O)<1e-6?e(r):(h=s-C,d=k-R,o=M-O,p=E*(o*=_=1/Math.sqrt(h*h+d*d+o*o))-I*(d*=_),u=I*(h*=_)-A*o,i=A*d-E*h,(_=Math.sqrt(p*p+u*u+i*i))?(p*=_=1/_,u*=_,i*=_):(p=0,u=0,i=0),c=d*i-o*u,f=o*p-h*i,l=h*u-d*p,(_=Math.sqrt(c*c+f*f+l*l))?(c*=_=1/_,f*=_,l*=_):(c=0,f=0,l=0),r[0]=p,r[1]=c,r[2]=h,r[3]=0,r[4]=u,r[5]=f,r[6]=d,r[7]=0,r[8]=i,r[9]=l,r[10]=o,r[11]=0,r[12]=-(p*s+u*k+i*M),r[13]=-(c*s+f*k+l*M),r[14]=-(h*s+d*k+o*M),r[15]=1,r)}},{"./identity":97}],100:[function(m,w,y){w.exports=function(e,r,n){var a=r[0],t=r[1],p=r[2],u=r[3],i=r[4],c=r[5],f=r[6],l=r[7],h=r[8],d=r[9],o=r[10],_=r[11],s=r[12],k=r[13],M=r[14],A=r[15],E=n[0],I=n[1],C=n[2],R=n[3];return e[0]=E*a+I*i+C*h+R*s,e[1]=E*t+I*c+C*d+R*k,e[2]=E*p+I*f+C*o+R*M,e[3]=E*u+I*l+C*_+R*A,e[4]=(E=n[4])*a+(I=n[5])*i+(C=n[6])*h+(R=n[7])*s,e[5]=E*t+I*c+C*d+R*k,e[6]=E*p+I*f+C*o+R*M,e[7]=E*u+I*l+C*_+R*A,e[8]=(E=n[8])*a+(I=n[9])*i+(C=n[10])*h+(R=n[11])*s,e[9]=E*t+I*c+C*d+R*k,e[10]=E*p+I*f+C*o+R*M,e[11]=E*u+I*l+C*_+R*A,e[12]=(E=n[12])*a+(I=n[13])*i+(C=n[14])*h+(R=n[15])*s,e[13]=E*t+I*c+C*d+R*k,e[14]=E*p+I*f+C*o+R*M,e[15]=E*u+I*l+C*_+R*A,e}},{}],101:[function(m,w,y){w.exports=function(e,r,n,a,t,p,u){var i=1/(r-n),c=1/(a-t),f=1/(p-u);return e[0]=-2*i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(r+n)*i,e[13]=(t+a)*c,e[14]=(u+p)*f,e[15]=1,e}},{}],102:[function(m,w,y){w.exports=function(e,r,n,a,t){var p=1/Math.tan(r/2),u=1/(a-t);return e[0]=p/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=p,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(t+a)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*t*a*u,e[15]=0,e}},{}],103:[function(m,w,y){w.exports=function(e,r,n,a){var t,p,u,i,c,f,l,h,d,o,_,s,k,M,A,E,I,C,R,O,D,L,B,j,W=a[0],Y=a[1],Q=a[2],ne=Math.sqrt(W*W+Y*Y+Q*Q);return Math.abs(ne)<1e-6?null:(W*=ne=1/ne,Y*=ne,Q*=ne,t=Math.sin(n),p=Math.cos(n),c=r[1],f=r[2],l=r[3],d=r[5],o=r[6],_=r[7],k=r[9],M=r[10],A=r[11],R=W*Y*(u=1-p)-Q*t,O=Y*Y*u+p,D=Q*Y*u+W*t,L=W*Q*u+Y*t,B=Y*Q*u-W*t,j=Q*Q*u+p,e[0]=(i=r[0])*(E=W*W*u+p)+(h=r[4])*(I=Y*W*u+Q*t)+(s=r[8])*(C=Q*W*u-Y*t),e[1]=c*E+d*I+k*C,e[2]=f*E+o*I+M*C,e[3]=l*E+_*I+A*C,e[4]=i*R+h*O+s*D,e[5]=c*R+d*O+k*D,e[6]=f*R+o*O+M*D,e[7]=l*R+_*O+A*D,e[8]=i*L+h*B+s*j,e[9]=c*L+d*B+k*j,e[10]=f*L+o*B+M*j,e[11]=l*L+_*B+A*j,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}},{}],104:[function(m,w,y){w.exports=function(e,r,n){var a=Math.sin(n),t=Math.cos(n),p=r[4],u=r[5],i=r[6],c=r[7],f=r[8],l=r[9],h=r[10],d=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=p*t+f*a,e[5]=u*t+l*a,e[6]=i*t+h*a,e[7]=c*t+d*a,e[8]=f*t-p*a,e[9]=l*t-u*a,e[10]=h*t-i*a,e[11]=d*t-c*a,e}},{}],105:[function(m,w,y){w.exports=function(e,r,n){var a=Math.sin(n),t=Math.cos(n),p=r[0],u=r[1],i=r[2],c=r[3],f=r[8],l=r[9],h=r[10],d=r[11];return r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=p*t-f*a,e[1]=u*t-l*a,e[2]=i*t-h*a,e[3]=c*t-d*a,e[8]=p*a+f*t,e[9]=u*a+l*t,e[10]=i*a+h*t,e[11]=c*a+d*t,e}},{}],106:[function(m,w,y){w.exports=function(e,r,n){var a=Math.sin(n),t=Math.cos(n),p=r[0],u=r[1],i=r[2],c=r[3],f=r[4],l=r[5],h=r[6],d=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=p*t+f*a,e[1]=u*t+l*a,e[2]=i*t+h*a,e[3]=c*t+d*a,e[4]=f*t-p*a,e[5]=l*t-u*a,e[6]=h*t-i*a,e[7]=d*t-c*a,e}},{}],107:[function(m,w,y){w.exports=function(e,r,n){var a=n[0],t=n[1],p=n[2];return e[0]=r[0]*a,e[1]=r[1]*a,e[2]=r[2]*a,e[3]=r[3]*a,e[4]=r[4]*t,e[5]=r[5]*t,e[6]=r[6]*t,e[7]=r[7]*t,e[8]=r[8]*p,e[9]=r[9]*p,e[10]=r[10]*p,e[11]=r[11]*p,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}},{}],108:[function(m,w,y){w.exports=function(e,r,n){var a,t,p,u,i,c,f,l,h,d,o,_,s=n[0],k=n[1],M=n[2];return r===e?(e[12]=r[0]*s+r[4]*k+r[8]*M+r[12],e[13]=r[1]*s+r[5]*k+r[9]*M+r[13],e[14]=r[2]*s+r[6]*k+r[10]*M+r[14],e[15]=r[3]*s+r[7]*k+r[11]*M+r[15]):(t=r[1],p=r[2],u=r[3],i=r[4],c=r[5],f=r[6],l=r[7],h=r[8],d=r[9],o=r[10],_=r[11],e[0]=a=r[0],e[1]=t,e[2]=p,e[3]=u,e[4]=i,e[5]=c,e[6]=f,e[7]=l,e[8]=h,e[9]=d,e[10]=o,e[11]=_,e[12]=a*s+i*k+h*M+r[12],e[13]=t*s+c*k+d*M+r[13],e[14]=p*s+f*k+o*M+r[14],e[15]=u*s+l*k+_*M+r[15]),e}},{}],109:[function(m,w,y){w.exports=function(e,r){if(e===r){var n=r[1],a=r[2],t=r[3],p=r[6],u=r[7],i=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=n,e[6]=r[9],e[7]=r[13],e[8]=a,e[9]=p,e[11]=r[14],e[12]=t,e[13]=u,e[14]=i}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}},{}],110:[function(m,w,y){"use strict";var e=m("barycentric"),r=m("polytope-closest-point/lib/closest_point_2d.js");function n(p,u){for(var i=[0,0,0,0],c=0;c<4;++c)for(var f=0;f<4;++f)i[f]+=p[4*c+f]*u[c];return i}function a(p,u,i,c,f){for(var l=n(c,n(i,n(u,[p[0],p[1],p[2],1]))),h=0;h<3;++h)l[h]/=l[3];return[.5*f[0]*(1+l[0]),.5*f[1]*(1-l[1])]}function t(p,u){for(var i=[0,0,0],c=0;c<p.length;++c)for(var f=p[c],l=u[c],h=0;h<3;++h)i[h]+=l*f[h];return i}w.exports=function(p,u,i,c,f,l){if(1===p.length)return[0,p[0].slice()];for(var h=new Array(p.length),d=0;d<p.length;++d)h[d]=a(p[d],i,c,f,l);var o=0,_=1/0;for(d=0;d<h.length;++d){for(var s=0,k=0;k<2;++k)s+=Math.pow(h[d][k]-u[k],2);s<_&&(_=s,o=d)}var M=function(E,I){if(2===E.length){for(var C=0,R=0,O=0;O<2;++O)C+=Math.pow(I[O]-E[0][O],2),R+=Math.pow(I[O]-E[1][O],2);return(C=Math.sqrt(C))+(R=Math.sqrt(R))<1e-6?[1,0]:[R/(C+R),C/(R+C)]}if(3===E.length){var D=[0,0];return r(E[0],E[1],E[2],I,D),e(E,D)}return[]}(h,u),A=0;for(d=0;d<3;++d){if(M[d]<-.001||M[d]>1.0001)return null;A+=M[d]}return Math.abs(A-1)>.001?null:[o,t(p,M),M]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(m,w,y){var e=m("glslify"),r=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),n=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),t=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),p=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),u=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),c=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),f=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),h=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);y.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},y.wireShader={vertex:a,fragment:t,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},y.pointShader={vertex:p,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},y.pickShader={vertex:i,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},y.pointPickShader={vertex:f,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},y.contourShader={vertex:l,fragment:h,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(m,w,y){"use strict";var e=m("gl-shader"),r=m("gl-buffer"),n=m("gl-vao"),a=m("gl-texture2d"),t=m("normals"),p=m("gl-mat4/multiply"),u=m("gl-mat4/invert"),i=m("ndarray"),c=m("colormap"),f=m("simplicial-complex-contour"),l=m("typedarray-pool"),h=m("./lib/shaders"),d=m("./lib/closest-point"),o=h.meshShader,_=h.wireShader,s=h.pointShader,k=h.pickShader,M=h.pointPickShader,A=h.contourShader,E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function I(Y,Q,ne,X,$,re,H,U,G,ie,q,ee,te,se,ue,de,he,xe,ge,_e,Ce,Le,Ie,Be,ve,Te,Pe){this.gl=Y,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=Q,this.dirty=!0,this.triShader=ne,this.lineShader=X,this.pointShader=$,this.pickShader=re,this.pointPickShader=H,this.contourShader=U,this.trianglePositions=G,this.triangleColors=q,this.triangleNormals=te,this.triangleUVs=ee,this.triangleIds=ie,this.triangleVAO=se,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ue,this.edgeColors=he,this.edgeUVs=xe,this.edgeIds=de,this.edgeVAO=ge,this.edgeCount=0,this.pointPositions=_e,this.pointColors=Le,this.pointUVs=Ie,this.pointSizes=Be,this.pointIds=Ce,this.pointVAO=ve,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Te,this.contourVAO=Pe,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=E,this._view=E,this._projection=E,this._resolution=[1,1]}var C=I.prototype;function R(Y,Q){if(!Q||!Q.length)return 1;for(var ne=0;ne<Q.length;++ne){if(Q.length<2)return 1;if(Q[ne][0]===Y)return Q[ne][1];if(Q[ne][0]>Y&&ne>0){var X=(Q[ne][0]-Y)/(Q[ne][0]-Q[ne-1][0]);return Q[ne][1]*(1-X)+X*Q[ne-1][1]}}return 1}function O(Y){var Q=e(Y,o.vertex,o.fragment);return Q.attributes.position.location=0,Q.attributes.color.location=2,Q.attributes.uv.location=3,Q.attributes.normal.location=4,Q}function D(Y){var Q=e(Y,_.vertex,_.fragment);return Q.attributes.position.location=0,Q.attributes.color.location=2,Q.attributes.uv.location=3,Q}function L(Y){var Q=e(Y,s.vertex,s.fragment);return Q.attributes.position.location=0,Q.attributes.color.location=2,Q.attributes.uv.location=3,Q.attributes.pointSize.location=4,Q}function B(Y){var Q=e(Y,k.vertex,k.fragment);return Q.attributes.position.location=0,Q.attributes.id.location=1,Q}function j(Y){var Q=e(Y,M.vertex,M.fragment);return Q.attributes.position.location=0,Q.attributes.id.location=1,Q.attributes.pointSize.location=4,Q}function W(Y){var Q=e(Y,A.vertex,A.fragment);return Q.attributes.position.location=0,Q}C.isOpaque=function(){return!this.hasAlpha},C.isTransparent=function(){return this.hasAlpha},C.pickSlots=1,C.setPickBase=function(Y){this.pickId=Y},C.highlight=function(Y){if(Y&&this.contourEnable){for(var Q=f(this.cells,this.intensity,Y.intensity),ne=Q.cells,X=Q.vertexIds,$=Q.vertexWeights,re=ne.length,H=l.mallocFloat32(6*re),U=0,G=0;G<re;++G)for(var ie=ne[G],q=0;q<2;++q){var ee=ie[0];2===ie.length&&(ee=ie[q]);for(var ue=$[ee],de=1-ue,he=this.positions[X[ee][0]],xe=this.positions[X[ee][1]],ge=0;ge<3;++ge)H[U++]=ue*he[ge]+de*xe[ge]}this.contourCount=U/3|0,this.contourPositions.update(H.subarray(0,U)),l.free(H)}else this.contourCount=0},C.update=function(Y){Y=Y||{};var Q=this.gl;this.dirty=!0,"contourEnable"in Y&&(this.contourEnable=Y.contourEnable),"contourColor"in Y&&(this.contourColor=Y.contourColor),"lineWidth"in Y&&(this.lineWidth=Y.lineWidth),"lightPosition"in Y&&(this.lightPosition=Y.lightPosition),this.hasAlpha=!1,"opacity"in Y&&(this.opacity=Y.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in Y&&(this.opacityscale=Y.opacityscale,this.hasAlpha=!0),"ambient"in Y&&(this.ambientLight=Y.ambient),"diffuse"in Y&&(this.diffuseLight=Y.diffuse),"specular"in Y&&(this.specularLight=Y.specular),"roughness"in Y&&(this.roughness=Y.roughness),"fresnel"in Y&&(this.fresnel=Y.fresnel),Y.texture?(this.texture.dispose(),this.texture=a(Q,Y.texture)):Y.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=Q.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=Q.LINEAR,this.texture.setPixels(function(ln,dn){for(var cn=c({colormap:ln,nshades:256,format:"rgba"}),Tn=new Uint8Array(1024),nn=0;nn<256;++nn){for(var Me=cn[nn],Ee=0;Ee<3;++Ee)Tn[4*nn+Ee]=Me[Ee];Tn[4*nn+3]=dn?255*R(nn/255,dn):255*Me[3]}return i(Tn,[256,256,4],[4,0,1])}(Y.colormap,this.opacityscale)),this.texture.generateMipmap());var ne=Y.cells,X=Y.positions;if(X&&ne){var $=[],re=[],H=[],U=[],G=[],ie=[],q=[],ee=[],te=[],se=[],ue=[],de=[],he=[],xe=[];this.cells=ne,this.positions=X;var ge=Y.vertexNormals,_e=Y.cellNormals,Ce=void 0===Y.vertexNormalsEpsilon?1e-6:Y.vertexNormalsEpsilon;Y.useFacetNormals&&!_e&&(_e=t.faceNormals(ne,X,void 0===Y.faceNormalsEpsilon?1e-6:Y.faceNormalsEpsilon)),_e||ge||(ge=t.vertexNormals(ne,X,Ce));var Ie=Y.vertexColors,Be=Y.cellColors,ve=Y.meshColor||[1,1,1,1],Te=Y.vertexUVs,Pe=Y.vertexIntensity,De=Y.cellUVs,Fe=Y.cellIntensity,Ue=1/0,He=-1/0;if(!Te&&!De)if(Pe)if(Y.vertexIntensityBounds)Ue=+Y.vertexIntensityBounds[0],He=+Y.vertexIntensityBounds[1];else for(var Ke=0;Ke<Pe.length;++Ke){var st=Pe[Ke];Ue=Math.min(Ue,st),He=Math.max(He,st)}else if(Fe)if(Y.cellIntensityBounds)Ue=+Y.cellIntensityBounds[0],He=+Y.cellIntensityBounds[1];else for(Ke=0;Ke<Fe.length;++Ke)st=Fe[Ke],Ue=Math.min(Ue,st),He=Math.max(He,st);else for(Ke=0;Ke<X.length;++Ke)st=X[Ke][2],Ue=Math.min(Ue,st),He=Math.max(He,st);this.intensity=Pe||Fe||function(ln){for(var dn=ln.length,cn=new Array(dn),Tn=0;Tn<dn;++Tn)cn[Tn]=ln[Tn][2];return cn}(X),this.pickVertex=!(Fe||Be);var Ve=Y.pointSizes,$e=Y.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Ke=0;Ke<X.length;++Ke)for(var Qe=X[Ke],tt=0;tt<3;++tt)!isNaN(Qe[tt])&&isFinite(Qe[tt])&&(this.bounds[0][tt]=Math.min(this.bounds[0][tt],Qe[tt]),this.bounds[1][tt]=Math.max(this.bounds[1][tt],Qe[tt]));var ut=0,xt=0,kt=0;e:for(Ke=0;Ke<ne.length;++Ke){var Bt=ne[Ke];switch(Bt.length){case 1:for(Qe=X[ft=Bt[0]],tt=0;tt<3;++tt)if(isNaN(Qe[tt])||!isFinite(Qe[tt]))continue e;se.push(Qe[0],Qe[1],Qe[2]),lt=Ie?Ie[ft]:Be?Be[Ke]:ve,this.opacityscale&&Pe?re.push(lt[0],lt[1],lt[2],this.opacity*R((Pe[ft]-Ue)/(He-Ue),this.opacityscale)):3===lt.length?ue.push(lt[0],lt[1],lt[2],this.opacity):(ue.push(lt[0],lt[1],lt[2],lt[3]*this.opacity),lt[3]<1&&(this.hasAlpha=!0)),de.push((Ft=Te?Te[ft]:Pe?[(Pe[ft]-Ue)/(He-Ue),0]:De?De[Ke]:Fe?[(Fe[Ke]-Ue)/(He-Ue),0]:[(Qe[2]-Ue)/(He-Ue),0])[0],Ft[1]),he.push(Ve?Ve[ft]:$e),xe.push(Ke),kt+=1;break;case 2:for(tt=0;tt<2;++tt){Qe=X[ft=Bt[tt]];for(var Rt=0;Rt<3;++Rt)if(isNaN(Qe[Rt])||!isFinite(Qe[Rt]))continue e}for(tt=0;tt<2;++tt)Qe=X[ft=Bt[tt]],ie.push(Qe[0],Qe[1],Qe[2]),lt=Ie?Ie[ft]:Be?Be[Ke]:ve,this.opacityscale&&Pe?re.push(lt[0],lt[1],lt[2],this.opacity*R((Pe[ft]-Ue)/(He-Ue),this.opacityscale)):3===lt.length?q.push(lt[0],lt[1],lt[2],this.opacity):(q.push(lt[0],lt[1],lt[2],lt[3]*this.opacity),lt[3]<1&&(this.hasAlpha=!0)),ee.push((Ft=Te?Te[ft]:Pe?[(Pe[ft]-Ue)/(He-Ue),0]:De?De[Ke]:Fe?[(Fe[Ke]-Ue)/(He-Ue),0]:[(Qe[2]-Ue)/(He-Ue),0])[0],Ft[1]),te.push(Ke);xt+=1;break;case 3:for(tt=0;tt<3;++tt)for(Qe=X[ft=Bt[tt]],Rt=0;Rt<3;++Rt)if(isNaN(Qe[Rt])||!isFinite(Qe[Rt]))continue e;for(tt=0;tt<3;++tt){var ft,lt,Ft,Jt;Qe=X[ft=Bt[2-tt]],$.push(Qe[0],Qe[1],Qe[2]),(lt=Ie?Ie[ft]:Be?Be[Ke]:ve)?this.opacityscale&&Pe?re.push(lt[0],lt[1],lt[2],this.opacity*R((Pe[ft]-Ue)/(He-Ue),this.opacityscale)):3===lt.length?re.push(lt[0],lt[1],lt[2],this.opacity):(re.push(lt[0],lt[1],lt[2],lt[3]*this.opacity),lt[3]<1&&(this.hasAlpha=!0)):re.push(.5,.5,.5,1),U.push((Ft=Te?Te[ft]:Pe?[(Pe[ft]-Ue)/(He-Ue),0]:De?De[Ke]:Fe?[(Fe[Ke]-Ue)/(He-Ue),0]:[(Qe[2]-Ue)/(He-Ue),0])[0],Ft[1]),H.push((Jt=ge?ge[ft]:_e[Ke])[0],Jt[1],Jt[2]),G.push(Ke)}ut+=1}}this.pointCount=kt,this.edgeCount=xt,this.triangleCount=ut,this.pointPositions.update(se),this.pointColors.update(ue),this.pointUVs.update(de),this.pointSizes.update(he),this.pointIds.update(new Uint32Array(xe)),this.edgePositions.update(ie),this.edgeColors.update(q),this.edgeUVs.update(ee),this.edgeIds.update(new Uint32Array(te)),this.trianglePositions.update($),this.triangleColors.update(re),this.triangleUVs.update(U),this.triangleNormals.update(H),this.triangleIds.update(new Uint32Array(G))}},C.drawTransparent=C.draw=function(Y){for(var Q=this.gl,ne=(Y=Y||{}).model||E,X=Y.view||E,$=Y.projection||E,re=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],H=0;H<3;++H)re[0][H]=Math.max(re[0][H],this.clipBounds[0][H]),re[1][H]=Math.min(re[1][H],this.clipBounds[1][H]);var U={model:ne,view:X,projection:$,inverseModel:E.slice(),clipBounds:re,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};U.inverseModel=u(U.inverseModel,U.model),Q.disable(Q.CULL_FACE),this.texture.bind(0);var G=new Array(16);for(p(G,U.view,U.model),p(G,U.projection,G),u(G,G),H=0;H<3;++H)U.eyePosition[H]=G[12+H]/G[15];var ie,q=G[15];for(H=0;H<3;++H)q+=this.lightPosition[H]*G[4*H+3];for(H=0;H<3;++H){for(var ee=G[12+H],te=0;te<3;++te)ee+=G[4*te+H]*this.lightPosition[te];U.lightPosition[H]=ee/q}this.triangleCount>0&&((ie=this.triShader).bind(),ie.uniforms=U,this.triangleVAO.bind(),Q.drawArrays(Q.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ie=this.lineShader).bind(),ie.uniforms=U,this.edgeVAO.bind(),Q.lineWidth(this.lineWidth*this.pixelRatio),Q.drawArrays(Q.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ie=this.pointShader).bind(),ie.uniforms=U,this.pointVAO.bind(),Q.drawArrays(Q.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ie=this.contourShader).bind(),ie.uniforms=U,this.contourVAO.bind(),Q.drawArrays(Q.LINES,0,this.contourCount),this.contourVAO.unbind())},C.drawPick=function(Y){for(var Q=this.gl,ne=(Y=Y||{}).model||E,X=Y.view||E,$=Y.projection||E,re=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],H=0;H<3;++H)re[0][H]=Math.max(re[0][H],this.clipBounds[0][H]),re[1][H]=Math.min(re[1][H],this.clipBounds[1][H]);this._model=[].slice.call(ne),this._view=[].slice.call(X),this._projection=[].slice.call($),this._resolution=[Q.drawingBufferWidth,Q.drawingBufferHeight];var U,G={model:ne,view:X,projection:$,clipBounds:re,pickId:this.pickId/255};(U=this.pickShader).bind(),U.uniforms=G,this.triangleCount>0&&(this.triangleVAO.bind(),Q.drawArrays(Q.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),Q.lineWidth(this.lineWidth*this.pixelRatio),Q.drawArrays(Q.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((U=this.pointPickShader).bind(),U.uniforms=G,this.pointVAO.bind(),Q.drawArrays(Q.POINTS,0,this.pointCount),this.pointVAO.unbind())},C.pick=function(Y){if(!Y||Y.id!==this.pickId)return null;for(var Q=Y.value[0]+256*Y.value[1]+65536*Y.value[2],ne=this.cells[Q],X=this.positions,$=new Array(ne.length),re=0;re<ne.length;++re)$[re]=X[ne[re]];var H=Y.coord[0],U=Y.coord[1];if(!this.pickVertex){var G=this.positions[ne[0]],ie=this.positions[ne[1]],q=this.positions[ne[2]];return{_cellCenter:!0,position:[H,U],index:Q,cell:ne,cellId:Q,intensity:this.intensity[Q],dataCoordinate:[(G[0]+ie[0]+q[0])/3,(G[1]+ie[1]+q[1])/3,(G[2]+ie[2]+q[2])/3]}}var te=d($,[H*this.pixelRatio,this._resolution[1]-U*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!te)return null;var se=te[2],ue=0;for(re=0;re<ne.length;++re)ue+=se[re]*this.intensity[ne[re]];return{position:te[1],index:ne[te[0]],cell:ne,cellId:Q,intensity:ue,dataCoordinate:this.positions[ne[te[0]]]}},C.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},w.exports=function(Y,Q){if(1===arguments.length&&(Y=(Q=Y).gl),!(Y.getExtension("OES_standard_derivatives")||Y.getExtension("MOZ_OES_standard_derivatives")||Y.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var X=O(Y),$=D(Y),re=L(Y),H=B(Y),U=j(Y),G=W(Y),ie=a(Y,i(new Uint8Array([255,255,255,255]),[1,1,4]));ie.generateMipmap(),ie.minFilter=Y.LINEAR_MIPMAP_LINEAR,ie.magFilter=Y.LINEAR;var q=r(Y),ee=r(Y),te=r(Y),se=r(Y),ue=r(Y),de=n(Y,[{buffer:q,type:Y.FLOAT,size:3},{buffer:ue,type:Y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ee,type:Y.FLOAT,size:4},{buffer:te,type:Y.FLOAT,size:2},{buffer:se,type:Y.FLOAT,size:3}]),he=r(Y),xe=r(Y),ge=r(Y),_e=r(Y),Ce=n(Y,[{buffer:he,type:Y.FLOAT,size:3},{buffer:_e,type:Y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:xe,type:Y.FLOAT,size:4},{buffer:ge,type:Y.FLOAT,size:2}]),Le=r(Y),Ie=r(Y),Be=r(Y),ve=r(Y),Te=r(Y),Pe=n(Y,[{buffer:Le,type:Y.FLOAT,size:3},{buffer:Te,type:Y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Ie,type:Y.FLOAT,size:4},{buffer:Be,type:Y.FLOAT,size:2},{buffer:ve,type:Y.FLOAT,size:1}]),De=r(Y),Ue=new I(Y,ie,X,$,re,H,U,G,q,ue,ee,te,se,de,he,_e,xe,ge,Ce,Le,Te,Ie,Be,ve,Pe,De,n(Y,[{buffer:De,type:Y.FLOAT,size:3}]));return Ue.update(Q),Ue}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(m,w,y){"use strict";w.exports=function(i){var c=i.gl;return new a(i,e(c,[0,0,0,1,1,0,1,1]),r(c,n.boxVert,n.lineFrag))};var e=m("gl-buffer"),r=m("gl-shader"),n=m("./shaders");function a(i,c,f){this.plot=i,this.vbo=c,this.shader=f}var t,p,u=a.prototype;u.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},u.drawBox=(t=[0,0],p=[0,0],function(i,c,f,l,h){var o=this.shader,_=this.plot.gl;t[0]=i,t[1]=c,p[0]=f,p[1]=l,o.uniforms.lo=t,o.uniforms.hi=p,o.uniforms.color=h,_.drawArrays(_.TRIANGLE_STRIP,0,4)}),u.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(m,w,y){"use strict";w.exports=function(d){var o=d.gl;return new t(d,e(o),r(o,a.gridVert,a.gridFrag),r(o,a.tickVert,a.gridFrag))};var e=m("gl-buffer"),r=m("gl-shader"),n=m("binary-search-bounds"),a=m("./shaders");function t(d,o,_,s){this.plot=d,this.vbo=o,this.shader=_,this.tickShader=s,this.ticks=[[],[]]}function p(d,o){return d-o}var u,i,c,f,l,d,o,_,s,k,M,h=t.prototype;h.draw=(u=[0,0],i=[0,0],c=[0,0],function(){for(var d=this.plot,o=this.vbo,_=this.shader,s=this.ticks,k=d.gl,M=d._tickBounds,A=d.dataBox,E=d.viewBox,I=d.gridLineWidth,C=d.gridLineColor,R=d.gridLineEnable,O=d.pixelRatio,D=0;D<2;++D){var L=M[D],j=.5*(A[D+2]+A[D]),W=A[D+2]-A[D];i[D]=2*(M[D+2]-L)/W,u[D]=2*(L-j)/W}_.bind(),o.bind(),_.attributes.dataCoord.pointer(),_.uniforms.dataShift=u,_.uniforms.dataScale=i;var Y=0;for(D=0;D<2;++D){c[0]=c[1]=0,c[D]=1,_.uniforms.dataAxis=c,_.uniforms.lineWidth=I[D]/(E[D+2]-E[D])*O,_.uniforms.color=C[D];var Q=6*s[D].length;R[D]&&Q&&k.drawArrays(k.TRIANGLES,Y,Q),Y+=Q}}),h.drawTickMarks=(d=[0,0],o=[0,0],_=[1,0],s=[0,1],k=[0,0],M=[0,0],function(){for(var A=this.plot,E=this.vbo,I=this.tickShader,C=this.ticks,R=A.gl,O=A._tickBounds,D=A.dataBox,L=A.viewBox,B=A.pixelRatio,j=A.screenBox,W=j[2]-j[0],Y=j[3]-j[1],Q=L[2]-L[0],ne=L[3]-L[1],X=0;X<2;++X){var $=O[X],H=.5*(D[X+2]+D[X]),U=D[X+2]-D[X];o[X]=2*(O[X+2]-$)/U,d[X]=2*($-H)/U}o[0]*=Q/W,d[0]*=Q/W,o[1]*=ne/Y,d[1]*=ne/Y,I.bind(),E.bind(),I.attributes.dataCoord.pointer();var G=I.uniforms;G.dataShift=d,G.dataScale=o;var ie=A.tickMarkLength,q=A.tickMarkWidth,ee=A.tickMarkColor,te=6*C[0].length,se=Math.min(n.ge(C[0],(D[0]-O[0])/(O[2]-O[0]),p),C[0].length),ue=Math.min(n.gt(C[0],(D[2]-O[0])/(O[2]-O[0]),p),C[0].length),de=0+6*se,he=6*Math.max(0,ue-se),xe=Math.min(n.ge(C[1],(D[1]-O[1])/(O[3]-O[1]),p),C[1].length),ge=Math.min(n.gt(C[1],(D[3]-O[1])/(O[3]-O[1]),p),C[1].length),_e=te+6*xe,Ce=6*Math.max(0,ge-xe);k[0]=2*(L[0]-ie[1])/W-1,k[1]=(L[3]+L[1])/Y-1,M[0]=ie[1]*B/W,M[1]=q[1]*B/Y,Ce&&(G.color=ee[1],G.tickScale=M,G.dataAxis=s,G.screenOffset=k,R.drawArrays(R.TRIANGLES,_e,Ce)),k[0]=(L[2]+L[0])/W-1,k[1]=2*(L[1]-ie[0])/Y-1,M[0]=q[0]*B/W,M[1]=ie[0]*B/Y,he&&(G.color=ee[0],G.tickScale=M,G.dataAxis=_,G.screenOffset=k,R.drawArrays(R.TRIANGLES,de,he)),k[0]=2*(L[2]+ie[3])/W-1,k[1]=(L[3]+L[1])/Y-1,M[0]=ie[3]*B/W,M[1]=q[3]*B/Y,Ce&&(G.color=ee[3],G.tickScale=M,G.dataAxis=s,G.screenOffset=k,R.drawArrays(R.TRIANGLES,_e,Ce)),k[0]=(L[2]+L[0])/W-1,k[1]=2*(L[3]+ie[2])/Y-1,M[0]=q[2]*B/W,M[1]=ie[2]*B/Y,he&&(G.color=ee[2],G.tickScale=M,G.dataAxis=_,G.screenOffset=k,R.drawArrays(R.TRIANGLES,de,he))}),h.update=(f=[1,1,-1,-1,1,-1],l=[1,-1,1,1,-1,-1],function(d){for(var o=d.ticks,_=d.bounds,s=new Float32Array(18*(o[0].length+o[1].length)),k=0,M=[[],[]],A=0;A<2;++A)for(var E=M[A],I=o[A],C=_[A],R=_[A+2],O=0;O<I.length;++O){var D=(I[O].x-C)/(R-C);E.push(D);for(var L=0;L<6;++L)s[k++]=D,s[k++]=f[L],s[k++]=l[L]}this.ticks=M,this.vbo.update(s)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(m,w,y){"use strict";w.exports=function(i){var c=i.gl;return new a(i,e(c,[-1,-1,-1,1,1,-1,1,1]),r(c,n.lineVert,n.lineFrag))};var e=m("gl-buffer"),r=m("gl-shader"),n=m("./shaders");function a(i,c,f){this.plot=i,this.vbo=c,this.shader=f}var t,p,u=a.prototype;u.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},u.drawLine=(t=[0,0],p=[0,0],function(i,c,f,l,h,d){var o=this.plot,_=this.shader,s=o.gl;t[0]=i,t[1]=c,p[0]=f,p[1]=l,_.uniforms.start=t,_.uniforms.end=p,_.uniforms.width=h*o.pixelRatio,_.uniforms.color=d,s.drawArrays(s.TRIANGLE_STRIP,0,4)}),u.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(m,w,y){"use strict";var e=m("glslify"),r=e(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);w.exports={lineVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:r,textVert:e(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:r,gridVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:r,boxVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(m,w,y){"use strict";w.exports=function(o){var _=o.gl;return new p(o,e(_),r(_,t.textVert,t.textFrag))};var e=m("gl-buffer"),r=m("gl-shader"),n=m("text-cache"),a=m("binary-search-bounds"),t=m("./shaders");function p(o,_,s){this.plot=o,this.vbo=_,this.shader=s,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var u,i,c,f,l,h,o,_,d=p.prototype;d.drawTicks=(u=[0,0],i=[0,0],c=[0,0],function(o){var _=this.plot,s=this.shader,k=this.tickX[o],M=this.tickOffset[o],A=_.gl,E=_.viewBox,I=_.dataBox,C=_.screenBox,R=_.pixelRatio,O=_.tickEnable,D=_.tickPad,L=_.tickColor,B=_.tickAngle,j=_.labelEnable,W=_.labelPad,Y=_.labelColor,Q=_.labelAngle,ne=this.labelOffset[o],X=this.labelCount[o],$=a.lt(k,I[o]),re=a.le(k,I[o+2]);u[0]=u[1]=0,u[o]=1,i[o]=(E[2+o]+E[o])/(C[2+o]-C[o])-1;var H=2/C[2+(1^o)]-C[1^o];i[1^o]=H*E[1^o]-1,O[o]&&(i[1^o]-=H*R*D[o],$<re&&M[re]>M[$]&&(s.uniforms.dataAxis=u,s.uniforms.screenOffset=i,s.uniforms.color=L[o],s.uniforms.angle=B[o],A.drawArrays(A.TRIANGLES,M[$],M[re]-M[$]))),j[o]&&X&&(i[1^o]-=H*R*W[o],s.uniforms.dataAxis=c,s.uniforms.screenOffset=i,s.uniforms.color=Y[o],s.uniforms.angle=Q[o],A.drawArrays(A.TRIANGLES,ne,X)),i[1^o]=H*E[2+(1^o)]-1,O[o+2]&&(i[1^o]+=H*R*D[o+2],$<re&&M[re]>M[$]&&(s.uniforms.dataAxis=u,s.uniforms.screenOffset=i,s.uniforms.color=L[o+2],s.uniforms.angle=B[o+2],A.drawArrays(A.TRIANGLES,M[$],M[re]-M[$]))),j[o+2]&&X&&(i[1^o]+=H*R*W[o+2],s.uniforms.dataAxis=c,s.uniforms.screenOffset=i,s.uniforms.color=Y[o+2],s.uniforms.angle=Q[o+2],A.drawArrays(A.TRIANGLES,ne,X))}),d.drawTitle=(o=[0,0],_=[0,0],function(){var s=this.plot,k=this.shader,M=s.gl,A=s.screenBox,E=s.titleCenter,I=s.titleAngle,C=s.titleColor,R=s.pixelRatio;if(this.titleCount){for(var O=0;O<2;++O)_[O]=2*(E[O]*R-A[O])/(A[2+O]-A[O])-1;k.bind(),k.uniforms.dataAxis=o,k.uniforms.screenOffset=_,k.uniforms.angle=I,k.uniforms.color=C,M.drawArrays(M.TRIANGLES,this.titleOffset,this.titleCount)}}),d.bind=(f=[0,0],l=[0,0],h=[0,0],function(){var o=this.plot,_=this.shader,s=o._tickBounds,k=o.dataBox,M=o.screenBox,A=o.viewBox;_.bind();for(var E=0;E<2;++E){var I=s[E],R=.5*(k[E+2]+k[E]),O=k[E+2]-k[E],L=A[E+2]-A[E],j=M[E+2]-M[E];l[E]=2*(s[E+2]-I)/O*L/j,f[E]=2*(I-R)/O*L/j}h[1]=2*o.pixelRatio/(M[3]-M[1]),h[0]=h[1]*(M[3]-M[1])/(M[2]-M[0]),_.uniforms.dataScale=l,_.uniforms.dataShift=f,_.uniforms.textScale=h,this.vbo.bind(),_.attributes.textCoordinate.pointer()}),d.update=function(o){var _,s,k,M,A,E=[],I=o.ticks,C=o.bounds;for(A=0;A<2;++A){var R=[Math.floor(E.length/3)],O=[-1/0],D=I[A];for(_=0;_<D.length;++_){var L=D[_],B=L.x,W=L.font||"sans-serif";M=L.fontSize||12;for(var Y=1/(C[A+2]-C[A]),Q=C[A],ne=L.text.split("\n"),X=0;X<ne.length;X++)for(k=n(W,ne[X]).data,s=0;s<k.length;s+=2)E.push(k[s]*M,-k[s+1]*M-X*M*1.2,(B-Q)*Y);R.push(Math.floor(E.length/3)),O.push(B)}this.tickOffset[A]=R,this.tickX[A]=O}for(A=0;A<2;++A){for(this.labelOffset[A]=Math.floor(E.length/3),k=n(o.labelFont[A],o.labels[A],{textAlign:"center"}).data,M=o.labelSize[A],_=0;_<k.length;_+=2)E.push(k[_]*M,-k[_+1]*M,0);this.labelCount[A]=Math.floor(E.length/3)-this.labelOffset[A]}for(this.titleOffset=Math.floor(E.length/3),k=n(o.titleFont,o.title).data,M=o.titleSize,_=0;_<k.length;_+=2)E.push(k[_]*M,-k[_+1]*M,0);this.titleCount=Math.floor(E.length/3)-this.titleOffset,this.vbo.update(E)},d.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(m,w,y){"use strict";w.exports=function(f){var l=f.gl,d=new p(l,e(l,[l.drawingBufferWidth,l.drawingBufferHeight]));return d.grid=r(d),d.text=n(d),d.line=a(d),d.box=t(d),d.update(f),d};var e=m("gl-select-static"),r=m("./lib/grid"),n=m("./lib/text"),a=m("./lib/line"),t=m("./lib/box");function p(f,l){this.gl=f,this.pickBuffer=l,this.screenBox=[0,0,f.drawingBufferWidth,f.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var u=p.prototype;function i(f){for(var l=f.slice(),h=0;h<l.length;++h)l[h]=l[h].slice();return l}function c(f,l){return f.x-l.x}u.setDirty=function(){this.dirty=this.pickDirty=!0},u.setOverlayDirty=function(){this.dirty=!0},u.nextDepthValue=function(){return this._depthCounter++/65536},u.draw=function(){var f=this.gl,l=this.screenBox,h=this.viewBox,d=this.dataBox,o=this.pixelRatio,_=this.grid,s=this.line,k=this.text,M=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,f.bindFramebuffer(f.FRAMEBUFFER,null),f.enable(f.SCISSOR_TEST),f.disable(f.DEPTH_TEST),f.depthFunc(f.LESS),f.depthMask(!1),f.enable(f.BLEND),f.blendEquation(f.FUNC_ADD,f.FUNC_ADD),f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA),this.borderColor){f.scissor(l[0],l[1],l[2]-l[0],l[3]-l[1]);var A=this.borderColor;f.clearColor(A[0]*A[3],A[1]*A[3],A[2]*A[3],A[3]),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT)}f.scissor(h[0],h[1],h[2]-h[0],h[3]-h[1]),f.viewport(h[0],h[1],h[2]-h[0],h[3]-h[1]);var E=this.backgroundColor;f.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),f.clear(f.COLOR_BUFFER_BIT),_.draw();var I=this.zeroLineEnable,C=this.zeroLineColor,R=this.zeroLineWidth;if(I[0]||I[1]){s.bind();for(var O=0;O<2;++O)if(I[O]&&d[O]<=0&&d[O+2]>=0){var D=l[O]-d[O]*(l[O+2]-l[O])/(d[O+2]-d[O]);0===O?s.drawLine(D,l[1],D,l[3],R[O],C[O]):s.drawLine(l[0],D,l[2],D,R[O],C[O])}}for(O=0;O<M.length;++O)M[O].draw();f.viewport(l[0],l[1],l[2]-l[0],l[3]-l[1]),f.scissor(l[0],l[1],l[2]-l[0],l[3]-l[1]),this.grid.drawTickMarks(),s.bind();var L=this.borderLineEnable,B=this.borderLineWidth,j=this.borderLineColor;for(L[1]&&s.drawLine(h[0],h[1]-.5*B[1]*o,h[0],h[3]+.5*B[3]*o,B[1],j[1]),L[0]&&s.drawLine(h[0]-.5*B[0]*o,h[1],h[2]+.5*B[2]*o,h[1],B[0],j[0]),L[3]&&s.drawLine(h[2],h[1]-.5*B[1]*o,h[2],h[3]+.5*B[3]*o,B[3],j[3]),L[2]&&s.drawLine(h[0]-.5*B[0]*o,h[3],h[2]+.5*B[2]*o,h[3],B[2],j[2]),k.bind(),O=0;O<2;++O)k.drawTicks(O);this.titleEnable&&k.drawTitle();var W=this.overlays;for(O=0;O<W.length;++O)W[O].draw();f.disable(f.SCISSOR_TEST),f.disable(f.BLEND),f.depthMask(!0)}},u.drawPick=function(){if(!this.static){var f=this.pickBuffer;this._pickTimeout=null,f.begin();for(var l=1,h=this.objects,d=0;d<h.length;++d)l=h[d].drawPick(l);f.end()}},u.pick=function(f,l){if(!this.static){var h=this.pixelRatio,d=this.pickPixelRatio,o=this.viewBox,_=0|Math.round((f-o[0]/h)*d),s=0|Math.round((l-o[1]/h)*d),k=this.pickBuffer.query(_,s,this.pickRadius);if(!k)return null;for(var M=k.id+(k.value[0]<<8)+(k.value[1]<<16)+(k.value[2]<<24),A=this.objects,E=0;E<A.length;++E){var I=A[E].pick(_,s,M);if(I)return I}return null}},u.setScreenBox=function(f){var l=this.screenBox,h=this.pixelRatio;l[0]=0|Math.round(f[0]*h),l[1]=0|Math.round(f[1]*h),l[2]=0|Math.round(f[2]*h),l[3]=0|Math.round(f[3]*h),this.setDirty()},u.setDataBox=function(f){var l=this.dataBox;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3])&&(l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3],this.setDirty())},u.setViewBox=function(f){var l=this.pixelRatio,h=this.viewBox;h[0]=0|Math.round(f[0]*l),h[1]=0|Math.round(f[1]*l),h[2]=0|Math.round(f[2]*l),h[3]=0|Math.round(f[3]*l);var d=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((f[2]-f[0])*d),0|Math.round((f[3]-f[1])*d)],this.setDirty()},u.update=function(f){var l=this.gl;this.pixelRatio=(f=f||{}).pixelRatio||1;var h=this.pixelRatio;this.pickPixelRatio=Math.max(h,1),this.setScreenBox(f.screenBox||[0,0,l.drawingBufferWidth/h,l.drawingBufferHeight/h]),this.setViewBox(f.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/h,.125*(this.screenBox[3]-this.screenBox[1])/h,.875*(this.screenBox[2]-this.screenBox[0])/h,.875*(this.screenBox[3]-this.screenBox[1])/h]);var d=this.viewBox,o=(d[2]-d[0])/(d[3]-d[1]);this.setDataBox(f.dataBox||[-10,-10/o,10,10/o]),this.borderColor=!1!==f.borderColor&&(f.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(f.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(f.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(f.gridLineWidth||[1,1]).slice(),this.gridLineColor=i(f.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(f.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(f.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=i(f.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(f.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(f.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=i(f.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(f.titleCenter||[.5*(d[0]+d[2])/h,(d[3]+120)/h]).slice(),this.titleEnable=!("titleEnable"in f)||!!f.titleEnable,this.titleAngle=f.titleAngle||0,this.titleColor=(f.titleColor||[0,0,0,1]).slice(),this.labelPad=(f.labelPad||[15,15,15,15]).slice(),this.labelAngle=(f.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(f.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=i(f.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(f.tickPad||[15,15,15,15]).slice(),this.tickAngle=(f.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(f.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=i(f.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(f.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(f.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=i(f.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var _=f.ticks||[[],[]],s=this._tickBounds;s[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(var k=0;k<2;++k){var M=_[k].slice(0);0!==M.length&&(M.sort(c),s[k]=Math.min(s[k],M[0].x),s[k+2]=Math.max(s[k+2],M[M.length-1].x))}this.grid.update({bounds:s,ticks:_}),this.text.update({bounds:s,ticks:_,labels:f.labels||["x","y"],labelSize:f.labelSize||[12,12],labelFont:f.labelFont||["sans-serif","sans-serif"],title:f.title||"",titleSize:f.titleSize||18,titleFont:f.titleFont||"sans-serif"}),this.static=!!f.static,this.setDirty()},u.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var f=this.objects.length-1;f>=0;--f)this.objects[f].dispose();for(this.objects.length=0,f=this.overlays.length-1;f>=0;--f)this.overlays[f].dispose();this.overlays.length=0,this.gl=null},u.addObject=function(f){this.objects.indexOf(f)<0&&(this.objects.push(f),this.setDirty())},u.removeObject=function(f){for(var l=this.objects,h=0;h<l.length;++h)if(l[h]===f){l.splice(h,1),this.setDirty();break}},u.addOverlay=function(f){this.overlays.indexOf(f)<0&&(this.overlays.push(f),this.setOverlayDirty())},u.removeOverlay=function(f){for(var l=this.overlays,h=0;h<l.length;++h)if(l[h]===f){l.splice(h,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(m,w,y){"use strict";w.exports=function(u,i){u=u||document.body;var c=[.01,1/0];"distanceLimits"in(i=i||{})&&(c[0]=i.distanceLimits[0],c[1]=i.distanceLimits[1]),"zoomMin"in i&&(c[0]=i.zoomMin),"zoomMax"in i&&(c[1]=i.zoomMax);var f=r({center:i.center||[0,0,0],up:i.up||[0,1,0],eye:i.eye||[0,0,10],mode:i.mode||"orbit",distanceLimits:c}),l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=0,d=u.clientWidth,o=u.clientHeight,_={keyBindingMode:"rotate",enableWheel:!0,view:f,element:u,delay:i.delay||16,rotateSpeed:i.rotateSpeed||1,zoomSpeed:i.zoomSpeed||1,translateSpeed:i.translateSpeed||1,flipX:!!i.flipX,flipY:!!i.flipY,modes:f.modes,_ortho:i._ortho||i.projection&&"orthographic"===i.projection.type||!1,tick:function(){var s=e(),k=this.delay,M=s-2*k;f.idle(s-k),f.recalcMatrix(M),f.flush(s-(100+2*k));for(var A=!0,E=f.computedMatrix,I=0;I<16;++I)A=A&&l[I]===E[I],l[I]=E[I];var C=u.clientWidth===d&&u.clientHeight===o;return d=u.clientWidth,o=u.clientHeight,A?!C:(h=Math.exp(f.computedRadius[0]),!0)},lookAt:function(s,k,M){f.lookAt(f.lastT(),s,k,M)},rotate:function(s,k,M){f.rotate(f.lastT(),s,k,M)},pan:function(s,k,M){f.pan(f.lastT(),s,k,M)},translate:function(s,k,M){f.translate(f.lastT(),s,k,M)}};return Object.defineProperties(_,{matrix:{get:function(){return f.computedMatrix},set:function(s){return f.setMatrix(f.lastT(),s),f.computedMatrix},enumerable:!0},mode:{get:function(){return f.getMode()},set:function(s){var k=f.computedUp.slice(),M=f.computedEye.slice(),A=f.computedCenter.slice();if(f.setMode(s),"turntable"===s){var E=e();f._active.lookAt(E,M,A,k),f._active.lookAt(E+500,M,A,[0,0,1]),f._active.flush(E)}return f.getMode()},enumerable:!0},center:{get:function(){return f.computedCenter},set:function(s){return f.lookAt(f.lastT(),null,s),f.computedCenter},enumerable:!0},eye:{get:function(){return f.computedEye},set:function(s){return f.lookAt(f.lastT(),s),f.computedEye},enumerable:!0},up:{get:function(){return f.computedUp},set:function(s){return f.lookAt(f.lastT(),null,null,s),f.computedUp},enumerable:!0},distance:{get:function(){return h},set:function(s){return f.setDistance(f.lastT(),s),s},enumerable:!0},distanceLimits:{get:function(){return f.getDistanceLimits(c)},set:function(s){return f.setDistanceLimits(s),s},enumerable:!0}}),u.addEventListener("contextmenu",function(s){return s.preventDefault(),!1}),_._lastX=-1,_._lastY=-1,_._lastMods={shift:!1,control:!1,alt:!1,meta:!1},_.enableMouseListeners=function(){function s(k,M,A,E){var I=_.keyBindingMode;if(!1!==I){var C="rotate"===I,R="pan"===I,O="zoom"===I,D=!!E.control,L=!!E.alt,B=!!E.shift,j=!!(1&k),W=!!(2&k),Y=!!(4&k),Q=1/u.clientHeight,ne=Q*(M-_._lastX),X=Q*(A-_._lastY),$=_.flipX?1:-1,re=_.flipY?1:-1,H=Math.PI*_.rotateSpeed,U=e();if(-1!==_._lastX&&-1!==_._lastY&&((C&&j&&!D&&!L&&!B||j&&!D&&!L&&B)&&f.rotate(U,$*H*ne,-re*H*X,0),(R&&j&&!D&&!L&&!B||W||j&&D&&!L&&!B)&&f.pan(U,-_.translateSpeed*ne*h,_.translateSpeed*X*h,0),O&&j&&!D&&!L&&!B||Y||j&&!D&&L&&!B)){var G=-_.zoomSpeed*X/window.innerHeight*(U-f.lastT())*100;f.pan(U,0,0,h*(Math.exp(G)-1))}return _._lastX=M,_._lastY=A,_._lastMods=E,!0}}_.mouseListener=n(u,s),u.addEventListener("touchstart",function(k){var M=t(k.changedTouches[0],u);s(0,M[0],M[1],_._lastMods),s(1,M[0],M[1],_._lastMods)},!!p&&{passive:!0}),u.addEventListener("touchmove",function(k){var M=t(k.changedTouches[0],u);s(1,M[0],M[1],_._lastMods),k.preventDefault()},!!p&&{passive:!1}),u.addEventListener("touchend",function(k){s(0,_._lastX,_._lastY,_._lastMods)},!!p&&{passive:!0}),_.wheelListener=a(u,function(k,M){if(!1!==_.keyBindingMode&&_.enableWheel){var A=_.flipX?1:-1,E=_.flipY?1:-1,I=e();if(Math.abs(k)>Math.abs(M))f.rotate(I,0,0,-k*A*Math.PI*_.rotateSpeed/window.innerWidth);else if(!_._ortho){var C=-_.zoomSpeed*E*M/window.innerHeight*(I-f.lastT())/20;f.pan(I,0,0,h*(Math.exp(C)-1))}}},!0)},_.enableMouseListeners(),_};var e=m("right-now"),r=m("3d-view"),n=m("mouse-change"),a=m("mouse-wheel"),t=m("mouse-event-offset"),p=m("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(m,w,y){var e=m("glslify"),r=m("gl-shader"),n=e(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),a=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);w.exports=function(t){return r(t,n,a,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(m,w,y){"use strict";var e=m("./camera.js"),r=m("gl-axes3d"),n=m("gl-axes3d/properties"),a=m("gl-spikes3d"),t=m("gl-select-static"),p=m("gl-fbo"),u=m("a-big-triangle"),i=m("mouse-change"),c=m("gl-mat4/perspective"),f=m("gl-mat4/ortho"),l=m("./lib/shader"),h=m("is-mobile")({tablet:!0,featureDetect:!0});function d(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function o(s){var k=Math.round(Math.log(Math.abs(s))/Math.log(10));if(k<0){var M=Math.round(Math.pow(10,-k));return Math.ceil(s*M)/M}return k>0?(M=Math.round(Math.pow(10,k)),Math.ceil(s/M)*M):Math.ceil(s)}function _(s){return"boolean"!=typeof s||s}w.exports={createScene:function(s){(s=s||{}).camera=s.camera||{};var k=s.canvas;k||(k=document.createElement("canvas"),s.container?s.container.appendChild(k):document.body.appendChild(k));var M=s.gl;if(M||(s.glOptions&&(h=!!s.glOptions.preserveDrawingBuffer),M=function(ge,_e){var Ce=null;try{(Ce=ge.getContext("webgl",_e))||(Ce=ge.getContext("experimental-webgl",_e))}catch(Le){return null}return Ce}(k,s.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:h})),!M)throw new Error("webgl not supported");var A=s.bounds||[[-10,-10,-10],[10,10,10]],E=new d,I=p(M,M.drawingBufferWidth,M.drawingBufferHeight,{preferFloat:!h}),C=l(M),R=s.cameraObject&&!0===s.cameraObject._ortho||s.camera.projection&&"orthographic"===s.camera.projection.type||!1,O={eye:s.camera.eye||[2,0,0],center:s.camera.center||[0,0,0],up:s.camera.up||[0,1,0],zoomMin:s.camera.zoomMax||.1,zoomMax:s.camera.zoomMin||100,mode:s.camera.mode||"turntable",_ortho:R},D=s.axes||{},L=r(M,D);L.enable=!D.disable;var j=a(M,s.spikes||{}),W=[],Y=[],Q=[],ne=[],X=!0,$=!0,U={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},G=($=!0,[M.drawingBufferWidth,M.drawingBufferHeight]),ie=s.cameraObject||e(k,O),q={gl:M,contextLost:!1,pixelRatio:s.pixelRatio||1,canvas:k,selection:E,camera:ie,axes:L,axesPixels:null,spikes:j,bounds:A,objects:W,shape:G,aspect:s.aspectRatio||[1,1,1],pickRadius:s.pickRadius||10,zNear:s.zNear||.01,zFar:s.zFar||1e3,fovy:s.fovy||Math.PI/4,clearColor:s.clearColor||[0,0,0,0],autoResize:_(s.autoResize),autoBounds:_(s.autoBounds),autoScale:!!s.autoScale,autoCenter:_(s.autoCenter),clipToBounds:_(s.clipToBounds),snapToData:!!s.snapToData,onselect:s.onselect||null,onrender:s.onrender||null,onclick:s.onclick||null,cameraParams:U,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ge){this.aspect[0]=ge.x,this.aspect[1]=ge.y,this.aspect[2]=ge.z,$=!0},setBounds:function(ge,_e){this.bounds[0][ge]=_e.min,this.bounds[1][ge]=_e.max},setClearColor:function(ge){this.clearColor=ge},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ee=[M.drawingBufferWidth/q.pixelRatio|0,M.drawingBufferHeight/q.pixelRatio|0];function te(){if(!q._stopped&&q.autoResize){var ge=k.parentNode,_e=1,Ce=1;ge&&ge!==document.body?(_e=ge.clientWidth,Ce=ge.clientHeight):(_e=window.innerWidth,Ce=window.innerHeight);var Le=0|Math.ceil(_e*q.pixelRatio),Ie=0|Math.ceil(Ce*q.pixelRatio);if(Le!==k.width||Ie!==k.height){k.width=Le,k.height=Ie;var Be=k.style;Be.position=Be.position||"absolute",Be.left="0px",Be.top="0px",Be.width=_e+"px",Be.height=Ce+"px",X=!0}}}function se(){for(var ge=W.length,_e=ne.length,Ce=0;Ce<_e;++Ce)Q[Ce]=0;e:for(Ce=0;Ce<ge;++Ce){var Le=W[Ce],Ie=Le.pickSlots;if(Ie){for(var Be=0;Be<_e;++Be)if(Q[Be]+Ie<255){Y[Ce]=Be,Le.setPickBase(Q[Be]+1),Q[Be]+=Ie;continue e}var ve=t(M,G);Y[Ce]=_e,ne.push(ve),Q.push(Ie),Le.setPickBase(1),_e+=1}else Y[Ce]=-1}for(;_e>0&&0===Q[_e-1];)Q.pop(),ne.pop().dispose()}function ue(){if(q.contextLost)return!0;M.isContextLost()&&(q.contextLost=!0,q.mouseListener.enabled=!1,q.selection.object=null,q.oncontextloss&&q.oncontextloss())}q.autoResize&&te(),window.addEventListener("resize",te),q.update=function(ge){q._stopped||(ge=ge||{},X=!0,$=!0)},q.add=function(ge){q._stopped||(ge.axes=L,W.push(ge),Y.push(-1),X=!0,$=!0,se())},q.remove=function(ge){if(!q._stopped){var _e=W.indexOf(ge);_e<0||(W.splice(_e,1),Y.pop(),X=!0,$=!0,se())}},q.dispose=function(){if(!q._stopped&&(q._stopped=!0,window.removeEventListener("resize",te),k.removeEventListener("webglcontextlost",ue),q.mouseListener.enabled=!1,!q.contextLost)){L.dispose(),j.dispose();for(var ge=0;ge<W.length;++ge)W[ge].dispose();for(I.dispose(),ge=0;ge<ne.length;++ge)ne[ge].dispose();C.dispose(),M=null,L=null,j=null,W=[]}},q._mouseRotating=!1,q._prevButtons=0,q.enableMouseListeners=function(){q.mouseListener=i(k,function(ge,_e,Ce){if(!q._stopped){var Le=ne.length,Ie=W.length,Be=E.object;E.distance=1/0,E.mouse[0]=_e,E.mouse[1]=Ce,E.object=null,E.screen=null,E.dataCoordinate=E.dataPosition=null;var ve=!1;if(ge&&q._prevButtons)q._mouseRotating=!0;else{q._mouseRotating&&($=!0),q._mouseRotating=!1;for(var Te=0;Te<Le;++Te){var Pe=ne[Te].query(_e,ee[1]-Ce-1,q.pickRadius);if(Pe){if(Pe.distance>E.distance)continue;for(var De=0;De<Ie;++De){var Fe=W[De];if(Y[De]===Te){var Ue=Fe.pick(Pe);Ue&&(E.buttons=ge,E.screen=Pe.coord,E.distance=Pe.distance,E.object=Fe,E.index=Ue.distance,E.dataPosition=Ue.position,E.dataCoordinate=Ue.dataCoordinate,E.data=Ue,ve=!0)}}}}}Be&&Be!==E.object&&(Be.highlight&&Be.highlight(null),X=!0),E.object&&(E.object.highlight&&E.object.highlight(E.data),X=!0),(ve=ve||E.object!==Be)&&q.onselect&&q.onselect(E),1&ge&&!(1&q._prevButtons)&&q.onclick&&q.onclick(E),q._prevButtons=ge}})},k.addEventListener("webglcontextlost",ue);var de=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],he=[de[0].slice(),de[1].slice()];function xe(){if(!ue()){te();var ge=q.camera.tick();U.view=q.camera.matrix,X=X||ge,$=$||ge,L.pixelRatio=q.pixelRatio,j.pixelRatio=q.pixelRatio;var _e=W.length,Ce=de[0],Le=de[1];Ce[0]=Ce[1]=Ce[2]=1/0,Le[0]=Le[1]=Le[2]=-1/0;for(var Ie=0;Ie<_e;++Ie){($e=W[Ie]).pixelRatio=q.pixelRatio,$e.axes=q.axes,X=X||!!$e.dirty,$=$||!!$e.dirty;var Be=$e.bounds;if(Be)for(var ve=Be[0],Te=Be[1],Pe=0;Pe<3;++Pe)Ce[Pe]=Math.min(Ce[Pe],ve[Pe]),Le[Pe]=Math.max(Le[Pe],Te[Pe])}var De=q.bounds;if(q.autoBounds)for(Pe=0;Pe<3;++Pe){if(Le[Pe]<Ce[Pe])Ce[Pe]=-1,Le[Pe]=1;else{Ce[Pe]===Le[Pe]&&(Ce[Pe]-=1,Le[Pe]+=1);var Fe=.05*(Le[Pe]-Ce[Pe]);Ce[Pe]=Ce[Pe]-Fe,Le[Pe]=Le[Pe]+Fe}De[0][Pe]=Ce[Pe],De[1][Pe]=Le[Pe]}var Ue=!1;for(Pe=0;Pe<3;++Pe)Ue=Ue||he[0][Pe]!==De[0][Pe]||he[1][Pe]!==De[1][Pe],he[0][Pe]=De[0][Pe],he[1][Pe]=De[1][Pe];if($=$||Ue,X=X||Ue){if(Ue){var He=[0,0,0];for(Ie=0;Ie<3;++Ie)He[Ie]=o((De[1][Ie]-De[0][Ie])/10);L.update(L.autoTicks?{bounds:De,tickSpacing:He}:{bounds:De})}var Ke=M.drawingBufferWidth,st=M.drawingBufferHeight;for(G[0]=Ke,G[1]=st,ee[0]=0|Math.max(Ke/q.pixelRatio,1),ee[1]=0|Math.max(st/q.pixelRatio,1),function(Qe,tt){var ut=Qe.bounds,xt=Qe.cameraParams,kt=xt.projection,Bt=xt.model,lt=Qe.zNear,Ft=Qe.zFar,Jt=Qe.fovy,ln=Qe.gl.drawingBufferWidth/Qe.gl.drawingBufferHeight;tt?(f(kt,-ln,ln,-1,1,lt,Ft),xt._ortho=!0):(c(kt,Jt,ln,lt,Ft),xt._ortho=!1);for(var dn=0;dn<16;++dn)Bt[dn]=0;Bt[15]=1;var cn=0;for(dn=0;dn<3;++dn)cn=Math.max(cn,ut[1][dn]-ut[0][dn]);for(dn=0;dn<3;++dn)Bt[5*dn]=Qe.autoScale?Qe.aspect[dn]/(ut[1][dn]-ut[0][dn]):1/cn,Qe.autoCenter&&(Bt[12+dn]=.5*-Bt[5*dn]*(ut[0][dn]+ut[1][dn]))}(q,R),Ie=0;Ie<_e;++Ie)($e=W[Ie]).axesBounds=De,q.clipToBounds&&($e.clipBounds=De);E.object&&(j.position=q.snapToData?E.dataCoordinate:E.dataPosition,j.bounds=De),$&&($=!1,function(){if(!ue()){M.colorMask(!0,!0,!0,!0),M.depthMask(!0),M.disable(M.BLEND),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL);for(var Qe=W.length,tt=ne.length,ut=0;ut<tt;++ut){var xt=ne[ut];xt.shape=ee,xt.begin();for(var kt=0;kt<Qe;++kt)if(Y[kt]===ut){var Bt=W[kt];Bt.drawPick&&(Bt.pixelRatio=1,Bt.drawPick(U))}xt.end()}}}()),q.axesPixels=n(q.axes,U,Ke,st),q.onrender&&q.onrender(),M.bindFramebuffer(M.FRAMEBUFFER,null),M.viewport(0,0,Ke,st),q.clearRGBA(),M.depthMask(!0),M.colorMask(!0,!0,!0,!0),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL),M.disable(M.BLEND),M.disable(M.CULL_FACE);var Ve=!1;for(L.enable&&(Ve=Ve||L.isTransparent(),L.draw(U)),j.axes=L,E.object&&j.draw(U),M.disable(M.CULL_FACE),Ie=0;Ie<_e;++Ie)($e=W[Ie]).axes=L,$e.pixelRatio=q.pixelRatio,$e.isOpaque&&$e.isOpaque()&&$e.draw(U),$e.isTransparent&&$e.isTransparent()&&(Ve=!0);if(Ve){for(I.shape=G,I.bind(),M.clear(M.DEPTH_BUFFER_BIT),M.colorMask(!1,!1,!1,!1),M.depthMask(!0),M.depthFunc(M.LESS),L.enable&&L.isTransparent()&&L.drawTransparent(U),Ie=0;Ie<_e;++Ie)($e=W[Ie]).isOpaque&&$e.isOpaque()&&$e.draw(U);for(M.enable(M.BLEND),M.blendEquation(M.FUNC_ADD),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.colorMask(!0,!0,!0,!0),M.depthMask(!1),M.clearColor(0,0,0,0),M.clear(M.COLOR_BUFFER_BIT),L.isTransparent()&&L.drawTransparent(U),Ie=0;Ie<_e;++Ie){var $e;($e=W[Ie]).isTransparent&&$e.isTransparent()&&$e.drawTransparent(U)}M.bindFramebuffer(M.FRAMEBUFFER,null),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.disable(M.DEPTH_TEST),C.bind(),I.color[0].bind(0),C.uniforms.accumBuffer=0,u(M),M.disable(M.BLEND)}for(X=!1,Ie=0;Ie<_e;++Ie)W[Ie].dirty=!1}}}return q.enableMouseListeners(),function ge(){q._stopped||q.contextLost||(xe(),requestAnimationFrame(ge))}(),q.redraw=function(){q._stopped||(X=!0,xe())},q},createCamera:e}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(m,w,y){var e=m("glslify");y.pointVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),y.pointFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),y.pickVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),y.pickFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(m,w,y){"use strict";var e=m("gl-shader"),r=m("gl-buffer"),n=m("typedarray-pool"),a=m("./lib/shader");function t(c,f,l,h,d){this.plot=c,this.offsetBuffer=f,this.pickBuffer=l,this.shader=h,this.pickShader=d,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}w.exports=function(c,f){var l=c.gl,s=new t(c,r(l),r(l),e(l,a.pointVertex,a.pointFragment),e(l,a.pickVertex,a.pickFragment));return s.update(f),c.addObject(s),s};var p,u,i=t.prototype;i.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},i.update=function(c){var f;function l(M,A){return M in c?c[M]:A}c=c||{},this.sizeMin=l("sizeMin",.5),this.sizeMax=l("sizeMax",20),this.color=l("color",[1,0,0,1]).slice(),this.areaRatio=l("areaRatio",1),this.borderColor=l("borderColor",[0,0,0,1]).slice(),this.blend=l("blend",!1);var h=c.positions.length>>>1,d=c.positions instanceof Float32Array,o=c.idToIndex instanceof Int32Array&&c.idToIndex.length>=h,_=c.positions,s=d?_:n.mallocFloat32(_.length),k=o?c.idToIndex:n.mallocInt32(h);if(d||s.set(_),!o)for(s.set(_),f=0;f<h;f++)k[f]=f;this.points=_,this.offsetBuffer.update(s),this.pickBuffer.update(k),d||n.free(s),o||n.free(k),this.pointCount=h,this.pickOffset=0},i.unifiedDraw=(p=[1,0,0,0,1,0,0,0,1],u=[0,0,0,0],function(c){var f=void 0!==c,l=f?this.pickShader:this.shader,h=this.plot.gl,d=this.plot.dataBox;if(0===this.pointCount)return c;var o=d[2]-d[0],_=d[3]-d[1],s=function(E,I){var C,R=0,O=E.length>>>1;for(C=0;C<O;C++){var D=E[2*C],L=E[2*C+1];D>=I[0]&&D<=I[2]&&L>=I[1]&&L<=I[3]&&R++}return R}(this.points,d),k=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(s,.33333)));p[0]=2/o,p[4]=2/_,p[6]=-2*d[0]/o-1,p[7]=-2*d[1]/_-1,this.offsetBuffer.bind(),l.bind(),l.attributes.position.pointer(),l.uniforms.matrix=p,l.uniforms.color=this.color,l.uniforms.borderColor=this.borderColor,l.uniforms.pointCloud=k<5,l.uniforms.pointSize=k,l.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),f&&(u[0]=255&c,u[1]=c>>8&255,u[2]=c>>16&255,u[3]=c>>24&255,this.pickBuffer.bind(),l.attributes.pickId.pointer(h.UNSIGNED_BYTE),l.uniforms.pickOffset=u,this.pickOffset=c);var M=h.getParameter(h.BLEND),A=h.getParameter(h.DITHER);return M&&!this.blend&&h.disable(h.BLEND),A&&h.disable(h.DITHER),h.drawArrays(h.POINTS,0,this.pointCount),M&&!this.blend&&h.enable(h.BLEND),A&&h.enable(h.DITHER),c+this.pointCount}),i.draw=i.unifiedDraw,i.drawPick=i.unifiedDraw,i.pick=function(c,f,l){var h=this.pickOffset;if(l<h||l>=h+this.pointCount)return null;var o=l-h,_=this.points;return{object:this,pointId:o,dataCoord:[_[2*o],_[2*o+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(m,w,y){w.exports=function(e,r,n,a){var t,p,u,i,c,f=r[0],l=r[1],h=r[2],d=r[3],o=n[0],_=n[1],s=n[2],k=n[3];return(p=f*o+l*_+h*s+d*k)<0&&(p=-p,o=-o,_=-_,s=-s,k=-k),1-p>1e-6?(t=Math.acos(p),u=Math.sin(t),i=Math.sin((1-a)*t)/u,c=Math.sin(a*t)/u):(i=1-a,c=a),e[0]=i*f+c*o,e[1]=i*l+c*_,e[2]=i*h+c*s,e[3]=i*d+c*k,e}},{}],125:[function(m,w,y){"use strict";w.exports=function(e){return e||0===e?e.toString():""}},{}],126:[function(m,w,y){"use strict";var e=m("vectorize-text");w.exports=function(n,a,t){var p=r[a];if(p||(p=r[a]={}),n in p)return p[n];var u={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},i=e(n,u);u.triangles=!1;var c,f,l=e(n,u);if(t&&1!==t){for(c=0;c<i.positions.length;++c)for(f=0;f<i.positions[c].length;++f)i.positions[c][f]/=t;for(c=0;c<l.positions.length;++c)for(f=0;f<l.positions[c].length;++f)l.positions[c][f]/=t}var h=[[1/0,1/0],[-1/0,-1/0]],d=l.positions.length;for(c=0;c<d;++c){var o=l.positions[c];for(f=0;f<2;++f)h[0][f]=Math.min(h[0][f],o[f]),h[1][f]=Math.max(h[1][f],o[f])}return p[n]=[i,l,h]};var r={}},{"vectorize-text":311}],127:[function(m,w,y){var e=m("gl-shader"),r=m("glslify"),n=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),t=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),p=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),u=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),i=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],c={vertex:n,fragment:p,attributes:i},f={vertex:a,fragment:p,attributes:i},l={vertex:t,fragment:p,attributes:i},h={vertex:n,fragment:u,attributes:i},d={vertex:a,fragment:u,attributes:i},o={vertex:t,fragment:u,attributes:i};function _(s,k){var M=e(s,k),A=M.attributes;return A.position.location=0,A.color.location=1,A.glyph.location=2,A.id.location=3,M}y.createPerspective=function(s){return _(s,c)},y.createOrtho=function(s){return _(s,f)},y.createProject=function(s){return _(s,l)},y.createPickPerspective=function(s){return _(s,h)},y.createPickOrtho=function(s){return _(s,d)},y.createPickProject=function(s){return _(s,o)}},{"gl-shader":132,glslify:231}],128:[function(m,w,y){"use strict";var e=m("is-string-blank"),r=m("gl-buffer"),n=m("gl-vao"),a=m("typedarray-pool"),t=m("gl-mat4/multiply"),p=m("./lib/shaders"),u=m("./lib/glyphs"),i=m("./lib/get-simple-string"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function f(Q,ne){var X=Q[0],$=Q[1],re=Q[2],H=Q[3];return Q[0]=ne[0]*X+ne[4]*$+ne[8]*re+ne[12]*H,Q[1]=ne[1]*X+ne[5]*$+ne[9]*re+ne[13]*H,Q[2]=ne[2]*X+ne[6]*$+ne[10]*re+ne[14]*H,Q[3]=ne[3]*X+ne[7]*$+ne[11]*re+ne[15]*H,Q}function l(Q,ne,X,$){return f($,$),f($,$),f($,$)}function h(Q,ne){this.index=Q,this.dataCoordinate=this.position=ne}function d(Q){return!0===Q||Q>1?1:Q}function o(Q,ne,X,$,re,H,U,G,ie,q,ee,te){this.gl=Q,this.pixelRatio=1,this.shader=ne,this.orthoShader=X,this.projectShader=$,this.pointBuffer=re,this.colorBuffer=H,this.glyphBuffer=U,this.idBuffer=G,this.vao=ie,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=q,this.pickOrthoShader=ee,this.pickProjectShader=te,this.points=[],this._selectResult=new h(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}w.exports=function(Q){var ne=Q.gl,X=p.createPerspective(ne),$=p.createOrtho(ne),re=p.createProject(ne),H=p.createPickPerspective(ne),U=p.createPickOrtho(ne),G=p.createPickProject(ne),ie=r(ne),q=r(ne),ee=r(ne),te=r(ne),ue=new o(ne,X,$,re,ie,q,ee,te,n(ne,[{buffer:ie,size:3,type:ne.FLOAT},{buffer:q,size:4,type:ne.FLOAT},{buffer:ee,size:2,type:ne.FLOAT},{buffer:te,size:4,type:ne.UNSIGNED_BYTE,normalized:!0}]),H,U,G);return ue.update(Q),ue};var _=o.prototype;_.pickSlots=1,_.setPickBase=function(Q){this.pickId=Q},_.isTransparent=function(){if(this.hasAlpha)return!0;for(var Q=0;Q<3;++Q)if(this.axesProject[Q]&&this.projectHasAlpha)return!0;return!1},_.isOpaque=function(){if(!this.hasAlpha)return!0;for(var Q=0;Q<3;++Q)if(this.axesProject[Q]&&!this.projectHasAlpha)return!0;return!1};var s=[0,0],k=[0,0,0],M=[0,0,0],A=[0,0,0,1],E=[0,0,0,1],I=c.slice(),C=[0,0,0],R=[[0,0,0],[0,0,0]];function O(Q){return Q[0]=Q[1]=Q[2]=0,Q}function D(Q,ne){return Q[0]=ne[0],Q[1]=ne[1],Q[2]=ne[2],Q[3]=1,Q}function L(Q,ne,X,$){return Q[0]=ne[0],Q[1]=ne[1],Q[2]=ne[2],Q[X]=$,Q}var j=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function W(Q,ne,X,$,re,H,U){var G=X.gl;if((H===X.projectHasAlpha||U)&&function B(Q,ne,X,$){var re,H=ne.axesProject,U=ne.gl,G=Q.uniforms,ie=X.model||c,q=X.view||c,ee=X.projection||c,te=ne.axesBounds,se=function(De){for(var Fe=R,Ue=0;Ue<2;++Ue)for(var He=0;He<3;++He)Fe[Ue][He]=Math.max(Math.min(De[Ue][He],1e8),-1e8);return Fe}(ne.clipBounds);re=ne.axes&&ne.axes.lastCubeProps?ne.axes.lastCubeProps.axis:[1,1,1],s[0]=2/U.drawingBufferWidth,s[1]=2/U.drawingBufferHeight,Q.bind(),G.view=q,G.projection=ee,G.screenSize=s,G.highlightId=ne.highlightId,G.highlightScale=ne.highlightScale,G.clipBounds=se,G.pickGroup=ne.pickId/255,G.pixelRatio=$;for(var ue=0;ue<3;++ue)if(H[ue]){G.scale=ne.projectScale[ue],G.opacity=ne.projectOpacity[ue];for(var de=I,he=0;he<16;++he)de[he]=0;for(he=0;he<4;++he)de[5*he]=1;de[5*ue]=0,de[12+ue]=re[ue]<0?te[0][ue]:te[1][ue],t(de,ie,de),G.model=de;var xe=(ue+1)%3,ge=(ue+2)%3,_e=O(k),Ce=O(M);_e[xe]=1,Ce[ge]=1;var Le=l(0,0,0,D(A,_e)),Ie=l(0,0,0,D(E,Ce));if(Math.abs(Le[1])>Math.abs(Ie[1])){var Be=Le;Le=Ie,Ie=Be,Be=_e,_e=Ce,Ce=Be;var ve=xe;xe=ge,ge=ve}Le[0]<0&&(_e[xe]=-1),Ie[1]>0&&(Ce[ge]=-1);var Te=0,Pe=0;for(he=0;he<4;++he)Te+=Math.pow(ie[4*xe+he],2),Pe+=Math.pow(ie[4*ge+he],2);_e[xe]/=Math.sqrt(Te),Ce[ge]/=Math.sqrt(Pe),G.axes[0]=_e,G.axes[1]=Ce,G.fragClipBounds[0]=L(C,se[0],ue,-1e8),G.fragClipBounds[1]=L(C,se[1],ue,1e8),ne.vao.bind(),ne.vao.draw(U.TRIANGLES,ne.vertexCount),ne.lineWidth>0&&(U.lineWidth(ne.lineWidth*$),ne.vao.draw(U.LINES,ne.lineVertexCount,ne.vertexCount)),ne.vao.unbind()}}(ne,X,$,re),H===X.hasAlpha||U){Q.bind();var ie=Q.uniforms;ie.model=$.model||c,ie.view=$.view||c,ie.projection=$.projection||c,s[0]=2/G.drawingBufferWidth,s[1]=2/G.drawingBufferHeight,ie.screenSize=s,ie.highlightId=X.highlightId,ie.highlightScale=X.highlightScale,ie.fragClipBounds=j,ie.clipBounds=X.axes.bounds,ie.opacity=X.opacity,ie.pickGroup=X.pickId/255,ie.pixelRatio=re,X.vao.bind(),X.vao.draw(G.TRIANGLES,X.vertexCount),X.lineWidth>0&&(G.lineWidth(X.lineWidth*re),X.vao.draw(G.LINES,X.lineVertexCount,X.vertexCount)),X.vao.unbind()}}function Y(Q,ne,X,$){var re;re=Array.isArray(Q)?ne<Q.length?Q[ne]:void 0:Q,re=i(re);var H=!0;e(re)&&(re="\u25bc",H=!1);var U=u(re,X,$);return{mesh:U[0],lines:U[1],bounds:U[2],visible:H}}_.draw=function(Q){W(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Q,this.pixelRatio,!1,!1)},_.drawTransparent=function(Q){W(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Q,this.pixelRatio,!0,!1)},_.drawPick=function(Q){W(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,Q,1,!0,!0)},_.pick=function(Q){if(!Q||Q.id!==this.pickId)return null;var ne=Q.value[2]+(Q.value[1]<<8)+(Q.value[0]<<16);if(ne>=this.pointCount||ne<0)return null;var X=this.points[ne],$=this._selectResult;$.index=ne;for(var re=0;re<3;++re)$.position[re]=$.dataCoordinate[re]=X[re];return $},_.highlight=function(Q){if(Q){var ne=Q.index;this.highlightId=[(255&ne)/255,(ne>>8&255)/255,(ne>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},_.update=function(Q){if("perspective"in(Q=Q||{})&&(this.useOrtho=!Q.perspective),"orthographic"in Q&&(this.useOrtho=!!Q.orthographic),"lineWidth"in Q&&(this.lineWidth=Q.lineWidth),"project"in Q)if(Array.isArray(Q.project))this.axesProject=Q.project;else{var ne=!!Q.project;this.axesProject=[ne,ne,ne]}if("projectScale"in Q)if(Array.isArray(Q.projectScale))this.projectScale=Q.projectScale.slice();else{var X=+Q.projectScale;this.projectScale=[X,X,X]}if(this.projectHasAlpha=!1,"projectOpacity"in Q){this.projectOpacity=Array.isArray(Q.projectOpacity)?Q.projectOpacity.slice():[X=+Q.projectOpacity,X,X];for(var $=0;$<3;++$)this.projectOpacity[$]=d(this.projectOpacity[$]),this.projectOpacity[$]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in Q&&(this.opacity=d(Q.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var re,H,U=Q.position,G=Q.font||"normal",ie=Q.alignment||[0,0];if(2===ie.length)re=ie[0],H=ie[1];else for(re=[],H=[],$=0;$<ie.length;++$)re[$]=ie[$][0],H[$]=ie[$][1];var q=[1/0,1/0,1/0],ee=[-1/0,-1/0,-1/0],te=Q.glyph,se=Q.color,ue=Q.size,de=Q.angle,he=Q.lineColor,xe=-1,ge=0,_e=0,Ce=0;if(U.length){Ce=U.length;e:for($=0;$<Ce;++$){for(var Le=U[$],Ie=0;Ie<3;++Ie)if(isNaN(Le[Ie])||!isFinite(Le[Ie]))continue e;var Be=(ut=Y(te,$,G,this.pixelRatio)).mesh,ve=ut.lines,Te=ut.bounds;ge+=3*Be.cells.length,_e+=2*ve.edges.length}}var Pe=ge+_e,De=a.mallocFloat(3*Pe),Fe=a.mallocFloat(4*Pe),Ue=a.mallocFloat(2*Pe),He=a.mallocUint32(Pe);if(Pe>0){var Ke=0,st=ge,Ve=[0,0,0,1],$e=[0,0,0,1],Qe=Array.isArray(se)&&Array.isArray(se[0]),tt=Array.isArray(he)&&Array.isArray(he[0]);e:for($=0;$<Ce;++$){for(xe+=1,Le=U[$],Ie=0;Ie<3;++Ie){if(isNaN(Le[Ie])||!isFinite(Le[Ie]))continue e;ee[Ie]=Math.max(ee[Ie],Le[Ie]),q[Ie]=Math.min(q[Ie],Le[Ie])}Be=(ut=Y(te,$,G,this.pixelRatio)).mesh,ve=ut.lines,Te=ut.bounds;var ut,xt=ut.visible;if(xt)if(Array.isArray(se)){if(3===(kt=Qe?$<se.length?se[$]:[0,0,0,0]:se).length){for(Ie=0;Ie<3;++Ie)Ve[Ie]=kt[Ie];Ve[3]=1}else if(4===kt.length){for(Ie=0;Ie<4;++Ie)Ve[Ie]=kt[Ie];!this.hasAlpha&&kt[3]<1&&(this.hasAlpha=!0)}}else Ve[0]=Ve[1]=Ve[2]=0,Ve[3]=1;else Ve=[1,1,1,0];if(xt)if(Array.isArray(he)){var kt;if(3===(kt=tt?$<he.length?he[$]:[0,0,0,0]:he).length){for(Ie=0;Ie<3;++Ie)$e[Ie]=kt[Ie];$e[Ie]=1}else if(4===kt.length){for(Ie=0;Ie<4;++Ie)$e[Ie]=kt[Ie];!this.hasAlpha&&kt[3]<1&&(this.hasAlpha=!0)}}else $e[0]=$e[1]=$e[2]=0,$e[3]=1;else $e=[1,1,1,0];var Bt=.5;xt?Array.isArray(ue)?Bt=$<ue.length?+ue[$]:12:ue?Bt=+ue:this.useOrtho&&(Bt=12):Bt=0;var Rt=0;Array.isArray(de)?Rt=$<de.length?+de[$]:0:de&&(Rt=+de);var ft=Math.cos(Rt),lt=Math.sin(Rt);for(Le=U[$],Ie=0;Ie<3;++Ie)ee[Ie]=Math.max(ee[Ie],Le[Ie]),q[Ie]=Math.min(q[Ie],Le[Ie]);var Ft=re,Jt=H;Ft=0,Array.isArray(re)?Ft=$<re.length?re[$]:0:re&&(Ft=re),Jt=0,Array.isArray(H)?Jt=$<H.length?H[$]:0:H&&(Jt=H);var ln=[Ft*=Ft>0?1-Te[0][0]:Ft<0?1+Te[1][0]:1,Jt*=Jt>0?1-Te[0][1]:Jt<0?1+Te[1][1]:1],dn=Be.cells||[],cn=Be.positions||[];for(Ie=0;Ie<dn.length;++Ie)for(var Tn=dn[Ie],nn=0;nn<3;++nn){for(var Me=0;Me<3;++Me)De[3*Ke+Me]=Le[Me];for(Me=0;Me<4;++Me)Fe[4*Ke+Me]=Ve[Me];He[Ke]=xe;var Ee=cn[Tn[nn]];Ue[2*Ke]=Bt*(ft*Ee[0]-lt*Ee[1]+ln[0]),Ue[2*Ke+1]=Bt*(lt*Ee[0]+ft*Ee[1]+ln[1]),Ke+=1}for(dn=ve.edges,cn=ve.positions,Ie=0;Ie<dn.length;++Ie)for(Tn=dn[Ie],nn=0;nn<2;++nn){for(Me=0;Me<3;++Me)De[3*st+Me]=Le[Me];for(Me=0;Me<4;++Me)Fe[4*st+Me]=$e[Me];He[st]=xe,Ue[2*st]=Bt*(ft*(Ee=cn[Tn[nn]])[0]-lt*Ee[1]+ln[0]),Ue[2*st+1]=Bt*(lt*Ee[0]+ft*Ee[1]+ln[1]),st+=1}}}this.bounds=[q,ee],this.points=U,this.pointCount=U.length,this.vertexCount=ge,this.lineVertexCount=_e,this.pointBuffer.update(De),this.colorBuffer.update(Fe),this.glyphBuffer.update(Ue),this.idBuffer.update(He),a.free(De),a.free(Fe),a.free(Ue),a.free(He)},_.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(m,w,y){"use strict";var e=m("glslify");y.boxVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),y.boxFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(m,w,y){"use strict";var e=m("gl-shader"),r=m("gl-buffer"),n=m("./lib/shaders");function a(p,u,i){this.plot=p,this.boxBuffer=u,this.boxShader=i,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}w.exports=function(p,u){var i=p.gl,l=new a(p,r(i,[0,0,0,1,1,0,1,1]),e(i,n.boxVertex,n.boxFragment));return l.update(u),p.addOverlay(l),l};var t=a.prototype;t.draw=function(){if(this.enabled){var p=this.plot,u=this.selectBox,i=this.borderWidth,c=this.innerColor,f=this.outerColor,l=this.borderColor,h=p.box,d=p.screenBox,o=p.dataBox,_=p.viewBox,s=p.pixelRatio,k=(u[0]-o[0])*(_[2]-_[0])/(o[2]-o[0])+_[0],M=(u[1]-o[1])*(_[3]-_[1])/(o[3]-o[1])+_[1],A=(u[2]-o[0])*(_[2]-_[0])/(o[2]-o[0])+_[0],E=(u[3]-o[1])*(_[3]-_[1])/(o[3]-o[1])+_[1];if(k=Math.max(k,_[0]),M=Math.max(M,_[1]),A=Math.min(A,_[2]),E=Math.min(E,_[3]),!(A<k||E<M)){h.bind();var I=d[2]-d[0],C=d[3]-d[1];if(this.outerFill&&(h.drawBox(0,0,I,M,f),h.drawBox(0,M,k,E,f),h.drawBox(0,E,I,C,f),h.drawBox(A,M,I,E,f)),this.innerFill&&h.drawBox(k,M,A,E,c),i>0){var R=i*s;h.drawBox(k-R,M-R,A+R,M+R,l),h.drawBox(k-R,E-R,A+R,E+R,l),h.drawBox(k-R,M-R,k+R,E+R,l),h.drawBox(A-R,M-R,A+R,E+R,l)}}}},t.update=function(p){this.innerFill=!!(p=p||{}).innerFill,this.outerFill=!!p.outerFill,this.innerColor=(p.innerColor||[0,0,0,.5]).slice(),this.outerColor=(p.outerColor||[0,0,0,.5]).slice(),this.borderColor=(p.borderColor||[0,0,0,1]).slice(),this.borderWidth=p.borderWidth||0,this.selectBox=(p.selectBox||this.selectBox).slice()},t.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(m,w,y){"use strict";w.exports=function(i,c){var f=c[0],l=c[1];return new p(i,e(i,f,l,{}),r.mallocUint8(f*l*4))};var e=m("gl-fbo"),r=m("typedarray-pool"),n=m("ndarray"),a=m("bit-twiddle").nextPow2;function t(i,c,f,l,h){this.coord=[i,c],this.id=f,this.value=l,this.distance=h}function p(i,c,f){this.gl=i,this.fbo=c,this.buffer=f,this._readTimeout=null;var l=this;this._readCallback=function(){l.gl&&(c.bind(),i.readPixels(0,0,c.shape[0],c.shape[1],i.RGBA,i.UNSIGNED_BYTE,l.buffer),l._readTimeout=null)}}var u=p.prototype;Object.defineProperty(u,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(i){if(this.gl){this.fbo.shape=i;var c=this.fbo.shape[0],f=this.fbo.shape[1];if(f*c*4>this.buffer.length){r.free(this.buffer);for(var l=this.buffer=r.mallocUint8(a(f*c*4)),h=0;h<f*c*4;++h)l[h]=255}return i}}}),u.begin=function(){var i=this.gl;i&&(this.fbo.bind(),i.clearColor(1,1,1,1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT))},u.end=function(){var i=this.gl;i&&(i.bindFramebuffer(i.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},u.query=function(i,c,f){if(!this.gl)return null;var l=this.fbo.shape.slice();i|=0,c|=0,"number"!=typeof f&&(f=1);var h=0|Math.min(Math.max(i-f,0),l[0]),d=0|Math.min(Math.max(i+f,0),l[0]),o=0|Math.min(Math.max(c-f,0),l[1]),_=0|Math.min(Math.max(c+f,0),l[1]);if(d<=h||_<=o)return null;var s=[d-h,_-o],k=n(this.buffer,[s[0],s[1],4],[4,4*l[0],1],4*(h+l[0]*o)),M=function(I,C,R){for(var O=1e8,D=-1,L=-1,B=I.shape[0],j=I.shape[1],W=0;W<B;W++)for(var Y=0;Y<j;Y++){var Q=I.get(W,Y,0),ne=I.get(W,Y,1),X=I.get(W,Y,2),$=I.get(W,Y,3);if(Q<255||ne<255||X<255||$<255){var re=C-W,H=R-Y,U=re*re+H*H;U<O&&(O=U,D=W,L=Y)}}return[D,L,O]}(k.hi(s[0],s[1],1),f,f),A=M[0],E=M[1];return A<0||Math.pow(this.radius,2)<M[2]?null:new t(A+h|0,E+o|0,k.get(A,E,0),[k.get(A,E,1),k.get(A,E,2),k.get(A,E,3)],Math.sqrt(M[2]))},u.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(m,w,y){"use strict";var e=m("./lib/create-uniforms"),r=m("./lib/create-attributes"),n=m("./lib/reflect"),a=m("./lib/shader-cache"),t=m("./lib/runtime-reflect"),p=m("./lib/GLError");function u(f){this.gl=f,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var i=u.prototype;function c(f,l){return f.name<l.name?-1:1}i.bind=function(){var f;this.program||this._relink();var l=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),h=this.gl.lastAttribCount;if(l>h)for(f=h;f<l;f++)this.gl.enableVertexAttribArray(f);else if(h>l)for(f=l;f<h;f++)this.gl.disableVertexAttribArray(f);this.gl.lastAttribCount=l,this.gl.useProgram(this.program)},i.dispose=function(){for(var f=this.gl.lastAttribCount,l=0;l<f;l++)this.gl.disableVertexAttribArray(l);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},i.update=function(f,l,h,d){if(!l||1===arguments.length){var o=f;f=o.vertex,l=o.fragment,h=o.uniforms,d=o.attributes}var _=this,s=_.gl,k=_._vref;_._vref=a.shader(s,s.VERTEX_SHADER,f),k&&k.dispose(),_.vertShader=_._vref.shader;var M=this._fref;if(_._fref=a.shader(s,s.FRAGMENT_SHADER,l),M&&M.dispose(),_.fragShader=_._fref.shader,!h||!d){var A=s.createProgram();if(s.attachShader(A,_.fragShader),s.attachShader(A,_.vertShader),s.linkProgram(A),!s.getProgramParameter(A,s.LINK_STATUS)){var E=s.getProgramInfoLog(A);throw new p(E,"Error linking program:"+E)}h=h||t.uniforms(s,A),d=d||t.attributes(s,A),s.deleteProgram(A)}(d=d.slice()).sort(c);var I,C=[],R=[],O=[];for(I=0;I<d.length;++I){var D=d[I];if(D.type.indexOf("mat")>=0){for(var L=0|D.type.charAt(D.type.length-1),B=new Array(L),j=0;j<L;++j)B[j]=O.length,R.push(D.name+"["+j+"]"),"number"==typeof D.location?O.push(D.location+j):Array.isArray(D.location)&&D.location.length===L&&"number"==typeof D.location[j]?O.push(0|D.location[j]):O.push(-1);C.push({name:D.name,type:D.type,locations:B})}else C.push({name:D.name,type:D.type,locations:[O.length]}),R.push(D.name),O.push("number"==typeof D.location?0|D.location:-1)}var W=0;for(I=0;I<O.length;++I)if(O[I]<0){for(;O.indexOf(W)>=0;)W+=1;O[I]=W}var Y=new Array(h.length);function Q(){_.program=a.program(s,_._vref,_._fref,R,O);for(var ne=0;ne<h.length;++ne)Y[ne]=s.getUniformLocation(_.program,h[ne].name)}Q(),_._relink=Q,_.types={uniforms:n(h),attributes:n(d)},_.attributes=r(s,_,C,O),Object.defineProperty(_,"uniforms",e(s,_,h,Y))},w.exports=function(f,l,h,d,o){var _=new u(f);return _.update(l,h,d,o),_}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(m,w,y){function e(r,n,a){this.shortMessage=n||"",this.longMessage=a||"",this.rawError=r||"",this.message="gl-shader: "+(n||r||"")+(a?"\n"+a:""),this.stack=(new Error).stack}(e.prototype=new Error).name="GLError",e.prototype.constructor=e,w.exports=e},{}],134:[function(m,w,y){"use strict";w.exports=function(u,i,c,f){for(var l={},h=0,d=c.length;h<d;++h){var o=c[h],_=o.name,s=o.type,k=o.locations;switch(s){case"bool":case"int":case"float":t(u,i,k[0],f,1,l,_);break;default:if(s.indexOf("vec")>=0){if((M=s.charCodeAt(s.length-1)-48)<2||M>4)throw new e("","Invalid data type for attribute "+_+": "+s);t(u,i,k[0],f,M,l,_)}else{if(!(s.indexOf("mat")>=0))throw new e("","Unknown data type for attribute "+_+": "+s);var M;if((M=s.charCodeAt(s.length-1)-48)<2||M>4)throw new e("","Invalid data type for attribute "+_+": "+s);p(u,i,k,f,M,l,_)}}}return l};var e=m("./GLError");function r(u,i,c,f,l,h){this._gl=u,this._wrapper=i,this._index=c,this._locations=f,this._dimension=l,this._constFunc=h}var n=r.prototype;n.pointer=function(u,i,c,f){var l=this._gl,h=this._locations[this._index];l.vertexAttribPointer(h,this._dimension,u||l.FLOAT,!!i,c||0,f||0),l.enableVertexAttribArray(h)},n.set=function(u,i,c,f){return this._constFunc(this._locations[this._index],u,i,c,f)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(u){return u!==this._locations[this._index]&&(this._locations[this._index]=0|u,this._wrapper.program=null),0|u}});var a=[function(u,i,c){return void 0===c.length?u.vertexAttrib1f(i,c):u.vertexAttrib1fv(i,c)},function(u,i,c,f){return void 0===c.length?u.vertexAttrib2f(i,c,f):u.vertexAttrib2fv(i,c)},function(u,i,c,f,l){return void 0===c.length?u.vertexAttrib3f(i,c,f,l):u.vertexAttrib3fv(i,c)},function(u,i,c,f,l,h){return void 0===c.length?u.vertexAttrib4f(i,c,f,l,h):u.vertexAttrib4fv(i,c)}];function t(u,i,c,f,l,h,d){var o=a[l],_=new r(u,i,c,f,l,o);Object.defineProperty(h,d,{set:function(s){return u.disableVertexAttribArray(f[c]),o(u,f[c],s),s},get:function(){return _},enumerable:!0})}function p(u,i,c,f,l,h,d){for(var o=new Array(l),_=new Array(l),s=0;s<l;++s)t(u,i,c[s],f,l,o,s),_[s]=o[s];Object.defineProperty(o,"location",{set:function(A){if(Array.isArray(A))for(var E=0;E<l;++E)_[E].location=A[E];else for(E=0;E<l;++E)_[E].location=A+E;return A},get:function(){for(var A=new Array(l),E=0;E<l;++E)A[E]=f[c[E]];return A},enumerable:!0}),o.pointer=function(A,E,I,C){A=A||u.FLOAT,E=!!E,I=I||l*l,C=C||0;for(var R=0;R<l;++R){var O=f[c[R]];u.vertexAttribPointer(O,l,A,E,I,C+R*l),u.enableVertexAttribArray(O)}};var k=new Array(l),M=u["vertexAttrib"+l+"fv"];Object.defineProperty(h,d,{set:function(A){for(var E=0;E<l;++E){var I=f[c[E]];if(u.disableVertexAttribArray(I),Array.isArray(A[0]))M.call(u,I,A[E]);else{for(var C=0;C<l;++C)k[C]=A[l*E+C];M.call(u,I,k)}}return A},get:function(){return o},enumerable:!0})}},{"./GLError":133}],135:[function(m,w,y){"use strict";var e=m("./reflect"),r=m("./GLError");function n(t){return function(){return t}}function a(t,p){for(var u=new Array(t),i=0;i<t;++i)u[i]=p;return u}w.exports=function(t,p,u,i){function c(d){return function(o){for(var _=function j(W,Y){if("object"!=typeof Y)return[[W,Y]];var Q=[];for(var ne in Y){var X=Y[ne],$=W;parseInt(ne)+""===ne?$+="["+ne+"]":$+="."+ne,"object"==typeof X?Q.push.apply(Q,j($,X)):Q.push([$,X])}return Q}("",d),s=0;s<_.length;++s){var k=_[s],M=k[0],A=k[1];if(i[A]){var E=o;if("string"==typeof M&&(0===M.indexOf(".")||0===M.indexOf("["))){var I=M;if(0===M.indexOf(".")&&(I=M.slice(1)),I.indexOf("]")===I.length-1){var C=I.indexOf("["),R=I.slice(0,C),O=I.slice(C+1,I.length-1);E=R?o[R][O]:o[O]}else E=o[I]}var D,L=u[A].type;switch(L){case"bool":case"int":case"sampler2D":case"samplerCube":t.uniform1i(i[A],E);break;case"float":t.uniform1f(i[A],E);break;default:var B=L.indexOf("vec");if(!(0<=B&&B<=1&&L.length===4+B)){if(0===L.indexOf("mat")&&4===L.length){if((D=L.charCodeAt(L.length-1)-48)<2||D>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+L);t["uniformMatrix"+D+"fv"](i[A],!1,E);break}throw new r("","Unknown uniform data type for "+name+": "+L)}if((D=L.charCodeAt(L.length-1)-48)<2||D>4)throw new r("","Invalid data type");switch(L.charAt(0)){case"b":case"i":t["uniform"+D+"iv"](i[A],E);break;case"v":t["uniform"+D+"fv"](i[A],E);break;default:throw new r("","Unrecognized data type for vector "+name+": "+L)}}}}}}function f(d,o,_){if("object"==typeof _){var s=l(_);Object.defineProperty(d,o,{get:n(s),set:c(_),enumerable:!0,configurable:!1})}else i[_]?Object.defineProperty(d,o,{get:(k=_,function(M,A,E){return M.getUniform(A.program,E[k])}),set:c(_),enumerable:!0,configurable:!1}):d[o]=function(M){switch(M){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var A=M.indexOf("vec");if(0<=A&&A<=1&&M.length===4+A){if((E=M.charCodeAt(M.length-1)-48)<2||E>4)throw new r("","Invalid data type");return"b"===M.charAt(0)?a(E,!1):a(E,0)}if(0===M.indexOf("mat")&&4===M.length){var E;if((E=M.charCodeAt(M.length-1)-48)<2||E>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+M);return a(E*E,0)}throw new r("","Unknown uniform data type for "+name+": "+M)}}(u[_].type);var k}function l(d){var o;if(Array.isArray(d)){o=new Array(d.length);for(var _=0;_<d.length;++_)f(o,_,d[_])}else for(var s in o={},d)f(o,s,d[s]);return o}var h=e(u,!0);return{get:n(l(h)),set:c(h),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(m,w,y){"use strict";w.exports=function(e,r){for(var n={},a=0;a<e.length;++a)for(var t=e[a].name.split("."),p=n,u=0;u<t.length;++u){var i=t[u].split("[");if(i.length>1){i[0]in p||(p[i[0]]=[]),p=p[i[0]];for(var c=1;c<i.length;++c){var f=parseInt(i[c]);c<i.length-1||u<t.length-1?(f in p||(p[f]=c<i.length-1?[]:{}),p=p[f]):p[f]=r?a:e[a].type}}else u<t.length-1?(i[0]in p||(p[i[0]]={}),p=p[i[0]]):p[i[0]]=r?a:e[a].type}return n}},{}],137:[function(m,w,y){"use strict";y.uniforms=function(a,t){for(var p=a.getProgramParameter(t,a.ACTIVE_UNIFORMS),u=[],i=0;i<p;++i){var c=a.getActiveUniform(t,i);if(c){var f=n(a,c.type);if(c.size>1)for(var l=0;l<c.size;++l)u.push({name:c.name.replace("[0]","["+l+"]"),type:f});else u.push({name:c.name,type:f})}}return u},y.attributes=function(a,t){for(var p=a.getProgramParameter(t,a.ACTIVE_ATTRIBUTES),u=[],i=0;i<p;++i){var c=a.getActiveAttrib(t,i);c&&u.push({name:c.name,type:n(a,c.type)})}return u};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},r=null;function n(a,t){if(!r){var p=Object.keys(e);r={};for(var u=0;u<p.length;++u){var i=p[u];r[a[i]]=e[i]}}return r[t]}},{}],138:[function(m,w,y){"use strict";y.shader=function(c,f,l){return i(c).getShaderReference(f,l)},y.program=function(c,f,l,h,d){return i(c).getProgram(f,l,h,d)};var e=m("./GLError"),r=m("gl-format-compiler-error"),n=new("undefined"==typeof WeakMap?m("weakmap-shim"):WeakMap),a=0;function t(c,f,l,h,d,o,_){this.id=c,this.src=f,this.type=l,this.shader=h,this.count=o,this.programs=[],this.cache=_}function p(c){this.gl=c,this.shaders=[{},{}],this.programs={}}t.prototype.dispose=function(){if(0==--this.count){for(var c=this.cache,f=c.gl,l=this.programs,h=0,d=l.length;h<d;++h){var o=c.programs[l[h]];o&&(delete c.programs[h],f.deleteProgram(o))}f.deleteShader(this.shader),delete c.shaders[this.type===f.FRAGMENT_SHADER|0][this.src]}};var u=p.prototype;function i(c){var f=n.get(c);return f||(f=new p(c),n.set(c,f)),f}u.getShaderReference=function(c,f){var l=this.gl,h=this.shaders[c===l.FRAGMENT_SHADER|0],d=h[f];if(d&&l.isShader(d.shader))d.count+=1;else{var o=function(_,s,k){var M=_.createShader(s);if(_.shaderSource(M,k),_.compileShader(M),!_.getShaderParameter(M,_.COMPILE_STATUS)){var A=_.getShaderInfoLog(M);try{var E=r(A,k,s)}catch(I){throw console.warn("Failed to format compiler error: "+I),new e(A,"Error compiling shader:\n"+A)}throw new e(A,E.short,E.long)}return M}(l,c,f);d=h[f]=new t(a++,f,c,o,[],1,this)}return d},u.getProgram=function(c,f,l,h){var d=[c.id,f.id,l.join(":"),h.join(":")].join("@"),o=this.programs[d];return o&&this.gl.isProgram(o)||(this.programs[d]=o=function(_,s,k,M,A){var E=_.createProgram();_.attachShader(E,s),_.attachShader(E,k);for(var I=0;I<M.length;++I)_.bindAttribLocation(E,A[I],M[I]);if(_.linkProgram(E),!_.getProgramParameter(E,_.LINK_STATUS)){var C=_.getProgramInfoLog(E);throw new e(C,"Error linking program: "+C)}return E}(this.gl,c.shader,f.shader,l,h),c.programs.push(d),f.programs.push(d)),o}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(m,w,y){"use strict";function e(n){this.plot=n,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}w.exports=function(n,a){var t=new e(n);return t.update(a),n.addOverlay(t),t};var r=e.prototype;r.update=function(n){this.enable=((n=n||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(n.width||[1,1,1,1]).slice(),this.color=(n.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(a){return a.slice()}),this.center=(n.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},r.draw=function(){var n=this.enable,a=this.width,t=this.color,p=this.center,u=this.plot,i=u.line,c=u.dataBox,f=u.viewBox;if(i.bind(),c[0]<=p[0]&&p[0]<=c[2]&&c[1]<=p[1]&&p[1]<=c[3]){var l=f[0]+(p[0]-c[0])/(c[2]-c[0])*(f[2]-f[0]),h=f[1]+(p[1]-c[1])/(c[3]-c[1])*(f[3]-f[1]);n[0]&&i.drawLine(l,h,f[0],h,a[0],t[0]),n[1]&&i.drawLine(l,h,l,f[1],a[1],t[1]),n[2]&&i.drawLine(l,h,f[2],h,a[2],t[2]),n[3]&&i.drawLine(l,h,l,f[3],a[3],t[3])}},r.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(m,w,y){"use strict";var e=m("glslify"),r=m("gl-shader"),n=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),a=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);w.exports=function(t){return r(t,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(m,w,y){"use strict";var e=m("gl-buffer"),r=m("gl-vao"),n=m("./shaders/index");w.exports=function(f,l){var h=[];function d(M,A,E,I,C,R){var O=[M,A,E,0,0,0,1];O[I+3]=1,O[I]=C,h.push.apply(h,O),O[6]=-1,h.push.apply(h,O),O[I]=R,h.push.apply(h,O),h.push.apply(h,O),O[6]=1,h.push.apply(h,O),O[I]=C,h.push.apply(h,O)}d(0,0,0,0,0,1),d(0,0,0,1,0,1),d(0,0,0,2,0,1),d(1,0,0,1,-1,1),d(1,0,0,2,-1,1),d(0,1,0,0,-1,1),d(0,1,0,2,-1,1),d(0,0,1,0,-1,1),d(0,0,1,1,-1,1);var o=e(f,h),_=r(f,[{type:f.FLOAT,buffer:o,size:3,offset:0,stride:28},{type:f.FLOAT,buffer:o,size:3,offset:12,stride:28},{type:f.FLOAT,buffer:o,size:1,offset:24,stride:28}]),s=n(f);s.attributes.position.location=0,s.attributes.color.location=1,s.attributes.weight.location=2;var k=new t(f,o,_,s);return k.update(l),k};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(f,l,h,d){this.gl=f,this.buffer=l,this.vao=h,this.shader=d,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var p=t.prototype,u=[0,0,0],i=[0,0,0],c=[0,0];p.isTransparent=function(){return!1},p.drawTransparent=function(f){},p.draw=function(f){var l=this.gl,h=this.vao,d=this.shader;h.bind(),d.bind();var o,_=f.model||a,s=f.view||a,k=f.projection||a;this.axes&&(o=this.axes.lastCubeProps.axis);for(var M=u,A=i,E=0;E<3;++E)o&&o[E]<0?(M[E]=this.bounds[0][E],A[E]=this.bounds[1][E]):(M[E]=this.bounds[1][E],A[E]=this.bounds[0][E]);for(c[0]=l.drawingBufferWidth,c[1]=l.drawingBufferHeight,d.uniforms.model=_,d.uniforms.view=s,d.uniforms.projection=k,d.uniforms.coordinates=[this.position,M,A],d.uniforms.colors=this.colors,d.uniforms.screenShape=c,E=0;E<3;++E)d.uniforms.lineWidth=this.lineWidth[E]*this.pixelRatio,this.enabled[E]&&(h.draw(l.TRIANGLES,6,6*E),this.drawSides[E]&&h.draw(l.TRIANGLES,12,18+12*E));h.unbind()},p.update=function(f){f&&("bounds"in f&&(this.bounds=f.bounds),"position"in f&&(this.position=f.position),"lineWidth"in f&&(this.lineWidth=f.lineWidth),"colors"in f&&(this.colors=f.colors),"enabled"in f&&(this.enabled=f.enabled),"drawSides"in f&&(this.drawSides=f.drawSides))},p.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(m,w,y){var e=m("glslify"),r=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),n=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),t=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);y.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},y.pickShader={vertex:a,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(m,w,y){"use strict";var e=m("gl-vec3"),r=m("gl-vec4"),n=["xyz","xzy","yxz","yzx","zxy","zyx"],t=function(f,l){var h,d=f.length;for(h=0;h<d;h++){var o=f[h];if(o===l)return h;if(o>l)return h-1}return h},p=function(f,l,h){return f<l?l:f>h?h:f},u=function(f){var l=1/0;f.sort(function(_,s){return _-s});for(var h=f.length,d=1;d<h;d++){var o=Math.abs(f[d]-f[d-1]);o<l&&(l=o)}return l};w.exports=function(f,l){var h=f.startingPositions,d=f.maxLength||1e3,o=f.tubeSize||1,_=f.absoluteTubeSize,s=f.gridFill||"+x+y+z",k={};-1!==s.indexOf("-x")&&(k.reversedX=!0),-1!==s.indexOf("-y")&&(k.reversedY=!0),-1!==s.indexOf("-z")&&(k.reversedZ=!0),k.filled=n.indexOf(s.replace(/-/g,"").replace(/\+/g,""));var he,xe,ge,_e,M=f.getVelocity||function(he){return function(xe,ge,_e){var Ce=ge.vectors,Le=ge.meshgrid,Ie=xe[0],Be=xe[1],ve=xe[2],Te=Le[0].length,Pe=Le[1].length,De=Le[2].length,Fe=t(Le[0],Ie),Ue=t(Le[1],Be),He=t(Le[2],ve),Ke=Fe+1,st=Ue+1,Ve=He+1;if(Fe=p(Fe,0,Te-1),Ke=p(Ke,0,Te-1),Ue=p(Ue,0,Pe-1),st=p(st,0,Pe-1),He=p(He,0,De-1),Ve=p(Ve,0,De-1),Fe<0||Ue<0||He<0||Ke>Te-1||st>Pe-1||Ve>De-1)return e.create();var $e,Qe,tt,ut,xt,kt,Bt=Le[0][Fe],ft=Le[1][Ue],Ft=Le[2][He],Jt=(Ie-Bt)/(Le[0][Ke]-Bt),ln=(Be-ft)/(Le[1][st]-ft),dn=(ve-Ft)/(Le[2][Ve]-Ft);switch(isFinite(Jt)||(Jt=.5),isFinite(ln)||(ln=.5),isFinite(dn)||(dn=.5),_e.reversedX&&(Fe=Te-1-Fe,Ke=Te-1-Ke),_e.reversedY&&(Ue=Pe-1-Ue,st=Pe-1-st),_e.reversedZ&&(He=De-1-He,Ve=De-1-Ve),_e.filled){case 5:xt=He,kt=Ve,tt=Ue*De,ut=st*De,$e=Fe*De*Pe,Qe=Ke*De*Pe;break;case 4:xt=He,kt=Ve,$e=Fe*De,Qe=Ke*De,tt=Ue*De*Te,ut=st*De*Te;break;case 3:tt=Ue,ut=st,xt=He*Pe,kt=Ve*Pe,$e=Fe*Pe*De,Qe=Ke*Pe*De;break;case 2:tt=Ue,ut=st,$e=Fe*Pe,Qe=Ke*Pe,xt=He*Pe*Te,kt=Ve*Pe*Te;break;case 1:$e=Fe,Qe=Ke,xt=He*Te,kt=Ve*Te,tt=Ue*Te*De,ut=st*Te*De;break;default:$e=Fe,Qe=Ke,tt=Ue*Te,ut=st*Te,xt=He*Te*Pe,kt=Ve*Te*Pe}var cn=Ce[$e+tt+xt],Tn=Ce[$e+tt+kt],nn=Ce[$e+ut+xt],Me=Ce[$e+ut+kt],Ee=Ce[Qe+tt+xt],Se=Ce[Qe+tt+kt],je=Ce[Qe+ut+xt],qe=Ce[Qe+ut+kt],Je=e.create(),at=e.create(),it=e.create(),yt=e.create();e.lerp(Je,cn,Ee,Jt),e.lerp(at,Tn,Se,Jt),e.lerp(it,nn,je,Jt),e.lerp(yt,Me,qe,Jt);var vt=e.create(),Ut=e.create();e.lerp(vt,Je,it,ln),e.lerp(Ut,at,yt,ln);var Wt=e.create();return e.lerp(Wt,vt,Ut,dn),Wt}(he,f,k)},A=f.getDivergence||function(he,xe){var ge=e.create(),_e=1e-4;e.add(ge,he,[_e,0,0]);var Ce=M(ge);e.subtract(Ce,Ce,xe),e.scale(Ce,Ce,1/_e),e.add(ge,he,[0,_e,0]);var Le=M(ge);e.subtract(Le,Le,xe),e.scale(Le,Le,1/_e),e.add(ge,he,[0,0,_e]);var Ie=M(ge);return e.subtract(Ie,Ie,xe),e.scale(Ie,Ie,1/_e),e.add(ge,Ce,Le),e.add(ge,ge,Ie),ge},E=[],I=l[0][0],C=l[0][1],R=l[0][2],O=l[1][0],D=l[1][1],L=l[1][2],j=10*e.distance(l[0],l[1])/d,W=j*j,Y=1,Q=0,ne=h.length;ne>1&&(Y=function(he){for(var xe=[],ge=[],_e=[],Ce={},Le={},Ie={},Be=he.length,ve=0;ve<Be;ve++){var Te=he[ve],Pe=Te[0],De=Te[1],Fe=Te[2];Ce[Pe]||(xe.push(Pe),Ce[Pe]=!0),Le[De]||(ge.push(De),Le[De]=!0),Ie[Fe]||(_e.push(Fe),Ie[Fe]=!0)}var Ue=u(xe),He=u(ge),Ke=u(_e),st=Math.min(Ue,He,Ke);return isFinite(st)?st:1}(h));for(var X=0;X<ne;X++){var $=e.create();e.copy($,h[X]);var re=[$],H=[],U=M($),G=$;H.push(U);var ie=[],q=A($,U),ee=e.length(q);isFinite(ee)&&ee>Q&&(Q=ee),ie.push(ee),E.push({points:re,velocities:H,divergences:ie});for(var te=0;te<100*d&&re.length<d&&(xe=void 0,ge=void 0,_e=void 0,ge=(he=$)[1],_e=he[2],!((xe=he[0])<I||xe>O||ge<C||ge>D||_e<R||_e>L));){te++;var se=e.clone(U),ue=e.squaredLength(se);if(0===ue)break;ue>W&&e.scale(se,se,j/Math.sqrt(ue)),e.add(se,se,$),U=M(se),e.squaredDistance(G,se)-W>-1e-4*W&&(re.push(se),G=se,H.push(U),q=A(se,U),ee=e.length(q),isFinite(ee)&&ee>Q&&(Q=ee),ie.push(ee)),$=se}}var de=function(f,l,h,d){for(var o=0,_=0;_<f.length;_++)for(var s=f[_].velocities,k=0;k<s.length;k++)o=Math.max(o,e.length(s[k]));var M=f.map(function(j){return function(W,Y,Q,ne){for(var X=W.points,$=W.velocities,re=W.divergences,H=[],U=[],G=[],ie=[],q=[],ee=[],te=0,se=0,ue=r.create(),de=r.create(),he=0;he<X.length;he++){var xe=X[he],ge=$[he],_e=re[he];0===Y&&(_e=.05*Q),se=e.length(ge)/ne,ue=r.create(),e.copy(ue,ge),ue[3]=_e;for(var Ce=0;Ce<8;Ce++)q[Ce]=[xe[0],xe[1],xe[2],Ce];if(ie.length>0)for(Ce=0;Ce<8;Ce++){var Le=(Ce+1)%8;H.push(ie[Ce],q[Ce],q[Le],q[Le],ie[Le],ie[Ce]),G.push(de,ue,ue,ue,de,de),ee.push(te,se,se,se,te,te);var Ie=H.length;U.push([Ie-6,Ie-5,Ie-4],[Ie-3,Ie-2,Ie-1])}var Be=ie;ie=q,q=Be;var ve=de;de=ue,ue=ve;var Te=te;te=se,se=Te}return{positions:H,cells:U,vectors:G,vertexIntensity:ee}}(j,h,d,o)}),A=[],E=[],I=[],C=[];for(_=0;_<M.length;_++){var R=M[_],O=A.length;for(A=A.concat(R.positions),I=I.concat(R.vectors),C=C.concat(R.vertexIntensity),k=0;k<R.cells.length;k++){var D=R.cells[k],L=[];E.push(L);for(var B=0;B<D.length;B++)L.push(D[B]+O)}}return{positions:A,cells:E,vectors:I,vertexIntensity:C,colormap:l}}(E,f.colormap,Q,Y);return _?de.tubeScale=_:(0===Q&&(Q=1),de.tubeScale=.5*o*Y/Q),de};var i=m("./lib/shaders"),c=m("gl-cone3d").createMesh;w.exports.createTubeMesh=function(f,l){return c(f,l,{shaders:i,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(m,w,y){var e=m("gl-shader"),r=m("glslify"),n=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),t=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),p=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);y.createShader=function(u){var i=e(u,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},y.createPickShader=function(u){var i=e(u,n,p,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},y.createContourShader=function(u){var i=e(u,t,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i},y.createPickContourShader=function(u){var i=e(u,t,p,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i}},{"gl-shader":132,glslify:231}],145:[function(m,w,y){"use strict";w.exports=function(U){var G=U.gl,ie=s(G),q=M(G),ee=k(G),te=A(G),se=r(G),ue=n(G,[{buffer:se,size:4,stride:40,offset:0},{buffer:se,size:3,stride:40,offset:16},{buffer:se,size:3,stride:40,offset:28}]),de=r(G),he=n(G,[{buffer:de,size:4,stride:20,offset:0},{buffer:de,size:1,stride:20,offset:16}]),xe=r(G),ge=n(G,[{buffer:xe,size:2,type:G.FLOAT}]),_e=a(G,1,256,G.RGBA,G.UNSIGNED_BYTE);_e.minFilter=G.LINEAR,_e.magFilter=G.LINEAR;var Ce=new O(G,[0,0],[[0,0,0],[0,0,0]],ie,q,se,ue,_e,ee,te,de,he,xe,ge,[0,0,0]),Le={levels:[[],[],[]]};for(var Ie in U)Le[Ie]=U[Ie];return Le.colormap=Le.colormap||"jet",Ce.update(Le),Ce};var e=m("bit-twiddle"),r=m("gl-buffer"),n=m("gl-vao"),a=m("gl-texture2d"),t=m("typedarray-pool"),p=m("colormap"),u=m("ndarray-ops"),i=m("ndarray-pack"),c=m("ndarray"),f=m("surface-nets"),l=m("gl-mat4/multiply"),h=m("gl-mat4/invert"),d=m("binary-search-bounds"),o=m("ndarray-gradient"),_=m("./lib/shaders"),s=_.createShader,k=_.createContourShader,M=_.createPickShader,A=_.createPickContourShader,E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],C=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function R(U,G,ie,q,ee){this.position=U,this.index=G,this.uv=ie,this.level=q,this.dataCoordinate=ee}function O(U,G,ie,q,ee,te,se,ue,de,he,xe,ge,_e,Ce,Le){this.gl=U,this.shape=G,this.bounds=ie,this.objectOffset=Le,this.intensityBounds=[],this._shader=q,this._pickShader=ee,this._coordinateBuffer=te,this._vao=se,this._colorMap=ue,this._contourShader=de,this._contourPickShader=he,this._contourBuffer=xe,this._contourVAO=ge,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new R([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=_e,this._dynamicVAO=Ce,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[c(t.mallocFloat(1024),[0,0]),c(t.mallocFloat(1024),[0,0]),c(t.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var U=0;U<3;++U){var G=C[U],ie=(U+2)%3;G[(U+1)%3+0]=1,G[ie+3]=1,G[U+6]=1}}();var D=O.prototype;D.genColormap=function(U,G){var ie=!1,q=i([p({colormap:U,nshades:256,format:"rgba"}).map(function(ee,te){var se=G?function(ue,de){if(!de||!de.length)return 1;for(var he=0;he<de.length;++he){if(de.length<2)return 1;if(de[he][0]===ue)return de[he][1];if(de[he][0]>ue&&he>0){var xe=(de[he][0]-ue)/(de[he][0]-de[he-1][0]);return de[he][1]*(1-xe)+xe*de[he-1][1]}}return 1}(te/255,G):ee[3];return se<1&&(ie=!0),[ee[0],ee[1],ee[2],255*se]})]);return u.divseq(q,255),this.hasAlphaScale=ie,q},D.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},D.isOpaque=function(){return!this.isTransparent()},D.pickSlots=1,D.setPickBase=function(U){this.pickId=U};var L=[0,0,0],B={showSurface:!1,showContour:!1,projections:[E.slice(),E.slice(),E.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function j(U,G){var ie,q,ee,te=G.axes&&G.axes.lastCubeProps.axis||L,se=G.showSurface,ue=G.showContour;for(ie=0;ie<3;++ie)for(se=se||G.surfaceProject[ie],q=0;q<3;++q)ue=ue||G.contourProject[ie][q];for(ie=0;ie<3;++ie){var de=B.projections[ie];for(q=0;q<16;++q)de[q]=0;for(q=0;q<4;++q)de[5*q]=1;de[5*ie]=0,de[12+ie]=G.axesBounds[+(te[ie]>0)][ie],l(de,U.model,de);var he=B.clipBounds[ie];for(ee=0;ee<2;++ee)for(q=0;q<3;++q)he[ee][q]=U.clipBounds[ee][q];he[0][ie]=-1e8,he[1][ie]=1e8}return B.showSurface=se,B.showContour=ue,B}var W={model:E,view:E,projection:E,inverseModel:E.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},Y=E.slice(),Q=[1,0,0,0,1,0,0,0,1];function ne(U,G){U=U||{};var ie=this.gl;ie.disable(ie.CULL_FACE),this._colorMap.bind(0);var q=W;q.model=U.model||E,q.view=U.view||E,q.projection=U.projection||E,q.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],q.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],q.objectOffset=this.objectOffset,q.contourColor=this.contourColor[0],q.inverseModel=h(q.inverseModel,q.model);for(var ee=0;ee<2;++ee)for(var te=q.clipBounds[ee],se=0;se<3;++se)te[se]=Math.min(Math.max(this.clipBounds[ee][se],-1e8),1e8);q.kambient=this.ambientLight,q.kdiffuse=this.diffuseLight,q.kspecular=this.specularLight,q.roughness=this.roughness,q.fresnel=this.fresnel,q.opacity=this.opacity,q.height=0,q.permutation=Q,q.vertexColor=this.vertexColor;var ue=Y;for(l(ue,q.view,q.model),l(ue,q.projection,ue),h(ue,ue),ee=0;ee<3;++ee)q.eyePosition[ee]=ue[12+ee]/ue[15];var de=ue[15];for(ee=0;ee<3;++ee)de+=this.lightPosition[ee]*ue[4*ee+3];for(ee=0;ee<3;++ee){var he=ue[12+ee];for(se=0;se<3;++se)he+=ue[4*se+ee]*this.lightPosition[se];q.lightPosition[ee]=he/de}var xe=j(q,this);if(xe.showSurface){for(this._shader.bind(),this._shader.uniforms=q,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ie.TRIANGLES,this._vertexCount),ee=0;ee<3;++ee)this.surfaceProject[ee]&&this.vertexCount&&(this._shader.uniforms.model=xe.projections[ee],this._shader.uniforms.clipBounds=xe.clipBounds[ee],this._vao.draw(ie.TRIANGLES,this._vertexCount));this._vao.unbind()}if(xe.showContour){var ge=this._contourShader;q.kambient=1,q.kdiffuse=0,q.kspecular=0,q.opacity=1,ge.bind(),ge.uniforms=q;var _e=this._contourVAO;for(_e.bind(),ee=0;ee<3;++ee)for(ge.uniforms.permutation=C[ee],ie.lineWidth(this.contourWidth[ee]*this.pixelRatio),se=0;se<this.contourLevels[ee].length;++se)se===this.highlightLevel[ee]?(ge.uniforms.contourColor=this.highlightColor[ee],ge.uniforms.contourTint=this.highlightTint[ee]):0!==se&&se-1!==this.highlightLevel[ee]||(ge.uniforms.contourColor=this.contourColor[ee],ge.uniforms.contourTint=this.contourTint[ee]),this._contourCounts[ee][se]&&(ge.uniforms.height=this.contourLevels[ee][se],_e.draw(ie.LINES,this._contourCounts[ee][se],this._contourOffsets[ee][se]));for(ee=0;ee<3;++ee)for(ge.uniforms.model=xe.projections[ee],ge.uniforms.clipBounds=xe.clipBounds[ee],se=0;se<3;++se)if(this.contourProject[ee][se]){ge.uniforms.permutation=C[se],ie.lineWidth(this.contourWidth[se]*this.pixelRatio);for(var Ce=0;Ce<this.contourLevels[se].length;++Ce)Ce===this.highlightLevel[se]?(ge.uniforms.contourColor=this.highlightColor[se],ge.uniforms.contourTint=this.highlightTint[se]):0!==Ce&&Ce-1!==this.highlightLevel[se]||(ge.uniforms.contourColor=this.contourColor[se],ge.uniforms.contourTint=this.contourTint[se]),this._contourCounts[se][Ce]&&(ge.uniforms.height=this.contourLevels[se][Ce],_e.draw(ie.LINES,this._contourCounts[se][Ce],this._contourOffsets[se][Ce]))}for(_e.unbind(),(_e=this._dynamicVAO).bind(),ee=0;ee<3;++ee)if(0!==this._dynamicCounts[ee])for(ge.uniforms.model=q.model,ge.uniforms.clipBounds=q.clipBounds,ge.uniforms.permutation=C[ee],ie.lineWidth(this.dynamicWidth[ee]*this.pixelRatio),ge.uniforms.contourColor=this.dynamicColor[ee],ge.uniforms.contourTint=this.dynamicTint[ee],ge.uniforms.height=this.dynamicLevel[ee],_e.draw(ie.LINES,this._dynamicCounts[ee],this._dynamicOffsets[ee]),se=0;se<3;++se)this.contourProject[se][ee]&&(ge.uniforms.model=xe.projections[se],ge.uniforms.clipBounds=xe.clipBounds[se],_e.draw(ie.LINES,this._dynamicCounts[ee],this._dynamicOffsets[ee]));_e.unbind()}}D.draw=function(U){return ne.call(this,U,!1)},D.drawTransparent=function(U){return ne.call(this,U,!0)};var X={model:E,view:E,projection:E,inverseModel:E,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function $(U,G){return Array.isArray(U)?[G(U[0]),G(U[1]),G(U[2])]:[G(U),G(U),G(U)]}function re(U){return Array.isArray(U)?3===U.length?[U[0],U[1],U[2],1]:[U[0],U[1],U[2],U[3]]:[0,0,0,1]}function H(U){if(Array.isArray(U)){if(Array.isArray(U))return[re(U[0]),re(U[1]),re(U[2])];var G=re(U);return[G.slice(),G.slice(),G.slice()]}}D.drawPick=function(U){U=U||{};var G=this.gl;G.disable(G.CULL_FACE);var ie=X;ie.model=U.model||E,ie.view=U.view||E,ie.projection=U.projection||E,ie.shape=this._field[2].shape,ie.pickId=this.pickId/255,ie.lowerBound=this.bounds[0],ie.upperBound=this.bounds[1],ie.objectOffset=this.objectOffset,ie.permutation=Q;for(var q=0;q<2;++q)for(var ee=ie.clipBounds[q],te=0;te<3;++te)ee[te]=Math.min(Math.max(this.clipBounds[q][te],-1e8),1e8);var se=j(ie,this);if(se.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ie,this._vao.bind(),this._vao.draw(G.TRIANGLES,this._vertexCount),q=0;q<3;++q)this.surfaceProject[q]&&(this._pickShader.uniforms.model=se.projections[q],this._pickShader.uniforms.clipBounds=se.clipBounds[q],this._vao.draw(G.TRIANGLES,this._vertexCount));this._vao.unbind()}if(se.showContour){var ue=this._contourPickShader;ue.bind(),ue.uniforms=ie;var de=this._contourVAO;for(de.bind(),te=0;te<3;++te)for(G.lineWidth(this.contourWidth[te]*this.pixelRatio),ue.uniforms.permutation=C[te],q=0;q<this.contourLevels[te].length;++q)this._contourCounts[te][q]&&(ue.uniforms.height=this.contourLevels[te][q],de.draw(G.LINES,this._contourCounts[te][q],this._contourOffsets[te][q]));for(q=0;q<3;++q)for(ue.uniforms.model=se.projections[q],ue.uniforms.clipBounds=se.clipBounds[q],te=0;te<3;++te)if(this.contourProject[q][te]){ue.uniforms.permutation=C[te],G.lineWidth(this.contourWidth[te]*this.pixelRatio);for(var he=0;he<this.contourLevels[te].length;++he)this._contourCounts[te][he]&&(ue.uniforms.height=this.contourLevels[te][he],de.draw(G.LINES,this._contourCounts[te][he],this._contourOffsets[te][he]))}de.unbind()}},D.pick=function(U){if(!U||U.id!==this.pickId)return null;var G=this._field[2].shape,ie=this._pickResult,q=G[0]*(U.value[0]+(U.value[2]>>4)/16)/255,ee=Math.floor(q),te=q-ee,se=G[1]*(U.value[1]+(15&U.value[2])/16)/255,ue=Math.floor(se),de=se-ue;ee+=1,ue+=1;var he=ie.position;he[0]=he[1]=he[2]=0;for(var xe=0;xe<2;++xe)for(var ge=xe?te:1-te,_e=0;_e<2;++_e)for(var Ce=ee+xe,Le=ue+_e,Ie=ge*(_e?de:1-de),Be=0;Be<3;++Be)he[Be]+=this._field[Be].get(Ce,Le)*Ie;for(var ve=this._pickResult.level,Te=0;Te<3;++Te)if(ve[Te]=d.le(this.contourLevels[Te],he[Te]),ve[Te]<0)this.contourLevels[Te].length>0&&(ve[Te]=0);else if(ve[Te]<this.contourLevels[Te].length-1){var De=this.contourLevels[Te][ve[Te]+1];Math.abs(this.contourLevels[Te][ve[Te]]-he[Te])>Math.abs(De-he[Te])&&(ve[Te]+=1)}for(ie.index[0]=te<.5?ee:ee+1,ie.index[1]=de<.5?ue:ue+1,ie.uv[0]=q/G[0],ie.uv[1]=se/G[1],Be=0;Be<3;++Be)ie.dataCoordinate[Be]=this._field[Be].get(ie.index[0],ie.index[1]);return ie},D.padField=function(U,G){var ie=G.shape.slice(),q=U.shape.slice();u.assign(U.lo(1,1).hi(ie[0],ie[1]),G),u.assign(U.lo(1).hi(ie[0],1),G.hi(ie[0],1)),u.assign(U.lo(1,q[1]-1).hi(ie[0],1),G.lo(0,ie[1]-1).hi(ie[0],1)),u.assign(U.lo(0,1).hi(1,ie[1]),G.hi(1)),u.assign(U.lo(q[0]-1,1).hi(1,ie[1]),G.lo(ie[0]-1)),U.set(0,0,G.get(0,0)),U.set(0,q[1]-1,G.get(0,ie[1]-1)),U.set(q[0]-1,0,G.get(ie[0]-1,0)),U.set(q[0]-1,q[1]-1,G.get(ie[0]-1,ie[1]-1))},D.update=function(U){this.objectOffset=(U=U||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in U&&(this.contourWidth=$(U.contourWidth,Number)),"showContour"in U&&(this.showContour=$(U.showContour,Boolean)),"showSurface"in U&&(this.showSurface=!!U.showSurface),"contourTint"in U&&(this.contourTint=$(U.contourTint,Boolean)),"contourColor"in U&&(this.contourColor=H(U.contourColor)),"contourProject"in U&&(this.contourProject=$(U.contourProject,function(un){return $(un,Boolean)})),"surfaceProject"in U&&(this.surfaceProject=U.surfaceProject),"dynamicColor"in U&&(this.dynamicColor=H(U.dynamicColor)),"dynamicTint"in U&&(this.dynamicTint=$(U.dynamicTint,Number)),"dynamicWidth"in U&&(this.dynamicWidth=$(U.dynamicWidth,Number)),"opacity"in U&&(this.opacity=U.opacity),"opacityscale"in U&&(this.opacityscale=U.opacityscale),"colorBounds"in U&&(this.colorBounds=U.colorBounds),"vertexColor"in U&&(this.vertexColor=U.vertexColor?1:0),"colormap"in U&&this._colorMap.setPixels(this.genColormap(U.colormap,this.opacityscale));var G=U.field||U.coords&&U.coords[2]||null,ie=!1;if(G||(G=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in U||"coords"in U){var q=(G.shape[0]+2)*(G.shape[1]+2);q>this._field[2].data.length&&(t.freeFloat(this._field[2].data),this._field[2].data=t.mallocFloat(e.nextPow2(q))),this._field[2]=c(this._field[2].data,[G.shape[0]+2,G.shape[1]+2]),this.padField(this._field[2],G),this.shape=G.shape.slice();for(var ee=this.shape,te=0;te<2;++te)this._field[2].size>this._field[te].data.length&&(t.freeFloat(this._field[te].data),this._field[te].data=t.mallocFloat(this._field[2].size)),this._field[te]=c(this._field[te].data,[ee[0]+2,ee[1]+2]);if(U.coords){var se=U.coords;if(!Array.isArray(se)||3!==se.length)throw new Error("gl-surface: invalid coordinates for x/y");for(te=0;te<2;++te){var ue=se[te];for(_e=0;_e<2;++_e)if(ue.shape[_e]!==ee[_e])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[te],ue)}}else if(U.ticks){var de=U.ticks;if(!Array.isArray(de)||2!==de.length)throw new Error("gl-surface: invalid ticks");for(te=0;te<2;++te){var he=de[te];if((Array.isArray(he)||he.length)&&(he=c(he)),he.shape[0]!==ee[te])throw new Error("gl-surface: invalid tick length");var xe=c(he.data,ee);xe.stride[te]=he.stride[0],xe.stride[1^te]=0,this.padField(this._field[te],xe)}}else{for(te=0;te<2;++te){var ge=[0,0];ge[te]=1,this._field[te]=c(this._field[te].data,[ee[0]+2,ee[1]+2],ge,0)}this._field[0].set(0,0,0);for(var _e=0;_e<ee[0];++_e)this._field[0].set(_e+1,0,_e);for(this._field[0].set(ee[0]+1,0,ee[0]-1),this._field[1].set(0,0,0),_e=0;_e<ee[1];++_e)this._field[1].set(0,_e+1,_e);this._field[1].set(0,ee[1]+1,ee[1]-1)}var Ce=this._field,Le=c(t.mallocFloat(3*Ce[2].size*2),[3,ee[0]+2,ee[1]+2,2]);for(te=0;te<3;++te)o(Le.pick(te),Ce[te],"mirror");var Ie=c(t.mallocFloat(3*Ce[2].size),[ee[0]+2,ee[1]+2,3]);for(te=0;te<ee[0]+2;++te)for(_e=0;_e<ee[1]+2;++_e){var Be=Le.get(0,te,_e,0),ve=Le.get(0,te,_e,1),Te=Le.get(1,te,_e,0),Pe=Le.get(1,te,_e,1),De=Le.get(2,te,_e,0),Fe=Le.get(2,te,_e,1),Ue=Te*Fe-Pe*De,He=De*ve-Fe*Be,Ke=Be*Pe-ve*Te,st=Math.sqrt(Ue*Ue+He*He+Ke*Ke);st<1e-8?(st=Math.max(Math.abs(Ue),Math.abs(He),Math.abs(Ke)))<1e-8?(Ke=1,He=Ue=0,st=1):st=1/st:st=1/Math.sqrt(st),Ie.set(te,_e,0,Ue*st),Ie.set(te,_e,1,He*st),Ie.set(te,_e,2,Ke*st)}t.free(Le.data);var Ve=[1/0,1/0,1/0],$e=[-1/0,-1/0,-1/0],Qe=1/0,tt=-1/0,xt=t.mallocFloat(e.nextPow2((ee[0]-1)*(ee[1]-1)*6*10)),kt=0,Bt=0;for(te=0;te<ee[0]-1;++te)e:for(_e=0;_e<ee[1]-1;++_e){for(var Rt=0;Rt<2;++Rt)for(var ft=0;ft<2;++ft)for(var lt=0;lt<3;++lt){var Ft=this._field[lt].get(1+te+Rt,1+_e+ft);if(isNaN(Ft)||!isFinite(Ft))continue e}for(lt=0;lt<6;++lt){var Jt=te+I[lt][0],ln=_e+I[lt][1],dn=this._field[0].get(Jt+1,ln+1),cn=this._field[1].get(Jt+1,ln+1);Ft=this._field[2].get(Jt+1,ln+1),Ue=Ie.get(Jt+1,ln+1,0),He=Ie.get(Jt+1,ln+1,1),Ke=Ie.get(Jt+1,ln+1,2),U.intensity&&(Tn=U.intensity.get(Jt,ln));var Tn=U.intensity?U.intensity.get(Jt,ln):Ft+this.objectOffset[2];xt[kt++]=Jt,xt[kt++]=ln,xt[kt++]=dn,xt[kt++]=cn,xt[kt++]=Ft,xt[kt++]=0,xt[kt++]=Tn,xt[kt++]=Ue,xt[kt++]=He,xt[kt++]=Ke,Ve[0]=Math.min(Ve[0],dn+this.objectOffset[0]),Ve[1]=Math.min(Ve[1],cn+this.objectOffset[1]),Ve[2]=Math.min(Ve[2],Ft+this.objectOffset[2]),Qe=Math.min(Qe,Tn),$e[0]=Math.max($e[0],dn+this.objectOffset[0]),$e[1]=Math.max($e[1],cn+this.objectOffset[1]),$e[2]=Math.max($e[2],Ft+this.objectOffset[2]),tt=Math.max(tt,Tn),Bt+=1}}for(U.intensityBounds&&(Qe=+U.intensityBounds[0],tt=+U.intensityBounds[1]),te=6;te<kt;te+=10)xt[te]=(xt[te]-Qe)/(tt-Qe);this._vertexCount=Bt,this._coordinateBuffer.update(xt.subarray(0,kt)),t.freeFloat(xt),t.free(Ie.data),this.bounds=[Ve,$e],this.intensity=U.intensity||this._field[2],this.intensityBounds[0]===Qe&&this.intensityBounds[1]===tt||(ie=!0),this.intensityBounds=[Qe,tt]}if("levels"in U){var nn=U.levels;for(nn=Array.isArray(nn[0])?nn.slice():[[],[],nn],te=0;te<3;++te)nn[te]=nn[te].slice(),nn[te].sort(function(un,Qt){return un-Qt});for(te=0;te<3;++te)for(_e=0;_e<nn[te].length;++_e)nn[te][_e]-=this.objectOffset[te];e:for(te=0;te<3;++te){if(nn[te].length!==this.contourLevels[te].length){ie=!0;break}for(_e=0;_e<nn[te].length;++_e)if(nn[te][_e]!==this.contourLevels[te][_e]){ie=!0;break e}}this.contourLevels=nn}if(ie){Ce=this._field,ee=this.shape;for(var Me=[],Ee=0;Ee<3;++Ee){var Se=this.contourLevels[Ee],je=[],qe=[],Je=[0,0,0];for(te=0;te<Se.length;++te){var at=f(this._field[Ee],Se[te]);je.push(Me.length/5|0),Bt=0;e:for(_e=0;_e<at.cells.length;++_e){var it=at.cells[_e];for(lt=0;lt<2;++lt){var yt=at.positions[it[lt]],vt=yt[0],Ut=0|Math.floor(vt),Wt=vt-Ut,gt=yt[1],At=0|Math.floor(gt),Zt=gt-At,Et=!1;t:for(var Ct=0;Ct<3;++Ct){Je[Ct]=0;var Ne=(Ee+Ct+1)%3;for(Rt=0;Rt<2;++Rt){var et=Rt?Wt:1-Wt;for(Jt=0|Math.min(Math.max(Ut+Rt,0),ee[0]),ft=0;ft<2;++ft){var dt=ft?Zt:1-Zt;if(ln=0|Math.min(Math.max(At+ft,0),ee[1]),Ft=Ct<2?this._field[Ne].get(Jt,ln):(this.intensity.get(Jt,ln)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ft)||isNaN(Ft)){Et=!0;break t}Je[Ct]+=et*dt*Ft}}}if(Et){if(lt>0){for(var zt=0;zt<5;++zt)Me.pop();Bt-=1}continue e}Me.push(Je[0],Je[1],yt[0],yt[1],Je[2]),Bt+=1}}qe.push(Bt)}this._contourOffsets[Ee]=je,this._contourCounts[Ee]=qe}var Xt=t.mallocFloat(Me.length);for(te=0;te<Me.length;++te)Xt[te]=Me[te];this._contourBuffer.update(Xt),t.freeFloat(Xt)}},D.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var U=0;U<3;++U)t.freeFloat(this._field[U].data)},D.highlight=function(U){var G,ie;if(!U)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(G=0;G<3;++G)this.highlightLevel[G]=this.enableHighlight[G]?U.level[G]:-1;for(ie=this.snapToData?U.dataCoordinate:U.position,G=0;G<3;++G)ie[G]-=this.objectOffset[G];if(this.enableDynamic[0]&&ie[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ie[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ie[2]!==this.dynamicLevel[2]){for(var q=0,ee=this.shape,te=t.mallocFloat(12*ee[0]*ee[1]),se=0;se<3;++se)if(this.enableDynamic[se]){this.dynamicLevel[se]=ie[se];var xe=this._field[(se+1)%3],ge=this._field[(se+2)%3],_e=f(this._field[se],ie[se]),Ce=_e.cells,Le=_e.positions;for(this._dynamicOffsets[se]=q,G=0;G<Ce.length;++G)for(var Ie=Ce[G],Be=0;Be<2;++Be){var ve=Le[Ie[Be]],Te=+ve[0],Pe=0|Te,De=0|Math.min(Pe+1,ee[0]),Fe=Te-Pe,Ue=1-Fe,He=+ve[1],Ke=0|He,st=0|Math.min(Ke+1,ee[1]),Ve=He-Ke,$e=1-Ve,Qe=Ue*$e,tt=Ue*Ve,ut=Fe*$e,xt=Fe*Ve,kt=Qe*xe.get(Pe,Ke)+tt*xe.get(Pe,st)+ut*xe.get(De,Ke)+xt*xe.get(De,st),Bt=Qe*ge.get(Pe,Ke)+tt*ge.get(Pe,st)+ut*ge.get(De,Ke)+xt*ge.get(De,st);if(isNaN(kt)||isNaN(Bt)){Be&&(q-=1);break}te[2*q+0]=kt,te[2*q+1]=Bt,q+=1}this._dynamicCounts[se]=q-this._dynamicOffsets[se]}else this.dynamicLevel[se]=NaN,this._dynamicCounts[se]=0;this._dynamicBuffer.update(te.subarray(0,2*q)),t.freeFloat(te)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(m,w,y){"use strict";var e=m("ndarray"),r=m("ndarray-ops"),n=m("typedarray-pool");w.exports=function(M){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||u(M),"number"==typeof arguments[1])return _(M,arguments[1],arguments[2],arguments[3]||M.RGBA,arguments[4]||M.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return _(M,0|arguments[1][0],0|arguments[1][1],arguments[2]||M.RGBA,arguments[3]||M.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var A=arguments[1],E=i(A)?A:A.raw;if(E)return s(M,E,0|A.width,0|A.height,arguments[2]||M.RGBA,arguments[3]||M.UNSIGNED_BYTE);if(A.shape&&A.data&&A.stride)return k(M,A)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,t=null,p=null;function u(M){a=[M.LINEAR,M.NEAREST_MIPMAP_LINEAR,M.LINEAR_MIPMAP_NEAREST,M.LINEAR_MIPMAP_NEAREST],t=[M.NEAREST,M.LINEAR,M.NEAREST_MIPMAP_NEAREST,M.NEAREST_MIPMAP_LINEAR,M.LINEAR_MIPMAP_NEAREST,M.LINEAR_MIPMAP_LINEAR],p=[M.REPEAT,M.CLAMP_TO_EDGE,M.MIRRORED_REPEAT]}function i(M){return"undefined"!=typeof HTMLCanvasElement&&M instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&M instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&M instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&M instanceof ImageData}var c=function(M,A){r.muls(M,A,255)};function f(M,A,E){var I=M.gl,C=I.getParameter(I.MAX_TEXTURE_SIZE);if(A<0||A>C||E<0||E>C)throw new Error("gl-texture2d: Invalid texture size");return M._shape=[A,E],M.bind(),I.texImage2D(I.TEXTURE_2D,0,M.format,A,E,0,M.format,M.type,null),M._mipLevels=[0],M}function l(M,A,E,I,C,R){this.gl=M,this.handle=A,this.format=C,this.type=R,this._shape=[E,I],this._mipLevels=[0],this._magFilter=M.NEAREST,this._minFilter=M.NEAREST,this._wrapS=M.CLAMP_TO_EDGE,this._wrapT=M.CLAMP_TO_EDGE,this._anisoSamples=1;var O=this,D=[this._wrapS,this._wrapT];Object.defineProperties(D,[{get:function(){return O._wrapS},set:function(B){return O.wrapS=B}},{get:function(){return O._wrapT},set:function(B){return O.wrapT=B}}]),this._wrapVector=D;var L=[this._shape[0],this._shape[1]];Object.defineProperties(L,[{get:function(){return O._shape[0]},set:function(B){return O.width=B}},{get:function(){return O._shape[1]},set:function(B){return O.height=B}}]),this._shapeVector=L}var h=l.prototype;function d(M,A){return 3===M.length?1===A[2]&&A[1]===M[0]*M[2]&&A[0]===M[2]:1===A[0]&&A[1]===M[0]}function o(M){var A=M.createTexture();return M.bindTexture(M.TEXTURE_2D,A),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,M.CLAMP_TO_EDGE),A}function _(M,A,E,I,C){var R=M.getParameter(M.MAX_TEXTURE_SIZE);if(A<0||A>R||E<0||E>R)throw new Error("gl-texture2d: Invalid texture shape");if(C===M.FLOAT&&!M.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var O=o(M);return M.texImage2D(M.TEXTURE_2D,0,I,A,E,0,I,C,null),new l(M,O,A,E,I,C)}function s(M,A,E,I,C,R){var O=o(M);return M.texImage2D(M.TEXTURE_2D,0,C,C,R,A),new l(M,O,E,I,C,R)}function k(M,A){var E=A.dtype,I=A.shape.slice(),C=M.getParameter(M.MAX_TEXTURE_SIZE);if(I[0]<0||I[0]>C||I[1]<0||I[1]>C)throw new Error("gl-texture2d: Invalid texture size");var R=d(I,A.stride.slice()),O=0;"float32"===E?O=M.FLOAT:"float64"===E?(O=M.FLOAT,R=!1,E="float32"):"uint8"===E?O=M.UNSIGNED_BYTE:(O=M.UNSIGNED_BYTE,R=!1,E="uint8");var D,L,B=0;if(2===I.length)B=M.LUMINANCE,A=e(A.data,I=[I[0],I[1],1],[A.stride[0],A.stride[1],1],A.offset);else{if(3!==I.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===I[2])B=M.ALPHA;else if(2===I[2])B=M.LUMINANCE_ALPHA;else if(3===I[2])B=M.RGB;else{if(4!==I[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");B=M.RGBA}}O!==M.FLOAT||M.getExtension("OES_texture_float")||(O=M.UNSIGNED_BYTE,R=!1);var j=A.size;if(R)D=0===A.offset&&A.data.length===j?A.data:A.data.subarray(A.offset,A.offset+j);else{var W=[I[2],I[2]*I[0],1];L=n.malloc(j,E);var Y=e(L,I,W,0);"float32"!==E&&"float64"!==E||O!==M.UNSIGNED_BYTE?r.assign(Y,A):c(Y,A),D=L.subarray(0,j)}var Q=o(M);return M.texImage2D(M.TEXTURE_2D,0,B,I[0],I[1],0,B,O,D),R||n.free(L),new l(M,Q,I[0],I[1],B,O)}Object.defineProperties(h,{minFilter:{get:function(){return this._minFilter},set:function(M){this.bind();var A=this.gl;if(this.type===A.FLOAT&&a.indexOf(M)>=0&&(A.getExtension("OES_texture_float_linear")||(M=A.NEAREST)),t.indexOf(M)<0)throw new Error("gl-texture2d: Unknown filter mode "+M);return A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,M),this._minFilter=M}},magFilter:{get:function(){return this._magFilter},set:function(M){this.bind();var A=this.gl;if(this.type===A.FLOAT&&a.indexOf(M)>=0&&(A.getExtension("OES_texture_float_linear")||(M=A.NEAREST)),t.indexOf(M)<0)throw new Error("gl-texture2d: Unknown filter mode "+M);return A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,M),this._magFilter=M}},mipSamples:{get:function(){return this._anisoSamples},set:function(M){var A=this._anisoSamples;if(this._anisoSamples=0|Math.max(M,1),A!==this._anisoSamples){var E=this.gl.getExtension("EXT_texture_filter_anisotropic");E&&this.gl.texParameterf(this.gl.TEXTURE_2D,E.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(M){if(this.bind(),p.indexOf(M)<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,M),this._wrapS=M}},wrapT:{get:function(){return this._wrapT},set:function(M){if(this.bind(),p.indexOf(M)<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,M),this._wrapT=M}},wrap:{get:function(){return this._wrapVector},set:function(M){if(Array.isArray(M)||(M=[M,M]),2!==M.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var A=0;A<2;++A)if(p.indexOf(M[A])<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);this._wrapS=M[0],this._wrapT=M[1];var E=this.gl;return this.bind(),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,this._wrapS),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,this._wrapT),M}},shape:{get:function(){return this._shapeVector},set:function(M){if(Array.isArray(M)){if(2!==M.length)throw new Error("gl-texture2d: Invalid texture shape")}else M=[0|M,0|M];return f(this,0|M[0],0|M[1]),[0|M[0],0|M[1]]}},width:{get:function(){return this._shape[0]},set:function(M){return f(this,M|=0,this._shape[1]),M}},height:{get:function(){return this._shape[1]},set:function(M){return f(this,this._shape[0],M|=0),M}}}),h.bind=function(M){var A=this.gl;return void 0!==M&&A.activeTexture(A.TEXTURE0+(0|M)),A.bindTexture(A.TEXTURE_2D,this.handle),void 0!==M?0|M:A.getParameter(A.ACTIVE_TEXTURE)-A.TEXTURE0},h.dispose=function(){this.gl.deleteTexture(this.handle)},h.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var M=Math.min(this._shape[0],this._shape[1]),A=0;M>0;++A,M>>>=1)this._mipLevels.indexOf(A)<0&&this._mipLevels.push(A)},h.setPixels=function(M,A,E,I){var C=this.gl;this.bind(),Array.isArray(A)?(I=E,E=0|A[1],A=0|A[0]):(A=A||0,E=E||0),I=I||0;var R=i(M)?M:M.raw;if(R)this._mipLevels.indexOf(I)<0?(C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,this.type,R),this._mipLevels.push(I)):C.texSubImage2D(C.TEXTURE_2D,I,A,E,this.format,this.type,R);else{if(!(M.shape&&M.stride&&M.data))throw new Error("gl-texture2d: Unsupported data type");if(M.shape.length<2||A+M.shape[1]>this._shape[1]>>>I||E+M.shape[0]>this._shape[0]>>>I||A<0||E<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(O,D,L,B,j,W,Y,Q){var ne=Q.dtype,X=Q.shape.slice();if(X.length<2||X.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var $=0,re=0,H=d(X,Q.stride.slice());if("float32"===ne?$=O.FLOAT:"float64"===ne?($=O.FLOAT,H=!1,ne="float32"):"uint8"===ne?$=O.UNSIGNED_BYTE:($=O.UNSIGNED_BYTE,H=!1,ne="uint8"),2===X.length)re=O.LUMINANCE,Q=e(Q.data,X=[X[0],X[1],1],[Q.stride[0],Q.stride[1],1],Q.offset);else{if(3!==X.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===X[2])re=O.ALPHA;else if(2===X[2])re=O.LUMINANCE_ALPHA;else if(3===X[2])re=O.RGB;else{if(4!==X[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");re=O.RGBA}}if(re!==O.LUMINANCE&&re!==O.ALPHA||j!==O.LUMINANCE&&j!==O.ALPHA||(re=j),re!==j)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var U=Q.size,G=Y.indexOf(B)<0;if(G&&Y.push(B),$===W&&H)0===Q.offset&&Q.data.length===U?G?O.texImage2D(O.TEXTURE_2D,B,j,X[0],X[1],0,j,W,Q.data):O.texSubImage2D(O.TEXTURE_2D,B,D,L,X[0],X[1],j,W,Q.data):G?O.texImage2D(O.TEXTURE_2D,B,j,X[0],X[1],0,j,W,Q.data.subarray(Q.offset,Q.offset+U)):O.texSubImage2D(O.TEXTURE_2D,B,D,L,X[0],X[1],j,W,Q.data.subarray(Q.offset,Q.offset+U));else{var ie;ie=W===O.FLOAT?n.mallocFloat32(U):n.mallocUint8(U);var q=e(ie,X,[X[2],X[2]*X[0],1]);$===O.FLOAT&&W===O.UNSIGNED_BYTE?c(q,Q):r.assign(q,Q),G?O.texImage2D(O.TEXTURE_2D,B,j,X[0],X[1],0,j,W,ie.subarray(0,U)):O.texSubImage2D(O.TEXTURE_2D,B,D,L,X[0],X[1],j,W,ie.subarray(0,U)),W===O.FLOAT?n.freeFloat32(ie):n.freeUint8(ie)}}(C,A,E,I,this.format,this.type,this._mipLevels,M)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(m,w,y){"use strict";w.exports=function(e,r,n){r?r.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var a=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(n){if(n.length>a)throw new Error("gl-vao: Too many vertex attributes");for(var t=0;t<n.length;++t){var p=n[t];if(p.buffer){var i=p.size||4,c=p.type||e.FLOAT,f=!!p.normalized,l=p.stride||0,h=p.offset||0;p.buffer.bind(),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,i,c,f,l,h)}else{if("number"==typeof p)e.vertexAttrib1f(t,p);else if(1===p.length)e.vertexAttrib1f(t,p[0]);else if(2===p.length)e.vertexAttrib2f(t,p[0],p[1]);else if(3===p.length)e.vertexAttrib3f(t,p[0],p[1],p[2]);else{if(4!==p.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(t,p[0],p[1],p[2],p[3])}e.disableVertexAttribArray(t)}}for(;t<a;++t)e.disableVertexAttribArray(t)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),t=0;t<a;++t)e.disableVertexAttribArray(t)}},{}],148:[function(m,w,y){"use strict";var e=m("./do-bind.js");function r(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}r.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},r.prototype.update=function(n,a,t){this._elements=a,this._attributes=n,this._elementsType=t||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(n,a,t){t=t||0;var p=this.gl;this._elements?p.drawElements(n,a,this._elementsType,t):p.drawArrays(n,t,a)},w.exports=function(n){return new r(n)}},{"./do-bind.js":147}],149:[function(m,w,y){"use strict";var e=m("./do-bind.js");function r(a,t,p,u,i,c){this.location=a,this.dimension=t,this.a=p,this.b=u,this.c=i,this.d=c}function n(a,t,p){this.gl=a,this._ext=t,this.handle=p,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}r.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(a,t,p){if(this.bind(),e(this.gl,t,a),this.unbind(),this._attribs.length=0,a)for(var u=0;u<a.length;++u){var i=a[u];"number"==typeof i?this._attribs.push(new r(u,1,i)):Array.isArray(i)&&this._attribs.push(new r(u,i.length,i[0],i[1],i[2],i[3]))}this._useElements=!!t,this._elementsType=p||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(a,t,p){p=p||0;var u=this.gl;this._useElements?u.drawElements(a,t,this._elementsType,p):u.drawArrays(a,p,t)},w.exports=function(a,t){return new n(a,t,t.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(m,w,y){"use strict";var e=m("./lib/vao-native.js"),r=m("./lib/vao-emulated.js");function n(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}w.exports=function(a,t,p,u){var i,c=a.createVertexArray?new n(a):a.getExtension("OES_vertex_array_object");return(i=c?e(a,c):r(a)).update(t,p,u),i}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(m,w,y){w.exports=function(e,r,n){return e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e}},{}],152:[function(m,w,y){w.exports=function(a,t){var p=e(a[0],a[1],a[2]),u=e(t[0],t[1],t[2]);r(p,p),r(u,u);var i=n(p,u);return i>1?0:Math.acos(i)};var e=m("./fromValues"),r=m("./normalize"),n=m("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(m,w,y){w.exports=function(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e}},{}],154:[function(m,w,y){w.exports=function(e){var r=new Float32Array(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}},{}],155:[function(m,w,y){w.exports=function(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}},{}],156:[function(m,w,y){w.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(m,w,y){w.exports=function(e,r,n){var a=r[0],t=r[1],p=r[2],u=n[0],i=n[1],c=n[2];return e[0]=t*c-p*i,e[1]=p*u-a*c,e[2]=a*i-t*u,e}},{}],158:[function(m,w,y){w.exports=m("./distance")},{"./distance":159}],159:[function(m,w,y){w.exports=function(e,r){var n=r[0]-e[0],a=r[1]-e[1],t=r[2]-e[2];return Math.sqrt(n*n+a*a+t*t)}},{}],160:[function(m,w,y){w.exports=m("./divide")},{"./divide":161}],161:[function(m,w,y){w.exports=function(e,r,n){return e[0]=r[0]/n[0],e[1]=r[1]/n[1],e[2]=r[2]/n[2],e}},{}],162:[function(m,w,y){w.exports=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}},{}],163:[function(m,w,y){w.exports=1e-6},{}],164:[function(m,w,y){w.exports=function(r,n){var a=r[0],t=r[1],p=r[2],u=n[0],i=n[1],c=n[2];return Math.abs(a-u)<=e*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(t-i)<=e*Math.max(1,Math.abs(t),Math.abs(i))&&Math.abs(p-c)<=e*Math.max(1,Math.abs(p),Math.abs(c))};var e=m("./epsilon")},{"./epsilon":163}],165:[function(m,w,y){w.exports=function(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}},{}],166:[function(m,w,y){w.exports=function(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e}},{}],167:[function(m,w,y){w.exports=function(r,n,a,t,p,u){var i,c;for(n||(n=3),a||(a=0),c=t?Math.min(t*n+a,r.length):r.length,i=a;i<c;i+=n)e[0]=r[i],e[1]=r[i+1],e[2]=r[i+2],p(e,e,u),r[i]=e[0],r[i+1]=e[1],r[i+2]=e[2];return r};var e=m("./create")()},{"./create":156}],168:[function(m,w,y){w.exports=function(e,r,n){var a=new Float32Array(3);return a[0]=e,a[1]=r,a[2]=n,a}},{}],169:[function(m,w,y){w.exports={EPSILON:m("./epsilon"),create:m("./create"),clone:m("./clone"),angle:m("./angle"),fromValues:m("./fromValues"),copy:m("./copy"),set:m("./set"),equals:m("./equals"),exactEquals:m("./exactEquals"),add:m("./add"),subtract:m("./subtract"),sub:m("./sub"),multiply:m("./multiply"),mul:m("./mul"),divide:m("./divide"),div:m("./div"),min:m("./min"),max:m("./max"),floor:m("./floor"),ceil:m("./ceil"),round:m("./round"),scale:m("./scale"),scaleAndAdd:m("./scaleAndAdd"),distance:m("./distance"),dist:m("./dist"),squaredDistance:m("./squaredDistance"),sqrDist:m("./sqrDist"),length:m("./length"),len:m("./len"),squaredLength:m("./squaredLength"),sqrLen:m("./sqrLen"),negate:m("./negate"),inverse:m("./inverse"),normalize:m("./normalize"),dot:m("./dot"),cross:m("./cross"),lerp:m("./lerp"),random:m("./random"),transformMat4:m("./transformMat4"),transformMat3:m("./transformMat3"),transformQuat:m("./transformQuat"),rotateX:m("./rotateX"),rotateY:m("./rotateY"),rotateZ:m("./rotateZ"),forEach:m("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(m,w,y){w.exports=function(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e}},{}],171:[function(m,w,y){w.exports=m("./length")},{"./length":172}],172:[function(m,w,y){w.exports=function(e){var r=e[0],n=e[1],a=e[2];return Math.sqrt(r*r+n*n+a*a)}},{}],173:[function(m,w,y){w.exports=function(e,r,n,a){var t=r[0],p=r[1],u=r[2];return e[0]=t+a*(n[0]-t),e[1]=p+a*(n[1]-p),e[2]=u+a*(n[2]-u),e}},{}],174:[function(m,w,y){w.exports=function(e,r,n){return e[0]=Math.max(r[0],n[0]),e[1]=Math.max(r[1],n[1]),e[2]=Math.max(r[2],n[2]),e}},{}],175:[function(m,w,y){w.exports=function(e,r,n){return e[0]=Math.min(r[0],n[0]),e[1]=Math.min(r[1],n[1]),e[2]=Math.min(r[2],n[2]),e}},{}],176:[function(m,w,y){w.exports=m("./multiply")},{"./multiply":177}],177:[function(m,w,y){w.exports=function(e,r,n){return e[0]=r[0]*n[0],e[1]=r[1]*n[1],e[2]=r[2]*n[2],e}},{}],178:[function(m,w,y){w.exports=function(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e}},{}],179:[function(m,w,y){w.exports=function(e,r){var n=r[0],a=r[1],t=r[2],p=n*n+a*a+t*t;return p>0&&(p=1/Math.sqrt(p),e[0]=r[0]*p,e[1]=r[1]*p,e[2]=r[2]*p),e}},{}],180:[function(m,w,y){w.exports=function(e,r){r=r||1;var n=2*Math.random()*Math.PI,a=2*Math.random()-1,t=Math.sqrt(1-a*a)*r;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e[2]=a*r,e}},{}],181:[function(m,w,y){w.exports=function(e,r,n,a){var t=n[1],p=n[2],u=r[1]-t,i=r[2]-p,c=Math.sin(a),f=Math.cos(a);return e[0]=r[0],e[1]=t+u*f-i*c,e[2]=p+u*c+i*f,e}},{}],182:[function(m,w,y){w.exports=function(e,r,n,a){var t=n[0],p=n[2],u=r[0]-t,i=r[2]-p,c=Math.sin(a),f=Math.cos(a);return e[0]=t+i*c+u*f,e[1]=r[1],e[2]=p+i*f-u*c,e}},{}],183:[function(m,w,y){w.exports=function(e,r,n,a){var t=n[0],p=n[1],u=r[0]-t,i=r[1]-p,c=Math.sin(a),f=Math.cos(a);return e[0]=t+u*f-i*c,e[1]=p+u*c+i*f,e[2]=r[2],e}},{}],184:[function(m,w,y){w.exports=function(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e}},{}],185:[function(m,w,y){w.exports=function(e,r,n){return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e}},{}],186:[function(m,w,y){w.exports=function(e,r,n,a){return e[0]=r[0]+n[0]*a,e[1]=r[1]+n[1]*a,e[2]=r[2]+n[2]*a,e}},{}],187:[function(m,w,y){w.exports=function(e,r,n,a){return e[0]=r,e[1]=n,e[2]=a,e}},{}],188:[function(m,w,y){w.exports=m("./squaredDistance")},{"./squaredDistance":190}],189:[function(m,w,y){w.exports=m("./squaredLength")},{"./squaredLength":191}],190:[function(m,w,y){w.exports=function(e,r){var n=r[0]-e[0],a=r[1]-e[1],t=r[2]-e[2];return n*n+a*a+t*t}},{}],191:[function(m,w,y){w.exports=function(e){var r=e[0],n=e[1],a=e[2];return r*r+n*n+a*a}},{}],192:[function(m,w,y){w.exports=m("./subtract")},{"./subtract":193}],193:[function(m,w,y){w.exports=function(e,r,n){return e[0]=r[0]-n[0],e[1]=r[1]-n[1],e[2]=r[2]-n[2],e}},{}],194:[function(m,w,y){w.exports=function(e,r,n){var a=r[0],t=r[1],p=r[2];return e[0]=a*n[0]+t*n[3]+p*n[6],e[1]=a*n[1]+t*n[4]+p*n[7],e[2]=a*n[2]+t*n[5]+p*n[8],e}},{}],195:[function(m,w,y){w.exports=function(e,r,n){var a=r[0],t=r[1],p=r[2],u=n[3]*a+n[7]*t+n[11]*p+n[15];return e[0]=(n[0]*a+n[4]*t+n[8]*p+n[12])/(u=u||1),e[1]=(n[1]*a+n[5]*t+n[9]*p+n[13])/u,e[2]=(n[2]*a+n[6]*t+n[10]*p+n[14])/u,e}},{}],196:[function(m,w,y){w.exports=function(e,r,n){var a=r[0],t=r[1],p=r[2],u=n[0],i=n[1],c=n[2],f=n[3],l=f*a+i*p-c*t,h=f*t+c*a-u*p,d=f*p+u*t-i*a,o=-u*a-i*t-c*p;return e[0]=l*f+o*-u+h*-c-d*-i,e[1]=h*f+o*-i+d*-u-l*-c,e[2]=d*f+o*-c+l*-i-h*-u,e}},{}],197:[function(m,w,y){w.exports=function(e,r,n){return e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e[3]=r[3]+n[3],e}},{}],198:[function(m,w,y){w.exports=function(e){var r=new Float32Array(4);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}},{}],199:[function(m,w,y){w.exports=function(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}},{}],200:[function(m,w,y){w.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(m,w,y){w.exports=function(e,r){var n=r[0]-e[0],a=r[1]-e[1],t=r[2]-e[2],p=r[3]-e[3];return Math.sqrt(n*n+a*a+t*t+p*p)}},{}],202:[function(m,w,y){w.exports=function(e,r,n){return e[0]=r[0]/n[0],e[1]=r[1]/n[1],e[2]=r[2]/n[2],e[3]=r[3]/n[3],e}},{}],203:[function(m,w,y){w.exports=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]}},{}],204:[function(m,w,y){w.exports=function(e,r,n,a){var t=new Float32Array(4);return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t}},{}],205:[function(m,w,y){w.exports={create:m("./create"),clone:m("./clone"),fromValues:m("./fromValues"),copy:m("./copy"),set:m("./set"),add:m("./add"),subtract:m("./subtract"),multiply:m("./multiply"),divide:m("./divide"),min:m("./min"),max:m("./max"),scale:m("./scale"),scaleAndAdd:m("./scaleAndAdd"),distance:m("./distance"),squaredDistance:m("./squaredDistance"),length:m("./length"),squaredLength:m("./squaredLength"),negate:m("./negate"),inverse:m("./inverse"),normalize:m("./normalize"),dot:m("./dot"),lerp:m("./lerp"),random:m("./random"),transformMat4:m("./transformMat4"),transformQuat:m("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(m,w,y){w.exports=function(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e[3]=1/r[3],e}},{}],207:[function(m,w,y){w.exports=function(e){var r=e[0],n=e[1],a=e[2],t=e[3];return Math.sqrt(r*r+n*n+a*a+t*t)}},{}],208:[function(m,w,y){w.exports=function(e,r,n,a){var t=r[0],p=r[1],u=r[2],i=r[3];return e[0]=t+a*(n[0]-t),e[1]=p+a*(n[1]-p),e[2]=u+a*(n[2]-u),e[3]=i+a*(n[3]-i),e}},{}],209:[function(m,w,y){w.exports=function(e,r,n){return e[0]=Math.max(r[0],n[0]),e[1]=Math.max(r[1],n[1]),e[2]=Math.max(r[2],n[2]),e[3]=Math.max(r[3],n[3]),e}},{}],210:[function(m,w,y){w.exports=function(e,r,n){return e[0]=Math.min(r[0],n[0]),e[1]=Math.min(r[1],n[1]),e[2]=Math.min(r[2],n[2]),e[3]=Math.min(r[3],n[3]),e}},{}],211:[function(m,w,y){w.exports=function(e,r,n){return e[0]=r[0]*n[0],e[1]=r[1]*n[1],e[2]=r[2]*n[2],e[3]=r[3]*n[3],e}},{}],212:[function(m,w,y){w.exports=function(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=-r[3],e}},{}],213:[function(m,w,y){w.exports=function(e,r){var n=r[0],a=r[1],t=r[2],p=r[3],u=n*n+a*a+t*t+p*p;return u>0&&(u=1/Math.sqrt(u),e[0]=n*u,e[1]=a*u,e[2]=t*u,e[3]=p*u),e}},{}],214:[function(m,w,y){var e=m("./normalize"),r=m("./scale");w.exports=function(n,a){return a=a||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),e(n,n),r(n,n,a),n}},{"./normalize":213,"./scale":215}],215:[function(m,w,y){w.exports=function(e,r,n){return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=r[3]*n,e}},{}],216:[function(m,w,y){w.exports=function(e,r,n,a){return e[0]=r[0]+n[0]*a,e[1]=r[1]+n[1]*a,e[2]=r[2]+n[2]*a,e[3]=r[3]+n[3]*a,e}},{}],217:[function(m,w,y){w.exports=function(e,r,n,a,t){return e[0]=r,e[1]=n,e[2]=a,e[3]=t,e}},{}],218:[function(m,w,y){w.exports=function(e,r){var n=r[0]-e[0],a=r[1]-e[1],t=r[2]-e[2],p=r[3]-e[3];return n*n+a*a+t*t+p*p}},{}],219:[function(m,w,y){w.exports=function(e){var r=e[0],n=e[1],a=e[2],t=e[3];return r*r+n*n+a*a+t*t}},{}],220:[function(m,w,y){w.exports=function(e,r,n){return e[0]=r[0]-n[0],e[1]=r[1]-n[1],e[2]=r[2]-n[2],e[3]=r[3]-n[3],e}},{}],221:[function(m,w,y){w.exports=function(e,r,n){var a=r[0],t=r[1],p=r[2],u=r[3];return e[0]=n[0]*a+n[4]*t+n[8]*p+n[12]*u,e[1]=n[1]*a+n[5]*t+n[9]*p+n[13]*u,e[2]=n[2]*a+n[6]*t+n[10]*p+n[14]*u,e[3]=n[3]*a+n[7]*t+n[11]*p+n[15]*u,e}},{}],222:[function(m,w,y){w.exports=function(e,r,n){var a=r[0],t=r[1],p=r[2],u=n[0],i=n[1],c=n[2],f=n[3],l=f*a+i*p-c*t,h=f*t+c*a-u*p,d=f*p+u*t-i*a,o=-u*a-i*t-c*p;return e[0]=l*f+o*-u+h*-c-d*-i,e[1]=h*f+o*-i+d*-u-l*-c,e[2]=d*f+o*-c+l*-i-h*-u,e[3]=r[3],e}},{}],223:[function(m,w,y){var e=m("glsl-tokenizer"),r=m("atob-lite");w.exports=function(n){for(var a=Array.isArray(n)?n:e(n),t=0;t<a.length;t++){var p=a[t];if("preprocessor"===p.type){var u=p.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(u&&u[2]){var c=u[2];return(u[1]?r(c):c).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(m,w,y){w.exports=function(u){var i,c,f,l=0,h=0,d=999,o=[],_=[],s=1,k=0,M=0,A=!1,E=!1,I="",C=n,R=e;"300 es"===(u=u||{}).version&&(C=t,R=a);var O={},D={};for(l=0;l<C.length;l++)O[C[l]]=!0;for(l=0;l<R.length;l++)D[R[l]]=!0;return function(U){return _=[],null!==U?function(G){var ie;for(l=0,G.toString&&(G=G.toString()),I+=G.replace(/\r\n/g,"\n"),f=I.length;i=I[l],l<f;){switch(ie=l,d){case 0:l="/"===i&&"*"===c?(o.push(i),L(o.join("")),d=999,l+1):(o.push(i),c=i,l+1);break;case 1:case 2:l="\r"!==i&&"\n"!==i||"\\"===c?(o.push(i),c=i,l+1):(L(o.join("")),d=999,l);break;case 3:l=Q();break;case 4:l="."===i||/[eE]/.test(i)?(o.push(i),d=5,c=i,l+1):"x"===i&&1===o.length&&"0"===o[0]?(d=11,o.push(i),c=i,l+1):/[^\d]/.test(i)?(L(o.join("")),d=999,l):(o.push(i),c=i,l+1);break;case 11:l=/[^a-fA-F0-9]/.test(i)?(L(o.join("")),d=999,l):(o.push(i),c=i,l+1);break;case 5:"f"===i&&(o.push(i),c=i,l+=1),l=/[eE]/.test(i)?(o.push(i),c=i,l+1):("-"!==i&&"+"!==i||!/[eE]/.test(c))&&/[^\d]/.test(i)?(L(o.join("")),d=999,l):(o.push(i),c=i,l+1);break;case 9999:l=H();break;case 9:l=/[^\s]/g.test(i)?(L(o.join("")),d=999,l):(o.push(i),c=i,l+1);break;case 999:o=o.length?[]:o,l="/"===c&&"*"===i?(M=h+l-1,d=0,c=i,l+1):"/"===c&&"/"===i?(M=h+l-1,d=1,c=i,l+1):"#"===i?(d=2,M=h+l,l):/\s/.test(i)?(d=9,M=h+l,l):(A=/\d/.test(i),E=/[^\w_]/.test(i),M=h+l,d=A?4:E?3:9999,l)}ie!==l&&("\n"===I[ie]?(k=0,++s):++k)}return h+=l,I=I.slice(l),_}(U):(o.length&&L(o.join("")),d=10,L("(eof)"),_)};function L(U){U.length&&_.push({type:p[d],data:U,position:M,line:s,column:k})}function Q(){if("."===c&&/\d/.test(i))return d=5,l;if("/"===c&&"*"===i)return d=0,l;if("/"===c&&"/"===i)return d=1,l;if("."===i&&o.length){for(;ne(o););return d=5,l}if(";"===i||")"===i||"("===i){if(o.length)for(;ne(o););return L(i),d=999,l+1}var U=2===o.length&&"="!==i;if(/[\w_\d\s]/.test(i)||U){for(;ne(o););return d=999,l}return o.push(i),c=i,l+1}function ne(U){for(var G,ie,q=0;;){if(G=r.indexOf(U.slice(0,U.length+q).join("")),ie=r[G],-1===G){if(q--+U.length>0)continue;ie=U.slice(0,1).join("")}return L(ie),M+=ie.length,(o=o.slice(ie.length)).length}}function H(){if(/[^\d\w_]/.test(i)){var U=o.join("");return d=D[U]?8:O[U]?7:6,L(o.join("")),d=999,l}return o.push(i),c=i,l+1}};var e=m("./lib/literals"),r=m("./lib/operators"),n=m("./lib/builtins"),a=m("./lib/literals-300es"),t=m("./lib/builtins-300es"),p=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(m,w,y){var e=m("./builtins");e=e.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),w.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(m,w,y){w.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(m,w,y){var e=m("./literals");w.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(m,w,y){w.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(m,w,y){w.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(m,w,y){var e=m("./index");w.exports=function(r,n){var a=e(n),t=[];return(t=t.concat(a(r))).concat(a(null))}},{"./index":224}],231:[function(m,w,y){w.exports=function(e){"string"==typeof e&&(e=[e]);for(var r=[].slice.call(arguments,1),n=[],a=0;a<e.length-1;a++)n.push(e[a],r[a]||"");return n.push(e[a]),n.join("")}},{}],232:[function(m,w,y){"use strict";var e=m("is-browser");w.exports=e&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch(a){r=!1}return r}()},{"is-browser":236}],233:[function(m,w,y){"use strict";w.exports=function(c,f){var l=c.length;if(0===l)throw new Error("Must have at least d+1 points");var h=c[0].length;if(l<=h)throw new Error("Must input at least d+1 points");var d=c.slice(0,h+1),o=e.apply(void 0,d);if(0===o)throw new Error("Input not in general position");for(var _=new Array(h+1),s=0;s<=h;++s)_[s]=s;o<0&&(_[0]=1,_[1]=0);var k=new n(_,new Array(h+1),!1),M=k.adjacent,A=new Array(h+2);for(s=0;s<=h;++s){for(var E=_.slice(),I=0;I<=h;++I)I===s&&(E[I]=-1);var C=E[0];E[0]=E[1],E[1]=C;var R=new n(E,new Array(h+1),!0);M[s]=R,A[s]=R}for(A[h+1]=k,s=0;s<=h;++s){E=M[s].vertices;var O=M[s].adjacent;for(I=0;I<=h;++I){var D=E[I];if(D<0)O[I]=k;else for(var L=0;L<=h;++L)M[L].vertices.indexOf(D)<0&&(O[I]=M[L])}}var B=new u(h,d,A),j=!!f;for(s=h+1;s<l;++s)B.insert(c[s],j);return B.boundary()};var e=m("robust-orientation"),r=m("simplicial-complex").compareCells;function n(c,f,l){this.vertices=c,this.adjacent=f,this.boundary=l,this.lastVisited=-1}function a(c,f,l){this.vertices=c,this.cell=f,this.index=l}function t(c,f){return r(c.vertices,f.vertices)}n.prototype.flip=function(){var c=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=c;var f=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=f};var p=[];function u(c,f,l){this.dimension=c,this.vertices=f,this.simplices=l,this.interior=l.filter(function(_){return!_.boundary}),this.tuple=new Array(c+1);for(var h=0;h<=c;++h)this.tuple[h]=this.vertices[h];var d,_,o=p[c];o||(o=p[c]=((d=e[c+1])||(d=e),_=d,function(){return _.apply(this,this.tuple)})),this.orient=o}var i=u.prototype;i.handleBoundaryDegeneracy=function(c,f){var l=this.dimension,h=this.vertices.length-1,d=this.tuple,o=this.vertices,_=[c];for(c.lastVisited=-h;_.length>0;)for(var s=(c=_.pop()).adjacent,k=0;k<=l;++k){var M=s[k];if(M.boundary&&!(M.lastVisited<=-h)){for(var A=M.vertices,E=0;E<=l;++E){var I=A[E];d[E]=I<0?f:o[I]}var C=this.orient();if(C>0)return M;M.lastVisited=-h,0===C&&_.push(M)}}return null},i.walk=function(c,f){var l=this.vertices.length-1,h=this.dimension,d=this.vertices,o=this.tuple,_=f?this.interior.length*Math.random()|0:this.interior.length-1,s=this.interior[_];e:for(;!s.boundary;){for(var k=s.vertices,M=s.adjacent,A=0;A<=h;++A)o[A]=d[k[A]];for(s.lastVisited=l,A=0;A<=h;++A){var E=M[A];if(!(E.lastVisited>=l)){var I=o[A];o[A]=c;var C=this.orient();if(o[A]=I,C<0){s=E;continue e}E.lastVisited=E.boundary?-l:l}}return}return s},i.addPeaks=function(c,f){var l=this.vertices.length-1,h=this.dimension,d=this.vertices,o=this.tuple,_=this.interior,s=this.simplices,k=[f];f.lastVisited=l,f.vertices[f.vertices.indexOf(-1)]=l,f.boundary=!1,_.push(f);for(var M=[];k.length>0;){var A=(f=k.pop()).vertices,E=f.adjacent,I=A.indexOf(l);if(!(I<0))for(var C=0;C<=h;++C)if(C!==I){var R=E[C];if(R.boundary&&!(R.lastVisited>=l)){var O=R.vertices;if(R.lastVisited!==-l){for(var D=0,L=0;L<=h;++L)O[L]<0?(D=L,o[L]=c):o[L]=d[O[L]];if(this.orient()>0){O[D]=l,R.boundary=!1,_.push(R),k.push(R),R.lastVisited=l;continue}R.lastVisited=-l}var B=R.adjacent,j=A.slice(),W=E.slice(),Y=new n(j,W,!0);s.push(Y);var Q=B.indexOf(f);if(!(Q<0))for(B[Q]=Y,W[I]=R,j[C]=-1,W[C]=f,E[C]=Y,Y.flip(),L=0;L<=h;++L){var ne=j[L];if(!(ne<0||ne===l)){for(var X=new Array(h-1),$=0,re=0;re<=h;++re){var H=j[re];H<0||re===L||(X[$++]=H)}M.push(new a(X,Y,L))}}}}}for(M.sort(t),C=0;C+1<M.length;C+=2){var U=M[C],G=M[C+1];U.index<0||G.index<0||(U.cell.adjacent[U.index]=G.cell,G.cell.adjacent[G.index]=U.cell)}},i.insert=function(c,f){var l=this.vertices;l.push(c);var h=this.walk(c,f);if(h){for(var d=this.dimension,o=this.tuple,_=0;_<=d;++_){var s=h.vertices[_];o[_]=s<0?c:l[s]}var k=this.orient(o);k<0||(0!==k||(h=this.handleBoundaryDegeneracy(h,c)))&&this.addPeaks(c,h)}},i.boundary=function(){for(var c=this.dimension,f=[],l=this.simplices,h=l.length,d=0;d<h;++d){var o=l[d];if(o.boundary){for(var _=new Array(c),s=o.vertices,k=0,M=0,A=0;A<=c;++A)s[A]>=0?_[k++]=s[A]:M=1&A;if(M===(1&c)){var E=_[0];_[0]=_[1],_[1]=E}f.push(_)}}return f}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(m,w,y){"use strict";var e=m("binary-search-bounds");function r(k,M,A,E,I){this.mid=k,this.left=M,this.right=A,this.leftPoints=E,this.rightPoints=I,this.count=(M?M.count:0)+(A?A.count:0)+E.length}w.exports=function(k){return new _(k&&0!==k.length?o(k):null)};var n=r.prototype;function a(k,M){k.mid=M.mid,k.left=M.left,k.right=M.right,k.leftPoints=M.leftPoints,k.rightPoints=M.rightPoints,k.count=M.count}function t(k,M){var A=o(M);k.mid=A.mid,k.left=A.left,k.right=A.right,k.leftPoints=A.leftPoints,k.rightPoints=A.rightPoints,k.count=A.count}function p(k,M){var A=k.intervals([]);A.push(M),t(k,A)}function u(k,M){var A=k.intervals([]),E=A.indexOf(M);return E<0?0:(A.splice(E,1),t(k,A),1)}function i(k,M,A){for(var E=0;E<k.length&&k[E][0]<=M;++E){var I=A(k[E]);if(I)return I}}function c(k,M,A){for(var E=k.length-1;E>=0&&k[E][1]>=M;--E){var I=A(k[E]);if(I)return I}}function f(k,M){for(var A=0;A<k.length;++A){var E=M(k[A]);if(E)return E}}function l(k,M){return k-M}function h(k,M){return k[0]-M[0]||k[1]-M[1]}function d(k,M){return k[1]-M[1]||k[0]-M[0]}function o(k){if(0===k.length)return null;for(var M=[],A=0;A<k.length;++A)M.push(k[A][0],k[A][1]);M.sort(l);var E=M[M.length>>1],I=[],C=[],R=[];for(A=0;A<k.length;++A){var O=k[A];O[1]<E?I.push(O):E<O[0]?C.push(O):R.push(O)}var D=R,L=R.slice();return D.sort(h),L.sort(d),new r(E,o(I),o(C),D,L)}function _(k){this.root=k}n.intervals=function(k){return k.push.apply(k,this.leftPoints),this.left&&this.left.intervals(k),this.right&&this.right.intervals(k),k},n.insert=function(k){var M=this.count-this.leftPoints.length;if(this.count+=1,k[1]<this.mid)this.left?4*(this.left.count+1)>3*(M+1)?p(this,k):this.left.insert(k):this.left=o([k]);else if(k[0]>this.mid)this.right?4*(this.right.count+1)>3*(M+1)?p(this,k):this.right.insert(k):this.right=o([k]);else{var A=e.ge(this.leftPoints,k,h),E=e.ge(this.rightPoints,k,d);this.leftPoints.splice(A,0,k),this.rightPoints.splice(E,0,k)}},n.remove=function(k){var M=this.count-this.leftPoints;if(k[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(M-1)?u(this,k):2===(C=this.left.remove(k))?(this.left=null,this.count-=1,1):(1===C&&(this.count-=1),C):0;if(k[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(M-1)?u(this,k):2===(C=this.right.remove(k))?(this.right=null,this.count-=1,1):(1===C&&(this.count-=1),C):0;if(1===this.count)return this.leftPoints[0]===k?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===k){if(this.left&&this.right){for(var A=this,E=this.left;E.right;)A=E,E=E.right;if(A===this)E.right=this.right;else{var I=this.left,C=this.right;A.count-=E.count,A.right=E.left,E.left=I,E.right=C}a(this,E),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else a(this,this.left?this.left:this.right);return 1}for(I=e.ge(this.leftPoints,k,h);I<this.leftPoints.length&&this.leftPoints[I][0]===k[0];++I)if(this.leftPoints[I]===k)for(this.count-=1,this.leftPoints.splice(I,1),C=e.ge(this.rightPoints,k,d);C<this.rightPoints.length&&this.rightPoints[C][1]===k[1];++C)if(this.rightPoints[C]===k)return this.rightPoints.splice(C,1),1;return 0},n.queryPoint=function(k,M){return k<this.mid?this.left&&(A=this.left.queryPoint(k,M))?A:i(this.leftPoints,k,M):k>this.mid?this.right&&(A=this.right.queryPoint(k,M))?A:c(this.rightPoints,k,M):f(this.leftPoints,M);var A},n.queryInterval=function(k,M,A){var E;return k<this.mid&&this.left&&(E=this.left.queryInterval(k,M,A))||M>this.mid&&this.right&&(E=this.right.queryInterval(k,M,A))?E:M<this.mid?i(this.leftPoints,M,A):k>this.mid?c(this.rightPoints,k,A):f(this.leftPoints,A)};var s=_.prototype;s.insert=function(k){this.root?this.root.insert(k):this.root=new r(k[0],null,null,[k],[k])},s.remove=function(k){if(this.root){var M=this.root.remove(k);return 2===M&&(this.root=null),0!==M}return!1},s.queryPoint=function(k,M){if(this.root)return this.root.queryPoint(k,M)},s.queryInterval=function(k,M,A){if(k<=M&&this.root)return this.root.queryInterval(k,M,A)},Object.defineProperty(s,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(s,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(m,w,y){"use strict";w.exports=function(e){for(var r=new Array(e),n=0;n<e;++n)r[n]=n;return r}},{}],236:[function(m,w,y){w.exports=!0},{}],237:[function(m,w,y){function e(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}w.exports=function(r){return null!=r&&(e(r)||"function"==typeof(n=r).readFloatLE&&"function"==typeof n.slice&&e(n.slice(0,0))||!!r._isBuffer);var n}},{}],238:[function(m,w,y){"use strict";w.exports=n,w.exports.isMobile=n,w.exports.default=n;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function n(a){a||(a={});var t=a.ua;if(t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"!=typeof t)return!1;var p=a.tablet?r.test(t):e.test(t);return!p&&a.tablet&&a.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(p=!0),p}},{}],239:[function(m,w,y){"use strict";w.exports=function(e){for(var r,n=e.length,a=0;a<n;a++)if(((r=e.charCodeAt(a))<9||r>13)&&32!==r&&133!==r&&160!==r&&5760!==r&&6158!==r&&(r<8192||r>8205)&&8232!==r&&8233!==r&&8239!==r&&8287!==r&&8288!==r&&12288!==r&&65279!==r)return!1;return!0}},{}],240:[function(m,w,y){w.exports=function(e,r,n){return e*(1-n)+r*n}},{}],241:[function(m,w,y){var e=m("./normalize"),r=m("gl-mat4/create"),n=m("gl-mat4/clone"),a=m("gl-mat4/determinant"),t=m("gl-mat4/invert"),p=m("gl-mat4/transpose"),u={length:m("gl-vec3/length"),normalize:m("gl-vec3/normalize"),dot:m("gl-vec3/dot"),cross:m("gl-vec3/cross")},i=r(),c=r(),f=[0,0,0,0],l=[[0,0,0],[0,0,0],[0,0,0]],h=[0,0,0];function d(o,_,s,k,M){o[0]=_[0]*k+s[0]*M,o[1]=_[1]*k+s[1]*M,o[2]=_[2]*k+s[2]*M}w.exports=function(o,_,s,k,M,A){if(_||(_=[0,0,0]),s||(s=[0,0,0]),k||(k=[0,0,0]),M||(M=[0,0,0,1]),A||(A=[0,0,0,1]),!e(i,o)||(n(c,i),c[3]=0,c[7]=0,c[11]=0,c[15]=1,Math.abs(a(c)<1e-8)))return!1;var E,I,C,R,O,D,L,re,H,B=i[3],j=i[7],W=i[11],Y=i[12],Q=i[13],ne=i[14],X=i[15];if(0!==B||0!==j||0!==W){if(f[0]=B,f[1]=j,f[2]=W,f[3]=X,!t(c,c))return!1;p(c,c),R=(I=f)[0],(E=M)[0]=(C=c)[0]*R+C[4]*(O=I[1])+C[8]*(D=I[2])+C[12]*(L=I[3]),E[1]=C[1]*R+C[5]*O+C[9]*D+C[13]*L,E[2]=C[2]*R+C[6]*O+C[10]*D+C[14]*L,E[3]=C[3]*R+C[7]*O+C[11]*D+C[15]*L}else M[0]=M[1]=M[2]=0,M[3]=1;if(_[0]=Y,_[1]=Q,_[2]=ne,(re=l)[0][0]=(H=i)[0],re[0][1]=H[1],re[0][2]=H[2],re[1][0]=H[4],re[1][1]=H[5],re[1][2]=H[6],re[2][0]=H[8],re[2][1]=H[9],re[2][2]=H[10],s[0]=u.length(l[0]),u.normalize(l[0],l[0]),k[0]=u.dot(l[0],l[1]),d(l[1],l[1],l[0],1,-k[0]),s[1]=u.length(l[1]),u.normalize(l[1],l[1]),k[0]/=s[1],k[1]=u.dot(l[0],l[2]),d(l[2],l[2],l[0],1,-k[1]),k[2]=u.dot(l[1],l[2]),d(l[2],l[2],l[1],1,-k[2]),s[2]=u.length(l[2]),u.normalize(l[2],l[2]),k[1]/=s[2],k[2]/=s[2],u.cross(h,l[1],l[2]),u.dot(l[0],h)<0)for(var $=0;$<3;$++)s[$]*=-1,l[$][0]*=-1,l[$][1]*=-1,l[$][2]*=-1;return A[0]=.5*Math.sqrt(Math.max(1+l[0][0]-l[1][1]-l[2][2],0)),A[1]=.5*Math.sqrt(Math.max(1-l[0][0]+l[1][1]-l[2][2],0)),A[2]=.5*Math.sqrt(Math.max(1-l[0][0]-l[1][1]+l[2][2],0)),A[3]=.5*Math.sqrt(Math.max(1+l[0][0]+l[1][1]+l[2][2],0)),l[2][1]>l[1][2]&&(A[0]=-A[0]),l[0][2]>l[2][0]&&(A[1]=-A[1]),l[1][0]>l[0][1]&&(A[2]=-A[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(m,w,y){w.exports=function(e,r){var n=r[15];if(0===n)return!1;for(var a=1/n,t=0;t<16;t++)e[t]=r[t]*a;return!0}},{}],243:[function(m,w,y){var e=m("gl-vec3/lerp"),r=m("mat4-recompose"),n=m("mat4-decompose"),a=m("gl-mat4/determinant"),t=m("quat-slerp"),p=c(),u=c(),i=c();function c(){return{translate:f(),scale:f(1),skew:f(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function f(l){return[l||0,l||0,l||0]}w.exports=function(l,h,d,o){if(0===a(h)||0===a(d))return!1;var _=n(h,p.translate,p.scale,p.skew,p.perspective,p.quaternion),s=n(d,u.translate,u.scale,u.skew,u.perspective,u.quaternion);return!(!_||!s||(e(i.translate,p.translate,u.translate,o),e(i.skew,p.skew,u.skew,o),e(i.scale,p.scale,u.scale,o),e(i.perspective,p.perspective,u.perspective,o),t(i.quaternion,p.quaternion,u.quaternion,o),r(l,i.translate,i.scale,i.skew,i.perspective,i.quaternion),0))}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(m,w,y){var e={identity:m("gl-mat4/identity"),translate:m("gl-mat4/translate"),multiply:m("gl-mat4/multiply"),create:m("gl-mat4/create"),scale:m("gl-mat4/scale"),fromRotationTranslation:m("gl-mat4/fromRotationTranslation")},r=(e.create(),e.create());w.exports=function(n,a,t,p,u,i){return e.identity(n),e.fromRotationTranslation(n,i,a),n[3]=u[0],n[7]=u[1],n[11]=u[2],n[15]=u[3],e.identity(r),0!==p[2]&&(r[9]=p[2],e.multiply(n,n,r)),0!==p[1]&&(r[9]=0,r[8]=p[1],e.multiply(n,n,r)),0!==p[0]&&(r[8]=0,r[4]=p[0],e.multiply(n,n,r)),e.scale(n,n,t),n}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(m,w,y){"use strict";var e=m("binary-search-bounds"),r=m("mat4-interpolate"),n=m("gl-mat4/invert"),a=m("gl-mat4/rotateX"),t=m("gl-mat4/rotateY"),p=m("gl-mat4/rotateZ"),u=m("gl-mat4/lookAt"),i=m("gl-mat4/translate"),c=(m("gl-mat4/scale"),m("gl-vec3/normalize")),f=[0,0,0];function l(o){this._components=o.slice(),this._time=[0],this.prevMatrix=o.slice(),this.nextMatrix=o.slice(),this.computedMatrix=o.slice(),this.computedInverse=o.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}w.exports=function(o){return new l((o=o||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var h=l.prototype;h.recalcMatrix=function(o){var _=this._time,s=e.le(_,o),k=this.computedMatrix;if(!(s<0)){var M=this._components;if(s===_.length-1)for(var A=16*s,E=0;E<16;++E)k[E]=M[A++];else{var I=_[s+1]-_[s],C=(A=16*s,this.prevMatrix),R=!0;for(E=0;E<16;++E)C[E]=M[A++];var O=this.nextMatrix;for(E=0;E<16;++E)O[E]=M[A++],R=R&&C[E]===O[E];if(I<1e-6||R)for(E=0;E<16;++E)k[E]=C[E];else r(k,C,O,(o-_[s])/I)}var D=this.computedUp;D[0]=k[1],D[1]=k[5],D[2]=k[9],c(D,D);var L=this.computedInverse;n(L,k);var B=this.computedEye,j=L[15];B[0]=L[12]/j,B[1]=L[13]/j,B[2]=L[14]/j;var W=this.computedCenter,Y=Math.exp(this.computedRadius[0]);for(E=0;E<3;++E)W[E]=B[E]-k[2+4*E]*Y}},h.idle=function(o){if(!(o<this.lastT())){for(var _=this._components,s=_.length-16,k=0;k<16;++k)_.push(_[s++]);this._time.push(o)}},h.flush=function(o){var _=e.gt(this._time,o)-2;_<0||(this._time.splice(0,_),this._components.splice(0,16*_))},h.lastT=function(){return this._time[this._time.length-1]},h.lookAt=function(o,_,s,k){this.recalcMatrix(o),this.setMatrix(o,u(this.computedMatrix,_=_||this.computedEye,s=s||f,k=k||this.computedUp));for(var M=0,A=0;A<3;++A)M+=Math.pow(s[A]-_[A],2);M=Math.log(Math.sqrt(M)),this.computedRadius[0]=M},h.rotate=function(o,_,s,k){this.recalcMatrix(o);var M=this.computedInverse;_&&t(M,M,_),s&&a(M,M,s),k&&p(M,M,k),this.setMatrix(o,n(this.computedMatrix,M))};var d=[0,0,0];h.pan=function(o,_,s,k){d[0]=-(_||0),d[1]=-(s||0),d[2]=-(k||0),this.recalcMatrix(o);var M=this.computedInverse;i(M,M,d),this.setMatrix(o,n(M,M))},h.translate=function(o,_,s,k){d[0]=_||0,d[1]=s||0,d[2]=k||0,this.recalcMatrix(o);var M=this.computedMatrix;i(M,M,d),this.setMatrix(o,M)},h.setMatrix=function(o,_){if(!(o<this.lastT())){this._time.push(o);for(var s=0;s<16;++s)this._components.push(_[s])}},h.setDistance=function(o,_){this.computedRadius[0]=_},h.setDistanceLimits=function(o,_){var s=this._limits;s[0]=o,s[1]=_},h.getDistanceLimits=function(o){var _=this._limits;return o?(o[0]=_[0],o[1]=_[1],o):_}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(m,w,y){"use strict";w.exports=function(r){var n=r.length;if(n<3){for(var a=new Array(n),t=0;t<n;++t)a[t]=t;return 2===n&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:a}var p=new Array(n);for(t=0;t<n;++t)p[t]=t;p.sort(function(_,s){return r[_][0]-r[s][0]||r[_][1]-r[s][1]});var u=[p[0],p[1]],i=[p[0],p[1]];for(t=2;t<n;++t){for(var c=p[t],f=r[c],l=u.length;l>1&&e(r[u[l-2]],r[u[l-1]],f)<=0;)l-=1,u.pop();for(u.push(c),l=i.length;l>1&&e(r[i[l-2]],r[i[l-1]],f)>=0;)l-=1,i.pop();i.push(c)}a=new Array(i.length+u.length-2);for(var h=0,d=(t=0,u.length);t<d;++t)a[h++]=u[t];for(var o=i.length-2;o>0;--o)a[h++]=i[o];return a};var e=m("robust-orientation")[3]},{"robust-orientation":284}],247:[function(m,w,y){"use strict";w.exports=function(r,n){n||(n=r,r=window);var a=0,t=0,p=0,u={shift:!1,alt:!1,control:!1,meta:!1},i=!1;function c(A){var E=!1;return"altKey"in A&&(E=E||A.altKey!==u.alt,u.alt=!!A.altKey),"shiftKey"in A&&(E=E||A.shiftKey!==u.shift,u.shift=!!A.shiftKey),"ctrlKey"in A&&(E=E||A.ctrlKey!==u.control,u.control=!!A.ctrlKey),"metaKey"in A&&(E=E||A.metaKey!==u.meta,u.meta=!!A.metaKey),E}function f(A,E){var I=e.x(E),C=e.y(E);"buttons"in E&&(A=0|E.buttons),(A!==a||I!==t||C!==p||c(E))&&(a=0|A,t=I||0,p=C||0,n&&n(a,t,p,u))}function l(A){f(0,A)}function h(){(a||t||p||u.shift||u.alt||u.meta||u.control)&&(t=p=0,a=0,u.shift=u.alt=u.control=u.meta=!1,n&&n(0,0,0,u))}function d(A){c(A)&&n&&n(a,t,p,u)}function o(A){0===e.buttons(A)?f(0,A):f(a,A)}function _(A){f(a|e.buttons(A),A)}function s(A){f(a&~e.buttons(A),A)}function k(){i||(i=!0,r.addEventListener("mousemove",o),r.addEventListener("mousedown",_),r.addEventListener("mouseup",s),r.addEventListener("mouseleave",l),r.addEventListener("mouseenter",l),r.addEventListener("mouseout",l),r.addEventListener("mouseover",l),r.addEventListener("blur",h),r.addEventListener("keyup",d),r.addEventListener("keydown",d),r.addEventListener("keypress",d),r!==window&&(window.addEventListener("blur",h),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}k();var M={element:r};return Object.defineProperties(M,{enabled:{get:function(){return i},set:function(A){A?k():!i||(i=!1,r.removeEventListener("mousemove",o),r.removeEventListener("mousedown",_),r.removeEventListener("mouseup",s),r.removeEventListener("mouseleave",l),r.removeEventListener("mouseenter",l),r.removeEventListener("mouseout",l),r.removeEventListener("mouseover",l),r.removeEventListener("blur",h),r.removeEventListener("keyup",d),r.removeEventListener("keydown",d),r.removeEventListener("keypress",d),r!==window&&(window.removeEventListener("blur",h),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return t},enumerable:!0},y:{get:function(){return p},enumerable:!0},mods:{get:function(){return u},enumerable:!0}}),M};var e=m("mouse-event")},{"mouse-event":249}],248:[function(m,w,y){var e={left:0,top:0};w.exports=function(r,n,a){n=n||r.currentTarget||r.srcElement,Array.isArray(a)||(a=[0,0]);var i,t=r.clientX||0,p=r.clientY||0,u=(i=n)===window||i===document||i===document.body?e:i.getBoundingClientRect();return a[0]=t-u.left,a[1]=p-u.top,a}},{}],249:[function(m,w,y){"use strict";function e(r){return r.target||r.srcElement||window}y.buttons=function(r){if("object"==typeof r){if("buttons"in r)return r.buttons;if("which"in r){if(2===(n=r.which))return 4;if(3===n)return 2;if(n>0)return 1<<n-1}else if("button"in r){var n;if(1===(n=r.button))return 4;if(2===n)return 2;if(n>=0)return 1<<n}}return 0},y.element=e,y.x=function(r){if("object"==typeof r){if("offsetX"in r)return r.offsetX;var n=e(r).getBoundingClientRect();return r.clientX-n.left}return 0},y.y=function(r){if("object"==typeof r){if("offsetY"in r)return r.offsetY;var n=e(r).getBoundingClientRect();return r.clientY-n.top}return 0}},{}],250:[function(m,w,y){"use strict";var e=m("to-px");w.exports=function(r,n,a){"function"==typeof r&&(a=!!n,n=r,r=window);var t=e("ex",r),p=function(u){a&&u.preventDefault();var i=u.deltaX||0,c=u.deltaY||0,f=u.deltaZ||0,l=1;switch(u.deltaMode){case 1:l=t;break;case 2:l=window.innerHeight}if(c*=l,f*=l,(i*=l)||c||f)return n(i,c,f,u)};return r.addEventListener("wheel",p),p}},{"to-px":304}],251:[function(m,w,y){"use strict";var e=m("typedarray-pool");w.exports=function(n){function a(l){throw new Error("ndarray-extract-contour: "+l)}"object"!=typeof n&&a("Must specify arguments");var t=n.order;Array.isArray(t)||a("Must specify order");var l,h,d,k,p=n.arrayArguments||1;p<1&&a("Must have at least one array argument"),(n.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),"function"!=typeof n.vertex&&a("Must specify vertex creation function"),"function"!=typeof n.cell&&a("Must specify cell creation function"),"function"!=typeof n.phase&&a("Must specify phase function");for(var i=n.getters||[],c=new Array(p),f=0;f<p;++f)c[f]=i.indexOf(f)>=0;return l=n.vertex,h=n.cell,d=n.phase,k=[c,t].join(","),(0,r[k])(l,h,d,e.mallocUint32,e.freeUint32)};var r={"false,0,1":function(n,a,t,p,u){return function(i,c,f,l){var h,d=0|i.shape[0],o=0|i.shape[1],_=i.data,k=0|i.stride[0],M=0|i.stride[1],A=0|i.offset,E=0|-k,I=0,C=0|-M,R=0,O=-k-M|0,D=0,L=0|k,B=M-k*d|0,j=0,W=0,Y=0,Q=2*d|0,ne=p(Q),X=p(Q),$=0,re=0,H=-1,U=-1,G=0,ie=0|-d,q=0|d,ee=0,te=-d-1|0,se=d-1|0,ue=0,de=0,he=0;for(j=0;j<d;++j)ne[$++]=t(_[A],c,f,l),A+=L;if(A+=B,o>0){if(W=1,ne[$++]=t(_[A],c,f,l),A+=L,d>0)for(j=1,re=ne[$]=t(h=_[A],c,f,l),ee=ne[$+ie],ue=ne[$+te],re===(G=ne[$+H])&&re===ee&&re===ue||(n(j,W,h,I=_[A+E],R=_[A+C],D=_[A+O],re,G,ee,ue,c,f,l),de=X[$]=Y++),$+=1,A+=L,j=2;j<d;++j)re=ne[$]=t(h=_[A],c,f,l),ee=ne[$+ie],ue=ne[$+te],re===(G=ne[$+H])&&re===ee&&re===ue||(n(j,W,h,I=_[A+E],R=_[A+C],D=_[A+O],re,G,ee,ue,c,f,l),de=X[$]=Y++,ue!==G&&a(X[$+H],de,D,I,ue,G,c,f,l)),$+=1,A+=L;for(A+=B,$=0,he=H,H=U,U=he,he=ie,ie=q,q=he,he=te,te=se,se=he,W=2;W<o;++W){if(ne[$++]=t(_[A],c,f,l),A+=L,d>0)for(j=1,re=ne[$]=t(h=_[A],c,f,l),ee=ne[$+ie],ue=ne[$+te],re===(G=ne[$+H])&&re===ee&&re===ue||(n(j,W,h,I=_[A+E],R=_[A+C],D=_[A+O],re,G,ee,ue,c,f,l),de=X[$]=Y++,ue!==ee&&a(X[$+ie],de,R,D,ee,ue,c,f,l)),$+=1,A+=L,j=2;j<d;++j)re=ne[$]=t(h=_[A],c,f,l),ee=ne[$+ie],ue=ne[$+te],re===(G=ne[$+H])&&re===ee&&re===ue||(n(j,W,h,I=_[A+E],R=_[A+C],D=_[A+O],re,G,ee,ue,c,f,l),de=X[$]=Y++,ue!==ee&&a(X[$+ie],de,R,D,ee,ue,c,f,l),ue!==G&&a(X[$+H],de,D,I,ue,G,c,f,l)),$+=1,A+=L;1&W&&($=0),he=H,H=U,U=he,he=ie,ie=q,q=he,he=te,te=se,se=he,A+=B}}u(X),u(ne)}},"false,1,0":function(n,a,t,p,u){return function(i,c,f,l){var h,d=0|i.shape[0],o=0|i.shape[1],_=i.data,k=0|i.stride[0],M=0|i.stride[1],A=0|i.offset,E=0|-k,I=0,C=0|-M,R=0,O=-k-M|0,D=0,L=0|M,B=k-M*o|0,j=0,W=0,Y=0,Q=2*o|0,ne=p(Q),X=p(Q),$=0,re=0,H=-1,U=-1,G=0,ie=0|-o,q=0|o,ee=0,te=-o-1|0,se=o-1|0,ue=0,de=0,he=0;for(W=0;W<o;++W)ne[$++]=t(_[A],c,f,l),A+=L;if(A+=B,d>0){if(j=1,ne[$++]=t(_[A],c,f,l),A+=L,o>0)for(W=1,re=ne[$]=t(h=_[A],c,f,l),G=ne[$+H],ue=ne[$+te],re===(ee=ne[$+ie])&&re===G&&re===ue||(n(j,W,h,I=_[A+E],R=_[A+C],D=_[A+O],re,ee,G,ue,c,f,l),de=X[$]=Y++),$+=1,A+=L,W=2;W<o;++W)re=ne[$]=t(h=_[A],c,f,l),G=ne[$+H],ue=ne[$+te],re===(ee=ne[$+ie])&&re===G&&re===ue||(n(j,W,h,I=_[A+E],R=_[A+C],D=_[A+O],re,ee,G,ue,c,f,l),de=X[$]=Y++,ue!==G&&a(X[$+H],de,R,D,G,ue,c,f,l)),$+=1,A+=L;for(A+=B,$=0,he=ie,ie=q,q=he,he=H,H=U,U=he,he=te,te=se,se=he,j=2;j<d;++j){if(ne[$++]=t(_[A],c,f,l),A+=L,o>0)for(W=1,re=ne[$]=t(h=_[A],c,f,l),G=ne[$+H],ue=ne[$+te],re===(ee=ne[$+ie])&&re===G&&re===ue||(n(j,W,h,I=_[A+E],R=_[A+C],D=_[A+O],re,ee,G,ue,c,f,l),de=X[$]=Y++,ue!==ee&&a(X[$+ie],de,D,I,ue,ee,c,f,l)),$+=1,A+=L,W=2;W<o;++W)re=ne[$]=t(h=_[A],c,f,l),G=ne[$+H],ue=ne[$+te],re===(ee=ne[$+ie])&&re===G&&re===ue||(n(j,W,h,I=_[A+E],R=_[A+C],D=_[A+O],re,ee,G,ue,c,f,l),de=X[$]=Y++,ue!==G&&a(X[$+H],de,R,D,G,ue,c,f,l),ue!==ee&&a(X[$+ie],de,D,I,ue,ee,c,f,l)),$+=1,A+=L;1&j&&($=0),he=ie,ie=q,q=he,he=H,H=U,U=he,he=te,te=se,se=he,A+=B}}u(X),u(ne)}}}},{"typedarray-pool":308}],252:[function(m,w,y){"use strict";var e=m("dup"),r={zero:function(d,o,_,s){var k=d[0];s|=0;var M=0,A=_[0];for(M=0;M<k;++M)o[s]=0,s+=A},fdTemplate1:function(d,o,_,s,k,M,A){var E=d[0],I=_[0],C=-1*I,R=I;s|=0,A|=0;var O=0,D=I,L=M[0];for(O=0;O<E;++O)k[A]=.5*(o[s+C]-o[s+R]),s+=D,A+=L},fdTemplate2:function(d,o,_,s,k,M,A,E,I,C){var R=d[0],O=d[1],D=_[0],L=_[1],j=M[1],Y=I[1],Q=-1*D,ne=D,X=-1*L,$=L;s|=0,A|=0,C|=0;var re=0,H=0,U=L,G=D-O*L,ie=j,q=M[0]-O*j,ee=Y,te=I[0]-O*Y;for(H=0;H<R;++H){for(re=0;re<O;++re)k[A]=.5*(o[s+Q]-o[s+ne]),E[C]=.5*(o[s+X]-o[s+$]),s+=U,A+=ie,C+=ee;s+=G,A+=q,C+=te}}},n={cdiff:function(d){var o={};return function(_,s,k){var M=_.dtype,A=_.order,E=s.dtype,I=s.order,C=k.dtype,R=k.order,O=[M,A.join(),E,I.join(),C,R.join()].join(),D=o[O];return D||(o[O]=D=d([M,A,E,I,C,R])),D(_.shape.slice(0),_.data,_.stride,0|_.offset,s.data,s.stride,0|s.offset,k.data,k.stride,0|k.offset)}},zero:function(d){var o={};return function(_){var s=_.dtype,k=_.order,M=[s,k.join()].join(),A=o[M];return A||(o[M]=A=d([s,k])),A(_.shape.slice(0),_.data,_.stride,0|_.offset)}},fdTemplate1:function(d){var o={};return function(_,s){var k=_.dtype,M=_.order,A=s.dtype,E=s.order,I=[k,M.join(),A,E.join()].join(),C=o[I];return C||(o[I]=C=d([k,M,A,E])),C(_.shape.slice(0),_.data,_.stride,0|_.offset,s.data,s.stride,0|s.offset)}},fdTemplate2:function(d){var o={};return function(_,s,k){var M=_.dtype,A=_.order,E=s.dtype,I=s.order,C=k.dtype,R=k.order,O=[M,A.join(),E,I.join(),C,R.join()].join(),D=o[O];return D||(o[O]=D=d([M,A,E,I,C,R])),D(_.shape.slice(0),_.data,_.stride,0|_.offset,s.data,s.stride,0|s.offset,k.data,k.stride,0|k.offset)}}};function a(d){return(0,n[d.funcName])(t.bind(void 0,d))}function t(d){return r[d.funcName]}function p(d){return a({funcName:d.funcName})}var u={},i={},c=p({funcName:"cdiff"}),f=p({funcName:"zero"});function l(d){return d in u?u[d]:u[d]=p({funcName:"fdTemplate"+d})}function h(d,o,_,s){return function(k,M){var A=M.shape.slice();return A[0]>2&&A[1]>2&&s(M.pick(-1,-1).lo(1,1).hi(A[0]-2,A[1]-2),k.pick(-1,-1,0).lo(1,1).hi(A[0]-2,A[1]-2),k.pick(-1,-1,1).lo(1,1).hi(A[0]-2,A[1]-2)),A[1]>2&&(_(M.pick(0,-1).lo(1).hi(A[1]-2),k.pick(0,-1,1).lo(1).hi(A[1]-2)),o(k.pick(0,-1,0).lo(1).hi(A[1]-2))),A[1]>2&&(_(M.pick(A[0]-1,-1).lo(1).hi(A[1]-2),k.pick(A[0]-1,-1,1).lo(1).hi(A[1]-2)),o(k.pick(A[0]-1,-1,0).lo(1).hi(A[1]-2))),A[0]>2&&(_(M.pick(-1,0).lo(1).hi(A[0]-2),k.pick(-1,0,0).lo(1).hi(A[0]-2)),o(k.pick(-1,0,1).lo(1).hi(A[0]-2))),A[0]>2&&(_(M.pick(-1,A[1]-1).lo(1).hi(A[0]-2),k.pick(-1,A[1]-1,0).lo(1).hi(A[0]-2)),o(k.pick(-1,A[1]-1,1).lo(1).hi(A[0]-2))),k.set(0,0,0,0),k.set(0,0,1,0),k.set(A[0]-1,0,0,0),k.set(A[0]-1,0,1,0),k.set(0,A[1]-1,0,0),k.set(0,A[1]-1,1,0),k.set(A[0]-1,A[1]-1,0,0),k.set(A[0]-1,A[1]-1,1,0),k}}w.exports=function(d,o,_){return Array.isArray(_)||(_=e(o.dimension,"string"==typeof _?_:"clamp")),0===o.size?d:0===o.dimension?(d.set(0),d):function(s){var k=s.join();if(I=i[k])return I;for(var M=s.length,A=[c,f],E=1;E<=M;++E)A.push(l(E));var I=h.apply(void 0,A);return i[k]=I,I}(_)(d,o)}},{dup:65}],253:[function(m,w,y){"use strict";function e(t,p){var u=Math.floor(p),i=p-u,f=0<=u+1&&u+1<t.shape[0];return(1-i)*(0<=u&&u<t.shape[0]?+t.get(u):0)+i*(f?+t.get(u+1):0)}function r(t,p,u){var i=Math.floor(p),c=p-i,f=0<=i&&i<t.shape[0],l=0<=i+1&&i+1<t.shape[0],h=Math.floor(u),d=u-h,o=0<=h&&h<t.shape[1],_=0<=h+1&&h+1<t.shape[1],s=f&&o?t.get(i,h):0,k=f&&_?t.get(i,h+1):0;return(1-d)*((1-c)*s+c*(l&&o?t.get(i+1,h):0))+d*((1-c)*k+c*(l&&_?t.get(i+1,h+1):0))}function n(t,p,u,i){var c=Math.floor(p),f=p-c,l=0<=c&&c<t.shape[0],h=0<=c+1&&c+1<t.shape[0],d=Math.floor(u),o=u-d,_=0<=d&&d<t.shape[1],s=0<=d+1&&d+1<t.shape[1],k=Math.floor(i),M=i-k,A=0<=k&&k<t.shape[2],E=0<=k+1&&k+1<t.shape[2],I=l&&_&&A?t.get(c,d,k):0,C=l&&s&&A?t.get(c,d+1,k):0,R=h&&_&&A?t.get(c+1,d,k):0,O=h&&s&&A?t.get(c+1,d+1,k):0,D=l&&_&&E?t.get(c,d,k+1):0,L=l&&s&&E?t.get(c,d+1,k+1):0;return(1-M)*((1-o)*((1-f)*I+f*R)+o*((1-f)*C+f*O))+M*((1-o)*((1-f)*D+f*(h&&_&&E?t.get(c+1,d,k+1):0))+o*((1-f)*L+f*(h&&s&&E?t.get(c+1,d+1,k+1):0)))}function a(t){var p,u,i=0|t.shape.length,c=new Array(i),f=new Array(i),l=new Array(i),h=new Array(i);for(p=0;p<i;++p)u=+arguments[p+1],c[p]=Math.floor(u),f[p]=u-c[p],l[p]=0<=c[p]&&c[p]<t.shape[p],h[p]=0<=c[p]+1&&c[p]+1<t.shape[p];var d,o,_,s=0;e:for(p=0;p<1<<i;++p){for(o=1,_=t.offset,d=0;d<i;++d)if(p&1<<d){if(!h[d])continue e;o*=f[d],_+=t.stride[d]*(c[d]+1)}else{if(!l[d])continue e;o*=1-f[d],_+=t.stride[d]*c[d]}s+=o*t.data[_]}return s}w.exports=function(t,p,u,i){switch(t.shape.length){case 0:return 0;case 1:return e(t,p);case 2:return r(t,p,u);case 3:return n(t,p,u,i);default:return a.apply(void 0,arguments)}},w.exports.d1=e,w.exports.d2=r,w.exports.d3=n},{}],254:[function(m,w,y){"use strict";var e={"float64,2,1,0":function(){return function(p,u,i,c,f){var l=p[0],h=p[1],d=p[2],_=i[1],s=i[2];c|=0;var k=0,M=0,A=0,E=s,I=_-d*s,C=i[0]-h*_;for(A=0;A<l;++A){for(M=0;M<h;++M){for(k=0;k<d;++k)u[c]/=f,c+=E;c+=I}c+=C}}},"uint8,2,0,1,float64,2,1,0":function(){return function(p,u,i,c,f,l,h,d){for(var o=p[0],_=p[1],s=p[2],k=i[0],M=i[1],A=i[2],E=l[0],I=l[1],C=l[2],R=c|=0,O=h|=0,D=0|p[0];D>0;){D<64?(o=D,D=0):(o=64,D-=64);for(var L=0|p[1];L>0;){L<64?(_=L,L=0):(_=64,L-=64),c=R+D*k+L*M,h=O+D*E+L*I;var B=0,j=0,W=0,Y=A,Q=k-s*A,ne=M-o*k,X=C,$=E-s*C,re=I-o*E;for(W=0;W<_;++W){for(j=0;j<o;++j){for(B=0;B<s;++B)u[c]=f[h]*d,c+=Y,h+=X;c+=Q,h+=$}c+=ne,h+=re}}}}},"float32,1,0,float32,1,0":function(){return function(p,u,i,c,f,l,h){var d=p[0],o=p[1],s=i[1],M=l[1];c|=0,h|=0;var A=0,E=0,I=s,C=i[0]-o*s,R=M,O=l[0]-o*M;for(E=0;E<d;++E){for(A=0;A<o;++A)u[c]=f[h],c+=I,h+=R;c+=C,h+=O}}},"float32,1,0,float32,0,1":function(){return function(p,u,i,c,f,l,h){for(var d=p[0],o=p[1],_=i[0],s=i[1],k=l[0],M=l[1],A=c|=0,E=h|=0,I=0|p[1];I>0;){I<64?(o=I,I=0):(o=64,I-=64);for(var C=0|p[0];C>0;){C<64?(d=C,C=0):(d=64,C-=64),c=A+I*s+C*_,h=E+I*M+C*k;var R=0,O=0,D=s,L=_-o*s,B=M,j=k-o*M;for(O=0;O<d;++O){for(R=0;R<o;++R)u[c]=f[h],c+=D,h+=B;c+=L,h+=j}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(p,u,i,c,f,l,h){for(var d=p[0],o=p[1],_=p[2],s=i[0],k=i[1],M=i[2],A=l[0],E=l[1],I=l[2],C=c|=0,R=h|=0,O=0|p[2];O>0;){O<64?(_=O,O=0):(_=64,O-=64);for(var D=0|p[0];D>0;){D<64?(d=D,D=0):(d=64,D-=64);for(var L=0|p[1];L>0;){L<64?(o=L,L=0):(o=64,L-=64),c=C+O*M+D*s+L*k,h=R+O*I+D*A+L*E;var B=0,j=0,W=0,Y=M,Q=s-_*M,ne=k-d*s,X=I,$=A-_*I,re=E-d*A;for(W=0;W<o;++W){for(j=0;j<d;++j){for(B=0;B<_;++B)u[c]=f[h],c+=Y,h+=X;c+=Q,h+=$}c+=ne,h+=re}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(p,u,i,c,f,l,h){var d=p[0],o=p[1],_=p[2],s=i[0],M=i[2],A=l[0],I=l[2];c|=0,h|=0;var C=0,R=0,O=0,D=M,L=s-_*M,B=i[1]-d*s,j=I,W=A-_*I,Y=l[1]-d*A;for(O=0;O<o;++O){for(R=0;R<d;++R){for(C=0;C<_;++C)u[c]=f[h],c+=D,h+=j;c+=L,h+=W}c+=B,h+=Y}}}},r=function(p,u){var i=u.join(",");return(0,e[i])()},n={mul:function(p){var u={};return function(i,c,f){var l=i.dtype,h=i.order,d=c.dtype,o=c.order,_=f.dtype,s=f.order,k=[l,h.join(),d,o.join(),_,s.join()].join(),M=u[k];return M||(u[k]=M=p([l,h,d,o,_,s])),M(i.shape.slice(0),i.data,i.stride,0|i.offset,c.data,c.stride,0|c.offset,f.data,f.stride,0|f.offset)}},muls:function(p){var u={};return function(i,c,f){var l=i.dtype,h=i.order,d=c.dtype,o=c.order,_=[l,h.join(),d,o.join()].join(),s=u[_];return s||(u[_]=s=p([l,h,d,o])),s(i.shape.slice(0),i.data,i.stride,0|i.offset,c.data,c.stride,0|c.offset,f)}},mulseq:function(p){var u={};return function(i,c){var f=i.dtype,l=i.order,h=[f,l.join()].join(),d=u[h];return d||(u[h]=d=p([f,l])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,c)}},div:function(p){var u={};return function(i,c,f){var l=i.dtype,h=i.order,d=c.dtype,o=c.order,_=f.dtype,s=f.order,k=[l,h.join(),d,o.join(),_,s.join()].join(),M=u[k];return M||(u[k]=M=p([l,h,d,o,_,s])),M(i.shape.slice(0),i.data,i.stride,0|i.offset,c.data,c.stride,0|c.offset,f.data,f.stride,0|f.offset)}},divs:function(p){var u={};return function(i,c,f){var l=i.dtype,h=i.order,d=c.dtype,o=c.order,_=[l,h.join(),d,o.join()].join(),s=u[_];return s||(u[_]=s=p([l,h,d,o])),s(i.shape.slice(0),i.data,i.stride,0|i.offset,c.data,c.stride,0|c.offset,f)}},divseq:function(p){var u={};return function(i,c){var f=i.dtype,l=i.order,h=[f,l.join()].join(),d=u[h];return d||(u[h]=d=p([f,l])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,c)}},assign:function(p){var u={};return function(i,c){var f=i.dtype,l=i.order,h=c.dtype,d=c.order,o=[f,l.join(),h,d.join()].join(),_=u[o];return _||(u[o]=_=p([f,l,h,d])),_(i.shape.slice(0),i.data,i.stride,0|i.offset,c.data,c.stride,0|c.offset)}}};function a(p){return(0,n[(u={funcName:p.funcName}).funcName])(r.bind(void 0,u));var u}var t={mul:"*",div:"/"};(function(){for(var p in t)y[p]=a({funcName:p}),y[p+"s"]=a({funcName:p+"s"}),y[p+"seq"]=a({funcName:p+"seq"})})(),y.assign=a({funcName:"assign"})},{}],255:[function(m,w,y){"use strict";var e=m("ndarray"),r=m("./doConvert.js");w.exports=function(n,a){for(var t=[],p=n,u=1;Array.isArray(p);)t.push(p.length),u*=p.length,p=p[0];return 0===t.length?e():(a||(a=e(new Float64Array(u),t)),r(a,n),a)}},{"./doConvert.js":256,ndarray:259}],256:[function(m,w,y){"use strict";var n,a;w.exports=(n=function(){return function(n,a,t,p,u){var i=n[0],c=n[1],f=n[2],h=t[1],d=t[2],o=[0,0,0];p|=0;var _=0,s=0,k=0,M=d,A=h-f*d,E=t[0]-c*h;for(k=0;k<i;++k){for(s=0;s<c;++s){for(_=0;_<f;++_){var I,C=u;for(I=0;I<o.length-1;++I)C=C[o[I]];a[p]=C[o[o.length-1]],p+=M,++o[2]}p+=A,o[2]-=f,++o[1]}p+=E,o[1]-=c,++o[0]}}}.bind(void 0,{funcName:"convert"}),a={},function(t,p){var u=t.dtype,i=t.order,c=[u,i.join()].join(),f=a[c];return f||(a[c]=f=n([u,i])),f(t.shape.slice(0),t.data,t.stride,0|t.offset,p)})},{}],257:[function(m,w,y){"use strict";var e=m("typedarray-pool");function r(p){return"uint32"===p?[e.mallocUint32,e.freeUint32]:null}var n={"uint32,1,0":function(p,u){return function(i,c,f,l,h,d,o,_,s,k,M){var A,E,I,C,R,O,D,L,B=i*h+l,j=p(_);for(A=i+1;A<=c;++A){for(E=A,I=B+=h,R=0,O=B,C=0;C<_;++C)j[R++]=f[O],O+=s;e:for(;E-- >i;){R=0,O=I-h;t:for(C=0;C<_;++C){if((D=f[O])<(L=j[R]))break e;if(D>L)break t;O+=k,R+=M}for(R=I,O=I-h,C=0;C<_;++C)f[R]=f[O],R+=s,O+=s;I-=h}for(R=I,O=0,C=0;C<_;++C)f[R]=j[O++],R+=s}u(j)}}},a={"uint32,1,0":function(p,u,i){return function c(f,l,h,d,o,_,s,k,M,A,E){var I,C,O,D,L,B,j,W,Y,Q,ne,X,$,re,H,U,G,ie,q,ee,te,se,ue,de,he=(l-f+1)/6|0,xe=f+he,ge=l-he,_e=f+l>>1,Ce=_e-he,Le=_e+he,Ie=xe,Be=Ce,ve=_e,Te=Le,Pe=ge,De=f+1,Fe=l-1,Ue=!0,He=0,Ke=0,st=0,Ve=k,$e=u(Ve),Qe=u(Ve);Q=o*Ie,ne=o*Be,de=d;e:for(Y=0;Y<k;++Y){if((st=h[B=Q+de]-h[j=ne+de])>0){C=Ie,Ie=Be,Be=C;break e}if(st<0)break e;de+=A}Q=o*Te,ne=o*Pe,de=d;e:for(Y=0;Y<k;++Y){if((st=h[B=Q+de]-h[j=ne+de])>0){C=Te,Te=Pe,Pe=C;break e}if(st<0)break e;de+=A}Q=o*Ie,ne=o*ve,de=d;e:for(Y=0;Y<k;++Y){if((st=h[B=Q+de]-h[j=ne+de])>0){C=Ie,Ie=ve,ve=C;break e}if(st<0)break e;de+=A}Q=o*Be,ne=o*ve,de=d;e:for(Y=0;Y<k;++Y){if((st=h[B=Q+de]-h[j=ne+de])>0){C=Be,Be=ve,ve=C;break e}if(st<0)break e;de+=A}Q=o*Ie,ne=o*Te,de=d;e:for(Y=0;Y<k;++Y){if((st=h[B=Q+de]-h[j=ne+de])>0){C=Ie,Ie=Te,Te=C;break e}if(st<0)break e;de+=A}Q=o*ve,ne=o*Te,de=d;e:for(Y=0;Y<k;++Y){if((st=h[B=Q+de]-h[j=ne+de])>0){C=ve,ve=Te,Te=C;break e}if(st<0)break e;de+=A}Q=o*Be,ne=o*Pe,de=d;e:for(Y=0;Y<k;++Y){if((st=h[B=Q+de]-h[j=ne+de])>0){C=Be,Be=Pe,Pe=C;break e}if(st<0)break e;de+=A}Q=o*Be,ne=o*ve,de=d;e:for(Y=0;Y<k;++Y){if((st=h[B=Q+de]-h[j=ne+de])>0){C=Be,Be=ve,ve=C;break e}if(st<0)break e;de+=A}Q=o*Te,ne=o*Pe,de=d;e:for(Y=0;Y<k;++Y){if((st=h[B=Q+de]-h[j=ne+de])>0){C=Te,Te=Pe,Pe=C;break e}if(st<0)break e;de+=A}for(Q=o*Ie,ne=o*Be,X=o*ve,$=o*Te,re=o*Pe,H=o*xe,U=o*_e,G=o*ge,ue=0,de=d,Y=0;Y<k;++Y)B=Q+de,W=X+de,ie=$+de,q=re+de,ee=H+de,te=U+de,se=G+de,$e[ue]=h[j=ne+de],Qe[ue]=h[ie],Ue=Ue&&$e[ue]===Qe[ue],O=h[W],D=h[q],h[ee]=h[B],h[te]=O,h[se]=D,++ue,de+=M;for(Q=o*Ce,ne=o*f,de=d,Y=0;Y<k;++Y)h[B=Q+de]=h[j=ne+de],de+=M;for(Q=o*Le,ne=o*l,de=d,Y=0;Y<k;++Y)h[B=Q+de]=h[j=ne+de],de+=M;if(Ue)for(L=De;L<=Fe;++L){for(B=d+L*o,ue=0,Y=0;Y<k&&0==(st=h[B]-$e[ue]);++Y)ue+=E,B+=A;if(0!==st)if(st<0){if(L!==De)for(Q=o*L,ne=o*De,de=d,Y=0;Y<k;++Y)I=h[B=Q+de],h[B]=h[j=ne+de],h[j]=I,de+=M;++De}else for(;;){for(B=d+Fe*o,ue=0,Y=0;Y<k&&0==(st=h[B]-$e[ue]);++Y)ue+=E,B+=A;if(!(st>0)){if(st<0){for(Q=o*L,ne=o*De,X=o*Fe,de=d,Y=0;Y<k;++Y)W=X+de,I=h[B=Q+de],h[B]=h[j=ne+de],h[j]=h[W],h[W]=I,de+=M;++De,--Fe;break}for(Q=o*L,ne=o*Fe,de=d,Y=0;Y<k;++Y)I=h[B=Q+de],h[B]=h[j=ne+de],h[j]=I,de+=M;--Fe;break}Fe--}}else for(L=De;L<=Fe;++L){for(B=d+L*o,ue=0,Y=0;Y<k&&0==(He=h[B]-$e[ue]);++Y)ue+=E,B+=A;if(He<0){if(L!==De)for(Q=o*L,ne=o*De,de=d,Y=0;Y<k;++Y)I=h[B=Q+de],h[B]=h[j=ne+de],h[j]=I,de+=M;++De}else{for(B=d+L*o,ue=0,Y=0;Y<k&&0==(Ke=h[B]-Qe[ue]);++Y)ue+=E,B+=A;if(Ke>0)for(;;){for(B=d+Fe*o,ue=0,Y=0;Y<k&&0==(st=h[B]-Qe[ue]);++Y)ue+=E,B+=A;if(!(st>0)){for(B=d+Fe*o,ue=0,Y=0;Y<k&&0==(st=h[B]-$e[ue]);++Y)ue+=E,B+=A;if(st<0){for(Q=o*L,ne=o*De,X=o*Fe,de=d,Y=0;Y<k;++Y)W=X+de,I=h[B=Q+de],h[B]=h[j=ne+de],h[j]=h[W],h[W]=I,de+=M;++De,--Fe}else{for(Q=o*L,ne=o*Fe,de=d,Y=0;Y<k;++Y)I=h[B=Q+de],h[B]=h[j=ne+de],h[j]=I,de+=M;--Fe}break}if(--Fe<L)break}}}for(Q=o*f,ne=o*(De-1),ue=0,de=d,Y=0;Y<k;++Y)h[B=Q+de]=h[j=ne+de],h[j]=$e[ue],++ue,de+=M;for(Q=o*l,ne=o*(Fe+1),ue=0,de=d,Y=0;Y<k;++Y)h[B=Q+de]=h[j=ne+de],h[j]=Qe[ue],++ue,de+=M;if(De-2-f<=32?p(f,De-2,h,d,o,_,s,k,M,A,E):c(f,De-2,h,d,o,_,s,k,M,A,E),l-(Fe+2)<=32?p(Fe+2,l,h,d,o,_,s,k,M,A,E):c(Fe+2,l,h,d,o,_,s,k,M,A,E),Ue)return i($e),void i(Qe);if(De<xe&&Fe>ge){e:for(;;){for(B=d+De*o,ue=0,de=d,Y=0;Y<k;++Y){if(h[B]!==$e[ue])break e;++ue,B+=M}++De}e:for(;;){for(B=d+Fe*o,ue=0,de=d,Y=0;Y<k;++Y){if(h[B]!==Qe[ue])break e;++ue,B+=M}--Fe}for(L=De;L<=Fe;++L){for(B=d+L*o,ue=0,Y=0;Y<k&&0==(He=h[B]-$e[ue]);++Y)ue+=E,B+=A;if(0===He){if(L!==De)for(Q=o*L,ne=o*De,de=d,Y=0;Y<k;++Y)I=h[B=Q+de],h[B]=h[j=ne+de],h[j]=I,de+=M;++De}else{for(B=d+L*o,ue=0,Y=0;Y<k&&0==(Ke=h[B]-Qe[ue]);++Y)ue+=E,B+=A;if(0===Ke)for(;;){for(B=d+Fe*o,ue=0,Y=0;Y<k&&0==(st=h[B]-Qe[ue]);++Y)ue+=E,B+=A;if(0!==st){for(B=d+Fe*o,ue=0,Y=0;Y<k&&0==(st=h[B]-$e[ue]);++Y)ue+=E,B+=A;if(st<0){for(Q=o*L,ne=o*De,X=o*Fe,de=d,Y=0;Y<k;++Y)W=X+de,I=h[B=Q+de],h[B]=h[j=ne+de],h[j]=h[W],h[W]=I,de+=M;++De,--Fe}else{for(Q=o*L,ne=o*Fe,de=d,Y=0;Y<k;++Y)I=h[B=Q+de],h[B]=h[j=ne+de],h[j]=I,de+=M;--Fe}break}if(--Fe<L)break}}}}i($e),i(Qe),Fe-De<=32?p(De,Fe,h,d,o,_,s,k,M,A,E):c(De,Fe,h,d,o,_,s,k,M,A,E)}}},t={"uint32,1,0":function(p,u){return function(i){var c=i.data,f=0|i.offset,l=i.shape,h=i.stride,d=0|h[0],o=0|l[0],_=0|h[1],s=0|l[1],k=_,M=_;o<=32?p(0,o-1,c,f,d,_,o,s,k,M,1):u(0,o-1,c,f,d,_,o,s,k,M,1)}}};w.exports=function(p,u){var h,d,o,_,s,i=[u,p].join(","),c=t[i],f=(h=p,o=r(d=u),_=[d,h].join(","),s=n[_],o?s(o[0],o[1]):s()),l=function(h,d,o){var _=r(d),s=[d,h].join(","),k=a[s];return h.length>1&&_?k(o,_[0],_[1]):k(o)}(p,u,f);return c(f,l)}},{"typedarray-pool":308}],258:[function(m,w,y){"use strict";var e=m("./lib/compile_sort.js"),r={};w.exports=function(n){var a=n.order,t=n.dtype,p=[a,t].join(":"),u=r[p];return u||(r[p]=u=e(a,t)),u(n),n}},{"./lib/compile_sort.js":257}],259:[function(m,w,y){var e=m("is-buffer"),r="undefined"!=typeof Float64Array;function n(i,c){return i[0]-c[0]}function a(){var i,c=this.stride,f=new Array(c.length);for(i=0;i<f.length;++i)f[i]=[Math.abs(c[i]),i];f.sort(n);var l=new Array(f.length);for(i=0;i<l.length;++i)l[i]=f[i][1];return l}var t={T:function(i){function c(l){this.data=l}var f=c.prototype;return f.dtype=i,f.index=function(){return-1},f.size=0,f.dimension=-1,f.shape=f.stride=f.order=[],f.lo=f.hi=f.transpose=f.step=function(){return new c(this.data)},f.get=f.set=function(){},f.pick=function(){return null},function(l){return new c(l)}},0:function(i,c){function f(h,d){this.data=h,this.offset=d}var l=f.prototype;return l.dtype=i,l.index=function(){return this.offset},l.dimension=0,l.size=1,l.shape=l.stride=l.order=[],l.lo=l.hi=l.transpose=l.step=function(){return new f(this.data,this.offset)},l.pick=function(){return c(this.data)},l.valueOf=l.get=function(){return"generic"===i?this.data.get(this.offset):this.data[this.offset]},l.set=function(h){return"generic"===i?this.data.set(this.offset,h):this.data[this.offset]=h},function(h,d,o,_){return new f(h,_)}},1:function(i,c,f){function l(d,o,_,s){this.data=d,this.shape=[o],this.stride=[_],this.offset=0|s}var h=l.prototype;return h.dtype=i,h.dimension=1,Object.defineProperty(h,"size",{get:function(){return this.shape[0]}}),h.order=[0],h.set=function(d,o){return"generic"===i?this.data.set(this.offset+this.stride[0]*d,o):this.data[this.offset+this.stride[0]*d]=o},h.get=function(d){return"generic"===i?this.data.get(this.offset+this.stride[0]*d):this.data[this.offset+this.stride[0]*d]},h.index=function(d){return this.offset+this.stride[0]*d},h.hi=function(d){return new l(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,this.stride[0],this.offset)},h.lo=function(d){var o=this.offset,_=0,s=this.shape[0],k=this.stride[0];return"number"==typeof d&&d>=0&&(o+=k*(_=0|d),s-=_),new l(this.data,s,k,o)},h.step=function(d){var o=this.shape[0],_=this.stride[0],s=this.offset,k=0,M=Math.ceil;return"number"==typeof d&&((k=0|d)<0?(s+=_*(o-1),o=M(-o/k)):o=M(o/k),_*=k),new l(this.data,o,_,s)},h.transpose=function(d){return new l(this.data,this.shape[d=void 0===d?0:0|d],this.stride[d],this.offset)},h.pick=function(d){var o=[],_=[],s=this.offset;return"number"==typeof d&&d>=0?s=s+this.stride[0]*d|0:(o.push(this.shape[0]),_.push(this.stride[0])),(0,c[o.length+1])(this.data,o,_,s)},function(d,o,_,s){return new l(d,o[0],_[0],s)}},2:function(i,c,f){function l(d,o,_,s,k,M){this.data=d,this.shape=[o,_],this.stride=[s,k],this.offset=0|M}var h=l.prototype;return h.dtype=i,h.dimension=2,Object.defineProperty(h,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(h,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),h.set=function(d,o,_){return"generic"===i?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*o,_):this.data[this.offset+this.stride[0]*d+this.stride[1]*o]=_},h.get=function(d,o){return"generic"===i?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*o):this.data[this.offset+this.stride[0]*d+this.stride[1]*o]},h.index=function(d,o){return this.offset+this.stride[0]*d+this.stride[1]*o},h.hi=function(d,o){return new l(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof o||o<0?this.shape[1]:0|o,this.stride[0],this.stride[1],this.offset)},h.lo=function(d,o){var _=this.offset,s=0,k=this.shape[0],M=this.shape[1],A=this.stride[0],E=this.stride[1];return"number"==typeof d&&d>=0&&(_+=A*(s=0|d),k-=s),"number"==typeof o&&o>=0&&(_+=E*(s=0|o),M-=s),new l(this.data,k,M,A,E,_)},h.step=function(d,o){var _=this.shape[0],s=this.shape[1],k=this.stride[0],M=this.stride[1],A=this.offset,E=0,I=Math.ceil;return"number"==typeof d&&((E=0|d)<0?(A+=k*(_-1),_=I(-_/E)):_=I(_/E),k*=E),"number"==typeof o&&((E=0|o)<0?(A+=M*(s-1),s=I(-s/E)):s=I(s/E),M*=E),new l(this.data,_,s,k,M,A)},h.transpose=function(d,o){var _=this.shape,s=this.stride;return new l(this.data,_[d=void 0===d?0:0|d],_[o=void 0===o?1:0|o],s[d],s[o],this.offset)},h.pick=function(d,o){var _=[],s=[],k=this.offset;return"number"==typeof d&&d>=0?k=k+this.stride[0]*d|0:(_.push(this.shape[0]),s.push(this.stride[0])),"number"==typeof o&&o>=0?k=k+this.stride[1]*o|0:(_.push(this.shape[1]),s.push(this.stride[1])),(0,c[_.length+1])(this.data,_,s,k)},function(d,o,_,s){return new l(d,o[0],o[1],_[0],_[1],s)}},3:function(i,c,f){function l(d,o,_,s,k,M,A,E){this.data=d,this.shape=[o,_,s],this.stride=[k,M,A],this.offset=0|E}var h=l.prototype;return h.dtype=i,h.dimension=3,Object.defineProperty(h,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(h,"order",{get:function(){var d=Math.abs(this.stride[0]),o=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return d>o?o>_?[2,1,0]:d>_?[1,2,0]:[1,0,2]:d>_?[2,0,1]:_>o?[0,1,2]:[0,2,1]}}),h.set=function(d,o,_,s){return"generic"===i?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*_,s):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*_]=s},h.get=function(d,o,_){return"generic"===i?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*_):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*_]},h.index=function(d,o,_){return this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*_},h.hi=function(d,o,_){return new l(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof _||_<0?this.shape[2]:0|_,this.stride[0],this.stride[1],this.stride[2],this.offset)},h.lo=function(d,o,_){var s=this.offset,k=0,M=this.shape[0],A=this.shape[1],E=this.shape[2],I=this.stride[0],C=this.stride[1],R=this.stride[2];return"number"==typeof d&&d>=0&&(s+=I*(k=0|d),M-=k),"number"==typeof o&&o>=0&&(s+=C*(k=0|o),A-=k),"number"==typeof _&&_>=0&&(s+=R*(k=0|_),E-=k),new l(this.data,M,A,E,I,C,R,s)},h.step=function(d,o,_){var s=this.shape[0],k=this.shape[1],M=this.shape[2],A=this.stride[0],E=this.stride[1],I=this.stride[2],C=this.offset,R=0,O=Math.ceil;return"number"==typeof d&&((R=0|d)<0?(C+=A*(s-1),s=O(-s/R)):s=O(s/R),A*=R),"number"==typeof o&&((R=0|o)<0?(C+=E*(k-1),k=O(-k/R)):k=O(k/R),E*=R),"number"==typeof _&&((R=0|_)<0?(C+=I*(M-1),M=O(-M/R)):M=O(M/R),I*=R),new l(this.data,s,k,M,A,E,I,C)},h.transpose=function(d,o,_){var s=this.shape,k=this.stride;return new l(this.data,s[d=void 0===d?0:0|d],s[o=void 0===o?1:0|o],s[_=void 0===_?2:0|_],k[d],k[o],k[_],this.offset)},h.pick=function(d,o,_){var s=[],k=[],M=this.offset;return"number"==typeof d&&d>=0?M=M+this.stride[0]*d|0:(s.push(this.shape[0]),k.push(this.stride[0])),"number"==typeof o&&o>=0?M=M+this.stride[1]*o|0:(s.push(this.shape[1]),k.push(this.stride[1])),"number"==typeof _&&_>=0?M=M+this.stride[2]*_|0:(s.push(this.shape[2]),k.push(this.stride[2])),(0,c[s.length+1])(this.data,s,k,M)},function(d,o,_,s){return new l(d,o[0],o[1],o[2],_[0],_[1],_[2],s)}},4:function(i,c,f){function l(d,o,_,s,k,M,A,E,I,C){this.data=d,this.shape=[o,_,s,k],this.stride=[M,A,E,I],this.offset=0|C}var h=l.prototype;return h.dtype=i,h.dimension=4,Object.defineProperty(h,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(h,"order",{get:f}),h.set=function(d,o,_,s,k){return"generic"===i?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*_+this.stride[3]*s,k):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*_+this.stride[3]*s]=k},h.get=function(d,o,_,s){return"generic"===i?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*_+this.stride[3]*s):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*_+this.stride[3]*s]},h.index=function(d,o,_,s){return this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*_+this.stride[3]*s},h.hi=function(d,o,_,s){return new l(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof _||_<0?this.shape[2]:0|_,"number"!=typeof s||s<0?this.shape[3]:0|s,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},h.lo=function(d,o,_,s){var k=this.offset,M=0,A=this.shape[0],E=this.shape[1],I=this.shape[2],C=this.shape[3],R=this.stride[0],O=this.stride[1],D=this.stride[2],L=this.stride[3];return"number"==typeof d&&d>=0&&(k+=R*(M=0|d),A-=M),"number"==typeof o&&o>=0&&(k+=O*(M=0|o),E-=M),"number"==typeof _&&_>=0&&(k+=D*(M=0|_),I-=M),"number"==typeof s&&s>=0&&(k+=L*(M=0|s),C-=M),new l(this.data,A,E,I,C,R,O,D,L,k)},h.step=function(d,o,_,s){var k=this.shape[0],M=this.shape[1],A=this.shape[2],E=this.shape[3],I=this.stride[0],C=this.stride[1],R=this.stride[2],O=this.stride[3],D=this.offset,L=0,B=Math.ceil;return"number"==typeof d&&((L=0|d)<0?(D+=I*(k-1),k=B(-k/L)):k=B(k/L),I*=L),"number"==typeof o&&((L=0|o)<0?(D+=C*(M-1),M=B(-M/L)):M=B(M/L),C*=L),"number"==typeof _&&((L=0|_)<0?(D+=R*(A-1),A=B(-A/L)):A=B(A/L),R*=L),"number"==typeof s&&((L=0|s)<0?(D+=O*(E-1),E=B(-E/L)):E=B(E/L),O*=L),new l(this.data,k,M,A,E,I,C,R,O,D)},h.transpose=function(d,o,_,s){var k=this.shape,M=this.stride;return new l(this.data,k[d=void 0===d?0:0|d],k[o=void 0===o?1:0|o],k[_=void 0===_?2:0|_],k[s=void 0===s?3:0|s],M[d],M[o],M[_],M[s],this.offset)},h.pick=function(d,o,_,s){var k=[],M=[],A=this.offset;return"number"==typeof d&&d>=0?A=A+this.stride[0]*d|0:(k.push(this.shape[0]),M.push(this.stride[0])),"number"==typeof o&&o>=0?A=A+this.stride[1]*o|0:(k.push(this.shape[1]),M.push(this.stride[1])),"number"==typeof _&&_>=0?A=A+this.stride[2]*_|0:(k.push(this.shape[2]),M.push(this.stride[2])),"number"==typeof s&&s>=0?A=A+this.stride[3]*s|0:(k.push(this.shape[3]),M.push(this.stride[3])),(0,c[k.length+1])(this.data,k,M,A)},function(d,o,_,s){return new l(d,o[0],o[1],o[2],o[3],_[0],_[1],_[2],_[3],s)}},5:function(i,c,f){function l(d,o,_,s,k,M,A,E,I,C,R,O){this.data=d,this.shape=[o,_,s,k,M],this.stride=[A,E,I,C,R],this.offset=0|O}var h=l.prototype;return h.dtype=i,h.dimension=5,Object.defineProperty(h,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(h,"order",{get:f}),h.set=function(d,o,_,s,k,M){return"generic"===i?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*_+this.stride[3]*s+this.stride[4]*k,M):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*_+this.stride[3]*s+this.stride[4]*k]=M},h.get=function(d,o,_,s,k){return"generic"===i?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*_+this.stride[3]*s+this.stride[4]*k):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*_+this.stride[3]*s+this.stride[4]*k]},h.index=function(d,o,_,s,k){return this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*_+this.stride[3]*s+this.stride[4]*k},h.hi=function(d,o,_,s,k){return new l(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof _||_<0?this.shape[2]:0|_,"number"!=typeof s||s<0?this.shape[3]:0|s,"number"!=typeof k||k<0?this.shape[4]:0|k,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},h.lo=function(d,o,_,s,k){var M=this.offset,A=0,E=this.shape[0],I=this.shape[1],C=this.shape[2],R=this.shape[3],O=this.shape[4],D=this.stride[0],L=this.stride[1],B=this.stride[2],j=this.stride[3],W=this.stride[4];return"number"==typeof d&&d>=0&&(M+=D*(A=0|d),E-=A),"number"==typeof o&&o>=0&&(M+=L*(A=0|o),I-=A),"number"==typeof _&&_>=0&&(M+=B*(A=0|_),C-=A),"number"==typeof s&&s>=0&&(M+=j*(A=0|s),R-=A),"number"==typeof k&&k>=0&&(M+=W*(A=0|k),O-=A),new l(this.data,E,I,C,R,O,D,L,B,j,W,M)},h.step=function(d,o,_,s,k){var M=this.shape[0],A=this.shape[1],E=this.shape[2],I=this.shape[3],C=this.shape[4],R=this.stride[0],O=this.stride[1],D=this.stride[2],L=this.stride[3],B=this.stride[4],j=this.offset,W=0,Y=Math.ceil;return"number"==typeof d&&((W=0|d)<0?(j+=R*(M-1),M=Y(-M/W)):M=Y(M/W),R*=W),"number"==typeof o&&((W=0|o)<0?(j+=O*(A-1),A=Y(-A/W)):A=Y(A/W),O*=W),"number"==typeof _&&((W=0|_)<0?(j+=D*(E-1),E=Y(-E/W)):E=Y(E/W),D*=W),"number"==typeof s&&((W=0|s)<0?(j+=L*(I-1),I=Y(-I/W)):I=Y(I/W),L*=W),"number"==typeof k&&((W=0|k)<0?(j+=B*(C-1),C=Y(-C/W)):C=Y(C/W),B*=W),new l(this.data,M,A,E,I,C,R,O,D,L,B,j)},h.transpose=function(d,o,_,s,k){var M=this.shape,A=this.stride;return new l(this.data,M[d=void 0===d?0:0|d],M[o=void 0===o?1:0|o],M[_=void 0===_?2:0|_],M[s=void 0===s?3:0|s],M[k=void 0===k?4:0|k],A[d],A[o],A[_],A[s],A[k],this.offset)},h.pick=function(d,o,_,s,k){var M=[],A=[],E=this.offset;return"number"==typeof d&&d>=0?E=E+this.stride[0]*d|0:(M.push(this.shape[0]),A.push(this.stride[0])),"number"==typeof o&&o>=0?E=E+this.stride[1]*o|0:(M.push(this.shape[1]),A.push(this.stride[1])),"number"==typeof _&&_>=0?E=E+this.stride[2]*_|0:(M.push(this.shape[2]),A.push(this.stride[2])),"number"==typeof s&&s>=0?E=E+this.stride[3]*s|0:(M.push(this.shape[3]),A.push(this.stride[3])),"number"==typeof k&&k>=0?E=E+this.stride[4]*k|0:(M.push(this.shape[4]),A.push(this.stride[4])),(0,c[M.length+1])(this.data,M,A,E)},function(d,o,_,s){return new l(d,o[0],o[1],o[2],o[3],o[4],_[0],_[1],_[2],_[3],_[4],s)}}};function p(i,c){var f=-1===c?"T":String(c),l=t[f];return-1===c?l(i):0===c?l(i,u[i][0]):l(i,u[i],a)}var u={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};w.exports=function(i,c,f,l){if(void 0===i)return(0,u.array[0])([]);"number"==typeof i&&(i=[i]),void 0===c&&(c=[i.length]);var h=c.length;if(void 0===f){f=new Array(h);for(var d=h-1,o=1;d>=0;--d)f[d]=o,o*=c[d]}if(void 0===l)for(l=0,d=0;d<h;++d)f[d]<0&&(l-=(c[d]-1)*f[d]);for(var _=function(k){if(e(k))return"buffer";if(r)switch(Object.prototype.toString.call(k)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(k)?"array":"generic"}(i),s=u[_];s.length<=h+1;)s.push(p(_,s.length-1));return(0,s[h+1])(i,c,f,l)}},{"is-buffer":237}],260:[function(m,w,y){"use strict";var e=m("double-bits"),r=Math.pow(2,-1074);w.exports=function(n,a){if(isNaN(n)||isNaN(a))return NaN;if(n===a)return n;if(0===n)return a<0?-r:r;var t=e.hi(n),p=e.lo(n);return a>n==n>0?p===-1>>>0?(t+=1,p=0):p+=1:0===p?(p=-1>>>0,t-=1):p-=1,e.pack(p,t)}},{"double-bits":64}],261:[function(m,w,y){y.vertexNormals=function(e,r,n){for(var a=r.length,t=new Array(a),p=void 0===n?1e-6:n,u=0;u<a;++u)t[u]=[0,0,0];for(u=0;u<e.length;++u)for(var i=e[u],f=i[i.length-1],l=i[0],h=0;h<i.length;++h){for(var d=r[f],o=r[f=l],_=r[l=i[(h+1)%i.length]],s=new Array(3),k=0,M=new Array(3),A=0,E=0;E<3;++E)s[E]=d[E]-o[E],k+=s[E]*s[E],M[E]=_[E]-o[E],A+=M[E]*M[E];if(k*A>p){var I=t[f],C=1/Math.sqrt(k*A);for(E=0;E<3;++E){var R=(E+1)%3,O=(E+2)%3;I[E]+=C*(M[R]*s[O]-M[O]*s[R])}}}for(u=0;u<a;++u){I=t[u];var D=0;for(E=0;E<3;++E)D+=I[E]*I[E];if(D>p)for(C=1/Math.sqrt(D),E=0;E<3;++E)I[E]*=C;else for(E=0;E<3;++E)I[E]=0}return t},y.faceNormals=function(e,r,n){for(var a=e.length,t=new Array(a),p=void 0===n?1e-6:n,u=0;u<a;++u){for(var i=e[u],c=new Array(3),f=0;f<3;++f)c[f]=r[i[f]];var l=new Array(3),h=new Array(3);for(f=0;f<3;++f)l[f]=c[1][f]-c[0][f],h[f]=c[2][f]-c[0][f];var d=new Array(3),o=0;for(f=0;f<3;++f){var _=(f+1)%3,s=(f+2)%3;d[f]=l[_]*h[s]-l[s]*h[_],o+=d[f]*d[f]}for(o=o>p?1/Math.sqrt(o):0,f=0;f<3;++f)d[f]*=o;t[u]=d}return t}},{}],262:[function(m,w,y){"use strict";w.exports=function(e,r,n,a,t,p,u,i,c,f){var l=r+p+f;if(h>0){var h=Math.sqrt(l+1);e[0]=.5*(u-c)/h,e[1]=.5*(i-a)/h,e[2]=.5*(n-p)/h,e[3]=.5*h}else{var d=Math.max(r,p,f);h=Math.sqrt(2*d-l+1),r>=d?(e[0]=.5*h,e[1]=.5*(t+n)/h,e[2]=.5*(i+a)/h,e[3]=.5*(u-c)/h):p>=d?(e[0]=.5*(n+t)/h,e[1]=.5*h,e[2]=.5*(c+u)/h,e[3]=.5*(i-a)/h):(e[0]=.5*(a+i)/h,e[1]=.5*(u+c)/h,e[2]=.5*h,e[3]=.5*(n-t)/h)}return e}},{}],263:[function(m,w,y){"use strict";w.exports=function(l){var h=(l=l||{}).center||[0,0,0],d=l.rotation||[0,0,0,1],o=l.radius||1;h=[].slice.call(h,0,3),i(d=[].slice.call(d,0,4),d);var _=new c(d,h,Math.log(o));return _.setDistanceLimits(l.zoomMin,l.zoomMax),("eye"in l||"up"in l)&&_.lookAt(0,l.eye,l.center,l.up),_};var e=m("filtered-vector"),r=m("gl-mat4/lookAt"),n=m("gl-mat4/fromQuat"),a=m("gl-mat4/invert"),t=m("./lib/quatFromFrame");function p(l,h,d){return Math.sqrt(Math.pow(l,2)+Math.pow(h,2)+Math.pow(d,2))}function u(l,h,d,o){return Math.sqrt(Math.pow(l,2)+Math.pow(h,2)+Math.pow(d,2)+Math.pow(o,2))}function i(l,h){var d=h[0],o=h[1],_=h[2],s=h[3],k=u(d,o,_,s);k>1e-6?(l[0]=d/k,l[1]=o/k,l[2]=_/k,l[3]=s/k):(l[0]=l[1]=l[2]=0,l[3]=1)}function c(l,h,d){this.radius=e([d]),this.center=e(h),this.rotation=e(l),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var f=c.prototype;f.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},f.recalcMatrix=function(l){this.radius.curve(l),this.center.curve(l),this.rotation.curve(l);var h=this.computedRotation;i(h,h);var d=this.computedMatrix;n(d,h);var o=this.computedCenter,_=this.computedEye,s=this.computedUp,k=Math.exp(this.computedRadius[0]);_[0]=o[0]+k*d[2],_[1]=o[1]+k*d[6],_[2]=o[2]+k*d[10],s[0]=d[1],s[1]=d[5],s[2]=d[9];for(var M=0;M<3;++M){for(var A=0,E=0;E<3;++E)A+=d[M+4*E]*_[E];d[12+M]=-A}},f.getMatrix=function(l,h){this.recalcMatrix(l);var d=this.computedMatrix;if(h){for(var o=0;o<16;++o)h[o]=d[o];return h}return d},f.idle=function(l){this.center.idle(l),this.radius.idle(l),this.rotation.idle(l)},f.flush=function(l){this.center.flush(l),this.radius.flush(l),this.rotation.flush(l)},f.pan=function(l,h,d,o){h=h||0,d=d||0,o=o||0,this.recalcMatrix(l);var _=this.computedMatrix,s=_[1],k=_[5],M=_[9],A=p(s,k,M),E=_[0],I=_[4],C=_[8],R=E*(s/=A)+I*(k/=A)+C*(M/=A),O=p(E-=s*R,I-=k*R,C-=M*R),D=_[2],L=_[6],B=_[10],j=D*s+L*k+B*M,W=D*(E/=O)+L*(I/=O)+B*(C/=O),Y=p(D-=j*s+W*E,L-=j*k+W*I,B-=j*M+W*C);D/=Y,L/=Y,B/=Y,this.center.move(l,E*h+s*d,I*h+k*d,C*h+M*d);var $=Math.exp(this.computedRadius[0]);$=Math.max(1e-4,$+o),this.radius.set(l,Math.log($))},f.rotate=function(l,h,d,o){this.recalcMatrix(l);var _=this.computedMatrix,C=_[2],R=_[6],O=_[10],D=(h=h||0)*_[0]+(d=d||0)*_[1],L=h*_[4]+d*_[5],B=h*_[8]+d*_[9],j=-(R*B-O*L),W=-(O*D-C*B),Y=-(C*L-R*D),Q=Math.sqrt(Math.max(0,1-Math.pow(j,2)-Math.pow(W,2)-Math.pow(Y,2))),ne=u(j,W,Y,Q);ne>1e-6?(j/=ne,W/=ne,Y/=ne,Q/=ne):(j=W=Y=0,Q=1);var X=this.computedRotation,$=X[0],re=X[1],H=X[2],U=X[3],G=$*Q+U*j+re*Y-H*W,ie=re*Q+U*W+H*j-$*Y,q=H*Q+U*Y+$*W-re*j,ee=U*Q-$*j-re*W-H*Y;if(o){j=C,W=R,Y=O;var te=Math.sin(o)/p(j,W,Y);j*=te,W*=te,Y*=te,ee=ee*(Q=Math.cos(h))-(G=G*Q+ee*j+ie*Y-q*W)*j-(ie=ie*Q+ee*W+q*j-G*Y)*W-(q=q*Q+ee*Y+G*W-ie*j)*Y}var se=u(G,ie,q,ee);se>1e-6?(G/=se,ie/=se,q/=se,ee/=se):(G=ie=q=0,ee=1),this.rotation.set(l,G,ie,q,ee)},f.lookAt=function(l,h,d,o){this.recalcMatrix(l);var _=this.computedMatrix;r(_,h=h||this.computedEye,d=d||this.computedCenter,o=o||this.computedUp);var s=this.computedRotation;t(s,_[0],_[1],_[2],_[4],_[5],_[6],_[8],_[9],_[10]),i(s,s),this.rotation.set(l,s[0],s[1],s[2],s[3]);for(var k=0,M=0;M<3;++M)k+=Math.pow(d[M]-h[M],2);this.radius.set(l,.5*Math.log(Math.max(k,1e-6))),this.center.set(l,d[0],d[1],d[2])},f.translate=function(l,h,d,o){this.center.move(l,h||0,d||0,o||0)},f.setMatrix=function(l,h){var d=this.computedRotation;t(d,h[0],h[1],h[2],h[4],h[5],h[6],h[8],h[9],h[10]),i(d,d),this.rotation.set(l,d[0],d[1],d[2],d[3]);var o=this.computedMatrix;a(o,h);var _=o[15];if(Math.abs(_)>1e-6){var s=o[12]/_,k=o[13]/_,M=o[14]/_;this.recalcMatrix(l);var A=Math.exp(this.computedRadius[0]);this.center.set(l,s-o[2]*A,k-o[6]*A,M-o[10]*A),this.radius.idle(l)}else this.center.idle(l),this.radius.idle(l)},f.setDistance=function(l,h){h>0&&this.radius.set(l,Math.log(h))},f.setDistanceLimits=function(l,h){l=l>0?Math.log(l):-1/0,h=h>0?Math.log(h):1/0,h=Math.max(h,l),this.radius.bounds[0][0]=l,this.radius.bounds[1][0]=h},f.getDistanceLimits=function(l){var h=this.radius.bounds;return l?(l[0]=Math.exp(h[0][0]),l[1]=Math.exp(h[1][0]),l):[Math.exp(h[0][0]),Math.exp(h[1][0])]},f.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},f.fromJSON=function(l){var h=this.lastT(),d=l.center;d&&this.center.set(h,d[0],d[1],d[2]);var o=l.rotation;o&&this.rotation.set(h,o[0],o[1],o[2],o[3]);var _=l.distance;_&&_>0&&this.radius.set(h,Math.log(_)),this.setDistanceLimits(l.zoomMin,l.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(m,w,y){"use strict";var e=m("repeat-string");w.exports=function(r,n,a){return e(a=void 0!==a?a+"":" ",n)+r}},{"repeat-string":277}],265:[function(m,w,y){w.exports=function(e,r){r||(r=[0,""]),e=String(e);var n=parseFloat(e,10);return r[0]=n,r[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",r}},{}],266:[function(m,w,y){"use strict";w.exports=function(r,n){for(var a=0|n.length,t=r.length,p=[new Array(a),new Array(a)],u=0;u<a;++u)p[0][u]=[],p[1][u]=[];for(u=0;u<t;++u){var i=r[u];p[0][i[0]].push(i),p[1][i[1]].push(i)}var M,c=[];for(u=0;u<a;++u)p[0][u].length+p[1][u].length===0&&c.push([u]);function f(k,M){var A=p[M][k[M]];A.splice(A.indexOf(k),1)}function l(k,M,A){for(var E,I,C,R=0;R<2;++R)if(p[R][M].length>0){E=p[R][M][0],C=R;break}I=E[1^C];for(var O=0;O<2;++O)for(var D=p[O][M],L=0;L<D.length;++L){var B=D[L],j=B[1^O];e(n[k],n[M],n[I],n[j])>0&&(E=B,I=j,C=O)}return A||E&&f(E,C),I}function h(k,M){var A=p[M][k][0],E=[k];f(A,M);for(var I=A[1^M];;){for(;I!==k;)E.push(I),I=l(E[E.length-2],I,!1);if(p[0][k].length+p[1][k].length===0)break;var C=E[E.length-1],R=k,O=E[1],D=l(C,R,!0);if(e(n[C],n[R],n[O],n[D])<0)break;E.push(k),I=l(C,R)}return E}for(u=0;u<a;++u)for(var o=0;o<2;++o){for(var _=[];p[o][u].length>0;){var s=h(u,o);(M=s)[1]===M[M.length-1]?_.push.apply(_,s):(_.length>0&&c.push(_),_=s)}_.length>0&&c.push(_)}return c};var e=m("compare-angle")},{"compare-angle":54}],267:[function(m,w,y){"use strict";w.exports=function(r,n){for(var a=e(r,n.length),t=new Array(n.length),p=new Array(n.length),u=[],i=0;i<n.length;++i){var c=a[i].length;p[i]=c,t[i]=!0,c<=1&&u.push(i)}for(;u.length>0;){var f=u.pop();t[f]=!1;var l=a[f];for(i=0;i<l.length;++i){var h=l[i];0==--p[h]&&u.push(h)}}var d=new Array(n.length),o=[];for(i=0;i<n.length;++i)t[i]?(d[i]=f=o.length,o.push(n[i])):d[i]=-1;var _=[];for(i=0;i<r.length;++i){var s=r[i];t[s[0]]&&t[s[1]]&&_.push([d[s[0]],d[s[1]]])}return[_,o]};var e=m("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(m,w,y){"use strict";w.exports=function(c,f){for(var l=u(c,f),h=(f=l[1]).length,d=e(c=l[0],f.length),o=0;o<h;++o)if(d[o].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var _=r(c,f),s=(_=_.filter(function(he){for(var xe=he.length,ge=[0],_e=0;_e<xe;++_e){var Ce=f[he[_e]],Le=f[he[(_e+1)%xe]],Ie=a(-Ce[0],Ce[1]),Be=a(-Ce[0],Le[1]),ve=a(Le[0],Ce[1]),Te=a(Le[0],Le[1]);ge=t(ge,t(t(Ie,Be),t(ve,Te)))}return ge[ge.length-1]>0})).length,k=new Array(s),M=new Array(s);for(o=0;o<s;++o){k[o]=o;var A=new Array(s),E=_[o].map(function(he){return f[he]}),I=n([E]),C=0;e:for(var R=0;R<s;++R)if(A[R]=0,o!==R){for(var O=(ue=_[R]).length,D=0;D<O;++D){var L=I(f[ue[D]]);if(0!==L){L<0&&(A[R]=1,C+=1);continue e}}A[R]=1,C+=1}M[o]=[C,o,A]}for(M.sort(function(he,xe){return xe[0]-he[0]}),o=0;o<s;++o){var B=(A=M[o])[1],j=A[2];for(R=0;R<s;++R)j[R]&&(k[R]=B)}var W=function(he){for(var xe=new Array(he),ge=0;ge<he;++ge)xe[ge]=[];return xe}(s);for(o=0;o<s;++o)W[o].push(k[o]),W[k[o]].push(o);var Y={},Q=i(h,!1);for(o=0;o<s;++o)for(O=(ue=_[o]).length,R=0;R<O;++R){var ne=ue[R],X=ue[(R+1)%O],$=Math.min(ne,X)+":"+Math.max(ne,X);if($ in Y){var re=Y[$];W[re].push(o),W[o].push(re),Q[ne]=Q[X]=!0}else Y[$]=o}function H(he){for(var xe=he.length,ge=0;ge<xe;++ge)if(!Q[he[ge]])return!1;return!0}var U=[],G=i(s,-1);for(o=0;o<s;++o)k[o]!==o||H(_[o])?G[o]=-1:(U.push(o),G[o]=0);for(l=[];U.length>0;){var ie=U.pop(),q=W[ie];p(q,function(he,xe){return he-xe});var ee,te=q.length,se=G[ie];if(0===se){var ue=_[ie];ee=[ue]}for(o=0;o<te;++o){var de=q[o];G[de]>=0||(G[de]=1^se,U.push(de),0===se&&(H(ue=_[de])||(ue.reverse(),ee.push(ue))))}0===se&&l.push(ee)}return l};var e=m("edges-to-adjacency-list"),r=m("planar-dual"),n=m("point-in-big-polygon"),a=m("two-product"),t=m("robust-sum"),p=m("uniq"),u=m("./lib/trim-leaves");function i(c,f){for(var l=new Array(c),h=0;h<c;++h)l[h]=f;return l}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(m,w,y){w.exports=function(i){for(var c=i.length,f=[],l=[],h=0;h<c;++h)for(var d=i[h],o=d.length,_=o-1,s=0;s<o;_=s++){var k=d[_],M=d[s];k[0]===M[0]?l.push([k,M]):f.push([k,M])}if(0===f.length)return 0===l.length?u:(A=p(l),function(C){return A(C[0],C[1])?0:1});var A,C,R,E=r(f),I=(C=E.slabs,R=E.coordinates,function(O){var D=a.le(R,O[0]);if(D<0)return 1;var L=C[D];if(!L){if(!(D>0&&R[D]===O[0]))return 1;L=C[D-1]}for(var B=1;L;){var j=L.key,W=e(O,j[0],j[1]);if(j[0][0]<j[1][0])if(W<0)L=L.left;else{if(!(W>0))return 0;B=-1,L=L.right}else if(W>0)L=L.left;else{if(!(W<0))return 0;B=1,L=L.right}}return B});return 0===l.length?I:function(C,R){return function(O){return C(O[0],O[1])?0:R(O)}}(p(l),I)};var e=m("robust-orientation")[3],r=m("slab-decomposition"),n=m("interval-tree-1d"),a=m("binary-search-bounds");function t(){return!0}function p(i){for(var c={},f=0;f<i.length;++f){var l=i[f],h=l[0][0],d=l[0][1],o=l[1][1],_=[Math.min(d,o),Math.max(d,o)];h in c?c[h].push(_):c[h]=[_]}var A,s={},k=Object.keys(c);for(f=0;f<k.length;++f)s[k[f]]=n(c[k[f]]);return A=s,function(E,I){var C=A[E];return!!C&&!!C.queryPoint(I,t)}}function u(i){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(m,w,y){"use strict";var e=new Float64Array(4),r=new Float64Array(4),n=new Float64Array(4);w.exports=function(a,t,p,u,i){e.length<u.length&&(e=new Float64Array(u.length),r=new Float64Array(u.length),n=new Float64Array(u.length));for(var c=0;c<u.length;++c)e[c]=a[c]-u[c],r[c]=t[c]-a[c],n[c]=p[c]-a[c];var f=0,l=0,h=0,d=0,o=0,_=0;for(c=0;c<u.length;++c){var s=r[c],k=n[c],M=e[c];f+=s*s,l+=s*k,h+=k*k,d+=M*s,o+=M*k,_+=M*M}var A,E,I,C,R,O=Math.abs(f*h-l*l),D=l*o-h*d,L=l*d-f*o;if(D+L<=O)if(D<0)L<0&&d<0?(L=0,-d>=f?(D=1,A=f+2*d+_):A=d*(D=-d/f)+_):(D=0,o>=0?(L=0,A=_):-o>=h?(L=1,A=h+2*o+_):A=o*(L=-o/h)+_);else if(L<0)L=0,d>=0?(D=0,A=_):-d>=f?(D=1,A=f+2*d+_):A=d*(D=-d/f)+_;else{var B=1/O;A=(D*=B)*(f*D+l*(L*=B)+2*d)+L*(l*D+h*L+2*o)+_}else D<0?(I=h+o)>(E=l+d)?(C=I-E)>=(R=f-2*l+h)?(D=1,L=0,A=f+2*d+_):A=(D=C/R)*(f*D+l*(L=1-D)+2*d)+L*(l*D+h*L+2*o)+_:(D=0,I<=0?(L=1,A=h+2*o+_):o>=0?(L=0,A=_):A=o*(L=-o/h)+_):L<0?(I=f+d)>(E=l+o)?(C=I-E)>=(R=f-2*l+h)?(L=1,D=0,A=h+2*o+_):A=(D=1-(L=C/R))*(f*D+l*L+2*d)+L*(l*D+h*L+2*o)+_:(L=0,I<=0?(D=1,A=f+2*d+_):d>=0?(D=0,A=_):A=d*(D=-d/f)+_):(C=h+o-l-d)<=0?(D=0,L=1,A=h+2*o+_):C>=(R=f-2*l+h)?(D=1,L=0,A=f+2*d+_):A=(D=C/R)*(f*D+l*(L=1-D)+2*d)+L*(l*D+h*L+2*o)+_;var j=1-D-L;for(c=0;c<u.length;++c)i[c]=j*a[c]+D*t[c]+L*p[c];return A<0?0:A}},{}],271:[function(m,w,y){w.exports=m("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(m,w,y){"use strict";var e=m("big-rat/add");w.exports=function(r,n){for(var a=r.length,t=new Array(a),p=0;p<a;++p)t[p]=e(r[p],n[p]);return t}},{"big-rat/add":15}],273:[function(m,w,y){"use strict";w.exports=function(r){for(var n=new Array(r.length),a=0;a<r.length;++a)n[a]=e(r[a]);return n};var e=m("big-rat")},{"big-rat":18}],274:[function(m,w,y){"use strict";var e=m("big-rat"),r=m("big-rat/mul");w.exports=function(n,a){for(var t=e(a),p=n.length,u=new Array(p),i=0;i<p;++i)u[i]=r(n[i],t);return u}},{"big-rat":18,"big-rat/mul":27}],275:[function(m,w,y){"use strict";var e=m("big-rat/sub");w.exports=function(r,n){for(var a=r.length,t=new Array(a),p=0;p<a;++p)t[p]=e(r[p],n[p]);return t}},{"big-rat/sub":29}],276:[function(m,w,y){"use strict";var e=m("compare-cell"),r=m("compare-oriented-cell"),n=m("cell-orientation");w.exports=function(a){a.sort(r);for(var t=a.length,p=0,u=0;u<t;++u){var i=a[u],c=n(i);if(0!==c){if(p>0){var f=a[p-1];if(0===e(i,f)&&n(f)!==c){p-=1;continue}}a[p++]=i}}return a.length=p,a}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(m,w,y){"use strict";var e,r="";w.exports=function(n,a){if("string"!=typeof n)throw new TypeError("expected a string");if(1===a)return n;if(2===a)return n+n;var t=n.length*a;if(e!==n||void 0===e)e=n,r="";else if(r.length>=t)return r.substr(0,t);for(;t>r.length&&a>1;)1&a&&(r+=n),a>>=1,n+=n;return r=(r+=n).substr(0,t)}},{}],278:[function(m,w,y){(function(e){(function(){w.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==g?g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],279:[function(m,w,y){"use strict";w.exports=function(e){for(var r=e.length,n=e[e.length-1],a=r,t=r-2;t>=0;--t){var p=n,u=e[t];(c=u-((n=p+u)-p))&&(e[--a]=n,n=c)}var i=0;for(t=a;t<r;++t){var c;(c=(u=n)-((n=(p=e[t])+u)-p))&&(e[i++]=c)}return e[i++]=n,e.length=i,e}},{}],280:[function(m,w,y){"use strict";var e=m("two-product"),r=m("robust-sum"),n=m("robust-scale"),a=m("robust-compress");function t(h,d,o,_){return function(s){return _(h(o(s[0][0],s[1][1]),o(-s[0][1],s[1][0])))}}function p(h,d,o,_){return function(s){return _(h(d(h(o(s[1][1],s[2][2]),o(-s[1][2],s[2][1])),s[0][0]),h(d(h(o(s[1][0],s[2][2]),o(-s[1][2],s[2][0])),-s[0][1]),d(h(o(s[1][0],s[2][1]),o(-s[1][1],s[2][0])),s[0][2]))))}}function u(h,d,o,_){return function(s){return _(h(h(d(h(d(h(o(s[2][2],s[3][3]),o(-s[2][3],s[3][2])),s[1][1]),h(d(h(o(s[2][1],s[3][3]),o(-s[2][3],s[3][1])),-s[1][2]),d(h(o(s[2][1],s[3][2]),o(-s[2][2],s[3][1])),s[1][3]))),s[0][0]),d(h(d(h(o(s[2][2],s[3][3]),o(-s[2][3],s[3][2])),s[1][0]),h(d(h(o(s[2][0],s[3][3]),o(-s[2][3],s[3][0])),-s[1][2]),d(h(o(s[2][0],s[3][2]),o(-s[2][2],s[3][0])),s[1][3]))),-s[0][1])),h(d(h(d(h(o(s[2][1],s[3][3]),o(-s[2][3],s[3][1])),s[1][0]),h(d(h(o(s[2][0],s[3][3]),o(-s[2][3],s[3][0])),-s[1][1]),d(h(o(s[2][0],s[3][1]),o(-s[2][1],s[3][0])),s[1][3]))),s[0][2]),d(h(d(h(o(s[2][1],s[3][2]),o(-s[2][2],s[3][1])),s[1][0]),h(d(h(o(s[2][0],s[3][2]),o(-s[2][2],s[3][0])),-s[1][1]),d(h(o(s[2][0],s[3][1]),o(-s[2][1],s[3][0])),s[1][2]))),-s[0][3]))))}}function i(h,d,o,_){return function(s){return _(h(h(d(h(h(d(h(d(h(o(s[3][3],s[4][4]),o(-s[3][4],s[4][3])),s[2][2]),h(d(h(o(s[3][2],s[4][4]),o(-s[3][4],s[4][2])),-s[2][3]),d(h(o(s[3][2],s[4][3]),o(-s[3][3],s[4][2])),s[2][4]))),s[1][1]),d(h(d(h(o(s[3][3],s[4][4]),o(-s[3][4],s[4][3])),s[2][1]),h(d(h(o(s[3][1],s[4][4]),o(-s[3][4],s[4][1])),-s[2][3]),d(h(o(s[3][1],s[4][3]),o(-s[3][3],s[4][1])),s[2][4]))),-s[1][2])),h(d(h(d(h(o(s[3][2],s[4][4]),o(-s[3][4],s[4][2])),s[2][1]),h(d(h(o(s[3][1],s[4][4]),o(-s[3][4],s[4][1])),-s[2][2]),d(h(o(s[3][1],s[4][2]),o(-s[3][2],s[4][1])),s[2][4]))),s[1][3]),d(h(d(h(o(s[3][2],s[4][3]),o(-s[3][3],s[4][2])),s[2][1]),h(d(h(o(s[3][1],s[4][3]),o(-s[3][3],s[4][1])),-s[2][2]),d(h(o(s[3][1],s[4][2]),o(-s[3][2],s[4][1])),s[2][3]))),-s[1][4]))),s[0][0]),d(h(h(d(h(d(h(o(s[3][3],s[4][4]),o(-s[3][4],s[4][3])),s[2][2]),h(d(h(o(s[3][2],s[4][4]),o(-s[3][4],s[4][2])),-s[2][3]),d(h(o(s[3][2],s[4][3]),o(-s[3][3],s[4][2])),s[2][4]))),s[1][0]),d(h(d(h(o(s[3][3],s[4][4]),o(-s[3][4],s[4][3])),s[2][0]),h(d(h(o(s[3][0],s[4][4]),o(-s[3][4],s[4][0])),-s[2][3]),d(h(o(s[3][0],s[4][3]),o(-s[3][3],s[4][0])),s[2][4]))),-s[1][2])),h(d(h(d(h(o(s[3][2],s[4][4]),o(-s[3][4],s[4][2])),s[2][0]),h(d(h(o(s[3][0],s[4][4]),o(-s[3][4],s[4][0])),-s[2][2]),d(h(o(s[3][0],s[4][2]),o(-s[3][2],s[4][0])),s[2][4]))),s[1][3]),d(h(d(h(o(s[3][2],s[4][3]),o(-s[3][3],s[4][2])),s[2][0]),h(d(h(o(s[3][0],s[4][3]),o(-s[3][3],s[4][0])),-s[2][2]),d(h(o(s[3][0],s[4][2]),o(-s[3][2],s[4][0])),s[2][3]))),-s[1][4]))),-s[0][1])),h(d(h(h(d(h(d(h(o(s[3][3],s[4][4]),o(-s[3][4],s[4][3])),s[2][1]),h(d(h(o(s[3][1],s[4][4]),o(-s[3][4],s[4][1])),-s[2][3]),d(h(o(s[3][1],s[4][3]),o(-s[3][3],s[4][1])),s[2][4]))),s[1][0]),d(h(d(h(o(s[3][3],s[4][4]),o(-s[3][4],s[4][3])),s[2][0]),h(d(h(o(s[3][0],s[4][4]),o(-s[3][4],s[4][0])),-s[2][3]),d(h(o(s[3][0],s[4][3]),o(-s[3][3],s[4][0])),s[2][4]))),-s[1][1])),h(d(h(d(h(o(s[3][1],s[4][4]),o(-s[3][4],s[4][1])),s[2][0]),h(d(h(o(s[3][0],s[4][4]),o(-s[3][4],s[4][0])),-s[2][1]),d(h(o(s[3][0],s[4][1]),o(-s[3][1],s[4][0])),s[2][4]))),s[1][3]),d(h(d(h(o(s[3][1],s[4][3]),o(-s[3][3],s[4][1])),s[2][0]),h(d(h(o(s[3][0],s[4][3]),o(-s[3][3],s[4][0])),-s[2][1]),d(h(o(s[3][0],s[4][1]),o(-s[3][1],s[4][0])),s[2][3]))),-s[1][4]))),s[0][2]),h(d(h(h(d(h(d(h(o(s[3][2],s[4][4]),o(-s[3][4],s[4][2])),s[2][1]),h(d(h(o(s[3][1],s[4][4]),o(-s[3][4],s[4][1])),-s[2][2]),d(h(o(s[3][1],s[4][2]),o(-s[3][2],s[4][1])),s[2][4]))),s[1][0]),d(h(d(h(o(s[3][2],s[4][4]),o(-s[3][4],s[4][2])),s[2][0]),h(d(h(o(s[3][0],s[4][4]),o(-s[3][4],s[4][0])),-s[2][2]),d(h(o(s[3][0],s[4][2]),o(-s[3][2],s[4][0])),s[2][4]))),-s[1][1])),h(d(h(d(h(o(s[3][1],s[4][4]),o(-s[3][4],s[4][1])),s[2][0]),h(d(h(o(s[3][0],s[4][4]),o(-s[3][4],s[4][0])),-s[2][1]),d(h(o(s[3][0],s[4][1]),o(-s[3][1],s[4][0])),s[2][4]))),s[1][2]),d(h(d(h(o(s[3][1],s[4][2]),o(-s[3][2],s[4][1])),s[2][0]),h(d(h(o(s[3][0],s[4][2]),o(-s[3][2],s[4][0])),-s[2][1]),d(h(o(s[3][0],s[4][1]),o(-s[3][1],s[4][0])),s[2][2]))),-s[1][4]))),-s[0][3]),d(h(h(d(h(d(h(o(s[3][2],s[4][3]),o(-s[3][3],s[4][2])),s[2][1]),h(d(h(o(s[3][1],s[4][3]),o(-s[3][3],s[4][1])),-s[2][2]),d(h(o(s[3][1],s[4][2]),o(-s[3][2],s[4][1])),s[2][3]))),s[1][0]),d(h(d(h(o(s[3][2],s[4][3]),o(-s[3][3],s[4][2])),s[2][0]),h(d(h(o(s[3][0],s[4][3]),o(-s[3][3],s[4][0])),-s[2][2]),d(h(o(s[3][0],s[4][2]),o(-s[3][2],s[4][0])),s[2][3]))),-s[1][1])),h(d(h(d(h(o(s[3][1],s[4][3]),o(-s[3][3],s[4][1])),s[2][0]),h(d(h(o(s[3][0],s[4][3]),o(-s[3][3],s[4][0])),-s[2][1]),d(h(o(s[3][0],s[4][1]),o(-s[3][1],s[4][0])),s[2][3]))),s[1][2]),d(h(d(h(o(s[3][1],s[4][2]),o(-s[3][2],s[4][1])),s[2][0]),h(d(h(o(s[3][0],s[4][2]),o(-s[3][2],s[4][0])),-s[2][1]),d(h(o(s[3][0],s[4][1]),o(-s[3][1],s[4][0])),s[2][2]))),-s[1][3]))),s[0][4])))))}}function c(h){return(2===h?t:3===h?p:4===h?u:5===h?i:void 0)(r,n,e,a)}var f=[function(){return[0]},function(h){return[h[0][0]]}];function l(h,d,o,_,s,k,M,A){return function(E){switch(E.length){case 0:return h(E);case 1:return d(E);case 2:return o(E);case 3:return _(E);case 4:return s(E);case 5:return k(E)}var I=M[E.length];return I||(I=M[E.length]=A(E.length)),I(E)}}!function(){for(;f.length<6;)f.push(c(f.length));w.exports=l.apply(void 0,f.concat([f,c]));for(var h=0;h<f.length;++h)w.exports[h]=f[h]}()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(m,w,y){"use strict";var e=m("two-product"),r=m("robust-sum");w.exports=function(n,a){for(var t=e(n[0],a[0]),p=1;p<n.length;++p)t=r(t,e(n[p],a[p]));return t}},{"robust-sum":289,"two-product":306}],282:[function(m,w,y){"use strict";var e=m("two-product"),r=m("robust-sum"),n=m("robust-subtract"),a=m("robust-scale");function t(d){return(3===d?p:4===d?u:5===d?i:c)(r,n,e,a)}function p(d,o,_,s){return function(k,M,A){var E=_(k[0],k[0]),I=s(E,M[0]),C=s(E,A[0]),R=_(M[0],M[0]),O=s(R,k[0]),D=s(R,A[0]),L=_(A[0],A[0]),B=s(L,k[0]),j=s(L,M[0]),W=d(o(j,D),o(O,I)),Y=o(B,C),Q=o(W,Y);return Q[Q.length-1]}}function u(d,o,_,s){return function(k,M,A,E){var I=d(_(k[0],k[0]),_(k[1],k[1])),C=s(I,M[0]),R=s(I,A[0]),O=s(I,E[0]),D=d(_(M[0],M[0]),_(M[1],M[1])),L=s(D,k[0]),B=s(D,A[0]),j=s(D,E[0]),W=d(_(A[0],A[0]),_(A[1],A[1])),Y=s(W,k[0]),Q=s(W,M[0]),ne=s(W,E[0]),X=d(_(E[0],E[0]),_(E[1],E[1])),$=s(X,k[0]),re=s(X,M[0]),H=s(X,A[0]),U=d(d(s(o(H,ne),M[1]),d(s(o(re,j),-A[1]),s(o(Q,B),E[1]))),d(s(o(re,j),k[1]),d(s(o($,O),-M[1]),s(o(L,C),E[1])))),G=d(d(s(o(H,ne),k[1]),d(s(o($,O),-A[1]),s(o(Y,R),E[1]))),d(s(o(Q,B),k[1]),d(s(o(Y,R),-M[1]),s(o(L,C),A[1])))),ie=o(U,G);return ie[ie.length-1]}}function i(d,o,_,s){return function(k,M,A,E,I){var C=d(_(k[0],k[0]),d(_(k[1],k[1]),_(k[2],k[2]))),R=s(C,M[0]),O=s(C,A[0]),D=s(C,E[0]),L=s(C,I[0]),B=d(_(M[0],M[0]),d(_(M[1],M[1]),_(M[2],M[2]))),j=s(B,k[0]),W=s(B,A[0]),Y=s(B,E[0]),Q=s(B,I[0]),ne=d(_(A[0],A[0]),d(_(A[1],A[1]),_(A[2],A[2]))),X=s(ne,k[0]),$=s(ne,M[0]),re=s(ne,E[0]),H=s(ne,I[0]),U=d(_(E[0],E[0]),d(_(E[1],E[1]),_(E[2],E[2]))),G=s(U,k[0]),ie=s(U,M[0]),q=s(U,A[0]),ee=s(U,I[0]),te=d(_(I[0],I[0]),d(_(I[1],I[1]),_(I[2],I[2]))),se=s(te,k[0]),ue=s(te,M[0]),de=s(te,A[0]),he=s(te,E[0]),xe=d(d(d(s(d(s(o(he,ee),A[1]),d(s(o(de,H),-E[1]),s(o(q,re),I[1]))),M[2]),d(s(d(s(o(he,ee),M[1]),d(s(o(ue,Q),-E[1]),s(o(ie,Y),I[1]))),-A[2]),s(d(s(o(de,H),M[1]),d(s(o(ue,Q),-A[1]),s(o($,W),I[1]))),E[2]))),d(s(d(s(o(q,re),M[1]),d(s(o(ie,Y),-A[1]),s(o($,W),E[1]))),-I[2]),d(s(d(s(o(he,ee),M[1]),d(s(o(ue,Q),-E[1]),s(o(ie,Y),I[1]))),k[2]),s(d(s(o(he,ee),k[1]),d(s(o(se,L),-E[1]),s(o(G,D),I[1]))),-M[2])))),d(d(s(d(s(o(ue,Q),k[1]),d(s(o(se,L),-M[1]),s(o(j,R),I[1]))),E[2]),d(s(d(s(o(ie,Y),k[1]),d(s(o(G,D),-M[1]),s(o(j,R),E[1]))),-I[2]),s(d(s(o(q,re),M[1]),d(s(o(ie,Y),-A[1]),s(o($,W),E[1]))),k[2]))),d(s(d(s(o(q,re),k[1]),d(s(o(G,D),-A[1]),s(o(X,O),E[1]))),-M[2]),d(s(d(s(o(ie,Y),k[1]),d(s(o(G,D),-M[1]),s(o(j,R),E[1]))),A[2]),s(d(s(o($,W),k[1]),d(s(o(X,O),-M[1]),s(o(j,R),A[1]))),-E[2]))))),ge=d(d(d(s(d(s(o(he,ee),A[1]),d(s(o(de,H),-E[1]),s(o(q,re),I[1]))),k[2]),s(d(s(o(he,ee),k[1]),d(s(o(se,L),-E[1]),s(o(G,D),I[1]))),-A[2])),d(s(d(s(o(de,H),k[1]),d(s(o(se,L),-A[1]),s(o(X,O),I[1]))),E[2]),s(d(s(o(q,re),k[1]),d(s(o(G,D),-A[1]),s(o(X,O),E[1]))),-I[2]))),d(d(s(d(s(o(de,H),M[1]),d(s(o(ue,Q),-A[1]),s(o($,W),I[1]))),k[2]),s(d(s(o(de,H),k[1]),d(s(o(se,L),-A[1]),s(o(X,O),I[1]))),-M[2])),d(s(d(s(o(ue,Q),k[1]),d(s(o(se,L),-M[1]),s(o(j,R),I[1]))),A[2]),s(d(s(o($,W),k[1]),d(s(o(X,O),-M[1]),s(o(j,R),A[1]))),-I[2])))),_e=o(xe,ge);return _e[_e.length-1]}}function c(d,o,_,s){return function(k,M,A,E,I,C){var R=d(d(_(k[0],k[0]),_(k[1],k[1])),d(_(k[2],k[2]),_(k[3],k[3]))),O=s(R,M[0]),D=s(R,A[0]),L=s(R,E[0]),B=s(R,I[0]),j=s(R,C[0]),W=d(d(_(M[0],M[0]),_(M[1],M[1])),d(_(M[2],M[2]),_(M[3],M[3]))),Y=s(W,k[0]),Q=s(W,A[0]),ne=s(W,E[0]),X=s(W,I[0]),$=s(W,C[0]),re=d(d(_(A[0],A[0]),_(A[1],A[1])),d(_(A[2],A[2]),_(A[3],A[3]))),H=s(re,k[0]),U=s(re,M[0]),G=s(re,E[0]),ie=s(re,I[0]),q=s(re,C[0]),ee=d(d(_(E[0],E[0]),_(E[1],E[1])),d(_(E[2],E[2]),_(E[3],E[3]))),te=s(ee,k[0]),se=s(ee,M[0]),ue=s(ee,A[0]),de=s(ee,I[0]),he=s(ee,C[0]),xe=d(d(_(I[0],I[0]),_(I[1],I[1])),d(_(I[2],I[2]),_(I[3],I[3]))),ge=s(xe,k[0]),_e=s(xe,M[0]),Ce=s(xe,A[0]),Le=s(xe,E[0]),Ie=s(xe,C[0]),Be=d(d(_(C[0],C[0]),_(C[1],C[1])),d(_(C[2],C[2]),_(C[3],C[3]))),ve=s(Be,k[0]),Te=s(Be,M[0]),Pe=s(Be,A[0]),De=s(Be,E[0]),Fe=s(Be,I[0]),Ue=d(d(d(s(d(d(s(d(s(o(Fe,Ie),E[1]),d(s(o(De,he),-I[1]),s(o(Le,de),C[1]))),A[2]),s(d(s(o(Fe,Ie),A[1]),d(s(o(Pe,q),-I[1]),s(o(Ce,ie),C[1]))),-E[2])),d(s(d(s(o(De,he),A[1]),d(s(o(Pe,q),-E[1]),s(o(ue,G),C[1]))),I[2]),s(d(s(o(Le,de),A[1]),d(s(o(Ce,ie),-E[1]),s(o(ue,G),I[1]))),-C[2]))),M[3]),d(s(d(d(s(d(s(o(Fe,Ie),E[1]),d(s(o(De,he),-I[1]),s(o(Le,de),C[1]))),M[2]),s(d(s(o(Fe,Ie),M[1]),d(s(o(Te,$),-I[1]),s(o(_e,X),C[1]))),-E[2])),d(s(d(s(o(De,he),M[1]),d(s(o(Te,$),-E[1]),s(o(se,ne),C[1]))),I[2]),s(d(s(o(Le,de),M[1]),d(s(o(_e,X),-E[1]),s(o(se,ne),I[1]))),-C[2]))),-A[3]),s(d(d(s(d(s(o(Fe,Ie),A[1]),d(s(o(Pe,q),-I[1]),s(o(Ce,ie),C[1]))),M[2]),s(d(s(o(Fe,Ie),M[1]),d(s(o(Te,$),-I[1]),s(o(_e,X),C[1]))),-A[2])),d(s(d(s(o(Pe,q),M[1]),d(s(o(Te,$),-A[1]),s(o(U,Q),C[1]))),I[2]),s(d(s(o(Ce,ie),M[1]),d(s(o(_e,X),-A[1]),s(o(U,Q),I[1]))),-C[2]))),E[3]))),d(d(s(d(d(s(d(s(o(De,he),A[1]),d(s(o(Pe,q),-E[1]),s(o(ue,G),C[1]))),M[2]),s(d(s(o(De,he),M[1]),d(s(o(Te,$),-E[1]),s(o(se,ne),C[1]))),-A[2])),d(s(d(s(o(Pe,q),M[1]),d(s(o(Te,$),-A[1]),s(o(U,Q),C[1]))),E[2]),s(d(s(o(ue,G),M[1]),d(s(o(se,ne),-A[1]),s(o(U,Q),E[1]))),-C[2]))),-I[3]),s(d(d(s(d(s(o(Le,de),A[1]),d(s(o(Ce,ie),-E[1]),s(o(ue,G),I[1]))),M[2]),s(d(s(o(Le,de),M[1]),d(s(o(_e,X),-E[1]),s(o(se,ne),I[1]))),-A[2])),d(s(d(s(o(Ce,ie),M[1]),d(s(o(_e,X),-A[1]),s(o(U,Q),I[1]))),E[2]),s(d(s(o(ue,G),M[1]),d(s(o(se,ne),-A[1]),s(o(U,Q),E[1]))),-I[2]))),C[3])),d(s(d(d(s(d(s(o(Fe,Ie),E[1]),d(s(o(De,he),-I[1]),s(o(Le,de),C[1]))),M[2]),s(d(s(o(Fe,Ie),M[1]),d(s(o(Te,$),-I[1]),s(o(_e,X),C[1]))),-E[2])),d(s(d(s(o(De,he),M[1]),d(s(o(Te,$),-E[1]),s(o(se,ne),C[1]))),I[2]),s(d(s(o(Le,de),M[1]),d(s(o(_e,X),-E[1]),s(o(se,ne),I[1]))),-C[2]))),k[3]),s(d(d(s(d(s(o(Fe,Ie),E[1]),d(s(o(De,he),-I[1]),s(o(Le,de),C[1]))),k[2]),s(d(s(o(Fe,Ie),k[1]),d(s(o(ve,j),-I[1]),s(o(ge,B),C[1]))),-E[2])),d(s(d(s(o(De,he),k[1]),d(s(o(ve,j),-E[1]),s(o(te,L),C[1]))),I[2]),s(d(s(o(Le,de),k[1]),d(s(o(ge,B),-E[1]),s(o(te,L),I[1]))),-C[2]))),-M[3])))),d(d(d(s(d(d(s(d(s(o(Fe,Ie),M[1]),d(s(o(Te,$),-I[1]),s(o(_e,X),C[1]))),k[2]),s(d(s(o(Fe,Ie),k[1]),d(s(o(ve,j),-I[1]),s(o(ge,B),C[1]))),-M[2])),d(s(d(s(o(Te,$),k[1]),d(s(o(ve,j),-M[1]),s(o(Y,O),C[1]))),I[2]),s(d(s(o(_e,X),k[1]),d(s(o(ge,B),-M[1]),s(o(Y,O),I[1]))),-C[2]))),E[3]),s(d(d(s(d(s(o(De,he),M[1]),d(s(o(Te,$),-E[1]),s(o(se,ne),C[1]))),k[2]),s(d(s(o(De,he),k[1]),d(s(o(ve,j),-E[1]),s(o(te,L),C[1]))),-M[2])),d(s(d(s(o(Te,$),k[1]),d(s(o(ve,j),-M[1]),s(o(Y,O),C[1]))),E[2]),s(d(s(o(se,ne),k[1]),d(s(o(te,L),-M[1]),s(o(Y,O),E[1]))),-C[2]))),-I[3])),d(s(d(d(s(d(s(o(Le,de),M[1]),d(s(o(_e,X),-E[1]),s(o(se,ne),I[1]))),k[2]),s(d(s(o(Le,de),k[1]),d(s(o(ge,B),-E[1]),s(o(te,L),I[1]))),-M[2])),d(s(d(s(o(_e,X),k[1]),d(s(o(ge,B),-M[1]),s(o(Y,O),I[1]))),E[2]),s(d(s(o(se,ne),k[1]),d(s(o(te,L),-M[1]),s(o(Y,O),E[1]))),-I[2]))),C[3]),s(d(d(s(d(s(o(De,he),A[1]),d(s(o(Pe,q),-E[1]),s(o(ue,G),C[1]))),M[2]),s(d(s(o(De,he),M[1]),d(s(o(Te,$),-E[1]),s(o(se,ne),C[1]))),-A[2])),d(s(d(s(o(Pe,q),M[1]),d(s(o(Te,$),-A[1]),s(o(U,Q),C[1]))),E[2]),s(d(s(o(ue,G),M[1]),d(s(o(se,ne),-A[1]),s(o(U,Q),E[1]))),-C[2]))),k[3]))),d(d(s(d(d(s(d(s(o(De,he),A[1]),d(s(o(Pe,q),-E[1]),s(o(ue,G),C[1]))),k[2]),s(d(s(o(De,he),k[1]),d(s(o(ve,j),-E[1]),s(o(te,L),C[1]))),-A[2])),d(s(d(s(o(Pe,q),k[1]),d(s(o(ve,j),-A[1]),s(o(H,D),C[1]))),E[2]),s(d(s(o(ue,G),k[1]),d(s(o(te,L),-A[1]),s(o(H,D),E[1]))),-C[2]))),-M[3]),s(d(d(s(d(s(o(De,he),M[1]),d(s(o(Te,$),-E[1]),s(o(se,ne),C[1]))),k[2]),s(d(s(o(De,he),k[1]),d(s(o(ve,j),-E[1]),s(o(te,L),C[1]))),-M[2])),d(s(d(s(o(Te,$),k[1]),d(s(o(ve,j),-M[1]),s(o(Y,O),C[1]))),E[2]),s(d(s(o(se,ne),k[1]),d(s(o(te,L),-M[1]),s(o(Y,O),E[1]))),-C[2]))),A[3])),d(s(d(d(s(d(s(o(Pe,q),M[1]),d(s(o(Te,$),-A[1]),s(o(U,Q),C[1]))),k[2]),s(d(s(o(Pe,q),k[1]),d(s(o(ve,j),-A[1]),s(o(H,D),C[1]))),-M[2])),d(s(d(s(o(Te,$),k[1]),d(s(o(ve,j),-M[1]),s(o(Y,O),C[1]))),A[2]),s(d(s(o(U,Q),k[1]),d(s(o(H,D),-M[1]),s(o(Y,O),A[1]))),-C[2]))),-E[3]),s(d(d(s(d(s(o(ue,G),M[1]),d(s(o(se,ne),-A[1]),s(o(U,Q),E[1]))),k[2]),s(d(s(o(ue,G),k[1]),d(s(o(te,L),-A[1]),s(o(H,D),E[1]))),-M[2])),d(s(d(s(o(se,ne),k[1]),d(s(o(te,L),-M[1]),s(o(Y,O),E[1]))),A[2]),s(d(s(o(U,Q),k[1]),d(s(o(H,D),-M[1]),s(o(Y,O),A[1]))),-E[2]))),C[3]))))),He=d(d(d(s(d(d(s(d(s(o(Fe,Ie),E[1]),d(s(o(De,he),-I[1]),s(o(Le,de),C[1]))),A[2]),s(d(s(o(Fe,Ie),A[1]),d(s(o(Pe,q),-I[1]),s(o(Ce,ie),C[1]))),-E[2])),d(s(d(s(o(De,he),A[1]),d(s(o(Pe,q),-E[1]),s(o(ue,G),C[1]))),I[2]),s(d(s(o(Le,de),A[1]),d(s(o(Ce,ie),-E[1]),s(o(ue,G),I[1]))),-C[2]))),k[3]),d(s(d(d(s(d(s(o(Fe,Ie),E[1]),d(s(o(De,he),-I[1]),s(o(Le,de),C[1]))),k[2]),s(d(s(o(Fe,Ie),k[1]),d(s(o(ve,j),-I[1]),s(o(ge,B),C[1]))),-E[2])),d(s(d(s(o(De,he),k[1]),d(s(o(ve,j),-E[1]),s(o(te,L),C[1]))),I[2]),s(d(s(o(Le,de),k[1]),d(s(o(ge,B),-E[1]),s(o(te,L),I[1]))),-C[2]))),-A[3]),s(d(d(s(d(s(o(Fe,Ie),A[1]),d(s(o(Pe,q),-I[1]),s(o(Ce,ie),C[1]))),k[2]),s(d(s(o(Fe,Ie),k[1]),d(s(o(ve,j),-I[1]),s(o(ge,B),C[1]))),-A[2])),d(s(d(s(o(Pe,q),k[1]),d(s(o(ve,j),-A[1]),s(o(H,D),C[1]))),I[2]),s(d(s(o(Ce,ie),k[1]),d(s(o(ge,B),-A[1]),s(o(H,D),I[1]))),-C[2]))),E[3]))),d(d(s(d(d(s(d(s(o(De,he),A[1]),d(s(o(Pe,q),-E[1]),s(o(ue,G),C[1]))),k[2]),s(d(s(o(De,he),k[1]),d(s(o(ve,j),-E[1]),s(o(te,L),C[1]))),-A[2])),d(s(d(s(o(Pe,q),k[1]),d(s(o(ve,j),-A[1]),s(o(H,D),C[1]))),E[2]),s(d(s(o(ue,G),k[1]),d(s(o(te,L),-A[1]),s(o(H,D),E[1]))),-C[2]))),-I[3]),s(d(d(s(d(s(o(Le,de),A[1]),d(s(o(Ce,ie),-E[1]),s(o(ue,G),I[1]))),k[2]),s(d(s(o(Le,de),k[1]),d(s(o(ge,B),-E[1]),s(o(te,L),I[1]))),-A[2])),d(s(d(s(o(Ce,ie),k[1]),d(s(o(ge,B),-A[1]),s(o(H,D),I[1]))),E[2]),s(d(s(o(ue,G),k[1]),d(s(o(te,L),-A[1]),s(o(H,D),E[1]))),-I[2]))),C[3])),d(s(d(d(s(d(s(o(Fe,Ie),A[1]),d(s(o(Pe,q),-I[1]),s(o(Ce,ie),C[1]))),M[2]),s(d(s(o(Fe,Ie),M[1]),d(s(o(Te,$),-I[1]),s(o(_e,X),C[1]))),-A[2])),d(s(d(s(o(Pe,q),M[1]),d(s(o(Te,$),-A[1]),s(o(U,Q),C[1]))),I[2]),s(d(s(o(Ce,ie),M[1]),d(s(o(_e,X),-A[1]),s(o(U,Q),I[1]))),-C[2]))),k[3]),s(d(d(s(d(s(o(Fe,Ie),A[1]),d(s(o(Pe,q),-I[1]),s(o(Ce,ie),C[1]))),k[2]),s(d(s(o(Fe,Ie),k[1]),d(s(o(ve,j),-I[1]),s(o(ge,B),C[1]))),-A[2])),d(s(d(s(o(Pe,q),k[1]),d(s(o(ve,j),-A[1]),s(o(H,D),C[1]))),I[2]),s(d(s(o(Ce,ie),k[1]),d(s(o(ge,B),-A[1]),s(o(H,D),I[1]))),-C[2]))),-M[3])))),d(d(d(s(d(d(s(d(s(o(Fe,Ie),M[1]),d(s(o(Te,$),-I[1]),s(o(_e,X),C[1]))),k[2]),s(d(s(o(Fe,Ie),k[1]),d(s(o(ve,j),-I[1]),s(o(ge,B),C[1]))),-M[2])),d(s(d(s(o(Te,$),k[1]),d(s(o(ve,j),-M[1]),s(o(Y,O),C[1]))),I[2]),s(d(s(o(_e,X),k[1]),d(s(o(ge,B),-M[1]),s(o(Y,O),I[1]))),-C[2]))),A[3]),s(d(d(s(d(s(o(Pe,q),M[1]),d(s(o(Te,$),-A[1]),s(o(U,Q),C[1]))),k[2]),s(d(s(o(Pe,q),k[1]),d(s(o(ve,j),-A[1]),s(o(H,D),C[1]))),-M[2])),d(s(d(s(o(Te,$),k[1]),d(s(o(ve,j),-M[1]),s(o(Y,O),C[1]))),A[2]),s(d(s(o(U,Q),k[1]),d(s(o(H,D),-M[1]),s(o(Y,O),A[1]))),-C[2]))),-I[3])),d(s(d(d(s(d(s(o(Ce,ie),M[1]),d(s(o(_e,X),-A[1]),s(o(U,Q),I[1]))),k[2]),s(d(s(o(Ce,ie),k[1]),d(s(o(ge,B),-A[1]),s(o(H,D),I[1]))),-M[2])),d(s(d(s(o(_e,X),k[1]),d(s(o(ge,B),-M[1]),s(o(Y,O),I[1]))),A[2]),s(d(s(o(U,Q),k[1]),d(s(o(H,D),-M[1]),s(o(Y,O),A[1]))),-I[2]))),C[3]),s(d(d(s(d(s(o(Le,de),A[1]),d(s(o(Ce,ie),-E[1]),s(o(ue,G),I[1]))),M[2]),s(d(s(o(Le,de),M[1]),d(s(o(_e,X),-E[1]),s(o(se,ne),I[1]))),-A[2])),d(s(d(s(o(Ce,ie),M[1]),d(s(o(_e,X),-A[1]),s(o(U,Q),I[1]))),E[2]),s(d(s(o(ue,G),M[1]),d(s(o(se,ne),-A[1]),s(o(U,Q),E[1]))),-I[2]))),k[3]))),d(d(s(d(d(s(d(s(o(Le,de),A[1]),d(s(o(Ce,ie),-E[1]),s(o(ue,G),I[1]))),k[2]),s(d(s(o(Le,de),k[1]),d(s(o(ge,B),-E[1]),s(o(te,L),I[1]))),-A[2])),d(s(d(s(o(Ce,ie),k[1]),d(s(o(ge,B),-A[1]),s(o(H,D),I[1]))),E[2]),s(d(s(o(ue,G),k[1]),d(s(o(te,L),-A[1]),s(o(H,D),E[1]))),-I[2]))),-M[3]),s(d(d(s(d(s(o(Le,de),M[1]),d(s(o(_e,X),-E[1]),s(o(se,ne),I[1]))),k[2]),s(d(s(o(Le,de),k[1]),d(s(o(ge,B),-E[1]),s(o(te,L),I[1]))),-M[2])),d(s(d(s(o(_e,X),k[1]),d(s(o(ge,B),-M[1]),s(o(Y,O),I[1]))),E[2]),s(d(s(o(se,ne),k[1]),d(s(o(te,L),-M[1]),s(o(Y,O),E[1]))),-I[2]))),A[3])),d(s(d(d(s(d(s(o(Ce,ie),M[1]),d(s(o(_e,X),-A[1]),s(o(U,Q),I[1]))),k[2]),s(d(s(o(Ce,ie),k[1]),d(s(o(ge,B),-A[1]),s(o(H,D),I[1]))),-M[2])),d(s(d(s(o(_e,X),k[1]),d(s(o(ge,B),-M[1]),s(o(Y,O),I[1]))),A[2]),s(d(s(o(U,Q),k[1]),d(s(o(H,D),-M[1]),s(o(Y,O),A[1]))),-I[2]))),-E[3]),s(d(d(s(d(s(o(ue,G),M[1]),d(s(o(se,ne),-A[1]),s(o(U,Q),E[1]))),k[2]),s(d(s(o(ue,G),k[1]),d(s(o(te,L),-A[1]),s(o(H,D),E[1]))),-M[2])),d(s(d(s(o(se,ne),k[1]),d(s(o(te,L),-M[1]),s(o(Y,O),E[1]))),A[2]),s(d(s(o(U,Q),k[1]),d(s(o(H,D),-M[1]),s(o(Y,O),A[1]))),-E[2]))),I[3]))))),Ke=o(Ue,He);return Ke[Ke.length-1]}}var f=[function(){return 0},function(){return 0},function(){return 0}];function l(d){var o=f[d.length];return o||(o=f[d.length]=t(d.length)),o.apply(void 0,d)}function h(d,o,_,s,k,M,A,E){return function(I,C,R,O,D,L){switch(arguments.length){case 0:case 1:return 0;case 2:return s(I,C);case 3:return k(I,C,R);case 4:return M(I,C,R,O);case 5:return A(I,C,R,O,D);case 6:return E(I,C,R,O,D,L)}for(var B=new Array(arguments.length),j=0;j<arguments.length;++j)B[j]=arguments[j];return d(B)}}!function(){for(;f.length<=6;)f.push(t(f.length));w.exports=h.apply(void 0,[l].concat(f));for(var d=0;d<=6;++d)w.exports[d]=f[d]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(m,w,y){"use strict";var e=m("robust-determinant");function r(f){return(2===f?n:3===f?a:4===f?t:5===f?p:u)(f<6?e[f]:e)}function n(f){return function(l,h){return[f([[+h[0],+l[0][1]],[+h[1],+l[1][1]]]),f([[+l[0][0],+h[0]],[+l[1][0],+h[1]]]),f(l)]}}function a(f){return function(l,h){return[f([[+h[0],+l[0][1],+l[0][2]],[+h[1],+l[1][1],+l[1][2]],[+h[2],+l[2][1],+l[2][2]]]),f([[+l[0][0],+h[0],+l[0][2]],[+l[1][0],+h[1],+l[1][2]],[+l[2][0],+h[2],+l[2][2]]]),f([[+l[0][0],+l[0][1],+h[0]],[+l[1][0],+l[1][1],+h[1]],[+l[2][0],+l[2][1],+h[2]]]),f(l)]}}function t(f){return function(l,h){return[f([[+h[0],+l[0][1],+l[0][2],+l[0][3]],[+h[1],+l[1][1],+l[1][2],+l[1][3]],[+h[2],+l[2][1],+l[2][2],+l[2][3]],[+h[3],+l[3][1],+l[3][2],+l[3][3]]]),f([[+l[0][0],+h[0],+l[0][2],+l[0][3]],[+l[1][0],+h[1],+l[1][2],+l[1][3]],[+l[2][0],+h[2],+l[2][2],+l[2][3]],[+l[3][0],+h[3],+l[3][2],+l[3][3]]]),f([[+l[0][0],+l[0][1],+h[0],+l[0][3]],[+l[1][0],+l[1][1],+h[1],+l[1][3]],[+l[2][0],+l[2][1],+h[2],+l[2][3]],[+l[3][0],+l[3][1],+h[3],+l[3][3]]]),f([[+l[0][0],+l[0][1],+l[0][2],+h[0]],[+l[1][0],+l[1][1],+l[1][2],+h[1]],[+l[2][0],+l[2][1],+l[2][2],+h[2]],[+l[3][0],+l[3][1],+l[3][2],+h[3]]]),f(l)]}}function p(f){return function(l,h){return[f([[+h[0],+l[0][1],+l[0][2],+l[0][3],+l[0][4]],[+h[1],+l[1][1],+l[1][2],+l[1][3],+l[1][4]],[+h[2],+l[2][1],+l[2][2],+l[2][3],+l[2][4]],[+h[3],+l[3][1],+l[3][2],+l[3][3],+l[3][4]],[+h[4],+l[4][1],+l[4][2],+l[4][3],+l[4][4]]]),f([[+l[0][0],+h[0],+l[0][2],+l[0][3],+l[0][4]],[+l[1][0],+h[1],+l[1][2],+l[1][3],+l[1][4]],[+l[2][0],+h[2],+l[2][2],+l[2][3],+l[2][4]],[+l[3][0],+h[3],+l[3][2],+l[3][3],+l[3][4]],[+l[4][0],+h[4],+l[4][2],+l[4][3],+l[4][4]]]),f([[+l[0][0],+l[0][1],+h[0],+l[0][3],+l[0][4]],[+l[1][0],+l[1][1],+h[1],+l[1][3],+l[1][4]],[+l[2][0],+l[2][1],+h[2],+l[2][3],+l[2][4]],[+l[3][0],+l[3][1],+h[3],+l[3][3],+l[3][4]],[+l[4][0],+l[4][1],+h[4],+l[4][3],+l[4][4]]]),f([[+l[0][0],+l[0][1],+l[0][2],+h[0],+l[0][4]],[+l[1][0],+l[1][1],+l[1][2],+h[1],+l[1][4]],[+l[2][0],+l[2][1],+l[2][2],+h[2],+l[2][4]],[+l[3][0],+l[3][1],+l[3][2],+h[3],+l[3][4]],[+l[4][0],+l[4][1],+l[4][2],+h[4],+l[4][4]]]),f([[+l[0][0],+l[0][1],+l[0][2],+l[0][3],+h[0]],[+l[1][0],+l[1][1],+l[1][2],+l[1][3],+h[1]],[+l[2][0],+l[2][1],+l[2][2],+l[2][3],+h[2]],[+l[3][0],+l[3][1],+l[3][2],+l[3][3],+h[3]],[+l[4][0],+l[4][1],+l[4][2],+l[4][3],+h[4]]]),f(l)]}}function u(f){return function(l,h){return[f([[+h[0],+l[0][1],+l[0][2],+l[0][3],+l[0][4],+l[0][5]],[+h[1],+l[1][1],+l[1][2],+l[1][3],+l[1][4],+l[1][5]],[+h[2],+l[2][1],+l[2][2],+l[2][3],+l[2][4],+l[2][5]],[+h[3],+l[3][1],+l[3][2],+l[3][3],+l[3][4],+l[3][5]],[+h[4],+l[4][1],+l[4][2],+l[4][3],+l[4][4],+l[4][5]],[+h[5],+l[5][1],+l[5][2],+l[5][3],+l[5][4],+l[5][5]]]),f([[+l[0][0],+h[0],+l[0][2],+l[0][3],+l[0][4],+l[0][5]],[+l[1][0],+h[1],+l[1][2],+l[1][3],+l[1][4],+l[1][5]],[+l[2][0],+h[2],+l[2][2],+l[2][3],+l[2][4],+l[2][5]],[+l[3][0],+h[3],+l[3][2],+l[3][3],+l[3][4],+l[3][5]],[+l[4][0],+h[4],+l[4][2],+l[4][3],+l[4][4],+l[4][5]],[+l[5][0],+h[5],+l[5][2],+l[5][3],+l[5][4],+l[5][5]]]),f([[+l[0][0],+l[0][1],+h[0],+l[0][3],+l[0][4],+l[0][5]],[+l[1][0],+l[1][1],+h[1],+l[1][3],+l[1][4],+l[1][5]],[+l[2][0],+l[2][1],+h[2],+l[2][3],+l[2][4],+l[2][5]],[+l[3][0],+l[3][1],+h[3],+l[3][3],+l[3][4],+l[3][5]],[+l[4][0],+l[4][1],+h[4],+l[4][3],+l[4][4],+l[4][5]],[+l[5][0],+l[5][1],+h[5],+l[5][3],+l[5][4],+l[5][5]]]),f([[+l[0][0],+l[0][1],+l[0][2],+h[0],+l[0][4],+l[0][5]],[+l[1][0],+l[1][1],+l[1][2],+h[1],+l[1][4],+l[1][5]],[+l[2][0],+l[2][1],+l[2][2],+h[2],+l[2][4],+l[2][5]],[+l[3][0],+l[3][1],+l[3][2],+h[3],+l[3][4],+l[3][5]],[+l[4][0],+l[4][1],+l[4][2],+h[4],+l[4][4],+l[4][5]],[+l[5][0],+l[5][1],+l[5][2],+h[5],+l[5][4],+l[5][5]]]),f([[+l[0][0],+l[0][1],+l[0][2],+l[0][3],+h[0],+l[0][5]],[+l[1][0],+l[1][1],+l[1][2],+l[1][3],+h[1],+l[1][5]],[+l[2][0],+l[2][1],+l[2][2],+l[2][3],+h[2],+l[2][5]],[+l[3][0],+l[3][1],+l[3][2],+l[3][3],+h[3],+l[3][5]],[+l[4][0],+l[4][1],+l[4][2],+l[4][3],+h[4],+l[4][5]],[+l[5][0],+l[5][1],+l[5][2],+l[5][3],+h[5],+l[5][5]]]),f([[+l[0][0],+l[0][1],+l[0][2],+l[0][3],+l[0][4],+h[0]],[+l[1][0],+l[1][1],+l[1][2],+l[1][3],+l[1][4],+h[1]],[+l[2][0],+l[2][1],+l[2][2],+l[2][3],+l[2][4],+h[2]],[+l[3][0],+l[3][1],+l[3][2],+l[3][3],+l[3][4],+h[3]],[+l[4][0],+l[4][1],+l[4][2],+l[4][3],+l[4][4],+h[4]],[+l[5][0],+l[5][1],+l[5][2],+l[5][3],+l[5][4],+h[5]]]),f(l)]}}var i=[function(){return[[0]]},function(f,l){return[[l[0]],[f[0][0]]]}];function c(f,l,h,d,o,_,s,k){return function(M,A){switch(M.length){case 0:return f(M,A);case 1:return l(M,A);case 2:return h(M,A);case 3:return d(M,A);case 4:return o(M,A);case 5:return _(M,A)}var E=s[M.length];return E||(E=s[M.length]=k(M.length)),E(M,A)}}!function(){for(;i.length<6;)i.push(r(i.length));w.exports=c.apply(void 0,i.concat([i,r]));for(var f=0;f<6;++f)w.exports[f]=i[f]}()},{"robust-determinant":280}],284:[function(m,w,y){"use strict";var e=m("two-product"),r=m("robust-sum"),n=m("robust-scale"),a=m("robust-subtract");function t(o,_,s,k){return function(M,A,E){var I=o(o(_(A[1],E[0]),_(-E[1],A[0])),o(_(M[1],A[0]),_(-A[1],M[0]))),C=o(_(M[1],E[0]),_(-E[1],M[0])),R=k(I,C);return R[R.length-1]}}function p(o,_,s,k){return function(M,A,E,I){var C=o(o(s(o(_(E[1],I[0]),_(-I[1],E[0])),A[2]),o(s(o(_(A[1],I[0]),_(-I[1],A[0])),-E[2]),s(o(_(A[1],E[0]),_(-E[1],A[0])),I[2]))),o(s(o(_(A[1],I[0]),_(-I[1],A[0])),M[2]),o(s(o(_(M[1],I[0]),_(-I[1],M[0])),-A[2]),s(o(_(M[1],A[0]),_(-A[1],M[0])),I[2])))),R=o(o(s(o(_(E[1],I[0]),_(-I[1],E[0])),M[2]),o(s(o(_(M[1],I[0]),_(-I[1],M[0])),-E[2]),s(o(_(M[1],E[0]),_(-E[1],M[0])),I[2]))),o(s(o(_(A[1],E[0]),_(-E[1],A[0])),M[2]),o(s(o(_(M[1],E[0]),_(-E[1],M[0])),-A[2]),s(o(_(M[1],A[0]),_(-A[1],M[0])),E[2])))),O=k(C,R);return O[O.length-1]}}function u(o,_,s,k){return function(M,A,E,I,C){var R=o(o(o(s(o(s(o(_(I[1],C[0]),_(-C[1],I[0])),E[2]),o(s(o(_(E[1],C[0]),_(-C[1],E[0])),-I[2]),s(o(_(E[1],I[0]),_(-I[1],E[0])),C[2]))),A[3]),o(s(o(s(o(_(I[1],C[0]),_(-C[1],I[0])),A[2]),o(s(o(_(A[1],C[0]),_(-C[1],A[0])),-I[2]),s(o(_(A[1],I[0]),_(-I[1],A[0])),C[2]))),-E[3]),s(o(s(o(_(E[1],C[0]),_(-C[1],E[0])),A[2]),o(s(o(_(A[1],C[0]),_(-C[1],A[0])),-E[2]),s(o(_(A[1],E[0]),_(-E[1],A[0])),C[2]))),I[3]))),o(s(o(s(o(_(E[1],I[0]),_(-I[1],E[0])),A[2]),o(s(o(_(A[1],I[0]),_(-I[1],A[0])),-E[2]),s(o(_(A[1],E[0]),_(-E[1],A[0])),I[2]))),-C[3]),o(s(o(s(o(_(I[1],C[0]),_(-C[1],I[0])),A[2]),o(s(o(_(A[1],C[0]),_(-C[1],A[0])),-I[2]),s(o(_(A[1],I[0]),_(-I[1],A[0])),C[2]))),M[3]),s(o(s(o(_(I[1],C[0]),_(-C[1],I[0])),M[2]),o(s(o(_(M[1],C[0]),_(-C[1],M[0])),-I[2]),s(o(_(M[1],I[0]),_(-I[1],M[0])),C[2]))),-A[3])))),o(o(s(o(s(o(_(A[1],C[0]),_(-C[1],A[0])),M[2]),o(s(o(_(M[1],C[0]),_(-C[1],M[0])),-A[2]),s(o(_(M[1],A[0]),_(-A[1],M[0])),C[2]))),I[3]),o(s(o(s(o(_(A[1],I[0]),_(-I[1],A[0])),M[2]),o(s(o(_(M[1],I[0]),_(-I[1],M[0])),-A[2]),s(o(_(M[1],A[0]),_(-A[1],M[0])),I[2]))),-C[3]),s(o(s(o(_(E[1],I[0]),_(-I[1],E[0])),A[2]),o(s(o(_(A[1],I[0]),_(-I[1],A[0])),-E[2]),s(o(_(A[1],E[0]),_(-E[1],A[0])),I[2]))),M[3]))),o(s(o(s(o(_(E[1],I[0]),_(-I[1],E[0])),M[2]),o(s(o(_(M[1],I[0]),_(-I[1],M[0])),-E[2]),s(o(_(M[1],E[0]),_(-E[1],M[0])),I[2]))),-A[3]),o(s(o(s(o(_(A[1],I[0]),_(-I[1],A[0])),M[2]),o(s(o(_(M[1],I[0]),_(-I[1],M[0])),-A[2]),s(o(_(M[1],A[0]),_(-A[1],M[0])),I[2]))),E[3]),s(o(s(o(_(A[1],E[0]),_(-E[1],A[0])),M[2]),o(s(o(_(M[1],E[0]),_(-E[1],M[0])),-A[2]),s(o(_(M[1],A[0]),_(-A[1],M[0])),E[2]))),-I[3]))))),O=o(o(o(s(o(s(o(_(I[1],C[0]),_(-C[1],I[0])),E[2]),o(s(o(_(E[1],C[0]),_(-C[1],E[0])),-I[2]),s(o(_(E[1],I[0]),_(-I[1],E[0])),C[2]))),M[3]),s(o(s(o(_(I[1],C[0]),_(-C[1],I[0])),M[2]),o(s(o(_(M[1],C[0]),_(-C[1],M[0])),-I[2]),s(o(_(M[1],I[0]),_(-I[1],M[0])),C[2]))),-E[3])),o(s(o(s(o(_(E[1],C[0]),_(-C[1],E[0])),M[2]),o(s(o(_(M[1],C[0]),_(-C[1],M[0])),-E[2]),s(o(_(M[1],E[0]),_(-E[1],M[0])),C[2]))),I[3]),s(o(s(o(_(E[1],I[0]),_(-I[1],E[0])),M[2]),o(s(o(_(M[1],I[0]),_(-I[1],M[0])),-E[2]),s(o(_(M[1],E[0]),_(-E[1],M[0])),I[2]))),-C[3]))),o(o(s(o(s(o(_(E[1],C[0]),_(-C[1],E[0])),A[2]),o(s(o(_(A[1],C[0]),_(-C[1],A[0])),-E[2]),s(o(_(A[1],E[0]),_(-E[1],A[0])),C[2]))),M[3]),s(o(s(o(_(E[1],C[0]),_(-C[1],E[0])),M[2]),o(s(o(_(M[1],C[0]),_(-C[1],M[0])),-E[2]),s(o(_(M[1],E[0]),_(-E[1],M[0])),C[2]))),-A[3])),o(s(o(s(o(_(A[1],C[0]),_(-C[1],A[0])),M[2]),o(s(o(_(M[1],C[0]),_(-C[1],M[0])),-A[2]),s(o(_(M[1],A[0]),_(-A[1],M[0])),C[2]))),E[3]),s(o(s(o(_(A[1],E[0]),_(-E[1],A[0])),M[2]),o(s(o(_(M[1],E[0]),_(-E[1],M[0])),-A[2]),s(o(_(M[1],A[0]),_(-A[1],M[0])),E[2]))),-C[3])))),D=k(R,O);return D[D.length-1]}}function i(o){return(3===o?t:4===o?p:u)(r,e,n,a)}var c=i(3),f=i(4),l=[function(){return 0},function(){return 0},function(o,_){return _[0]-o[0]},function(o,_,s){var k,M=(o[1]-s[1])*(_[0]-s[0]),A=(o[0]-s[0])*(_[1]-s[1]),E=M-A;if(M>0){if(A<=0)return E;k=M+A}else{if(!(M<0)||A>=0)return E;k=-(M+A)}var I=33306690738754716e-32*k;return E>=I||E<=-I?E:c(o,_,s)},function(o,_,s,k){var M=o[0]-k[0],A=_[0]-k[0],E=s[0]-k[0],I=o[1]-k[1],C=_[1]-k[1],R=s[1]-k[1],O=o[2]-k[2],D=_[2]-k[2],L=s[2]-k[2],B=A*R,j=E*C,W=E*I,Y=M*R,Q=M*C,ne=A*I,X=O*(B-j)+D*(W-Y)+L*(Q-ne),$=7771561172376103e-31*((Math.abs(B)+Math.abs(j))*Math.abs(O)+(Math.abs(W)+Math.abs(Y))*Math.abs(D)+(Math.abs(Q)+Math.abs(ne))*Math.abs(L));return X>$||-X>$?X:f(o,_,s,k)}];function h(o){var _=l[o.length];return _||(_=l[o.length]=i(o.length)),_.apply(void 0,o)}function d(o,_,s,k,M,A,E){return function(I,C,R,O,D){switch(arguments.length){case 0:case 1:return 0;case 2:return k(I,C);case 3:return M(I,C,R);case 4:return A(I,C,R,O);case 5:return E(I,C,R,O,D)}for(var L=new Array(arguments.length),B=0;B<arguments.length;++B)L[B]=arguments[B];return o(L)}}!function(){for(;l.length<=5;)l.push(i(l.length));w.exports=d.apply(void 0,[h].concat(l));for(var o=0;o<=5;++o)w.exports[o]=l[o]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(m,w,y){"use strict";var e=m("robust-sum"),r=m("robust-scale");w.exports=function(n,a){if(1===n.length)return r(a,n[0]);if(1===a.length)return r(n,a[0]);if(0===n.length||0===a.length)return[0];var t=[0];if(n.length<a.length)for(var p=0;p<n.length;++p)t=e(t,r(a,n[p]));else for(p=0;p<a.length;++p)t=e(t,r(n,a[p]));return t}},{"robust-scale":286,"robust-sum":289}],286:[function(m,w,y){"use strict";var e=m("two-product"),r=m("two-sum");w.exports=function(n,a){var t=n.length;if(1===t){var p=e(n[0],a);return p[0]?p:[p[1]]}var u=new Array(2*t),i=[.1,.1],c=[.1,.1],f=0;e(n[0],a,i),i[0]&&(u[f++]=i[0]);for(var l=1;l<t;++l){e(n[l],a,c),r(i[1],c[0],i),i[0]&&(u[f++]=i[0]);var d=c[1],o=i[1],_=d+o,s=o-(_-d);i[1]=_,s&&(u[f++]=s)}return i[1]&&(u[f++]=i[1]),0===f&&(u[f++]=0),u.length=f,u}},{"two-product":306,"two-sum":307}],287:[function(m,w,y){"use strict";w.exports=function(r,n,a,t){var p=e(r,a,t),u=e(n,a,t);if(p>0&&u>0||p<0&&u<0)return!1;var i=e(a,r,n),c=e(t,r,n);return!(i>0&&c>0||i<0&&c<0)&&(0!==p||0!==u||0!==i||0!==c||function(f,l,h,d){for(var o=0;o<2;++o){var _=f[o],s=l[o],k=Math.min(_,s),M=Math.max(_,s),A=h[o],E=d[o],I=Math.min(A,E);if(Math.max(A,E)<k||M<I)return!1}return!0}(r,n,a,t))};var e=m("robust-orientation")[3]},{"robust-orientation":284}],288:[function(m,w,y){"use strict";w.exports=function(e,r){var R,O,D,L,B,n=0|e.length,a=0|r.length;if(1===n&&1===a)return(B=(R=e[0])-((D=R+(O=-r[0]))-(L=D-R))+(O-L))?[B,D]:[D];var t,p,u=new Array(n+a),i=0,c=0,f=0,l=Math.abs,h=e[c],d=l(h),o=-r[f],_=l(o);d<_?(p=h,(c+=1)<n&&(d=l(h=e[c]))):(p=o,(f+=1)<a&&(_=l(o=-r[f]))),c<n&&d<_||f>=a?(t=h,(c+=1)<n&&(d=l(h=e[c]))):(t=o,(f+=1)<a&&(_=l(o=-r[f])));for(var s,k,M=t+p,A=M-t,E=p-A,I=E,C=M;c<n&&f<a;)d<_?(t=h,(c+=1)<n&&(d=l(h=e[c]))):(t=o,(f+=1)<a&&(_=l(o=-r[f]))),(E=(p=I)-(A=(M=t+p)-t))&&(u[i++]=E),I=C-((s=C+M)-(k=s-C))+(M-k),C=s;for(;c<n;)(E=(p=I)-(A=(M=(t=h)+p)-t))&&(u[i++]=E),I=C-((s=C+M)-(k=s-C))+(M-k),C=s,(c+=1)<n&&(h=e[c]);for(;f<a;)(E=(p=I)-(A=(M=(t=o)+p)-t))&&(u[i++]=E),I=C-((s=C+M)-(k=s-C))+(M-k),C=s,(f+=1)<a&&(o=-r[f]);return I&&(u[i++]=I),C&&(u[i++]=C),i||(u[i++]=0),u.length=i,u}},{}],289:[function(m,w,y){"use strict";w.exports=function(e,r){var R,O,D,L,B,n=0|e.length,a=0|r.length;if(1===n&&1===a)return(B=(R=e[0])-((D=R+(O=r[0]))-(L=D-R))+(O-L))?[B,D]:[D];var t,p,u=new Array(n+a),i=0,c=0,f=0,l=Math.abs,h=e[c],d=l(h),o=r[f],_=l(o);d<_?(p=h,(c+=1)<n&&(d=l(h=e[c]))):(p=o,(f+=1)<a&&(_=l(o=r[f]))),c<n&&d<_||f>=a?(t=h,(c+=1)<n&&(d=l(h=e[c]))):(t=o,(f+=1)<a&&(_=l(o=r[f])));for(var s,k,M=t+p,A=M-t,E=p-A,I=E,C=M;c<n&&f<a;)d<_?(t=h,(c+=1)<n&&(d=l(h=e[c]))):(t=o,(f+=1)<a&&(_=l(o=r[f]))),(E=(p=I)-(A=(M=t+p)-t))&&(u[i++]=E),I=C-((s=C+M)-(k=s-C))+(M-k),C=s;for(;c<n;)(E=(p=I)-(A=(M=(t=h)+p)-t))&&(u[i++]=E),I=C-((s=C+M)-(k=s-C))+(M-k),C=s,(c+=1)<n&&(h=e[c]);for(;f<a;)(E=(p=I)-(A=(M=(t=o)+p)-t))&&(u[i++]=E),I=C-((s=C+M)-(k=s-C))+(M-k),C=s,(f+=1)<a&&(o=r[f]);return I&&(u[i++]=I),C&&(u[i++]=C),i||(u[i++]=0),u.length=i,u}},{}],290:[function(m,w,y){"use strict";w.exports=function(n){return r(e(n))};var e=m("boundary-cells"),r=m("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(m,w,y){"use strict";w.exports=function(t,p,u,i){if(u=u||0,void 0===i&&(i=function(s){for(var k=s.length,M=0,A=0;A<k;++A)M=0|Math.max(M,s[A].length);return M-1}(t)),0===t.length||i<1)return{cells:[],vertexIds:[],vertexWeights:[]};var c=function(s,k){for(var M=s.length,A=r.mallocUint8(M),E=0;E<M;++E)A[E]=s[E]<k|0;return A}(p,+u),f=function(s,k){for(var M=s.length,E=r.mallocUint32(2*(k*(k+1)/2*M|0)),I=0,C=0;C<M;++C)for(var R=s[C],O=(k=R.length,0);O<k;++O)for(var D=0;D<O;++D){var L=R[D],B=R[O];E[I++]=0|Math.min(L,B),E[I++]=0|Math.max(L,B)}n(e(E,[I/2|0,2]));var j=2;for(C=2;C<I;C+=2)E[C-2]===E[C]&&E[C-1]===E[C+1]||(E[j++]=E[C],E[j++]=E[C+1]);return e(E,[j/2|0,2])}(t,i),l=function(s,k,M,A){for(var E=s.data,I=s.shape[0],C=r.mallocDouble(I),R=0,O=0;O<I;++O){var D=E[2*O],L=E[2*O+1];if(M[D]!==M[L]){var B=k[D],j=k[L];E[2*R]=D,E[2*R+1]=L,C[R++]=(j-A)/(j-B)}}return s.shape[0]=R,e(C,[R])}(f,p,c,+u),h=function(s,k){var M=r.mallocInt32(2*k),A=s.shape[0],E=s.data;M[0]=0;for(var I=0,C=0;C<A;++C){var R=E[2*C];if(R!==I){for(M[2*I+1]=C;++I<R;)M[2*I]=C,M[2*I+1]=C;M[2*I]=C}}for(M[2*I+1]=A;++I<k;)M[2*I]=M[2*I+1]=A;return M}(f,0|p.length),d=a(i)(t,f.data,h,c),o=function(s){for(var k=0|s.shape[0],M=s.data,A=new Array(k),E=0;E<k;++E)A[E]=[M[2*E],M[2*E+1]];return A}(f),_=[].slice.call(l.data,0,l.shape[0]);return r.free(c),r.free(f.data),r.free(l.data),r.free(h),{cells:d,vertexIds:o,vertexWeights:_}};var e=m("ndarray"),r=m("typedarray-pool"),n=m("ndarray-sort"),a=m("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(m,w,y){"use strict";w.exports=function(r){return e[r]()};var e=[function(){return function(r,n,a,t){for(var p=r.length,u=0;u<p;++u);return[]}},function(){function r(n,a,t,p){for(var u=0|Math.min(t,p),i=0|Math.max(t,p),c=n[2*u],f=n[2*u+1];c<f;){var l=c+f>>1,h=a[2*l+1];if(h===i)return l;i<h?f=l:c=l+1}return c}return function(n,a,t,p){for(var u=n.length,i=[],c=0;c<u;++c){var f=n[c];if(2===f.length){var l=(p[f[0]]<<0)+(p[f[1]]<<1);if(0===l||3===l)continue;switch(l){case 0:break;case 1:i.push([r(t,a,f[0],f[1])]);break;case 2:i.push([r(t,a,f[1],f[0])])}}}return i}},function(){function r(n,a,t,p){for(var u=0|Math.min(t,p),i=0|Math.max(t,p),c=n[2*u],f=n[2*u+1];c<f;){var l=c+f>>1,h=a[2*l+1];if(h===i)return l;i<h?f=l:c=l+1}return c}return function(n,a,t,p){for(var u=n.length,i=[],c=0;c<u;++c){var f=n[c],l=f.length;if(3===l){if(0==(h=(p[f[0]]<<0)+(p[f[1]]<<1)+(p[f[2]]<<2))||7===h)continue;switch(h){case 0:break;case 1:i.push([r(t,a,f[0],f[2]),r(t,a,f[0],f[1])]);break;case 2:i.push([r(t,a,f[1],f[0]),r(t,a,f[1],f[2])]);break;case 3:i.push([r(t,a,f[0],f[2]),r(t,a,f[1],f[2])]);break;case 4:i.push([r(t,a,f[2],f[1]),r(t,a,f[2],f[0])]);break;case 5:i.push([r(t,a,f[2],f[1]),r(t,a,f[0],f[1])]);break;case 6:i.push([r(t,a,f[1],f[0]),r(t,a,f[2],f[0])])}}else if(2===l){var h;if(0==(h=(p[f[0]]<<0)+(p[f[1]]<<1))||3===h)continue;switch(h){case 0:break;case 1:i.push([r(t,a,f[0],f[1])]);break;case 2:i.push([r(t,a,f[1],f[0])])}}}return i}},function(){function r(n,a,t,p){for(var u=0|Math.min(t,p),i=0|Math.max(t,p),c=n[2*u],f=n[2*u+1];c<f;){var l=c+f>>1,h=a[2*l+1];if(h===i)return l;i<h?f=l:c=l+1}return c}return function(n,a,t,p){for(var u=n.length,i=[],c=0;c<u;++c){var f=n[c],l=f.length;if(4===l){if(0==(h=(p[f[0]]<<0)+(p[f[1]]<<1)+(p[f[2]]<<2)+(p[f[3]]<<3))||15===h)continue;switch(h){case 0:break;case 1:i.push([r(t,a,f[0],f[1]),r(t,a,f[0],f[2]),r(t,a,f[0],f[3])]);break;case 2:i.push([r(t,a,f[1],f[2]),r(t,a,f[1],f[0]),r(t,a,f[1],f[3])]);break;case 3:i.push([r(t,a,f[1],f[2]),r(t,a,f[0],f[2]),r(t,a,f[0],f[3])],[r(t,a,f[1],f[3]),r(t,a,f[1],f[2]),r(t,a,f[0],f[3])]);break;case 4:i.push([r(t,a,f[2],f[0]),r(t,a,f[2],f[1]),r(t,a,f[2],f[3])]);break;case 5:i.push([r(t,a,f[0],f[1]),r(t,a,f[2],f[1]),r(t,a,f[0],f[3])],[r(t,a,f[2],f[1]),r(t,a,f[2],f[3]),r(t,a,f[0],f[3])]);break;case 6:i.push([r(t,a,f[2],f[0]),r(t,a,f[1],f[0]),r(t,a,f[1],f[3])],[r(t,a,f[2],f[3]),r(t,a,f[2],f[0]),r(t,a,f[1],f[3])]);break;case 7:i.push([r(t,a,f[0],f[3]),r(t,a,f[1],f[3]),r(t,a,f[2],f[3])]);break;case 8:i.push([r(t,a,f[3],f[1]),r(t,a,f[3],f[0]),r(t,a,f[3],f[2])]);break;case 9:i.push([r(t,a,f[3],f[1]),r(t,a,f[0],f[1]),r(t,a,f[0],f[2])],[r(t,a,f[3],f[2]),r(t,a,f[3],f[1]),r(t,a,f[0],f[2])]);break;case 10:i.push([r(t,a,f[1],f[0]),r(t,a,f[3],f[0]),r(t,a,f[1],f[2])],[r(t,a,f[3],f[0]),r(t,a,f[3],f[2]),r(t,a,f[1],f[2])]);break;case 11:i.push([r(t,a,f[1],f[2]),r(t,a,f[0],f[2]),r(t,a,f[3],f[2])]);break;case 12:i.push([r(t,a,f[3],f[0]),r(t,a,f[2],f[0]),r(t,a,f[2],f[1])],[r(t,a,f[3],f[1]),r(t,a,f[3],f[0]),r(t,a,f[2],f[1])]);break;case 13:i.push([r(t,a,f[0],f[1]),r(t,a,f[2],f[1]),r(t,a,f[3],f[1])]);break;case 14:i.push([r(t,a,f[2],f[0]),r(t,a,f[1],f[0]),r(t,a,f[3],f[0])])}}else if(3===l){if(0==(h=(p[f[0]]<<0)+(p[f[1]]<<1)+(p[f[2]]<<2))||7===h)continue;switch(h){case 0:break;case 1:i.push([r(t,a,f[0],f[2]),r(t,a,f[0],f[1])]);break;case 2:i.push([r(t,a,f[1],f[0]),r(t,a,f[1],f[2])]);break;case 3:i.push([r(t,a,f[0],f[2]),r(t,a,f[1],f[2])]);break;case 4:i.push([r(t,a,f[2],f[1]),r(t,a,f[2],f[0])]);break;case 5:i.push([r(t,a,f[2],f[1]),r(t,a,f[0],f[1])]);break;case 6:i.push([r(t,a,f[1],f[0]),r(t,a,f[2],f[0])])}}else if(2===l){var h;if(0==(h=(p[f[0]]<<0)+(p[f[1]]<<1))||3===h)continue;switch(h){case 0:break;case 1:i.push([r(t,a,f[0],f[1])]);break;case 2:i.push([r(t,a,f[1],f[0])])}}}return i}}]},{}],293:[function(m,w,y){"use strict";var e=m("bit-twiddle"),r=m("union-find");function n(f,l){var h=f.length,d=f.length-l.length,o=Math.min;if(d)return d;switch(h){case 0:return 0;case 1:return f[0]-l[0];case 2:return(k=f[0]+f[1]-l[0]-l[1])||o(f[0],f[1])-o(l[0],l[1]);case 3:var _=f[0]+f[1],s=l[0]+l[1];if(k=_+f[2]-(s+l[2]))return k;var k,M=o(f[0],f[1]),A=o(l[0],l[1]);return(k=o(M,f[2])-o(A,l[2]))||o(M+f[2],_)-o(A+l[2],s);default:var E=f.slice(0);E.sort();var I=l.slice(0);I.sort();for(var C=0;C<h;++C)if(d=E[C]-I[C])return d;return 0}}function a(f,l){return n(f[0],l[0])}function t(f,l){if(l){for(var h=f.length,d=new Array(h),o=0;o<h;++o)d[o]=[f[o],l[o]];for(d.sort(a),o=0;o<h;++o)f[o]=d[o][0],l[o]=d[o][1];return f}return f.sort(n),f}function p(f){if(0===f.length)return[];for(var l=1,h=f.length,d=1;d<h;++d){var o=f[d];if(n(o,f[d-1])){if(d===l){l++;continue}f[l++]=o}}return f.length=l,f}function u(f,l){for(var h=0,d=f.length-1,o=-1;h<=d;){var _=h+d>>1,s=n(f[_],l);s<=0?(0===s&&(o=_),h=_+1):s>0&&(d=_-1)}return o}function i(f,l){for(var h=new Array(f.length),d=0,o=h.length;d<o;++d)h[d]=[];for(var _=[],s=(d=0,l.length);d<s;++d)for(var k=l[d],M=k.length,A=1,E=1<<M;A<E;++A){_.length=e.popCount(A);for(var I=0,C=0;C<M;++C)A&1<<C&&(_[I++]=k[C]);var R=u(f,_);if(!(R<0))for(;h[R++].push(d),!(R>=f.length||0!==n(f[R],_)););}return h}function c(f,l){if(l<0)return[];for(var h=[],d=(1<<l+1)-1,o=0;o<f.length;++o)for(var _=f[o],s=d;s<1<<_.length;s=e.nextCombination(s)){for(var k=new Array(l+1),M=0,A=0;A<_.length;++A)s&1<<A&&(k[M++]=_[A]);h.push(k)}return t(h)}y.dimension=function(f){for(var l=0,h=Math.max,d=0,o=f.length;d<o;++d)l=h(l,f[d].length);return l-1},y.countVertices=function(f){for(var l=-1,h=Math.max,d=0,o=f.length;d<o;++d)for(var _=f[d],s=0,k=_.length;s<k;++s)l=h(l,_[s]);return l+1},y.cloneCells=function(f){for(var l=new Array(f.length),h=0,d=f.length;h<d;++h)l[h]=f[h].slice(0);return l},y.compareCells=n,y.normalize=t,y.unique=p,y.findCell=u,y.incidence=i,y.dual=function(f,l){if(!l)return i(p(c(f,0)),f);for(var h=new Array(l),d=0;d<l;++d)h[d]=[];d=0;for(var o=f.length;d<o;++d)for(var _=f[d],s=0,k=_.length;s<k;++s)h[_[s]].push(d);return h},y.explode=function(f){for(var l=[],h=0,d=f.length;h<d;++h)for(var o=f[h],_=0|o.length,s=1,k=1<<_;s<k;++s){for(var M=[],A=0;A<_;++A)s>>>A&1&&M.push(o[A]);l.push(M)}return t(l)},y.skeleton=c,y.boundary=function(f){for(var l=[],h=0,d=f.length;h<d;++h)for(var o=f[h],_=0,s=o.length;_<s;++_){for(var k=new Array(o.length-1),M=0,A=0;M<s;++M)M!==_&&(k[A++]=o[M]);l.push(k)}return t(l)},y.connectedComponents=function(f,l){return l?function(h,d){for(var o=new r(d),_=0;_<h.length;++_)for(var s=h[_],k=0;k<s.length;++k)for(var M=k+1;M<s.length;++M)o.link(s[k],s[M]);var A=[],E=o.ranks;for(_=0;_<E.length;++_)E[_]=-1;for(_=0;_<h.length;++_){var I=o.find(h[_][0]);E[I]<0?(E[I]=A.length,A.push([h[_].slice(0)])):A[E[I]].push(h[_].slice(0))}return A}(f,l):function(h){for(var d=p(t(c(h,0))),o=new r(d.length),_=0;_<h.length;++_)for(var s=h[_],k=0;k<s.length;++k)for(var M=u(d,[s[k]]),A=k+1;A<s.length;++A)o.link(M,u(d,[s[A]]));var E=[],I=o.ranks;for(_=0;_<I.length;++_)I[_]=-1;for(_=0;_<h.length;++_){var C=o.find(u(d,[h[_][0]]));I[C]<0?(I[C]=E.length,E.push([h[_].slice(0)])):E[I[C]].push(h[_].slice(0))}return E}(f)}},{"bit-twiddle":32,"union-find":309}],294:[function(m,w,y){arguments[4][32][0].apply(y,arguments)},{dup:32}],295:[function(m,w,y){arguments[4][293][0].apply(y,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(m,w,y){"use strict";function e(r){this.roots=new Array(r),this.ranks=new Array(r);for(var n=0;n<r;++n)this.roots[n]=n,this.ranks[n]=0}w.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},e.prototype.find=function(r){for(var n=this.roots;n[r]!==r;){var a=n[r];n[r]=n[a],r=a}return r},e.prototype.link=function(r,n){var a=this.find(r),t=this.find(n);if(a!==t){var p=this.ranks,u=this.roots,i=p[a],c=p[t];i<c?u[a]=t:c<i?u[t]=a:(u[t]=a,++p[a])}}},{}],297:[function(m,w,y){"use strict";w.exports=function(n,a,t){for(var p=a.length,u=n.length,i=new Array(p),c=new Array(p),f=new Array(p),l=new Array(p),h=0;h<p;++h)i[h]=c[h]=-1,f[h]=1/0,l[h]=!1;for(h=0;h<u;++h){var d=n[h];if(2!==d.length)throw new Error("Input must be a graph");var o=d[1],_=d[0];c[_]=-1!==c[_]?-2:o,i[o]=-1!==i[o]?-2:_}function s(ne){if(l[ne])return 1/0;var $,re,G=i[ne],ie=c[ne];return G<0||ie<0?1/0:($=a[G],re=a[ie],Math.abs(e(a[ne],$,re))/Math.sqrt(Math.pow($[0]-re[0],2)+Math.pow($[1]-re[1],2)))}function k(ne,X){var $=D[ne],re=D[X];D[ne]=re,D[X]=$,L[$]=X,L[re]=ne}function M(ne){return f[D[ne]]}function A(ne){return 1&ne?ne-1>>1:(ne>>1)-1}function E(ne){for(var X=M(ne);;){var $=X,re=2*ne+1,H=2*(ne+1),U=ne;if(re<B){var G=M(re);G<$&&(U=re,$=G)}if(H<B&&M(H)<$&&(U=H),U===ne)return ne;k(ne,U),ne=U}}function I(ne){for(var X=M(ne);ne>0;){var $=A(ne);if(!($>=0&&X<M($)))return ne;k(ne,$),ne=$}}function C(){if(B>0){var ne=D[0];return k(0,B-1),B-=1,E(0),ne}return-1}function R(ne,X){var $=D[ne];return f[$]===X?ne:(f[$]=-1/0,I(ne),C(),f[$]=X,I((B+=1)-1))}function O(ne){if(!l[ne]){l[ne]=!0;var X=i[ne],$=c[ne];i[$]>=0&&(i[$]=X),c[X]>=0&&(c[X]=$),L[X]>=0&&R(L[X],s(X)),L[$]>=0&&R(L[$],s($))}}var D=[],L=new Array(p);for(h=0;h<p;++h)(f[h]=s(h))<1/0?(L[h]=D.length,D.push(h)):L[h]=-1;var B=D.length;for(h=B>>1;h>=0;--h)E(h);for(;;){var j=C();if(j<0||f[j]>t)break;O(j)}var W=[];for(h=0;h<p;++h)l[h]||(L[h]=W.length,W.push(a[h].slice()));function Y(ne,X){if(ne[X]<0)return X;var $=X,re=X;do{var H=ne[re];if(!l[re]||H<0||H===re||(H=ne[re=H],!l[re]||H<0||H===re))break;re=H,$=ne[$]}while($!==re);for(var U=X;U!==re;U=ne[U])ne[U]=re;return re}var Q=[];return n.forEach(function(ne){var X=Y(i,ne[0]),$=Y(c,ne[1]);if(X>=0&&$>=0&&X!==$){var re=L[X],H=L[$];re!==H&&Q.push([re,H])}}),r.unique(r.normalize(Q)),{positions:W,edges:Q}};var e=m("robust-orientation"),r=m("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(m,w,y){"use strict";w.exports=function(n,a){var t,p,u,i;if(a[0][0]<a[1][0])t=a[0],p=a[1];else{if(!(a[0][0]>a[1][0]))return r(a,n);t=a[1],p=a[0]}if(n[0][0]<n[1][0])u=n[0],i=n[1];else{if(!(n[0][0]>n[1][0]))return-r(n,a);u=n[1],i=n[0]}var c=e(t,p,i),f=e(t,p,u);if(c<0){if(f<=0)return c}else if(c>0){if(f>=0)return c}else if(f)return f;if(c=e(i,u,p),f=e(i,u,t),c<0){if(f<=0)return c}else if(c>0){if(f>=0)return c}else if(f)return f;return p[0]-i[0]};var e=m("robust-orientation");function r(n,a){var t,p,u,i;if(a[0][0]<a[1][0])t=a[0],p=a[1];else{if(!(a[0][0]>a[1][0])){var c=Math.min(n[0][1],n[1][1]),f=Math.max(n[0][1],n[1][1]),l=Math.min(a[0][1],a[1][1]),h=Math.max(a[0][1],a[1][1]);return f<l?f-l:c>h?c-h:f-h}t=a[1],p=a[0]}n[0][1]<n[1][1]?(u=n[0],i=n[1]):(u=n[1],i=n[0]);var d=e(p,t,u);return d||(d=e(p,t,i))||i-p}},{"robust-orientation":284}],299:[function(m,w,y){"use strict";w.exports=function(f){for(var l=f.length,h=2*l,d=new Array(h),o=0;o<l;++o){var _=f[o],s=_[0][0]<_[1][0];d[2*o]=new c(_[0][0],_,s,o),d[2*o+1]=new c(_[1][0],_,!s,o)}d.sort(function(O,D){var L=O.x-D.x;return L||(L=O.create-D.create)||Math.min(O.segment[0][1],O.segment[1][1])-Math.min(D.segment[0][1],D.segment[1][1])});var k=r(a),M=[],A=[],E=[];for(o=0;o<h;){for(var I=d[o].x,C=[];o<h;){var R=d[o];if(R.x!==I)break;o+=1,R.segment[0][0]===R.x&&R.segment[1][0]===R.x?R.create&&(R.segment[0][1]<R.segment[1][1]?(C.push(new i(R.segment[0][1],R.index,!0,!0)),C.push(new i(R.segment[1][1],R.index,!1,!1))):(C.push(new i(R.segment[1][1],R.index,!0,!1)),C.push(new i(R.segment[0][1],R.index,!1,!0)))):k=R.create?k.insert(R.segment,R.index):k.remove(R.segment)}M.push(k.root),A.push(I),E.push(C)}return new t(M,A,E)};var e=m("binary-search-bounds"),r=m("functional-red-black-tree"),n=m("robust-orientation"),a=m("./lib/order-segments");function t(f,l,h){this.slabs=f,this.coordinates=l,this.horizontal=h}function p(f,l){return f.y-l}function u(f,l){for(var h=null;f;){var d,o,_=f.key;_[0][0]<_[1][0]?(d=_[0],o=_[1]):(d=_[1],o=_[0]);var s=n(d,o,l);if(s<0)f=f.left;else if(s>0)if(l[0]!==_[1][0])h=f,f=f.right;else{if(k=u(f.right,l))return k;f=f.left}else{if(l[0]!==_[1][0])return f;var k;if(k=u(f.right,l))return k;f=f.left}}return h}function i(f,l,h,d){this.y=f,this.index=l,this.start=h,this.closed=d}function c(f,l,h,d){this.x=f,this.segment=l,this.create=h,this.index=d}t.prototype.castUp=function(f){var l=e.le(this.coordinates,f[0]);if(l<0)return-1;var h=u(this.slabs[l],f),d=-1;if(h&&(d=h.value),this.coordinates[l]===f[0]){var o=null;if(h&&(o=h.key),l>0){var _=u(this.slabs[l-1],f);_&&(o?a(_.key,o)>0&&(o=_.key,d=_.value):(d=_.value,o=_.key))}var s=this.horizontal[l];if(s.length>0){var k=e.ge(s,f[1],p);if(k<s.length){var M=s[k];if(f[1]===M.y){if(M.closed)return M.index;for(;k<s.length-1&&s[k+1].y===f[1];)if((M=s[k+=1]).closed)return M.index;if(M.y===f[1]&&!M.start){if((k+=1)>=s.length)return d;M=s[k]}}if(M.start)if(o){var A=n(o[0],o[1],[f[0],M.y]);o[0][0]>o[1][0]&&(A=-A),A>0&&(d=M.index)}else d=M.index;else M.y!==f[1]&&(d=M.index)}}}return d}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(m,w,y){"use strict";var e=m("robust-dot-product"),r=m("robust-sum");function n(t,p){var u=r(e(t,p),[p[p.length-1]]);return u[u.length-1]}function a(t,p,u,i){var c=-p/(i-p);c<0?c=0:c>1&&(c=1);for(var f=1-c,l=t.length,h=new Array(l),d=0;d<l;++d)h[d]=c*t[d]+f*u[d];return h}w.exports=function(t,p){for(var u=[],i=[],c=n(t[t.length-1],p),f=t[t.length-1],l=t[0],h=0;h<t.length;++h,f=l){var d=n(l=t[h],p);if(c<0&&d>0||c>0&&d<0){var o=a(f,d,l,c);u.push(o),i.push(o.slice())}d<0?i.push(l.slice()):d>0?u.push(l.slice()):(u.push(l.slice()),i.push(l.slice())),c=d}return{positive:u,negative:i}},w.exports.positive=function(t,p){for(var u=[],i=n(t[t.length-1],p),c=t[t.length-1],f=t[0],l=0;l<t.length;++l,c=f){var h=n(f=t[l],p);(i<0&&h>0||i>0&&h<0)&&u.push(a(c,h,f,i)),h>=0&&u.push(f.slice()),i=h}return u},w.exports.negative=function(t,p){for(var u=[],i=n(t[t.length-1],p),c=t[t.length-1],f=t[0],l=0;l<t.length;++l,c=f){var h=n(f=t[l],p);(i<0&&h>0||i>0&&h<0)&&u.push(a(c,h,f,i)),h<=0&&u.push(f.slice()),i=h}return u}},{"robust-dot-product":281,"robust-sum":289}],301:[function(m,w,y){!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function r(u){return a(p(u),arguments)}function n(u,i){return r.apply(null,[u].concat(i||[]))}function a(u,i){var c,f,l,h,d,o,_,s,k,M=1,A=u.length,E="";for(f=0;f<A;f++)if("string"==typeof u[f])E+=u[f];else if("object"==typeof u[f]){if((h=u[f]).keys)for(c=i[M],l=0;l<h.keys.length;l++){if(null==c)throw new Error(r('[sprintf] Cannot access property "%s" of undefined value "%s"',h.keys[l],h.keys[l-1]));c=c[h.keys[l]]}else c=h.param_no?i[h.param_no]:i[M++];if(e.not_type.test(h.type)&&e.not_primitive.test(h.type)&&c instanceof Function&&(c=c()),e.numeric_arg.test(h.type)&&"number"!=typeof c&&isNaN(c))throw new TypeError(r("[sprintf] expecting number but found %T",c));switch(e.number.test(h.type)&&(s=c>=0),h.type){case"b":c=parseInt(c,10).toString(2);break;case"c":c=String.fromCharCode(parseInt(c,10));break;case"d":case"i":c=parseInt(c,10);break;case"j":c=JSON.stringify(c,null,h.width?parseInt(h.width):0);break;case"e":c=h.precision?parseFloat(c).toExponential(h.precision):parseFloat(c).toExponential();break;case"f":c=h.precision?parseFloat(c).toFixed(h.precision):parseFloat(c);break;case"g":c=h.precision?String(Number(c.toPrecision(h.precision))):parseFloat(c);break;case"o":c=(parseInt(c,10)>>>0).toString(8);break;case"s":c=String(c),c=h.precision?c.substring(0,h.precision):c;break;case"t":c=String(!!c),c=h.precision?c.substring(0,h.precision):c;break;case"T":c=Object.prototype.toString.call(c).slice(8,-1).toLowerCase(),c=h.precision?c.substring(0,h.precision):c;break;case"u":c=parseInt(c,10)>>>0;break;case"v":c=c.valueOf(),c=h.precision?c.substring(0,h.precision):c;break;case"x":c=(parseInt(c,10)>>>0).toString(16);break;case"X":c=(parseInt(c,10)>>>0).toString(16).toUpperCase()}e.json.test(h.type)?E+=c:(!e.number.test(h.type)||s&&!h.sign?k="":(k=s?"+":"-",c=c.toString().replace(e.sign,"")),o=h.pad_char?"0"===h.pad_char?"0":h.pad_char.charAt(1):" ",_=h.width-(k+c).length,d=h.width&&_>0?o.repeat(_):"",E+=h.align?k+c+d:"0"===o?k+d+c:d+k+c)}return E}var t=Object.create(null);function p(u){if(t[u])return t[u];for(var i,c=u,f=[],l=0;c;){if(null!==(i=e.text.exec(c)))f.push(i[0]);else if(null!==(i=e.modulo.exec(c)))f.push("%");else{if(null===(i=e.placeholder.exec(c)))throw new SyntaxError("[sprintf] unexpected placeholder");if(i[2]){l|=1;var h=[],d=i[2],o=[];if(null===(o=e.key.exec(d)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(h.push(o[1]);""!==(d=d.substring(o[0].length));)if(null!==(o=e.key_access.exec(d)))h.push(o[1]);else{if(null===(o=e.index_access.exec(d)))throw new SyntaxError("[sprintf] failed to parse named argument key");h.push(o[1])}i[2]=h}else l|=2;if(3===l)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");f.push({placeholder:i[0],param_no:i[1],keys:i[2],sign:i[3],pad_char:i[4],align:i[5],width:i[6],precision:i[7],type:i[8]})}c=c.substring(i[0].length)}return t[u]=f}void 0!==y&&(y.sprintf=r,y.vsprintf=n),"undefined"!=typeof window&&(window.sprintf=r,window.vsprintf=n)}()},{}],302:[function(m,w,y){"use strict";w.exports=function(t,p){if(t.dimension<=0)return{positions:[],cells:[]};if(1===t.dimension)return function(c,f){for(var l=r(c,f),h=l.length,d=new Array(h),o=new Array(h),_=0;_<h;++_)d[_]=[l[_]],o[_]=[_];return{positions:d,cells:o}}(t,p);var u=t.order.join()+"-"+t.dtype,i=a[u];return p=+p||0,i||(i=a[u]=function(c,f){var h=n[c.length+"d"];if(h)return h(e,c,f)}(t.order,t.dtype)),i(t,p)};var e=m("ndarray-extract-contour"),r=m("zero-crossings"),n={"2d":function(t,p,u){var i=t({order:p,scalarArguments:3,getters:"generic"===u?[0]:void 0,phase:function(c,f,l,h){return c>h|0},vertex:function(c,f,l,h,d,o,_,s,k,M,A,E,I){var C=(_<<0)+(s<<1)+(k<<2)+(M<<3)|0;if(0!==C&&15!==C)switch(C){case 0:case 15:A.push([c-.5,f-.5]);break;case 1:A.push([c-.25-.25*(h+l-2*I)/(l-h),f-.25-.25*(d+l-2*I)/(l-d)]);break;case 2:A.push([c-.75-.25*(-h-l+2*I)/(h-l),f-.25-.25*(o+h-2*I)/(h-o)]);break;case 3:A.push([c-.5,f-.5-.5*(d+l+o+h-4*I)/(l-d+h-o)]);break;case 4:A.push([c-.25-.25*(o+d-2*I)/(d-o),f-.75-.25*(-d-l+2*I)/(d-l)]);break;case 5:A.push([c-.5-.5*(h+l+o+d-4*I)/(l-h+d-o),f-.5]);break;case 6:A.push([c-.5-.25*(-h-l+o+d)/(h-l+d-o),f-.5-.25*(-d-l+o+h)/(d-l+h-o)]);break;case 7:A.push([c-.75-.25*(o+d-2*I)/(d-o),f-.75-.25*(o+h-2*I)/(h-o)]);break;case 8:A.push([c-.75-.25*(-o-d+2*I)/(o-d),f-.75-.25*(-o-h+2*I)/(o-h)]);break;case 9:A.push([c-.5-.25*(h+l+-o-d)/(l-h+o-d),f-.5-.25*(d+l+-o-h)/(l-d+o-h)]);break;case 10:A.push([c-.5-.5*(-h-l-o-d+4*I)/(h-l+o-d),f-.5]);break;case 11:A.push([c-.25-.25*(-o-d+2*I)/(o-d),f-.75-.25*(d+l-2*I)/(l-d)]);break;case 12:A.push([c-.5,f-.5-.5*(-d-l-o-h+4*I)/(d-l+o-h)]);break;case 13:A.push([c-.75-.25*(h+l-2*I)/(l-h),f-.25-.25*(-o-h+2*I)/(o-h)]);break;case 14:A.push([c-.25-.25*(-h-l+2*I)/(h-l),f-.25-.25*(-d-l+2*I)/(d-l)])}},cell:function(c,f,l,h,d,o,_,s,k){s.push(d?[c,f]:[f,c])}});return function(c,f){var l=[],h=[];return i(c,l,h,f),{positions:l,cells:h}}}},a={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(m,w,y){(function(e){(function(){"use strict";w.exports=function t(p,u,i){i=i||{};var c=a[p];c||(c=a[p]={" ":{data:new Float32Array(0),shape:.2}});var f=c[u];if(!f)if(u.length<=1||!/\d/.test(u))f=c[u]=function(I){for(var C=I.cells,R=I.positions,O=new Float32Array(6*C.length),D=0,L=0,B=0;B<C.length;++B)for(var j=C[B],W=0;W<3;++W){var Y=R[j[W]];O[D++]=Y[0],O[D++]=Y[1]+1.4,L=Math.max(Y[0],L)}return{data:O,shape:L}}(r(u,{triangles:!0,font:p,textAlign:i.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var l=u.split(/(\d|\s)/),h=new Array(l.length),d=0,o=0,_=0;_<l.length;++_)h[_]=t(p,l[_]),d+=h[_].data.length,o+=h[_].shape,_>0&&(o+=.02);var s=new Float32Array(d),k=0,M=-.5*o;for(_=0;_<h.length;++_){for(var A=h[_].data,E=0;E<A.length;E+=2)s[k++]=A[E]+M,s[k++]=A[E+1];M+=h[_].shape+.02}f=c[u]={data:s,shape:o}}return f};var r=m("vectorize-text"),n=window||e.global||{},a=n.__TEXT_CACHE||{};n.__TEXT_CACHE={}}).call(this)}).call(this,m("_process"))},{_process:5,"vectorize-text":311}],304:[function(m,w,y){"use strict";var e=m("parse-unit");function r(a,t){var p=e(getComputedStyle(a).getPropertyValue(t));return p[0]*n(p[1],a)}function n(a,t){switch(t=t||document.body,a=(a||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),a){case"%":return t.clientHeight/100;case"ch":case"ex":return function(p,u){var i=document.createElement("div");i.style["font-size"]="128"+p,u.appendChild(i);var c=r(i,"font-size")/128;return u.removeChild(i),c}(a,t);case"em":return r(t,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}w.exports=n},{"parse-unit":265}],305:[function(m,w,y){"use strict";w.exports=function(d){var o=(d=d||{}).center||[0,0,0],_=d.up||[0,1,0],s=d.right||c(_),k=d.radius||1,M=d.theta||0,A=d.phi||0;if(o=[].slice.call(o,0,3),_=[].slice.call(_,0,3),t(_,_),s=[].slice.call(s,0,3),t(s,s),"eye"in d){var E=d.eye,I=[E[0]-o[0],E[1]-o[1],E[2]-o[2]];a(s,I,_),u(s[0],s[1],s[2])<1e-6?s=c(_):t(s,s),k=u(I[0],I[1],I[2]);var C=p(_,I)/k,R=p(s,I)/k;A=Math.acos(C),M=Math.acos(R)}return k=Math.log(k),new f(d.zoomMin,d.zoomMax,o,_,s,k,M,A)};var e=m("filtered-vector"),r=m("gl-mat4/invert"),n=m("gl-mat4/rotate"),a=m("gl-vec3/cross"),t=m("gl-vec3/normalize"),p=m("gl-vec3/dot");function u(d,o,_){return Math.sqrt(Math.pow(d,2)+Math.pow(o,2)+Math.pow(_,2))}function i(d){return Math.min(1,Math.max(-1,d))}function c(d){var o=Math.abs(d[0]),_=Math.abs(d[1]),s=Math.abs(d[2]),k=[0,0,0];o>Math.max(_,s)?k[2]=1:_>Math.max(o,s)?k[0]=1:k[1]=1;for(var M=0,A=0,E=0;E<3;++E)M+=d[E]*d[E],A+=k[E]*d[E];for(E=0;E<3;++E)k[E]-=A/M*d[E];return t(k,k),k}function f(d,o,_,s,k,M,A,E){this.center=e(_),this.up=e(s),this.right=e(k),this.radius=e([M]),this.angle=e([A,E]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(d,o),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var I=0;I<16;++I)this.computedMatrix[I]=.5;this.recalcMatrix(0)}var l=f.prototype;l.setDistanceLimits=function(d,o){d=d>0?Math.log(d):-1/0,o=o>0?Math.log(o):1/0,o=Math.max(o,d),this.radius.bounds[0][0]=d,this.radius.bounds[1][0]=o},l.getDistanceLimits=function(d){var o=this.radius.bounds[0];return d?(d[0]=Math.exp(o[0][0]),d[1]=Math.exp(o[1][0]),d):[Math.exp(o[0][0]),Math.exp(o[1][0])]},l.recalcMatrix=function(d){this.center.curve(d),this.up.curve(d),this.right.curve(d),this.radius.curve(d),this.angle.curve(d);for(var o=this.computedUp,_=this.computedRight,s=0,k=0,M=0;M<3;++M)k+=o[M]*_[M],s+=o[M]*o[M];var A=Math.sqrt(s),E=0;for(M=0;M<3;++M)_[M]-=o[M]*k/s,E+=_[M]*_[M],o[M]/=A;var I=Math.sqrt(E);for(M=0;M<3;++M)_[M]/=I;var C=this.computedToward;a(C,o,_),t(C,C);var R=Math.exp(this.computedRadius[0]),O=this.computedAngle[0],D=this.computedAngle[1],L=Math.cos(O),B=Math.sin(O),j=Math.cos(D),W=Math.sin(D),Y=this.computedCenter,Q=L*j,ne=B*j,X=W,$=-L*W,re=-B*W,H=j,U=this.computedEye,G=this.computedMatrix;for(M=0;M<3;++M){var ie=Q*_[M]+ne*C[M]+X*o[M];G[4*M+1]=$*_[M]+re*C[M]+H*o[M],G[4*M+2]=ie,G[4*M+3]=0}var q=G[1],ee=G[5],te=G[9],se=G[2],ue=G[6],de=G[10],he=ee*de-te*ue,xe=te*se-q*de,ge=q*ue-ee*se,_e=u(he,xe,ge);for(xe/=_e,ge/=_e,G[0]=he/=_e,G[4]=xe,G[8]=ge,M=0;M<3;++M)U[M]=Y[M]+G[2+4*M]*R;for(M=0;M<3;++M){E=0;for(var Ce=0;Ce<3;++Ce)E+=G[M+4*Ce]*U[Ce];G[12+M]=-E}G[15]=1},l.getMatrix=function(d,o){this.recalcMatrix(d);var _=this.computedMatrix;if(o){for(var s=0;s<16;++s)o[s]=_[s];return o}return _};var h=[0,0,0];l.rotate=function(d,o,_,s){if(this.angle.move(d,o,_),s){this.recalcMatrix(d);var k=this.computedMatrix;h[0]=k[2],h[1]=k[6],h[2]=k[10];for(var M=this.computedUp,A=this.computedRight,E=this.computedToward,I=0;I<3;++I)k[4*I]=M[I],k[4*I+1]=A[I],k[4*I+2]=E[I];for(n(k,k,s,h),I=0;I<3;++I)M[I]=k[4*I],A[I]=k[4*I+1];this.up.set(d,M[0],M[1],M[2]),this.right.set(d,A[0],A[1],A[2])}},l.pan=function(d,o,_,s){o=o||0,_=_||0,s=s||0,this.recalcMatrix(d);var k=this.computedMatrix,M=(Math.exp(this.computedRadius[0]),k[1]),A=k[5],E=k[9],I=u(M,A,E),C=k[0],R=k[4],O=k[8],D=C*(M/=I)+R*(A/=I)+O*(E/=I),L=u(C-=M*D,R-=A*D,O-=E*D),B=(C/=L)*o+M*_,j=(R/=L)*o+A*_,W=(O/=L)*o+E*_;this.center.move(d,B,j,W);var Y=Math.exp(this.computedRadius[0]);Y=Math.max(1e-4,Y+s),this.radius.set(d,Math.log(Y))},l.translate=function(d,o,_,s){this.center.move(d,o||0,_||0,s||0)},l.setMatrix=function(d,o,_,s){var k=1;"number"==typeof _&&(k=0|_),(k<0||k>3)&&(k=1);var M=(k+2)%3;o||(this.recalcMatrix(d),o=this.computedMatrix);var A=o[k],E=o[k+4],I=o[k+8];if(s){var C=Math.abs(A),R=Math.abs(E),O=Math.abs(I),D=Math.max(C,R,O);C===D?(A=A<0?-1:1,E=I=0):O===D?(I=I<0?-1:1,A=E=0):(E=E<0?-1:1,A=I=0)}else{var L=u(A,E,I);A/=L,E/=L,I/=L}var B,j,W=o[M],Y=o[M+4],Q=o[M+8],ne=W*A+Y*E+Q*I,X=u(W-=A*ne,Y-=E*ne,Q-=I*ne),$=E*(Q/=X)-I*(Y/=X),re=I*(W/=X)-A*Q,H=A*Y-E*W,U=u($,re,H);if($/=U,re/=U,H/=U,this.center.jump(d,ve,Te,Pe),this.radius.idle(d),this.up.jump(d,A,E,I),this.right.jump(d,W,Y,Q),2===k){var G=o[1],ie=o[5],q=o[9];B=he<0?-Math.PI/2:Math.PI/2,j=Math.atan2(G*$+ie*re+q*H,G*W+ie*Y+q*Q)}else{var se=o[2],ue=o[6],de=o[10],he=se*A+ue*E+de*I,xe=se*W+ue*Y+de*Q,ge=se*$+ue*re+de*H;B=Math.asin(i(he)),j=Math.atan2(ge,xe)}this.angle.jump(d,j,B),this.recalcMatrix(d);var _e=o[2],Ce=o[6],Le=o[10],Ie=this.computedMatrix;r(Ie,o);var Be=Ie[15],ve=Ie[12]/Be,Te=Ie[13]/Be,Pe=Ie[14]/Be,De=Math.exp(this.computedRadius[0]);this.center.jump(d,ve-_e*De,Te-Ce*De,Pe-Le*De)},l.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},l.idle=function(d){this.center.idle(d),this.up.idle(d),this.right.idle(d),this.radius.idle(d),this.angle.idle(d)},l.flush=function(d){this.center.flush(d),this.up.flush(d),this.right.flush(d),this.radius.flush(d),this.angle.flush(d)},l.setDistance=function(d,o){o>0&&this.radius.set(d,Math.log(o))},l.lookAt=function(d,o,_,s){this.recalcMatrix(d),o=o||this.computedEye,_=_||this.computedCenter;var k=(s=s||this.computedUp)[0],M=s[1],A=s[2],E=u(k,M,A);if(!(E<1e-6)){k/=E,M/=E,A/=E;var I=o[0]-_[0],C=o[1]-_[1],R=o[2]-_[2],O=u(I,C,R);if(!(O<1e-6)){I/=O,C/=O,R/=O;var D=this.computedRight,L=D[0],B=D[1],j=D[2],W=k*L+M*B+A*j,Y=u(L-=W*k,B-=W*M,j-=W*A);if(!(Y<.01&&(Y=u(L=M*R-A*C,B=A*I-k*R,j=k*C-M*I))<1e-6)){L/=Y,B/=Y,j/=Y,this.up.set(d,k,M,A),this.right.set(d,L,B,j),this.center.set(d,_[0],_[1],_[2]),this.radius.set(d,Math.log(O));var Q=M*j-A*B,ne=A*L-k*j,X=k*B-M*L,$=u(Q,ne,X),H=L*I+B*C+j*R,U=(Q/=$)*I+(ne/=$)*C+(X/=$)*R,G=Math.asin(i(k*I+M*C+A*R)),ie=Math.atan2(U,H),q=this.angle._state,ee=q[q.length-1],te=q[q.length-2];ee%=2*Math.PI;var se=Math.abs(ee+2*Math.PI-ie),ue=Math.abs(ee-ie),de=Math.abs(ee-2*Math.PI-ie);se<ue&&(ee+=2*Math.PI),de<ue&&(ee-=2*Math.PI),this.angle.jump(this.angle.lastT(),ee,te),this.angle.set(d,ie,G)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(m,w,y){"use strict";w.exports=function(r,n,a){var t=r*n,p=e*r,u=p-(p-r),i=r-u,c=e*n,f=c-(c-n),l=n-f,h=i*l-(t-u*f-i*f-u*l);return a?(a[0]=h,a[1]=t,a):[h,t]};var e=+(Math.pow(2,27)+1)},{}],307:[function(m,w,y){"use strict";w.exports=function(e,r,n){var a=e+r,t=a-e,p=r-t,u=e-(a-t);return n?(n[0]=u+p,n[1]=a,n):[u+p,a]}},{}],308:[function(m,w,y){(function(e){(function(){"use strict";var r=m("bit-twiddle"),n=m("dup"),a=m("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:n([32,0]),UINT16:n([32,0]),UINT32:n([32,0]),BIGUINT64:n([32,0]),INT8:n([32,0]),INT16:n([32,0]),INT32:n([32,0]),BIGINT64:n([32,0]),FLOAT:n([32,0]),DOUBLE:n([32,0]),DATA:n([32,0]),UINT8C:n([32,0]),BUFFER:n([32,0])});var t="undefined"!=typeof Uint8ClampedArray,p="undefined"!=typeof BigUint64Array,u="undefined"!=typeof BigInt64Array,i=e.__TYPEDARRAY_POOL;i.UINT8C||(i.UINT8C=n([32,0])),i.BIGUINT64||(i.BIGUINT64=n([32,0])),i.BIGINT64||(i.BIGINT64=n([32,0])),i.BUFFER||(i.BUFFER=n([32,0]));var c=i.DATA,f=i.BUFFER;function l(L){if(L){var j=r.log2(L.length||L.byteLength);c[j].push(L)}}function h(L){L=r.nextPow2(L);var B=r.log2(L),j=c[B];return j.length>0?j.pop():new ArrayBuffer(L)}function d(L){return new Uint8Array(h(L),0,L)}function o(L){return new Uint16Array(h(2*L),0,L)}function _(L){return new Uint32Array(h(4*L),0,L)}function s(L){return new Int8Array(h(L),0,L)}function k(L){return new Int16Array(h(2*L),0,L)}function M(L){return new Int32Array(h(4*L),0,L)}function A(L){return new Float32Array(h(4*L),0,L)}function E(L){return new Float64Array(h(8*L),0,L)}function I(L){return t?new Uint8ClampedArray(h(L),0,L):d(L)}function C(L){return p?new BigUint64Array(h(8*L),0,L):null}function R(L){return u?new BigInt64Array(h(8*L),0,L):null}function O(L){return new DataView(h(L),0,L)}function D(L){L=r.nextPow2(L);var B=r.log2(L),j=f[B];return j.length>0?j.pop():new a(L)}y.free=function(L){if(a.isBuffer(L))f[r.log2(L.length)].push(L);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(L)&&(L=L.buffer),!L)return;var j=0|r.log2(L.length||L.byteLength);c[j].push(L)}},y.freeUint8=y.freeUint16=y.freeUint32=y.freeBigUint64=y.freeInt8=y.freeInt16=y.freeInt32=y.freeBigInt64=y.freeFloat32=y.freeFloat=y.freeFloat64=y.freeDouble=y.freeUint8Clamped=y.freeDataView=function(L){l(L.buffer)},y.freeArrayBuffer=l,y.freeBuffer=function(L){f[r.log2(L.length)].push(L)},y.malloc=function(L,B){if(void 0===B||"arraybuffer"===B)return h(L);switch(B){case"uint8":return d(L);case"uint16":return o(L);case"uint32":return _(L);case"int8":return s(L);case"int16":return k(L);case"int32":return M(L);case"float":case"float32":return A(L);case"double":case"float64":return E(L);case"uint8_clamped":return I(L);case"bigint64":return R(L);case"biguint64":return C(L);case"buffer":return D(L);case"data":case"dataview":return O(L);default:return null}return null},y.mallocArrayBuffer=h,y.mallocUint8=d,y.mallocUint16=o,y.mallocUint32=_,y.mallocInt8=s,y.mallocInt16=k,y.mallocInt32=M,y.mallocFloat32=y.mallocFloat=A,y.mallocFloat64=y.mallocDouble=E,y.mallocUint8Clamped=I,y.mallocBigUint64=C,y.mallocBigInt64=R,y.mallocDataView=O,y.mallocBuffer=D,y.clearCache=function(){for(var L=0;L<32;++L)i.UINT8[L].length=0,i.UINT16[L].length=0,i.UINT32[L].length=0,i.INT8[L].length=0,i.INT16[L].length=0,i.INT32[L].length=0,i.FLOAT[L].length=0,i.DOUBLE[L].length=0,i.BIGUINT64[L].length=0,i.BIGINT64[L].length=0,i.UINT8C[L].length=0,c[L].length=0,f[L].length=0}}).call(this)}).call(this,void 0!==g?g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(m,w,y){"use strict";function e(n){this.roots=new Array(n),this.ranks=new Array(n);for(var a=0;a<n;++a)this.roots[a]=a,this.ranks[a]=0}w.exports=e;var r=e.prototype;Object.defineProperty(r,"length",{get:function(){return this.roots.length}}),r.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n},r.find=function(n){for(var a=n,t=this.roots;t[n]!==n;)n=t[n];for(;t[a]!==n;){var p=t[a];t[a]=n,a=p}return n},r.link=function(n,a){var t=this.find(n),p=this.find(a);if(t!==p){var u=this.ranks,i=this.roots,c=u[t],f=u[p];c<f?i[t]=p:f<c?i[p]=t:(i[p]=t,++u[t])}}},{}],310:[function(m,w,y){"use strict";w.exports=function(e,r,n){return 0===e.length?e:r?(n||e.sort(r),function(a,t){for(var p=1,u=a.length,i=a[0],c=a[0],f=1;f<u;++f)if(c=i,t(i=a[f],c)){if(f===p){p++;continue}a[p++]=i}return a.length=p,a}(e,r)):(n||e.sort(),function(a){for(var t=1,p=a.length,u=a[0],i=a[0],c=1;c<p;++c,i=u)if(i=u,(u=a[c])!==i){if(c===t){t++;continue}a[t++]=u}return a.length=t,a}(e))}},{}],311:[function(m,w,y){"use strict";w.exports=function(a,t){return"object"==typeof t&&null!==t||(t={}),e(a,t.canvas||r,t.context||n,t)};var e=m("./lib/vtext"),r=null,n=null;"undefined"!=typeof document&&((r=document.createElement("canvas")).width=8192,r.height=1024,n=r.getContext("2d"))},{"./lib/vtext":312}],312:[function(m,w,y){w.exports=function(l,h,d,o){var _=64,s=1.25,k={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return o&&(o.size&&o.size>0&&(_=o.size),o.lineSpacing&&o.lineSpacing>0&&(s=o.lineSpacing),o.styletags&&o.styletags.breaklines&&(k.breaklines=!!o.styletags.breaklines),o.styletags&&o.styletags.bolds&&(k.bolds=!!o.styletags.bolds),o.styletags&&o.styletags.italics&&(k.italics=!!o.styletags.italics),o.styletags&&o.styletags.subscripts&&(k.subscripts=!!o.styletags.subscripts),o.styletags&&o.styletags.superscripts&&(k.superscripts=!!o.styletags.superscripts)),d.font=[o.fontStyle,o.fontVariant,o.fontWeight,_+"px",o.font].filter(function(M){return M}).join(" "),d.textAlign="start",d.textBaseline="alphabetic",d.direction="ltr",f(function(M,A,E,I,C,R){E=(E=E.replace(/\n/g,"")).replace(/\<br\>/g,!0===R.breaklines?"\n":" ");var O="",D=[];for(W=0;W<E.length;++W)D[W]=O;!0===R.bolds&&(D=u("b","b|",E,D)),!0===R.italics&&(D=u("i","i|",E,D)),!0===R.superscripts&&(D=u("sup","+1",E,D)),!0===R.subscripts&&(D=u("sub","-1",E,D));var L=[],B="";for(W=0;W<E.length;++W)null!==D[W]&&(B+=E[W],L.push(D[W]));var j,W,Y,Q,ne,X=B.split("\n"),$=X.length,re=Math.round(C*I),H=I,U=2*I,G=0,ie=$*re+U;M.height<ie&&(M.height=ie),A.fillStyle="#000",A.fillRect(0,0,M.width,M.height),A.fillStyle="#fff";var q=0,ee="";function te(){if(""!==ee){var Ce=A.measureText(ee).width;A.fillText(ee,H+Y,U+Q),Y+=Ce}}function se(){return Math.round(ne)+"px "}function ue(Ce,Le){var Ie=""+A.font;if(!0===R.subscripts){var Be=Ce.indexOf("-"),ve=Le.indexOf("-"),Te=Be>-1?parseInt(Ce[1+Be]):0,Pe=ve>-1?parseInt(Le[1+ve]):0;Te!==Pe&&(Ie=Ie.replace(se(),"?px "),ne*=Math.pow(.75,Pe-Te),Ie=Ie.replace("?px ",se())),Q+=.25*re*(Pe-Te)}if(!0===R.superscripts){var De=Ce.indexOf("+"),Fe=Le.indexOf("+"),Ue=De>-1?parseInt(Ce[1+De]):0,He=Fe>-1?parseInt(Le[1+Fe]):0;Ue!==He&&(Ie=Ie.replace(se(),"?px "),ne*=Math.pow(.75,He-Ue),Ie=Ie.replace("?px ",se())),Q-=.25*re*(He-Ue)}if(!0===R.bolds){var Ke=Ce.indexOf("b|")>-1,st=Le.indexOf("b|")>-1;!Ke&&st&&(Ie=Ve?Ie.replace("italic ","italic bold "):"bold "+Ie),Ke&&!st&&(Ie=Ie.replace("bold ",""))}if(!0===R.italics){var Ve=Ce.indexOf("i|")>-1,$e=Le.indexOf("i|")>-1;!Ve&&$e&&(Ie="italic "+Ie),Ve&&!$e&&(Ie=Ie.replace("italic ",""))}A.font=Ie}for(j=0;j<$;++j){var de=X[j]+"\n";for(Y=0,Q=j*re,ne=I,ee="",W=0;W<de.length;++W){var he=W+q<L.length?L[W+q]:L[L.length-1];O===he?ee+=de[W]:(te(),ee=de[W],void 0!==he&&(ue(O,he),O=he))}te(),q+=de.length;var xe=0|Math.round(Y+2*H);G<xe&&(G=xe)}var ge=G,_e=U+re*$;return r(A.getImageData(0,0,ge,_e).data,[_e,ge,4]).pick(-1,-1,0).transpose(1,0)}(h,d,l,_,s,k),o,_)},w.exports.processPixels=f;var e=m("surface-nets"),r=m("ndarray"),n=m("simplify-planar-graph"),a=m("clean-pslg"),t=m("cdt2d"),p=m("planar-graph-to-polyline");function u(l,h,d,o){for(var _="<"+l+">",s="</"+l+">",k=_.length,M=s.length,A="+"===h[0]||"-"===h[0],E=0,I=-M;E>-1&&-1!==(E=d.indexOf(_,E))&&-1!==(I=d.indexOf(s,E+k))&&!(I<=E);){for(var C=E;C<I+M;++C)if(C<E+k||C>=I)o[C]=null,d=d.substr(0,C)+" "+d.substr(C+1);else if(null!==o[C]){var R=o[C].indexOf(h[0]);-1===R?o[C]+=h:A&&(o[C]=o[C].substr(0,R+1)+(1+parseInt(o[C][R+1]))+o[C].substr(R+2))}var O=E+k,D=d.substr(O,I-O).indexOf(_);E=-1!==D?D:I+M}return o}function c(l,h,d,o){var _=function i(l,h){var d=e(l,128);return h?n(d.cells,d.positions,.25):{edges:d.cells,positions:d.positions}}(l,o),s=function(j,W,Y){for(var Q=W.textAlign||"start",ne=W.textBaseline||"alphabetic",X=[1<<30,1<<30],$=[0,0],re=j.length,H=0;H<re;++H)for(var U=j[H],G=0;G<2;++G)X[G]=0|Math.min(X[G],U[G]),$[G]=0|Math.max($[G],U[G]);var ie=0;switch(Q){case"center":ie=-.5*(X[0]+$[0]);break;case"right":case"end":ie=-$[0];break;case"left":case"start":ie=-X[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+Q+"'")}var q=0;switch(ne){case"hanging":case"top":q=-X[1];break;case"middle":q=-.5*(X[1]+$[1]);break;case"alphabetic":case"ideographic":q=-3*Y;break;case"bottom":q=-$[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+ne+"'")}var ee=1/Y;return"lineHeight"in W?ee*=+W.lineHeight:"width"in W?ee=W.width/($[0]-X[0]):"height"in W&&(ee=W.height/($[1]-X[1])),j.map(function(te){return[ee*(te[0]+ie),ee*(te[1]+q)]})}(_.positions,h,d),k=_.edges,M="ccw"===h.orientation;if(a(s,k),h.polygons||h.polygon||h.polyline){for(var A=p(k,s),E=new Array(A.length),I=0;I<A.length;++I){for(var C=A[I],R=new Array(C.length),O=0;O<C.length;++O){for(var D=C[O],L=new Array(D.length),B=0;B<D.length;++B)L[B]=s[D[B]].slice();M&&L.reverse(),R[O]=L}E[I]=R}return E}return h.triangles||h.triangulate||h.triangle?{cells:t(s,k,{delaunay:!1,exterior:!1,interior:!0}),positions:s}:{edges:k,positions:s}}function f(l,h,d){try{return c(l,h,d,!0)}catch(o){}try{return c(l,h,d,!1)}catch(o){}return h.polygons||h.polyline||h.polygon?[]:h.triangles||h.triangulate||h.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(m,w,y){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=_);var e=!1;if("function"==typeof WeakMap){var r=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var n=new r,a=Object.freeze({});if(n.set(a,1),1===n.get(a))return void(w.exports=WeakMap);e=!0}}var t=Object.getOwnPropertyNames,p=Object.defineProperty,u=Object.isExtensible,i="weakmap:ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var c=new ArrayBuffer(25),f=new Uint8Array(c);crypto.getRandomValues(f),i="weakmap:rand:"+Array.prototype.map.call(f,function(E){return(E%36).toString(36)}).join("")+"___"}if(p(Object,"getOwnPropertyNames",{value:function(E){return t(E).filter(s)}}),"getPropertyNames"in Object){var l=Object.getPropertyNames;p(Object,"getPropertyNames",{value:function(E){return l(E).filter(s)}})}!function(){var E=Object.freeze;p(Object,"freeze",{value:function(R){return k(R),E(R)}});var I=Object.seal;p(Object,"seal",{value:function(R){return k(R),I(R)}});var C=Object.preventExtensions;p(Object,"preventExtensions",{value:function(R){return k(R),C(R)}})}();var h=!1,d=0,o=function(){this instanceof o||A();var E=[],I=[],C=d++;return Object.create(o.prototype,{get___:{value:M(function(R,O){var D,L=k(R);return L?C in L?L[C]:O:(D=E.indexOf(R))>=0?I[D]:O})},has___:{value:M(function(R){var O=k(R);return O?C in O:E.indexOf(R)>=0})},set___:{value:M(function(R,O){var D,L=k(R);return L?L[C]=O:(D=E.indexOf(R))>=0?I[D]=O:(I[D=E.length]=O,E[D]=R),this})},delete___:{value:M(function(R){var O,D,L=k(R);return L?C in L&&delete L[C]:!((O=E.indexOf(R))<0||(D=E.length-1,E[O]=void 0,I[O]=I[D],E[O]=E[D],E.length=D,I.length=D,0))})}})};o.prototype=Object.create(Object.prototype,{get:{value:function(E,I){return this.get___(E,I)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,I){return this.set___(E,I)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),"function"==typeof r?function(){function E(){this instanceof o||A();var I,C=new r,R=void 0,O=!1;return I=e?function(D,L){return C.set(D,L),C.has(D)||(R||(R=new o),R.set(D,L)),this}:function(D,L){if(O)try{C.set(D,L)}catch(B){R||(R=new o),R.set___(D,L)}else C.set(D,L);return this},Object.create(o.prototype,{get___:{value:M(function(D,L){return R?C.has(D)?C.get(D):R.get___(D,L):C.get(D,L)})},has___:{value:M(function(D){return C.has(D)||!!R&&R.has___(D)})},set___:{value:M(I)},delete___:{value:M(function(D){var L=!!C.delete(D);return R&&R.delete___(D)||L})},permitHostObjects___:{value:M(function(D){if(D!==_)throw new Error("bogus call to permitHostObjects___");O=!0})}})}e&&"undefined"!=typeof Proxy&&(Proxy=void 0),E.prototype=o.prototype,w.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),w.exports=o)}function _(E){E.permitHostObjects___&&E.permitHostObjects___(_)}function s(E){return!("weakmap:"==E.substr(0,"weakmap:".length)&&"___"===E.substr(E.length-3))}function k(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var I=E[i];if(I&&I.key===E)return I;if(u(E)){I={key:E};try{return p(E,i,{value:I,writable:!1,enumerable:!1,configurable:!1}),I}catch(C){return}}}function M(E){return E.prototype=null,Object.freeze(E)}function A(){h||"undefined"==typeof console||(h=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(m,w,y){var e=m("./hidden-store.js");w.exports=function(){var r={};return function(n){if(("object"!=typeof n||null===n)&&"function"!=typeof n)throw new Error("Weakmap-shim: Key must be object");var a=n.valueOf(r);return a&&a.identity===r?a:e(n,r)}}},{"./hidden-store.js":315}],315:[function(m,w,y){w.exports=function(e,r){var n={identity:r},a=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(t){return t!==r?a.apply(this,arguments):n},writable:!0}),n}},{}],316:[function(m,w,y){var e=m("./create-store.js");w.exports=function(){var r=e();return{get:function(n,a){var t=r(n);return t.hasOwnProperty("value")?t.value:a},set:function(n,a){return r(n).value=a,this},has:function(n){return"value"in r(n)},delete:function(n){return delete r(n).value}}}},{"./create-store.js":314}],317:[function(m,w,y){"use strict";var n,a;w.exports=(n=function(){return function(n,a,t,p,u,i){var c=n[0],f=t[0],l=[0],h=f;p|=0;var d=0,o=f;for(d=0;d<c;++d){var _=a[p]-i,s=a[p+h]-i;_>=0!=s>=0&&u.push(l[0]+.5+.5*(_+s)/(_-s)),p+=o,++l[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),a={},function(t,p,u){var i=t.dtype,c=t.order,f=[i,c.join()].join(),l=a[f];return l||(a[f]=l=n([i,c])),l(t.shape.slice(0),t.data,t.stride,0|t.offset,p,u)})},{}],318:[function(m,w,y){"use strict";w.exports=function(r,n){var a=[];return n=+n||0,e(r.hi(r.shape[0]-1),a,n),a};var e=m("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[27])(27)}},vd=>{vd(vd.s=958)}]);